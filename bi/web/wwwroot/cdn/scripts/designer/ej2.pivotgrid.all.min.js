/*!
*  filename: ej2.pivotgrid.all.min.js
*  version : 14.2.4.4
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(()=>{function n(r){var f=t[r],u;return void 0!==f?f.exports:(u=t[r]={exports:{}},i[r](u,u.exports,n),u.exports)}var i={864:(n,t)=>{t.C=function(n,t,i,r){var u=n||{},e=arguments.length;r&&(e-=1);for(var s=function(n){if(!o[n])return"continue";var t=o[n];Object.keys(t).forEach(function(n){var f,e=u[n],i=t[n];r&&(isObject(i)||Array.isArray(i))?isObject(i)?(f=e||{},u[n]=i({},f,i,r)):(f=e||[],u[n]=i([],f,i,r)):u[n]=i})},o=arguments,f=1;f<e;f++)s(f);return u}}},t={};n.d=(t,i)=>{for(var r in i)n.o(i,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})};n.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);n.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};(()=>{function aw(n,i,r){for(var e,u=t.extend([],n,null),f=0;f<u.length;f++)for(e=0;e<i.length;e++)u[f][i[e]]instanceof Date&&(u[f][i[e]]=u[f][i[e]].getTime());return u.sort(function(n,t){for(var u=0,f=0,e=0;e<i.length;e++)u+=n[i[e]],f+=t[i[e]];return!r&&u<f||r&&u>f?-1:u===f?0:1}),u}function rf(n){return-1!==n.indexOf("<br>")}function vu(n){for(var i,u=t.extend([],n.points,null,!0),f=[],e=0,r=0;r<u.length;r++)i=u[r],t.isNullOrUndefined(i.x)||(i.index=e++,f.push(i));return f}function ks(n,t){var u,r=n.component,f=0,e=0,o="Top"===r.titleStyle.position||"Bottom"===r.titleStyle.position&&!r.legendSettings.visible?15:5;return r.title&&(f=i.measureText(r.title,r.titleStyle,r.themeStyle.chartTitleFont).height*r.titleCollection.length+o,r.subTitle&&(e=i.measureText(r.subTitle,r.subTitleStyle,r.themeStyle.chartSubTitleFont).height*r.subTitleCollection.length)),t?"Top"===n.axis.scrollbarSettings.position?(u=r.margin.top+5+(n.height+5)*r.scrollBarModule.topScrollBarCount+("Top"===r.titleStyle.position?f+r.titleStyle.border.width:0)+("Top"===r.subTitleStyle.position?r.subTitleStyle.border.width+e:0),r.scrollBarModule.topScrollBarCount++):"Bottom"===n.axis.scrollbarSettings.position&&(u=r.availableSize.height-((n.height+5)*r.scrollBarModule.bottomScrollBarCount+n.height+r.margin.bottom+5+("Bottom"===r.titleStyle.position?f+r.titleStyle.border.width:0)+("Bottom"===r.subTitleStyle.position?r.subTitleStyle.border.width+e:0)),r.scrollBarModule.bottomScrollBarCount++):"Right"===n.axis.scrollbarSettings.position?(u=r.availableSize.width-((n.height+5)*r.scrollBarModule.rightScrollBarCount+n.height+5+r.margin.right+("Right"===r.titleStyle.position?f+r.titleStyle.border.width:0)+("Right"===r.subTitleStyle.position?r.subTitleStyle.border.width+e:0)),r.scrollBarModule.rightScrollBarCount++):"Left"===n.axis.scrollbarSettings.position&&(u=r.margin.left+5+(n.height+5)*r.scrollBarModule.leftScrollBarCount+("Left"===r.titleStyle.position?f+r.titleStyle.border.width:0)+("Left"===r.subTitleStyle.position?r.subTitleStyle.border.width+e:0),r.scrollBarModule.leftScrollBarCount++),u}function yu(n,r,u,f,e){var y=f.element.style.transform,l,s,nt,a,h;y&&(f.element.style.transform="");var p,w,b,k,d,g=new i.SvgRenderer(f.element.id),o=[],c={id:"rotate_text",x:f.initialClipRect.x,y:f.initialClipRect.y,"font-size":n.size||e.size,"font-style":n.fontStyle||e.fontStyle,"font-family":n.fontFamily,"font-weight":n.fontWeight||e.fontWeight,transform:"rotate("+u+", 0, 0)","text-anchor":"middle"};if(p=rf(r)?(o=r.split("<br>"))[0]:r,l=g.createText(c,p),f.delayRedraw||f.redraw||f.stockChart||f.element.appendChild(f.svgObject),"string"!=typeof o&&o.length>1)for(s=1,nt=o.length;s<nt;s++)w=i.measureText(o[s],n,f.themeStyle.axisLabelFont).height,b=c.y+s*w,k=o[s],d=g.createTSpan({x:c.x,id:c.id,y:b},k),l.appendChild(d);if(a=f.svgRenderer.createSvg({id:"AxisLabelMax_svg",width:f.availableSize.width,height:f.availableSize.height}),document.body.appendChild(a),a.appendChild(l),h=l.getBoundingClientRect(),y&&(f.element.style.transform=y),t.remove(a),f.delayRedraw||f.redraw||f.stockChart||f.pointsAdded||t.remove(f.svgObject),f.enableCanvas){var tt=i.measureText(r,n,f.themeStyle.axisLabelFont).width,it=i.measureText(r,n,f.themeStyle.axisLabelFont).height,v=u*Math.PI/180,rt=Math.abs(Math.cos(v)*tt)+Math.abs(Math.sin(v)*it),ut=Math.abs(Math.sin(v)*tt)+Math.abs(Math.cos(v)*it);return new i.Size(rt,ut)}return new i.Size(h.right-h.left,h.bottom-h.top)}function v(n){if(!n)return null;var i="string"==typeof n?r(n):n;i&&t.remove(i)}function hi(n,t){return Math.log(n)/Math.log(t)}function uf(n,r,u,f,e,o,s,h,c){var l=document.getElementById(e),a=i.measureText(n,{fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"Regular"}),y=a.width+5;r=r+y>f?r-(y+15):r;c&&r<c.x&&(r=c.x);u=h?u-a.height/2:u+15;c&&u+a.height>c.y+c.height&&(u-=u+a.height-(c.y+c.height));l?(l.innerText=n,l.style.top=u.toString()+"px",l.style.left=(r+15).toString()+"px"):((l=t.createElement("div",{id:e,styles:"top:"+u.toString()+"px;left:"+(r+15).toString()+'px;background-color: rgb(255, 255, 255) !important; color:black !important; position:absolute;border:1px solid rgb(112, 112, 112); padding-left : 3px; padding-right : 2px;padding-bottom : 2px; padding-top : 2px; font-size:12px; font-family: "Segoe UI"'})).innerText=n,o.appendChild(l),parseInt(l.style.left.replace("px",""),10)<0&&(l.style.left="0px"));s&&setTimeout(function(){v(e)},1500)}function we(n,t){return n<t.max&&n>t.min}function si(n,t){return n<=t.max&&n>=t.min}function po(n,t){return"Logarithmic"===t.valueType?hi(n,t.logBase):n}function ni(n,t,i,r){if(r.chart.zoomModule&&r.chart.zoomSettings.enableAnimation)return!0;var f=po(t.xValue,r.xAxis),e=n?po(n.xValue,r.xAxis):f,o=i?po(i.xValue,r.xAxis):f,u=Math.floor(r.xAxis.visibleRange.min),s=Math.ceil(r.xAxis.visibleRange.max);return e>=u&&e<=s||f>=u&&f<=s||o>=u&&o<=s||u>=e&&u<=o}function lt(n){for(var i=0,t=0,r=n;t<r.length;t++)i+=r[t];return i}function nc(n,i,r,u,f){var o=0,s=0,e;if(null!==u)for(e=i+1;e<r;e++)-1===u.indexOf(e)&&(e===f.intermediateSumIndexes[s]||f.intermediateSumIndexes[f.intermediateSumIndexes.length-1]<e)&&(o+=n[e][f.yName],e===f.intermediateSumIndexes[s]&&(s+=1));else for(e=i+1;e<r;e++)t.isNullOrUndefined(n[e][f.yName])||t.isNullOrUndefined(f.sumIndexes)||-1!==f.sumIndexes.indexOf(e)||(o+=n[e][f.yName]);return o}function vr(n,t){return n.x+=t.left,n.y+=t.top,n.width-=t.left+t.right,n.height-=t.top+t.bottom,n}function tc(n,t){return n.x+=t.x,n.y+=t.y,n.width-=t.x+t.width,n.height-=t.y+t.height,n}function yi(n,t,i){var r=n*Math.PI/180;return new h(Math.cos(r)*t+i.x,Math.sin(r)*t+i.y)}function ds(n){return n*(Math.PI/180)}function da(n,t,i,r){for(var e=[],f=0;f<4;f++){var u=n[f],o=u.x-t,s=u.y-i,c=o*Math.cos(ds(r))-s*Math.sin(ds(r)),l=o*Math.sin(ds(r))+s*Math.cos(ds(r));u.x=c+t;u.y=l+i;e.push(new h(u.x,u.y))}return e}function ga(n,i){for(var f,e,r,o,u,s,c,y=[n,i],l,a=0;a<y.length;a++)for(l=y[a],o=0;o<l.length;o++){var b=(o+1)%l.length,p=l[o],w=l[b],v=new h(w.y-p.y,p.x-w.x);for(f=e=void 0,u=0;u<n.length;u++)r=v.x*n[u].x+v.y*n[u].y,(t.isNullOrUndefined(f)||r<f)&&(f=r),(t.isNullOrUndefined(e)||r>e)&&(e=r);for(s=c=void 0,u=0;u<i.length;u++)r=v.x*i[u].x+v.y*i[u].y,(t.isNullOrUndefined(s)||r<s)&&(s=r),(t.isNullOrUndefined(c)||r>c)&&(c=r);if(e<s||c<f)return!1}return!0}function vw(n,t){var i=Math.atan2(t.y-n.y,t.x-n.x);return(i=i<0?6.283+i:i)*(180/Math.PI)}function sr(n,t){for(var r=[],i=0;i<=t-1;i++)r.push(n[i]);return r}function ut(n,t){var i=t.visibleRange,r=(n-i.min)/i.delta;return(t.isChart?t.isAxisInverse:t.isInversed)?1-r:r}function bf(n,t,i,r,u,f){n="Logarithmic"===i.valueType?hi(n>1?n:1,i.logBase):n;t="Logarithmic"===r.valueType?hi(t>1?t:1,r.logBase):t;n+="Category"===i.valueType&&"BetweenTicks"===i.labelPlacement&&"Radar"!==f.type?.5:0;var e=f.chart.radius*ut(t,r),o=fu(nu(n,i),f.chart.primaryXAxis.startAngle);return{x:f.clipRect.width/2+f.clipRect.x+e*o.x,y:f.clipRect.height/2+f.clipRect.y+e*o.y}}function uu(n,t){void 0===t&&(t=!1);var i=["NaN","NaN"];return n.indexOf("_polygon")>-1?i=["NaN","NaN"]:n.indexOf("_Point_")>-1?i=n.split("_Series_")[1].split("_Point_"):n.indexOf("_shape_")>-1&&(!t||t&&-1===n.indexOf("_legend_"))?(i=n.split("_shape_"))[0]="0":n.indexOf("_text_")>-1&&(!t||t&&-1===n.indexOf("_legend_"))?(i=n.split("_text_"))[0]="0":n.indexOf("_datalabel_")>-1?(i=n.split("_datalabel_")[1].split("_g_"))[0]=i[0].replace("Series_",""):n.indexOf("TextGroup")>-1?(i=n.split("TextGroup"))[0]=i[1]:n.indexOf("ShapeGroup")>-1&&((i=n.split("ShapeGroup"))[0]=i[1]),new ir(parseInt(i[0],10),parseInt(i[1],10))}function fu(n,t){t=t<0?t+360:t;var i=Math.PI*(1.5-2*n);return i+=t*Math.PI/180,{x:Math.cos(i),y:Math.sin(i)}}function nu(n,t){var i,u,r=t.visibleRange;return"Category"!==t.valueType?(i=r.max-("DateTime"===t.valueType?t.dateTimeInterval:r.interval)-r.min,u=t.visibleLabels.length-1,i=0===i?1:i):(i=1===t.visibleLabels.length?1:t.visibleLabels[t.visibleLabels.length-1].value-t.visibleLabels[0].value,u=t.visibleLabels.length),t.isAxisInverse?(n-r.min)/i*(1-1/u):1-(n-r.min)/i*(1-1/u)}function yw(n,i,u,f,e){var o=r(n),s="top:"+u.toString()+"px;left:"+f.toString()+"px;color:black !important; background:#FFFFFF !important; position:absolute;border:1px solid #707070;font-size:"+e+";border-radius:2px; z-index:1";o?(o.setAttribute("innerHTML","&nbsp;"+i+"&nbsp;"),o.style.cssText=s):(o=t.createElement("div",{id:n,innerHTML:"&nbsp;"+i+"&nbsp;",styles:s}),document.body.appendChild(o))}function pw(n,r,u,f,e,o){for(var nt,k,d,s,w,l,v,a,g,p=r.isAxisOpposedPosition,tt=n.enableRtl?"end":e?"start":"auto",it=n.availableSize.width,y=r.scrollbarSettings.enable||r.zoomingScrollBar&&r.zoomingScrollBar.svgObject?r.scrollBarHeight:0,b=n.enableRtl&&!e&&!r.isInversed||r.isInversed&&!(n.enableRtl&&!e),c=0;c<2;c++)(s=i.measureText(c?b?r.startLabel:r.endLabel:b?r.endLabel:r.startLabel,r.labelStyle,n.themeStyle.axisLabelFont),e?(a=c?new h(o.x-y,o.y+3):new h(r.rect.x-y,o.y+o.height-3),l=o.x+(p?o.width+5+y:-(s.width+5+5+y)),v=o.y+(c?0:o.height-s.height-5),l+=l<0||it<l+s.width+5?p?-s.width/2:s.width/2:0,g=ic(3,3,new i.Rect(l,v,s.width+5,s.height+5),a,5,!1,!1,!p,a.x,a.y+(c?-3:3))):(a=new h(c?o.x+o.width-3:o.x+3,o.y+o.height+y),l=o.x+(c?o.width-s.width-5:0),v=p?o.y-s.height-10-y:o.y+o.height+5+y,g=ic(3,3,new i.Rect(l,v,s.width+5,s.height+5),a,5,p,!p,!1,a.x+(c?3:-3),a.y)),l+=2.5,v=v+s.height/4*3+2.5,w=n.renderer.drawPath({id:n.element.id+"_Zoom_"+f+"_AxisLabel_Shape_"+c,fill:n.themeStyle.crosshairFill,width:2,color:n.themeStyle.crosshairFill,opacity:1,"stroke-dasharray":null,d:g},null),u.appendChild(w),"Fluent"===n.theme||"FluentDark"===n.theme)&&(nt=n.element.id+"_shadow",w.setAttribute("filter",t.Browser.isIE?"":"url(#"+nt+")"),k='<filter id="'+nt+'" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="3"/>',k+='<feOffset dx="3" dy="3" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="0.5"/>',k+='<\/feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/><\/feMerge><\/filter>',d=n.renderer.createDefs(),d.setAttribute("id",n.element.id+"SVG_tooltip_definition"),u.appendChild(d),d.innerHTML=k,w.setAttribute("stroke","#cccccc"),w.setAttribute("stroke-width","0.5")),ct(n.renderer,new i.TextOption(n.element.id+"_Zoom_"+f+"_AxisLabel_"+c,l,v,tt,c?b?r.startLabel:r.endLabel:b?r.endLabel:r.startLabel),{color:n.themeStyle.crosshairLabelFont.color,fontFamily:"Segoe UI",fontWeight:"Regular",size:"11px"},n.themeStyle.crosshairLabelFont.color,u,null,null,null,null,null,null,0,null,null,null,n.themeStyle.crosshairLabelFont);return u}function ic(n,t,i,r,u,f,e,o,s,h){var c="",l=i.x,y=i.y,v=i.x+i.width,a=i.y+i.height;return f?(c=(c=(c=c.concat("M "+l+" "+(y+t)+" Q "+l+" "+y+" "+(l+n)+" "+y)).concat(" L "+(v-n)+" "+y+" Q "+v+" "+y+" "+v+" "+(y+t))).concat(" L "+v+" "+(a-t)+" Q "+v+" "+a+" "+(v-n)+" "+a),0!==u&&(c=(c=c.concat(" L "+(r.x+u/2)+" "+a)).concat(" L "+s+" "+(a+u)+" L "+(r.x-u/2)+" "+a)),c=r.x-u/2>l||0===u?c.concat(" L "+(l+n)+" "+a+" Q "+l+" "+a+" "+l+" "+(a-t)+" z"):c.concat(" L "+l+" "+(a+t)+" z")):c=e?(c=(c=(c=(c=(c=c.concat("M "+l+" "+(y+t)+" Q "+l+" "+y+" "+(l+n)+" "+y+" L "+(r.x-u/2)+" "+y)).concat(" L "+s+" "+r.y)).concat(" L "+(r.x+u/2)+" "+y)).concat(" L "+(v-n)+" "+y+" Q "+v+" "+y+" "+v+" "+(y+t))).concat(" L "+v+" "+(a-t)+" Q "+v+" "+a+" "+(v-n)+" "+a)).concat(" L "+(l+n)+" "+a+" Q "+l+" "+a+" "+l+" "+(a-t)+" z"):o?(c=(c=(c=(c=(c=c.concat("M "+l+" "+(y+t)+" Q "+l+" "+y+" "+(l+n)+" "+y)).concat(" L "+(v-n)+" "+y+" Q "+v+" "+y+" "+v+" "+(y+t)+" L "+v+" "+(r.y-u/2))).concat(" L "+(v+u)+" "+h)).concat(" L "+v+" "+(r.y+u/2))).concat(" L "+v+" "+(a-t)+" Q "+v+" "+a+" "+(v-n)+" "+a)).concat(" L "+(l+n)+" "+a+" Q "+l+" "+a+" "+l+" "+(a-t)+" z"):(c=(c=(c=(c=(c=c.concat("M "+(l+n)+" "+y+" Q "+l+" "+y+" "+l+" "+(y+t)+" L "+l+" "+(r.y-u/2))).concat(" L "+(l-u)+" "+h)).concat(" L "+l+" "+(r.y+u/2))).concat(" L "+l+" "+(a-t)+" Q "+l+" "+a+" "+(l+n)+" "+a)).concat(" L "+(v-n)+" "+a+" Q "+v+" "+a+" "+v+" "+(a-t))).concat(" L "+v+" "+(y+t)+" Q "+v+" "+y+" "+(v-n)+" "+y+" z"),c}function ht(n,t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),n>=i.x-r&&n<=i.x+i.width+r&&t>=i.y-u&&t<=i.y+i.height+u}function rc(n,t,i){return(i.isAxisInverse?1-n/t:n/t)*i.visibleRange.delta+i.visibleRange.min}function uc(n,t,i){return(i.isAxisInverse?n/t:1-n/t)*i.visibleRange.delta+i.visibleRange.min}function wo(n,t){void 0===t&&(t=!1);var i=n.clipRect;!t||"Polar"!==n.type&&"Radar"!==n.type?n.chart.requireInvertedAxis?(i.x=n.yAxis.rect.x,i.y=n.xAxis.rect.y,i.width=n.yAxis.rect.width,i.height=n.xAxis.rect.height):(i.x=n.xAxis.rect.x,i.y=n.yAxis.rect.y,i.width=n.xAxis.rect.width,i.height=n.yAxis.rect.height):"Scatter"===n.drawType?(i.x=n.xAxis.rect.x,i.y=n.yAxis.rect.y,i.width=n.xAxis.rect.width,i.height=n.yAxis.rect.height):(i.x=n.xAxis.rect.x/2,i.y=n.yAxis.rect.y/2,i.width=n.xAxis.rect.width,i.height=n.yAxis.rect.height)}function et(n){return n.substr(0,1).toLowerCase()+n.substr(1)}function ww(n,t,r){var u,f,e,o;return r?(u=t.rect.x,f=n.rect.y,e=t.rect.width,o=n.rect.height):(u=n.rect.x,f=t.rect.y,e=n.rect.width,o=t.rect.height),new i.Rect(u,f,e,o)}function iv(n,i){for(var r,v,l,y,s,a,f,e,o,u=Number.MAX_VALUE,h=[],c=0;c<i.length;c++)if(r=i[c],f=[],r.visible&&(n.name===r.xAxisName||"primaryXAxis"===n.name&&null===r.xAxisName||n.name===r.chart.primaryXAxis.name&&!r.xAxisName))if(r.type.indexOf("Stacking")>-1&&-1===h.indexOf(r.stackingGroup)&&h.push(r.stackingGroup),(f=r.points.map(function(n){return n.xValue})).sort(function(n,t){return n-t}),1===f.length)"Category"===n.valueType?(v=r.xAxis.visibleRange.min,l=f[0]-v,0!==l&&(u=Math.min(u,l))):"DateTime"===n.valueType?(y=1===i.length?2592e4:2592e6,o=r.xMin===r.xMax?r.xMin-y:r.xMin,0!=(e=f[0]-(t.isNullOrUndefined(o)?n.visibleRange.min:o))&&(u=Math.min(u,e))):(o=r.xMin,0!=(e=f[0]-(t.isNullOrUndefined(o)?n.visibleRange.min:o))&&(u=Math.min(u,e)));else for(s=0;s<f.length;s++)a=f[s],s>0&&a&&0!==(e=r.type.indexOf("Stacking")>-1&&"Category"===n.valueType?h.length:a-f[s-1])&&(u=Math.min(u,e));return u===Number.MAX_VALUE&&(u=1),u}function fe(n){var t;return"Linear"===n&&(t=ti),t}function ti(n,t,i,r){return-i*Math.cos(n/r*(Math.PI/2))+i+t}function pu(n,i,r,u,f,e,o){var s=!!u.accumulation,h;n.style.visibility="hidden";h=n.getAttribute("transform");new t.Animation({}).animate(n,{duration:r,delay:i,progress:function(t){if(t.timeStamp>t.delay&&(t.element.style.visibility="visible"),s?t.element.id.indexOf("_datalabel_Series_")>-1:(t.element.parentElement.parentElement.id.indexOf("DataLabel")>-1||n.id.indexOf("StackLabel")>-1)&&(!u.chart.stackLabels.visible||!n.getAttribute("data-collide"))){t.element.style.visibility="visible";var i=s?u.opacity:u.marker.dataLabel.opacity,r=t.timeStamp/500*i;s||n.id.indexOf("StackLabel")>-1?n.setAttribute("opacity",Math.min(r,i).toString()):(u.textElement.setAttribute("opacity",Math.min(r,i).toString()),u.shapeElement.setAttribute("opacity",Math.min(r,i).toString()))}},end:function(){("Scatter"===u.type||"Bubble"===u.type)&&u.lastValueLabelElement&&u.lastValueLabelElement.setAttribute("visibility","visible");var t=document.getElementById(u.chart.element.id+"_Annotation_Collections");t&&"Line"!==u.type&&(t.style.visibility="visible");(n.parentElement.parentElement.id.indexOf("DataLabel")>-1||n.id.indexOf("_datalabel_Series_")>-1||n.id.indexOf("StackLabel")>-1)&&(s||n.id.indexOf("StackLabel")>-1?n.setAttribute("opacity",u.opacity.toString()):(u.textElement.setAttribute("opacity",u.marker.dataLabel.opacity.toString()),u.shapeElement.setAttribute("opacity",u.marker.dataLabel.opacity.toString())));u.chart.stackLabels.visible&&n.getAttribute("data-collide")||(n.style.visibility="");n.setAttribute("transform",h||"");"Scatter"!==u.type&&"Bubble"!==u.type||o||f!==u.points.length-1||u.chart.trigger("animationComplete",{series:u.chart.isBlazor?{}:u})}})}function bw(n,r,u,f,e){var o=function(t){n.setAttribute("x",t.x+"");n.setAttribute("y",t.y+"");n.setAttribute("width",t.width+"");n.setAttribute("height",t.height+"")};new t.Animation({}).animate(t.createElement("div"),{duration:u,delay:r,progress:function(n){o(new i.Rect(ti(n.timeStamp,e.x,f.x-e.x,n.duration),ti(n.timeStamp,e.y,f.y-e.y,n.duration),ti(n.timeStamp,e.width,f.width-e.width,n.duration),ti(n.timeStamp,e.height,f.height-e.height,n.duration)))},end:function(){o(f)}})}function kf(n,i,r,u,f){var c;if(!r||!u&&!n)return null;c=300;t.isNullOrUndefined(f)||(c=f);var s,o,l,a=u||n.getAttribute("d"),y=a.split(/(?=[LMCZAQ])/),v=i.split(/(?=[LMCZAQ])/),e=[],h=[];n.setAttribute("d",a);new t.Animation({}).animate(t.createElement("div"),{duration:c,progress:function(t){s="";y.map(function(n,i){if(e=n.split(" "),h=v[i]?v[i].split(" "):e,"Z"===e[0]?s+="Z ":""===e[0]?s="":s+=e[0]+" "+ti(t.timeStamp,+e[1],+h[1]-+e[1],t.duration)+" "+ti(t.timeStamp,+e[2],+h[2]-+e[2],t.duration)+" ","C"===e[0]||"Q"===e[0])for(o=3,l="Q"===e[0]?4:6;o<l;)s+=ti(t.timeStamp,+e[o],+h[o]-+e[o],t.duration)+" "+ti(t.timeStamp,+e[++o],+h[o]-+e[o],t.duration)+" ",++o;"A"===e[0]&&(s+="0 0 1 "+ti(t.timeStamp,+e[6],+h[6]-+e[6],t.duration)+" "+ti(t.timeStamp,+e[7],+h[7]-+e[7],t.duration)+" ")});n.setAttribute("d",s)},end:function(){n.setAttribute("d",i)}})}function bt(n,i,r,u,f,e,o){var h;if(!r||!u&&!n)return null;h=300;t.isNullOrUndefined(f)||(h=f);var c=u||n.getAttribute("d"),l=i,s="";n.setAttribute("d",c);new t.Animation({}).animate(t.createElement("div"),{duration:h,progress:function(t){var e,v,w;s="";for(var y=c.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),p=l.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),b=Math.max(y.length,p.length),r=0;r<b;r++){for(var k=y[r]||"",d=p[r]||"",i=k.trim().split(/\s+/),a=d.trim().split(/\s+/),u=[],f=1;f<i.length;f++)e=parseFloat(i[f]),v=parseFloat(a[f]),isNaN(e)||isNaN(v)||i.length!==a.length&&!o||(w=ti(t.timeStamp,e,v-e,h),u.push(w));u.length>0&&i.length!==a.length?s+="L":u.length>0&&(s+=i[0]);s+=" "+u.join(" ");s+=" "}n.setAttribute("d",s)},end:function(){n.setAttribute("d",e||i)}})}function eu(n,t,i,r){var u,f;return(void 0===r&&(r="drawClipPath"),u=ci(n,t.id,t,i),u)?(f=i.createDefs(),f.appendChild(u),f):i[r](t)}function yr(n,t,i,r,u){var f={cancel:!1,name:na,axis:u,text:i,value:t,labelStyle:r},e,o;(n.trigger(na,f),f.cancel)||(e=-1!==f.text.indexOf("<br>"),o=u.enableTrim?e?eb(u.maximumLabelWidth,f.text,u.labelStyle,n.themeStyle.axisLabelFont):wi(u.maximumLabelWidth,f.text,u.labelStyle,n.enableRtl,n.themeStyle.axisLabelFont):f.text,u.visibleLabels.push(new gh(o,f.value,f.labelStyle,f.text)))}function nr(n){return null!=n.minimum&&null!=n.maximum}function be(n){return n.zoomFactor<1&&n.zoomPosition>=0}function ke(n,i){var u="Horizontal"===i.orientation?n.width:n.height,r;return t.isNullOrUndefined(i.desiredIntervals)?(r=("Horizontal"===i.orientation?.533:1)*i.maximumLabels,Math.max(u*(r/100),1)):i.desiredIntervals}function bo(n,i,r,u,f){new t.Animation({}).animate(n,{duration:r,delay:i,name:u,progress:function(n){n.element.style.visibility="visible"},end:function(n){f?t.remove(n.element):n.element.style.visibility="visible"}})}function tr(n,t,r,u,f,e,o,s,h,c){var a=o||new i.SvgRenderer(""),l=kw(n,r,t,f,u,h,c);return a["draw"+l.functionName](l.renderOption,s?new Int32Array([s.x,s.y]):null)}function kw(n,r,u,f,e,o,s){var a,b,k,d="Path",g=o,y=g&&"Circle"===u?r.width-2:r.width,c=g&&"Circle"===u?r.height-2:r.height,p=g?s.targetWidth:0,l=n.x,h=n.y,ut=n.y+-c/2,v=n.x+-y/2,w,tt;switch(u){case"Bubble":case"Circle":d="Ellipse";t.merge(f,{rx:y/2,ry:c/2,cx:l,cy:h});break;case"Plus":a="M "+v+" "+h+" L "+(l+y/2)+" "+h+" M "+l+" "+(h+c/2)+" L "+l+" "+(h+-c/2);t.merge(f,{d:a});break;case"Cross":a="M "+v+" "+(h+-c/2)+" L "+(l+y/2)+" "+(h+c/2)+" M "+v+" "+(h+c/2)+" L "+(l+y/2)+" "+(h+-c/2);t.merge(f,{d:a});break;case"Multiply":a="M "+(l-p)+" "+(h-p)+" L "+(l+p)+" "+(h+p)+" M "+(l-p)+" "+(h+p)+" L "+(l+p)+" "+(h-p);t.merge(f,{d:a,stroke:f.fill});break;case"HorizontalLine":a="M "+v+" "+h+" L "+(l+y/2)+" "+h;t.merge(f,{d:a});break;case"VerticalLine":a="M "+l+" "+(h+c/2)+" L "+l+" "+(h+-c/2);t.merge(f,{d:a});break;case"Diamond":a="M "+v+" "+h+" L "+l+" "+(h+-c/2)+" L "+(l+y/2)+" "+h+" L "+l+" "+(h+c/2)+" L "+v+" "+h+" z";t.merge(f,{d:a});break;case"ActualRect":a="M "+v+" "+(h+-c/8)+" L "+(l+p)+" "+(h+-c/8)+" L "+(l+p)+" "+(h+c/8)+" L "+v+" "+(h+c/8)+" L "+v+" "+(h+-c/8)+" z";t.merge(f,{d:a});break;case"TargetRect":a="M "+(v+p)+" "+(h+-c/2)+" L "+(l+p/2)+" "+(h+-c/2)+" L "+(l+p/2)+" "+(h+c/2)+" L "+(v+p)+" "+(h+c/2)+" L "+(v+p)+" "+(h+-c/2)+" z";t.merge(f,{d:a});break;case"Rectangle":case"Hilo":case"HiloOpenClose":case"Candle":case"Waterfall":case"BoxAndWhisker":case"StepArea":case"RangeStepArea":case"StackingStepArea":case"Square":case"Flag":a="M "+v+" "+(h+-c/2)+" L "+(l+y/2)+" "+(h+-c/2)+" L "+(l+y/2)+" "+(h+c/2)+" L "+v+" "+(h+c/2)+" L "+v+" "+(h+-c/2)+" z";t.merge(f,{d:a});break;case"Pyramid":case"Triangle":a="M "+v+" "+(h+c/2)+" L "+l+" "+(h+-c/2)+" L "+(l+y/2)+" "+(h+c/2)+" L "+v+" "+(h+c/2)+" z";t.merge(f,{d:a});break;case"Funnel":case"InvertedTriangle":a="M "+(l+y/2)+" "+(h-c/2)+" L "+l+" "+(h+c/2)+" L "+(l-y/2)+" "+(h-c/2)+" L "+(l+y/2)+" "+(h-c/2)+" z";t.merge(f,{d:a});break;case"Pentagon":for(w=0;w<=5;w++)b=y/2*Math.cos(Math.PI/180*72*w),k=c/2*Math.sin(Math.PI/180*72*w),a=0===w?"M "+(l+b)+" "+(h+k)+" ":a.concat("L "+(l+b)+" "+(h+k)+" ");a=a.concat("Z");t.merge(f,{d:a});break;case"Image":d="Image";t.merge(f,{href:e,height:c,width:y,x:v,y:ut});break;case"Star":var it=Math.min(y,c)/2,ft=it/2,rt=Math.PI/5,nt="";for(w=0;w<10;w++)tt=w%2==0?it:ft,nt+=(0===w?"M":"L")+(l+tt*Math.cos(w*rt-Math.PI/2))+","+(h+tt*Math.sin(w*rt-Math.PI/2));nt+="Z";t.merge(f,{d:nt})}return{renderOption:f=fb(n,new i.Size(y,c),u,f).renderOption,functionName:d}}function dw(n,t,r){var u=t.x<r.x?r.x:t.x>r.x+r.width?r.x+r.width:t.x,f=t.y<r.y?r.y:t.y>r.y+r.height?r.y+r.height:t.y;return new i.Rect(u>n.x?n.x:u,f>n.y?n.y:f,Math.abs(u-n.x),Math.abs(f-n.y))}function ff(n,t,i){return n>i?i:n<t?t:n}function r(n){return document.getElementById(n)}function fc(n){var i=null;try{i="function"!=typeof n&&document.querySelectorAll(n).length?t.compile(document.querySelector(n).innerHTML.trim()):t.compile(n)}catch(r){i=t.compile(n)}return i}function gw(n,t,i,r,u,f,e,o,s,h){var c=n.getBoundingClientRect();t.accumulationDataLabelModule.calculateLabelSize(i,n,f,r,u,e,o,s,h,c,!0)}function nb(n,t,i,r,u,f){var e=document.getElementById(t.element.id+"_Series_"+(void 0===r.index?r.category:r.index)+"_DataLabelCollections");e&&(0===i.index&&(t.dataLabelCollections=[]),t.dataLabelModule.calculateTemplateLabelSize(e,n,i,r,r.marker.dataLabel,u,r.clipRect,f,!0))}function ee(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){var k,d=fc(i),g,b,nt,w,p;try{if(g=window.Blazor?e?u:{point:u}:{chart:r,series:f,point:u},b=d?d(g,r,e?e+"_template":"template",e||n.id.replace(/[^a-zA-Z0-9]/g,"")):[],b.length)for(nt=(k=Array.prototype.slice.call(b)).length,w=0;w<nt;w++)n.appendChild(k[w]);p=void 0;"accumulationchart"===r.getModuleName()?(p=c.length&&c[t]?gw.bind(this,n,r,h,c,s,c[t],l,a,v,y):p,r.isReact&&r.renderReactTemplates(p)):"chart"===r.getModuleName()&&(p=u&&f?nb.bind(this,n,r,u,f,o,y):p,r.isReact&&r.renderReactTemplates(p))}catch(t){return n}return n}function ko(n,t){return"font-size:"+(n.size||t.size)+"; font-style:"+(n.fontStyle||t.fontStyle)+"; font-weight:"+(n.fontWeight||t.fontWeight)+"; font-family:"+n.fontFamily+";opacity:"+n.opacity+"; color:"+n.color+";"}function go(n,i,r){void 0===i&&(i=!1);r||document.body.appendChild(n);var u=n.getBoundingClientRect();return i?t.remove(n):r||v(n.id),u}function tb(n,t){for(var r,i=0,u=n.length;i<u;i++)n[i].id.indexOf(t)>-1&&(r=n[i]);return r}function l(n,t,i,r,u){n="Logarithmic"===i.valueType?hi(n>0?n:Math.pow(i.logBase,i.visibleRange.min),i.logBase):n;t="Logarithmic"===r.valueType?hi(t>0?t:Math.pow(r.logBase,r.visibleRange.min),r.logBase):t;n=ut(n,i);t=ut(t,r);var f=u?i.rect.height:i.rect.width,e=u?r.rect.width:r.rect.height;return new h(u?t*e:n*f,u?(1-n)*f:(1-t)*e)}function ec(n,t,i,r,u,f,e){if(void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===u&&(u="x"),void 0===f&&(f="y"),!(n&&n.hasChildNodes()&&t))return null;o(!1,t,n,i,r,u,f,void 0,void 0,void 0,void 0,void 0,e)}function o(n,u,f,e,o,s,c,l,a,v,y,p,w,b,k,d,g){var ft,it;if(void 0===o&&(o=!1),void 0===s&&(s="x"),void 0===c&&(c="y"),void 0===v&&(v=!1),void 0===y&&(y=!1),void 0===p&&(p=null),void 0===b&&(b=!1),void 0===k&&(k=0),n)return null;var ut=b?null:u.querySelector("#"+f.id),nt=ut||r(f.id),tt=f,rt=t.isNullOrUndefined(w)?300:w;e&&o&&nt?(l=l||("DIV"===nt.tagName?new h(+nt.style[s].split("px")[0],+nt.style[c].split("px")[0]):new h(+nt.getAttribute(s),+nt.getAttribute(c))),a&&"undefined"!==a)?kf(f,f.getAttribute("d"),e,a,rt):y&&p?bw(tt,0,rt,new i.Rect(+nt.getAttribute("x"),+nt.getAttribute("y"),+nt.getAttribute("width"),+nt.getAttribute("height")),p):(ft="DIV"===tt.tagName?new h(+tt.style[s].split("px")[0],+tt.style[c].split("px")[0]):new h(+tt.getAttribute(s),+tt.getAttribute(c)),it=nt.getAttribute("transform"),ev(tt,rt,l,ft,s,c,k,d,void 0!==g?new h(g.match(/\d+/g).map(Number)[0],g.match(/\d+/g).map(Number)[1]):it?new h(parseFloat(it.split(",")[1]),parseFloat(it.split(",")[2])):new h(0,0),void 0!==g)):e&&o&&!nt&&v&&bo(tt,0,600,"FadeIn");ut?u.replaceChild(tt,nt):u.appendChild(tt)}function oc(n,t,r,u,f){var e=Math.abs(n-r),o=Math.abs(t-u),s=Math.max(rv(Math.min(n,r),e,f.x,f.width),f.x),h=Math.max(rv(Math.min(t,u),o,f.y,f.height),f.y);return new i.Rect(s,h,Math.min(e,f.width),Math.min(o,f.height))}function rv(n,t,i,r){return n<i?n=i:n+t>r+i&&(n=r+i-t),n}function ib(n,t,i){var f=t.marker.dataLabel.format?t.marker.dataLabel.format:t.yAxis.labelFormat,r=[],s=null!==f.match("{value}"),e,o,h,u;switch(t.seriesType){case"XY":"PolarRadar"===t.chart.chartAreaType?-1!==t.drawType.indexOf("Stacking")?("Logarithmic"===t.yAxis.valueType&&po(t.stackedValues.endValues[n.index],t.yAxis)||si(t.stackedValues.endValues[n.index],t.yAxis.visibleRange))&&r.push(n.text||n.yValue.toString()):("Logarithmic"===t.yAxis.valueType&&po(n.yValue,t.yAxis)||si(n.yValue,t.yAxis.visibleRange))&&r.push(n.text||n.yValue.toString()):r.push(n.text||n.yValue.toString());break;case"HighLow":r.push(n.text||Math.max(n.high,n.low).toString());r.push(n.text||Math.min(n.high,n.low).toString());break;case"HighLowOpenClose":r.push(n.text||Math.max(n.high,n.low).toString());r.push(n.text||Math.min(n.high,n.low).toString());r.push(n.text||Math.max(n.open,n.close).toString());r.push(n.text||Math.min(n.open,n.close).toString());break;case"BoxPlot":for(r.push(n.text||n.median.toString()),r.push(n.text||n.maximum.toString()),r.push(n.text||n.minimum.toString()),r.push(n.text||n.upperQuartile.toString()),r.push(n.text||n.lowerQuartile.toString()),e=0,o=n.outliers;e<o.length;e++)h=o[e],r.push(n.text||h.toString())}if((f||i.useGroupingSeparator)&&!n.text)for(t.yAxis.format=i.intl.getNumberFormat({format:s?"":f,useGrouping:i.useGroupingSeparator}),u=0;u<r.length;u++)r[u]=s?f.replace("{value}",t.yAxis.format(parseFloat(r[u]))):t.yAxis.format(parseFloat(r[u]));return r}function de(n){window.clearInterval(n)}function oe(n,t,r){var u=new i.Rect(n.x+r.x,n.y+r.y,n.width,n.height);return t.some(function(n){return u.x<n.x+n.width&&u.x+u.width>n.x&&u.y<n.y+n.height&&u.height+u.y>n.y})}function pi(n,t){return n.x<t.x+t.width&&n.x+n.width>t.x&&n.y<t.y+t.height&&n.height+n.y>t.y}function rb(n,t){return n.x<=t.x&&n.x+n.width>=t.x+t.width&&n.y<=t.y&&n.height+n.y>=t.y+t.height}function gs(n,t,r){return new i.Rect(n.x-t.width/2-r.left,n.y-t.height/2-r.top,t.width+r.left+r.right,t.height+r.top+r.bottom)}function uv(n){return"#"+ge(n.r)+ge(n.g)+ge(n.b)}function ge(n){var t=n.toString(16);return 1===t.length?"0"+t:t}function wu(n){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?new th(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):new th(255,255,255)}function vi(n){var r,i;if(n="transparent"===n?"white":n,i=document.getElementById("chartmeasuretext"),i||(i=t.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(i)),i.style.color=n,n=window.getComputedStyle(i).color,i.style.color="",0!==n.indexOf("rgb")&&0!==n.indexOf("hsl")||(r=(n=n.replace(/\s/g,"").replace(/[()]/g,"")).slice(3).split(",")),r&&r.length){var u=r.map(function(n){return parseInt(n,10)}),f=u[0],e=u[1],o=u[2];return uv(new th(f,e,o))}return""}function ub(n){var t,i;if(0===n.indexOf("rgba(")||0===n.indexOf("rgb(")){if(t=n.substring(n.indexOf("(")+1,n.lastIndexOf(")")).split(","),3===t.length||4===t.length)return t.every(function(n){var t=parseFloat(n);return!isNaN(t)&&t>=0&&t<=255})}else if(0===n.indexOf("#"))return i=n.substring(1),(3===i.length||6===i.length)&&/^[0-9A-Fa-f]{3,6}$/.test(i);return!1}function fv(n,t){(n=(n=vi(n)).replace(/[^0-9a-f]/gi,"")).length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);t=t||0;for(var i,u="#",r=0;r<3;r++)i=parseInt(n.substr(2*r,2),16),u+=("00"+(i=Math.round(Math.min(Math.max(0,i+i*t),255))).toString(16)).substr(i.toString(16).length);return u}function se(n,t){var i=wu(n);return i.r=parseInt(Math.floor(i.r*t).toString(),10),i.g=parseInt(Math.floor(i.g*t).toString(),10),i.b=parseInt(Math.floor(i.b*t).toString(),10),"#"+ge(i.r).toUpperCase()+ge(i.g).toUpperCase()+ge(i.b).toUpperCase()}function sc(n){var t=Math.floor(n.length/2);return n.length%2?n[t]:(n[t-1]+n[t])/2}function fb(n,i,r,u){var c="",s=i.height,o=i.width,f=n.x,e=n.y;switch(r){case"MultiColoredLine":case"Line":case"StackingLine":case"StackingLine100":c="M "+(f+3/4*-o)+" "+e+" L "+(f+o*(3/4))+" "+e;t.merge(u,{d:c});break;case"StepLine":u.fill="transparent";c="M "+(f+-o/2-2.5)+" "+(e+s/2)+" L "+(f+-o/2+o/10)+" "+(e+s/2)+" L "+(f+-o/2+o/10)+" "+e+" L "+(f+-o/10)+" "+e+" L "+(f+-o/10)+" "+(e+s/2)+" L "+(f+o/5)+" "+(e+s/2)+" L "+(f+o/5)+" "+(e+-s/2)+" L "+(f+o/2)+" "+(e+-s/2)+"L "+(f+o/2)+" "+(e+s/2)+" L"+(f+o/2+2.5)+" "+(e+s/2);t.merge(u,{d:c});break;case"UpArrow":u.fill=u.stroke;u.stroke="transparent";c="M "+(f+-o/2)+" "+(e+s/2)+" L "+f+" "+(e-s/2)+" L "+(f+o/2)+" "+(e+s/2)+"L "+(f+o/2-2)+" "+(e+s/2)+" L "+f+" "+(e-s/2+4)+"L"+(f-o/2+2)+" "+(e+s/2)+" Z";t.merge(u,{d:c});break;case"DownArrow":c="M "+(f-o/2)+" "+(e-s/2)+" L "+f+" "+(e+s/2)+" L "+(f+o/2)+" "+(e-s/2)+"L "+(f+o/2-2)+" "+(e-s/2)+" L "+f+" "+(e+s/2-4)+"L"+(f-o/2+2)+" "+(e-s/2)+" Z";t.merge(u,{d:c});break;case"RightArrow":c="M "+(f+-o/2)+" "+(e-s/2)+" L "+(f+o/2)+" "+e+" L "+(f+-o/2)+" "+(e+s/2)+" L "+(f+-o/2)+" "+(e+s/2-2)+" L "+(f+o/2-4)+" "+e+" L"+(f+-o/2)+" "+(e-s/2+2)+" Z";t.merge(u,{d:c});break;case"LeftArrow":u.fill=u.stroke;u.stroke="transparent";c="M "+(f+o/2)+" "+(e-s/2)+" L "+(f+-o/2)+" "+e+" L "+(f+o/2)+" "+(e+s/2)+" L "+(f+o/2)+" "+(e+s/2-2)+" L "+(f+-o/2+4)+" "+e+" L"+(f+o/2)+" "+(e-s/2+2)+" Z";t.merge(u,{d:c});break;case"Column":case"Pareto":case"StackingColumn":case"StackingColumn100":case"RangeColumn":case"Histogram":c="M "+(f-o/5*3)+" "+(e-s/5)+" L "+(f+-o/10*3)+" "+(e-s/5)+" L "+(f+-o/10*3)+" "+(e+s/2)+" L "+(f-o/5*3)+" "+(e+s/2)+" Z M "+(f+-o/10-o/20)+" "+(e-s/4-5)+" L "+(f+o/10+o/20)+" "+(e-s/4-5)+" L "+(f+o/10+o/20)+" "+(e+s/2)+" L "+(f+-o/10-o/20)+" "+(e+s/2)+" Z M "+(f+o/10*3)+" "+e+" L "+(f+o/5*3)+" "+e+" L "+(f+o/5*3)+" "+(e+s/2)+" L "+(f+o/10*3)+" "+(e+s/2)+" Z";t.merge(u,{d:c});break;case"Bar":case"StackingBar":case"StackingBar100":c="M "+(f+-o/2+-2.5)+" "+(e-s/5*3)+" L "+(f+o/10*3)+" "+(e-s/5*3)+" L "+(f+o/10*3)+" "+(e-s/10*3)+" L "+(f-o/2-2.5)+" "+(e-s/10*3)+" Z M "+(f+-o/2+-2.5)+" "+(e-s/5+.5)+" L "+(f+o/2+2.5)+" "+(e-s/5+.5)+" L "+(f+o/2+2.5)+" "+(e+s/10+.5)+" L "+(f-o/2-2.5)+" "+(e+s/10+.5)+" Z M "+(f-o/2-2.5)+" "+(e+s/5+1)+" L "+(f+-o/4)+" "+(e+s/5+1)+" L "+(f+-o/4)+" "+(e+s/2+1)+" L "+(f-o/2-2.5)+" "+(e+s/2+1)+" Z";t.merge(u,{d:c});break;case"Spline":u.fill="transparent";c="M "+(f-o/2)+" "+(e+s/5)+" Q "+f+" "+(e-s)+" "+f+" "+(e+s/5)+" M "+f+" "+(e+s/5)+" Q "+(f+o/2)+" "+(e+s/2)+" "+(f+o/2)+" "+(e-s/2);t.merge(u,{d:c});break;case"Area":case"MultiColoredArea":case"RangeArea":case"StackingArea":case"StackingArea100":c="M "+(f-o/2-2.5)+" "+(e+s/2)+" L "+(f+-o/4+-1.25)+" "+(e-s/2)+" L "+f+" "+(e+s/4)+" L "+(f+o/4+1.25)+" "+(e+-s/2+s/4)+" L "+(f+s/2+2.5)+" "+(e+s/2)+" Z";t.merge(u,{d:c});break;case"SplineArea":case"SplineRangeArea":c="M "+(f-o/2)+" "+(e+s/5)+" Q "+f+" "+(e-s)+" "+f+" "+(e+s/5)+" Z M "+f+" "+(e+s/5)+" Q "+(f+o/2)+" "+(e+s/2)+" "+(f+o/2)+" "+(e-s/2)+"  Z";t.merge(u,{d:c});break;case"Pie":case"Doughnut":u.stroke="transparent";c=function(n,t,i,r,u){var f=yi(270,i,new h(n,t)),e=yi(270,i,new h(n+u/10,t));return"M "+n+" "+t+" L "+(n+i)+" "+t+" A "+i+" "+i+" 0 1 1 "+f.x+" "+f.y+" Z M "+(n+u/10)+" "+(t-r/10)+" L"+(n+i)+" "+(t-r/10)+" A "+i+" "+i+" 0 0 0 "+e.x+" "+e.y+" Z"}(f,e,Math.min(s,o)/2,s,o);t.merge(u,{d:c})}return{renderOption:u}}function wi(n,t,r,u,f){var o=t,s=i.measureText(t,r,f).width,e;if(s>n)for(e=t.length-1;e>=0;--e)if(o=u?"..."+t.substring(0,e):t.substring(0,e)+"...",(s=i.measureText(o,r,f).width)<=n)return o;return o}function eb(n,t,r,u){for(var s,f,e=[],h=t.split("<br>"),o=0;o<h.length;o++)if(t=h[o],s=i.measureText(t,r,u).width,s>n){for(f=t.length-1;f>=0;--f)if(t=t.substring(0,f)+"...",(s=i.measureText(t,r,u).width)<=n){e.push(t);break}}else e.push(t);return e}function it(n,t){return null!=n?-1!==n.indexOf("%")?t/100*parseInt(n,10):parseInt(n,10):null}function ci(n,t,i,u){if(!n)return null;var f=r(t);return f&&i&&u.setElementAttributes(i,"clipPath"===f.tagName?f.childNodes[0]:f),f}function ev(n,i,r,u,f,e,o,s,c,l){void 0===f&&(f="x");void 0===e&&(e="y");void 0===o&&(o=0);void 0===s&&(s=new h(0,0));void 0===c&&(c=new h(0,0));var v="DIV"===n.tagName,a=function(t,i,r,u){v?(n.style[f]=t+"px",n.style[e]=i+"px"):(n.setAttribute(f,t+""),n.setAttribute(e,i+""),o&&s.x&&s.y&&c.x&&c.y&&r&&u&&n.setAttribute("transform","rotate("+o+","+r+","+u+")"),l&&n.setAttribute("transform","translate("+r+","+u+")"))};a(r.x,r.y,c.x,c.y);new t.Animation({}).animate(t.createElement("div"),{duration:i,progress:function(n){a(ti(n.timeStamp,r.x,u.x-r.x,n.duration),ti(n.timeStamp,r.y,u.y-r.y,n.duration),ti(n.timeStamp,c.x,s.x-c.x,n.duration),ti(n.timeStamp,c.y,s.y-c.y,n.duration))},end:function(){a(u.x,u.y,s.x,s.y)}})}function ob(n,i,r,u,f){if(n&&r&&u){var e=function(n){return f?f.replace("{value}",n.toString()):n.toString()};new t.Animation({}).animate(t.createElement("div"),{duration:i,progress:function(t){n.style.animation="";var f=t.timeStamp/t.duration,i=r+(u-r)*f;i=r%1!=0||u%1!=0?parseFloat(i.toFixed(1)):Math.round(i);n.textContent=e(i)},end:function(){n.textContent=e(u)}})}}function ct(n,t,r,u,f,e,s,h,c,l,a,v,y,p,w,b,k,d){var ut,ft,et,ot,st,it,nt,tt,g,rt;if(void 0===e&&(e=!1),void 0===c&&(c=!1),nt=0,tt=0,t.text.length>1&&w){for(g=0,rt=t.text.length;g<rt;g++)tt=Math.max(tt,i.measureText(t.text[g],r,b).width);nt=i.measureText(t.text[0],r,b).width}it=t.text.length>1&&w?t.x+tt/2-nt/2:t.x;ut={id:t.id,x:it,y:t.y,fill:u||"black","font-size":r.size||b.size,"font-style":r.fontStyle||b.fontStyle,"font-family":r.fontFamily||b.fontFamily,"font-weight":r.fontWeight||b.fontWeight,"text-anchor":t.anchor,labelRotation:t.labelRotation,transform:t.transform,opacity:r.opacity,"dominant-baseline":t.baseLine};var ct="string"==typeof t.text?t.text:e?t.text[t.text.length-1]:t.text[0],lt=a?a.x:0,at=a?a.y:0,ht=n.createText(ut,ct,lt,at);if("string"!=typeof t.text&&t.text.length>1)for(g=1,rt=t.text.length;g<rt;g++)et=i.measureText(t.text[g],r,b).height,nt=i.measureText(t.text[g],r,b).width,ot=t.y+(e?-g*et:g*et),it=w?t.x+tt/2-nt/2:t.x,st=e?t.text[t.text.length-(g+1)]:t.text[g],p?ft=n.createText(ut,st,null,null,ot,!0):(ft=n.createTSpan({x:it,id:t.id,y:ot},st),ht.appendChild(ft));return y||o(n instanceof i.CanvasRenderer,f,ht,s,h,"x","y",null,null,c,!1,null,l,!1,t.labelRotation,k,d),ht}function ns(n){var f=n.element.clientWidth||n.element.offsetWidth,e=n.element.clientHeight,o,u,h,c;if(n.stockChart&&(f=n.stockChart.availableSize.width,e=n.stockChart.availableSize.height),u=450,"rangeNavigator"===n.getModuleName()){var r=n,l=r.tooltip.enable?35:0,s=r.periodSelectorSettings.periods.length?r.periodSelectorSettings.height:0;o=r.margin.top+r.margin.bottom+l;h=i.measureText("tempString",r.labelStyle,r.themeStyle.axisLabelFont).height;(u=(n.series.length?t.Browser.isDevice?80:120:(r.enableGrouping?55+h:40)+o)+s,r.disableRangeSelector&&(u=s),n.stockChart&&n.stockChart.chart&&"Outside"===n.stockChart.chart.axisCollections[1].labelPosition)&&(c=n.stockChart.chart.axisCollections[1].labelPadding+.5*n.stockChart.chart.axisCollections[1].lineStyle.width,n.width=(n.stockChart.availableSize.width-(n.stockChart.chart.axisCollections[1].maxLabelSize.width+c)).toString())}n.availableSize=new i.Size(it(n.width,f)||f||600,it(n.height,e||u)||e||u);"chart"===n.getModuleName()&&(n.scaleX=1,n.scaleY=1)}function ts(n){n.canvasRender=new i.CanvasRenderer(n.element.id);n.renderer=n.enableCanvas?n.canvasRender:new i.SvgRenderer(n.element.id);ns(n);n.svgObject=n.stockChart&&"chart"===n.getModuleName()?n.stockChart.chartObject:n.stockChart&&"rangeNavigator"===n.getModuleName()&&n.stockChart.selectorObject?n.stockChart.selectorObject:n.enableCanvas?n.renderer.createCanvas({id:n.element.id+"_canvas",width:n.availableSize.width,height:n.availableSize.height}):n.renderer.createSvg({id:n.element.id+"_svg",width:n.availableSize.width,height:n.availableSize.height});n.enableCanvas&&(n.renderer.ctx.direction=n.enableRtl?"rtl":"ltr")}function tu(n,t,i,r,u){var f=[];switch(t.textOverflow){case"Wrap":f=ur(n,i,t,r,n.indexOf(" ")<0||null,null,u);break;case"Trim":f.push(wi(i,n,t,r,u));break;default:f.push(n)}return f}function pr(n,t){return"Near"===t.textAlignment?n.x:"Center"===t.textAlignment?n.x+n.width/2:n.x+n.width}function ur(n,t,r,u,f,e,o,s){if(f)return sb(n,t,r,o);for(var l,p=n.split(" "),c="",h=[],y=i.measureText("chartMeasureText",r,o).height,a=0,v=0,w=p.length;v<w;v++){if(l=p[v],i.measureText(c.concat(""===c?"":" "+l),r,o).width<t)c=c.concat((""===c?"":" ")+l);else if(""!==c){if(a+=y,s&&a>s)return h[h.length-1]+="...",h;h.push(e?c:wi(t,c,r,u,o));c=l}else{if(a+=y,s&&a>s)return h[h.length-1]+="...",h;h.push(e?l:wi(t,l,r,u,o))}if(c&&v===w-1){if(a+=y,s&&a>s)return h[h.length-1]+="...",h;h.push(e?c:wi(t,c,r,u,o))}}return h}function sb(n,t,r,u){var s=i.measureText(n,r,u).width,o=[];if(s>t){for(var f="",h=0,e=1;e<n.length;)f=n.substring(h,e),(s=i.measureText(f,r,u).width)<t?e++:s===t?(h=e,o.push(f),e++,f=""):s>t&&(f=f.slice(0,-1),h=e-1,o.push(f),f="");f.length>0&&o.push(f)}else o.push(n);return o}function no(n,t){for(var i,f=n.replace(t," "),s=n.match(t),r=" ",e=" ",o=0,h={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"},c={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹"},u=0;u<=f.length-1;u++)if(" "===f[u]){for(r=t===vf?s[o].replace(/~/g,""):s[o].replace(/\^/g,""),i=0;i<r.length;i++)e+=t===vf?h[r[i]]:c[r[i]];o++}else e+=f[u];return e.trim()}function nh(n){for(var i=0;i<n.annotations.length;i++)t.resetBlazorTemplate((n.element.id+"_Annotation_"+i).replace(/[^a-zA-Z0-9]/g,""),"ContentTemplate");t.resetBlazorTemplate(n.element.id+"_tooltipparent_template_blazorTemplate","Template");t.resetBlazorTemplate(n.element.id+"_DataLabel")}function lb(n,t){return Number(t)===n.start?n.colors[0]:Number(t)===n.end?n.colors[n.colors.length-1]:uv(ab(Number(t),n))}function ab(n,t){var f,e,s=t.start,c=t.end,o=0,l=c-s,i;if(o=(n-s)/l,t.colors.length<=2)f="#"===t.colors[0].charAt(0)?t.colors[0]:vi(t.colors[0]),e="#"===t.colors[t.colors.length-1].charAt(0)?t.colors[t.colors.length-1]:vi(t.colors[t.colors.length-1]);else{f="#"===t.colors[0].charAt(0)?t.colors[0]:vi(t.colors[0]);e="#"===t.colors[t.colors.length-1].charAt(0)?t.colors[t.colors.length-1]:vi(t.colors[t.colors.length-1]);for(var u=l/(t.colors.length-1),v=t.colors.length-1,r=[],a={},h=1;h<v;h++)a={b:s+h*u,color:t.colors[h]},r.push(a);for(i=0;i<r.length;i++)s<=n&&n<=r[i].b&&0===i?(e="#"===r[i].color.charAt(0)?r[i].color:vi(r[i].color),o=n<=r[i].b?1-Math.abs((n-r[i].b)/u):(n-r[i].b)/u):r[i].b<=n&&n<=c&&i===r.length-1&&(f="#"===r[i].color.charAt(0)?r[i].color:vi(r[i].color),o=n<r[i].b?1-Math.abs((n-r[i].b)/u):(n-r[i].b)/u),i!==r.length-1&&i<r.length&&r[i].b<=n&&n<=r[i+1].b&&(f="#"===r[i].color.charAt(0)?r[i].color:vi(r[i].color),e="#"===r[i+1].color.charAt(0)?r[i+1].color:vi(r[i+1].color),o=Math.abs(n-r[i+1].b)/u)}return vb(o,f,e)}function vb(n,t,i){var r=i.split("#")[1],u=t.split("#")[1],f=cc(n,parseInt(u.substr(0,2),16),parseInt(r.substr(0,2),16)),e=cc(n,parseInt(u.substr(2,2),16),parseInt(r.substr(2,2),16)),o=cc(n,parseInt(u.substr(4,2),16),parseInt(r.substr(4,2),16));return new th(f,e,o)}function cc(n,t,i){var r=i-t;return Math.round(t+r*n)}function bu(n,t){switch(n){case"Near":return t?"end":"start";case"Far":return t?"start":"end";default:return"middle"}}function ro(n){var t;switch(n){case"Fabric":case"FabricDark":t=["#4472c4","#ed7d31","#ffc000","#70ad47","#5b9bd5","#c1c1c1","#6f6fe2","#e269ae","#9e480e","#997300"];break;case"Bootstrap4":case"Bootstrap":case"BootstrapDark":t=["#a16ee5","#f7ce69","#55a5c2","#7ddf1e","#ff6ea6","#7953ac","#b99b4f","#407c92","#5ea716","#b91c52"];break;case"HighContrastLight":case"HighContrast":t=["#79ECE4","#E98272","#DFE6B6","#C6E773","#BA98FF","#FA83C3","#00C27A","#43ACEF","#D681EF","#D8BC6E"];break;case"MaterialDark":t=["#9ECB08","#56AEFF","#C57AFF","#61EAA9","#EBBB3E","#F45C5C","#8A77FF","#63C7FF","#FF84B0","#F7C928"];break;case"Tailwind3":t=["#2F4074","#03B4B4","#0D72DE","#FF5733","#D63384","#F39C12","#EF291F","#91C822"];break;case"Tailwind3Dark":t=["#8029F1","#1ABC9C","#0D72DE","#FF5733","#D63384","#F39C12","#EF291F","#91C822"];break;case"Tailwind":t=["#5A61F6","#65A30D","#334155","#14B8A6","#8B5CF6","#0369A1","#F97316","#9333EA","#F59E0B","#15803D"];break;case"TailwindDark":t=["#8B5CF6","#22D3EE","#F87171","#4ADE80","#E879F9","#FCD34D","#F97316","#2DD4BF","#F472B6","#10B981"];break;case"Bootstrap5Dark":case"Bootstrap5":t=["#FD7E14","#6610F2","#6F42C1","#D63384","#DC3545","#FFC107","#198754","#0DCAF0"];break;case"FluentDark":case"Fluent":t=["#1AC9E6","#DA4CB2","#EDBB40","#AF4BCF","#FF7266","#1BD565","#EE993D","#5887FF","#EC548D","#7D39C0"];break;case"Fluent2":t=["#6200EE","#09AF74","#0076E5","#CB3587","#E7910F","#0364DE","#66CD15","#F3A93C","#107C10","#C19C00"];break;case"Fluent2Dark":case"Fluent2HighContrast":t=["#9BB449","#2A72D5","#43B786","#3F579A","#584EC6","#E85F9C","#6E7A89","#EA6266","#0B6A0B","#C19C00"];break;case"Material3":t=["#6355C7","#00AEE0","#FFB400","#F7523F","#963C70","#FD7400","#4BE0BC","#2196F5","#DE3D8A","#162F88"];break;case"Material3Dark":t=["#4EAAFF","#FA4EAB","#FFF500","#17EA58","#38FFE7","#FF9E45","#B3F32F","#B93CE4","#FC5664","#9B55FF"];break;default:t=["#00bdae","#404041","#357cd2","#e56590","#f8b883","#70ad47","#dd8abd","#7f84e8","#7bb4eb","#ea7a57"]}return t}function lc(n,t,r){var u,f="MaterialDark"===n?"#383838":"FabricDark"===n?"#242424":"#1b1b1b";switch(n){case"HighContrastLight":case"HighContrast":u={axisLabel:"#ffffff",axisTitle:"#ffffff",axisLine:"#ffffff",majorGridLine:"#BFBFBF",minorGridLine:"#969696",majorTickLine:"#BFBFBF",minorTickLine:"#969696",chartTitle:"#ffffff",legendLabel:"#ffffff",background:t?"#000000":"transparent",areaBorder:"#ffffff",errorBar:"#ffffff",crosshairLine:"#ffffff",crosshairBackground:"rgba(255, 255, 255, 0.1)",crosshairFill:"#ffffff",crosshairLabel:"#000000",tooltipFill:"#ffffff",tooltipBoldLabel:"#000000",tooltipLightLabel:"#000000",tooltipHeaderLine:"#969696",markerShadow:"#BFBFBF",selectionRectFill:"rgba(255, 217, 57, 0.3)",selectionRectStroke:"#ffffff",selectionCircleStroke:"#FFD939",tabColor:"#FFD939",bearFillColor:"#2ecd71",bullFillColor:"#e74c3d",toolkitSelectionColor:"#FFD939",toolkitFill:"#737373",toolkitIconRectOverFill:"transparent",toolkitIconRectSelectionFill:"transparent",toolkitIconRect:new i.Rect(0,0,16,16),chartTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#000000",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},crosshairLabelFont:{color:"#000000",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},stripLineLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"MaterialDark":case"FabricDark":case"BootstrapDark":u={axisLabel:"#DADADA",axisTitle:"#ffffff",axisLine:" #6F6C6C",majorGridLine:"#414040",minorGridLine:"#514F4F",majorTickLine:"#414040",minorTickLine:" #4A4848",chartTitle:"#ffffff",legendLabel:"#DADADA",background:t?f:"transparent",areaBorder:" #9A9A9A",errorBar:"#ffffff",crosshairLine:"#F4F4F4",crosshairBackground:"rgba(255, 255, 255, 0.1)",crosshairFill:"MaterialDark"===n?"#F4F4F4":"FabricDark"===n?"#A19F9D":"#F0F0F0",crosshairLabel:"#282727",tooltipFill:"#F4F4F4",tooltipBoldLabel:"#282727",tooltipLightLabel:"#333232",tooltipHeaderLine:"#9A9A9A",markerShadow:null,selectionRectFill:"rgba(56,169,255, 0.1)",selectionRectStroke:"#38A9FF",selectionCircleStroke:"#282727",tabColor:"MaterialDark"===n?"#00B0FF":"FabricDark"===n?"#0074CC":"#0070F0",bearFillColor:"#2ecd71",bullFillColor:"#e74c3d",toolkitSelectionColor:"MaterialDark"===n?"#00B0FF":"FabricDark"===n?"#0074CC":"#0070F0",toolkitFill:"#737373",toolkitIconRectOverFill:"transparent",toolkitIconRectSelectionFill:"transparent",toolkitIconRect:new i.Rect(0,0,16,16),chartTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"FabricDark"===n?"#DADADA":"#FFFFFF",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#CED4DA",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"FabricDark"===n?"#DADADA":"#FFFFFF",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#676767",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"MaterialDark"===n?"rgba(18, 18, 18, 1)":"FabricDark"===n?"#DADADA":"#1A1A1A",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"FabricDark"===n?"#DADADA":"#FFFFFF",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#676767",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"FabricDark"===n?"#DADADA":"#FFFFFF",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},crosshairLabelFont:{color:"MaterialDark"===n?"rgba(18, 18, 18, 1)":"FabricDark"===n?"#DADADA":"#1A1A1A",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},stripLineLabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.24)":"FabricDark"===n?"#6F6C6C":"#414141",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap4":u={axisLabel:"#212529",axisTitle:"#212529",axisLine:"#CED4DA",majorGridLine:"#CED4DA",minorGridLine:"#DEE2E6",majorTickLine:"#ADB5BD",minorTickLine:"#CED4DA",chartTitle:"#212529",legendLabel:"#212529",background:t?"#FFFFFF":"transparent",areaBorder:"#DEE2E6",errorBar:"#000000",crosshairLine:"#6C757D",crosshairBackground:"rgba(0, 0, 0, 0.1)",crosshairFill:"#212529",crosshairLabel:"#FFFFFF",tooltipFill:"#020202",tooltipBoldLabel:"rgba(255,255,255)",tooltipLightLabel:"rgba(255,255,255, 0.9)",tooltipHeaderLine:"rgba(255,255,255, 0.2)",markerShadow:null,selectionRectFill:"rgba(255,255,255, 0.1)",selectionRectStroke:"rgba(0, 123, 255)",selectionCircleStroke:"#495057",tabColor:"#007BFF",bearFillColor:"#2ecd71",bullFillColor:"#e74c3d",toolkitSelectionColor:"#007BFF",toolkitFill:"#495057",toolkitIconRectOverFill:"transparent",toolkitIconRectSelectionFill:"transparent",toolkitIconRect:new i.Rect(-5,-5,26,26),chartTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#495057",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#666666",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#495057",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},crosshairLabelFont:{color:"#F9FAFB",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},stripLineLabelFont:{color:"#6C757D",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Tailwind3":u={axisLabel:"#4B5563",axisTitle:"#6B7280",axisLine:"#D1D5DB",majorGridLine:"#E5E7EB",minorGridLine:"#E5E7EB",majorTickLine:"#D1D5DB",minorTickLine:"#D1D5DB",chartTitle:"#111827",legendLabel:"#4B5563",background:t?"rgba(255,255,255, 0.0)":"transparent",areaBorder:"#D1D5DB",errorBar:"#1F2937",crosshairLine:"#1F2937",crosshairBackground:"rgba(107, 114, 128, 0.1)",crosshairFill:"#111827",crosshairLabel:"#F9FAFB",tooltipFill:"#111827",tooltipBoldLabel:"#F9FAFB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#D1D5DB",markerShadow:null,selectionRectFill:"rgba(224, 231, 255, 0.25)",selectionRectStroke:"#4F46E5",selectionCircleStroke:"#6B7280",tabColor:"#4F46E5",bearFillColor:"#EF291F",bullFillColor:"#0D72DE",toolkitSelectionColor:"#212529",toolkitFill:"#6B7280",toolkitIconRectOverFill:"#F9FAFB",toolkitIconRectSelectionFill:"#F3F4F6",toolkitIconRect:new i.Rect(-6,-8,32,32),chartTitleFont:{color:"#111827",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"},axisLabelFont:{color:"#4B5563",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#374151",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},legendLabelFont:{color:"#4B5563",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Inter",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#6B7280",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"},datalabelFont:{color:"#111827",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"600"},crosshairLabelFont:{color:"#F9FAFB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},stripLineLabelFont:{color:"#374151",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Tailwind3Dark":u={axisLabel:"#D1D5DB",axisTitle:"#9CA3AF",axisLine:" #374151",majorGridLine:"#282F3C",minorGridLine:"#282F3C",majorTickLine:"#374151",minorTickLine:" #374151",chartTitle:"#FFFFFF",legendLabel:"#D1D5DB",background:t?"#1f2937":"transparent",areaBorder:" #374151",errorBar:"#6B7280",crosshairLine:"#6B7280",crosshairBackground:"rgba(107, 114, 128, 0.1)",crosshairFill:"#F9FAFB",crosshairLabel:"#1F2937",tooltipFill:"#F9FAFB",tooltipBoldLabel:"#1F2937",tooltipLightLabel:"#1F2937",tooltipHeaderLine:"#374151",markerShadow:null,selectionRectFill:"rgba(30, 27, 75, 0.25)",selectionRectStroke:"#6366F1",selectionCircleStroke:"#282727",tabColor:"#22D3EE",bearFillColor:"#EF291F",bullFillColor:"#0D72DE",toolkitSelectionColor:"#FFFFFF",toolkitFill:"#FFFFFF",toolkitIconRectOverFill:"#242A38",toolkitIconRectSelectionFill:"#242A38",toolkitIconRect:new i.Rect(-6,-8,32,32),chartTitleFont:{color:"#FFFFFF",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"},axisLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#E5E7EB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},legendLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},tooltipLabelFont:{color:"#1F2937",fontFamily:"Inter",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#9CA3AF",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"},datalabelFont:{color:"#FFFFFF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"600"},crosshairLabelFont:{color:"#1F2937",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},stripLineLabelFont:{color:"#E5E7EB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Tailwind":u={axisLabel:"#6B728",axisTitle:"#374151",axisLine:" #D1D5DB",majorGridLine:"#E5E7EB",minorGridLine:"#E5E7EB",majorTickLine:"#D1D5DB",minorTickLine:" #D1D5DB",chartTitle:"#374151",legendLabel:"#374151",background:t?"rgba(255,255,255, 0.0)":"transparent",areaBorder:" #E5E7EB",errorBar:"#374151",crosshairLine:"#1F2937",crosshairBackground:"rgba(90, 97, 246, 0.1)",crosshairFill:"#111827",crosshairLabel:"#F9FAFB",tooltipFill:"#111827",tooltipBoldLabel:"#D1D5DB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#6B7280",markerShadow:null,selectionRectFill:"rgba(79,70,229, 0.1)",selectionRectStroke:"#4F46E5",selectionCircleStroke:"#6B7280",tabColor:"#4F46E5",bearFillColor:"#2ecd71",bullFillColor:"#e74c3d",toolkitSelectionColor:"#4F46E5",toolkitFill:"#6B7280",toolkitIconRectOverFill:"transparent",toolkitIconRectSelectionFill:"transparent",toolkitIconRect:new i.Rect(0,0,16,16),chartTitleFont:{color:"#374151",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Inter",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"},crosshairLabelFont:{color:"#F9FAFB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},stripLineLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"TailwindDark":u={axisLabel:"#9CA3AF",axisTitle:"#9CA3AF",axisLine:" #4B5563",majorGridLine:"#374151",minorGridLine:"#374151",majorTickLine:"#4B5563",minorTickLine:" #4B5563",chartTitle:"#D1D5DB",legendLabel:"#D1D5DB",background:t?"#1f2937":"transparent",areaBorder:" #374151",errorBar:"#ffffff",crosshairLine:"#9CA3AF",crosshairBackground:"rgba(90, 97, 246, 0.1)",crosshairFill:"#F9FAFB",crosshairLabel:"#1F2937",tooltipFill:"#F9FAFB",tooltipBoldLabel:"#6B7280",tooltipLightLabel:"#1F2937",tooltipHeaderLine:"#9CA3AF",markerShadow:null,selectionRectFill:"rgba(34,211,238, 0.1)",selectionRectStroke:"#22D3EE",selectionCircleStroke:"#282727",tabColor:"#22D3EE",bearFillColor:"#2ecd71",bullFillColor:"#e74c3d",toolkitSelectionColor:"#22D3EE",toolkitFill:"#D1D5DB",toolkitIconRectOverFill:"transparent",toolkitIconRectSelectionFill:"transparent",toolkitIconRect:new i.Rect(0,0,16,16),chartTitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#1F2937",fontFamily:"Inter",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"},crosshairLabelFont:{color:"#1F2937",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},stripLineLabelFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap5":u={axisLabel:"#212529",axisTitle:"#212529",axisLine:"#DEE2E6",majorGridLine:"#E9ECEF",minorGridLine:"#E9ECEF",majorTickLine:"#DEE2E6",minorTickLine:"#E9ECEF",chartTitle:"#212529",legendLabel:"#212529",background:t?"#212529":"transparent",areaBorder:"#E9ECEF",errorBar:"#343A40",crosshairLine:"#343A40",crosshairBackground:"rgba(52, 58, 64, 0.1)",crosshairFill:"#000000",crosshairLabel:"#FFFFFF",tooltipFill:"#E9ECEF",tooltipBoldLabel:"#FFFFFF",tooltipLightLabel:"#FFFFFF",tooltipHeaderLine:"#FFFFFF",markerShadow:null,selectionRectFill:"rgba(134,183,254, 0.1)",selectionRectStroke:"#0D6EFD",selectionCircleStroke:"#6B7280",tabColor:"#0D6EFD",bearFillColor:"#DC3545",bullFillColor:"#6F42C1",toolkitSelectionColor:"#6E757D",toolkitFill:"#6E757D",toolkitIconRectOverFill:"#F8F9FA",toolkitIconRectSelectionFill:"#F8F9FA",toolkitIconRect:new i.Rect(-6,-8,32,32),chartTitleFont:{color:"#212529",fontFamily:"Segoe UI",size:"accumulationchart"===r.getModuleName()?"16px":"14px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"accumulationchart"===r.getModuleName()?"#21252980":"#212529",fontFamily:"Segoe UI",size:"accumulationchart"===r.getModuleName()?"14px":"12px",fontStyle:"Normal",fontWeight:"600"},crosshairLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},stripLineLabelFont:{color:"#6C757D",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap5Dark":u={axisLabel:"#DEE2E6",axisTitle:"#DEE2E6",axisLine:"#495057",majorGridLine:"#343A40",minorGridLine:"#343A40",majorTickLine:"#495057",minorTickLine:"#343A40",chartTitle:"#DEE2E6",legendLabel:"#DEE2E6",background:t?"#212529":"transparent",areaBorder:"#343A40",errorBar:"#ADB5BD",crosshairLine:"#ADB5BD",crosshairBackground:"rgba(138, 136, 134, 0.1)",crosshairFill:"#FFFFFF",crosshairLabel:"#212529",tooltipFill:"#FFFFFF",tooltipBoldLabel:"#212529",tooltipLightLabel:"#212529",tooltipHeaderLine:"#212529",markerShadow:null,selectionRectFill:"rgba(134,183,254, 0.25)",selectionRectStroke:"#0D6EFD",selectionCircleStroke:"#0D6EFD",tabColor:"#0D6EFD",bearFillColor:"#DC3545",bullFillColor:"#6F42C1",toolkitSelectionColor:"#F8F9FA",toolkitFill:"#ADB5BD",toolkitIconRectOverFill:"#2B3035",toolkitIconRectSelectionFill:"#343A40",toolkitIconRect:new i.Rect(-6,-8,32,32),chartTitleFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"accumulationchart"===r.getModuleName()?"16px":"14px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"accumulationchart"===r.getModuleName()?"#DEE2E680":"#DEE2E6",fontFamily:"Segoe UI",size:"accumulationchart"===r.getModuleName()?"14px":"12px",fontStyle:"Normal",fontWeight:"600"},crosshairLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},stripLineLabelFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Fluent":u={axisLabel:"#3B3A39",axisTitle:"#201F1E",axisLine:"#D2D0CE",majorGridLine:"#EDEBE9",minorGridLine:"#EDEBE9",majorTickLine:"#D2D0CE",minorTickLine:" #D2D0CE",chartTitle:"#201F1E",legendLabel:"#323130",background:t?"#FFFFFF":"transparent",areaBorder:"#EDEBE9",errorBar:"#A19F9D",crosshairLine:"#A19F9D",crosshairBackground:"rgba(161, 159, 157, 0.1)",crosshairFill:"#FFFFFF",crosshairLabel:"#323130",tooltipFill:"#FFFFFF",tooltipBoldLabel:"#323130",tooltipLightLabel:"#323130",tooltipHeaderLine:"#D2D0CE",markerShadow:null,selectionRectFill:"rgba(79,70,229, 0.1)",selectionRectStroke:"#4F46E5",selectionCircleStroke:"#6B7280",tabColor:"#0078D4",bearFillColor:"#2ecd71",bullFillColor:"#e74c3d",toolkitSelectionColor:"#0078D4",toolkitFill:"#A19F9D",toolkitIconRectOverFill:"transparent",toolkitIconRectSelectionFill:"transparent",toolkitIconRect:new i.Rect(0,0,16,16),chartTitleFont:{color:"#201F1E",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#3B3A39",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#201F1E",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#49454E",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#323130",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#201F1E",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#3B3A39",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#323129",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},crosshairLabelFont:{color:"#323130",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},stripLineLabelFont:{color:"#A19F9D",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"FluentDark":u={axisLabel:"#C8C6C4",axisTitle:"#F3F2F1",axisLine:"#3B3A39",majorGridLine:"#414040",minorGridLine:"#414040",majorTickLine:"#3B3A39",minorTickLine:"#3B3A39",chartTitle:"#F3F2F1",legendLabel:"#D2D0CE",background:t?"#383838":"transparent",areaBorder:"#414040",errorBar:"#D2D0CE",crosshairLine:"#D2D0CE",crosshairBackground:"rgba(161, 159, 157, 0.1)",crosshairFill:"#323130",crosshairLabel:"#F3F2F1",tooltipFill:"#252423",tooltipBoldLabel:"#F3F2F1",tooltipLightLabel:"#F3F2F1",tooltipHeaderLine:"#3B3A39",markerShadow:null,selectionRectFill:"rgba(79,70,229, 0.1)",selectionRectStroke:"#4F46E5",selectionCircleStroke:"#6B7280",tabColor:"#0078D4",bearFillColor:"#2ecd71",bullFillColor:"#e74c3d",toolkitSelectionColor:"#0078D4",toolkitFill:"#484644",toolkitIconRectOverFill:"transparent",toolkitIconRectSelectionFill:"transparent",toolkitIconRect:new i.Rect(0,0,16,16),chartTitleFont:{color:"#C8C6C4",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#C8C6C4",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#D2D0CE",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#F3F2F2",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#D2D0CE",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},crosshairLabelFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},stripLineLabelFont:{color:"#484644",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Fluent2":u={axisLabel:"#616161",axisTitle:"#242424",axisLine:"#D2D0CE",majorGridLine:"#EDEBE9",minorGridLine:"#EDEBE9",majorTickLine:"#D2D0CE",minorTickLine:"#D2D0CE",chartTitle:"#242424",legendLabel:"#242424",background:t?"#383838":"transparent",areaBorder:"#EDEBE9",errorBar:"#A19F9D",crosshairLine:"#A19F9D",crosshairBackground:"rgba(138, 136, 134, 0.1)",crosshairFill:"#FFFFFF",crosshairLabel:"#242424",tooltipFill:"#FFFFFF",tooltipBoldLabel:"#242424",tooltipLightLabel:"#242424",tooltipHeaderLine:"#D2D0CE",markerShadow:null,selectionRectFill:"rgba(180, 214, 250, 0.1)",selectionRectStroke:"#0F6CBD",selectionCircleStroke:"#0F6CBD",tabColor:"#0078D4",bearFillColor:"#E7910F",bullFillColor:"#0076E5",toolkitSelectionColor:"#424242",toolkitFill:"#424242",toolkitIconRectOverFill:"#E6E6E6",toolkitIconRectSelectionFill:"#E6E6E6",toolkitIconRect:new i.Rect(-6,-8,32,32),chartTitleFont:{color:"#242424",fontFamily:"Segoe UI",size:"accumulationchart"===r.getModuleName()?"16px":"14px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#616161",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#616161",fontFamily:"Segoe UI",size:"chart"===r.getModuleName()?"12px":"14px",fontStyle:"Normal",fontWeight:"600"},crosshairLabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"700"},stripLineLabelFont:{color:"#616161",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Fluent2HighContrast":u={axisLabel:"#FFFFFF",axisTitle:"#FFFFFF",axisLine:"#3B3A39",majorGridLine:"#292827",minorGridLine:"#3B3A39",majorTickLine:"#292827",minorTickLine:"#292827",chartTitle:"#FFFFFF",legendLabel:"#FFFFFF",background:t?"#383838":"transparent",areaBorder:"#292827",errorBar:"#8A8886",crosshairLine:"#8A8886",crosshairBackground:"rgba(255, 255, 255, 0.1)",crosshairFill:"#000000",crosshairLabel:"#FFFFFF",tooltipFill:"#292929",tooltipBoldLabel:"#FFFFFF",tooltipLightLabel:"#FFFFFF",tooltipHeaderLine:"#3B3A39",markerShadow:null,selectionRectFill:"rgba(26, 235, 255, 0.2)",selectionRectStroke:"#1AEBFF",selectionCircleStroke:"#1AEBFF",tabColor:"#0078D4",bearFillColor:"#584EC6",bullFillColor:"#43B786",toolkitSelectionColor:"#FFFFFF",toolkitFill:"#FFFFFF",toolkitIconRectOverFill:"#1AEBFF",toolkitIconRectSelectionFill:"#1AEBFF",toolkitIconRect:new i.Rect(-6,-8,32,32),chartTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"accumulationchart"===r.getModuleName()?"16px":"14px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"chart"===r.getModuleName()?"12px":"14px",fontStyle:"Normal",fontWeight:"600"},crosshairLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"700"},stripLineLabelFont:{color:"#ADADAD",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Fluent2Dark":u={axisLabel:"#ADADAD",axisTitle:"#FFFFFF",axisLine:"#3B3A39",majorGridLine:"#3B3A39",minorGridLine:"#3B3A39",majorTickLine:"#292827",minorTickLine:"#292827",chartTitle:"#FFFFFF",legendLabel:"#FFFFFF",background:t?"#383838":"transparent",areaBorder:"#292827",errorBar:"#8A8886",crosshairLine:"#8A8886",crosshairBackground:"rgba(138, 136, 134, 0.1)",crosshairFill:"#292929",crosshairLabel:"#FFFFFF",tooltipFill:"#292929",tooltipBoldLabel:"#FFFFFF",tooltipLightLabel:"#FFFFFF",tooltipHeaderLine:"#3B3A39",markerShadow:null,selectionRectFill:"rgba(14, 71, 117, 0.1)",selectionRectStroke:"#115EA3",selectionCircleStroke:"#115EA3",tabColor:"#0078D4",bearFillColor:"#584EC6",bullFillColor:"#43B786",toolkitSelectionColor:"#D6D6D6",toolkitFill:"#D6D6D6",toolkitIconRectOverFill:"#333333",toolkitIconRectSelectionFill:"#333333",toolkitIconRect:new i.Rect(-6,-8,32,32),chartTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"accumulationchart"===r.getModuleName()?"16px":"14px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#ADADAD",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#ADADAD",fontFamily:"Segoe UI",size:"chart"===r.getModuleName()?"12px":"14px",fontStyle:"Normal",fontWeight:"600"},crosshairLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"700"},stripLineLabelFont:{color:"#ADADAD",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Material3":u={axisLabel:"#1E192B",axisTitle:"#1C1B1F",axisLine:"#C4C7C5",majorGridLine:"#C4C7C5",minorGridLine:"#C4C7C5",majorTickLine:"#C4C7C5",minorTickLine:" #C4C7C5",chartTitle:"#1C1B1F",legendLabel:"#49454E",background:t?"#FFFFFF":"transparent",areaBorder:"#E7E0EC",errorBar:"#79747E",crosshairLine:"#49454E",crosshairBackground:"rgba(73, 69, 78, 0.1)",crosshairFill:"#313033",crosshairLabel:"#F4EFF4",tooltipFill:"#313033",tooltipBoldLabel:"#F4EFF4",tooltipLightLabel:"#F4EFF4",tooltipHeaderLine:"#F4EFF4",markerShadow:null,selectionRectFill:"rgb(98, 0, 238, 0.06)",selectionRectStroke:"#6200EE",selectionCircleStroke:"#79747E",tabColor:"#49454E",bearFillColor:"#5887FF",bullFillColor:"#F7523F",toolkitSelectionColor:"#49454E",toolkitFill:"#49454E",toolkitIconRectOverFill:"#EADDFF",toolkitIconRectSelectionFill:"#EADDFF",toolkitIconRect:new i.Rect(-4,-5,26,26),histogram:"#D21020",chartTitleFont:{color:"#1C1B1F",fontFamily:"Roboto",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#1E192B",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#1C1B1F",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#49454E",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F4EFF4",fontFamily:"Roboto",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#1C1B1F",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#49454E",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#49454E",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"},crosshairLabelFont:{color:"#F4EFF4",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},stripLineLabelFont:{color:"#79747E",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Material3Dark":u={axisLabel:"#E6E1E5",axisTitle:"#E6E1E5",axisLine:"#49454F",majorGridLine:"#444746",minorGridLine:"#444746",majorTickLine:"#444746",minorTickLine:" #444746",chartTitle:"#E6E1E5",legendLabel:"#CAC4D0",background:t?"#FFFFFF":"transparent",areaBorder:"#49454F",errorBar:"#938F99",crosshairLine:"#CAC4D0",crosshairBackground:"rgba(73, 69, 78, 0.1)",crosshairFill:"#E6E1E5",crosshairLabel:"#313033",tooltipFill:"#E6E1E5",tooltipBoldLabel:"#313033",tooltipLightLabel:"#313033",tooltipHeaderLine:"#313033",markerShadow:null,selectionRectFill:"rgba(78, 170, 255, 0.06)",selectionRectStroke:"#4EAAFF",selectionCircleStroke:"#938F99",tabColor:"#CAC4D0",bearFillColor:"#B3F32F",bullFillColor:"#FF9E45",toolkitSelectionColor:"#CAC4D0",toolkitFill:"#CAC4D0",toolkitIconRectOverFill:"#4F378B",toolkitIconRectSelectionFill:"#4F378B",toolkitIconRect:new i.Rect(-4,-5,26,26),histogram:"#FF9E45",chartTitleFont:{color:"#E6E1E5",fontFamily:"Roboto",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#E6E1E5",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#313033",fontFamily:"Roboto",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#E6E1E5",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"},crosshairLabelFont:{color:"#313033",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},stripLineLabelFont:{color:"#938F99",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;default:u={axisLabel:"#686868",axisTitle:"#424242",axisLine:"#b5b5b5",majorGridLine:"#dbdbdb",minorGridLine:"#eaeaea",majorTickLine:"#b5b5b5",minorTickLine:"#d6d6d6",chartTitle:"#424242",legendLabel:"#353535",background:t?"#FFFFFF":"transparent",areaBorder:"Gray",errorBar:"#000000",crosshairLine:"#4f4f4f",crosshairBackground:"rgba(0, 0, 0, 0.1)",crosshairFill:"Material"===n?"#000816":"Fabric"===n?"#FFFFFF":"#212529",crosshairLabel:"#e5e5e5",tooltipFill:"#000816",tooltipBoldLabel:"#ffffff",tooltipLightLabel:"#dbdbdb",tooltipHeaderLine:"#ffffff",markerShadow:null,selectionRectFill:"rgba(41, 171, 226, 0.1)",selectionRectStroke:"#29abe2",selectionCircleStroke:"#29abe2",tabColor:"Material"===n?"#ff4081":"Fabric"===n?"#0078D6":"#317AB9",bearFillColor:"#2ecd71",bullFillColor:"#e74c3d",toolkitSelectionColor:"Material"===n?"#ff4081":"Fabric"===n?"#0078D6":"#317AB9",toolkitFill:"#737373",toolkitIconRectOverFill:"transparent",toolkitIconRectSelectionFill:"transparent",toolkitIconRect:new i.Rect(0,0,16,16),chartTitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Fabric"===n?"#333333":"#212529",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"Material"===n?"rgba(97, 97, 97, 1)":"Fabric"===n?"#666666":"#676767",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Fabric"===n?"#333333":"#212529",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"Material"===n?"rgba(97, 97, 97, 1)":"#666666",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"Material"===n?"rgba(249, 250, 251, 1)":"Fabric"===n?"#333333":"#F9FAFB",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Fabric"===n?"#333333":"#212529",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"Material"===n?"rgba(97, 97, 97, 1)":"Fabric"===n?"#666666":"#676767",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Fabric"===n?"#333333":"#212529",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},crosshairLabelFont:{color:"Material"===n?"rgba(249, 250, 251, 1)":"Fabric"===n?"#333333":"#F9FAFB",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},stripLineLabelFont:{color:"Material"===n?"rgba(158, 158, 158, 1)":"Fabric"===n?"#A6A6A6":"#676767",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"}}}return u}function yb(n){var t;switch(n){case"HighContrastLight":t={backRect:"#333",thumb:"#bfbfbf",circle:"#fff",circleHover:"#685708",arrow:"#333",grip:"#333",arrowHover:"#fff",backRectBorder:"#969696"};break;case"Bootstrap":t={backRect:"#f5f5f5",thumb:"#e6e6e6",circle:"#fff",circleHover:"#eee",arrow:"#8c8c8c",grip:"#8c8c8c"};break;case"Fabric":t={backRect:"#f8f8f8",thumb:"#eaeaea",circle:"#fff",circleHover:"#eaeaea",arrow:"#a6a6a6",grip:"#a6a6a6"};break;case"MaterialDark":t={backRect:"#424242",thumb:"#616161",circle:"#757575",circleHover:"#616161",arrow:"#BDBDBD",grip:"#BDBDBD"};break;case"FabricDark":t={backRect:"#282727",thumb:"#333232",circle:"#4A4848",circleHover:"#514F4F",arrow:"#ADB5BD",grip:"#DADADA"};break;case"BootstrapDark":t={backRect:"#2A2A2A",thumb:"#313131",circle:"#414141",circleHover:"#484848",arrow:"#DADADA",grip:"#FFFFFF"};break;case"Bootstrap5":t={backRect:"#E9ECEF",thumb:"#ADB5BD",circle:"#F8F9FA",circleHover:"#F8F9FA",arrow:"#6E757D",grip:"#6E757D"};break;case"Bootstrap5Dark":t={backRect:"#343A40",thumb:"#ADB5BD",circle:"#2B3035",circleHover:"#2B3035",arrow:"#ADB5BD",grip:"#ADB5BD"};break;case"HighContrast":t={backRect:"#757575",thumb:"#BFBFBF",circle:"#FFFFFF",circleHover:"#FFFFFF",arrow:"#ADB5BD",grip:"#969696"};break;case"Tailwind3Dark":t={backRect:"#282F3C",thumb:"#374151",circle:"#111827",circleHover:"#eee",arrow:"#D1D5DB",grip:"#D1D5DB"};break;case"Fluent":t={backRect:"#F3F2F1",thumb:"#E1DFDD",circle:"#FFFFFF",circleHover:"#E1DFDD",arrow:"#605E5C",grip:"#605E5C"};break;case"FluentDark":t={backRect:"#252423",thumb:"#323130",circle:"#3B3A39",circleHover:"#3B3A39",arrow:"#ADB5BD",grip:"#A19F9D"};break;case"Fluent2":t={backRect:"#F5F5F5",thumb:"#F0F0F0",circle:"#FAFAFA",circleHover:"#FAFAFA",arrow:"#424242",grip:"#424242"};break;case"Fluent2Dark":t={thumb:"#0A0A0A",backRect:"#141414",circle:"#1F1F1F",circleHover:"#1F1F1F",arrow:"#D6D6D6",grip:"#D6D6D6"};break;case"Fluent2HighContrast":t={thumb:"#333333",backRect:"#000000",circle:"#000000",circleHover:"#000000",arrow:"#FFFFFF",grip:"#FFFFFF"};break;case"Material3":t={backRect:"rgba(103, 80, 164, 0.05)",thumb:" rgba(103, 80, 164, 0.14)",circle:"#FFFFFF",circleHover:"#E1DFDD",arrow:"#49454E",grip:"#49454E"};break;case"Material3Dark":t={backRect:"rgba(208, 188, 255, 0.05)",thumb:"rgba(208, 188, 255, 0.14)",circle:"#FFFFFF",circleHover:"#E1DFDD",arrow:"#CAC4D0",grip:"#CAC4D0"};break;case"Tailwind3":t={backRect:"#E5E7EB",thumb:"#D1D5DB",circle:"#FFFFFF",circleHover:"#eee",arrow:"#6B7280",grip:"#6B7280"};break;case"TailwindDark":t={backRect:"#6B7280",thumb:"#374151",circle:"#4B5563",circleHover:"#4B5563",arrow:"#ADB5BD",grip:"#D1D5DB"};break;default:t={backRect:"#f5f5f5",thumb:"#e0e0e0",circle:"#fff",circleHover:"#eee",arrow:"#9e9e9e",grip:"#9e9e9e"}}return t}function vk(n,t){for(var u,i=0,r=t;i<r.length;i++)if(u=r[i],n===u.index)return u;return t[0]}function ny(n,t){for(var u,i=0,r=t;i<r.length;i++)if(u=r[i],u.index===n)return u;return null}function wk(n,t,i){var r=(n-t.min)/t.delta;return i?1-r:r}function uh(n,t,i,r){return(n=wk(n,t,r))*i}function kc(n,t,i,r){return(r?1-n/t:n/t)*i.delta+i.min}function bk(n,t,i){var r=[];return n.map(function(n){n.xValue>=t&&n.xValue<=i&&r.push({x:n.x,y:n.y})}),r}function iy(n,t){return n.reduce(function(n,i){return Math.abs(i-t)<Math.abs(n-t)?i:n})}function fd(n,i){var e=i.navigatorStyleSettings.thumb,u=t.isNullOrUndefined(e.width)?t.Browser.isDevice?15:20:e.width,f=t.isNullOrUndefined(e.height)?t.Browser.isDevice?15:20:e.height,o="HighContrast"===n?"#969696":"#6F6C6C",s="HighContrast"===n?"#4A4848":"#414040",r={gridLineColor:"#E0E0E0",axisLineColor:"#000000",labelFontColor:"#686868",unselectedRectColor:i.series.length?"rgba(255, 255, 255, 0.6)":"#EEEEEE",thumpLineColor:"rgba(189, 189, 189, 1)",thumbBackground:"rgba(250, 250, 250, 1)",gripColor:"#757575",background:"#FFFFFF",thumbHoverColor:"#EEEEEE",selectedRegionColor:i.series.length?"transparent":"#FF4081",tooltipBackground:"Material"===n?"#000816":"Fabric"===n?"#FFFFFF":"#212529",tooltipFontColor:"#dbdbdb",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"Material"===n?"rgba(97, 97, 97, 1)":"Fabric"===n?"#666666":"#676767",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"Material"===n?"rgba(249, 250, 251, 1)":"Fabric"===n?"#333333":"#F9FAFB",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"}};switch(n){case"Fabric":r.selectedRegionColor=i.series.length?"transparent":"#007897";break;case"Bootstrap":r.selectedRegionColor=i.series.length?"transparent":"#428BCA";break;case"HighContrastLight":r={gridLineColor:"#bdbdbd",axisLineColor:"#969696",labelFontColor:"#ffffff",unselectedRectColor:i.series.length?"rgba(255, 255, 255, 0.3)":"#EEEEEE",thumpLineColor:"#ffffff",thumbBackground:"#262626",gripColor:"#ffffff",background:"transparent",thumbHoverColor:"#BFBFBF",selectedRegionColor:i.series.length?"transparent":"#FFD939",tooltipBackground:"#ffffff",tooltipFontColor:"#000000",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#000000",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"HighContrast":r={gridLineColor:s,axisLineColor:o,labelFontColor:"#DADADA",unselectedRectColor:i.series.length?"rgba(43, 43, 43, 0.6)":"#514F4F",thumpLineColor:"#969696",thumbBackground:"#333232",gripColor:"#DADADA",background:"transparent",thumbHoverColor:"#BFBFBF",selectedRegionColor:i.series.length?"rgba(22, 22, 22, 0.6)":"#FFD939",tooltipBackground:"#FFFFFF",tooltipFontColor:"#282727",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#000000",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"MaterialDark":case"FabricDark":case"BootstrapDark":r={labelFontColor:"#DADADA",axisLineColor:" #6F6C6C",gridLineColor:"#414040",tooltipBackground:"FabricDark"===n?"#A19F9D":"BootstrapDark"===n?"#F0F0F0":"#F4F4F4",tooltipFontColor:"#333232",unselectedRectColor:i.series.length?"rgba(43, 43, 43, 0.6)":"#514F4F",thumpLineColor:"#969696",thumbBackground:"#333232",gripColor:"#DADADA",background:"transparent",thumbHoverColor:"#BFBFBF",selectedRegionColor:i.series.length?"rgba(22, 22, 22, 0.6)":"FabricDark"===n?"#007897":"BootstrapDark"===n?"#428BCA":"#FF4081",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#CED4DA",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"MaterialDark"===n?"rgba(18, 18, 18, 1)":"FabricDark"===n?"#DADADA":"#1A1A1A",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap4":r={gridLineColor:"#E0E0E0",axisLineColor:"#CED4DA",labelFontColor:"#212529",unselectedRectColor:i.series.length?"rgba(255, 255, 255, 0.6)":"#514F4F",thumpLineColor:"rgba(189, 189, 189, 1)",thumbBackground:"#FFFFFF",gripColor:"#495057",background:"transparent",thumbHoverColor:"#EEEEEE",selectedRegionColor:i.series.length?"transparent":"#FFD939",tooltipBackground:"#212529",tooltipFontColor:"rgba(255, 255, 255)",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#495057",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Tailwind3":r={gridLineColor:"#D1D5DB",axisLineColor:"#D1D5DB",labelFontColor:"#4B5563",unselectedRectColor:i.series.length?"transparent":"#E5E7EB",thumpLineColor:"#1F2937",thumbBackground:"#FFFFFF",gripColor:"#6B7280",background:"transparent",thumbHoverColor:"#1F2937",selectedRegionColor:i.series.length?"#6B72801A":"#4F46E5",tooltipBackground:"#111827",tooltipFontColor:"#F9FAFB",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#4B5563",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"}};break;case"Tailwind3Dark":r={gridLineColor:"#374151",axisLineColor:"#374151",labelFontColor:"#D1D5DB",unselectedRectColor:i.series.length?"transparent":"#4B5563",thumpLineColor:"#6B7280",thumbBackground:"#111827",gripColor:"#D1D5DB",background:"transparent",thumbHoverColor:"#E5E7EB",selectedRegionColor:i.series.length?"#6B72801A":"#22D3EE",tooltipBackground:"#F9FAFB",tooltipFontColor:"#1F2937",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#1F2937",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"}};break;case"Tailwind":r={gridLineColor:"#E5E7EB",axisLineColor:"#D1D5DB",labelFontColor:"#6B7280",unselectedRectColor:i.series.length?"transparent":"#E5E7EB",thumpLineColor:"#9CA3AF",thumbBackground:"#FFFFFF",gripColor:"#6B7280",background:"transparent",thumbHoverColor:"#374151",selectedRegionColor:i.series.length?"rgba(79, 70, 229, 0.3)":"#4F46E5",tooltipBackground:"#111827",tooltipFontColor:"#F9FAFB",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"TailwindDark":r={gridLineColor:"#374151",axisLineColor:"#4B5563",labelFontColor:"#9CA3AF",unselectedRectColor:i.series.length?"transparent":"#4B5563",thumpLineColor:"#6B7280",thumbBackground:"#1F2937",gripColor:"#D1D5DB",background:"transparent",thumbHoverColor:"#E5E7EB",selectedRegionColor:i.series.length?"rgba(255, 255, 255, 0.6)":"#22D3EE",tooltipBackground:"#E9ECEF",tooltipFontColor:"#1F2937",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#1F2937",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap5":r={gridLineColor:"#E9ECEF",axisLineColor:"#DEE2E6",labelFontColor:"#21252980",unselectedRectColor:i.series.length?"transparent":"#E5E7EB",thumpLineColor:"#CED4DA",thumbBackground:"#FFFFFF",gripColor:"#6E757D",background:"transparent",thumbHoverColor:"#666666",selectedRegionColor:i.series.length?"rgba(52, 58, 64, 0.1)":"#ADB5BD",tooltipBackground:"#000000E5",tooltipFontColor:"#FFFFFF",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#21252980",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap5Dark":r={gridLineColor:"#343A40",axisLineColor:"#495057",labelFontColor:"#DEE2E680",unselectedRectColor:i.series.length?"transparent":"#E5E7EB",thumpLineColor:"#6C757D",thumbBackground:"#212529",gripColor:"#ADB5BD",background:"transparent",thumbHoverColor:"#666666",selectedRegionColor:i.series.length?"rgba(173, 181, 189, 0.1)":"#ADB5BD",tooltipBackground:"#FFFFFFE5",tooltipFontColor:"#212529",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#DEE2E680",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Fluent":r={gridLineColor:"#EDEBE9",axisLineColor:"#D2D0CE",labelFontColor:"#3B3A39",unselectedRectColor:i.series.length?"transparent":"#A19F9D",thumpLineColor:"#0078D4",thumbBackground:"#FFFFFF",gripColor:"#0078D4",background:"transparent",thumbHoverColor:"#FFFFFF",selectedRegionColor:i.series.length?"rgba(0, 120, 212, 0.1)":"#ADB5BD",tooltipBackground:"#FFFFFF",tooltipFontColor:"#323130",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#3B3A39",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#323130",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"FluentDark":r={gridLineColor:"#414040",axisLineColor:"#3B3A39",labelFontColor:"#C8C6C4",unselectedRectColor:i.series.length?"transparent":"#A19F9D",thumpLineColor:"#797775",thumbBackground:"black",gripColor:"#797775",background:"transparent",thumbHoverColor:"black",selectedRegionColor:i.series.length?"rgba(121, 119, 117, 0.1)":"#797775",tooltipBackground:"#323130",tooltipFontColor:"#F3F2F1",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#C8C6C4",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Fluent2":r={gridLineColor:"#EDEBE9",axisLineColor:"#D2D0CE",labelFontColor:"#616161",unselectedRectColor:i.series.length?"rgba(250, 250, 250, 0.1)":"#A19F9D",thumpLineColor:"#A19F9D",thumbBackground:"#FAFAFA",gripColor:"#424242",background:"transparent",thumbHoverColor:"#FAFAFA",selectedRegionColor:i.series.length?"rgba(161, 159, 157, 0.4)":"#797775",tooltipBackground:"#FFFFFF",tooltipFontColor:"#242424",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#616161",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Fluent2Dark":r={gridLineColor:"#8A8886",axisLineColor:"#3B3A39",labelFontColor:"#ADADAD",unselectedRectColor:i.series.length?"transparent":"#A19F9D",thumpLineColor:"#8A8886",thumbBackground:"#1F1F1F",gripColor:"#D6D6D6",background:"transparent",thumbHoverColor:"#1F1F1F",selectedRegionColor:i.series.length?"rgba(138, 136, 134, 0.4)":"#797775",tooltipBackground:"#292929",tooltipFontColor:"#FFFFFF",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#ADADAD",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Fluent2HighContrast":r={gridLineColor:"#8A8886",axisLineColor:"#3B3A39",labelFontColor:"#ADADAD",unselectedRectColor:i.series.length?"transparent":"#A19F9D",thumpLineColor:"#8A8886",thumbBackground:"#1F1F1F",gripColor:"#FFFFFF",background:"transparent",thumbHoverColor:"#1F1F1F",selectedRegionColor:i.series.length?"rgba(138, 136, 134, 0.1)":"#797775",tooltipBackground:"#000000",tooltipFontColor:"#FFFFFF",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"10px",fontStyle:"Normal",fontWeight:"600"}};break;case"Material3":r={gridLineColor:"#C4C7C5",axisLineColor:"#C4C7C5",labelFontColor:"#1E192B",unselectedRectColor:i.series.length?"transparent":"#E5E5E5",thumpLineColor:"#49454E",thumbBackground:"#FFFFFF",gripColor:"#49454E",background:"transparent",thumbHoverColor:"#FFFFFF",selectedRegionColor:i.series.length?"rgba(73, 69, 78, 0.1)":"#49454E",tooltipBackground:"#313033",tooltipFontColor:"#F4EFF4",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#1E192B",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F4EFF4",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Material3Dark":r={gridLineColor:"#444746",axisLineColor:"#444746",labelFontColor:"#E6E1E5",unselectedRectColor:i.series.length?"transparent":"#E5E5E5",thumpLineColor:"#CAC4D0",thumbBackground:"#1C1B1F",gripColor:"#CAC4D0",background:"transparent",thumbHoverColor:"#FFFFFF",selectedRegionColor:i.series.length?"rgba(202, 196, 208, 0.1)":"#49454E",tooltipBackground:"#E6E1E5",tooltipFontColor:"#313033",thumbWidth:u,thumbHeight:f,axisLabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F4EFF4",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;default:r.selectedRegionColor=i.series.length?"transparent":"#FF4081"}return r}function rg(n){var r="MaterialDark"===n?"#383838":"FabricDark"===n?"#242424":"#1b1b1b",i={majorTickLineColor:"#424242",minorTickLineColor:"#424242",background:"#FFFFFF",labelFontColor:"rgba(0,0,0,0.54)",categoryFontColor:"#666666",labelFontFamily:"SegoeUI",tooltipFill:"#000816",legendLabel:"#353535",tooltipBoldLabel:"#ffffff",featuredMeasureColor:"#181818",comparativeMeasureColor:"#181818",titleFontColor:"rgba(0,0,0,0.87)",dataLabelFontColor:"#ffffff",titleFontFamily:"SegoeUI",subTitleFontColor:" rgba(0,0,0,0.54)",subTitleFontFamily:"SegoeUI",firstRangeColor:"#959595",secondRangeColor:"#BDBDBD",thirdRangeColor:"#E3E2E2",tabColor:"Material"===n?"#ff4081":"Fabric"===n?"#0078D6":"#317AB9",rangeStrokes:[{color:"#959595"},{color:"#BDBDBD"},{color:"#E3E2E2"}],titleFont:{color:"rgba(0, 0, 0, 1)",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"500"},subTitleFont:{color:"rgba(0, 0, 0, 1)",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"rgba(97, 97, 97, 1)",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"rgba(97, 97, 97, 1)",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"rgba(97, 97, 97, 1)",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"rgba(249, 250, 251, 1)",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"}};switch(n){case"Fabric":i={majorTickLineColor:"#424242",minorTickLineColor:"#424242",background:"#FFFFFF",labelFontColor:"#666666",categoryFontColor:"#666666",labelFontFamily:"SegoeUI",tooltipFill:"#FFFFFF",legendLabel:"#353535",tooltipBoldLabel:"#ffffff",featuredMeasureColor:"#181818",comparativeMeasureColor:"#181818",titleFontColor:"#333333",dataLabelFontColor:"#ffffff",titleFontFamily:"SegoeUI",subTitleFontColor:"#666666",subTitleFontFamily:"SegoeUI",firstRangeColor:"#959595",secondRangeColor:"#BDBDBD",thirdRangeColor:"#E3E2E2",tabColor:"#0078D6",rangeStrokes:[{color:"#959595"},{color:"#BDBDBD"},{color:"#E3E2E2"}],titleFont:{color:"#333333",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"500"},subTitleFont:{color:"#333333",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#666666",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#666666",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#666666",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#333333",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap":i={majorTickLineColor:"#424242",minorTickLineColor:"#424242",background:"#FFFFFF",labelFontColor:"rgba(0,0,0,0.54)",categoryFontColor:"rgba(0,0,0,0.54)",labelFontFamily:"Helvetica",tooltipFill:"#212529",legendLabel:"#212529",tooltipBoldLabel:"rgba(255,255,255)",featuredMeasureColor:"#181818",comparativeMeasureColor:"#181818",titleFontColor:"rgba(0,0,0,0.87)",dataLabelFontColor:"#ffffff",titleFontFamily:"Helvetica-Bold",subTitleFontColor:" rgba(0,0,0,0.54)",subTitleFontFamily:"Helvetica",firstRangeColor:"#959595",secondRangeColor:"#BDBDBD",thirdRangeColor:"#E3E2E2",tabColor:"#317AB9",rangeStrokes:[{color:"#959595"},{color:"#BDBDBD"},{color:"#E3E2E2"}],titleFont:{color:"#212529",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"500"},subTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#666666",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#676767",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#676767",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"HighContrast":i={majorTickLineColor:"#FFFFFF",minorTickLineColor:"#FFFFFF",background:"#000000",labelFontColor:"#FFFFFF",categoryFontColor:"#FFFFFF",labelFontFamily:"SegoeUI",tooltipFill:"#FFFFFF",legendLabel:"#ffffff",tooltipBoldLabel:"#000000",featuredMeasureColor:"#000000",comparativeMeasureColor:"#000000",titleFontColor:"#FFFFFF",dataLabelFontColor:"#ffffff",titleFontFamily:"HelveticaNeue",subTitleFontColor:"#FFFFFF",subTitleFontFamily:"SegoeUI",firstRangeColor:"#959595",secondRangeColor:"#BDBDBD",thirdRangeColor:"#E3E2E2",tabColor:"#FFD939",rangeStrokes:[{color:"#757575"},{color:"#BDBDBD"},{color:"#EEEEEE"}],titleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"500"},subTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#000000",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"MaterialDark":case"FabricDark":case"BootstrapDark":i={majorTickLineColor:"#F0F0F0",minorTickLineColor:"#F0F0F0",background:r,labelFontColor:"#FFFFFF",categoryFontColor:"#FFFFFF",labelFontFamily:"Helvetica",tooltipFill:"MaterialDark"===n?"#F4F4F4":"FabricDark"===n?"#A19F9D":"#F0F0F0",legendLabel:"#DADADA",tooltipBoldLabel:"#282727",featuredMeasureColor:"#181818",comparativeMeasureColor:"#181818",titleFontColor:"#FFFFFF",dataLabelFontColor:"#ffffff",titleFontFamily:"Helvetica-Bold",subTitleFontColor:"#FFFFFF",subTitleFontFamily:"Helvetica",firstRangeColor:"#8D8D8D",secondRangeColor:"#ADADAD",thirdRangeColor:"#EEEEEE",tabColor:"MaterialDark"===n?"#00B0FF":"FabricDark"===n?"#0074CC":"#0070F0",rangeStrokes:[{color:"#8D8D8D"},{color:"#ADADAD"},{color:"#EEEEEE"}],titleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"FabricDark"===n?"#DADADA":"#FFFFFF",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"500"},subTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"FabricDark"===n?"#DADADA":"#FFFFFF",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#676767",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#676767",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#676767",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"MaterialDark"===n?"rgba(18, 18, 18, 1)":"FabricDark"===n?"#DADADA":"#1A1A1A",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap4":i={majorTickLineColor:"#424242",minorTickLineColor:"#424242",background:"#FFFFFF",labelFontColor:"#202528",categoryFontColor:"#202528",labelFontFamily:"HelveticaNeue",tooltipFill:"#212529",legendLabel:"#212529",tooltipBoldLabel:"rgba(255,255,255)",featuredMeasureColor:"#181818",comparativeMeasureColor:"#181818",titleFontColor:"#202528",dataLabelFontColor:"#ffffff",titleFontFamily:"HelveticaNeue-Bold",subTitleFontColor:"HelveticaNeue",subTitleFontFamily:"#202528",firstRangeColor:"#959595",secondRangeColor:"#BDBDBD",thirdRangeColor:"#E3E2E2",tabColor:"#007BFF",rangeStrokes:[{color:"#959595"},{color:"#BDBDBD"},{color:"#E3E2E2"}],titleFont:{color:"#212529",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"500"},subTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#666666",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#495057",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#495057",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Tailwind3":i={majorTickLineColor:"#9CA3AF",minorTickLineColor:"#9CA3AF",background:"transparent",labelFontColor:"#4B5563",categoryFontColor:"#111827",labelFontFamily:"Inter",tooltipFill:"#111827",legendLabel:"#4B5563",tooltipBoldLabel:"#F9FAFB",featuredMeasureColor:"#1F2937",comparativeMeasureColor:"#1F2937",titleFontColor:"#111827",dataLabelFontColor:"#111827",titleFontFamily:"Inter",subTitleFontColor:"#6B7280",subTitleFontFamily:"Inter",firstRangeColor:"#9CA3AF",secondRangeColor:"#D1D5DB",thirdRangeColor:"#E5E7EB",tabColor:"#4F46E5",rangeStrokes:[{color:"#9CA3AF"},{color:"#D1D5DB"},{color:"#E5E7EB"}],titleFont:{color:"#111827",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},subTitleFont:{color:"#6B7280",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"},legendLabelFont:{color:"#4B5563",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"},axisLabelFont:{color:"#4B5563",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#111827",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"}};break;case"Tailwind3Dark":i={majorTickLineColor:"#4B5563",minorTickLineColor:"#4B5563",background:"transparent",labelFontColor:"#D1D5DB",categoryFontColor:"#FFFFFF",labelFontFamily:"Inter",tooltipFill:"#F9FAFB",legendLabel:"#D1D5DB",tooltipBoldLabel:"#1F2937",featuredMeasureColor:"#6B7280",comparativeMeasureColor:"#6B7280",titleFontColor:"#FFFFFF",dataLabelFontColor:"#FFFFFF",titleFontFamily:"Inter",subTitleFontColor:"#9CA3AF",subTitleFontFamily:"Inter",firstRangeColor:"#4B5563",secondRangeColor:"#374151",thirdRangeColor:"#282F3C",tabColor:"#22D3EE",rangeStrokes:[{color:"#4B5563"},{color:"#374151"},{color:"#282F3C"}],titleFont:{color:"#FFFFFF",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},subTitleFont:{color:"#9CA3AF",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"},legendLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},axisLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#FFFFFF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#1F2937",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"}};break;case"Tailwind":i={majorTickLineColor:"#D1D5DB",minorTickLineColor:"#D1D5DB",background:"transparent",labelFontColor:"#6B7280",categoryFontColor:"#6B7280",labelFontFamily:"Inter",tooltipFill:"#111827",legendLabel:"#374151",tooltipBoldLabel:"#F9FAFB",featuredMeasureColor:"#1F2937",comparativeMeasureColor:"#1F2937",titleFontColor:"#374151",dataLabelFontColor:"#F9FAFB",titleFontFamily:"Inter",subTitleFontColor:"#374151",subTitleFontFamily:"Inter",firstRangeColor:"#9CA3AF",secondRangeColor:"#D1D5DB",thirdRangeColor:"#E5E7EB",tabColor:"#4F46E5",rangeStrokes:[{color:"#9CA3AF"},{color:"#D1D5DB"},{color:"#E5E7EB"}],titleFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"},subTitleFont:{color:"#374151",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"TailwindDark":i={majorTickLineColor:"#4B5563",minorTickLineColor:"#4B5563",background:"transparent",labelFontColor:"#9CA3AF",categoryFontColor:"#9CA3AF",labelFontFamily:"Inter",tooltipFill:"#E9ECEF",legendLabel:"#D1D5DB",tooltipBoldLabel:"#1F2937",featuredMeasureColor:"#1F2937",comparativeMeasureColor:"#1F2937",titleFontColor:"#D1D5DB",dataLabelFontColor:"#D1D5DB",titleFontFamily:"Inter",subTitleFontColor:"#D1D5DB",subTitleFontFamily:"Inter",firstRangeColor:"#6B7280",secondRangeColor:"#4B5563",thirdRangeColor:"#374151",tabColor:"#22D3EE",rangeStrokes:[{color:"#6B7280"},{color:"#4B5563"},{color:"#374151"}],titleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"},subTitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#1F2937",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap5":i={majorTickLineColor:"#CED4DA",minorTickLineColor:"#CED4DA",background:"transparent",labelFontColor:"#212529",categoryFontColor:"#212529",labelFontFamily:"Segoe UI",tooltipFill:"#000000E5",legendLabel:"#212529",tooltipBoldLabel:"#212529",featuredMeasureColor:"#343A40",comparativeMeasureColor:"#343A40",titleFontColor:"#212529",dataLabelFontColor:"#212529",titleFontFamily:"Segoe UI",subTitleFontColor:"#212529",subTitleFontFamily:"Segoe UI",firstRangeColor:"#CED4DA",secondRangeColor:"#DEE2E6",thirdRangeColor:"#E9ECEF",tabColor:"#0D6EFD",rangeStrokes:[{color:"#CED4DA"},{color:"#DEE2E6"},{color:"#E9ECEF"}],titleFont:{color:"#212529",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},subTitleFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap5Dark":i={majorTickLineColor:"#6C757D",minorTickLineColor:"#6C757D",background:"#212529",labelFontColor:"#DEE2E6",categoryFontColor:"#DEE2E6",labelFontFamily:"Segoe UI",tooltipFill:"#FFFFFFE5",legendLabel:"#DEE2E6",tooltipBoldLabel:"#212529",featuredMeasureColor:"#ADB5BD",comparativeMeasureColor:"#ADB5BD",titleFontColor:"#DEE2E6",dataLabelFontColor:"#DEE2E6",titleFontFamily:"Segoe UI",subTitleFontColor:"#DEE2E6",subTitleFontFamily:"Segoe UI",firstRangeColor:"#6C757D",secondRangeColor:"#495057",thirdRangeColor:"#343A40",tabColor:"#0D6EFD",rangeStrokes:[{color:"#6C757D"},{color:"#495057"},{color:"#343A40"}],titleFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},subTitleFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Fluent":i={majorTickLineColor:"#C8C6C4",minorTickLineColor:"#C8C6C4",background:"rgba(255, 255, 255, 0.0001)",labelFontColor:"#3B3A39",categoryFontColor:"#3B3A39",labelFontFamily:"Segoe UI",tooltipFill:"#FFFFFF",legendLabel:"#3B3A39",tooltipBoldLabel:"#323130",featuredMeasureColor:"#A19F9D",comparativeMeasureColor:"#A19F9D",titleFontColor:"#201F1E",dataLabelFontColor:"#3B3A39",titleFontFamily:"Segoe UI",subTitleFontColor:"#201F1E",subTitleFontFamily:"Segoe UI",firstRangeColor:"#C8C6C4",secondRangeColor:"#D2D0CE",thirdRangeColor:"#EDEBE9",tabColor:"#0078D4",rangeStrokes:[{color:"#C8C6C4"},{color:"#D2D0CE"},{color:"#EDEBE9"}],titleFont:{color:"#201F1E",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"500"},subTitleFont:{color:"#323129",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#49454E",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#3B3A39",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#3B3A39",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#323130",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"FluentDark":i={majorTickLineColor:"#484644",minorTickLineColor:"#484644",background:"transparent",labelFontColor:"#C8C6C4",categoryFontColor:"#C8C6C4",labelFontFamily:"Segoe UI",tooltipFill:"#323130",legendLabel:"#C8C6C4",tooltipBoldLabel:"#F3F2F1",featuredMeasureColor:"#797775",comparativeMeasureColor:"#797775",titleFontColor:"#F3F2F1",dataLabelFontColor:"#C8C6C4",titleFontFamily:"Segoe UI",subTitleFontColor:"#F3F2F1",subTitleFontFamily:"Segoe UI",firstRangeColor:"#484644",secondRangeColor:"#3B3A39",thirdRangeColor:"#292827",tabColor:"#0078D4",rangeStrokes:[{color:"#484644"},{color:"#3B3A39"},{color:"#292827"}],titleFont:{color:"#C8C6C4",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"500"},subTitleFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#D2D0CE",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#C8C6C4",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#D2D0CE",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Fluent2":i={majorTickLineColor:"#C8C6C4",minorTickLineColor:"#C8C6C4",background:"transparent",labelFontColor:"#C8C6C4",categoryFontColor:"#616161",labelFontFamily:"Segoe UI",tooltipFill:"#FFFFFF",legendLabel:"#242424",tooltipBoldLabel:"#242424",featuredMeasureColor:"#A19F9D",comparativeMeasureColor:"#A19F9D",titleFontColor:"#242424",dataLabelFontColor:"#424242",titleFontFamily:"Segoe UI",subTitleFontColor:"#616161",subTitleFontFamily:"Segoe UI",firstRangeColor:"#C8C6C4",secondRangeColor:"#D2D0CE",thirdRangeColor:"#EDEBE9",tabColor:"#0078D4",rangeStrokes:[{color:"#C8C6C4"},{color:"#D2D0CE"},{color:"#EDEBE9"}],titleFont:{color:"#242424",fontFamily:"Segoe UI",size:t.Browser.isDevice?"16px":"14px",fontStyle:"Normal",fontWeight:"600"},subTitleFont:{color:"#616161",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#616161",fontFamily:"Segoe UI",size:t.Browser.isDevice?"14px":"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"}};break;case"Fluent2Dark":i={majorTickLineColor:"#484644",minorTickLineColor:"#484644",background:"transparent",labelFontColor:"#ADADAD",categoryFontColor:"#ADADAD",labelFontFamily:"Segoe UI",tooltipFill:"#292929",legendLabel:"#FFFFFF",tooltipBoldLabel:"#FFFFFF",featuredMeasureColor:"#8A8886",comparativeMeasureColor:"#8A8886",titleFontColor:"#FFFFFF",dataLabelFontColor:"#FFFFFF",titleFontFamily:"Segoe UI",subTitleFontColor:"#ADADAD",subTitleFontFamily:"Segoe UI",firstRangeColor:"#484644",secondRangeColor:"#3B3A39",thirdRangeColor:"#292827",tabColor:"#0078D4",rangeStrokes:[{color:"#484644"},{color:"#3B3A39"},{color:"#292827"}],titleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:t.Browser.isDevice?"16px":"14px",fontStyle:"Normal",fontWeight:"600"},subTitleFont:{color:"#ADADAD",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#ADADAD",fontFamily:"Segoe UI",size:t.Browser.isDevice?"14px":"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"}};break;case"Fluent2HighContrast":i={majorTickLineColor:"#484644",minorTickLineColor:"#484644",background:"transparent",labelFontColor:"#FFFFFF",categoryFontColor:"#FFFFFF",labelFontFamily:"Segoe UI",tooltipFill:"#000000",legendLabel:"#FFFFFF",tooltipBoldLabel:"#FFFFFF",featuredMeasureColor:"#8A8886",comparativeMeasureColor:"#8A8886",titleFontColor:"#FFFFFF",dataLabelFontColor:"#FFFFFF",titleFontFamily:"Segoe UI",subTitleFontColor:"#FFFFFF",subTitleFontFamily:"Segoe UI",firstRangeColor:"#484644",secondRangeColor:"#3B3A39",thirdRangeColor:"#292827",tabColor:"#0078D4",rangeStrokes:[{color:"#484644"},{color:"#3B3A39"},{color:"#292827"}],titleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:t.Browser.isDevice?"16px":"14px",fontStyle:"Normal",fontWeight:"600"},subTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:t.Browser.isDevice?"14px":"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"}};break;case"Material3":i={majorTickLineColor:"#C4C7C5",minorTickLineColor:"#C4C7C5",background:"transparent",labelFontColor:"#1E192B",categoryFontColor:"#1E192B",labelFontFamily:"Roboto",tooltipFill:"#313033",legendLabel:"#49454E",tooltipBoldLabel:"#F4EFF4",featuredMeasureColor:"#79747E",comparativeMeasureColor:"#79747E",titleFontColor:"#1C1B1F",dataLabelFontColor:"#49454E",titleFontFamily:"Roboto",subTitleFontColor:"#1C1B1F",subTitleFontFamily:"Roboto",firstRangeColor:"#a6a6a9",secondRangeColor:"#C4C7C5",thirdRangeColor:"#E7E0EC",tabColor:"#49454E",rangeStrokes:[{color:"#a6a6a9"},{color:"#C4C7C5"},{color:"#E7E0EC"}],titleFont:{color:"#1C1B1F",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"500"},subTitleFont:{color:"#49454E",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#49454E",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#1E192B",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#49454E",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F4EFF4",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"}};break;case"Material3Dark":i={majorTickLineColor:"#444746",minorTickLineColor:"#444746",background:"transparent",labelFontColor:"#E6E1E5",categoryFontColor:"#E6E1E5",labelFontFamily:"Roboto",tooltipFill:"#E6E1E5",legendLabel:"#CAC4D0",tooltipBoldLabel:"#313033",featuredMeasureColor:"#938F99",comparativeMeasureColor:"#938F99",titleFontColor:"#E6E1E5",dataLabelFontColor:"#CAC4D0",titleFontFamily:"Roboto",subTitleFontColor:"#E6E1E5",subTitleFontFamily:"Roboto",firstRangeColor:"rgba(147,143,153,0.4)",secondRangeColor:"#444746",thirdRangeColor:"#49454F",tabColor:"#CAC4D0",rangeStrokes:[{color:"rgba(147,143,153,0.4)"},{color:"#444746"},{color:"#49454F"}],titleFont:{color:"#E6E1E5",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"500"},subTitleFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},dataLabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#313033",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"}}}return i}function gg(n){return document.getElementById(n)}function nn(n,t,i,r){var u=t,e=er(t,i,r).width,f;if(e>n)for(f=t.length-1;f>=0;--f)if((e=er(u=t.substring(0,f)+"...",i,r).width)<=n||u.length<4)return u.length<4&&(u=" "),u;return u}function klt(n){var i=null;try{i="function"!=typeof n&&document.querySelectorAll(n).length?t.compile(document.querySelector(n).innerHTML.trim()):t.compile(n)}catch(r){i=t.compile(n)}return i}function dlt(n,i,r){for(var o,f=n[0].outerHTML,e=Object.keys(r),s=RegExp,u=0;u<e.length;u++)f=f.replace(new s("{{:"+e[u]+"}}","g"),r[e[u].toString()]);return o=t.createElement("div",{id:i,styles:"position: absolute"}),o.innerText=f,o}function tn(){for(var n=1;1+.5*n!=1;)n*=.5;return n}function glt(n,i,r,u,f){var e,o;new t.Animation({}).animate(i,{duration:u,delay:r,name:f,progress:function(n){e=(n.timeStamp-n.delay)/n.duration;o=0+1*e;n.element.style.opacity=o.toString()},end:function(t){t.element.style.opacity=1..toString();n.trigger("animationComplete",event)}})}function rn(n,t){return null!=n?-1!==n.indexOf("%")?t/100*parseInt(n,10):parseInt(n,10):null}function er(n,i,r){var u=document.getElementById("smithchartmeasuretext");return null===u&&(u=t.createElement("text",{id:"smithchartmeasuretext"}),document.body.appendChild(u)),u.innerText=n,u.style.position="absolute",u.style.visibility="hidden",u.style.left="0",u.style.top="-100",u.style.whiteSpace="nowrap",u.style.fontSize=i.size||r.size,u.style.fontWeight=i.fontWeight||r.fontWeight,u.style.fontStyle=i.fontStyle||r.fontStyle,u.style.fontFamily=i.fontFamily||r.fontFamily,u.style.lineHeight="normal",new il(u.clientWidth,u.clientHeight)}function ey(n){var i=document.getElementById(n);return i?t.remove(i):null}function nat(n,t,i,r){return-i*Math.cos(n/r*(Math.PI/2))+i+t}function tat(n,t,i,r){return-t*Math.sin(n/r*(Math.PI/2))+i+t}function fn(n){var t;switch(n){case"Linear":t=nat;break;case"Reverse":t=tat}return t}function oo(n,t,r,u,f){var o={id:n.id,x:n.x,y:n.y,fill:r,"font-size":t.size||f.size,"font-style":t.fontStyle||f.fontStyle,"font-family":t.fontFamily||f.fontFamily,"font-weight":t.fontWeight||f.fontWeight,"text-anchor":n.anchor,opacity:t.opacity},s=n.text,e=new i.SvgRenderer("").createText(o,s);return u.appendChild(e),e}function ly(n){var t;switch(n){case"Fabric":case"FabricDark":t=["#4472c4","#ed7d31","#ffc000","#70ad47","#5b9bd5","#c1c1c1","#6f6fe2","#e269ae","#9e480e","#997300"];break;case"Bootstrap4":case"Bootstrap":case"BootstrapDark":t=["#a16ee5","#f7ce69","#55a5c2","#7ddf1e","#ff6ea6","#7953ac","#b99b4f","#407c92","#5ea716","#b91c52"];break;case"HighContrastLight":case"HighContrast":t=["#79ECE4","#E98272","#DFE6B6","#C6E773","#BA98FF","#FA83C3","#00C27A","#43ACEF","#D681EF","#D8BC6E"];break;case"MaterialDark":t=["#9ECB08","#56AEFF","#C57AFF","#61EAA9","#EBBB3E","#F45C5C","#8A77FF","#63C7FF","#FF84B0","#F7C928"];break;case"Tailwind3":t=["#2F4074","#03B4B4","#0D72DE","#FF5733","#D63384","#F39C12","#EF291F","#91C822"];break;case"Tailwind3Dark":t=["#8029F1","#1ABC9C","#0D72DE","#FF5733","#D63384","#F39C12","#EF291F","#91C822"];break;case"Tailwind":t=["#5A61F6","#65A30D","#334155","#14B8A6","#8B5CF6","#0369A1","#F97316","#9333EA","#F59E0B","#15803D"];break;case"TailwindDark":t=["#8B5CF6","#22D3EE","#F87171","#4ADE80","#E879F9","#FCD34D","#F97316","#2DD4BF","#F472B6","#10B981"];break;case"Bootstrap5Dark":case"Bootstrap5":t=["#FD7E14","#6610F2","#6F42C1","#D63384","#DC3545","#FFC107","#198754","#0DCAF0"];break;case"FluentDark":case"Fluent":t=["#1AC9E6","#DA4CB2","#EDBB40","#AF4BCF","#FF7266","#1BD565","#EE993D","#5887FF","#EC548D","#7D39C0"];break;case"Fluent2":t=["#6200EE","#09AF74","#0076E5","#CB3587","#E7910F","#0364DE","#66CD15","#F3A93C","#107C10","#C19C00"];break;case"Fluent2Dark":case"Fluent2HighContrast":t=["#9BB449","#2A72D5","#43B786","#3F579A","#584EC6","#E85F9C","#6E7A89","#EA6266","#0B6A0B","#C19C00"];break;case"Material3":t=["#6355C7","#00AEE0","#FFB400","#F7523F","#963C70","#FD7400","#4BE0BC","#2196F5","#DE3D8A","#162F88"];break;case"Material3Dark":t=["#4EAAFF","#FA4EAB","#FFF500","#17EA58","#38FFE7","#FF9E45","#B3F32F","#B93CE4","#FC5664","#9B55FF"];break;default:t=["#00bdae","#404041","#357cd2","#e56590","#f8b883","#70ad47","#dd8abd","#7f84e8","#7bb4eb","#ea7a57"]}return t}function iit(n){var t;switch(n){case"BootstrapDark":case"FabricDark":case"MaterialDark":case"HighContrast":t={axisLineColor:"#ffffff",dataLabelColor:"BootstrapDark"===n?"#676767":"FabricDark"===n?"#A19F9D":"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"#969696",rangeBandColor:"#ffffff",tooltipFill:"BootstrapDark"===n?"#F0F0F0":"FabricDark"===n?"#A19F9D":"MaterialDark"===n?"#F4F4F4":"#FFFFFF",background:"#000000",tooltipFontColor:"BootstrapDark"===n?"#1A1A1A":"FabricDark"===n?"#DADADA":"MaterialDark"===n?"rgba(18, 18, 18, 1)":"#000000",trackerLineColor:"#ffffff",labelFontFamily:"BootstrapDark"===n?"Helvetica":"FabricDark"===n?"Segoe UI":"MaterialDark"===n?"Roboto":"Segoe UI",tooltipFontFamily:"BootstrapDark"===n?"Helvetica":"FabricDark"===n?"Segoe UI":"MaterialDark"===n?"Roboto":"Segoe UI",dataLabelFont:{fontFamily:"BootstrapDark"===n?"Helvetica":"FabricDark"===n?"Segoe UI":"MaterialDark"===n?"Roboto":"Segoe UI",color:"BootstrapDark"===n?"#676767":"FabricDark"===n?"#A19F9D":"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"#969696",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"BootstrapDark"===n?"#0070F0":"MaterialDark"===n?"#00B0FF":"FabricDark"===n?"#0074CC":"#FFD939"};break;case"Bootstrap4":t={axisLineColor:"#6C757D",dataLabelColor:"#495057",rangeBandColor:"#212529",tooltipFill:"#212529",background:"#FFFFFF",tooltipFontColor:"#F9FAFB",trackerLineColor:"#212529",fontFamily:"Helvetica",tooltipFillOpacity:1,tooltipTextOpacity:.9,labelFontFamily:"Helvetica",tooltipFontFamily:"Helvetica",dataLabelFont:{fontFamily:"Helvetica",color:"#495057",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"#007BFF"};break;case"Tailwind3":t={axisLineColor:"#4B5563",dataLabelColor:"#111827",rangeBandColor:"#1F2937",background:"#FFFFFF",tooltipFill:"#111827",tooltipFontColor:"#F9FAFB",trackerLineColor:"#1F2937",fontFamily:"Inter",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Inter",tooltipFontFamily:"Inter",dataLabelFont:{fontFamily:"Inter",color:"#6B7280",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"500",tabColor:"#4F46E5"};break;case"Tailwind3Dark":t={axisLineColor:"#D1D5DB",dataLabelColor:"#FFFFFF",rangeBandColor:"#6B7280",background:"transparent",tooltipFill:"#F9FAFB",tooltipFontColor:"#1F2937",trackerLineColor:"#6B7280",fontFamily:"Inter",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Inter",tooltipFontFamily:"Inter",dataLabelFont:{fontFamily:"Inter",color:"#FFFFFF",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"500",tabColor:"#22D3EE"};break;case"Tailwind":t={axisLineColor:"#4B5563",dataLabelColor:"#6B7280",rangeBandColor:"#212529",background:"#FFFFFF",tooltipFill:"#111827",tooltipFontColor:"#F9FAFB",trackerLineColor:"#1F2937",fontFamily:"Inter",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Inter",tooltipFontFamily:"Inter",dataLabelFont:{fontFamily:"Inter",color:"#6B7280",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"#4F46E5"};break;case"TailwindDark":t={axisLineColor:"#D1D5DB",dataLabelColor:"#9CA3AF",rangeBandColor:"#F9FAFB",background:"transparent",tooltipFill:"#E9ECEF",tooltipFontColor:"#1F2937",trackerLineColor:"#9CA3AF",fontFamily:"Inter",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Inter",tooltipFontFamily:"Inter",dataLabelFont:{fontFamily:"Inter",color:"#9CA3AF",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"#22D3EE"};break;case"Bootstrap5":t={axisLineColor:"#343A40",dataLabelColor:"#212529BF",rangeBandColor:"#343A40",background:"rgba(255, 255, 255, 0.0)",tooltipFill:"#000000E5",tooltipFontColor:"#FFFFFF",trackerLineColor:"#343A40",fontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",tooltipFontFamily:"Segoe UI",dataLabelFont:{fontFamily:"Segoe UI",color:"#495057",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"#0D6EFD"};break;case"Bootstrap5Dark":t={axisLineColor:"#ADB5BD",dataLabelColor:"#DEE2E6BF",rangeBandColor:"#ADB5BD",background:"rgba(255, 255, 255, 0.0)",tooltipFill:"#FFFFFFE5",tooltipFontColor:"#212529",trackerLineColor:"#ADB5BD",fontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",tooltipFontFamily:"Segoe UI",dataLabelFont:{fontFamily:"Segoe UI",color:"#E9ECEF",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"#0D6EFD"};break;case"Fluent":t={axisLineColor:"#D2D0CE;",dataLabelColor:"#3B3A39",rangeBandColor:"#A19F9D",background:"rgba(255, 255, 255, 0.0001)",tooltipFill:"#FFFFFF",tooltipFontColor:"#323130",trackerLineColor:"#A19F9D",fontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",tooltipFontFamily:"Segoe UI",dataLabelFont:{fontFamily:"Segoe UI",color:"#3B3A39",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"#0078D4"};break;case"FluentDark":t={axisLineColor:"#3B3A39;",dataLabelColor:"#D2D0CE",rangeBandColor:"#797775",background:"transparent",tooltipFill:"#323130",tooltipFontColor:"#F3F2F1",trackerLineColor:"#797775",fontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",tooltipFontFamily:"Segoe UI",dataLabelFont:{fontFamily:"Segoe UI",color:"#D2D0CE",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"#0078D4"};break;case"Fluent2":t={axisLineColor:"#D2D0CE",dataLabelColor:"#424242",rangeBandColor:"#A19F9D",background:"transparent",tooltipFill:"#FFFFFF",tooltipFontColor:"#242424",trackerLineColor:"#D2D0CE",fontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",tooltipFontFamily:"Segoe UI",dataLabelFont:{fontFamily:"Segoe UI",color:"#242424",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"#0078D4"};break;case"Fluent2Dark":t={axisLineColor:"#8A8886",dataLabelColor:"#D6D6D6",rangeBandColor:"#8A8886",background:"transparent",tooltipFill:"#292929",tooltipFontColor:"#FFFFFF",trackerLineColor:"#3B3A39",fontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",tooltipFontFamily:"Segoe UI",dataLabelFont:{fontFamily:"Segoe UI",color:"#D6D6D6",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"#0078D4"};break;case"Fluent2HighContrast":t={axisLineColor:"#8A8886",dataLabelColor:"#FFFFFF",rangeBandColor:"#8A8886",background:"transparent",tooltipFill:"#000000",tooltipFontColor:"#FFFFFF",trackerLineColor:"#3B3A39",fontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Segoe UI",tooltipFontFamily:"Segoe UI",dataLabelFont:{fontFamily:"Segoe UI",color:"#FFFFFF",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"#0078D4"};break;case"Material3":t={axisLineColor:"#C4C7C5",dataLabelColor:"#49454E",rangeBandColor:"rgba(73, 69, 78, 0.3)",background:"rgba(255, 255, 255, 0.0001)",tooltipFill:"#313033",tooltipFontColor:"#F4EFF4",trackerLineColor:"#49454E",fontFamily:"Roboto",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Roboto",tooltipFontFamily:"Roboto",dataLabelFont:{fontFamily:"Roboto",color:"#49454E",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"#49454E"};break;case"Material3Dark":t={axisLineColor:"#49454F",dataLabelColor:"#CAC4D0",rangeBandColor:"rgba(202, 196, 208, 0.3)",background:"transparent",tooltipFill:"#E6E1E5",tooltipFontColor:"#313033",trackerLineColor:"#CAC4D0",fontFamily:"Roboto",tooltipFillOpacity:1,tooltipTextOpacity:1,labelFontFamily:"Roboto",tooltipFontFamily:"Roboto",dataLabelFont:{fontFamily:"Roboto",color:"#CAC4D0",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"#CAC4D0"};break;default:t={axisLineColor:"#000000",dataLabelColor:"Bootstrap"===n?"#676767":"Fabric"===n?"#666666":"rgba(97, 97, 97, 1)",rangeBandColor:"#000000",background:"#FFFFFF",tooltipFill:"Bootstrap"===n?"#212529":"Fabric"===n?"#FFFFFF":"#000816",tooltipFontColor:"Bootstrap"===n?"#F9FAFB":"Fabric"===n?"#333333":"rgba(249, 250, 251, 1)",trackerLineColor:"#000000",labelFontFamily:"Bootstrap"===n?"Helvetica":"Fabric"===n?"Segoe UI":"Roboto",tooltipFontFamily:"Bootstrap"===n?"Helvetica":"Fabric"===n?"Segoe UI":"Roboto",dataLabelFont:{fontFamily:"Bootstrap"===n?"Helvetica":"Fabric"===n?"Segoe UI":"Roboto",color:"Bootstrap"===n?"#676767":"Fabric"===n?"#666666":"rgba(97, 97, 97, 1)",size:"12px",fontWeight:"400",fontStyle:"Medium"},tooltipFontWeight:"400",tabColor:"Material"===n?"#ff4081":"Fabric"===n?"#0078D6":"#317AB9"}}return t}function rit(n,t){return null!=n?-1!==n.indexOf("%")?t/100*parseInt(n,10):parseInt(n,10):null}function ay(n,t){return t&&t.appendChild(n),n}function hh(n,t,i){var r,u,f,e,o;return t.d=(r=t.rect,u=t.topLeft,f=t.topRight,e=t.bottomLeft,o=t.bottomRight,"M "+r.x+" "+(u+r.y)+" Q "+r.x+" "+r.y+" "+(r.x+u)+" "+r.y+" L "+(r.x+r.width-f)+" "+r.y+" Q "+(r.x+r.width)+" "+r.y+" "+(r.x+r.width)+" "+(r.y+f)+" L "+(r.x+r.width)+" "+(r.y+r.height-o)+" Q "+(r.x+r.width)+" "+(r.y+r.height)+" "+(r.x+r.width-o)+" "+(r.y+r.height)+" L "+(r.x+e)+" "+(r.y+r.height)+" Q "+r.x+" "+(r.y+r.height)+" "+r.x+" "+(r.y+r.height-e)+" L "+r.x+" "+(u+r.y)+" Z"),ay(n.renderer.drawPath(t),i)}function cs(n,t,i){return ay(n.renderer.drawPath(t),i)}function uit(n,i,r){var u=document.getElementById("sparklinesmeasuretext");return null===u&&(u=t.createElement("text",{id:"sparklinesmeasuretext"}),document.body.appendChild(u)),u.innerText=n,u.style.fontStyle=i.fontStyle||r.fontStyle,u.style.fontFamily=i.fontFamily||r.fontFamily,u.style.visibility="hidden",u.style.top="-100",u.style.left="0",u.style.position="absolute",u.style.fontSize=i.size||r.size,u.style.fontWeight=i.fontWeight||r.fontWeight,u.style.whiteSpace="nowrap",u.style.lineHeight="normal",new cy(u.clientWidth,u.clientHeight)}function eit(n){var i=document.getElementById(n);return i?t.remove(i):null}function so(n){return document.getElementById(n)}function oit(n,t,i){return n>=i.x&&n<=i.x+i.width&&t>=i.y&&t<=i.y+i.height}function cit(n){var t;switch(n){case"HighContrastLight":case"HighContrast":t={axisLabel:"#969696",axisTitle:"#969696",majorGridLine:"#BFBFBF",minorGridLine:"#969696",majorTickLine:"#BFBFBF",minorTickLine:"#969696",chartTitle:"#ffffff",legendLabel:"#ffffff",background:"transparent",tooltipFill:"#ffffff",tooltipBoldLabel:"#000000",tooltipLightLabel:"#000000",tooltipHeaderLine:"#969696",tabColor:"#FFD939",backWallColor:"#222222",leftWallColor:"#272727",chartTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#000000",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#000000",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"MaterialDark":case"FabricDark":case"BootstrapDark":t={axisLabel:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#676767",axisTitle:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#676767",majorGridLine:"#414040",minorGridLine:"#514F4F",majorTickLine:"#414040",minorTickLine:"#4A4848",chartTitle:"#ffffff",legendLabel:"#DADADA",background:"transparent",tooltipFill:"#F4F4F4",tooltipBoldLabel:"#282727",tooltipLightLabel:"#333232",tooltipHeaderLine:"#9A9A9A",backWallColor:"#222222",leftWallColor:"#272727",tabColor:"MaterialDark"===n?"#00B0FF":"FabricDark"===n?"#0074CC":"#0070F0",chartTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"FabricDark"===n?"#DADADA":"#FFFFFF",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#676767",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"FabricDark"===n?"#DADADA":"#FFFFFF",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#676767",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"MaterialDark"===n?"rgba(18, 18, 18, 1)":"FabricDark"===n?"#DADADA":"#1A1A1A",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#676767",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"MaterialDark"===n||"FabricDark"===n?"#000000":"#FFFFFF",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"FabricDark"===n?"#DADADA":"#FFFFFF",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap4":t={axisLabel:"#222222",axisTitle:"#212529",majorGridLine:"#CED4DA",minorGridLine:"#DEE2E6",majorTickLine:"#ADB5BD",minorTickLine:"#CED4DA",chartTitle:"#212529",legendLabel:"#212529",background:"transparent",tooltipFill:"#020202",tooltipBoldLabel:"rgba(255,255,255)",tooltipLightLabel:"rgba(255,255,255, 0.9)",tooltipHeaderLine:"rgba(255,255,255, 0.2)",tabColor:"#007BFF",backWallColor:"#F9F9F9",leftWallColor:"#EBEBEB",chartTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#222222",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#666666",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#222222",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Tailwind3":t={axisLabel:"#4B5563",axisTitle:"#6B7280",majorGridLine:"#E5E7EB",minorGridLine:"#E5E7EB",majorTickLine:"#D1D5DB",minorTickLine:"#D1D5DB",chartTitle:"#111827",legendLabel:"#6B7280",background:"transparent",tooltipFill:"#111827",tooltipBoldLabel:"#F9FAFB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#D1D5DB",tabColor:"#4F46E5",backWallColor:"rgba(209, 213, 219, 0.03)",leftWallColor:"#EBEBEB",chartTitleFont:{color:"#111827",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#4B5563",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#374151",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},legendLabelFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Inter",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#6B7280",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"},datalabelFont:{color:"#111827",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#6B7280",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"}};break;case"Tailwind3Dark":t={axisLabel:"#D1D5DB",axisTitle:"#9CA3AF",majorGridLine:"#374151",minorGridLine:"#374151",majorTickLine:"#4B5563",minorTickLine:"#4B5563",chartTitle:"#FFFFFF",legendLabel:"#9CA3AF",background:"transparent",tooltipFill:"#F9FAFB",tooltipBoldLabel:"#1F2937",tooltipLightLabel:"#1F2937",tooltipHeaderLine:"#374151",tabColor:"#22D3EE",backWallColor:"rgb(55,65,81, 0.3)",leftWallColor:"rgb(255,255,255,0.1)",chartTitleFont:{color:"#FFFFFF",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#E5E7EB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},legendLabelFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},tooltipLabelFont:{color:"#1F2937",fontFamily:"Inter",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#9CA3AF",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"},datalabelFont:{color:"#FFFFFF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#9CA3AF",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"}};break;case"Tailwind":t={axisLabel:"#222222",axisTitle:"#374151",majorGridLine:"#E5E7EB",minorGridLine:"#E5E7EB",majorTickLine:"#D1D5DB",minorTickLine:"#D1D5DB",chartTitle:"#374151",legendLabel:"#374151",background:"transparent",tooltipFill:"#111827",tooltipBoldLabel:"#D1D5DB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#6B7280",tabColor:"#4F46E5",backWallColor:"#F9F9F9",leftWallColor:"#EBEBEB",chartTitleFont:{color:"#374151",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#222222",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Inter",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#FFFFFF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"TailwindDark":t={axisLabel:"#D1D5DB",axisTitle:"#D1D5DB",majorGridLine:"#374151",minorGridLine:"#374151",majorTickLine:"#4B5563",minorTickLine:"#4B5563",chartTitle:"#D1D5DB",legendLabel:"#D1D5DB",background:"transparent",tooltipFill:"#F9FAFB",tooltipBoldLabel:"#6B7280",tooltipLightLabel:"#1F2937",tooltipHeaderLine:"#9CA3AF",tabColor:"#22D3EE",backWallColor:"#222222",leftWallColor:"#272727",chartTitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#1F2937",fontFamily:"Inter",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap5":t={axisLabel:"#212529",axisTitle:"#212529",majorGridLine:"#DEE2E6",minorGridLine:"#DEE2E6",majorTickLine:"#DEE2E6",minorTickLine:"#DEE2E6",chartTitle:"#212529",legendLabel:"#212529",background:"transparent",tooltipFill:"#000000E5",tooltipBoldLabel:"#FFFFFF",tooltipLightLabel:"#FFFFFF",tooltipHeaderLine:"#FFFFFF",tabColor:"#0D6EFD",backWallColor:"#DEE2E6",leftWallColor:"#DEE2E6",chartTitleFont:{color:"#212529",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#343A40",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#212529",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"700"},datalabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"10px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#21252980",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"}};break;case"Bootstrap5Dark":t={axisLabel:"#DEE2E6",axisTitle:"#DEE2E6",majorGridLine:"#495057",minorGridLine:"#495057",majorTickLine:"#495057",minorTickLine:"#495057",chartTitle:"#DEE2E6",legendLabel:"#DEE2E6",background:"transparent",tooltipFill:"#FFFFFFE5",tooltipBoldLabel:"#212529",tooltipLightLabel:"#212529",tooltipHeaderLine:"#212529",tabColor:"#0D6EFD",backWallColor:"#495057",leftWallColor:"#495057",chartTitleFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#212529",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"700"},datalabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"10px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#DEE2E680",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"}};break;case"Fluent":t={axisLabel:"#222222",axisTitle:"#201F1E",majorGridLine:"#DDDDDD",minorGridLine:"#DDDDDD",majorTickLine:"#DDDDDD",minorTickLine:"#DDDDDD",chartTitle:"#201F1E",legendLabel:"#323130",background:"transparent",tooltipFill:"#FFFFFF",tooltipBoldLabel:"#323130",tooltipLightLabel:"#323130",tooltipHeaderLine:"#D2D0CE",tabColor:"#0078D4",backWallColor:"#F9F9F9",leftWallColor:"#EBEBEB",chartTitleFont:{color:"#201F1E",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#222222",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#201F1E",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#49454E",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#323130",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#201F1E",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#323129",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"FluentDark":t={axisLabel:"#D2D0CE",axisTitle:"#D2D0CE",majorGridLine:"#414040",minorGridLine:"#414040",majorTickLine:"#3B3A39",minorTickLine:"#3B3A39",chartTitle:"#F3F2F1",legendLabel:"#D2D0CE",background:"transparent",tooltipFill:"#252423",tooltipBoldLabel:"#F3F2F1",tooltipLightLabel:"#F3F2F1",tooltipHeaderLine:"#3B3A39",tabColor:"#0078D4",backWallColor:"#222222",leftWallColor:"#272727",chartTitleFont:{color:"#C8C6C4",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#D2D0CE",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#D2D0CE",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#F3F2F2",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#000000",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Fluent2":t={axisLabel:"#616161",axisTitle:"#242424",majorGridLine:"#EDEBE9",minorGridLine:"#EDEBE9",majorTickLine:"#D2D0CE",minorTickLine:"#D2D0CE",chartTitle:"#242424",legendLabel:"#242424",background:"transparent",tooltipFill:"#FFFFFF",tooltipBoldLabel:"#242424",tooltipLightLabel:"#242424",tooltipHeaderLine:"#D2D0CE",tabColor:"#0078D4",backWallColor:"#F9F9F9",leftWallColor:"#EBEBEB",chartTitleFont:{color:"#242424",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#616161",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"10px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#616161",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"}};break;case"Fluent2Dark":t={axisLabel:"#FFFFFF",axisTitle:"#FFFFFF",majorGridLine:"#3B3A39",minorGridLine:"#3B3A39",majorTickLine:"#292827",minorTickLine:"#292827",chartTitle:"#FFFFFF",legendLabel:"#FFFFFF",background:"transparent",tooltipFill:"#292929",tooltipBoldLabel:"#FFFFFF",tooltipLightLabel:"#FFFFFF",tooltipHeaderLine:"#3B3A39",tabColor:"#0078D4",backWallColor:"#222222",leftWallColor:"#272727",chartTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#ADADAD",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"10px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#ADADAD",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"}};break;case"Fluent2HighContrast":t={axisLabel:"#FFFFFF",axisTitle:"#FFFFFF",majorGridLine:"#292827",minorGridLine:"#3B3A39",majorTickLine:"#292827",minorTickLine:"#3B3A39",chartTitle:"#FFFFFF",legendLabel:"#FFFFFF",background:"transparent",tooltipFill:"#000000",tooltipBoldLabel:"#FFFFFF",tooltipLightLabel:"#FFFFFF",tooltipHeaderLine:"#3B3A39",tabColor:"#0078D4",backWallColor:"#222222",leftWallColor:"#272727",chartTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"10px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"}};break;case"Material3":t={axisLabel:"#222222",axisTitle:"#1C1B1F",majorGridLine:"#DDDDDD",minorGridLine:"#DDDDDD",majorTickLine:"#DDDDDD",minorTickLine:"#DDDDDD",chartTitle:"#1C1B1F",legendLabel:"#49454E",background:"transparent",tooltipFill:"#313033",tooltipBoldLabel:"#F4EFF4",tooltipLightLabel:"#F4EFF4",tooltipHeaderLine:"#F4EFF4",tabColor:"#49454E",backWallColor:"#F9F9F9",leftWallColor:"#EBEBEB",chartTitleFont:{color:"#1C1B1F",fontFamily:"Roboto",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#222222",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#1C1B1F",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#49454E",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F4EFF4",fontFamily:"Roboto",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#1C1B1F",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#FFFFFF",fontFamily:"Roboto",size:"10px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#49454E",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Material3Dark":t={axisLabel:"#CAC4D0",axisTitle:"#CAC4D0",majorGridLine:"#444746",minorGridLine:"#444746",majorTickLine:"#444746",minorTickLine:"#444746",chartTitle:"#E6E1E5",legendLabel:"#CAC4D0",background:"transparent",tooltipFill:"#E6E1E5",tooltipBoldLabel:"#313033",tooltipLightLabel:"#313033",tooltipHeaderLine:"#313033",tabColor:"#CAC4D0",backWallColor:"#222222",leftWallColor:"#272727",chartTitleFont:{color:"#E6E1E5",fontFamily:"Roboto",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#E6E1E5",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#313033",fontFamily:"Roboto",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"#E6E1E5",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#000000",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;default:t={axisLabel:"#222222",axisTitle:"#424242",majorGridLine:"#dbdbdb",minorGridLine:"#eaeaea",majorTickLine:"#b5b5b5",minorTickLine:"#d6d6d6",chartTitle:"#424242",legendLabel:"#353535",background:"transparent",tooltipFill:"#000816",tooltipBoldLabel:"#ffffff",tooltipLightLabel:"#dbdbdb",tooltipHeaderLine:"#ffffff",backWallColor:"#F9F9F9",leftWallColor:"#EBEBEB",tabColor:"Material"===n?"#ff4081":"Fabric"===n?"#0078D6":"#317AB9",chartTitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Fabric"===n?"#333333":"#212529",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"16px",fontStyle:"Normal",fontWeight:"600"},axisLabelFont:{color:"#222222",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Fabric"===n?"#333333":"#212529",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"Material"===n?"rgba(97, 97, 97, 1)":"#666666",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"Material"===n?"rgba(249, 250, 251, 1)":"Fabric"===n?"#333333":"#F9FAFB",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal"},axisTitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Fabric"===n?"#333333":"#212529",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},datalabelFont:{color:"#FFFFFF",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Fabric"===n?"#333333":"#212529",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"}}}return t}function lit(n){var t;switch(n){case"Fabric":t=["#06DCFF","#EF36BB","#ffc000","#70ad47","#5b9bd5","#c1c1c1","#6f6fe2","#e269ae","#9e480e","#997300"];break;case"Bootstrap4":t=["#9B43F4","#F7523F","#55a5c2","#7ddf1e","#ff6ea6","#7953ac","#b99b4f","#407c92","#5ea716","#b91c52"];break;case"Bootstrap":t=["#6355C7","#FFB400","#55a5c2","#7ddf1e","#ff6ea6","#7953ac","#b99b4f","#407c92","#5ea716","#b91c52"];break;case"HighContrastLight":case"HighContrast":t=["#41E4FF","#FF5B5B","#DFE6B6","#C6E773","#BA98FF","#FA83C3","#00C27A","#43ACEF","#D681EF","#D8BC6E"];break;case"MaterialDark":t=["#55C75A","#FFB400","#C57AFF","#61EAA9","#EBBB3E","#F45C5C","#8A77FF","#63C7FF","#FF84B0","#F7C928"];break;case"FabricDark":t=["#41E4FF","#FD7400","#ffc000","#70ad47","#5b9bd5","#c1c1c1","#6f6fe2","#e269ae","#9e480e","#997300"];break;case"BootstrapDark":t=["#BC43F4","#FFC539","#55a5c2","#7ddf1e","#ff6ea6","#7953ac","#b99b4f","#407c92","#5ea716","#b91c52"];break;case"Tailwind3":t=["#2F4074","#03B4B4","#0D72DE","#FF5733","#D63384","#F39C12","#EF291F","#91C822"];break;case"Tailwind3Dark":t=["#8029F1","#1ABC9C","#0D72DE","#FF5733","#D63384","#F39C12","#EF291F","#91C822"];break;case"Tailwind":t=["#5C43F4","#FFB400","#334155","#14B8A6","#8B5CF6","#0369A1","#F97316","#9333EA","#F59E0B","#15803D"];break;case"TailwindDark":t=["#00C2FF","#FD7400","#F87171","#4ADE80","#E879F9","#FCD34D","#F97316","#2DD4BF","#F472B6","#10B981"];break;case"Bootstrap5Dark":case"Bootstrap5":t=["#FD7E14","#6610F2","#6F42C1","#D63384","#DC3545","#FFC107","#198754","#0DCAF0"];break;case"FluentDark":t=["#41E4FF","#FF7E6F","#EDBB40","#AF4BCF","#FF7266","#1BD565","#EE993D","#5887FF","#EC548D","#7D39C0"];break;case"Fluent":t=["#2196F5","#FC7400","#EDBB40","#AF4BCF","#FF7266","#1BD565","#EE993D","#5887FF","#EC548D","#7D39C0"];break;case"Fluent2":t=["#6200EE","#09AF74","#0076E5","#CB3587","#E7910F","#0364DE","#66CD15","#F3A93C","#107C10","#C19C00"];break;case"Fluent2Dark":case"Fluent2HighContrast":t=["#9BB449","#2A72D5","#43B786","#3F579A","#584EC6","#E85F9C","#6E7A89","#EA6266","#0B6A0B","#C19C00"];break;case"Material3":t=["#6A56FF","#00DBFF","#FFB400","#F7523F","#963C70","#FD7400","#4BE0BC","#2196F5","#DE3D8A","#162F88"];break;case"Material3Dark":t=["#00C2FF","#FFB400","#FFF500","#17EA58","#38FFE7","#FF9E45","#B3F32F","#B93CE4","#FC5664","#9B55FF"];break;default:t=["#6355C7","#00AEE0","#357cd2","#e56590","#f8b883","#70ad47","#dd8abd","#7f84e8","#7bb4eb","#ea7a57"]}return t}function dy(n,i){for(var f,o,h,r,e,c,u=Number.MAX_VALUE,s=0;s<i.length;s++)if(r=i[s],f=[],r.visible&&(n.name===r.xAxisName||"primaryXAxis"===n.name&&null===r.xAxisName))if((f=r.points.map(function(n){return n.xValue})).sort(function(n,t){return n-t}),1===f.length)h="DateTime"===n.valueType&&r.xMin===r.xMax?r.xMin-2592e4:r.xMin,0!=(o=f[0]-(t.isNullOrUndefined(h)?n.visibleRange.min:h))&&(u=Math.min(u,o));else for(e=0;e<f.length;e++)c=f[e],e>0&&c&&0!=(o=c-f[e-1])&&(u=Math.min(u,o));return u===Number.MAX_VALUE&&(u=1),u}function iu(n,t){var i=t.visibleRange,r=(n-i.min)/i.delta;return t.isAxisInverse?1-r:r}var vh,yh,nv,tv,sv,du,le,fit,iut;vh={};n.r(vh);n.d(vh,{AccPointData:()=>is,AccPoints:()=>gv,Accessibility:()=>lu,AccumulationAnnotation:()=>wct,AccumulationAnnotationSettings:()=>hk,AccumulationChart:()=>nct,AccumulationDataLabel:()=>hct,AccumulationDataLabelSettings:()=>ck,AccumulationDistributionIndicator:()=>wot,AccumulationHighlight:()=>yct,AccumulationLegend:()=>oct,AccumulationSelection:()=>pk,AccumulationSeries:()=>ak,AccumulationTooltip:()=>lct,Animation:()=>au,AreaSeries:()=>uft,AtrIndicator:()=>kot,Axis:()=>yo,AxisLine:()=>wa,AxisRenderer:()=>wit,AxisSettings:()=>btt,BarSeries:()=>eft,BarSeries3D:()=>lvt,BinaryTreeBuilder:()=>by,BollingerBands:()=>fst,Border:()=>yt,BoxAndWhiskerSeries:()=>fht,BubbleSeries:()=>tot,BulletChart:()=>vlt,BulletChartLegend:()=>wlt,BulletChartLegendSettings:()=>ig,BulletDataLabel:()=>tg,BulletLabelStyle:()=>ce,BulletTooltip:()=>ylt,BulletTooltipSettings:()=>ng,CandleSeries:()=>pft,CartesianAxisLayoutPanel:()=>hit,Category:()=>ik,Category3D:()=>srt,CenterLabel:()=>hp,Chart:()=>wv,Chart3D:()=>gat,Chart3DAxis:()=>hl,Chart3DColumn:()=>kit,Chart3DDataLabelSettings:()=>irt,Chart3DEmptyPointSettings:()=>rrt,Chart3DLegendSettings:()=>ort,Chart3DMajorGridLines:()=>dit,Chart3DMajorTickLines:()=>nrt,Chart3DMinorGridLines:()=>git,Chart3DMinorTickLines:()=>trt,Chart3DPoint:()=>np,Chart3DRender:()=>py,Chart3DRow:()=>bit,Chart3DSeries:()=>tp,Chart3DTextFont:()=>el,Chart3DTooltipSettings:()=>frt,ChartAnnotation:()=>rht,ChartAnnotationSettings:()=>tw,ChartArea:()=>ap,ChartLocation:()=>h,ChartSegment:()=>kb,ChartTransform3D:()=>ait,CircleOption:()=>ef,CircularChart3D:()=>uyt,CircularChart3DConnector:()=>lrt,CircularChart3DDataLabelFont:()=>crt,CircularChart3DDataLabelSettings:()=>art,CircularChart3DEmptyPointSettings:()=>yrt,CircularChart3DLegendSettings:()=>drt,CircularChart3DPointData:()=>fp,CircularChart3DPoints:()=>vrt,CircularChart3DSeries:()=>up,CircularChart3DTooltipSettings:()=>nut,CircularChartDataLabel3D:()=>bvt,CircularChartExport3D:()=>fyt,CircularChartHighlight3D:()=>syt,CircularChartLegend3D:()=>tyt,CircularChartSelection3D:()=>tut,CircularChartTooltip3D:()=>iyt,ClosestPoint:()=>ag,CoefficientToVector:()=>fu,ColorValue:()=>th,Column:()=>cw,ColumnSeries:()=>bv,ColumnSeries3D:()=>svt,Connector:()=>ye,ContainerArea:()=>ytt,ContainerPadding:()=>vs,ControlPoints:()=>hc,CornerRadius:()=>wl,Crosshair:()=>hst,CrosshairSettings:()=>yv,CrosshairTooltip:()=>ka,CustomizeOption:()=>uut,DataEditing:()=>pst,DataLabel:()=>dst,DataLabel3D:()=>avt,DataLabelSettings:()=>pb,DataLabelTextOptions:()=>wg,DataPoint:()=>kk,DateTime:()=>tk,DateTime3D:()=>rvt,DateTimeCategory:()=>dut,DateTimeCategory3D:()=>fvt,Direction:()=>pg,Double:()=>ys,Double3D:()=>sl,DragSettings:()=>vp,EmaIndicator:()=>aot,EmptyPointSettings:()=>pl,ErrorBar:()=>gst,ErrorBarCapSettings:()=>bb,ErrorBarSettings:()=>db,Export:()=>wht,Export3D:()=>wvt,Font:()=>oi,FunnelSeries:()=>rct,Graphics3D:()=>wy,GridArcPoints:()=>kg,Highlight:()=>bst,Highlight3D:()=>pvt,HiloOpenCloseSeries:()=>ket,HiloSeries:()=>wet,HistogramSeries:()=>fot,HorizontalLabelCollection:()=>fy,ImageOption:()=>to,Index:()=>ir,Indexes:()=>as,LabelBorder:()=>ya,LabelCollection:()=>eg,LabelLocation:()=>fut,LabelOffset:()=>gtt,LabelOption:()=>bg,LabelRegion:()=>og,LastValueLabel:()=>kst,LastValueLabelSettings:()=>hv,Legend:()=>tht,Legend3D:()=>kat,LegendBorder:()=>cn,LegendItemStyle:()=>hn,LegendItemStyleBorder:()=>sn,LegendLocation:()=>on,LegendSeries:()=>blt,LegendTitle:()=>en,LineSegment:()=>hg,LineSeries:()=>rk,LineSettings:()=>ptt,Location:()=>lf,Logarithmic:()=>but,Logarithmic3D:()=>ovt,MacdIndicator:()=>ost,MajorGridLines:()=>kh,MajorTickLines:()=>dh,MajorTickLinesSettings:()=>dd,Margin:()=>lr,MarkerOptions:()=>vg,MarkerSettings:()=>us,Matrix3D:()=>ch,Mean:()=>nv,MinorGridLines:()=>pa,MinorTickLines:()=>ba,MinorTickLinesSettings:()=>gd,MomentumIndicator:()=>got,MultiColoredAreaSeries:()=>oht,MultiColoredLineSeries:()=>hht,MultiColoredSeries:()=>yc,MultiLevelCategories:()=>iw,MultiLevelLabel:()=>cht,MultiLevelLabels:()=>uw,NiceInterval:()=>vc,NiceIntervals:()=>ip,Offset:()=>cp,Padding:()=>ktt,ParetoOptions:()=>wb,ParetoSeries:()=>yht,PeriodSelector:()=>ry,PeriodSelectorSettings:()=>yp,Periods:()=>dl,PieCenter:()=>lk,PieSeries:()=>ty,PieSeries3D:()=>kvt,Point:()=>lg,Point3D:()=>cb,PointData:()=>io,PointRegion:()=>cg,Points:()=>uo,PolarArc:()=>tv,PolarSeries:()=>uk,Polygon3D:()=>ky,PolygonOption:()=>hb,PyramidSeries:()=>fct,RadarSeries:()=>lft,RadialLabelCollections:()=>sg,Range:()=>kd,RangeAreaSeries:()=>fk,RangeBandSettings:()=>wtt,RangeColorSetting:()=>nk,RangeColumnSeries:()=>het,RangeNavigator:()=>gc,RangeNavigatorAxis:()=>gk,RangeNavigatorSeries:()=>nd,RangeSeries:()=>dk,RangeSlider:()=>ud,RangeStepAreaSeries:()=>aet,RangeTooltip:()=>clt,RangeTooltipSettings:()=>rd,RectOption:()=>ft,Row:()=>hw,RsiIndicator:()=>tst,ScatterSeries:()=>oet,ScrollBar:()=>aht,ScrollbarSettings:()=>ew,ScrollbarSettingsRange:()=>fw,Selection:()=>dv,Selection3D:()=>hrt,Series:()=>vt,SeriesAccessibility:()=>op,SeriesBase:()=>lv,SeriesMarker:()=>rtt,SeriesMarkerBorder:()=>gn,SeriesMarkerDataLabel:()=>itt,SeriesMarkerDataLabelBorder:()=>ntt,SeriesMarkerDataLabelConnectorLine:()=>ttt,SeriesTooltip:()=>dn,SeriesTooltipBorder:()=>kn,SmaIndicator:()=>cot,Smithchart:()=>sat,SmithchartAxis:()=>oy,SmithchartAxisLine:()=>yn,SmithchartBorder:()=>fg,SmithchartFont:()=>df,SmithchartLabelPosition:()=>yg,SmithchartLegend:()=>cat,SmithchartLegendSettings:()=>ln,SmithchartMajorGridLines:()=>an,SmithchartMargin:()=>ug,SmithchartMinorGridLines:()=>vn,SmithchartRect:()=>oh,SmithchartSeries:()=>utt,SmithchartSize:()=>il,Sparkline:()=>yat,SparklineBorder:()=>ss,SparklineDataLabelSettings:()=>nit,SparklineFont:()=>hy,SparklineMarkerSettings:()=>dtt,SparklineTooltip:()=>pat,SparklineTooltipSettings:()=>vtt,SplineAreaSeries:()=>oot,SplineRangeAreaSeries:()=>ek,SplineSeries:()=>rot,StackLabelSettings:()=>sw,StackLabelsFont:()=>sp,StackValues:()=>ov,StackingAreaSeries:()=>iet,StackingBarSeries:()=>vft,StackingBarSeries3D:()=>cvt,StackingColumnSeries:()=>bft,StackingColumnSeries3D:()=>hvt,StackingLineSeries:()=>eet,StackingStepAreaSeries:()=>uet,StepAreaSeries:()=>net,StepLineSeries:()=>dft,StochasticIndicator:()=>rst,StockChart:()=>hlt,StockChartAnnotationSettings:()=>ad,StockChartArea:()=>ed,StockChartAxis:()=>tl,StockChartBorder:()=>he,StockChartConnector:()=>fh,StockChartFont:()=>fo,StockChartIndexes:()=>vd,StockChartIndicator:()=>cd,StockChartLegendSettings:()=>wd,StockChartRow:()=>ld,StockChartStripLineSettings:()=>od,StockChartTrendline:()=>ult,StockEmptyPointSettings:()=>sd,StockEventsSettings:()=>yd,StockLegend:()=>olt,StockMargin:()=>uy,StockSeries:()=>hd,StockTooltipSettings:()=>pp,StripLine:()=>gut,StripLineSettings:()=>rw,StyleSettings:()=>id,Subtitle:()=>wn,Svg3DRenderer:()=>vit,TechnicalIndicator:()=>vv,Thickness:()=>wr,ThumbSettings:()=>td,Title:()=>bn,TitleBorder:()=>sit,TitleSettings:()=>yy,TitleStyleSettings:()=>kl,TmaIndicator:()=>yot,ToolbarPosition:()=>ow,Tooltip:()=>vst,Tooltip3D:()=>bat,TooltipRender:()=>hat,TooltipSettings:()=>yl,TrackLineSettings:()=>att,TransformToVisible:()=>bf,Trendline:()=>cv,Trendlines:()=>sst,Vector3D:()=>ho,Visible3DLabels:()=>wat,VisibleLabels:()=>gh,WallRenderer:()=>pit,WaterfallSeries:()=>yet,Zoom:()=>ok,ZoomSettings:()=>pv,accReactTemplate:()=>gw,afterExport:()=>bs,animateAddPoints:()=>bt,animateRectElement:()=>bw,animateRedrawElement:()=>ev,animateTextElement:()=>ob,animationComplete:()=>gl,annotationRender:()=>ca,appendChildElement:()=>o,appendClipElement:()=>eu,appendElement:()=>ec,applyZLight:()=>se,axisLabelClick:()=>wp,axisLabelRender:()=>na,axisMultiLabelRender:()=>ta,axisRangeCalculated:()=>bh,beforeExport:()=>yf,beforePrint:()=>ha,beforeResize:()=>ao,blazorTemplatesReset:()=>nh,bulletChartMouseClick:()=>nw,calculateLegendShapes:()=>fb,calculateRect:()=>gs,calculateScrollbarOffset:()=>ks,calculateShapes:()=>kw,calculateSize:()=>ns,chartDoubleClick:()=>ua,chartMouseClick:()=>ra,chartMouseDown:()=>ea,chartMouseLeave:()=>fa,chartMouseMove:()=>ia,chartMouseUp:()=>oa,chartReactTemplate:()=>nb,checkBounds:()=>rv,checkColorFormat:()=>ub,colorNameToHex:()=>vi,componentToHex:()=>ge,containsRect:()=>rb,convertHexToColor:()=>wu,convertToHexCode:()=>uv,createSvg:()=>ts,createTemplate:()=>ee,createTooltip:()=>yw,createZoomingLabels:()=>pw,degreeToLocation:()=>yi,degreeToRadian:()=>ds,drag:()=>dp,dragComplete:()=>sa,dragEnd:()=>gp,dragStart:()=>kp,drawSymbol:()=>tr,findClipRect:()=>wo,findCrosshairDirection:()=>ic,findlElement:()=>tb,firstToLowerCase:()=>et,get3DSeriesColor:()=>lit,get3DThemeColor:()=>cit,getActualDesiredIntervalsCount:()=>ke,getAngle:()=>vw,getAnimationFunction:()=>fe,getBulletThemeColor:()=>rg,getColorByValue:()=>lb,getDraggedRectLocation:()=>oc,getElement:()=>r,getExactData:()=>bk,getFontStyle:()=>ko,getGradientColor:()=>ab,getLabelText:()=>ib,getMedian:()=>sc,getMinPointsDelta:()=>iv,getMinPointsDeltaValue:()=>dy,getNearestValue:()=>iy,getPercentage:()=>cc,getPercentageColor:()=>vb,getPoint:()=>l,getRangeThemeColor:()=>fd,getRangeValueXByPoint:()=>kc,getRectLocation:()=>dw,getRotatedRectangleCoordinates:()=>da,getSaturationColor:()=>fv,getScrollbarThemeColor:()=>yb,getSeriesColor:()=>ro,getSeriesFromIndex:()=>vk,getTemplateFunction:()=>fc,getTextAnchor:()=>bu,getThemeColor:()=>lc,getTitle:()=>tu,getTransform:()=>ww,getUnicodeText:()=>no,getValueXByPoint:()=>rc,getValueYByPoint:()=>uc,getVisiblePoints:()=>vu,getXLocation:()=>uh,indexFinder:()=>uu,inside:()=>we,isBreakLabel:()=>rf,isCollide:()=>oe,isOverlap:()=>pi,isRotatedRectIntersect:()=>ga,isZoomSet:()=>be,legendClick:()=>ar,legendRender:()=>te,lineBreakLabelTrim:()=>eb,linear:()=>ti,load:()=>ne,loaded:()=>rut,logBase:()=>hi,logWithIn:()=>po,markerAnimate:()=>pu,measureElementRect:()=>go,minMax:()=>ff,multiLevelLabelClick:()=>va,onZooming:()=>or,pathAnimation:()=>kf,pointByIndex:()=>ny,pointClick:()=>ps,pointDoubleClick:()=>bp,pointMove:()=>ws,pointRender:()=>rr,rangeValueToCoefficient:()=>wk,redrawElement:()=>ci,regSub:()=>vf,regSup:()=>pe,removeElement:()=>v,resized:()=>af,rotateTextSize:()=>yu,scrollChanged:()=>tf,scrollEnd:()=>vo,scrollStart:()=>la,selectionComplete:()=>ue,seriesRender:()=>re,setRange:()=>nr,sharedTooltipRender:()=>wh,showTooltip:()=>uf,smithchartBeforePrint:()=>sy,sort:()=>aw,stockEventFont:()=>sv,stockEventRender:()=>aa,stopTimer:()=>de,stringToNumber:()=>it,subArray:()=>sr,subArraySum:()=>nc,subtractRect:()=>tc,subtractThickness:()=>vr,sum:()=>lt,templateAnimate:()=>bo,textElement:()=>ct,textRender:()=>ie,textTrim:()=>wi,textWrap:()=>ur,textWrapAnyWhere:()=>sb,titleBorder:()=>lp,titlePositionX:()=>pr,titleSettings:()=>bl,tooltipRender:()=>gu,triggerLabelRender:()=>yr,valueToCoefficient:()=>ut,valueToCoefficients:()=>iu,valueToPolarCoefficient:()=>nu,withIn:()=>si,withInBounds:()=>ht,withInRange:()=>ni,zoomComplete:()=>nf});yh=n(864);const t=ejdashboard.base;var ph,li=(ph=function(n,t){return ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},ph(n,t)},function(n,t){function i(){this.constructor=n}ph(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),e=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},ye=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property("Line")],i.prototype,"type",void 0),e([t.Property(null)],i.prototype,"color",void 0),e([t.Property(1)],i.prototype,"width",void 0),e([t.Property(null)],i.prototype,"length",void 0),e([t.Property("")],i.prototype,"dashArray",void 0),i}(t.ChildProperty),lf=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(0)],i.prototype,"x",void 0),e([t.Property(0)],i.prototype,"y",void 0),i}(t.ChildProperty),lu=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(null)],i.prototype,"accessibilityDescription",void 0),e([t.Property(null)],i.prototype,"accessibilityRole",void 0),e([t.Property(!0)],i.prototype,"focusable",void 0),e([t.Property(0)],i.prototype,"tabIndex",void 0),i}(t.ChildProperty),op=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(null)],i.prototype,"accessibilityDescriptionFormat",void 0),i}(lu),oi=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property("Normal")],i.prototype,"fontStyle",void 0),e([t.Property("16px")],i.prototype,"size",void 0),e([t.Property("Normal")],i.prototype,"fontWeight",void 0),e([t.Property("")],i.prototype,"color",void 0),e([t.Property("Center")],i.prototype,"textAlignment",void 0),e([t.Property("Segoe UI")],i.prototype,"fontFamily",void 0),e([t.Property(1)],i.prototype,"opacity",void 0),e([t.Property("Wrap")],i.prototype,"textOverflow",void 0),i}(t.ChildProperty),sp=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property("Normal")],i.prototype,"fontStyle",void 0),e([t.Property("16px")],i.prototype,"size",void 0),e([t.Property("Normal")],i.prototype,"fontWeight",void 0),e([t.Property("")],i.prototype,"color",void 0),e([t.Property("Center")],i.prototype,"textAlignment",void 0),e([t.Property("Segoe UI")],i.prototype,"fontFamily",void 0),e([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),hp=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(null)],i.prototype,"text",void 0),e([t.Complex({fontFamily:null,size:"16px",fontStyle:"Normal",fontWeight:"600",color:null},oi)],i.prototype,"textStyle",void 0),e([t.Property(null)],i.prototype,"hoverTextFormat",void 0),i}(t.ChildProperty),yt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property("")],i.prototype,"color",void 0),e([t.Property(1)],i.prototype,"width",void 0),e([t.Property("")],i.prototype,"dashArray",void 0),i}(t.ChildProperty),cp=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(0)],i.prototype,"x",void 0),e([t.Property(0)],i.prototype,"y",void 0),i}(t.ChildProperty),lr=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(t.Browser.isDevice?5:10)],i.prototype,"left",void 0),e([t.Property(t.Browser.isDevice?5:10)],i.prototype,"right",void 0),e([t.Property(t.Browser.isDevice?5:10)],i.prototype,"top",void 0),e([t.Property(t.Browser.isDevice?5:10)],i.prototype,"bottom",void 0),i}(t.ChildProperty),au=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(!0)],i.prototype,"enable",void 0),e([t.Property(1e3)],i.prototype,"duration",void 0),e([t.Property(0)],i.prototype,"delay",void 0),i}(t.ChildProperty),yl=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(!1)],i.prototype,"enable",void 0),e([t.Property(!0)],i.prototype,"enableMarker",void 0),e([t.Property(!1)],i.prototype,"shared",void 0),e([t.Property(null)],i.prototype,"fill",void 0),e([t.Property(null)],i.prototype,"header",void 0),e([t.Property(null)],i.prototype,"opacity",void 0),e([t.Complex({fontFamily:null,size:null,fontStyle:"Normal",fontWeight:null,color:null},oi)],i.prototype,"textStyle",void 0),e([t.Property(null)],i.prototype,"format",void 0),e([t.Property(null)],i.prototype,"template",void 0),e([t.Property(!0)],i.prototype,"enableAnimation",void 0),e([t.Property(300)],i.prototype,"duration",void 0),e([t.Property(1e3)],i.prototype,"fadeOutDuration",void 0),e([t.Property("Move")],i.prototype,"fadeOutMode",void 0),e([t.Property(!1)],i.prototype,"enableTextWrap",void 0),e([t.Property(!0)],i.prototype,"showNearestPoint",void 0),e([t.Complex({color:null,width:null},yt)],i.prototype,"border",void 0),e([t.Complex({x:null,y:null},lf)],i.prototype,"location",void 0),e([t.Property(!1)],i.prototype,"enableHighlight",void 0),e([t.Property(!1)],i.prototype,"showNearestTooltip",void 0),e([t.Property(!0)],i.prototype,"showHeaderLine",void 0),i}(t.ChildProperty),pl=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(null)],i.prototype,"fill",void 0),e([t.Complex({color:"",width:0},yt)],i.prototype,"border",void 0),e([t.Property("Gap")],i.prototype,"mode",void 0),i}(t.ChildProperty),as=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(0)],i.prototype,"series",void 0),e([t.Property(0)],i.prototype,"point",void 0),i}(t.ChildProperty),wl=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(0)],i.prototype,"topLeft",void 0),e([t.Property(0)],i.prototype,"topRight",void 0),e([t.Property(0)],i.prototype,"bottomLeft",void 0),e([t.Property(0)],i.prototype,"bottomRight",void 0),i}(t.ChildProperty),vs=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(0)],i.prototype,"left",void 0),e([t.Property(0)],i.prototype,"right",void 0),e([t.Property(0)],i.prototype,"top",void 0),e([t.Property(0)],i.prototype,"bottom",void 0),i}(t.ChildProperty),lp=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property("transparent")],i.prototype,"color",void 0),e([t.Property(0)],i.prototype,"width",void 0),e([t.Property(.8)],i.prototype,"cornerRadius",void 0),i}(t.ChildProperty),bl=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property("Normal")],i.prototype,"fontStyle",void 0),e([t.Property("15px")],i.prototype,"size",void 0),e([t.Property("500")],i.prototype,"fontWeight",void 0),e([t.Property("")],i.prototype,"color",void 0),e([t.Property("Center")],i.prototype,"textAlignment",void 0),e([t.Property("Segoe UI")],i.prototype,"fontFamily",void 0),e([t.Property(1)],i.prototype,"opacity",void 0),e([t.Property("Wrap")],i.prototype,"textOverflow",void 0),e([t.Property("Top")],i.prototype,"position",void 0),e([t.Property(0)],i.prototype,"x",void 0),e([t.Property(0)],i.prototype,"y",void 0),e([t.Property("transparent")],i.prototype,"background",void 0),e([t.Complex({},lp)],i.prototype,"border",void 0),e([t.Complex({},lu)],i.prototype,"accessibility",void 0),i}(t.ChildProperty),kl=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property("Top")],i.prototype,"position",void 0),e([t.Property(0)],i.prototype,"x",void 0),e([t.Property(0)],i.prototype,"y",void 0),i}(oi),ap=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Complex({},yt)],i.prototype,"border",void 0),e([t.Property("transparent")],i.prototype,"background",void 0),e([t.Property(1)],i.prototype,"opacity",void 0),e([t.Property(null)],i.prototype,"backgroundImage",void 0),e([t.Property(null)],i.prototype,"width",void 0),e([t.Complex({left:0,right:0,top:0,bottom:0},lr)],i.prototype,"margin",void 0),i}(t.ChildProperty),vp=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(!1)],i.prototype,"enable",void 0),e([t.Property(null)],i.prototype,"minY",void 0),e([t.Property(null)],i.prototype,"maxY",void 0),e([t.Property(null)],i.prototype,"fill",void 0),i}(t.ChildProperty),dl=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property("Years")],i.prototype,"intervalType",void 0),e([t.Property(1)],i.prototype,"interval",void 0),e([t.Property(null)],i.prototype,"text",void 0),e([t.Property(!1)],i.prototype,"selected",void 0),i}(t.ChildProperty),yp=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(43)],i.prototype,"height",void 0),e([t.Property("Bottom")],i.prototype,"position",void 0),e([t.Collection([],dl)],i.prototype,"periods",void 0),i}(t.ChildProperty),pp=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return li(i,n),e([t.Property(!1)],i.prototype,"enable",void 0),e([t.Property(!0)],i.prototype,"enableMarker",void 0),e([t.Property(!1)],i.prototype,"shared",void 0),e([t.Property(null)],i.prototype,"fill",void 0),e([t.Property(null)],i.prototype,"header",void 0),e([t.Property(.75)],i.prototype,"opacity",void 0),e([t.Complex({fontFamily:null,size:"12px",fontStyle:"Normal",fontWeight:null,color:null},oi)],i.prototype,"textStyle",void 0),e([t.Property(null)],i.prototype,"format",void 0),e([t.Property(null)],i.prototype,"template",void 0),e([t.Property(!0)],i.prototype,"enableAnimation",void 0),e([t.Property(300)],i.prototype,"duration",void 0),e([t.Property(1e3)],i.prototype,"fadeOutDuration",void 0),e([t.Property("Move")],i.prototype,"fadeOutMode",void 0),e([t.Property(!1)],i.prototype,"enableTextWrap",void 0),e([t.Property(!0)],i.prototype,"showNearestPoint",void 0),e([t.Complex({color:null,width:null},yt)],i.prototype,"border",void 0),e([t.Property("Fixed")],i.prototype,"position",void 0),e([t.Property(!1)],i.prototype,"showNearestTooltip",void 0),e([t.Property(!0)],i.prototype,"showHeaderLine",void 0),i}(t.ChildProperty),ir=function(){return function(n,t){this.series=n;this.point=t}}();const i=ejdashboard.svgbase;var su=function(){function n(n,t){n<t?(this.mStart=n,this.mEnd=t):(this.mStart=t,this.mEnd=n)}return Object.defineProperty(n.prototype,"start",{get:function(){return this.mStart},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this.mEnd},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"delta",{get:function(){return this.mEnd-this.mStart},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"median",{get:function(){return this.mStart+(this.mEnd-this.mStart)/2},enumerable:!0,configurable:!0}),n}(),ys=function(){function n(n){this.isColumn=0;this.isStacking=!1;this.chart=n}return n.prototype.calculateNumericNiceInterval=function(n,i,r){var o=ke(r,n),u=i/o,e;if(!t.isNullOrUndefined(n.desiredIntervals)&&this.isAutoIntervalOnBothAxis(n))return u;for(var h=Math.pow(10,Math.floor(hi(u,10))),f=0,s=n.intervalDivs;f<s.length;f++){if(e=h*s[f],o<i/e)break;u=e}return u},n.prototype.isAutoIntervalOnBothAxis=function(n){return!(n.zoomFactor<1||n.zoomPosition>0)||!n.enableAutoIntervalOnZooming},n.prototype.getActualRange=function(n,t){this.initializeDoubleRange(n);!n.startFromZero&&this.isColumn>0?(n.actualRange.interval=n.interval||this.calculateNumericNiceInterval(n,n.doubleRange.delta,t),n.actualRange.max=n.doubleRange.end+n.actualRange.interval,n.actualRange.min=n.doubleRange.start-n.actualRange.interval<0&&n.doubleRange.start>0?0:n.doubleRange.start-(this.isStacking?0:n.actualRange.interval)):(n.actualRange.interval=n.interval||this.calculateNumericNiceInterval(n,n.doubleRange.delta,t),n.actualRange.min=n.doubleRange.start,n.actualRange.max=n.doubleRange.end)},n.prototype.initializeDoubleRange=function(n){null!==n.minimum?this.min=n.minimum:null!==this.min&&this.min!==Number.POSITIVE_INFINITY||(this.min=0);null!==n.maximum?this.max=n.maximum:null!==this.max&&this.max!==Number.NEGATIVE_INFINITY||(this.max=5);this.min===this.max&&(this.max=n.valueType.indexOf("Category")>-1?this.max:this.min+1);n.doubleRange=new su(this.min,this.max);n.actualRange={}},n.prototype.calculateRangeAndInterval=function(n,t){this.calculateRange(t);this.getActualRange(t,n);this.applyRangePadding(t,n);this.calculateVisibleLabels(t,this.chart)},n.prototype.calculateRange=function(n){var r,u,i;if(this.min=null,this.max=null,!nr(n))for(r=0,u=n.series;r<u.length;r++)i=u[r],i.visible&&(this.paddingInterval=0,t.isNullOrUndefined(i.points)||(n.maxPointLength=i.points.length),n.maxPointLength=i.points.length,((i.type.indexOf("Column")>-1||i.type.indexOf("Histogram")>-1)&&"Horizontal"===n.orientation||i.type.indexOf("Bar")>-1&&"Vertical"===n.orientation)&&("Double"!==i.xAxis.valueType&&"DateTime"!==i.xAxis.valueType||"Auto"!==i.xAxis.rangePadding||(this.paddingInterval=.5*iv(i.xAxis,n.series))),"Horizontal"===n.orientation&&(this.chart.requireInvertedAxis?this.yAxisRange(n,i):this.findMinMax(i.xMin-this.paddingInterval,i.xMax+this.paddingInterval)),"Vertical"===n.orientation&&(this.isColumn+=-1!==i.type.indexOf("Column")||-1!==i.type.indexOf("Bar")||"Column"===i.drawType?1:0,this.isStacking=-1!==i.type.indexOf("Stacking"),this.chart.requireInvertedAxis?this.findMinMax(i.xMin-this.paddingInterval,i.xMax+this.paddingInterval):this.yAxisRange(n,i)))},n.prototype.yAxisRange=function(n,t){if(t.dragSettings.enable&&this.chart.dragY&&(this.chart.dragY>=n.visibleRange.max&&(t.yMax=this.chart.dragY+n.visibleRange.interval),this.chart.dragY<=n.visibleRange.min&&(t.yMin=this.chart.dragY-n.visibleRange.interval)),"Waterfall"===t.type){for(var r=0,u=0,i=0;i<t.yData.length;i++)t.intermediateSumIndexes&&-1!==t.intermediateSumIndexes.indexOf(i)||t.sumIndexes&&-1!==t.sumIndexes.indexOf(i)||(u+=t.yData[i]),u>r&&(r=u);this.findMinMax(t.yMin,r)}else this.findMinMax(t.yMin,t.yMax)},n.prototype.findMinMax=function(n,t){(null===this.min||this.min>n)&&(this.min=n);(null===this.max||this.max<t)&&(this.max=t);this.max===this.min&&this.max<0&&this.min<0&&(this.max=0)},n.prototype.applyRangePadding=function(n,t){var u=n.actualRange.min,f=n.actualRange.max,i,r;nr(n)||(i=n.actualRange.interval,r=n.getRangePadding(this.chart),"Additional"===r||"Round"===r?this.findAdditional(n,u,f,i,t):"Normal"===r?this.findNormal(n,u,f,i,t):this.updateActualRange(n,u,f,i));n.actualRange.delta=n.actualRange.max-n.actualRange.min;this.calculateVisibleRange(t,n)},n.prototype.updateActualRange=function(n,t,i,r){n.actualRange={min:null!=n.minimum?n.minimum:t,max:null!=n.maximum?n.maximum:i,interval:null!=n.interval?n.interval:r,delta:n.actualRange.delta}},n.prototype.findAdditional=function(n,i,r,u,f){var e,o,s;(e=Math.floor(i/u)*u,o=Math.ceil(r/u)*u,"Additional"===n.rangePadding&&(e-=u,o+=u),t.isNullOrUndefined(n.desiredIntervals))||(s=o-e,u=this.calculateNumericNiceInterval(n,s,f));this.updateActualRange(n,e,o,u)},n.prototype.findNormal=function(n,t,i,r,u){var f,e,o=t;t<0?(o=0,.365*r>=r+(f=t+.05*t)%r&&(f-=r),f%r<0&&(f=f-r-f%r)):(f=t<5/6*i?0:t-.5*(i-t))%r>0&&(f-=f%r);.365*r>=r-(e=i>0?i+.05*(i-o):i-.05*(i-o))%r&&(e+=r);e%r>0&&(e=e+r-e%r);n.doubleRange=new su(f,e);(0===f||f<0&&e<0)&&(r=this.calculateNumericNiceInterval(n,n.doubleRange.delta,u),e=Math.ceil(e/r)*r);this.updateActualRange(n,f,e,r)},n.prototype.calculateVisibleRange=function(n,i){var e,f,r,u;if((i.visibleRange={max:i.actualRange.max,min:i.actualRange.min,delta:i.actualRange.delta,interval:i.actualRange.interval},"Cartesian"===this.chart.chartAreaType)&&(e=!t.isNullOrUndefined(i.zoomingScrollBar)&&i.zoomingScrollBar.isLazyLoad,(i.zoomFactor<1||i.zoomPosition>0)&&!e&&(i.calculateVisibleRangeOnZooming(),i.visibleRange.interval=i.enableAutoIntervalOnZooming?this.calculateNumericNiceInterval(i,i.doubleRange.delta,n):i.visibleRange.interval)),f=(i.visibleRange.max-i.visibleRange.min)%i.visibleRange.interval,0!==f&&!isNaN(f)&&"Double"===i.valueType&&"Vertical"===i.orientation&&"Auto"===i.rangePadding){for(r=void 0,u=i.visibleRange.min;u<=i.visibleRange.max&&r!==u;u+=i.visibleRange.interval)r=u;r<i.visibleRange.max&&(i.visibleRange.max=r+i.visibleRange.interval)}i.triggerRangeRender(this.chart,i.visibleRange.min,i.visibleRange.max,i.visibleRange.interval)},n.prototype.calculateVisibleLabels=function(n,i){var f,r;n.visibleLabels=[];r=n.visibleRange.min;("chart"!==i.getModuleName()||"PolarRadar"!==i.chartAreaType)&&(n.zoomFactor<1||n.zoomPosition>0||this.paddingInterval)&&(r=n.visibleRange.min-n.visibleRange.min%n.visibleRange.interval);var h,u=this.getFormat(n),e=null!==u.match("{value}"),o=0,s=0;for(n.labelFormat&&n.labelFormat.indexOf("n")>-1&&(s=parseInt(n.labelFormat.substring(1,n.labelFormat.length),10)),n.format=i.intl.getNumberFormat({format:e?"":u,useGrouping:i.useGroupingSeparator}),n.startLabel=n.format(n.visibleRange.min),n.endLabel=n.format(n.visibleRange.max),n.visibleRange.interval&&(n.visibleRange.interval+"").indexOf(".")>=0&&(o=(n.visibleRange.interval+"").split(".")[1].length);r<=n.visibleRange.max&&h!==r;r+=n.visibleRange.interval)h=r,f=t.extend({},t.getValue("properties",n.labelStyle),null,!0),si(r,n.visibleRange)&&yr(i,r,this.formatValue(n,e,u,r),f,n);r&&(r+"").indexOf(".")>=0&&(r+"").split(".")[1].length>10&&(r=(r+"").split(".")[1].length>(s||o)?+r.toFixed(s||o):r)<=n.visibleRange.max&&yr(i,r,this.formatValue(n,e,u,r),f,n);n.getMaxLabelWidth&&n.getMaxLabelWidth(this.chart)},n.prototype.getFormat=function(n){return n.labelFormat?0===n.labelFormat.indexOf("p")&&-1===n.labelFormat.indexOf("{value}")&&n.isStack100?"{value}%":n.labelFormat:n.isStack100?"{value}%":""},n.prototype.formatValue=function(n,t,i,r){var u=r%1?Number(r.toLocaleString("en-US").split(",").join("")):r;return t?i.replace("{value}",n.format(u)):i?n.format(r):n.format(u)},n.prototype.getModuleName=function(){return"Double"},n.prototype.destroy=function(){},n}(),rut="loaded",ar="legendClick",ne="load",gl="animationComplete",te="legendRender",ie="textRender",rr="pointRender",wh="sharedTooltipRender",re="seriesRender",na="axisLabelRender",wp="axisLabelClick",bh="axisRangeCalculated",ta="axisMultiLabelRender",gu="tooltipRender",ia="chartMouseMove",ra="chartMouseClick",ua="chartDoubleClick",ps="pointClick",bp="pointDoubleClick",ws="pointMove",fa="chartMouseLeave",ea="chartMouseDown",oa="chartMouseUp",nf="zoomComplete",sa="dragComplete",ue="selectionComplete",af="resized",ao="beforeResize",ha="beforePrint",ca="annotationRender",la="scrollStart",vo="scrollEnd",tf="scrollChanged",aa="stockEventRender",va="multiLevelLabelClick",kp="dragStart",dp="drag",gp="dragEnd",vf=/~\d+~/g,pe=/\^\d+\^/g,yf="beforeExport",bs="afterExport",nw="bulletChartMouseClick",or="onZooming",pf=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),a=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},tw=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return pf(i,n),a([t.Property("0")],i.prototype,"x",void 0),a([t.Property("0")],i.prototype,"y",void 0),a([t.Property(null)],i.prototype,"content",void 0),a([t.Property("Center")],i.prototype,"horizontalAlignment",void 0),a([t.Property("Pixel")],i.prototype,"coordinateUnits",void 0),a([t.Property("Chart")],i.prototype,"region",void 0),a([t.Property("Middle")],i.prototype,"verticalAlignment",void 0),a([t.Property(null)],i.prototype,"xAxisName",void 0),a([t.Property(null)],i.prototype,"yAxisName",void 0),a([t.Property(null)],i.prototype,"description",void 0),a([t.Complex({},lu)],i.prototype,"accessibility",void 0),i}(t.ChildProperty),ya=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return pf(i,n),a([t.Property("")],i.prototype,"color",void 0),a([t.Property(1)],i.prototype,"width",void 0),a([t.Property("Rectangle")],i.prototype,"type",void 0),i}(t.ChildProperty),iw=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return pf(i,n),a([t.Property(null)],i.prototype,"start",void 0),a([t.Property(null)],i.prototype,"end",void 0),a([t.Property("")],i.prototype,"text",void 0),a([t.Property(null)],i.prototype,"maximumTextWidth",void 0),a([t.Property(null)],i.prototype,"customAttributes",void 0),a([t.Property("")],i.prototype,"type",void 0),i}(t.ChildProperty),rw=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return pf(i,n),a([t.Property(!0)],i.prototype,"visible",void 0),a([t.Property(!1)],i.prototype,"startFromAxis",void 0),a([t.Property(null)],i.prototype,"start",void 0),a([t.Property(null)],i.prototype,"end",void 0),a([t.Property(null)],i.prototype,"size",void 0),a([t.Property("#808080")],i.prototype,"color",void 0),a([t.Property(null)],i.prototype,"dashArray",void 0),a([t.Property("Auto")],i.prototype,"sizeType",void 0),a([t.Property(!1)],i.prototype,"isRepeat",void 0),a([t.Property(null)],i.prototype,"repeatEvery",void 0),a([t.Property(null)],i.prototype,"repeatUntil",void 0),a([t.Property(!1)],i.prototype,"isSegmented",void 0),a([t.Property(null)],i.prototype,"segmentStart",void 0),a([t.Property(null)],i.prototype,"segmentEnd",void 0),a([t.Property(null)],i.prototype,"segmentAxisName",void 0),a([t.Complex({color:"transparent",width:1},yt)],i.prototype,"border",void 0),a([t.Property("")],i.prototype,"text",void 0),a([t.Property(null)],i.prototype,"rotation",void 0),a([t.Property("Middle")],i.prototype,"horizontalAlignment",void 0),a([t.Property("Middle")],i.prototype,"verticalAlignment",void 0),a([t.Complex({size:"12px",color:null,fontStyle:"Normal",fontWeight:"400",fontFamily:null},oi)],i.prototype,"textStyle",void 0),a([t.Property("Behind")],i.prototype,"zIndex",void 0),a([t.Property(1)],i.prototype,"opacity",void 0),a([t.Property("")],i.prototype,"imageUrl",void 0),i}(t.ChildProperty),uw=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return pf(i,n),a([t.Property("Center")],i.prototype,"alignment",void 0),a([t.Property("Wrap")],i.prototype,"overflow",void 0),a([t.Complex({fontFamily:null,size:"12px",fontStyle:"Normal",fontWeight:"400",color:null},oi)],i.prototype,"textStyle",void 0),a([t.Complex({color:null,width:1,type:"Rectangle"},ya)],i.prototype,"border",void 0),a([t.Collection([],iw)],i.prototype,"categories",void 0),i}(t.ChildProperty),fw=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return pf(i,n),a([t.Property(null)],i.prototype,"minimum",void 0),a([t.Property(null)],i.prototype,"maximum",void 0),i}(t.ChildProperty),ew=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return pf(i,n),a([t.Property(!1)],i.prototype,"enable",void 0),a([t.Property(null)],i.prototype,"pointsLength",void 0),a([t.Complex({},fw)],i.prototype,"range",void 0),a([t.Property(null)],i.prototype,"trackColor",void 0),a([t.Property(0)],i.prototype,"scrollbarRadius",void 0),a([t.Property(null)],i.prototype,"scrollbarColor",void 0),a([t.Property(0)],i.prototype,"trackRadius",void 0),a([t.Property(null)],i.prototype,"gripColor",void 0),a([t.Property(16)],i.prototype,"height",void 0),a([t.Property(!0)],i.prototype,"enableZoom",void 0),a([t.Property("PlaceNextToAxisLine")],i.prototype,"position",void 0),i}(t.ChildProperty),ow=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return pf(i,n),a([t.Property("Far")],i.prototype,"horizontalAlignment",void 0),a([t.Property("Top")],i.prototype,"verticalAlignment",void 0),a([t.Property(0)],i.prototype,"x",void 0),a([t.Property(0)],i.prototype,"y",void 0),a([t.Property(!1)],i.prototype,"draggable",void 0),i}(t.ChildProperty),sw=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return pf(i,n),a([t.Property(!1)],i.prototype,"visible",void 0),a([t.Property("transparent")],i.prototype,"fill",void 0),a([t.Property(null)],i.prototype,"format",void 0),a([t.Property(0)],i.prototype,"angle",void 0),a([t.Property(5)],i.prototype,"rx",void 0),a([t.Property(5)],i.prototype,"ry",void 0),a([t.Complex({left:5,right:5,top:5,bottom:5},lr)],i.prototype,"margin",void 0),a([t.Complex({width:null,color:null},yt)],i.prototype,"border",void 0),a([t.Complex({size:null,color:null,fontStyle:null,fontWeight:"Bold",fontFamily:null},sp)],i.prototype,"font",void 0),i}(t.ChildProperty),wf=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),c=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},hw=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.axes=[],t.nearSizes=[],t.farSizes=[],t.insideFarSizes=[],t.insideNearSizes=[],t}return wf(i,n),i.prototype.computeSize=function(n,t,i,r){var u=0;n.visible&&n.internalVisibility&&(u+=n.findTickSize(n.crossInAxis)+("Right"===n.scrollbarSettings.position||"Left"===n.scrollbarSettings.position?0:t)+n.findLabelSize(n.crossInAxis,5,i,r)+.5*n.lineStyle.width);n.isAxisOpposedPosition?this.farSizes.push(u):this.nearSizes.push(u)},c([t.Property("100%")],i.prototype,"height",void 0),c([t.Complex({},yt)],i.prototype,"border",void 0),i}(t.ChildProperty),cw=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.axes=[],t.nearSizes=[],t.farSizes=[],t.insideFarSizes=[],t.insideNearSizes=[],t.padding=0,t}return wf(i,n),i.prototype.computeSize=function(n,t,i,r){var u=0;n.visible&&n.internalVisibility&&(u+=n.findTickSize(n.crossInAxis)+("Top"===n.scrollbarSettings.position||"Bottom"===n.scrollbarSettings.position?0:t)+n.findLabelSize(n.crossInAxis,5,i,r)+.5*n.lineStyle.width);n.isAxisOpposedPosition?this.farSizes.push(u):this.nearSizes.push(u)},c([t.Property("100%")],i.prototype,"width",void 0),c([t.Complex({},yt)],i.prototype,"border",void 0),i}(t.ChildProperty),kh=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return wf(i,n),c([t.Property(1)],i.prototype,"width",void 0),c([t.Property("")],i.prototype,"dashArray",void 0),c([t.Property(null)],i.prototype,"color",void 0),i}(t.ChildProperty),pa=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return wf(i,n),c([t.Property(.7)],i.prototype,"width",void 0),c([t.Property("")],i.prototype,"dashArray",void 0),c([t.Property(null)],i.prototype,"color",void 0),i}(t.ChildProperty),wa=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return wf(i,n),c([t.Property(1)],i.prototype,"width",void 0),c([t.Property("")],i.prototype,"dashArray",void 0),c([t.Property(null)],i.prototype,"color",void 0),i}(t.ChildProperty),dh=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return wf(i,n),c([t.Property(1)],i.prototype,"width",void 0),c([t.Property(5)],i.prototype,"height",void 0),c([t.Property(null)],i.prototype,"color",void 0),i}(t.ChildProperty),ba=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return wf(i,n),c([t.Property(.7)],i.prototype,"width",void 0),c([t.Property(5)],i.prototype,"height",void 0),c([t.Property(null)],i.prototype,"color",void 0),i}(t.ChildProperty),ka=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return wf(i,n),c([t.Property(!1)],i.prototype,"enable",void 0),c([t.Property(null)],i.prototype,"fill",void 0),c([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},oi)],i.prototype,"textStyle",void 0),i}(t.ChildProperty),yo=function(n){function u(t,r,u,f){var e=n.call(this,t,r,u,f)||this;return e.visibleLabels=[],e.series=[],e.rect=new i.Rect(void 0,void 0,0,0),e.axisBottomLine=null,e.intervalDivs=[10,5,2,1],e.isStack100=!1,e.crossAt=null,e.updatedRect=null,e.multiLevelLabelHeight=0,e.isChart=!0,e.isIntervalInDecimal=!0,e.titleCollection=[],e.titleSize=new i.Size(0,0),e.internalVisibility=!0,e.isRTLEnabled=!1,e.angle=e.labelRotation,e}return wf(u,n),u.prototype.findTickSize=function(n){return"Inside"===this.tickPosition?0:!n||n.visibleRange&&!this.isInside(n.visibleRange)?this.majorTickLines.height:0},u.prototype.isInside=function(n){return we(this.crossAt,n)||!this.isAxisOpposedPosition&&this.crossAt>=n.max||this.isAxisOpposedPosition&&this.crossAt<=n.min},u.prototype.findLabelSize=function(n,r,u,f){var h,v,o=0,p="Horizontal"===this.orientation,l,y,e,s,c,a;if(this.title&&(l=this.titleRotation,(t.isNullOrUndefined(l)?(this.titleSize=i.measureText(this.title,this.titleStyle,f.themeStyle.axisTitleFont),o=this.titleSize.height+r):(this.titleSize=yu(this.titleStyle,this.title,l,f,f.themeStyle.axisTitleFont),o=("Vertical"===this.orientation?this.titleSize.width:this.titleSize.height)+r),this.rect.width||this.rect.height)&&(y=p?this.rect.width:this.rect.height,this.titleCollection=tu(this.title,this.titleStyle,y,f.enableRtl,f.themeStyle.axisTitleFont),o*=this.titleCollection.length)),e=o+r+this.titlePadding+this.labelPadding+("Vertical"===this.orientation?this.maxLabelSize.width:this.maxLabelSize.height)+this.multiLevelLabelHeight,n&&this.placeNextToAxisLine){if(s=n.visibleRange,c="Horizontal"===n.orientation?n.rect.width:n.rect.height,!s||!c)return 0;this.isInside(s)&&(e=(h=(v=this.findDifference(n))*((c-((h=v*(c/s.delta))<e?e-h:0))/s.delta))<e?e-h:0)}return a=""!==this.title&&5!==this.titlePadding?this.titlePadding:0,this.isAxisOpposedPosition?u.insideFarSizes.push(e):u.insideNearSizes.push(e),"Inside"===this.labelPosition?this.isAxisOpposedPosition&&u.farSizes.length<1||!this.isAxisOpposedPosition&&u.nearSizes.length<1?o+(r="Inside"===this.labelPosition&&f.axes.indexOf(this)>-1?-5:5)+a:o+r+a+this.labelPadding+("Vertical"===this.orientation?this.maxLabelSize.width:this.maxLabelSize.height)+this.multiLevelLabelHeight:e},u.prototype.updateCrossValue=function(){var n=this.crossAt,i;if(null===n||!this.isInside(this.crossInAxis.visibleRange))return this.updatedRect=this.rect,null;i=this.crossInAxis.visibleRange;this.isAxisOpposedPosition?this.crossAt<i.min&&(n=i.min):this.crossAt>i.max&&(n=i.max);this.updatedRect=t.extend({},this.rect,null,!0);"Horizontal"===this.orientation?(n=this.crossInAxis.rect.height-ut(n,this.crossInAxis)*this.crossInAxis.rect.height,this.updatedRect.y=this.crossInAxis.rect.y+n):(n=ut(n,this.crossInAxis)*this.crossInAxis.rect.width,this.updatedRect.x=this.crossInAxis.rect.x+n)},u.prototype.findDifference=function(n){var t;return t=this.isAxisOpposedPosition?n.isAxisInverse?n.visibleRange.min:n.visibleRange.max:n.isAxisInverse?n.visibleRange.max:n.visibleRange.min,Math.abs(this.crossAt-t)},u.prototype.calculateVisibleRangeOnZooming=function(){if(be(this)){var t=this.actualRange,n=void 0,i=void 0;i=this.isAxisInverse?(n=this.actualRange.max-this.zoomPosition*this.actualRange.delta)-this.zoomFactor*this.actualRange.delta:(n=this.actualRange.min+this.zoomPosition*this.actualRange.delta)+this.zoomFactor*this.actualRange.delta;n<t.min&&(i+=t.min-n,n=t.min);i>t.max&&(n-=i-t.max,i=t.max);this.doubleRange=new su(n,i);this.visibleRange={min:this.doubleRange.start,max:this.doubleRange.end,delta:this.doubleRange.delta,interval:this.visibleRange.interval}}},u.prototype.triggerRangeRender=function(n,t,i,r){var u={cancel:!1,name:bh,axis:this,minimum:t,maximum:i,interval:r};n.trigger(bh,u);u.cancel||(this.visibleRange={min:u.minimum,max:u.maximum,interval:u.interval,delta:u.maximum-u.minimum})},u.prototype.getRangePadding=function(n){var t=this.rangePadding;if("Auto"!==t)return t;switch(this.orientation){case"Horizontal":t=n.requireInvertedAxis?this.isStack100||this.baseModule.chart.stockChart?"Round":"Normal":"None";break;case"Vertical":t=n.requireInvertedAxis?"None":this.isStack100||this.baseModule.chart.stockChart?"Round":"Normal"}return t},u.prototype.getMaxLabelWidth=function(n){var f,e,a=this,h=0,l=!1,s;this.angle=this.labelRotation;this.maxLabelSize=new i.Size(0,0);for(var u,o=this.labelIntersectAction,v=function(t){var nt,c,p,w,b,s,y,g;if((u=r.visibleLabels[t],e=rf(u.originalText))?(u.size=i.measureText(u.originalText.replace(/<br>/g," "),r.labelStyle,n.themeStyle.axisLabelFont),u.breakLabelSize=i.measureText(r.enableTrim?u.text.join("<br>"):u.originalText,r.labelStyle,n.themeStyle.axisLabelFont)):r.enableWrap?(nt=n.initialClipRect.height/r.visibleLabels.length,u.text=ur(u.text,r.maximumLabelWidth,r.labelStyle,n.enableRtl,null,null,n.themeStyle.axisLabelFont,"Vertical"===r.orientation?nt:null),c=0,p=0,u.text.forEach(function(t){var r=i.measureText(t,a.labelStyle,n.themeStyle.axisLabelFont);c=Math.max(c,r.width);p+=r.height}),u.size.width=c,u.size.height=p):u.size=-90!==r.angle&&90!==r.angle&&270!==r.angle&&-270!==r.angle||"Vertical"!==r.orientation?i.measureText(u.text,r.labelStyle,n.themeStyle.axisLabelFont):yu(r.labelStyle,u.text,r.angle,n,n.themeStyle.axisLabelFont),w=e?u.breakLabelSize.width:u.size.width,w>r.maxLabelSize.width&&(r.maxLabelSize.width=w,r.rotatedLabel=u.text),b=e?u.breakLabelSize.height:u.size.height,b>r.maxLabelSize.height&&(r.maxLabelSize.height=b),e&&(u.text=r.enableTrim?u.text:u.originalText.split("<br>")),"None"===o||"Hide"===o||"Trim"===o)return"continue";if(("None"!==o||r.angle%360==0)&&"Horizontal"===r.orientation&&r.rect.width>0&&!l){s=e?u.breakLabelSize.width:u.size.width;switch(f=ut(u.value,r)*r.rect.width+r.rect.x,f-=s/2,"Shift"===r.edgeLabelPlacement&&(0===t&&f<r.rect.x&&(f=r.rect.x),t===r.visibleLabels.length-1&&f+s>r.rect.x+r.rect.width&&(f=r.rect.x+r.rect.width-s)),o){case"MultipleRows":t>0&&r.findMultiRows(t,f,u,e);break;case"Rotate45":case"Rotate90":t>0&&(r.isAxisInverse?f+s>=h:f<=h)&&(r.angle="Rotate45"===o?45:90,l=!0);break;default:if(e){for(var v=void 0,k=[],tt=void 0,d=0;d<u.text.length;d++)if((v=ur(u.text[d],r.rect.width/r.visibleLabels.length,r.labelStyle,n.enableRtl,null,null,n.themeStyle.axisLabelFont)).length>1)for(y=0;y<v.length;y++)tt=v[y],k.push(tt);else k.push(v[0]);u.text=k}else u.text=ur(u.text,r.rect.width/r.visibleLabels.length,r.labelStyle,n.enableRtl,null,null,n.themeStyle.axisLabelFont);g=u.size.height*u.text.length;g>r.maxLabelSize.height&&(r.maxLabelSize.height=g)}h=r.isAxisInverse?f:f+s}},r=this,c=0,y=this.visibleLabels.length;c<y;c++)v(c);0!==this.angle&&"Horizontal"===this.orientation?(this.rotatedLabel=t.isNullOrUndefined(this.rotatedLabel)?"":this.rotatedLabel,s=-360===this.angle||0===this.angle||-180===this.angle||180===this.angle||360===this.angle,this.maxLabelSize="Outside"===this.labelPosition&&!s&&rf(this.rotatedLabel)?new i.Size(this.maxLabelSize.height,this.maxLabelSize.width):yu(this.labelStyle,this.rotatedLabel,this.angle,n,n.themeStyle.axisLabelFont)):0!==this.angle&&"Vertical"===this.orientation&&(this.rotatedLabel=t.isNullOrUndefined(this.rotatedLabel)?"":this.rotatedLabel,s=-360===this.angle||0===this.angle||-180===this.angle||180===this.angle||360===this.angle,this.maxLabelSize="Outside"===this.labelPosition&&!s&&rf(this.rotatedLabel)?new i.Size(this.maxLabelSize.height,this.maxLabelSize.width):yu(this.labelStyle,this.rotatedLabel,this.angle,n,n.themeStyle.axisLabelFont));n.multiLevelLabelModule&&this.multiLevelLabels.length>0&&n.multiLevelLabelModule.getMultilevelLabelsHeight(this)},u.prototype.findMultiRows=function(n,t,i,r){for(var u,e,o,h,s=[],f=n-1;f>=0;f--)u=this.visibleLabels[f],o=r?u.breakLabelSize.width:u.size.width,e=ut(u.value,this)*this.rect.width+this.rect.x,(this.isAxisInverse?t+i.size.width>e-.5*o:t<e+.5*o)?(s.push(u.index),i.index=i.index>u.index?i.index:u.index+1):i.index=s.indexOf(u.index)>-1?i.index:u.index;h=(r?i.breakLabelSize.height:i.size.height)*i.index+5*(i.index-1);h>this.maxLabelSize.height&&(this.maxLabelSize.height=h)},u.prototype.getModule=function(n){this.baseModule="Double"===this.valueType?new ys(n):n[et(this.valueType)+"Module"]},u.prototype.setIsInversedAndOpposedPosition=function(n){void 0===n&&(n=!1);this.isAxisOpposedPosition=this.opposedPosition||!n&&this.isRTLEnabled&&"Vertical"===this.orientation;this.opposedPosition&&!n&&this.isRTLEnabled&&"Vertical"===this.orientation&&(this.isAxisOpposedPosition=!1);this.isAxisInverse=this.isInversed||this.isRTLEnabled&&"Horizontal"===this.orientation;this.isInversed&&!n&&this.isRTLEnabled&&"Horizontal"===this.orientation&&(this.isAxisInverse=!1)},u.prototype.updateAxis=function(){var n=this.baseModule.chart,t=n.chartAxisLayoutPanel,i=n.axisCollections.indexOf(this),u=r(n.element.id+"AxisInsideCollection"),s=r(n.element.id+"AxisOutsideCollection"),f,e;t.element=n.renderer.createGroup({id:n.element.id+"AxisGroup"+i+"Inside"});f=n.renderer.createGroup({id:n.element.id+"AxisGroup"+i+"Outside"});e=t.findAxisPosition(this);t.drawAxis(this,i,e,f,u,s);n.enableCanvas||o(n.enableCanvas,u,t.element,n.redraw)},c([t.Complex({fontFamily:null,size:"12px",fontStyle:"Normal",fontWeight:"400",color:null},oi)],u.prototype,"labelStyle",void 0),c([t.Complex({},ka)],u.prototype,"crosshairTooltip",void 0),c([t.Property("")],u.prototype,"title",void 0),c([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},oi)],u.prototype,"titleStyle",void 0),c([t.Property("")],u.prototype,"labelFormat",void 0),c([t.Property("")],u.prototype,"skeleton",void 0),c([t.Property("DateTime")],u.prototype,"skeletonType",void 0),c([t.Property("Center")],u.prototype,"lineBreakAlignment",void 0),c([t.Property(0)],u.prototype,"plotOffset",void 0),c([t.Property(null)],u.prototype,"plotOffsetLeft",void 0),c([t.Property(null)],u.prototype,"plotOffsetTop",void 0),c([t.Property(null)],u.prototype,"plotOffsetRight",void 0),c([t.Property(null)],u.prototype,"plotOffsetBottom",void 0),c([t.Property(!1)],u.prototype,"isIndexed",void 0),c([t.Property(10)],u.prototype,"logBase",void 0),c([t.Property(0)],u.prototype,"columnIndex",void 0),c([t.Property(0)],u.prototype,"rowIndex",void 0),c([t.Property(1)],u.prototype,"span",void 0),c([t.Property(null)],u.prototype,"desiredIntervals",void 0),c([t.Property(3)],u.prototype,"maximumLabels",void 0),c([t.Property(1)],u.prototype,"zoomFactor",void 0),c([t.Property(0)],u.prototype,"zoomPosition",void 0),c([t.Property(!0)],u.prototype,"enableScrollbarOnZooming",void 0),c([t.Property(!1)],u.prototype,"opposedPosition",void 0),c([t.Property(!0)],u.prototype,"enableAutoIntervalOnZooming",void 0),c([t.Property("Auto")],u.prototype,"rangePadding",void 0),c([t.Property("Double")],u.prototype,"valueType",void 0),c([t.Property("Shift")],u.prototype,"edgeLabelPlacement",void 0),c([t.Property("Auto")],u.prototype,"intervalType",void 0),c([t.Property("BetweenTicks")],u.prototype,"labelPlacement",void 0),c([t.Property("Outside")],u.prototype,"tickPosition",void 0),c([t.Property("Outside")],u.prototype,"labelPosition",void 0),c([t.Property("")],u.prototype,"name",void 0),c([t.Property(!0)],u.prototype,"visible",void 0),c([t.Property(0)],u.prototype,"minorTicksPerInterval",void 0),c([t.Property(0)],u.prototype,"labelRotation",void 0),c([t.Property(null)],u.prototype,"titleRotation",void 0),c([t.Property(null)],u.prototype,"crossesAt",void 0),c([t.Property(!0)],u.prototype,"placeNextToAxisLine",void 0),c([t.Property(null)],u.prototype,"crossesInAxis",void 0),c([t.Property(null)],u.prototype,"minimum",void 0),c([t.Property(null)],u.prototype,"maximum",void 0),c([t.Property(null)],u.prototype,"interval",void 0),c([t.Property(34)],u.prototype,"maximumLabelWidth",void 0),c([t.Property(!1)],u.prototype,"enableTrim",void 0),c([t.Property(!1)],u.prototype,"enableWrap",void 0),c([t.Property(5)],u.prototype,"labelPadding",void 0),c([t.Property(5)],u.prototype,"titlePadding",void 0),c([t.Complex({},dh)],u.prototype,"majorTickLines",void 0),c([t.Complex({},ba)],u.prototype,"minorTickLines",void 0),c([t.Complex({},kh)],u.prototype,"majorGridLines",void 0),c([t.Complex({},pa)],u.prototype,"minorGridLines",void 0),c([t.Complex({},wa)],u.prototype,"lineStyle",void 0),c([t.Property(t.Browser.isDevice?"Rotate45":"Trim")],u.prototype,"labelIntersectAction",void 0),c([t.Property(!1)],u.prototype,"isInversed",void 0),c([t.Property(100)],u.prototype,"coefficient",void 0),c([t.Property(0)],u.prototype,"startAngle",void 0),c([t.Property(!0)],u.prototype,"startFromZero",void 0),c([t.Property(null)],u.prototype,"description",void 0),c([t.Property(2)],u.prototype,"tabIndex",void 0),c([t.Collection([],rw)],u.prototype,"stripLines",void 0),c([t.Collection([],uw)],u.prototype,"multiLevelLabels",void 0),c([t.Complex({color:null,width:0,type:"Rectangle"},ya)],u.prototype,"border",void 0),c([t.Complex({},ew)],u.prototype,"scrollbarSettings",void 0),u}(t.ChildProperty),gh=function(){return function(n,t,r,u,f,e,o){void 0===f&&(f=new i.Size(0,0));void 0===e&&(e=new i.Size(0,0));void 0===o&&(o=1);this.text=n;this.originalText=u;this.value=t;this.labelStyle=r;this.size=f;this.breakLabelSize=e;this.index=o}}(),lw=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();nv=function(){return function(n,t,i,r,u,f){this.verticalStandardMean=n;this.horizontalStandardMean=i;this.verticalSquareRoot=t;this.horizontalSquareRoot=r;this.verticalMean=u;this.horizontalMean=f}}();tv=function(){return function(n,t,i,r,u){this.startAngle=n;this.endAngle=t;this.innerRadius=i;this.radius=r;this.currentXPosition=u}}();var uut=function(){return function(n){this.id=n}}(),ov=function(){return function(n,t){this.startValues=n;this.endValues=t}}(),ft=function(n){function t(t,i,r,u,f,e,o,s,h){var c=n.call(this,t,i,r.width,r.color,u,h)||this;return c.y=f.y,c.x=f.x,c.height=f.height,c.width=f.width,c.rx=e||0,c.ry=o||0,c.transform=s||"",c.stroke=0!==r.width&&""!==c.stroke?null===r.color?"":r.color:"transparent",c}return lw(t,n),t}(i.PathOption),to=function(){return function(n,t,i,r,u,f,e,o){this.height=n;this.width=t;this.href=i;this.x=r;this.y=u;this.id=f;this.visibility=e;this.preserveAspectRatio=o}}(),ef=function(n){function t(t,i,r,u,f,e,o){var s=n.call(this,t,i,r.width,r.color,u)||this;return s.cy=e,s.cx=f,s.r=o,s}return lw(t,n),t}(i.PathOption),hb=function(){return function(n,t,i){this.id=n;this.points=t;this.fill=i}}(),h=function(){return function(n,t){this.x=n;this.y=t}}(),fut=function(){return function(n,t){this.x=0;this.y=0;this.x=n;this.y=t}}(),wr=function(){return function(n,t,i,r){this.left=n;this.right=t;this.top=i;this.bottom=r}}(),th=function(){return function(n,t,i){this.r=n;this.g=t;this.b=i}}(),io=function(){return function(n,t,i){void 0===i&&(i=0);this.point=n;this.series=t;this.lierIndex=i}}(),is=function(){return function(n,t,i){void 0===i&&(i=0);this.point=n;this.series=t;this.index=i}}(),cb=function(){return function(n,t){this.point=n;this.series=t}}(),hc=function(){return function(n,t){this.controlPoint1=n;this.controlPoint2=t}}();sv={size:"13px",fontWeight:"400",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"};const gt=ejdashboard.data;var eut=function(){function n(n){this.chart=n;this.padding=5}return n.prototype.measureAxis=function(n){var t=this.chart,r=t.chartArea.width?it(t.chartArea.width,t.availableSize.width):null;this.crossAt(t);this.seriesClipRect=new i.Rect(n.x,n.y,n.width,n.height);this.initialClipRect=n;this.leftSize=0;this.rightSize=0;this.topSize=0;this.bottomSize=0;this.measureRowAxis(t,this.initialClipRect);this.initialClipRect=vr(this.initialClipRect,new wr(this.leftSize,this.rightSize,0,0));this.measureColumnAxis(t,this.initialClipRect);this.initialClipRect=vr(this.initialClipRect,new wr(0,0,this.topSize,this.bottomSize));this.chart.delayRedraw||this.calculateAxisSize(this.initialClipRect);this.leftSize=0;this.rightSize=0;this.topSize=0;this.bottomSize=0;this.measureRowAxis(t,this.initialClipRect);this.seriesClipRect=vr(this.seriesClipRect,new wr(this.leftSize,this.rightSize,0,0));this.measureColumnAxis(t,this.initialClipRect);this.seriesClipRect=vr(this.seriesClipRect,new wr(0,0,this.topSize,this.bottomSize));r&&this.calculateFixedChartArea(t,r);this.chart.delayRedraw||(t.refreshAxis(),this.calculateAxisSize(this.seriesClipRect))},n.prototype.calculateFixedChartArea=function(n,t){var i,r,u;for(this.seriesClipRect.width=t,this.seriesClipRect.x=n.availableSize.width-n.margin.right-t-("Right"===n.legendSettings.position?n.legendModule.legendBounds.width:0),i=0,r=n.rows;i<r.length;i++)u=r[i],this.seriesClipRect.x-=lt(u.farSizes)},n.prototype.measureRowAxis=function(n,t){var r,u,f;for(this.calculateRowSize(t),u=0,f=n.rows;u<f.length;u++)(r=f[u]).nearSizes=[],r.farSizes=[],r.insideNearSizes=[],r.insideFarSizes=[],this.arrangeAxis(r),this.measureDefinition(r,n,new i.Size(n.availableSize.width,r.computedHeight)),this.leftSize<lt(r.nearSizes)&&(this.leftSize=lt(r.nearSizes)),this.rightSize<lt(r.farSizes)&&(this.rightSize=lt(r.farSizes))},n.prototype.measureColumnAxis=function(n,t){var r,u,f;for(this.calculateColumnSize(t),u=0,f=n.columns;u<f.length;u++)(r=f[u]).farSizes=[],r.nearSizes=[],r.insideNearSizes=[],r.insideFarSizes=[],this.arrangeAxis(r),this.measureDefinition(r,n,new i.Size(r.computedWidth,n.availableSize.height)),this.bottomSize<lt(r.nearSizes)&&(this.bottomSize=lt(r.nearSizes)),this.topSize<lt(r.farSizes)&&(this.topSize=lt(r.farSizes))},n.prototype.measureDefinition=function(n,t,i){for(var f,r,u=0,e=n.axes;u<e.length;u++)r=e[u],f=r.scrollbarSettings.height,r.scrollBarHeight=t.scrollBarModule&&t.zoomModule&&t.zoomSettings.enableScrollbar&&r.enableScrollbarOnZooming&&t.zoomModule.isZoomed&&(r.zoomFactor<1||r.zoomPosition>0)?f:0,r.scrollBarHeight=t.scrollBarModule&&(t.zoomModule&&t.zoomSettings.enableScrollbar&&r.enableScrollbarOnZooming&&t.zoomModule.isZoomed&&(r.zoomFactor<1||r.zoomPosition>0)||r.scrollbarSettings.enable)?f:0,r.getModule(t),r.baseModule.calculateRangeAndInterval(i,r),n.computeSize(r,r.scrollBarHeight,n,t);n.farSizes.length>0&&(n.farSizes[n.farSizes.length-1]-=10);n.nearSizes.length>0&&(n.nearSizes[n.nearSizes.length-1]-=10)},n.prototype.calculateAxisSize=function(n){var f,e,p,t,h,c,a,l=this.chart,i=0,r=0,v=0,u,y,o,w,s,b,k,d;for(this.calculateRowSize(n),u=0,y=l.rows.length;u<y;u++)for(i=0,r=0,o=0,w=(f=l.rows[u]).axes.length;o<w;o++){if(a=(t=f.axes[o]).plotOffset,0===t.rect.height){for(t.rect.height=f.computedHeight,v=0,s=u+1,b=u+t.span;s<b;s++)v+=(p=l.rows[s]).computedHeight;t.rect.y=f.computedTop-v+(t.plotOffsetTop?t.plotOffsetTop:a);t.rect.height=t.rect.height+v-this.getAxisOffsetValue(t.plotOffsetTop,t.plotOffsetBottom,t.plotOffset);t.rect.width=0}t.isAxisOpposedPosition?(h="Inside"===t.labelPosition&&"Vertical"===t.orientation?r>0?n.x+n.width+lt(sr(f.farSizes,r))+t.maxLabelSize.width+t.multiLevelLabelHeight+("Inside"===t.tickPosition?t.majorTickLines.height:0)+t.labelPadding:n.x+n.width-lt(sr(f.insideFarSizes,r)):n.x+n.width+lt(sr(f.farSizes,r)),t.rect.x=t.rect.x>=h?t.rect.x:h,r++):(h="Inside"===t.labelPosition&&"Vertical"===t.orientation?i>0?n.x-lt(sr(f.nearSizes,i))-t.maxLabelSize.width-t.multiLevelLabelHeight-("Inside"===t.tickPosition?t.majorTickLines.height:0)-t.labelPadding:n.x+lt(sr(f.insideNearSizes,i)):n.x-lt(sr(f.nearSizes,i)),t.rect.x=t.rect.x<=h?t.rect.x:h,i++)}for(this.calculateColumnSize(n),u=0,y=l.columns.length;u<y;u++)for(i=0,r=0,o=0,k=(e=l.columns[u]).axes.length;o<k;o++){if(a=(t=e.axes[o]).plotOffset,0===t.rect.width){for(s=u,d=u+t.span;s<d;s++)p=l.columns[s],t.rect.width+=p.computedWidth;t.rect.x=e.computedLeft+(t.plotOffsetLeft?t.plotOffsetLeft:a);t.rect.width-=this.getAxisOffsetValue(t.plotOffsetLeft,t.plotOffsetRight,t.plotOffset);t.rect.height=0}t.isAxisOpposedPosition?(c="Inside"===t.labelPosition&&"Horizontal"===t.orientation?r>0?n.y-lt(sr(e.farSizes,r))-t.maxLabelSize.height-t.multiLevelLabelHeight-("Inside"===t.tickPosition?t.majorTickLines.height:0)-t.labelPadding:n.y+lt(sr(e.insideFarSizes,r)):n.y-lt(sr(e.farSizes,r)),t.rect.y=t.rect.y<=c?t.rect.y:c,r++):(c="Inside"===t.labelPosition&&"Horizontal"===t.orientation?i>0?n.y+n.height+lt(sr(e.nearSizes,i))+t.maxLabelSize.height+t.multiLevelLabelHeight+("Inside"===t.tickPosition?t.majorTickLines.height:0)+t.labelPadding:n.y+n.height-lt(sr(e.insideNearSizes,i)):n.y+n.height+lt(sr(e.nearSizes,i)),t.rect.y=t.rect.y>=c?t.rect.y:c,i++)}},n.prototype.measure=function(){for(var t,r,u,f,e,i,o,n=this.chart,s=0,h=n.axisCollections;s<h.length;s++){if(t=h[s],"Vertical"===t.orientation){for(n.verticalAxes.push(t),i=this.getActualRow(t),u=n.rows[i],this.pushAxis(u,t),o=i+t.span>n.rows.length?n.rows.length:i+t.span,r=i+1;r<o;r++)(e=n.rows[r]).axes[u.axes.length-1]=t,n.rows[r]=e;n.rows[i]=u}else{for(n.horizontalAxes.push(t),i=this.getActualColumn(t),f=n.columns[i],this.pushAxis(f,t),o=i+t.span>n.columns.length?n.columns.length:i+t.span,r=i+1;r<o;r++)(e=n.columns[r]).axes[f.axes.length-1]=t,n.columns[r]=e;n.columns[i]=f}t.isRTLEnabled=n.enableRtl;t.setIsInversedAndOpposedPosition()}},n.prototype.getAxisOffsetValue=function(n,t,i){return n?n+(t||i):t?t+i:2*i},n.prototype.crossAt=function(n){for(var t,i,f,r=0,u=n.axisCollections;r<u.length;r++)if(t=u[r],null!==t.crossesAt)if(t.crossesInAxis)for(i=2,f=n.axisCollections.length;i<f;i++)t.crossesInAxis!==n.axisCollections[i].name||(t.crossInAxis=n.axisCollections[i],t.crossAt=this.updateCrossAt(t.crossInAxis,t.crossesAt));else t.crossInAxis=n.requireInvertedAxis?"Horizontal"===t.orientation?n.primaryXAxis:n.primaryYAxis:"Horizontal"===t.orientation?n.primaryYAxis:n.primaryXAxis,t.crossAt=this.updateCrossAt(t.crossInAxis,t.crossesAt)},n.prototype.updateCrossAt=function(n,t){switch(n.valueType){case"DateTime":var i={skeleton:"full",type:"dateTime"},r=this.chart.intl.getDateParser(i),u=this.chart.intl.getDateFormat(i);return Date.parse(r(u(new Date(gt.DataUtil.parse.parseJson({val:t}).val))));case"Category":return parseFloat(t)?parseFloat(t):n.labels.indexOf(t);case"Logarithmic":return hi(t,n.logBase);default:return t}},n.prototype.pushAxis=function(n,t){for(var i=0,r=n.axes.length;i<=r;i++)if(!n.axes[i]){n.axes[i]=t;break}},n.prototype.arrangeAxis=function(n){for(var i=[],t=0,r=n.axes.length;t<=r;t++)n.axes[t]&&i.push(n.axes[t]);n.axes=i},n.prototype.getActualColumn=function(n){var i=this.chart.columns.length,t=n.columnIndex;return t>=i?i-1:t<0?0:t},n.prototype.getActualRow=function(n){var i=this.chart.rows.length,t=n.rowIndex;return t>=i?i-1:t<0?0:t},n.prototype.calculateRowSize=function(n){for(var i,f=this.chart,e=n.y+n.height,t=0,r=Math.max(0,n.height),u=0,o=f.rows.length;u<o;u++)t=-1!==(i=f.rows[u]).height.indexOf("%")?Math.min(r,n.height*parseInt(i.height,10)/100):Math.min(r,parseInt(i.height,10)),t=u!==o-1?t:r,i.computedHeight=t,e-=t,i.computedTop=e,r-=t},n.prototype.calculateColumnSize=function(n){for(var i,f=this.chart,e=n.x,t=0,r=Math.max(0,n.width),u=0,o=f.columns.length;u<o;u++)t=-1!==(i=f.columns[u]).width.indexOf("%")?Math.min(r,n.width*parseInt(i.width,10)/100):Math.min(r,parseInt(i.width,10)),t=u!==o-1?t:r,i.computedWidth=t,i.computedLeft=e,e+=t,r-=t},n.prototype.renderAxes=function(){var t,s,l,n=this.chart,h=n.renderer.createGroup({id:n.element.id+"AxisInsideCollection"}),f=n.renderer.createGroup({id:n.element.id+"AxisOutsideCollection"}),i,a,u,e,c,r;for(f&&f.setAttribute("aria-hidden","true"),n.scrollBarModule&&(n.scrollBarModule.topScrollBarCount=0,n.scrollBarModule.bottomScrollBarCount=0,n.scrollBarModule.leftScrollBarCount=0,n.scrollBarModule.rightScrollBarCount=0),i=0,a=n.axisCollections.length;i<a;i++){for(u=!0,(t=n.axisCollections[i]).index=i,this.element=n.renderer.createGroup({id:n.element.id+"AxisGroup"+i+"Inside"}),this.element&&this.element.setAttribute("aria-hidden","true"),(s=n.renderer.createGroup({id:n.element.id+"AxisGroup"+i+"Outside"}))&&s.setAttribute("aria-hidden","true"),e=0,c=t.series;e<c.length;e++)if(r=c[e],(t.name===r.yAxisName||t.name===r.xAxisName)&&(u=r.visible,"Pareto"!==r.category||r.paretoOptions.showAxis||"Line"!==r.type||(u=!1),u))break;u?(l=this.findAxisPosition(t),this.drawAxis(t,i,l,s,h,f)):t.zoomingScrollBar&&t.zoomingScrollBar.removeScrollSvg()}return this.drawPaneLines(n,h),o(n.enableCanvas,n.svgObject,h,n.redraw),f},n.prototype.renderScrollbar=function(n,i){var f=!t.isNullOrUndefined(n.zoomModule)&&n.zoomModule.isZoomed,r,u;(i.zoomingScrollBar||n.scrollBarModule.injectTo(i,n),(f&&(i.zoomFactor<1||i.zoomPosition>0)||i.scrollbarSettings.enable&&(i.zoomFactor<=1||i.zoomPosition>=0))&&!i.zoomingScrollBar.isScrollUI)?(n.scrollElement||(n.scrollElement=ci(n.redraw,n.element.id+"_scrollElement")||t.createElement("div",{id:n.element.id+"_scrollElement"})),o(!1,n.scrollElement,i.zoomingScrollBar.render(!0),!0)):1===i.zoomFactor&&0===i.zoomPosition&&i.zoomingScrollBar.svgObject&&!i.scrollbarSettings.enable?i.zoomingScrollBar.destroy():i.zoomingScrollBar.svgObject&&(r=(i.isAxisOpposedPosition&&"Horizontal"===i.orientation?-16:0)+i.rect.y+Math.max(.5,i.lineStyle.width/2),u=(i.isAxisOpposedPosition&&"Horizontal"!==i.orientation?16:0)+(i.rect.x-("Horizontal"===i.orientation&&i.scrollbarSettings.enableZoom?i.zoomingScrollBar.svgExtraWidth/2:0))-("Vertical"===i.orientation?i.scrollbarSettings.height:0),"Horizontal"===i.orientation||"Left"!==i.scrollbarSettings.position&&"Right"!==i.scrollbarSettings.position?"Horizontal"!==i.orientation||"Top"!==i.scrollbarSettings.position&&"Bottom"!==i.scrollbarSettings.position||(r=ks(i.zoomingScrollBar,!0)):u=ks(i.zoomingScrollBar,!1),i.zoomingScrollBar.svgObject.style.top=r+"px",i.zoomingScrollBar.svgObject.style.left=u+"px");i.zoomingScrollBar.isScrollUI&&(i.zoomingScrollBar.isScrollUI=!1)},n.prototype.drawPaneLines=function(n,t){var i,u,f,e;for(this.element=n.renderer.createGroup({id:n.element.id+"DefinitionLine"}),i=0,u=n.rows.length;i<u;i++)f=n.rows[i],f.border.color&&this.drawBottomLine(f,i,!0);for(i=0,u=n.columns.length;i<u;i++)e=n.columns[i],e.border.color&&this.drawBottomLine(e,i,!1);t=t||r(n.element.id+"AxisInsideCollection");this.chart.enableCanvas||t.appendChild(this.element)},n.prototype.drawAxis=function(n,t,i,r,u,f){n.updateCrossValue();var e="";"Horizontal"===n.orientation?(n.visible&&n.internalVisibility&&n.lineStyle.width>0&&this.drawAxisLine(n,t,n.plotOffset,0,0,0,n.plotOffsetLeft,n.plotOffsetRight,i?r:this.element,n.updatedRect),e="X"):(n.visible&&n.internalVisibility&&n.lineStyle.width>0&&this.drawAxisLine(n,t,0,n.plotOffset,n.plotOffsetBottom,n.plotOffsetTop,0,0,i?r:this.element,n.updatedRect),e="Y");(n.majorGridLines.width>0||n.majorTickLines.width>0||n.minorTickLines.width>0||n.minorGridLines.width>0)&&this["draw"+e+"AxisGridLine"](n,t,i||"Inside"===n.tickPosition?r:this.element,n.updatedRect);n.visible&&n.internalVisibility&&(this["draw"+e+"AxisLabels"](n,t,i||"Inside"===n.labelPosition?r:this.element,n.placeNextToAxisLine?n.updatedRect:n.rect),this["draw"+e+"AxisBorder"](n,t,i||"Inside"===n.labelPosition?r:this.element,n.placeNextToAxisLine?n.updatedRect:n.rect),this["draw"+e+"AxisTitle"](n,t,i?r:this.element,n.placeNextToAxisLine?n.updatedRect:n.rect));this.chart.enableCanvas||(u.appendChild(this.element),r&&r.childNodes.length>0&&f.appendChild(r));this.chart.scrollBarModule&&(this.chart.zoomSettings.enableScrollbar&&n.enableScrollbarOnZooming||n.scrollbarSettings.enable)?this.renderScrollbar(this.chart,n):n.zoomingScrollBar&&n.zoomingScrollBar.destroy()},n.prototype.findAxisPosition=function(n){return null!==n.crossAt&&n.isInside(n.crossInAxis.visibleRange)},n.prototype.drawBottomLine=function(n,t,i){var c,r,u,f,e,s,h=this.chart;i?(f=e=n.computedTop+n.computedHeight,u=(r=this.seriesClipRect.x)+this.seriesClipRect.width,s="Row"):(r=u=n.computedLeft,e=(f=this.seriesClipRect.y)+this.seriesClipRect.height,s="Column");c={id:h.element.id+"_AxisBottom_"+s+t,x1:r,y1:f,x2:u,y2:e,"stroke-width":n.border.width,stroke:n.border.color};this.htmlObject=h.renderer.drawLine(c);o(h.enableCanvas,this.element,this.htmlObject)},n.prototype.drawAxisLine=function(n,t,i,u,f,e,s,h,c,l){var y,a=this.chart,v=r(a.element.id+"AxisLine_"+t),p=v?v.getAttribute("d"):"";v=null;y={id:a.element.id+"AxisLine_"+t,d:"M "+(l.x-i-s)+" "+(l.y-u-e)+" L "+(l.x+l.width+i+h)+" "+(l.y+l.height+u+f),"stroke-dasharray":n.lineStyle.dashArray,"stroke-width":n.lineStyle.width,stroke:n.lineStyle.color||a.themeStyle.axisLine};this.htmlObject=a.renderer.drawPath(y);o(a.enableCanvas,c,this.htmlObject,a.redraw,!0,"x","y",null,p,null,null,null,a.duration)},n.prototype.drawYAxisGridLine=function(n,i,u,f){var v,p,g="Logarithmic"===n.valueType,nt=n.valueType.indexOf("Category")>-1,h=0,c="",l="",w=n.isAxisOpposedPosition,tt=w?n.majorTickLines.height:-n.majorTickLines.height,b=w?.5*n.lineStyle.width:.5*-n.lineStyle.width,it="Category"===n.valueType&&"BetweenTicks"===n.labelPlacement?.5:0,rt=t.isNullOrUndefined(n.crossesAt)&&"Right"!==n.scrollbarSettings.position&&"Left"!==n.scrollbarSettings.position?w?n.scrollBarHeight:-n.scrollBarHeight:0,ft="Inside"===n.tickPosition,k=ft?f.x-tt-b:f.x+tt+b+rt,o=n.visibleLabels.length,a=this.chart.themeStyle,s=1,y;n.valueType.indexOf("Category")>-1&&"BetweenTicks"===n.labelPlacement&&o>0&&!this.chart.stockChart&&(o+=1);for(var d=n.minorGridLines,et=n.minorTickLines,e=0;e<o;e++)(h=-1*(h=ut(v=n.visibleLabels[e]?n.visibleLabels[e].value-it:n.visibleLabels[e-1].value+n.visibleRange.interval-it,n)*f.height)+(f.y+f.height))>=f.y&&f.y+f.height>=h&&(this.chart.redraw&&!this.chart.enableCanvas&&this.chart.zoomRedraw&&n.visible&&n.majorGridLines.width&&0!==e&&!r(this.chart.element.id+"_MajorGridLine_"+i+"_"+e)&&(c="M "+this.seriesClipRect.x+" "+(this.seriesClipRect.y+(n.isInversed?this.seriesClipRect.height+this.seriesClipRect.height/(e||1)*s:-this.seriesClipRect.height/(e||1)*s))+" L "+(this.seriesClipRect.x+this.seriesClipRect.width)+" "+(this.seriesClipRect.y+(n.isInversed?this.seriesClipRect.height+this.seriesClipRect.height/(e||1)*s:-this.seriesClipRect.height/(e||1)*s)),this.updateAxisElement(n,i,c,e,"_MajorGridLine_",this.element,!1),r(u.id).appendChild(this.element.childNodes[this.element.childNodes.length-1])),(we(v,n.visibleRange)||this.isBorder(n,e,h))&&(c="M "+this.seriesClipRect.x+" "+h+" L "+(this.seriesClipRect.x+this.seriesClipRect.width)+" "+h,this.renderGridLine(n,i,c,n.majorGridLines,"_MajorGridLine_",e,this.element,a.majorGridLine,n.majorGridLines.dashArray)),this.chart.redraw&&this.chart.zoomRedraw&&n.majorTickLines.width&&0!==e&&!r(this.chart.element.id+"_MajorTickLine_"+i+"_"+e)&&!this.chart.enableCanvas&&n.visible&&(l="M "+this.seriesClipRect.x+" "+(this.seriesClipRect.y+(n.isInversed?this.seriesClipRect.height+this.seriesClipRect.height/(e||1)*s:-this.seriesClipRect.height/(e||1)*s))+" L "+k+" "+(this.seriesClipRect.y+(n.isInversed?this.seriesClipRect.height+this.seriesClipRect.height/(e||1)*s:-this.seriesClipRect.height/(e||1)*s)),this.updateAxisElement(n,i,l,e,"_MajorTickLine_",u,!1),r(u.id).appendChild(this.element.childNodes[this.element.childNodes.length-1]),s+=1),l="M "+(f.x+b+(ft?rt:0))+" "+h+" L "+k+" "+h,this.renderGridLine(n,i,l,n.majorTickLines,"_MajorTickLine_",e,u,a.majorTickLine),(d.width>0||et.width>0)&&n.minorTicksPerInterval>0&&(0!==e||!be(n)||g||nt||this.renderMinorGridOnZooming(n,v,f,e,i,a,u),p=this.drawAxisMinorLine(n,v,f,e),this.renderGridLine(n,i,p[0],d,"_MinorGridLine_",e,this.element,a.minorGridLine,d.dashArray),this.renderGridLine(n,i,p[1],et,"_MinorTickLine_",e,u,a.minorTickLine),e===o-1&&be(n)&&g&&!nt&&this.renderMinorGridOnZooming(n,v+n.visibleRange.interval,f,e,i,a,u)));if(o&&this.previousYLabel>o&&!this.chart.enableCanvas&&n.visible&&this.chart.zoomRedraw&&this.chart.redraw)for(e=o;e<this.previousYLabel;e++)y=this.seriesClipRect.y+(n.isInversed?this.seriesClipRect.height/o*(e-o+1)+this.seriesClipRect.height:-this.seriesClipRect.height/o*(e-o+1)),n.majorGridLines.width&&(c="M "+this.seriesClipRect.x+" "+ +y+" L "+(this.seriesClipRect.x+this.seriesClipRect.width)+" "+y,this.updateAxisElement(n,i,c,e,"_MajorGridLine_",this.element,!0)),n.majorTickLines.width&&(l="M "+this.seriesClipRect.x+" "+y+" L "+k+" "+y,this.updateAxisElement(n,i,l,e,"_MajorTickLine_",u,!0))},n.prototype.isBorder=function(n,t,i){var e=this.chart.chartArea.border,r=this.seriesClipRect,u=n.orientation,f="Horizontal"===u?r.x:r.y,o="Horizontal"===u?r.width:r.height,s="Horizontal"===u?0:n.visibleLabels.length-1,h="Horizontal"===u?n.visibleLabels.length-1:0;return n.plotOffset>0||(i===f||i===f+o)&&(e.width<=0||"transparent"===e.color)||i!==f&&t===s||i!==f+o&&t===h},n.prototype.drawYAxisLabels=function(n,u,f,e){var d,p,c,tt,it,l=this.chart,rt=0,a=0,ui=n.labelPadding,ft="Inside"===n.labelPosition,g=n.isAxisOpposedPosition,y=(n.labelPosition===n.tickPosition?n.majorTickLines.height:0)+ui+.5*n.lineStyle.width,v=n.angle%360,ti=-90===v||90===v||270===v||-270===v,dt,gt,nt,ni,s,k,at,vt,ri;y+=ti?ft?5:-5:0;y=g?y:-y;var yt,et,pt,st,wt,ht,w,ot=l.renderer.createGroup({id:l.element.id+"AxisLabels"+u}),lt=t.isNullOrUndefined(n.crossesAt)&&"Left"!==n.scrollbarSettings.position&&"Right"!==n.scrollbarSettings.position?n.scrollBarHeight*(g?1:-1):0,b=n.isAxisInverse,bt=1,kt=b?e.y:e.y+e.height,ii=!g&&!ft||g&&ft;for(st=ft?ii?y:-y:ii?y+(l.enableRtl?-lt:lt):-y+(l.enableRtl?-lt:lt),dt=[],gt=[],n.visibleLabels.map(function(n){dt.push(n.size.width);gt.push(n.breakLabelSize.width)}),nt=Math.max.apply(Math,dt),ni=Math.max.apply(Math,gt),it=nt,v>=-45&&v<=45&&0!==v&&(it=nt*Math.cos(v*Math.PI/180))<0&&(it=-it),s=0,k=n.visibleLabels.length;s<k;s++){switch(d=n.visibleLabels[s],p=(tt=rf(n.visibleLabels[s].originalText))?n.visibleLabels[s].breakLabelSize:n.visibleLabels[s].size,a=ut(n.visibleLabels[s].value,n)*e.height+(l.stockChart&&"Outside"!==n.labelPosition?7:0),a=Math.floor(-1*a+(e.y+e.height)),yt=p.height/8*n.visibleLabels[s].text.length/2,et=l.requireInvertedAxis&&"Inside"===n.labelPosition?0:p.height/4*3+3,wt=e.height/n.visibleLabels.length,ht=("Trim"===n.labelIntersectAction||"Wrap"===n.labelIntersectAction)&&0!==v&&p.width>wt?wt:p.width,a=tt?"Inside"===n.labelPosition?a-p.height/2-yt+et:a-yt:"Inside"===n.labelPosition?a+et:a,"Inside"===n.labelPosition&&(0===s&&!n.isInversed||s===k-1&&n.isInversed)&&(a-=l.stockChart?et:et-(l.requireInvertedAxis&&"Inside"===n.labelPosition?0:n.opposedPosition?-y:y)),pt=n.majorGridLines.width>n.majorTickLines.width?n.majorGridLines.width:n.majorTickLines.width,"Far"===n.labelStyle.textAlignment?a=a-pt-10:"Near"===n.labelStyle.textAlignment&&(a=a+pt+10),w=ft?st+(0===v?p.width:tt?ni:nt)/2:st-(0===v?p.width:tt?ni:it)/2,n.enableWrap&&l.requireInvertedAxis&&v&&(!n.opposedPosition&&"Inside"===n.labelPosition||n.opposedPosition&&"Outside"===n.labelPosition)&&(w=n.opposedPosition?w-nt/2:w+nt/2),rt=g?0!==n.scrollBarHeight&&"Right"!==n.scrollbarSettings.position&&"Left"!==n.scrollbarSettings.position?e.x+n.scrollBarHeight+y-w:e.x-w:e.x+w,ti&&(rt+=g?5:-5),w=st,c=new i.TextOption(l.element.id+u+"_AxisLabel_"+s,rt,a,"middle",d.text,"","middle",v),n.edgeLabelPlacement){case"Hide":((0===s||b&&s===k-1)&&c.y>e.y||(s===k-1||b&&0===s)&&c.y-.5*p.height<e.y)&&(c.text="");break;case"Shift":(0===s||b&&s===k-1)&&c.y>e.y+e.height?c.y=a=e.y+e.height:(s===k-1||b&&0===s)&&c.y<=0&&(c.y=a=e.y+.5*p.height)}at=c.y;vt=c.y-ht;(tt&&(at=c.y-ht/2,vt=c.y+ht/2),(90===v||270===v)&&"Hide"===n.labelIntersectAction&&0!==s&&(b?vt<=kt:at>=kt))||((kt=b?at:vt,c.transform="rotate("+v+","+rt+","+a+")",this.chart.redraw&&this.chart.zoomRedraw&&!r(c.id)&&!this.chart.enableCanvas&&n.visible)&&(ri=c.y,c.y=this.seriesClipRect.y+(n.isInversed?this.seriesClipRect.height+this.seriesClipRect.height/(s||1)*bt:-this.seriesClipRect.height/(s||1)*bt),this.updateAxisElement(n,u,"",s,"_AxisLabel_",ot,!1,c,d),c.y=ri,bt+=1),ct(l.renderer,c,d.labelStyle,d.labelStyle.color||l.themeStyle.axisLabelFont.color,ot,!1,l.redraw,!0,!0,l.duration,null,0,null,l.enableCanvas,null,l.themeStyle.axisLabelFont,new h(rt,a)))}if(this.previousYLabel&&n.visibleLabels.length&&this.previousYLabel>n.visibleLabels.length&&!this.chart.enableCanvas&&n.visible&&this.chart.zoomRedraw&&l.redraw&&c.text)for(s=n.visibleLabels.length;s<this.previousYLabel;s++)c.y=this.seriesClipRect.y+(n.isInversed?this.seriesClipRect.height+this.seriesClipRect.height/n.visibleLabels.length*(s-n.visibleLabels.length+1):-this.seriesClipRect.height/n.visibleLabels.length*(s-n.visibleLabels.length+1)),c.id=l.element.id+u+"_AxisLabel_"+s,this.updateAxisElement(n,u,"",s,"_AxisLabel_",ot,!0,c,d);else this.previousYLabel=n.visibleLabels.length;this.chart.enableCanvas||(l.delayRedraw?n.visible&&n.internalVisibility&&this.createZoomingLabel(this.chart,ot,n,u,e):o(l.enableCanvas,f,ot,l.redraw))},n.prototype.rangeAnimate=function(n,i,u,f,e,o,s){var h=this;i&&new t.Animation({}).animate(i,{duration:u,progress:function(){var n=r(i.id),t;(n.style.animation="",f)?n.style.visibility=ht(parseFloat(n.getAttribute("x")),parseFloat(n.getAttribute("y")),e)?"visible":"hidden":(t=n.getAttribute("d").split(" "),n.style.visibility=ht(parseFloat(t[1]),parseFloat(t[2]),e)?"visible":"hidden")},end:function(){var t=r(i.id);t.style.visibility="";o&&s>=n.visibleLabels.length&&(v(t),f&&("Vertical"===n.orientation?h.previousYLabel=n.visibleLabels.length:h.previousXLabel=n.visibleLabels.length))}})},n.prototype.getAxisLabelXvalue=function(n,t,i){var r=t.lineBreakAlignment,u="Inside"===t.labelPosition,f=t.isAxisOpposedPosition;return f&&u||!f&&!u?"Right"===r?n:"Center"===r?n-i/2:n-i:"Left"===r?n:"Center"===r?n+i/2:n+i},n.prototype.drawYAxisBorder=function(n,t,i,r){if(n.border.width>0){var u=void 0,s=void 0,f="Outside"===n.labelPosition&&"Right"!==n.scrollbarSettings.position&&"Left"!==n.scrollbarSettings.position?n.scrollBarHeight:0,l=n.isAxisOpposedPosition;f*=l?1:-1;for(var a=r.height/n.visibleRange.delta*("DateTime"===n.valueType?n.dateTimeInterval:n.visibleRange.interval),e=void 0,v=n.maxLabelSize.width+10+(n.tickPosition===n.labelPosition?n.majorTickLines.height:0),c="",y="Category"===n.valueType&&"BetweenTicks"===n.labelPlacement?-.5:0,o=l&&"Inside"===n.labelPosition||!l&&"Outside"===n.labelPosition?r.x-v+f:r.x+v+f,h=0,p=n.visibleLabels.length;h<p;h++)switch(s=ut(n.visibleLabels[h].value+y,n),s=(n.isAxisInverse?1-s:s)*r.height,"Category"===n.valueType&&"BetweenTicks"===n.labelPlacement?(u=-1*s+(r.y+r.height),e=-1*s-a+(r.y+r.height)):(u=-1*s+a/2+(r.y+r.height),e=-1*s-a/2+(r.y+r.height)),n.border.type){case"Rectangle":case"WithoutTopBorder":u>r.y+r.height?c+="M "+o+" "+(r.y+r.height)+" L "+o+" "+e+" ":Math.floor(r.y)>e?c+="M "+(r.x+f)+" "+u+" L "+o+" "+u+" L "+o+" "+r.y+" ":(c+="M "+(r.x+f)+" "+u+" L "+o+" "+u+" L "+o+" "+e+" ",h===n.visibleLabels.length-1&&(c+="M "+(r.x+f)+" "+e+" L "+o+" "+e+" "));break;case"WithoutTopandBottomBorder":u>r.y+r.height||e<Math.floor(r.y)||(c+="M "+(r.x+f)+" "+u+" L "+o+" "+u+" M "+o+" "+e+" L "+(r.x+f)+" "+e)}""!=(c+="Rectangle"===n.border.type?"M "+(r.x+f)+" "+r.y+" L "+(r.x+f)+" "+(r.y+r.height)+" ":"")&&this.createAxisBorderElement(n,t,c,i)}for(h=0;h<this.chart.visibleSeries.length;h++)if(n.multiLevelLabels.length>0&&this.chart.multiLevelLabelModule&&this.chart.visibleSeries[h].visible){this.chart.multiLevelLabelModule.renderYAxisMultiLevelLabels(n,t,i,r);break}},n.prototype.drawYAxisTitle=function(n,t,r,u){var v,p;if(n.title){var o=this.chart,y=!1,s=n.isAxisOpposedPosition,c=(null==n.titleRotation?s?90:-90:n.titleRotation)%360,f=("Inside"===n.tickPosition?0:n.majorTickLines.height+n.titlePadding)+("Inside"===n.labelPosition?0:n.maxLabelSize.width+n.multiLevelLabelHeight+this.padding);f="Outside"===n.tickPosition||"Inside"!==n.tickPosition&&"Inside"!==n.labelPosition||5===n.titlePadding?f:f+n.titlePadding;f=s?f+("Right"===n.scrollbarSettings.position||"Left"===n.scrollbarSettings.position?0:n.scrollBarHeight):-f-("Right"===n.scrollbarSettings.position||"Left"===n.scrollbarSettings.position?0:n.scrollBarHeight);(-90!==c&&!s||90!==c&&s)&&(f+=n.isAxisOpposedPosition?n.titleSize.width/2+("Inside"===n.labelPosition&&5!==n.labelPadding?0:n.labelPadding):-n.titleSize.width/2-("Inside"===n.labelPosition&&5!==n.labelPadding?0:n.labelPadding),y=!0);var a=u.x+f,e=void 0,l=void 0;"Center"===n.titleStyle.textAlignment?(l="middle",e=u.y+.5*u.height):"Near"===n.titleStyle.textAlignment?(l=n.opposedPosition?"end":"start",e=u.height+u.y):(l=n.opposedPosition?"start":"end",e=u.y);v=n.titleSize.height*(n.titleCollection.length-1);p=new i.TextOption(o.element.id+"_AxisTitle_"+t,a,e+(y?-v:-("Inside"===n.labelPosition&&5!==n.labelPadding?0:n.labelPadding)-v),l,n.titleCollection,"rotate("+c+","+a+","+e+")",null,c);ct(o.renderer,p,n.titleStyle,n.titleStyle.color||o.themeStyle.axisTitleFont.color,r,null,null,null,null,null,null,0,null,o.enableCanvas,null,o.themeStyle.axisTitleFont,new h(a,e)).setAttribute("aria-hidden","true")}},n.prototype.drawXAxisGridLine=function(n,u,f,e){var w,g,rt="Logarithmic"===n.valueType,ft=n.valueType.indexOf("Category")>-1,c=0,y="",p="",l=1,nt=n.isAxisOpposedPosition,et=nt?-n.majorTickLines.height:n.majorTickLines.height,b=nt?.5*-n.lineStyle.width:.5*n.lineStyle.width,k=t.isNullOrUndefined(n.crossesAt)&&"Top"!==n.scrollbarSettings.position&&"Bottom"!==n.scrollbarSettings.position?nt?-n.scrollBarHeight:n.scrollBarHeight:0,tt=n.valueType.indexOf("Category")>-1&&"BetweenTicks"===n.labelPlacement&&!this.chart.stockChart?.5:0,h=n.visibleLabels.length,d="Inside"===n.tickPosition,it=d?e.y-et-b:e.y+et+b+k,a=this.chart.themeStyle,s,o,v;for(n.valueType.indexOf("Category")>-1&&h>0&&"BetweenTicks"===n.labelPlacement&&!this.chart.stockChart&&(h+=1),s=this.calculateGridLineId(f,h),o=0;o<h;o++)(c=ut(w="DateTimeCategory"!==n.valueType?n.visibleLabels[o]?n.visibleLabels[o].value-tt:n.visibleLabels[o-1].value+n.visibleRange.interval-tt:n.visibleLabels[o]?n.visibleLabels[o].value-tt:n.visibleRange.max,n)*e.width+e.x)>=e.x&&e.x+e.width>=c&&((we(w,n.visibleRange)||this.isBorder(n,o,c))&&(this.chart.redraw&&(this.chart.pointsAdded&&!this.chart.pointsRemoved||this.chart.zoomRedraw)&&n.majorGridLines.width&&0!==o&&n.visible&&!r(this.chart.element.id+"_MajorGridLine_"+u+"_"+o)&&!this.chart.enableCanvas&&(y="M "+(v=this.seriesClipRect.x+(this.chart.enableRtl!==n.isInversed?-this.seriesClipRect.width/h*l:this.seriesClipRect.width+this.seriesClipRect.width/(o||1)*l))+" "+(this.seriesClipRect.y+this.seriesClipRect.height)+" L "+v+" "+this.seriesClipRect.y,this.renderGridLine(n,u,y,n.majorGridLines,"_MajorGridLine_",o,this.element,a.majorGridLine,n.majorGridLines.dashArray,s.MajorGridLine&&s.MajorGridLine.ids?s.MajorGridLine.ids[o]:null,!!s.MajorGridLine&&s.MajorGridLine.isPointRemoved),this.rangeAnimate(n,this.element.childNodes[this.element.childNodes.length-1],this.chart.duration,!1,new i.Rect(this.seriesClipRect.x,n.rect.y,this.seriesClipRect.x+this.seriesClipRect.width,this.chart.availableSize.height),!1,o),r(f.id)&&r(f.id).appendChild(this.element.childNodes[this.element.childNodes.length-1])),y="M "+c+" "+(this.seriesClipRect.y+this.seriesClipRect.height)+" L "+c+" "+this.seriesClipRect.y,this.renderGridLine(n,u,y,n.majorGridLines,"_MajorGridLine_",o,this.element,a.majorGridLine,n.majorGridLines.dashArray,s.MajorGridLine&&s.MajorGridLine.ids?s.MajorGridLine.ids[o]:null,!!s.MajorGridLine&&s.MajorGridLine.isPointRemoved)),this.chart.redraw&&this.chart.zoomRedraw&&n.majorTickLines.width&&!r(this.chart.element.id+"_MajorTickLine_"+u+"_"+o)&&!this.chart.enableCanvas&&n.visible&&(p="M "+(this.seriesClipRect.x+(this.chart.enableRtl!==n.isInversed?-this.seriesClipRect.width/h*l:this.seriesClipRect.width+this.seriesClipRect.width/(o||1)*l))+" "+(e.y+b+(d?k:0))+" L "+(this.seriesClipRect.x+(this.chart.enableRtl!==n.isInversed?-this.seriesClipRect.width/h*l:this.seriesClipRect.width+this.seriesClipRect.width/(o||1)*l))+" "+it,this.updateAxisElement(n,u,p,o,"_MajorTickLine_",f,!1),r(f.id).appendChild(this.element.childNodes[this.element.childNodes.length-1]),l+=1),p="M "+c+" "+(e.y+b+(d?k:0))+" L "+c+" "+it,this.renderGridLine(n,u,p,n.majorTickLines,"_MajorTickLine_",o,f,a.majorTickLine,null,s.MajorTickLine&&s.MajorTickLine.ids?s.MajorTickLine.ids[o]:null,!!s.MajorTickLine&&s.MajorTickLine.isPointRemoved),n.minorTicksPerInterval>0&&(n.minorGridLines.width>0||n.minorTickLines.width>0)&&(0!==o||!be(n)||rt||ft||this.renderMinorGridOnZooming(n,w,e,o,u,a,f),g=this.drawAxisMinorLine(n,w,e,o),this.renderGridLine(n,u,g[0],n.minorGridLines,"_MinorGridLine_",o,this.element,a.minorGridLine,n.minorGridLines.dashArray,s.MinorGridLine&&s.MinorGridLine.ids?s.MinorGridLine.ids[o]:null,!!s.MinorGridLine&&s.MinorGridLine.isPointRemoved),this.renderGridLine(n,u,g[1],n.minorTickLines,"_MinorTickLine_",o,f,a.minorTickLine,null,s.MinorTickLine&&s.MinorTickLine.ids?s.MinorTickLine.ids[o]:null,!!s.MinorTickLine&&s.MinorTickLine.isPointRemoved),o===h-1&&be(n)&&rt&&!ft&&this.renderMinorGridOnZooming(n,w+n.visibleRange.interval,e,o,u,a,f)));if(h&&this.previousXLabel>h&&!this.chart.enableCanvas&&n.visible&&this.chart.zoomRedraw&&this.chart.redraw)for(o=h;o<this.previousXLabel;o++)v=this.seriesClipRect.x+(this.chart.enableRtl!==n.isInversed?-this.seriesClipRect.width/h*(o-h+1):this.seriesClipRect.width+this.seriesClipRect.width/h*(o-h+1)),n.majorGridLines.width&&(y="M "+v+" "+(this.seriesClipRect.y+this.seriesClipRect.height)+" L "+v+" "+this.seriesClipRect.y,this.updateAxisElement(n,u,y,o,"_MajorGridLine_",this.element,!0)),n.majorTickLines.width&&(p="M "+v+" "+(e.y+b+(d?k:0))+" L "+v+" "+it,this.updateAxisElement(n,u,p,o,"_MajorTickLine_",f,!0))},n.prototype.calculateGridLineId=function(n,t){var u=this,i={};return this.chart.pointsRemoved&&["MajorGridLine","MajorTickLine","MinorGridLine","MinorTickLine"].forEach(function(f){for(var o,a,s,v,c=r(n.id),l=c.querySelectorAll('[id*="_'+f+'_"]'),e=[],h=0;h<l.length;h++)e.push(l[h]);if(o="MajorGridLine"===f&&u.chart.chartArea.border.width?t-2:t,o="MinorGridLine"===f||"MinorTickLine"===f?t-1:o,e.length>0&&e.length>o){for(a=e.length,s=0;s<a-o;s++)e[s]&&c.removeChild(e[s]),e.shift();v=e.map(function(n){var t=n.id.split("_");return parseInt(t[t.length-1],10)});i[f]={ids:v,isPointRemoved:!0}}}),i},n.prototype.renderMinorGridOnZooming=function(n,t,i,r,u,f,e){var o=this.drawAxisMinorLine(n,t,i,r,!0);this.renderGridLine(n,u,o[0],n.minorGridLines,"_MinorGridLine_",-1,this.element,f.minorGridLine,n.minorGridLines.dashArray);this.renderGridLine(n,u,o[1],n.minorTickLines,"_MinorTickLine_",-1,e,f.minorTickLine)},n.prototype.drawAxisMinorLine=function(n,t,i,r,u){var k,h=t,f=0,e=0,c=n.visibleRange,d="Inside"===n.tickPosition,y=[],v=n.isAxisOpposedPosition?-n.minorTickLines.height:n.minorTickLines.height,p=1,a=1,w=d?i.y-v:i.y+v,b=d?i.x+v:i.x-v,s="",o="",g=n.isAxisInverse,l;if("Logarithmic"===n.valueType&&(a=(k=Math.pow(n.logBase,h-c.interval))+(p=(Math.pow(n.logBase,h)-k)/(n.minorTicksPerInterval+1))),"Horizontal"===n.orientation)for(l=0;l<n.minorTicksPerInterval;l++)h=this.findLogNumeric(n,a,h,r,u),a+=p,we(h,c)&&(e=(h-c.min)/(c.max-c.min),e=Math.ceil((g?1-e:e)*i.width),f=Math.floor(e+i.x),this.chart.enableCanvas?(s=""===s?"M "+f+" "+this.seriesClipRect.y+" L "+f+" "+(this.seriesClipRect.y+this.seriesClipRect.height):s+" M "+f+" "+this.seriesClipRect.y+" L "+f+" "+(this.seriesClipRect.y+this.seriesClipRect.height),f=Math.floor(e+i.x),o=""===o?o.concat("M "+f+" "+i.y+" L "+f+" "+(w+n.scrollBarHeight)):o.concat(" M "+f+" "+i.y+" L "+f+" "+(w+n.scrollBarHeight))):(s=s.concat("M "+f+" "+this.seriesClipRect.y+"L "+f+" "+(this.seriesClipRect.y+this.seriesClipRect.height)),f=Math.floor(e+i.x),o=o.concat("M "+f+" "+i.y+"L "+f+" "+(w+n.scrollBarHeight))));else for(l=0;l<n.minorTicksPerInterval;l++)we(h=this.findLogNumeric(n,a,h,r,u),c)&&(e=(h-c.min)/(c.max-c.min),e=-1*Math.ceil((g?1-e:e)*i.height),f=Math.floor(e+i.y+i.height),this.chart.enableCanvas?(s=""===s?"M "+this.seriesClipRect.x+" "+f+" L "+(this.seriesClipRect.x+this.seriesClipRect.width)+" "+f:s+" M "+this.seriesClipRect.x+" "+f+" L "+(this.seriesClipRect.x+this.seriesClipRect.width)+" "+f,f=Math.floor(e+i.y+i.height),o=""===o?o.concat("M "+i.x+" "+f+" L "+(b-n.scrollBarHeight)+" "+f+" "):o.concat(" M "+i.x+" "+f+" L "+(b-n.scrollBarHeight)+" "+f+" ")):(s=s.concat("M "+this.seriesClipRect.x+" "+f+"L "+(this.seriesClipRect.x+this.seriesClipRect.width)+" "+f+" "),f=Math.floor(e+i.y+i.height),o=o.concat("M "+i.x+" "+f+"L "+(b-n.scrollBarHeight)+" "+f+" "))),a+=p;return y.push(s),y.push(o),y},n.prototype.findLogNumeric=function(n,t,i,r,u){var f,o=n.visibleRange,e;return"Logarithmic"===n.valueType?i=hi(t,n.logBase):"DateTime"===n.valueType?(f=n.dateTimeInterval/(n.minorTicksPerInterval+1),i=u?i-f:i+f):"DateTimeCategory"===n.valueType?(e="BetweenTicks"===n.labelPlacement?.5:0,i+=((n.visibleLabels[r+1]?n.visibleLabels[r+1].value-e:n.visibleRange.max)-(n.visibleLabels[r]?n.visibleLabels[r].value-e:n.visibleRange.min))/(n.minorTicksPerInterval+1)):(f=o.interval/(n.minorTicksPerInterval+1),i=u?i-f:i+f),i},n.prototype.drawXAxisLabels=function(n,u,f,e){var g,ft,nr,p,o,li,et,nt,l,w,c=this.chart,y=0,ot=0,ni=0,tr=n.labelPadding,bt=c.renderer.createGroup({id:c.element.id+"AxisLabels"+u}),st="Inside"===n.labelPosition,ti=n.isAxisOpposedPosition,ir=n.labelPosition===n.tickPosition?n.majorTickLines.height:0,b=ir+tr+.5*n.lineStyle.width,s=n.angle%360,rr=0===s||-180===s||180===s,d=n.isAxisInverse,ai=1,vi=d?e.x+e.width:e.x,v=0,k=n.visibleLabels.length,ii=n.scrollbarSettings.enable||!st&&t.isNullOrUndefined(n.crossesAt)&&(n.zoomFactor<1||n.zoomPosition>0)?"Top"===n.scrollbarSettings.position||"Bottom"===n.scrollbarSettings.position?0:n.scrollBarHeight:0,lt=[],ri=!1,at=[],vt=new i.Size(0,0),kt,ei,oi,yi,pi,bi,er,pt,wt,rt,it,si,hi,dt,or,gt,cr,lr,ar,vr;b+=90===s||270===s||-90===s||-270===s?st?5:-5:0;for(var ui=!ti&&!st||ti&&st,fi=r(c.element.id+"AxisLabels"+u),ur=this.removeAxisLabelElements(n,fi),tt=c.legendModule&&"Right"===c.legendSettings.position&&c.legendModule.legendBounds.height+c.legendModule.legendBounds.y>=n.rect.y?c.legendModule.legendBounds.width:0,fr=ui?360>=s&&s>=180||-1>=s&&s>=-180:1<=s&&s<=180||-181>=s&&s>=-360,a=0,yt=k;a<yt;a++){if(w=rf((l=n.visibleLabels[a]).originalText)||"Wrap"===n.labelIntersectAction&&l.text.length>1,y=ut(l.value,n)*e.width+e.x,ft=l.size,n.enableWrap&&(ft.height=i.measureText(l.text,n.labelStyle,c.themeStyle.axisLabelFont).height),nt=e.width/k,li=w?l.breakLabelSize.width:ft.width,v=("Trim"===n.labelIntersectAction||"Wrap"===n.labelIntersectAction)&&0===s&&li>nt?nt:li,g=ft.height/4,y-=w||0!==s?0:v/2,0!==s&&(y-=w?"Left"===n.lineBreakAlignment?l.breakLabelSize.width/2:"Right"===n.lineBreakAlignment?-l.breakLabelSize.width/2:0:-90===s||270===s?-g:90===s||-270===s?g:0),"Far"===n.labelStyle.textAlignment?y=y+v-10:"Near"===n.labelStyle.textAlignment&&(y=y-v+10),w&&"Center"!==n.lineBreakAlignment&&0===s&&(y+="Left"===n.lineBreakAlignment?-v/2:v/2),kt=w?rr?n.opposedPosition||st?0:ft.height:l.breakLabelSize.width/2:0,b=w?ir+tr+.5*n.lineStyle.width:b,st&&s?ot=w?ti?e.y+b+kt:e.y-b-kt:ti?e.y+b+g:e.y-b-g:(nr=w?ui?b+ii+(s?kt:3*g):-(b+ii+kt):ui?b+ii+(s?1:3)*g:-(b+ii+(s?g:l.index>1?2*g:0)),ot=e.y+nr*l.index),p=w?this.getAnchor(n):c.enableRtl?fr?"":"end":c.isRtlEnabled||fr?"end":"start",(o=new i.TextOption(c.element.id+u+"_AxisLabel_"+a,y,ot,p)).id=ur&&fi&&fi.children[a]?fi.children[a].id:o.id,0!==s&&(vt=yu(l.labelStyle,l.originalText,s,c,c.themeStyle.axisLabelFont),et=s<0&&s>-90||s<-180&&s>-270||s>90&&s<180||s>270&&s<360),n.edgeLabelPlacement)switch(n.edgeLabelPlacement){case"Hide":if((0===a||d&&a===yt-1)&&o.x<e.x||(a===yt-1||d&&0===a)&&o.x+(0===s?v:vt.width)>e.x+e.width)continue;break;case"Shift":if(a===yt-2&&"MultipleRows"!==n.labelIntersectAction&&(ni="start"===p||""===p?o.x+v:"middle"===p?o.x+v/2:o.x),(0===a||d&&a===yt-1)&&(o.x<e.x||0!==s&&et&&o.x<e.x||"Center"===n.lineBreakAlignment&&o.x-l.size.width/l.text.length/2<e.x&&0===s))if(nt-=e.x-o.x,""===p||"start"===p)y=o.x<=0?o.x=0:o.x,nt=e.width/k;else if(et&&0!==s)nt=e.width/k,o.x=e.x+nt>o.x+vt.width?y=e.x+b:y=e.x+nt-b;else if(w&&"Center"===n.lineBreakAlignment&&"OnTicks"===n.labelPlacement&&0===s){for(ei=0,oi=0;oi<l.text.length;oi++)yi=i.measureText(l.text[oi],n.labelStyle,c.themeStyle.axisLabelFont).width,yi>ei&&(ei=yi);o.x=y=e.x+ei/2}else"start"===p&&o.x>0||(o.x=y=rr?e.x:e.x+b);else(a===yt-1||d&&0===a)&&(o.x+v>c.availableSize.width-c.border.width-tt&&("start"===p||""===p)&&0===s||""===p&&0!==s&&!et&&o.x+vt.width>c.availableSize.width-c.border.width-tt||"middle"===p&&0!==s&&!et&&o.x+vt.width/2>c.availableSize.width-c.border.width-tt||"end"===p&&0!==s&&!et&&o.x>c.availableSize.width-c.border.width-tt||"end"===p&&o.x>c.availableSize.width-c.border.width-tt&&0===s||"middle"===p&&o.x+v/2>c.availableSize.width-c.border.width-tt&&0===s)&&(bi=0!==s?vt.width:v,(pi="start"===p||""===p?o.x-(o.x+bi-c.availableSize.width+c.border.width+5+tt):"middle"===p?o.x-(o.x+bi/2-c.availableSize.width+c.border.width+5+tt):o.x-(o.x-(c.availableSize.width+c.border.width+5+tt)),0!==ni&&pi<ni)?(er=c.availableSize.width-ni,l.text=wi(er,l.originalText,n.labelStyle,c.isRtlEnabled,c.themeStyle.axisLabelFont)):o.x=y=pi)}if(o.text=this.getLabelText(l,n,nt),o.labelRotation=s,pt=void 0,wt=void 0,w&&0===s?"Right"===n.lineBreakAlignment?(pt=o.x-v,wt=o.x):"Center"===n.lineBreakAlignment?(pt=o.x-v/2,wt=o.x+v/2):(pt=o.x,wt=o.x+v):(pt=o.x,wt=o.x+v),0!==s||"Hide"!==n.labelIntersectAction||0===a||!(d?wt>=vi:pt<=vi)){if(vi=w?"Right"===n.lineBreakAlignment?d?o.x-v:o.x:"Center"===n.lineBreakAlignment?d?o.x-v/2:o.x+v/2:d?o.x:o.x+v:d?o.x:o.x+v,0!==s){rt=void 0;it=void 0;w?(si=0,hi=0,rt=l.breakLabelSize.height,hi=l.breakLabelSize.height-4,"Center"===n.lineBreakAlignment?si=-l.breakLabelSize.width/2:"Right"===n.lineBreakAlignment&&(si=-l.breakLabelSize.width),ui&&(hi=l.breakLabelSize.height/(o.text.length+1)),it=new i.Rect(o.x+si,o.y-hi,l.breakLabelSize.width,rt)):(rt=ot-(o.y-l.size.height/2),it=new i.Rect(o.x,o.y-(l.size.height/2-5),l.size.width,rt));var yr=this.getRectanglePoints(it),ki=w?it.x+it.width/2:y,di=w?it.y+it.height/2:ot-rt/2;if(o.transform=w?"rotate("+s+","+ki+","+di+")":"rotate("+s+","+y+","+ot+")",lt.push(da(yr,ki,di,s)),ri=!1,"None"!==n.labelIntersectAction)for(dt=a;dt>0;dt--)if(lt[a]&&lt[dt-1]&&ga(lt[a],lt[dt-1])){ri=!0;lt[a]=null;break}var gi=s>0&&s<90||s>180&&s<270||s<-90&&s>-180||s<-270&&s>-360,pr=new i.Rect(o.x,o.y-(ft.height/2+b/2),l.size.width,rt),wr=this.getRectanglePoints(pr),ci=[];for(ci.push(new h(gi?this.chart.availableSize.width:this.padding,n.rect.y)),ci.push(new h(gi?this.chart.availableSize.width:this.padding,n.rect.y+n.maxLabelSize.height)),at.push(da(wr,ki,di,s)),or=new i.Rect(0,n.rect.y,this.chart.availableSize.width,2*n.maxLabelSize.height),gt=0;gt<at[a].length;gt++)if(!n.opposedPosition&&!ht(at[a][gt].x,at[a][gt].y,or)&&"string"==typeof o.text){var br=this.calculateIntersection(at[a][0],at[a][1],ci[0],ci[1]),sr=gi?this.chart.availableSize.width-y:y,hr=br.y-n.rect.y,kr=Math.sqrt(sr*sr+hr*hr);o.text=wi(kr,l.text,l.labelStyle,c.enableRtl,c.themeStyle.axisLabelFont)}}this.chart.redraw&&(c.pointsAdded&&!c.pointsRemoved||this.chart.zoomRedraw)&&!r(o.id)&&0!==a&&!this.chart.enableCanvas&&n.visible&&(cr=o.x,o.x=this.seriesClipRect.x+(c.enableRtl!==n.isInversed?-this.seriesClipRect.width/(a||1)*ai:this.seriesClipRect.width+this.seriesClipRect.width/(a||1)*ai),lr=o.transform,o.transform=s?"rotate("+s+","+o.x+","+parseFloat(o.transform.split(",")[2])+")":"",ar=ct(c.renderer,o,l.labelStyle,l.labelStyle.color||c.themeStyle.axisLabelFont.color,bt,n.isAxisOpposedPosition!==("Inside"===n.labelPosition),c.redraw,!0,null,c.duration,null,l.size,ri,c.enableCanvas,null,c.themeStyle.axisLabelFont),this.rangeAnimate(n,ar,this.chart.duration,!0,new i.Rect(this.seriesClipRect.x,n.rect.y,this.seriesClipRect.x+this.seriesClipRect.width,this.chart.availableSize.height),!1,a),o.x=cr,o.transform=lr,ai+=1);vr=ct(c.renderer,o,l.labelStyle,l.labelStyle.color||c.themeStyle.axisLabelFont.color,bt,n.isAxisOpposedPosition!==("Inside"===n.labelPosition),c.redraw,!0,null,c.duration,null,l.size,ri,c.enableCanvas,null,c.themeStyle.axisLabelFont,new h(parseFloat(o.transform.split(",")[1]),parseFloat(o.transform.split(",")[2])));ur&&(vr.id=c.element.id+u+"_AxisLabel_"+a)}}if(this.previousXLabel&&k&&this.previousXLabel>k&&!this.chart.enableCanvas&&n.visible&&this.chart.zoomRedraw&&this.chart.redraw&&o.text)for(a=k;a<this.previousXLabel;a++)o.x=this.seriesClipRect.x+(c.enableRtl!==n.isInversed?-this.seriesClipRect.width/k*(a-k+1):this.seriesClipRect.width+this.seriesClipRect.width/k*(a-k+1)),o.id=c.element.id+u+"_AxisLabel_"+a,o.transform=s?"rotate("+s+","+o.x+","+parseFloat(o.transform.split(",")[2])+")":"",this.updateAxisElement(n,u,"",a,"_AxisLabel_",bt,!0,o,l);else this.previousXLabel=k;this.chart.enableCanvas||(c.delayRedraw?n.visible&&n.internalVisibility&&this.createZoomingLabel(this.chart,bt,n,u,e):f.appendChild(bt))},n.prototype.updateAxisElement=function(n,t,r,u,f,e,o,s,h){var c,l=f.indexOf("Grid")>-1,a=f.indexOf("Label")>-1;a?c=ct(this.chart.renderer,s,h.labelStyle,h.labelStyle.color||this.chart.themeStyle.axisLabelFont.color,e,n.isAxisOpposedPosition!==("Inside"===n.labelPosition),this.chart.redraw,!0,null,this.chart.duration,null,0,null,this.chart.enableCanvas,null,this.chart.themeStyle.axisLabelFont):(this.renderGridLine(n,t,r,l?n.majorGridLines:n.majorTickLines,f,u,this.element,l?this.chart.themeStyle.majorGridLine:this.chart.themeStyle.majorTickLine,l?n.majorGridLines.dashArray:null),this.element&&e.childNodes&&(c=this.element.childNodes[e.childNodes.length-1]));this.rangeAnimate(n,c,this.chart.duration,a,new i.Rect("Vertical"===n.orientation?0:this.seriesClipRect.x,"Vertical"===n.orientation?this.seriesClipRect.y:n.rect.y,this.seriesClipRect.width,this.seriesClipRect.height),o,u)},n.prototype.removeAxisLabelElements=function(n,t){var i,r,u,e,f;if(this.chart.pointsRemoved&&t&&t.childNodes.length){if(i=!1,n.valueType.indexOf("Category")>-1)for(r=[],n.visibleLabels.map(function(n){"string"!=typeof n.text?r.push(n.text.join("")):r.push(n.text)}),u=t.childNodes.length-1;u>=0;u--)e=t.childNodes[u],-1===r.indexOf(e.textContent.trim())&&(t.removeChild(e),i=!0);else if(t.childNodes.length>n.visibleLabels.length)for(f=0;f<t.childNodes.length-n.visibleLabels.length;f++)t.removeChild(t.childNodes[f]),i=!0;return i}return!1},n.prototype.calculateIntersection=function(n,t,i,r){var u=i.x-r.x,f=n.x-t.x,e=i.y-r.y,o=n.y-t.y,s=f*e-o*u,h=n.x*t.y-n.y*t.x,c=i.x*r.y-i.y*r.x;return{x:(h*u-f*c)/s,y:(h*e-o*c)/s}},n.prototype.getAnchor=function(n){return"Center"===n.lineBreakAlignment?"middle":this.chart.enableRtl?"Left"===n.lineBreakAlignment?"end":"start":"Left"===n.lineBreakAlignment?"start":"end"},n.prototype.getRectanglePoints=function(n){return[new h(n.x,n.y),new h(n.x+n.width,n.y),new h(n.x+n.width,n.y+n.height),new h(n.x,n.y+n.height)]},n.prototype.getLabelText=function(n,t,i){if(rf(n.originalText)){for(var u=[],f=void 0,r=0;r<n.text.length;r++)f=this.findAxisLabel(t,n.text[r],i),u.push(f);return u}return this.findAxisLabel(t,n.text,i)},n.prototype.drawXAxisBorder=function(n,t,i,r){if(n.border.width>0){for(var a="Outside"===n.labelPosition&&"Top"!==n.scrollbarSettings.position&&"Bottom"!==n.scrollbarSettings.position?n.scrollBarHeight:0,v=n.isAxisOpposedPosition,u=void 0,s=r.y+(v?-1:1)*a,h=void 0,l=r.width/n.visibleRange.delta*("DateTime"===n.valueType?n.dateTimeInterval:n.visibleRange.interval),e=void 0,y=n.maxLabelSize.height+(n.tickPosition===n.labelPosition?n.majorTickLines.height:0),c="",p="Category"===n.valueType&&"BetweenTicks"===n.labelPlacement?-.5:0,f=v&&"Inside"===n.labelPosition||!v&&"Outside"===n.labelPosition?r.y+y+10+a:r.y-y-10-a,o=0,w=n.visibleLabels.length;o<w;o++)switch(h=ut(n.visibleLabels[o].value+p,n),h=(n.isAxisInverse?1-h:h)*r.width,"Category"===n.valueType&&"BetweenTicks"===n.labelPlacement?(u=h+r.x,e=h+l+r.x):(u=h-.5*l+r.x,e=h+.5*l+r.x),n.border.type){case"Rectangle":case"WithoutTopBorder":u<r.x&&"OnTicks"!==n.labelPlacement?c+="M "+r.x+" "+f+" L "+e+" "+f+" ":Math.floor(e)>r.width+r.x&&1!==n.visibleLabels.length&&o!==n.visibleLabels.length-1?c+="M "+u+" "+s+" L "+u+" "+f+" L "+(r.width+r.x)+" "+f+" ":(c+="M "+(u=0===o&&"OnTicks"===n.labelPlacement?r.x:u)+" "+s+" L "+u+" "+f+" L "+(e=o===n.visibleLabels.length-1&&"OnTicks"===n.labelPlacement?e-.5*l:e)+" "+f+" ",0===o&&(c+="M "+u+" "+s+" L "+u+" "+f+" M "+u+" "+f+" L "+r.x+" "+f),o===n.visibleLabels.length-1&&(c+="M "+e+" "+s+" L "+e+" "+f+" M "+e+" "+f+" L "+(r.width+r.x)+" "+f));break;case"WithoutTopandBottomBorder":u<r.x||Math.floor(e)>r.width+r.x||(c+="M "+u+" "+s+" L "+u+" "+f+" M "+e+" "+s+" L "+e+" "+f)}""!=(c+="Rectangle"===n.border.type?"M  "+r.x+" "+s+"L "+(r.x+r.width)+" "+s:"")&&this.createAxisBorderElement(n,t,c,i)}for(o=0;o<this.chart.visibleSeries.length;o++)if(this.chart.multiLevelLabelModule&&n.multiLevelLabels.length>0&&this.chart.visibleSeries[o].visible){this.chart.multiLevelLabelModule.renderXAxisMultiLevelLabels(n,t,i,r);break}},n.prototype.createAxisBorderElement=function(n,t,u,f){var e=r(this.chart.element.id+"_BorderLine_"+t),h=e?e.getAttribute("d"):"",s=this.chart.renderer.drawPath(new i.PathOption(this.chart.element.id+"_BorderLine_"+t,"transparent",n.border.width,n.border.color||this.chart.themeStyle.axisLine,1,"",u));s.style.pointerEvents="none";o(this.chart.enableCanvas,f,s,this.chart.redraw,!1,"x","y",null,h,!0,null,null,this.chart.duration)},n.prototype.findAxisLabel=function(n,t,i){return"Trim"===n.labelIntersectAction?n.angle%360!=0||n.enableTrim?t:wi(i,t,n.labelStyle,this.chart.enableRtl,this.chart.themeStyle.axisLabelFont):t},n.prototype.drawXAxisTitle=function(n,r,u,f){var p,w;if(n.title){var e=this.chart,c=i.measureText(n.title,n.titleStyle,this.chart.themeStyle.axisTitleFont),y=t.isNullOrUndefined(n.crossesAt)&&"Top"!==n.scrollbarSettings.position&&"Bottom"!==n.scrollbarSettings.position?n.scrollBarHeight:0,o=("Inside"===n.tickPosition?0:n.majorTickLines.height+n.titlePadding)+("Inside"===n.labelPosition?0:n.maxLabelSize.height+n.multiLevelLabelHeight+n.labelPadding);o="Outside"===n.tickPosition||"Inside"!==n.tickPosition&&"Inside"!==n.labelPosition||5===n.titlePadding?o:o+n.titlePadding;p=n.titleSize.height*(n.titleCollection.length-1);o=n.isAxisOpposedPosition?-(o+c.height/4+y+p):o+3*c.height/4+y;var v=n.titleRotation?n.titleRotation:0,s=void 0,l=f.y+o,a=void 0;"Center"===n.titleStyle.textAlignment?(a="middle",s=f.x+.5*f.width):"Near"===n.titleStyle.textAlignment?(a="start",s=f.x):(a="end",s=f.x+f.width);0!==v&&(l+=n.opposedPosition?-(n.titleSize.height/2+c.height/4):n.titleSize.height/2-c.height/4);w=new i.TextOption(e.element.id+"_AxisTitle_"+r,s,l,a,n.titleCollection,"rotate("+v+","+s+","+l+")",null,v);ct(e.renderer,w,n.titleStyle,n.titleStyle.color||e.themeStyle.axisTitleFont.color,u,null,e.redraw,e.redraw,null,null,null,0,null,e.enableCanvas,null,e.themeStyle.axisTitleFont,new h(s,l)).setAttribute("aria-hidden","true")}},n.prototype.renderGridLine=function(n,t,u,f,e,s,h,c,l,a,v){void 0===l&&(l=null);void 0===a&&(a=null);void 0===v&&(v=!1);var w,p,y=this.chart;f.width>0&&n.visible&&n.internalVisibility&&u&&(w=(p=r(y.element.id+e+t+"_"+(v?a:s)))?p.getAttribute("d"):null,p=null,this.htmlObject=y.renderer.drawPath(new i.PathOption(y.element.id+e+t+"_"+(v?a:s),"transparent",f.width,f.color||c,null,l,u)),o(y.enableCanvas,h,this.htmlObject,y.redraw,!0,"x","y",null,w,!0,null,null,y.duration),v&&(this.htmlObject.id=y.element.id+e+t+"_"+s))},n.prototype.findParentNode=function(n,t,i){return document.getElementById(n+"AxisGroup"+i+"Inside").contains(document.getElementById(t.id))?document.getElementById(n+"AxisGroup"+i+"Inside"):document.getElementById(n+"AxisGroup"+i+"Outside")},n.prototype.createZoomingLabel=function(n,t,i,u,f){var o=this.findParentNode(n.element.id,t,u),e;t.setAttribute("opacity","0.3");e=n.renderer.createGroup({id:n.element.id+"AxisLabels_Zoom"+u});e=pw(n,i,e,u,"Vertical"===i.orientation,f);o.replaceChild(t,document.getElementById(t.id));r(n.element.id+"AxisLabels_Zoom"+u)?o.replaceChild(e,document.getElementById(e.id)):o.appendChild(e)},n}(),rs=function(){function n(n){this.currentPoints=[];this.previousPoints=[];this.insideRegion=!1;this.commonXvalues=[];this.chart=n;this.lierIndex=0}return n.prototype.getData=function(){for(var e,o,s,h,t,i,r=this.chart,u=null,n=null,f=r.visibleSeries.length-1;f>=0;f--)if((s="Scatter"===(n=r.visibleSeries[f]).type||"Scatter"===n.drawType||n.marker.visible?(n.marker.height+5)/2:0,h="Scatter"===n.type||"Scatter"===n.drawType||n.marker.visible?(n.marker.width+5)/2:0,t=r.mouseX,i=r.mouseY,n.dragSettings.enable&&n.isRectSeries)&&("Bar"===n.type&&r.isTransposed||!r.isTransposed&&"Bar"!==n.type?(e=n.marker.height/2,i=n.yAxis.isAxisInverse?i-e:i+e):(o=n.marker.width/2,t=n.yAxis.isAxisInverse?t+o:t-o)),n.visible&&ht(t,i,n.clipRect,s,h)&&(u=this.getRectPoint(n,n.clipRect,t,i)),u)return new io(u,n);return new io(u,n)},n.prototype.isSelected=function(n){return(n.selectionMode.indexOf("Drag")>-1||n.selectionMode.indexOf("Lasso")>-1)&&n.selectionModule&&null!==n.selectionModule.rectPoints},n.prototype.getRectPoint=function(n,t,i,r){var l,a,f,e,o,s,h=0,c,v,u;if(this.chart.isScrolling)return null;for(c=0,v=n.points;c<v.length;c++)if(u=v[c],u.regionData||u.regions&&u.regions.length){if(u.regionData&&"PolarRadar"===this.chart.chartAreaType&&n.drawType.indexOf("Column")>-1&&(l=i-(n.clipRect.width/2+n.clipRect.x),a=r-(n.clipRect.height/2+n.clipRect.y),h=2*Math.PI*(u.regionData.currentXPosition<0?1+u.regionData.currentXPosition:u.regionData.currentXPosition),f=(f=(Math.atan2(a,l)+.5*Math.PI-h)%(2*Math.PI))<0?2*Math.PI+f:f,f+=2*Math.PI*n.chart.primaryXAxis.startAngle,e=u.regionData.startAngle,e=(e-=h)<0?2*Math.PI+e:e,o=u.regionData.endAngle,o=(o-=h)<0?2*Math.PI+o:o,s=Math.sqrt(Math.pow(Math.abs(l),2)+Math.pow(Math.abs(a),2)),f>=e&&f<=o&&(s>=u.regionData.innerRadius&&s<=u.regionData.radius||s<=u.regionData.innerRadius&&s>=u.regionData.radius)&&s<=n.chart.radius))return u;if((n.dragSettings.enable&&n.isRectSeries||n.isRectSeries&&n.marker.visible&&"PolarRadar"!==this.chart.chartAreaType)&&this.isPointInThresholdRegion(i,r,u,t,n))return this.insideRegion=!0,u;if(!this.insideRegion&&this.checkRegionContainsPoint(u.regions,t,i,r)||this.insideRegion&&this.checkRegionContainsPoint(u.regions,t,i,r))return u}return null},n.prototype.checkRegionContainsPoint=function(n,t,r,u){var f=this;return n.some(function(n,e){return f.lierIndex=e,ht(r,u,new i.Rect(("Cartesian"===f.chart.chartAreaType?t.x:0)+n.x,("Cartesian"===f.chart.chartAreaType?t.y:0)+n.y,n.width,n.height))})},n.prototype.isPointInThresholdRegion=function(n,t,r,u,f){var e,l=this,c="Bar"===f.type,a=f.yAxis.isAxisInverse,v=f.chart.isTransposed,o=0,s=0,h=e=20;return a&&v?c?(o=r.regions[0].height-10,e=r.regions[0].width):(s=-10,h=r.regions[0].height):a||r.yValue<0?c?(s=-10,h=r.regions[0].height):(o=r.regions[0].height-10,e=r.regions[0].width):v?c?(o=-10,e=r.regions[0].width):(s=r.regions[0].width-10,h=r.regions[0].height):c?(s=r.regions[0].width-10,h=r.regions[0].height):(o=-10,e=r.regions[0].width),r.regions.some(function(r){return ht(n,t,new i.Rect(("Cartesian"===l.chart.chartAreaType?u.x:0)+r.x+s,("Cartesian"===l.chart.chartAreaType?u.y:0)+r.y+o,e,h))})},n.prototype.getClosest=function(n,t,i){var e,h,c=i||n.xData,l=c.length,u=.5,f=.5,o,r,s;if("DateTime"===n.xAxis.valueType&&1===n.points.length){for(u=n.xAxis.visibleRange.min,f=n.xAxis.visibleRange.max,o=0;o<n.chart.visibleSeries.length;o++)r=n.chart.visibleSeries[o],r.xMin>=u&&r.xMin<n.xMin&&(u=r.xMin+.1),r.xMax<=f&&r.xMax>n.xMax&&(f=r.xMax-.1),r.visible&&r.points.length>1&&(r.xMax>=u&&r.xMax<n.xMin&&(u=r.xMax+.1),r.xMin<=f&&r.xMin>n.xMax&&(f=r.xMin-.1));u!==n.xAxis.visibleRange.min&&(u=Math.abs(n.xMin-u)/2);f!==n.xAxis.visibleRange.max&&(f=Math.abs(n.xMax-f)/2)}if(t>=n.xMin-u&&t<=n.xMax+f)for(s=0;s<l;s++)h=c[s],(null==e||Math.abs(h-t)<Math.abs(e-t))&&(e=h);return-1!==n.xData.indexOf(e)?e:null},n.prototype.binarySearch=function(n,t){for(var i,r=0,u=t.length,f=-1,e=!1;!1===e&&r<=u;)t[i=Math.floor((r+u)/2)].xValue===n?(e=!0,f=i):t[i].xValue>n?u=i-1:r=i+1;return-1!==f?t[f]:null},n.prototype.getClosestX=function(n,t,i){var e,r=t.clipRect,f,u;return n.mouseX<=r.x+r.width&&n.mouseX>=r.x&&(e=n.requireInvertedAxis?uc(n.mouseY-r.y,r.height,t.xAxis):rc(n.mouseX-r.x,r.width,t.xAxis)),f=this.getClosest(t,e,i),u=(f||0===f)&&t.points.length>0?this.binarySearch(f,aw(t.points,["xValue"])):null,u&&u.visible&&"Cartesian"===this.chart.chartAreaType&&("Indicator"===t.category&&"Histogram"===t.name||u.symbolLocations&&u.symbolLocations.length>0&&u.symbolLocations[0].x>=0&&u.symbolLocations[0].x<=r.width)?new io(u,t):null},n.prototype.mergeXvalues=function(n){if(n.length&&(!this.commonXvalues.length||this.commonXvalues.length!==n[0].xData.length)){this.commonXvalues=n[0].xData;for(var t=1;t<n.length;t++)this.commonXvalues=this.getDistinctValues(this.commonXvalues,n[t].xData)}return this.commonXvalues},n.prototype.commonXValue=function(n){for(var r,i,u=[],t=0;t<n.length;t++)for(r=0;n[t].points&&r<n[t].points.length;r++)i=n[t].points[r],i&&(0===i.index||i.index===n[t].points.length-1||i.symbolLocations&&i.symbolLocations.length>0)&&u.push(i.xValue);return u},n.prototype.getDistinctValues=function(n,t){var i,u,f,r;for(void 0===n&&(n=[]),void 0===t&&(t=[]),u={},f=[],i=0;i<n.length;i++)u[r=n[i]]||(u[r]=!0,f.push(r));for(i=0;i<t.length;i++)u[r=t[i]]||(u[r]=!0,f.push(r));return f},n.prototype.findMouseValues=function(n,t,i){t.requireInvertedAxis?(i.valueY=(1-ut(n.point.xValue,n.series.xAxis))*n.series.xAxis.rect.height+n.series.xAxis.rect.y,i.valueX=t.mouseX,t.crosshair.snapToData&&("BoxAndWhisker"===n.series.type&&n.point.regions.length?i.valueX=n.point.regions[0].x+n.series.clipRect.x:t.tooltip.shared?t.crosshairModule.valueX=n.point.symbolLocations[0].x+n.series.clipRect.x:i.valueX=n.point.symbolLocations[0].x+n.series.clipRect.x)):(i.valueX="PolarRadar"===t.chartAreaType?nu(n.point.xValue,n.series.xAxis)*n.series.xAxis.rect.width+n.series.xAxis.rect.x:"TrendLine"===n.series.category&&t.tooltip.shared?i.valueX:ut(n.point.xValue,n.series.xAxis)*n.series.xAxis.rect.width+n.series.xAxis.rect.x,i.valueY=t.mouseY,t.crosshair.snapToData&&(i.valueY="BoxAndWhisker"===n.series.type&&n.point.regions.length?n.point.regions[0].y+n.series.clipRect.y:n.point.symbolLocations[0].y+n.series.clipRect.y))},n}(),of=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),f=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},hv=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return of(i,n),f([t.Property(!1)],i.prototype,"enable",void 0),f([t.Complex({size:null,color:null,fontStyle:null,fontWeight:null,fontFamily:null},oi)],i.prototype,"font",void 0),f([t.Property(null)],i.prototype,"background",void 0),f([t.Complex({},yt)],i.prototype,"border",void 0),f([t.Property("")],i.prototype,"lineColor",void 0),f([t.Property(1)],i.prototype,"lineWidth",void 0),f([t.Property("")],i.prototype,"dashArray",void 0),f([t.Property(5)],i.prototype,"rx",void 0),f([t.Property(5)],i.prototype,"ry",void 0),i}(t.ChildProperty),pb=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return of(i,n),f([t.Property(!1)],i.prototype,"visible",void 0),f([t.Property(!0)],i.prototype,"showZero",void 0),f([t.Property(null)],i.prototype,"name",void 0),f([t.Property("transparent")],i.prototype,"fill",void 0),f([t.Property(null)],i.prototype,"format",void 0),f([t.Property(1)],i.prototype,"opacity",void 0),f([t.Property(0)],i.prototype,"angle",void 0),f([t.Property(!1)],i.prototype,"enableRotation",void 0),f([t.Property("Auto")],i.prototype,"position",void 0),f([t.Property(5)],i.prototype,"rx",void 0),f([t.Property(5)],i.prototype,"ry",void 0),f([t.Property("Center")],i.prototype,"alignment",void 0),f([t.Complex({width:null,color:null},yt)],i.prototype,"border",void 0),f([t.Complex({left:5,right:5,top:5,bottom:5},lr)],i.prototype,"margin",void 0),f([t.Complex({size:null,color:null,fontStyle:null,fontWeight:null,fontFamily:null},oi)],i.prototype,"font",void 0),f([t.Property(null)],i.prototype,"template",void 0),f([t.Property("Hide")],i.prototype,"labelIntersectAction",void 0),i}(t.ChildProperty),us=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return of(i,n),f([t.Property(!1)],i.prototype,"visible",void 0),f([t.Property(null)],i.prototype,"shape",void 0),f([t.Property("")],i.prototype,"imageUrl",void 0),f([t.Property(5)],i.prototype,"height",void 0),f([t.Property(!1)],i.prototype,"isFilled",void 0),f([t.Property(5)],i.prototype,"width",void 0),f([t.Complex({width:2,color:null},yt)],i.prototype,"border",void 0),f([t.Complex({x:0,y:0},cp)],i.prototype,"offset",void 0),f([t.Property(null)],i.prototype,"fill",void 0),f([t.Property(!0)],i.prototype,"allowHighlight",void 0),f([t.Property(1)],i.prototype,"opacity",void 0),f([t.Complex({},pb)],i.prototype,"dataLabel",void 0),i}(t.ChildProperty),wb=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return of(i,n),f([t.Property(null)],i.prototype,"fill",void 0),f([t.Property(1)],i.prototype,"width",void 0),f([t.Property("0")],i.prototype,"dashArray",void 0),f([t.Complex(null,us)],i.prototype,"marker",void 0),f([t.Property(!0)],i.prototype,"showAxis",void 0),i}(t.ChildProperty),uo=function(){return function(){this.symbolLocations=null;this.regions=null;this.percentage=null;this.regionData=null;this.isSelect=!1;this.marker={visible:!1};this.isPointInRange=!0;this.verticalError=null;this.verticalNegativeError=null;this.horizontalError=null;this.horizontalNegativeError=null;this.verticalPositiveError=null;this.horizontalPositiveError=null}}(),cv=function(n){function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.clipRect=new i.Rect(0,0,0,0),t}return of(r,n),r.prototype.setDataSource=function(n,t){n&&(this.points=n.points);t.trendLineModule.initDataSource(this);t.visibleSeriesCount++},f([t.Property("")],r.prototype,"name",void 0),f([t.Property("")],r.prototype,"dashArray",void 0),f([t.Property(!0)],r.prototype,"visible",void 0),f([t.Property("Linear")],r.prototype,"type",void 0),f([t.Property(2)],r.prototype,"period",void 0),f([t.Property(2)],r.prototype,"polynomialOrder",void 0),f([t.Property(0)],r.prototype,"backwardForecast",void 0),f([t.Property(0)],r.prototype,"forwardForecast",void 0),f([t.Complex({},au)],r.prototype,"animation",void 0),f([t.Complex({},us)],r.prototype,"marker",void 0),f([t.Property(!0)],r.prototype,"enableTooltip",void 0),f([t.Property(null)],r.prototype,"intercept",void 0),f([t.Property("")],r.prototype,"fill",void 0),f([t.Property(1)],r.prototype,"width",void 0),f([t.Property("SeriesType")],r.prototype,"legendShape",void 0),f([t.Complex({},lu)],r.prototype,"accessibility",void 0),r}(t.ChildProperty),bb=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return of(i,n),f([t.Property(1)],i.prototype,"width",void 0),f([t.Property(10)],i.prototype,"length",void 0),f([t.Property(null)],i.prototype,"color",void 0),f([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),kb=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return of(i,n),f([t.Property(null)],i.prototype,"value",void 0),f([t.Property(null)],i.prototype,"color",void 0),f([t.Property("0")],i.prototype,"dashArray",void 0),i}(t.ChildProperty),db=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return of(i,n),f([t.Property(!1)],i.prototype,"visible",void 0),f([t.Property("Fixed")],i.prototype,"type",void 0),f([t.Property("Both")],i.prototype,"direction",void 0),f([t.Property("Vertical")],i.prototype,"mode",void 0),f([t.Property(null)],i.prototype,"color",void 0),f([t.Property(1)],i.prototype,"verticalError",void 0),f([t.Property(1)],i.prototype,"width",void 0),f([t.Property(1)],i.prototype,"horizontalError",void 0),f([t.Property(3)],i.prototype,"verticalPositiveError",void 0),f([t.Property(3)],i.prototype,"verticalNegativeError",void 0),f([t.Property(1)],i.prototype,"horizontalPositiveError",void 0),f([t.Property(1)],i.prototype,"horizontalNegativeError",void 0),f([t.Complex(null,bb)],i.prototype,"errorBarCap",void 0),f([t.Property("")],i.prototype,"errorBarColorMapping",void 0),i}(t.ChildProperty),lv=function(n){function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.rangeColorPoints=[],t.isAdvancedColor=void 0,t.currentViewData=[],t.clipRect=new i.Rect(0,0,0,0),t.seriesType="XY",t.isRectTypeSeries=!1,t.removedPointIndex=null,t.isLegendClicked=!1,t}return of(r,n),r.prototype.processJsonData=function(){var n=0,r=new uo,u=this instanceof vt&&"Histogram"===this.type?"x":this.xName,f=this instanceof vt&&this.marker.dataLabel.name?this.marker.dataLabel.name:"",i;if(this instanceof vt&&("Waterfall"!==this.type&&"Histogram"!==this.type||(this.currentViewData=this.chart[et(this.type)+"SeriesModule"].processInternalData(t.extend([],this.currentViewData,null,!0),this)),"Pareto"===this.category&&(this.currentViewData=t.extend([],this.currentViewData,null,!0),"Line"===this.type&&(this.currentViewData=this.chart.paretoSeriesModule.performCumulativeCalculation(this.currentViewData,this))),this.isRectTypeSeries=this.type.indexOf("Column")>-1||this.type.indexOf("Bar")>-1||this.type.indexOf("Histogram")>-1),i=(this.currentViewData||[]).length,this.points=[],this.xMin=1/0,this.xMax=-1/0,this.yMin=1/0,this.yMax=-1/0,this.sizeMax=-1/0,this.getSeriesType(),"Category"===this.xAxis.valueType)for(;n<i;)this.pushCategoryPoint(r,n,f,u),n++;else if(this.xAxis.valueType.indexOf("DateTime")>-1)for(var e={skeleton:"full",type:"dateTime"},o=this.chart.intl.getDateParser(e),s=this.chart.intl.getDateFormat(e);n<i;)this.pushDateTimePoint(r,n,f,u,o,s),n++;else for(;n<i;)this.pushDoublePoint(r,n,f,u),n++;this.updateSplineValue();this.updateYAxisForErrorBars();this instanceof vt&&"Waterfall"===this.type&&t.isNullOrUndefined(this.yAxis.minimum)&&(this.yMin=Math.min.apply(Math,this.chart.waterfallSeriesModule.cumulativeSums))},r.prototype.updateYAxisForErrorBars=function(){var u,n,f,r;if(this instanceof vt&&this.chart.errorBarModule){if(u=void 0,n=void 0,this.errorBar.verticalError)for(f=0;f<this.points.length;f++){for(var i=[],o=[],e=0;e<this.points.length;e++)r=this.points[e],r.verticalError&&(i.push(r.verticalError),o.push(r.yValue-r.verticalError));u=i&&i.length>0?Math.max.apply(Math,i):0;n=i&&i.length>0?Math.min.apply(Math,o):0}this.yMax+=!isNaN(u)&&t.isNullOrUndefined(this.yAxis.maximum)?u:0;this.yMin=!isNaN(n)&&n<this.yMin&&n<0&&t.isNullOrUndefined(this.yAxis.minimum)?n:this.yMin}},r.prototype.pushCategoryPoint=function(n,t,i,r){n=this.dataPoint(t,i,r);this.pushCategoryData(n,t,n.x);this.pushData(n,t);this.setEmptyPoint(n,t);this.rangeColorsInterior(n)},r.prototype.pushDoublePoint=function(n,t,i,r){(n=this.dataPoint(t,i,r)).xValue=n.x;this.pushData(n,t);this.setEmptyPoint(n,t)},r.prototype.pushDateTimePoint=function(n,i,r,u,f,e){n=this.dataPoint(i,r,u);t.isNullOrUndefined(n.x)||""===n.x?n.visible=!1:(n.x=new Date(gt.DataUtil.parse.parseJson({val:n.x}).val),"DateTime"===this.xAxis.valueType?n.xValue=Date.parse(n.x.toString()):this.chart.isBlazor?this.pushCategoryData(n,i,Date.parse(n.x.toString()).toString()):this.pushCategoryData(n,i,Date.parse(f(e(n.x))).toString()),this.pushData(n,i),this.setEmptyPoint(n,i))},r.prototype.updateSplineValue=function(){if(this instanceof vt&&(!this.chart.stockChart||"DateTimeCategory"!==this.xAxis.valueType)){if(this.type.indexOf("Spline")>-1||this.drawType.indexOf("Spline")>-1&&"PolarRadar"===this.chart.chartAreaType){var n=this.type.indexOf("Area")>-1||this.drawType.indexOf("Area")>-1,t=this.type.indexOf("Range")>-1;this.chart["spline"+(n?t?"RangeArea":"Area":"")+"SeriesModule"].findSplinePoint(this)}else this.type.indexOf("Histogram")>-1&&(this.xAxis.maximum||this.xAxis.minimum)&&this.chart.histogramSeriesModule.calculateBinValues(this);this.type.indexOf("Histogram")>-1&&1===this.points.length&&(this.xMin=this.xMin-this.histogramValues.binWidth,this.xMax=this.xMax+this.histogramValues.binWidth)}},r.prototype.rangeColorsInterior=function(n){this.chart.rangeColorSettings&&this.chart.rangeColorSettings.length>0&&1===this.chart.visibleSeries.length&&("Column"===this.chart.series[0].type||"Bar"===this.chart.series[0].type||"Scatter"===this.chart.series[0].type||"Bubble"===this.chart.series[0].type)&&(this.rangeColorPoints[n.interior]?void 0!==this.rangeColorPoints[n.interior]&&this.rangeColorPoints[n.interior].push(n):this.rangeColorPoints[n.interior]=[])},r.prototype.pushData=function(n,t){n.index=t;n.yValue=n.y;n.series=this;this.xMin=Math.min(this.xMin,n.xValue);this.xMax=Math.max(this.xMax,n.xValue);this.xData.push(n.xValue)},r.prototype.dataPoint=function(n,i,r){this.points[n]=new uo;var u=this.points[n],f=this.currentViewData[n],e=this.enableComplexProperty?t.getValue:this.getObjectValue;return u.x=e(r,f),u.high=e(this.high,f),u.low=e(this.low,f),u.open=e(this.open,f),u.close=e(this.close,f),u.volume=e(this.volume,f),u.interior=e(this.pointColorMapping,f),this instanceof vt&&(this.errorBar.visible&&(u.errorBarColor=e(this.errorBar.errorBarColorMapping,f),u.verticalError="string"==typeof this.errorBar.verticalError?e(this.errorBar.verticalError,f):this.errorBar.verticalError,u.horizontalError="string"==typeof this.errorBar.horizontalError?e(this.errorBar.horizontalError,f):this.errorBar.horizontalError,u.verticalNegativeError="string"==typeof this.errorBar.verticalNegativeError?e(this.errorBar.verticalNegativeError,f):this.errorBar.verticalNegativeError,u.verticalPositiveError="string"==typeof this.errorBar.verticalPositiveError?e(this.errorBar.verticalPositiveError,f):this.errorBar.verticalPositiveError,u.horizontalNegativeError="string"==typeof this.errorBar.horizontalNegativeError?e(this.errorBar.horizontalNegativeError,f):this.errorBar.horizontalNegativeError,u.horizontalPositiveError="string"==typeof this.errorBar.horizontalPositiveError?e(this.errorBar.horizontalPositiveError,f):this.errorBar.horizontalPositiveError),u.y=e(this.yName,f),u.size=e(this.size,f),u.text=e(i,f),u.tooltip=e(this.tooltipMappingName,f),this.isAdvancedColorSupported()&&(this.rangeColorName=this.colorName.length>0?this.colorName:this.yName,u.colorValue=e(this.rangeColorName,f),u.interior=this.getPointFillColor(u.interior,u.colorValue))),u},r.prototype.isAdvancedColorSupported=function(){return t.isNullOrUndefined(this.isAdvancedColor)&&(this.isAdvancedColor=this.chart.rangeColorSettings&&this.chart.rangeColorSettings.length>0&&("Column"===this.chart.series[0].type||"Bar"===this.chart.series[0].type||"Scatter"===this.chart.series[0].type||"Bubble"===this.chart.series[0].type)?!0:!1),this.isAdvancedColor},r.prototype.getPointFillColor=function(n,t){var f=n,r,u,i;if(t&&this.chart.rangeColorSettings&&this.chart.rangeColorSettings.length>0)for(r=0,u=this.chart.rangeColorSettings;r<u.length;r++)i=u[r],t>=i.start&&t<=i.end&&(f=i.colors.length>1?lb(i,t):i.colors[0]);return f},r.prototype.getObjectValue=function(n,t){return t[n]},r.prototype.setEmptyPoint=function(n,i){if(!this.findVisibility(n))return n.visible=!0,null;switch(n.isEmpty=!0,this instanceof vt&&n.isPointInRange?this.emptyPointSettings.mode:"Drop"){case"Zero":n.visible=!0;this instanceof vt&&this.seriesType.indexOf("HighLow")>-1?(n.high=n.low=0,this.seriesType.indexOf("HighLowOpenClose")>-1&&(n.open=n.close=0)):n.y=n.yValue=this.yData[i]=0;break;case"Average":this instanceof vt&&(this.seriesType.indexOf("HighLow")>-1?(n.high=t.isNullOrUndefined(n.high)||isNaN(+n.high)?this.getAverage(this.high,i):n.high,n.low=t.isNullOrUndefined(n.low)||isNaN(+n.low)?this.getAverage(this.low,i):n.low,this.seriesType.indexOf("HighLowOpenClose")>-1&&(n.open=t.isNullOrUndefined(n.open)||isNaN(+n.open)?this.getAverage(this.open,i):n.open,n.close=t.isNullOrUndefined(n.close)||isNaN(+n.close)?this.getAverage(this.close,i):n.close)):n.y=n.yValue=this.yData[i]=this.getAverage(this.yName,i));n.visible=!0;break;case"Drop":case"Gap":this.yData[i]=null;n.visible=!1}},r.prototype.findVisibility=function(n){var i,f=this instanceof vt?this.seriesType:"HighLowOpenClose",r=this.yAxis.minimum,u=this.yAxis.maximum;switch(f){case"XY":return"PolarRadar"===this.chart.chartAreaType&&(!t.isNullOrUndefined(r)&&n.yValue<r||!t.isNullOrUndefined(u)&&n.yValue>u)?(n.isPointInRange=!1,!0):(this.setXYMinMax(n.yValue),this.yData.push(n.yValue),this instanceof vt&&"Bubble"===this.type&&(this.sizeMax=Math.max(this.sizeMax,t.isNullOrUndefined(n.size)||isNaN(+n.size)?this.sizeMax:n.size)),t.isNullOrUndefined(n.x)||t.isNullOrUndefined(n.y)||isNaN(+n.y));case"HighLow":return this.setHiloMinMax(n.high,n.low),t.isNullOrUndefined(n.x)||t.isNullOrUndefined(n.low)||isNaN(+n.low)||t.isNullOrUndefined(n.high)||isNaN(+n.high);case"HighLowOpenClose":return this.setHiloMinMax(n.high,n.low),t.isNullOrUndefined(n.x)||t.isNullOrUndefined(n.low)||isNaN(+n.low)||t.isNullOrUndefined(n.open)||isNaN(+n.open)||t.isNullOrUndefined(n.close)||isNaN(+n.close)||t.isNullOrUndefined(n.high)||isNaN(+n.high);case"BoxPlot":return i=(n.y||[null]).filter(function(n){return!t.isNullOrUndefined(n)&&!isNaN(n)}).sort(function(n,t){return n-t}),n.y=i,this.yMin=Math.min(this.yMin,Math.min.apply(Math,i)),this.yMax=Math.max(this.yMax,Math.max.apply(Math,i)),!i.length}},r.prototype.setXYMinMax=function(n){var i,r="Logarithmic"===this.yAxis.valueType||"Logarithmic"===this.xAxis.valueType,u=n<0||"None"===this.yAxis.rangePadding;i=this.isRectTypeSeries&&!nr(this.yAxis)?r||u?n:0:n;this.yMin=r?Math.min(this.yMin,t.isNullOrUndefined(i)||isNaN(i)||0===i||"0"===i.toString()||""===i.toString()?this.yMin:i):Math.min(this.yMin,t.isNullOrUndefined(i)||isNaN(i)?this.yMin:i);this.yMax=Math.max(this.yMax,t.isNullOrUndefined(n)||isNaN(n)?this.yMax:n)},r.prototype.setHiloMinMax=function(n,i){this.yMin=Math.min(this.yMin,Math.min(t.isNullOrUndefined(i)||isNaN(i)?this.yMin:i,t.isNullOrUndefined(n)||isNaN(n)?this.yMin:n));this.yMax=Math.max(this.yMax,Math.max(t.isNullOrUndefined(i)||isNaN(i)?this.yMax:i,t.isNullOrUndefined(n)||isNaN(n)?this.yMax:n))},r.prototype.getSeriesType=function(){var n,t;if(this instanceof vt&&(t="PolarRadar"===this.chart.chartAreaType?this.drawType:this.type,t))switch(t){case"RangeColumn":case"RangeArea":case"RangeStepArea":case"SplineRangeArea":case"Hilo":n="HighLow";break;case"HiloOpenClose":case"Candle":n="HighLowOpenClose";break;case"BoxAndWhisker":n="BoxPlot";break;default:n="XY"}this.seriesType=n},r.prototype.pushCategoryData=function(n,t,i){if(!this.chart.tooltip.shared&&!this.visible)return null;this.xAxis.isIndexed?(this.xAxis.labels[t]?this.xAxis.labels[t]+=", "+i:this.xAxis.labels.push(i),n.xValue=t):(void 0===this.xAxis.indexLabels[i]&&(this.xAxis.indexLabels[i]=this.xAxis.labels.length,this.xAxis.labels.push(i)),n.xValue=this.xAxis.indexLabels[i])},r.prototype.getAverage=function(n,t,i){return void 0===i&&(i=this.currentViewData),((i[t-1]&&i[t-1][n]||0)+(i[t+1]&&i[t+1][n]||0))/2},r.prototype.refreshDataManager=function(n){var i,r=this;this.chart=n;(i=n.isAngular?Object.keys(this.dataSource).length?this.dataSource:n.dataSource:this.dataSource||n.dataSource)instanceof gt.DataManager||!t.isNullOrUndefined(this.query)?this.dataModule.getData(this.dataModule.generateQuery().requiresCount()).then(function(n){return r.dataManagerSuccess(n)}):this.dataManagerSuccess({result:i,count:i.length},!1)},r.prototype.dataManagerSuccess=function(n,t){if(void 0===t&&(t=!0),this.currentViewData=n.count?n.result:[],this.chart.allowServerDataBinding=!1,this instanceof vt){this.chart.stockChart&&(this.chart.stockChart.series[this.index].localData=this.currentViewData);var i={name:re,series:this,data:this.currentViewData,fill:this.interior};this.chart.trigger(re,i);this.interior=i.fill;this.currentViewData=i.data}!this.chart.stockChart||this instanceof vt||(this.currentViewData=this.chart.stockChart.findCurrentData(this.chart.stockChart.series[0].localData,this.chart.stockChart.series[0].xName));this.processJsonData();this.recordsCount=n.count;this.refreshChart(t);this.currentViewData=null},r.prototype.refreshChart=function(n){var t=this.chart,i,r;if(this instanceof vt&&(t.visibleSeriesCount+=n?1:0),t.refreshTechnicalIndicator(this),this instanceof vt&&"TrendLine"!==this.category)for(i=0,r=this.trendlines;i<r.length;i++)r[i].setDataSource(this,t);t.visibleSeries.length===t.visibleSeriesCount&&(t.refreshBound(),t.trigger("loaded",{chart:t.isBlazor?{}:t}),this.chart.stockChart&&this.chart.stockChart.initialRender&&(this.chart.stockChart.initialRender=!1,this.chart.stockChart.stockChartDataManagerSuccess()));this instanceof vt&&(t.visibleSeriesCount+=n?0:1)},f([t.Property("")],r.prototype,"xName",void 0),f([t.Property("")],r.prototype,"colorName",void 0),f([t.Property("")],r.prototype,"high",void 0),f([t.Property("")],r.prototype,"low",void 0),f([t.Property("")],r.prototype,"open",void 0),f([t.Property("")],r.prototype,"close",void 0),f([t.Property("")],r.prototype,"volume",void 0),f([t.Property("")],r.prototype,"pointColorMapping",void 0),f([t.Property(!0)],r.prototype,"visible",void 0),f([t.Property(null)],r.prototype,"xAxisName",void 0),f([t.Property(null)],r.prototype,"yAxisName",void 0),f([t.Complex(null,au)],r.prototype,"animation",void 0),f([t.Property(null)],r.prototype,"fill",void 0),f([t.Property(1)],r.prototype,"width",void 0),f([t.Property("")],r.prototype,"dashArray",void 0),f([t.Property("")],r.prototype,"dataSource",void 0),f([t.Property()],r.prototype,"query",void 0),f([t.Collection([],kb)],r.prototype,"segments",void 0),f([t.Property("X")],r.prototype,"segmentAxis",void 0),f([t.Property(!1)],r.prototype,"enableComplexProperty",void 0),r}(t.ChildProperty),vt=function(n){function u(t,i,r,u){var f=n.call(this,t,i,r,u)||this;return f.visibleSeriesCount=0,f.category="Series",f.isRectSeries=!1,f.drawPoints=[],f.lowDrawPoints=[],f.delayedAnimation=!1,f.rangeColorName=f.colorName.length>0?f.colorName:f.yName,f.currentData=[],f}return of(u,n),u.prototype.refreshAxisLabel=function(){var n,i,u,t;if(-1===this.xAxis.valueType.indexOf("Category"))return null;this.xAxis.labels=[];this.xAxis.indexLabels={};for(var f={skeleton:"full",type:"dateTime"},o=this.chart.intl.getDateParser(f),s=this.chart.intl.getDateFormat(f),r=0,e=this.xAxis.series;r<e.length;r++)if(n=e[r],n.visible&&"TrendLine"!==n.category)for(n.xMin=1/0,n.xMax=-1/0,i=0,u=n.points;i<u.length;i++)t=u[i],n.pushCategoryData(t,t.index,"DateTimeCategory"===this.xAxis.valueType?Date.parse(o(s(t.x))).toString():t.x),n.xMin=Math.min(n.xMin,t.xValue),n.xMax=Math.max(n.xMax,t.xValue)},u.prototype.findSeriesCollection=function(n,t,i){for(var u,o,f,h,r,c=[],e=0,l=t.axes;e<l.length;e++)for(u=0,o=l[e].series;u<o.length;u++)for(var v=o[u],s=0,a=n.axes;s<a.length;s++)for(f=0,h=a[s].series;f<h.length;f++)r=h[f],r===v&&r.visible&&this.rectSeriesInChart(r,i)&&c.push(r);return c},u.prototype.rectSeriesInChart=function(n,t){var i=n.type.toLowerCase();return-1!==i.indexOf("column")||-1!==i.indexOf("bar")||-1!==i.indexOf("histogram")||-1!==i.indexOf("hiloopenclose")||-1!==i.indexOf("candle")||-1!==i.indexOf("pareto")||-1!==i.indexOf("hilo")||-1!==n.drawType.indexOf("Column")||-1!==i.indexOf("waterfall")||-1!==i.indexOf("boxandwhisker")||t},u.prototype.calculateStackedValue=function(n,t){for(var e,i=0,r=t.columns;i<r.length;i++)for(var o=r[i],u=0,f=t.rows;u<f.length;u++)e=f[u],this.calculateStackingValues(this.findSeriesCollection(o,e,!0),n)},u.prototype.calculateStackingValues=function(n,t){var c,o,f,l,u,g=[],h=[],a=[],nt=[],w,v,i,r,rt,k,d;t&&(nt=this.findFrequencies(n));for(var s=[],e=[],p=0;p<n.length;p++)s[(i=n[p]).stackingGroup]?void 0!==s[i.stackingGroup]&&s[i.stackingGroup].push(i):(s[i.stackingGroup]=[],s[i.stackingGroup].push(i));for(w=Object.keys(s),v=0;v<w.length;v++){for(var tt=[],y=[],b=0,it=s[w[v]];b<it.length;b++)if(-1!==(i=it[b]).type.indexOf("Stacking")||-1!==i.drawType.indexOf("Stacking")&&"PolarRadar"===i.chart.chartAreaType){for(h[f=-1!==i.type.indexOf("StackingArea")?"StackingArea100":-1!==i.type.indexOf("StackingLine")?"StackingLine100":i.stackingGroup]||(h[f]=[],a[f]=[]),g=i.yData,c=[],o=[],tt.push(i),r=0,rt=(e=vu(i)).length;r<rt;r++)l=0,u=+g[r],void 0===h[f][e[r].xValue]&&(h[f][e[r].xValue]=0),void 0===a[f][e[r].xValue]&&(a[f][e[r].xValue]=0),t?(u=u/nt[f][e[r].xValue]*100,u=isNaN(u)?0:u,e[r].percentage=+u.toFixed(2)):y[r]=y[r]?y[r]+Math.abs(u):Math.abs(u),u>=0?(l=h[f][e[r].xValue],h[f][e[r].xValue]+=u):(l=a[f][e[r].xValue],a[f][e[r].xValue]+=u),c.push(l),o.push(u+l),t&&o[r]>100&&(o[r]=100);i.stackedValues=new ov(c,o);k="Logarithmic"===i.yAxis.valueType;d=-1!==i.type.indexOf("Column")||-1!==i.type.indexOf("Bar");i.yMin=k&&d&&i.yMin<1?i.yMin:i.yAxis.startFromZero&&"Auto"===i.yAxis.rangePadding&&i.yMin>=0?0:parseFloat(Math.min.apply(0,t?c:o).toFixed(10));i.yMax=Math.max.apply(0,o);i.yMin>Math.min.apply(0,o)&&(i.yMin=t?-100:k&&d&&i.yMin<1?i.yMin:Math.min.apply(0,o));i.yMax<Math.max.apply(0,c)&&(i.yMax=0)}this.findPercentageOfStacking(tt,y,t)}},u.prototype.findPercentageOfStacking=function(n,t,i){for(var s,u,o,f,r=0,e=n;r<e.length;r++){if(s=e[r],i)return null;for(u=0,o=vu(s);u<o.length;u++)f=o[u],f.percentage=Math.abs(+(f.y/t[f.index]*100).toFixed(2))}},u.prototype.findFrequencies=function(n){for(var t,i,s,u,r=[],f=[],e=0,o=n;e<o.length;e++)if(t=o[e],t.yAxis.isStack100=-1!==t.type.indexOf("100"),f=vu(t),-1!==t.type.indexOf("Stacking"))for(r[u=-1!==t.type.indexOf("StackingArea")?"StackingArea100":-1!==t.type.indexOf("StackingLine")?"StackingLine100":t.stackingGroup]||(r[u]=[]),i=0,s=f.length;i<s;i++)void 0===r[u][f[i].xValue]&&(r[u][f[i].xValue]=0),t.yData[i]>0?r[u][f[i].xValue]+=t.yData[i]:r[u][f[i].xValue]-=t.yData[i];return r},u.prototype.renderSeries=function(n){var i,t,f,e,r;if(this.chart.stockChart&&"DateTimeCategory"===this.xAxis.valueType){for(i=0;i<this.points.length;i++)t=this.xAxis.labels.indexOf(Date.parse(this.points[i].x.toString()).toString()),this.points[i].xValue=t,n.series.length>1&&(this.xData[i]=t,this.xMin=this.xMin>t?t:this.xMin,this.xMax=this.xMax<t?t:this.xMax);this instanceof u&&this.type.indexOf("Spline")>-1&&(f=this.type.indexOf("Area")>-1,e=this.type.indexOf("Range")>-1,this.chart["spline"+(f?e?"RangeArea":"Area":"")+"SeriesModule"].findSplinePoint(this))}r=et(this.type);n[(r=r.replace("100",""))+"SeriesModule"]&&("Indicator"!==this.category&&"TrendLine"!==this.category&&this.createSeriesElements(n),this.visiblePoints=vu(this),this.chart.enableCanvas?(this.chart.canvasRender.ctx.save(),this.chart.canvasRender.ctx.beginPath(),n.requireInvertedAxis?this.chart.canvasRender.ctx.rect(this.yAxis.rect.x,this.xAxis.rect.y,this.yAxis.rect.width,this.xAxis.rect.height):this.chart.canvasRender.ctx.rect(this.xAxis.rect.x,this.yAxis.rect.y,this.xAxis.rect.width,this.yAxis.rect.height),this.chart.canvasRender.ctx.clip(),n[r+"SeriesModule"].render(this,this.xAxis,this.yAxis,n.requireInvertedAxis),this.chart.canvasRender.ctx.restore()):n[r+"SeriesModule"].render(this,this.xAxis,this.yAxis,n.requireInvertedAxis),"Indicator"!==this.category&&(this.errorBar.visible&&this.chart.errorBarModule.render(this),this.marker.dataLabel.visible&&(this.chart.enableCanvas?(this.chart.canvasRender.ctx.save(),this.chart.canvasRender.ctx.beginPath(),n.requireInvertedAxis?this.chart.canvasRender.ctx.rect(this.yAxis.rect.x,this.xAxis.rect.y,this.yAxis.rect.width,this.xAxis.rect.height):this.chart.canvasRender.ctx.rect(this.xAxis.rect.x,this.yAxis.rect.y,this.xAxis.rect.width,this.yAxis.rect.height),this.chart.canvasRender.ctx.clip(),n.dataLabelModule.render(this,this.chart,this.marker.dataLabel),this.chart.canvasRender.ctx.restore()):n.dataLabelModule.render(this,this.chart,this.marker.dataLabel)),!this.chart.enableCanvas&&this.lastValueLabel.enable&&n.lastValueLabelModule.render(this,this.chart,this.lastValueLabel),this.appendSeriesElement(n.seriesElements,n)),this.chart.enableCanvas||this.performAnimation(n,r,this.errorBar,this.marker,this.marker.dataLabel))},u.prototype.createSeriesElements=function(n){var s,h;if("Indicator"!==this.category){var u=n.element.id,o=this.marker.border.width+8+5,e="Bubble"===this.type||"Scatter"===this.type||!this.marker.visible&&n.tooltip.shared&&n.enableCanvas?n.svgRenderer:n.renderer,t=void 0===this.index?this.category:this.index,i=void 0,r=void 0,f=void 0;("Scatter"===this.type||"Scatter"===this.drawType?(i=(this.marker.height+o)/2,r=(this.marker.width+o)/2):(i=0,r=0),"PolarRadar"===n.chartAreaType)?(s="Scatter"===this.drawType?Math.max(this.marker.width,this.marker.height):0,f=new ef(u+"_ChartSeriesClipRect_"+t,"transparent",{width:1,color:"Gray"},1,this.clipRect.width/2+this.clipRect.x,this.clipRect.height/2+this.clipRect.y,n.radius+s),this.clipRectElement=eu(n.redraw,f,e,"drawCircularClipPath")):(f=new ft(u+"_ChartSeriesClipRect_"+t,"transparent",{width:1,color:"Gray"},1,{x:0===this.xAxis.columnIndex?-r:0,y:this.yAxis.rowIndex===n.rows.length-1?-i:0,width:this.clipRect.width+(this.xAxis.columnIndex===n.columns.length-1?2*r:r),height:this.clipRect.height+(0===this.yAxis.rowIndex?2*i:i)}),this.clipRectElement=eu(n.redraw,f,e));h="Cartesian"===n.chartAreaType?"translate("+this.clipRect.x+","+this.clipRect.y+")":"";this.symbolElement=null;this.seriesElement=e.createGroup({id:u+"SeriesGroup"+t,transform:h,"clip-path":"url(#"+u+"_ChartSeriesClipRect_"+t+")"});this.seriesElement&&(this.seriesElement.setAttribute("role",this.accessibility.accessibilityRole?this.accessibility.accessibilityRole:"region"),this.seriesElement.setAttribute("tabindex",this.accessibility.focusable?String(this.accessibility.tabIndex):"-1"),this.seriesElement.style.outline="none",this.seriesElement.setAttribute("aria-label",this.accessibility.accessibilityDescription?this.accessibility.accessibilityDescription:this.name+","+this.type+" series with "+this.points.length+" data points"),this.seriesElement.setAttribute("aria-hidden","false"));this.chart.enableCanvas&&"Bubble"!==this.type||(this.seriesElement.setAttribute("tabindex",this.accessibility.focusable?0===t?"0":this.checkTabindex(n.visibleSeries,t)?"":String(this.accessibility.tabIndex):"-1"),this.seriesElement.style.outline="none",this.seriesElement.appendChild(this.clipRectElement))}},u.prototype.checkTabindex=function(n,t){for(var i=0;i<t;i++)if(n[i].visible)return!0;return!1},u.prototype.appendSeriesElement=function(n,t){var r=this.marker,u=r.dataLabel,f=this.lastValueLabel,i=t.redraw;"TrendLine"!==this.category&&(o(t.enableCanvas,t.seriesElements,this.seriesElement,i),this.errorBar.visible&&("PolarRadar"===t.chartAreaType?o(t.enableCanvas,t.seriesElements,this.seriesElement,i):o(t.enableCanvas,t.seriesElements,this.errorBarElement,i)));r.visible&&("Cartesian"===t.chartAreaType||"Scatter"!==this.drawType&&"PolarRadar"===t.chartAreaType)&&"Scatter"!==this.type&&"Bubble"!==this.type&&"Candle"!==this.type&&"Hilo"!==this.type&&"HiloOpenClose"!==this.type&&this.symbolElement&&o(t.enableCanvas,t.seriesElements,this.symbolElement,i);u.visible&&this.textElement&&(o(t.enableCanvas,t.dataLabelElements,this.shapeElement,i),o(t.enableCanvas,t.dataLabelElements,this.textElement,i));!t.enableCanvas&&t.dataLabelElements.hasChildNodes()&&t.seriesElements.appendChild(t.dataLabelElements);f.enable&&this.lastValueLabelElement&&o(t.enableCanvas,t.lastValueLabelElements,this.lastValueLabelElement,i)},u.prototype.performAnimation=function(n,i,r,u,f){(this.animation.enable&&"Disable"!==t.animationMode||"Enable"===t.animationMode)&&n.animateSeries&&(!n.stockChart||!n.stockChart.isStockChartRendered)&&(n[i+"SeriesModule"].doAnimation(this),r.visible&&n.errorBarModule.doErrorBarAnimation(this),u.visible&&(this.isRectSeries||"Line"===this.type||"Polar"===this.type||"Radar"===this.type)&&n.markerRender.doMarkerAnimation(this),f.visible&&"edge"!==t.Browser.info.name&&!t.Browser.isIE&&n.dataLabelModule.doDataLabelAnimation(this))},u.prototype.setPointColor=function(n,t){return t=n.interior||t,n.isEmpty&&this.emptyPointSettings.fill||t},u.prototype.setBorderColor=function(n,t){return t.width=n.isEmpty&&this.emptyPointSettings.border.width||t.width,t.color=n.isEmpty&&this.emptyPointSettings.border.color||t.color,t},u.prototype.addPoint=function(n,r){var e=this.yMin,o=this.yMax,u,s,h,f,c;if(this.removeTrackballElements(),this.dataSource.push(n),"Radar"===this.type||"Polar"===this.type)return this.chart.refresh();if("Histogram"===this.type)for(this.currentViewData=this.chart[et(this.type)+"SeriesModule"].processInternalData(t.extend([],this.dataSource,null,!0),this),u=0;u<this.currentViewData.length;u++)this.updatePoint(u);else this.currentViewData=this.dataSource,s=0===this.points.length?0:this.points[this.points.length-1].index+1,this.updatePoint(s);if("Pareto"===this.category)for(h=t.extend([],this.dataSource,null,!0),f=this.chart.visibleSeries[this.index+this.chart.series.length],f.currentViewData=this.chart.paretoSeriesModule.performCumulativeCalculation(h,this),u=0;u<f.currentViewData.length;u++)f.points[u]||f.updatePoint(u),f.points[u].y=f.points[u].yValue=f.currentViewData[u][f.yName];if(this.visiblePoints.push(this.points[this.points.length-1]),this.updateSplineValue(),this.chart.calculateStackValues(),this.chart.redraw=this.chart.enableAnimation,c=this.chart.duration,this.chart.duration=t.isNullOrUndefined(r)?500:r,this.chart.animateSeries=!1,this.chart.pointsAdded=!0,this.chart.enableAnimation&&!this.isRectSeries&&"Bubble"!==this.type&&"Scatter"!==this.type&&-1===this.type.indexOf("step")&&this.marker&&this.marker.visible&&this.visible)for(u=this.points.length-2;u>=0;u--)if(this.points[u]&&!t.isNullOrUndefined(this.points[this.points.length-2].y)&&this.points[u].symbolLocations&&void 0!==this.points[u].symbolLocations[0]){this.chart.markerRender.renderMarker(this,this.points[this.points.length-2],this.points[u].symbolLocations[0],null,!0);break}this.yMin>=e&&this.yMax<=o&&(nr(this.xAxis)||(this.xAxis.baseModule.calculateRangeAndInterval(new i.Size(this.xAxis.rect.width,this.chart.availableSize.height),this.xAxis),this.xAxis.updateAxis()),this.chart.pointsAdded=!1,this.updateSeries(!0,!1));(this.yMin<e||this.yMax>o)&&(this.updateChartAxis(),this.chart.pointsAdded=!1,this.updateSeries(!0,!0));this.chart.redraw=!1;this.chart.duration=c},u.prototype.removePoint=function(n,r){var h=t.extend([],this.dataSource,null,!0),l=this.chart.duration,c,u,e,s,f;if(h.length>0&&n>=0&&n<h.length){if(h.splice(n,1),this.dataSource.splice(n,1),this.removeTrackballElements(n),"Radar"===this.type||"Polar"===this.type)return this.chart.refresh();if(this.chart.redraw=this.chart.enableAnimation,this.chart.animateSeries=!1,this.chart.pointsAdded=!0,this.chart.duration=t.isNullOrUndefined(r)?500:r,"Histogram"===this.type){for(c=this.points.length,this.points=[],this.visiblePoints=[],this.currentViewData=this.chart[et(this.type)+"SeriesModule"].processInternalData(t.extend([],this.dataSource,null,!0),this),u=0;u<this.currentViewData.length;u++)this.updatePoint(u);c>this.points.length&&(this.removedPointIndex=n)}else this.removedPointIndex=n,this.points.splice(n,1),this.visiblePoints.splice(n,1);for(this.yData=[],this.xData=[],e=this.yMin,s=this.yMax,this.yMin=1/0,this.xMin=1/0,this.yMax=-1/0,this.xMax=-1/0,this.xAxis.valueType.indexOf("Category")>-1&&(this.xAxis.labels=[],this.xAxis.indexLabels={}),0===n&&(this.chart.pointsRemoved=this.chart.enableAnimation),u=0;u<this.points.length;u++)this.updatePointsAfterRemoval(u);if("Pareto"===this.category)for(f=this.chart.visibleSeries[this.index+this.chart.series.length],f.yMin=1/0,f.xMin=1/0,f.yMax=-1/0,f.xMax=-1/0,f.points.splice(n,1),f.visiblePoints.splice(n,1),f.currentViewData=this.chart.paretoSeriesModule.performCumulativeCalculation(this.dataSource,this),u=0;u<f.currentViewData.length;u++)f.points[u].y=f.points[u].yValue=f.currentViewData[u][f.yName],f.updatePointsAfterRemoval(u);this.updateSplineValue();this.chart.calculateStackValues();nr(this.xAxis)||s!==this.yMax||e!==this.yMin?(s<this.yMax||e>this.yMin||s>this.yMax||e<this.yMin)&&(this.updateChartAxis(),this.createSeriesElements(this.chart),this.chart.pointsAdded=!1,this.updateSeries(!0,!0)):(this.xAxis.baseModule.calculateRangeAndInterval(new i.Size(this.xAxis.rect.width,this.chart.availableSize.height),this.xAxis),this.xAxis.updateAxis(),this.createSeriesElements(this.chart),this.chart.pointsAdded=!1,this.updateSeries(!0,!1))}o(this.chart.enableCanvas,this.chart.seriesElements,this.seriesElement,!0);this.chart.redraw=!1;this.chart.duration=l;this.chart.pointsRemoved=!1;this.removedPointIndex=null},u.prototype.updatePointsAfterRemoval=function(n){var t=this.points[n],i={skeleton:"full",type:"dateTime"},r=this.chart.intl.getDateParser(i),u=this.chart.intl.getDateFormat(i);"Category"===this.xAxis.valueType?this.pushCategoryData(t,n,t.x):"DateTimeCategory"===this.xAxis.valueType&&1===this.chart.series.length&&this.pushCategoryData(t,n,Date.parse(r(u(t.x))).toString());this.pushData(t,n);this.setEmptyPoint(this.points[n],n)},u.prototype.removeTrackballElements=function(n){var u,f,e,h,t,i,o,c,s;this.marker.visible&&(void 0!==n?(u=this.chart.element.id+"_Series_"+this.index+"_Point_"+n+"_Trackball_",f=r(u+"0"),f&&f.remove(),e=r(u+"1"),e&&e.remove(),(i=r(this.chart.element.id+"_Series_"+this.index+"_Point_"+n+"_Symbol"))&&i.setAttribute("visibility","visible")):(h=this.chart.element.id+"_EJ2-Trackball_Series_"+this.index+"_Point_",t=document.querySelectorAll('[class*="'+h+'"]'),t[0]&&(o=t[0].id.match(/_Point_(\d+)_/),c=o?parseInt(o[1],10):null,t[0].remove(),(i=r(this.chart.element.id+"_Series_"+this.index+"_Point_"+c+"_Symbol"))&&i.setAttribute("visibility","visible")),t[1]&&t[1].remove()));this.chart.tooltip.enable&&(this.chart.tooltipModule.previousPoints=[],s=r(this.chart.element.id+"_tooltip"),s&&s.remove())},u.prototype.setData=function(n,u){var ut=this,c,f,v,w,a,d,g,nt,p,tt,it,rt;if(!n)return null;if(c=[],this.dataSource.length===n.length)for(f=0;f<n.length;f++)(n[f][this.xName]instanceof Date?c.push(n[f][this.xName].getTime()):c.push(n[f][this.xName]),this.currentData.length<this.dataSource.length)&&(v=t.extend([],this.dataSource,null,!0),v[f][this.xName]instanceof Date?this.currentData.push(v[f][this.xName].getTime()):this.currentData.push(v[f][this.xName]));w=c.every(function(n){return-1!==ut.currentData.indexOf(n)});this.currentViewData&&(w=!0);var y=!1,b=this.yMin,k=this.yMax;if(this.yMin=1/0,this.yMax=-1/0,a=[],this.chart.dataLabelCollections=[],this.chart.rotatedDataLabelCollections=[],d=!1,g=null,this.dataSource.length===n.length&&"Radar"!==this.type&&"Polar"!==this.type&&w)if(d=!0,this.yData=[],"Histogram"===this.type&&this.dataSource.length===n.length)for(nt=this.chart[et(this.type)+"SeriesModule"].processInternalData(t.extend([],n,null,!0),this),this.currentViewData=nt,p=0;p<nt.length;p++)this.updatePoint(p);else for(f=0;f<n.length;f++){tt=n[f][this.xName];this.dataSource[f][this.xName];n[f][this.xName]instanceof Date&&(tt=n[f][this.xName].getTime(),this.dataSource[f][this.xName].getTime());this.currentData[f]!==tt&&(y=!0);var e=this.points[f],h=this.enableComplexProperty?t.getValue:this.getObjectValue,l=this.dataSource[f],s=n[f];"XY"===this.seriesType||"BoxPlot"===this.seriesType?(e.y=h(this.yName,s),"Bubble"===this.type&&l[this.size]!==s[this.size]&&(e.size=h(this.size,s)),a.push(f)):l[this.high]===s[this.high]&&l[this.low]===s[this.low]&&l[this.open]===s[this.open]&&l[this.close]===s[this.close]&&l[this.volume]===s[this.volume]||(e.high=h(this.high,s),e.low=h(this.low,s),e.open=h(this.open,s),e.close=h(this.close,s),e.volume=h(this.volume,s),a.push(f));e.yValue=e.y;e.x=h(this.xName,s);this.currentViewData||(e.index="DateTime"===this.xAxis.valueType&&"number"!=typeof e.x?this.currentData.indexOf(e.x.getTime()):this.currentData.indexOf(e.x));("Category"===this.xAxis.valueType||"DateTimeCategory"===this.xAxis.valueType)&&f<this.xAxis.visibleLabels.length&&(this.xAxis.visibleLabels[f].value=c.indexOf(this.currentData[f*this.xAxis.visibleRange.interval]),this.xAxis.labels[f]=String(c[f]));this.setEmptyPoint(e,f);this.dataSource[f]=n[f]}d?(this.chart.redraw=this.chart.enableAnimation,this.chart.animateSeries=!1,this.chart.pointsAdded=!0,it=this.chart.duration,(this.chart.duration=t.isNullOrUndefined(u)?500:u,-1!==this.type.indexOf("Stacking")&&this.chart.calculateStackValues(),this.updateSplineValue(),k===this.yMax&&b===this.yMin&&this.visible)?(this.chart.pointsAdded=!1,this.chart[et("Pareto"===this.category?"Column":this.type.replace("100",""))+"SeriesModule"].updateDirection(this,a,this.chart.requireInvertedAxis),this.lastValueLabel.enable&&this.chart.lastValueLabelModule&&(this.chart.lastValueLabelCollections=[],this.chart.lastValueLabelModule.render(this,this.chart,this.lastValueLabel,!0),this.lastValueLabelElement&&o(this.chart.enableCanvas,this.chart.lastValueLabelElements,this.lastValueLabelElement,!0)),this.chart.annotationModule&&this.chart.annotationModule.renderAnnotations(r(this.chart.element.id+"_Secondary_Element")),!nr(this.xAxis)&&y&&this.xAxis.updateAxis()):(k<this.yMax||b>this.yMin||k>this.yMax||b<this.yMin)&&this.visible&&(rt=this.yAxis.maxLabelSize.width,this.yAxis.baseModule.calculateRangeAndInterval(new i.Size(this.chart.availableSize.width,this.yAxis.rect.height),this.yAxis),rt<this.yAxis.maxLabelSize.width?(this.chart.calculateBounds(),this.chart.axisCollections.forEach(function(n){nr(n)||n.updateAxis()}),this.chart.chartAxisLayoutPanel.drawPaneLines(this.chart),this.chart.renderAreaBorder()):(nr(this.yAxis)||this.yAxis.updateAxis(),!nr(this.xAxis)&&y&&this.xAxis.updateAxis(),"Histogram"!==this.type||nr(this.xAxis)||(this.xAxis.baseModule.calculateRangeAndInterval(new i.Size(this.xAxis.rect.width,this.chart.availableSize.height),this.xAxis),this.xAxis.updateAxis())),this.chart.pointsAdded=!1,y&&(this.chart[et("Pareto"===this.category?"Column":this.type.replace("100",""))+"SeriesModule"].updateDirection(this,a,this.chart.requireInvertedAxis),g=this.index),this.updateSeries(!1,!0,g),this.chart.stripLineModule&&this.chart.stripLineModule.renderStripLine(this.chart,"Behind",this.chart.axisCollections)),this.chart.redraw=!1,this.chart.pointsRemoved=!1,this.chart.duration=it):this.dataSource=n},u.prototype.updateChartAxis=function(){var n=this.yAxis.maxLabelSize.width;this.yAxis.baseModule.calculateRangeAndInterval(new i.Size(this.chart.availableSize.width,this.yAxis.rect.height),this.yAxis);n<this.yAxis.maxLabelSize.width?(this.chart.calculateBounds(),this.chart.axisCollections.forEach(function(n){nr(n)||n.updateAxis()}),this.chart.chartAxisLayoutPanel.drawPaneLines(this.chart),this.chart.renderAreaBorder()):(nr(this.xAxis)||(this.xAxis.baseModule.calculateRangeAndInterval(new i.Size(this.xAxis.rect.width,this.chart.availableSize.height),this.xAxis),this.xAxis.updateAxis()),nr(this.yAxis)||this.yAxis.updateAxis());this.chart.stripLineModule&&this.chart.stripLineModule.renderStripLine(this.chart,"Behind",this.chart.axisCollections)},u.prototype.updateSeries=function(n,t,i){var s=[],e,h,u,f;for(n&&t?new Set(this.xAxis.series.concat(this.yAxis.series)).forEach(function(n){s.push(n)}):s=n?this.xAxis.series.slice():this.yAxis.series.slice(),e=0,h=s;e<h.length;e++)u=h[e],u.visible&&u.index!==i&&(wo(u,this.chart.enableCanvas),f="translate("+this.clipRect.x+","+this.clipRect.y+")",u.seriesElement.setAttribute("transform",f),u.chart[et(u.type.replace("100",""))+"SeriesModule"].render(u,u.xAxis,u.yAxis,u.chart.requireInvertedAxis,u.chart.enableAnimation),u.marker.visible&&"Cartesian"===u.chart.chartAreaType&&"Scatter"!==u.type&&"Bubble"!==u.type&&"Candle"!==u.type&&"Hilo"!==u.type&&"HiloOpenClose"!==u.type&&u.symbolElement&&(u.symbolElement.setAttribute("transform",f),o(u.chart.enableCanvas,u.chart.seriesElements,u.symbolElement,!0)),u.marker.dataLabel.visible&&u.chart.dataLabelModule&&(u.chart.dataLabelCollections=[],u.chart.dataLabelModule.render(u,u.chart,u.marker.dataLabel),u.textElement&&(u.shapeElement&&u.shapeElement.setAttribute("transform",f),o(u.chart.enableCanvas,u.chart.dataLabelElements,u.shapeElement,!0),u.textElement.setAttribute("transform",f),o(u.chart.enableCanvas,u.chart.dataLabelElements,u.textElement,!0))),u.lastValueLabel.enable&&u.chart.lastValueLabelModule&&(u.chart.lastValueLabelCollections=[],u.chart.lastValueLabelModule.render(u,u.chart,u.lastValueLabel,!0),u.lastValueLabelElement&&o(u.chart.enableCanvas,u.chart.lastValueLabelElements,u.lastValueLabelElement,!0)),u.chart.annotationModule&&u.chart.annotationModule.renderAnnotations(r(u.chart.element.id+"_Secondary_Element")))},u.prototype.updatePoint=function(n){var r=new uo,t=this instanceof u&&this.marker.dataLabel.name?this.marker.dataLabel.name:"",i=this instanceof u&&"Histogram"===this.type?"x":this.xName;if("Category"===this.xAxis.valueType)this.pushCategoryPoint(r,n,t,i);else if(this.xAxis.valueType.indexOf("DateTime")>-1){var e=this.points[n],f={skeleton:"full",type:"dateTime"},o=this.chart.intl.getDateParser(f),s=this.chart.intl.getDateFormat(f);this.pushDateTimePoint(e,n,t,i,o,s)}else this.pushDoublePoint(r,n,t,i)},u.prototype.formatAccessibilityDescription=function(n,t){return t.accessibility.accessibilityDescriptionFormat.replace("${series.name}",t&&t.name?t.name:"").replace("${point.x}",n&&n.x?n.x.toString():"").replace("${point.y}",n&&n.y?n.y.toString():"").replace("${point.high}",n&&n.high?n.high.toString():"").replace("${point.low}",n&&n.low?n.low.toString():"").replace("${point.close}",n&&n.close?n.close.toString():"").replace("${point.open}",n&&n.open?n.open.toString():"").replace("${point.maximum}",n&&n.maximum?n.maximum.toString():"").replace("${point.minimum}",n&&n.minimum?n.minimum.toString():"").replace("${point.median}",n&&n.median?n.median.toString():"").replace("${point.lowerQuartile}",n&&n.lowerQuartile?n.lowerQuartile.toString():"").replace("${point.upperQuartile}",n&&n.upperQuartile?n.upperQuartile.toString():"")},f([t.Property("")],u.prototype,"name",void 0),f([t.Property("")],u.prototype,"yName",void 0),f([t.Property("Line")],u.prototype,"drawType",void 0),f([t.Property(!0)],u.prototype,"isClosed",void 0),f([t.Property(null)],u.prototype,"bearFillColor",void 0),f([t.Property(null)],u.prototype,"bullFillColor",void 0),f([t.Property(!1)],u.prototype,"enableSolidCandles",void 0),f([t.Property("")],u.prototype,"size",void 0),f([t.Property(null)],u.prototype,"binInterval",void 0),f([t.Property(!1)],u.prototype,"showNormalDistribution",void 0),f([t.Property("")],u.prototype,"stackingGroup",void 0),f([t.Complex({color:null,width:0},yt)],u.prototype,"border",void 0),f([t.Complex({},hv)],u.prototype,"lastValueLabel",void 0),f([t.Property(1)],u.prototype,"opacity",void 0),f([t.Property(0)],u.prototype,"zOrder",void 0),f([t.Property("")],u.prototype,"groupName",void 0),f([t.Property("Line")],u.prototype,"type",void 0),f([t.Complex(null,db)],u.prototype,"errorBar",void 0),f([t.Complex(null,us)],u.prototype,"marker",void 0),f([t.Complex(null,wb)],u.prototype,"paretoOptions",void 0),f([t.Complex({},vp)],u.prototype,"dragSettings",void 0),f([t.Collection([],cv)],u.prototype,"trendlines",void 0),f([t.Property(!0)],u.prototype,"enableTooltip",void 0),f([t.Property(!0)],u.prototype,"showNearestTooltip",void 0),f([t.Property("")],u.prototype,"tooltipFormat",void 0),f([t.Property("")],u.prototype,"tooltipMappingName",void 0),f([t.Property("SeriesType")],u.prototype,"legendShape",void 0),f([t.Property("")],u.prototype,"legendImageUrl",void 0),f([t.Property(null)],u.prototype,"selectionStyle",void 0),f([t.Property(null)],u.prototype,"unSelectedStyle",void 0),f([t.Property(null)],u.prototype,"nonHighlightStyle",void 0),f([t.Property(1)],u.prototype,"minRadius",void 0),f([t.Property(3)],u.prototype,"maxRadius",void 0),f([t.Property("Natural")],u.prototype,"splineType",void 0),f([t.Property(.5)],u.prototype,"cardinalSplineTension",void 0),f([t.Complex(null,pl)],u.prototype,"emptyPointSettings",void 0),f([t.Property(!0)],u.prototype,"showMean",void 0),f([t.Property("Normal")],u.prototype,"boxPlotMode",void 0),f([t.Property(!0)],u.prototype,"showOutliers",void 0),f([t.Property(null)],u.prototype,"columnWidth",void 0),f([t.Property(null)],u.prototype,"columnWidthInPixel",void 0),f([t.Property("Rectangle")],u.prototype,"columnFacet",void 0),f([t.Property(0)],u.prototype,"columnSpacing",void 0),f([t.Property("#C64E4A")],u.prototype,"negativeFillColor",void 0),f([t.Property("#4E81BC")],u.prototype,"summaryFillColor",void 0),f([t.Property()],u.prototype,"intermediateSumIndexes",void 0),f([t.Property()],u.prototype,"sumIndexes",void 0),f([t.Property("Left")],u.prototype,"step",void 0),f([t.Property(!1)],u.prototype,"noRisers",void 0),f([t.Complex({},op)],u.prototype,"accessibility",void 0),f([t.Complex({color:"black",width:2},ye)],u.prototype,"connector",void 0),f([t.Complex(null,wl)],u.prototype,"cornerRadius",void 0),u}(lv),ih=function(){function n(n,t){this.initDataManager(n,t)}return n.prototype.initDataManager=function(n,t){this.dataManager=n instanceof gt.DataManager?n:new gt.DataManager(n);this.query=t instanceof gt.Query?t:new gt.Query},n.prototype.generateQuery=function(){return this.query.clone()},n.prototype.getData=function(n){var i=this,t;return this.dataManager.ready?(t=new gt.Deferred,this.dataManager.ready.then(function(){i.dataManager.executeQuery(n).then(function(n){t.resolve(n)})}).catch(function(n){t.reject(n)}),t.promise):this.dataManager.executeQuery(n)},n}(),out=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sut=function(n){function u(t){var i=n.call(this,t)||this;return i.elementId=t.element.id,i.commonXvalues=[],i}return out(u,n),u.prototype.addEventListener=function(){this.chart.isDestroyed||(this.chart.on(t.Browser.touchMoveEvent,this.mouseMoveHandler,this),this.chart.on(t.Browser.touchEndEvent,this.mouseUpHandler,this))},u.prototype.removeEventListener=function(){this.chart.isDestroyed||(this.chart.off(t.Browser.touchMoveEvent,this.mouseMoveHandler),this.chart.off(t.Browser.touchEndEvent,this.mouseUpHandler))},u.prototype.mouseUpHandler=function(){var n=this.chart;!n.isTouch||n.crosshair.enable||this.isSelected(n)||this.chart.zoomModule&&r(this.elementId+"_ZoomArea")||this.markerMove(!0)},u.prototype.mouseMoveHandler=function(){var n=this.chart;"None"===n.highlightMode&&!n.tooltip.enable||n.isTouch&&!n.startMove||this.isSelected(n)||this.chart.zoomModule&&(r(this.elementId+"_ZoomArea")||this.chart.zoomModule.startPanning)||this.markerMove(!1)},u.prototype.markerMove=function(n){var r,f,o,u,s=this,i=this.chart,v,c,y,e,h,l,p,a;if(this.currentPoints=[],i.tooltip.shared&&i.tooltip.enable){if(!ht(i.mouseX,i.mouseY,i.chartAxisLayoutPanel.seriesClipRect))return null;if(i.tooltip.enable)if(v="PolarRadar"===i.chartAreaType?this.getData():null,this.chart.tooltip.showNearestPoint)for(c=0,y=i.visibleSeries;c<y.length;c++)e=y[c],e.enableTooltip&&"Indicator"!==e.category&&("Cartesian"===i.chartAreaType&&e.visible?r=this.getClosestX(i,e,this.commonXValue(this.chart.visibleSeries)):"PolarRadar"===i.chartAreaType&&e.visible&&null!==v.point&&(r=new io(e.points[v.point.index],e)),r&&(this.currentPoints.push(r),r=null));else this.currentPoints=this.chart.tooltipModule.currentPoints}else r=this.getData(),u=r.series,f=this.previousPoints[0],o=u&&("Bubble"===u.type||"Scatter"===u.drawType||"Scatter"===u.type||"Candle"!==u.type&&"Hilo"!==u.type&&"HiloOpenClose"!==u.type&&u.marker.visible&&0!==u.marker.width&&0!==u.marker.height),r.lierIndex=this.lierIndex,r.point&&o&&(!f||f.point!==r.point||f&&f.lierIndex>3&&f.lierIndex!==this.lierIndex)&&this.currentPoints.push(r),r.point&&o&&i.isPointMouseDown&&this.currentPoints.push(r),0!==this.currentPoints.length||!r.point||o||t.isNullOrUndefined(f)||f.point===r.point||(this.removeHighlightedMarker(f.series,f.point),this.previousPoints=t.extend([],r,null,!0)),i.tooltip.showNearestTooltip&&this.chart.tooltipModule&&this.chart.tooltipModule.currentPoints&&(o||"Pareto"===u.type&&u.paretoOptions.marker.visible)&&0===this.currentPoints.length&&ht(i.mouseX,i.mouseY,i.chartAxisLayoutPanel.seriesClipRect)&&(this.currentPoints=this.chart.tooltipModule.currentPoints);if(h=this.previousPoints.length,(this.currentPoints.length>0||h>0&&i.tooltip.shared)&&(0===h||i.isPointMouseDown||h>0&&(0===this.currentPoints.length||this.previousPoints[0].point!==this.currentPoints[0].point))){if(h>0)for(l=0,p=this.previousPoints;l<p.length;l++)a=p[l],t.isNullOrUndefined(a)||this.removeHighlightedMarker(a.series,a.point);for(var d=function(n){(n&&n.point||"Candle"!==u.type&&"Hilo"!==u.type&&"HiloOpenClose"!==u.type)&&(de(b.markerExplode),b.isRemove=!0,n.point.symbolLocations.map(function(t,i){n.series.marker.allowHighlight&&(!n.series.isRectSeries||n.point.marker.visible)&&s.drawTrackBall(n.series,n.point,t,i)}))},b=this,w=0,k=this.currentPoints;w<k.length;w++)d(k[w]);this.previousPoints=t.extend([],this.currentPoints,null,!0)}!i.tooltip.enable&&(0===this.currentPoints.length&&this.isRemove||n&&this.isRemove||!ht(i.mouseX,i.mouseY,i.chartAxisLayoutPanel.seriesClipRect))&&(this.isRemove=!1,t.isNullOrUndefined(this.previousPoints[0])||(this.markerExplode=+setTimeout(function(){s.previousPoints[0]&&s.removeHighlightedMarker(s.previousPoints[0].series,s.previousPoints[0].point)},2e3)));this.currentPoints=[]},u.prototype.animationDuration=function(){var n=200;return this.chart.maxPointCount>100?n=10:this.chart.maxPointCount>50&&(n=100),n},u.prototype.drawTrackBall=function(n,u,f,e){var p,o=u.marker,a=n.marker,w=o.shape||a.shape||"Circle",c,v,l,tt,h,it,s,rt,y;if("None"===w||"Image"===w)return null;v=n.symbolElement||n.seriesElement;this.chart.highlightModule&&"None"!==this.chart.highlightMode&&(c=this.chart.highlightModule.generateStyle(n));this.chart.selectionModule&&"None"!==this.chart.selectionMode&&(c=this.chart.selectionModule.generateStyle(n));l=this.elementId+"_Series_"+n.index+"_Point_"+u.index+"_Trackball"+(e||"");r(l+"_1")&&r(l+"_1").getAttribute("e-animate")&&(t.Animation.stop(r(l+"_1")),t.remove(r(l+"_1")));var ut=new i.Size((o.width||a.width)+3,(o.height||a.height)+3),b=o.border||n.border,d="BoxAndWhisker"===n.type||"Bubble"===n.type||"Scatter"===n.type,g=b.color&&"transparent"!==b.color?b.color:o.fill||u.interior||(d?u.color:n.interior),k=wu(vi(g)),ft=o.border?o.border.width:a.border.width,et=n.chart.themeStyle.markerShadow||"rgba("+k.r+","+k.g+","+k.b+",0.2)",nt=document.getElementById(this.elementId+"_Series_"+n.index+"_Point_"+u.index+"_Symbol");for((t.isNullOrUndefined(nt)||nt.setAttribute("visibility","visible"),this.chart.enableCanvas)&&(tt=document.getElementById(this.chart.element.id+"_Secondary_Element"),(p=this.chart.svgRenderer.createSvg({id:this.chart.element.id+"_trackball_svg",width:this.chart.availableSize.width,height:this.chart.availableSize.height})).style.cssText="position: absolute; display:block; pointer-events: none",tt.appendChild(p)),h=0;h<2;h++)it=new i.PathOption(l+"_"+h,h?o.fill||u.color||(d?n.interior:"#ffffff"):"transparent",ft+(h?0:8),h?g:et,o.opacity||a.opacity,n.marker.border.dashArray,""),s=tr(f,w,ut,o.imageUrl,it,0,this.chart.svgRenderer,n.clipRect),s.setAttribute("class",this.elementId+"_EJ2-Trackball_Series_"+n.index+"_Point_"+u.index),rt=-1!==v.id.indexOf("Symbol")?"_Symbol":"",y=document.getElementById(this.elementId+"_Series_"+n.index+"_Point_"+u.index+rt),""===c||t.isNullOrUndefined(c)||t.isNullOrUndefined(y)||!y.hasAttribute("class")||c!==y.getAttribute("class")||s.classList.add(c),s.setAttribute("clip-path",v.getAttribute("clip-path")),s.setAttribute("transform",v.getAttribute("transform")),this.chart.enableCanvas?p.appendChild(s):this.chart.svgObject.appendChild(s),u.symbolLocations.length>1&&n.marker.visible&&"Bubble"!==n.type&&"Scatter"!==n.type&&this.trackballAnimate(s,0,this.animationDuration(),n,u.index,f,!1,!1);u.symbolLocations.length<2&&n.marker.visible&&this.doAnimation(n,u,!1)},u.prototype.doAnimation=function(n,t,i){if(void 0===i&&(i=!1),"Bubble"!==n.type&&"Scatter"!==n.type)for(var f=this.animationDuration(),u=document.getElementsByClassName(this.elementId+"_EJ2-Trackball_Series_"+n.index+"_Point_"+t.index),r=0,e=u.length;r<e;r++)this.trackballAnimate(u[r],0,f,n,t.index,t.symbolLocations[0],!1,i)},u.prototype.trackballAnimate=function(n,i,r,u,f,e,o,s,h){var l=e.x,a=e.y,v="Polar"!==u.type&&"Radar"!==u.type?u.clipRect.x:0,y="Polar"!==u.type&&"Radar"!==u.type?u.clipRect.y:0,p=n.getAttribute("transform"),w=u.marker.width/(u.marker.width+3),b=u.marker.height/(u.marker.height+3),c=Math.min(w,b);h||n.setAttribute("transform","translate("+(l+v)+" "+(a+y)+") scale("+c+") translate("+-l+" "+-a+")");new t.Animation({}).animate(n,{duration:r,delay:i,progress:function(i){if(i.element.style.animation="",i.timeStamp>i.delay){if(!u.visible&&h)return void t.remove(n);var r=i.timeStamp/i.duration,f=h?Math.max(c,1-(1-c)*r):Math.min(1,c+(1-c)*r);n.setAttribute("transform","translate("+(l+v)+" "+(a+y)+") scale("+f+") translate("+-l+" "+-a+")")}},end:function(){n.style.visibility="";n.setAttribute("transform",p);o||f!==u.points.length-1||u.chart.trigger("animationComplete",{series:u.chart.isBlazor?{}:u});(h||s)&&t.remove(n)}})},u.prototype.removeHighlightedMarker=function(n,i,r){var s,h,c,l,o,e,f,u;if(void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=!1),t.isNullOrUndefined(n)||t.isNullOrUndefined(i))for(s=0,h=n.points;s<h.length;s++)for(c=h[s],l=(o=document.getElementsByClassName(this.elementId+"_EJ2-Trackball_Series_"+n.index+"_Point_"+c.index),e=document.getElementById(this.elementId+"_Series_"+n.index+"_Point_"+c.index+"_Symbol"),u=0,o.length);u<l;u++)t.isNullOrUndefined(e)||e.setAttribute("visibility","visible"),t.remove(o[0]);else{for(e=document.getElementById(this.elementId+"_Series_"+n.index+"_Point_"+i.index+"_Symbol"),f=document.getElementsByClassName(this.elementId+"_EJ2-Trackball_Series_"+n.index+"_Point_"+i.index),0===f.length&&((o=document.querySelectorAll('[class*="'+this.elementId+"_EJ2-Trackball_Series_"+n.index+"_Point_"+i.index+'"]'))[1]&&o[1].remove(),o[0]&&o[0].remove()),u=f.length-1;u>=0;u--)(!n.marker.visible||f[u]&&"0"===f[u].id[f[u].id.length-1]||"Scatter"===n.type)&&t.remove(f[u]);for(u=f.length-1;u>=0;u--)f[u]&&"1"===f[u].id[f[u].id.length-1]&&"Bubble"!==n.type&&"Scatter"!==n.type&&n.marker.visible&&(f[u].setAttribute("opacity",e?e.getAttribute("opacity"):f[u].getAttribute("opacity")),this.trackballAnimate(f[u],0,this.animationDuration(),n,i.index,i.symbolLocations[u],null,null,!0));t.isNullOrUndefined(e)||e.setAttribute("visibility","visible")}r&&(this.previousPoints=[])},u}(rs),hut=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),av=["Circle","Triangle","Diamond","Rectangle","Pentagon","InvertedTriangle","VerticalLine","Cross","Plus","HorizontalLine","Star"],cut=function(n){function u(t){var i=n.call(this,t)||this;return i.addEventListener(),i}return hut(u,n),u.prototype.render=function(n){var r=this,t=n.chart.redraw;this.createElement(n,t);for(var f=function(i){i.visible&&i.symbolLocations&&i.symbolLocations.length&&i.symbolLocations.map(function(u,f){if("Cartesian"===n.chart.chartAreaType&&(!n.isRectSeries||n.type.indexOf("Column")>-1)&&-1===n.type.indexOf("100")&&-1===n.type.indexOf("Range")){var e=n.chart.axisCollections.filter(function(t){return n.chart.isTransposed?"Horizontal"===t.orientation:"Vertical"===t.orientation}).some(function(n){var t=n.actualRange,r;return"Logarithmic"===n.valueType?(r=hi(i.yValue,n.logBase),isFinite(r)&&r>=t.min&&r<=t.max):i.yValue>=t.min&&i.yValue<=t.max});"None"!==n.marker.shape&&e&&r.renderMarker(n,i,u,f,t)}else"None"!==n.marker.shape&&r.renderMarker(n,i,u,f,t)})},i=0,u=n.points;i<u.length;i++)f(u[i])},u.prototype.renderMarker=function(n,u,f,e,s){var b=void 0===n.index?n.category:n.index,c=n.marker,it,rt,a,v,p,y,ft,h,g,w,nt;n.marker.shape=n.marker.shape?n.marker.shape:av[b%10];p={color:c.border.color,width:c.border.width};y=c.border.color;f.x=f.x+c.offset.x;f.y=f.y-c.offset.y;var l,k="BoxAndWhisker"===n.type,ut=c.fill||(k||n.marker.isFilled?u.interior||n.interior:"#ffffff"),d=k&&!this.chart.enableCanvas?tb(n.seriesElement.childNodes,"Series_"+n.index+"_Point_"+u.index):n.symbolElement;if(p.color=y||n.setPointColor(u,n.interior),ft=this.elementId+"_Series_"+b+"_Point_"+(null!==n.removedPointIndex&&n.removedPointIndex<=u.index||this.chart.pointsAdded?u.index+1:u.index)+"_Symbol"+(e||""),h={cancel:!1,name:rr,series:n,point:u,fill:u.isEmpty&&n.emptyPointSettings.fill||ut,border:{color:"BoxAndWhisker"===n.type?t.isNullOrUndefined(y)||"transparent"===y?fv(ut,-.6):y:p.color,width:p.width},height:c.height,width:c.width,shape:c.shape},h.border=n.setBorderColor(u,{width:h.border.width,color:h.border.color}),n.isRectSeries&&"BoxAndWhisker"!==n.type||(this.chart.trigger(rr,h),u.color=h.fill),h.cancel)f=null,u.marker={visible:!1};else{g=void 0;g="RangeArea"===n.type||"RangeColumn"===n.type||"RangeColumn"===n.drawType||"SplineRangeArea"===n.type||"RangeStepArea"===n.type?e?u.low:u.high:k?u.outliers[e]:u.y;nt=h.point.marker.fill||h.fill;w=t.isNullOrUndefined(h.point.marker.border)?{color:h.border.color,width:h.border.width}:{color:h.point.marker.border.color||h.border.color,width:h.point.marker.border.width||h.border.width};var et=h.point.marker.width||h.width,ot=h.point.marker.height||h.height,ht=h.point.marker.opacity||c.opacity,tt=h.point.marker.shape||h.shape,st=h.point.marker.imageUrl||c.imageUrl;v=new i.PathOption(ft,nt,w.width,w.color,ht,n.marker.border.dashArray);(null!=d||this.chart.enableCanvas)&&(s&&r(v.id)&&(a="Circle"===tt?"c":"",it={x:+(l=r(v.id)).getAttribute(a+"x"),y:+l.getAttribute(a+"y")},rt=l.getAttribute("d")),(l=tr(f,tt,new i.Size(et,ot),st,v,(u.x.toString(),g.toString()),this.chart.renderer,n.clipRect))&&(l.setAttribute("role","img"),"TrendLine"===n.category&&v.id===this.elementId+"_Series_0_Point_0_Symbol"&&(l.setAttribute("tabindex","0"),l.setAttribute("class","e-chart-focused")),l.setAttribute("aria-label",n.accessibility.accessibilityDescriptionFormat?n.formatAccessibilityDescription(u,n):u.x+": "+u.y+", "+n.name)),o(this.chart.enableCanvas,d,l,s,!0,a+"x",a+"y",it,rt,!1,!1,null,n.chart.duration),null!==n.removedPointIndex&&n.removedPointIndex<=u.index&&(d.lastChild.id=this.elementId+"_Series_"+b+"_Point_"+u.index+"_Symbol"+(e||"")));u.marker={border:w,fill:nt,height:ot,visible:!0,shape:tt,width:et,imageUrl:st}}},u.prototype.createElement=function(n,t){var s,i,r=n.marker,h=r.border.width+(this.chart.zoomModule&&this.chart.zoomModule.isAxisZoomed(this.chart.axisCollections)?0:13),o=n.chart.svgRenderer,u=void 0===n.index?n.category:n.index,c="Cartesian"===n.chart.chartAreaType?"translate("+n.clipRect.x+","+n.clipRect.y+")":"",f,e;r.visible&&(f=(r.height+h)/2,e=(r.width+h)/2,s="Cartesian"===n.chart.chartAreaType?eu(t,i=new ft(this.elementId+"_ChartMarkerClipRect_"+u,"transparent",{width:1,color:"Gray"},1,{x:-e,y:-f,width:n.clipRect.width+2*e,height:n.clipRect.height+2*f},0,0,"",n.marker.border.dashArray),o):eu(t,i=new ef(this.elementId+"_ChartMarkerClipRect_"+u,"transparent",{width:1,color:"Gray"},1,n.clipRect.width/2+n.clipRect.x,n.clipRect.height/2+n.clipRect.y,n.chart.radius+Math.max(f,e)),o,"drawCircularClipPath"),i={id:this.elementId+"SymbolGroup"+u,transform:c,"clip-path":"url(#"+this.elementId+"_ChartMarkerClipRect_"+u+")"},n.symbolElement=o.createGroup(i),n.symbolElement.appendChild(s),this.chart.enableCanvas&&document.getElementById(this.chart.element.id+"_tooltip_svg").appendChild(n.symbolElement))},u.prototype.getRangeLowPoint=function(n,t){var i=n.x,r=n.y;return t.chart.requireInvertedAxis?(r+=n.height/2,i+=t.yAxis.isAxisInverse?n.width:0):(r+=t.yAxis.isAxisInverse?0:n.height,i+=n.width/2),{x:i,y:r}},u.prototype.calculateDistance=function(n,t){var i=t.x-n.x,r=t.y-n.y;return Math.sqrt(i*i+r*r)},u.prototype.doMarkerAnimation=function(n){var c,r,o;if("Scatter"!==n.type&&"Bubble"!==n.type&&"Candle"!==n.type&&"Hilo"!==n.type&&"HiloOpenClose"!==n.type&&("PolarRadar"!==n.chart.chartAreaType||"Scatter"!==n.drawType)){for(var f=n.symbolElement.childNodes,s=n.animation.delay+(0===n.animation.duration&&"Enable"===t.animationMode?1e3:n.animation.duration),e=n.chart.animated?n.chart.duration:200,u=s,l=n.pathElement?n.pathElement.getTotalLength():0,h=[],i=1;"Line"===n.type&&i<n.points.length;i++)n.points[i-1].symbolLocations[0]&&n.points[i].symbolLocations[0]&&(c=this.calculateDistance(n.points[i-1].symbolLocations[0],n.points[i].symbolLocations[0]),h.push(c));for(r=1,o="RangeArea"===n.type||"RangeColumn"===n.type||"SplineRangeArea"===n.type||"RangeStepArea"===n.type?2:1,i=0;i<n.points.length;i++)if(n.points[i].symbolLocations){if(!n.points[i].symbolLocations.length||!f[r])continue;"Line"===n.type&&(0===i&&(u=0),i>0&&(u+=h[i-1]/l*s,e=0));pu(f[r],u,e,n,i,n.points[i].symbolLocations[0],!1);2===o&&(this.getRangeLowPoint(n.points[i].regions[0],n),pu(f[r+1],u,e,n,i,0,!1));r+=o}}},u}(sut),lut=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pt=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},gb=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return lut(i,n),pt([t.Property(!0)],i.prototype,"visible",void 0),pt([t.Property(null)],i.prototype,"height",void 0),pt([t.Property(null)],i.prototype,"width",void 0),pt([t.Complex({x:0,y:0},lf)],i.prototype,"location",void 0),pt([t.Property("Auto")],i.prototype,"position",void 0),pt([t.Property("Series")],i.prototype,"mode",void 0),pt([t.Property(8)],i.prototype,"padding",void 0),pt([t.Property(null)],i.prototype,"itemPadding",void 0),pt([t.Property("Center")],i.prototype,"alignment",void 0),pt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},oi)],i.prototype,"textStyle",void 0),pt([t.Property(10)],i.prototype,"shapeHeight",void 0),pt([t.Property(10)],i.prototype,"shapeWidth",void 0),pt([t.Complex({},yt)],i.prototype,"border",void 0),pt([t.Complex({left:0,right:0,top:0,bottom:0},lr)],i.prototype,"margin",void 0),pt([t.Complex({left:0,right:0,top:0,bottom:0},vs)],i.prototype,"containerPadding",void 0),pt([t.Property(8)],i.prototype,"shapePadding",void 0),pt([t.Property("transparent")],i.prototype,"background",void 0),pt([t.Property(1)],i.prototype,"opacity",void 0),pt([t.Property(!0)],i.prototype,"toggleVisibility",void 0),pt([t.Property(!1)],i.prototype,"enableHighlight",void 0),pt([t.Property(null)],i.prototype,"description",void 0),pt([t.Property(3)],i.prototype,"tabIndex",void 0),pt([t.Property(null)],i.prototype,"title",void 0),pt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},oi)],i.prototype,"titleStyle",void 0),pt([t.Property("Top")],i.prototype,"titlePosition",void 0),pt([t.Property("Normal")],i.prototype,"textWrap",void 0),pt([t.Property("Ellipsis")],i.prototype,"textOverflow",void 0),pt([t.Property(100)],i.prototype,"maximumTitleWidth",void 0),pt([t.Property(null)],i.prototype,"maximumLabelWidth",void 0),pt([t.Property(!0)],i.prototype,"enablePages",void 0),pt([t.Property(!1)],i.prototype,"isInversed",void 0),pt([t.Property(!1)],i.prototype,"reverse",void 0),pt([t.Property("Auto")],i.prototype,"layout",void 0),pt([t.Property(null)],i.prototype,"maximumColumns",void 0),pt([t.Property(!1)],i.prototype,"fixedWidth",void 0),pt([t.Complex({},lu)],i.prototype,"accessibility",void 0),i}(t.ChildProperty),fs=function(){function n(n){this.maxItemHeight=0;this.rowHeights=[];this.pageHeights=[];this.columnHeights=[];this.pageXCollections=[];this.chartRowCount=1;this.legendTitleCollections=[];this.legendRegions=[];this.pagingRegions=[];this.chart=n;this.legend=n.legendSettings;this.legendID=n.element.id+"_chart_legend";this.isChartControl="chart"===n.getModuleName()||"chart3d"===n.getModuleName();this.isAccChartControl="accumulationchart"===n.getModuleName()||"circularchart3d"===n.getModuleName();this.isBulletChartControl="bulletChart"===n.getModuleName();this.isStockChartControl="stockChart"===n.getModuleName();this.bulletChart=this.chart;this.fivePixel=5;this.rowCount=0;this.pageButtonSize=8;this.maxColumns=0;this.maxWidth=0;this.currentPage=1;this.backwardArrowOpacity=0;this.forwardArrowOpacity=1;this.arrowWidth=2*(this.fivePixel+this.pageButtonSize+this.fivePixel);this.arrowHeight=this.arrowWidth;this.isTop=!1;this.isTitle=!1;this.currentPageNumber=1}return n.prototype.calculateLegendBounds=function(n,t,r,u,f){var e=this.legend,o=this.isBulletChartControl||("accumulationchart"===this.chart.getModuleName()||"chart"===this.chart.getModuleName())&&("Auto"!==this.legend.layout||this.legend.maximumColumns>0)?"40%":"20%";this.getPosition(e.position,t);this.legendBounds=new i.Rect(n.x,n.y,0,0);this.isVertical="Left"===this.position||"Right"===this.position;this.itemPadding=this.legend.itemPadding?this.legend.itemPadding:this.isVertical?8:20;this.isVertical?(this.legendBounds.height=it(e.height,t.height-(n.y-this.chart.margin.top))||n.height,this.legendBounds.width=it(e.width||o,t.width)):(this.legendBounds.width=it(e.width,t.width)||n.width,this.legendBounds.height=it(e.height||o,t.height));"chart3d"===this.chart.getModuleName()?this.library.get3DLegendBounds(t,this.legendBounds,e):this.library.getLegendBounds(t,this.legendBounds,e);this.isBulletChartControl||(this.legendBounds.width+=this.legend.containerPadding.left+this.legend.containerPadding.right,this.legendBounds.height+=this.legend.containerPadding.top+this.legend.containerPadding.bottom);this.getLocation(this.position,e.alignment,this.legendBounds,n,t,r,u,f)},n.prototype.getPosition=function(n,t){var i=this.chart,r=this.chart;this.isChartControl||this.isBulletChartControl||this.isStockChartControl?this.position="Auto"!==n?n:"Bottom":("Auto"===n&&((i||r).visibleSeries&&"Funnel"===(i||r).visibleSeries[0].type||"Pyramid"===(i||r).visibleSeries[0].type)&&(n="Top"),this.position="Auto"!==n?n:t.width>t.height?"Right":"Bottom")},n.prototype.setBounds=function(n,t,i,r){var u=i.title&&"Top"===i.titlePosition?this.legendTitleSize.height+this.fivePixel:0;this.isVertical&&this.isPaging&&!i.enablePages&&!this.isBulletChartControl&&(u=i.title&&"Top"===i.titlePosition?this.legendTitleSize.height+this.fivePixel:0,u+=this.pageButtonSize+this.fivePixel);n=Math.min(n,r.width);t=Math.min(t,r.height);"Gradient"===i.mode?(r.width=i.width?r.width:this.isVertical?n:.75*r.width,r.height=i.height?r.height:this.isVertical?.75*r.height:t):(r.width=i.width?r.width:n,r.height=i.height?r.height:t);this.isBulletChartControl||this.isTop&&"None"!==i.titleStyle.textOverflow&&(this.calculateLegendTitle(i,r),r.height+="Wrap"===i.titleStyle.textOverflow&&this.legendTitleCollections.length>1?this.legendTitleSize.height-this.legendTitleSize.height/this.legendTitleCollections.length:0);this.rowCount=Math.max(1,Math.ceil((r.height-i.padding-u)/(this.maxItemHeight+i.padding)))},n.prototype.getLocation=function(n,t,r,u,f,e,o,s){var c=this.legend.border.width,l=this.isBulletChartControl,h=this.bulletChart,v="Inside"===h.labelPosition,y="Inside"===h.tickPosition,a="Vertical"===h.orientation,d=l&&""!==h.categoryField?e.width+this.chart.border.width+3*c:0,b=this.chart.margin.bottom,p=r.height+c+this.legend.margin.top+this.legend.margin.bottom,w=r.width+c+this.legend.margin.left+this.legend.margin.right,k;"Bottom"===n?(r.x=this.alignLegend(r.x,f.width,r.width,t),r.y=!o||r.height!==o.height&&"Pie"===this.chart.series[0].type?u.y+(u.height-p)+c+this.legend.margin.top:o.y,r.y+=!l||h.opposedPosition||v||y||a?a&&""!==h.categoryField?e.height+2*c:0:h.majorTickLines.height+b+this.legend.border.width+2*c,s&&r.height===o.height||vr(u,new wr(0,0,0,p))):"Top"===n?(k=void 0,this.isChartControl&&(k=i.measureText("100",this.chart.verticalAxes[0].labelStyle,this.chart.themeStyle.legendLabelFont)),r.x=this.alignLegend(r.x,f.width,r.width,t),r.y=!o||r.height!==o.height&&"Pie"===this.chart.series[0].type?u.y+c+this.legend.margin.top:o.y,r.y-=!l||!h.opposedPosition||v||y||a?0:h.majorTickLines.height+this.chart.margin.top,p-=l?2*-c:this.isChartControl?2*-c-k.height/2:0,s&&r.height===o.height||vr(u,new wr(0,0,p,0))):"Right"===n?(r.x=!o||r.width!==o.width&&"Pie"===this.chart.series[0].type?u.x+(u.width-r.width)-this.legend.margin.right:o.x,r.y=u.y+this.alignLegend(0,f.height-(u.y+b),r.height,t),w+=l&&h.opposedPosition&&!v&&!y&&a?this.chart.margin.left+this.chart.margin.right+h.majorTickLines.height:0,s&&r.width===o.width||vr(u,new wr(0,w,0,0))):"Left"===n?(r.x=!o||r.width!==o.width&&"Pie"===this.chart.series[0].type?r.x+this.legend.margin.left:o.x,r.y=u.y+this.alignLegend(0,f.height-(u.y+b),r.height,t),w+=!l||h.opposedPosition||v||y||!a?"Vertical"!==h.orientation&&""!==h.categoryField?d:0:r.x-this.chart.margin.left+c+h.majorTickLines.height,s&&r.width===o.width||vr(u,new wr(w,0,0,0))):(r.x=this.legend.location.x,r.y=this.legend.location.y,vr(u,new wr(0,0,0,0)))},n.prototype.alignLegend=function(n,t,i,r){switch(r){case"Far":n=t-i-n;break;case"Center":n=(t-i)/2}return n},n.prototype.renderLegend=function(n,t,u,f,e){var p,rt,ut,w=0,ft=(new i.Rect(0,0,0,0),new i.Rect(0,0,0,0)),b,a,tt,d,s,vt,yt;e&&(rt=r(this.legendID+"_element").getAttribute("x"),ut=r(this.legendID+"_element").getAttribute("y"));b=this.findFirstLegendPosition(this.legendCollections);a=t.padding;this.itemPadding=this.isBulletChartControl?t.padding:this.itemPadding;var pt=t.enablePages,g=t.titlePosition,ot=this.isPaging&&!t.enablePages&&this.isVertical&&("accumulationchart"!==n.getModuleName()&&"chart"!==n.getModuleName()||"Auto"===this.legend.layout)?this.pageButtonSize:0,nt=n.renderer.createGroup({id:this.legendID+"_g"}),et=this.createLegendElements(n,u,nt,t,this.legendID,f);if(this.legendRegions=[],this.chartRowCount=1,tt=0,p=this.isTitle&&(this.isTop||this.isVertical)?this.legendTitleSize.height:0,this.isChartControl||this.isAccChartControl&&(!this.isVertical||t.layout&&"Auto"!==t.layout)){for(var it=1,k=this.rowHeights[0]+(this.isVertical||this.rowHeights.length>1&&this.legend.itemPadding&&"chart"===this.chart.getModuleName()?this.itemPadding:a),l=1;l<this.rowHeights.length;l++)k+this.rowHeights[l]+((this.isVertical||this.rowHeights.length>1&&"chart"===this.chart.getModuleName())&&this.legend.itemPadding?this.itemPadding:a)>this.legendBounds.height-this.pageButtonSize-this.maxItemHeight/2-this.legend.containerPadding.top-this.legend.containerPadding.bottom&&(this.pageHeights[it-1]=k+p,it++,k=0),k+=this.rowHeights[l]+(this.isVertical||this.rowHeights.length>1&&this.legend.itemPadding&&"chart"===this.chart.getModuleName()?this.itemPadding:a);this.pageHeights[it-1]=k+p;this.totalPages=it}for(l=0;l<this.legendCollections.length;l++)if(""!==this.legendCollections[l].text){tt=Math.max(this.legendCollections[l].textSize.height,tt);break}if(this.isChartControl||this.isAccChartControl||(this.maxItemHeight=Math.max(tt,t.shapeHeight)),pt||!this.isPaging||this.isVertical?this.isTitle&&!this.isVertical&&(w=g===(this.isRtlEnable?"Right":"Left")?this.fivePixel+this.legendTitleSize.width:0):(w=this.isTitle&&"Left"===g?this.legendTitleSize.width:0,w+=this.pageButtonSize+2*this.fivePixel),"Gradient"===n.legendSettings.mode&&this.legendCollections.length>1)this.getLinearLegend(u,n,t,et),this.totalPages=1;else if(b!==this.legendCollections.length){var c=void 0,v=0,st=this.legendCollections[b],ht=this.isBulletChartControl?a:w+a+t.shapeWidth/2+t.containerPadding.left,wt=this.isBulletChartControl&&!this.isRtlEnable?u.x+w+a+t.shapeWidth/2:this.isRtlEnable?u.x+("accumulationchart"!==this.chart.getModuleName()||!this.isVertical||"Auto"!==t.layout||t.maximumColumns>0?u.width:this.maxWidth)-ht:u.x+ht,y=new h(wt,this.isBulletChartControl?u.y+p+ot+a+this.maxItemHeight/2:u.y+p+ot+a+this.maxItemHeight/2+t.containerPadding.top),bt=n.isRtlEnabled||n.enableRtl?"end":"start",ct=new i.TextOption("",y.x,y.y,bt),kt=t.shapePadding+this.itemPadding+t.shapeWidth;if(this.totalPages=this.totalPages=this.isAccChartControl||this.isChartControl||this.isBulletChartControl||this.isStockChartControl?this.totalPages:0,this.pageXCollections=[],this.legendCollections[b].location=y,d=void 0,!t.enablePages&&this.isPaging){var dt=y.x-this.fivePixel,lt=y.y-this.fivePixel,gt=this.isTitle&&!this.isVertical&&"Left"===g?this.legendTitleSize.width+this.fivePixel:0,ni=this.isVertical?this.pageButtonSize+Math.abs(lt-u.y):0,at=this.isTitle&&!this.isVertical&&"Right"===g?this.legendTitleSize.width+this.fivePixel:0;at+=this.isVertical?0:this.fivePixel+this.pageButtonSize+this.fivePixel;ft=new i.Rect(dt,lt,u.width-at-gt,u.height-ni)}else ft=u;for(s=void 0,l=0;l<this.legendCollections.length;l++)s=this.legendCollections[l],d=this.isReverse?this.legendCollections.length-1-v:v,"accumulationchart"===this.chart.getModuleName()&&-1===this.chart.accumulationLegendModule.legendRenderArgFill.indexOf(l)&&(s.fill=(this.chart||this.chart||this.chart||this.chart).visibleSeries[0].points[s.pointIndex].color),"stockChart"===this.chart.getModuleName()&&(s.type=this.chart.visibleSeries[v].type),this.accessbilityText=this.isBulletChartControl?"Legend of bullet chart"+s.text:"Click to show or hide the "+s.text+" series",s.render&&s.text&&""!==s.text&&(!(c=n.renderer.createGroup({id:this.legendID+this.generateId(s,"_g_",d)}))||"chart"!==this.chart.getModuleName()&&"accumulationchart"!==this.chart.getModuleName()?c&&(c.setAttribute("tabindex",0===l?"0":""),c.style.outline="none",c.setAttribute("aria-label",t.description||s.text+" series is "+(s.visible?"showing, press enter to hide the ":"hidden, press enter to show the ")+s.text+" series"),c.setAttribute("role","button"),c.setAttribute("aria-pressed",s.visible?"true":"false")):(c.setAttribute("tabindex",0===l&&t.accessibility.focusable?String(t.accessibility.tabIndex):""),c.style.outline="none",c.setAttribute("aria-label",t.accessibility.accessibilityDescription?t.accessibility.accessibilityDescription:s.text+" series is "+(s.visible?"showing, press enter to hide the ":"hidden, press enter to show the ")+s.text+" series"),c.setAttribute("role",t.accessibility.accessibilityRole?t.accessibility.accessibilityRole:"button"),c.setAttribute("aria-pressed",s.visible?"true":"false")),this.library.getRenderPoint(s,y,kt,st,ft,v,b),this.renderSymbol(s,c,d),this.renderText(n,s,c,ct,v,d),c&&(c.style.cssText="pointer-events: bounding-box; cursor: "+(!t.toggleVisibility&&("None"===n.selectionMode||"None"===n.highlightMode||"None"===n.selectionMode)||this.isBulletChartControl?"auto":"pointer")),et&&et.appendChild(c),st=s),v++;this.totalPages=this.isPaging&&!this.isBulletChartControl&&!this.legend.enablePages&&!this.isVertical&&this.totalPages>this.chartRowCount?this.chartRowCount:this.totalPages;this.currentPage=this.currentPage>1&&this.currentPage>this.totalPages?this.totalPages:this.currentPage;this.isPaging&&this.totalPages>1?this.renderPagingElements(n,u,ct,nt):this.totalPages=1}e?(vt="translate("+(this.rowCount>1?0:Math.round(Number(rt))-Math.round(this.legendBounds.x))+" \n              + ',' + "+(Math.round(Number(ut))-Math.round(this.legendBounds.y))+")",yt="translate("+(Math.round(Number(rt))-Math.round(this.legendBounds.x))+", "+(Math.round(Number(ut))-Math.round(this.legendBounds.y))+")",o(n.enableCanvas,n.svgObject,nt,f,!0,"x","y",void 0,void 0,void 0,void 0,void 0,n.duration,void 0,void 0,new h(0,0),"Top"===this.position||"Bottom"===this.position?vt:yt)):o(n.enableCanvas,n.svgObject,nt,f)},n.prototype.getLinearLegend=function(n,t,r,u){var kt="http://www.w3.org/2000/svg",a=this.legendCollections[0],ei=this.legendCollections[1],dt=this.chart.renderer.createDefs(),s=document.createElementNS(kt,"linearGradient"),v=[],e=[],nt,ft,f,tt,it,h,gt,rt,et,ot,ni,y,st,p,ri,ui,wt,d,bt,g,fi;for(r.title&&(this.isVertical?(n.y+=this.legendTitleSize.height,n.height-=this.legendTitleSize.height):"Left"===r.titlePosition?(n.x+=this.legendTitleSize.width,n.width-=this.legendTitleSize.width):"Right"===r.titlePosition?n.width-=this.legendTitleSize.width:"Top"===r.titlePosition&&(n.y+=this.legendTitleSize.height,n.height-=this.legendTitleSize.height)),nt=0,ft=this.chart.rangeColorSettings;nt<ft.length;nt++){if(f=ft[nt],e.indexOf(f.start)<0&&e.push(f.start),f.colors.length>2)if(tt=f.end-f.start,it=f.colors.length-1,tt>0)for(tt/=it,h=1;h<it;h++)gt=f.start+tt*h,e.push(gt);else for(h=1;h<it;h++)e.push(f.start);for(e.indexOf(f.end)<0&&e.push(f.end),rt=0,et=f.colors;rt<et.length;rt++)ot=et[rt],v.indexOf(ot)<0&&v.push(ot);f.colors.length>0&&f.colors.length<2&&v.push(f.colors[0])}var oi=this.isRtlEnable&&!this.isVertical?"100%":"0%",si=this.isVertical||this.isRtlEnable?"0%":"100%",hi=this.isVertical?"100%":"0%";for(s.setAttribute("id",this.generateId(a,"linearGradient",0)),s.setAttribute("x1",oi),s.setAttribute("y1","0%"),s.setAttribute("x2",si),s.setAttribute("y2",hi),ni=e[e.length-1]-e[0],y=0;y<v.length;y++)st=e[y]-e[0],st/=ni,p=document.createElementNS(kt,"stop"),p.setAttribute("offset",st.toString()),p.setAttribute("stop-color",v[y]),p.setAttribute("stop-opacity",1..toString()),s.appendChild(p);var ht,lt,at,vt,ti=a.text.toString(),ii=ei.text.toString(),w=i.measureText(ti,r.textStyle,this.chart.themeStyle.legendLabelFont),b=i.measureText(ii,r.textStyle,this.chart.themeStyle.legendLabelFont),c=w.width>b.width?w.width:b.width,k=w.height>b.height?w.height:b.height,yt=2*c+4*r.padding,o=n.width,l=n.height,pt=n.x+c+2*r.padding,ut=n.y+r.padding;this.isVertical?(yt=2*k+4*r.padding,o=n.width-2*r.padding,l=n.height-yt,pt=n.x+r.padding,ut=n.y+k+2*r.padding,ht=n.y+r.padding+k,lt=ut+l+k,vt=at=n.x+.5*n.width-.5*c,o>30)&&(ri=o-30,o=30,pt+=ri/2):(o=n.width-yt,l=n.height-2*r.padding,at=n.x+(this.isRtlEnable?o+3*r.padding+c:r.padding+(c-w.width)),vt=n.x+(this.isRtlEnable?r.padding+(c-b.width):o+3*r.padding+c),lt=ht=n.y+.5*n.height+.25*k,l>30)&&(ui=l-30,l=30,ut+=ui/2);wt=t.enableRtl?"end":"";d=new i.TextOption("",at,ht,wt,ti);d.id=this.legendID+this.generateId(a,"_text_",1);bt=a.visible?r.textStyle.color||t.themeStyle.legendLabelFont.color:"#D3D3D3";g=!this.isStockChartControl&&this.chart.enableCanvas;ct(t.renderer,d,r.textStyle,bt,u,!1,!1,!1,!1,null,this.currentPageNumber&&g?new i.Rect(0,-this.translatePage(g,null,this.currentPageNumber-1,this.currentPageNumber),0,0):null,0,null,null,null,this.chart.themeStyle.legendLabelFont);(d=new i.TextOption("",vt,lt,wt,ii)).id=this.legendID+this.generateId(a,"_text_",2);ct(t.renderer,d,r.textStyle,bt,u,!1,!1,!1,!1,null,this.currentPageNumber&&g?new i.Rect(0,-this.translatePage(g,null,this.currentPageNumber-1,this.currentPageNumber),0,0):null,0,null,null,null,this.chart.themeStyle.legendLabelFont);fi=t.renderer.drawRectangle({width:o,height:l,x:pt,y:ut,fill:"url(#"+this.generateId(a,"linearGradient",0)+")"});dt.appendChild(s);u.appendChild(dt);u.appendChild(fi)},n.prototype.findFirstLegendPosition=function(n){for(var t,r=0,i=0,u=n;i<u.length;i++){if(t=u[i],t.render&&t.text&&""!==t.text)break;r++}return r},n.prototype.calculateLegendTitle=function(n,t){var r,u;n.title?(this.isTop="Top"===n.titlePosition,r="Trim"===n.titleStyle.textOverflow?2*n.padding:0,this.isTop||this.isVertical?this.legendTitleCollections=tu(n.title,n.titleStyle,t.width-r,this.chart.enableRtl,this.chart.themeStyle.legendTitleFont):this.legendTitleCollections[0]=wi(n.maximumTitleWidth,n.title,n.titleStyle,this.chart.enableRtl,this.chart.themeStyle.legendTitleFont),u=this.isTop?n.title:this.legendTitleCollections[0],this.legendTitleSize=i.measureText(u,n.titleStyle,this.chart.themeStyle.legendTitleFont),this.legendTitleSize.height*=this.legendTitleCollections.length):this.legendTitleSize=new i.Size(0,0)},n.prototype.renderLegendTitle=function(n,t,r,u){var o=t.padding,s=t.titleStyle.textAlignment,e,f;this.isTop="Top"===t.titlePosition;e=bu(t.titleStyle.textAlignment,n.enableRtl);f=pr(r,t.titleStyle);e=this.isTop||this.isVertical?e:n.enableRtl?"end":"";f="Near"===s?f+o:"Far"===s?f-o:f;f=this.isTop||this.isVertical?f:r.x+("Left"===t.titlePosition?5:r.width-this.legendTitleSize.width-5);var h=r.height/2+this.legendTitleSize.height/4,c=r.y+(this.isTop||this.isVertical?this.legendTitleSize.height/this.legendTitleCollections.length:h),l=new i.TextOption(this.legendID+"_title",f,c,e,this.legendTitleCollections);ct(n.renderer,l,t.titleStyle,t.titleStyle.color||this.chart.themeStyle.legendTitleFont.color,u,null,null,null,null,null,null,0,null,null,null,this.chart.themeStyle.legendTitleFont)},n.prototype.createLegendElements=function(n,t,i,r,u,f){var l=r.padding,e=new ft(u+"_element",r.background,r.border,r.opacity,t,0,0,"",this.legend.border.dashArray),h=n.renderer.createGroup({id:u+"_collections"}),s=!this.isStockChartControl&&n.enableCanvas,c=n.renderer.createClipPath({id:u+"_clipPath"});return e.width=!this.isRtlEnable||"accumulationchart"!==this.chart.getModuleName()||!this.isVertical||"Auto"!==r.layout||r.maximumColumns>0?t.width:this.maxWidth,i?i.appendChild(n.renderer.drawRectangle(e)):n.renderer.drawRectangle(e),r.title&&this.renderLegendTitle(n,r,t,i),s||i.appendChild(h),this.legendTranslateGroup=n.renderer.createGroup({id:u+"_translate_g"}),s||h.appendChild(this.legendTranslateGroup),e.y+=(this.isTop?this.legendTitleSize.height:0)+(this.isBulletChartControl?0:r.containerPadding.top),e.height-=(!this.isTop||!this.isChartControl&&this.isVertical&&"Auto"===r.layout?0:this.legendTitleSize.height)+(this.isBulletChartControl?0:r.containerPadding.top),e.id+="_clipPath_rect",e.width=this.isChartControl||"bulletChart"===n.getModuleName()||this.isStockChartControl||"accumulationchart"===n.getModuleName()&&("Auto"!==r.layout||r.maximumColumns>0)||!this.isVertical?t.width:this.maxWidth-l+r.containerPadding.left+r.containerPadding.right,e.width="Right"===n.legendSettings.titlePosition?e.width-this.legendTitleSize.width-l:e.width,s?this.pagingClipRect=e:(this.clipRect=n.renderer.drawRectangle(e),c.appendChild(this.clipRect)),o(s,n.svgObject,c,f),s||(h.style.cssText="clip-path:url(#"+c.id+")"),this.legendTranslateGroup},n.prototype.renderSymbol=function(n,t,r){var w,a,s=this.isBulletChartControl?this.chart:null,h=n.visible?n.fill:"#D3D3D3",it=("chart"===this.chart.getModuleName()||"stockChart"===this.chart.getModuleName())&&("SeriesType"===n.shape&&n.type.toLowerCase().indexOf("line")>-1&&-1===n.type.toLowerCase().indexOf("area")||"HorizontalLine"===n.shape||"VerticalLine"===n.shape||"Cross"===n.shape),b=!("chart"!==this.chart.getModuleName()&&"stockChart"!==this.chart.getModuleName()||"Scatter"!==n.type&&"Bubble"!==n.type),c=!this.isStockChartControl&&this.chart.enableCanvas,u="SeriesType"===n.shape?n.type:n.shape,k=it?"Series"===this.legend.mode?this.chart.visibleSeries[r].width:this.chart.visibleSeries[0].width:this.isBulletChartControl&&"Multiply"===n.shape?4:1,tt,p,e,o;if(u="Scatter"===u?n.markerShape:u,b&&r<this.chart.visibleSeries.length){var d=this.chart.visibleSeries[r],l=d.border,g="HorizontalLine"===u||"VerticalLine"===u;w=g?h:l.color?l.color:h;k=g?d.width:l.width?l.width:1}for(var f=new i.PathOption(this.legendID+this.generateId(n,"_shape_",r),h,k,b?w:h,this.legend.opacity,n.dashArray,""),rt=i.measureText(n.text,this.legend.textStyle,this.chart.themeStyle.legendLabelFont),v=0,y=0,nt=n.textCollection;y<nt.length;y++)tt=nt[y],p=i.measureText(tt,this.legend.textStyle,this.chart.themeStyle.legendLabelFont),p.width>v&&(v=p.width);e=this.legend.isInversed&&!this.isRtlEnable?n.location.x+("Wrap"===this.legend.textWrap&&n.textCollection.length>1?v:rt.width)+this.legend.shapePadding:n.location.x;o=n.location.y;c?(a=-this.translatePage(c,null,this.currentPageNumber-1,this.currentPageNumber),tr({x:e,y:o},u,new i.Size(this.legend.shapeWidth,this.legend.shapeHeight),"",f,this.accessbilityText,this.chart.renderer,this.currentPageNumber?new i.Rect(0,a,0,0):null,this.isBulletChartControl,s),this.legendRegions.push({rect:new i.Rect(n.location.x-this.legend.shapeWidth,n.location.y,this.legend.shapeWidth+this.legend.shapePadding,this.legend.shapeHeight+a),index:r})):t.appendChild(tr({x:e,y:o},u,new i.Size(this.legend.shapeWidth,this.legend.shapeHeight),n.url,f,this.accessbilityText,this.chart.renderer,null,this.isBulletChartControl,s));("Line"===u&&n.markerVisibility&&"Image"!==n.markerShape||"Doughnut"===n.type&&"Doughnut"===u)&&(f.id=this.legendID+this.generateId(n,"_shape_marker_",r),u="Doughnut"===n.type?"Circle":n.markerShape,f.fill="Doughnut"===n.type?"#FFFFFF":f.fill,c?tr({x:e,y:o},u,new i.Size(this.legend.shapeWidth/2,this.legend.shapeHeight/2),"",f,this.accessbilityText,this.chart.renderer,this.currentPageNumber?new i.Rect(0,-this.translatePage(c,null,this.currentPageNumber-1,this.currentPageNumber),0,0):null,this.isBulletChartControl,s):t.appendChild(tr({x:e,y:o},u,new i.Size(this.legend.shapeWidth/2,this.legend.shapeHeight/2),"",f,this.accessbilityText,null,null,this.isBulletChartControl,s)))},n.prototype.renderText=function(n,t,r,u,f,e){var v=this,o=n.legendSettings,y=t.visible?o.textStyle.color||n.themeStyle.legendLabelFont.color:"#D3D3D3",c=!this.isStockChartControl&&this.chart.enableCanvas,a;if((u.id=this.legendID+this.generateId(t,"_text_",e),u.text=t.textCollection.length>0?t.textCollection:t.text,o.isInversed&&!this.isRtlEnable)?u.x=t.location.x-o.shapeWidth/2:this.isRtlEnable?(a=t.textCollection.length>1?Math.max.apply(Math,t.textCollection.map(function(n){return i.measureText(n,o.textStyle,v.chart.themeStyle.legendLabelFont).width})):i.measureText(t.text,o.textStyle,this.chart.themeStyle.legendLabelFont).width,u.x="bulletChart"===this.chart.getModuleName()?t.location.x-o.shapeWidth:t.location.x-(a+o.shapeWidth/2+o.shapePadding)):u.x=t.location.x+o.shapeWidth/2+o.shapePadding,u.y=t.location.y+this.maxItemHeight/4,ct(n.renderer,u,o.textStyle,y,r,!1,!1,!1,!1,null,this.currentPageNumber&&c?new i.Rect(0,-this.translatePage(c,null,this.currentPageNumber-1,this.currentPageNumber),0,0):null,0,null,null,null,this.chart.themeStyle.legendLabelFont),c){for(var l=i.measureText(t.text,o.textStyle,this.chart.themeStyle.legendLabelFont),s=void 0,h=0;h<this.legendRegions.length;h++)if(this.legendRegions[h].index===f){s=this.legendRegions[h];break}s.rect.y=u.y<s.rect.y?u.y:s.rect.y;s.rect.width+=l.width;s.rect.height=l.height;s.rect.y-=.5*l.height;s.rect.x-=this.isRtlEnable?s.rect.width:0}},n.prototype.renderPagingElements=function(n,r,u,f){var l=n.renderer.createGroup({id:this.legendID+"_navigation"}),a=!this.isStockChartControl&&n.enableCanvas,p=this.isBulletChartControl?0:this.legendTitleSize.height,nt=this.chart.theme.indexOf("Dark")>-1||this.chart.theme.indexOf("Contrast")>-1?"#FFFFFF":"#545454",e=n.legendSettings,tt=this.legendID+(this.isRtlEnable?"_pagedown":"_pageup"),it=this.legendID+(this.isRtlEnable?"_pageup":"_pagedown"),c=new i.PathOption(tt,"transparent",5,nt,1,"",""),o=n.availableSize.width<110||n.availableSize.height<190?4:this.pageButtonSize,w=t.extend({},t.getValue("properties",e.textStyle),null,!0),b,k,d,s,h,v,y,g;w.size=n.availableSize.width<110||n.availableSize.height<190&&!this.isBulletChartControl&&"accumulationchart"===this.chart.getModuleName()?"8px":e.textStyle.size;k=e.enablePages||!this.isPaging||this.isVertical||this.isBulletChartControl?this.rowCount-1:1;d=this.isTitle&&"Left"===e.titlePosition?this.legendTitleSize.width:0;this.pagingRegions=[];this.backwardArrowOpacity=1!==this.currentPage?1:0;this.forwardArrowOpacity=this.currentPage===this.totalPages?0:1;a||f.appendChild(l);this.isChartControl||this.isAccChartControl||(this.totalPages=this.isBulletChartControl||this.isStockChartControl||!this.isVertical?Math.ceil(this.totalPages/Math.max(1,this.rowCount-1)):Math.ceil(this.totalPages/this.maxColumns));l&&(l.style.cursor="pointer");this.clipPathHeight=!this.isChartControl&&!this.isAccChartControl||!e.enablePages&&this.isPaging?k*(this.maxItemHeight+e.padding):this.pageHeights[0]-(this.isTitle&&this.isTop&&(this.isChartControl||!this.isVertical||"Auto"!==e.layout)?this.legendTitleSize.height:0)-e.containerPadding.top-e.containerPadding.bottom;a?(this.pagingClipRect.height=this.legendBounds.height-this.clipPathHeight-(this.pagingClipRect.y-this.legendBounds.y)-e.border.width,this.pagingClipRect.y=this.pagingClipRect.y+this.clipPathHeight,this.pagingClipRect.x+=e.border.width,this.pagingClipRect.width-=e.border.width+e.border.width/2,this.chart.renderer.clearRect(new i.Rect(this.pagingClipRect.x,this.pagingClipRect.y,this.pagingClipRect.width,this.pagingClipRect.height))):this.clipRect.setAttribute("height",this.clipPathHeight.toString());s=r.x+o/2;h=r.y+this.clipPathHeight+(p+r.height-this.clipPathHeight)/2;!this.isPaging||e.enablePages||this.isVertical||this.isBulletChartControl||(s=r.x+this.pageButtonSize+d,h=e.title&&this.isTop?r.y+8+p+o/1+.5:r.y+8+o+.5);v=i.measureText(this.totalPages+"/"+this.totalPages,w,this.chart.themeStyle.legendLabelFont);y=this.isRtlEnable?e.border.width+o/2:r.width-(2*(o+8)+8+v.width);a?tr({x:s,y:h},"LeftArrow",new i.Size(o,o),"",c,0,this.chart.renderer,new i.Rect(y,0,0,0)):!this.isVertical||e.enablePages||this.isBulletChartControl?(c.opacity=this.isBulletChartControl?c.opacity:e.enablePages?1:this.isRtlEnable?this.forwardArrowOpacity:this.backwardArrowOpacity,l.appendChild(tr({x:s,y:h},"LeftArrow",new i.Size(o,o),"",c))):(s=r.x+r.width/2,h=r.y+o/2+4+p,c.opacity=this.backwardArrowOpacity,l.appendChild(tr({x:s,y:h},"UpArrow",new i.Size(o,o),"",c)));this.pagingRegions.push(new i.Rect(this.isRtlEnable?s:s+r.width-(2*(o+8)+8+v.width)-.5*o,h-.5*o,o,o));u.x=s+o/2+8;u.y=h+v.height/4;u.id=this.legendID+"_pagenumber";u.text=this.isRtlEnable?this.totalPages+"/1":"1/"+this.totalPages;g=this.chart.theme.indexOf("Dark")>-1||this.chart.theme.indexOf("Contrast")>-1?"#FFFFFF":e.textStyle.color||"Tailwind3"===this.chart.theme?"#111827":"Tailwind3Dark"===this.chart.theme?"#FFFFFF":this.chart.themeStyle.legendLabelFont.color;a&&this.totalNoOfPages&&(u.text=this.isRtlEnable?this.totalNoOfPages+"/"+this.currentPageNumber:this.currentPageNumber+"/"+this.totalNoOfPages);(e.enablePages||this.isBulletChartControl)&&(b=ct(n.renderer,u,w,g,l,!1,!1,!1,!1,null,new i.Rect(y,0,0,0),0,null,null,null,this.chart.themeStyle.legendLabelFont));s=u.x+8+o/2+v.width;!this.isPaging||e.enablePages||this.isBulletChartControl||this.isVertical||(s=r.x+r.width-(this.isBulletChartControl?this.fivePixel:0)-this.pageButtonSize-(e.title&&"Right"===e.titlePosition?this.legendTitleSize.width+this.fivePixel:0));c.id=it;c.opacity=e.enablePages?1:this.isRtlEnable?this.backwardArrowOpacity:this.forwardArrowOpacity;a?tr({x:s,y:h},"RightArrow",new i.Size(o,o),"",c,0,this.chart.renderer,new i.Rect(y,0,0,0)):!this.isVertical||e.enablePages||this.isBulletChartControl?l.appendChild(tr({x:s,y:h},"RightArrow",new i.Size(o,o),"",c)):(s=r.x+r.width/2,h=r.y+r.height-o/2,l.appendChild(tr({x:s,y:h},"DownArrow",new i.Size(o,o),"",c)));this.pagingRegions.push(new i.Rect(this.isRtlEnable?s:s+(r.width-(2*(o+8)+8+v.width)-.5*o),h-.5*o,o,o));a||!e.enablePages&&!this.isBulletChartControl?(1===this.currentPageNumber&&this.calTotalPage&&(e.enablePages||this.isBulletChartControl)&&(this.totalNoOfPages=this.totalPages,this.calTotalPage=!1),e.enablePages||this.isBulletChartControl||this.translatePage(a,null,this.currentPage-1,this.currentPage,e)):l.setAttribute("transform","translate("+y+", 0)");(e.enablePages||this.isBulletChartControl)&&this.translatePage(a,b,this.currentPage-1,this.currentPage,e)},n.prototype.getPageHeight=function(n,t){for(var r=0,i=0;i<t;i++)r+=n[i]-(this.isTitle&&this.isTop?this.legendTitleSize.height:0);return r},n.prototype.translatePage=function(n,t,i,r,u){var f=this.isChartControl||this.isAccChartControl?i?this.getPageHeight(this.pageHeights,i):0:this.clipPathHeight*i,e,o;return!n&&(this.isChartControl||this.isAccChartControl)&&(this.clipRect.setAttribute("height",(this.pageHeights[i]-(this.isTitle&&this.isTop&&(this.isChartControl||!this.isVertical||"Auto"!==u.layout)?this.legendTitleSize.height:0)-u.containerPadding.top-u.containerPadding.bottom).toString()),this.isAccChartControl&&this.isPaging&&!u.enablePages&&this.isVertical&&("accumulationchart"!==this.chart.getModuleName()||"Auto"===u.layout)&&this.clipRect.setAttribute("height",this.legendBounds.height.toString())),e="translate(0,-"+f+")",this.isChartControl||this.isBulletChartControl||this.isStockChartControl||"accumulationchart"===this.chart.getModuleName()&&"Auto"!==u.layout||!this.isVertical||(o=this.pageXCollections[i*this.maxColumns],f=(f=this.isRtlEnable?this.legendBounds.x+this.maxWidth-o:o-this.legendBounds.x)<0?0:f,e=(this.isRtlEnable?"translate(":"translate(-")+f+",0)"),this.chart.enableCanvas||this.legendTranslateGroup.setAttribute("transform",e),this.chart.enableCanvas||!u.enablePages&&!this.isBulletChartControl||(t.textContent=r+"/"+this.totalPages),this.currentPage=r,f},n.prototype.changePage=function(n,t){var r=this.chart.legendSettings,f=document.getElementById(this.legendID+"_pageup"),e=document.getElementById(this.legendID+"_pagedown"),o=!this.isStockChartControl&&this.chart.enableCanvas,u=r.enablePages||this.isBulletChartControl?document.getElementById(this.legendID+"_pagenumber"):null,i=r.enablePages||this.isBulletChartControl?parseInt(u.textContent.split("/")[0],10):this.currentPage;t&&i>1?this.translatePage(o,u,i-2,i-1,r):!t&&i<this.totalPages&&this.translatePage(o,u,i,i+1,r);!this.isPaging||r.enablePages||this.isBulletChartControl||(this.currentPage===this.totalPages?this.hideArrow(e):this.showArrow(e),1===this.currentPage?this.hideArrow(f):this.showArrow(f))},n.prototype.hideArrow=function(n){n.setAttribute("opacity","0")},n.prototype.showArrow=function(n){n.setAttribute("opacity","1")},n.prototype.generateId=function(n,t,i){return this.isChartControl||this.isStockChartControl?t+i:t+n.pointIndex},n.prototype.move=function(n){var o=this,f=this.chart.mouseX,e=this.chart.mouseY,u,t,i;n.target.textContent.indexOf("...")>-1?(u=n.target.id.split(this.legendID+"_text_"),2===u.length&&(t=parseInt(u[1],10),i=this.chart.element,isNaN(t)||(this.chart.isTouch&&v(this.chart.element.id+"_EJ2_Legend_Tooltip"),this.isChartControl?uf(this.chart.series[t].name,f,e,i.offsetWidth,i.id+"_EJ2_Legend_Tooltip",r(this.chart.element.id+"_Secondary_Element"),null,null,this.legendBounds):uf("accumulationchart"===this.chart.getModuleName()?this.legendCollections[t].originalText:this.chart.visibleSeries[0].points[t].x.toString(),f+10,e+10,i.offsetWidth,i.id+"_EJ2_Legend_Tooltip",r(this.chart.element.id+"_Secondary_Element"))))):v(this.chart.element.id+"_EJ2_Legend_Tooltip");this.chart.isTouch&&(clearTimeout(this.clearTooltip),this.clearTooltip=+setTimeout(function(){v(o.chart.element.id+"_EJ2_Legend_Tooltip")},1e3))},n}(),br=function(){return function(n,t,i,r,u,f,e,o,s,h,c,l){this.location={x:0,y:0};this.textCollection=[];this.text=n;this.fill=t;this.shape=i;this.url=f;this.visible=r;this.type=u;this.markerVisibility=o;this.markerShape=e;this.pointIndex=s;this.seriesIndex=h;this.dashArray=c;this.originalText=l}}(),aut=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ki=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},vv=function(n){function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.clipRect=new i.Rect(0,0,0,0),t}return aut(r,n),r.prototype.setDataSource=function(n,t){n&&(this.xData=n.xData,this.yData=n.yData,this.points=n.points);var i=et(this.type);this.visible&&t[i+"IndicatorModule"].initDataSource(this,t);t.visibleSeriesCount+=this.targetSeries.length},ki([t.Property("Sma")],r.prototype,"type",void 0),ki([t.Property(14)],r.prototype,"period",void 0),ki([t.Property(14)],r.prototype,"kPeriod",void 0),ki([t.Property(3)],r.prototype,"dPeriod",void 0),ki([t.Property(80)],r.prototype,"overBought",void 0),ki([t.Property(20)],r.prototype,"overSold",void 0),ki([t.Property(2)],r.prototype,"standardDeviation",void 0),ki([t.Property("Close")],r.prototype,"field",void 0),ki([t.Property(12)],r.prototype,"slowPeriod",void 0),ki([t.Property(26)],r.prototype,"fastPeriod",void 0),ki([t.Property(!0)],r.prototype,"showZones",void 0),ki([t.Complex({color:"#ff9933",width:2},ye)],r.prototype,"macdLine",void 0),ki([t.Property("Both")],r.prototype,"macdType",void 0),ki([t.Property("#2ecd71")],r.prototype,"macdPositiveColor",void 0),ki([t.Property("#e74c3d")],r.prototype,"macdNegativeColor",void 0),ki([t.Property("rgba(211,211,211,0.25)")],r.prototype,"bandColor",void 0),ki([t.Complex({color:"#ffb735",width:1},ye)],r.prototype,"upperLine",void 0),ki([t.Complex({color:"#f2ec2f",width:1},ye)],r.prototype,"lowerLine",void 0),ki([t.Complex({color:"#f2ec2f",width:1},ye)],r.prototype,"periodLine",void 0),ki([t.Complex({},lu)],r.prototype,"accessibility",void 0),ki([t.Property("")],r.prototype,"seriesName",void 0),r}(lv),es=function(){function n(n){this.control=n}return n.prototype.print=function(n){this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no");this.printWindow.moveTo(0,0);this.printWindow.resizeTo(screen.availWidth,screen.availHeight);var i={cancel:!1,htmlContent:this.getHTMLContent(n),name:ha};this.control.trigger(ha,i);i.cancel||t.print(i.htmlContent,this.printWindow)},n.prototype.getHTMLContent=function(n){var i=t.createElement("div"),s,c,e,f,h;if(n)if(n instanceof Array)for(s=0;s<n.length;s++)c=n[s],i.appendChild(r(c).cloneNode(!0));else n instanceof Element?i.appendChild(n.cloneNode(!0)):i.appendChild(r(n).cloneNode(!0));else i.appendChild(this.control.element.cloneNode(!0));for(e=0;e<i.children.length;e++){for(var l=this.control.theme.indexOf("Dark")>-1||this.control.theme.indexOf("HighContrast")>-1?"rgba(0, 0, 0, 1)":"rgba(255, 255, 255, 1)",u=i.children[e],o=0;o<u.children.length;o++)f=void 0,h=!1,u.id.indexOf("_stockChart_svg")>-1?(f=u.children[0].getAttribute("fill"),h=!0):u.children[o].id.indexOf("_svg")>-1&&(f=u.children[o].children[0].getAttribute("fill"),h=!0),h&&(f="transparent"===f?l:f,u.children[o].children[0].setAttribute("fill",f));i[e]=u}return i},n}(),ac=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),s=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},nk=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ac(i,n),s([t.Property()],i.prototype,"start",void 0),s([t.Property()],i.prototype,"end",void 0),s([t.Property([])],i.prototype,"colors",void 0),s([t.Property("")],i.prototype,"label",void 0),i}(t.ChildProperty),yv=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ac(i,n),s([t.Property(!1)],i.prototype,"enable",void 0),s([t.Property("")],i.prototype,"dashArray",void 0),s([t.Complex({color:null,width:1},yt)],i.prototype,"line",void 0),s([t.Property("Both")],i.prototype,"lineType",void 0),s([t.Property("")],i.prototype,"verticalLineColor",void 0),s([t.Property("")],i.prototype,"horizontalLineColor",void 0),s([t.Property(1)],i.prototype,"opacity",void 0),s([t.Property(!1)],i.prototype,"snapToData",void 0),s([t.Property(!1)],i.prototype,"highlightCategory",void 0),i}(t.ChildProperty),pv=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ac(i,n),s([t.Property(!1)],i.prototype,"enableSelectionZooming",void 0),s([t.Property(!1)],i.prototype,"enablePinchZooming",void 0),s([t.Property(!1)],i.prototype,"showToolbar",void 0),s([t.Property(!1)],i.prototype,"enableMouseWheelZooming",void 0),s([t.Property(!0)],i.prototype,"enableDeferredZooming",void 0),s([t.Property("XY")],i.prototype,"mode",void 0),s([t.Property(["Zoom","ZoomIn","ZoomOut","Pan","Reset"])],i.prototype,"toolbarItems",void 0),s([t.Property(!1)],i.prototype,"enablePan",void 0),s([t.Property(!1)],i.prototype,"enableScrollbar",void 0),s([t.Property(!1)],i.prototype,"enableAnimation",void 0),s([t.Complex({},ow)],i.prototype,"toolbarPosition",void 0),s([t.Complex({},lu)],i.prototype,"accessibility",void 0),i}(t.ChildProperty),wv=function(n){function u(i,r){var u=n.call(this,i,r)||this;return u.rotatedDataLabelCollections=[],u.animated=!1,u.isPointMouseDown=!1,u.isScrolling=!1,u.checkResize=0,u.visible=0,u.clickCount=0,u.maxPointCount=0,u.singleClickTimer=0,u.chartAreaType="Cartesian",u.isRtlEnabled=!1,u.isCrosshair=!0,u.chartid=57723,u.isLegendClicked=!1,u.isZoomed=!1,u.previousTargetId="",u.currentPointIndex=0,u.currentSeriesIndex=0,u.currentLegendIndex=0,u.previousPageX=null,u.previousPageY=null,u.allowPan=!1,u.pointsRemoved=!1,u.pointsAdded=!1,u.zoomRedraw=!1,t.setValue("mergePersistData",u.mergePersistChartData,u),u}return ac(u,n),u.prototype.mergePersistChartData=function(){var u=window.localStorage.getItem(this.getModuleName()+this.element.id),i,e,r,f,n;if(!t.isNullOrUndefined(u)&&""!==u){for(i=JSON.parse(u),e=Object.keys(i),this.isProtectedOnChange=!0,r=0,f=e;r<f.length;r++)n=f[r],"object"!=typeof this[n]||t.isNullOrUndefined(this[n])?this[n]=i[n]:t.extend(this[n],i[n]);this.isProtectedOnChange=!1}},u.prototype.isIdHasSpecialCharacter=function(n){var u=/^[A-Za-z ]+$/,f=/^[0-9 ]+$/,i="",r,t;if(u.test(n))return n;for(r=0,f.test(n[0])&&(i+="\\3"+n[0],r=1),t=r;t<n.length;t++)i+=u.test(n[t])||-1!==n.indexOf("-")||-1!==n.indexOf("_")||-1!==n.indexOf("\\")||f.test(n[t])?n[t]:"\\"+n[t];return i},u.prototype.preRender=function(){this.element.id=this.isIdHasSpecialCharacter(this.element.id);this.isBlazor=window.Blazor;this.allowServerDataBinding=!1;this.markerIndex=0;this.unWireEvents();this.initPrivateVariable();this.setCulture();this.wireEvents();this.stockChart&&(null===this.stockChart.tooltip.header&&(this.tooltip.header=this.stockChart.theme.indexOf("Tailwind3")>-1?"${point.x}":"<b>${point.x}<\/b>"),null===this.stockChart.tooltip.format&&(this.tooltip.format=this.stockChart.theme.indexOf("Tailwind3")>-1?"High : ${point.high}<br/>Low : ${point.low}<br/>Open : ${point.open}<br/>Close : ${point.close}":"High : <b>${point.high}<\/b><br/>Low : <b>${point.low}<\/b><br/>Open : <b>${point.open}<\/b><br/>Close : <b>${point.close}<\/b>"));this.element.setAttribute("dir",this.enableRtl?"rtl":"ltr")},u.prototype.initPrivateVariable=function(){if(this.animateSeries=!0,this.delayRedraw=!1,this.dragY=null,this.horizontalAxes=[],this.verticalAxes=[],this.refreshAxis(),this.refreshDefinition(this.rows),this.refreshDefinition(this.columns),this.tooltipModule&&(this.tooltipModule.previousPoints=[]),this.element.setAttribute("role",this.accessibility.accessibilityRole?this.accessibility.accessibilityRole:"region"),this.element.setAttribute("tabindex",this.accessibility.focusable?String(this.accessibility.tabIndex):"-1"),this.element.style.outline="none",this.element.setAttribute("aria-label",this.accessibility.accessibilityDescription?this.accessibility.accessibilityDescription:this.title+". Syncfusion interactive chart."),this.element.classList.contains("e-chart-focused")||this.element.setAttribute("class",this.element.getAttribute("class")+" e-chart-focused"),""===this.element.id){for(var n=document.getElementsByClassName("e-chart").length,t="chart_"+this.chartid+"_"+n;document.getElementById(t);)n++,t="chart_"+this.chartid+"_"+n;this.element.id="chart_"+this.chartid+"_"+n}this.svgId=this.stockChart?this.stockChart.element.id+"_stockChart_chart":this.element.id+(this.enableCanvas?"_canvas":"_svg")},u.prototype.render=function(){var t=this,n;this.svgRenderer=new i.SvgRenderer(this.element.id);n={chart:this.isBlazor?{}:this,theme:this.theme,name:ne,cancel:!1};this.stockChart?(this.isRtlEnabled="rtl"===window.getComputedStyle(document.querySelector("body")).direction,this.cartesianChartRendering(n)):this.trigger(ne,n,function(){n.cancel||t.cartesianChartRendering(n)});this.applyZoomkit()},u.prototype.cartesianChartRendering=function(n){this.theme=this.isBlazor?n.theme:this.theme;this.setTheme();this.createChartSvg();this.markerRender=new cut(this);this.calculateAreaType();this.calculateVisibleSeries();this.initTechnicalIndicators();this.initTrendLines();this.calculateVisibleAxis();this.processData();this.renderComplete();this.mouseMoveEvent();this.allowServerDataBinding=!0},u.prototype.getLocalizedLabel=function(n){return this.localeObject.getConstant(n)},u.prototype.animate=function(n){if(this.redraw=!0,this.animated=!0,this.duration=n||1e3,this.tooltipModule)this.tooltipModule.removeHighlightedMarker(this.tooltipModule.previousPoints,!0);else if(this.markerRender.previousPoints)for(var t=0;t<this.markerRender.previousPoints.length;t++)this.markerRender.removeHighlightedMarker(this.markerRender.previousPoints[t].series,this.markerRender.previousPoints[t].point)},u.prototype.refreshBound=function(){this.rotatedDataLabelCollections=[];this.legendModule&&this.legendSettings.visible&&this.legendModule.getLegendOptions(this.visibleSeries,this);this.tooltip.enable&&this.tooltipModule&&(this.tooltipModule.previousPoints=[]);this.calculateStackValues();this.calculateBounds();var n=this.series.every(function(n){return 0===(n.dataSource||[]).length});if(this.stockChart&&!this.stockChart.rangeFound&&(this.stockChart.enablePeriodSelector||this.stockChart.enableSelector))return null;this.renderElements();this.renderNoDataTemplate(n&&!t.isNullOrUndefined(this.noDataTemplate));v("chartmeasuretext");this.removeSelection();this.markerRender&&this.markerRender.mergeXvalues(this.visibleSeries)},u.prototype.renderNoDataTemplate=function(n){var c=this.element.querySelector("#"+this.element.id+"_NoDataTemplate_wrapper"),h,u;if(c&&c.remove(),n){var y=this.enableHtmlSanitizer?this.sanitize(this.noDataTemplate):this.noDataTemplate,s=t.createElement("div",{id:this.element.id+"_NoDataTemplate_wrapper"}),f=0,l=this.element.querySelector("#"+this.element.id+"_ChartBorder");l&&(h=l.getAttribute("stroke-width"),f=h?parseFloat(h):0);var a=f,v=f,e=this.availableSize.width-2*f,o=this.availableSize.height-2*f;if(this.title){u=(this.title?i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont).height:0)+(this.subTitle?i.measureText(this.subTitle,this.subTitleStyle,this.themeStyle.chartSubTitleFont).height:0)+(this.subTitle?5:0);switch(this.titleStyle.position){case"Top":a=u+11;o-=u+11;break;case"Left":v=u+11;e-=u+11;break;case"Bottom":o=o-u-16;break;case"Right":e=e-u-11}}s.style.cssText="position: absolute; top: "+a+"px; left: "+v+"px; width: "+e+"px;\n            height: "+o+"px; z-index: 1;\n        ";r(this.element.id+"_Secondary_Element").appendChild(s);ee(s,null,y,this,null,null,this.element.id+"_NoData")}},u.prototype.calculateStackValues=function(){for(var n,i=!1,t=0,r=this.visibleSeries.length;t<r;t++)(n=this.visibleSeries[t]).visible&&(n.position=n.rectCount=void 0),-1===n.type.indexOf("Stacking")&&(-1===n.drawType.indexOf("Stacking")||"PolarRadar"!==this.chartAreaType)||i||(n.calculateStackedValue(n.type.indexOf("100")>-1,this),i=!0)},u.prototype.removeSelection=function(){for(var f,t,e,n=0,u=this.visibleSeries;n<u.length;n++)if(f=u[n],f.visible)for(t=0,e=f.points;t<e.length;t++)e[t].isSelect=!1;r(this.element.id+"_ej2_drag_multi_group")?(this.selectionMode.indexOf("Drag")>-1&&(this.selectionModule.filterArray=[]),v(this.element.id+"_ej2_drag_multi_group"),this.selectionModule.calculateDragSelectedElements(this,new i.Rect(0,0,0,0),!0)):r(this.element.id+"_ej2_drag_group")&&("Lasso"!==this.selectionMode&&(this.selectionModule.filterArray=[]),v(this.element.id+"_ej2_drag_group"),this.selectionModule.calculateDragSelectedElements(this,new i.Rect(0,0,0,0),!0))},u.prototype.renderElements=function(){var n,i,r;for(this.renderBorder(),this.renderTitle(),this.renderAreaBorder(),this.renderSeriesElements(this.renderAxes()),this.renderLegend(),this.applyZoomkit(),this.performSelection(),this.setSecondaryElementPosition(),n=0,i=this.visibleSeries;n<i.length;n++)r=i[n],t.updateBlazorTemplate(this.element.id+"_DataLabel","Template",r.marker.dataLabel);this.renderAnnotation();this.stackLabels.visible&&this.visibleSeries.some(function(n){return n.type&&n.type.indexOf("Stacking")>-1})&&this.dataLabelModule&&this.dataLabelModule.renderStackLabels()},u.prototype.renderAxes=function(){var n;return this.yAxisElements=this.renderer.createGroup({id:this.element.id+"yAxisCollection"}),this.rows.length>0&&this.columns.length>0&&(n=this.chartAxisLayoutPanel.renderAxes()),this.stripLineModule&&this.stripLineModule.renderStripLine(this,"Behind",this.axisCollections),n},u.prototype.renderLegend=function(){if(this.legendModule&&this.legendModule.legendCollections.length&&this.legendSettings.visible){this.legendModule.calTotalPage=!0;var u=this.legendSettings.border.width,t=this.legendModule.legendBounds,n=new i.Rect(t.x,t.y,t.width,t.height);this.enableCanvas&&(this.canvasRender.ctx.beginPath(),n=new i.Rect(n.x-u/2,n.y-u/2,n.width+u,n.height+u),this.renderer.canvasClip(n));this.legendModule.renderLegend(this,this.legendSettings,t);this.enableCanvas&&this.renderer.canvasRestore()}this.redraw||(this.stockChart?r(this.stockChart.chartObject.id)||this.stockChart.mainObject.appendChild(this.svgObject):this.element.appendChild(this.svgObject))},u.prototype.setSecondaryElementPosition=function(){var n=r(this.element.id+"_Secondary_Element"),t,i;n&&(t=this.element.getBoundingClientRect(),i=r(this.svgId).getBoundingClientRect(),n.style.left=Math.max((i.left-t.left)/this.scaleX,0)+"px",n.style.top=Math.max((i.top-t.top)/this.scaleY,0)+"px")},u.prototype.initializeModuleElements=function(){this.dataLabelCollections=[];this.lastValueLabelCollections=[];var n=this.element.id;this.series.length&&(this.seriesElements=this.svgRenderer.createGroup({id:n+"SeriesCollection"}));this.indicators.length&&(this.indicatorElements=this.renderer.createGroup({id:n+"IndicatorCollection"}));this.hasTrendlines()&&(this.trendLineElements=this.renderer.createGroup({id:n+"TrendLineCollection"}));this.lastValueLabelModule&&(this.lastValueLabelElements=this.renderer.createGroup({id:n+"LastValueLabelCollection"}));this.dataLabelElements=this.renderer.createGroup({id:n+"DataLabelCollection"})},u.prototype.hasTrendlines=function(){for(var t,n=0,i=this.series;n<i.length&&!(t=!!i[n].trendlines.length);n++);return t},u.prototype.renderSeriesElements=function(n){var t,i,r,e,u,s,f;if(this.initializeModuleElements(),t=this.element.id,"g"!==this.element.tagName&&(i=ci(this.redraw,t+"_Secondary_Element")||this.createElement("div"),i.id=t+"_Secondary_Element",i.style.cssText="position: relative",o(!1,this.element,i,this.redraw)),this.enableCanvas&&(r=document.getElementById(t+"_Secondary_Element"),r=r||this.createElement("div",{id:t+"_Secondary_Element",attrs:{style:"position: relative; left:0px; top:0px"}}),e=this.svgRenderer.createSvg({id:t+"_tooltip_svg",width:this.availableSize.width,height:this.availableSize.height}),e.style.cssText="position: absolute; pointer-events: none",r.appendChild(e)),this.tooltip.enable&&!this.stockChart&&o(this.enableCanvas,this.svgObject,this.renderer.createGroup({id:t+"_UserInteraction",style:"pointer-events:none;"}),this.redraw),this.rows.length>0&&this.columns.length>0){if(this.initializeIndicator(),this.initializeTrendLine(),this.renderSeries(),this.enableCanvas)for(u=0,s=this.visibleSeries;u<s.length;u++)f=s[u],f.lastValueLabel.enable&&this.lastValueLabelModule.render(f,this,f.lastValueLabel);this.trendLineElements&&o(this.enableCanvas,this.svgObject,this.trendLineElements,this.redraw);this.appendElementsAfterSeries(n)}},u.prototype.renderSeries=function(){var f,i,r,n,t,e,u;for(this.enableCanvas&&this.renderer.canvasClip(this.chartAxisLayoutPanel.seriesClipRect),i=0,r=this.visibleSeries;i<r.length;i++)n=r[i],(f="TrendLine"===n.category?this.series[n.sourceIndex].trendlines[n.index].visible:n.visible)||n.lastValueLabelElement&&(v(n.lastValueLabelElement.id),n.lastValueLabelElement=null),f?(this.visible++,wo(n,this.enableCanvas),this.enableCanvas&&this.renderCanvasSeries(),n.renderSeries(this)):n.isLegendClicked&&(n.type.indexOf("StackingArea")>-1||n.type.indexOf("StackingBar")>-1||n.type.indexOf("StackingColumn")>-1)&&(wo(n,this.enableCanvas),n.renderSeries(this));this.enableCanvas&&this.renderer.canvasRestore();this.visible=0;t={id:this.element.id+"_ChartAreaClipRect_",x:this.chartAxisLayoutPanel.seriesClipRect.x,y:this.chartAxisLayoutPanel.seriesClipRect.y,width:this.chartAxisLayoutPanel.seriesClipRect.width,height:this.chartAxisLayoutPanel.seriesClipRect.height,fill:"transparent","stroke-width":1,stroke:"Gray"};!this.seriesElements||t.height<0||t.width<0||(e="PolarRadar"===this.chartAreaType?eu(this.redraw,t,this.renderer,"drawCircularClipPath"):eu(this.redraw,t,this.renderer),this.enableCanvas||this.seriesElements.appendChild(e),u=document.getElementById(this.element.id+"_series_svg"),u?o(!1,u,this.seriesElements,this.redraw):o(this.enableCanvas,this.svgObject,this.seriesElements,this.redraw))},u.prototype.renderCanvasSeries=function(){this.enableCanvas||this.svgObject},u.prototype.initializeIndicator=function(){for(var n,t=0,i=this.indicators;t<i.length;t++)n=i[t],this[et(n.type)+"IndicatorModule"]&&this[et(n.type)+"IndicatorModule"].createIndicatorElements(this,n,n.index);this.indicatorElements&&o(this.enableCanvas,this.svgObject,this.indicatorElements,this.redraw)},u.prototype.initializeTrendLine=function(){for(var i,n=0,t=this.visibleSeries;n<t.length;n++)i=t[n],i.trendlines.length&&this.trendLineModule.getTrendLineElements(i,this)},u.prototype.appendElementsAfterSeries=function(n){"PolarRadar"===this.chartAreaType&&o(this.enableCanvas,this.svgObject,this.yAxisElements,this.redraw);o(this.enableCanvas,this.svgObject,n,this.redraw);(this.zoomModule&&this.zoomSettings.enableScrollbar&&this.scrollElement&&this.scrollElement.childElementCount||this.scrollElement&&this.scrollElement.childElementCount)&&o(!1,r(this.element.id+"_Secondary_Element"),this.scrollElement,this.redraw);this.stripLineModule&&this.stripLineModule.renderStripLine(this,"Over",this.axisCollections);this.tooltip.enable&&!this.stockChart||o(this.enableCanvas,this.svgObject,this.renderer.createGroup({id:this.element.id+"_UserInteraction",style:"pointer-events:none;"}),this.redraw);this.stockChart&&this.stockChart.calculateStockEvents();this.lastValueLabelElements&&this.lastValueLabelElements.hasChildNodes()&&o(this.enableCanvas,this.svgObject,this.lastValueLabelElements,this.redraw)},u.prototype.applyZoomkit=function(){"PolarRadar"!==this.chartAreaType&&(this.redraw&&!this.zoomRedraw||!this.zoomModule||this.zoomSettings.enablePan&&!this.zoomModule.performedUI&&!this.zoomSettings.showToolbar||this.zoomModule.applyZoomToolkit(this,this.axisCollections))},u.prototype.renderAnnotation=function(){this.annotationModule&&this.annotationModule.renderAnnotations(r((this.stockChart?this.stockChart.element.id:this.element.id)+"_Secondary_Element"))},u.prototype.performSelection=function(){var n=[];this.selectionModule&&(n=t.extend([],this.selectionModule.selectedDataIndexes,null,!0),this.selectionModule.invokeSelection(this));this.highlightModule&&this.highlightModule.invokeHighlight(this);n.length>0&&(this.selectionModule.selectedDataIndexes=n,this.selectionModule.redrawSelection(this,this.selectionMode))},u.prototype.processData=function(n){var r,e,o,a,u,s,i;void 0===n&&(n=!0);this.visibleSeriesCount=0;for(var h=!0,c=0,f=0,l=this.visibleSeries;f<l.length;f++)(i=l[f]).visible||this.legendSettings.visible?"Indicator"!==i.category&&"TrendLine"!==i.category&&this.initializeDataModule(i):this.visibleSeriesCount++;for(r=0,e=this.indicators;r<e.length;r++)o=e[r],o.dataSource&&(a=o,this.initializeDataModule(a),h=!1);if(n&&(!this.visibleSeries.length||this.visibleSeriesCount===this.visibleSeries.length&&h)&&(this.refreshBound(),this.trigger("loaded",{chart:this.isBlazor?{}:this})),!this.stockChart&&this.visibleSeries.length>0)for(u=0,s=this.visibleSeries;u<s.length;u++)i=s[u],t.isNullOrUndefined(i.points)||(this.maxPointCount=Math.max(c,i.points.length),c=i.points.length)},u.prototype.initializeDataModule=function(n){var t;n.xData=[];n.yData=[];t=this.isAngular?Object.keys(n.dataSource).length?n.dataSource:this.dataSource:n.dataSource||this.dataSource;n.dataModule=new ih(t,n.query);n.points=[];n.refreshDataManager(this)},u.prototype.calculateBounds=function(){var s=this.margin,c=0,l=0,a="Top"===this.titleStyle.position||"Bottom"===this.titleStyle.position&&!this.legendSettings.visible?15:5,r=s.left+this.border.width,t=this.availableSize.width-r-s.right-this.border.width,v=0,n;this.titleCollection=[];this.subTitleCollection=[];this.title?(this.titleCollection=tu(this.title,this.titleStyle,t,this.enableRtl,this.themeStyle.chartTitleFont),c=i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont).height*this.titleCollection.length+a,this.subTitle&&(this.subTitleCollection=tu(this.subTitle,this.subTitleStyle,t,this.enableRtl,this.themeStyle.chartSubTitleFont),l=i.measureText(this.subTitle,this.subTitleStyle,this.themeStyle.chartSubTitleFont).height*this.subTitleCollection.length+a)):"Top"!==this.legendSettings.position&&this.border.width&&(v=10);var e=s.top+v+this.border.width+.5*this.chartArea.border.width,o=this.availableSize.height-e-this.border.width-s.bottom,u=l+c+this.titleStyle.border.width+this.subTitleStyle.border.width;switch(this.titleStyle.position){case"Top":e+=u;o-=u;break;case"Bottom":o-=u;break;case"Left":r+=u;t-=u;break;case"Right":r-=this.titleStyle.border.width+this.subTitleStyle.border.width;t-=u}if(this.stockChart&&this.stockChart.legendSettings.visible&&this.stockChart.stockLegendModule&&("Top"===this.stockChart.legendSettings.position?e+=this.stockChart.stockLegendModule.legendBounds.height:"Left"===this.stockChart.legendSettings.position&&(r+=this.stockChart.stockLegendModule.legendBounds.width)),this.scrollBarModule&&(this.zoomModule&&this.zoomSettings.enableScrollbar&&this.zoomModule.isZoomed||this.scrollSettingEnabled))for(var f=10,h=0,y=this.axisCollections.length;h<y;h++)n=this.axisCollections[h],"Horizontal"===n.orientation&&"Bottom"===n.scrollbarSettings.position?o-=n.scrollbarSettings.height+f:"Horizontal"===n.orientation&&"Top"===n.scrollbarSettings.position?(o-=n.scrollbarSettings.height+f,e+=n.scrollbarSettings.height+f):"Vertical"===n.orientation&&"Right"===n.scrollbarSettings.position?t-=n.scrollbarSettings.height+f:"Vertical"===n.orientation&&"Left"===n.scrollbarSettings.position&&(t-=n.scrollbarSettings.height+f,r+=n.scrollbarSettings.height+f);this.initialClipRect=new i.Rect(r,e,t,o);this.legendModule&&this.legendSettings.visible&&this.legendModule.calculateLegendBounds(this.initialClipRect,this.availableSize,null);this.initialClipRect.y+=this.chartArea.margin.top;this.initialClipRect.height-=this.chartArea.margin.top+this.chartArea.margin.bottom;this.initialClipRect.x+=this.chartArea.margin.left;this.initialClipRect.width-=this.chartArea.margin.left+this.chartArea.margin.right;this.chartAxisLayoutPanel.measureAxis(this.initialClipRect)},u.prototype.print=function(n){var t=new es(this),i=this.width;"chart"===this.getModuleName()&&parseInt(this.width,10)>=80&&this.width.indexOf("%")>-1&&(this.width="80%",this.dataBind());t.print(n);"chart"===this.getModuleName()&&parseInt(this.width,10)>=80&&this.width.indexOf("%")>-1&&(this.width=i,this.dataBind())},u.prototype.initTrendLines=function(){var t,r,n;for(this.isProtectedOnChange=!0,t=0,r=this.visibleSeries;t<r.length;t++)for(var i=r[t],f=0,u=0,e=i.trendlines;u<e.length;u++)n=e[u],this.trendLineModule&&(n.index=f,n.sourceIndex=i.index,this.trendLineModule.initSeriesCollection(n,this),n.targetSeries&&(n.targetSeries.xAxisName=i.xAxisName,n.targetSeries.yAxisName=i.yAxisName,this.visibleSeries.push(n.targetSeries))),f++;this.isProtectedOnChange=!1},u.prototype.calculateAreaType=function(){var n=this.series[0];this.chartArea.border.width=this.stockChart?0:this.chartArea.border.width;n&&(this.requireInvertedAxis=-1!==n.type.indexOf("Bar")&&!this.isTransposed||-1===n.type.indexOf("Bar")&&this.isTransposed&&"PolarRadar"!==this.chartAreaType);this.chartAxisLayoutPanel="PolarRadar"===this.chartAreaType?this.polarSeriesModule||this.radarSeriesModule:new eut(this)},u.prototype.calculateVisibleAxis=function(){var t,n=[this.primaryXAxis,this.primaryYAxis],r,s,u,e,i,f,o,h;for(n="Cartesian"===this.chartAreaType?n.concat(this.axes):n,this.paretoSeriesModule&&this.series[0]&&"Pareto"===this.series[0].type&&(n=n.concat(this.paretoSeriesModule.paretoAxes)),this.axisCollections=[],this.zoomModule&&(this.zoomModule.isPanning=this.zoomModule.isAxisZoomed(n)&&this.zoomSettings.enablePan,this.svgObject.setAttribute("cursor",this.zoomModule.isPanning?"pointer":"auto"),this.scrollBarModule&&(this.scrollBarModule.axes=n)),this.scrollSettingEnabled&&this.scrollBarModule&&(this.scrollBarModule.axes=n),r=0,s=n.length;r<s;r++){for((t=n[r]).series=[],t.labels=[],t.indexLabels={},u=0,e=this.visibleSeries;u<e.length;u++)i=e[u],this.initAxis(i,t,!0),"Pareto"===i.category&&"Line"===i.type&&i.yAxis&&(i.yAxis.internalVisibility=i.paretoOptions.showAxis);for(f=0,o=this.indicators;f<o.length;f++)h=o[f],this.initAxis(h,t,!1);this.scrollBarModule&&!t.zoomingScrollBar&&this.scrollBarModule.injectTo(t,this);null!=t.orientation&&this.axisCollections.push(t)}this.rows.length>0&&this.columns.length>0&&this.chartAxisLayoutPanel.measure()},u.prototype.initAxis=function(n,t,i){n.xAxisName===t.name||null==n.xAxisName&&"primaryXAxis"===t.name?(t.orientation=this.requireInvertedAxis?"Vertical":"Horizontal",n.xAxis=t,i&&t.series.push(n)):(n.yAxisName===t.name||null==n.yAxisName&&"primaryYAxis"===t.name)&&(t.orientation=this.requireInvertedAxis?"Horizontal":"Vertical",n.yAxis=t,i&&t.series.push(n))},u.prototype.initTechnicalIndicators=function(){for(var t,u,s,f=0,i=0,e=this.indicators;i<e.length;i++){var r=e[i],n=r,o=et(n.type);if(this[o+"IndicatorModule"])for(n.index=f,this[o+"IndicatorModule"].initSeriesCollection(n,this),t=0,u=n.targetSeries;t<u.length;t++)s=u[t],(r.seriesName||r.dataSource)&&this.visibleSeries.push(s);f++}},u.prototype.refreshTechnicalIndicator=function(n){var t,r,i;if(this.indicators.length)if(n instanceof vt&&"Indicator"!==n.category)for(t=0,r=this.indicators;t<r.length;t++)i=r[t],i.seriesName!==n.name||i.dataSource||i.setDataSource(n,this);else n instanceof vv&&n.setDataSource(n instanceof vt?n:null,this)},u.prototype.calculateVisibleSeries=function(){var n;this.visibleSeries=[];for(var r=this.palettes.length?this.palettes:ro(this.theme),u=r.length,t=this.series.sort(function(n,t){return n.zOrder-t.zOrder}),i=0,f=t.length;i<f;i++){switch((n=t[i]).category="Pareto"===t[0].type?"Pareto":"Series",n.index=i,n.interior=n.fill||r[i%u],n.marker.shape||!n.marker.visible&&"Scatter"!==n.type&&"Scatter"!==n.drawType||(n.marker.shape=av[this.markerIndex%10],this.markerIndex++),this.isSecondaryAxis(n.xAxis)&&(n.xAxis.internalVisibility=n.xAxis.series.some(function(n){return n.visible})),this.isSecondaryAxis(n.yAxis)&&(n.yAxis.internalVisibility=n.yAxis.series.some(function(n){return n.visible})),n.type){case"Bar":case"StackingBar":case"StackingBar100":if(-1===t[0].type.indexOf("Bar"))continue;break;case"Polar":case"Radar":if("PolarRadar"!==this.chartAreaType)continue;if("PolarRadar"===this.chartAreaType&&(null!==n.xAxisName&&this.primaryXAxis.name!==n.xAxisName||null!==n.yAxisName&&this.primaryYAxis.name!==n.yAxisName))continue;break;case"Pareto":this.visibleSeries.push(n);this.paretoSeriesModule.initSeries(n,this);continue;default:if("PolarRadar"===this.chartAreaType||t[0].type.indexOf("Bar")>-1)continue}this.visibleSeries.push(n);t[i]=n}},u.prototype.isSecondaryAxis=function(n){return this.axes.indexOf(n)>-1},u.prototype.renderTitle=function(){var v,s=this.margin,n,r,a,y,l,h;if(this.title){n=bu(this.titleStyle.textAlignment,this.enableRtl);r=i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont);v=new i.Rect(s.left,0,this.availableSize.width-s.left-s.right,0);var t=this.titleStyle.border.width,u=this.margin.top+3*r.height/4,f=pr(v,this.titleStyle||this.themeStyle.chartTitleFont)+t,c=void 0,e=this.titleStyle.textAlignment,p=i.measureText(this.subTitle,this.subTitleStyle,this.themeStyle.chartSubTitleFont);switch(this.titleStyle.position){case"Top":u+=.5*t;f+="start"===n?.5*t+this.border.width:"end"===n?2*-t-this.border.width:0;break;case"Bottom":f+="start"===n?.5*t+this.border.width:"end"===n?2*-t-this.border.width:0;u=this.availableSize.height-this.margin.bottom-p.height-r.height/2-.5*t-.5*this.subTitleStyle.border.width;break;case"Left":f=this.margin.left+3*r.height/4+.5*t;u="Near"===e?s.bottom+.5*t+this.border.width:"Far"===e?this.availableSize.height-s.bottom-.5*t-this.border.width:this.availableSize.height/2;n="Near"===e?"end":"Far"===e?"start":"middle";n=this.enableRtl?"end"===n?"start":"start"===n?"end":n:n;c="rotate(-90,"+f+","+u+")";break;case"Right":f=this.availableSize.width-this.margin.right-3*r.height/4-.5*t;u="Near"===e?s.bottom+.5*t+this.border.width:"Far"===e?this.availableSize.height-s.bottom-.5*t-this.border.width:this.availableSize.height/2;n="Near"===e?"start":"Far"===e?"end":"middle";n=this.enableRtl?"end"===n?"start":"start"===n?"end":n:n;c="rotate(90,"+f+","+u+")";break;case"Custom":f=this.titleStyle.x;u=this.titleStyle.y;n="middle"}a={id:this.element.id+"_ChartTitleBorder",x:f-("middle"===n?r.width/2+5:"end"===n?r.width+5:5),y:u-r.height+r.height/4,rx:this.titleStyle.border.cornerRadius,ry:this.titleStyle.border.cornerRadius,width:r.width+10,height:r.height*this.titleCollection.length,fill:this.titleStyle.background,"stroke-width":t,stroke:this.titleStyle.border.color,transform:c||"",d:""};y=ci(this.redraw,this.element.id+"_ChartTitleBorder",a,this.renderer)||this.renderer.drawRectangle(a);o(this.enableCanvas,this.svgObject,y,this.redraw);l=new i.TextOption(this.element.id+"_ChartTitle",f,u,n,this.titleCollection,c,"auto");h=ci(this.redraw,this.element.id+"_ChartTitle",l,this.renderer)||ct(this.renderer,l,this.titleStyle,this.titleStyle.color||this.themeStyle.chartTitleFont.color,this.svgObject,null,null,null,null,null,null,0,null,this.enableCanvas,null,this.themeStyle.chartTitleFont);h&&!this.enableCanvas&&(h.setAttribute("tabindex",this.titleStyle.accessibility.focusable?String(this.titleStyle.accessibility.tabIndex):"-1"),h.style.outline="none",h.setAttribute("class","e-chart-focused"),h.setAttribute("role",this.titleStyle.accessibility.accessibilityRole),h.setAttribute("aria-label",this.titleStyle.accessibility.accessibilityDescription));this.subTitle&&this.renderSubTitle(l)}},u.prototype.renderSubTitle=function(n){for(var k,s,a,d,nt,h,y,tt,p,u,t=0,f=0,c=0,w=0,e=this.titleStyle.textAlignment,l=0,b=this.titleCollection;l<b.length;l++)k=b[l],t=(c=i.measureText(k,this.titleStyle,this.themeStyle.chartTitleFont).width)>t?c:t;for(s=0,a=this.subTitleCollection;s<a.length;s++)d=a[s],f=(w=i.measureText(d,this.subTitleStyle,this.themeStyle.chartSubTitleFont).width)>f?w:f;t=Math.max(c,f);var r=i.measureText(this.subTitleCollection.reduce(function(n,t){return n.length>t.length?n:t}),this.subTitleStyle,this.themeStyle.chartSubTitleFont),g=bu(this.subTitleStyle.textAlignment,this.enableRtl),v=new i.Rect("Center"===e?n.x-.5*t:"Far"===e?n.x-t:n.x,0,t,0);"Left"===this.titleStyle.position&&(v.x="Center"===e?n.x-.5*t:"Far"===e?this.margin.left+3*r.height/4:n.x-t);nt=i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont);h=n.y*n.text.length+r.height+5+this.titleStyle.border.width+.5*this.subTitleStyle.border.width;"Bottom"===this.titleStyle.position&&(h=n.y*n.text.length+5+nt.height/2+r.height/2);y={id:this.element.id+"_ChartSubTitleBorder",x:pr(v,this.subTitleStyle)-("middle"===g?r.width/2+5:"end"===g?r.width+5:5),y:h-r.height+r.height/4,rx:this.subTitleStyle.border.cornerRadius,ry:this.subTitleStyle.border.cornerRadius,width:r.width+10,height:r.height*this.subTitleCollection.length,fill:this.subTitleStyle.background,"stroke-width":this.subTitleStyle.border.width,stroke:this.subTitleStyle.border.color,transform:n.transform,d:""};tt=ci(this.redraw,this.element.id+"_ChartSubTitleBorder",y,this.renderer)||this.renderer.drawRectangle(y);o(this.enableCanvas,this.svgObject,tt,this.redraw);p=new i.TextOption(this.element.id+"_ChartSubTitle",pr(v,this.subTitleStyle),h,bu(this.subTitleStyle.textAlignment,this.enableRtl),this.subTitleCollection,n.transform,"auto");u=ci(this.redraw,this.element.id+"_ChartSubTitle",p,this.renderer)||ct(this.renderer,p,this.subTitleStyle,this.subTitleStyle.color||this.themeStyle.chartSubTitleFont.color,this.svgObject,null,null,null,null,null,null,0,null,this.enableCanvas,null,this.themeStyle.chartSubTitleFont);u&&!this.enableCanvas&&(u.setAttribute("tabindex",this.subTitleStyle.accessibility.focusable?String(this.subTitleStyle.accessibility.tabIndex):"-1"),this.subTitleStyle.accessibility.focusable&&(u.style.outline="none"),u.setAttribute("class","e-chart-focused"),u.setAttribute("role",this.subTitleStyle.accessibility.accessibilityRole),u.setAttribute("aria-label",this.subTitleStyle.accessibility.accessibilityDescription))},u.prototype.renderBorder=function(){var f=0,e=0,n=this.border.width,t=this.backgroundImage,s=t?"transparent":this.background||this.themeStyle.background,r,u;this.stockChart&&this.stockChart.legendSettings.visible&&this.stockChart.stockLegendModule&&("Top"===this.stockChart.legendSettings.position?e+=this.stockChart.stockLegendModule.legendBounds.height:"Left"===this.stockChart.legendSettings.position&&(f+=this.stockChart.stockLegendModule.legendBounds.width));r=new ft(this.element.id+"_ChartBorder",s,this.border,1,new i.Rect(.5*n+f,.5*n+e,this.availableSize.width-n,this.availableSize.height-n),0,0,"",this.border.dashArray);(this.htmlObject=ci(this.redraw,this.element.id+"_ChartBorder",r,this.renderer)||this.renderer.drawRectangle(r),this.htmlObject.setAttribute("aria-hidden","true"),o(this.enableCanvas,this.svgObject,this.htmlObject,this.redraw),t)&&(u=new to(this.availableSize.height-n,this.availableSize.width-n,t,0,0,this.element.id+"_ChartBackground","visible","none"),this.htmlObject=ci(this.redraw,this.element.id+"_ChartBackground",u,this.renderer)||this.renderer.drawImage(u),o(this.enableCanvas,this.svgObject,this.htmlObject,this.redraw))},u.prototype.renderAreaBorder=function(){var u,f,e;if("PolarRadar"===this.chartAreaType)return null;var n=r(this.element.id+"_ChartAreaBorder"),s=n?new i.Rect(+n.getAttribute("x"),+n.getAttribute("y"),+n.getAttribute("width"),+n.getAttribute("height")):null,t=new ft(this.element.id+"_ChartAreaBorder",this.chartArea.background,{width:this.chartArea.border.width,color:this.chartArea.border.color||this.themeStyle.areaBorder},this.chartArea.opacity,this.chartAxisLayoutPanel.seriesClipRect,0,0,"",this.chartArea.border.dashArray);if(t.height<0||t.width<0)return null;this.htmlObject=this.renderer.drawRectangle(t);this.htmlObject.setAttribute("aria-hidden","true");o(this.enableCanvas,this.svgObject,this.htmlObject,this.redraw,!0,"x","y",null,null,!0,!0,s);this.htmlObject=null;u=this.chartArea.backgroundImage;u&&(f=this.chartArea.border.width,e=new to(this.initialClipRect.height-f,this.initialClipRect.width-f,u,this.initialClipRect.x,this.initialClipRect.y,this.element.id+"_ChartAreaBackground","visible","none"),this.htmlObject=this.renderer.drawImage(e),o(this.enableCanvas,this.svgObject,this.htmlObject,this.redraw,!0,"x","y",null,null,!0,!0))},u.prototype.addSeries=function(n){for(var t,u=window.scrollY||document.documentElement.scrollTop,i=0,r=n;i<r.length;i++)t=r[i],t=new vt(this,"series",t,!0),this.series.push(t);this.refresh();window.scrollTo(0,u)},u.prototype.removeSeries=function(n){var r,t,i;for(this.redraw=!1,r=window.scrollY||document.documentElement.scrollTop,t=this.visibleSeries[n],t&&(t.xAxis.series.length<=1&&(t.xAxis.orientation=null),t.yAxis.series.length<=1&&(t.yAxis.orientation=null)),i=0;i<this.axes.length;i++)null===this.axes[i].orientation&&this.axes.splice(i,1);this.series.splice(n,1);this.refresh();window.scrollTo(0,r)},u.prototype.clearSeries=function(){this.series=[];var n=window.scrollY||document.documentElement.scrollTop;this.refresh();window.scrollTo(0,n)},u.prototype.addAxes=function(n){for(var t,i=0,r=n;i<r.length;i++)t=r[i],t=new yo(this,"axes",t),this.isBlazor&&(t.interval=isNaN(t.interval)?null:t.interval,t.desiredIntervals=isNaN(t.desiredIntervals)?null:t.desiredIntervals),this.axes.push(t);this.refresh()},u.prototype.removeAxis=function(n){this.redraw=!1;this.axes.splice(n,1);this.refresh()},u.prototype.destroy=function(){var t,i,r;this.scrollBarModule&&this.scrollBarModule.destroy();this.markerRender&&(this.markerRender.removeEventListener(),this.markerRender=null);this.horizontalAxes=[];this.verticalAxes=[];this.visibleSeries=[];this.axisCollections=[];this.rotatedDataLabelCollections=[];this.seriesElements=null;this.chartAxisLayoutPanel=null;this.dataLabelCollections=null;this.visibleSeriesCount=null;this.dataLabelElements=null;this.lastValueLabelCollections=null;this.lastValueLabelElements=null;this.yAxisElements=null;t=document.getElementById(this.element.id+"Keyboard_chart_focus");t&&t.remove();i=document.getElementById(this.element.id+"_ej2_chart_highlight");i&&i.remove();r=document.getElementById(this.element.id+"_ej2_chart_selection");r&&r.remove();v("chartmeasuretext");this.element&&(this.unWireEvents(),this.isReact&&this.clearTemplate(),n.prototype.destroy.call(this),this.enableCanvas||(this.removeSvg(),this.svgObject=null))},u.prototype.getModuleName=function(){return"chart"},u.prototype.getPersistData=function(){return this.addOnPersist(["loaded","animationComplete","primaryXAxis","primaryYAxis"])},u.prototype.createChartSvg=function(){this.removeSvg();ts(this)},u.prototype.unWireEvents=function(){var n=t.Browser.touchStartEvent,i=t.Browser.touchMoveEvent,r=t.Browser.touchEndEvent,u=t.Browser.isPointer?"pointerleave":"mouseleave";t.EventHandler.remove(this.element,n,this.chartOnMouseDown);t.EventHandler.remove(this.element,i,this.mouseMove);t.EventHandler.remove(this.element,r,this.mouseEnd);t.EventHandler.remove(this.element,"click",this.chartOnMouseClick);t.EventHandler.remove(this.element,"dblclick",this.chartOnDoubleClick);t.EventHandler.remove(this.element,"contextmenu",this.chartRightClick);t.EventHandler.remove(this.element,u,this.mouseLeave);t.EventHandler.remove(this.element,"keydown",this.chartKeyDown);t.EventHandler.remove(document.body,"keydown",this.documentKeyHandler);t.EventHandler.remove(this.element,"keyup",this.chartKeyUp);window.removeEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resizeBound);this.touchObject&&(this.touchObject.destroy(),this.touchObject=null)},u.prototype.wireEvents=function(){if(this.element){var n=t.Browser.isPointer?"pointerleave":"mouseleave";t.EventHandler.add(this.element,t.Browser.touchStartEvent,this.chartOnMouseDown,this);t.EventHandler.add(this.element,t.Browser.touchMoveEvent,this.mouseMove,this);t.EventHandler.add(this.element,t.Browser.touchEndEvent,this.mouseEnd,this);t.EventHandler.add(this.element,"click",this.chartOnMouseClick,this);t.EventHandler.add(this.element,"dblclick",this.chartOnDoubleClick,this);t.EventHandler.add(this.element,"contextmenu",this.chartRightClick,this);t.EventHandler.add(this.element,n,this.mouseLeave,this);t.EventHandler.add(this.element,"keydown",this.chartKeyDown,this);t.EventHandler.add(document.body,"keydown",this.documentKeyHandler,this);t.EventHandler.add(this.element,"keyup",this.chartKeyUp,this);this.resizeBound=this.chartResize.bind(this);window.addEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resizeBound);this.longPressBound=this.longPress.bind(this);this.touchObject=new t.Touch(this.element,{tapHold:this.longPressBound,tapHoldThreshold:500});this.setStyle(this.element)}},u.prototype.chartRightClick=function(n){return!this.crosshair.enable||!this.crosshairModule||2!==n.buttons&&0!==n.which&&"touch"!==n.pointerType||(n.preventDefault(),n.stopPropagation(),!1)},u.prototype.setStyle=function(n){var t=this.zoomSettings,i=t.enableSelectionZooming||t.enablePinchZooming||"None"!==this.selectionMode||"None"!==this.highlightMode;n.style.touchAction=i?"none":"element";n.style.msTouchAction=i?"none":"element";n.style.msContentZooming="none";n.style.msUserSelect="none";n.style.webkitUserSelect="none";n.style.position="relative";n.style.display="block";n.style.overflow="hidden";n.style.height=n.style.height||this.height&&-1===this.height.indexOf("%")?n.style.height:"inherit"},u.prototype.isOrientation=function(){return"orientation"in window&&"onorientationchange"in window},u.prototype.longPress=function(n){return this.mouseX=n&&n.originalEvent.changedTouches?n.originalEvent.changedTouches[0].clientX:0,this.mouseY=n&&n.originalEvent.changedTouches?n.originalEvent.changedTouches[0].clientY:0,this.startMove=!0,this.allowPan=!this.stockChart&&this.allowPan,this.setMouseXY(this.mouseX,this.mouseY),this.notify("tapHold",n),!1},u.prototype.setMouseXY=function(n,t){if(r(this.svgId)){var i=r(this.svgId).getBoundingClientRect(),u=this.element.getBoundingClientRect();this.scaleX=i.width/this.availableSize.width;this.scaleY=i.height/this.availableSize.height;this.mouseY=(t-u.top-Math.max(i.top-u.top,0))/this.scaleY;this.mouseX=(n-u.left-Math.max(i.left-u.left,0))/this.scaleX;this.stockChart&&(this.mouseX+="Left"===this.stockChart.legendSettings.position?this.stockChart.stockLegendModule.legendBounds.width:0,this.mouseY+="Top"===this.stockChart.legendSettings.position?this.stockChart.stockLegendModule.legendBounds.height:0)}},u.prototype.export=function(n,t){this.exportModule&&(this.exportModule.export(n,t),this.afterExport&&this.exportModule.getDataUrl(this))},u.prototype.chartResize=function(){var n=this,t,r;return this.animateSeries=!1,t={chart:this,name:af,currentSize:new i.Size(0,0),previousSize:new i.Size(this.availableSize.width,this.availableSize.height)},r={name:"beforeResize",cancelResizedEvent:!1},this.resizeTo&&clearTimeout(this.resizeTo),this.trigger(ao,r),r.cancelResizedEvent||(this.resizeTo=+setTimeout(function(){n.isDestroyed||n.stockChart?clearTimeout(n.resizeTo):(n.createChartSvg(),t.currentSize=n.availableSize,n.trigger(af,t),n.refreshAxis(),n.refreshBound(),n.trigger("loaded",{chart:n.isBlazor?{}:n}))},500)),!1},u.prototype.mouseMove=function(n){var t,i,u;return this.allowPan||("touchmove"===n.type?(this.isTouch=!0,t=(u=n).changedTouches[0].clientX,i=u.changedTouches[0].clientY):(this.isTouch="touch"===n.pointerType||"2"===n.pointerType||this.isTouch,t=n.clientX,i=n.clientY),this.previousPageX=t,this.previousPageY=i,r(this.svgId)&&(this.setMouseXY(t,i),this.chartOnMouseMove(n))),!1},u.prototype.mouseLeave=function(n){var t,i,r;return this.stockChart&&this.stockChart.onPanning||("touchleave"===n.type?(this.isTouch=!0,t=(r=n).changedTouches[0].clientX,i=r.changedTouches[0].clientY):(this.isTouch="touch"===n.pointerType||"2"===n.pointerType,t=n.clientX,i=n.clientY),this.previousPageX=null,this.previousPageY=null,this.setMouseXY(t,i),this.chartOnMouseLeave(n)),!1},u.prototype.chartOnMouseLeave=function(n){var i=n.target,r=t.Browser.isPointer?"pointerleave":"mouseleave";return this.trigger(fa,{target:i.id,x:this.mouseX,y:this.mouseY}),v(this.element.id+"_EJ2_AxisLabel_Tooltip"),this.isChartDrag=this.isPointMouseDown=!1,this.notify(r,n),!1},u.prototype.chartOnDoubleClick=function(n){var t=n.target;return this.trigger(ua,{target:t.id,x:this.mouseX,y:this.mouseY}),!1},u.prototype.chartKeyDown=function(n){var t="";return(this.isZoomed&&"Tab"===n.code||"Space"===n.code)&&n.preventDefault(),this.tooltip.enable&&("Tab"===n.code&&this.previousTargetId.indexOf("Series")>-1||"Escape"===n.code)&&(t="ESC"),"None"!==this.highlightMode&&"Tab"===n.code&&this.previousTargetId.indexOf("_chart_legend_")>-1&&this.highlightModule&&this.highlightModule.removeLegendHighlightStyles(),!n.ctrlKey||"+"!==n.key&&"Equal"!==n.code&&"-"!==n.key&&"Minus"!==n.code?82===n.keyCode&&this.isZoomed?(n.preventDefault(),this.isZoomed=!1,t="R"):n.code.indexOf("Arrow")>-1&&(n.preventDefault(),t=this.isZoomed?n.code:""):(n.preventDefault(),this.isZoomed=this.zoomModule&&(this.zoomSettings.enableDeferredZooming||this.zoomSettings.enableSelectionZooming||this.zoomSettings.enablePinchZooming||this.zoomSettings.enableMouseWheelZooming),t=this.isZoomed?n.code:""),n.ctrlKey&&"p"===n.key&&(n.preventDefault(),t="CtrlP"),""!==t&&this.chartKeyboardNavigations(n,n.target.id,t),"Tab"===n.code&&this.removeNavigationStyle(),!1},u.prototype.chartKeyUp=function(n){var u,c,l,i,e="",t=n.target.id,f=n.target,w=r(this.element.id+"_ChartTitle"),a=r(this.element.id+"SeriesCollection"),b=r(this.element.id+"_chart_legend_translate_g"),k=r(this.element.id+"_chart_legend_pageup"),o,v,y,p,s,h;if(w&&w.setAttribute("class","e-chart-focused"),a&&a.firstElementChild&&a.firstElementChild.children[1]&&((i=(l=a.firstElementChild.children[1]).getAttribute("class"))&&-1===i.indexOf("e-chart-focused")?i+=" e-chart-focused":i||(i="e-chart-focused"),l.setAttribute("class",i)),b&&((i=(l=b.firstElementChild).getAttribute("class"))&&-1===i.indexOf("e-chart-focused")?i+=" e-chart-focused":i||(i="e-chart-focused"),l.setAttribute("class",i)),k&&k.setAttribute("class","e-chart-focused"),"Tab"===n.code)(""!==this.previousTargetId&&(this.previousTargetId.indexOf("_Series_")>-1&&-1===t.indexOf("_Series_")?(u=r(this.element.id+"SeriesCollection"),(this.previousTargetId.indexOf("_Symbol")>-1?r(this.element.id+"SymbolGroup"+this.currentSeriesIndex):u.children[this.currentSeriesIndex])&&(this.previousTargetId.indexOf("_Symbol")>-1?r(this.element.id+"SymbolGroup"+this.currentSeriesIndex).children[this.currentPointIndex+1]:this.previousTargetId.indexOf("_Point_")>-1?u.children[this.currentSeriesIndex].children[this.currentPointIndex+1]:u.children[this.currentSeriesIndex]),this.currentPointIndex=0,this.currentSeriesIndex=0):this.previousTargetId.indexOf("_chart_legend_page")>-1&&-1===t.indexOf("_chart_legend_page")&&-1===t.indexOf("_chart_legend_g_")?this.setTabIndex(n.target,r(this.element.id+"_chart_legend_pageup")):this.previousTargetId.indexOf("_chart_legend_g_")>-1&&-1===t.indexOf("_chart_legend_g_")&&(u=r(this.element.id+"_chart_legend_translate_g"),this.setTabIndex(u.children[this.currentLegendIndex],u.firstElementChild))),this.previousTargetId=t,t.indexOf("SeriesGroup")>-1)?(this.currentSeriesIndex=+t.split("SeriesGroup")[1],f.removeAttribute("tabindex"),f.blur(),f.children.length>1&&-1===f.children[1].id.indexOf("_Point_")&&(c=r(this.element.id+"SymbolGroup"+t.split("SeriesGroup")[1])),o=null,c&&c.children.length>1?o=c.children[1]:f.children.length>1&&(o=f.children[1]),o&&(t=this.focusChild(o))):t.indexOf("_ChartTitle")>-1&&this.setNavigationStyle(t),e=t!==this.element.id?"Tab":"";else if(n.code.indexOf("Arrow")>-1){if(n.preventDefault(),this.previousTargetId=t,t.indexOf("_chart_legend_page")>-1)"ArrowLeft"===n.code?(r(this.element.id+"_chart_legend_pagedown").removeAttribute("tabindex"),this.focusChild(r(this.element.id+"_chart_legend_pageup"))):"ArrowRight"===n.code&&(r(this.element.id+"_chart_legend_pageup").removeAttribute("tabindex"),this.focusChild(r(this.element.id+"_chart_legend_pagedown")));else if(t.indexOf("_chart_legend_")>-1)v=f.parentElement.children,v[this.currentLegendIndex].removeAttribute("tabindex"),this.currentLegendIndex+="ArrowUp"===n.code||"ArrowRight"===n.code?1:-1,this.currentLegendIndex=this.getActualIndex(this.currentLegendIndex,v.length),y=v[this.currentLegendIndex],this.focusChild(y),this.removeNavigationStyle(),this.setNavigationStyle(y.id),t=y.children[1].id,e="None"!==this.highlightMode?"ArrowMove":"";else if(t.indexOf("_Series_")>-1){if(u=f.parentElement.parentElement,p=n.target,f.removeAttribute("tabindex"),f.blur(),"ArrowRight"===n.code||"ArrowLeft"===n.code){for(s=[],h=0;h<u.children.length;h++)u.children[h].id.indexOf("SeriesGroup")>-1&&s.push(+u.children[h].id.split("SeriesGroup")[1]);this.currentSeriesIndex=s.indexOf(this.currentSeriesIndex)+("ArrowRight"===n.code?1:-1);this.currentSeriesIndex=s[this.getActualIndex(this.currentSeriesIndex,s.length)]}else this.currentPointIndex+="ArrowUp"===n.code?1:-1;t.indexOf("_Symbol")>-1?(this.currentPointIndex=this.getActualIndex(this.currentPointIndex,r(this.element.id+"SymbolGroup"+this.currentSeriesIndex).childElementCount-1),p=r(this.element.id+"_Series_"+this.currentSeriesIndex+"_Point_"+this.currentPointIndex+"_Symbol")):t.indexOf("_Point_")>-1&&(this.currentPointIndex=this.getActualIndex(this.currentPointIndex,r(this.element.id+"SeriesGroup"+this.currentSeriesIndex).childElementCount-1),p=r(this.element.id+"_Series_"+this.currentSeriesIndex+"_Point_"+this.currentPointIndex));t=this.focusChild(p);e="ArrowMove"}}else("Enter"===n.code||"Space"===n.code)&&(t.indexOf("_chart_legend_")>-1||t.indexOf("_Point_")>-1)&&(t=t.indexOf("_chart_legend_page")>-1?t:t.indexOf("_chart_legend_")>-1?f.children[1].id:t,e="Enter");return""!==e&&this.chartKeyboardNavigations(n,t,e),!1},u.prototype.setTabIndex=function(n,t){n&&n.removeAttribute("tabindex");t&&t.setAttribute("tabindex","0")},u.prototype.getActualIndex=function(n,t){return n>t-1?0:n<0?t-1:n},u.prototype.focusChild=function(n){n.setAttribute("tabindex","0");var t=n.getAttribute("class");return n.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-chart-focused")?t="e-chart-focused "+t:t||(t="e-chart-focused"),n.setAttribute("class",t),n.focus(),n.id},u.prototype.documentKeyHandler=function(n){n.altKey&&74===n.keyCode&&!t.isNullOrUndefined(this.element)&&(this.element.focus(),this.setNavigationStyle(this.element.id))},u.prototype.setNavigationStyle=function(n){var t=document.getElementById(n);t&&(t.style.setProperty("outline",this.focusBorderWidth+"px solid "+(this.focusBorderColor||this.themeStyle.tabColor)),t.style.setProperty("margin",this.focusBorderMargin+"px"))},u.prototype.removeNavigationStyle=function(){var n=document.querySelectorAll("[id*=_Point_], [id*="+this.element.id+"], [id*=_ChartBorder], text[id*=_ChartTitle],g[id*=_chart_legend],  text[id*=_ChartSubTitle], div[id*=_Annotation], g[id*=IndicatorGroup], g[id*=_Zooming_Zoom], g[id*=_Zooming_ZoomIn], g[id*=_Zooming_ZoomOut], g[id*=_Zooming_Pan], g[id*=_Zooming_Reset], path[id*=_TrendLine_]");n&&n.forEach(function(n){(n instanceof HTMLElement||n instanceof SVGElement)&&(n.style.setProperty("outline","none"),n.style.setProperty("margin",""))})},u.prototype.chartKeyboardNavigations=function(n,t,i){var e,h,c;switch(this.isLegendClicked=!1,this.removeNavigationStyle(),"Enter"!==i&&"Space"!==i&&this.setNavigationStyle(t),i){case"Tab":case"ArrowMove":if(this.highlightModule&&this.highlightModule.removeLegendHighlightStyles(),t.indexOf("_Point_")>-1){var r=+t.split("_Series_")[1].split("_Point_")[0],l=+t.split("_Series_")[1].replace("_Symbol","").split("_Point_")[1],o=this.visibleSeries[r].points[l].symbolLocations[0];this.mouseX=o.x+this.initialClipRect.x-(this.visibleSeries[r].type.indexOf("StackingBar")>-1?this.visibleSeries[r].marker.height/2:0);this.mouseY=o.y+this.initialClipRect.y+(this.visibleSeries[r].type.indexOf("StackingColumn")>-1?this.visibleSeries[r].marker.height/2:0);this.highlightModule&&(this.highlightModule.highlightChart(document.getElementById(t),"mousemove"),this.highlightModule.completeSelection(document.getElementById(t),"mousemove"));this.tooltipModule&&this.tooltipModule.tooltip()}if(this.highlightModule&&"None"!==this.highlightMode){t=t.indexOf("_chart_legend_g_")>-1?document.getElementById(t).firstChild.id:t;for(var u=this.element.id+"_chart_legend",s=[u+"_text_",u+"_shape_marker_",u+"_shape_"],f=0;f<s.length;f++)if(e=s[f],t.indexOf(e)>-1){document.getElementById(t).setAttribute("class","");this.highlightModule.legendSelection(this,parseInt(t.split(e)[1],10),document.getElementById(t),"mousemove");break}}break;case"Enter":case"Space":t.indexOf("_chart_legend_")>-1?(this.isLegendClicked=!0,this.legendModule.click(n),this.focusChild(document.getElementById(t).parentElement),this.setNavigationStyle(document.getElementById(t).parentElement.id)):(this.selectionModule&&this.selectionModule.calculateSelectedElements(document.getElementById(t),"click"),this.setNavigationStyle(t));break;case"CtrlP":this.print();break;case"ESC":this.tooltipModule.removeTooltip(1);break;case"Equal":case"Minus":this.zoomModule.isZoomed=this.zoomModule.performedUI=!0;this.zoomModule.isPanning=this.isChartDrag=!1;"Equal"===i?this.zoomModule.toolkit.zoomInOutCalculation(1,this,this.axisCollections,this.zoomSettings.mode):this.zoomModule.toolkit.zoomInOutCalculation(-1,this,this.axisCollections,this.zoomSettings.mode);this.zoomModule.performZoomRedraw(this);this.element.focus();break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":h="ArrowUp"===i?10:"ArrowDown"===i?-10:0;c="ArrowLeft"===i?-10:"ArrowRight"===i?10:0;this.zoomModule.isPanning=this.isChartDrag=!0;this.zoomModule.doPan(this,this.axisCollections,c,h);this.zoomModule.performZoomRedraw(this);this.element.focus();break;case"R":this.zoomModule.toolkit.reset(n)}},u.prototype.chartOnMouseClick=function(n){var r=this,f=n.target,t=this,u,i;return this.clickCount++,u=this.FindXYPointValue(t.mouseX,t.mouseY),i=400,1===this.clickCount?this.singleClickTimer=+setTimeout(function(){t.clickCount=0;t.trigger(ra,{target:f.id,x:t.mouseX,y:t.mouseY,axisData:u})},i):2!==this.clickCount||this.pointDoubleClick||(clearTimeout(this.singleClickTimer),this.clickCount=0),i=this.isAngular?this.pointDoubleClick.observers.length>0?400:0:this.pointDoubleClick?400:0,1===this.clickCount&&this.pointClick?this.singleClickTimer=+setTimeout(function(){r.clickCount=0;r.triggerPointEvent(ps,n)},i):2===this.clickCount&&this.pointDoubleClick&&(clearTimeout(this.singleClickTimer),this.clickCount=0,this.triggerPointEvent(bp,n)),this.axisLabelClick&&this.triggerAxisLabelClickEvent(wp,n),this.removeNavigationStyle(),this.notify("click",n),!1},u.prototype.FindXYPointValue=function(n,t){if(ht(n,t,this.chartAxisLayoutPanel.seriesClipRect)&&this.series.some(function(n){return n.visible})){for(var i=void 0,f=void 0,e=void 0,u={},r=0,o=this.axisCollections.length;r<o;r++)"Horizontal"===(i=this.axisCollections[r]).orientation?(f=rc(Math.abs(n-i.rect.x),i.rect.width,i),u[this.axisCollections[r].name]=f):(e=uc(Math.abs(t-i.rect.y),i.rect.height,i),u[this.axisCollections[r].name]=e);return u}return null},u.prototype.triggerPointEvent=function(n,t){var r=t,i=new rs(this).getData();i.series&&i.point&&this.trigger(n,{series:this.isBlazor?{}:i.series,point:i.point,seriesIndex:i.series.index,pointIndex:i.point.index,x:this.mouseX,y:this.mouseY,pageX:r.pageX,pageY:r.pageY})},u.prototype.triggerAxisLabelClickEvent=function(n,t){var r=t.target,e=t;if(-1!==r.id.indexOf("_AxisLabel_")){var o=r.id.split("_AxisLabel_"),u=+o[0].slice(-1),f=+o[1],i=this.axisCollections[u];i.visible&&(0===u||1===u)&&this.trigger(n,{chart:this,axis:i,text:i.visibleLabels[f].text,labelID:r.id,index:f,location:new h(e.pageX,e.pageY),value:i.visibleLabels[f].value})}},u.prototype.chartOnMouseMove=function(n){var i=n.target,r=this.FindXYPointValue(this.mouseX,this.mouseY);return this.trigger(ia,{target:i.id,x:this.mouseX,y:this.mouseY,axisData:r}),this.pointMove&&this.triggerPointEvent(ws,n),this.isTouch||(this.titleTooltip(n,this.mouseX,this.mouseY),this.axisTooltip(n,this.mouseX,this.mouseY)),this.dataEditingModule&&this.dataEditingModule.pointMouseMove(n),this.crosshair.enable&&this.startMove&&n.preventDefault(),this.notify(t.Browser.touchMoveEvent,n),this.isTouch=!1,!1},u.prototype.titleTooltip=function(n,t,i,u){var f=n.target.id,o=f===this.element.id+"_ChartTitle"||f===this.element.id+"_ChartSubTitle"||f.indexOf("_AxisTitle")>-1||f.indexOf("_legend_title")>-1,e=0;f.indexOf("_AxisTitle")>-1&&(e=parseInt(f.replace(this.element.id,"").replace("AxisLabel_","").split("_")[2],10));o&&n.target.textContent.indexOf("...")>-1?uf(f===this.element.id+"_ChartTitle"?this.title:f.indexOf("_AxisTitle")>-1?this.axisCollections[e].title:f.indexOf("_ChartSubTitle")>-1?this.subTitle:this.legendSettings.title,t,i,this.element.offsetWidth,this.element.id+"_EJ2_Title_Tooltip",r(this.element.id+"_Secondary_Element"),u):v(this.element.id+"_EJ2_Title_Tooltip")},u.prototype.axisTooltip=function(n,t,i,u){var f=n.target.id,e;(f.indexOf("AxisLabel")>-1||f.indexOf("Axis_MultiLevelLabel")>-1)&&n.target.textContent.indexOf("...")>-1?(e=this.legendSettings.visible||""===this.primaryXAxis.title,uf(this.findAxisLabel(f),t,i,this.element.offsetWidth,this.element.id+"_EJ2_AxisLabel_Tooltip",r(this.element.id+"_Secondary_Element"),u,e)):v(this.element.id+"_EJ2_AxisLabel_Tooltip")},u.prototype.findAxisLabel=function(n){var t;return n.indexOf("AxisLabel")>-1?(t=n.replace(this.element.id,"").replace("AxisLabel_","").split("_"),this.axisCollections[parseInt(t[0],10)].visibleLabels[parseInt(t[1],10)].originalText):(t=n.replace(this.element.id,"").replace("Axis_MultiLevelLabel_Level_","").replace("Text_","").split("_"),this.axisCollections[parseInt(t[0],10)].multiLevelLabels[parseInt(t[1],10)].categories[parseInt(t[2],10)].text)},u.prototype.chartOnMouseDown=function(n){var f,e,o,s,c=this.FindXYPointValue(this.mouseX,this.mouseY),i=t.Browser.isDevice?20:30,u=this.element.getBoundingClientRect(),l=n.target,h;return this.stockChart&&this.stockChart.zoomSettings.enablePan&&(this.allowPan=!0),this.trigger(ea,{target:l.id,x:this.mouseX,y:this.mouseY,axisData:c}),"touchstart"===n.type?(this.isTouch=!0,f=(s=n).changedTouches[0].clientX,e=s.changedTouches[0].clientY,o=s.target):(this.isTouch="touch"===n.pointerType,f=n.clientX,e=n.clientY,o=n.target),h=r(this.svgId).getBoundingClientRect(),this.mouseDownX=this.previousMouseMoveX=f-u.left-Math.max(h.left-u.left,0),this.mouseDownY=this.previousMouseMoveY=e-u.top-Math.max(h.top-u.top,0),this.isTouch&&(this.isDoubleTap=(new Date).getTime()<this.threshold&&-1===o.id.indexOf(this.element.id+"_Zooming_")&&(this.mouseDownX-i>=this.mouseX||this.mouseDownX+i>=this.mouseX)&&(this.mouseDownY-i>=this.mouseY||this.mouseDownY+i>=this.mouseY)&&(this.mouseX-i>=this.mouseDownX||this.mouseX+i>=this.mouseDownX)&&(this.mouseY-i>=this.mouseDownY||this.mouseY+i>=this.mouseDownY)),this.dataEditingModule&&this.dataEditingModule.pointMouseDown(),this.notify(t.Browser.touchStartEvent,n),!1},u.prototype.mouseEnd=function(n){var t,i,r;return"touchend"===n.type?(i=(r=n).changedTouches[0].clientX,this.isTouch=!0,t=r.changedTouches[0].clientY):(t=n.clientY,i=n.clientX,this.isTouch="touch"===n.pointerType||"2"===n.pointerType),this.setMouseXY(i,t),this.chartOnMouseUp(n),!1},u.prototype.chartOnMouseUp=function(n){var i=n.target,r=this.FindXYPointValue(this.mouseX,this.mouseY);return this.trigger(oa,{target:i.id,x:this.mouseX,y:this.mouseY,axisData:r}),this.isChartDrag=!1,this.allowPan=!1,this.isTouch&&(this.titleTooltip(n,this.mouseX,this.mouseY,this.isTouch),this.axisTooltip(n,this.mouseX,this.mouseY,this.isTouch),this.threshold=(new Date).getTime()+300),this.dataEditingModule&&this.dataEditingModule.pointMouseUp(),!this.enableCanvas&&this.seriesElements&&this.seriesElements.removeAttribute("clip-path"),this.notify(t.Browser.touchEndEvent,n),!1},u.prototype.setCulture=function(){this.intl=new t.Internationalization;this.setLocaleConstants();this.localeObject=new t.L10n(this.getModuleName(),this.defaultLocalConstants,this.locale)},u.prototype.setAnnotationValue=function(n,t){var i,u=r(this.element.id+"_Annotation_Collections"),f=this.annotations[n];null!==t&&(f.content=t,u?(v(this.element.id+"_Annotation_"+n),i=this.createElement("div"),this.annotationModule.processAnnotation(f,n,i),u.appendChild(i.children[0])):this.annotationModule.renderAnnotations(r(this.element.id+"_Secondary_Element")))},u.prototype.setLocaleConstants=function(){this.defaultLocalConstants={ZoomIn:"Zoom in",Zoom:"Zoom",ZoomOut:"Zoom out",Pan:"Pan",Reset:"Reset",ResetZoom:"Reset Zoom"}},u.prototype.setTheme=function(){this.themeStyle=lc(this.theme,this.enableCanvas,this)},u.prototype.requiredModules=function(){var h,u,i=this,n=[],t=this.series,f=!1,e=!1,o=!1,r=this.zoomSettings,s=!1;return this.chartAreaType=t.length>0&&("Polar"===t[0].type||"Radar"===t[0].type)?"PolarRadar":"Cartesian",this.tooltip.enable&&n.push({member:"Tooltip",args:[this]}),t.map(function(r){i.isLegend=i.legendSettings.visible&&(""!==r.name||!!i.isLegend);u=-1!==r.type.indexOf("100")?r.type.replace("100","")+"Series":r.type+"Series";f=r.errorBar.visible||f;o=r.marker.dataLabel.visible||o||"Pareto"===r.type&&r.paretoOptions.marker.dataLabel.visible;s=r.lastValueLabel.enable||s;e=r.dragSettings.enable||e;n.some(function(n){return n.member===u})||n.push({member:u,args:[i,t]});"PolarRadar"===i.chartAreaType&&n.push({member:r.drawType+"Series",args:[i,t]});"Pareto"===r.type&&(n.push({member:"ColumnSeries",args:[i,t]}),n.push({member:"LineSeries",args:[i,t]}))}),this.findIndicatorModules(n),this.findTrendLineModules(n),n=this.findAxisModule(n),h=this.annotations.some(function(n){return null!==n.content}),f&&n.push({member:"ErrorBar",args:[this,t]}),this.isLegend&&n.push({member:"Legend",args:[this]}),(this.enableExport||this.allowExport)&&n.push({member:"Export",args:[this]}),"PolarRadar"!==this.chartAreaType&&this.crosshair.enable&&n.push({member:"Crosshair",args:[this]}),"PolarRadar"!==this.chartAreaType&&!this.scrollSettingEnabled&&(r.enableSelectionZooming||r.enableMouseWheelZooming||r.enablePinchZooming||r.enablePan||r.enableScrollbar||r.showToolbar)&&(n.push({member:"Zoom",args:[this,this.zoomSettings]}),r.enableScrollbar&&n.push({member:"ScrollBar",args:[this]})),"None"===this.selectionMode||"PolarRadar"===this.chartAreaType&&this.selectionMode.indexOf("Drag")>-1||n.push({member:"Selection",args:[this]}),("None"!==this.highlightMode||this.legendSettings.enableHighlight)&&n.push({member:"Highlight",args:[this]}),(o||this.stackLabels.visible)&&n.push({member:"DataLabel",args:[this,t]}),s&&n.push({member:"LastValueLabel",args:[this,t]}),e&&n.push({member:"DataEditing",args:[this]}),h&&n.push({member:"Annotation",args:[this]}),n},u.prototype.findAxisModule=function(n){var i=[],t;i.push(this.primaryXAxis);i.push(this.primaryYAxis);for(var r=!1,u=!1,f=!1,e=!1,o=!1,s=!1,h=0,c=i=i.concat(this.axes);h<c.length;h++)t=c[h],r="DateTime"===t.valueType||r,u="Category"===t.valueType||u,f="Logarithmic"===t.valueType||f,o="DateTimeCategory"===t.valueType||o,e=this.findStriplineVisibility(t.stripLines)||e,s=t.multiLevelLabels.length>0||s,this.scrollSettingEnabled=!!t.scrollbarSettings.enable||this.scrollSettingEnabled;return r&&n.push({member:"DateTime",args:[this]}),u&&n.push({member:"Category",args:[this]}),f&&n.push({member:"Logarithmic",args:[this]}),e&&n.push({member:"StripLine",args:[this]}),s&&n.push({member:"MultiLevelLabel",args:[this]}),o&&n.push({member:"DateTimeCategory",args:[this]}),this.scrollSettingEnabled&&n.push({member:"ScrollBar",args:[this]}),n},u.prototype.findIndicatorModules=function(n){var r,t,e=this.indicators,i,u,f;if(this.indicators.length)for(n.push({member:"LineSeries",args:[this]}),e.map(function(n){r=r||"Macd"===n.type;t=t||"BollingerBands"===n.type}),r&&n.push({member:"ColumnSeries",args:[this]}),t&&n.push({member:"RangeAreaSeries",args:[this]}),t&&n.push({member:"SplineRangeAreaSeries",args:[this]}),i=0,u=this.indicators;i<u.length;i++)f=u[i],n.push({member:f.type+"Indicator",args:[this]})},u.prototype.findTrendLineModules=function(n){for(var t,i,f=function(r){var u;r.trendlines.map(function(n){u=u||n.marker.visible;t=!(!t&&"Linear"!==n.type&&"MovingAverage"!==n.type);i=!(!i&&t&&"Exponential"!==n.type&&"Logarithmic"!==n.type&&"Power"!==n.type&&"Polynomial"!==n.type)});u&&n.push({member:"Marker",args:[e,r]})},e=this,r=0,u=this.series;r<u.length;r++)f(u[r]);(t||i)&&n.push({member:"TrendLine",args:[this]});t&&n.push({member:"LineSeries",args:[this]});i&&n.push({member:"SplineSeries",args:[this]})},u.prototype.findStriplineVisibility=function(n){for(var i=!1,t=0,r=n;t<r.length;t++)if(r[t].visible){i=!0;break}return i},u.prototype.removeSvg=function(){var r,u,n,f;if(this.redraw)return null;if(nh(this),this.enableCanvas&&this.svgObject&&"CANVAS"===this.svgObject.tagName)return this.renderer.clearRect(new i.Rect(0,0,this.availableSize.width,this.availableSize.height)),this.svgObject.parentNode&&t.remove(this.svgObject),null;if(v(this.element.id+"_Secondary_Element"),this.isReact&&this.clearTemplate(),r=0,this.zoomModule&&this.zoomModule.pinchTarget&&(this.zoomModule.pinchTarget.id="",this.zoomModule.pinchTarget.setAttribute("opacity","0"),this.svgObject.appendChild(this.zoomModule.pinchTarget),r=1),!t.isNullOrUndefined(this.resizeTo)){if(this.resizeTo!==this.checkResize&&this.isBlazor&&this.element.childElementCount)for(u=document.querySelectorAll(".e-chart"),n=0;n<u.length;n++)for(f=u[n];f.firstChild;)t.remove(f.firstChild);this.checkResize=this.resizeTo}if(this.svgObject){for(;this.svgObject.childNodes.length>r;)this.svgObject.removeChild(this.svgObject.firstChild);this.svgObject.hasChildNodes()||!this.svgObject.parentNode||this.stockChart||t.remove(this.svgObject)}},u.prototype.refreshDefinition=function(n){for(var t=0,i=n;t<i.length;t++)i[t].axes=[]},u.prototype.refreshAxis=function(){var n=this.primaryXAxis,t,u,r,f;for(n.rect=new i.Rect(void 0,void 0,0,0),(n=this.primaryYAxis).isStack100=!1,n.rect=new i.Rect(void 0,void 0,0,0),t=0,u=this.axes;t<u.length;t++)(n=u[t]).rect=new i.Rect(void 0,void 0,0,0),n.isStack100=!1;if(this.paretoSeriesModule&&this.series[0]&&"Pareto"===this.series[0].type)for(r=0,f=this.paretoSeriesModule.paretoAxes;r<f.length;r++)(n=f[r]).rect=new i.Rect(void 0,void 0,0,0),n.isStack100=!1},u.prototype.axisChange=function(n){return!(!n.name&&!n.valueType||(this.refreshDefinition(this.columns),this.refreshDefinition(this.rows),this.calculateVisibleAxis(),this.processData(),0))},u.prototype.getVisibleSeries=function(n,t){for(var u,i=0,r=n;i<r.length;i++)if(u=r[i],t===u.index)return u;return null},u.prototype.refreshLiveData=function(){this.calculateVisibleSeries();this.initTechnicalIndicators();this.initTrendLines();this.refreshDefinition(this.columns);this.refreshDefinition(this.rows);this.calculateVisibleAxis();this.processData(!1);this.isBlazor||(this.enableCanvas?this.createChartSvg():this.removeSvg(),this.refreshAxis(),this.refreshBound(),this.trigger("loaded",{chart:this.isBlazor?{}:this}))},u.prototype.removeStyles=function(){v(this.element.id+"_ej2_chart_selection");v(this.element.id+"_ej2_chart_highlight")},u.prototype.mouseMoveEvent=function(){if(this.tooltip.enable&&null!==this.previousPageX&&null!==this.previousPageY){var n=document.createEvent("MouseEvent");n.initMouseEvent("mousemove",!0,!1,window,1,100,100,this.previousPageX,this.previousPageY,!1,!1,!1,!1,0,null);this.element.dispatchEvent(n)}},u.prototype.showTooltip=function(n,t,i){var u,f;if(void 0===i&&(i=!1),i)for(u=0,f=this.visibleSeries;u<f.length;u++)for(var e=f[u],o=0,s=e.points;o<s.length;o++){var r=s[o],c="DateTime"===e.xAxis.valueType?r.xValue:r.x,h=n;if("DateTime"===e.xAxis.valueType&&(h=new Date(h).getTime()),n===c&&t===r.yValue){this.mouseX=r.regions[0].x+this.chartAxisLayoutPanel.seriesClipRect.x;this.mouseY=r.regions[0].y+this.chartAxisLayoutPanel.seriesClipRect.y;this.tooltipModule.tooltip();this.markerRender.mouseMoveHandler();break}}else this.isTouch&&(this.startMove=!0),this.mouseX=n,this.mouseY=t,this.tooltipModule.mouseMoveHandler(),this.markerRender.mouseMoveHandler()},u.prototype.hideTooltip=function(){this.tooltipModule.removeTooltip(t.Browser.isDevice?2e3:1e3)},u.prototype.showCrosshair=function(n,t){this.mouseX=n;this.mouseY=t;this.isCrosshair=!1;ht(this.mouseX,this.mouseY,this.chartAxisLayoutPanel.seriesClipRect)?this.crosshairModule.crosshair():this.hideCrosshair();this.isCrosshair=!0},u.prototype.hideCrosshair=function(){this.crosshairModule.removeCrosshair(t.Browser.isDevice?2e3:1e3)},u.prototype.sanitize=function(n){return this.enableHtmlSanitizer?t.SanitizeHtmlHelper.sanitize(n):n},u.prototype.onPropertyChanged=function(n,i){var u,s=!1,f=!1,h,l,y,w,a,p,b,c,g;if(this.animateSeries=!1,h=!1,l=!1,!this.delayRedraw&&!this.zoomRedraw){for(y=0,w=Object.keys(n);y<w.length;y++){a=w[y];switch(h=h||"primaryXAxis"!==a&&"primaryYAxis"!==a&&"axes"!==a,l&&h&&(this.redraw=!1),a){case"primaryXAxis":u=n.primaryXAxis;f=this.axisChange(u);n.primaryXAxis.edgeLabelPlacement&&(s=!0);n.primaryXAxis.crosshairTooltip||(f=!0);n.primaryXAxis.scrollbarSettings&&(f=!0);t.isNullOrUndefined(u.isInversed)&&t.isNullOrUndefined(u.opposedPosition)||this.primaryXAxis.setIsInversedAndOpposedPosition();this.primaryXAxis.zoomingScrollBar&&this.primaryXAxis.zoomingScrollBar.isScrollUI||!this.zoomModule||t.isNullOrUndefined(u.zoomFactor)&&t.isNullOrUndefined(u.zoomPosition)||(this.redraw=this.zoomSettings.enableAnimation&&!h,l=this.zoomSettings.enableAnimation&&!h);n.primaryXAxis.crosshairTooltip&&(n.primaryXAxis.crosshairTooltip.enable||(v(this.element.id+"_axis_tooltip_0"),v(this.element.id+"_axis_tooltip_text_0")));break;case"primaryYAxis":u=n.primaryYAxis;f=this.axisChange(u);n.primaryYAxis.edgeLabelPlacement&&(s=!0);n.primaryYAxis.crosshairTooltip||(f=!0);n.primaryYAxis.scrollbarSettings&&(f=!0);t.isNullOrUndefined(u.isInversed)&&t.isNullOrUndefined(u.opposedPosition)||this.primaryYAxis.setIsInversedAndOpposedPosition();this.primaryYAxis.zoomingScrollBar&&this.primaryYAxis.zoomingScrollBar.isScrollUI||!this.zoomModule||t.isNullOrUndefined(u.zoomFactor)&&t.isNullOrUndefined(u.zoomPosition)||(this.redraw=this.zoomSettings.enableAnimation&&!h,l=this.zoomSettings.enableAnimation&&!h);n.primaryYAxis.crosshairTooltip&&(n.primaryYAxis.crosshairTooltip.enable||(v(this.element.id+"_axis_tooltip_1"),v(this.element.id+"_axis_tooltip_text_1")));break;case"axes":for(p=0,b=Object.keys(n.axes);p<b.length;p++)c=b[p],u=n.axes[c],f=f||this.axisChange(u),u.crosshairTooltip||(f=!0),u.scrollbarSettings&&(f=!0),t.isNullOrUndefined(u.isInversed)&&t.isNullOrUndefined(u.opposedPosition)||this.axes[c].setIsInversedAndOpposedPosition(),this.axes[c].zoomingScrollBar&&this.axes[c].zoomingScrollBar.isScrollUI||!this.zoomModule||t.isNullOrUndefined(u.zoomFactor)&&t.isNullOrUndefined(u.zoomPosition)||(this.redraw=this.zoomSettings.enableAnimation&&!h,l=this.zoomSettings.enableAnimation&&!h),u.crosshairTooltip&&(u.crosshairTooltip.enable||(v(this.element.id+"_axis_tooltip_"+this.axes[c].index),v(this.element.id+"_axis_tooltip_text_"+this.axes[c].index)));break;case"height":case"width":this.createChartSvg();f=!0;break;case"subTitle":case"title":case"indicators":f=!0;break;case"titleStyle":n.titleStyle&&(n.titleStyle.size||n.titleStyle.textOverflow||n.titleStyle.position)?f=!0:s=!0;break;case"subTitleStyle":n.subTitleStyle&&(n.subTitleStyle.size||n.subTitleStyle.textOverflow)?f=!0:s=!0;break;case"border":case"background":s=!0;break;case"dataSource":this.processData(!1);f=!0;break;case"enableCanvas":this.refresh();break;case"series":for(var nt=this.series.length,k=!1,r=void 0,d=void 0,e=0;e<nt;e++)(r=n.series[e],!t.isNullOrUndefined(r)&&r.lastValueLabel&&this.series[e].lastValueLabel.enable&&this.lastValueLabelModule)?(this.lastValueLabelCollections=[],g=t.extend(this.series[e].lastValueLabel,r.lastValueLabel),this.lastValueLabelModule.render(this.series[e],this,g,!0),this.series[e].lastValueLabelElement&&o(this.enableCanvas,this.lastValueLabelElements,this.series[e].lastValueLabelElement,!0)):!t.isNullOrUndefined(r)&&r.lastValueLabel&&!r.lastValueLabel.enable&&this.series[e]&&this.series[e].lastValueLabelElement&&(v(this.series[e].lastValueLabelElement.id),this.series[e].lastValueLabelElement=null),this.isBlazor&&r&&(r.visible!==i.series[e].visible||r.isClosed||r.marker||r.emptyPointSettings||r.type||r.boxPlotMode||r.showMean)&&(d=!0),!t.isNullOrUndefined(r)&&(r.dataSource||r.query||r.errorBar||r.xName||r.yName||r.size||r.high||r.low||r.open||r.close||r.trendlines||r.fill||r.name||r.marker||r.width||r.binInterval||r.type||r.visible!==i.series[e].visible||r.legendShape||r.emptyPointSettings||r.opacity||r.columnWidth||r.columnSpacing||r.opacity||r.dashArray||r.bearFillColor||r.bullFillColor||d)&&(t.extend(this.getVisibleSeries(this.visibleSeries,e),r,null,!0),k=!0);k&&(this.calculateAreaType(),this.calculateVisibleSeries(),this.initTechnicalIndicators(),this.initTrendLines(),this.refreshDefinition(this.columns),this.refreshDefinition(this.rows),this.calculateVisibleAxis(),this.processData(!1),f=!0);break;case"zoomSettings":(n.zoomSettings.enableScrollbar||i.zoomSettings.enableScrollbar)&&(f=!0);s=!0;break;case"chartArea":n.chartArea.border&&n.chartArea.border.width&&(f=!0);s=!0;break;case"legendSettings":n.legendSettings.background&&n.legendSettings.opacity||(f=!0);s=!0;break;case"palettes":this.calculateVisibleSeries();s=!0;break;case"selectedDataIndexes":this.selectionModule?(this.selectionModule.currentMode=this.selectionMode,this.selectionModule.selectedDataIndexes=this.selectedDataIndexes,this.selectionModule.styleId=this.element.id+"_ej2_chart_selection",this.selectionModule.redrawSelection(this,i.selectionMode,!0)):this.highlightModule&&(this.highlightModule.currentMode=this.highlightMode,this.highlightModule.highlightDataIndexes=this.selectedDataIndexes,this.highlightModule.styleId=this.element.id+"_ej2_chart_highlight",this.highlightModule.redrawSelection(this,i.selectionMode,!0));break;case"selectionMode":this.selectionModule&&n.selectionMode&&-1===n.selectionMode.indexOf("Drag")&&(this.selectionModule.currentMode=this.selectionMode,"None"===i.selectionMode&&this.selectionModule.invokeSelection(this),this.selectionModule.styleId=this.element.id+"_ej2_chart_selection",this.selectionModule.redrawSelection(this,i.selectionMode,!0));break;case"isMultiSelect":this.selectionModule&&!n.isMultiSelect&&this.selectionModule.selectedDataIndexes.length>1&&(this.selectionModule.currentMode=this.selectionMode,this.selectionModule.styleId=this.element.id+"_ej2_chart_selection",this.selectionModule.redrawSelection(this,i.selectionMode));break;case"highlightMode":case"selectionPattern":case"highlightPattern":this.removeStyles();s=!0;break;case"theme":this.animateSeries=!0;break;case"enableRtl":case"locale":case"currencyCode":this.isBlazor?(this.setCulture(),s=!0):this.refresh();break;case"tooltip":this.tooltipModule&&(this.tooltipModule.previousPoints=[],this.tooltip.template&&(this.tooltipModule.template=this.tooltip.template))}}!f&&s&&(this.rotatedDataLabelCollections=[],this.removeSvg(),this.renderElements(),this.trigger("loaded",{chart:this.isBlazor?{}:this}));f&&(this.enableCanvas?this.createChartSvg():this.removeSvg(),this.isReact&&this.clearTemplate(),this.dragY=null,this.refreshAxis(),this.refreshBound(),this.trigger("loaded",{chart:this.isBlazor?{}:this}),this.redraw=!1,this.animated=!1)}this.zoomRedraw=!1},s([t.Property(null)],u.prototype,"noDataTemplate",void 0),s([t.Property(null)],u.prototype,"width",void 0),s([t.Property(null)],u.prototype,"height",void 0),s([t.Property("")],u.prototype,"title",void 0),s([t.Property("")],u.prototype,"dataSource",void 0),s([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},bl)],u.prototype,"titleStyle",void 0),s([t.Property("")],u.prototype,"subTitle",void 0),s([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null,accessibility:{focusable:!1}},bl)],u.prototype,"subTitleStyle",void 0),s([t.Complex({},lr)],u.prototype,"margin",void 0),s([t.Complex({color:"#DDDDDD",width:0},yt)],u.prototype,"border",void 0),s([t.Property(null)],u.prototype,"background",void 0),s([t.Complex({border:{color:null,width:.5},background:"transparent"},ap)],u.prototype,"chartArea",void 0),s([t.Property(!1)],u.prototype,"enableHtmlSanitizer",void 0),s([t.Complex({name:"primaryXAxis"},yo)],u.prototype,"primaryXAxis",void 0),s([t.Complex({name:"primaryYAxis"},yo)],u.prototype,"primaryYAxis",void 0),s([t.Collection([{}],hw)],u.prototype,"rows",void 0),s([t.Collection([{}],cw)],u.prototype,"columns",void 0),s([t.Collection([{}],yo)],u.prototype,"axes",void 0),s([t.Collection([{}],vt)],u.prototype,"series",void 0),s([t.Collection([{accessibility:{focusable:!1}}],tw)],u.prototype,"annotations",void 0),s([t.Property([])],u.prototype,"palettes",void 0),s([t.Property("Material")],u.prototype,"theme",void 0),s([t.Complex({},yl)],u.prototype,"tooltip",void 0),s([t.Complex({},yv)],u.prototype,"crosshair",void 0),s([t.Complex({},gb)],u.prototype,"legendSettings",void 0),s([t.Collection([{}],nk)],u.prototype,"rangeColorSettings",void 0),s([t.Complex({},pv)],u.prototype,"zoomSettings",void 0),s([t.Property("")],u.prototype,"highlightColor",void 0),s([t.Property("None")],u.prototype,"selectionMode",void 0),s([t.Property("None")],u.prototype,"highlightMode",void 0),s([t.Property("None")],u.prototype,"selectionPattern",void 0),s([t.Property("None")],u.prototype,"highlightPattern",void 0),s([t.Property(!1)],u.prototype,"isMultiSelect",void 0),s([t.Property(!1)],u.prototype,"allowMultiSelection",void 0),s([t.Property(!0)],u.prototype,"enableExport",void 0),s([t.Property(!1)],u.prototype,"allowExport",void 0),s([t.Collection([],as)],u.prototype,"selectedDataIndexes",void 0),s([t.Property(!1)],u.prototype,"useGroupingSeparator",void 0),s([t.Property(!1)],u.prototype,"enableAutoIntervalOnBothAxis",void 0),s([t.Property(!1)],u.prototype,"isTransposed",void 0),s([t.Property(!1)],u.prototype,"enableCanvas",void 0),s([t.Property(null)],u.prototype,"backgroundImage",void 0),s([t.Collection([],vv)],u.prototype,"indicators",void 0),s([t.Property(!0)],u.prototype,"enableAnimation",void 0),s([t.Property(null)],u.prototype,"description",void 0),s([t.Property(1)],u.prototype,"tabIndex",void 0),s([t.Property(!0)],u.prototype,"enableSideBySidePlacement",void 0),s([t.Complex({},lu)],u.prototype,"accessibility",void 0),s([t.Property(null)],u.prototype,"focusBorderColor",void 0),s([t.Property(1.5)],u.prototype,"focusBorderWidth",void 0),s([t.Property(0)],u.prototype,"focusBorderMargin",void 0),s([t.Complex({},sw)],u.prototype,"stackLabels",void 0),s([t.Event()],u.prototype,"resized",void 0),s([t.Event()],u.prototype,"beforeResize",void 0),s([t.Event()],u.prototype,"annotationRender",void 0),s([t.Event()],u.prototype,"beforePrint",void 0),s([t.Event()],u.prototype,"loaded",void 0),s([t.Event()],u.prototype,"beforeExport",void 0),s([t.Event()],u.prototype,"afterExport",void 0),s([t.Event()],u.prototype,"load",void 0),s([t.Event()],u.prototype,"animationComplete",void 0),s([t.Event()],u.prototype,"legendRender",void 0),s([t.Event()],u.prototype,"textRender",void 0),s([t.Event()],u.prototype,"pointRender",void 0),s([t.Event()],u.prototype,"seriesRender",void 0),s([t.Event()],u.prototype,"axisLabelRender",void 0),s([t.Event()],u.prototype,"axisLabelClick",void 0),s([t.Event()],u.prototype,"axisRangeCalculated",void 0),s([t.Event()],u.prototype,"axisMultiLabelRender",void 0),s([t.Event()],u.prototype,"legendClick",void 0),s([t.Event()],u.prototype,"multiLevelLabelClick",void 0),s([t.Event()],u.prototype,"tooltipRender",void 0),s([t.Event()],u.prototype,"sharedTooltipRender",void 0),s([t.Event()],u.prototype,"chartMouseMove",void 0),s([t.Event()],u.prototype,"chartMouseClick",void 0),s([t.Event()],u.prototype,"chartDoubleClick",void 0),s([t.Event()],u.prototype,"pointClick",void 0),s([t.Event()],u.prototype,"pointDoubleClick",void 0),s([t.Event()],u.prototype,"pointMove",void 0),s([t.Event()],u.prototype,"chartMouseLeave",void 0),s([t.Event()],u.prototype,"chartMouseDown",void 0),s([t.Event()],u.prototype,"chartMouseUp",void 0),s([t.Event()],u.prototype,"dragComplete",void 0),s([t.Event()],u.prototype,"selectionComplete",void 0),s([t.Event()],u.prototype,"zoomComplete",void 0),s([t.Event()],u.prototype,"onZooming",void 0),s([t.Event()],u.prototype,"scrollStart",void 0),s([t.Event()],u.prototype,"scrollEnd",void 0),s([t.Event()],u.prototype,"scrollChanged",void 0),s([t.Event()],u.prototype,"dragStart",void 0),s([t.Event()],u.prototype,"drag",void 0),s([t.Event()],u.prototype,"dragEnd",void 0),s([t.Property("USD")],u.prototype,"currencyCode",void 0),s([t.NotifyPropertyChanges],u)}(t.Component),vut=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vc=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return vut(t,n),t.prototype.calculateDateTimeNiceInterval=function(n,t,i,r,u){void 0===u&&(u=!0);var f,o=new Date(i),s=new Date(r),e=Math.abs((o.getTime()-s.getTime())/864e5);switch(n.actualIntervalType=n.intervalType,n.intervalType){case"Years":f=this.calculateNumericNiceInterval(n,e/365,t);break;case"Quarter":f=this.calculateNumericNiceInterval(n,e/365*4,t);break;case"Months":f=this.calculateNumericNiceInterval(n,e/30,t);break;case"Weeks":f=this.calculateNumericNiceInterval(n,e/7,t);break;case"Days":f=this.calculateNumericNiceInterval(n,e,t);break;case"Hours":f=this.calculateNumericNiceInterval(n,24*e,t);break;case"Minutes":f=this.calculateNumericNiceInterval(n,1440*e,t);break;case"Seconds":f=this.calculateNumericNiceInterval(n,86400*e,t);break;case"Auto":return(f=this.calculateNumericNiceInterval(n,e/365,t))>=1?(n.actualIntervalType="Years",f):(f=this.calculateNumericNiceInterval(n,e/30,t))>=1?(n.actualIntervalType="Months",f):(f=this.calculateNumericNiceInterval(n,e/7,t))>=1&&!u?(n.actualIntervalType="Weeks",f):(f=this.calculateNumericNiceInterval(n,e,t))>=1?(n.actualIntervalType="Days",f):(f=this.calculateNumericNiceInterval(n,24*e,t))>=1?(n.actualIntervalType="Hours",f):(f=this.calculateNumericNiceInterval(n,1440*e,t))>=1?(n.actualIntervalType="Minutes",f):(f=this.calculateNumericNiceInterval(n,86400*e,t),n.actualIntervalType="Seconds",f)}return f},t.prototype.getSkeleton=function(n,t,i,r){var f,u=n.actualIntervalType;return n.skeleton?n.skeleton:("Years"===u?f=r?n.isChart?(n.valueType,"y"):"y":n.isChart?"DateTime"===n.valueType&&n.isIntervalInDecimal?"y":"yMMM":"y":"Quarter"===u?f=r?"y":"yMMM":"Months"===u?r?(n.isChart,f="m"):f=n.isChart?"MMMd":"MMM":f="Weeks"===u?r?"m":"MEd":"Days"===u?r?"d":n.isChart?"DateTime"===n.valueType?"MMMd":"yMd":"MMMd":"Hours"===u?r?"t":n.isChart?"DateTime"===n.valueType?"Hm":"EHm":"h":"Minutes"===u?r?"T":n.isChart?"Hms":"hm":r?"T":n.isChart?"Hms":"hms",f)},t.prototype.findCustomFormats=function(n){var t=n.labelFormat?n.labelFormat:"";return!n.isChart||n.skeleton||"Months"!==n.actualIntervalType||t||(t="DateTime"===n.valueType?"MMM yyyy":"yMMM"),t},t}(ys),yut=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tk=function(n){function i(t){return n.call(this,t)||this}return yut(i,n),i.prototype.calculateRangeAndInterval=function(n,t){this.calculateRange(t);this.getActualRange(t,n);this.applyRangePadding(t,n);this.calculateVisibleLabels(t,this.chart)},i.prototype.getActualRange=function(n,t){var u={skeleton:"full",type:"dateTime"},i=this.chart.intl.getDateParser(u),r=this.chart.intl.getDateFormat(u),f;null!==n.minimum?this.min=this.chart.isBlazor?Date.parse(n.minimum.toString()):Date.parse(i(r(new Date(gt.DataUtil.parse.parseJson({val:n.minimum}).val)))):null!==this.min&&this.min!==Number.POSITIVE_INFINITY||(this.min=Date.parse(i(r(new Date(1970,1,1)))));null!==n.maximum?this.max=this.chart.isBlazor?Date.parse(n.maximum.toString()):Date.parse(i(r(new Date(gt.DataUtil.parse.parseJson({val:n.maximum}).val)))):null!==this.max&&this.max!==Number.NEGATIVE_INFINITY||(this.max=Date.parse(i(r(new Date(1970,5,1)))));this.min===this.max&&(this.max=this.max+2592e6,this.min=this.min-2592e6);n.actualRange={};n.doubleRange=new su(this.min,this.max);f=this.calculateDateTimeNiceInterval(n,t,n.doubleRange.start,n.doubleRange.end);n.actualRange.interval=n.interval?n.interval:f;n.actualRange.min=n.doubleRange.start;n.actualRange.max=n.doubleRange.end},i.prototype.applyRangePadding=function(n,t){var i,r,u,f,c,e,s,o,h;if(this.min=n.actualRange.min,this.max=n.actualRange.max,u=n.actualRange.interval,!nr(n))if(f=n.getRangePadding(this.chart),i=new Date(this.min),r=new Date(this.max),c=n.actualIntervalType,"None"===f)this.min=i.getTime(),this.max=r.getTime();else if("Additional"===f||"Round"===f)switch(c){case"Years":this.getYear(i,r,f,u);break;case"Months":this.getMonth(i,r,f,u);break;case"Days":this.getDay(i,r,f,u);break;case"Hours":this.getHour(i,r,f,u);break;case"Minutes":e=i.getMinutes()/u*u;s=r.getMinutes()+(i.getMinutes()-e);"Round"===f?(this.min=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),e,0).getTime(),this.max=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),s,59).getTime()):(this.min=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),e+-u,0).getTime(),this.max=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),s+u,0).getTime());break;case"Seconds":o=i.getSeconds()/u*u;h=r.getSeconds()+(i.getSeconds()-o);"Round"===f?(this.min=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),o,0).getTime(),this.max=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),h,0).getTime()):(this.min=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),o+-u,0).getTime(),this.max=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),h+u,0).getTime())}n.actualRange.min=(n.minimum,this.min);n.actualRange.max=(n.maximum,this.max);n.actualRange.delta=n.actualRange.max-n.actualRange.min;n.doubleRange=new su(n.actualRange.min,n.actualRange.max);this.calculateVisibleRange(t,n)},i.prototype.getYear=function(n,t,i,r){var u=n.getFullYear(),f=t.getFullYear();"Additional"===i?(this.min=new Date(u-r,1,1,0,0,0).getTime(),this.max=new Date(f+r,1,1,0,0,0).getTime()):(this.min=new Date(u,0,0,0,0,0).getTime(),this.max=new Date(f,11,30,23,59,59).getTime())},i.prototype.getMonth=function(n,t,i,r){var f=n.getMonth(),u=t.getMonth();"Round"===i?(this.min=new Date(n.getFullYear(),f,0,0,0,0).getTime(),this.max=new Date(t.getFullYear(),u,new Date(t.getFullYear(),t.getMonth(),0).getDate(),23,59,59).getTime()):(this.min=new Date(n.getFullYear(),f+-r,1,0,0,0).getTime(),this.max=new Date(t.getFullYear(),u+r,2===u?28:30,0,0,0).getTime())},i.prototype.getDay=function(n,t,i,r){var u=n.getDate(),f=t.getDate();"Round"===i?(this.min=new Date(n.getFullYear(),n.getMonth(),u,0,0,0).getTime(),this.max=new Date(t.getFullYear(),t.getMonth(),f,23,59,59).getTime()):(this.min=new Date(n.getFullYear(),n.getMonth(),u+-r,0,0,0).getTime(),this.max=new Date(t.getFullYear(),t.getMonth(),f+r,0,0,0).getTime())},i.prototype.getHour=function(n,t,i,r){var u=n.getHours()/r*r,f=t.getHours()+(n.getHours()-u);"Round"===i?(this.min=new Date(n.getFullYear(),n.getMonth(),n.getDate(),u,0,0).getTime(),this.max=new Date(t.getFullYear(),t.getMonth(),t.getDate(),f,59,59).getTime()):(this.min=new Date(n.getFullYear(),n.getMonth(),n.getDate(),u+-r,0,0).getTime(),this.max=new Date(t.getFullYear(),t.getMonth(),t.getDate(),f+r,0,0).getTime())},i.prototype.calculateVisibleRange=function(n,i){i.visibleRange={min:i.actualRange.min,max:i.actualRange.max,interval:i.actualRange.interval,delta:i.actualRange.delta};var r=!t.isNullOrUndefined(i.zoomingScrollBar)&&i.zoomingScrollBar.isLazyLoad;be(i)&&!r&&(i.calculateVisibleRangeOnZooming(),i.visibleRange.interval=i.enableAutoIntervalOnZooming?this.calculateDateTimeNiceInterval(i,n,i.visibleRange.min,i.visibleRange.max):i.visibleRange.interval);i.dateTimeInterval=this.increaseDateTimeInterval(i,i.visibleRange.min,i.visibleRange.interval).getTime()-i.visibleRange.min;i.triggerRangeRender(this.chart,i.visibleRange.min,i.visibleRange.max,i.visibleRange.interval)},i.prototype.calculateVisibleLabels=function(n,i){n.visibleLabels=[];var u,f,r=n.visibleRange.min,o="chart"===i.getModuleName()&&i.isBlazor,e=n.visibleLabels;for(null===n.minimum&&(r=this.alignRangeStart(n,r,n.visibleRange.interval).getTime()),this.startValue&&this.startValue<r&&i.zoomModule&&i.zoomModule.isPanning?r=this.startValue:this.startValue=r;r<=n.visibleRange.max&&(u=t.extend({},t.getValue("properties",n.labelStyle),null,!0),f=e.length?n.visibleLabels[e.length-1].value:r,n.format=i.intl.getDateFormat({format:this.findCustomFormats(n)||this.blazorCustomFormat(n),type:et(n.skeletonType),skeleton:this.getSkeleton(n,r,f,o)}),n.startLabel=n.format(new Date(n.visibleRange.min)),n.endLabel=n.format(new Date(n.visibleRange.max)),si(r,n.visibleRange)&&(this.increaseDateTimeInterval(n,r,n.visibleRange.interval).getTime()>n.visibleRange.max&&(n.endLabel=n.format(new Date(r))),yr(i,r,n.format(new Date(r)),u,n)),r!==(r=this.increaseDateTimeInterval(n,r,n.visibleRange.interval).getTime())););("Months"===n.actualIntervalType||"Days"===n.actualIntervalType)&&n.isChart&&(n.format=i.intl.getDateFormat({format:n.labelFormat||("Months"!==n.actualIntervalType||n.skeleton?"":"y MMM"),type:et(n.skeletonType),skeleton:n.skeleton||("Days"===n.actualIntervalType?"MMMd":"")}));n.getMaxLabelWidth&&n.getMaxLabelWidth(this.chart)},i.prototype.blazorCustomFormat=function(n){return this.chart.isBlazor?"Years"===n.actualIntervalType?n.isIntervalInDecimal?"yyyy":"MMM y":"Days"!==n.actualIntervalType||n.isIntervalInDecimal?"":"ddd HH tt":""},i.prototype.increaseDateTimeInterval=function(n,t,i){var r=new Date(t),u;if(n.interval?(n.isIntervalInDecimal=i%1==0,n.visibleRange.interval=i):(i=Math.ceil(i),n.visibleRange.interval=i),u=n.actualIntervalType,n.isIntervalInDecimal)switch(u){case"Years":return r.setFullYear(r.getFullYear()+i),r;case"Quarter":return r.setMonth(r.getMonth()+3*i),r;case"Months":return r.setMonth(r.getMonth()+i),r;case"Weeks":return r.setDate(r.getDate()+7*i),r;case"Days":return r.setDate(r.getDate()+i),r;case"Hours":return r.setHours(r.getHours()+i),r;case"Minutes":return r.setMinutes(r.getMinutes()+i),r;case"Seconds":return r.setSeconds(r.getSeconds()+i),r}else r=this.getDecimalInterval(r,i,u);return r},i.prototype.alignRangeStart=function(n,t,i){var r=new Date(t),u,f,e,o,s,h;switch(n.actualIntervalType){case"Years":return u=Math.floor(Math.floor(r.getFullYear()/i)*i),new Date(u,r.getMonth(),r.getDate(),0,0,0);case"Months":return f=Math.floor(Math.floor(r.getMonth()/i)*i),new Date(r.getFullYear(),f,r.getDate(),0,0,0);case"Days":return e=Math.floor(Math.floor(r.getDate()/i)*i),new Date(r.getFullYear(),r.getMonth(),e,0,0,0);case"Hours":return o=Math.floor(Math.floor(r.getHours()/i)*i),new Date(r.getFullYear(),r.getMonth(),r.getDate(),o,0,0);case"Minutes":return s=Math.floor(Math.floor(r.getMinutes()/i)*i),new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),s,0,0);case"Seconds":return h=Math.floor(Math.floor(r.getSeconds()/i)*i),new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),h,0)}return r},i.prototype.getDecimalInterval=function(n,t,i){var r=Math.floor(t),u=t-r,f,e,o,s,h,c;switch(i){case"Years":return f=Math.round(12*u),n.setFullYear(n.getFullYear()+r),n.setMonth(n.getMonth()+f),n;case"Quarter":return n.setMonth(n.getMonth()+3*t),n;case"Months":return e=Math.round(30*u),n.setMonth(n.getMonth()+r),n.setDate(n.getDate()+e),n;case"Weeks":return n.setDate(n.getDate()+7*t),n;case"Days":return o=Math.round(24*u),n.setDate(n.getDate()+r),n.setHours(n.getHours()+o),n;case"Hours":return s=Math.round(60*u),n.setHours(n.getHours()+r),n.setMinutes(n.getMinutes()+s),n;case"Minutes":return h=Math.round(60*u),n.setMinutes(n.getMinutes()+r),n.setSeconds(n.getSeconds()+h),n;case"Seconds":return c=Math.round(1e3*u),n.setSeconds(n.getSeconds()+r),n.setMilliseconds(n.getMilliseconds()+c),n}return n},i.prototype.getModuleName=function(){return"DateTime"},i.prototype.destroy=function(){},i}(vc),put=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ik=function(n){function i(t){return n.call(this,t)||this}return put(i,n),i.prototype.calculateRangeAndInterval=function(n,t){this.calculateRange(t);this.getActualRange(t,n);this.applyRangePadding(t,n);this.calculateVisibleLabels(t)},i.prototype.getActualRange=function(n,t){this.initializeDoubleRange(n);n.actualRange={};n.actualRange.interval=n.interval?Math.ceil(n.interval):Math.max(1,Math.floor(n.doubleRange.delta/ke(t,n)));n.actualRange.min=n.doubleRange.start;n.actualRange.max=n.doubleRange.end;n.actualRange.delta=n.doubleRange.delta},i.prototype.applyRangePadding=function(n,i){var u,r;n.series.forEach(function(i){u||(u=(i.type.indexOf("Column")>-1||i.type.indexOf("Bar")>-1)&&!(n.zoomFactor<1||n.zoomPosition>0)&&t.isNullOrUndefined(n.minimum)&&t.isNullOrUndefined(n.maximum))});r="BetweenTicks"!==n.labelPlacement&&!u||this.chart.stockChart||"PolarRadar"===this.chart.chartAreaType?0:.5;r>0?(n.actualRange.min-=r,n.actualRange.max+=r):n.actualRange.max+=n.actualRange.max?0:.5;n.doubleRange=new su(n.actualRange.min,n.actualRange.max);n.actualRange.delta=n.doubleRange.delta;this.calculateVisibleRange(i,n)},i.prototype.calculateVisibleLabels=function(n){n.visibleLabels=[];n.visibleRange.interval=n.visibleRange.interval<1?1:n.visibleRange.interval;var u,r,i=Math.ceil(n.visibleRange.min);for((n.zoomFactor<1||n.zoomPosition>0)&&(i=n.visibleRange.min-n.visibleRange.min%n.visibleRange.interval),n.startLabel=n.labels[Math.round(n.visibleRange.min)],n.endLabel=n.labels[Math.floor(n.visibleRange.max)];i<=n.visibleRange.max;i+=n.visibleRange.interval)u=t.extend({},t.getValue("properties",n.labelStyle),null,!0),si(i,n.visibleRange)&&n.labels.length>0&&(r=Math.round(i),yr(this.chart,r,n.labels[r]?n.labels[r].toString():"",u,n));n.getMaxLabelWidth&&n.getMaxLabelWidth(this.chart)},i.prototype.getModuleName=function(){return"Category"},i.prototype.destroy=function(){},i}(vc),wut=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),but=function(n){function i(t){return n.call(this,t)||this}return wut(i,n),i.prototype.calculateRangeAndInterval=function(n,t){this.calculateRange(t);this.getActualRange(t,n);this.calculateVisibleRange(n,t);this.calculateVisibleLabels(t,this.chart)},i.prototype.getActualRange=function(n,t){var i,r;this.initializeDoubleRange(n);this.min=this.min<0?0:this.min;i=hi(this.min,n.logBase);i=isFinite(i)?i:this.min;r=1===this.max?1:hi(this.max,n.logBase);r=isFinite(i)?r:this.max;this.min=Math.floor(i/1);n.series&&n.series.some(function(n){return(-1!==n.type.indexOf("Column")||-1!==n.type.indexOf("Bar"))&&-1===n.type.indexOf("Range")})&&(this.min=this.min<=0?+this.min-1:this.min);this.max=Math.ceil(r/1);this.max=this.max===this.min?this.max+1:this.max;n.actualRange.interval=n.interval||this.calculateLogNiceInterval(this.max-this.min,t,n);n.actualRange.min=this.min;n.actualRange.max=this.max;n.actualRange.delta=this.max-this.min},i.prototype.calculateVisibleRange=function(n,i){i.visibleRange={interval:i.actualRange.interval,max:i.actualRange.max,min:i.actualRange.min,delta:i.actualRange.delta};var r=!t.isNullOrUndefined(i.zoomingScrollBar)&&i.zoomingScrollBar.isLazyLoad;(i.zoomFactor<1||i.zoomPosition>0)&&!r&&(i.calculateVisibleRangeOnZooming(),i.visibleRange.interval=i.enableAutoIntervalOnZooming?this.calculateLogNiceInterval(i.doubleRange.delta,n,i):i.visibleRange.interval,i.visibleRange.interval=0===Math.floor(i.visibleRange.interval)?1:Math.floor(i.visibleRange.interval),i.triggerRangeRender(this.chart,i.visibleRange.min,i.visibleRange.max,i.visibleRange.interval))},i.prototype.calculateLogNiceInterval=function(n,t,i){var o=ke(t,i),r=n,s=Math.pow(i.logBase,Math.floor(hi(r,10))),u,e,f;for(i.intervalDivs=r>=10?[10,5,2,1,.5,.2]:i.intervalDivs,u=0,e=i.intervalDivs.length;u<e;u++){if(f=s*i.intervalDivs[u],o<n/f)break;r=f}return r},i.prototype.calculateVisibleLabels=function(n,i){var o,u,r=n.visibleRange.min;n.visibleLabels=[];(n.zoomFactor<1||n.zoomPosition>0)&&(r=n.visibleRange.min-n.visibleRange.min%n.visibleRange.interval);var e=this.getFormat(n),s=null!==e.match("{value}"),f=Math.pow(n.logBase,n.visibleRange.min);for(n.format=i.intl.getNumberFormat({format:s?"":e,useGrouping:i.useGroupingSeparator,maximumFractionDigits:f<1?20:3}),n.startLabel=n.format(f<1?+f.toPrecision(1):f),n.endLabel=n.format(Math.pow(n.logBase,n.visibleRange.max));r<=n.visibleRange.max;r+=n.visibleRange.interval)o=t.extend({},t.getValue("properties",n.labelStyle),null,!0),si(r,n.visibleRange)&&(u=Math.pow(n.logBase,r),yr(this.chart,r,this.formatValue(n,s,e,u<1?+u.toPrecision(1):u),o,n));n.getMaxLabelWidth&&n.getMaxLabelWidth(this.chart)},i.prototype.getModuleName=function(){return"Logarithmic"},i.prototype.destroy=function(){},i}(ys),kut=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dut=function(n){function i(t){return n.call(this,t)||this}return kut(i,n),i.prototype.calculateRangeAndInterval=function(n,t){this.axisSize=n;this.calculateRange(t);this.getActualRange(t,n);this.applyRangePadding(t,n);this.calculateVisibleLabels(t)},i.prototype.calculateVisibleLabels=function(n){var u,i,e;n.visibleLabels=[];var o="BetweenTicks"===n.labelPlacement?.5:0,f=0,r="rangeNavigator"===this.chart.getModuleName();for(this.axisSize=r?this.chart.availableSize:this.axisSize,(r||this.chart.stockChart)&&n.labels.sort(function(n,t){return Number(n)-Number(t)}),"Auto"===n.intervalType?this.calculateDateTimeNiceInterval(n,this.axisSize,parseInt(n.labels[0],10),parseInt(n.labels[n.labels.length-1],10)):n.actualIntervalType=n.intervalType,n.format=this.chart.intl.getDateFormat({format:n.labelFormat||this.blazorCustomFormat(n),type:et(n.skeletonType),skeleton:this.getSkeleton(n,null,null,this.chart.isBlazor)}),i=!r&&this.chart.stockChart?1:0,e=n.interval?n.interval:1;i<n.labels.length;i+=e)u=t.extend({},t.getValue("properties",n.labelStyle),null,!0),this.chart.stockChart||r?"Auto"===n.intervalType?(!r&&1===i||this.StartOfWeek(n.labels.map(Number)[i],n.labels.map(Number)[i-1],n,i,f)||n.isIndexed)&&si(i,n.visibleRange)&&(yr(this.chart,i,n.isIndexed?this.getIndexedAxisLabel(n.labels[i],n.format):n.format(new Date(n.labels.map(Number)[i])),u,n),f=i):(!r&&1===i||!this.sameInterval(n.labels.map(Number)[i],n.labels.map(Number)[i-1],n.actualIntervalType,i)||n.isIndexed)&&si(i,n.visibleRange)&&(!r&&1===i||this.isMaximum(i,f,n))&&(yr(this.chart,i,n.isIndexed?this.getIndexedAxisLabel(n.labels[i],n.format):n.format(new Date(n.labels.map(Number)[i])),u,n),f=i):this.sameInterval(n.labels.map(Number)[i],n.labels.map(Number)[i-1],n.actualIntervalType,i)&&!n.isIndexed||si(i-o,n.visibleRange)&&yr(this.chart,i,n.isIndexed?this.getIndexedAxisLabel(n.labels[i],n.format):n.format(new Date(n.labels.map(Number)[i])),u,n);n.startLabel=n.visibleLabels[0]?n.visibleLabels[0].text:"";n.endLabel=n.visibleLabels[n.visibleLabels.length-1]?n.visibleLabels[n.visibleLabels.length-1].text:"";n.getMaxLabelWidth&&n.getMaxLabelWidth(this.chart)},i.prototype.blazorCustomFormat=function(n){return this.chart.isBlazor&&"Years"===n.actualIntervalType?"yyyy":""},i.prototype.getIndexedAxisLabel=function(n,t){for(var i=n.split(","),r=0;r<i.length;r++)i[r]=t(new Date(parseInt(i[r],10)));return i.join(", ")},i.prototype.sameInterval=function(n,t,i,r){var u;if(0===r)u=!1;else switch(i){case"Years":u=new Date(n).getFullYear()===new Date(t).getFullYear();break;case"Quarter":u=new Date(n).getFullYear()===new Date(t).getFullYear()&&Math.floor(new Date(n).getMonth()/3)===Math.floor(new Date(t).getMonth()/3);break;case"Months":u=new Date(n).getFullYear()===new Date(t).getFullYear()&&new Date(n).getMonth()===new Date(t).getMonth();break;case"Weeks":u=new Date(n).getFullYear()===new Date(t).getFullYear()&&new Date(n).getMonth()===new Date(t).getMonth()&&Math.floor((new Date(n).getDate()-1)/7)===Math.floor((new Date(t).getDate()-1)/7);break;case"Days":u=Math.abs(n-t)<864e5&&new Date(n).getDay()===new Date(t).getDay();break;case"Hours":u=Math.abs(n-t)<36e5&&new Date(n).getDay()===new Date(t).getDay();break;case"Minutes":u=Math.abs(n-t)<6e4&&new Date(n).getMinutes()===new Date(t).getMinutes();break;case"Seconds":u=Math.abs(n-t)<1e3&&new Date(n).getDay()===new Date(t).getDay()}return u},i.prototype.StartOfWeek=function(n,t,i,r,u){var o,f,e;return 0===r?!0:(o=!1,i.labels.length>=30?(f=new Date(t),e=new Date(n),f.setDate(f.getDate()-f.getDay()),e.setDate(e.getDate()-e.getDay()),o=!(f.getTime()===e.getTime())&&this.isMaximum(r,u,i)):o=this.isMaximum(r,u,i),o)},i.prototype.isMaximum=function(n,t,i){return 0===n||ut(n,i)*i.rect.width-ut(t,i)*i.rect.width>=(i.labels.length>=15?100:50)},i.prototype.getModuleName=function(){return"DateTimeCategory"},i.prototype.destroy=function(){},i}(ik),gut=function(){function n(){}return n.prototype.measureStripLine=function(n,t,r,u,f,e){var l,a,v=n.orientation,y="DateTime"===n.valueType,o,s,c;t.isRepeat&&null!==t.size?(l=u,a=null):"DateTimeCategory"===n.valueType?(o=t.start,s=t.end,l=null!=o&&"number"!=typeof o?n.labels.indexOf(this.dateToMilliSeconds(o,e).toString()):o,a=null!=s&&"number"!=typeof s?n.labels.indexOf(this.dateToMilliSeconds(s,e).toString()):s):(l=null===t.start?null:y&&this.isCoreDate(t.start)?this.dateToMilliSeconds(t.start,e):+("Logarithmic"===n.valueType?hi(t.start,n.logBase):t.start),a=null===t.end?null:y&&this.isCoreDate(t.start)?this.dateToMilliSeconds(t.end,e):+("Logarithmic"===n.valueType?hi(t.end,n.logBase):t.end));var h=this.getFromTovalue(l,a,t.size,t.startFromAxis,n,t),p="Vertical"===v?(h.to-h.from)*n.rect.height:r.height,w="Horizontal"===v?(h.to-h.from)*n.rect.width:r.width,b="Vertical"===v?r.x:h.from*n.rect.width+n.rect.x,k="Horizontal"===v?r.y:n.rect.y+n.rect.height-("Pixel"===t.sizeType?h.from:h.to)*n.rect.height;return t.isSegmented&&null!=t.segmentStart&&null!=t.segmentEnd&&"Pixel"!==t.sizeType&&(o=y&&this.isCoreDate(t.segmentStart)?this.dateToMilliSeconds(t.segmentStart,e):+t.segmentStart,s=y&&this.isCoreDate(t.segmentEnd)?this.dateToMilliSeconds(t.segmentEnd,e):+t.segmentEnd,c=this.getFromTovalue(o,s,null,null,f,t),"Vertical"===f.orientation?(k=f.rect.y+f.rect.height-c.to*f.rect.height,p=(c.to-c.from)*f.rect.height):(b=c.from*f.rect.width+f.rect.x,w=(c.to-c.from)*f.rect.width)),0!==p&&0!==w||"Pixel"===t.sizeType&&(null!==t.start||t.startFromAxis)?new i.Rect(b,k,w,p):new i.Rect(0,0,0,0)},n.prototype.getFromTovalue=function(n,i,r,u,f,e){var o=!e.isRepeat&&u?f.visibleRange.min:n,s;return"Double"!==f.valueType||null===r||u||null!=e.start||(o+=r),s=this.getToValue(Math.max(n,t.isNullOrUndefined(i)?n:i),o,r,f,i,e),o=this.findValue(o,f),s=this.findValue(s,f),{from:ut(f.isAxisInverse?s:o,f),to:ut(f.isAxisInverse?o:s,f)}},n.prototype.getToValue=function(n,t,i,r,u,f){var s=f.sizeType,o=null===u,e;if("DateTime"!==r.valueType)return"Pixel"===f.sizeType?t:o?t+i:n;e=new Date(t);switch("Auto"===s&&(s=r.actualIntervalType,i*=r.visibleRange.interval),s){case"Years":return o?new Date(e.setFullYear(e.getFullYear()+i)):n;case"Months":return o?new Date(e.setMonth(e.getMonth()+i)):n;case"Days":return o?new Date(e.setDate(e.getDate()+i)):n;case"Hours":return o?new Date(e.setHours(e.getHours()+i)):n;case"Minutes":return o?new Date(e.setMinutes(e.getMinutes()+i)):n;case"Seconds":return o?new Date(e.setSeconds(e.getSeconds()+i)):n;default:return t}},n.prototype.findValue=function(n,t){return n<t.visibleRange.min?n=t.visibleRange.min:n>t.visibleRange.max&&(n=t.visibleRange.max),n},n.prototype.dateParse=function(n,t){var i=t.intl.getDateParser({skeleton:"full",type:"dateTime"}),r=t.intl.getDateFormat({skeleton:"full",type:"dateTime"});return new Date(Date.parse(i(r(new Date(gt.DataUtil.parse.parseJson({val:n}).val)))))},n.prototype.renderStripLine=function(n,t,i){var p,s=n.element.id+"_stripline_"+t+"_",e=n.chartAxisLayoutPanel.seriesClipRect,w=0,f=0,a=null,k=new ft(s+"ClipRect","transparent",{width:1,color:"Gray"},1,{x:e.x,y:e.y,width:e.width,height:e.height}),h=n.renderer.createGroup({id:s+"collections","clip-path":"url(#"+s+"ClipRect)"}),c,v,r;for(n.enableCanvas||h.appendChild(eu(n.redraw,k,n.renderer)),c=0,v=i;c<v.length;c++)for(var u=v[c],l=0,y=0,b=u.stripLines;y<b.length;y++)if(r=b[y],r.visible&&r.zIndex===t)if(r.isSegmented&&null!=r.segmentStart&&null!=r.segmentEnd&&"Pixel"!==r.sizeType&&(a=this.getSegmentAxis(i,u,r)),r.isRepeat&&null!=r.repeatEvery&&null!==r.size&&"Pixel"!==r.sizeType)for(w=null!=r.repeatUntil?"DateTime"===u.valueType?this.dateToMilliSeconds(r.repeatUntil,n):+r.repeatUntil:u.actualRange.max,f="DateTime"===u.valueType&&this.isCoreDate(r.start)?this.dateToMilliSeconds(r.start,n):r.start,(r.startFromAxis&&"DateTime"===u.valueType&&"Auto"===r.sizeType||r.start<u.visibleRange.min)&&(f=u.visibleLabels[0]&&u.visibleLabels[0].value===u.visibleRange.min?u.visibleRange.min:u.visibleLabels[0]&&u.visibleLabels[0].value-("DateTime"===u.valueType?u.dateTimeInterval:u.visibleRange.interval)),f=r.startFromAxis&&"DateTime"!==u.valueType?u.visibleRange.min:f;f<w;)p=si(f+("DateTime"===u.valueType?u.dateTimeInterval*+r.size:r.size),u.visibleRange),(f>=u.visibleRange.min&&f<u.visibleRange.max||p)&&this.renderStripLineElement(u,r,e,s,h,n,f,a,l),l++,f=this.getStartValue(u,r,f);else this.renderStripLineElement(u,r,e,s,h,n,null,a,l),l++;o(n.enableCanvas,n.svgObject,h,n.redraw)},n.prototype.isCoreDate=function(n){return"string"==typeof n},n.prototype.dateToMilliSeconds=function(n,t){return this.dateParse(n,t).getTime()},n.prototype.renderPath=function(n,t,u,f,e,s){var h=r(u),a=h?h.getAttribute("d"):"",c=n.size,l="Vertical"===s.orientation?"M "+t.x+" "+t.y+" L "+(t.x+t.width)+" "+t.y:"M "+t.x+" "+t.y+" L "+t.x+" "+(t.y+t.height);"Pixel"!==n.sizeType&&(l="Vertical"===s.orientation?"M "+t.x+" "+(t.y+t.height/2)+" L "+(t.x+t.width)+" "+(t.y+t.height/2):"M "+(t.x+t.width/2)+" "+t.y+" L "+(t.x+t.width/2)+" "+(t.y+t.height),c="Vertical"===s.orientation?t.height:t.width);o(e.enableCanvas,f,e.renderer.drawPath(new i.PathOption(u,"none",c,n.color,n.opacity,n.dashArray,l)),e.redraw,!0,"x","y",null,a,!0,null,null,e.duration)},n.prototype.renderRectangle=function(n,t,u,f,e){var s=r(u),h=s?new i.Rect(+s.getAttribute("x"),+s.getAttribute("y"),+s.getAttribute("width"),+s.getAttribute("height")):null;o(e.enableCanvas,f,e.renderer.drawRectangle(new ft(u,"none",n.border,n.opacity,t,0,0,"",n.border.dashArray)),e.redraw,!0,"x","y",null,null,!0,!0,h,e.duration)},n.prototype.drawImage=function(n,t,i,r,u){"Pixel"===n.sizeType&&(t.width=t.width?t.width:n.size,t.height=t.height?t.height:n.size);var f=new to(t.height,t.width,n.imageUrl,t.x,t.y,i,"visible","none"),e=u.renderer.drawImage(f);o(u.enableCanvas,r,e,u.redraw,!0,"x","y",null,null,!0,!0)},n.prototype.renderText=function(n,t,r,u,f,e){var o,c=i.measureText(n.text,n.textStyle,f.themeStyle.stripLineLabelFont),l=null===n.rotation,a=l?c.height/8*3:0,h=t.y+t.height/2+a,y=l?"Vertical"===e.orientation?0:-90:n.rotation,s=t.x+t.width/2,v;"Horizontal"===e.orientation?(s=this.getTextStart(s+a*this.factor(n.horizontalAlignment),t.width,n.horizontalAlignment),h=this.getTextStart(h-a,t.height,n.verticalAlignment)+("Start"!==n.verticalAlignment||l?0:c.height/4),o=l?this.invertAlignment(n.verticalAlignment):n.horizontalAlignment,v=90===Math.abs(n.rotation)||270===Math.abs(n.rotation)?c.height/2:c.width/2,o=s-v<e.rect.x?"Start":s+v>e.rect.x+e.rect.width?"End":o):(s=this.getTextStart(s,t.width,n.horizontalAlignment),h=this.getTextStart(h+a*this.factor(n.verticalAlignment)-5,t.height,n.verticalAlignment),o=n.horizontalAlignment,o=f.enableRtl?"End"===o?"Start":"Start"===o?"End":o:o);ct(f.renderer,new i.TextOption(r,s,h,o,n.text,"rotate("+y+" "+s+","+h+")","middle"),n.textStyle,n.textStyle.color||f.themeStyle.stripLineLabelFont.color,u,null,null,null,null,null,null,0,null,f.enableCanvas,null,f.themeStyle.stripLineLabelFont)},n.prototype.invertAlignment=function(n){switch(n){case"Start":n="End";break;case"End":n="Start"}return n},n.prototype.getStartValue=function(n,t,i){return"DateTime"===n.valueType?this.getToValue(null,i,+t.repeatEvery,n,null,t):i+ +t.repeatEvery},n.prototype.getSegmentAxis=function(n,t,i){var u,r;if(null==i.segmentAxisName)return"Horizontal"===t.orientation?n[1]:n[0];for(r=0;r<n.length;r++)i.segmentAxisName===n[r].name&&(u=n[r]);return u},n.prototype.renderStripLineElement=function(n,t,r,u,f,e,o,s,h){var c=this.measureStripLine(n,t,r,o,s,e),l;t.imageUrl?this.drawImage(t,c,u+"rect_"+n.name+"_"+h,f,e):(this.renderPath(t,c,u+("Pixel"===t.sizeType?"path_":"rect_")+n.name+"_"+h,f,e,n),l=new i.Rect("Horizontal"===n.orientation?c.x-t.size/2:c.x,"Vertical"===n.orientation?c.y-t.size/2:c.y,c.width?c.width:t.size,c.height?c.height:t.size),this.renderRectangle(t,"Pixel"===t.sizeType?l:c,u+"border_"+n.name+"_"+h,f,e));""!==t.text&&this.renderText(t,c,u+"text_"+n.name+"_"+h,f,e,n)},n.prototype.factor=function(n){var t=0;switch(n){case"Start":t=1;break;case"End":t=-1}return t},n.prototype.getTextStart=function(n,t,i){switch(i){case"Start":n=n-t/2+5;break;case"End":n=n+t/2-5}return n},n.prototype.getModuleName=function(){return"StripLine"},n.prototype.destroy=function(){},n}(),hu=function(){function n(n){this.chart=n}return n.prototype.enableComplexProperty=function(n){var s=[],a=[],v=n.xAxis.visibleRange,y=n.yAxis.visibleRange,r=n.points,p=n.clipRect,f=this.chart&&this.chart.zoomRedraw&&this.chart.redraw?this.previousX:Math.abs(v.delta/p.width),e=this.chart&&this.chart.zoomRedraw&&this.chart.redraw?this.previousY:Math.abs(y.delta/p.height),w=r[0]&&r[0].xValue>f?0:f,b=r[0]&&r[0].y>e?0:e,i,o;this.previousX=f;this.previousY=e;for(var u,h=0,c=0,l=0,k=r;l<k.length;l++)i=k[l],i.symbolLocations=[],h=t.isNullOrUndefined(i.xValue)?v.min:i.xValue,c=t.isNullOrUndefined(i.yValue)?y.min:i.yValue,(Math.abs(w-h)>=f||Math.abs(b-c)>=e)&&(s.push(i),w=h,b=c);for(o=0;o<s.length;o++)u=s[o],t.isNullOrUndefined(u.x)||"Indicator"===n.category&&(isNaN(u.xValue)||isNaN(u.yValue))||a.push(u);return a},n.prototype.getLineDirection=function(n,t,i,r,u,f){var s="",e,o;return null!=n&&(e=u(n.xValue,n.yValue,i.xAxis,i.yAxis,r,i),o=u(t.xValue,t.yValue,i.xAxis,i.yAxis,r,i),s=f+" "+e.x+" "+e.y+" L "+o.x+" "+o.y+" "),s},n.prototype.appendLinePath=function(n,t,i){var r=this.appendPathElement(n,t,i);kf(r.element,n.d,t.chart.redraw,r.previousDirection,r.chart.duration)},n.prototype.appendPathElement=function(n,t,i){var e=r(n.id),o=t.chart,s=e?e.getAttribute("d"):null,u=t.chart.renderer.drawPath(n,new Int32Array([t.clipRect.x,t.clipRect.y])),f;return(u&&u.setAttribute("clip-path",i),"TrendLine"===t.category&&u)&&(f=o.series[t.sourceIndex].trendlines[t.index],f.marker.visible||u.setAttribute("tabindex",f.accessibility.focusable?String(f.accessibility.tabIndex):"-1"),u.setAttribute("role",f.accessibility.accessibilityRole?f.accessibility.accessibilityRole:""),u.setAttribute("aria-label",f.accessibility.accessibilityDescription?f.accessibility.accessibilityDescription:"")),t.pathElement=u,t.chart.enableCanvas||t.seriesElement.appendChild(u),t.isRectSeries=!1,{element:e,previousDirection:s,chart:o}},n.prototype.addPath=function(n,t,i){var f=this.appendPathElement(n,t,i),e;if(""!==f.previousDirection&&""!==n.d){var u=f.previousDirection.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),r=n.d.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),o=Math.max(u.length,r.length),s=Math.min(u.length,r.length);if(u.length<r.length){for(e=s;e<o;e++)r.length!==u.length&&u.push(u[u.length-1].replace("M","L"));bt(f.element,n.d,t.chart.redraw,u.join(" "),this.chart.duration)}else if(u.length>r.length){for(e=s;e<o;e++)r.length!==u.length&&(t.removedPointIndex===t.points.length?r.push(r[r.length-1].replace("M","L")):r.splice(1,0,r[0].replace("M","L")));bt(f.element,r.join(""),t.chart.redraw,f.previousDirection,this.chart.duration,n.d)}else bt(f.element,n.d,t.chart.redraw,f.previousDirection,this.chart.duration)}},n.prototype.addAreaPath=function(n,t,i){var f=this.appendPathElement(n,t,i),e;if(""!==f.previousDirection&&""!==n.d){var u=f.previousDirection.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),r=n.d.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),s=Math.max(u.length,r.length),o=Math.min(u.length,r.length);if(o<r.length){for(e=o;e<s;e++)r.length!==u.length&&r.length!==u.length&&(1===u.length?u.push(u[u.length-(-1!==n.id.indexOf("border")?1:2)].replace("M","L")):u.splice(u.length-1,0,u[u.length-(-1!==n.id.indexOf("border")?1:2)]));bt(f.element,n.d,t.chart.redraw,u.join(" "),this.chart.duration)}else if(u.length>r.length){for(e=o;e<s;e++)r.length!==u.length&&(t.removedPointIndex===t.points.length?1===r.length?r.push(r[r.length-(-1!==n.id.indexOf("border")?1:2)].replace("M","L")):r.splice(r.length-1,0,r[r.length-(-1!==n.id.indexOf("border")?1:2)]):r.splice(1,0,r[1]?r[1]:r[0]));bt(f.element,r.join(""),t.chart.redraw,f.previousDirection,this.chart.duration,n.d)}else bt(f.element,n.d,t.chart.redraw,f.previousDirection,this.chart.duration)}},n.prototype.renderMarker=function(n){n.marker&&n.marker.visible&&n.chart.markerRender.render(n)},n.prototype.doProgressiveAnimation=function(n,i){var f,o=new t.Animation({}),u=n.pathElement,s=u.getAttribute("stroke-dasharray"),e=n.pathElement.getTotalLength();u.style.visibility="hidden";o.animate(u,{duration:0===i.duration&&"Enable"===t.animationMode?1e3:i.duration,delay:i.delay,progress:function(n){u.style.visibility="visible";f=Math.abs(Math.round(n.timeStamp*e/n.duration));u.setAttribute("stroke-dasharray",f+","+e)},end:function(){var t=r(n.chart.element.id+"_Annotation_Collections");t&&(t.style.visibility="visible");n.lastValueLabelElement&&n.lastValueLabelElement.setAttribute("visibility","visible");u.setAttribute("stroke-dasharray",s);u.style.visibility="";n.chart.trigger("animationComplete",{series:n.chart.isBlazor?{}:n})}})},n.prototype.storePointLocation=function(n,t,r,u){var f=t.marker&&t.marker.width?t.marker.width:0,e=t.marker&&t.marker.height?t.marker.height:0;n.symbolLocations.push(u(n.xValue,n.yValue,t.xAxis,t.yAxis,r,t));n.regions.push(new i.Rect(n.symbolLocations[0].x-f,n.symbolLocations[0].y-e,2*f,2*e))},n.prototype.withinYRange=function(n,t){return n.yValue>=t.visibleRange.min&&n.yValue<=t.visibleRange.max},n.prototype.GetStepLineDirection=function(n,t,i,r,u,f){var e,o;return(void 0===r&&(r="L"),e=u.noRisers&&f?" M ":" L ","Right"===i)?(r=u.noRisers&&f?"M":"L")+" "+t.x+" "+n.y+" L "+n.x+" "+n.y+" ":"Center"===i?(o=t.x+(n.x-t.x)/2,r+" "+o+" "+t.y+e+o+" "+n.y+" L "+n.x+" "+n.y+" "):r+" "+n.x+" "+t.y+e+n.x+" "+n.y+" "},n.prototype.getFirstLastVisiblePoint=function(n){for(var t,r=null,i=null,u=0,f=n;u<f.length;u++)t=f[u],null===r&&t.visible&&(r=i=t),i=t.visible?t:i;return{first:r||n[0],last:i||n[n.length-1]}},n.prototype.getBorderDirection=function(n){var t=n.split(" ");return t.length>3&&!this.chart.stackingAreaSeriesModule&&!this.chart.stackingStepAreaSeriesModule?t.splice(t.length-4,3):(this.chart.stackingAreaSeriesModule||this.chart.stackingStepAreaSeriesModule)&&(t.splice(t.length/2+1,t.length/2+1),"L"!==t[t.length-1]&&"M"!==t[t.length-1]||t.splice(t.length-1,1)),t.join(" ")},n.prototype.removeEmptyPointsBorder=function(n){var t,r=0,i=n.split(" ");if(4===i.length)return i.join(" ");do(t=i.indexOf("M",r))>-1&&(i.splice(t+1,3),r=t+1,t-6>0&&(i.splice(t-6,6),r-=6));while(-1!==t);return i.join(" ")},n.prototype.doLinearAnimation=function(n,t){var u,i=n.clipRectElement.childNodes[0].childNodes[0],f=n.chart.animated?n.chart.duration:t.duration,e=fe("Linear"),o=+i.getAttribute("height"),s=+i.getAttribute("width"),h=+i.getAttribute("x"),c=n.chart.requireInvertedAxis?+i.getAttribute("height")+ +i.getAttribute("y"):+i.getAttribute("y"),r;(i.style.visibility="hidden",this.animateRect(n,t,i,f,e,o,s,h,c,u),n.marker&&n.marker.visible&&n.symbolElement)&&(r=n.symbolElement.childNodes[0].childNodes[0],r.style.visibility="hidden",this.animateRect(n,t,r,f,e,o,s,h,c,u))},n.prototype.animateRect=function(n,i,u,f,e,o,s,h,c,l){new t.Animation({}).animate(u,{duration:0===f&&"Enable"===t.animationMode?1e3:f,delay:i.delay,progress:function(t){u.style.visibility="visible";n.chart.requireInvertedAxis?(l=e(t.timeStamp,0,o,t.duration),u.setAttribute("transform","translate("+h+" "+c+") scale(1,"+l/o+") translate("+-h+" "+-c+")")):(l=e(t.timeStamp,0,s,t.duration),u.setAttribute("transform","translate("+h+" "+c+") scale("+l/s+", 1) translate("+-h+" "+-c+")"))},end:function(){var i=r(n.chart.element.id+"_Annotation_Collections"),t;i&&(i.style.visibility="visible");n.lastValueLabelElement&&n.lastValueLabelElement.setAttribute("visibility","visible");t=document.getElementById(n.chart.element.id+"_StackLabelGroup");t&&(pu(t,0,f,n,null,0,!1),t.setAttribute("visibility","visible"));u.setAttribute("transform","translate(0,0)");n.chart.trigger("animationComplete",{series:n.chart.isBlazor?{}:n})}})},n}(),nft=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rk=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return nft(t,n),t.prototype.render=function(n,t,r,u,f,e){for(var o,v,nt,tt,p,w,s="",c=null,h="M",k=n.chart&&"PolarRadar"===n.chart.chartAreaType,d=n.emptyPointSettings&&"Drop"===n.emptyPointSettings.mode,y=k?bf:l,a="TrendLine"===n.category?n.points:this.enableComplexProperty(n),b=0,g=a;b<g.length;b++)o=g[b],o.regions=[],o.symbolLocations=[],o.visible&&ni(a[o.index-1],o,a[o.index+1],n)?(s+=this.getLineDirection(c,o,n,u,y,h),h=c?"L":h,c=o,this.storePointLocation(o,n,u,y),""===s&&1===a.length&&(s="M "+o.symbolLocations[0].x+" "+o.symbolLocations[0].y)):(c=d?c:null,h=d?h:"M");k&&n.isClosed&&(v=this.getFirstLastVisiblePoint(a),w=y(v.last.xValue,v.last.yValue,t,r,u,n),p=y(v.first.xValue,v.first.yValue,t,r,u,n),s=s.concat(h+" "+w.x+" "+w.y+" L "+p.x+" "+p.y));nt="Indicator"===n.category?n.chart.element.id+"_Indicator_"+n.index+"_"+n.name:"TrendLine"===n.category?n.chart.element.id+"_Series_"+n.sourceIndex+"_TrendLine_"+n.index:n.chart.element.id+"_Series_"+(void 0===n.index?n.category:n.index);tt=new i.PathOption(nt,"none",n.width,n.interior,n.opacity,n.dashArray,s);this[f?"addPath":"appendLinePath"](tt,n,"");e||this.renderMarker(n)},t.prototype.updateDirection=function(n,t){this.render(n,n.xAxis,n.yAxis,n.chart.requireInvertedAxis,!1,!0);for(var i=0;i<t.length;i++)n.marker&&n.marker.visible&&n.chart.markerRender.renderMarker(n,n.points[t[i]],n.points[t[i]].symbolLocations[0],null,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},t.prototype.doAnimation=function(n){var t=n.animation;this.doProgressiveAnimation(n,t)},t.prototype.getModuleName=function(){return"LineSeries"},t.prototype.destroy=function(){},t}(hu),ku=function(){function n(){}return n.prototype.getSideBySideInfo=function(n){var u;if(n.isRectSeries=!0,(n.chart.enableSideBySidePlacement&&!n.position||!t.isNullOrUndefined(n.columnWidthInPixel))&&this.getSideBySidePositions(n),n.columnWidthInPixel)return new su(0,0);var f,a="Histogram"!==n.type&&n.chart.enableSideBySidePlacement?n.position:0,o="Histogram"!==n.type&&n.chart.enableSideBySidePlacement?n.rectCount:1,v=n.chart.visibleSeries,y=n.chart.enableSideBySidePlacement?n.columnSpacing:0,p=null===n.columnWidth||isNaN(+n.columnWidth)?"Histogram"===n.type?1:.7:Math.min(n.columnWidth,1),s=iv(n.xAxis,v),r=s*p,h=a/o-.5,i=new su(h,h+1/o);if(!isNaN(i.start)&&!isNaN(i.end)){if(n.groupName&&-1===n.type.indexOf("Stacking")){u=.7;n.chart.series.filter(function(n){n.columnWidth>u&&(u=n.columnWidth)});var c=s*u,e=new su(i.start*c,i.end*c),l=(e.delta-(i.end*r-i.start*r))/2;i=new su(e.start+l,e.end-l)}else i=new su(i.start*r,i.end*r);f=y*i.delta;i=new su(i.start+f/2,i.end-f/2)}return i},n.prototype.getRectangle=function(n,t,r,u,f){var e=l(n,t,f.xAxis,f.yAxis,f.chart.requireInvertedAxis),o=l(r,u,f.xAxis,f.yAxis,f.chart.requireInvertedAxis);return new i.Rect(Math.min(e.x,o.x),Math.min(e.y,o.y),Math.abs(o.x-e.x),Math.abs(o.y-e.y))},n.prototype.drawCylinder=function(n,i,r,u,f){var p=u.width,l=u.height,h,oi,ii,k,b,y,ht,bi;if(f.chart.enableCanvas){h=f.chart.canvasRender.ctx;oi=h;h.save();var a=vi(n.fill),v=u.x+f.clipRect.x,c=u.y+f.clipRect.y,si=2*Math.PI+.1,s=void 0,e=void 0,ct=void 0,tt=void 0,it=void 0,lt=void 0,rt=void 0,at=void 0,vt=void 0,ut=void 0,yt=void 0,pt=void 0,wt=void 0,bt=void 0,kt=void 0,dt=void 0,gt=void 0,ni=void 0,ti=void 0,hi=0,ci=0,li=0,ai=0,yi=0;for(h.fillStyle=se(a,.9),h.lineWidth=0,h.strokeStyle=se(a,.9),h.globalAlpha=n.opacity,r.isColumn?(hi=v,ci=p+v,tt=ct=v+(s=p/2),ut=it=c-(e=s/4),at=v,rt=v+p,lt=vt=c+l-e,gt=Math.PI,ni=-s,ti=e,r.stacking&&(r.isLastSeries||(ut=it=c+e))):(ai=l+c,li=c,at=ct=v+(s=(e=l/2)/4),rt=tt=v+p+s,vt=c+l,ut=c,lt=it=c+e,yi=Math.PI/2,gt=1.5*Math.PI,r.stacking&&(r.isLastSeries||(rt=tt=v+p-s)),ni=s=-s,ti=-(e=-e)),ii=se(a,.7),k=h.createLinearGradient(hi,li,ci,ai),k.addColorStop(0,a),k.addColorStop(.3,ii),k.addColorStop(.7,ii),k.addColorStop(1,a),b=1;b<=4;b++){for(y=0,b<4&&h.beginPath(),b%2==0?(yt=tt,pt=lt,wt=at,bt=ut):(yt=ct,pt=it,wt=rt,bt=vt),4===b&&(s=ni,e=ti,h.fillStyle=k),b>2&&(y=yi,si=gt);y<=si;y+=.1)kt=yt-s*Math.cos(y),dt=pt+e*Math.sin(y),0===y?h.moveTo(kt,dt):h.lineTo(kt,dt);b>2&&h.lineTo(wt,bt);3!==b&&(h.stroke(),h.fill())}n.id.indexOf("Series")>=0&&(h.clip(),h.restore(),h=oi)}else{var ft=f.chart,et=(v=u.x,c=u.y,n.id),ki=a=n.fill;ub(a)||(a=vi(a));var g=0,nt=0,ri=0,ui=0,pi=0,wi=0,d=void 0,w=void 0,fi=void 0,ot=void 0,st=void 0,ei=void 0;for(s=void 0,e=void 0,y=2,r.isColumn?(d=fi=v,ot=w=(e=(s=p/2)/4)<c?c-e:r.stacking?c+e:c-e,g=2*s,ui=e<c||l<2*e?l:r.stacking?l-2*e:l,st=d,ei=e<c?w+l:l<w?l+w:r.stacking?l+(c-e):l+w,pi=100,r.stacking&&(r.isLastSeries||(w=ot=c+e,ui=l<s/2?l:l-s/2))):(s=(e=l/2)/4,w=ot=c,nt=2*e,ri=p,st=(d=fi=Math.abs(v-s))+p,ei=w,wi=100,r.stacking&&(r.isLastSeries||(st=d+p-2*s,ri=p-2*s))),t.remove(this.element);y--;)n.d="M"+d.toString()+","+w.toString()+"a"+s.toString()+","+e.toString()+" 0 1,0 "+g.toString()+","+nt.toString()+"a"+s.toString()+","+e.toString()+" 0 1,0 "+(-1*g).toString()+","+(-1*nt).toString(),n.id=et+"_Region_"+y,n.fill=se(a,.9),y%2==0&&"StackingBar100"!==f.type&&"StackingBar"!==f.type&&"Bar"!==f.type&&(n.fill=n.fill+"10"),this.element=ft.renderer.drawPath(this.options,new Int32Array([f.clipRect.x,f.clipRect.y])),o(f.chart.enableCanvas,f.seriesElement,this.element,ft.redraw),d=st,w=ei;n.d="M"+fi.toString()+","+ot.toString()+"a"+s.toString()+","+e.toString()+" 0 1,0 "+g.toString()+","+nt.toString()+"l"+ri.toString()+" "+ui.toString()+"a"+s.toString()+","+e.toString()+" 0 1,1 "+(-1*g).toString()+","+(-1*nt).toString()+" z";n.id=et+"_Region_2";n.fill=se(a,.7);ht=void 0;-1===ki.indexOf("url")&&(document.getElementById(et)||(ht={id:et,x1:"0%",y1:"0%",x2:pi.toString()+"%",y2:wi.toString()+"%"},bi=[{colorStop:"0%",color:a},{colorStop:"30%",color:se(a,.7)},{colorStop:"70%",color:se(a,.7)},{colorStop:"100%",color:a}],this.drawGradient(ht,bi,f)),n.fill="url(#"+ht.id+")");this.element=ft.renderer.drawPath(this.options,new Int32Array([f.clipRect.x,f.clipRect.y]));o(f.chart.enableCanvas,f.seriesElement,this.element,ft.redraw)}},n.prototype.drawGradient=function(n,t,i){var e=i.chart.renderer.createDefs(),o="http://www.w3.org/2000/svg",r=document.createElementNS(o,"linearGradient"),u,f;for(r.setAttribute("id",n.id),r.setAttribute("x1",n.x1),r.setAttribute("y1",n.y1),r.setAttribute("x2",n.x2),r.setAttribute("y2",n.y2),u=0;u<t.length;u++)f=document.createElementNS(o,"stop"),f.setAttribute("offset",t[u].colorStop),f.setAttribute("stop-color",t[u].color),f.setAttribute("stop-opacity","1"),r.appendChild(f);i.seriesElement.appendChild(e);e.appendChild(r)},n.prototype.getSideBySidePositions=function(n){for(var e,r=n.chart,t=0,u=r.columns;t<u.length;t++)for(var o=u[t],i=0,f=r.rows;i<f.length;i++)e=f[i],this.findRectPosition(n.findSeriesCollection(o,e,!1))},n.prototype.findRectPosition=function(n){for(var u,t,f=[],i={rectCount:0,position:null},r=0;r<n.length;r++)-1!==(t=n[r]).type.indexOf("Stacking")||""!==t.groupName?(u=-1!==t.type.indexOf("Stacking")?t.stackingGroup:t.type+t.groupName,u?void 0===f[u]?(t.position=i.rectCount,f[u]=i.rectCount++):t.position=f[u]:null===i.position?(t.position=i.rectCount,i.position=i.rectCount++):t.position=i.position):t.position=i.rectCount++;for(r=0;r<n.length;r++)(t=n[r]).rectCount=i.rectCount},n.prototype.updateSymbolLocation=function(n,t,i){i.chart.requireInvertedAxis?this.updateYRegion(n,t,i):this.updateXRegion(n,t,i);"Histogram"===i.type&&(n.minimum=+n.x-i.histogramValues.binWidth/2,n.maximum=+n.x+i.histogramValues.binWidth/2)},n.prototype.updateXRegion=function(n,t,i){n.symbolLocations.push({x:t.x+t.width/2,y:"BoxPlot"===i.seriesType||-1!==i.seriesType.indexOf("HighLow")||n.yValue>=0==!i.yAxis.isAxisInverse?t.y:t.y+t.height});this.getRegion(n,t,i);"RangeColumn"===i.type&&n.symbolLocations.push({x:t.x+t.width/2,y:t.y+t.height})},n.prototype.updateYRegion=function(n,t,i){n.symbolLocations.push({x:"BoxPlot"===i.seriesType||-1!==i.seriesType.indexOf("HighLow")||n.yValue>=0==!i.yAxis.isAxisInverse?t.x+t.width:t.x,y:t.y+t.height/2});this.getRegion(n,t,i);"RangeColumn"===i.type&&n.symbolLocations.push({x:t.x,y:t.y+t.height/2})},n.prototype.renderMarker=function(n){n.marker&&n.marker.visible&&n.chart.markerRender.render(n)},n.prototype.getRegion=function(n,t,r){if(0===n.y){var u=r.marker&&r.marker.width?r.marker.width:0,f=r.marker&&r.marker.height?r.marker.height:0;n.regions.push(new i.Rect(n.symbolLocations[0].x-u,n.symbolLocations[0].y-f,2*u,2*f))}else n.regions.push(t)},n.prototype.triggerEvent=function(n,t,i,r){var u={cancel:!1,name:rr,series:n,point:t,fill:n.setPointColor(t,i),border:n.setBorderColor(t,r),cornerRadius:n.cornerRadius};return n.chart.trigger(rr,u),t.color=u.fill,u},n.prototype.drawRectangle=function(n,t,r,u){var s,f=n.chart;if((f.requireInvertedAxis?r.height:r.width)<=0)return null;if(0===t.y)s=this.calculateRoundedRectPath(r,0,0,0,0);else{var h=void 0,c=void 0,l=void 0,a=void 0,e=t.y<0;f.requireInvertedAxis?(h=e?u.cornerRadius.topRight:u.cornerRadius.topLeft,c=e?u.cornerRadius.topLeft:u.cornerRadius.topRight,l=e?u.cornerRadius.bottomRight:u.cornerRadius.bottomLeft,a=e?u.cornerRadius.bottomLeft:u.cornerRadius.bottomRight):(h=e?u.cornerRadius.bottomLeft:u.cornerRadius.topLeft,c=e?u.cornerRadius.bottomRight:u.cornerRadius.topRight,l=e?u.cornerRadius.topLeft:u.cornerRadius.bottomLeft,a=e?u.cornerRadius.topRight:u.cornerRadius.bottomRight);s=this.calculateRoundedRectPath(r,h,c,l,a,f.requireInvertedAxis)}var v="Indicator"===n.category?f.element.id+"_Indicator_"+n.index+"_"+n.name+"_Point_"+t.index:f.element.id+"_Series_"+n.index+"_Point_"+(null!==n.removedPointIndex&&n.removedPointIndex<=t.index?t.index+1:t.index),y=ci(f.redraw,v),p=y?y.getAttribute("d"):"";switch(this.options=new i.PathOption(v,u.fill,u.border.width,u.border.color,n.opacity,n.border.dashArray,"Cylinder"===n.columnFacet?"":s),this.element=f.renderer.drawPath(this.options,new Int32Array([n.clipRect.x,n.clipRect.y])),null!==n.removedPointIndex&&n.removedPointIndex<=t.index&&(this.element.id=f.element.id+"_Series_"+n.index+"_Point_"+t.index),n.seriesType){case"XY":this.element.setAttribute("role","img");this.element.setAttribute("aria-label",n.accessibility.accessibilityDescriptionFormat?n.formatAccessibilityDescription(t,n):t.x+":"+t.yValue+", "+n.name);break;case"HighLow":this.element.setAttribute("role","img");this.element.setAttribute("aria-label",n.accessibility.accessibilityDescriptionFormat?n.formatAccessibilityDescription(t,n):t.x+":"+t.high+", "+t.low+", "+n.name)}"Cylinder"===n.columnFacet&&(f.redraw||!f.enableAnimation)&&n.seriesElement.querySelector("#"+this.element.id)||o(n.chart.enableCanvas,n.seriesElement,this.element,f.redraw);n.chart.enableCanvas||kf(this.element,"Cylinder"===n.columnFacet?"":s,f.redraw,p,f.duration)},n.prototype.animate=function(n){for(var t,i,r=n.seriesElement.childNodes,f="Indicator"===n.category?0:1,u=0,e=vu(n);u<e.length;u++)if(t=e[u],t.symbolLocations.length||"BoxAndWhisker"===n.type&&t.regions.length)if("Column"!==n.type&&"Bar"!==n.type&&"StackingColumn"!==n.type&&"StackingColumn100"!==n.type&&"StackingBar"!==n.type&&"StackingBar100"!==n.type||"Cylinder"!==n.columnFacet)this.animateRect(r[f],n,t),f++;else for(i=0;i<r.length;i++)this.animateRect(r[i],n,t)},n.prototype.animateRect=function(n,i,r){var u,f,e,o,c,v=i.animation,a=i.chart.animated?i.chart.duration:v.duration,y=fe("Linear"),l=r.yValue<0,s=+r.regions[0].height,h=+r.regions[0].width;i.chart.requireInvertedAxis?(f=+r.regions[0].y,i.type.indexOf("Stacking")>-1?(u=ut(0,i.yAxis)*i.yAxis.rect.width,e=u,o=f):(u=+r.regions[0].x,o=l?f:f+s,e=-1!==i.seriesType.indexOf("HighLow")||-1!==i.type.indexOf("Waterfall")?u+h/2:l!==i.yAxis.isAxisInverse?u+h:u)):(u=+r.regions[0].x,i.type.indexOf("Stacking")>-1?(f=(1-ut(0,i.yAxis))*i.yAxis.rect.height,e=u,o=f):(f=+r.regions[0].y,o=-1!==i.seriesType.indexOf("HighLow")||-1!==i.type.indexOf("Waterfall")?f+s/2:l!==i.yAxis.isAxisInverse?f:f+s,e=l?u:u+h));t.isNullOrUndefined(n)||(n.style.visibility="hidden",new t.Animation({}).animate(n,{duration:0===a&&"Enable"===t.animationMode?1e3:a,delay:v.delay,progress:function(t){t.timeStamp>=t.delay&&(n.style.visibility="visible",i.chart.requireInvertedAxis?(h=h||1,c=y(t.timeStamp-t.delay,0,h,t.duration),n.setAttribute("transform","translate("+e+" "+o+") scale("+c/h+", 1) translate("+-e+" "+-o+")")):(s=s||1,c=y(t.timeStamp-t.delay,0,s,t.duration),n.setAttribute("transform","translate("+e+" "+o+") scale(1,"+c/s+") translate("+-e+" "+-o+")")))},end:function(){var o=document.getElementById(i.chart.element.id+"_Annotation_Collections"),e,u,f,t;if(o&&(o.style.visibility="visible"),i.lastValueLabelElement&&i.lastValueLabelElement.setAttribute("visibility","visible"),e=document.getElementById(i.chart.element.id+"_StackLabelGroup"),e&&(pu(e,0,a,i,null,0,!1),e.setAttribute("visibility","visible")),n.setAttribute("transform","translate(0,0)"),u=i.seriesElement,(n===u.lastElementChild||r.index===i.points.length-1||"Waterfall"===i.type&&n===u.children[u.childElementCount-2])&&(i.chart.trigger("animationComplete",{series:i.chart.isBlazor?{}:i}),"Waterfall"===i.type))for(f=u.childNodes,t=0;t<f.length;t++)-1!==f[t].id.indexOf("Connector")&&(f[t].style.visibility="visible",f[t].setAttribute("transform","translate(0,0)"))}}))},n.prototype.calculateRoundedRectPath=function(n,t,i,r,u,f){void 0===f&&(f=!1);var e=n.width/2,o=n.height/2;return t=Math.min(t,e,o),i=Math.min(i,e,o),r=Math.min(r,e,o),u=Math.min(u,e,o),"M "+n.x+" "+(t+n.y)+" Q "+n.x+" "+n.y+" "+(n.x+t)+" "+n.y+" L "+(n.x+n.width-i)+" "+n.y+" Q "+(n.x+n.width)+" "+n.y+" "+(n.x+n.width)+" "+(n.y+i)+" L "+(n.x+n.width)+" "+(n.y+n.height-u)+" Q "+(n.x+n.width)+" "+(n.y+n.height)+" "+(n.x+n.width-u)+" "+(n.y+n.height)+" L "+(n.x+r)+" "+(n.y+n.height)+" Q "+n.x+" "+(n.y+n.height)+" "+n.x+" "+(n.y+n.height-r)+" L "+n.x+" "+(t+n.y)+" Z"},n}(),tft=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bv=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.sideBySideInfo=[],t}return tft(t,n),t.prototype.render=function(n){var r;this.sideBySideInfo[n.index]=this.getSideBySideInfo(n);for(var u=Math.max(n.yAxis.visibleRange.min,0),t=0,i=n.points;t<i.length;t++)r=i[t],this.renderPoint(n,r,this.sideBySideInfo[n.index],u);this.renderMarker(n)},t.prototype.renderPoint=function(n,t,r,u){var o,f,e;(t.symbolLocations=[],t.regions=[],t.visible&&ni(n.points[t.index-1],t,n.points[t.index+1],n))&&(this.rect=this.getRectangle(t.xValue+r.start,t.yValue,t.xValue+r.end,u,n),this.rect.width=n.columnWidthInPixel?n.columnWidthInPixel-(n.chart.enableSideBySidePlacement?n.columnWidthInPixel*n.columnSpacing:0):this.rect.width,this.rect.x=n.columnWidthInPixel?this.rect.x-(n.columnWidthInPixel/2*n.rectCount-n.columnWidthInPixel*n.index):this.rect.x,o="Indicator"===n.category?t.color:n.interior,f=this.triggerEvent(n,t,o,{width:n.border.width,color:n.border.color}),f.cancel||(e=this.rect.y,t.yValue<u&&t.yValue>=0&&n.chart.zoomModule&&n.chart.zoomModule.isAxisZoomed(n.chart.axisCollections)&&(e=l(t.xValue+r.start,t.yValue,n.xAxis,n.yAxis,n.chart.requireInvertedAxis).y),this.updateSymbolLocation(t,new i.Rect(this.rect.x,e,this.rect.width,this.rect.height),n),this.drawRectangle(n,t,this.rect,f),"Cylinder"===n.columnFacet&&this.drawCylinder(this.options,this.element,{isColumn:!0,stacking:!1,isLastSeries:!0},this.rect,n)))},t.prototype.updateDirection=function(n,t){for(var r=Math.max(n.yAxis.visibleRange.min,0),i=0;i<t.length;i++)this.renderPoint(n,n.points[t[i]],this.sideBySideInfo[n.index],r),n.marker&&n.marker.visible&&n.chart.markerRender.renderMarker(n,n.points[t[i]],n.points[t[i]].symbolLocations[0],null,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},t.prototype.doAnimation=function(n){this.animate(n)},t.prototype.getModuleName=function(){return"ColumnSeries"},t.prototype.destroy=function(){},t}(ku),ift=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yc=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ift(t,n),t.prototype.getAreaPathDirection=function(n,t,i,r,u,f,e){var o,s="";return null===f&&(s+=e+" "+(o=u(n,t,i.xAxis,i.yAxis,r,i)).x+" "+o.y+" "),s},t.prototype.getAreaEmptyDirection=function(n,t,i,r,u){var f="";return(f+=this.getAreaPathDirection(n.x,n.y,i,r,u,null,"L"))+this.getAreaPathDirection(t.x,t.y,i,r,u,null,"L")},t.prototype.setPointColor=function(n,t,i,r,u){if(""===i.pointColorMapping){for(var f=void 0,e=0;e<u.length;e++)if(f=u[e],(r?n.xValue:n.yValue)<=this.getAxisValue(f.value,r?i.xAxis:i.yAxis,i.chart)||!f.value&&0!==f.value){n.interior=f.color;break}return null==n.interior&&(n.interior=i.interior),!1}return!!t&&i.setPointColor(n,i.interior)!==i.setPointColor(t,i.interior)},t.prototype.sortSegments=function(n,t){var i=this,r="X"===n.segmentAxis?n.xAxis:n.yAxis;return[].concat(t).sort(function(t,u){return i.getAxisValue(t.value,r,n.chart)-i.getAxisValue(u.value,r,n.chart)})},t.prototype.applySegmentAxis=function(n,t,i,u){var s=this;if(""!==n.pointColorMapping)return t.map(function(t){s[u?"addMulticolorPath":"appendLinePath"](t,n,"")}),null;var e,a="X"===n.segmentAxis,o=a?n.xAxis:n.yAxis,h=n.chart;this.includeSegment(i,o,n,i.length);for(var v,y,f,w=i.length,p=0,b=function(l){e=i[l];v=c.getAxisValue(e.value,o,n.chart);(y=c.createClipRect(l?c.getAxisValue(i[l-1].value,o,n.chart):o.visibleRange.min,v,n,l,a))&&t.map(function(t){p+=1;f={"clip-path":y,"stroke-dasharray":e.dashArray,opacity:t.opacity,stroke:n.type.indexOf("Line")>-1?e.color||n.interior:t.stroke,"stroke-width":t["stroke-width"],fill:n.type.indexOf("Line")>-1?"none":e.color||n.interior,id:t.id+"_Segment_"+l,d:t.d};p%2==0&&s.chart.multiColoredAreaSeriesModule&&"transparent"!==n.border.color&&0!==f["stroke-width"]&&(f.fill="transparent");u?s.addMulticolorPath(f,n,"",!0):kf(r(f.id),f.d,h.redraw);n.pathElement=h.renderer.drawPath(f);n.chart.enableCanvas||u||n.seriesElement.appendChild(h.renderer.drawPath(f))})},c=this,l=0;l<w;l++)b(l)},t.prototype.includeSegment=function(n,t,i,r){if(r<=0)return n.push({value:t.visibleRange.max,color:i.interior}),null;this.getAxisValue(n[r-1].value,t,i.chart)<t.visibleRange.max&&n.push({value:t.visibleRange.max,color:i.interior})},t.prototype.addMulticolorPath=function(n,t,i,u){var e=this.appendPathElement(n,t,i),s;if(null!==e.previousDirection&&""!==e.previousDirection||(e.previousDirection="M "+n.d.split(" ").slice(-3)[0]+" "+n.d.split(" ").slice(-5)[0]+" L "+n.d.split(" ").slice(-3)[0]+" "+n.d.split(" ").slice(-5)[0]+" L "+n.d.split(" ").slice(-3)[0]+" "+n.d.split(" ").slice(-5)[0]),null!==n.d&&""!==n.d||(n.d="M "+e.previousDirection.split(" ").slice(-3)[0]+" "+e.previousDirection.split(" ").slice(-5)[0]+" L "+e.previousDirection.split(" ").slice(-3)[0]+" "+e.previousDirection.split(" ").slice(-5)[0]),u){var f=e.previousDirection.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),o=n.d.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),h=Math.max(f.length,o.length),c=Math.min(f.length,o.length);if(f.length===o.length&&bt(r(n.id),n.d,t.chart.redraw,e.previousDirection,this.chart.duration),f.length<o.length){for(s=c;s<h;s++)o.length!==f.length&&f.splice(f.length-(-1!==t.type.indexOf("Line")?1:2),0,f[f.length-(-1!==t.type.indexOf("Line")?1:2)]);bt(r(n.id),n.d,t.chart.redraw,f.join(" "),this.chart.duration)}if(f.length>o.length){for(s=c;s<h;s++)o.length!==f.length&&o.splice(1,0,o[1].replace("M","L"));bt(e.element,o.join(""),t.chart.redraw,f.join(""),this.chart.duration,n.d)}}},t.prototype.createClipRect=function(n,t,i,r,u){var s,o=i.chart.requireInvertedAxis,e=l(u?n:i.xAxis.visibleRange.min,u?i.yAxis.visibleRange.max:t,i.xAxis,i.yAxis,o),f=l(u?t:i.xAxis.visibleRange.max,u?i.yAxis.visibleRange.min:n,i.xAxis,i.yAxis,o);return f=o?[e,e=f][0]:f,(i.xAxis.isInversed||i.xAxis.isAxisInverse?e.x-f.x>0:f.x-e.x>0)&&(i.yAxis.isInversed?e.y-f.y>0:f.y-e.y>0)?(s=new ft(i.chart.element.id+"_ChartSegment"+i.index+"ClipRect_"+r,"transparent",{width:1,color:"Gray"},1,{x:i.xAxis.isInversed||i.xAxis.isAxisInverse?f.x:e.x,y:i.yAxis.isInversed?f.y:e.y,width:i.xAxis.isInversed||i.xAxis.isAxisInverse?e.x-f.x:f.x-e.x,height:i.yAxis.isInversed?e.y-f.y:f.y-e.y}),i.chart.enableCanvas||i.seriesElement.appendChild(eu(i.chart.redraw,s,i.chart.renderer)),"url(#"+i.chart.element.id+"_ChartSegment"+i.index+"ClipRect_"+r+")"):null},t.prototype.getAxisValue=function(n,t,i){var r,u;return(null===n&&(n=t.visibleRange.max),"DateTime"===t.valueType)?(r={skeleton:"full",type:"dateTime"},Date.parse(i.intl.getDateParser(r)(i.intl.getDateFormat(r)(new Date(gt.DataUtil.parse.parseJson({val:n}).val))))):t.valueType.indexOf("Category")>-1?(u="DateTimeCategory"===t.valueType?n.getTime().toString():n,t.labels.indexOf(u)<0?+n:t.labels.indexOf(u)):+n},t}(hu),rft=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),uft=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return rft(t,n),t.prototype.render=function(n,t,r,u,f,e){var p,w=null,o="",b=n.chart&&"PolarRadar"===n.chart.chartAreaType,v=Math.max(n.yAxis.visibleRange.min,0),k,d;b&&(v=this.getFirstLastVisiblePoint(n.points).first.yValue);for(var c,nt=n.emptyPointSettings&&"Drop"===n.emptyPointSettings.mode,tt=n.border.width?n.border.width:0,it=n.border.color?n.border.color:n.interior,y="PolarRadar"===n.chart.chartAreaType?bf:l,a=this.enableComplexProperty(n),g="",s=0;s<a.length;s++)p=(c=a[s]).xValue,c.symbolLocations=[],c.regions=[],c.visible&&ni(a[s-1],c,a[s+1],n)&&(o+=this.getAreaPathDirection(p,v,n,u,y,w,"M"),w=w||new h(p,v),o+=this.getAreaPathDirection(p,c.yValue,n,u,y,null,"L"),a[s+1]&&!a[s+1].visible&&(!b||b&&this.withinYRange(a[s+1],r))&&!nt&&(o+=this.getAreaEmptyDirection({x:p,y:v},w,n,u,y),w=null),this.storePointLocation(c,n,u,y));b&&""!==o&&(k="",d=this.chart,k+=this.getAreaPathDirection(0,v,n,u,y,null,"L"),(t.isAxisInverse||r.isAxisInverse)&&(o+="Polar"===n.type?d.polarSeriesModule.getPolarIsInversedPath(t,k):d.radarSeriesModule.getRadarIsInversedPath(t,k)),o=o.concat(o+" Z"));this[f?"addAreaPath":"appendLinePath"](new i.PathOption(n.chart.element.id+"_Series_"+n.index,n.interior,0,"transparent",n.opacity,n.dashArray,""!==o?o+this.getAreaPathDirection(n.points[n.points.length-1].xValue,"PolarRadar"===n.chart.chartAreaType?n.points[n.points.length-1].yValue:v,n,u,y,null,"L"):""),n,"");0!==n.border.width&&(g=this.removeEmptyPointsBorder(o),this[f?"addAreaPath":"appendLinePath"](new i.PathOption(n.chart.element.id+"_Series_border_"+n.index,"transparent",tt,it,1,n.border.dashArray,g),n,""));e||this.renderMarker(n)},t.prototype.updateDirection=function(n,t){this.render(n,n.xAxis,n.yAxis,n.chart.requireInvertedAxis,!1,!0);for(var i=0;i<t.length;i++)n.marker&&n.marker.visible&&n.chart.markerRender.renderMarker(n,n.points[t[i]],n.points[t[i]].symbolLocations[0],null,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"AreaSeries"},t.prototype.doAnimation=function(n){var t=n.animation;this.doLinearAnimation(n,t)},t}(yc),fft=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),eft=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.sideBySideInfo=[],t}return fft(t,n),t.prototype.render=function(n){var u=Math.max(n.yAxis.visibleRange.min,0),t,i,r;for(this.sideBySideInfo[n.index]=this.getSideBySideInfo(n),t=0,i=n.points;t<i.length;t++)r=i[t],this.renderPoint(n,r,this.sideBySideInfo[n.index],u);this.renderMarker(n)},t.prototype.renderPoint=function(n,t,i,r){if(t.symbolLocations=[],t.regions=[],t.visible&&ni(n.points[t.index-1],t,n.points[t.index+1],n)){this.rect=this.getRectangle(t.xValue+i.start,t.yValue,t.xValue+i.end,r,n);this.rect.height=n.columnWidthInPixel?n.columnWidthInPixel:this.rect.height;this.rect.y=n.columnWidthInPixel?this.rect.y-(n.columnWidthInPixel/2*n.rectCount-n.columnWidthInPixel*n.index):this.rect.y;var u=this.triggerEvent(n,t,n.interior,{width:n.border.width,color:n.border.color});u.cancel||(this.updateSymbolLocation(t,this.rect,n),this.drawRectangle(n,t,this.rect,u),"Cylinder"!==n.columnFacet)||this.drawCylinder(this.options,this.element,{isColumn:!1,stacking:!1,isLastSeries:!0},this.rect,n)}},t.prototype.updateDirection=function(n,t){for(var r=Math.max(n.yAxis.visibleRange.min,0),i=0;i<t.length;i++)this.renderPoint(n,n.points[t[i]],this.sideBySideInfo[n.index],r),n.marker&&n.marker.visible&&n.chart.markerRender.renderMarker(n,n.points[t[i]],n.points[t[i]].symbolLocations[0],null,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},t.prototype.doAnimation=function(n){this.animate(n)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"BarSeries"},t}(ku),oft=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sft=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.visibleAxisLabelRect=[],t}return oft(t,n),t.prototype.measureAxis=function(n){var t=this.chart;this.initialClipRect=n;this.seriesClipRect=new i.Rect(n.x,n.y,n.width,n.height);this.measureRowAxis(t,this.initialClipRect);this.measureColumnAxis(t,this.initialClipRect);this.calculateAxisSize()},t.prototype.measureRowAxis=function(n,t){this.calculateRowSize(t);var r=n.rows[0];this.measureDefinition(r,n,new i.Size(n.availableSize.width,r.computedHeight))},t.prototype.measureColumnAxis=function(n,t){this.calculateColumnSize(t);var r=n.columns[0];this.measureDefinition(r,n,new i.Size(r.computedWidth,n.availableSize.height))},t.prototype.measureDefinition=function(n,t,i){for(var u,r=0,f=n.axes;r<f.length;r++)u=f[r],u.getModule(t),u.baseModule.calculateRangeAndInterval(i,u)},t.prototype.calculateAxisSize=function(){var n=this.chart;this.centerX=.5*this.initialClipRect.width+this.initialClipRect.x;this.centerY=.5*this.initialClipRect.height+this.initialClipRect.y;n.radius=Math.min(this.initialClipRect.width,this.initialClipRect.height)/2-5-n.primaryXAxis.majorTickLines.height-n.primaryXAxis.maxLabelSize.height;n.radius=n.primaryXAxis.coefficient*n.radius/100;this.seriesClipRect.y=this.centerY-n.radius;this.seriesClipRect.x=this.centerX-n.radius;this.seriesClipRect.height=2*n.radius;this.seriesClipRect.width=2*n.radius;this.calculateRowSize(this.seriesClipRect);n.primaryYAxis.rect=this.seriesClipRect;this.calculateColumnSize(this.seriesClipRect);n.primaryXAxis.rect=this.seriesClipRect},t.prototype.measure=function(){var n=this.chart,i=n.primaryYAxis,r,t,u;i.isRTLEnabled=n.enableRtl;i.setIsInversedAndOpposedPosition(!0);n.verticalAxes.push(i);r=n.rows[0];r.axes[0]=i;n.rows[0]=r;t=n.primaryXAxis;t.isRTLEnabled=n.enableRtl;t.setIsInversedAndOpposedPosition(!0);n.horizontalAxes.push(t);u=n.columns[0];u.axes[0]=t;n.columns[0]=u},t.prototype.calculateRowSize=function(n){var i=this.chart,t=i.rows[0];t.computedHeight=n.height/2;t.computedTop=n.y;i.rows[0]=t},t.prototype.calculateColumnSize=function(n){var i=this.chart,t=i.columns[0];t.computedLeft=n.x;t.computedWidth=n.width;i.columns[0]=t},t.prototype.renderAxes=function(){var n,t=this.chart;this.startAngle=t.primaryXAxis.startAngle;for(var r=t.renderer.createGroup({id:t.element.id+"AxisCollection"}),u=t.renderer.createGroup({id:t.element.id+"AxisOutsideCollection"}),i=0,f=t.axisCollections.length;i<f;i++)this.element=t.renderer.createGroup({id:t.element.id+"AxisGroup"+i}),"Horizontal"===(n=t.axisCollections[i]).orientation?((n.majorGridLines.width>0||n.majorTickLines.width>0)&&this.drawXAxisGridLine(n,i),n.visible&&n.internalVisibility&&this.drawXAxisLabels(n,i)):(this.drawYAxisGridLine(n,i),n.lineStyle.width>0&&this.drawYAxisLine(n,i),n.visible&&n.internalVisibility&&this.drawYAxisLabels(n,i)),this.chart.enableCanvas||r.appendChild(this.element);return this.chart.enableCanvas||r.appendChild(this.element),o(t.enableCanvas,t.svgObject,r,t.redraw),u},t.prototype.drawYAxisLine=function(n,t){var u,i=this.chart,f=fu(nu(n.visibleLabels[0].value,n),this.startAngle),e="M "+this.centerX+" "+this.centerY+"L "+(this.centerX+i.radius*f.x)+" "+(this.centerY+i.radius*f.y),r;u={id:i.element.id+"AxisLine_"+t,d:e,"stroke-dasharray":n.lineStyle.dashArray,"stroke-width":n.lineStyle.width,stroke:n.lineStyle.color||i.themeStyle.axisLine};r=i.renderer.drawPath(u);this.setPointerEventNone(r);this.chart.enableCanvas||i.yAxisElements.appendChild(r)},t.prototype.drawYAxisLabels=function(n,t){var s,p,a,e,u=this.chart,v=0,h=0,w=this.startAngle<0?this.startAngle+360:this.startAngle,b="middle",o=[],c=[],f,l,y,g;c[0]=!0;for(var nt=n.labelIntersectAction,k=u.renderer.createGroup({id:u.element.id+"AxisLabels"+t}),d=fu(nu(n.visibleLabels[0].value,n),this.startAngle),r=0,tt=n.visibleLabels.length;r<tt;r++){if(e=!1,u.radius,ut(n.visibleLabels[r].value,n),s=n.visibleLabels[r].size,a=u.radius*ut(n.visibleLabels[r].value,n),v=this.centerX+a*d.x+(n.majorTickLines.height+s.width/2+2.5)*Math.cos(w*Math.PI/180)*("Inside"===n.labelPosition&&u.enableRtl?-1:"Inside"===n.labelPosition||"Outside"===n.labelPosition&&u.enableRtl?1:-1),h=this.centerY+a*d.y+(n.majorTickLines.height+s.height/2)*Math.sin(w*Math.PI/180)*("Inside"===n.labelPosition&&u.enableRtl?-1:"Inside"===n.labelPosition||"Outside"===n.labelPosition&&u.enableRtl?1:-1),h+=s.height/4,o[r]=this.getLabelRegion(v,h,n.visibleLabels[r],b),0!==r&&"Hide"===nt){for(f=r;f>=0;f--){if(c[f=0===f?0:f===r?f-1:f]&&pi(o[r],o[f])){e=!0;c[r]=!1;break}c[r]=!0}if(e)continue;for(l=0,y=this.visibleAxisLabelRect;l<y.length;l++)if(g=y[l],pi(o[r],g)){e=!0;break}}e||(this.visibleAxisLabelRect.push(o[r]),p=new i.TextOption(u.element.id+t+"_AxisLabel_"+r,v,h,b,n.visibleLabels[r].text),ct(u.renderer,p,n.labelStyle,n.labelStyle.color||u.themeStyle.axisLabelFont.color,k,!1,u.redraw,!0,!0,null,null,0,null,u.enableCanvas,null,u.themeStyle.axisLabelFont))}this.chart.enableCanvas||u.yAxisElements.appendChild(k)},t.prototype.drawYAxisGridLine=function(n,t){var c,e,y,w,b,s,l,p,u=this.chart,k="",v="",d=this.startAngle<0?this.startAngle+360:this.startAngle,g={color:n.majorGridLines.color||u.themeStyle.majorGridLine,width:n.majorGridLines.width},f,a;if(n.majorGridLines.width>0)if("Polar"===u.visibleSeries[0].type){for(f=0;f<n.visibleLabels.length;f++)s=(l=r(u.element.id+"_MajorGridLine_"+t+"_"+f))?l.getAttribute("r"):null,e=u.radius*ut(n.visibleLabels[f].value,n),n.isInversed&&!p&&(p=e),c=new ef(u.element.id+"_MajorGridLine_"+t+"_"+f,"transparent",g,n.majorGridLines.width,this.centerX,this.centerY,e),o(u.enableCanvas,this.element,u.renderer.drawCircle(c),u.redraw,!0,"r","r",new h(+s,+s),null,!0);e===u.radius||n.isInversed&&p===u.radius||(c=new ef(u.element.id+"_MajorGridLine_"+t+"_"+n.visibleLabels.length+1,"transparent",g,n.majorGridLines.width,this.centerX,this.centerY,u.radius),o(u.enableCanvas,this.element,u.renderer.drawCircle(c),u.redraw,!0,"r","r",new h(+s,+s),null,!0))}else{for(f=0;f<n.visibleLabels.length;f++)e=u.radius*ut(n.visibleLabels[f].value,n),v=this.renderRadarGrid(e,"",u),s=(l=r(u.element.id+"_MajorGridLine_"+t+"_"+f))?l.getAttribute("d"):null,c=new i.PathOption(u.element.id+"_MajorGridLine_"+t+"_"+f,"transparent",n.majorGridLines.width,n.majorGridLines.color||u.themeStyle.majorGridLine,null,null,v),o(u.enableCanvas,this.element,u.renderer.drawPath(c),u.redraw,!0,"x","y",null,s,!0);e!==u.radius&&(v=this.renderRadarGrid(u.radius,"",u),s=(l=r(u.element.id+"_MajorGridLine_"+t+"_"+n.visibleLabels.length))?l.getAttribute("d"):null,c=new i.PathOption(u.element.id+"_MajorGridLine_"+t+"_"+n.visibleLabels.length,"transparent",n.majorGridLines.width,n.majorGridLines.color||u.themeStyle.majorGridLine,null,null,v),o(u.enableCanvas,this.element,u.renderer.drawPath(c),u.redraw,!0,"x","y",null,s,!0))}if(n.majorTickLines.width>0)for(y=fu(nu(n.visibleLabels[0].value,n),this.startAngle),a=0;a<n.visibleLabels.length;a++)e=u.radius*ut(n.visibleLabels[a].value,n),k="M "+(w=this.centerX+e*y.x)+" "+(b=this.centerY+e*y.y)+" L "+(w+n.majorTickLines.height*Math.cos(d*Math.PI/180)*("Inside"===n.tickPosition&&u.enableRtl?-1:"Inside"===n.tickPosition||"Outside"===n.tickPosition&&u.enableRtl?1:-1))+" "+(b+n.majorTickLines.height*Math.sin(d*Math.PI/180)*("Inside"===n.tickPosition&&u.enableRtl?-1:"Inside"===n.tickPosition||"Outside"===n.tickPosition&&u.enableRtl?1:-1)),this.renderTickLine(n,t,k,"",a)},t.prototype.renderRadarGrid=function(n,t,i){for(var u,f,e,o,s,h,r=0,c=i.primaryXAxis.visibleLabels.length;r<c;r++)u=fu(nu(i.primaryXAxis.visibleLabels[r].value,i.primaryXAxis),this.startAngle),f=fu(nu(r+1<c?i.primaryXAxis.visibleLabels[r+1].value:i.primaryXAxis.visibleLabels[0].value,i.primaryXAxis),this.startAngle),e=this.centerX+n*u.x,o=this.centerY+n*u.y,s=this.centerX+n*f.x,h=this.centerY+n*f.y,t=t.concat((r?"L ":"M ")+e+" "+o+" L "+s+" "+h+" ");return t},t.prototype.drawXAxisGridLine=function(n,t){for(var h,r,u,f,c,e=this.chart,l="",a="",o="",s="",v=this.centerX,y=this.centerY,p=n.visibleLabels.length,i=0;i<p;i++)h=n.visibleLabels[i].value,r=fu(nu(n.visibleLabels[i].value,n),this.startAngle),l="M "+v+" "+y+" L "+(u=this.centerX+e.radius*r.x)+" "+(f=this.centerY+e.radius*r.y),a="M "+u+" "+f+" L "+(u+n.majorTickLines.height*r.x*("Inside"===n.tickPosition?-1:1))+" "+(f+n.majorTickLines.height*r.y*("Inside"===n.tickPosition?-1:1)),n.minorTicksPerInterval>0&&(n.minorGridLines.width>0||n.minorTickLines.width>0)&&"Category"!==n.valueType&&"Radar"!==e.visibleSeries[0].type&&(o=(c=this.drawAxisMinorLine(n,h,o,s))[0],s=c[1]),this.renderTickLine(n,t,a,s,i),this.renderGridLine(n,t,l,o,i)},t.prototype.drawAxisMinorLine=function(n,t,i,r){for(var c,l,f,e,u,s=t,a=n.visibleRange,o=[],h=0;h<n.minorTicksPerInterval;h++)we(s+=("DateTime"===n.valueType?n.dateTimeInterval:n.visibleRange.interval)/(n.minorTicksPerInterval+1),a)&&(u=fu(nu(s,n),this.startAngle),f=this.centerX+this.chart.radius*u.x,e=this.centerY+this.chart.radius*u.y,c=f+n.minorTickLines.height*u.x*("Inside"===n.tickPosition?-1:1),l=e+n.minorTickLines.height*u.y*("Inside"===n.tickPosition?-1:1),i=i.concat("M "+this.centerX+" "+this.centerY+"L "+f+" "+e),r=r.concat("M "+f+" "+e+"L "+c+" "+l));return o.push(i),o.push(r),o},t.prototype.drawXAxisLabels=function(n,t){var w,r,st,o,it;this.visibleAxisLabelRect=[];this.chart.legendModule&&(w=this.chart.legendModule.legendBounds);var rt,y,e,ut,ft,c,l,f=this.chart,u=0,d=0,et=f.renderer.createGroup({id:f.element.id+"AxisLabels"+t}),g="Inside"===n.labelPosition,a="",v=[],b=[];b[0]=!0;var ot=n.labelIntersectAction,at="Category"===n.valueType&&"BetweenTicks"===n.labelPlacement?.5:0,p=f.radius+n.majorTickLines.height;for(p=g?-p:p,r=0,st=n.visibleLabels.length;r<st;r++){if(l=!1,y=fu(nu(n.visibleLabels[r].value+at,n),this.startAngle),isNaN(y.x)||isNaN(y.y)||(u=this.centerX+(p+n.majorTickLines.height+5)*y.x,d=this.centerY+(p+n.majorTickLines.height+5)*y.y,a=parseFloat(u.toFixed(1))===parseFloat(this.centerX.toFixed(1))?"middle":u<this.centerX&&!g||u>this.centerX&&g?"end":"start"),e=(c=n.visibleLabels[r]).text,(n.enableTrim||"Trim"===ot)&&!n.enableWrap)for(var nt=n.visibleLabels[r].originalText,tt=void 0,s=void 0,ht=n.labelPosition,h=f.availableSize.width,lt=nt.length,k=lt-1;k>=0;--k)if(tt=nt.substring(0,k)+"...",s=i.measureText(tt,n.labelStyle,this.chart.themeStyle.axisLabelFont).width,u===h/2?u-s/2>=0&&u+s/2<=h:"Outside"===ht&&(u>=h/2&&u+s<=h||u<=h/2&&u-s>=0)||"Inside"===ht&&(u+s<=h/2||u-s>=h/2)){e=k===lt-1?nt:tt;c.size.width=i.measureText(e,n.labelStyle,this.chart.themeStyle.axisLabelFont).width;c.text=e;break}if(v[r]=this.getLabelRegion(u,d,c,a),0===r?ut=u:r===n.visibleLabels.length-1&&"Category"!==n.valueType&&(ft=i.measureText(e,n.labelStyle,this.chart.themeStyle.axisLabelFont).height,e=(ft+=u)>ut?"":e),0!==r&&"Hide"===ot)for(o=r;o>=0;o--){if(b[o=0===o?0:o===r?o-1:o]&&pi(v[r],v[o])){l=!0;b[r]=!1;break}b[r]=!0}!l&&w&&(l=pi(v[r],w))&&(it=this.getAvailableSpaceToTrim(w,v[r]),it>0&&(e=wi(it,n.visibleLabels[r].originalText,n.labelStyle,this.chart.enableRtl,this.chart.themeStyle.axisLabelFont),l=!1));rt=new i.TextOption(f.element.id+t+"_AxisLabel_"+r,u,d,f.enableRtl?"end"===a?"start":"start"===a?"end":a:a,e,"","central");l||(this.visibleAxisLabelRect.push(v[r]),ct(f.renderer,rt,c.labelStyle,c.labelStyle.color||f.themeStyle.axisLabelFont.color,et,!1,f.redraw,!0,!0,null,null,0,null,f.enableCanvas,null,f.themeStyle.axisLabelFont))}this.chart.enableCanvas||this.element.appendChild(et)},t.prototype.getAvailableSpaceToTrim=function(n,t){var i=n.x,u=i+n.width,r=t.x,f=r+t.width,e=0;return r>i&&r<u&&f>u?e=f-u:r>i&&r<u&&f<u?e=0:(f>i&&f<u&&r<i||f>i&&f>u&&r<i)&&(e=i-r),e},t.prototype.getLabelRegion=function(n,t,r,u){return"middle"===u?n-=r.size.width/2:"end"===u&&(n-=r.size.width),t-=r.size.height/2,new i.Rect(n,t,r.size.width,r.size.height)},t.prototype.renderTickLine=function(n,t,u,f,e){var c,l,h,s=this.chart;n.majorTickLines.width>0&&(l=(h=r(s.element.id+"_MajorTickLine_"+t+"_"+e))?h.getAttribute("d"):null,c=new i.PathOption(s.element.id+"_MajorTickLine_"+t+"_"+e,"transparent",n.majorTickLines.width,n.majorTickLines.color||s.themeStyle.majorTickLine,null,null,u),h=s.renderer.drawPath(c),this.setPointerEventNone(h),o(s.enableCanvas,s.yAxisElements,h,s.redraw,!0,"x","y",null,l));n.minorTickLines.width>0&&(l=(h=r(s.element.id+"_MinorTickLine_"+t+"_"+e))?h.getAttribute("d"):null,c=new i.PathOption(s.element.id+"_MinorTickLine_"+t+"_"+e,"transparent",n.minorTickLines.width,n.minorTickLines.color||s.themeStyle.minorTickLine,null,null,f),h=s.renderer.drawPath(c),this.setPointerEventNone(h),o(s.enableCanvas,s.yAxisElements,h,s.redraw,!0,"x","y",null,l))},t.prototype.renderGridLine=function(n,t,u,f,e){var h,c,l,s=this.chart;n.majorGridLines.width>0&&(c=(l=r(s.element.id+"_MajorGridLine_"+t+"_"+e))?l.getAttribute("d"):null,h=new i.PathOption(s.element.id+"_MajorGridLine_"+t+"_"+e,"transparent",n.majorGridLines.width,n.majorGridLines.color||s.themeStyle.majorGridLine,null,n.majorGridLines.dashArray,u),o(s.enableCanvas,this.element,s.renderer.drawPath(h),s.redraw,!0,"x","y",null,c));n.minorGridLines.width>0&&(c=(l=r(s.element.id+"_MinorGridLine_"+t+"_"+e))?l.getAttribute("d"):null,h=new i.PathOption(s.element.id+"_MinorGridLine_"+t+"_"+e,"transparent",n.minorGridLines.width,n.minorGridLines.color||s.themeStyle.minorGridLine,null,n.minorGridLines.dashArray,f),o(s.enableCanvas,this.element,s.renderer.drawPath(h),s.redraw,!0,"x","y",null,c))},t.prototype.setPointerEventNone=function(n){n&&(n.style.pointerEvents="none")},t}(hu),hft=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),uk=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return hft(r,n),r.prototype.render=function(n,i,r,u){for(var f,c=et(n.drawType),o=r.minimum,s=r.maximum,e=0,h=n.points;e<h.length;e++)f=h[e],f.visible=f.visible&&!(!t.isNullOrUndefined(o)&&f.yValue<o||!t.isNullOrUndefined(s)&&f.yValue>s);n.points.length&&(n.drawType.indexOf("Column")>-1?this.columnDrawTypeRender(n,i,r):n.chart[c+"SeriesModule"].render(n,i,r,u))},r.prototype.columnDrawTypeRender=function(n,t,r){var ct,a,f,e,v,s,lt,at,w,b,k,d,y,o,h,g,nt,tt,it,ot,vt=t.actualRange.min,c=n.clipRect.width/2+n.clipRect.x,l=n.clipRect.height/2+n.clipRect.y,p="RangeColumn"===n.drawType,yt="Polar"===n.type,kt="Logarithmic"===r.valueType,dt="StackingColumn"===n.drawType,pt="",rt=0,gt=n.columnWidth||1,ft=((n.points[1]?n.points[1].xValue:2*n.points[0].xValue)-n.points[0].xValue)*gt,st=t.isAxisInverse,ti="Category"===t.valueType&&"BetweenTicks"===t.labelPlacement?0:st?-ft/2:ft/2,wt="DateTime"===t.valueType?t.dateTimeInterval:1,bt,et,ht,u;this.getSeriesPosition(n);bt=st?n.rectCount-1-n.position:n.position;do rt+=wt,vt+=wt;while(vt<=t.actualRange.max-("Category"===t.valueType?0:1));for(et=0,ht=n.points;et<ht.length;et++)u=ht[et],u.symbolLocations=[],u.regions=[],u.visible&&ni(n.points[u.index-1],u,n.points[u.index+1],n)&&(v=(st?t.visibleRange.max-u.xValue:u.xValue-t.visibleRange.min)+(ft/n.rectCount*bt-ti)+rt/360*t.startAngle,v/=rt,f=2*Math.PI*(v+t.startAngle),e=2*Math.PI*(v+t.startAngle+ft/n.rectCount/rt),0===f&&0===e?(e=2*Math.PI,ot="1"):ot="0",lt=f,at=e,f=f-.5*Math.PI+n.columnSpacing/2,e=e-.5*Math.PI-1e-6-n.columnSpacing/2,dt||p?(y=p?u.low:n.stackedValues.startValues[u.index],o=p?u.high:n.stackedValues.endValues[u.index],o=(o=kt?hi(0===o?1:o,r.logBase):o)>r.actualRange.max?r.actualRange.max:o):(y=r.visibleRange.min,o=u.yValue>r.actualRange.max?r.actualRange.max:u.yValue),w=c+(s=y===o?0:n.chart.radius*ut(o,r))*Math.cos(f),b=c+s*Math.cos(e),k=l+s*Math.sin(f),d=l+s*Math.sin(e),g=c+(h=n.chart.radius*ut(0===y&&0!==r.visibleRange.min?r.visibleRange.min:y,r))*Math.cos(f),nt=l+h*Math.sin(f),tt=c+h*Math.cos(e),it=l+h*Math.sin(e),pt=yt?"M "+w+" "+k+" A "+s+" "+s+" 0 "+ot+" 1 "+b+" "+d+" L "+tt+" "+it+" A "+h+" "+h+" 1 0 0 "+g+" "+nt+" Z":"M "+w+" "+k+" L "+b+" "+d+" L "+tt+" "+it+" L "+g+" "+nt+" Z",u.regionData=new tv(lt,at,h,s,v),a=this.triggerEvent(n.chart,n,u),ct=new i.PathOption(n.chart.element.id+"_Series_"+n.index+"_Point_"+u.index,a.fill,a.border.width,a.border.color,n.opacity,n.dashArray,pt),a.cancel||(this.appendLinePath(ct,n,""),yt?(u.symbolLocations.push({x:c+s*Math.cos(f+(e-f)/2),y:l+s*Math.sin(f+(e-f)/2)}),p&&u.symbolLocations.push({x:c+h*Math.cos(f+(e-f)/2),y:l+h*Math.sin(f+(e-f)/2)})):(u.symbolLocations.push({x:(w+b)/2,y:(k+d)/2}),p&&u.symbolLocations.push({x:(tt+g)/2,y:(it+nt)/2}))));this.renderMarker(n);n.isRectSeries=!0},r.prototype.triggerEvent=function(n,t,i){var r={cancel:!1,name:rr,series:t,point:i,fill:t.setPointColor(i,t.interior),border:t.setBorderColor(i,{width:t.border.width,color:t.border.color})};return n.trigger(rr,r),i.color=r.fill,r},r.prototype.getSeriesPosition=function(n){for(var u,r,t,f=[],e=[],i={rectCount:0,position:null},o=0,s=n.chart.visibleSeries;o<s.length;o++)u=s[o],u.visible&&("Polar"===u.type||"Radar"===u.type)&&-1!==u.drawType.indexOf("Column")&&f.push(u);for(r=0;r<f.length;r++)t=f[r],-1!==t.drawType.indexOf("Stacking")?t.stackingGroup?void 0===e[t.stackingGroup]?(t.position=i.rectCount,e[t.stackingGroup]=i.rectCount++):t.position=e[t.stackingGroup]:null===i.position?(t.position=i.rectCount,i.position=i.rectCount++):t.position=i.position:t.position=i.rectCount++;for(r=0;r<f.length;r++)f[r].rectCount=i.rectCount},r.prototype.doAnimation=function(n){var e=n.animation.duration,o=n.animation.delay,i=n.seriesElement.childNodes,t=1,r,f,u;if("Scatter"===n.drawType)for(r=0,f=n.points;r<f.length;r++)u=f[r],u.symbolLocations.length&&i[t]&&(pu(i[t],o,e,n,u.index,u.symbolLocations[0],!1),t++);else for(t=1;t<i.length;t++)this.doPolarRadarAnimation(i[t],o,e,n)},r.prototype.doPolarRadarAnimation=function(n,i,r,u){var f=u.clipRect.width/2+u.clipRect.x,e=u.clipRect.height/2+u.clipRect.y,o=0;n.style.visibility="hidden";new t.Animation({}).animate(n,{duration:r,delay:i,progress:function(t){t.timeStamp>t.delay&&(t.element.style.visibility="visible",o=(t.timeStamp-t.delay)/t.duration,n.setAttribute("transform","translate("+f+" "+e+") scale("+o+") translate("+-f+" "+-e+")"))},end:function(){var t=document.getElementById(u.chart.element.id+"_Annotation_Collections");t&&(t.style.visibility="visible");n.style.visibility="visible";n.removeAttribute("transform");u.chart.trigger("animationComplete",{series:u.chart.isBlazor?{}:u})}})},r.prototype.getPolarIsInversedPath=function(n,t){var i=this.chart.radius,o=t,u=n.isAxisInverse?"1 1 ":"1 0 ",f=fu(nu(n.visibleLabels[0].value,n),this.startAngle),r=this.centerX+i*f.x,e=this.centerY+i*f.y;return o+"L "+r+" "+e+" A "+i+" "+i+" 0 "+u+r+" "+(this.centerY+i)+" A "+i+" "+i+" 0 "+u+r+" "+e+" "},r.prototype.getModuleName=function(){return"PolarSeries"},r.prototype.destroy=function(){},r}(sft),cft=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),lft=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cft(i,n),i.prototype.render=function(n,i,r,u){for(var f,c=et(n.drawType),o=r.minimum,s=r.maximum,e=0,h=n.points;e<h.length;e++)f=h[e],f.visible=f.visible&&!(!t.isNullOrUndefined(o)&&f.yValue<o||!t.isNullOrUndefined(s)&&f.yValue>s);n.points.length&&(-1===n.drawType.indexOf("Column")?n.chart[c+"SeriesModule"].render(n,i,r,u):this.columnDrawTypeRender(n,i,r))},i.prototype.getRadarIsInversedPath=function(n,t){var u,r,i,f=this.chart.radius,s=n.visibleLabels.length,e=t,o;if(i=fu(nu(n.visibleLabels[0].value,n),this.startAngle),r=this.centerY+f*i.y,u=this.centerX+f*i.x,isNaN(u)||isNaN(r))return e;for(e+=" L "+u+" "+r+" ",o=s-1;o>=0;o--)i=fu(nu(n.visibleLabels[o].value,n),this.startAngle),r=this.centerY+f*i.y,e+="L "+(u=this.centerX+f*i.x)+" "+r+" ";return e},i.prototype.getModuleName=function(){return"RadarSeries"},i.prototype.destroy=function(){},i}(uk),aft=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vft=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.sideBySideInfo=[],t}return aft(t,n),t.prototype.render=function(n){var r;this.sideBySideInfo[n.index]=this.getSideBySideInfo(n);for(var u=n.stackedValues,t=0,i=n.points;t<i.length;t++)r=i[t],this.renderPoint(n,r,this.sideBySideInfo[n.index],u);n.visible&&this.renderMarker(n)},t.prototype.renderPoint=function(n,t,i,r){var f,e,u,o,s;if(t.symbolLocations=[],t.regions=[],t.visible&&ni(n.points[t.index-1],t,n.points[t.index+1],n)){if(f=void 0,e=void 0,!n.visible&&n.isLegendClicked){for(u=n.index;u>=0;u--)if(n.chart.visibleSeries[u].visible){f=n.chart.visibleSeries[u].index;break}e=n.index>0&&void 0!==f?n.chart.visibleSeries[f].stackedValues.endValues[t.index]:n.stackedValues.startValues[t.index]}this.rect=this.getRectangle(t.xValue+i.start,!n.visible&&n.isLegendClicked?e:r.endValues[t.index],t.xValue+i.end,!n.visible&&n.isLegendClicked?e:r.startValues[t.index],n);n.chart.isTransposed&&n.columnWidthInPixel?(this.rect.width=n.columnWidthInPixel?n.columnWidthInPixel:this.rect.height,this.rect.x-=n.columnWidthInPixel/2):this.rect.height=n.columnWidthInPixel?n.columnWidthInPixel:this.rect.height;this.rect.y=n.columnWidthInPixel?n.chart.isTransposed?this.rect.y:this.rect.y-n.columnWidthInPixel/2:this.rect.y;o=this.triggerEvent(n,t,n.interior,{width:n.visible?n.border.width:0,color:n.visible?n.border.color:""});o.cancel||(this.drawRectangle(n,t,this.rect,o),this.updateSymbolLocation(t,this.rect,n),"Cylinder"!==n.columnFacet)||(s={isColumn:!1,stacking:"StackingBar100"===n.type,isLastSeries:!0},this.drawCylinder(this.options,this.element,s,this.rect,n))}},t.prototype.updateDirection=function(n,t){for(var f,r,i=[],u=0;u<n.yAxis.series.length;u++)f=n.yAxis.series[u],f.stackingGroup===n.stackingGroup&&i.push(f);for(r=0;r<i.length;r++)for(u=0;u<t.length;u++)this.renderPoint(i[r],i[r].points[t[u]],this.sideBySideInfo[n.index],i[r].stackedValues),n.marker&&n.marker.visible&&i[r].chart.markerRender.renderMarker(i[r],i[r].points[t[u]],i[r].points[t[u]].symbolLocations[0],null,!0),i[r].marker.dataLabel.visible&&i[r].chart.dataLabelModule&&(i[r].chart.dataLabelModule.commonId=i[r].chart.element.id+"_Series_"+i[r].index+"_Point_",i[r].chart.dataLabelModule.renderDataLabel(i[r],i[r].points[t[u]],null,i[r].marker.dataLabel))},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"StackingBarSeries"},t.prototype.doAnimation=function(n){this.animate(n)},t}(ku),yft=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pft=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.sideBySideInfo=[],t}return yft(t,n),t.prototype.render=function(n){var r;this.sideBySideInfo[n.index]=this.getSideBySideInfo(n);for(var u=Math.max(n.border.width,1),t=0,i=n.points;t<i.length;t++)r=i[t],this.renderPoint(n,r,this.sideBySideInfo[n.index],u)},t.prototype.renderPoint=function(n,t,i,r){var f,u,o="",e;(t.regions=[],t.symbolLocations=[],t.visible&&ni(n.points[t.index-1],t,n.points[t.index+1],n))&&(u=this.getRectangle(t.xValue+i.median,Math.max(t.high,t.low),t.xValue+i.median,Math.min(t.high,t.low),n),n.chart.requireInvertedAxis?(u.y-=r/2,u.height=r):(u.x-=r/2,u.width=r),f=this.getRectangle(t.xValue+i.start,Math.max(t.open,t.close),t.xValue+i.end,Math.min(t.open,t.close),n),o=this.getPathString(u,f,n),e=this.triggerPointRenderEvent(n,t),e.cancel||(this.drawCandle(n,t,f,e,o),this.updateSymbolLocation(t,u,n),this.updateSymbolLocation(t,f,n)))},t.prototype.updateDirection=function(n,t){for(var r=Math.max(n.border.width,1),i=0;i<t.length;i++)this.renderPoint(n,n.points[t[i]],this.sideBySideInfo[n.index],r),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},t.prototype.triggerPointRenderEvent=function(n,t){var i=this.getCandleColor(t,n),r={color:n.border.color,width:Math.max(n.border.width,1)};return this.triggerEvent(n,t,i,r)},t.prototype.getCandleColor=function(n,t){var i=t.points[n.index-1];return!1===t.enableSolidCandles?i&&i.close>n.close?t.bullFillColor||t.chart.themeStyle.bullFillColor:t.bearFillColor||t.chart.themeStyle.bearFillColor:n.open>n.close?t.bullFillColor||t.chart.themeStyle.bullFillColor:t.bearFillColor||t.chart.themeStyle.bearFillColor},t.prototype.getPathString=function(n,t,i){var u="",r=i.chart.requireInvertedAxis?n.y+n.height/2:n.x+n.width/2;return(u=(u+=i.chart.requireInvertedAxis?"M "+n.x+" "+r+" L "+t.x+" "+r:"M "+r+" "+n.y+" L "+r+" "+t.y).concat(" M "+t.x+" "+t.y+" L "+(t.x+t.width)+" "+t.y+" L "+(t.x+t.width)+" "+(t.y+t.height)+" L "+t.x+" "+(t.y+t.height)+" Z"))+(i.chart.requireInvertedAxis?" M "+(t.x+t.width)+" "+r+" L "+(n.x+n.width)+" "+r:" M "+r+" "+(t.y+t.height)+" L "+r+" "+(n.y+n.height))},t.prototype.drawCandle=function(n,t,u,f,e){var h;if((n.chart.requireInvertedAxis?u.height:u.width)<=0)return null;h=n.enableSolidCandles||t.open>t.close?f.fill:"transparent";f.border.color=f.fill;var c=new i.PathOption(n.chart.element.id+"_Series_"+n.index+"_Point_"+(null!==n.removedPointIndex&&n.removedPointIndex<=t.index?t.index+1:t.index),h,f.border.width,f.border.color,n.opacity,n.dashArray,e),s=r(c.id),l=s?s.getAttribute("d"):null,o=n.chart.renderer.drawPath(c,new Int32Array([n.clipRect.x,n.clipRect.y]));null!==n.removedPointIndex&&n.removedPointIndex<=t.index&&(o.id=n.chart.element.id+"_Series_"+n.index+"_Point_"+t.index);o.setAttribute("role","img");o.setAttribute("aria-label",n.accessibility.accessibilityDescriptionFormat?n.formatAccessibilityDescription(t,n):t.x.toString()+":"+t.high.toString()+":"+t.low.toString()+":"+t.close.toString()+":"+t.open.toString());n.chart.enableCanvas||n.seriesElement.appendChild(o);kf(s,e,n.chart.redraw,l,n.chart.duration)},t.prototype.doAnimation=function(n){this.animate(n)},t.prototype.getModuleName=function(){return"CandleSeries"},t.prototype.destroy=function(){},t}(ku),wft=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bft=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.sideBySideInfo=[],t}return wft(t,n),t.prototype.render=function(n){var u;n.isRectSeries=!0;this.sideBySideInfo[n.index]=this.getSideBySideInfo(n);for(var f=n.stackedValues,i=vu(n),t=0,r=i;t<r.length;t++)u=r[t],this.renderPoint(n,u,this.sideBySideInfo[n.index],f,i);n.visible&&this.renderMarker(n)},t.prototype.renderPoint=function(n,t,i,r,u){var e,o,f,s,h;if(t.symbolLocations=[],t.regions=[],t.visible&&ni(u[t.index-1],t,u[t.index+1],n)){if(e=void 0,o=void 0,!n.visible&&n.isLegendClicked){for(f=n.index;f>=0;f--)if(n.chart.visibleSeries[f].visible){e=n.chart.visibleSeries[f].index;break}o=n.index>0&&void 0!==e?n.chart.visibleSeries[e].stackedValues.endValues[t.index]:n.stackedValues.startValues[t.index]}this.rect=this.getRectangle(t.xValue+i.start,!n.visible&&n.isLegendClicked?o:r.endValues[t.index],t.xValue+i.end,!n.visible&&n.isLegendClicked?o:r.startValues[t.index],n);n.chart.isTransposed&&n.columnWidthInPixel?(this.rect.height=n.columnWidthInPixel?n.columnWidthInPixel:this.rect.width,this.rect.y-=n.columnWidthInPixel/2):this.rect.width=n.columnWidthInPixel?n.columnWidthInPixel:this.rect.width;this.rect.x=n.columnWidthInPixel?n.chart.isTransposed?this.rect.x:this.rect.x-(n.columnWidthInPixel/2*n.rectCount-n.columnWidthInPixel*n.position):this.rect.x;s=this.triggerEvent(n,t,n.interior,{width:n.visible?n.border.width:0,color:n.visible?n.border.color:""});s.cancel||(this.drawRectangle(n,t,this.rect,s),this.updateSymbolLocation(t,this.rect,n),"Cylinder"!==n.columnFacet)||(h={isColumn:!0,stacking:"StackingColumn100"===n.type,isLastSeries:!0},this.drawCylinder(this.options,this.element,h,this.rect,n))}},t.prototype.updateDirection=function(n,t){for(var f,r,e,i=[],u=0;u<n.xAxis.series.length;u++)f=n.xAxis.series[u],f.stackingGroup===n.stackingGroup&&i.push(f);for(r=0;r<i.length;r++)for(e=vu(i[r]),u=0;u<t.length;u++)this.renderPoint(i[r],i[r].points[t[u]],this.sideBySideInfo[n.index],i[r].stackedValues,e),n.marker&&n.marker.visible&&i[r].chart.markerRender.renderMarker(i[r],i[r].points[t[u]],i[r].points[t[u]].symbolLocations[0],null,!0),i[r].marker.dataLabel.visible&&i[r].chart.dataLabelModule&&(i[r].chart.dataLabelModule.commonId=i[r].chart.element.id+"_Series_"+i[r].index+"_Point_",i[r].chart.dataLabelModule.renderDataLabel(i[r],i[r].points[t[u]],null,i[r].marker.dataLabel))},t.prototype.doAnimation=function(n){this.animate(n)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"StackingColumnSeries"},t}(ku),kft=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dft=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return kft(t,n),t.prototype.render=function(n,t,r,u,f,e){var p,s,b,h="",a="M",v=null,c=this.enableComplexProperty(n),y,w,o,k;for(p="Category"===t.valueType&&"BetweenTicks"===t.labelPlacement?.5:0,y=0,w=c;y<w.length;y++)o=w[y],o.symbolLocations=[],o.regions=[],o.visible&&ni(c[o.index-1],o,c[o.index+1],n)?("M"!==a||c[o.index+1]&&c[o.index+1].visible||(h=""),null!=v?(b=l(o.xValue,o.yValue,t,r,u),s=l(v.xValue,v.yValue,t,r,u),h=h.concat(a+" "+s.x+" "+s.y+this.GetStepLineDirection(b,s,n.step,"L",n,!0)),a="L"):(s=l(o.xValue-p,o.yValue,t,r,u),h=h.concat(a+" "+s.x+" "+s.y+" "),a="L"),this.storePointLocation(o,n,u,l),""===h&&(h="M "+o.symbolLocations[0].x+" "+o.symbolLocations[0].y),v=o):(v="Drop"===n.emptyPointSettings.mode?v:null,a="Drop"===n.emptyPointSettings.mode?a:"M");c.length>0&&(s=l(c[c.length-1].xValue+p,c[c.length-1].yValue,t,r,u),h=h.concat(a+" "+s.x+" "+s.y+" "));k=new i.PathOption(n.chart.element.id+"_Series_"+n.index,"transparent",n.width,n.interior,n.opacity,n.dashArray,h);this[f?"addPath":"appendLinePath"](k,n,"");e||this.renderMarker(n)},t.prototype.updateDirection=function(n,t){this.render(n,n.xAxis,n.yAxis,n.chart.requireInvertedAxis,!1,!0);for(var i=0;i<t.length;i++)n.marker&&n.marker.visible&&n.chart.markerRender.renderMarker(n,n.points[t[i]],n.points[t[i]].symbolLocations[0],null,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},t.prototype.doAnimation=function(n){var t=n.animation;this.doLinearAnimation(n,t)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"StepLineSeries"},t}(hu),gft=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),net=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gft(t,n),t.prototype.render=function(n,t,r,u,f,e){for(var o,a,s,b,p=null,c="",v=this.enableComplexProperty(n),k=v.length,nt=Math.max(n.yAxis.visibleRange.min,0),d=null,g="",tt,it,w="Category"===t.valueType&&"BetweenTicks"===t.labelPlacement?.5:0,y=0;y<k;y++)b=(s=v[y]).xValue,s.symbolLocations=[],s.regions=[],s.visible&&ni(v[y-1],s,v[y+1],n)&&(null===p&&(p=new h(b,0),c+="M "+(o=l(b-w,nt,t,r,u)).x+" "+o.y+" ",c+="L "+(o=l(b-w,s.yValue,t,r,u)).x+" "+o.y+" ",g+="M "+o.x+" "+o.y+" "),null!=d?(o=l(s.xValue,s.yValue,t,r,u),a=l(d.xValue,d.yValue,t,r,u),c=c.concat(this.GetStepLineDirection(o,a,n.step,"L",n)),g+=this.GetStepLineDirection(o,a,n.step,"L",n,!0)):"Gap"===n.emptyPointSettings.mode&&(c+="L "+(o=l(s.xValue,s.yValue,t,r,u)).x+" "+o.y+" ",g+="L "+o.x+" "+o.y+" "),this.storePointLocation(s,n,u,l),d=s),v[y+1]&&!v[y+1].visible&&"Drop"!==n.emptyPointSettings.mode&&(c+="L "+(o=l(b+w,nt,t,r,u)).x+" "+o.y,p=null,d=null);k>1&&""!==c?(c+="L "+(a=l((p={x:v[k-1].xValue+w,y:v[k-1].yValue}).x,p.y,t,r,u)).x+" "+a.y+" ",g+="L "+a.x+" "+a.y+" ",c+="L "+(a=l((p={x:v[k-1].xValue+w,y:nt}).x,p.y,t,r,u)).x+" "+a.y+" "):c="";tt=new i.PathOption(n.chart.element.id+"_Series_"+n.index,n.interior,0,"transparent",n.opacity,n.dashArray,c);(this[f?"addAreaPath":"appendLinePath"](tt,n,""),0!==n.border.width)&&(it=new i.PathOption(n.chart.element.id+"_Series_border_"+n.index,"transparent",n.border.width,n.border.color?n.border.color:n.interior,1,n.border.dashArray,g),this[f?"addAreaPath":"appendLinePath"](it,n,""));e||this.renderMarker(n)},t.prototype.updateDirection=function(n,t){this.render(n,n.xAxis,n.yAxis,n.chart.requireInvertedAxis,!1,!0);for(var i=0;i<t.length;i++)n.marker&&n.marker.visible&&n.chart.markerRender.renderMarker(n,n.points[t[i]],n.points[t[i]].symbolLocations[0],null,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},t.prototype.doAnimation=function(n){var t=n.animation;this.doLinearAnimation(n,t)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"StepAreaSeries"},t}(hu),tet=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),iet=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return tet(t,n),t.prototype.render=function(n,t,r,u,f,e){var a,ut,v,p,g="PolarRadar"===n.chart.chartAreaType,w=g?bf:l,h="",s=this.enableComplexProperty(n),d=s.length,y=n.stackedValues,ht=g?Math.max(n.yAxis.visibleRange.min,y.endValues[0]):Math.max(n.yAxis.visibleRange.min,y.startValues[0]),nt=0,ft="",k,b,o,et,c,tt,it,rt,ot,st;for(d>0&&(v=w(s[0].xValue,ht,t,r,u,n),h=h.concat("M "+v.x+" "+v.y+" ")),b=n.chart&&"PolarRadar"===n.chart.chartAreaType,o=n.index;o>=0;o--)if(n.chart.visibleSeries[o].visible&&n.chart.visibleSeries[o].type.indexOf("Stacking")>-1){k=n.chart.visibleSeries[o].index;break}for(o=0;o<d;o++)if(a=s[o].index,s[o].symbolLocations=[],s[o].regions=[],s[o].visible&&ni(s[o-1],s[o],s[o+1],n))et=n.index>0&&void 0!==k?this.chart.visibleSeries[k].stackedValues.endValues[a]:y.startValues[a],v=w(s[o].xValue,!n.visible&&n.isLegendClicked?et:y.endValues[a],t,r,u,n),h=h.concat("L "+v.x+" "+v.y+" "),s[o].symbolLocations.push(w(s[o].xValue,y.endValues[a],t,r,u,n)),s[o].regions.push(new i.Rect(s[o].symbolLocations[0].x-n.marker.width,s[o].symbolLocations[0].y-n.marker.height,2*n.marker.width,2*n.marker.height));else if(!b&&"Drop"!==n.emptyPointSettings.mode){for(c=o-1;c>=nt;c--)a=s[c].index,p=w(s[c].xValue,y.startValues[a],t,r,u,n),h=h.concat("L "+p.x+" "+p.y+" ");s[o+1]&&s[o+1].visible&&(!b||b&&this.withinYRange(s[o+1],r))&&(ut=s[o+1].index,v=w(s[o+1].xValue,y.startValues[ut],t,r,u,n),h=h.concat("M "+v.x+" "+v.y+" "));nt=o+1}if("PolarRadar"===n.chart.chartAreaType&&s.length>1&&(tt=this.getFirstLastVisiblePoint(n.points),it=this.chart,h+="L "+(p=w((v={x:tt.first.xValue,y:y.endValues[tt.first.index]}).x,v.y,t,r,u,n)).x+" "+p.y+" ",1===this.chart.visible&&(t.isAxisInverse||r.isAxisInverse)&&(this.chart.enableAnimation=!1,h="Polar"===n.type?it.polarSeriesModule.getPolarIsInversedPath(t,h):it.radarSeriesModule.getRadarIsInversedPath(t,h))),!b||b&&n.index!==this.getFirstSeriesIndex(n.chart.visibleSeries))for(c=d-1;c>=nt;c--)(a=s[c].index,!b||s[c].visible)&&(rt=this.getPreviousSeries(n),"Drop"===rt.emptyPointSettings.mode&&rt.points[c].isEmpty||(p=w(s[c].xValue,!n.visible&&n.isLegendClicked&&n.index>0&&void 0!==k?this.chart.visibleSeries[k].stackedValues.endValues[a]:y.startValues[a],t,r,u,n),y.startValues[a]===y.endValues[a]&&(p.y=Math.floor(p.y)),h=h.concat((c===d-1&&g?"M":"L")+" "+p.x+" "+p.y+" ")));ot=new i.PathOption(n.chart.element.id+"_Series_"+n.index,n.interior,0,"transparent",n.opacity,n.dashArray,h);(this[f?"addAreaPath":"appendLinePath"](ot,n,""),0!==n.border.width&&n.visible)&&(ft=this.removeEmptyPointsBorder(this.getBorderDirection(h)),st=new i.PathOption(n.chart.element.id+"_Series_border_"+n.index,"transparent",n.visible?n.border.width:0,n.border.color?n.border.color:n.interior,1,n.border.dashArray,ft),this[f?"addAreaPath":"appendLinePath"](st,n,""));!e&&n.visible&&this.renderMarker(n)},t.prototype.updateDirection=function(n,t){for(var i,r,u=0;u<n.xAxis.series.length;u++)for(i=n.xAxis.series[u],this.render(i,i.xAxis,i.yAxis,i.chart.requireInvertedAxis,!1,!0),r=0;r<t.length;r++)i.marker&&i.marker.visible&&i.chart.markerRender.renderMarker(i,i.points[t[r]],i.points[t[r]].symbolLocations[0],null,!0),i.marker.dataLabel.visible&&i.chart.dataLabelModule&&(i.chart.dataLabelModule.commonId=i.chart.element.id+"_Series_"+i.index+"_Point_",i.chart.dataLabelModule.renderDataLabel(i,i.points[t[r]],null,i.marker.dataLabel))},t.prototype.addAreaPath=function(n,t,i){var f=this.appendPathElement(n,t,i),e;if(""!==f.previousDirection&&""!==n.d){var r=f.previousDirection.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),u=n.d.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),o=Math.max(r.length,u.length),s=Math.min(r.length,u.length);if(r.length<u.length){for(e=r.length;e<u.length;e++)u.length!==r.length&&r.splice((r.length+1)/2,0,r.slice((r.length-1)/2)[0],r.slice((r.length-1)/2)[1]);bt(f.element,n.d,t.chart.redraw,r.join(" "),this.chart.duration)}else if(r.length>u.length){for(e=s;e<o;e++)u.length!==r.length&&(u.splice(1,0,u[1]),u.splice(u.length-1,0,u[u.length-1]));bt(f.element,u.join(""),t.chart.redraw,f.previousDirection,this.chart.duration,n.d)}else bt(f.element,n.d,t.chart.redraw,f.previousDirection,this.chart.duration)}},t.prototype.doAnimation=function(n){var t=n.animation;this.doLinearAnimation(n,t)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"StackingAreaSeries"},t.prototype.getPreviousSeries=function(n){for(var i=n.chart.visibleSeries,t=0,r=i.length;t<r;t++)if(n.index===i[t].index&&0!==t)return i[t-1];return i[0]},t.prototype.getFirstSeriesIndex=function(n){for(var r,t=0,i=n;t<i.length;t++)if(r=i[t],r.visible)return r.index;return 0},t}(hu),ret=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),uet=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ret(t,n),t.prototype.render=function(n,t,r,u,f,e){for(var a,w,ut,b,ft,st,et,ht,c,k=null,y="",tt="",v=n.stackedValues,o=this.enableComplexProperty(n),ct=Math.max(n.yAxis.visibleRange.min,v.startValues[0]),g=o.length,it=null,ot=0,d,s,rt,nt="Category"===t.valueType&&"BetweenTicks"===t.labelPlacement?.5:0,p=0;p<g;p++)if(et=(b=o[p]).xValue,b.symbolLocations=[],b.regions=[],c=b.index,b.visible&&ni(o[p-1],b,o[p+1],n)&&(null===k&&(k=new h(et,0),y+="M "+(a=l(et-nt,ct,t,r,u)).x+" "+a.y+" ",y+="L "+(a=l(et-nt,v.endValues[c],t,r,u)).x+" "+a.y+" ",tt+="M "+a.x+" "+a.y+" "),null!=it?(a=l(b.xValue,v.endValues[c],t,r,u),w=l(it.xValue,v.endValues[it.index],t,r,u),y+=this.GetStepLineDirection(a,w,n.step,"L",n,!1),tt+=this.GetStepLineDirection(a,w,n.step,"L",n,!0)):"Gap"===n.emptyPointSettings.mode&&(y+="L "+(a=l(b.xValue,v.endValues[c],t,r,u)).x+" "+a.y+" ",tt+="L "+a.x+" "+a.y+" "),o[p].symbolLocations.push(l(o[p].xValue,v.endValues[c],t,r,u)),o[p].regions.push(new i.Rect(o[p].symbolLocations[0].x-n.marker.width,o[p].symbolLocations[0].y-n.marker.height,2*n.marker.width,2*n.marker.height)),it=b),o[p+1]&&!o[p+1].visible&&null!==k&&"Drop"!==n.emptyPointSettings.mode){for(d=void 0,s=p;s>=ot;s--)c=o[s].index,d=0===s?0:o[s-1].index,a=l(o[c].xValue,v.startValues[c],t,r,u),0!==s&&(v.startValues[c]<v.startValues[d]||v.startValues[c]>v.startValues[d])?(y=y.concat("L "+a.x+" "+a.y+" "),w=l(o[d].xValue,v.startValues[d],t,r,u)):w=l(o[c].xValue,v.startValues[c],t,r,u),o[d].visible&&(y=y.concat(this.GetStepLineDirection(w,a,this.prevStep,"L",n)));ot=p+2;k=null;it=null}if(""!==y){for(g>1&&(c=o[g-1].index,y+="L "+(w=l((k={x:o[g-1].xValue+nt,y:v.endValues[c]}).x,k.y,t,r,u)).x+" "+w.y+" ",tt+="L "+w.x+" "+w.y+" ",y+="L "+(w=l((k={x:o[g-1].xValue+nt,y:v.startValues[c]}).x,k.y,t,r,u)).x+" "+w.y+" "),s=g-1;s>=ot;s--)rt=void 0,o[s].visible&&(c=o[s].index,ft=l(o[s].xValue,v.startValues[c],t,r,u),y=y.concat("L "+ft.x+" "+ft.y+" ")),0===s||o[s-1].visible||(rt=this.getNextVisiblePointIndex(o,s)),0!==s&&(ht=rt||s-1,c=rt?o[rt].index:o[s-1].index,st=l(o[ht].xValue,v.startValues[c],t,r,u),(0===s||o[s-1].visible)&&(y=y.concat(this.GetStepLineDirection(st,ft,this.prevStep,"L",n))));this.prevStep="Right"===n.step?"Left":"Left"===n.step?"Right":n.step;ut=new i.PathOption(n.chart.element.id+"_Series_"+n.index,n.interior,0,"transparent",n.opacity,n.dashArray,y);this[f?"addPath":"appendLinePath"](ut,n,"");0!==n.border.width&&(ut=new i.PathOption(n.chart.element.id+"_Series_border_"+n.index,"transparent",n.border.width,n.border.color?n.border.color:n.interior,1,n.border.dashArray,tt),this[f?"addPath":"appendLinePath"](ut,n,""));e||this.renderMarker(n)}},t.prototype.updateDirection=function(n,t){for(var i,r,u=0;u<n.xAxis.series.length;u++)for(i=n.xAxis.series[u],this.render(i,i.xAxis,i.yAxis,i.chart.requireInvertedAxis,!1,!0),r=0;r<t.length;r++)i.marker&&i.marker.visible&&i.chart.markerRender.renderMarker(i,i.points[t[r]],i.points[t[r]].symbolLocations[0],null,!0),i.marker.dataLabel.visible&&i.chart.dataLabelModule&&(i.chart.dataLabelModule.commonId=i.chart.element.id+"_Series_"+i.index+"_Point_",i.chart.dataLabelModule.renderDataLabel(i,i.points[t[r]],null,i.marker.dataLabel))},t.prototype.addPath=function(n,t,i){var f=this.appendPathElement(n,t,i),e;if(""!==f.previousDirection&&""!==n.d){var r=f.previousDirection.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),u=n.d.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),o=Math.max(r.length,u.length),s=Math.min(r.length,u.length);if(r.length<u.length){for(e=r.length;e<u.length;e++)u.length!==r.length&&(r.splice(Math.floor(r.length/2)-1,0,r[Math.floor(r.length/2)-1],r[Math.floor(r.length/2)-1]),r.splice(Math.floor(r.length/2)+2,0,r[Math.floor(r.length/2)+2],r[Math.floor(r.length/2)+2],r[Math.floor(r.length/2)+2]));bt(f.element,n.d,t.chart.redraw,r.join(" "),this.chart.duration)}else if(r.length>u.length){for(e=s;e<o;e++)u.length!==r.length&&(u.splice(2,0,u[2]),u.splice(u.length-3,0,u[u.length-3]));bt(f.element,u.join(""),t.chart.redraw,f.previousDirection,this.chart.duration,n.d)}else bt(f.element,n.d,t.chart.redraw,f.previousDirection,this.chart.duration)}},t.prototype.doAnimation=function(n){var t=n.animation;this.doLinearAnimation(n,t)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"StackingStepAreaSeries"},t.prototype.getNextVisiblePointIndex=function(n,t){for(var i=t-1;i>=0;i--)if(n[i].visible)return i;return 0},t}(hu),fet=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),eet=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return fet(t,n),t.prototype.render=function(n,t,r,u,f,e){for(var b,y,p,h,w,a="PolarRadar"===n.chart.chartAreaType?bf:l,c="",s=this.enableComplexProperty(n),k=s.length,v=n.stackedValues,o=0;o<k;o++)s[o].regions=[],s[o].symbolLocations=[],y=s[o].index,s[o].visible&&ni(s[o-1],s[o],s[o+1],n)?(h=a(s[o].xValue,v.endValues[y],t,r,u,n),c=c.concat((o?"L":"M")+" "+h.x+" "+h.y+" "),s[o].symbolLocations.push(a(s[o].xValue,v.endValues[y],t,r,u,n)),s[o].regions.push(new i.Rect(s[o].symbolLocations[0].x-n.marker.width,s[o].symbolLocations[0].y-n.marker.height,2*n.marker.width,2*n.marker.height))):"Drop"!==n.emptyPointSettings.mode&&s[o+1]&&s[o+1].visible&&(p=s[o+1].index,h=a(s[o+1].xValue,v.endValues[p],t,r,u,n),c=c.concat("M "+h.x+" "+h.y+" "));"PolarRadar"===n.chart.chartAreaType&&s.length>1&&(c+="L "+(w=a((h={y:v.endValues[0],x:n.points[0].xValue}).x,h.y,t,r,u,n)).x+" "+w.y+" ");b=new i.PathOption(n.chart.element.id+"_Series_"+n.index,"none",n.width,n.interior,n.opacity,n.dashArray,c);this[f?"addPath":"appendLinePath"](b,n,"");e||this.renderMarker(n)},t.prototype.updateDirection=function(n,t){this.render(n,n.xAxis,n.yAxis,n.chart.requireInvertedAxis,!1,!0);for(var i=0;i<t.length;i++)n.marker&&n.marker.visible&&n.chart.markerRender.renderMarker(n,n.points[t[i]],n.points[t[i]].symbolLocations[0],null,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},t.prototype.doAnimation=function(n){var t=n.animation;this.doLinearAnimation(n,t)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"StackingLineSeries"},t}(hu),oet=function(){function n(){}return n.prototype.render=function(n,t,i,r){var s;n.isRectSeries=!1;for(var f=n.marker,e=this.enableComplexProperty(n),h="PolarRadar"===n.chart.chartAreaType?bf:l,c={width:this.isLineShapeMarker(f.shape)?n.width:n.border.width,color:this.isLineShapeMarker(f.shape)?n.interior:n.border.color},u=0,o=e;u<o.length;u++)s=o[u],this.renderPoint(n,s,r,h,c,e)},n.prototype.renderPoint=function(n,t,i,r,u,f){var e,o=n.chart.redraw&&t.symbolLocations?t.symbolLocations[0]:null;t.symbolLocations=[];t.regions=[];t.visible&&ni(f[t.index-1],t,f[t.index+1],n)&&(e={cancel:!1,name:rr,series:n,point:t,fill:n.setPointColor(t,n.interior),border:n.setBorderColor(t,{width:u.width,color:u.color}),height:n.marker.height,width:n.marker.width,shape:n.marker.shape},n.chart.trigger(rr,e),e.border={width:this.isLineShapeMarker(e.shape)?n.width:n.border.width,color:this.isLineShapeMarker(e.shape)?n.interior:n.border.color},e.cancel?t.marker={visible:!0}:(t.symbolLocations.push(r(t.xValue,t.yValue,n.xAxis,n.yAxis,i,n)),t.color=e.fill,this.refresh(n,t,e,o)))},n.prototype.updateDirection=function(n,t,i){for(var u=n.marker,f=this.enableComplexProperty(n),e="PolarRadar"===n.chart.chartAreaType?bf:l,o={width:this.isLineShapeMarker(u.shape)?n.width:n.border.width,color:this.isLineShapeMarker(u.shape)?n.interior:n.border.color},r=0;r<t.length;r++)this.renderPoint(n,n.points[t[r]],i,e,o,f),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[r]],null,n.marker.dataLabel))},n.prototype.isLineShapeMarker=function(n){return n.indexOf("Line")>-1||"Plus"===n||"Cross"===n},n.prototype.enableComplexProperty=function(n){for(var i,f,u,a=[],e=[],v=n.yAxis.visibleRange,y=n.xAxis.visibleRange,p=n.clipRect,r=n.points,o=Math.abs(v.delta/p.height),s=Math.abs(y.delta/p.width),w=r[0]&&r[0].y>o?0:o,b=r[0]&&r[0].x>s?0:s,h=0,c=0,l=0,k=r;l<k.length;l++)i=k[l],i.symbolLocations||(i.symbolLocations=[]),h=i.yValue?i.yValue:v.min,c=i.xValue?i.xValue:y.min,(Math.abs(w-h)>=o||Math.abs(b-c)>=s)&&(e.push(i),w=h,b=c);for(f=0;f<e.length;f++)u=e[f],t.isNullOrUndefined(u.x)||""===u.x||a.push(u);return a},n.prototype.refresh=function(n,t,u,f){var e,a,h=n.chart,s=n.marker,v=u.point.marker.imageUrl||s.imageUrl,c=new i.PathOption(h.element.id+"_Series_"+n.index+"_Point_"+t.index,u.fill,u.border.width,n.chart.enableCanvas&&!u.border.color?u.fill:u.border.color,n.opacity,n.border.dashArray),l,y;h.redraw&&r(c.id)&&(e="Circle"===u.shape?"c":"",a=r(c.id).getAttribute("d"),l=r(c.id),f={x:+l.getAttribute(e+"x"),y:+l.getAttribute(e+"y")});y=tr(t.symbolLocations[0],u.shape,new i.Size(u.width,u.height),v,c,(t.x.toString(),t.yValue.toString()),n.chart.renderer,n.clipRect);o(n.chart.enableCanvas,n.seriesElement,y,h.redraw,!0,e+"x",e+"y",f,a,!1,!1,null,h.duration,!0);t.regions.push(new i.Rect(t.symbolLocations[0].x-s.width,t.symbolLocations[0].y-s.height,2*s.width,2*s.height));t.marker={border:u.border,fill:u.fill,height:u.height,visible:!0,width:u.width,shape:u.shape,imageUrl:v}},n.prototype.doAnimation=function(n){for(var t,e=n.animation.duration,o=n.animation.delay,u=n.seriesElement.childNodes,i=1,r=0,f=n.points;r<f.length;r++)t=f[r],t.symbolLocations.length&&u[i]&&(pu(u[i],o,e,n,t.index,t.symbolLocations[0],!1),i++)},n.prototype.getModuleName=function(){return"ScatterSeries"},n.prototype.destroy=function(){},n}(),set=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),het=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.sideBySideInfo=[],t}return set(t,n),t.prototype.render=function(n){var t,i,r;for(this.sideBySideInfo[n.index]=this.getSideBySideInfo(n),t=0,i=n.points;t<i.length;t++)r=i[t],this.renderPoint(n,r,this.sideBySideInfo[n.index]);this.renderMarker(n)},t.prototype.renderPoint=function(n,t,i){var r,u;(t.symbolLocations=[],t.regions=[],t.visible&&ni(n.points[t.index-1],t,n.points[t.index+1],n))&&((r=this.getRectangle(t.xValue+i.start,t.high,t.xValue+i.end,t.low,n)).width=n.columnWidthInPixel?n.columnWidthInPixel:r.width,r.x=n.columnWidthInPixel?r.x-(n.columnWidthInPixel/2*n.rectCount-n.columnWidthInPixel*n.index):r.x,u=this.triggerEvent(n,t,n.interior,{width:n.border.width,color:n.border.color}),u.cancel||(this.updateSymbolLocation(t,r,n),this.drawRectangle(n,t,r,u)))},t.prototype.updateDirection=function(n,t){for(var u=function(i){r.renderPoint(n,n.points[t[i]],r.sideBySideInfo[n.index]);n.marker&&n.marker.visible&&n.points[t[i]].symbolLocations.map(function(r,u){n.chart.markerRender.renderMarker(n,n.points[t[i]],r,u,!0)});n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},r=this,i=0;i<t.length;i++)u(i)},t.prototype.getModuleName=function(){return"RangeColumnSeries"},t.prototype.doAnimation=function(n){this.animate(n)},t.prototype.destroy=function(){},t}(ku),cet=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),aet=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.borderDirection="",t.prevPoint=null,t}return cet(t,n),t.prototype.render=function(n,t,r,u,f,e){var o,s,g,a,it,rt,p,w,ut,ft;this.prevPoint=null;var b,k,nt=null,c="",tt=0,v="M",d=void 0,et=n.border.width?n.border.width:0,ot=n.border.color?n.border.color:n.interior,st=Math.max(n.yAxis.visibleRange.min,0),y=this.enableComplexProperty(n);for("Category"===t.valueType&&"BetweenTicks"===t.labelPlacement&&(tt=.5),a=0,it=y.length;a<it;a++)((o=y[a]).symbolLocations=[],o.regions=[],b=Math.min(o.low,o.high),k=Math.max(o.low,o.high),r.isAxisInverse)&&(rt=b,b=k,k=rt),p=l(o.xValue,b,t,r,u),w=l(o.xValue,k,t,r,u),o.symbolLocations.push(w),o.symbolLocations.push(p),ut=new i.Rect(Math.min(p.x,w.x),Math.min(p.y,w.y),Math.max(Math.abs(w.x-p.x),n.marker.width),Math.max(Math.abs(w.y-p.y),n.marker.width)),o.regions.push(ut),o.visible&&ni(y[o.index-1],o,y[o.index+1],n)?(null===nt&&(nt=new h(o.xValue,0),c+=v+" "+(s=l(o.xValue-tt,st,t,r,u)).x+" "+s.y+" ",c+="L "+(s=l(o.xValue-tt,o.high>o.low?o.high:o.low,t,r,u)).x+" "+s.y+" ",this.borderDirection+=v+" "+s.x+" "+s.y+" "),null!=this.prevPoint?(s=l(o.xValue,o.high>o.low?o.high:o.low,t,r,u),g=l(this.prevPoint.xValue,this.prevPoint.high>this.prevPoint.low?this.prevPoint.high:this.prevPoint.low,t,r,u),c+=this.GetStepLineDirection(s,g,n.step,v,n,!1),this.borderDirection+=this.GetStepLineDirection(s,g,n.step,v,n,!0)):"Gap"===n.emptyPointSettings.mode&&(c+=v+" "+(s=l(o.xValue,o.high>o.low?o.high:o.low,t,r,u)).x+" "+s.y+" ",this.borderDirection+=v+" "+s.x+" "+s.y+" "),d=!1,v=" L",this.prevPoint=o,(a+1<y.length&&!y[a+1].visible||a===y.length-1)&&(v="M",c=(c=this.closeRangeStepAreaPath(y,o,n,c,a,t,r,u)).concat(" Z "),d=!0,this.prevPoint=null,nt=null)):(!1===d&&0!==a&&(c=this.closeRangeStepAreaPath(y,o,n,c,a,t,r,u),d=!0),v="M",o.symbolLocations=[]);ft=new i.PathOption(n.chart.element.id+"_Series_"+n.index,n.interior,0,"transparent",n.opacity,n.dashArray,c);this[f?"addPath":"appendLinePath"](ft,n,"");0!==n.border.width&&(this[f?"addPath":"appendLinePath"](new i.PathOption(n.chart.element.id+"_Series_border_"+n.index,"transparent",et,ot,1,n.border.dashArray,this.borderDirection),n,""),this.borderDirection="");e||this.renderMarker(n)},t.prototype.closeRangeStepAreaPath=function(n,t,i,r,u,f,e,o){for(var h,c,a,v,y,s=u;s>=0&&n[s].visible;s--)(t=n[s],a=Math.min(t.low,t.high),v=Math.max(t.low,t.high),e.isAxisInverse)&&(y=a,a=v,v=y),null!=this.prevPoint&&(h=l(t.xValue,t.low<t.high?t.low:t.high,f,e,o),c=l(this.prevPoint.xValue,this.prevPoint.low<this.prevPoint.high?this.prevPoint.low:this.prevPoint.high,f,e,o),r+=this.GetStepLineDirection(h,c,"Right"===i.step?"Left":"Left"===i.step?"Right":i.step,"L",i,!1),this.borderDirection+=s===u?this.GetStepLineDirection(h,c,"Right"===i.step?"Left":"Left"===i.step?"Right":i.step,"M",i,!0):this.GetStepLineDirection(h,c,"Right"===i.step?"Left":"Left"===i.step?"Right":i.step,"L",i,!0)),this.prevPoint=t;return r},t.prototype.updateDirection=function(n,t){this.render(n,n.xAxis,n.yAxis,n.chart.requireInvertedAxis,!1,!0);for(var r=function(i){n.marker&&n.marker.visible&&n.points[t[i]].symbolLocations.map(function(r,u){n.chart.markerRender.renderMarker(n,n.points[t[i]],r,u,!0)});n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},i=0;i<t.length;i++)r(i)},t.prototype.addPath=function(n,t,i){var f=this.appendPathElement(n,t,i),e;if(""!==f.previousDirection&&""!==n.d){var r=f.previousDirection.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),u=n.d.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),o=Math.max(r.length,u.length),s=Math.min(r.length,u.length);if(r.length<u.length){for(e=r.length;e<u.length;e++)u.length!==r.length&&(r.splice(Math.floor(r.length/2)-1,0,r[Math.floor(r.length/2)-1],r[Math.floor(r.length/2)-1]),r.splice(Math.floor(r.length/2)+2,0,r[Math.floor(r.length/2)+2],r[Math.floor(r.length/2)+2]));bt(f.element,n.d,t.chart.redraw,r.join(" "),this.chart.duration)}else if(r.length>u.length){for(e=s;e<o;e++)u.length!==r.length&&(u.splice(2,0,u[2]),u.splice(u.length-3,0,u[u.length-3]));bt(f.element,u.join(""),t.chart.redraw,f.previousDirection,this.chart.duration,n.d)}else bt(f.element,n.d,t.chart.redraw,f.previousDirection,this.chart.duration)}},t.prototype.doAnimation=function(n){var t=n.animation;this.doLinearAnimation(n,t)},t.prototype.getModuleName=function(){return"RangeStepAreaSeries"},t.prototype.destroy=function(){},t}(hu),vet=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yet=function(n){function u(){var t=null!==n&&n.apply(this,arguments)||this;return t.cumulativeSums=[],t}return vet(u,n),u.prototype.render=function(n){for(var u,w,tt,e,y,v,ut,h,ft,et,c,ot=this.getSideBySideInfo(n),lt=Math.max(n.yAxis.visibleRange.min,0),d=0,l="",p=0,f=null,s=n.chart.requireInvertedAxis,st=0,g=n.chart.redraw,nt=0,ht=n.points;nt<ht.length;nt++)if(u=ht[nt],u.symbolLocations=[],u.regions=[],u.visible&&ni(n.points[u.index-1],u,n.points[u.index+1],n)){if(w=this.isIntermediateSum(n,u.index),tt=this.isSumIndex(n,u.index),p+=w||!0===tt?0:u.yValue,et=!0===w?st:null===d||tt?lt:d,h=this.getRectangle(u.xValue+ot.start,p,u.xValue+ot.end,et,n),w&&(st=p),d=p,(ft=this.triggerPointRenderEvent(n,u)).cancel||(this.updateSymbolLocation(u,h,n),this.drawRectangle(n,u,h,ft)),e=u.regions[0],null!==f){var at=s?f.x:f.y,ct=s?e.x:e.y,it=void 0,b=void 0,rt=e.y,k=e.x,a=n.points[u.index-1==-1?1:u.index-1];(0===u.yValue?(it=s?f.x+f.width:f.y+f.height,b=s?u.symbolLocations[0].x:u.symbolLocations[0].y):(it=s?0===a.yValue?a.symbolLocations[0].x:f.x+f.width:0===a.yValue?a.symbolLocations[0].y:f.y+f.height,b=s?e.x+e.width:e.y+e.height),Math.round(at)===Math.round(ct)||Math.round(it)===Math.round(ct)?(c=s?0===e.x&&0===f.x?b:e.x:e.y,c=0===u.yValue?s?u.symbolLocations[0].x:u.symbolLocations[0].y:c):c=b,s)?(0===a.yValue&&(f.y=f.y+f.height/2+h.height/2-f.height),0===u.yValue&&(rt=e.y+e.height/2-h.height/2),l=l.concat("M "+c+" "+(n.xAxis.isInversed?f.y+f.height:f.y)+" L "+c+" "+(n.xAxis.isInversed?rt:rt+e.height)+" ")):(y=f.x,0===a.yValue&&(y=y+f.width/2+h.width/2-f.width,k=e.x+e.width/2+h.width/2-e.width),0===u.yValue&&(k=e.x+e.width/2-h.width/2),l=l.concat("M "+(n.xAxis.isInversed?y:y+f.width)+" "+c+" L "+(n.xAxis.isInversed?k+e.width:k)+" "+c+" "))}f=u.regions[0]}v=new i.PathOption(n.chart.element.id+"_Series_"+n.index+"_Connector_","none",n.connector.width,n.connector.color,n.opacity,n.connector.dashArray,l);g&&r(v.id)&&(l=r(v.id).getAttribute("d"));ut=ci(g,v.id,v,n.chart.renderer)||n.chart.renderer.drawPath(v,new Int32Array([n.clipRect.x,n.clipRect.y]));ut.style.visibility=n.chart.enableCanvas?null:(n.animation.enable&&"Disable"!==t.animationMode||"Enable"===t.animationMode)&&n.chart.animateSeries?"hidden":"visible";o(n.chart.enableCanvas,n.seriesElement,ut,g,!0,null,null,null,l,null,null,null,n.chart.duration);this.renderMarker(n)},u.prototype.updateDirection=function(n,t){var i,u,r;if(this.render(n),n.marker.visible&&o(n.chart.enableCanvas,n.chart.seriesElements,n.symbolElement,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule)for(i=0;i<t.length;i++)for(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",u=n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel),r=0;r<u.length;r++)n.chart.dataLabelModule.doDataLabelAnimation(n,u[r])},u.prototype.isIntermediateSum=function(n,t){return void 0!==n.intermediateSumIndexes&&-1!==n.intermediateSumIndexes.indexOf(t)},u.prototype.isSumIndex=function(n,t){return void 0!==n.sumIndexes&&-1!==n.sumIndexes.indexOf(t)},u.prototype.triggerPointRenderEvent=function(n,t){var i,r=this.isIntermediateSum(n,t.index),u=this.isSumIndex(n,t.index);return i=r||u?n.summaryFillColor:t.y<0?n.negativeFillColor:n.interior,this.triggerEvent(n,t,i,{color:n.border.color,width:n.border.width})},u.prototype.processInternalData=function(n,i){for(var s,c,u,h,f=n,l=0,r=!t.isNullOrUndefined(i.intermediateSumIndexes)&&i.intermediateSumIndexes.length>0?i.intermediateSumIndexes.sort(function(n,t){return n-t}):i.intermediateSumIndexes,o=!t.isNullOrUndefined(i.sumIndexes)&&i.sumIndexes.length>0?i.sumIndexes.sort(function(n,t){return n-t}):i.sumIndexes,a=0,e=0;e<f.length;e++)a+=void 0!==f[e][i.yName]?f[e][i.yName]:0,this.cumulativeSums.push(a);if(void 0!==r&&r.length>0)for(e=0;e<r.length;e++)for(s=0;s<f.length;s++)s===r[e]&&(h=nc(f,0===e?-1:r[e-1],r[e],null,i),f[s][i.yName]=h);if(void 0!==o&&o.length>0)for(c=0,u=0;u<o.length;u++)for(s=0;s<f.length;s++)s===o[u]&&(void 0!==r&&r.length>c&&r[u]!==o[u]&&r[u]<o[u]?(h=nc(f,r.length<=1?r[0]-1:r[u]-1,o[u],o,i),c+=1):h=nc(f,0===u?-1:o[u-1],o[u],null,i),l+=h,f[s][i.yName]=l);return f},u.prototype.doAnimation=function(n){this.animate(n)},u.prototype.getModuleName=function(){return"WaterfallSeries"},u.prototype.destroy=function(){},u}(ku),pet=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wet=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.sideBySideInfo=[],t}return pet(t,n),t.prototype.render=function(n){var t,i,r;for(this.sideBySideInfo[n.index]=this.getSideBySideInfo(n),t=0,i=n.points;t<i.length;t++)r=i[t],this.renderPoint(n,r,this.sideBySideInfo[n.index])},t.prototype.renderPoint=function(n,t,i){var r,u;(t.symbolLocations=[],t.regions=[],t.visible&&ni(n.points[t.index-1],t,n.points[t.index+1],n))&&(r=this.getRectangle(t.xValue+i.median,t.high,t.xValue+i.median,t.low,n),u=this.triggerPointRenderEvent(n,t),u.cancel||(n.chart.requireInvertedAxis?(r.height=u.border.width,r.y=r.y-r.height/2):(r.width=u.border.width,r.x=r.x-r.width/2),u.border.width=0,this.updateSymbolLocation(t,r,n),this.drawRectangle(n,t,r,u)))},t.prototype.updateDirection=function(n,t){for(var i=0;i<t.length;i++)this.renderPoint(n,n.points[t[i]],this.sideBySideInfo[n.index]),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},t.prototype.triggerPointRenderEvent=function(t,i){var r={color:t.fill,width:Math.max(t.border.width,2)};return n.prototype.triggerEvent.call(this,t,i,t.interior,r)},t.prototype.getModuleName=function(){return"HiloSeries"},t.prototype.doAnimation=function(n){this.animate(n)},t.prototype.destroy=function(){},t}(ku),bet=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ket=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.sideBySideInfo=[],t}return bet(t,n),t.prototype.render=function(n){var r;this.sideBySideInfo[n.index]=this.getSideBySideInfo(n);for(var u=Math.max(n.border.width,2),t=0,i=n.points;t<i.length;t++)r=i[t],this.renderPoint(n,r,this.sideBySideInfo[n.index],u)},t.prototype.renderPoint=function(n,t,i,r){var o,u,f,e,s,h;(t.symbolLocations=[],t.regions=[],t.visible&&ni(n.points[t.index-1],t,n.points[t.index+1],n))&&(o=this.getRectangle(t.xValue+i.start,Math.max(t.high,t.low),t.xValue+i.end,Math.min(t.high,t.low),n),t.regions.push(this.getRectangle(t.xValue+i.median,Math.max(t.high,t.low),t.xValue+i.median,Math.min(t.high,t.low),n)),this.updateTickRegion(!n.chart.requireInvertedAxis,t.regions[0],r),t.regions.push(this.getRectangle(t.xValue+i.start,Math.max(t.open,t.close),t.xValue+i.median,Math.max(t.open,t.close),n)),t.regions.push(this.getRectangle(t.xValue+i.median,Math.min(t.open,t.close),t.xValue+i.end,Math.min(t.open,t.close),n)),e=this.triggerPointRenderEvent(n,t),e.cancel||(this.updateSymbolLocation(t,t.regions[0],n),u=t.open>t.close?1:2,f=t.open>t.close?2:1,s={x:t.regions[u].x,y:t.regions[u].y},h={x:t.regions[f].x,y:t.regions[f].y},this.drawHiloOpenClosePath(n,t,s,h,o,e)),this.updateTickRegion(n.chart.requireInvertedAxis,t.regions[1],r),this.updateTickRegion(n.chart.requireInvertedAxis,t.regions[2],r))},t.prototype.updateDirection=function(n,t){for(var r=Math.max(n.border.width,2),i=0;i<t.length;i++)this.renderPoint(n,n.points[t[i]],this.sideBySideInfo[n.index],r),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},t.prototype.updateTickRegion=function(n,t,i){n?(t.x-=i/2,t.width=i):(t.y-=i/2,t.height=i)},t.prototype.triggerPointRenderEvent=function(n,t){var i=t.open<=t.close?n.bearFillColor||n.chart.themeStyle.bearFillColor:n.bullFillColor||n.chart.themeStyle.bullFillColor,r={color:n.border.color,width:Math.max(n.border.width,1)};return this.triggerEvent(n,t,i,r)},t.prototype.drawHiloOpenClosePath=function(n,t,u,f,e,o){var s,c,h;n.chart.requireInvertedAxis?(s="M "+e.x+" "+(e.y+e.height/2)+" L "+(e.x+e.width)+" "+(e.y+e.height/2)+" ",s+="M "+u.x+" "+(e.y+e.height/2)+" L "+u.x+" "+(e.y+e.height)+" ",s+="M "+f.x+" "+(e.y+e.height/2)+" L "+f.x+" "+e.y+" "):(s="M "+(e.x+e.width/2)+" "+(e.y+e.height)+" L "+(e.x+e.width/2)+" "+e.y+" ",s+="M "+e.x+" "+u.y+" L "+(e.x+e.width/2+o.border.width/2)+" "+u.y+" ",s+="M "+(e.x+e.width/2-o.border.width/2)+" "+f.y+" L "+(e.x+e.width)+" "+f.y+" ");c=new i.PathOption(n.chart.element.id+"_Series_"+n.index+"_Point_"+(null!==n.removedPointIndex&&n.removedPointIndex<=t.index?t.index+1:t.index),o.fill,o.border.width,o.fill,n.opacity,n.dashArray,s);kf(r(c.id),s,n.chart.redraw,null,n.chart.duration);h=n.chart.renderer.drawPath(c,new Int32Array([n.clipRect.x,n.clipRect.y]));null!==n.removedPointIndex&&n.removedPointIndex<=t.index&&(h.id=n.chart.element.id+"_Series_"+n.index+"_Point_"+t.index);h.setAttribute("role","img");h.setAttribute("aria-label",n.accessibility.accessibilityDescriptionFormat?n.formatAccessibilityDescription(t,n):t.x.toString()+":"+t.high.toString()+":"+t.low.toString()+":"+t.close.toString()+":"+t.open.toString());n.chart.enableCanvas||n.seriesElement.appendChild(h)},t.prototype.getModuleName=function(){return"HiloOpenCloseSeries"},t.prototype.doAnimation=function(n){this.animate(n)},t.prototype.destroy=function(){},t}(ku),det=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fk=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.borderDirection="",t}return det(t,n),t.prototype.render=function(n,t,r,u,f,e){for(var w,b,d,s,v,k,g,nt,o,a="",y="M",p=void 0,tt=n.border.width?n.border.width:0,it=n.border.color?n.border.color:n.interior,h=this.enableComplexProperty(n),c=0,rt=h.length;c<rt;c++)(o=h[c]).symbolLocations=[],o.regions=[],w=Math.min(o.low,o.high),b=Math.max(o.low,o.high),r.isAxisInverse&&(d=w,w=b,b=d),s=l(o.xValue,w,t,r,u),v=l(o.xValue,b,t,r,u),o.symbolLocations.push(v),o.symbolLocations.push(s),k=new i.Rect(Math.min(s.x,v.x),Math.min(s.y,v.y),Math.max(Math.abs(v.x-s.x),n.marker.width),Math.max(Math.abs(v.y-s.y),n.marker.width)),u?k.y-=n.marker.width/2:k.x-=n.marker.width/2,o.regions.push(k),o.visible&&ni(h[o.index-1],o,h[o.index+1],n)?(a=a.concat(y+" "+s.x+" "+s.y+" "),this.borderDirection+=y+" "+s.x+" "+s.y+" ",p=!1,(c+1<h.length&&!h[c+1].visible||c===h.length-1)&&(y="M",a=(a=this.closeRangeAreaPath(h,o,n,a,c)).concat(" Z"),p=!0),y="L"):(!1===p&&0!==c&&(a=this.closeRangeAreaPath(h,o,n,a,c),p=!0),y="M",o.symbolLocations=[]);g="Indicator"===n.category?n.chart.element.id+"_Indicator_"+n.index+"_"+n.name:n.chart.element.id+"_Series_"+n.index;nt=new i.PathOption(g,n.interior,0,"transparent",n.opacity,n.dashArray,a);this[f?"addPath":"appendLinePath"](nt,n,"");0!==n.border.width&&(this[f?"addPath":"appendLinePath"](new i.PathOption(n.chart.element.id+"_Series_border_"+n.index,"transparent",tt,it,1,n.border.dashArray,this.borderDirection),n,""),this.borderDirection="");e||this.renderMarker(n)},t.prototype.closeRangeAreaPath=function(n,t,i,r,u){for(var f=u;f>=0&&n[f].visible&&n[f].symbolLocations[0];f--)r+="L "+(t=n[f]).symbolLocations[0].x+" "+t.symbolLocations[0].y+" ",this.borderDirection+=(f===u?"M":"L")+" "+t.symbolLocations[0].x+" "+t.symbolLocations[0].y+" ";return r},t.prototype.updateDirection=function(n,t){this.render(n,n.xAxis,n.yAxis,n.chart.requireInvertedAxis,!1,!0);for(var r=function(i){n.marker&&n.marker.visible&&n.points[t[i]].symbolLocations.map(function(r,u){n.chart.markerRender.renderMarker(n,n.points[t[i]],r,u,!0)});n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},i=0;i<t.length;i++)r(i)},t.prototype.addPath=function(n,t,i){var f=this.appendPathElement(n,t,i),e;if(""!==f.previousDirection&&""!==n.d){var r=f.previousDirection.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),u=n.d.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),o=Math.max(r.length,u.length),s=Math.min(r.length,u.length);if(r.length<u.length){for(e=r.length;e<u.length;e++)u.length!==r.length&&r.splice((r.length-1)/2,0,r.slice(0,(r.length-1)/2).pop(),r.slice(0,(r.length-1)/2+1).pop());bt(f.element,n.d,t.chart.redraw,r.join(" "),this.chart.duration)}else if(r.length>u.length){for(e=s;e<o;e++)u.length!==r.length&&(u.splice(1,0,u[0]),u.splice(u.length-2,0,u[u.length-2]));bt(f.element,u.join(""),t.chart.redraw,f.previousDirection,this.chart.duration,n.d)}else bt(f.element,n.d,t.chart.redraw,f.previousDirection,this.chart.duration)}},t.prototype.doAnimation=function(n){var t=n.animation;this.doLinearAnimation(n,t)},t.prototype.getModuleName=function(){return"RangeAreaSeries"},t.prototype.destroy=function(){},t}(hu),get=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kv=function(n){function i(t){var i=n.call(this,t)||this;return i.splinePoints=[],i.lowSplinePoints=[],i}return get(i,n),i.prototype.findSplinePoint=function(n){for(var u,a,e,t=[],v=0,c=!1,f,s,l,i,r,y,h=this.filterEmptyPoints(n),o=0;o<h.length;o++)null!==(e=h[o]).x&&""!==e.x&&(e.index=v,v++,t.push(e));if(f=!1,this.splinePoints=this.findSplineCoefficients(t,n,f),"SplineRangeArea"===n.type&&(f=!f,this.lowSplinePoints=this.findSplineCoefficients(t,n,f)),t.length>1){for(n.drawPoints=[],n.lowDrawPoints=[],s=0,l=t;s<l.length;s++)i=l[s],(c=c||i.yValue<0,0!==i.index)&&(r=this.getPreviousIndex(t,i.index-1,n),"SplineRangeArea"===n.type&&(t[r].yValue=t[r].high>t[r].low?t[r].high:t[r].low,i.yValue=i.high>i.low?i.high:i.low),u=this.getControlPoints(t[r],i,this.splinePoints[r],this.splinePoints[i.index],n),n.drawPoints.push(u),"SplineRangeArea"===n.type&&(t[r].yValue=t[r].low<t[r].high?t[r].low:t[r].high,i.yValue=i.low<i.high?i.low:i.high,a=this.getControlPoints(t[r],i,this.lowSplinePoints[r],this.lowSplinePoints[i.index],n),n.lowDrawPoints.push(a)),y=n.yMax-n.yMin,i.yValue&&u.controlPoint1.y&&u.controlPoint2.y&&y>1&&(n.yMin=Math.min(n.yMin,i.yValue,u.controlPoint1.y,u.controlPoint2.y),n.yMax=Math.ceil(Math.max(n.yMax,i.yValue,u.controlPoint1.y,u.controlPoint2.y)),n.yMin="Logarithmic"!==n.yAxis.valueType?Math.floor(n.yMin):n.yMin));!c&&n.yMin<0&&(n.yMin=0);"PolarRadar"===n.chart.chartAreaType&&n.isClosed&&(u=this.getControlPoints({xValue:t[t.length-1].xValue,yValue:t[t.length-1].yValue},{xValue:t[t.length-1].xValue+1,yValue:t[0].yValue},this.splinePoints[0],this.splinePoints[t[t.length-1].index],n),n.drawPoints.push(u))}},i.prototype.getPreviousIndex=function(n,i,r){if("Drop"!==r.emptyPointSettings.mode)return i;for(;t.isNullOrUndefined(n[i])&&i>-1;)i-=1;return i},i.prototype.getNextIndex=function(n,i,r){if("Drop"!==r.emptyPointSettings.mode)return i;for(;t.isNullOrUndefined(n[i])&&i<n.length;)i+=1;return i},i.prototype.filterEmptyPoints=function(n,i){if("Drop"!==n.emptyPointSettings.mode&&this.isPointInRange(n.points))return i||n.points;for(var u=i||t.extend([],n.points,null,!0),r=0;r<u.length;r++)u[r].index=r,u[r].isEmpty&&(u[r].symbolLocations=[],u[r].regions=[],u.splice(r,1),r--);return u},i.prototype.isPointInRange=function(n){for(var t=0,i=n;t<i.length;t++)if(!i[t].isPointInRange)return!1;return!0},i.prototype.findSplineCoefficients=function(n,t,i){var r=[],u=t.cardinalSplineTension?t.cardinalSplineTension:.5;switch(u<0?u=0:u>1&&(u=1),t.splineType){case"Monotonic":r=this.monotonicSplineCoefficients(n,t,i);break;case"Cardinal":r=this.cardinalSplineCofficients(n,t);break;default:"Clamped"===t.splineType?r=this.clampedSplineCofficients(n,t,i):(r[0]=[][0]=0,r[n.length-1]=0);r=this.naturalSplineCoefficients(n,t,i)}return r},i.prototype.monotonicSplineCoefficients=function(n,t,i){for(var h,u,s,c=n.length,o=[],e=[],l=[],f=[],r=0;r<c-1;r++)"SplineRangeArea"===t.type&&(i||(n[r+1].yValue=n[r+1].high>n[r+1].low?n[r+1].high:n[r+1].low,n[r].yValue=n[r].high>n[r].low?n[r].high:n[r].low),i&&(n[r+1].yValue=n[r+1].low<n[r+1].high?n[r+1].low:n[r+1].high,n[r].yValue=n[r].low<n[r].high?n[r].low:n[r].high)),e[r]=n[r+1].xValue-n[r].xValue,l[r]=n[r+1].yValue-n[r].yValue,f[r]=l[r]/e[r];for(h=f.length,o[0]=f[0],o[c-1]=f[h-1],u=0;u<e.length;u++)h>u+1&&(f[u]*f[u+1]<=0?o[u+1]=0:(s=e[u]+e[u+1],o[u+1]=3*s/((s+e[u+1])/f[u]+(s+e[u])/f[u+1])));return o},i.prototype.cardinalSplineCofficients=function(n,t){for(var u=n.length,f=[],r=t.cardinalSplineTension?t.cardinalSplineTension:.5,r=r<0?0:r>1?1:r,i=0;i<u;i++)f[i]=0===i?u>2?r*(n[i+2].xValue-n[i].xValue):0:i===u-1?u>2?r*(n[u-1].xValue-n[u-3].xValue):0:r*(n[i+1].xValue-n[i-1].xValue);return f},i.prototype.clampedSplineCofficients=function(n,t,i){for(var e=n.length,r=[],u=[],f=0;f<e-1;f++)"SplineRangeArea"===t.type&&(i||(n[1].yValue=n[1].high>n[1].low?n[1].high:n[1].low,n[0].yValue=n[0].high>n[0].low?n[0].high:n[0].low,n[n.length-1].yValue=n[n.length-1].high>n[n.length-1].low?n[n.length-1].high:n[n.length-1].low,n[n.length-2].yValue=n[n.length-2].high>n[n.length-2].low?n[n.length-2].high:n[n.length-2].low),i&&(n[1].yValue=n[1].low<n[1].high?n[1].low:n[1].high,n[0].yValue=n[0].low<n[0].high?n[0].low:n[0].high,n[n.length-1].yValue=n[n.length-1].low<n[n.length-1].high?n[n.length-1].low:n[n.length-1].high,n[n.length-2].yValue=n[n.length-2].low<n[n.length-2].high?n[n.length-2].low:n[n.length-2].high)),r[0]=3*(n[1].yValue-n[0].yValue)/(n[1].xValue-n[0].xValue)-3,u[0]=.5,r[n.length-1]=3*(n[n.length-1].yValue-n[n.length-2].yValue)/(n[n.length-1].xValue-n[n.length-2].xValue),r[0]=u[0]=Math.abs(r[0])===1/0?0:r[0],r[n.length-1]=u[n.length-1]=Math.abs(r[n.length-1])===1/0?0:r[n.length-1];return r},i.prototype.naturalSplineCoefficients=function(n,t,i){var l,a,e,h,s,v=n.length,u=[],o=[],r,c,f;for(u[0]=o[0]=0,u[n.length-1]=0,r=1;r<v-1;r++)("SplineRangeArea"===t.type&&(i||(n[r+1].yValue=n[r+1].low>n[r+1].high?n[r+1].low:n[r+1].high,n[r].yValue=n[r].low>n[r].high?n[r].low:n[r].high,n[r-1].yValue=n[r-1].low>n[r-1].high?n[r-1].low:n[r-1].high),i&&(n[r+1].yValue=n[r+1].high<n[r+1].low?n[r+1].high:n[r+1].low,n[r].yValue=n[r].high<n[r].low?n[r].high:n[r].low,n[r-1].yValue=n[r-1].high<n[r-1].low?n[r-1].high:n[r-1].low)),e=n[r].xValue-n[r-1].xValue,h=n[r+1].xValue-n[r-1].xValue,s=n[r+1].xValue-n[r].xValue,l=n[r+1].yValue-n[r].yValue||null,a=n[r].yValue-n[r-1].yValue||null,0===e||0===h||0===s)?(u[r]=0,o[r]=0):(c=1/(e*u[r-1]+2*h),u[r]=-c*s,o[r]=c*(6*(l/s-a/e)-e*o[r-1]));for(f=v-2;f>=0;f--)u[f]=u[f]*u[f+1]+o[f];return u},i.prototype.getControlPoints=function(n,t,i,r,u){var f,e,a,w=i,b=r,o=n.xValue,v=n.yValue,s=t.xValue,y=t.yValue,l;switch(u.splineType){case"Cardinal":"DateTime"===u.xAxis.valueType&&(w=i/this.dateTimeInterval(u),b=r/this.dateTimeInterval(u));f=new h(o+i/3,v+w/3);e=new h(s-r/3,y-b/3);a=new hc(f,e);break;case"Monotonic":l=(s-o)/3;f=new h(o+l,v+i*l);e=new h(s-l,y-r*l);a=new hc(f,e);break;default:var c=1/3,p=s-o,k=c*(v+2*y-c*(p*=p)*(.5*i+r));f=new h((2*o+s)*c,c*(2*v+y-c*p*(i+.5*r)));e=new h((o+2*s)*c,k);a=new hc(f,e)}return a},i.prototype.dateTimeInterval=function(n){var t=n.xAxis.actualIntervalType;return"Years"===t?31536e6:"Months"===t?2592e6:"Days"===t?864e5:"Hours"===t?36e5:"Minutes"===t?6e4:"Seconds"===t?1e3:2592e6},i.prototype.doAnimation=function(n){var t=n.animation;this.doLinearAnimation(n,t)},i}(hu),not=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ek=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.borderDirection="",t}return not(t,n),t.prototype.render=function(n,t,r,u,f,e){for(var o,y,p,w,it,rt,b,ot,a="",k=void 0,ft=null,et=[],st=0,vt=n.border.width?n.border.width:0,yt=n.border.color?n.border.color:n.interior,d="",v,ht,g,nt,ct,h,c,tt,lt,at,ut=this.filterEmptyPoints(n),s=0;s<ut.length;s++)null!==(o=ut[s]).x&&""!==o.x&&(o.index=st,st++,et.push(o));for(v=this.enableComplexProperty(n),ht=v.length,s=0;s<ht;s++)(o=v[s]).regions=[],o.symbolLocations=[],ot=this.getNextIndex(et,o.index-1,n),b=this.getPreviousIndex(et,o.index-1,n),g=Math.min(o.low,o.high),nt=Math.max(o.low,o.high),r.isAxisInverse&&(ct=g,g=nt,nt=ct),h=l(o.xValue,g,t,r,u),c=l(o.xValue,nt,t,r,u),o.symbolLocations.push(c),o.symbolLocations.push(h),tt=new i.Rect(Math.min(h.x,c.x),Math.min(h.y,c.y),Math.max(Math.abs(c.x-h.x),n.marker.width),Math.max(Math.abs(c.y-h.y),n.marker.width)),u?tt.y-=n.marker.width/2:tt.x-=n.marker.width/2,o.regions.push(tt),o.visible&&ni(v[b],o,v[ot],n)?(ft?(it=n.drawPoints[b].controlPoint1,rt=n.drawPoints[b].controlPoint2,y=l(o.xValue,o.high>o.low?o.high:o.low,t,r,u),p=l(it.x,it.y,t,r,u),w=l(rt.x,rt.y,t,r,u),a=a.concat("C "+p.x+" "+p.y+" "+w.x+" "+w.y+" "+y.x+" "+y.y+" "),this.borderDirection+="C "+p.x+" "+p.y+" "+w.x+" "+w.y+" "+y.x+" "+y.y+" "):(r.isAxisInverse?(a=a.concat("M "+c.x+" "+c.y+" L "+h.x+" "+h.y+" "),this.borderDirection+="M "+c.x+" "+c.y+" ",d="L "+h.x+" "+h.y):(a=a.concat("M "+h.x+" "+h.y+" L "+c.x+" "+c.y+" "),this.borderDirection+="M "+c.x+" "+c.y+" ",d="L "+h.x+" "+h.y),k=!1),(s+1<v.length&&!v[s+1].visible||s===v.length-1)&&(a=this.closeSplineRangeAreaPath(v,o,n,a,s,t,r,u),this.borderDirection+=d,d="",a=a.concat(" Z"),k=!0),ft=o):(!1===k&&0!==s&&(a=this.closeSplineRangeAreaPath(v,o,n,a,s,t,r,u),k=!0),ft=null,o.symbolLocations=[]);lt="Indicator"===n.category?n.chart.element.id+"_Indicator_"+n.index+"_"+n.name:n.chart.element.id+"_Series_"+n.index;at=new i.PathOption(lt,n.interior,0,"transparent",n.opacity,n.dashArray,a);this[f?"addPath":"appendLinePath"](at,n,"");0!==n.border.width&&(this[f?"addPath":"appendLinePath"](new i.PathOption(n.chart.element.id+"_Series_border_"+n.index,"transparent",vt,yt,1,n.border.dashArray,this.borderDirection),n,""),this.borderDirection="");e||this.renderMarker(n)},t.prototype.closeSplineRangeAreaPath=function(n,t,i,r,u,f,e,o){for(var a,h,c,b,k,p,w,g,v,y,d=null,s=u;s>0&&n[s].visible;s--)t=n[s],p=Math.min(t.low,t.high),w=Math.max(t.low,t.high),e.isAxisInverse&&(g=p,p=w,w=g),v=l(t.xValue,p,f,e,o),y=l(t.xValue,w,f,e,o),d?(b=i.lowDrawPoints[s].controlPoint1,k=i.lowDrawPoints[s].controlPoint2,a=l(t.xValue,t.low<t.high?t.low:t.high,f,e,o),h=l(b.x,b.y,f,e,o),c=l(k.x,k.y,f,e,o),isNaN(h.y)&&isNaN(c.y)||(r=r.concat("C "+c.x+" "+c.y+" "+h.x+" "+h.y+" "+a.x+" "+a.y+" "),this.borderDirection+="C "+c.x+" "+c.y+" "+h.x+" "+h.y+" "+a.x+" "+a.y+" ")):e.isAxisInverse?(r=r.concat("L "+y.x+" "+y.y+" "),this.borderDirection+="M "+y.x+" "+y.y+" "):(r=r.concat("L "+v.x+" "+v.y+" "),this.borderDirection+="M "+v.x+" "+v.y+" "),d=t;return r},t.prototype.updateDirection=function(n,t){this.render(n,n.xAxis,n.yAxis,n.chart.requireInvertedAxis,!1,!0);for(var r=function(i){n.marker&&n.marker.visible&&n.points[i].symbolLocations.map(function(r,u){n.chart.markerRender.renderMarker(n,n.points[t[i]],r,u,!0)});n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},i=0;i<t.length;i++)r(i)},t.prototype.addPath=function(n,t,i){var f=this.appendPathElement(n,t,i),e;if(""!==f.previousDirection&&""!==n.d){var r=f.previousDirection.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),u=n.d.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),o=Math.max(r.length,u.length),s=Math.min(r.length,u.length);if(r.length<u.length){for(e=r.length;e<u.length;e++)u.length!==r.length&&(r.splice(r.length/2+1,0,"C "+r[(r.length-1)/2].split(" ").slice(5,7).join(" ")+" "+r[(r.length-1)/2].split(" ").slice(5,7).join(" ")+" "+r[(r.length-1)/2].split(" ").slice(5,7).join(" ")),r.splice(r.length/2+2,0,"C "+r[r.length/2+1].split(" ").slice(1,3).join(" ")+" "+r[r.length/2+1].split(" ").slice(1,3).join(" ")+" "+r[r.length/2+1].split(" ").slice(1,3).join(" ")));bt(f.element,n.d,t.chart.redraw,r.join(" "),this.chart.duration)}else if(r.length>u.length){for(e=s;e<o;e++)u.length!==r.length&&(u.splice(2,0,"C "+u[1].split(" ").slice(-3).join(" ")+u[1].split(" ").slice(-3).join(" ")+u[1].split(" ").slice(-3).join(" ")),u.splice(u.length-1,0,"C "+u[u.length-2].split(" ").slice(-4).join(" ")+u[u.length-2].split(" ").slice(-4).join(" ")+u[u.length-2].split(" ").slice(-4).join(" ")));bt(f.element,u.join(""),t.chart.redraw,f.previousDirection,this.chart.duration,n.d)}else bt(f.element,n.d,t.chart.redraw,f.previousDirection,this.chart.duration)}},t.prototype.doAnimation=function(n){var t=n.animation;this.doLinearAnimation(n,t)},t.prototype.getModuleName=function(){return"SplineRangeAreaSeries"},t.prototype.destroy=function(){},t}(kv),tot=function(){function n(){}return n.prototype.render=function(n,t,i,r){var s,v=n.points,y=Math.max(n.chart.initialClipRect.height,n.chart.initialClipRect.width),p=y/100,h=n.maxRadius*p,c=n.minRadius*p,f=null,e,l,u,o,a,w;if(null===n.maxRadius||null===n.minRadius){for(e=0,l=n.chart.visibleSeries;e<l.length;e++)u=l[e],"Bubble"!==u.type||!0!==u.visible||null!==u.maxRadius&&null!==u.minRadius||(f=u.sizeMax>f?u.sizeMax:f);c=h=1;s=y/10*h}else f=n.sizeMax,s=h-c;for(o=0,a=v;o<a.length;o++)w=a[o],this.renderPoint(n,w,r,s,f,c,v)},n.prototype.renderPoint=function(n,t,u,f,e,s,h,c){var v,y=n.chart.redraw&&t.symbolLocations?t.symbolLocations[0]:null,a,p,w,b;(t.symbolLocations=[],t.regions=[],t.visible&&ni(h[t.index-1],t,h[t.index+1],n))&&(v=(v=null===n.maxRadius||null===n.minRadius?f*Math.abs(+t.size/e):s+f*Math.abs(+t.size/e))||s,a={cancel:!1,name:rr,series:n,point:t,fill:n.setPointColor(t,n.interior),border:n.setBorderColor(t,{width:n.border.width,color:n.border.color}),height:2*v,width:2*v},(n.chart.trigger(rr,a),a.cancel)?t.marker={visible:!1}:(t.symbolLocations.push(l(t.xValue,t.yValue,n.xAxis,n.yAxis,u)),t.color=a.fill,p=new i.PathOption(n.chart.element.id+"_Series_"+n.index+"_Point_"+t.index,a.fill,a.border.width,a.border.color,n.opacity,n.border.dashArray),c&&r(p.id)&&(w=r(p.id),y={x:+w.getAttribute("cx"),y:+w.getAttribute("cy")}),b=tr(t.symbolLocations[0],"Circle",new i.Size(a.width,a.height),n.marker.imageUrl,p,(t.x.toString(),t.yValue.toString()),n.chart.svgRenderer,n.clipRect),o(n.chart.enableCanvas,n.seriesElement,b,n.chart.redraw,!0,"cx","cy",y,null,!1,!1,null,n.chart.duration,!0),t.regions.push(new i.Rect(t.symbolLocations[0].x-v,t.symbolLocations[0].y-v,2*v,2*v)),t.marker={border:a.border,fill:a.fill,height:a.height,visible:!0,shape:"Circle",width:a.width},n.chart.enableCanvas&&n.chart.markerRender.render(n),y=n.chart.redraw&&!y?t.symbolLocations[0]:y,n.chart.redraw&&ev(b,n.chart.duration?n.chart.duration:300,y,t.symbolLocations[0],"cx","cy")))},n.prototype.updateDirection=function(n,t,i){var o,v=n.points,l=Math.max(n.chart.initialClipRect.height,n.chart.initialClipRect.width),a=l/100,s=n.maxRadius*a,h=n.minRadius*a,u=null,e,c,r,f;if(null===n.maxRadius||null===n.minRadius){for(e=0,c=n.chart.visibleSeries;e<c.length;e++)r=c[e],"Bubble"!==r.type||!0!==r.visible||null!==r.maxRadius&&null!==r.minRadius||(u=r.sizeMax>u?r.sizeMax:u);h=s=1;o=l/10*s}else u=n.sizeMax,o=s-h;for(f=0;f<t.length;f++)this.renderPoint(n,n.points[t[f]],i,o,u,h,v,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[f]],null,n.marker.dataLabel))},n.prototype.destroy=function(){},n.prototype.getModuleName=function(){return"BubbleSeries"},n.prototype.doAnimation=function(n){for(var t,f=n.animation.duration,e=n.animation.delay,o=n.seriesElement.childNodes,r=1,i=0,u=n.points;i<u.length;i++)t=u[i],t.symbolLocations.length&&(pu(o[r],e,f,n,t.index,t.symbolLocations[0],!1),r++)},n}(),iot=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rot=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return iot(t,n),t.prototype.render=function(n,t,r,u,f,e){var s,y,c=null,h="",a="M",g="TrendLine"===n.category?n.points:this.enableComplexProperty(n),o,v,k,d;s=this.filterEmptyPoints(n,g);for(var p="PolarRadar"===n.chart.chartAreaType?bf:l,w=0,b=s;w<b.length;w++)o=b[w],1===o.index&&(h=""),y=this.getPreviousIndex(s,o.index-1,n),o.symbolLocations=[],o.regions=[],o.visible?(ni(s[y],o,s[this.getNextIndex(s,o.index-1,n)],n)&&(null!==c&&(h=this.getSplineDirection(n.drawPoints[y],c,o,t,r,u,n,a,p,h),a="L"),this.storePointLocation(o,n,u,p),""===h&&1===s.length&&(h="M "+o.symbolLocations[0].x+" "+o.symbolLocations[0].y),null===c&&""!==h&&(o.index===s.length-1||s[o.index+1]&&!s[o.index+1].visible)&&(h+="M "+o.symbolLocations[0].x+" "+o.symbolLocations[0].y+" ")),c=o):(a="M",c=null,o.symbolLocations=[]);s.length>0&&n.drawPoints.length>0&&"PolarRadar"===n.chart.chartAreaType&&n.isClosed&&(v=this.getFirstLastVisiblePoint(s),h=this.getSplineDirection(n.drawPoints[n.drawPoints.length-1],v.last,{xValue:v.first.xValue,yValue:v.first.yValue},t,r,u,n,a,p,h),a="L");k="TrendLine"===n.category?n.chart.element.id+"_Series_"+n.sourceIndex+"_TrendLine_"+n.index:n.chart.element.id+"_Series_"+n.index;d=new i.PathOption(k,"transparent",n.width,n.interior,n.opacity,n.dashArray,h);this[f?"addPath":"appendLinePath"](d,n,"");e||this.renderMarker(n)},t.prototype.getSplineDirection=function(n,t,i,r,u,f,e,o,s,h){var c=n.controlPoint1,l=n.controlPoint2,a=s(t.xValue,t.yValue,r,u,f,e),v=s(i.xValue,i.yValue,r,u,f,e),y=s(c.x,c.y,r,u,f,e),p=s(l.x,l.y,r,u,f,e);return h.concat(o+" "+a.x+" "+a.y+" C "+y.x+" "+y.y+" "+p.x+" "+p.y+" "+v.x+" "+v.y+" ")},t.prototype.updateDirection=function(n,t){this.render(n,n.xAxis,n.yAxis,n.chart.requireInvertedAxis,!1,!0);for(var i=0;i<t.length;i++)n.marker&&n.marker.visible&&n.chart.markerRender.renderMarker(n,n.points[t[i]],n.points[t[i]].symbolLocations[0],null,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},t.prototype.addPath=function(n,t,i){var f=this.appendPathElement(n,t,i),e,o,s,h,c,l;if(""!==f.previousDirection&&""!==n.d){var u=f.previousDirection.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),r=n.d.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),a=Math.max(u.length,r.length),v=Math.min(u.length,r.length);if(0===t.removedPointIndex&&u.length>r.length&&u[2]&&0===u[2].indexOf("M")&&(u.splice(0,u.length-r.length),f.previousDirection=u.join("")),u.length<r.length){for(e=u.length;e<r.length;e++)r.length!==u.length&&(r.length===u.length+1&&0===r[r.length-1].indexOf("M")?u.push(r[r.length-1]):0===u[u.length-1].indexOf("C")?u.push("L "+u[u.length-1].split(" ").slice(-3).join(" ")):0===u[u.length-1].indexOf("L")?(o=u[u.length-1].split(" ").slice(-3),u.push("C "+o.join(" ")+o.join(" ")+o.join(" "))):(s=u[u.length-1].replace("M",""),u.push("C"+s+s+s)));bt(f.element,n.d,t.chart.redraw,u.join(" "),this.chart.duration,"",!0)}else if(u.length>r.length){for(e=v;e<a;e++)t.removedPointIndex===t.points.length&&r.length!==u.length?0===r[r.length-1].indexOf("C")?r.push("L "+r[r.length-1].split(" ").slice(-3).join(" ")):0===r[r.length-1].indexOf("L")?(h=r[r.length-1].split(" ").slice(-3),r.push("C "+h.join(" ")+h.join(" ")+h.join(" "))):(c=r[r.length-1].replace("M",""),r.push("C"+c+c+c)):1===r.length?(l=r[r.length-1].replace("M",""),r.push("C"+l+l+l)):r.length!==u.length&&r.splice(1,0,"C "+r[0].split(" ").slice(-3).join(" ")+r[0].split(" ").slice(-3).join(" ")+r[0].split(" ").slice(-3).join(" "),r[0].replace("M","L"));bt(f.element,r.join(""),t.chart.redraw,f.previousDirection,this.chart.duration,n.d,!0)}else bt(f.element,n.d,t.chart.redraw,f.previousDirection,this.chart.duration,"",!0)}},t.prototype.getModuleName=function(){return"SplineSeries"},t.prototype.destroy=function(){},t}(kv),uot=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fot=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return uot(r,n),r.prototype.render=function(t){n.prototype.render.call(this,t);t.showNormalDistribution&&this.renderNormalDistribution(t)},r.prototype.calculateBinInterval=function(n,t){for(var u,i=lt(n)/n.length,f=0,r=0,e=n;r<e.length;r++)u=e[r],f+=(u-i)*(u-i);t.histogramValues.mean=i;t.histogramValues.sDValue=Math.sqrt(Math.abs(f/n.length));t.histogramValues.binWidth=t.binInterval||Math.round(3.5*t.histogramValues.sDValue/Math.pow(n.length,1/3))||1},r.prototype.processInternalData=function(n,t){for(var a,i,o,f,r,s,h,c=[],u=[],l=Object.keys(n),e=0;e<l.length;e++)a=l[e],u.push(n[a][t.yName]);for(t.histogramValues={yValues:u},i=Math.min.apply(Math,t.histogramValues.yValues),o=Math.max.apply(Math,t.histogramValues.yValues),this.calculateBinInterval(t.histogramValues.yValues,t),r=t.histogramValues.binWidth,s=0;s<n.length;)f=u.filter(function(n){return n>=i&&n<i+r}).length,i+r===o&&(f+=u.filter(function(n){return n>=o}).length),c.push(((h={x:i+r/2})[t.yName]=f,h)),i+=r,s+=f;return c},r.prototype.calculateBinValues=function(n){var r,t,o=n.histogramValues.yValues.length,s=n.histogramValues.binWidth,f=n.histogramValues.mean,u=n.histogramValues.sDValue,e=n.xAxis.minimum?parseInt(n.xAxis.minimum.toString(),10):n.xMin,h=((n.xAxis.maximum?parseInt(n.xAxis.maximum.toString(),10):n.xMax)-e)/499,i;if(n.points.length)for(i=0;i<500;i++)r=e+i*h,t=Math.exp(-(r-f)*(r-f)/(2*u*u))/(u*Math.sqrt(2*Math.PI))*s*o,n.yMin=n.yMin>t?t:n.yMin,n.yMax=n.yMax<t?t:n.yMax},r.prototype.renderNormalDistribution=function(n){var u,o,s=n.xAxis.actualRange.min,v=n.xAxis.actualRange.max,h="",c="M",y=n.histogramValues.yValues.length,p=n.histogramValues.binWidth,a=n.histogramValues.mean,f=n.histogramValues.sDValue,w=(v-s)/499,r,e;if(n.points.length)for(r=0;r<500;r++)h+=c+" "+(o=l(u=s+r*w,Math.exp(-(u-a)*(u-a)/(2*f*f))/(f*Math.sqrt(2*Math.PI))*p*y,n.xAxis,n.yAxis,n.chart.requireInvertedAxis)).x+" "+o.y+" ",c="L";e=n.chart.renderer.drawPath(new i.PathOption(n.chart.element.id+"_Series_"+n.index+"_NDLine","transparent",2,n.chart.themeStyle.histogram||n.chart.themeStyle.errorBar,n.opacity,n.dashArray,h),new Int32Array([n.clipRect.x,n.clipRect.y]));e.style.visibility=n.chart.enableCanvas?null:(n.animation.enable&&"Disable"!==t.animationMode||"Enable"===t.animationMode)&&n.chart.animateSeries?"hidden":"visible";n.chart.enableCanvas||n.seriesElement.appendChild(e)},r.prototype.doAnimation=function(t){n.prototype.doAnimation.call(this,t);t.showNormalDistribution&&bo(t.seriesElement.lastElementChild,0===t.animation.duration?1e3:t.animation.duration,500,"FadeIn")},r.prototype.updateDirection=function(n){this.render(n);n.marker.visible&&o(n.chart.enableCanvas,n.chart.seriesElements,n.symbolElement,!0);n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelCollections=[],n.chart.dataLabelModule.render(n,n.chart,n.marker.dataLabel),n.textElement&&(o(n.chart.enableCanvas,n.chart.dataLabelElements,n.shapeElement,!0),o(n.chart.enableCanvas,n.chart.dataLabelElements,n.textElement,!0)))},r.prototype.getModuleName=function(){return"HistogramSeries"},r.prototype.destroy=function(){},r}(bv),eot=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),oot=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return eot(t,n),t.prototype.render=function(n,t,r,u,f,e){var y,w,b,k,d,g,o,nt=null,h="",v=null,rt=null,c=[],ut=0,tt,s;for(g=this.filterEmptyPoints(n),tt="",s=0;s<g.length;s++)null!==(o=g[s]).x&&""!==o.x&&(o.index=ut,ut++,c.push(o));var p,it=c.length,a="PolarRadar"===n.chart.chartAreaType?bf:l,ft="PolarRadar"===n.chart.chartAreaType?n.points[0].yValue:Math.max(n.yAxis.visibleRange.min,0);for(s=0;s<it;s++)(o=c[s]).symbolLocations=[],o.regions=[],p=this.getPreviousIndex(c,o.index-1,n),o.visible&&ni(c[p],o,c[this.getNextIndex(c,o.index-1,n)],n)?(nt?(k=n.drawPoints[p].controlPoint1,d=n.drawPoints[p].controlPoint2,y=a(o.xValue,o.yValue,t,r,u,n),w=a(k.x,k.y,t,r,u,n),b=a(d.x,d.y,t,r,u,n),h=h.concat("C "+w.x+" "+w.y+" "+b.x+" "+b.y+" "+y.x+" "+y.y+" ")):(h+="M "+(v=a(o.xValue,ft,t,r,u,n)).x+" "+v.y+" ",h+="L "+(rt=a(o.xValue,o.yValue,t,r,u,n)).x+" "+rt.y+" "),this.storePointLocation(o,n,u,a),nt=o):(nt=null,o.symbolLocations=[]),(s+1<it&&!c[s+1].visible||s===it-1)&&y&&v&&(v=a(o.xValue,ft,t,r,u,n),h=h.concat("L "+v.x+" "+v.y+" "));this[f?"addPath":"appendLinePath"](new i.PathOption(n.chart.element.id+"_Series_"+n.index,n.interior,0,"transparent",n.opacity,n.dashArray,h),n,"");0!==n.border.width&&(tt=this.removeEmptyPointsBorder(this.getBorderDirection(h)),this[f?"addPath":"appendLinePath"](new i.PathOption(n.chart.element.id+"_Series_border_"+n.index,"transparent",n.border.width,n.border.color?n.border.color:n.interior,1,n.border.dashArray,tt),n,""));e||this.renderMarker(n)},t.prototype.updateDirection=function(n,t){this.render(n,n.xAxis,n.yAxis,n.chart.requireInvertedAxis,!1,!0);for(var i=0;i<t.length;i++)n.marker&&n.marker.visible&&n.chart.markerRender.renderMarker(n,n.points[t[i]],n.points[t[i]].symbolLocations[0],null,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},t.prototype.addPath=function(n,t,i){var r=this.appendPathElement(n,t,i),e,h,o,s;if(""!==r.previousDirection&&""!==n.d){2===r.previousDirection.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g).length&&(r.previousDirection=r.previousDirection.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g)[0]+"L "+r.previousDirection.split(" ")[1]+" "+r.previousDirection.split(" ")[2]+" C "+r.previousDirection.split(" ")[1]+" "+r.previousDirection.split(" ")[2]+" "+r.previousDirection.split(" ")[1]+" "+r.previousDirection.split(" ")[2]+" "+r.previousDirection.split(" ")[1]+" "+r.previousDirection.split(" ")[2]+" L "+r.previousDirection.split(" ")[1]+" "+r.previousDirection.split(" ")[2]);2===n.d.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g).length&&(n.d=r.previousDirection.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g)[0]+"L "+r.previousDirection.split(" ")[1]+" "+r.previousDirection.split(" ")[2]+" C "+r.previousDirection.split(" ")[1]+" "+r.previousDirection.split(" ")[2]+" "+r.previousDirection.split(" ")[1]+" "+r.previousDirection.split(" ")[2]+" "+r.previousDirection.split(" ")[1]+" "+r.previousDirection.split(" ")[2]+" L "+r.previousDirection.split(" ")[1]+" "+r.previousDirection.split(" ")[2]);var f=r.previousDirection.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),u=n.d.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g),c=Math.max(f.length,u.length),l=Math.min(f.length,u.length);if(f.length<u.length){for(e=f.length;e<u.length;e++)u.length!==f.length&&(o="C "+(h=4===f[f.length-1].split(" ").length&&-1!==n.id.indexOf("border")?f[f.length-(-1!==n.id.indexOf("border")?1:2)].split(" ").slice(1).join(" "):f[f.length-(-1!==n.id.indexOf("border")?1:2)].split(" ").slice(5).join(" "))+h+h,-1!==n.id.indexOf("border")?f.push(o):f.splice(f.length-1,0,o));bt(r.element,n.d,t.chart.redraw,f.join(" "),this.chart.duration)}else if(f.length>u.length){for(e=l;e<c;e++)u.length!==f.length&&(s=void 0,t.removedPointIndex===t.points.length?(o="C "+(s=4===f[f.length-1].split(" ").length&&-1!==n.id.indexOf("border")?u[u.length-(-1!==n.id.indexOf("border")?1:2)].split(" ").slice(1).join(" "):u[u.length-(-1!==n.id.indexOf("border")?1:2)].split(" ").slice(5).join(" "))+s+s,-1!==n.id.indexOf("border")?u.push(o):u.splice(u.length-1,0,o)):(s=4===f[f.length-1].split(" ").length?"C "+u[-1!==n.id.indexOf("border")?0:1].split(" ").slice(-3).join(" ")+u[-1!==n.id.indexOf("border")?0:1].split(" ").slice(1).join(" ")+u[-1!==n.id.indexOf("border")?0:1].split(" ").slice(1).join(" "):"C "+u[-1!==n.id.indexOf("border")?0:1].split(" ").slice(-3).join(" ")+u[-1!==n.id.indexOf("border")?0:1].split(" ").slice(-3).join(" ")+u[-1!==n.id.indexOf("border")?0:1].split(" ").slice(-3).join(" "),u.splice(-1!==n.id.indexOf("border")?1:2,0,s)));bt(r.element,u.join(""),t.chart.redraw,r.previousDirection,this.chart.duration,n.d)}else bt(r.element,n.d,t.chart.redraw,r.previousDirection,this.chart.duration)}},t.prototype.getModuleName=function(){return"SplineAreaSeries"},t.prototype.destroy=function(){},t}(kv),sot=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sf=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return sot(t,n),t.prototype.initSeriesCollection=function(n,t){n.targetSeries=[];var i=new vt(n,"targetSeries",{},!0);this.setSeriesProperties(i,n,n.type,n.fill,n.width,t)},t.prototype.setSeriesProperties=function(n,t,i,r,u,f){n.name=i.length<=4?i.toLocaleUpperCase():i;n.xName="x";n.yName="y";n.fill=r||"#606eff";n.dashArray=t.dashArray;n.width=u;n.xAxisName=t.xAxisName;n.animation=t.animation;n.yAxisName=t.yAxisName;n.clipRectElement=t.clipRectElement;n.points=[];n.enableTooltip=!0;n.interior=n.fill;n.category="Indicator";n.index=t.index;n.chart=f;n.xMin=1/0;n.xMax=-1/0;n.yMin=1/0;n.yMax=-1/0;n.xData=[];n.yData=[];n.marker.visible=!1;t.targetSeries.push(n)},t.prototype.createIndicatorElements=function(n,t,r){var u,c,o,e,s,f,h;for((t.seriesName||t.dataSource)&&wo(t.targetSeries[0]),u=new i.Rect(0,0,0,0),(t.seriesName||t.dataSource)&&(u=t.targetSeries[0].clipRect),c=new ft(n.element.id+"_ChartIndicatorClipRect_"+r,"transparent",{width:1,color:"Gray"},1,{x:0,y:0,width:u.width,height:u.height}),o=eu(n.redraw,c,n.renderer),t.indicatorElement=n.renderer.createGroup({id:n.element.id+"IndicatorGroup"+r,transform:"translate("+u.x+","+u.y+")","clip-path":"url(#"+n.element.id+"_ChartIndicatorClipRect_"+r+")"}),t.indicatorElement&&(t.indicatorElement.setAttribute("role",t.accessibility.accessibilityRole?t.accessibility.accessibilityRole:""),t.indicatorElement.setAttribute("tabindex",t.accessibility.focusable?String(t.accessibility.tabIndex):"-1"),t.accessibility.focusable&&(t.indicatorElement.style.outline="none"),t.indicatorElement.setAttribute("aria-label",t.accessibility.accessibilityDescription?t.accessibility.accessibilityDescription:""),t.indicatorElement.appendChild(o)),e=0,s=t.targetSeries;e<s.length;e++)f=s[e],f.clipRectElement=o,h=f.chart.renderer.createGroup({id:f.chart.element.id+"_Indicator_"+t.index+"_"+f.name+"_Group"}),t.indicatorElement&&t.indicatorElement.appendChild(h),f.seriesElement=h;n.indicatorElements&&n.indicatorElements.appendChild(t.indicatorElement)},t.prototype.getDataPoint=function(n,t,i,r,u,f){void 0===f&&(f=null);var e=new uo;return e.x=n,e.y=t,e.xValue=i.xValue,e.color=r.fill,e.index=u,e.yValue=t,e.visible=!0,r.xMin=Math.min(r.xMin,e.xValue),r.yMin=Math.min(r.yMin,e.yValue),r.xMax=Math.max(r.xMax,e.xValue),r.yMax=Math.max(r.yMax,e.yValue),r.xData.push(e.xValue),f&&"Macd"===f.type&&"Column"===r.type&&(e.color=e.y>=0?f.macdPositiveColor:f.macdNegativeColor),e},t.prototype.getRangePoint=function(n,t,i,r,u,f){var e=new uo;return e.x=n,e.high=t,e.low=i,e.xValue=r.xValue,e.color=u.fill,e.index=f,e.visible=!0,u.xData.push(e.xValue),e},t.prototype.setSeriesRange=function(n,t,i){void 0===i&&(i=null);i?i.points=n:t.targetSeries[0].points=n},t}(hu),hot=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cot=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return hot(t,n),t.prototype.initDataSource=function(n){var r=[],e=n.points,i;if(e&&e.length){var t=e,o=et(n.field),h=n.targetSeries[0];if(t&&t.length&&t.length>=n.period){for(var u=0,f=0,s=0;s<n.period;s++)f+=t[s][o];for(u=f/n.period,r.push(this.getDataPoint(t[n.period-1].x,u,t[n.period-1],h,r.length)),i=n.period;i<t.length;)f-=t[i-n.period][o],u=(f+=t[i][o])/n.period,r.push(this.getDataPoint(t[i].x,u,t[i],h,r.length)),i++}this.setSeriesRange(r,n)}},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"SmaIndicator"},t}(sf),lot=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),aot=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return lot(t,n),t.prototype.initDataSource=function(n){var o=et(n.field),r=[],u=n.targetSeries[0],t=n.points,i,e,c;if(t&&t.length&&t.length>=n.period){for(var s,h=0,l=2/(n.period+1),f=0;f<n.period;f++)h+=t[f][o];for(s=h/n.period,r.push(this.getDataPoint(t[n.period-1].x,s,t[n.period-1],u,r.length)),i=n.period;i<t.length;)e=r[i-n.period][u.yName],c=(t[i][o]-e)*l+e,r.push(this.getDataPoint(t[i].x,c,t[i],u,r.length)),i++}this.setSeriesRange(r,n)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"EmaIndicator"},t}(sf),vot=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yot=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return vot(t,n),t.prototype.initDataSource=function(n){var s=[],l=et(n.field),h=n.points,a,r,i,f;if(h&&h.length&&h.length>=n.period&&(a=n.targetSeries[0],r=n.points,r.length&&r.length>=n.period)){for(var t=0,e=[],u=0,c=r.length,o=n.period;c>=o;){for(t=0,i=u=r.length-c;i<u+o;i++)t+=r[i][l];t/=o;e.push(t);c--}for(f=0;f<o-1;f++){for(t=0,i=0;i<f+1;i++)t+=r[i][l];t/=f+1;e.splice(f,0,t)}for(u=n.period;u<=e.length;){for(t=0,i=u-n.period;i<u;i++)t+=e[i];t/=n.period;s.push(this.getDataPoint(r[u-1].x,t,r[u-1],a,s.length));u++}}this.setSeriesRange(s,n)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"TmaIndicator"},t}(sf),pot=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wot=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return pot(t,n),t.prototype.initDataSource=function(n){var i=[],t=n.points;t.length>0&&t.length>n.period&&(i=this.calculateADPoints(n,t));this.setSeriesRange(i,n)},t.prototype.calculateADPoints=function(n,t){for(var f=[],e=0,i=0,r=0,u=0,o=0,s=n.targetSeries[0],i=0;i<t.length;i++)r=Number(t[i].high),u=Number(t[i].low),e+=((o=Number(t[i].close))-u-(r-o))/(r-u?r-u:1)*Number(t[i].volume),f[i]=this.getDataPoint(t[i].x,e,t[i],s,f.length);return f},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"AccumulationDistributionIndicator"},t}(sf),bot=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kot=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return bot(t,n),t.prototype.initDataSource=function(n){var t=n.points;t.length>0&&t.length>n.period&&this.calculateATRPoints(n,t)},t.prototype.calculateATRPoints=function(n,t){for(var r=0,e=0,o=0,s=0,h=0,u=[],c=[],f=n.period,l=0,a=n.targetSeries[0],i=0;i<t.length;i++)e=Number(t[i].high)-Number(t[i].low),i>0&&(o=Math.abs(Number(t[i].high)-Number(t[i-1].close)),s=Math.abs(Number(t[i].low)-Number(t[i-1].close))),l+=h=Math.max(e,o,s),i>=f?(r=(Number(c[i-1].y)*(f-1)+h)/f,u.push(this.getDataPoint(t[i].x,r,t[i],a,u.length))):(r=l/f,i===f-1&&u.push(this.getDataPoint(t[i].x,r,t[i],a,u.length))),c[i]={x:t[i].x,y:r};this.setSeriesRange(u,n)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"AtrIndicator"},t}(sf),dot=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),got=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dot(t,n),t.prototype.initSeriesCollection=function(t,i){n.prototype.initSeriesCollection.call(this,t,i);var r=new vt(t,"targetSeries",{},!0);n.prototype.setSeriesProperties.call(this,r,t,"UpperLine",t.upperLine.color,t.upperLine.width,i)},t.prototype.initDataSource=function(n){var r=[],u=[],t=n.points,i;if(t&&t.length){var e=n.targetSeries[1],o=n.targetSeries[0],f=n.period;if(t.length>=n.period)for(i=0;i<t.length;i++)r.push(this.getDataPoint(t[i].x,100,t[i],e,r.length)),i<f||u.push(this.getDataPoint(t[i].x,Number(t[i].close)/Number(t[i-f].close)*100,t[i],o,u.length));this.setSeriesRange(u,n,n.targetSeries[0]);this.setSeriesRange(r,n,n.targetSeries[1])}},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"MomentumIndicator"},t}(sf),nst=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tst=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return nst(t,n),t.prototype.initSeriesCollection=function(t,i){var r,u;(n.prototype.initSeriesCollection.call(this,t,i),t.showZones)&&(r=new vt(t,"targetSeries",{},!0),n.prototype.setSeriesProperties.call(this,r,t,"LowerLine",t.lowerLine.color,t.lowerLine.width,i),u=new vt(t,"targetSeries",{},!0),n.prototype.setSeriesProperties.call(this,u,t,"UpperLine",t.upperLine.color,t.upperLine.width,i))},t.prototype.initDataSource=function(n){var s=[],c=[],l=[],a=n.targetSeries[0],t=n.points,i,h,e,o;if(t.length&&t.length>=n.period){if(n.showZones)for(i=0;i<t.length;i++)l.push(this.getDataPoint(t[i].x,n.overBought,t[i],n.targetSeries[1],l.length)),c.push(this.getDataPoint(t[i].x,n.overSold,t[i],n.targetSeries[2],c.length));var r=Number(t[0].close),u=0,f=0;for(i=1;i<=n.period;i++)h=Number(t[i].close),h>r?u+=h-r:f+=r-h,r=h;for(u/=n.period,f/=n.period,s.push(this.getDataPoint(t[n.period].x,100-100/(1+u/f),t[n.period],a,s.length)),e=n.period+1;e<t.length;e++)o=Number(t[e].close),o>r?(u=(u*(n.period-1)+(o-r))/n.period,f=f*(n.period-1)/n.period):o<r&&(f=(f*(n.period-1)+(r-o))/n.period,u=u*(n.period-1)/n.period),r=o,s.push(this.getDataPoint(t[e].x,100-100/(1+u/f),t[e],a,s.length))}this.setSeriesRange(s,n,n.targetSeries[0]);n.showZones&&(this.setSeriesRange(l,n,n.targetSeries[1]),this.setSeriesRange(c,n,n.targetSeries[2]))},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"RsiIndicator"},t}(sf),ist=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rst=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ist(t,n),t.prototype.initSeriesCollection=function(t,i){var r,u,f;n.prototype.initSeriesCollection.call(this,t,i);r=new vt(t,"targetSeries",{},!0);(this.setSeriesProperties(r,t,"PeriodLine",t.periodLine.color,t.periodLine.width,i),t.showZones)&&(u=new vt(t,"targetSeries",{},!0),this.setSeriesProperties(u,t,"UpperLine",t.upperLine.color,t.upperLine.width,i),f=new vt(t,"targetSeries",{},!0),this.setSeriesProperties(f,t,"LowerLine",t.lowerLine.color,t.lowerLine.width,i))},t.prototype.initDataSource=function(n){var e=[],r=[],u=[],o=[],f=[],t=n.points,i;if(t.length&&t.length>=n.period){if(n.showZones)for(i=0;i<t.length;i++)r.push(this.getDataPoint(t[i].x,n.overBought,t[i],n.targetSeries[2],r.length)),u.push(this.getDataPoint(t[i].x,n.overSold,t[i],n.targetSeries[3],u.length));f=this.calculatePeriod(n.period,n.kPeriod,t,n.targetSeries[1]);o=this.smaCalculation(n.period,n.kPeriod,f,n.targetSeries[1]);e=this.smaCalculation(n.period+n.kPeriod-1,n.dPeriod,f,n.targetSeries[0])}this.setSeriesRange(e,n,n.targetSeries[0]);this.setSeriesRange(o,n,n.targetSeries[1]);n.showZones&&(this.setSeriesRange(r,n,n.targetSeries[2]),this.setSeriesRange(u,n,n.targetSeries[3]))},t.prototype.smaCalculation=function(n,t,i,r){var s=[],a,c,e,o;if(i.length>=n+t){for(var l=n+(t-1),f=[],h=[],u=0;u<i.length;u++)a=Number(i[u].y),f.push(a);for(c=f.length;c>=l;){for(e=0,u=n-1;u<n+t-1;u++)e+=f[u];e/=t;h.push(e.toFixed(2));f.splice(0,1);c=f.length}for(o=l-1,u=0;u<i.length;u++)u<o||(s.push(this.getDataPoint(i[u].x,Number(h[u-o]),i[u],r,s.length)),i[u].y=Number(h[u-o]))}return s},t.prototype.calculatePeriod=function(n,t,i,r){for(var s,h,l,a,v=[],y=[],p=[],e=[],f=0;f<i.length;f++)v[f]=i[f].low,y[f]=i[f].high,p[f]=i[f].close;if(i.length>n){for(var o=[],c=[],u=0;u<n-1;++u)c.push(0),o.push(0),e.push(this.getDataPoint(i[u].x,i[u].close,i[u],r,e.length));for(u=n-1;u<i.length;++u){for(s=Number.MAX_VALUE,h=Number.MIN_VALUE,f=0;f<n;++f)s=Math.min(s,v[u-f]),h=Math.max(h,y[u-f]);c.push(h);o.push(s)}for(u=n-1;u<i.length;++u)l=0,a=0,l+=p[u]-o[u],a+=c[u]-o[u],e.push(this.getDataPoint(i[u].x,l/a*100,i[u],r,e.length))}return e},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"StochasticIndicator"},t}(sf),ust=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fst=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ust(t,n),t.prototype.initSeriesCollection=function(n,t){var i,r,u,f;n.targetSeries=[];i=new vt(n,"targetSeries",{},!0);i.type="RangeArea";"transparent"!==n.bandColor&&"none"!==n.bandColor&&this.setSeriesProperties(i,n,"BollingerBand",n.bandColor,0,t);r=new vt(n,"targetSeries",{},!0);this.setSeriesProperties(r,n,"BollingerBand",n.fill,n.width,t);u=new vt(n,"targetSeries",{},!0);this.setSeriesProperties(u,n,"UpperLine",n.upperLine.color,n.upperLine.width,t);f=new vt(n,"targetSeries",{},!0);this.setSeriesProperties(f,n,"LowerLine",n.lowerLine.color,n.lowerLine.width,t)},t.prototype.initDataSource=function(n){var a="transparent"!==n.bandColor&&"none"!==n.bandColor,s=a?1:0,w=[],v=[],y=[],b=[],ut=n.targetSeries[s+1],ft=n.targetSeries[s+2],et=n.targetSeries[s],ot=a?n.targetSeries[0]:null,i=n.points,u,t,c,l;if(i.length&&i.length>=n.period){for(var k=0,p=0,nt=n.standardDeviation,d=i.length,f=Math.round(n.period),e=[],o=[],h=[],g=0;g<f;g++)k+=Number(i[g].close);for(u=k/n.period,t=0;t<d;t++)if(c=Number(i[t].close),t>=f-1&&t<d){t-n.period>=0?(u=(k+=c-Number(i[t-f].close))/n.period,e[t]=u,o[t]=Math.pow(c-u,2),p+=o[t]-o[t-f]):(e[t]=u,o[t]=Math.pow(c-u,2),p+=o[t]);var tt=Math.sqrt(p/n.period),it=e[t]-nt*tt,rt=e[t]+nt*tt;if(t+1===f)for(l=0;l<f-1;l++)h[l]={X:i[l].x,mb:e[t],lb:it,ub:rt,visible:!0};h[t]={X:i[t].x,mb:e[t],lb:it,ub:rt,visible:!0}}else t<n.period-1&&(e[t]=u,o[t]=Math.pow(c-u,2),p+=o[t]);for(var st=-1,ht=-1,r=0;r<d;r++)r>=f-1&&(v.push(this.getDataPoint(i[r].x,h[r].ub,i[r],ut,v.length)),y.push(this.getDataPoint(i[r].x,h[r].lb,i[r],ft,y.length)),w.push(this.getDataPoint(i[r].x,h[r].mb,i[r],et,w.length)),a&&b.push(this.getRangePoint(i[r].x,v[++st].y,y[++ht].y,i[r],ot,b.length)))}a&&this.setSeriesRange(b,n,n.targetSeries[0]);this.setSeriesRange(w,n,n.targetSeries[s]);this.setSeriesRange(v,n,n.targetSeries[s+1]);this.setSeriesRange(y,n,n.targetSeries[s+2])},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"BollingerBandsIndicator"},t}(sf),est=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ost=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return est(t,n),t.prototype.initSeriesCollection=function(t,i){var u,r;(n.prototype.initSeriesCollection.call(this,t,i),"Line"===t.macdType||"Both"===t.macdType)&&(u=new vt(t,"targetSeries",{},!0),this.setSeriesProperties(u,t,"MacdLine",t.macdLine.color,t.macdLine.width,i));("Histogram"===t.macdType||"Both"===t.macdType)&&(r=new vt(t,"targetSeries",{},!0),r.type="Column",this.setSeriesProperties(r,t,"Histogram",t.macdPositiveColor,t.width,i))},t.prototype.initDataSource=function(n){var i,r,s=[],u=n.fastPeriod,f=n.slowPeriod,h=n.period,c=u+h,e=[],l=[],t=n.points,a=n.targetSeries[0],o;if("Histogram"===n.macdType?i=n.targetSeries[1]:(r=n.targetSeries[1],"Both"===n.macdType&&(i=n.targetSeries[2])),t&&c<t.length&&f<=u&&f>0&&c-2>=0){var y=this.calculateEMAValues(f,t,"close"),p=this.calculateEMAValues(u,t,"close"),v=this.getMACDVales(n,y,p);e=this.getMACDPoints(n,v,t,r||a);o=this.calculateEMAValues(h,e,"y");s=this.getSignalPoints(n,o,t,a);i&&(l=this.getHistogramPoints(n,v,o,t,i))}this.setSeriesRange(s,n,n.targetSeries[0]);i&&this.setSeriesRange(l,n,i);r&&this.setSeriesRange(e,n,r)},t.prototype.calculateEMAValues=function(n,t,i){for(var r,u,f,s=0,e=[],h=2/(n+1),o=0;o<n;o++)s+=Number(t[o][i]);for(f=s/n,e.push(f),r=f,u=n;u<t.length;u++)r=(Number(t[u][i])-r)*h+r,e.push(r);return e},t.prototype.getMACDPoints=function(n,t,i,r){for(var f=[],u=n.fastPeriod-1,e=0;u<i.length;)f.push(this.getDataPoint(i[u].x,t[e],i[u],r,f.length)),u++,e++;return f},t.prototype.getSignalPoints=function(n,t,i,r){for(var u=n.fastPeriod+n.period-2,e=0,f=[];u<i.length;)f.push(this.getDataPoint(i[u].x,t[e],i[u],r,f.length)),u++,e++;return f},t.prototype.getMACDVales=function(n,t,i){for(var u=[],f=n.fastPeriod-n.slowPeriod,r=0;r<i.length;r++)u.push(t[r+f]-i[r]);return u},t.prototype.getHistogramPoints=function(n,t,i,r,u){for(var f=n.fastPeriod+n.period-2,e=0,o=[];f<r.length;)o.push(this.getDataPoint(r[f].x,t[e+(n.period-1)]-i[e],r[f],u,o.length,n)),f++,e++;return o},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"MacdIndicator"},t}(sf),sst=function(){function n(){}return n.prototype.initSeriesCollection=function(n,t){var i=new vt(n,"targetSeries",{},!0);i.type="Linear"===n.type||"MovingAverage"===n.type?"Line":"Spline";this.setSeriesProperties(i,n,n.type,n.fill,n.width,t)},n.prototype.setSeriesProperties=function(n,t,i,r,u,f){n.name=t.name;n.xName="x";n.yName="y";n.fill=r||"blue";n.width=u;n.dashArray=t.dashArray;n.clipRectElement=t.clipRectElement;n.points=[];n.enableTooltip=t.enableTooltip;n.index=t.index;n.sourceIndex=t.sourceIndex;n.interior=n.fill;n.animation=t.animation;n.legendShape="HorizontalLine";n.marker=t.marker;n.category="TrendLine";n.chart=f;n.xMin=1/0;n.xMax=-1/0;n.yMin=1/0;n.yMax=-1/0;n.xData=[];n.yData=[];t.targetSeries=n;f.isBlazor&&(t.targetSeries.border={},t.targetSeries.connector={})},n.prototype.createTrendLineElements=function(n,t,i,r,u){t.trendLineElement=r;t.targetSeries.clipRectElement=u;t.targetSeries.seriesElement=r;n.trendLineElements&&n.trendLineElements.appendChild(t.trendLineElement)},n.prototype.getDataPoint=function(n,t,i,r){var u=new uo;return u.x="DateTime"===i.xAxis.valueType?new Date(Number(n)):n,u.y=t,u.xValue=Number(n),u.color=i.fill,u.index=r,u.yValue=Number(t),u.visible=!0,i.xMin=Math.min(i.xMin,u.xValue),i.yMin=Math.min(i.yMin,u.yValue),i.xMax=Math.max(i.xMax,u.xValue),i.yMax=Math.max(i.yMax,u.yValue),i.xData.push(u.xValue),u},n.prototype.findSlopeIntercept=function(n,t,i,r){for(var o,e=0,s=0,h=0,c=0,u=0,f=0,l=0;u<r.length;)isNaN(t[u])&&(t[u]=(t[u-1]+t[u+1])/2),e+=n[u],s+=t[u],h+=n[u]*t[u],c+=n[u]*n[u],u++;if(o=i.type,i.intercept&&("Linear"===o||"Exponential"===o))switch(l=i.intercept,o){case"Linear":f=(h-i.intercept*e)/c;break;case"Exponential":f=(h-Math.log(Math.abs(i.intercept))*e)/c}else f=(r.length*h-e*s)/(r.length*c-e*e),f="Linear"===o?f:Math.abs(f),l="Exponential"===o||"Power"===o?Math.exp((s-f*e)/r.length):(s-f*e)/r.length;return{slope:f,intercept:l}},n.prototype.initDataSource=function(n){var i=n.points,t;if(i&&i.length){t=n.targetSeries;switch(n.type){case"Linear":this.setLinearRange(i,n,t);break;case"Exponential":this.setExponentialRange(i,n,t);break;case"MovingAverage":this.setMovingAverageRange(i,n,t);break;case"Polynomial":this.setPolynomialRange(i,n,t);break;case"Power":this.setPowerRange(i,n,t);break;case"Logarithmic":this.setLogarithmicRange(i,n,t)}"Linear"!==n.type&&"MovingAverage"!==n.type&&t.chart.splineSeriesModule.findSplinePoint(t)}},n.prototype.setExponentialRange=function(n,t,i){for(var r,o,s,u=[],f=[],e=0;e<n.length;)r=n[e],o=r.yValue?Math.log(r.yValue):0,u.push(r.xValue),f.push(o),e++;s=this.findSlopeIntercept(u,f,t,n);i.points=this.getExponentialPoints(t,n,u,f,i,s)},n.prototype.setLogarithmicRange=function(n,t,i){for(var r,s,h,e=[],u=[],o=[],f=0;f<n.length;)r=n[f],s=r.xValue?Math.log(r.xValue):0,o.push(r.xValue),e.push(s),u.push(r.yValue),f++;h=this.findSlopeIntercept(e,u,t,n);i.points=this.getLogarithmicPoints(t,n,o,u,i,h)},n.prototype.setPolynomialRange=function(n,t,i){for(var u,f=[],e=[],r=0;r<n.length;)u=n[r],f.push(u.xValue),e.push(u.yValue),r++;i.points=this.getPolynomialPoints(t,n,f,e,i)},n.prototype.setPowerRange=function(n,t,i){for(var s,e=[],u=[],o=[],f=0;f<n.length;){var r=n[f],h=r.xValue?Math.log(r.xValue):0,c=r.yValue?Math.log(r.yValue):0;o.push(r.xValue);e.push(h);u.push(c);f++}s=this.findSlopeIntercept(e,u,t,n);i.points=this.getPowerPoints(t,n,o,u,i,s)},n.prototype.setLinearRange=function(n,t,i){for(var e,o,r=[],u=[],f=0;f<n.length;)e=n[f],r.push(e.xValue),u.push(e.yValue),f++;o=this.findSlopeIntercept(r,u,t,n);i.points=this.getLinearPoints(t,n,r,u,i,o)},n.prototype.setMovingAverageRange=function(n,t,i){for(var u,o=[],f=[],e=[],r=0;r<n.length;)u=n[r],e.push(u.xValue),o.push(r+1),f.push(u.yValue),r++;i.points=this.getMovingAveragePoints(t,n,e,f,i)},n.prototype.getLogarithmicPoints=function(n,t,i,r,u,f){var c=Math.round(t.length/2),e=[],o=i[0]-n.backwardForecast,l=o?Math.log(o):0,a=f.intercept+f.slope*l,s=i[c-1],v=s?Math.log(s):0,y=f.intercept+f.slope*v,h=i[i.length-1]+n.forwardForecast,p=h?Math.log(h):0,w=f.intercept+f.slope*p;return e.push(this.getDataPoint(o,a,u,e.length)),e.push(this.getDataPoint(s,y,u,e.length)),e.push(this.getDataPoint(h,w,u,e.length)),e},n.prototype.getPowerPoints=function(n,t,i,r,u,f){var c=Math.round(t.length/2),e=[],o=i[0]-n.backwardForecast;o=o>-1?o:0;var l=f.intercept*Math.pow(o,f.slope),s=i[c-1],a=f.intercept*Math.pow(s,f.slope),h=i[i.length-1]+n.forwardForecast,v=f.intercept*Math.pow(h,f.slope);return e.push(this.getDataPoint(o,l,u,e.length)),e.push(this.getDataPoint(s,a,u,e.length)),e.push(this.getDataPoint(h,v,u,e.length)),e},n.prototype.getPolynomialPoints=function(n,t,i,r,u){var s=t.length<=n.polynomialOrder?t.length:n.polynomialOrder,h,f,o,c,y,a,v;for(s=Math.max(2,s),s=Math.min(6,s),n.polynomialOrder=s,n.polynomialSlopes=[],n.polynomialSlopes.length=n.polynomialOrder+1,h=0;h<i.length;){for(var w=i[h],b=r[h],e=0;e<=n.polynomialOrder;)n.polynomialSlopes[e]||(n.polynomialSlopes[e]=0),n.polynomialSlopes[e]+=Math.pow(w,e)*b,++e;h++}for(f=[],f.length=1+2*n.polynomialOrder,o=[],o.length=n.polynomialOrder+1,c=0;c<n.polynomialOrder+1;)o[c]=[],o[c].length=3,c++;for(y=0;y<i.length;){for(var k=i[y],p=1,l=0;l<f.length;)f[l]||(f[l]=0),f[l]+=p,p*=k,++l;++y}for(a=0;a<=n.polynomialOrder;){for(v=0;v<=n.polynomialOrder;)o[a][v]=f[a+v],++v;++a}return this.gaussJordanElimination(o,n.polynomialSlopes)||(n.polynomialSlopes=null),this.getPoints(n,t,i,u)},n.prototype.getMovingAveragePoints=function(n,i,r,u,f){for(var h=[],o=n.period>=i.length?i.length-1:n.period,e,a,c,l,o=1===o?1:Math.max(2,o),s=0;s<i.length;){for(e=c=0,l=s;c<o;l++)c++,e+=u[l];e=+o<0?null:e?e/(+o):e;t.isNullOrUndefined(e)||isNaN(e)||(a=r[o-1+s],h.push(this.getDataPoint(a,e,f,h.length)));s++}return h},n.prototype.getLinearPoints=function(n,t,i,r,u,f){var e=[],h=i.indexOf(Math.max.apply(null,i)),c=i.indexOf(Math.min.apply(null,i)),o=i[c]-n.backwardForecast,l=f.slope*o+f.intercept,s=i[h]+n.forwardForecast,a=f.slope*s+f.intercept;return e.push(this.getDataPoint(o,l,u,e.length)),e.push(this.getDataPoint(s,a,u,e.length)),e},n.prototype.getExponentialPoints=function(n,t,i,r,u,f){var v=Math.round(t.length/2),e=[],o=i[0]-n.backwardForecast,s=f.intercept*Math.exp(f.slope*o),h=i[v-1],c=f.intercept*Math.exp(f.slope*h),l=i[i.length-1]+n.forwardForecast,a=f.intercept*Math.exp(f.slope*l);return e.push(this.getDataPoint(o,isNaN(s)?0:s,u,e.length)),e.push(this.getDataPoint(h,isNaN(c)?0:c,u,e.length)),e.push(this.getDataPoint(l,isNaN(a)?0:a,u,e.length)),e},n.prototype.getPoints=function(n,t,i,r){var u,o,f=n.polynomialSlopes,e=[],h=1,s=1;for(t.sort(function(n,t){return n.xValue-t.xValue}),i.sort(function(n,t){return n-t});null!==f&&s<=f.length;)1===s?(u=i[0]-n.backwardForecast,o=this.getPolynomialYValue(f,u),e.push(this.getDataPoint(u,o,r,e.length))):s===f.length?(u=i[t.length-1]+n.forwardForecast,o=this.getPolynomialYValue(f,u),e.push(this.getDataPoint(u,o,r,e.length))):(h+=(t.length+("DateTime"===r.xAxis.valueType?s:n.forwardForecast))/f.length,u=i[parseInt(h.toString(),10)-1],o=this.getPolynomialYValue(f,u),e.push(this.getDataPoint(u,o,r,e.length))),s++;return e},n.prototype.getPolynomialYValue=function(n,t){for(var r=0,i=0;i<n.length;)r+=n[i]*Math.pow(t,i),i++;return r},n.prototype.gaussJordanElimination=function(n,t){var r=n.length,l=[],a=[],v=[],w,y,u,s,p,g,k,b,e,f,h,nt;for(l.length=r,a.length=r,v.length=r,w=0;w<r;)v[w]=0,++w;for(y=0;y<r;){for(var d=0,o=0,i=0,c=0;c<r;){if(1!==v[c])for(u=0;u<r;)0===v[u]&&Math.abs(n[c][u])>=d&&(d=Math.abs(n[c][u]),o=c,i=u),++u;++c}if(++v[i],o!==i){for(s=0;s<r;)p=n[o][s],n[o][s]=n[i][s],n[i][s]=p,++s;g=t[o];t[o]=t[i];t[i]=g}if(a[y]=o,l[y]=i,0===n[i][i])return!1;for(k=1/n[i][i],n[i][i]=1,b=0;b<r;)n[i][b]*=k,++b;for(t[i]*=k,e=0;e<r;){if(e!==i){for(p=n[e][i],n[e][i]=0,u=0;u<r;)n[e][u]-=n[i][u]*p,++u;t[e]-=t[i]*p}++e}++y}for(f=r-1;f>=0;){if(a[f]!==l[f])for(h=0;h<r;)nt=n[h][a[f]],n[h][a[f]]=n[h][l[f]],n[h][l[f]]=nt,++h;--f}return!0},n.prototype.getTrendLineElements=function(n,t){var r,f,e;wo(n);var i=n.clipRect,o=t.renderer.drawClipPath(new ft(t.element.id+"_ChartTrendlineClipRect_"+n.index,"transparent",{width:1,color:"Gray"},1,{x:0,y:0,width:i.width,height:i.height})),u=t.renderer.createGroup({id:t.element.id+"TrendlineSeriesGroup"+n.index,transform:"translate("+i.x+","+i.y+")","clip-path":"url(#"+t.element.id+"_ChartTrendlineClipRect_"+n.index+")"});for(u&&u.appendChild(o),r=0,f=n.trendlines;r<f.length;r++)e=f[r],this.createTrendLineElements(t,e,e.index,u,o)},n.prototype.destroy=function(){},n.prototype.getModuleName=function(){return"TrendLine"},n}(),hst=function(){function n(n){this.arrowLocation=new h(0,0);this.rx=2;this.ry=2;this.highlightWidth=0;this.crosshairLeftOverflow=0;this.crosshairRightOverflow=0;this.chart=n;this.elementID=this.chart.element.id;this.svgRenderer=new i.SvgRenderer(this.chart.element.id);(this.chart.crosshair.snapToData||this.chart.crosshair.highlightCategory)&&(this.data=new rs(this.chart));this.addEventListener()}return n.prototype.addEventListener=function(){if(!this.chart.isDestroyed){var n=t.Browser.isPointer?"pointerleave":"mouseleave";this.chart.on(t.Browser.touchMoveEvent,this.mouseMoveHandler,this);this.chart.on(t.Browser.touchEndEvent,this.mouseUpHandler,this);this.chart.on(n,this.mouseLeaveHandler,this);this.chart.on("tapHold",this.longPress,this)}},n.prototype.mouseUpHandler=function(){this.chart.startMove&&this.removeCrosshair(2e3)},n.prototype.mouseLeaveHandler=function(){this.removeCrosshair(1e3)},n.prototype.mouseMoveHandler=function(n){var i=this.chart;i.stockChart&&i.stockChart.onPanning&&(i.mouseY<i.chartAxisLayoutPanel.seriesClipRect.y?i.mouseY=i.chartAxisLayoutPanel.seriesClipRect.y:i.mouseY>i.chartAxisLayoutPanel.seriesClipRect.y+i.chartAxisLayoutPanel.seriesClipRect.height&&(i.mouseY=i.chartAxisLayoutPanel.seriesClipRect.y+i.chartAxisLayoutPanel.seriesClipRect.height));"touchmove"===n.type&&(t.Browser.isIos||t.Browser.isIos7)&&i.startMove&&n.preventDefault&&n.preventDefault();i.disableTrackTooltip||(i.crosshair.enable&&ht(i.mouseX,i.mouseY,i.chartAxisLayoutPanel.seriesClipRect)?!i.startMove&&i.isTouch||this.crosshair():this.removeCrosshair(1e3))},n.prototype.longPress=function(){var n=this.chart;return ht(n.mouseX,n.mouseY,n.chartAxisLayoutPanel.seriesClipRect)&&this.crosshair(),!1},n.prototype.findMousePoints=function(n){for(var r,i,h,c,t=this.data.getData(),p=[],f=n.isTransposed?"x":"y",e=null,a=1/0,w="x"===f?n.mouseX:n.mouseY,o=!1,b=this.data.mergeXvalues(this.chart.visibleSeries),s=0,v=n.visibleSeries;s<v.length;s++)r=v[s],(o=o||r.visible,r.visible&&"TrendLine"!==r.category)&&(i=this.data.getClosestX(n,r,b)||t,i&&i.point&&i.point.symbolLocations[0]&&(h=i.point.symbolLocations[0][f]+i.series.clipRect[f],(n.crosshair.snapToData||n.crosshair.highlightCategory)&&(p.push(h),c=Math.abs(h-w),c<a&&(a=c,e=i))));if((n.crosshair.snapToData||n.crosshair.highlightCategory)&&e&&(t=e,n.crosshairModule.highlightWidth=0,n.crosshair.highlightCategory&&"Category"===t.series.xAxis.valueType)){var u=n.isTransposed||n.requireInvertedAxis?n.chartAxisLayoutPanel.seriesClipRect.height:n.chartAxisLayoutPanel.seriesClipRect.width,l=u/t.series.xAxis.visibleRange.delta,y=(t.point.xValue-t.series.xAxis.visibleRange.min)/(t.series.xAxis.visibleRange.max-t.series.xAxis.visibleRange.min);n.crosshairModule.crosshairLeftOverflow=Math.max(0,l/2-y*u);n.crosshairModule.crosshairRightOverflow=Math.max(0,y*u+l/2-u);n.crosshairModule.highlightWidth=Math.max(0,l-n.crosshairModule.crosshairLeftOverflow-n.crosshairModule.crosshairRightOverflow)}return t&&t.point&&this.data.findMouseValues(t,n,this),o},n.prototype.crosshair=function(){var g=this.chart.series.filter(function(n){return n.visible}).length,k=!0,o,a,v,d,y,p;(this.chart.crosshair.snapToData||this.chart.crosshair.highlightCategory)&&(k=this.findMousePoints(this.chart));var e,w,n=this.chart,s="",h="",c=document.getElementById(this.elementID+"_crosshair_axis"),r=n.crosshair,b=document.getElementById(this.elementID+"_tooltip"),u=n.chartAxisLayoutPanel.seriesClipRect,f=n.enableCanvas?document.getElementById(this.elementID+"_Secondary_Element"):document.getElementById(this.elementID+"_UserInteraction"),l=document.getElementById(this.elementID+"_Crosshair");if(n.enableCanvas&&(l||(l=t.createElement("div",{id:this.elementID+"_Crosshair",styles:"position: absolute; pointer-events: none"}),f.appendChild(l))),this.stopAnimation(),0===g||n.crosshair.snapToData&&void 0===this.valueY||n.isCrosshair&&n.tooltip.enable&&n.tooltipModule&&!ht(n.tooltipModule.valueX,n.tooltipModule.valueY,u)||n.crosshair.snapToData&&!k)return null;(this.valueX=n.crosshair.snapToData||n.crosshair.highlightCategory?this.valueX:n.tooltip.enable&&n.tooltipModule&&n.tooltipModule.valueX?n.tooltipModule.valueX:n.mouseX,this.valueY=n.crosshair.snapToData||n.crosshair.highlightCategory?this.valueY:n.tooltip.enable&&n.tooltipModule&&n.tooltipModule.valueY?n.tooltipModule.valueY:n.mouseY,!n.enableCanvas&&f&&f.setAttribute("opacity","1"),"Both"===r.lineType||"Horizontal"===r.lineType)&&(n.crosshair.highlightCategory&&0!==this.highlightWidth&&(n.isTransposed||n.requireInvertedAxis)?(o=this.highlightWidth,n.crosshairModule.valueY=this.adjustCrosshairPositionForOverflow(this.valueY,!0,n),a=this.valueY-o/2,s="M "+u.x+" "+a+" L "+(u.x+u.width)+" "+a+" L "+(u.x+u.width)+" "+(a+o)+" L "+u.x+" "+(a+o)+" Z"):s+="M "+u.x+" "+this.valueY+" L "+(u.x+u.width)+" "+this.valueY);("Both"===r.lineType||"Vertical"===r.lineType)&&(n.crosshair.highlightCategory&&0!==this.highlightWidth&&!n.requireInvertedAxis?(o=this.highlightWidth,n.crosshairModule.valueX=this.adjustCrosshairPositionForOverflow(this.valueX,!1,n),v=this.valueX-o/2,h="M "+v+" "+u.y+" L "+(v+o)+" "+u.y+" L "+(v+o)+" "+(u.y+u.height)+" L "+v+" "+(u.y+u.height)+" Z"):h+="M "+this.valueX+" "+u.y+" L "+this.valueX+" "+(u.y+u.height));n.enableCanvas?(c||(c=this.svgRenderer.createGroup({id:this.elementID+"_crosshair_axis"})),d=n.tooltip.enable?n.element.id+"_tooltip_svg":n.element.id+"_svg",w=this.svgRenderer.createSvg({id:d,width:n.availableSize.width,height:n.availableSize.height}),n.tooltip.enable&&((b=b||n.tooltipModule.createElement()).appendChild(w),f.appendChild(b)),e=new i.PathOption(this.elementID+"_HorizontalLine","none",r.line.width,r.horizontalLineColor||r.line.color||n.themeStyle.crosshairLine,r.opacity,n.theme.indexOf("Bootstrap5")>-1||"Fluent2HighContrast"===n.theme||n.theme.indexOf("Tailwind3")>-1?r.dashArray||"2.5":r.dashArray,s),this.drawCrosshairLine(e,l,u.x,this.valueY,u.width,0,s),e=new i.PathOption(this.elementID+"_VerticalLine","none",r.line.width,r.verticalLineColor||r.line.color||n.themeStyle.crosshairLine,r.opacity,n.theme.indexOf("Bootstrap5")>-1||"Fluent2HighContrast"===n.theme||n.theme.indexOf("Tailwind3")>-1?r.dashArray||"2.5":r.dashArray,h),this.drawCrosshairLine(e,l,this.valueX,u.y,0,u.height,h),this.renderAxisTooltip(n,u,c),w.appendChild(c),n.tooltip.enable||l.appendChild(w)):0===f.childNodes.length?(y=n.crosshair.highlightCategory&&0!==this.highlightWidth&&(n.isTransposed||n.requireInvertedAxis),p=n.crosshair.highlightCategory&&0!==this.highlightWidth&&!n.requireInvertedAxis,c=n.renderer.createGroup({id:this.elementID+"_crosshair_axis"}),e=new i.PathOption(this.elementID+"_HorizontalLine",y?r.horizontalLineColor||r.line.color?this.crosshairLightenColor(r.horizontalLineColor||r.line.color):n.themeStyle.crosshairBackground:"none",y?0:r.line.width,y?"none":r.horizontalLineColor||r.line.color||n.themeStyle.crosshairLine,r.opacity,y?null:n.theme.indexOf("Bootstrap5")>-1||"Fluent2HighContrast"===n.theme||n.theme.indexOf("Tailwind3")>-1?r.dashArray||"2.5":r.dashArray,s),this.renderCrosshairLine(e,f),e=new i.PathOption(this.elementID+"_VerticalLine",p?r.verticalLineColor||r.line.color?this.crosshairLightenColor(r.verticalLineColor||r.line.color):n.themeStyle.crosshairBackground:"none",p?0:r.line.width,p?"none":r.verticalLineColor||r.line.color||n.themeStyle.crosshairLine,r.opacity,p?null:n.theme.indexOf("Bootstrap5")>-1||"Fluent2HighContrast"===n.theme||n.theme.indexOf("Tailwind3")>-1?r.dashArray||"2.5":r.dashArray,h),this.renderCrosshairLine(e,f),f.appendChild(c),this.renderAxisTooltip(n,u,f.lastChild)):(document.getElementById(this.elementID+"_HorizontalLine").setAttribute("d",s),document.getElementById(this.elementID+"_VerticalLine").setAttribute("d",h),this.renderAxisTooltip(n,u,f.lastChild))},n.prototype.crosshairLightenColor=function(n){var t=wu(vi(n));return"rgb("+t.r+","+t.g+","+t.b+",0.25)"},n.prototype.adjustCrosshairPositionForOverflow=function(n,t,i){return i.crosshairModule.crosshairLeftOverflow>0&&(n+=t?-i.crosshairModule.crosshairLeftOverflow/2:i.crosshairModule.crosshairLeftOverflow/2),i.crosshairModule.crosshairRightOverflow>0&&(n+=t?i.crosshairModule.crosshairRightOverflow/2:-i.crosshairModule.crosshairRightOverflow/2),n},n.prototype.renderCrosshairLine=function(n,t){var i=this.chart.renderer.drawPath(n);t.appendChild(i)},n.prototype.drawCrosshairLine=function(n,i,r,u,f,e,o){var s;if(!document.getElementById(n.id)&&o&&(s=t.createElement("div",{id:n.id}),i.appendChild(s)),document.getElementById(n.id)){var c="top:"+u.toString()+"px;left:"+r.toString()+"px;width:"+f+"px;height:"+e+"px;fill:"+n.stroke+";border: 0.5px solid "+n.stroke+";opacity: "+n.opacity+" ; position: absolute",l=document.getElementById(n.id),h=document.getElementById(this.elementID+"_crosshair_axis");l.style.cssText=c;i.style.opacity="1";h&&(h.style.opacity="1")}},n.prototype.renderAxisTooltip=function(n,r,u){for(var o,f,a,c,e,k,d,l,h,w,b,p,s=0,g=n.axisCollections.length;s<g;s++)if(l=(o=n.axisCollections[s]).placeNextToAxisLine?o.updatedRect:o.rect,o.crosshairTooltip.enable)if(l&&(this.valueX<=l.x+l.width&&l.x<=this.valueX||this.valueY<=l.y+l.height&&l.y<=this.valueY)){if(c=document.getElementById(this.elementID+"_axis_tooltip_"+s),e=document.getElementById(this.elementID+"_axis_tooltip_text_"+s),(f=this.getAxisText(o))&&f.indexOf("<br")>-1&&(f=this.getAxisText(o).split(/<br.*?>/g)),!f)continue;if((a=this.tooltipLocation(f,o,r,l)).y+a.height/2>n.availableSize.height||a.y<0)continue;if(null===c&&(c=n.enableCanvas?this.svgRenderer.drawPath({id:this.elementID+"_axis_tooltip_"+s,fill:o.crosshairTooltip.fill||n.themeStyle.crosshairFill}):n.renderer.drawPath({id:this.elementID+"_axis_tooltip_"+s,fill:o.crosshairTooltip.fill||n.themeStyle.crosshairFill},null),u.appendChild(c),k=new i.TextOption(this.elementID+"_axis_tooltip_text_"+s,0,0,n.stockChart&&n.enableRtl?"end":"start",f),e=ct(n.enableCanvas?this.svgRenderer:n.renderer,k,o.crosshairTooltip.textStyle,o.crosshairTooltip.textStyle.color||n.themeStyle.crosshairLabelFont.color,u,null,null,null,null,null,null,0,null,n.enableCanvas,null,this.chart.themeStyle.crosshairLabelFont)),d=ic(this.rx,this.ry,a,this.arrowLocation,9,this.isTop,this.isBottom,this.isLeft,this.valueX,this.valueY),c.setAttribute("d",d),"string"!=typeof f&&f.length>1)for(h=0;h<f.length;h++)e.childNodes[h].textContent=f[h];else e.textContent=f;if(e.setAttribute("x",(a.x+5+(n.enableRtl?this.elementSize.width:0)).toString()),e.setAttribute("y",(a.y+5+3*this.elementSize.height/4).toString()),w=this.chart.element.id+"_shadow","string"!=typeof f&&f.length>1)for(b=0,e.setAttribute("y",(a.y+5+3*this.elementSize.height/(4*f.length)).toString()),h=0;h<e.children.length;h++)b+=this.elementSize.height/f.length,e.children[h].setAttribute("x",(a.x+5+(n.enableRtl?this.elementSize.width:0)+this.elementSize.width/2).toString()),e.children[h].setAttribute("y",(parseInt(e.getAttribute("y"),10)+b).toString()),e.children[h].style.textAnchor="middle";if("Fluent"===this.chart.theme||"FluentDark"===this.chart.theme||"Fabric"===this.chart.theme||"FabricDark"===this.chart.theme||"Fluent2HighContrast"===this.chart.theme){var y=this.chart.renderer.createDefs(),nt="Fluent"===this.chart.theme||"Fabric"===this.chart.theme?"#D2D0CE":"Fluent2HighContrast"===this.chart.theme?"#FFFFFF":null,tt="Fluent"===this.chart.theme||"Fabric"===this.chart.theme||"Fluent2HighContrast"===this.chart.theme?1:null;y.setAttribute("id",this.chart.element.id+"SVG_tooltip_definition");u.appendChild(y);c.setAttribute("stroke",nt);c.setAttribute("stroke-width"," "+tt)}else this.chart.theme.indexOf("Fluent2")>-1&&(c.setAttribute("box-shadow","0px 1.6px 3.6px 0px #00000021, 0px 0.3px 0.9px 0px #0000001A"),c.setAttribute("filter",t.Browser.isIE?"":"url(#"+w+")"),p='<filter id="'+w+'" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="3"/>',p+='<feOffset dx="-1" dy="3.6" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="0.2"/>',p+='<\/feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/><\/feMerge><\/filter>',(y=this.chart.renderer.createDefs()).setAttribute("id",this.chart.element.id+"SVG_tooltip_definition"),c.appendChild(y),y.innerHTML=p)}else v(this.elementID+"_axis_tooltip_"+s),v(this.elementID+"_axis_tooltip_text_"+s)},n.prototype.getAxisText=function(n){var t,r,i;return this.isBottom=!1,this.isTop=!1,this.isLeft=!1,this.isRight=!1,r="Category"===n.valueType&&"BetweenTicks"===n.labelPlacement?.5:0,i=n.isAxisOpposedPosition,"Horizontal"===n.orientation?(t=rc(Math.abs(this.valueX-n.rect.x),n.rect.width,n)+r,this.isBottom=!i,this.isTop=i):(t=uc(Math.abs(this.valueY-n.rect.y),n.rect.height,n)+r,this.isRight=i,this.isLeft=!i),"DateTime"===n.valueType?n.format(new Date(t)):"Category"===n.valueType?n.labels[Math.floor(t)]:"DateTimeCategory"===n.valueType?this.chart.dateTimeCategoryModule.getIndexedAxisLabel(n.labels[Math.round(t)],n.format):"Logarithmic"===n.valueType?n.format(Math.pow(n.logBase,t)):n.labelFormat&&null!==n.labelFormat.match("{value}")?n.labelFormat.replace("{value}",n.format(t)):n.format(t)},n.prototype.tooltipLocation=function(n,t,r,u){var f,s=r.x,c=r.y,o="Inside"===t.labelPosition,e=t.scrollbarSettings.enable||t.zoomingScrollBar&&t.zoomingScrollBar.svgObject?t.scrollBarHeight:0,l,a,v,y,p,w;if(this.elementSize=i.measureText(n,t.crosshairTooltip.textStyle,this.chart.themeStyle.crosshairLabelFont),"string"!=typeof n&&n.length>1)for(this.elementSize.width=0,this.elementSize.height=0,l=0;l<n.length;l++)a=i.measureText(n[l],t.crosshairTooltip.textStyle,this.chart.themeStyle.crosshairLabelFont),this.elementSize.height+=a.height,this.elementSize.width<a.width&&(this.elementSize.width=a.width);return v=t.isAxisOpposedPosition,"Horizontal"===t.orientation?(y=o?u.y-this.elementSize.height-19:u.y+e,p=o?u.y-this.elementSize.height-9:u.y+9,this.arrowLocation=new h(this.valueX,y),f=new i.Rect(this.valueX-this.elementSize.width/2-5,p+(o?0:e),this.elementSize.width+10,this.elementSize.height+10),v&&(f.y=o?u.y:u.y-(this.elementSize.height+10+9)-e),f.x<s&&(f.x=s),f.x+f.width>s+r.width&&(f.x-=f.x+f.width-(s+r.width)),this.arrowLocation.x+4.5>f.x+f.width-this.rx&&(this.arrowLocation.x=f.x+f.width-this.rx-9),this.arrowLocation.x-9<f.x+this.rx&&(this.arrowLocation.x=f.x+this.rx+9)):(e*=v?1:-1,this.arrowLocation=new h(u.x,this.valueY),w=o?u.x-e:u.x-this.elementSize.width-19,f=new i.Rect(w+e,this.valueY-this.elementSize.height/2-5,this.elementSize.width+10,this.elementSize.height+10),v?(f.x=o?u.x-this.elementSize.width-9:u.x+9+e,f.x+f.width>this.chart.availableSize.width&&(this.arrowLocation.x-=f.x+f.width-this.chart.availableSize.width,f.x-=f.x+f.width-this.chart.availableSize.width)):f.x<0&&(this.arrowLocation.x-=f.x,f.x=0),f.y<c&&(f.y=c),f.y+f.height>=c+r.height&&(f.y-=f.y+f.height-(c+r.height)),this.arrowLocation.y+4.5>f.y+f.height-this.ry&&(this.arrowLocation.y=f.y+f.height-this.ry-4.5),this.arrowLocation.y-4.5<f.y+this.ry&&(this.arrowLocation.y=f.y+this.ry+4.5)),f},n.prototype.stopAnimation=function(){de(this.crosshairInterval)},n.prototype.progressAnimation=function(){de(this.crosshairInterval)},n.prototype.removeCrosshair=function(n){var i=this.chart,r=i.enableCanvas?document.getElementById(this.elementID+"_Crosshair"):document.getElementById(this.elementID+"_UserInteraction"),u=i.enableCanvas?document.getElementById(this.elementID+"_crosshair_axis"):null;this.stopAnimation();r&&"0"!==r.getAttribute("opacity")&&(this.crosshairInterval=+setTimeout(function(){new t.Animation({}).animate(r,{duration:200,progress:function(n){r.style.animation="";i.enableCanvas?(r.style.opacity=(1-n.timeStamp/n.duration).toString(),u.style.opacity=(1-n.timeStamp/n.duration).toString()):r.setAttribute("opacity",(1-n.timeStamp/n.duration).toString())},end:function(){i.enableCanvas?(r.style.opacity="0",u.style.opacity="0"):r.setAttribute("opacity","0");i.startMove=!1;i.tooltipModule&&(i.tooltipModule.valueX=null,i.tooltipModule.valueY=null)}})},n))},n.prototype.getModuleName=function(){return"Crosshair"},n.prototype.destroy=function(){},n}(),rh=function(){function n(n){this.selectionStyle=[];this.control=n}return n.prototype.seriesStyles=function(){var u,e,o=document.getElementById(this.styleId),f="{}",s=this.control.selectionPattern,h=this.control.highlightPattern,c,l,n,i,a,r,v,y;if(this.styleId.indexOf("highlight")>0&&""!==this.control.highlightColor||t.isNullOrUndefined(o)||"None"!==s||"None"!==h){for(document.getElementById(this.styleId)&&document.getElementById(this.styleId).remove(),(o=this.control.createElement("div")).setAttribute("id",this.styleId),c=0,l=this.control.visibleSeries;c<l.length;c++){if(n=l[c],i=this.control.visibleSeries[n.index]||this.control.visibleSeries[n.index],this.styleId.indexOf("highlight")>0&&""!==this.control.highlightColor||(!t.isNullOrUndefined(s)||!t.isNullOrUndefined(h))&&("None"!==s||"None"!==h))if(a=this.styleId.indexOf("highlight")>0?h:s,"Pie"!==i.type&&"Funnel"!==i.type&&"Pyramid"!==i.type&&"circularchart3d"!==this.control.getModuleName()||"transparent"===this.control.highlightColor)i.type&&"transparent"!==this.control.highlightColor&&(e=i.opacity,f="{ fill:"+(u=this.pattern(this.control,this.styleId.indexOf("highlight")>0&&""!==this.control.highlightColor?this.control.highlightColor:""!==i.pointColorMapping||this.control.rangeColorSettings&&this.control.rangeColorSettings.length>1?i.points[0].color:i.interior,n.index,a,e))+"}");else for(r=0;r<i.points.length;r++)e=i.opacity,f="{ fill:"+(u=this.pattern(this.control,this.styleId.indexOf("highlight")>0&&""!==this.control.highlightColor?this.control.highlightColor:i.points[r].color,n.points[r].index,a,e))+"}",n.selectionStyle||(this.styleId,n.index,n.points[r].index,this.styleId,n.index,n.points[r].index),"None"===this.control.highlightMode&&this.control.legendSettings.enableHighlight&&!n.isRectSeries&&(o.innerText+="."+this.styleId+"_series_"+n.index+"> * { stroke-width:3;} ",this.selectionStyle.push([this.styleId+"_series_"+n.index,"stroke-width","3"])),f=f.indexOf("None")>-1?"{fill:"+(this.styleId.indexOf("highlight")>0&&""!==this.control.highlightColor?this.control.highlightColor:i.points[r].color)+"!important}":f,this.selectionStyle.push([this.styleId+"_series_"+n.index+"_point_"+n.points[r].index,"fill",u?u.indexOf("None")>-1?this.styleId.indexOf("highlight")>-1?this.control.highlightColor:"":u:""]);n.selectionStyle||(this.styleId,n.index,this.styleId,n.index);"None"===this.control.highlightMode&&this.control.legendSettings.enableHighlight&&!n.isRectSeries&&this.selectionStyle.push([this.styleId+"_series_"+n.index,"stroke-width",(parseFloat(n.width?n.width.toString():"0")+1).toString()]);f=f.indexOf("None")>-1?"{}":f;this.selectionStyle.push([this.styleId+"_series_"+n.index,"fill",u?u.indexOf("None")>-1?this.styleId.indexOf("highlight")>-1?this.control.highlightColor:"":u:""])}v="transparent"!==this.control.highlightColor?"circularchart3d"===this.control.getModuleName()?.2:.3:e;t.isNullOrUndefined(this.control.selectionModule)&&"None"===this.control.selectionMode&&""!==this.control.highlightColor&&(v=1);this.selectionStyle.push([this.unselected,"opacity",v.toString()]);y=document.getElementById(this.control.element.id+"_Secondary_Element");y&&y.appendChild(o)}},n.prototype.pattern=function(n,t,i,r,u){var s="#ffffff",y=n.svgObject,f=[],e={id:n.element.id+"_"+r+"_Selection_"+i,patternUnits:"userSpaceOnUse"},h="height",o="width",c=10,l=12,a,v;switch(r){case"Dots":e[h]=e[o]=6;e[o]=6;f[0]={x:0,y:0,width:7,height:7,transform:"translate(0,0)",fill:s,opacity:u,name:"rect"};f[1]={cx:3,cy:3,r:2,"stroke-width":1,fill:t,name:"circle"};break;case"Pacman":e[h]="18.384";e[o]="17.917";f[0]={name:"rect",x:0,y:0,width:17.917,height:18.384,transform:"translate(0,0)",fill:s,opacity:u};f[1]={name:"path",d:"M9.081,9.194l5.806-3.08c-0.812-1.496-2.403-3.052-4.291-3.052H8.835C6.138,3.063,3,6.151,3,8.723v1.679   c0,2.572,3.138,5.661,5.835,5.661h1.761c2.085,0,3.835-1.76,4.535-3.514L9.081,9.194z","stroke-width":1,stroke:t,fill:t};break;case"Chessboard":e[h]=e[o]=c;f[0]={x:0,y:0,width:c,height:c,fill:s,opacity:u,name:"rect"};f[1]={x:0,y:0,width:5,height:5,fill:t,opacity:u,name:"rect"};f[2]={x:5,y:5,width:5,height:5,fill:t,opacity:u,name:"rect"};break;case"Crosshatch":e[h]=e[o]="8";f[0]={x:0,y:0,width:8,height:8,transform:"translate(0,0)",fill:s,opacity:u,name:"rect"};f[1]={d:"M0 0L8 8ZM8 0L0 8Z","stroke-width":1,stroke:t,name:"path"};break;case"DiagonalForward":e[h]=e[o]=6;f[0]={x:0,y:0,width:6,height:6,transform:"translate(0,0)",fill:s,opacity:u,name:"rect"};f[1]={d:"M 3 -3 L 9 3 M 6 6 L 0 0 M 3 9 L -3 3","stroke-width":2,stroke:t,name:"path"};break;case"DiagonalBackward":e[h]=e[o]=6;f[0]={x:0,y:0,width:6,height:6,transform:"translate(0,0)",fill:s,opacity:u,name:"rect"};f[1]={d:"M 3 -3 L -3 3 M 0 6 L 6 0 M 9 3 L 3 9","stroke-width":2,stroke:t,name:"path"};break;case"Grid":e[h]=e[o]=6;f[0]={name:"rect",x:0,y:0,width:6,height:6,transform:"translate(0,0)",fill:s,opacity:u};f[1]={name:"path",d:"M1 3.5L11 3.5 M0 3.5L11 3.5 M0 7.5L11 7.5 M0 11.5L11 11.5 M5.5 0L5.5 12 M11.5 0L11.5 12Z","stroke-width":1,stroke:t};break;case"Turquoise":e[h]=e[o]=17;f[0]={name:"rect",x:0,y:0,width:17,height:17,transform:"translate(0,0)",fill:s,opacity:u};f[1]={name:"path",d:"M0.5739999999999998,2.643a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":c,stroke:t,fill:t};f[2]={name:"path",d:"M11.805,2.643a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":c,stroke:t,fill:t};f[3]={name:"path",d:"M6.19,2.643a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":c,stroke:t,fill:t};f[4]={name:"path",d:"M11.805,8.217a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":c,stroke:t,fill:t};f[5]={name:"path",d:"M6.19,8.217a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":c,stroke:t,fill:t};f[6]={name:"path",d:"M11.805,13.899a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":c,stroke:t,fill:t};f[7]={name:"path",d:"M6.19,13.899a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":c,stroke:t,fill:t};break;case"Star":e[h]=e[o]=21;f[0]={name:"rect",x:0,y:0,width:21,height:21,transform:"translate(0,0)",fill:s,opacity:u};f[1]={name:"path",d:"M15.913,18.59L10.762 12.842 5.613 18.75 8.291 11.422 0.325 9.91 8.154 8.33 5.337 0.91 10.488 6.658 15.637 0.75 12.959 8.078 20.925 9.59 13.096 11.17 z","stroke-width":1,stroke:t,fill:t};break;case"Triangle":e[h]=e[o]=c;f[0]={name:"rect",x:0,y:0,width:c,height:c,transform:"translate(0,0)",fill:s,opacity:u};f[1]={name:"path",d:"M4.987,0L7.48 4.847 9.974 9.694 4.987 9.694 0 9.694 2.493 4.847 z","stroke-width":1,stroke:t,fill:t};break;case"Circle":e[h]=e[o]=9;f[0]={name:"rect",x:0,y:0,width:9,height:9,transform:"translate(0,0)",fill:s,opacity:u};f[1]={name:"circle",cx:5.125,cy:3.875,r:3.625,"stroke-width":1,fill:t};break;case"Tile":e[h]=e[o]=18;f[0]={name:"rect",x:0,y:0,width:18,height:18,transform:"translate(0,0)",fill:s,opacity:u};f[1]={name:"path",d:"M0,9L0 0 9 0 z","stroke-width":1,stroke:t,fill:t};f[2]={name:"path",d:"M9,9L9 0 18 0 z","stroke-width":1,stroke:t,fill:t};f[3]={name:"path",d:"M0,18L0 9 9 9 z","stroke-width":1,stroke:t,fill:t};f[4]={name:"path",d:"M9,18L9 9 18 9 z","stroke-width":1,stroke:t,fill:t};break;case"HorizontalDash":e[h]=e[o]=l;f[0]={name:"rect",x:0,y:0,width:l,height:l,transform:"translate(0,0)",fill:s,opacity:u};f[1]={name:"path",d:"M0,1.5 L10 1.5 M0,5.5 L10 5.5 M0,9.5 L10 9.5 z","stroke-width":1,stroke:t,fill:t};break;case"VerticalDash":e[h]=e[o]=l;f[0]={name:"rect",x:0,y:0,width:l,height:l,transform:"translate(0,0)",fill:s,opacity:u};f[1]={name:"path",d:"M1.5,0 L1.5 10 M5.5,0 L5.5 10 M9.5,0 L9.5 10 z","stroke-width":1,stroke:t,fill:t};break;case"Rectangle":e[h]=e[o]=l;f[0]={name:"rect",width:l,height:l,fill:s,opacity:u};f[1]={name:"rect",x:1,y:2,width:4,height:9,fill:t,opacity:u};f[2]={name:"rect",x:7,y:2,width:4,height:9,fill:t,opacity:u};break;case"Box":e[h]=e[o]=c;f[0]={name:"rect",width:13,height:13,fill:s,opacity:u};f[1]={name:"rect",x:1.5,y:1.5,width:c,height:9,fill:t,opacity:u};break;case"HorizontalStripe":e[h]=l;e[o]=c;f[0]={name:"rect",x:0,y:0,width:c,height:l,transform:"translate(0,0)",fill:s,opacity:u};f[1]={name:"path",d:"M0,0.5 L10 0.5 M0,4.5 L10 4.5 M0,8.5 L10 8.5 z","stroke-width":1,stroke:t,fill:t};break;case"VerticalStripe":e[h]=c;e[o]=l;f[0]={name:"rect",x:0,y:0,width:l,height:c,transform:"translate(0,0)",fill:s,opacity:u};f[1]={name:"path",d:"M0.5,0 L0.5 10 M4.5,0 L4.5 10 M8.5,0 L8.5 10 z","stroke-width":1,stroke:t,fill:t};break;case"Bubble":e[h]=e[o]=20;f[0]={name:"rect",x:0,y:0,width:20,height:20,transform:"translate(0,0)",fill:s,opacity:u};f[1]={name:"circle",cx:5.217,cy:11.325,r:3.429,"stroke-width":1,fill:"#D0A6D1"};f[2]={name:"circle",cx:13.328,cy:6.24,r:4.884,"stroke-width":1,fill:t};f[3]={name:"circle",cx:13.277,cy:14.66,r:3.018,"stroke-width":1,fill:"#D0A6D1"}}return a=n.svgRenderer||n.renderer,v=a.createPattern(e,"pattern"),this.loadPattern(n,f,v,a),y.appendChild(v),"url(#"+n.element.id+"_"+r+"_Selection_"+i+")"},n.prototype.loadPattern=function(n,t,i,r){for(var f,u=0;u<t.length;u++)f=r.createPattern(t[u],t[u].name),i.appendChild(f)},n.prototype.concatIndexes=function(n,t){return n.concat(t)},n.prototype.checkVisibility=function(n,t){var i,r,o;if(void 0===t&&(t=null),!n)return!1;for(var u=!1,f=[],e=0,s=n;e<s.length;e++)i=s[e],-1===f.indexOf(i.series)&&f.push(i.series);for(r=0,o=f;r<o.length;r++)if(i=o[r],null!=t&&t.rangeColorSettings&&t.rangeColorSettings.length>0&&t.rangeColorSettings[0].colors.length>0){if(this.control.series[0].visible){u=!0;break}}else if(this.control.visibleSeries[i].visible){u=!0;break}return u},n.prototype.addSvgClass=function(n,t){var u=n.getAttribute("class")||"",e,r,f;if(u+=""!==u?" ":"",e=n.id.indexOf("datalabel")>-1||n.id.indexOf("Text")>-1||n.id.indexOf("TextShape")>-1,-1===u.indexOf(t))if(n.setAttribute("class",u+t),r=this.selectionStyle,t&&-1!==t.indexOf("highlight")&&("chart"===this.control.getModuleName()&&this.control.highlightModule?r=this.control.highlightModule.selectionStyle:"accumulationchart"===this.control.getModuleName()&&this.control.accumulationHighlightModule?r=this.control.accumulationHighlightModule.selectionStyle:"chart3d"===this.control.getModuleName()&&this.control.highlight3DModule?r=this.control.highlight3DModule.selectionStyle:"circularchart3d"===this.control.getModuleName()&&this.control.circularChartHighlight3DModule&&(r=this.control.circularChartHighlight3DModule.selectionStyle)),"g"===n.tagName.toLowerCase())n.querySelectorAll("*").forEach(function(n){for(var u=0;u<r.length;u++){var i=r[u],f=i[0],o=n.getAttribute("class")?n.getAttribute("class"):"";f!==t&&-1===f.indexOf(t)||-1!==o.indexOf("selection")||("fill"===i[1]&&i[2]&&!e&&(n.style.fill=i[2]),"opacity"===i[1]&&i[2]&&(n.style.opacity=i[2],n.style.fill=""),"stroke-width"===i[1]&&i[2]&&(n.style.strokeWidth=i[2]))}});else for(f=0;f<r.length;f++){var i=r[f],o=i[0],s=n.getAttribute("class")?n.getAttribute("class"):"";o!==t&&-1===o.indexOf(t)||-1!==t.indexOf("highlight")&&-1!==s.indexOf("selection")||("fill"===i[1]&&i[2]&&!e&&(n.style.fill=i[2]),"opacity"===i[1]&&i[2]&&(n.style.opacity=i[2],n.style.fill=""),"stroke-width"===i[1]&&i[2]&&-1===n.id.indexOf("legend_shape")&&(n.style.strokeWidth=i[2]))}},n.prototype.removeSvgClass=function(n,t){var f=n.getAttribute("class")||"",i,u;if(f.indexOf(t)>-1)if(n.setAttribute("class",f.replace(t,"").trim()),i=this.selectionStyle,t&&-1!==t.indexOf("highlight")&&("chart"===this.control.getModuleName()&&this.control.highlightModule?i=this.control.highlightModule.selectionStyle:"accumulationchart"===this.control.getModuleName()&&this.control.accumulationHighlightModule?i=this.control.accumulationHighlightModule.selectionStyle:"chart3d"===this.control.getModuleName()&&this.control.highlight3DModule?i=this.control.highlight3DModule.selectionStyle:"circularchart3d"===this.control.getModuleName()&&this.control.circularChartHighlight3DModule&&(i=this.control.circularChartHighlight3DModule.selectionStyle)),"g"===n.tagName.toLowerCase())n.querySelectorAll("*").forEach(function(n){for(var u=0;u<i.length;u++){var r=i[u],f=r[0],e=n.getAttribute("class")?n.getAttribute("class"):"";f!==t&&-1===f.indexOf(t)||-1!==e.indexOf("selection")||("fill"===r[1]&&r[2]&&(n.style.fill=""),"opacity"===r[1]&&r[2]&&(n.style.opacity=""),"stroke-width"===r[1]&&r[2]&&(n.style.strokeWidth=""))}});else for(u=0;u<i.length;u++){var r=i[u],e=r[0],o=n.getAttribute("class")?n.getAttribute("class"):"";e!==t&&-1===e.indexOf(t)||-1!==t.indexOf("highlight")&&-1!==o.indexOf("selection")||("fill"===r[1]&&r[2]&&(n.style.fill=""),"opacity"===r[1]&&r[2]&&(n.style.opacity=""),"stroke-width"===r[1]&&r[2]&&(n.style.strokeWidth=""))}},n.prototype.getChildren=function(n){for(var i=[],t=0;t<n.childNodes.length;t++)"defs"!==n.childNodes[t].tagName&&i.push(n.childNodes[t]);return i},n}(),cst=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dv=function(n){function u(t){var i=n.call(this,t)||this,r;return i.isdrawRect=!0,i.multiDataIndexes=[],i.pathIndex=0,i.seriesIndex=0,i.count=-1,i.dragRectArray=[],i.filterArray=[],i.totalSelectedPoints=[],i.chart=t,i.renderer=t.renderer,r=t.selectionMode,i.isMultiDrag=t.isMultiSelect&&r.indexOf("Drag")>-1,i.addEventListener(),i}return cst(u,n),u.prototype.addEventListener=function(){if(!(this.chart.isDestroyed||this.chart.stockChart&&this.chart.stockChart.onPanning)){var n=t.Browser.isPointer?"pointerleave":"mouseleave";this.chart.on(t.Browser.touchMoveEvent,this.mouseMove,this);this.chart.on(n,this.mouseLeave,this);this.chart.on("click",this.mouseClick,this);this.chart.on(t.Browser.touchStartEvent,this.mousedown,this);this.chart.on(t.Browser.touchEndEvent,this.mouseLeave,this)}},u.prototype.mousedown=function(n){var t=this.chart;t.isPointMouseDown||"None"===t.selectionMode||t.isChartDrag||(t.isDoubleTap||!t.isTouch||this.rectPoints)&&this.dragStart(t,t.chartAxisLayoutPanel.seriesClipRect,t.mouseDownX,t.mouseDownY,n)},u.prototype.removeEventListener=function(){this.chart.isDestroyed||(this.chart.off(t.Browser.touchMoveEvent,this.mouseMove),this.chart.off("pointerleave",this.mouseLeave),this.chart.off("click",this.mouseClick),this.chart.off(t.Browser.touchStartEvent,this.mousedown),this.chart.off(t.Browser.touchEndEvent,this.mouseLeave))},u.prototype.initPrivateVariables=function(n){this.styleId=n.element.id+"_ej2_chart_selection";this.unselected=n.element.id+"_ej2_deselected";this.closeIconId=n.element.id+"_ej2_drag_close";this.draggedRectGroup=n.element.id+"_ej2_drag_group";this.multiRectGroup=n.element.id+"_ej2_drag_multi_group";this.draggedRect=n.element.id+"_ej2_drag_rect";this.lassoPath=n.element.id+"_ej2_drag_path";this.selectedDataIndexes=[];this.rectPoints=null;this.isSeriesMode="Series"===n.selectionMode},u.prototype.invokeSelection=function(n){this.initPrivateVariables(n);this.series=t.extend({},n.visibleSeries,null,!0);this.seriesStyles();this.currentMode=n.selectionMode;n.selectionMode.indexOf("Drag")>-1||this.selectDataIndex(n,this.concatIndexes(n.selectedDataIndexes,this.selectedDataIndexes))},u.prototype.generateStyle=function(n){return n?(this.styleId.indexOf("selection")>1&&"None"!==this.chart.selectionMode&&(this.unselected=n.unSelectedStyle||this.unselected),this.styleId.indexOf("highlight")>0&&("None"!==this.chart.highlightMode||this.chart.legendSettings.enableHighlight)&&(this.unselected=n.nonHighlightStyle||this.unselected),n.selectionStyle||this.styleId+"_series_"+n.index):"undefined"},u.prototype.selectDataIndex=function(n,t){for(var r,i=0,u=t;i<u.length;i++)r=u[i],this.performSelection(r,n,this.getElementByIndex(n,r,"",this.series[r.series].marker.visible)[0])},u.prototype.getElementByIndex=function(n,t,i,u,f){void 0===i&&(i="");var e=n.element.id+"_Series_"+t.series+"_Point_"+t.point,o=n.series[t.series];return e="Scatter"!==o.type&&"Bubble"!==o.type&&u?e+"_Symbol"+i:e,!u&&f?[r(e+"_Text_0"+i),r(e+"_TextShape_0"+i)]:[r(e),"RangeArea"!==o.type&&"SplineRangeArea"!==o.type&&"RangeStepArea"!==o.type||!o.marker.visible?null:r(e+"1")]},u.prototype.getClusterElements=function(n,t){for(var r,f,e,s,o,u,i=[],h=0,c=n.visibleSeries;h<c.length;h++)r=c[h],r.visible&&(t=new ir(r.index,t.point),r.isRectSeries&&i.push(this.getElementByIndex(n,t)[0]),i.push(this.getElementByIndex(n,t,"",r.marker.visible)[0]),f=document.getElementById(n.element.id+"_Series_"+r.index+"_Point_"+t.point+"_Text_0"),e=document.getElementById(n.element.id+"_Series_"+r.index+"_Point_"+t.point+"_TextShape_0"),f&&i.push(f),e&&i.push(e),o=this.generateStyle(n.visibleSeries[t.series]),u=document.querySelectorAll("."+o),this.findTrackballElements(u,o),s=r.marker.visible&&r.isRectSeries?2:1,s+=f&&e?2:f||e?1:0,!n.isMultiSelect&&u.length>0&&u[0].id!==(i[i.length-s]?i[i.length-s].id:"")&&this.removeSelection(n,t.series,u,o,!0));return i},u.prototype.findTrackballElements=function(n,i){for(var f,e,u,r=0;r<n.length;r++)if(!t.isNullOrUndefined(n[r])&&(f=t.isNullOrUndefined(n[r].parentNode)?[]:[].slice.call(n[0].parentNode.querySelectorAll("."+i))).length>0){for(e=[],u=0;u<f.length;u++)f[u].id.indexOf("Trackball")>-1&&e.push(f[u]);this.removeStyles(e)}},u.prototype.findElements=function(n,t,i,r,u,f){return void 0===r&&(r=""),this.isSeriesMode?this.getSeriesElements(t):"Cluster"===this.currentMode?this.getClusterElements(n,i):this.getElementByIndex(n,i,r,u,f)},u.prototype.isAlreadySelected=function(n,i){var e,f,r,u;if("click"===i?(this.currentMode=this.chart.selectionMode,this.styleId=this.chart.element.id+(this.chart.selectionModule&&"None"!==this.chart.selectionMode?"_ej2_chart_selection":"_ej2_chart_highlight")):"mousemove"!==i&&"pointermove"!==i||(this.currentMode=this.chart.highlightMode,this.highlightDataIndexes=[],this.styleId=this.chart.element.id+"_ej2_chart_highlight"),"None"!==this.chart.highlightMode&&"None"===this.chart.selectionMode&&"click"===i)return!1;if(("None"!==this.chart.highlightMode||this.chart.legendSettings.enableHighlight)&&this.previousSelectedEle&&this.previousSelectedEle[0])for(e=n.parentNode?n.parentNode.id:"",f=void 0,n.parentNode&&(f=e.indexOf("SeriesGroup")>0||e.indexOf("SymbolGroup")>0),r=0;r<this.previousSelectedEle.length;r++)if(this.previousSelectedEle[r]&&this.previousSelectedEle[r].hasAttribute("class"))if(this.previousSelectedEle[r].getAttribute("class").indexOf("highlight")>-1&&(f||"click"===i)){if(this.previousSelectedEle[r].removeAttribute("class"),this.previousSelectedEle[r].id.indexOf("Group")>0)for(u=0;u<this.previousSelectedEle[r].children.length;u++)""===this.chart.highlightColor||t.isNullOrUndefined(this.chart.highlightColor)||"None"!==this.chart.highlightPattern||this.previousSelectedEle[r].children[u].setAttribute("fill",this.previousSelectedEle[r].children[u].id.indexOf("Text")>-1||this.previousSelectedEle[r].children[u].id.indexOf("TextShape")>-1?this.previousSelectedEle[r].children[u].getAttribute("fill"):this.control.visibleSeries[this.indexFinder(this.previousSelectedEle[r].id).series].interior),this.previousSelectedEle[r].children[u].removeAttribute("style");else""===this.chart.highlightColor||t.isNullOrUndefined(this.chart.highlightColor)||"None"!==this.chart.highlightPattern||this.previousSelectedEle[r].setAttribute("fill",this.previousSelectedEle[r].id.indexOf("Text")>-1||this.previousSelectedEle[r].id.indexOf("TextShape")>-1?this.previousSelectedEle[r].getAttribute("fill"):this.control.visibleSeries[this.indexFinder(this.previousSelectedEle[r].id).series].interior),this.previousSelectedEle[r].removeAttribute("style");this.addOrRemoveIndex(this.highlightDataIndexes,this.indexFinder(this.previousSelectedEle[r].id))}else!f&&this.previousSelectedEle[r].getAttribute("class").indexOf("highlight")>-1&&this.performSelection(this.indexFinder(this.previousSelectedEle[r].id),this.chart,this.previousSelectedEle[r]);return!0},u.prototype.mouseClick=function(n){this.calculateSelectedElements(n.target,n.type,!0);this.chart.highlightModule&&this.chart.highlightModule.highlightDataIndexes&&this.chart.highlightModule.highlightDataIndexes.length>0&&-1===n.target.id.indexOf("_chart_legend_")&&this.chart.isTouch&&t.Browser.isDevice&&this.removeLegendHighlightStyles()},u.prototype.calculateSelectedElements=function(n,i,u){if(!t.isNullOrUndefined(n)&&!("None"===this.chart.selectionMode&&"None"===this.chart.highlightMode||n.id&&-1===n.id.indexOf(this.chart.element.id+"_"))){if("mousemove"===i||"pointermove"===i){if(n.hasAttribute("class")&&(n.getAttribute("class").indexOf("highlight")>-1||n.getAttribute("class").indexOf("selection")>-1))return;if(!t.isNullOrUndefined(n.parentNode)&&n.parentNode.hasAttribute("class")&&(n.parentNode.getAttribute("class").indexOf("highlight")>0||n.parentNode.getAttribute("class").indexOf("selection")>0))return}if(this.isAlreadySelected(n,i),n.id&&n.id.indexOf("_Series_")>-1&&-1===n.id.indexOf("_Text_")){var f=void 0;if(n.id.indexOf("_Trackball_1")>-1)f=r(n.id.split("_Trackball_")[0]+"_Symbol"),f=t.isNullOrUndefined(f)?r(n.id.split("_Trackball_")[0]):f;else if(n.id.indexOf("_Trackball_0")>-1)return null;this.performSelection(this.indexFinder(n.id),this.chart,f||n,u)}}},u.prototype.performSelection=function(n,t,i,u){var e,o,f;(this.isSeriesMode="Series"===this.currentMode,"BoxAndWhisker"===t.visibleSeries[n.series].type&&i&&i.id===t.element.id+"_Series_"+n.series+"_Point_"+n.point+"_BoxPath"&&(i=i.parentNode),"Area"===t.visibleSeries[n.series].type&&("Point"===this.currentMode||"Cluster"===this.currentMode)&&i&&i.id===this.chart.element.id+"_Series_"+n.series)&&(e=this.generateStyle(t.series[n.series]),o=document.querySelectorAll("."+e),this.findTrackballElements(o,e),this.blurEffect(t.element.id,t.visibleSeries,!1,n.point));switch(this.currentMode){case"Series":this.selection(t,n,this.getSeriesElements(t.series[n.series]));this.selectionComplete(t,n,this.currentMode);this.blurEffect(t.element.id,t.visibleSeries,!1,n.point);break;case"Point":if(!isNaN(n.point)&&i||!u&&isNaN(n.point)){f=[];f.push(i);var c=this.chart.visibleSeries[n.series],s=t.element.id+"_Series_"+n.series+"_Point_"+n.point,h=document.getElementById(s+"_Text_0");c.marker.dataLabel.visible&&null!==h&&(f.push(h),f.push(document.getElementById(s+"_TextShape_0")));null===f[0]||!t.series[n.series].marker.visible||-1===t.series[n.series].type.indexOf("Column")&&-1===t.series[n.series].type.indexOf("Bar")||(-1===i.id.indexOf("_Symbol")&&r(i.id+"_Symbol")?f.push(r(i.id+"_Symbol")):-1!==i.id.indexOf("_Symbol")&&r(i.id.replace("_Symbol",""))&&f.push(r(i.id.replace("_Symbol",""))));this.selection(t,n,!u&&isNaN(n.point)?this.getSeriesElements(t.series[n.series]):f);this.selectionComplete(t,n,this.currentMode);this.blurEffect(t.element.id,t.visibleSeries,!1,n.point)}break;case"Cluster":isNaN(n.point)&&(u||!isNaN(n.point))||(!u&&isNaN(n.point)?this.selection(t,n,this.getSeriesElements(t.series[n.series])):this.clusterSelection(t,n),this.selectionComplete(t,n,this.currentMode),this.blurEffect(t.element.id,t.visibleSeries,!1,n.point))}},u.prototype.selectionComplete=function(n,t,i){var u,r,o,c,s,h=[],l,v,e,a,f,y;if("Cluster"===i){for(l=0,v=n.visibleSeries;l<v.length;l++)if((f=v[l]).visible)for(e=0;e<this.selectedDataIndexes.length;e++)r=n.isMultiSelect?this.selectedDataIndexes[e].point:t.point,o=f.index,u=f.points,!isNaN(r)&&r<u.length&&(c="RangeArea"!==f.type||f.type.indexOf("SplineRangeArea")>-1||f.type.indexOf("RangeStepArea")>-1?u[r].yValue:u[r].regions[0].y,s=u[r].xValue,"Category"===n.primaryXAxis.valueType?s=u[r].x.toLocaleString():"DateTime"===n.primaryXAxis.valueType&&(s=new Date(u[r].xValue)),"Indicator"!==f.category&&h.push({x:s,y:c,seriesIndex:o,pointIndex:r}),"RangeArea"!==f.type&&"SplineRangeArea"!==f.type&&"RangeStepArea"!==f.type||h.push({x:s,y:u[r].regions[0].y,seriesIndex:o,pointIndex:r}))}else if("Series"===i)if(n.isMultiSelect)for(e=0;e<this.selectedDataIndexes.length;e++)o=this.selectedDataIndexes[e].series,this.selectedDataIndexes.length>0&&h.push({seriesIndex:o});else o=this.selectedDataIndexes.length>0?this.selectedDataIndexes[0].series:this.highlightDataIndexes&&this.highlightDataIndexes.length>0?this.highlightDataIndexes[0].series:0,(this.selectedDataIndexes.length>0||this.highlightDataIndexes&&this.highlightDataIndexes.length>0)&&h.push({seriesIndex:o});else if("Point"===i)for(a=this.styleId.indexOf("highlight")>-1?this.highlightDataIndexes:this.selectedDataIndexes,e=0;e<a.length;e++)r=a[e].point,o=a[e].series,u=(f=n.series[o]).points,isNaN(r)||(s=u[r].xValue,c="RangeArea"!==f.type||f.type.indexOf("SplineRangeArea")>-1||f.type.indexOf("RangeStepArea")>-1?u[r].yValue:u[r].regions[0].y,"Category"===n.primaryXAxis.valueType?s=u[r].x.toLocaleString():"DateTime"===n.primaryXAxis.valueType&&(s=new Date(u[r].xValue)),h.push({x:s,y:c,seriesIndex:o,pointIndex:r}));y={name:ue,selectedDataValues:h,cancel:!1,chart:n};n.trigger(ue,y)},u.prototype.selection=function(n,i,u){var o,e,f,s;"Lasso"!==this.currentMode&&(n.isMultiSelect||-1!==this.currentMode.indexOf("Drag")||-1!==this.styleId.indexOf("highlight")||"None"===n.selectionMode||this.removeMultiSelectElements(n,this.selectedDataIndexes,i,n.series));o=this.rangeColorMappingEnabled()?0:i.series;t.isNullOrUndefined(u[0])||(n.visibleSeries[o].isRectSeries&&u[0].id&&(document.getElementById(u[0].id+"_Symbol")?u.push(r(u[0].id+"_Symbol")):-1!==u[0].id.indexOf("SeriesGroup")&&document.getElementById(u[0].id.replace("SeriesGroup","SymbolGroup"))&&u.push(r(u[0].id.replace("SeriesGroup","SymbolGroup")))),e=void 0,f=u[0]&&(u[0].getAttribute("class")||""),f=f.replace("e-chart-focused","").trim(),s=u[0].parentNode&&(u[0].parentNode.getAttribute("class")||""),""!==f&&"Cluster"!==this.currentMode&&this.findTrackballElements(u,f),u[0]&&f.indexOf(this.getSelectionClass(u[0].id))>-1?this.removeStyles(u):u[0].parentNode&&s.indexOf(this.getSelectionClass(u[0].id))>-1?this.removeStyles([u[0].parentNode]):(this.previousSelectedEle="None"!==n.highlightMode||n.legendSettings.enableHighlight?u:[],this.applyStyles(u),e=!0),this.styleId.indexOf("highlight")>0&&("None"!==n.highlightMode||n.legendSettings.enableHighlight)?this.addOrRemoveIndex(this.highlightDataIndexes,i,e):this.addOrRemoveIndex(this.selectedDataIndexes,i,e))},u.prototype.clusterSelection=function(n,t){this.selection(n,t,this.getClusterElements(n,new ir(t.series,t.point)))},u.prototype.removeMultiSelectElements=function(n,t,i,r){for(var f,u=0;u<t.length;u++)f=r[t[u].series],(!this.isSeriesMode||this.toEquals(t[u],i,this.isSeriesMode))&&("Cluster"!==this.currentMode||this.toEquals(t[u],i,!1))&&(this.isSeriesMode||!this.toEquals(t[u],i,!0)||this.toEquals(t[u],i,!1))||(this.removeStyles(this.findElements(n,f,t[u],"",!1)),f.marker.visible&&this.removeStyles(this.findElements(n,f,t[u],"",!0)),f.marker.dataLabel.visible&&this.removeStyles(this.findElements(n,f,t[u],"",!1,!0)),t.splice(u,1),u--)},u.prototype.blurEffect=function(n,i,u,f){void 0===u&&(u=!1);void 0===f&&(f=0);for(var h=this.checkVisibility(this.highlightDataIndexes,this.chart)||this.checkVisibility(this.selectedDataIndexes,this.chart),c=0,l=i;c<l.length;c++){var e=l[c],o=void 0,s=void 0;this.rangeColorMappingEnabled()?!1===u?(o=Object.keys(e.rangeColorPoints).indexOf(e.points[f].interior),s=e.points[f].interior):(o=f,s=document.getElementById(n+"_chart_legend_shape_"+f).getAttribute("fill")):(o=e.index,s=this.chart.visibleSeries[e.index].interior);e.visible&&(this.checkSelectionElements(r(n+"SeriesGroup"+e.index),this.generateStyle(e),h,u,o,s),e.marker.dataLabel.visible&&!t.isNullOrUndefined(e.shapeElement)&&(this.checkSelectionElements(e.shapeElement,this.generateStyle(e),h,u,o,s),this.checkSelectionElements(e.textElement,this.generateStyle(e),h,u,o,s)),t.isNullOrUndefined(r(n+"SymbolGroup"+e.index))||this.checkSelectionElements(r(n+"SymbolGroup"+e.index),this.generateStyle(e),h,u,o,s))}},u.prototype.checkSelectionElements=function(n,i,u,f,e,o){var c,y,v;if(void 0===f&&(f=!0),void 0===e&&(e=0),void 0===o&&(o="#D3D3D3"),n){c=this.isSeriesMode?n.childNodes||[n]:n.childNodes||n;"None"!==this.chart.selectionMode&&("None"!==this.chart.highlightMode||this.chart.legendSettings.enableHighlight)&&(c=n.childNodes||n);"Cluster"===this.chart.selectionMode&&"text"===n.tagName.toLowerCase()&&n.id.indexOf("_Text_")>=0&&(c=[n]);for(var l=void 0,a=void 0,s=void 0,p=n,w=this.chart.visibleSeries[this.rangeColorMappingEnabled()?0:e].marker.dataLabel.visible&&(n.id.indexOf("Text")>-1||n.id.indexOf("TextShape")>-1)&&"g"!==n.tagName,h=0;h<c.length&&!w;h++)l=c[h].getAttribute("class")||"",a=c[h].parentNode.getAttribute("class")||"","None"===this.chart.selectionMode||"None"===this.chart.highlightMode&&!this.chart.legendSettings.enableHighlight||(i=l.indexOf("selection")>0||l.indexOf("highlight")>0?l:i,i=a.indexOf("selection")>0||a.indexOf("highlight")>0?a:i),-1===l.indexOf(i)&&-1===a.indexOf(i)&&u?this.addSvgClass(c[h],this.unselected):(p=c[h],this.removeSvgClass(c[h],this.unselected),this.removeSvgClass(c[h].parentNode,this.unselected),""!==c[h].id&&-1!==l.indexOf(this.unselected)&&-1===a.indexOf(i)&&this.highlightAnimation(c[h],1===this.chart.series.length?0:this.indexFinder(c[h].id).series,700,.3)),c[h].id.indexOf("Trackball")>0&&p.classList[0]===i&&(this.removeSvgClass(c[h],this.unselected),this.removeSvgClass(c[h].parentNode,this.unselected),this.addSvgClass(c[h],i));if(n.id.indexOf("Symbol")>-1&&n.querySelectorAll("."+i)[0]&&n.querySelectorAll("."+i)[0].getAttribute("class")===i&&(y=r(this.control.element.id+"_Series_"+n.id[n.id.length-1]),(y&&y.hasAttribute("class")?y.getAttribute("class"):"").indexOf(this.unselected)>-1&&this.removeSvgClass(y,this.unselected)),this.control.legendModule&&this.control.legendSettings.visible&&this.control.legendSettings.visible&&(!f||!this.rangeColorMappingEnabled||n!==this.control.visibleSeries[0].textElement&&n!==this.control.visibleSeries[0].shapeElement)&&(s=r(this.control.element.id+"_chart_legend_shape_"+e))){if(s.hasAttribute("class")&&(this.removeSvgClass(s,s.getAttribute("class")),t.isNullOrUndefined(this.chart.highlightColor&&""!==this.chart.highlightColor)||this.chart.legendSettings.enableHighlight||(s.setAttribute("stroke",o),"None"===this.chart.highlightPattern&&s.setAttribute("fill",o))),l=p.getAttribute("class")||"",a=p.parentNode.getAttribute("class")||"",-1===l.indexOf(i)&&-1===a.indexOf(i)&&u?(this.addSvgClass(s,"None"!==this.chart.highlightMode||!this.chart.legendSettings.enableHighlight||this.chart.selectionModule&&0!==this.chart.selectionModule.selectedDataIndexes.length?this.unselected:i),this.removeSvgClass(s,i),""===this.chart.highlightColor||t.isNullOrUndefined(this.chart.highlightColor)||(s.setAttribute("stroke",this.control.visibleSeries[e].interior),"None"===this.chart.highlightPattern&&s.setAttribute("fill",this.control.visibleSeries[e].interior))):(this.removeSvgClass(s,this.unselected),t.isNullOrUndefined(this.chart.highlightColor)||""===this.chart.highlightColor||(s.setAttribute("stroke",this.control.visibleSeries[e].interior),"None"===this.chart.highlightPattern&&s.setAttribute("fill",this.control.visibleSeries[e].interior)),""===l&&""===a||"EJ2-Trackball"===l.trim()?this.removeSvgClass(s,i):(this.addSvgClass(s,i),i.indexOf("highlight")>0&&""!==this.chart.highlightColor&&"transparent"!==this.chart.highlightColor&&!t.isNullOrUndefined(this.chart.highlightColor)&&(s.setAttribute("stroke",this.chart.highlightColor),this.styleId.indexOf("highlight")>0&&"None"===this.chart.highlightPattern&&s.setAttribute("fill",this.chart.highlightColor)))),v=void 0,this.rangeColorMappingEnabled())for(h=0;h<this.chart.rangeColorSettings.length;h++)s!==(v=document.getElementById(this.chart.element.id+"_chart_legend_shape_"+h))?(this.addSvgClass(v,this.unselected),this.removeSvgClass(v,i)):!0===f&&this.addSvgClass(v,i),-1===l.indexOf(i)&&!1===f&&this.removeSvgClass(v,this.unselected);f&&a.indexOf(i)>-1&&this.addSvgClass(s,i)}}},u.prototype.applyStyles=function(n){for(var i,r,s,e=0,o=n;e<o.length;e++)if(i=o[e],i){if(this.removeSvgClass(i.parentNode,this.unselected),this.removeSvgClass(i,this.unselected),"fill"===this.chart.series[0].pointColorMapping||this.rangeColorMappingEnabled()){var u=this.getSelectionClass(i.id),h=u.indexOf("highlight")>-1?parseInt(u.split(this.chart.element.id+"_ej2_chart_highlight_series_")[1],10):parseInt(u.split(this.chart.element.id+"_ej2_chart_selection_series_")[1],10),c=this.styleId.indexOf("highlight")>0?this.chart.highlightPattern:this.chart.selectionPattern,f=void 0;if((u.indexOf("highlight")>-1||u.indexOf("selection")>-1)&&(f=document.getElementById(this.chart.element.id+"_"+c+"_Selection_"+h)),-1===i.id.indexOf("legend")&&-1===i.id.indexOf("Text")&&-1===i.id.indexOf("TextShape")&&-1===i.id.indexOf("Group")&&null!=f)for(r=1;r<f.children.length;r++)f.children[r].setAttribute("fill",i.getAttribute("fill")),f.children[r].setAttribute("stroke",i.getAttribute("fill"))}if(this.addSvgClass(i,this.getSelectionClass(i.id)),i.id.indexOf("Group")>0)for(s=this.indexFinder(i.id),r=0;r<i.children.length;r++)"defs"!==i.children[r].nodeName&&this.stopElementAnimation(i.children[r],s.series);if(this.styleId.indexOf("highlight")>0&&""!==this.chart.highlightColor&&!t.isNullOrUndefined(this.chart.highlightColor)&&"None"===this.chart.highlightPattern&&"transparent"!==this.chart.highlightColor)if(i.id.indexOf("Group")>0)for(r=0;r<i.children.length;r++)i.children[r].setAttribute("fill",i.id.indexOf("Text")>-1||i.id.indexOf("TextShape")>-1?i.children[r].getAttribute("fill"):this.chart.highlightColor);else i.setAttribute("fill",i.id.indexOf("Text")>-1||i.id.indexOf("TextShape")>-1?i.getAttribute("fill"):this.chart.highlightColor)}},u.prototype.getSelectionClass=function(n){return this.generateStyle(this.control.visibleSeries[this.indexFinder(n).series])},u.prototype.removeStyles=function(n){for(var i,r,u=0,f=n;u<f.length;u++)if(i=f[u],i&&(this.removeSvgClass(i,this.getSelectionClass(i.id)),"None"===this.chart.highlightPattern&&""!==this.chart.highlightColor&&!t.isNullOrUndefined(this.chart.highlightColor)&&"transparent"!==this.chart.highlightColor))if(i.id.indexOf("Group")>0)for(r=0;r<i.children.length;r++)i.children[r].setAttribute("fill",i.id.indexOf("Text")>-1||i.id.indexOf("TextShape")>-1?i.children[r].getAttribute("fill"):this.control.visibleSeries[this.indexFinder(i.id).series].interior);else i.setAttribute("fill",i.id.indexOf("Text")>-1||i.id.indexOf("TextShape")>-1?i.getAttribute("fill"):this.control.visibleSeries[this.indexFinder(i.id).series].interior)},u.prototype.addOrRemoveIndex=function(n,t,i){for(var r=0;r<n.length;r++)this.toEquals(n[r],t,this.isSeriesMode)&&(n.splice(r,1),r--);i&&n.push(t)},u.prototype.toEquals=function(n,t,i){return(n.series===t.series||"Cluster"===this.currentMode&&!i)&&(i||n.point===t.point)},u.prototype.redrawSelection=function(n,i,r){this.isSeriesMode="Series"===i;t.isNullOrUndefined(i)||(n.isRedrawSelection=-1!==i.indexOf("Drag")||"Lasso"===i||r?!1:!0);var u=t.extend([],this.selectedDataIndexes,null,!0),f=t.extend([],this.highlightDataIndexes,null,!0);this.styleId.indexOf("highlight")>0&&f.length>0?(this.removeSelectedElements(n,this.highlightDataIndexes,n.series),u=f):this.removeSelectedElements(n,this.selectedDataIndexes,n.series);this.blurEffect(n.element.id,n.visibleSeries,!1);this.selectDataIndex(n,u)},u.prototype.legendSelection=function(n,i,u,f){var e,s,w,l,b,o,a,k,v,h,d,g,y,nt,c,p,tt,it;if("mousemove"===f){if(u.id.indexOf("text")>1&&(u=r(u.id.replace("text","shape"))),u.id.indexOf("marker")>1&&(u=r(u.id.replace("_marker",""))),u.id.indexOf("g")>1&&(u=r(u.id.replace("_g_","_shape_"))),u.hasAttribute("class")&&(u.getAttribute("class").indexOf("highlight")>-1||u.getAttribute("class").indexOf("selection")>-1))return;this.currentMode=this.chart.highlightMode}if(this.isAlreadySelected(u,f))if(e=this.generateStyle(n.visibleSeries[i]),s=document.querySelectorAll("."+e),this.isSeriesMode="Series"===this.currentMode,w=!0,s.length>0)this.removeSelection(n,i,s,e,w);else{for(l=0,b=n.visibleSeries;l<b.length;l++)(c=b[l]).index===i||n.isMultiSelect||(e=this.generateStyle(n.visibleSeries[c.index]),s=document.querySelectorAll("."+e),this.removeSelection(n,i,s,e,w));if(o=[],this.rangeColorMappingEnabled()){for(a=0,k=n.visibleSeries[0].seriesElement.children;a<k.length;a++)v=k[a],u.getAttribute("fill")===v.getAttribute("fill")&&(n.visibleSeries[0].marker.dataLabel.visible&&(h=this.indexFinder(v.id).point,!isNaN(h)&&h>=0&&(d=document.getElementById(this.chart.element.id+"_Series_0_Point_"+h+"_Text_0"),g=document.getElementById(this.chart.element.id+"_Series_0_Point_"+h+"_TextShape_0"),d&&o.push(d),g&&o.push(g))),o.push(v));for(y=0,nt=o;y<nt.length;y++){if(c=nt[y],t.isNullOrUndefined(c))return;this.checkSelectionElements(c,e,!1,!0,i)}}else if(n.visibleSeries[i].visible)for(p=0,tt=o=this.getSeriesElements(n.visibleSeries[i]);p<tt.length;p++){if(it=tt[p],t.isNullOrUndefined(it))return;this.checkSelectionElements(it,e,!1,!0,i)}this.isSeriesMode=!0;this.selection(n,new ir(i,NaN),o);this.isSeriesMode="Series"===n.selectionMode;this.blurEffect(n.element.id,n.visibleSeries,!0,i)}},u.prototype.rangeColorMappingEnabled=function(){return!(!(this.chart.rangeColorSettings&&this.chart.rangeColorSettings.length>0&&1===this.chart.visibleSeries.length&&this.chart.rangeColorSettings[0].colors.length>0)||"Column"!==this.chart.series[0].type&&"Bar"!==this.chart.series[0].type&&"Scatter"!==this.chart.series[0].type&&"Bubble"!==this.chart.series[0].type)},u.prototype.removeSelection=function(n,t,i,r,u){var f,e,o,h,l,s,c,a;if(i.length>0){for(f=[],e=0;e<i.length;e++)f.push(i[e]);for(this.removeStyles(f),this.isSeriesMode=!0,this.addOrRemoveIndex(this.selectedDataIndexes,new ir(t,NaN)),o=0,h=n.visibleSeries;o<h.length;o++)if(l=h[o],r=this.generateStyle(l),document.querySelectorAll("."+r).length>0){for(s=0,c=f;s<c.length;s++)a=c[s],this.checkSelectionElements(a,r,!0,!0,t);u=!1;break}u&&(this.isSeriesMode="Series"===n.selectionMode,this.blurEffect(n.element.id,n.visibleSeries))}},u.prototype.getSeriesElements=function(n){var t=[n.seriesElement];return(n.marker.visible&&"Scatter"!==n.type&&"Bubble"!==n.type&&!n.isRectSeries||n.marker.visible&&n.isRectSeries)&&t.push(n.symbolElement),n.marker.dataLabel.visible&&(t.push(n.textElement),t.push(n.shapeElement)),t},u.prototype.indexFinder=function(n){var t=["NaN","NaN"];return n.indexOf("SeriesGroup")>-1?(t=n.split("SeriesGroup"))[0]=t[1]:n.indexOf("SymbolGroup")>-1?(t=n.split("SymbolGroup"))[0]=t[1]:n.indexOf("_Point_")>-1?t=n.split("_Series_")[1].split("_Point_"):n.indexOf("_border_")>-1?t[0]=n.split("_border_")[1]:n.indexOf("_Series_")>-1?t[0]=n.split("_Series_")[1]:n.indexOf("_chart_legend_shape_")>-1?(t=n.split("_chart_legend_shape_"))[0]=t[1]:n.indexOf("TextGroup")>-1?(t=n.split("TextGroup"))[0]=t[1]:n.indexOf("ShapeGroup")>-1&&((t=n.split("ShapeGroup"))[0]=t[1]),new ir(parseInt(t[0],10),parseInt(t[1],10))},u.prototype.calculateDragSelectedElements=function(n,t,r){var e,l,a,v,b,k,d;this.removeSelectedElements(n,this.selectedDataIndexes,n.series);var u,s,p="Lasso"===n.selectionMode,c=new i.Rect(t.x,t.y,t.width,t.height),f=new h(n.chartAxisLayoutPanel.seriesClipRect.x,n.chartAxisLayoutPanel.seriesClipRect.y);this.removeOffset(c,f);e=[];l=[];this.isSeriesMode=!1;a=n.allowMultiSelection&&(this.rectGrabbing||this.resizing);(this.rectPoints=this.dragRectArray[a?this.targetIndex:this.count]=new i.Rect(t.x,t.y,t.width,t.height),t.width&&t.height&&!r)&&(v=new i.Rect(t.x,t.y,t.width,t.height),this.removeOffset(v,f),this.filterArray[a?this.targetIndex:this.count]=v);for(var g=function(t){var r,h,i,v,y,a;if(t.visible){for(u=t.points,e=[],!n.isTransposed&&-1===t.type.indexOf("Bar")||n.isTransposed&&-1!==t.type.indexOf("Bar")?(r=t.xAxis.rect.x-f.x,h=t.yAxis.rect.y-f.y):(r=t.xAxis.rect.y-f.y,h=t.yAxis.rect.x-f.x),i=0;i<u.length;i++)y="RangeArea"!==t.type||t.type.indexOf("SplineRangeArea")>-1||t.type.indexOf("RangeStepArea")>-1?u[i].yValue:u[i].regions[0].y,a=u[i].xValue,"Category"===n.primaryXAxis.valueType?a=u[i].x.toLocaleString():"DateTime"===n.primaryXAxis.valueType&&(a=new Date(u[i].xValue)),(v="BoxAndWhisker"===t.type?u[i].regions.some(function(n){return ht(n.x+r,n.y+h,c)}):"Lasso"===n.selectionMode?u[i].isSelect:n.allowMultiSelection?o.isPointSelect(u[i],r,h,o.filterArray):u[i].symbolLocations.some(function(n){return n&&ht(n.x+r,n.y+h,c)}))&&"Indicator"!==t.category&&(s=new ir(t.index,u[i].index),o.selection(n,s,o.findElements(n,t,s,"",!t.isRectSeries&&t.marker.visible)),e.push({x:a,y:y})),!v||"RangeArea"!==t.type&&"SplineRangeArea"!==t.type&&"RangeStepArea"!==t.type||e.push({x:a,y:u[i].regions[0].y});l.push(e)}},o=this,y=0,w=n.visibleSeries;y<w.length;y++)g(w[y]);this.blurEffect(n.element.id,n.visibleSeries);b=p?n.mouseDownX:t.x+t.width;k=p?n.mouseDownY:t.y;r||this.createCloseButton(b,k);d={name:sa,selectedDataValues:l,cancel:!1};n.trigger(sa,d)},u.prototype.removeOffset=function(n,t){n.x-=t.x;n.y-=t.y},u.prototype.isPointSelect=function(n,t,i,r){for(var e,u=n.symbolLocations[0],f=0,o=r;f<o.length;f++)if(e=o[f],e&&u&&ht(u.x+t,u.y+i,e))return!0;return!1},u.prototype.drawDraggingRect=function(n,u){var f=n.chartAxisLayoutPanel.seriesClipRect,s=n.chartArea.border.width,h=n.themeStyle.selectionRectFill,c=n.themeStyle.selectionRectStroke,p="Lasso"===n.selectionMode,w,a,y;switch(this.isdrawRect&&(f.x=f.x-s/2,f.y=f.y-s/2,f.width=f.width+s,f.height=f.height+s,this.isdrawRect=!1),n.selectionMode){case"DragX":u.y=f.y;u.height=f.height;break;case"DragY":u.x=f.x;u.width=f.width}if((u.width<5||u.height<5)&&!p)return null;if(w=n.selectionMode.indexOf("Drag")>-1||"Lasso"===n.selectionMode,n.allowMultiSelection&&w){var e=void 0,o=void 0,l=r(this.multiRectGroup);(l||(l=n.svgRenderer.createGroup({id:this.multiRectGroup}),n.svgObject.appendChild(l)),this.rectGrabbing||this.resizing)?(a=r(this.draggedRect+this.targetIndex),a.nextSibling&&t.remove(a.nextSibling),this.setAttributes(a,u)):r(this.draggedRectGroup+this.count)||(o=n.svgRenderer.createGroup({id:this.draggedRectGroup+this.count}),y=document.getElementById(n.element.id+"_series_svg"),n.enableCanvas?y.appendChild(o):l.appendChild(o));"Lasso"!==n.selectionMode?(e=n.svgRenderer.drawRectangle(new ft(this.draggedRect+this.count,h,{color:c,width:1},1,u,0,0,"",n.theme.indexOf("Fluent2")<1?"3":""))).style.cursor="move":e=n.svgRenderer.drawPath(new i.PathOption(this.lassoPath+this.count,h,3,c,1,"",this.path));o||this.rectGrabbing||this.resizing?this.rectGrabbing||this.resizing||o.appendChild(e):r(this.draggedRectGroup+this.count).appendChild(e)}else e=r(p?this.lassoPath:this.draggedRect),this.closeIcon&&v(this.closeIconId),e?p?e.setAttribute("d",this.path):this.setAttributes(e,u):(o=n.svgRenderer.createGroup({id:this.draggedRectGroup}),y=document.getElementById(n.element.id+"_series_svg"),n.enableCanvas?y.appendChild(o):n.svgObject.appendChild(o),e="Lasso"!==n.selectionMode?n.svgRenderer.drawRectangle(new ft(this.draggedRect,h,{color:c,width:1},1,u,0,0,"",n.theme.indexOf("Fluent2")<1?"3":"")):n.svgRenderer.drawPath(new i.PathOption(this.lassoPath,h,3,c,1,"",this.path)),o.appendChild(e))},u.prototype.getIndex=function(n){for(var i,t=n.length-1;t>0;t--)if(i=Number(n[t]),isNaN(i))break;return+n.substr(t+1,n.length-1)},u.prototype.createCloseButton=function(n,t){var i=this.chart.allowMultiSelection,e=this.chart.themeStyle.selectionCircleStroke,u=this.rectGrabbing||this.resizing,f=this.chart.svgRenderer.createGroup({id:this.closeIconId+(i?u?this.targetIndex:this.count:""),style:"cursor:pointer; visibility: visible;"}),s,o;f.appendChild(this.chart.svgRenderer.drawCircle(new ef(this.closeIconId+"_circle"+(i?u?this.targetIndex:this.count:""),"#FFFFFF",{color:e,width:1},1,n,t,10)));s="M "+(n-4)+" "+(t-4)+" L "+(n+4)+" "+(t+4)+" M "+(n-4)+" "+(t+4)+" L "+(n+4)+" "+(t-4);f.appendChild(this.chart.svgRenderer.drawPath({id:this.closeIconId+"_cross"+(i?u?this.targetIndex:this.count:""),d:s,stroke:e,"stroke-width":2,fill:e}));this.closeIcon=f;o=r(this.draggedRectGroup+(i?u?this.targetIndex:this.count:""));o&&o.appendChild(f)},u.prototype.removeDraggedElements=function(n,u,f){var h,e,c,o,s,l;if(u.id&&u.id.indexOf(this.closeIconId)>-1&&-1===f.indexOf("move")){if(h=!0,n.allowMultiSelection)if(e=this.getIndex(u.id),c=r(this.multiRectGroup),t.remove(r(this.draggedRectGroup+e)),this.dragRectArray[e]=null,this.filterArray[e]=null,this.totalSelectedPoints[e]=null,c&&0===c.childElementCount&&(v(c),this.dragRectArray=[],this.filterArray=[],this.totalSelectedPoints=[]),"Lasso"===this.currentMode){if(null!=this.multiDataIndexes[e])for(o=0;o<this.multiDataIndexes[e].length;o++)this.multiDataIndexes[e][o].isSelect=!1;for(this.multiDataIndexes[e]=null,s=0;s<this.multiDataIndexes.length;s++)if(null!=this.multiDataIndexes[s])for(h=!1,l=0;l<this.multiDataIndexes[s].length;l++)this.multiDataIndexes[s][l].isSelect=!0;this.calculateDragSelectedElements(n,this.dragRect,!0)}else if(this.filterArray.length)for(o=0;o<this.filterArray.length;o++)this.filterArray[o]&&(h=!1,this.calculateDragSelectedElements(n,this.filterArray[o],!0));else this.calculateDragSelectedElements(n,new i.Rect(0,0,0,0),!0);else t.remove(r(this.draggedRectGroup)),this.removeSelectedElements(n,this.selectedDataIndexes,n.series);this.blurEffect(n.element.id,n.visibleSeries);this.changeCursorStyle(!1,n.svgObject,"auto");n.allowMultiSelection&&!h||(this.rectPoints=null)}},u.prototype.resizingSelectionRect=function(n,t,r,u){var f,e,o;(n.allowMultiSelection&&u.id.indexOf("_ej2_drag_rect")>-1||this.dragRectArray[this.targetIndex])&&(u.id.indexOf("_ej2_drag_rect")>-1&&(this.targetIndex=this.getIndex(u.id)),e=this.dragRectArray[this.targetIndex],f=new i.Rect(e.x,e.y,e.width,e.height));(n.allowMultiSelection||(f=new i.Rect(this.rectPoints.x,this.rectPoints.y,this.rectPoints.width,this.rectPoints.height)),f)&&(o=this.findResizeMode(n.svgObject,f,t),this.resizing&&(f=oc(f.x,f.y,f.x+f.width,f.y+f.height,n.chartAxisLayoutPanel.seriesClipRect),this.drawDraggingRect(n,f),this.dragRect=f),r&&(this.resizing=o))},u.prototype.findResizeMode=function(n,t,u){var e="se-resize",o=!1,a,f;if(this.resizing){var c=t.x,l=t.y,s=u.x-c,h=u.y-l;switch(this.resizeMode){case 0:h=Math.abs(t.height+t.y-u.y);t.y=Math.min(t.height+t.y,u.y);t.height=h;break;case 1:s=Math.abs(t.width+t.x-u.x);t.x=Math.min(t.width+t.x,u.x);t.width=s;break;case 2:t.height=Math.abs(h);t.y=Math.min(u.y,l);break;case 3:t.width=Math.abs(s);t.x=Math.min(u.x,c);break;case 4:t.width=Math.abs(s);t.height=Math.abs(h);t.x=Math.min(u.x,c);t.y=Math.min(u.y,l)}}else for(a=[new i.Rect(t.x,t.y,t.width-5,5),new i.Rect(t.x,t.y,5,t.height),new i.Rect(t.x,t.y+t.height-5,t.width-5,5),new i.Rect(t.x+t.width-5,t.y+5,5,t.height-15),new i.Rect(t.x+t.width-10,t.y+t.height-10,10,10)],f=0;f<a.length;f++)if(ht(u.x,u.y,a[f])){e=4===f?e:f%2==0?"ns-resize":"ew-resize";o=!0;this.resizeMode=f;break}return"Lasso"!==this.currentMode&&this.changeCursorStyle(o,r(this.chart.allowMultiSelection?this.draggedRect+this.targetIndex:this.draggedRect),e),this.changeCursorStyle(o,n,e),o},u.prototype.changeCursorStyle=function(n,t,i){i=n?i:this.control.svgObject===t?"auto":"move";t&&(t.style.cursor=i)},u.prototype.removeSelectedElements=function(n,t,i){var f,r,e,o,u,s,h;for(t=n.isRedrawSelection?t:t.splice(0,t.length),r=0,e=i;r<e.length;r++)if(o=e[r],o.visible)for(f=this.getSeriesElements(o),this.removeStyles(f),u=0,s=f;u<s.length;u++)h=s[u],this.removeStyles(this.getChildren(h))},u.prototype.setAttributes=function(n,t){for(var u,i=0,r=Object.keys(t);i<r.length;i++)u=r[i],n.setAttribute(u,t[u])},u.prototype.draggedRectMoved=function(n,t,r){var u,f;(this.resizing||this.rectGrabbing)&&n.allowMultiSelection?(f=this.dragRectArray[this.targetIndex],u=new i.Rect(f.x,f.y,f.width,f.height)):u=new i.Rect(this.rectPoints.x,this.rectPoints.y,this.rectPoints.width,this.rectPoints.height);u.x-=t.x-n.mouseX;u.y-=t.y-n.mouseY;u=oc(u.x,u.y,u.x+u.width,u.height+u.y,n.chartAxisLayoutPanel.seriesClipRect);r?this.drawDraggingRect(n,u):this.calculateDragSelectedElements(n,u)},u.prototype.mouseLeave=function(n){this.completeSelection(n.target,n.type)},u.prototype.completeSelection=function(n,t){var i=this.chart;"None"!==i.selectionMode&&(this.currentMode=i.selectionMode,(this.dragging||this.resizing)&&this.dragRect.width>5&&this.dragRect.height>5?this.calculateDragSelectedElements(i,this.dragRect):(!i.allowMultiSelection&&this.rectGrabbing&&this.rectPoints.width&&this.rectPoints.height||this.rectGrabbing&&this.dragRectArray[this.targetIndex].width&&this.dragRectArray[this.targetIndex].height)&&this.draggedRectMoved(i,this.dragRect),"Lasso"===i.selectionMode&&this.dragging&&this.path&&-1!==this.path.indexOf("L")&&(i.allowMultiSelection?r(this.lassoPath+this.count)&&(r(this.lassoPath+this.count).setAttribute("d",this.path+"Z"),this.pointChecking(r(this.lassoPath+this.count))):(r(this.lassoPath).setAttribute("d",this.path+"Z"),this.pointChecking(r(this.lassoPath))),(this.dragging||this.resizing)&&this.calculateDragSelectedElements(i,this.dragRect)),this.dragging=!1,this.rectGrabbing=!1,this.resizing=!1,this.removeDraggedElements(i,n,t))},u.prototype.getDragRect=function(n,t){return oc(n.mouseDownX,n.mouseDownY,n.mouseX,n.mouseY,t)},u.prototype.dragStart=function(n,t,u,f,e){var s=n.selectionMode,o,c,a,v,l,y,w,p;if(this.currentMode=n.selectionMode,this.dragging=(s.indexOf("Drag")>-1||"Lasso"===s)&&(n.isDoubleTap||!n.isTouch)&&"PolarRadar"!==n.chartAreaType,o=e.target,this.path=void 0,this.dragging&&(this.count=r(this.multiRectGroup)?this.count+1:0,this.dragRect=new i.Rect(n.mouseDownX,n.mouseDownY,0,0),(n.mouseDownX<t.x||n.mouseDownX>t.x+t.width||n.mouseDownY<t.y||n.mouseDownY>t.y+t.height)&&(this.dragging=!1)),"Lasso"===s)for(c=0,a=n.visibleSeries;c<a.length;c++)if(v=a[c],v.visible)for(l=0,y=v.points;l<y.length;l++)w=y[l],n.allowMultiSelection||(w.isSelect=!1);"Lasso"!==s&&(this.rectPoints&&!n.allowMultiSelection&&(this.dragRect=new i.Rect(n.mouseDownX,n.mouseDownY,0,0),this.resizingSelectionRect(n,new h(u,f),!0),this.rectGrabbing=ht(u,f,this.rectPoints)),n.allowMultiSelection)&&(p=this.getIndex(o.id),this.targetIndex=this.isDragRect(o.id)?p:void 0,this.dragRectArray.length&&this.isDragRect(o.id)&&(this.resizingSelectionRect(n,new h(u,f),!0,o),this.rectGrabbing=ht(u,f,this.dragRectArray[p])))},u.prototype.isDragRect=function(n){return n.indexOf("_ej2_drag_rect")>-1},u.prototype.mouseMove=function(n){var r=this.chart,u=n.target,i=n.type;this.highlightChart(u,i);"None"!==r.selectionMode&&("touchmove"===i&&(t.Browser.isIos||t.Browser.isIos7)&&this.dragging&&n.preventDefault&&n.preventDefault(),this.selectionAndDrag(r,u,i))},u.prototype.highlightChart=function(n,i){if(("None"!==this.chart.highlightMode||this.chart.legendSettings.enableHighlight)&&!t.isNullOrUndefined(n)){if(n.id.indexOf("_legend_text")>1&&(n=r(n.id.replace("text","shape"))),n.hasAttribute("class")&&(n.getAttribute("class").indexOf("highlight")>-1||n.getAttribute("class").indexOf("selection")>-1))return;this.calculateSelectedElements(n,i);this.chart.highlightModule.highlightDataIndexes&&this.chart.highlightModule.highlightDataIndexes.length>0&&-1===n.id.indexOf("_chart_legend_g_")&&-1===n.id.indexOf("chart_legend_shape")&&-1===n.id.indexOf("_Series_")?this.removeLegendHighlightStyles():this.chart.highlightModule.highlightDataIndexes&&this.chart.highlightModule.highlightDataIndexes.length>0&&-1===n.id.indexOf("_chart_legend_")&&n.id.indexOf("_Series_")>-1&&this.chart.tooltip&&this.chart.tooltip.enableHighlight&&"None"===this.chart.highlightMode&&this.removeLegendHighlightStyles(!0)}},u.prototype.selectionAndDrag=function(n,t,i){ht(n.mouseX,n.mouseY,n.chartAxisLayoutPanel.seriesClipRect)&&!this.chart.enableCanvas?(this.rectGrabbing&&!this.resizing?this.draggedRectMoved(n,this.dragRect,!0):this.dragging&&!this.resizing&&("Lasso"===n.selectionMode?(this.getPath(n.mouseDownX,n.mouseDownY,n.mouseX,n.mouseY),this.drawDraggingRect(n,this.dragRect)):(this.dragRect=this.getDragRect(n,n.chartAxisLayoutPanel.seriesClipRect),this.drawDraggingRect(n,this.dragRect))),(this.rectPoints&&!n.allowMultiSelection||n.allowMultiSelection&&!this.dragging||this.resizing)&&this.resizingSelectionRect(n,new h(n.mouseX,n.mouseY),null,t)):this.completeSelection(t,i)},u.prototype.removeLegendHighlightStyles=function(n){var i,r,f,u,t;for(this.chart.highlightModule.highlightDataIndexes=[],r=0;r<this.chart.visibleSeries.length;r++)if(i=document.getElementsByClassName(this.generateStyle(this.chart.visibleSeries[r])),0===this.selectedDataIndexes.length){for(i=document.getElementsByClassName(this.generateStyle(this.chart.visibleSeries[r]));i.length>0;)if((t=i[0])&&(this.removeSvgClass(t,t.getAttribute("class")),t.id.indexOf("Group")>0&&!this.chart.visibleSeries[r].isRectSeries))for(f=this.indexFinder(t.id),u=0;u<t.children.length;u++)"defs"!==t.children[u].nodeName&&this.highlightAnimation(t.children[u],f.series,n?0:700,.3,!n);for(i=document.getElementsByClassName(this.unselected);i.length>0;)(t=i[0])&&(this.removeSvgClass(t,t.getAttribute("class")),""!==t.id&&this.highlightAnimation(t,1===this.chart.series.length?0:this.indexFinder(t.id).series,n?0:700,.3))}else for(i=document.getElementsByClassName(this.generateStyle(this.chart.visibleSeries[r]));i.length>0;)(t=i[0])&&(this.removeSvgClass(t,t.getAttribute("class")),this.addSvgClass(t,this.unselected))},u.prototype.getPath=function(n,t,i,r){this.dragging&&(this.path=this.path?this.path+" L"+i+" "+r:"M "+n+" "+t)},u.prototype.highlightAnimation=function(n,i,r,u,f){var e,o,s=this,h=parseFloat(this.chart.visibleSeries[i].width.toString())+1;f?o=-1!==n.id.indexOf("border")&&this.chart.visibleSeries[i].border.width?parseFloat(this.chart.visibleSeries[i].border.width.toString()):-1!==n.id.indexOf("Symbol")&&this.chart.visibleSeries[i].marker.border.width?parseFloat(this.chart.visibleSeries[i].marker.border.width.toString()):parseFloat(this.chart.visibleSeries[i].width.toString()):(e=-1!==n.id.indexOf("border")?1:-1!==n.id.indexOf("Symbol")?parseFloat(this.chart.visibleSeries[i].marker.opacity.toString()):-1!==n.id.indexOf("legend_shape")?parseFloat(this.chart.legendSettings.opacity.toString()):parseFloat(this.chart.visibleSeries[i].opacity.toString()),t.isNullOrUndefined(this.chart.selectionModule)&&"None"===this.chart.selectionMode&&""!==this.chart.highlightColor&&(u=1));(e||f&&o&&h)&&new t.Animation({}).animate(n,{duration:r,progress:function(t){var i,r,c;(n.style.animation="",s.chart.tooltip.enableHighlight&&s.chart.tooltipModule.svgTooltip)||(i=t.timeStamp/t.duration,f?(r=h+(o-h)*i,n.setAttribute("stroke-width",r.toString())):(c=u+(e-u)*i,n.setAttribute("opacity",c.toString())))},end:function(){s.chart.tooltip.enableHighlight&&s.chart.tooltipModule.svgTooltip||(f?n.setAttribute("stroke-width",o.toString()):n.setAttribute("opacity",e.toString()))}})},u.prototype.stopElementAnimation=function(n,i){var r;r=-1!==n.id.indexOf("border")?1:-1!==n.id.indexOf("Symbol")?parseFloat(this.chart.visibleSeries[i].marker.opacity.toString()):parseFloat(this.chart.visibleSeries[i].opacity.toString());n.getAttribute("e-animate")&&t.Animation.stop(n);n.setAttribute("opacity",r.toString())},u.prototype.pointChecking=function(n){var e,t=this,i=this.chart,o=r(i.svgId).getBoundingClientRect(),s=i.chartAxisLayoutPanel.seriesClipRect.x+Math.max(o.left,0),h=i.chartAxisLayoutPanel.seriesClipRect.y+Math.max(o.top,0),u,f;for(this.multiDataIndexes[this.count]=[],u=0,f=i.visibleSeries;u<f.length;u++)f[u].points.filter(function(r){r.symbolLocations&&r.symbolLocations.length&&(e=document.elementFromPoint(r.symbolLocations[0].x+s,r.symbolLocations[0].y+h));e===n?(r.isSelect=!0,t.chart.allowMultiSelection&&"Lasso"===t.currentMode&&(t.multiDataIndexes[t.count][t.seriesIndex]=r,t.seriesIndex++)):i.allowMultiSelection||(r.isSelect=!1)});this.seriesIndex=0},u.prototype.getModuleName=function(){return"Selection"},u.prototype.destroy=function(){this.removeEventListener()},u}(rh),lst=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pc=function(n){function r(t){var i=n.call(this,t)||this;return i.element=i.chart.element,i.textStyle=t.tooltip.textStyle,i.control=t,i.template=t.tooltip.template,i}return lst(r,n),r.prototype.getElement=function(n){return document.getElementById(n)},r.prototype.getTooltipElement=function(n){this.inverted=this.chart.requireInvertedAxis;this.header=null===this.control.tooltip.header?this.control.tooltip.shared?"${point.x}":"${series.name}":this.control.tooltip.header;this.formattedText=[];var t=document.getElementById(this.chart.element.id+"_tooltip"),i=this.chart.element.id.indexOf("stockChart")>-1;return!n&&!t||i?this.createElement():null},r.prototype.createElement=function(){var n=document.createElement("div");return n.id=this.element.id+"_tooltip",n.className="ejSVGTooltip",n.style.pointerEvents="none",n.style.position="absolute",n.style.zIndex="1",n},r.prototype.pushData=function(n,t,i){return!!n.series.enableTooltip&&(this.currentPoints.push(n),this.stopAnimation(),i&&!document.getElementById(i.id)&&(this.chart.stockChart?document.getElementById(this.chart.stockChart.element.id+"_Secondary_Element").appendChild(i):document.getElementById(this.element.id+"_Secondary_Element").appendChild(i)),!0)},r.prototype.removeHighlight=function(){for(var n,t=0,i=this.previousPoints.length;t<i;t++)((n=this.previousPoints[t]).series.isRectSeries||this.chart.tooltip.enableHighlight)&&n.series.visible&&this.highlightPoint(n.series,n.point.index,!1)},r.prototype.animateHighlight=function(n,i,r,u){var e=this,o=parseFloat(i.getAttribute("opacity")),f=null;null!==u&&(f=parseFloat(i.getAttribute("stroke-width")));new t.Animation({}).animate(i,{duration:r,progress:function(t){var r,s;(i.style.animation="",e.svgTooltip)||(null!==u&&(r=f+t.timeStamp/t.duration*(u-f),i.setAttribute("stroke-width",Math.max(r,u).toString())),s=o+t.timeStamp/t.duration*(n-o),i.setAttribute("opacity",Math.min(s,n).toString()))},end:function(){e.svgTooltip||(null!==u&&i.setAttribute("stroke-width",u.toString()),i.setAttribute("opacity",n.toString()))}})},r.prototype.highlightPoint=function(n,i,r){var o=this,f="BoxAndWhisker"===n.type?this.getElement(this.element.id+"_Series_"+n.index+"_Point_"+i+"_BoxPath"):this.getElement(this.element.id+"_Series_"+n.index+"_Point_"+i),h=this.control.accumulationSelectionModule,u="accumulationchart"===this.chart.getModuleName(),c=!!(h&&h.selectedDataIndexes.length>0);if(f||!n.isRectSeries)if(!c||c&&f.getAttribute("class")&&-1===f.getAttribute("class").indexOf("_ej2_chart_selection_series_")||!n.isRectSeries)if(n.isRectSeries&&""!==this.chart.highlightColor&&!t.isNullOrUndefined(this.chart.highlightColor))f.setAttribute("fill",r&&"transparent"!==this.chart.highlightColor?this.chart.highlightColor:""!==n.pointColorMapping?n.points[0].color:n.points[i].color||n.interior);else if("None"===this.control.highlightMode&&this.chart.tooltip.enableHighlight&&(!this.chart.tooltip.shared||u)){if(r&&(u?this.control.accumulationSelectionModule&&this.control.accumulationSelectionModule.selectedDataIndexes.length>0:this.chart.selectionModule&&this.chart.selectionModule.selectedDataIndexes.length>0))return;for(var a=this.element.id+"_Series_"+n.index+"_Point_"+i,v=function(t){var f=[],h="number"==typeof t.width?t.width:parseFloat(t.width),s;(f=u?[e.getElement(e.chart.element.id+"_Series_"+t.index)]:new dv(e.chart).getSeriesElements(t),u&&e.control.series[0].dataLabel.visible)&&(s=e.getElement(e.element.id+"_datalabel_Series_0"),s&&f.push(s));f.forEach(function(f){f.childNodes.forEach(function(e){var c=e.id.indexOf("border")>-1?1:e.id.indexOf("Symbol")>-1?t.marker.opacity:t.opacity,s=e.id.indexOf("border")>-1&&t.border.width?parseFloat(t.border.width.toString()):e.id.indexOf("Symbol")>-1&&t.marker.border.width?parseFloat(t.marker.border.width.toString()):h;r&&"transparent"!==o.chart.highlightColor&&""!==e.id?(u?f.getAttribute("id").indexOf("datalabel")>-1?uu(e.id).point===i:e.id===a:f.getAttribute("id")===o.element.id+"DataLabelCollection"?uu(e.id).series===n.index:t.index===n.index)?(e.setAttribute("opacity",c.toString()),n.isRectSeries&&!(e.id.indexOf("border")>-1)||u||e.setAttribute("stroke-width",(s+1).toString())):(e.setAttribute("opacity",u?e.id.indexOf("datalabel")>-1?"0.5":"0.3":e.getAttribute("id").indexOf("Text")>-1?"0.5":"0.3"),n.isRectSeries&&!(e.id.indexOf("border")>-1)||u||e.setAttribute("stroke-width",s.toString())):o.currentPoints[0]||""===e.id||o.animateHighlight(c,e,o.chart.tooltip.duration,n.isRectSeries&&!(e.id.indexOf("border")>-1)||u?null:s)})})},e=this,s=0,l=this.chart.visibleSeries;s<l.length;s++)v(l[s])}else n.isRectSeries&&f.setAttribute("opacity",(r&&"transparent"!==this.chart.highlightColor?n.opacity/2:n.opacity).toString());else f.setAttribute("opacity",n.opacity.toString())},r.prototype.highlightPoints=function(){for(var n,t=0,i=this.currentPoints;t<i.length;t++)n=i[t],(n.series.isRectSeries||this.chart.tooltip.enableHighlight)&&"Series"===n.series.category&&this.highlightPoint(n.series,n.point.index,!0)},r.prototype.createTooltip=function(n,t,r,u,f,e,o,s,c,l,a,y){void 0===c&&(c=!1);void 0===l&&(l=null);void 0===a&&(a=null);var p=this.currentPoints[0].series,w=n.tooltipModule||n.tooltip3DModule||n.accumulationTooltipModule;w&&null!==r?(t?(this.svgTooltip=new i.Tooltip({opacity:n.tooltip.opacity?n.tooltip.opacity:"Material3"===this.chart.theme||"Material3Dark"===this.chart.theme||this.chart.theme.indexOf("Bootstrap5")>-1?1:.75,header:this.headerText,content:this.text,fill:n.tooltip.fill,border:n.tooltip.border,enableAnimation:n.tooltip.enableAnimation,location:r,shared:this.control.tooltip.shared,crosshair:c,shapes:e,clipBounds:"PolarRadar"===this.chart.chartAreaType?new h(0,0):u,areaBounds:s,palette:this.findPalette(),template:y||this.template,data:a,theme:n.theme,offset:o,textStyle:n.tooltip.textStyle,isNegative:p.isRectSeries&&"Waterfall"!==p.type&&f&&f.y<0,inverted:this.chart.requireInvertedAxis&&p.isRectSeries,arrowPadding:this.text.length>1||this.chart.stockChart||null!==this.chart.tooltip.location.x||null!==this.chart.tooltip.location.y?0:7,availableSize:n.availableSize,duration:this.chart.tooltip.duration,isCanvas:this.chart.enableCanvas,isFixed:null!==this.chart.tooltip.location.x||null!==this.chart.tooltip.location.y,isTextWrap:n.tooltip.enableTextWrap&&"chart"===n.getModuleName(),blazorTemplate:{name:"Template",parent:this.chart.tooltip},controlInstance:this.chart,enableRTL:n.enableRtl,controlName:"Chart",allowHighlight:"chart"===n.getModuleName()&&!p.marker.allowHighlight,tooltipRender:function(){w.removeHighlight();w.highlightPoints();w.updatePreviousPoint(l)},animationComplete:function(n){n.tooltip.fadeOuted&&w.fadeOut(w.previousPoints)},showHeaderLine:this.chart.tooltip.showHeaderLine,showNearestTooltip:this.chart.tooltip.showNearestTooltip}),this.svgTooltip.appendTo(this.getElement(this.element.id+"_tooltip"))):this.svgTooltip&&(this.svgTooltip.location=r,this.svgTooltip.content=this.text,this.svgTooltip.header=this.headerText,this.svgTooltip.offset=o,this.svgTooltip.palette=this.findPalette(),this.svgTooltip.shapes=e,this.svgTooltip.data=a,this.svgTooltip.template=this.template,this.svgTooltip.controlName="Chart",this.svgTooltip.crosshair=c,this.svgTooltip.textStyle=n.tooltip.textStyle,this.svgTooltip.isNegative=p.isRectSeries&&"Waterfall"!==p.type&&f&&f.y<0,this.svgTooltip.clipBounds="PolarRadar"===this.chart.chartAreaType?new h(0,0):u,this.svgTooltip.arrowPadding=this.text.length>1||this.chart.stockChart||null!==this.chart.tooltip.location.x||null!==this.chart.tooltip.location.y?0:7,this.svgTooltip.allowHighlight="chart"===n.getModuleName()&&!p.marker.allowHighlight,this.svgTooltip.dataBind()),this.chart.isReact&&this.chart.renderReactTemplates()):v(this.chart.element.id+"_tooltip")},r.prototype.findPalette=function(){for(var t,i=[],n=0,r=this.currentPoints;n<r.length;n++)t=r[n],i.push(this.findColor(t,t.series));return i},r.prototype.findColor=function(n,t){return!t.isRectSeries||"Candle"!==t.type&&"Hilo"!==t.type&&"HiloOpenClose"!==t.type?(n.point.color&&"#ffffff"!==n.point.color?n.point.color:n.point.interior)||t.marker.fill||t.interior:n.point.color},r.prototype.updatePreviousPoint=function(n){n&&(this.currentPoints=this.currentPoints.concat(n));this.previousPoints=t.extend([],this.currentPoints,null,!0)},r.prototype.fadeOut=function(n){var t=this.chart.enableCanvas?this.getElement(this.element.id+"_tooltip_group"):this.getElement(this.element.id+"_tooltip_svg")||this.getElement(this.element.id+"_tooltipparent_template");t&&parseInt(t.getAttribute("opacity"),10)>0||(this.valueX=null,this.valueY=null,this.currentPoints=[],this.removeHighlight(),this.removeHighlightedMarker(n,!0),this.svgTooltip=null,this.control.trigger("animationComplete",{}))},r.prototype.removeHighlightedMarker=function(n,t){var r,u,i;if(this.chart.markerRender)for(r=0,u=n;r<u.length;r++)i=u[r],v(this.element.id+"_Series_"+i.series.index+"_Point_"+i.point.index+"_Trackball"),this.chart.markerRender.removeHighlightedMarker(i.series,i.point,t);this.previousPoints=[]},r.prototype.removeText=function(){this.textElements=[];var n=this.getElement(this.element.id+"_tooltip_group");if(n&&n.childNodes.length>0)for(;n.lastChild&&1!==n.childNodes.length;)n.removeChild(n.lastChild)},r.prototype.stopAnimation=function(){de(this.toolTipInterval)},r.prototype.removeTooltip=function(n){var t=this,i=this.getElement(this.element.id+"_tooltip");this.stopAnimation();i&&this.previousPoints.length>0&&(this.toolTipInterval=+setTimeout(function(){t.svgTooltip&&t.svgTooltip.fadeOut()},n))},r}(rs),ast=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vst=function(n){function r(t){var i=n.call(this,t)||this;return i.commonXvalues=[],i.addEventListener(),i}return ast(r,n),r.prototype.addEventListener=function(){if(!this.chart.isDestroyed){var n=t.Browser.isPointer?"pointerleave":"mouseleave";this.chart.on(n,this.mouseLeaveHandler,this);this.chart.on("tapHold",this.longPress,this);this.chart.on(t.Browser.touchMoveEvent,this.mouseMoveHandler,this);this.chart.on(t.Browser.touchEndEvent,this.mouseUpHandler,this)}},r.prototype.mouseUpHandler=function(){var n=this.control,t=this.getData();t.lierIndex=this.lierIndex;n.isTouch&&!this.isSelected(n)&&(ht(n.mouseX,n.mouseY,n.chartAxisLayoutPanel.seriesClipRect)&&n.tooltip.shared||!n.tooltip.shared)?n.crosshair.enable?n.startMove&&"Move"===n.tooltip.fadeOutMode&&this.removeTooltip(2e3):(this.tooltip(),"Move"===n.tooltip.fadeOutMode&&this.removeTooltip(n.tooltip.fadeOutDuration)):this.findData(t,this.previousPoints[0])||"Click"!==n.tooltip.fadeOutMode||this.removeTooltip(0)},r.prototype.mouseLeaveHandler=function(){this.removeTooltip(this.chart.tooltip.fadeOutDuration)},r.prototype.mouseMoveHandler=function(){var n=this.chart;n.stockChart&&n.stockChart.onPanning&&(n.mouseY<n.chartAxisLayoutPanel.seriesClipRect.y?n.mouseY=n.chartAxisLayoutPanel.seriesClipRect.y:n.mouseY>n.chartAxisLayoutPanel.seriesClipRect.y+n.chartAxisLayoutPanel.seriesClipRect.height&&(n.mouseY=n.chartAxisLayoutPanel.seriesClipRect.y+n.chartAxisLayoutPanel.seriesClipRect.height));n.disableTrackTooltip||this.isSelected(n)||(n.tooltip.shared||n.isTouch&&!n.startMove||this.tooltip(),ht(n.mouseX,n.mouseY,n.chartAxisLayoutPanel.seriesClipRect)?!n.tooltip.shared||n.isTouch&&!n.startMove||this.tooltip():n.tooltip.shared&&"Move"===n.tooltip.fadeOutMode&&this.removeTooltip(this.chart.tooltip.fadeOutDuration))},r.prototype.longPress=function(){var n=this.chart;return n.crosshair.enable&&ht(n.mouseX,n.mouseY,n.chartAxisLayoutPanel.seriesClipRect)&&(this.tooltip(),n.markerRender.markerMove(!1)),!1},r.prototype.tooltip=function(){var r=this.chart.enableCanvas?this.element.id+"_tooltip_group":this.element.id+"_tooltip_svg",t=this.getElement(r),u=this.chart.stockChart&&t&&t.firstChild.childNodes.length>1,i=t&&parseInt(t.getAttribute("opacity"),10)>0&&!u,n=this.getTooltipElement(i);this.chart.enableCanvas&&n&&(document.getElementById(this.chart.element.id+"_Secondary_Element").appendChild(n),n.appendChild(document.getElementById(this.chart.element.id+"_tooltip_svg")));this.chart.tooltip.shared?this.renderGroupedTooltip(this.chart,!i,n):this.renderSeriesTooltip(this.chart,!i,n)},r.prototype.findHeader=function(n){return""===this.header?"":(this.header=this.parseTemplate(n.point,n.series,this.header,n.series.xAxis,n.series.yAxis),""!==this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()?this.header:"")},r.prototype.findShapes=function(){var t;if(!this.chart.tooltip.enableMarker)return[];for(var i=[],n=0,r=this.currentPoints;n<r.length;n++)t=r[n],i.push(t.point.marker.shape||t.series.marker.shape||"Circle");return i},r.prototype.renderSeriesTooltip=function(n,t,i){var r=this.getData(),f=null,h=1/0,o,c,e,u,s;if(r.lierIndex=this.lierIndex,this.currentPoints=[],this.findData(r,this.previousPoints[0])){if((!n.dataEditingModule||!n.dataEditingModule.isPointDragging)&&this.previousPoints[0]&&r.point.index===this.previousPoints[0].point.index&&r.series.index===this.previousPoints[0].series.index)return null;this.pushData(r,t,i,!0)&&this.triggerTooltipRender(r,t,this.getTooltipText(r),this.findHeader(r))}else if(o=ht(n.mouseX,n.mouseY,n.chartAxisLayoutPanel.seriesClipRect),r.point||!this.isRemove||"Move"!==n.tooltip.fadeOutMode||n.tooltip.showNearestTooltip&&o){for(c=this.mergeXvalues(this.chart.visibleSeries),e=n.visibleSeries.length-1;e>=0;e--)u=n.visibleSeries[e],u.visible&&"TrendLine"!==u.category&&(r=this.getClosestX(n,u,c)||r,n.tooltip.showNearestTooltip&&o&&u.showNearestTooltip&&r&&r.point&&u.enableTooltip&&r.point.symbolLocations[0])&&(s=Math.sqrt(Math.pow(n.mouseX-r.series.clipRect.x-r.point.symbolLocations[0].x,2)+Math.pow(n.mouseY-r.series.clipRect.y-r.point.symbolLocations[0].y,2)),s<h&&(h=s,f=r));n.tooltip.showNearestTooltip&&f&&this.pushData(f,t,i,!0)&&(r=f,this.triggerTooltipRender(r,t,this.getTooltipText(r),this.findHeader(r)))}else this.removeTooltip(this.chart.tooltip.fadeOutDuration),this.isRemove=!1;r&&r.point&&this.findMouseValues(r,n,this)},r.prototype.triggerTooltipRender=function(n,r,u,f){var e=this,l={cancel:!1,name:gu,text:u,headerText:f,template:void 0,series:this.chart.isBlazor?{}:n.series,textStyle:this.textStyle,point:n.point,data:{pointX:n.point.x,pointY:n.point.y,seriesIndex:n.series.index,seriesName:n.series.name,pointIndex:n.point.index,pointText:n.point.text}},o=this.chart.border.width,s=this.chart.tooltip,c=function(u){if(u.cancel)e.removeHighlight(),t.remove(e.getElement(e.element.id+"_tooltip"));else{"BoxAndWhisker"===n.series.type&&(e.removeText(),r=!0);e.headerText=u.headerText;e.formattedText=e.formattedText.concat(u.text);e.text=e.formattedText;var f=e.getSymbolLocation(n);(f=f||new h(null,null)).x=null!==s.location.x?s.location.x:f.x;f.y=null!==s.location.y?s.location.y:f.y;f=null===f.x&&null===f.y?null:f;e.createTooltip(e.chart,r,f,n.series.clipRect,n.point,e.findShapes(),e.findMarkerHeight(e.currentPoints[0]),new i.Rect(o,o,e.chart.availableSize.width-3-2*o,e.chart.availableSize.height-3-2*o),e.chart.crosshair.enable,null,e.getTemplateText(n),e.template?u.template:"")}e.isRemove=!0};c.bind(this,n);this.chart.trigger(gu,l,c)},r.prototype.findMarkerHeight=function(n){var t=n.series;return(t.marker.visible||this.chart.tooltip.shared&&(!t.isRectSeries||t.marker.visible)||"Scatter"===t.type||"Scatter"===t.drawType)&&"Candle"!==t.type&&"Hilo"!==t.type&&"HiloOpenClose"!==t.type?(t.marker.height+2)/2+2*t.marker.border.width:0},r.prototype.findData=function(n,t){return n.point&&(!t||t.point!==n.point||t&&t.lierIndex>3&&t.lierIndex!==this.lierIndex||t.point===n.point)},r.prototype.getSymbolLocation=function(n){var t;if("BoxAndWhisker"!==n.series.type){if(!n.point.symbolLocations[0])return null;t=new h(n.point.symbolLocations[0].x,n.point.symbolLocations[0].y)}switch(n.series.type){case"BoxAndWhisker":return this.getBoxLocation(n);case"Waterfall":return this.getWaterfallRegion(n,t);case"RangeArea":case"RangeStepArea":case"SplineRangeArea":case"RangeColumn":return this.getRangeArea(n,t);default:return t}},r.prototype.getRangeArea=function(n,t){return n.point.regions[0]&&(this.inverted?t.x=n.point.regions[0].x+n.point.regions[0].width/2:t.y=n.point.regions[0].y+n.point.regions[0].height/2,"RangeStepArea"===n.series.type&&(t.y=n.point.regions[0].y+n.point.regions[0].height/2+n.point.regions[0].width)),t},r.prototype.getWaterfallRegion=function(n,t){return this.inverted?t.x=n.point.y<0?t.x+(this.chart.enableRtl?-n.point.regions[0].width:n.point.regions[0].width):t.x:t.y=n.point.y<0?t.y-n.point.regions[0].height:t.y,t},r.prototype.getTooltipText=function(n){var t=n.series;return this.parseTemplate(n.point,t,this.getFormat(this.chart,t),t.xAxis,t.yAxis)},r.prototype.getTemplateText=function(n){if(this.template=this.chart.enableHtmlSanitizer?this.chart.sanitize(this.template):this.template,this.template&&this.chart.tooltip.shared){for(var r=[],i=0;i<n.length;i++)r[i]=t.extend({},n[i].point),r[i].x=this.formatPointValue(n[i].point,n[i].series.xAxis,"x",!0,!1),"XY"===n[i].series.seriesType?r[i].y=this.formatPointValue(n[i].point,n[i].series.yAxis,"y",!1,!0):(r[i].low=this.formatPointValue(n[i].point,n[i].series.yAxis,"low",!1,!0),r[i].high=this.formatPointValue(n[i].point,n[i].series.yAxis,"high",!1,!0));return r}return this.template?((r=t.extend({},n.point)).x=this.formatPointValue(n.point,n.series.xAxis,"x",!0,!1),"XY"===n.series.seriesType?r.y=this.formatPointValue(n.point,n.series.yAxis,"y",!1,!0):(r.low=this.formatPointValue(n.point,n.series.yAxis,"low",!1,!0),r.high=this.formatPointValue(n.point,n.series.yAxis,"high",!1,!0)),r):n.point},r.prototype.renderGroupedTooltip=function(n,t,r){var u,s,h=[],d="PolarRadar"===n.chartAreaType?this.getData():null,a,v,g,y,p,o,c,l,k,e;this.stopAnimation();this.removeHighlight();this.currentPoints=[];y=Number.MAX_VALUE;p=Number.MAX_VALUE;t&&(n.stockChart?r&&!i.getElement(r.id)&&document.getElementById(n.stockChart.element.id+"_Secondary_Element").appendChild(r):r&&document.getElementById(this.element.id+"_Secondary_Element").appendChild(r));this.removeText();for(var f={text:[],cancel:!1,name:wh,data:[],point:[],series:[],headerText:"",textStyle:this.textStyle,template:[]},w=0,b=0,nt=n.visibleSeries;b<nt.length;b++)o=nt[b],o.enableTooltip&&o.visible&&("Cartesian"===n.chartAreaType&&o.visible?u=this.getClosestX(n,o,this.commonXValue(this.chart.visibleSeries)):"PolarRadar"===n.chartAreaType&&o.visible&&null!==d.point&&(u=new io(o.points[d.point.index],o)),n.tooltip.showNearestPoint&&!u&&(u=this.getClosestX(n,o,this.commonXValue([o]))),u&&(f.data.push({pointX:u.point.x,pointY:u.point.y,seriesIndex:u.series.index,seriesName:u.series.name,pointIndex:u.point.index,pointText:u.point.text}),f.series[w]=u.series,f.point[w]=u.point,f.headerText=this.findHeader(u),this.currentPoints.push(u),null!=this.template&&f.template.push(n.enableHtmlSanitizer?n.sanitize(this.template.toString()):this.template.toString()),f.text.push(this.getTooltipText(u)),a=n.requireInvertedAxis?n.mouseY-u.series.clipRect.y:n.mouseX-u.series.clipRect.x,v=n.mouseY-u.series.clipRect.y,u.point.symbolLocations&&u.point.symbolLocations.length&&Math.abs(a-u.point.symbolLocations[0].x)<=y&&Math.abs(u.point.symbolLocations[0].y-v)<Math.abs(p-v)&&(y=Math.abs(a-u.point.symbolLocations[0].x),p=u.point.symbolLocations[0].y,g=u),s="TrendLine"===u.series.category&&n.tooltip.shared?s:g||u,h.push(u)),w++);if(!n.tooltip.showNearestPoint){for(c=[],this.currentPoints=[],f.point=[],f.series=[],f.data=[],f.text=[],l=0,k=h;l<k.length;l++)e=k[l],e.point.symbolLocations[0].x!==s.point.symbolLocations[0].x&&(-1===e.series.type.indexOf("Column")&&-1===s.series.type.indexOf("Column")||e.point.xValue!==s.point.xValue)||(f.point.push(e.point),f.series.push(e.series),f.text.push(this.getTooltipText(e)),f.headerText=this.findHeader(e),c.push(e),f.data.push({pointX:e.point.x,pointY:e.point.y,seriesIndex:e.series.index,seriesName:e.series.name,pointIndex:e.point.index,pointText:e.point.text}));h=c;this.currentPoints=c}h.length>0&&this.currentPoints.length>0?this.triggerSharedTooltip(f,s,[],n,t,h):this.getElement(this.element.id+"_tooltip_path")&&this.getElement(this.element.id+"_tooltip_path").setAttribute("d","")},r.prototype.triggerSharedTooltip=function(n,t,r,u,f,e){var a,y,o=this,p=n.template,w={cancel:!1,name:wh,text:n.text,headerText:n.headerText,textStyle:n.textStyle,template:p,point:n.point,series:n.series,data:n.data},s=this.chart.border.width,c=[],l;u.stockChart&&(a=u.stockChart.enablePeriodSelector?u.stockChart.toolbarHeight:0,y=i.measureText(this.chart.stockChart.title,this.chart.stockChart.titleStyle,this.chart.themeStyle.tooltipLabelFont).height+10);l=function(n){var p,w,l;if(n.cancel)v(o.element.id+"_tooltip"),r.push(t);else{for("BoxAndWhisker"===t.series.type&&(o.removeText(),f=!0),p=0;p<n.text.length;p++)n.text[p]&&c.push(o.currentPoints[p]);o.currentPoints=c;o.formattedText=o.formattedText.concat(n.text);o.text=n.text;o.headerText=n.headerText;"object"!=typeof n.template?(n.template=n.template.split(","),n.template.length>c.length&&(n.template=n.template.splice(n.template.length-1))):n.template.length>c.length&&n.template.splice(n.template.length-1);w=o.chart.tooltip;o.findMouseValues(t,o.chart,o);l=o.findSharedLocation();(l=l||new h(null,null)).x=null!==w.location.x?w.location.x:l.x;l.y=null!==w.location.y?w.location.y:l.y;l=null===l.x&&null===l.y?null:l;-1===t.series.type.indexOf("Range")||ht(l.x,l.y,u.chartAxisLayoutPanel.seriesClipRect)?o.createTooltip(u,f,l,1===o.currentPoints.length?o.currentPoints[0].series.clipRect:null,1===e.length?e[0].point:null,o.findShapes(),o.findMarkerHeight(o.currentPoints[0]),new i.Rect(s,u.stockChart?a+y+s:s,o.chart.availableSize.width-3-2*s,o.chart.availableSize.height-3-2*s),o.chart.crosshair.enable,r,o.template?o.getTemplateText(e):null,o.template?n.template.join(""):""):(v(o.element.id+"_tooltip"),r.push(t));t=null}};l.bind(this,t,r);this.chart.trigger(wh,w,l)},r.prototype.findSharedLocation=function(){var n=this.chart.stockChart;if(n){1===this.text.length&&this.text.push("");var t=n.enablePeriodSelector?n.toolbarHeight:0,r=document.getElementById(n.element.id+"_ChartTitle"),i=""!==n.title?r.getBoundingClientRect().height+10:0;return"Nearest"===n.tooltip.position?new h(this.valueX,this.valueY+t+i):new h(this.chart.chartAxisLayoutPanel.seriesClipRect.x+5,this.chart.chartAxisLayoutPanel.seriesClipRect.y+t+5+i)}return this.currentPoints.length>1?new h(this.valueX,this.valueY):this.getSymbolLocation(this.currentPoints[0])},r.prototype.getBoxLocation=function(n){return this.lierIndex>3?n.point.outliers.length>0?n.point.symbolLocations[this.lierIndex-4]:null:{x:n.point.regions[0].x+n.point.regions[0].width/2,y:n.point.regions[0].y+n.point.regions[0].height/2}},r.prototype.parseTemplate=function(n,t,i,r,u){for(var e,h,o,f,c,l=RegExp,s=0,a=Object.keys(n);s<a.length;s++)f=new l("${point."+(o=a[s])+"}","gm"),i=i.replace(f.source,this.formatPointValue(n,"${point.x}"===f.source?r:u,o,"${point.x}"===f.source&&"TrendLine"!==t.category,"${point.high}"===f.source||"${point.open}"===f.source||"${point.close}"===f.source||"${point.low}"===f.source||"${point.y}"===f.source||"${point.minimum}"===f.source||"${point.maximum}"===f.source||"${point.outliers}"===f.source||"${point.upperQuartile}"===f.source||"${point.lowerQuartile}"===f.source||"${point.median}"===f.source));for(e=0,h=Object.keys(Object.getPrototypeOf(t));e<h.length;e++)f=new l("${series."+(o=h[e])+"}","gm"),c=t[o],i=i.replace(f.source,c);return i},r.prototype.formatPointValue=function(n,i,r,u,f){var e,o,s,h,c;return"Category"!==i.valueType&&u?(o=i.labelFormat&&null!==i.labelFormat.match("{value}"),h="Double"===i.valueType?+n[r]:n[r],e=o?i.labelFormat.replace("{value}",i.format(h)):i.format(h)):f&&!t.isNullOrUndefined(n[r])?(o=i.labelFormat&&null!==i.labelFormat.match("{value}"),s="outliers"===r?i.format(n[r][this.lierIndex-4]):"DateTime"===i.valueType?i.format(new Date(+n[r])):i.format(+n[r]),e=o?i.labelFormat.replace("{value}",s):s):"size"===r?(c=this.chart.intl.getNumberFormat({format:"",useGrouping:this.chart.useGroupingSeparator}),e=(e="number"==typeof n[r]?c(n[r]):n[r])||""):e=n[r],e},r.prototype.getFormat=function(n,t){if(t.tooltipFormat)return"XY"===t.seriesType&&"Indicator"===t.category?this.getIndicatorTooltipFormat(t,n,n.tooltip.format):t.tooltipFormat;if(!t.tooltipFormat&&n.tooltip.format)return"XY"===t.seriesType&&"Indicator"===t.category?this.getIndicatorTooltipFormat(t,n,n.tooltip.format):n.tooltip.format;var r="Histogram"===t.type?"${point.minimum}-${point.maximum}":"${point.x}",i=n.tooltip.shared?"${series.name}":r;switch(t.seriesType){case"XY":return"Indicator"===t.category&&this.getIndicatorTooltipFormat(t,n,n.tooltip.format),i+" : "+("Bubble"===t.type?n.theme.indexOf("Tailwind3")>-1?"${point.y}  Size : ${point.size}":"<b>${point.y}<\/b>  Size : <b>${point.size}<\/b>":n.theme.indexOf("Tailwind3")>-1?"${point.y}":"<b>${point.y}<\/b>");case"HighLow":return i+"<br/>High : <b>${point.high}<\/b><br/>Low : <b>${point.low}<\/b>";case"HighLowOpenClose":return i+"<br/>High : <b>${point.high}<\/b><br/>Low : <b>${point.low}<\/b><br/>Open : <b>${point.open}<\/b><br/>Close : <b>${point.close}<\/b>";case"BoxPlot":return i+"<br/>"+(this.lierIndex>3?"Outliers : <b>${point.outliers}<\/b>":"Maximum : <b>${point.maximum}<\/b><br/>Q3 : <b>${point.upperQuartile}<\/b><br/>Median : <b>${point.median}<\/b><br/>Q1 : <b>${point.lowerQuartile}<\/b><br/>Minimum : <b>${point.minimum}<\/b>")}},r.prototype.getIndicatorTooltipFormat=function(n,t,i){return"XY"===n.seriesType?n.name+" : <b>${point.y}<\/b>":i},r.prototype.removeHighlightedMarker=function(n,t){for(var i,r=0,u=n;r<u.length;r++)i=u[r],v(this.element.id+"_Series_"+i.series.index+"_Point_"+i.point.index+"_Trackball"),this.chart.markerRender&&this.chart.markerRender.removeHighlightedMarker(i.series,i.point,t);this.previousPoints=[]},r.prototype.getModuleName=function(){return"Tooltip"},r.prototype.destroy=function(){},r}(pc),yst=function(){function n(n){this.iconRectOverFill="transparent";this.iconRectSelectionFill="transparent";this.zoomCompleteEvtCollection=[];this.isZoomed=!1;this.chart=n;this.elementId=n.element.id;this.chart.svgRenderer=new i.SvgRenderer(this.elementId)}return n.prototype.createPanButton=function(n,t){var r=this.chart.svgRenderer,u=this.chart.zoomModule.isPanning?this.chart.themeStyle.toolkitSelectionColor:this.chart.themeStyle.toolkitFill;this.elementOpacity=!this.chart.zoomModule.isZoomed&&this.chart.zoomSettings.showToolbar?"0.2":"1";n.setAttribute("opacity","Fluent2HighContrast"===this.chart.theme?"1":this.elementOpacity);n.id=this.elementId+"_Zooming_Pan";n.setAttribute("role",this.chart.zoomSettings.accessibility.accessibilityRole?this.chart.zoomSettings.accessibility.accessibilityRole:"button");n.setAttribute("tabindex",this.chart.zoomSettings.accessibility.focusable?String(this.chart.zoomSettings.accessibility.tabIndex):"-1");n.setAttribute("aria-label",this.chart.zoomSettings.accessibility.accessibilityDescription?this.chart.zoomSettings.accessibility.accessibilityDescription:this.chart.getLocalizedLabel("Pan"));this.panElements=n;n.appendChild(r.drawRectangle(new ft(this.elementId+"_Zooming_Pan_1","transparent",{},1,this.chart.themeStyle.toolkitIconRect,this.chart.theme.indexOf("Fluent2")>-1||this.chart.theme.indexOf("Bootstrap5")>-1?4:0,this.chart.theme.indexOf("Fluent2")>-1||this.chart.theme.indexOf("Bootstrap5")>-1?4:0)));n.appendChild(r.drawPath(new i.PathOption(this.elementId+"_Zooming_Pan_2","Fluent2HighContrast"===this.chart.theme&&"0.2"===this.elementOpacity?"#3FF23F":u,null,null,1,null,"M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z")));t.appendChild(n);this.wireEvents(n,this.pan)},n.prototype.createZoomButton=function(n,t){var r=this.chart.svgRenderer,f=this.chart.zoomModule.isPanning||!this.chart.zoomModule.isZoomed&&this.chart.zoomSettings.showToolbar?this.chart.themeStyle.toolkitFill:this.chart.themeStyle.toolkitSelectionColor,u;this.elementOpacity=this.chart.zoomModule.isPanning||this.chart.zoomModule.isZoomed||!this.chart.zoomSettings.showToolbar?"1":"0.2";u=this.chart.zoomModule.isPanning?"transparent":this.chart.themeStyle.toolkitIconRectSelectionFill;n.id=this.elementId+"_Zooming_Zoom";n.setAttribute("role",this.chart.zoomSettings.accessibility.accessibilityRole?this.chart.zoomSettings.accessibility.accessibilityRole:"button");n.setAttribute("tabindex",this.chart.zoomSettings.accessibility.focusable?String(this.chart.zoomSettings.accessibility.tabIndex):"-1");n.setAttribute("aria-label",this.chart.zoomSettings.accessibility.accessibilityDescription?this.chart.zoomSettings.accessibility.accessibilityDescription:this.chart.getLocalizedLabel("Zoom"));n.setAttribute("opacity",this.elementOpacity);this.zoomElements=n;this.selectedID=this.chart.zoomModule.isPanning?this.chart.element.id+"_Zooming_Pan_1":this.elementId+"_Zooming_Zoom_1";n.appendChild(r.drawRectangle(new ft(this.elementId+"_Zooming_Zoom_1",u,{},1,this.chart.themeStyle.toolkitIconRect,this.chart.theme.indexOf("Fluent2")>-1||this.chart.theme.indexOf("Bootstrap5")>-1?4:0,this.chart.theme.indexOf("Fluent2")>-1||this.chart.theme.indexOf("Bootstrap5")>-1?4:0)));n.appendChild(r.drawPath(new i.PathOption(this.elementId+"_Zooming_Zoom_3",f,null,null,1,null,"M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z")));t.appendChild(n);this.wireEvents(n,this.zoom)},n.prototype.createZoomInButton=function(n,t,r){var u=this.chart.svgRenderer,f=this.chart.themeStyle.toolkitFill;n.id=this.elementId+"_Zooming_ZoomIn";n.setAttribute("role",this.chart.zoomSettings.accessibility.accessibilityRole?this.chart.zoomSettings.accessibility.accessibilityRole:"button");n.setAttribute("tabindex",this.chart.zoomSettings.accessibility.focusable?String(this.chart.zoomSettings.accessibility.tabIndex):"-1");n.setAttribute("aria-label",this.chart.zoomSettings.accessibility.accessibilityDescription?this.chart.zoomSettings.accessibility.accessibilityDescription:this.chart.getLocalizedLabel("ZoomIn"));n.appendChild(u.drawRectangle(new ft(this.elementId+"_Zooming_ZoomIn_1","transparent",{},1,this.chart.themeStyle.toolkitIconRect,this.chart.theme.indexOf("Fluent2")>-1?4:this.chart.theme.indexOf("Bootstrap5")>-1?2:0,this.chart.theme.indexOf("Fluent2")>-1?4:this.chart.theme.indexOf("Bootstrap5")>-1?2:0)));n.appendChild(u.drawPath(new i.PathOption(this.elementId+"_Zooming_ZoomIn_2",f,null,null,1,null,"M10.103,0C6.812,0,4.16,2.651,4.16,5.943c0,1.509,0.503,2.834,1.417,3.885l-0.274,0.229H4.571L0,14.628l0,0L1.372,16l4.571-4.572v-0.685l0.228-0.275c1.052,0.868,2.423,1.417,3.885,1.417c3.291,0,5.943-2.651,5.943-5.943C16,2.651,13.395,0,10.103,0z M10.058,10.058c-2.286,0-4.114-1.828-4.114-4.114c0-2.286,1.828-4.114,4.114-4.114c2.286,0,4.114,1.828,4.114,4.114C14.172,8.229,12.344,10.058,10.058,10.058z")));n.appendChild(u.drawPolygon(new hb(this.elementId+"_Zooming_ZoomIn_3","12.749,5.466 10.749,5.466 10.749,3.466 9.749,3.466 9.749,5.466 7.749,5.466 7.749,6.466 9.749,6.466 9.749,8.466 10.749,8.466 10.749,6.466 12.749,6.466",f)));this.zoomInElements=n;this.elementOpacity=r.zoomModule.isPanning||!r.zoomModule.isZoomed&&!r.zoomSettings.showToolbar&&!this.enableZoomButton?"0.2":"1";n.setAttribute("opacity",this.elementOpacity);t.appendChild(n);this.wireEvents(n,this.zoomIn)},n.prototype.createZoomOutButton=function(n,t,r){var u=this.chart.svgRenderer,f=this.chart.themeStyle.toolkitFill;n.id=this.elementId+"_Zooming_ZoomOut";n.setAttribute("role",this.chart.zoomSettings.accessibility.accessibilityRole?this.chart.zoomSettings.accessibility.accessibilityRole:"button");n.setAttribute("tabindex",this.chart.zoomSettings.accessibility.focusable?String(this.chart.zoomSettings.accessibility.tabIndex):"-1");n.setAttribute("aria-label",this.chart.zoomSettings.accessibility.accessibilityDescription?this.chart.zoomSettings.accessibility.accessibilityDescription:this.chart.getLocalizedLabel("ZoomOut"));n.appendChild(u.drawRectangle(new ft(this.elementId+"_Zooming_ZoomOut_1","transparent",{},1,this.chart.themeStyle.toolkitIconRect,this.chart.theme.indexOf("Fluent2")>-1||this.chart.theme.indexOf("Bootstrap5")>-1?4:0,this.chart.theme.indexOf("Fluent2")>-1||this.chart.theme.indexOf("Bootstrap5")>-1?4:0)));n.appendChild(u.drawPath(new i.PathOption(this.elementId+"_Zooming_ZoomOut_2","Fluent2HighContrast"===r.theme&&!r.zoomModule.isZoomed||"Fluent2HighContrast"===r.theme&&r.zoomModule.isPanning?"#3FF23F":f,null,null,1,null,"M0,14.622L1.378,16l4.533-4.533v-0.711l0.266-0.266c1.022,0.889,2.4,1.422,3.866,1.422c3.289,0,5.955-2.666,5.955-5.955S13.333,0,10.044,0S4.089,2.667,4.134,5.911c0,1.466,0.533,2.844,1.422,3.866l-0.266,0.266H4.578L0,14.622L0,14.622z M5.911,5.911c0-2.311,1.822-4.133,4.133-4.133s4.133,1.822,4.133,4.133s-1.866,4.133-4.133,4.133S5.911,8.222,5.911,5.911z M12.567,6.466h-5v-1h5V6.466z")));this.zoomOutElements=n;this.elementOpacity=r.zoomModule.isPanning||!r.zoomModule.isZoomed&&r.zoomSettings.showToolbar&&!this.enableZoomButton?"0.2":"1";n.setAttribute("opacity","Fluent2HighContrast"===r.theme?"1":this.elementOpacity);t.appendChild(n);this.wireEvents(n,this.zoomOut)},n.prototype.createResetButton=function(n,t,r,u){var f,e=this.chart.svgRenderer,o=this.chart.themeStyle.toolkitFill;n.id=this.elementId+"_Zooming_Reset";n.setAttribute("role",this.chart.zoomSettings.accessibility.accessibilityRole?this.chart.zoomSettings.accessibility.accessibilityRole:"button");n.setAttribute("tabindex",this.chart.zoomSettings.accessibility.focusable?String(this.chart.zoomSettings.accessibility.tabIndex):"-1");n.setAttribute("aria-label",this.chart.zoomSettings.accessibility.accessibilityDescription?this.chart.zoomSettings.accessibility.accessibilityDescription:this.chart.getLocalizedLabel("Reset"));this.elementOpacity=!r.zoomModule.isZoomed&&r.zoomSettings.showToolbar?"0.2":"1";n.setAttribute("opacity","Fluent2HighContrast"===r.theme?"1":this.elementOpacity);u?(f=i.measureText(this.chart.getLocalizedLabel("ResetZoom"),{size:"12px"},{size:"12px",fontStyle:"Normal",fontWeight:"400",fontFamily:"Segoe UI"}),n.appendChild(e.drawRectangle(new ft(this.elementId+"_Zooming_Reset_1","transparent",{},1,new i.Rect(0,0,f.width,f.height)))),ct(r.renderer,new i.TextOption(this.elementId+"_Zooming_Reset_2",0+f.width/2,0+3*f.height/4,"middle",this.chart.getLocalizedLabel("ResetZoom"),"rotate(0,0,0)","auto"),{size:"12px"},"Material3Dark"===this.chart.theme||"Fluent2Dark"===this.chart.theme||"Fluent2HighContrast"===this.chart.theme?"White":"black",n,null,null,null,null,null,null,0,null,r.enableCanvas,null,{size:"12px",fontStyle:"Normal",fontWeight:"400",fontFamily:"Segoe UI"})):(n.appendChild(e.drawRectangle(new ft(this.elementId+"_Zooming_Reset_1","transparent",{},1,this.chart.themeStyle.toolkitIconRect,this.chart.theme.indexOf("Fluent2")>-1||this.chart.theme.indexOf("Bootstrap5")>-1?4:0,this.chart.theme.indexOf("Fluent2")>-1||this.chart.theme.indexOf("Bootstrap5")>-1?4:0))),n.appendChild(e.drawPath(new i.PathOption(this.elementId+"_Zooming_Reset_2","Fluent2HighContrast"===r.theme&&"0.2"===this.elementOpacity?"#3FF23F":o,null,null,1,null,"M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z"))));t.appendChild(n);this.wireEvents(n,this.reset)},n.prototype.wireEvents=function(n,i){t.EventHandler.add(n,"mousedown touchstart",i,this);t.EventHandler.add(n,"mouseover",this.showTooltip,this);t.EventHandler.add(n,"mouseout",this.removeTooltip,this);t.EventHandler.add(this.chart.element,"mousemove",this.mouseMoveHandler,this);t.EventHandler.add(this.chart.zoomModule.toolkitElements,"mousedown",this.mouseDownHandler,this);window.addEventListener("mouseup",this.mouseUpHandler.bind(this),!0)},n.prototype.mouseMoveHandler=function(n){this.chart.zoomSettings.toolbarPosition.draggable&&(this.isDragging?this.performDragAndDrop(n):this.chart.zoomModule.toolkitElements.setAttribute("cursor",n.target.id.indexOf("Zooming_Rect")>-1?"grab":"none"))},n.prototype.mouseDownHandler=function(n){this.chart.zoomSettings.toolbarPosition.draggable&&!this.isDragging&&n.target.id.indexOf("Zooming_Rect")>-1&&(this.isDragging=!0,this.chart.zoomModule.toolkitElements.setAttribute("cursor","grabbing"))},n.prototype.mouseUpHandler=function(n){this.isDragging&&(this.isDragging=!1,this.chart.zoomModule.toolkitElements.setAttribute("cursor",n.target.id.indexOf("Zooming_Rect")>-1?"grab":"none"))},n.prototype.performDragAndDrop=function(n){var t=this.chart.zoomModule.toolkitElements.getBoundingClientRect().width,i=this.chart.zoomModule.toolkitElements.getBoundingClientRect().height,r=n.type.indexOf("touch")>-1?n.changedTouches[0].clientX:this.chart.mouseX,u=n.type.indexOf("touch")>-1?n.changedTouches[0].clientY:this.chart.mouseY,f=Math.max(this.chart.border.width+2,Math.min(r-t/2,this.chart.availableSize.width-t-this.chart.border.width-2)),e=Math.max(this.chart.border.width+2,Math.min(u-i/2,this.chart.availableSize.height-i-this.chart.border.width-2));r<this.chart.availableSize.width&&u<this.chart.availableSize.height&&(this.chart.zoomModule.toolkitElements.setAttribute("transform","translate("+f+","+e+")"),this.dragHorizontalRatio=f/this.chart.availableSize.width,this.dragVerticalRatio=e/this.chart.availableSize.height)},n.prototype.showTooltip=function(n){var u=n.currentTarget.id.split("_Zooming_")[1],o=n.pageX-(i.measureText(u,{size:"10px"},{size:"10px",fontStyle:"Normal",fontWeight:"400",fontFamily:"Segoe UI"}).width+5),t=r(n.currentTarget.id+"_1"),f=r(n.currentTarget.id+"_2"),e=r(n.currentTarget.id+"_3");"1"===n.currentTarget.getAttribute("opacity")?n.currentTarget.setAttribute("cursor","pointer"):n.currentTarget.setAttribute("cursor","auto");t&&(this.hoveredID=t.id,t.setAttribute("fill","Fluent2HighContrast"===this.chart.theme&&"#3FF23F"===n.currentTarget.childNodes[1].getAttribute("fill")?"transparent":this.chart.themeStyle.toolkitIconRectOverFill));f&&f.setAttribute("fill","Fluent2HighContrast"===this.chart.theme&&"#3FF23F"===n.currentTarget.childNodes[1].getAttribute("fill")?"#3FF23F":this.chart.themeStyle.toolkitSelectionColor);e&&e.setAttribute("fill","Fluent2HighContrast"===this.chart.theme&&"#3FF23F"===n.currentTarget.childNodes[1].getAttribute("fill")?"#3FF23F":this.chart.themeStyle.toolkitSelectionColor);this.chart.isTouch||this.isDragging||yw("EJ2_Chart_ZoomTip",this.chart.getLocalizedLabel(u),n.pageY+10,o,"10px")},n.prototype.removeTooltip=function(){var u,t,i,n;this.hoveredID&&r(this.hoveredID)&&(u=this.chart.zoomModule.isPanning?this.hoveredID.indexOf("_Pan_")>-1?this.chart.themeStyle.toolkitIconRectSelectionFill:"transparent":this.hoveredID.indexOf("_Zoom_")>-1&&"0.2"!==this.elementOpacity&&"Fluent2HighContrast"!==this.chart.theme?this.chart.themeStyle.toolkitIconRectSelectionFill:"transparent",r(this.hoveredID).setAttribute("fill",u));t=this.hoveredID?r(this.hoveredID.replace("_1","_2")):null;i=this.hoveredID?r(this.hoveredID.replace("_1","_3")):null;t&&(n=this.chart.zoomModule.isPanning?this.hoveredID.indexOf("_Pan_")>-1?this.chart.themeStyle.toolkitSelectionColor:"0.2"===this.elementOpacity&&"Fluent2HighContrast"===this.chart.theme&&"#3FF23F"===r(this.hoveredID).nextElementSibling.getAttribute("fill")?"#3FF23F":"1"===this.elementOpacity&&"Tailwind3"===this.chart.theme?"#212529":this.chart.themeStyle.toolkitFill:this.hoveredID.indexOf("_Zoom_")>-1?this.chart.themeStyle.toolkitSelectionColor:"Fluent2HighContrast"===this.chart.theme&&"#3FF23F"===r(this.hoveredID).nextElementSibling.getAttribute("fill")?"#3FF23F":"Tailwind3Dark"===this.chart.theme&&this.chart.zoomModule.isDevice?"black":this.chart.themeStyle.toolkitFill,t.setAttribute("fill",n));i&&(n=this.chart.zoomModule.isPanning||!this.chart.isZoomed&&this.chart.zoomSettings.showToolbar?"Fluent2HighContrast"===this.chart.theme&&"#3FF23F"===r(this.hoveredID).nextElementSibling.getAttribute("fill")&&"1"===this.elementOpacity?"#3FF23F":"1"===this.elementOpacity&&"Tailwind3"===this.chart.theme?"#212529":this.chart.themeStyle.toolkitFill:this.hoveredID.indexOf("_Zoom_")>-1?this.chart.themeStyle.toolkitSelectionColor:"Fluent2HighContrast"===this.chart.theme&&"#3FF23F"===r(this.hoveredID).nextElementSibling.getAttribute("fill")?"#3FF23F":this.chart.themeStyle.toolkitFill,i.setAttribute("fill",n));v("EJ2_Chart_ZoomTip")},n.prototype.reset=function(n){var h=this,u,r,e,f,o,i,s;if(!this.chart.zoomModule.isZoomed)return!1;for(r=this.chart,this.enableZoomButton=!1,r.redraw=r.enableCanvas?r.redraw:r.zoomSettings.enableAnimation,!r.zoomModule.isDevice&&r.zoomModule.toolkitElements?t.remove(r.zoomModule.toolkitElements):"touchstart"===n.type&&n.stopPropagation(),this.removeTooltip(),r.svgObject.setAttribute("cursor","auto"),e=[],this.zoomCompleteEvtCollection=[],f=0,o=r.axisCollections;f<o.length;f++)i=o[f],u={cancel:!1,name:nf,axis:i,previousZoomFactor:i.zoomFactor,previousZoomPosition:i.zoomPosition,currentZoomFactor:1,currentZoomPosition:0,previousVisibleRange:i.visibleRange,currentVisibleRange:null},i.zoomFactor=1,i.zoomPosition=0,i.zoomingScrollBar&&(i.zoomingScrollBar.isScrollUI=!1),u.cancel||(i.zoomFactor=u.currentZoomFactor,i.zoomPosition=u.currentZoomPosition,this.zoomCompleteEvtCollection.push(u)),e.push({zoomFactor:i.zoomFactor,zoomPosition:i.zoomFactor,axisName:i.name,axisRange:i.visibleRange}),r.zoomModule.isDevice&&!this.chart.isBlazor&&r.trigger(nf,u);return s={cancel:!1,axisCollection:e,name:or},!s.cancel&&this.chart.isBlazor?(this.chart.trigger(or,s,function(){h.setDefferedZoom(r)}),!1):this.setDefferedZoom(r)},n.prototype.setDefferedZoom=function(n){var o,f,u,e,i;if(n.disableTrackTooltip=!1,o=n.duration,n.duration=600,n.zoomModule.isZoomed=n.zoomModule.isPanning=n.isChartDrag=n.delayRedraw=!1,n.zoomModule.touchMoveList=n.zoomModule.touchStartList=[],n.zoomModule.pinchTarget=null,n.zoomRedraw=n.zoomSettings.enableAnimation,n.redraw){if(f=r(n.element.id+"_Zooming_KitCollection"),f&&f.remove(),n.tooltipModule)for(r(n.element.id+"_tooltip")&&r(n.element.id+"_tooltip").remove(),u=0,e=n.visibleSeries;u<e.length;u++)i=e[u],!t.isNullOrUndefined(i)&&(i.marker.visible||n.tooltip.shared||"Scatter"===i.type||"Bubble"===i.type)&&n.markerRender.removeHighlightedMarker(i,null,!0)}else n.removeSvg();return n.refreshAxis(),n.refreshBound(),this.elementOpacity="1",n.duration=o,n.redraw=!1,!1},n.prototype.zoomIn=function(){return this.zoomInOutCalculation(1,this.chart,this.chart.axisCollections,this.chart.zoomSettings.mode),!1},n.prototype.zoomOut=function(){return this.enableZoomButton=!1,this.zoomInOutCalculation(-1,this.chart,this.chart.axisCollections,this.chart.zoomSettings.mode),!1},n.prototype.zoom=function(){return this.chart.zoomModule.isPanning=!1,this.elementOpacity="1",this.chart.svgObject.setAttribute("cursor","auto"),this.zoomInElements&&this.zoomInElements.setAttribute("opacity",this.elementOpacity),this.elementOpacity=!this.chart.zoomModule.isZoomed&&this.chart.zoomSettings.showToolbar?"0.2":"1",this.zoomOutElements&&this.zoomOutElements.setAttribute("opacity",this.elementOpacity),this.applySelection(this.zoomElements.childNodes,this.chart.themeStyle.toolkitSelectionColor),"Fluent2HighContrast"===this.chart.theme&&(this.zoomInElements&&this.applySelection(this.zoomInElements.childNodes,this.chart.themeStyle.toolkitFill),this.zoomOutElements&&this.applySelection(this.zoomOutElements.childNodes,this.chart.themeStyle.toolkitFill)),this.panElements&&this.applySelection(this.panElements.childNodes,"Tailwind3Dark"===this.chart.theme?"#FFFFFF":"#737373"),r(this.selectedID)&&r(this.selectedID).setAttribute("fill","transparent"),this.selectedID=this.chart.element.id+"_Zooming_Zoom_1",r(this.selectedID).setAttribute("fill",this.chart.themeStyle.toolkitIconRectSelectionFill),!1},n.prototype.pan=function(){var n,t,i,u,f;return this.chart.zoomModule.isZoomed?((this.chart.zoomModule.isPanning=!0,this.chart.svgObject.setAttribute("cursor","pointer"),this.elementOpacity="0.2",this.zoomInElements&&this.zoomInElements.setAttribute("opacity",this.elementOpacity),this.zoomOutElements&&this.zoomOutElements.setAttribute("opacity",this.elementOpacity),"Fluent2HighContrast"===this.chart.theme)&&(n=r(this.chart.element.id+"_Zooming_ZoomOut"),n&&n.setAttribute("opacity","1"),t=r(this.chart.element.id+"_Zooming_ZoomIn"),t&&t.setAttribute("opacity","1"),i=r(this.chart.element.id+"_Zooming_ZoomOut_2"),i&&i.setAttribute("fill","#3FF23F"),u=r(this.chart.element.id+"_Zooming_ZoomIn_2"),u&&u.setAttribute("fill","#3FF23F"),f=r(this.chart.element.id+"_Zooming_ZoomIn_3"),f&&f.setAttribute("fill","#3FF23F")),this.panElements&&this.applySelection(this.panElements.childNodes,this.chart.themeStyle.toolkitSelectionColor),this.zoomElements&&this.applySelection(this.zoomElements.childNodes,"Tailwind3Dark"===this.chart.theme?"#FFFFFF":"#737373"),r(this.selectedID)&&r(this.selectedID).setAttribute("fill","transparent"),this.selectedID=this.chart.element.id+"_Zooming_Pan_1",r(this.selectedID).setAttribute("fill",this.chart.themeStyle.toolkitIconRectSelectionFill),!1):!1},n.prototype.zoomInOutCalculation=function(n,t,i,r){var v=this,f,u,c;if(this.isZoomed=!0,t.zoomSettings.showToolbar&&(this.elementOpacity=this.zoomInElements.getAttribute("opacity")),!t.zoomModule.isPanning&&"0.2"!==this.elementOpacity){t.zoomSettings.showToolbar&&!t.isZoomed&&(t.zoomModule.isZoomed=!0);var e=void 0,o=void 0,s=void 0;t.disableTrackTooltip=!0;t.delayRedraw=!0;f=void 0;this.zoomCompleteEvtCollection=[];for(var l=[],h=0,a=i;h<a.length;h++)u=a[h],f={cancel:!1,name:nf,axis:u,previousZoomFactor:u.zoomFactor,previousZoomPosition:u.zoomPosition,currentZoomFactor:u.zoomFactor,currentZoomPosition:u.zoomPosition,previousVisibleRange:u.visibleRange,currentVisibleRange:null},("Horizontal"===u.orientation&&"Y"!==r||"Vertical"===u.orientation&&"X"!==r)&&(e=1===(s=Math.max(Math.max(1/ff(u.zoomFactor,0,1),1)+.25*n,1))?1:ff(1/s,0,1),o=1===s?0:u.zoomPosition+.5*(u.zoomFactor-e),u.zoomPosition===o&&u.zoomFactor===e||(e=o+e>1?1-o:e),f.currentZoomFactor=e,f.currentZoomPosition=o,f.cancel||(u.zoomFactor=f.currentZoomFactor,u.zoomPosition=f.currentZoomPosition,this.zoomCompleteEvtCollection.push(f)),l.push({zoomFactor:u.zoomFactor,zoomPosition:u.zoomFactor,axisName:u.name,axisRange:u.visibleRange}));c={cancel:!1,axisCollection:l,name:or};this.chart.trigger(or,c,function(){c.cancel&&new ok(t).zoomCancel(i,v.zoomCompleteEvtCollection)})}},n.prototype.applySelection=function(n,t){for(var i=1,r=n.length;i<r;i++)n[i].setAttribute("fill",t)},n}(),ok=function(){function n(n){this.zoomCompleteEvtCollection=[];this.startPanning=!1;this.chart=n;this.isPointer=t.Browser.isPointer;this.browserName=t.Browser.info.name;this.wheelEvent="mozilla"===this.browserName?this.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel";this.cancelEvent=this.isPointer?"pointerleave":"mouseleave";this.addEventListener();this.isDevice=t.Browser.isDevice;var r=n.zoomSettings;this.toolkit=new yst(n);this.zooming=r;this.elementId=n.element.id;this.zoomingRect=new i.Rect(0,0,0,0);this.zoomAxes=[];this.zoomkitOpacity=1;this.isIOS=t.Browser.isIos||t.Browser.isIos7;this.isZoomed=this.performedUI=this.zooming.enablePan||this.chart.primaryXAxis.zoomFactor<1&&this.chart.primaryXAxis.zoomPosition>0||this.chart.primaryYAxis.zoomFactor<1&&this.chart.primaryYAxis.zoomPosition>0||this.isAxisZoomed(this.chart.axes);r.enableScrollbar&&(n.scrollElement=t.createElement("div",{id:n.element.id+"_scrollElement"}))}return n.prototype.renderZooming=function(n,t,i){this.calculateZoomAxesRange(t);!this.zooming.enableSelectionZooming||i&&(!t.isDoubleTap||1!==this.touchStartList.length)||this.isPanning&&!t.isDoubleTap?this.isPanning&&t.isChartDrag&&(!i||i&&1===this.touchStartList.length)&&(this.pinchTarget=i?n.target:null,this.doPan(t,t.axisCollections)):(this.isPanning=!!this.isDevice||this.isPanning,this.performedUI=!0,this.drawZoomingRectangle(t))},n.prototype.drawZoomingRectangle=function(n){var r=n.chartAxisLayoutPanel.seriesClipRect,c=new h(n.previousMouseMoveX,n.previousMouseMoveY),l=new h(n.mouseX,n.mouseY),i=this.zoomingRect=dw(c,l,r),u,o,f,e,s;if(i.width>0&&i.height>0){if(this.isZoomed=!0,n.disableTrackTooltip=!0,n.svgObject.setAttribute("cursor","crosshair"),"X"===this.zooming.mode?(i.height=r.height,i.y=r.y):"Y"===this.zooming.mode&&(i.width=r.width,i.x=r.x),n.tooltipModule)for(n.tooltipModule.removeTooltip(0),u=0,o=n.visibleSeries;u<o.length;u++)f=o[u],!t.isNullOrUndefined(f)&&(f.marker.visible||n.tooltip.shared)&&n.markerRender.removeHighlightedMarker(f,null,!0);n.crosshairModule&&n.crosshairModule.removeCrosshair(0);e=n.svgObject;this.chart.enableCanvas&&(s=document.getElementById(this.chart.element.id+"_Secondary_Element"),(e=this.chart.svgRenderer.createSvg({id:this.chart.element.id+"_zoomRect_svg",width:this.chart.availableSize.width,height:this.chart.availableSize.height})).style.cssText="position: absolute; display:block; pointer-events: none",s.appendChild(e));e.appendChild(n.svgRenderer.drawRectangle(new ft(this.elementId+"_ZoomArea",n.themeStyle.selectionRectFill,{color:n.themeStyle.selectionRectStroke,width:1},1,i,0,0,"","3")))}},n.prototype.doPan=function(n,i,u,f){var v,l,o,s=this,e,p,a,w,h,c;if(void 0===u&&(u=0),void 0===f&&(f=0),n.startMove&&n.crosshair.enable)return null;this.isZoomed=!0;this.startPanning=!0;this.offset=n.delayRedraw?this.offset:n.chartAxisLayoutPanel.seriesClipRect;n.delayRedraw=!0;this.zoomCompleteEvtCollection=[];n.disableTrackTooltip=!0;for(var b=[],y=0,k=i;y<k.length;y++)e=k[y],o={cancel:!1,name:nf,axis:e,previousZoomFactor:e.zoomFactor,previousZoomPosition:e.zoomPosition,currentZoomFactor:e.zoomFactor,currentZoomPosition:e.zoomPosition,previousVisibleRange:e.visibleRange,currentVisibleRange:null},v=Math.max(1/ff(e.zoomFactor,0,1),1),"Horizontal"===e.orientation?(l=(0!==u?u:n.previousMouseMoveX-n.mouseX)/e.rect.width/v,o.currentZoomPosition=ff(e.zoomPosition+l,0,1-e.zoomFactor)):(l=(0!==f?f:n.previousMouseMoveY-n.mouseY)/e.rect.height/v,o.currentZoomPosition=ff(e.zoomPosition-l,0,1-e.zoomFactor)),o.cancel||(e.zoomFactor=o.currentZoomFactor,e.zoomPosition=o.currentZoomPosition,this.zoomCompleteEvtCollection.push(o)),b.push({zoomFactor:e.zoomFactor,zoomPosition:e.zoomFactor,axisName:e.name,axisRange:e.visibleRange});if(n.tooltipModule)for(p=r(n.element.id+"_tooltip"),p&&p.remove(),a=0,w=n.visibleSeries;a<w.length;a++)h=w[a],!t.isNullOrUndefined(h)&&(h.marker.visible||n.tooltip.shared||"Scatter"===h.type||"Bubble"===h.type)&&n.markerRender.removeHighlightedMarker(h,null,!0);c={cancel:!1,axisCollection:b,name:or};!c.cancel&&this.chart.isBlazor?this.chart.trigger(or,c,function(){c.cancel?s.zoomCancel(i,s.zoomCompleteEvtCollection):s.performDefferedZoom(n)}):this.chart.trigger(or,c,function(){c.cancel?s.zoomCancel(i,s.zoomCompleteEvtCollection):(s.performDefferedZoom(n),s.redrawOnZooming(n,!1))})},n.prototype.performDefferedZoom=function(n){var t,i;if(this.zooming.enableDeferredZooming){switch(t=n.mouseX-n.mouseDownX,i=n.mouseY-n.mouseDownY,this.zooming.mode){case"X":i=0;break;case"Y":t=0}this.setTransform(t,i,null,null,n,!1);this.refreshAxis(n.chartAxisLayoutPanel,n,n.axisCollections);n.enableCanvas&&this.performZoomRedraw(n)}else this.performZoomRedraw(n);n.previousMouseMoveX=n.mouseX;n.previousMouseMoveY=n.mouseY},n.prototype.performZoomRedraw=function(n){var h=this.zoomingRect,e,o,u,s,i,c,f;if(n.animateSeries=!1,this.isZoomed)if(h.width>0&&h.height>0)this.performedUI=!0,n.svgObject.setAttribute("cursor","auto"),this.doZoom(n,n.axisCollections,n.chartAxisLayoutPanel.seriesClipRect),n.isDoubleTap=!1;else if(n.disableTrackTooltip){if(n.disableTrackTooltip=!1,n.delayRedraw=!1,n.enableCanvas)n.createChartSvg();else if(e=r(n.element.id+"_ZoomArea"),e&&e.remove(),o=r(n.element.id+"_Zooming_KitCollection"),o&&o.remove(),n.tooltipModule)for(r(n.element.id+"_tooltip")&&r(n.element.id+"_tooltip").remove(),u=0,s=n.visibleSeries;u<s.length;u++)i=s[u],!t.isNullOrUndefined(i)&&(i.marker.visible||n.tooltip.shared||"Scatter"===i.type||"Bubble"===i.type)&&n.markerRender.removeHighlightedMarker(i,null,!0);c=n.duration;this.isPanning&&(n.isChartDrag||this.startPanning)||n.enableCanvas||(n.duration=600,n.redraw=this.zooming.enableAnimation,n.zoomRedraw=this.zooming.enableAnimation);f=[];n.highlightModule&&(n.legendSettings.enableHighlight||"None"!==n.highlightMode)&&n.highlightModule.highlightDataIndexes&&(f=n.highlightModule.highlightDataIndexes);n.refreshAxis();n.refreshBound();n.highlightModule&&(n.legendSettings.enableHighlight||"None"!==n.highlightMode)&&f&&(n.highlightModule.highlightDataIndexes=f);this.isZoomed||(n.zoomRedraw=this.zooming.enableAnimation);this.startPanning=!1;n.redraw=!1;n.duration=c;this.toolkit.isZoomed&&(n.zoomRedraw=!1,this.toolkit.isZoomed=!1)}},n.prototype.refreshAxis=function(n,t,r){var u=t.zoomSettings.mode;n.measureAxis(new i.Rect(t.initialClipRect.x,t.initialClipRect.y,t.initialClipRect.width,t.initialClipRect.height));r.map(function(t,i){"Horizontal"===t.orientation&&"Y"!==u&&n.drawXAxisLabels(t,i,null,t.placeNextToAxisLine?t.updatedRect:t.rect);"Vertical"===t.orientation&&"X"!==u&&n.drawYAxisLabels(t,i,null,t.placeNextToAxisLine?t.updatedRect:t.rect)})},n.prototype.doZoom=function(n,t,r){var f,e=this,s=this.zoomingRect,a=this.zooming.mode,c,h,l,u,o;for(this.isPanning=n.zoomSettings.enablePan||this.isPanning,c=[],this.zoomCompleteEvtCollection=[],h=0,l=t;h<l.length;h++)u=l[h],f={cancel:!1,name:nf,axis:u,previousZoomFactor:u.zoomFactor,previousZoomPosition:u.zoomPosition,currentZoomFactor:u.zoomFactor,currentZoomPosition:u.zoomPosition,previousVisibleRange:u.visibleRange,currentVisibleRange:null},"Horizontal"===u.orientation?"Y"!==a&&(f.currentZoomPosition+=Math.abs((s.x-r.x)/r.width)*u.zoomFactor,f.currentZoomFactor*=s.width/r.width):"X"!==a&&(f.currentZoomPosition+=(1-Math.abs((s.height+(s.y-r.y))/r.height))*u.zoomFactor,f.currentZoomFactor*=s.height/r.height),parseFloat(f.currentZoomFactor.toFixed(3))<=.001&&(f.currentZoomFactor=f.previousZoomFactor,f.currentZoomPosition=f.previousZoomPosition),f.cancel||(u.zoomFactor=f.currentZoomFactor,u.zoomPosition=f.currentZoomPosition,n.zoomRedraw=this.zooming.enableAnimation,this.zoomCompleteEvtCollection.push(f)),c.push({zoomFactor:u.zoomFactor,zoomPosition:u.zoomFactor,axisName:u.name,axisRange:u.visibleRange});o={cancel:!1,axisCollection:c,name:or};!o.cancel&&this.chart.isBlazor?this.chart.trigger(or,o,function(){o.cancel?e.zoomCancel(t,e.zoomCompleteEvtCollection):(e.zoomingRect=new i.Rect(0,0,0,0),e.performZoomRedraw(n))}):this.chart.trigger(or,o,function(){o.cancel?e.zoomCancel(t,e.zoomCompleteEvtCollection):(e.zoomingRect=new i.Rect(0,0,0,0),e.redrawOnZooming(n))})},n.prototype.redrawOnZooming=function(n,t,i){var f,u,r;for(void 0===t&&(t=!0),void 0===i&&(i=!1),u=i?this.toolkit.zoomCompleteEvtCollection:this.zoomCompleteEvtCollection,t&&this.performZoomRedraw(n),r=0;r<u.length;r++)u[r].cancel||(f={cancel:!1,name:nf,axis:n.axisCollections[r],previousZoomFactor:u[r].previousZoomFactor,previousZoomPosition:u[r].previousZoomPosition,currentZoomFactor:n.axisCollections[r].zoomFactor,currentZoomPosition:n.axisCollections[r].zoomPosition,currentVisibleRange:n.axisCollections[r].visibleRange,previousVisibleRange:u[r].previousVisibleRange},n.trigger(nf,f))},n.prototype.performMouseWheelZooming=function(n,t,i,r,u){var s,o,l,e,h=this,y="mozilla"!==this.browserName||this.isPointer?n.wheelDelta>0?1:-1:-n.detail/3>0?1:-1,p=this.zooming.mode,a=.5,f,c;this.isZoomed=!0;this.calculateZoomAxesRange(r);r.disableTrackTooltip=!0;this.performedUI=!0;this.isPanning=r.zoomSettings.enablePan||this.isPanning;this.zoomCompleteEvtCollection=[];for(var w=[],v=0,b=u;v<b.length;v++)f=b[v],e={cancel:!1,name:nf,axis:f,previousZoomFactor:f.zoomFactor,previousZoomPosition:f.zoomPosition,currentZoomFactor:f.zoomFactor,currentZoomPosition:f.zoomPosition,currentVisibleRange:null,previousVisibleRange:f.visibleRange},("Vertical"===f.orientation&&"X"!==p||"Horizontal"===f.orientation&&"Y"!==p)&&((s=(s=Math.max(Math.max(1/ff(f.zoomFactor,0,1),1)+.25*y,1))>5e10?5e10:s)>=1&&(a=(a="Horizontal"===f.orientation?t/f.rect.width:1-i/f.rect.height)>1?1:a<0?0:a,o=1===s?1:ff((y>0?.9:1.1)/s,0,1),l=1===s?0:f.zoomPosition+(f.zoomFactor-o)*a,f.zoomPosition===l&&f.zoomFactor===o||(o=l+o>1?1-l:o),parseFloat(e.currentZoomFactor.toFixed(3))<=.001?(e.currentZoomFactor=e.previousZoomFactor,e.currentZoomPosition=e.previousZoomPosition):(e.currentZoomFactor=o,e.currentZoomPosition=l)),e.currentZoomFactor===e.previousZoomFactor&&e.currentZoomPosition===e.previousZoomPosition&&(r.disableTrackTooltip=!1),e.cancel||(f.zoomFactor=e.currentZoomFactor,f.zoomPosition=e.currentZoomPosition,r.zoomRedraw=this.zooming.enableAnimation,this.zoomCompleteEvtCollection.push(e))),w.push({zoomFactor:f.zoomFactor,zoomPosition:f.zoomFactor,axisName:f.name,axisRange:f.visibleRange});c={cancel:!1,axisCollection:w,name:or};!c.cancel&&this.chart.isBlazor?this.chart.trigger(or,c,function(){c.cancel?h.zoomCancel(u,h.zoomCompleteEvtCollection):h.performZoomRedraw(r)}):this.chart.trigger(or,c,function(){c.cancel?h.zoomCancel(u,h.zoomCompleteEvtCollection):h.redrawOnZooming(r)})},n.prototype.performPinchZooming=function(n,t){if(this.zoomingRect.width>0&&this.zoomingRect.height>0||t.startMove&&t.crosshair.enable)return!1;this.calculateZoomAxesRange(t);this.isZoomed=!0;this.isPanning=!0;this.performedUI=!0;this.offset=t.delayRedraw?this.offset:t.chartAxisLayoutPanel.seriesClipRect;t.delayRedraw=!0;t.disableTrackTooltip=!0;var r=t.element.getBoundingClientRect(),e=this.touchStartList,o=this.touchMoveList,s=e[0].pageX-r.left,h=e[0].pageY-r.top,c=o[0].pageX-r.left,l=o[0].pageY-r.top,y=e[1].pageX-r.left,p=e[1].pageY-r.top,w=o[1].pageX-r.left,b=o[1].pageY-r.top,u=Math.abs(c-w)/Math.abs(s-y),f=Math.abs(l-b)/Math.abs(h-p),k=(this.offset.x-c)/u+s,d=(this.offset.y-l)/f+h,g=new i.Rect(k,d,this.offset.width/u,this.offset.height/f),a=c-u*s,v=l-f*h;if(!isNaN(u-u)&&!isNaN(f-f))switch(this.zooming.mode){case"XY":this.setTransform(a,v,u,f,t,!0);break;case"X":this.setTransform(a,0,u,1,t,!0);break;case"Y":this.setTransform(0,v,1,f,t,!0)}return this.calculatePinchZoomFactor(t,g)||(this.refreshAxis(t.chartAxisLayoutPanel,t,t.axisCollections),this.redrawOnZooming(t,!1)),!0},n.prototype.calculatePinchZoomFactor=function(n,t){var a,v,h,c,e,o,u,f,s,y=this.zooming.mode,p=[],r,i,l;for(this.zoomCompleteEvtCollection=[],r=0;r<n.axisCollections.length;r++)i=n.axisCollections[r],("Horizontal"===i.orientation&&"Y"!==y||"Vertical"===i.orientation&&"X"!==y)&&(f=i.zoomFactor,s=i.zoomPosition,u={cancel:!1,name:nf,axis:i,previousZoomFactor:i.zoomFactor,previousZoomPosition:i.zoomPosition,currentZoomFactor:f,currentZoomPosition:s,previousVisibleRange:i.visibleRange,currentVisibleRange:null},"Horizontal"===i.orientation?(h=(e=t.x-this.offset.x)/(o=i.rect.width/this.zoomAxes[r].delta)+this.zoomAxes[r].min,c=(e=t.x+t.width-this.offset.x)/o+this.zoomAxes[r].min):(e=t.y-this.offset.y,o=i.rect.height/this.zoomAxes[r].delta,h=(-1*e+i.rect.height)/o+this.zoomAxes[r].min,c=(-1*(e=t.y+t.height-this.offset.y)+i.rect.height)/o+this.zoomAxes[r].min),a=Math.min(h,c),v=Math.max(h,c),s=(a-this.zoomAxes[r].actualMin)/this.zoomAxes[r].actualDelta,f=(v-a)/this.zoomAxes[r].actualDelta,u.currentZoomPosition=s<0?0:s,u.currentZoomFactor=f>1?1:f<.03?.03:f,u.cancel||(i.zoomFactor=u.currentZoomFactor,i.zoomPosition=u.currentZoomPosition,n.zoomRedraw=this.zooming.enableAnimation,this.zoomCompleteEvtCollection.push(u)),p.push({zoomFactor:i.zoomFactor,zoomPosition:i.zoomFactor,axisName:i.name,axisRange:i.visibleRange}));return l={cancel:!1,axisCollection:p,name:or},!(l.cancel||(this.chart.trigger(or,l),!l.cancel)||(this.zoomCancel(n.axisCollections,this.zoomCompleteEvtCollection),0))},n.prototype.setTransform=function(n,t,i,u,f,e){var s,c,l,a,h,v,o;if(f.enableCanvas||f.seriesElements.setAttribute("clip-path","url(#"+this.elementId+"_ChartAreaClipRect_)"),f.indicatorElements&&f.indicatorElements.setAttribute("clip-path","url(#"+this.elementId+"_ChartAreaClipRect_)"),null!==n&&null!==t)for(h=0,v=f.visibleSeries;h<v.length;h++)o=v[h],c=f.requireInvertedAxis?o.yAxis.rect.x:o.xAxis.rect.x,l=f.requireInvertedAxis?o.xAxis.rect.y:o.yAxis.rect.y,s="translate("+(n+(e?i*c:c))+","+(t+(e?u*l:l))+")",s=i||u?s+" scale("+i+" "+u+")":s,o.visible&&("Indicator"===o.category?o.seriesElement.parentNode.setAttribute("transform",s):f.enableCanvas||o.seriesElement.setAttribute("transform",s),a=r(f.element.id+"_Series_"+o.index+"_DataLabelCollections"),o.errorBarElement&&o.errorBarElement.setAttribute("transform",s),o.symbolElement&&o.symbolElement.setAttribute("transform",s),o.textElement&&(o.textElement.setAttribute("visibility","hidden"),o.shapeElement.setAttribute("visibility","hidden")),a&&(a.style.visibility="hidden"))},n.prototype.calculateZoomAxesRange=function(n){for(var u,i,r,t=0;t<n.axisCollections.length;t++)r=n.axisCollections[t],i=r.visibleRange,this.zoomAxes[t]?n.delayRedraw||(this.zoomAxes[t].min=i.min,this.zoomAxes[t].delta=i.delta):(u={actualMin:r.actualRange.min,actualDelta:r.actualRange.delta,min:i.min,delta:i.delta},this.zoomAxes[t]=u)},n.prototype.showZoomingToolkit=function(n){var o,s,l=this.zooming.toolbarItems,u=n.chartAxisLayoutPanel.seriesClipRect,e=10,a=n.svgRenderer,v=this.isDevice?0===l.length?0:1:l.length,rt=this.isDevice?i.measureText("Reset Zoom",{size:"12px"},{size:"12px",fontStyle:"Normal",fontWeight:"400",fontFamily:"Segoe UI"}).width:16,y=this.isDevice?i.measureText("Reset Zoom",{size:"12px"},{size:"12px",fontStyle:"Normal",fontWeight:"400",fontFamily:"Segoe UI"}).height:n.theme.indexOf("Fluent2")>-1||n.theme.indexOf("Bootstrap5")>-1?18:22,p=v*rt+(v+1)*e+(v-1)*e,b=this.zooming.toolbarPosition,c,g,h,nt,tt,ut,f,it,k,w,et,d;switch(b.horizontalAlignment){case"Far":o=u.x+u.width-p-e;break;case"Near":o=u.x+e;break;case"Center":o=u.width/2-p/2+u.x}switch(o+=b.x,b.verticalAlignment){case"Bottom":s=u.height-u.y+y+e;break;case"Top":s=u.y+e;break;case"Middle":s=u.height/2-y/2+u.y}if(s+=b.y,o=null!=this.toolkit.dragHorizontalRatio?Math.min(Math.max(this.chart.border.width+2,this.toolkit.dragHorizontalRatio*this.chart.availableSize.width),this.chart.availableSize.width-p-this.chart.border.width-2):o,s=null!=this.toolkit.dragVerticalRatio?Math.min(Math.max(this.chart.border.width+2,this.toolkit.dragVerticalRatio*this.chart.availableSize.height),this.chart.availableSize.height-y-this.chart.border.width-2):s,g=e,h=this.toolkit,0===v||r(this.elementId+"_Zooming_KitCollection"))return!1;for(nt=a.createDefs(),l=this.isDevice?["Reset"]:l,nt.innerHTML='<filter id="chart_shadow" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="5"/><feOffset dx="-3" dy="4" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="1"/><\/feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/><\/feMerge><\/filter>',this.toolkitElements=a.createGroup({id:this.elementId+"_Zooming_KitCollection",transform:"translate("+o+","+s+")"}),this.toolkitElements.appendChild(nt),tt="Tailwind3"===this.chart.theme?"#F9FAFB":"Fluent"===this.chart.theme?"#F3F2F1":"Material3"===this.chart.theme?"#FFFFFF":"Material3Dark"===this.chart.theme?"#1C1B1F":"Fluent2"===this.chart.theme?"#F5F5F5":"Fluent2Dark"===this.chart.theme?"#141414":"Fluent2HighContrast"===n.theme?"#000000":"Bootstrap5"===n.theme?"#E9ECEF":"Bootstrap5Dark"===n.theme?"#343A40":"Tailwind3Dark"!==n.theme||this.isDevice?"Tailwind"===this.chart.theme?"#F3F4F6":"#fafafa":"#1D2432",this.toolkitElements.appendChild(a.drawRectangle(new ft(this.elementId+"_Zooming_Rect",tt,{color:"transparent",width:1},1,new i.Rect(0,0,p,y+20),this.chart.theme.indexOf("Bootstrap5")>-1?1:4,this.chart.theme.indexOf("Bootstrap5")>-1?1:4))),f=a.drawRectangle(new ft(this.elementId+"_Zooming_Rect",tt,{color:"transparent",width:1},.1,new i.Rect(0,0,p,y+20),4,4)),"Tailwind"===this.chart.theme||"TailwindDark"===this.chart.theme||"Tailwind3Dark"===this.chart.theme?f.setAttribute("box-shadow","0px 1px 2px rgba(0, 0, 0, 0.06), 0px 1px 3px rgba(0, 0, 0, 0.1)"):"Material3"===this.chart.theme||"Material3Dark"===this.chart.theme||"Fluent2"===this.chart.theme||"Fluent2Dark"===this.chart.theme||this.chart.theme.indexOf("Bootstrap5")>-1?(f.setAttribute("filter","drop-shadow(0px 1px 3px rgba(0, 0, 0, 0.15)) drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3))"),f.setAttribute("fill","Material3"===this.chart.theme?"#FFFFFF":"Fluent2"===this.chart.theme?"#F5F5F5":"Bootstrap5"===this.chart.theme?"#E9ECEF":"Bootstrap5Dark"===this.chart.theme?"#343A40":"#1C1B1F"),f.setAttribute("rx",this.chart.theme.indexOf("Bootstrap5")>-1?"1px":"4px"),f.setAttribute("ry",this.chart.theme.indexOf("Bootstrap5")>-1?"1px":"4px"),f.setAttribute("opacity","1")):("Tailwind3"===n.theme&&f.setAttribute("fill","#F9FAFB"),f.setAttribute("filter","url(#chart_shadow)")),this.toolkitElements.appendChild(f),it=!1,k=1;k<=v;k++){switch(ut=l[k-1],c=a.createGroup({transform:"translate("+g+","+(this.isDevice?e:n.theme.indexOf("Fluent2")>-1||n.theme.indexOf("Bootstrap5")>-1?11:13)+")"}),ut){case"Pan":h.createPanButton(c,this.toolkitElements);it=!0;break;case"Zoom":h.createZoomButton(c,this.toolkitElements);break;case"ZoomIn":h.createZoomInButton(c,this.toolkitElements,n);break;case"ZoomOut":h.createZoomOutButton(c,this.toolkitElements,n);break;case"Reset":h.createResetButton(c,this.toolkitElements,n,this.isDevice)}g+=rt+20}return(this.toolkitElements.setAttribute("opacity",this.isDevice?"1":""+this.zoomkitOpacity),this.toolkitElements.setAttribute("cursor","auto"),n.enableCanvas)?(w=document.createElement("div"),w.id=n.element.id+"_zoom",w.style.cssText="position:absolute; z-index:1",et=n.availableSize.height/2,d=n.svgRenderer.createSvg({id:n.element.id+"_zoomkit_svg",width:n.availableSize.width,height:et}),d.style.position="absolute",d.appendChild(this.toolkitElements),w.appendChild(d),document.getElementById(this.elementId+"_Secondary_Element").appendChild(w)):n.svgObject.appendChild(this.toolkitElements),this.isDevice||(t.EventHandler.add(this.toolkitElements,"mousemove touchstart",this.zoomToolkitMove,this),t.EventHandler.add(this.toolkitElements,"mouseleave touchend",this.zoomToolkitLeave,this),this.isPanning&&it&&h.pan()),!0},n.prototype.applyZoomToolkit=function(n,t){var i=this.isAxisZoomed(t);i?(this.showZoomingToolkit(n),this.isZoomed=!0):n.zoomSettings.showToolbar?(this.isZoomed=i,this.showZoomingToolkit(n)):(this.toolkit.removeTooltip(),this.isPanning=!1,this.isZoomed=!1,n.isZoomed=!1,n.svgObject.setAttribute("cursor","auto"))},n.prototype.zoomCancel=function(n,t){for(var i,r=0,f=t;r<f.length;r++)for(var u=f[r],e=0,o=n;e<o.length;e++)if(i=o[e],i.name===u.axis.name){i.zoomFactor=u.previousZoomFactor;i.zoomPosition=u.previousZoomPosition;i.visibleRange=u.previousVisibleRange;break}},n.prototype.isAxisZoomed=function(n){for(var r,t=!1,i=0,u=n;i<u.length;i++)r=u[i],t=t||1!==r.zoomFactor||0!==r.zoomPosition;return t},n.prototype.zoomToolkitMove=function(){var n=this.toolkitElements;return this.zoomkitOpacity=1,n.setAttribute("opacity",""+this.zoomkitOpacity),!1},n.prototype.zoomToolkitLeave=function(){var n=this.toolkitElements;return this.zoomkitOpacity=1,n.setAttribute("opacity",""+this.zoomkitOpacity),!1},n.prototype.addEventListener=function(){this.chart.isDestroyed||(t.EventHandler.add(this.chart.element,this.wheelEvent,this.chartMouseWheel,this),this.chart.on(t.Browser.touchMoveEvent,this.mouseMoveHandler,this),this.chart.on(t.Browser.touchStartEvent,this.mouseDownHandler,this),this.chart.on(t.Browser.touchEndEvent,this.mouseUpHandler,this),this.chart.on(this.cancelEvent,this.mouseCancelHandler,this))},n.prototype.removeEventListener=function(){t.EventHandler.remove(this.chart.element,this.wheelEvent,this.chartMouseWheel);this.chart.isDestroyed||(this.chart.off(t.Browser.touchMoveEvent,this.mouseMoveHandler),this.chart.off(t.Browser.touchStartEvent,this.mouseDownHandler),this.chart.off(t.Browser.touchEndEvent,this.mouseUpHandler),this.chart.off(this.cancelEvent,this.mouseCancelHandler))},n.prototype.chartMouseWheel=function(n){var t=this.chart,i=t.element.getBoundingClientRect(),u=r(t.svgId).getBoundingClientRect(),f=n.clientX-i.left-Math.max(u.left-i.left,0),e=n.clientY-i.top-Math.max(u.top-i.top,0);return this.zooming.enableMouseWheelZooming&&ht(f,e,t.chartAxisLayoutPanel.seriesClipRect)&&(n.preventDefault(),this.performMouseWheelZooming(n,f,e,t,t.axisCollections)),!1},n.prototype.mouseMoveHandler=function(n){var t=this.chart,i=null;"touchmove"===n.type&&(n.preventDefault&&this.isIOS&&(this.isPanning||t.isDoubleTap||this.zooming.enablePinchZooming&&this.touchStartList.length>1)&&n.preventDefault(),i=n.touches);t.isChartDrag&&(t.isTouch&&(this.touchMoveList=this.addTouchPointer(this.touchMoveList,n,i),this.zooming.enablePinchZooming&&this.touchMoveList.length>1&&this.touchStartList.length>1&&this.performPinchZooming(n,t)),this.renderZooming(n,t,t.isTouch))},n.prototype.mouseDownHandler=function(n){var i,t=this.chart,r=null;"touchstart"===n.type?(r=n.touches,i=n.target):i=n.target;-1===i.id.indexOf(t.element.id+"_Zooming_")&&(t.zoomSettings.enablePinchZooming||t.zoomSettings.enableSelectionZooming||this.chart.zoomModule.isPanning)&&ht(t.previousMouseMoveX,t.previousMouseMoveY,t.chartAxisLayoutPanel.seriesClipRect)&&(t.isChartDrag=!0);t.isTouch&&(this.touchStartList=this.addTouchPointer(this.touchStartList,n,r))},n.prototype.mouseUpHandler=function(n){var t=this.chart,i=-1===n.target.id.indexOf(t.element.id+"_ZoomOut_")||-1===n.target.id.indexOf(t.element.id+"_ZoomIn_");(t.isChartDrag||i)&&this.redrawOnZooming(t,!0,!0);t.isTouch&&(t.isDoubleTap&&ht(t.mouseX,t.mouseY,t.chartAxisLayoutPanel.seriesClipRect)&&1===this.touchStartList.length&&this.isZoomed&&this.toolkit.reset(n),this.touchStartList=[],t.isDoubleTap=!1)},n.prototype.mouseCancelHandler=function(){this.isZoomed&&this.performZoomRedraw(this.chart);this.pinchTarget=null;this.touchStartList=[];this.touchMoveList=[]},n.prototype.addTouchPointer=function(n,t,i){var r,u,f;if(i)for(n=[],r=0,u=i.length;r<u;r++)n.push({pageX:i[r].clientX,pageY:i[r].clientY,pointerId:null});else if(0===(n=n||[]).length)n.push({pageX:t.clientX,pageY:t.clientY,pointerId:t.pointerId});else for(r=0,f=n.length;r<f;r++)n[r].pointerId===t.pointerId?n[r]={pageX:t.clientX,pageY:t.clientY,pointerId:t.pointerId}:n.push({pageX:t.clientX,pageY:t.clientY,pointerId:t.pointerId});return n},n.prototype.getModuleName=function(){return"Zoom"},n.prototype.destroy=function(){this.removeEventListener()},n}(),pst=function(){function n(n){this.isPointDragging=!1;this.chart=n}return n.prototype.pointMouseDown=function(){var n=this.chart,i=new rs(n),t=i.getData(),r=n.zoomSettings.enableSelectionZooming||n.zoomSettings.enablePinchZooming;t.point&&(i.insideRegion||!t.series.isRectSeries)&&(this.seriesIndex=t.series.index,this.pointIndex=t.point.index,n.series[this.seriesIndex].dragSettings.enable&&!r&&(n.trigger(kp,{series:t.series,seriesIndex:this.seriesIndex,pointIndex:this.pointIndex,point:t.point,oldValue:n.visibleSeries[this.seriesIndex].yData[this.pointIndex],newValue:n.visibleSeries[this.seriesIndex].points[this.pointIndex].yValue}),n.isPointMouseDown=!0,n.zoomSettings.enableDeferredZooming=!1))},n.prototype.pointMouseMove=function(n){var r,t=this.chart,u,i;"touchmove"===n.type&&n.preventDefault&&n.preventDefault();u=new rs(t);i=u.getData();i.series.dragSettings.enable&&i.point&&(u.insideRegion||!i.series.isRectSeries)?this.getCursorStyle(i):t.svgObject.style.cursor="null";t.isPointMouseDown&&((r=t.series[this.seriesIndex]).type.indexOf("Spline")>-1&&t[et(r.type)+"SeriesModule"].findSplinePoint(r),this.pointDragging(this.seriesIndex,this.pointIndex))},n.prototype.getCursorStyle=function(n){var t=this.chart;t.svgObject.style.cursor=n.series.type.indexOf("Stacking")>-1?"":"Bar"===n.series.type&&t.isTransposed?"ns-resize":t.isTransposed||"Bar"===n.series.type?"ew-resize":"ns-resize"},n.prototype.pointDragging=function(n,i){var c,l,o,r=this.chart,a=[],u=r.visibleSeries[n],s=u.dragSettings,p=u.xAxis,f=u.yAxis,v=u.isRectSeries?1:0,e=ww(p,f,r.requireInvertedAxis),y,h;if("Bar"===u.type?(c=r.isTransposed?e.y+e.height-r.mouseY:r.mouseX-e.x,l=r.isTransposed?e.height:e.width):(c=r.isTransposed?r.mouseX-e.x:e.y+e.height-r.mouseY,l=r.isTransposed?e.width:e.height),o=(o=f.isAxisInverse?1-c/l:c/l)*f.visibleRange.delta+f.visibleRange.min,y=null!==f.minimum?f.visibleRange.min+v:t.isNullOrUndefined(s.minY)?o:s.minY,(null!==f.maximum?f.visibleRange.max+v:t.isNullOrUndefined(s.maxY)?o:s.maxY)>=o&&y<=o){for(u.points[i].yValue=u.points[i].y=r.dragY="Logarithmic"===f.valueType?Math.pow(f.logBase,o):parseFloat(o.toFixed(2)),u.points[i].interior=s.fill,h=0;h<u.points.length;h++)a[h]=u.points[h].yValue;u.yMin=Math.min.apply(null,a);u.yMax=Math.max.apply(null,a);this.isPointDragging=!0;r.refreshBound();r.trigger(dp,{seriesIndex:n,pointIndex:i,series:u,point:u.points[i],oldValue:r.visibleSeries[this.seriesIndex].yData[this.pointIndex],newValue:u.points[i].yValue});r.zoomRedraw=!1}},n.prototype.pointMouseUp=function(){var n=this.chart;n.isPointMouseDown&&n.series[this.seriesIndex].dragSettings.enable&&(n.trigger(gp,{series:n.series[this.seriesIndex],point:n.visibleSeries[this.seriesIndex].points[this.pointIndex],seriesIndex:this.seriesIndex,pointIndex:this.pointIndex,oldValue:n.visibleSeries[this.seriesIndex].yData[this.pointIndex],newValue:n.visibleSeries[this.seriesIndex].points[this.pointIndex].yValue}),n.visibleSeries[this.seriesIndex].points[this.pointIndex].y=n.visibleSeries[this.seriesIndex].points[this.pointIndex].yValue,n.isPointMouseDown=!1,this.isPointDragging=!1,this.seriesIndex=this.pointIndex=void 0)},n.prototype.getModuleName=function(){return"DataEditing"},n.prototype.destroy=function(){},n}(),wst=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bst=function(n){function i(t){var i=n.call(this,t)||this;return i.chart=t,i.renderer=t.renderer,i.wireEvents(),i}return wst(i,n),i.prototype.wireEvents=function(){this.chart.isDestroyed||this.chart.stockChart&&this.chart.stockChart.onPanning||this.chart.on(t.Browser.touchMoveEvent,this.mouseMove,this)},i.prototype.unWireEvents=function(){this.chart.isDestroyed||this.chart.off(t.Browser.touchMoveEvent,this.mouseMove)},i.prototype.declarePrivateVariables=function(n){this.styleId=n.element.id+"_ej2_chart_highlight";this.unselected=n.element.id+"_ej2_deselected";this.selectedDataIndexes=[];this.highlightDataIndexes=[];this.isSeriesMode="Series"===n.highlightMode},i.prototype.invokeHighlight=function(n){this.declarePrivateVariables(n);this.series=t.extend({},n.visibleSeries,null,!0);this.seriesStyles();this.currentMode=n.highlightMode},i.prototype.getModuleName=function(){return"Highlight"},i.prototype.destroy=function(){this.unWireEvents()},i}(dv),kst=function(){function n(n){this.padding=6;this.chart=n}return n.prototype.initPrivateVariables=function(n){this.chart=n;this.elementID=n.element.id;this.svgRenderer=n.renderer},n.prototype.render=function(n,t,i,r){if(this.chart&&this.svgRenderer||this.initPrivateVariables(t),!t.enableCanvas&&!n.lastValueLabelElement){var u=this.elementID+"_LastValueLabel_Group_"+n.index;n.lastValueLabelElement=t.renderer.createGroup({id:u})}this.renderLastValue(n,t,i,r||!1)},n.prototype.renderLastValue=function(n,t,r,u){var tt="HighLowOpenClose"===n.seriesType,b="HighLow"===n.seriesType,l,vt;if(!(n.visiblePoints.length<1)){var f=n.visiblePoints[n.visiblePoints.length-1],e=n.yAxis,y=n.clipRect,yt=this.elementID+"_LastValueLabel_"+n.index,a=tt?parseFloat(f.close):b?parseFloat(f.low):f.yValue;if(!(!("Candle"===n.type?f.symbolLocations&&f.symbolLocations.length>0:tt?f.regions&&f.regions.length>0:f.symbolLocations&&f.symbolLocations.length>0)||a>e.visibleRange.max||a<e.visibleRange.min)){var s=n.chart.requireInvertedAxis?y.x+("Candle"===n.type?f.symbolLocations[1].x:tt?f.open<=f.close?f.regions[1].x:f.regions[2].x:f.symbolLocations[0].x):y.x,c=n.chart.requireInvertedAxis?y.y:y.y+("Candle"===n.type?f.symbolLocations[1].y:tt?f.open<=f.close?f.regions[1].y:f.regions[2].y:f.symbolLocations[0].y),pt="translate("+(s=!t.requireInvertedAxis||!b&&"Candle"!==n.type||e.isInversed?s:s-f.regions[b?0:1].width)+","+(c=t.requireInvertedAxis||!b&&"Candle"!==n.type||e.isInversed?c:c+f.regions[b?0:1].height)+")",ht=n.lastValueLabelElement?n.lastValueLabelElement.getAttribute("transform"):null,k=e.labelFormat,ot=a.toString();k&&k.indexOf("n")>-1||(ot=a%1==0?a.toFixed(0):"0"===a.toFixed(2).slice(-1)?a.toFixed(1):a.toFixed(2));var lt=k&&null!==k.match("{value}")?k.replace("{value}",e.format(parseFloat(ot))):e.format(parseFloat(ot)),st=r.font,it=i.measureText(lt,st,this.chart.themeStyle.crosshairLabelFont),d=it.width+2*this.padding,w=it.height+2*this.padding,rt=t.requireInvertedAxis?t.enableCanvas?e.rect.y:e.rect.y-c:t.enableCanvas?e.rect.x:e.rect.x-s,ut="Outside"===e.tickPosition?e.majorTickLines.height:0,et=e.labelPadding,p=2*r.border.width,wt=t.requireInvertedAxis?e.maxLabelSize.height:e.maxLabelSize.width,at="Outside"===e.labelPosition,v=t.enableRtl&&!t.requireInvertedAxis?!e.opposedPosition:e.opposedPosition,g=t.requireInvertedAxis?(t.enableCanvas?s:0)-d/2:at?rt+(v?et+ut-p:-(et+ut+p+wt)):rt+(v?-d:0),nt=t.requireInvertedAxis?at?rt+(v?-(w+et+ut):et+ut+p):rt+(v?0:-w):(t.enableCanvas?c:0)-w/2;g=Math.max(-s+p,Math.min(g,t.availableSize.width-d-p-s));nt=Math.max(-c+p,Math.min(nt,t.availableSize.height-w-p-c));l=new i.Rect(g,nt,d,w);t.lastValueLabelCollections.push(l);vt=this.chart.renderer.drawRectangle(new ft(this.elementID+"_LastValueLabel_Background_"+n.index,r.background||t.themeStyle.crosshairFill,{width:r.border.width||1,color:r.border.color},1,l,r.rx,r.ry));o(this.chart.enableCanvas,n.lastValueLabelElement,vt,this.chart.redraw);var bt=t.requireInvertedAxis?(t.enableCanvas?c:0)+(v?y.height:0):t.enableCanvas?c:0,kt="M "+(t.requireInvertedAxis||v?t.enableCanvas?s:0:t.enableCanvas?s+y.width:y.width)+" "+bt+" L "+(t.requireInvertedAxis?t.enableCanvas?s:0:v?g:g+d)+" "+(t.requireInvertedAxis?v?nt+w:nt:t.enableCanvas?c:0),dt=this.chart.renderer.drawPath(new i.PathOption(this.elementID+"_LastValueLine_"+n.index,"none",r.lineWidth||1,r.lineColor||t.themeStyle.crosshairLine,1,r.dashArray||"",kt));o(this.chart.enableCanvas,n.lastValueLabelElement,dt,this.chart.redraw);ct(this.chart.renderer,new i.TextOption(yt,l.x+l.width/2,l.y+l.height/2+.35*it.height,"middle",lt),st,st.color||t.themeStyle.crosshairLabelFont.color,n.lastValueLabelElement,!1,t.redraw,!1,!1,null,null,0,null,t.enableCanvas,null,this.chart.themeStyle.crosshairLabelFont,new h(l.x+l.width/2,l.y+l.height/2+.35*it.height));!this.chart.enableCanvas&&u&&ht&&this.chart.enableAnimation?this.animateLastValueLabel(n.lastValueLabelElement,ht,s,c,n.chart.duration):this.chart.enableCanvas||(n.lastValueLabelElement.setAttribute("transform",pt),n.lastValueLabelElement.setAttribute("visibility",(t.stockChart?t.stockChart.initialRender:t.animateSeries)&&n.animation.enable?"hidden":"visible"))}}},n.prototype.animateLastValueLabel=function(n,i,r,u,f){var e=i.split(/[(),\s]+/),o=parseFloat(e[1])||0,s=parseFloat(e[2])||0,h=500;t.isNullOrUndefined(f)||(h=f);new t.Animation({}).animate(t.createElement("div"),{duration:h,progress:function(t){var i=ti(t.timeStamp,s,u-s,t.duration),f="translate("+ti(t.timeStamp,o,r-o,t.duration)+","+i+")";n.setAttribute("transform",f)},end:function(){var t="translate("+r+","+u+")";n.setAttribute("transform",t)}})},n.prototype.getModuleName=function(){return"LastValueLabel"},n.prototype.destroy=function(){},n}(),dst=function(){function n(n){this.errorHeight=0;this.dataLabelRectCollection={};this.chart=n}return n.prototype.initPrivateVariables=function(n,t){var r="",u="",f=n.chart.renderer,i=void 0===n.index?n.category:n.index;"Cartesian"===n.chart.chartAreaType&&(r="translate("+n.clipRect.x+","+n.clipRect.y+")",u="url(#"+this.chart.element.id+"_ChartSeriesClipRect_"+i+")");t.dataLabel.visible&&!this.chart.enableCanvas&&(n.shapeElement=f.createGroup({id:this.chart.element.id+"ShapeGroup"+i,transform:r,"clip-path":"url(#"+this.chart.element.id+"_ChartSeriesClipRect_"+i+")"}),n.textElement=f.createGroup({id:this.chart.element.id+"TextGroup"+i,transform:r,"clip-path":u}),n.textElement.setAttribute("aria-hidden","true"));this.markerHeight="Scatter"===n.type||t.visible?t.height/2:0;this.commonId=this.chart.element.id+"_Series_"+i+"_Point_";this.calculateErrorHeight(n,n.marker.dataLabel.position);this.chartBackground="transparent"===this.chart.chartArea.background?this.chart.background||this.chart.themeStyle.background:this.chart.chartArea.background},n.prototype.calculateErrorHeight=function(n,t){if(!n.errorBar.visible)return null;if(n.errorBar.visible&&"PolarRadar"!==this.chart.chartAreaType){var i=n.errorBar.direction,r=this.chart.errorBarModule.positiveHeight,u=this.chart.errorBarModule.negativeHeight;this.isRectSeries(n)?("Top"!==t&&"Auto"!==t||(this.errorHeight="Both"===i||"Minus"===i?u:0),"Outer"!==t&&"Auto"!==t||(this.errorHeight="Both"===i||"Plus"===i?r:0)):("Top"!==t&&"Outer"!==t&&"Auto"!==t||(this.errorHeight="Both"!==i&&"Plus"!==i||n.chart.isTransposed?0:r),"Bottom"!==t&&"Auto"!==t||(this.errorHeight="Both"===i||"Minus"===i?u:0))}else this.errorHeight=0},n.prototype.isRectSeries=function(n){return n.isRectSeries||"RangeArea"===n.type||"SplineRangeArea"===n.type||"RangeStepArea"===n.type},n.prototype.render=function(n,i,u){var e;this.initPrivateVariables(n,n.marker);this.inverted=i.requireInvertedAxis;this.yAxisInversed=n.yAxis.isAxisInverse;var h=i.element.id+"_Series_"+(void 0===n.index?n.category:n.index)+"_DataLabelCollections",f=t.createElement("div",{id:h}),s=vu(n);if(n.visible)for(e=0;e<s.length;e++)this.renderDataLabel(n,s[e],f,u);f.childElementCount&&(i.enableCanvas?r(i.element.id+"_Secondary_Element").appendChild(f):o(i.enableCanvas,r(i.element.id+"_Secondary_Element"),f,i.redraw,!1,"x","y",null,"",!1,!1,null,i.duration))},n.prototype.renderDataLabel=function(n,u,f,e){var s,c,l,nt,lt,tt,it,ut,et,bt,kt,ot;if(!e.showZero&&(0===u.y||0===u.y&&"Zero"===n.emptyPointSettings.mode))return null;this.margin=e.margin;var at,p,w,b,k,d,vt,yt,v,st,pt,ht=[],g={x:0,y:0},a=n.clipRect,rt=!1,wt=[];e.angle="Rotate90"===e.labelIntersectAction?90:e.angle;e.enableRotation="Rotate90"===e.labelIntersectAction||e.enableRotation;var y=d=e.angle,dt={width:e.border.width,color:e.border.color},gt=t.extend({},t.getValue("properties",e.font),null,!0);if(u.symbolLocations.length&&u.symbolLocations[0]||"BoxAndWhisker"===n.type&&u.regions.length)for(at=(ht=null!==u.text?ib(u,n,this.chart):[]).length,s=0;s<at;s++)if(c={cancel:!1,name:ie,series:n,point:u,text:ht[s],border:dt,color:e.fill,template:e.template,font:gt,location:g,textSize:i.measureText(ht[s],e.font,this.chart.themeStyle.datalabelFont)},this.chart.trigger(ie,c),!c.cancel)if(this.fontBackground=c.color,this.isDataLabelShape(c),this.markerHeight="Bubble"===n.type?u.regions[0].height/2:this.markerHeight,null!==c.template)this.createDataLabelTemplate(f,n,e,u,c,s,this.chart.redraw);else{if(v=e.enableRotation?yu(e.font,c.text,e.angle,this.chart,this.chart.themeStyle.datalabelFont):i.measureText(c.text,e.font,this.chart.themeStyle.datalabelFont),l=this.calculateTextPosition(u,n,v,e,s),nt=new i.Rect(l.x+a.x,l.y+a.y,l.width,l.height),e.enableRotation){if(lt=this.getRectanglePoints(nt),vt=l.x+l.width/2,yt=l.y+l.height/2,!(rt="Rotate90"!==e.labelIntersectAction&&-90!==y&&this.isDataLabelOverlapWithChartBound(lt,this.chart,{x:0,y:0,width:0,height:0})))for(this.chart.rotatedDataLabelCollections.push(lt),tt=this.chart.rotatedDataLabelCollections.length-1,it=tt;it>=0;it--)if(this.chart.rotatedDataLabelCollections[tt]&&this.chart.rotatedDataLabelCollections[it-1]&&ga(this.chart.rotatedDataLabelCollections[tt],this.chart.rotatedDataLabelCollections[it-1])){rt=!0;this.chart.rotatedDataLabelCollections[tt]=null;break}}else rt=oe(l,this.chart.dataLabelCollections,a);rt&&"None"!==e.labelIntersectAction?r(this.commonId+u.index+"_Text_0")&&n.chart.redraw&&n.currentData&&r(this.commonId+u.index+"_Text_0").remove():(ut=r(this.commonId+u.index+"_TextShape_"+s),ut&&(pt={x:+ut.getAttribute("x"),y:+ut.getAttribute("y")}),this.chart.dataLabelCollections.push(nt),this.isShape&&(st=this.chart.renderer.drawRectangle(new ft(this.commonId+u.index+"_TextShape_"+s,c.color,c.border,e.opacity,l,e.rx,e.ry,"",e.border.dashArray),new Int32Array([a.x,a.y])),n.shapeElement&&o(this.chart.enableCanvas,n.shapeElement,st,this.chart.redraw,!0,"x","y",pt)),et=wu(vi("transparent"===this.fontBackground?this.chart.theme.indexOf("Dark")>-1||this.chart.theme.indexOf("HighContrast")>-1?"black":"white":this.fontBackground)),bt=Math.round((299*et.r+587*et.g+114*et.b)/1e3),p=l.x+this.margin.left+v.width/2+g.x,w=e.enableRotation&&"PolarRadar"!==this.chart.chartAreaType?l.y+this.margin.top+v.height/2+v.width/4+("Auto"===e.position?u.regions[0].width/10:0)+g.y:l.y+this.margin.top+3*v.height/4+g.y,g={x:0,y:0},0!==y&&e.enableRotation?(b=vt,k=yt,d=y>360?y-360:y<-360?y+360:y):(d=0,b=l.x,k=l.y,p-="Cartesian"===this.chart.chartAreaType&&p+v.width/2>a.width?!this.chart.requireInvertedAxis&&p>a.width?0:p+v.width/2-a.width:0,w-=w+v.height>a.y+a.height&&!(n.type.indexOf("Bar")>-1)?w+v.height-(a.y+a.height):0),kt="Rotate90"===e.labelIntersectAction?"Top"===e.position?"start":"Middle"===e.position?"middle":"end":-90===y&&e.enableRotation?"Top"===e.position?"end":"Middle"===e.position?"middle":"start":"middle",ot=void 0,this.chart.redraw&&document.getElementById(this.commonId+u.index+"_Text_"+s)&&(ot=document.getElementById(this.commonId+u.index+"_Text_"+s).textContent),wt.push(ct(this.chart.renderer,new i.TextOption(this.commonId+(null!==n.removedPointIndex&&n.removedPointIndex<=u.index?u.index+1:u.index)+"_Text_"+s,p,w,kt,c.text,"rotate("+d+","+b+","+k+")","auto",d),c.font,c.font.color||("Bootstrap5"===this.chart.theme?"#212529":"Bootstrap5Dark"===this.chart.theme?"#DEE2E6":bt>=128||"Hilo"===n.type||"HiloOpenClose"===n.type?this.chart.theme.indexOf("Tailwind3")>-1?"#111827":"black":this.chart.theme.indexOf("Tailwind3")>-1?"#FFFFFF":"white"),n.textElement,!1,this.chart.redraw,!0,!1,n.chart.duration,n.clipRect,0,null,this.chart.enableCanvas,null,this.chart.themeStyle.datalabelFont,new h(b,k))),this.isShape&&e.enableRotation&&st.setAttribute("transform","rotate("+e.angle+", "+b+", "+k+")"),this.chart.stackLabels.visible&&n.type.indexOf("Stacking")>-1&&(this.dataLabelRectCollection=this.dataLabelRectCollection?this.dataLabelRectCollection:{},this.dataLabelRectCollection[this.commonId+(null!==n.removedPointIndex&&n.removedPointIndex<=u.index?u.index+1:u.index)+"_Text_"+s]=nt,this.dataLabelRectCollection[this.commonId+u.index+"_TextShape_"+s]=nt),null!==n.removedPointIndex&&n.removedPointIndex<=u.index&&(n.textElement.lastChild.id=this.commonId+u.index+"_Text_"+s),this.chart.redraw&&ot!==c.text&&ob(n.textElement.querySelector("#"+this.commonId+u.index+"_Text_"+s),this.chart.duration,parseFloat(ot),parseFloat(c.text),n.marker.dataLabel.format||n.yAxis.labelFormat))}return wt},n.prototype.renderStackLabels=function(){var s=this.chart.renderer.createGroup({id:this.chart.element.id+"_StackLabelGroup"}),l,c,u,n,t,i,f;!this.chart.enableCanvas&&s&&this.chart.seriesElements.appendChild(s);var e={},o={},r=[],h=[],a=0;if(this.chart.visibleSeries&&this.chart.visibleSeries.length>0){for(l=0;l<this.chart.visibleSeries.length;l++)h=Object.keys(r),r[(n=this.chart.visibleSeries[l]).stackingGroup]?void 0!==r[n.stackingGroup]&&r[n.stackingGroup].push(n):(r[n.stackingGroup]=[],r[n.stackingGroup].push(n));if(""!==h[0])for(c=0;c<h.length;c++){for(e={},o={},u=r[h[c]][r[h[c]].length-1].index;u>=0;u--)if(n=this.chart.visibleSeries[u],!this.chart.enableCanvas&&n.animation.enable&&this.chart.animateSeries&&s.setAttribute("visibility","hidden"),n.visible&&n.points&&n.points.length>0)for(t=0;t<n.points.length;t++)i=n.points[t],!e[f=String(i.x)]&&n.stackedValues.endValues[t]>0&&i.visible&&(e[f]=i),!o[f]&&n.stackedValues.endValues[t]<0&&i.visible&&(o[f]=i);a=this.calculateStackLabel(e,o,s,a)}else{for(u=this.chart.visibleSeries.length-1;u>=0;u--)if(n=this.chart.visibleSeries[u],!this.chart.enableCanvas&&n.animation.enable&&this.chart.animateSeries&&s.setAttribute("visibility","hidden"),n.visible&&n.points&&n.points.length>0)for(t=0;t<n.points.length;t++)i=n.points[t],!e[f=String(i.x)]&&n.stackedValues.endValues[t]>0&&i.visible&&(e[f]=i),!o[f]&&n.stackedValues.endValues[t]<0&&i.visible&&(o[f]=i);this.calculateStackLabel(e,o,s,a)}}},n.prototype.calculateStackLabel=function(n,t,r,u){var f=this;return[n,t].forEach(function(e,s){if(e){var h,c=0;Object.keys(e).forEach(function(l){var ut=e[l].series.stackedValues.endValues[e[l].index],st=t[l]?t[l].series.stackedValues.endValues[t[l].index]:0,a,y,p,tt,it,d,rt,g;if(0===s?(c=ut+st,h=e[l]):n[l]||(c=ut,h=e[l]),h&&h.symbolLocations[0]){var v=h.series,w=h.symbolLocations[0],b=f.chart.stackLabels.format,k=c%1==0?c.toFixed(0):"0"===c.toFixed(2).slice(-1)?c.toFixed(1):c.toFixed(2);b&&(k=null!==b.match("{value}")?b.replace("{value}",k.toString()):f.chart.intl.getNumberFormat({format:b,useGrouping:f.chart.useGroupingSeparator})(c));a=i.measureText(k,f.chart.stackLabels.font,f.chart.themeStyle.datalabelFont);void 0===f.chartBackground&&(f.chartBackground="transparent"===f.chart.chartArea.background?f.chart.background||f.chart.themeStyle.background:f.chart.chartArea.background);var nt=wu(vi("transparent"===f.chart.stackLabels.fill&&"transparent"===f.chartBackground?f.chart.theme.indexOf("Dark")>-1||f.chart.theme.indexOf("HighContrast")>-1?"black":"white":"transparent"!==f.chart.stackLabels.fill?f.chart.stackLabels.fill:f.chartBackground)),ht=Math.round((299*nt.r+587*nt.g+114*nt.b)/1e3),et=a.width+f.chart.stackLabels.border.width+f.chart.stackLabels.margin.left+f.chart.stackLabels.margin.right-5,lt=f.chart.requireInvertedAxis?5:f.chart.primaryYAxis.isInversed?0===s?a.height+5:-10:0===s?-10:a.height+5,ot=f.chart.requireInvertedAxis?f.chart.primaryYAxis.isInversed?0===s?-(10+a.width/2):10+a.width/2:0===s?10+a.width/2:-(10+a.width/2):0;ot+="Far"===f.chart.stackLabels.font.textAlignment?et:"Near"===f.chart.stackLabels.font.textAlignment?-et:0;y=Math.max(v.clipRect.x+a.width,Math.min(ot+v.clipRect.x+w.x,v.clipRect.x+v.clipRect.width-a.width));p=Math.max(v.clipRect.y+a.height,Math.min(lt+v.clipRect.y+w.y-(f.chart.stackLabels.angle>0&&!f.chart.requireInvertedAxis?a.width/2:0),v.clipRect.y+v.clipRect.height-a.height));f.chart.enableCanvas&&(y-=v.clipRect.x,p-=v.clipRect.y);tt=new i.Rect(y-a.width/2-f.chart.stackLabels.margin.left,p-a.height-f.chart.stackLabels.margin.top,a.width+(f.chart.stackLabels.margin.left+f.chart.stackLabels.margin.right),a.height+5+(f.chart.stackLabels.margin.top+f.chart.stackLabels.margin.bottom));it=f.chart.renderer.drawRectangle(new ft(f.chart.element.id+"StackLabel_TextShape_"+u,f.chart.stackLabels.fill,f.chart.stackLabels.border,null,tt,f.chart.stackLabels.rx,f.chart.stackLabels.ry,"",null),new Int32Array([w.x,w.y]));for(d in it.setAttribute("transform","rotate("+f.chart.stackLabels.angle+", "+y+", "+p+")"),o(f.chart.enableCanvas,r,it,f.chart.redraw),ct(f.chart.renderer,new i.TextOption(f.chart.element.id+"_StackLabel_"+u,y,p,"middle",k,"rotate("+f.chart.stackLabels.angle+", "+y+", "+p+")","auto",f.chart.stackLabels.angle),f.chart.stackLabels.font,f.chart.stackLabels.font.color||("Bootstrap5"===f.chart.theme?"#212529":"Bootstrap5Dark"===f.chart.theme?"#DEE2E6":ht>=128?f.chart.theme.indexOf("Tailwind3")>-1?"#111827":"black":f.chart.theme.indexOf("Tailwind3")>-1?"#FFFFFF":"white"),r,null,f.chart.redraw,!0,null,f.chart.duration,v.clipRect,0,null,f.chart.enableCanvas,null,f.chart.themeStyle.datalabelFont,null),"StackingLine"!==v.type&&"StackingArea"!==v.type||document.querySelectorAll('[id^="'+f.chart.element.id+"_Series_"+v.index+"_Point_"+h.index+'_Text_"], \n                                [id^="'+f.chart.element.id+"_Series_"+v.index+"_Point_"+h.index+'_TextShape_"]').forEach(function(n){n.id&&(n.style.visibility="hidden",n.setAttribute("data-collide","true"))}),f.dataLabelRectCollection)Object.prototype.hasOwnProperty.call(f.dataLabelRectCollection,d)&&(rt=f.dataLabelRectCollection[d],rt&&oe(tt,[rt],{x:0,y:0,height:0,width:0})&&(g=document.getElementById(d),g&&(g.style.visibility="hidden",g.setAttribute("data-collide","true"))))}u++})}}),u},n.prototype.getRectanglePoints=function(n){return[new h(n.x,n.y),new h(n.x+n.width,n.y),new h(n.x+n.width,n.y+n.height),new h(n.x,n.y+n.height)]},n.prototype.isDataLabelOverlapWithChartBound=function(n,t,i){for(var r=0;r<n.length;r++)if(!ht(n[r].x+i.x,n[r].y+i.y,t.initialClipRect))return!0;return!1},n.prototype.createDataLabelTemplate=function(n,i,r,u,f,e,o){this.margin={left:0,right:0,bottom:0,top:0};var s=i.clipRect,h=ee(t.createElement("div",{id:this.chart.element.id+"_Series_"+(void 0===i.index?i.category:i.index)+"_DataLabel_"+u.index+(e?"_"+e:""),styles:"position: absolute;background-color:"+f.color+";"+ko(r.font,this.chart.themeStyle.datalabelFont)+";border:"+f.border.width+"px solid "+f.border.color+";"}),u.index,this.chart.enableHtmlSanitizer?this.chart.sanitize(f.template):f.template,this.chart,u,i,this.chart.element.id+"_DataLabel",e);this.calculateTemplateLabelSize(n,h,u,i,r,e,s,o)},n.prototype.calculateTemplateLabelSize=function(n,t,r,u,f,e,s,h,c){var a=go(t,h,c),l=this.calculateTextPosition(r,u,{width:a.width,height:a.height},f,e),p=!1,v,y;c&&(p=0===a.width||0===a.height);t.style.left=("PolarRadar"===this.chart.chartAreaType?0:u.clipRect.x)+l.x-0+"px";t.style.top=("PolarRadar"===this.chart.chartAreaType?0:u.clipRect.y)+l.y+0+"px";v=u.chart.requireInvertedAxis?u.xAxis:u.yAxis;y=u.chart.requireInvertedAxis?u.yAxis:u.xAxis;t.childElementCount&&!p&&(!oe(l,this.chart.dataLabelCollections,s)||"None"===f.labelIntersectAction)&&("XY"!==u.seriesType||void 0===r.yValue||si(r.yValue,u.yAxis.visibleRange)||u.type.indexOf("Stacking")>-1||u.type.indexOf("100")>-1&&si(u.stackedValues.endValues[r.index],u.yAxis.visibleRange))&&si(r.xValue,u.xAxis.visibleRange)&&parseFloat(t.style.top)>=v.rect.y&&parseFloat(t.style.left)>=y.rect.x&&parseFloat(t.style.top)<=v.rect.y+v.rect.height&&parseFloat(t.style.left)<=y.rect.x+y.rect.width&&(this.chart.dataLabelCollections.push(new i.Rect(l.x+s.x,l.y+s.y,l.width,l.height)),o(this.chart.enableCanvas,n,t,h,!0,"left","top"),u.animation.enable&&this.chart.animateSeries&&!this.chart.enableCanvas?this.doDataLabelAnimation(u,t):this.chart.enableCanvas&&n.appendChild(t))},n.prototype.calculateTextPosition=function(n,t,i,r,u){var e,s=u>1&&"Candle"===t.type?n.regions[1]:n.regions[0],o,h,c,f;return u>1&&"HiloOpenClose"===t.type&&(s=2===u?n.regions[1]:n.regions[2]),e=this.getLabelLocation(n,t,i,u),o=t.clipRect,this.chart.requireInvertedAxis&&this.isRectSeries(t)&&"BoxAndWhisker"!==t.type?(this.locationY=e.y,h=i.width+this.borderWidth+this.margin.left+this.margin.right-5,e.x="Auto"===r.position?e.x:this.calculateAlignment(h,e.x,r.alignment,n.yValue<0),e.x=this.calculateRectPosition(e.x,s,n.yValue<0!==this.yAxisInversed,r.position,t,i,u,n)):(this.locationX=e.x,h=i.height+2*this.borderWidth+this.markerHeight+this.margin.bottom+this.margin.top+5,e.x="Auto"===r.position?e.x:this.calculateAlignment(h,e.x,r.alignment,!!this.isRectSeries(t)&&n.yValue<0),e.y=this.isRectSeries(t)&&"BoxAndWhisker"!==t.type?this.calculateRectPosition(e.y,s,n.yValue<0!==this.yAxisInversed,r.position,t,i,u,n):this.calculatePathPosition(e.y,r.position,t,n,i,u),this.isRectSeries(t)&&"PolarRadar"===this.chart.chartAreaType&&(e=this.calculatePolarRectPosition(e,r.position,t,n,i,u,r.alignment,h))),f=gs(e,i,this.margin),!0===r.enableRotation&&0!==r.angle||f.y>o.y+o.height||f.x>o.x+o.width||f.x+f.width<0||f.y+f.height<0||(f.x=f.x<0?"StackingColumn"!==t.type||this.inverted?5:0:f.x,f.y=f.y<0&&!this.chart.requireInvertedAxis&&"None"!==r.labelIntersectAction?5:f.y,f.x-=f.x+f.width>o.x+o.width?f.x+f.width-(o.x+o.width)+5:0,f.y-=f.y+f.height>o.y+o.height?f.y+f.height-(o.y+o.height)+5:0,this.fontBackground="transparent"===this.fontBackground?this.chartBackground:this.fontBackground),this.inverted&&t.isRectSeries&&f.x+f.width>s.x+s.width&&(c=!0),this.fontBackground=c?this.chartBackground:this.fontBackground,f},n.prototype.calculatePolarRectPosition=function(n,t,i,r,u,f,e,o){var s,h=this.chart.availableSize.width,l="Center"===e?0:"Far"===e?1:-1,c=r.regionData.startAngle-.5*Math.PI+(r.regionData.endAngle-r.regionData.startAngle)/2;return s=0===f?r.regionData.radius<r.regionData.innerRadius?r.regionData.innerRadius:r.regionData.radius:r.regionData.radius>r.regionData.innerRadius?r.regionData.innerRadius:r.regionData.radius,this.fontBackground="transparent"===this.fontBackground?this.chartBackground:this.fontBackground,i.drawType.indexOf("Stacking")>-1?t="Outer"===t?"Top":t:i.drawType.indexOf("Range")>-1&&(t="Outer"===t||"Top"===t?t:"Auto"),"Outer"===t?s=0===f?s+10+this.markerHeight:s-10-this.markerHeight:"Middle"===t?(s=s/2+5,"StackingColumn"===i.drawType&&(s=r.regionData.innerRadius+(r.regionData.radius-r.regionData.innerRadius)/2+5-u.height/2)):"Top"===t?s=0===f?s-10-this.markerHeight:s+10+this.markerHeight:"Bottom"===t?(s=10,s+="StackingColumn"===i.drawType?r.regionData.innerRadius+this.markerHeight:0):s=0===f?s>=i.chart.radius?s-5:"StackingColumn"===i.drawType?s-10:s+10:s>=i.chart.radius?s+5:s-10,s+=o*l,n.x=i.clipRect.width/2+i.clipRect.x+s*Math.cos(c),"StackingColumn"===i.drawType?n.x=n.x<h/2?n.x+u.width/2:n.x>h/2?n.x-u.width/2:n.x:"Column"===i.drawType&&(n.x=n.x<h/2?n.x-u.width/2:n.x>h/2?n.x+u.width/2:n.x),n.y=i.clipRect.height/2+i.clipRect.y+s*Math.sin(c),n},n.prototype.getLabelLocation=function(n,t,i,r){var f=new h(0,0),u="Candle"===t.type&&r>1?n.regions[1]:n.regions[0],c,a;"HiloOpenClose"===t.type&&(u=2===r?n.regions[1]:n.regions[2]);var o=t.xAxis,s=t.yAxis,e=t.chart.requireInvertedAxis;if("BoxAndWhisker"===t.type){switch(this.markerHeight=0,r){case 0:f=l(n.xValue,n.median,o,s,e);break;case 1:f=l(n.xValue,n.maximum,o,s,e);break;case 2:f=l(n.xValue,n.minimum,o,s,e);break;case 3:f=l(n.xValue,n.upperQuartile,o,s,e);break;case 4:f=l(n.xValue,n.lowerQuartile,o,s,e);break;default:f=l(n.xValue,n.outliers[r-5],o,s,e);this.markerHeight=t.marker.height/2}e?f.y=n.regions[0].y+n.regions[0].height/2:f.x=n.regions[0].x+n.regions[0].width/2}else f=e&&t.type.indexOf("Stacking")>-1&&0===n.yValue?{x:u.x+u.width,y:u.y+u.height/2}:0===r||1===r?new h(n.symbolLocations[0].x,n.symbolLocations[0].y):2!==r&&3!==r||"Candle"!==t.type?e?{x:u.x+u.width/2,y:u.y}:{x:u.x+u.width,y:u.y+u.height/2}:new h(n.symbolLocations[1].x,n.symbolLocations[1].y);return r>1&&"HiloOpenClose"===t.type&&(t.chart.requireInvertedAxis?(c=u.height,f.y=u.y+c/2+2*(2===r?1:-1)):(a=u.width,f.x=u.x+a/2+2*(2===r?1:-1))),f},n.prototype.calculateRectPosition=function(n,t,i,r,u,f,e,o){var s,v,y,l;if("PolarRadar"===u.chart.chartAreaType)return null;s=this.margin;v=u.marker.dataLabel.enableRotation||this.inverted?f.width:f.height;switch(this.extraSpace="Bottom"===r&&"StackingColumn"===u.type&&!this.inverted&&t.height<f.height?this.borderWidth+(Math.abs(t.height-f.height/2)<5?0:5):this.borderWidth+v/2+("Outer"!==r&&u.type.indexOf("Column")>-1&&Math.abs(t.height-f.height)<5?0:5),"StackingColumn100"===u.type||"StackingBar100"===u.type?r="Outer"===r?"Top":r:u.type.indexOf("Range")>-1?r="Outer"===r||"Top"===r?r:"Auto":"Waterfall"===u.type&&(r="Auto"===r?"Middle":r),r){case"Bottom":n=this.inverted?i?n+("Waterfall"===u.type?+this.extraSpace+s.left+this.markerHeight:+t.width-this.extraSpace-s.left):n-t.width+this.extraSpace+s.right:i?n+("Waterfall"===u.type?-this.extraSpace-s.top-this.markerHeight:-t.height+this.extraSpace+s.top):n+t.height-this.extraSpace-s.bottom;break;case"Middle":n=n=this.inverted?i?n+t.width/2:n-t.width/2:i?n-t.height/2:n+t.height/2;break;case"Auto":n=this.calculateRectActualPosition(n,t,i,u,f,e,o);break;default:this.extraSpace+=this.errorHeight;n=this.calculateTopAndOuterPosition(n,t,r,u,e,this.extraSpace,i,o)}if(y=this.inverted?n<t.x||n>t.x+t.width:n<t.y||n>t.y+t.height,this.fontBackground=y?"transparent"===this.fontBackground?this.chartBackground:this.fontBackground:"transparent"===this.fontBackground?o.color||u.interior:this.fontBackground,l=u.chart.series.length,"Outer"===r&&u.type.indexOf("Stacking")>-1&&l-1>u.index)for(var c=void 0,h=void 0,a=u.index+1;a<l;a++)if(h=(c=u.chart.series[a]).points[o.index],c.type.indexOf("Stacking")>-1&&-1===c.type.indexOf("100")){this.fontBackground=h&&(h.yValue<0&&o.yValue<0||h.yValue>0&&o.yValue>0)?h?h.color:c.interior:this.fontBackground;break}return n},n.prototype.calculatePathPosition=function(n,t,i,r,u,f){switch(i.type.indexOf("Area")>-1&&"RangeArea"!==i.type&&"SplineRangeArea"!==i.type&&"RangeStepArea"!==i.type&&this.yAxisInversed&&"Auto"!==i.marker.dataLabel.position&&(t="Top"===t?"Bottom":"Bottom"===t?"Top":t),this.fontBackground="transparent"===this.fontBackground?this.chartBackground:this.fontBackground,t){case"Top":case"Outer":n=n-this.markerHeight-this.borderWidth-u.height/2-this.margin.bottom-5-this.errorHeight;break;case"Bottom":n=n+this.markerHeight+this.borderWidth+u.height/2+this.margin.top+5+this.errorHeight;break;case"Auto":n=this.calculatePathActualPosition(n,this.markerHeight,i,r,u,f)}return n},n.prototype.isDataLabelShape=function(n){this.isShape="transparent"!==n.color||n.border.width>0;this.borderWidth=n.border.width;this.isShape||(this.margin={left:0,right:0,bottom:0,top:0})},n.prototype.calculateRectActualPosition=function(n,t,i,r,u,f,e){for(var c,l,o,s=!0,a=0,v=this.chart.dataLabelCollections,y=-1!==r.type.indexOf("Range")||"Hilo"===r.type?2:4;s&&a<y;)c=this.getPosition(a),this.fontBackground=r.marker.dataLabel.fill,r.type.indexOf("Stacking")>-1&&"Outer"===c&&(c="Top",a++),l=this.calculateRectPosition(n,t,i,c,r,u,f,e),this.inverted?s=(o=gs(new h(l,this.locationY),u,this.margin)).x<0||oe(o,v,r.clipRect)||o.x+o.width>r.clipRect.width:(r.marker.dataLabel.enableRotation&&(u.width=u.width-e.regions[0].width/10),s=(o=gs(new h(this.locationX,l),u,this.margin)).y<0||oe(o,v,r.clipRect)||o.y>r.clipRect.height,null===r.marker.dataLabel.template&&!0!==s&&(s=o.y/2+u.height+("Outer"===c?e.regions[0].height+this.extraSpace:e.regions[0].height-2*this.extraSpace)>r.clipRect.height)),a++;return l},n.prototype.calculateAlignment=function(n,t,i,r){switch(i){case"Far":t=this.inverted?r?t-n:t+n:r?t+n:t-n;break;case"Near":t=this.inverted?r?t+n:t-n:r?t-n:t+n}return t},n.prototype.calculateTopAndOuterPosition=function(n,t,i,r,u,f,e,o){var h,s=this.margin;switch(r.type){case"RangeColumn":case"RangeArea":case"RangeStepArea":case"SplineRangeArea":case"Hilo":h=0===u&&!this.yAxisInversed||1===u&&this.yAxisInversed;n=this.updateLabelLocation(i,n,f,s,t,h);break;case"Candle":h=(0===u||2===u)&&!this.yAxisInversed||(1===u||3===u)&&this.yAxisInversed;n=this.updateLabelLocation(i,n,f,s,t,h,u>1);break;case"HiloOpenClose":u<=1?(h=0===u&&!this.yAxisInversed||1===u&&this.yAxisInversed,n=this.updateLabelLocation(i,n,f,s,t,h)):n=this.yAxisInversed?this.inverted?n-f-s.right:n+f+s.top:this.inverted?n+f+s.left:n-f-s.bottom;break;default:n=e&&"Top"===i||!e&&"Outer"===i||"Top"===i&&0===r.visiblePoints[o.index].yValue?this.inverted?n+(e&&"Waterfall"===r.type?+t.width-f-s.left:+f+s.left+this.markerHeight):n+(e&&"Waterfall"===r.type?-t.height+f+s.bottom:-f-s.bottom-this.markerHeight):this.inverted?n+(e&&"Waterfall"===r.type?+t.width+f+s.top:-f-s.right-this.markerHeight):n+(e&&"Waterfall"===r.type?-t.height-f-s.top:+f+s.top+this.markerHeight)}return n},n.prototype.updateLabelLocation=function(n,t,i,r,u,f,e){return void 0===e&&(e=!1),this.inverted?f?"Outer"!==n||e?t-i-r.right-this.markerHeight:t+i+r.left+this.markerHeight:"Outer"!==n||e?t-u.width+i+r.left+this.markerHeight:t-u.width-i-r.right-this.markerHeight:f?"Outer"!==n||e?t+i+r.top+this.markerHeight:t-i-r.bottom-this.markerHeight:"Outer"!==n||e?t+u.height-i-r.bottom-this.markerHeight:t+u.height+i+r.top+this.markerHeight},n.prototype.calculatePathActualPosition=function(n,t,i,r,u,f){var e,y,p,w,a,v=i.points,s=r.index,c=v[s].yValue,l=v.length-1>s?v[s+1]:null,o=s>0?v[s-1]:null,b=!0,g=this.chart.dataLabelCollections,k,d;for("Bubble"===i.type?e="Top":i.type.indexOf("Step")>-1?(e="Top",s&&(e=o&&o.visible&&c>o.yValue===this.yAxisInversed&&c!==o.yValue?"Bottom":"Top")):"BoxAndWhisker"===i.type?1===f||3===f||f>4?e=i.yAxis.isAxisInverse?"Bottom":"Top":2===f||4===f?e=i.yAxis.isAxisInverse?"Top":"Bottom":(b=!1,e="Middle",y=this.calculatePathPosition(n,e,i,r,u,f)):0===s?e=!l||!l.visible||c>l.yValue||c<l.yValue&&this.yAxisInversed?"Top":"Bottom":s===v.length-1?e=!o||!o.visible||c>o.yValue||c<o.yValue&&this.yAxisInversed?"Top":"Bottom":l.visible||o&&o.visible?l.visible&&o?(k=(l.yValue-o.yValue)/2,d=k*s+(l.yValue-k*(s+1)),e=this.yAxisInversed?d<c?"Bottom":"Top":d<c?"Top":"Bottom"):e=l.yValue>c||o&&o.yValue>c?"Bottom":"Top":e="Top",w="Bottom"===e,a=["Outer","Top","Bottom","Middle","Auto"].indexOf(e);b&&a<4;)y=this.calculatePathPosition(n,this.getPosition(a),i,r,u,f),b=(p=gs(new h(this.locationX,y),u,this.margin)).y<0||oe(p,g,i.clipRect)||p.y+p.height>i.clipRect.height,a=w?a-1:a+1,w=!1;return y},n.prototype.doDataLabelAnimation=function(n,t){for(var i,f=n.shapeElement.childNodes,e=n.textElement.childNodes,u=n.animation.delay+n.animation.duration,o=n.chart.animated?n.chart.duration:200,s=t?1:e.length,r=0;r<s;r++)i=e[r],t?(t.style.visibility="hidden",bo(t,u,o,"ZoomIn")):(new h(+i.getAttribute("x")+ +i.getAttribute("width")/2,+i.getAttribute("y")+ +i.getAttribute("height")/2),pu(i,u,n.animation.duration,n,null,0,!0),f[r]&&(i=f[r],new h(+i.getAttribute("x")+ +i.getAttribute("width")/2,+i.getAttribute("y")+ +i.getAttribute("height")/2),pu(i,u,n.animation.duration,n,null,0,!0)))},n.prototype.getPosition=function(n){return["Outer","Top","Bottom","Middle","Auto"][n]},n.prototype.getModuleName=function(){return"DataLabel"},n.prototype.destroy=function(){},n}(),gst=function(){function n(n){this.chart=n}return n.prototype.render=function(n){if("PolarRadar"===this.chart.chartAreaType)return null;this.createElement(n,this.chart);this.renderErrorBar(n)},n.prototype.renderErrorBar=function(n){for(var t,s,h,v,y,p,w=n.index,u=n.errorBar,b=n.errorBar.errorBarCap,e=["",""],c=n.chart.redraw,l=0,k=n.points;l<k.length;l++)if(t=k[l],t.visible&&t.symbolLocations[0]){s=0;h=0;switch(u.mode){case"Vertical":h=t.verticalError;break;case"Horizontal":s=t.horizontalError;break;case"Both":s=t.horizontalError;h=t.verticalError}e=this["calculate"+u.type+"Value"](t,n,this.chart.requireInvertedAxis,s,h);y=this.chart.element.id+"_Series__ErrorBarGroup_"+w+"_Point_"+t.index;p=this.chart.element.id+"_Series__ErrorBarCap_"+w+"_Point_"+t.index;var d=new i.PathOption(y,"",u.width,u.errorBarColorMapping?t.errorBarColor:u.color||this.chart.themeStyle.errorBar,null,"",e[0]),f=r(d.id),a=f?f.getAttribute("d"):null;n.errorBarElement&&n.errorBarElement.appendChild(this.chart.renderer.drawPath(d));kf(f,e[0],c,a,this.chart.duration);v=new i.PathOption(p,"",b.width,u.errorBarCap.color?b.color:u.errorBarColorMapping?t.errorBarColor:u.color||this.chart.themeStyle.errorBar,null,"",e[1]);a=(f=r(v.id))?f.getAttribute("d"):null;n.errorBarElement&&o(this.chart.enableCanvas,n.errorBarElement,this.chart.renderer.drawPath(v),c);kf(f,e[1],c,a,this.chart.duration)}},n.prototype.findLocation=function(n,t,i,r,u){var f=t.errorBar,o=f.direction,e=[],h=t.type.indexOf("Stacking")>-1?t.stackedValues.endValues[n.index]:"HighLow"===t.seriesType||"HighLowOpenClose"===t.seriesType?t.points[n.index].high:n.yValue,a=l(n.xValue+("Plus"===o||"Both"===o?"Custom"!==f.type||"Horizontal"!==f.mode&&"Both"!==f.mode?r:r=n.horizontalPositiveError:0),h+("Plus"===o||"Both"===o?"Custom"!==f.type||"Vertical"!==f.mode&&"Both"!==f.mode?u:u=n.verticalPositiveError:0),t.xAxis,t.yAxis,i),s,c;return(e.push(a),t.isRectSeries)?(s=n.symbolLocations[0],e.push(s)):(s=l(n.xValue,n.yValue,t.xAxis,t.yAxis,i),e.push(s)),c=l(n.xValue-("Minus"===o||"Both"===o?"Custom"!==f.type||"Horizontal"!==f.mode&&"Both"!==f.mode?r:r=n.horizontalNegativeError:0),h-("Minus"===o||"Both"===o?"Custom"!==f.type||"Vertical"!==f.mode&&"Both"!==f.mode?u:u=n.verticalNegativeError:0),t.xAxis,t.yAxis,i),e.push(c),n.error="Vertical"===f.mode?f.verticalError:f.horizontalError,this.negativeHeight="Vertical"===f.mode||"Both"===f.mode?i?e[1].x-e[2].x:e[2].y-e[1].y:0,this.positiveHeight="Vertical"===f.mode||"Both"===f.mode?i?e[0].x-e[1].x:e[1].y-e[0].y:0,this.getErrorDirection(e[0],e[1],e[2],t,i)},n.prototype.calculateFixedValue=function(n,t,i,r,u){return this.findLocation(n,t,i,r,u)},n.prototype.calculatePercentageValue=function(n,t,i,r,u){return r=r/100*n.xValue,u=u/100*n.yValue,this.findLocation(n,t,i,r,u)},n.prototype.calculateStandardDeviationValue=function(n,t,i,r,u){var f=this.meanCalculation(t,t.errorBar.mode);return r*=f.horizontalSquareRoot+f.horizontalMean,u*=f.verticalSquareRoot+f.verticalMean,this.findLocation(n,t,i,r,u)},n.prototype.calculateStandardErrorValue=function(n,t,i,r,u){var f=t.points.length,e=this.meanCalculation(t,t.errorBar.mode);return r=r*e.horizontalSquareRoot/Math.sqrt(f),u=u*e.verticalSquareRoot/Math.sqrt(f),this.findLocation(n,t,i,r,u)},n.prototype.calculateCustomValue=function(n,t,i,r,u){return this.findLocation(n,t,i,r,u)},n.prototype.getHorizontalDirection=function(n,t,i,r,u,f){var e="",o="";return e+="M "+n.x+" "+t.y+" L "+i.x+" "+t.y,o+="Plus"===r||"Both"===r?"M "+n.x+" "+(t.y-f)+" L "+n.x+" "+(t.y+f):"",[e,o+="Minus"===r||"Both"===r?"M "+i.x+" "+(t.y-f)+" L "+i.x+" "+(t.y+f):" "]},n.prototype.getVerticalDirection=function(n,t,i,r,u,f){var e="",o="";return e+="M "+t.x+" "+n.y+" L "+t.x+" "+i.y,o+="Plus"===r||"Both"===r?"M "+(t.x-f)+" "+n.y+" L "+(t.x+f)+" "+n.y:"",[e,o+="Minus"===r||"Both"===r?"M "+(t.x-f)+" "+i.y+" L "+(t.x+f)+" "+i.y:""]},n.prototype.getBothDirection=function(n,t,i,r,u,f){var e=this.getHorizontalDirection(n,t,i,r,u,f),o=this.getVerticalDirection(n,t,i,r,u,f);return[e[0].concat(o[0]),e[1].concat(o[1])]},n.prototype.getErrorDirection=function(n,t,i,r,u){var e,s=r.errorBar.direction,o=r.errorBar.mode,h=r.errorBar.errorBarCap.length,f=o;switch(o){case"Both":f=o;break;case"Horizontal":f=u?"Vertical":o;break;case"Vertical":f=u?"Horizontal":o}switch(f){case"Horizontal":e=this.getHorizontalDirection(n,t,i,s,f,h);break;case"Vertical":e=this.getVerticalDirection(n,t,i,s,f,h);break;case"Both":e=this.getBothDirection(n,t,i,s,f,h)}return[e[0],e[1]]},n.prototype.meanCalculation=function(n,t){var u=0,r=0,f=0,e=0,i=n.points.length,o,h,s;switch(t){case"Vertical":f=(r=lt(n.yData))/i;break;case"Horizontal":e=(u=lt(n.xData))/i;break;case"Both":f=(r=lt(n.yData))/i;e=(u=lt(n.xData))/i}for(o=0,h=n.points;o<h.length;o++)s=h[o],"Vertical"===t?r+=Math.pow(s.yValue-f,2):("Horizontal"===t||(r+=Math.pow(s.yValue-f,2)),u+=Math.pow(s.xValue-e,2));var c=r/(i-1),l=Math.sqrt(r/(i-1)),a=u/(i-1),v=Math.sqrt(u/(i-1));return new nv(c,l,a,v,f,e)},n.prototype.createElement=function(n,t){var f="Cartesian"===t.chartAreaType?"translate("+n.clipRect.x+","+n.clipRect.y+")":"",i=n.marker.height/2,r=n.marker.width/2,u;"Cartesian"===t.chartAreaType&&(u=new ft(t.element.id+"_ChartErrorBarClipRect_"+n.index,"transparent",{width:1,color:"Gray"},1,{x:-r,y:-i,width:n.clipRect.width+2*r,height:n.clipRect.height+2*i}),n.errorBarElement=t.renderer.createGroup({id:t.element.id+"ErrorBarGroup"+n.index,transform:f,"clip-path":"url(#"+t.element.id+"_ChartErrorBarClipRect_"+n.index+")"}),n.errorBarElement&&n.errorBarElement.appendChild(eu(t.redraw,u,t.renderer)))},n.prototype.doErrorBarAnimation=function(n){var r=n.errorBarElement.childNodes,f,i,u;if(!r)return null;for(f=n.animation.delay+(0===n.animation.duration&&"Enable"===t.animationMode?1e3:n.animation.duration),i=1;i<r.length;){for(u=0;u<n.points.length;u++)n.points[u].symbolLocations[0]&&(r[i].style.visibility="hidden",bo(r[i],f,350,n.chart.requireInvertedAxis?"SlideLeftIn":"SlideBottomIn",!1));i++}},n.prototype.getModuleName=function(){return"ErrorBar"},n.prototype.destroy=function(){},n}(),nht=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tht=function(n){function r(t){var i=n.call(this,t)||this;return i.library=i,i.addEventListener(),i}return nht(r,n),r.prototype.addEventListener=function(){this.chart.isDestroyed||(this.chart.on(t.Browser.touchMoveEvent,this.mouseMove,this),this.chart.on("click",this.click,this),this.chart.on(t.Browser.touchEndEvent,this.mouseEnd,this))},r.prototype.removeEventListener=function(){this.chart.isDestroyed||(this.chart.off(t.Browser.touchMoveEvent,this.mouseMove),this.chart.off("click",this.click),this.chart.off(t.Browser.touchEndEvent,this.mouseEnd))},r.prototype.mouseMove=function(n){var i;if(this.chart.legendSettings.visible&&!this.chart.isTouch&&(this.move(n),this.chart.highlightModule&&("None"!==this.chart.highlightMode||this.chart.legendSettings.enableHighlight)))for(var e=[this.legendID+"_text_",this.legendID+"_shape_marker_",this.legendID+"_shape_",this.legendID+"_g_"],r=n.target.id,u=void 0,t=0,f=e;t<f.length;t++)if(i=f[t],r.indexOf(i)>-1){u=parseInt(r.split(i)[1],10);this.chart.highlightModule.legendSelection(this.chart,u,n.target,n.type);break}},r.prototype.mouseEnd=function(n){this.chart.legendSettings.visible&&this.chart.isTouch&&this.move(n)},r.prototype.getLegendOptions=function(n,t){var f,r,c,e,l,i,o,a,u,s,v,y,h,p,w,b,k;for(this.legendCollections=[],c=[],this.isRtlEnable=t.enableRtl,this.isReverse=!this.isRtlEnable&&t.legendSettings.reverse,n.length>1&&(this.legend.mode="Series"),e=0,l=n;e<l.length;e++)if(i=l[e],"Series"===this.legend.mode)"Indicator"!==i.category&&(f="PolarRadar"===t.chartAreaType?i.drawType:i.type,r=i.interior,this.legendCollections.push(new br(i.name,r,i.legendShape,"TrendLine"===i.category?this.chart.series[i.sourceIndex].trendlines[i.index].visible:i.visible,f,i.legendImageUrl?i.legendImageUrl:"Scatter"===i.type&&"Image"===i.marker.shape?i.marker.imageUrl:"",i.marker.shape,i.marker.visible,null,null)));else if("Point"===this.legend.mode)for(o=0,a=i.points;o<a.length;o++)u=a[o],f="PolarRadar"===t.chartAreaType?i.drawType:i.type,r=u.interior?u.interior:i.interior,this.legendCollections.push(new br(u.x.toString(),r,i.legendShape,"TrendLine"===i.category?this.chart.series[i.sourceIndex].trendlines[i.index].visible:u.visible,f,"Scatter"===i.type&&"Image"===i.marker.shape?i.marker.imageUrl:"",i.marker.shape,i.marker.visible));else if("Range"===this.legend.mode){for(s=0,v=i.points;s<v.length;s++)if(u=v[s],f="PolarRadar"===t.chartAreaType?i.drawType:i.type,r=u.interior?u.interior:i.interior,y="Others",c.indexOf(r)<0&&(c.push(r),t.rangeColorSettings.length>=1&&1===t.rangeColorSettings[0].colors.length)){for(h=0,p=t.rangeColorSettings;h<p.length;h++)w=p[h],w.colors[0]===r&&(y=w.label);this.legendCollections.push(new br(y,r,i.legendShape,"TrendLine"===i.category?this.chart.series[i.sourceIndex].trendlines[i.index].visible:u.visible,f,"Scatter"===i.type&&"Image"===i.marker.shape?i.marker.imageUrl:"",i.marker.shape,i.marker.visible))}}else 0===this.legendCollections.length&&t.rangeColorSettings.length>0&&(b=t.rangeColorSettings[0].start.toString(),k=t.rangeColorSettings[t.rangeColorSettings.length-1].end.toString(),this.legendCollections.push(new br(b,i.interior,"Rectangle",!0,f,"",i.marker.shape,i.marker.visible)),this.legendCollections.push(new br(k,i.interior,"Rectangle",!0,f,"",i.marker.shape,i.marker.visible)));this.isReverse&&"Gradient"!==t.legendSettings.mode&&this.legendCollections.reverse()},r.prototype.getLegendBounds=function(n,t,r){var w,e,rt,b;this.calculateLegendTitle(r,t);this.isTitle=!!r.title;this.chartRowCount=1;this.rowHeights=[];this.columnHeights=[];this.pageHeights=[];var u,f=r.padding,v=r.titlePosition,nt=0,tt=0,ut=this.arrowWidth,ft=this.arrowHeight,et=this.isVertical&&!r.enablePages?ft:0,a=this.isTitle&&"Top"===v?this.legendTitleSize.height+this.fivePixel:0;a=this.isTitle&&this.isVertical&&"Top"!==v?this.legendTitleSize.height+this.fivePixel:a;this.isVertical?tt=r.width?0:n.width/20:nt=r.height?0:n.height/20;t.height+=nt;t.width+=tt;var c,k=r.shapeWidth,d=r.shapePadding,g=0,o=0,y=0,s=0,l=0,h=0,p=0,it=!1;if(this.maxItemHeight=Math.max(i.measureText("MeasureText",r.textStyle,this.chart.themeStyle.legendLabelFont).height,r.shapeHeight),w="Auto"===r.layout&&r.maximumColumns>0,r.fixedWidth)for(e=0;e<this.legendCollections.length;e++)rt=k+d+(this.isVertical||0===e?f:this.itemPadding)+(r.maximumLabelWidth?r.maximumLabelWidth:i.measureText(this.legendCollections[e].text,r.textStyle,this.chart.themeStyle.legendLabelFont).width),this.maxWidth=Math.max(this.maxWidth,rt);for(e=0;e<this.legendCollections.length;e++)(u=this.legendCollections[e],vf.test(u.text)&&(u.text=no(u.text,vf)),pe.test(u.text)&&(u.text=no(u.text,pe)),c={fill:u.fill,text:u.text,shape:u.shape,markerShape:u.markerShape,name:te,cancel:!1},this.chart.trigger(te,c),u.render=!c.cancel,u.text=c.text,u.fill=c.fill,u.shape=c.shape,u.markerShape=c.markerShape,u.textSize=i.measureText(u.text,r.textStyle,this.chart.themeStyle.legendLabelFont),k=u.text?r.shapeWidth:0,d=u.text?r.shapePadding:0,u.render&&u.text)&&(it=!0,o+=y=r.fixedWidth?this.maxWidth:k+d+(r.maximumLabelWidth?r.maximumLabelWidth:u.textSize.width)+(this.isVertical&&"Horizontal"!==r.layout||0===e||1===l&&h>0&&"Horizontal"===r.layout?f:this.itemPadding),r.enablePages||this.isVertical||(p=this.isTitle&&"Top"!==v?this.legendTitleSize.width+this.fivePixel:0,p+=ut),this.getLegendHeight(u,r,t,o,this.maxItemHeight,f),(w?l===r.maximumColumns:"Vertical"===r.layout||t.width<f+o+p||this.isVertical&&"Auto"===r.layout)&&(g=Math.max(g,o+f+p-(this.isVertical&&"Auto"===this.legend.layout?0:y)),0===h&&y!==o&&(h=1),o=this.isVertical&&"Auto"===this.legend.layout?0:y,h++,l=0,s=et),b=h>0?h-1:0,this.rowHeights[b]=Math.max(this.rowHeights[b]?this.rowHeights[b]:0,Math.max(u.textSize.height,r.shapeHeight)),this.columnHeights[l]=(this.columnHeights[l]?this.columnHeights[l]:0)+Math.max(u.textSize.height,r.shapeHeight)+(this.isVertical||h>0&&this.legend.itemPadding?0===e?f:this.itemPadding:f),l++);s=Math.max.apply(null,this.columnHeights)+f+a;s=Math.max(s,this.maxItemHeight+f+f+a);"Horizontal"===r.layout&&(s=this.maxItemHeight+2*f+a+this.pageButtonSize+r.border.width);this.isPaging=(t.height<s||"Horizontal"===r.layout&&this.rowHeights.length>1)&&!w;this.isPaging&&!r.enablePages&&(this.isVertical||(s=this.maxItemHeight+f+f+("Top"===v?a:0)));this.totalPages=h;w&&this.maxWidth&&r.fixedWidth&&(o=this.maxWidth*r.maximumColumns,this.isPaging=!1);this.isPaging&&"Auto"===this.legend.layout||this.isVertical||(o+=this.isTitle&&"Top"!==v?this.fivePixel+this.legendTitleSize.width+this.fivePixel:0);it?this.setBounds(Math.max(o+f,g),s,r,t):this.setBounds(0,0,r,t)},r.prototype.getLegendHeight=function(n,t,i,r,u,f){var e=n.textSize.width,o=t.shapePadding+2*f+t.shapeWidth;switch(t.textWrap){case"Wrap":case"AnyWhere":e>t.maximumLabelWidth||e+r>i.width?n.textCollection=ur(n.text,t.maximumLabelWidth?Math.min(t.maximumLabelWidth,i.width-o):i.width-o,t.textStyle,this.chart.enableRtl,null,null,this.chart.themeStyle.legendLabelFont):n.textCollection.push(n.text);n.textSize.height=u*n.textCollection.length}},r.prototype.getRenderPoint=function(n,t,i,r,u,f,e){var c=this.legend.padding,s=this.legend.fixedWidth?this.maxWidth:i+(this.legend.maximumLabelWidth?this.legend.maximumLabelWidth:r.textSize.width),h=r.location.x+(this.isRtlEnable?-s:s),o;("Auto"===this.legend.layout&&this.legend.maximumColumns>0?f%this.legend.maximumColumns==0:"Vertical"===this.legend.layout||this.isWithinBounds(h,(this.legend.maximumLabelWidth?this.legend.maximumLabelWidth:n.textSize.width)+i-this.itemPadding,u)||this.isVertical&&"Auto"===this.legend.layout)?(n.location.x=t.x,f!==e&&this.chartRowCount++,n.location.y=f===e?r.location.y:r.location.y+(!this.isVertical||"Horizontal"===this.legend.layout||this.legend.maximumColumns>0?this.rowHeights[this.chartRowCount-2]:Math.max(r.textSize.height,this.legend.shapeHeight))+(this.isVertical||this.chartRowCount>1&&this.legend.itemPadding?this.itemPadding:c)):(n.location.x=f===e?r.location.x:h,n.location.y=r.location.y);o=this.isRtlEnable?n.location.x-i+this.itemPadding+this.legend.shapeWidth/2-this.legendBounds.x:this.legendBounds.x+this.legendBounds.width-(n.location.x+i-this.itemPadding-this.legend.shapeWidth/2);this.isVertical||!this.isPaging||this.legend.enablePages||(o=this.legendBounds.width-n.location.x-this.fivePixel);o=this.legend.maximumLabelWidth?Math.min(this.legend.maximumLabelWidth,o):o;"Ellipsis"===this.legend.textOverflow&&"Normal"===this.legend.textWrap&&(n.text=wi(+o.toFixed(4),n.text,this.legend.textStyle,this.chart.enableRtl,this.chart.themeStyle.legendLabelFont))},r.prototype.isWithinBounds=function(n,t,i){return this.isRtlEnable?n-t<i.x-this.legend.shapeWidth/2:n+t>i.x+i.width+this.legend.shapeWidth/2},r.prototype.LegendClick=function(n,t){var i=this.chart,y="Series"===i.legendSettings.mode?n:0,p=this.isReverse?this.legendCollections.length-1-n:n,r=i.visibleSeries[y],e=this.legendCollections[p],a="isProtectedOnChange",u,f,s,l;if("Series"===i.legendSettings.mode)u={legendText:e.text,legendShape:e.shape,chart:i.isBlazor?{}:i,series:r,points:r.points,name:ar,cancel:!1},this.chart.trigger(ar,u),r.legendShape=u.legendShape,u.cancel||(null!==r.fill&&(i.visibleSeries[n].interior=r.fill),i.legendSettings.toggleVisibility?(r.chart[a]=!0,"TrendLine"===r.category?i.series[r.sourceIndex].trendlines[r.index].visible=!i.series[r.sourceIndex].trendlines[r.index].visible&&i.series[r.sourceIndex].visible?!0:!1:this.changeSeriesVisiblity(r,r.visible),e.visible="TrendLine"===r.category?i.series[r.sourceIndex].trendlines[r.index].visible:r.visible,this.refreshLegendToggle(i,r),i.highlightModule&&i.legendSettings.enableHighlight&&i.highlightModule.legendSelection(i,n,t.target,"mousemove")):i.highlightModule?i.highlightModule.legendSelection(i,n,t.target,t.type):i.selectionModule&&i.selectionModule.legendSelection(i,n,t.target,t.type),r.chart[a]=!1);else if("Point"===i.legendSettings.mode)f=r.points[n],u={legendText:e.text,legendShape:e.shape,chart:i.isBlazor?{}:i,series:r,points:[f],name:ar,cancel:!1},this.chart.trigger(ar,u),i.legendSettings.toggleVisibility&&!u.cancel&&(f.visible=!f.visible,(o=this.legendCollections[n]).visible=f.visible,this.refreshLegendToggle(i,r));else if("Range"===i.legendSettings.mode){for(var h=[],o=this.legendCollections[n],c=0,v=r.points;c<v.length;c++)f=v[c],o.fill===(f.interior||r.interior)&&h.push(f);if(u={legendText:e.text,legendShape:e.shape,chart:i.isBlazor?{}:i,series:r,points:h,name:ar,cancel:!1},this.chart.trigger(ar,u),i.legendSettings.toggleVisibility&&!u.cancel){for(o.visible=!o.visible,s=0,l=h;s<l.length;s++)(f=l[s]).visible=!f.visible;this.refreshLegendToggle(i,r)}}},r.prototype.refreshLegendToggle=function(n,r){var f=[],u,e,o;if(n.selectionModule&&(f=t.extend([],n.selectionModule.selectedDataIndexes,null,!0)),n.svgObject.childNodes.length>0&&!n.enableAnimation&&!n.enableCanvas){for(;n.svgObject.lastChild;)n.svgObject.removeChild(n.svgObject.lastChild);t.remove(n.svgObject)}for(n.animateSeries=!1,n.redraw=n.enableAnimation,r.isLegendClicked=!0,n.rotatedDataLabelCollections=[],v(i.getElement(n.element.id+"_Secondary_Element").querySelectorAll(".ejSVGTooltip")[0]),nh(n),this.redrawSeriesElements(r,n),n.removeSvg(),n.refreshAxis(),r.refreshAxisLabel(),this.refreshSeries(n.visibleSeries),u=0,e=n.visibleSeries;u<e.length;u++)o=e[u],t.isNullOrUndefined(o)||n.markerRender.removeHighlightedMarker(o,null,!0);n.refreshBound();n.trigger("loaded",{chart:n});f.length>0&&(n.selectionModule.selectedDataIndexes=f,n.selectionModule.redrawSelection(n,n.selectionMode));n.enableCanvas||!n.highlightModule||"None"===n.highlightMode&&!n.legendSettings.enableHighlight||n.highlightModule.redrawSelection(n,n.highlightMode);n.redraw=!1;r.isLegendClicked=!1},r.prototype.changeSeriesVisiblity=function(n,t){n.visible=!t;this.isSecondaryAxis(n.xAxis)&&(n.xAxis.internalVisibility=n.xAxis.series.some(function(n){return n.visible}));(this.isSecondaryAxis(n.yAxis)||"Pareto"===n.category&&"Line"===n.type)&&(n.yAxis.internalVisibility=n.yAxis.series.some(function(n){return n.visible}));n.trendlines.length&&n.visible&&n.trendlines.forEach(function(n){n.visible=!0})},r.prototype.isSecondaryAxis=function(n){return this.chart.axes.indexOf(n)>-1},r.prototype.redrawSeriesElements=function(n,t){if(!t.redraw)return null;v(t.element.id+"_Series_"+(void 0===n.index?n.category:n.index)+"_DataLabelCollections")},r.prototype.refreshSeries=function(n){for(var t,u,f,i=0,r=n;i<r.length;i++)t=r[i],t.type.indexOf("Spline")>-1&&(u=t.type.indexOf("Area")>-1||t.drawType.indexOf("Area")>-1,f=t.type.indexOf("Range")>-1,this.chart["spline"+(u?f?"RangeArea":"Area":"")+"SeriesModule"].findSplinePoint(t)),t.visible&&(t.position=void 0)},r.prototype.click=function(n){var t=this,u;if(this.chart.legendSettings.visible){for(var f,e,o=this.chart.mouseX,s=this.chart.mouseY,i=n.target.id.indexOf("_chart_legend_g_")>-1?n.target.firstChild.id:n.target.id,r=0,h=[this.legendID+"_text_",this.legendID+"_shape_marker_",this.legendID+"_shape_"];r<h.length;r++)if(u=h[r],i.indexOf(u)>-1){e=parseInt(i.split(u)[1],10);this.LegendClick(e,n);break}i.indexOf(this.legendID+"_pageup")>-1?this.changePage(n,!0):i.indexOf(this.legendID+"_pagedown")>-1&&this.changePage(n,!1);this.chart.enableCanvas&&this.pagingRegions.length&&this.checkWithinBounds(o,s);(f=this.legendRegions.filter(function(n){return ht(o,s+(t.isPaging?(t.currentPageNumber-1)*t.translatePage(t.chart.enableCanvas,null,1,2):0),n.rect)})).length&&this.chart.enableCanvas&&this.LegendClick(f[0].index,n)}},r.prototype.checkWithinBounds=function(n,t){var f=this.chart.renderer,u=this.legendBounds,e=this.chart.legendSettings.border.width,r=new i.Rect(u.x,u.y,u.width,u.height);return r.x=r.x-e/2,r.y=r.y-e/2,r.width=r.width+e,r.height=r.height+e,ht(n,t,this.pagingRegions[0])?(this.isRtlEnable?this.canvasPageUp(f,r,u):this.canvasPageDown(f,r,u),null):ht(n,t,this.pagingRegions[1])?(this.isRtlEnable?this.canvasPageDown(f,r,u):this.canvasPageUp(f,r,u),null):void 0},r.prototype.canvasPageDown=function(n,t,i){--this.currentPageNumber>0?(this.legendRegions=[],n.clearRect(t),n.canvasClip(new ft("legendClipPath","transparent",{width:0,color:""},null,t)),this.renderLegend(this.chart,this.legend,i),n.canvasRestore()):++this.currentPageNumber},r.prototype.canvasPageUp=function(n,t,i){++this.currentPageNumber>0&&this.currentPageNumber<=this.totalNoOfPages?(this.legendRegions=[],n.clearRect(t),n.canvasClip(new ft("legendClipPath","transpaent",{width:0,color:""},null,t)),this.renderLegend(this.chart,this.legend,i),n.canvasRestore()):--this.currentPageNumber},r.prototype.getModuleName=function(){return"Legend"},r.prototype.destroy=function(){this.removeEventListener()},r}(fs),sk=function(){function n(n){this.control=n}return n.prototype.render=function(n,i){return this.isChart="chart"===this.control.getModuleName(),this.annotation=n,ee(t.createElement("div",{id:this.control.element.id+"_Annotation_"+i,styles:"position: absolute; z-index: 1"}),i,this.control.enableHtmlSanitizer?this.control.sanitize(n.content):n.content,this.control)},n.prototype.setAnnotationPixelValue=function(n){var t="Chart"===this.annotation.region?new i.Rect(0,0,this.control.availableSize.width,this.control.availableSize.height):this.isChart?this.control.chartAxisLayoutPanel.seriesClipRect:this.control.series[0].accumulationBound;return n.x=("string"!=typeof this.annotation.x?"number"==typeof this.annotation.x?this.annotation.x:0:it(this.annotation.x,t.width))+t.x,n.y=("number"==typeof this.annotation.y?this.annotation.y:it(this.annotation.y,t.height))+t.y,!0},n.prototype.setAnnotationPointValue=function(n){var a=new h(0,0),f,c,e,p;if(this.isChart){for(var o=this.control,i=this.annotation,w=i.xAxisName,b=i.yAxisName,v=o.requireInvertedAxis,s=this.control.stockChart,t=void 0,r=void 0,u=void 0,y=0,k=o.axisCollections;y<k.length;y++)if(f=k[y],w===f.name||null==w&&"primaryXAxis"===f.name)if((t=f).isIndexed)u=Number(i.x);else if(t.valueType.indexOf("Category")>-1){if(c="DateTimeCategory"===t.valueType?i.x.getTime().toString():i.x,"object"==typeof c)for(e=0;e<t.labels.length;e++)t.labels[e].toString()===i.x.toString()&&(u=e);if(t.labels.indexOf(c)<0)return!1;u=t.labels.indexOf(c)}else"DateTime"===t.valueType?(p={skeleton:"full",type:"dateTime"},u="object"==typeof this.annotation.x||"object"==typeof new Date(this.annotation.x)?Date.parse(o.intl.getDateParser(p)(o.intl.getDateFormat(p)(new Date(gt.DataUtil.parse.parseJson({val:i.x}).val)))):0):u=+i.x;else(b===f.name||null==b&&"primaryYAxis"===f.name)&&(r=f);return!!(t&&r&&si("Logarithmic"===t.valueType?hi(u,t.logBase):u,t.visibleRange)&&si("Logarithmic"===r.valueType?hi(+i.y,r.logBase):+i.y,r.visibleRange))&&(a=l(u,+i.y,t,r,v),n.x=a.x+(v?r.rect.x:t.rect.x),n.y=a.y+(v?t.rect.y:r.rect.y)+(s&&s.enablePeriodSelector?s.toolbarHeight+s.titleSize.height:0),!0)}return this.setAccumulationPointValue(n)},n.prototype.processAnnotation=function(n,i,r){var e=this.control,u=new h(0,0),f=this.render(n,i),o=function(){f.style.transform="translate(-50%, -50%)"};o.bind(u,this);this["setAnnotation"+n.coordinateUnits+"Value"](u)?this.setElementStyle(u,f,r):this.control.redraw&&v(f.id);t.updateBlazorTemplate((this.control.element.id+"Annotation"+i).replace(/[^a-zA-Z0-9]/g,""),"ContentTemplate",e.stockChart?e.stockChart.annotations[i]:this.control.annotations[i],void 0,o)},n.prototype.setAccumulationPointValue=function(n){for(var i,t,r=0,u=this.control.visibleSeries[0].points;r<u.length;r++)if(t=u[r],"object"==typeof t.x){if(Date.parse(t.x)===Date.parse(this.annotation.x)&&t.y===this.annotation.y){i=t;break}}else if(t.x===this.annotation.x&&t.y===this.annotation.y){i=t;break}return!(!i||!i.visible||(n.x=i.symbolLocation.x,n.y=i.symbolLocation.y,0))},n.prototype.setElementStyle=function(n,t,i){var f=go(t,this.control.redraw),r={cancel:!1,name:ca,content:t,location:n},e=this.control,u;(this.control.trigger(ca,r),r.cancel)||(r.content.style.left=this.setAlignmentValue(this.annotation.horizontalAlignment,f.width,r.location.x)+"px",r.content.style.top=this.setAlignmentValue(this.annotation.verticalAlignment,f.height,r.location.y)+"px",u=e.annotationModule.annotation,"chart"===e.getModuleName()&&u&&u.accessibility?(r.content.setAttribute("aria-label",u.accessibility.accessibilityDescription?u.accessibility.accessibilityDescription:"Annotation"),r.content.setAttribute("role",u.accessibility.accessibilityRole?u.accessibility.accessibilityRole:"img"),r.content.setAttribute("tabindex",u.accessibility.focusable?String(u.accessibility.tabIndex):"-1"),u.accessibility.focusable&&(r.content.style.outline="none")):(r.content.setAttribute("aria-label",this.annotation.description||"Annotation"),r.content.setAttribute("role","img")),ec(r.content,i,this.control.redraw,!0,"left","top",this.control.duration))},n.prototype.setAlignmentValue=function(n,t,i){switch(n){case"Top":case"Near":i-=t;break;case"Bottom":case"Far":i+=0;break;case"Middle":case"Center":i-=t/2}return i},n}(),iht=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rht=function(n){function i(t,i){var r=n.call(this,t)||this;return r.chart=t,r.annotations=i,r}return iht(i,n),i.prototype.renderAnnotations=function(n){var r=this,i;for(this.annotations=this.chart.annotations,this.parentElement=ci(this.chart.redraw,this.chart.element.id+"_Annotation_Collections")||t.createElement("div",{id:this.chart.element.id+"_Annotation_Collections"}),this.annotations.map(function(n,t){r.processAnnotation(n,t,r.parentElement)}),i=0;"chart"===this.chart.getModuleName()&&!this.chart.enableCanvas&&i<this.chart.visibleSeries.length;i++)if(this.chart.visibleSeries[i].animation.enable&&this.chart.animateSeries){this.parentElement.style.visibility="hidden";break}ec(this.parentElement,n,this.chart.redraw)},i.prototype.destroy=function(){},i.prototype.getModuleName=function(){return"Annotation"},i}(sk),uht=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fht=function(n){function u(){return null!==n&&n.apply(this,arguments)||this}return uht(u,n),u.prototype.render=function(n,t,i,r){var u,f,e;for(this.sideBySideInfo=this.getSideBySideInfo(n),u=0,f=n.points;u<f.length;u++)e=f[u],this.renderPoint(n,e,this.sideBySideInfo,void 0,t,i,r);n.marker.visible&&n.chart.markerRender.render(n)},u.prototype.updateTipRegion=function(n,t,i){var r=this.getRectangle(t.xValue+i.median,t.maximum,t.xValue+i.median,t.minimum,n);this.updateTipSize(n,t,r,n.chart.requireInvertedAxis)},u.prototype.updateTipSize=function(n,t,i,r){var u=n.border.width||1;r?(i.y-=u/2,i.height=i.height||u):(i.x-=u/2,i.width=i.width||u);t.regions.push(i)},u.prototype.renderPoint=function(n,i,r,u,f,e,o){var s;i.symbolLocations=[];i.regions=[];i.visible&&ni(n.points[i.index-1],i,n.points[i.index+1],n)&&(this.findBoxPlotValues(i.y,i,n.boxPlotMode,n.showOutliers),this.updateTipRegion(n,i,r),s=this.getRectangle(i.xValue+r.start,i.upperQuartile,i.xValue+r.end,i.lowerQuartile,n),i.regions.push(s),(u=this.triggerEvent(n,i,n.interior,{color:t.isNullOrUndefined(n.border.color)||"transparent"===n.border.color?fv(n.interior,-.6):n.border.color,width:n.border.width?n.border.width:1})).cancel||this.renderBoxAndWhisker(n,i,u,this.getPathString(i,n,l(i.xValue,i.median,f,e,o),l(i.xValue+r.median,i.average,f,e,o)),r.median))},u.prototype.updateDirection=function(n,t,i){for(var u,o,e,f=0;f<t.length;f++)u=n.points[t[f]],(this.renderPoint(n,u,this.sideBySideInfo,void 0,n.xAxis,n.yAxis,i),u.symbolLocations&&u.symbolLocations.length&&n.marker.visible&&n.chart.markerRender.renderMarker(n,u,u.symbolLocations[0],u.symbolLocations.length-1,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule)&&((n.chart.dataLabelCollections=[],n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",0===u.outliers.length)&&(o=r(n.chart.dataLabelModule.commonId+u.index+"_Text_5"),o&&o.remove()),n.chart.dataLabelModule.renderDataLabel(n,u,null,n.marker.dataLabel));for(e=n.seriesElement.children,f=e.length-1;f>=0;f--)0===e[f].children.length&&n.seriesElement.removeChild(e[f])},u.prototype.getPathString=function(n,t,i,r){var f=n.regions[0],u=n.regions[1],e="",h=t.chart.requireInvertedAxis?f.y+f.height/2:f.x+f.width/2,o=u.x+u.width,s=u.y+u.height,c=f.x+f.width,l=f.y+f.height;return t.chart.requireInvertedAxis?(this.updateTipSize(t,n,{x:f.x,y:u.y,width:0,height:s-u.y},!1),this.updateTipSize(t,n,{x:c,y:u.y,width:0,height:s-u.y},!0),e+="M "+f.x+" "+u.y+" L "+f.x+" "+s,e+="M "+f.x+" "+h+" L "+u.x+" "+h,e+=" M "+u.x+" "+u.y+" L "+o+" "+u.y+" L "+o+" "+s+" L "+u.x+" "+s+" Z",e+=" M "+o+" "+h+" L "+c+" "+h,e+=" M "+c+" "+u.y+" L "+c+" "+s,e+=" M "+i.x+" "+u.y+" L "+i.x+" "+s,e+=t.showMean?"M "+(r.x+5)+" "+(r.y-5)+" L "+(r.x-5)+" "+(r.y+5)+"M "+(r.x-5)+" "+(r.y-5)+" L "+(r.x+5)+" "+(r.y+5):""):(this.updateTipSize(t,n,{x:u.x,y:f.y,width:o-u.x,height:0},!0),this.updateTipSize(t,n,{x:u.x,y:l,width:o-u.x,height:0},!0),e+="M "+u.x+" "+f.y+" L "+o+" "+f.y,e+=" M "+h+" "+f.y+" L "+h+" "+u.y,e+=" M "+u.x+" "+u.y+" L "+o+" "+u.y+" L "+o+" "+s+" L "+u.x+" "+s+" Z",e+=" M "+h+" "+s+" L "+h+" "+l,e+=" M "+u.x+" "+l+" L "+o+" "+l,e+=" M "+u.x+" "+i.y+" L "+o+" "+i.y,e+=t.showMean?" M "+(r.x-5)+" "+(r.y-5)+" L "+(r.x+5)+" "+(r.y+5)+" M "+(r.x+5)+" "+(r.y-5)+" L "+(r.x-5)+" "+(r.y+5):""),e},u.prototype.renderBoxAndWhisker=function(n,t,u,f,e){var h,s,c=n.chart.element.id+"_Series_"+n.index+"_Point_"+(null!==n.removedPointIndex&&n.removedPointIndex<=t.index?t.index+1:t.index),p=r(c+"_BoxPath")?r(c+"_BoxPath").getAttribute("d"):"",a=n.chart.renderer.drawPath(new i.PathOption(c+"_BoxPath",u.fill,u.border.width,u.border.color,n.opacity,n.border.dashArray,f),new Int32Array([n.clipRect.x,n.clipRect.y])),v,y;for(a.setAttribute("role","img"),a.setAttribute("aria-label",n.accessibility.accessibilityDescriptionFormat?n.formatAccessibilityDescription(t,n):t.x.toString()+":"+t.maximum.toString()+":"+t.minimum.toString()+":"+t.lowerQuartile.toString()+":"+t.upperQuartile.toString()),v=n.chart.renderer.createGroup({id:c}),o(n.chart.enableCanvas,v,a,n.chart.redraw,!0,null,null,null,p,null,null,null,n.chart.duration),null!==n.removedPointIndex&&n.removedPointIndex<=t.index&&(v.id=n.chart.element.id+"_Series_"+n.index+"_Point_"+t.index,a.id=n.chart.element.id+"_Series_"+n.index+"_Point_"+t.index+"_BoxPath"),y=0;y<t.outliers.length;y++)h=l(t.xValue+e,t.outliers[y],n.xAxis,n.yAxis,n.chart.requireInvertedAxis),s=new i.Size(n.marker.width,n.marker.height),t.symbolLocations.push(h),this.updateTipSize(n,t,{x:h.x-s.width/2,y:h.y-s.height/2,width:s.width,height:s.height},!0);o(n.chart.enableCanvas,n.seriesElement,v,n.chart.redraw,!1,null,null,null,null,null,null,null,n.chart.duration,!0)},u.prototype.findBoxPlotValues=function(n,t,i,r){var f=n.length,u={average:lt(n)/f,lowerQuartile:0,upperQuartile:0,maximum:0,minimum:0,median:0,outliers:[]};"Exclusive"===i?(u.lowerQuartile=this.getExclusiveQuartileValue(n,f,.25),u.upperQuartile=this.getExclusiveQuartileValue(n,f,.75),u.median=this.getExclusiveQuartileValue(n,f,.5)):"Inclusive"===i?(u.lowerQuartile=this.getInclusiveQuartileValue(n,f,.25),u.upperQuartile=this.getInclusiveQuartileValue(n,f,.75),u.median=this.getInclusiveQuartileValue(n,f,.5)):(u.median=sc(n),this.getQuartileValues(n,f,u));this.getMinMaxOutlier(n,f,u,r);t.minimum=u.minimum;t.maximum=u.maximum;t.lowerQuartile=u.lowerQuartile;t.upperQuartile=u.upperQuartile;t.median=u.median;t.outliers=u.outliers;t.average=u.average},u.prototype.getExclusiveQuartileValue=function(n,t,i){if(0===t)return 0;if(1===t)return n[0];var u=i*(t+1),r=Math.floor(Math.abs(u)),f=u-r;return 0===r?n[0]:r>t-1?n[t-1]:f*(n[r]-n[r-1])+n[r-1]},u.prototype.getInclusiveQuartileValue=function(n,t,i){if(0===t)return 0;if(1===t)return n[0];var u=i*(t-1),r=Math.floor(Math.abs(u));return(u-r)*(n[r+1]-n[r])+n[r]},u.prototype.getQuartileValues=function(n,t,i){if(1===t)return i.lowerQuartile=n[0],i.upperQuartile=n[0],null;var u=t%2==0,r=t/2,f=n.slice(0,r),e=n.slice(u?r:r+1,t);i.lowerQuartile=sc(f);i.upperQuartile=sc(e)},u.prototype.getMinMaxOutlier=function(n,t,i,r){for(var f=1.5*(i.upperQuartile-i.lowerQuartile),u=0;u<t;u++){if(!(n[u]<i.lowerQuartile-f&&r)){i.minimum=n[u];break}i.outliers.push(n[u])}for(u=t-1;u>=0;u--){if(!(n[u]>i.upperQuartile+f&&r)){i.maximum=n[u];break}i.outliers.push(n[u])}},u.prototype.doAnimation=function(n){this.animate(n)},u.prototype.getModuleName=function(){return"BoxAndWhiskerSeries"},u.prototype.destroy=function(){},u}(ku),eht=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),oht=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return eht(r,n),r.prototype.render=function(n,i,r,u,f,e){var s,b,c,p,a=this,v=null,o="",y=Math.max(n.yAxis.visibleRange.min,0),w=[],k=this.sortSegments(n,n.segments),d="";this.enableComplexProperty(n).map(function(t,f,e){t.symbolLocations=[];t.regions=[];p=!1;t.visible&&ni(e[f-1],t,e[f+1],n)&&(o+=a.getAreaPathDirection(t.xValue,y,n,u,l,v,"M"),v=v||new h(t.xValue,y),s=l(t.xValue,t.yValue,i,r,u),c&&a.setPointColor(t,c,n,"X"===n.segmentAxis,k)?(p=!0,b=l(v.x,y,i,r,u),o+="L "+s.x+" "+s.y+" ",o+="L "+s.x+" "+b.y+" ",a.generatePathOption(w,n,c,o,"_Point_"+c.index),o="M "+s.x+" "+b.y+" L "+s.x+" "+s.y+" "):(o+="L "+s.x+" "+s.y+" ",a.setPointColor(t,null,n,"X"===n.segmentAxis,k)),e[f+1]&&!e[f+1].visible&&"Drop"!==n.emptyPointSettings.mode&&(o+=a.getAreaEmptyDirection({x:t.xValue,y:y},v,n,u,l),v=null),c=t,a.storePointLocation(t,n,u,l))});t.isNullOrUndefined(p)||p||(o=n.points.length>1?o+this.getAreaPathDirection(c.xValue,y,n,u,l,null,"L"):"",this.generatePathOption(w,n,c,o,""));0!==n.border.width&&(d=this.removeEmptyPointsBorder(this.getBorderDirection(o)),this.generateBorderPathOption(w,n,c,d,""));this.applySegmentAxis(n,w,k,f);e||this.renderMarker(n)},r.prototype.generatePathOption=function(n,t,r,u,f){n.push(new i.PathOption(t.chart.element.id+"_Series_"+t.index+f,t.setPointColor(r,t.interior),0,"transparent",t.opacity,t.dashArray,u))},r.prototype.generateBorderPathOption=function(n,t,r,u,f){n.push(new i.PathOption(t.chart.element.id+"_Series_border_"+t.index+f,"transparent",t.border.width,t.border.color?t.border.color:t.interior,1,t.border.dashArray,u))},r.prototype.updateDirection=function(n,t){this.render(n,n.xAxis,n.yAxis,n.chart.requireInvertedAxis,!1,!0);for(var i=0;i<t.length;i++)n.marker&&n.marker.visible&&n.chart.markerRender.renderMarker(n,n.points[t[i]],n.points[t[i]].symbolLocations[0],null,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},r.prototype.destroy=function(){},r.prototype.getModuleName=function(){return"MultiColoredAreaSeries"},r.prototype.doAnimation=function(n){this.doLinearAnimation(n,n.animation)},r}(yc),sht=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hht=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return sht(t,n),t.prototype.render=function(n,t,r,u,f,e){for(var o,b,s=null,c="M",y=this.enableComplexProperty(n),a=[],h="",v=null,p=this.sortSegments(n,n.segments),w=0,k=y;w<k.length;w++)o=k[w],o.regions=[],o.visible&&ni(y[o.index-1],o,y[o.index+1],n)?(b=o,h+=this.getLineDirection(s,o,n,u,l,c),null!=s?this.setPointColor(o,s,n,"X"===n.segmentAxis,p)?(a.push(new i.PathOption(n.chart.element.id+"_Series_"+n.index+"_Point_"+s.index,"none",n.width,n.setPointColor(s,n.interior),n.opacity,n.dashArray,h)),c="M",h=""):c="L":this.setPointColor(o,v,n,"X"===n.segmentAxis,p)&&""!==h&&(a.push(new i.PathOption(n.chart.element.id+"_Series_"+n.index+"_Point_"+v.index,"none",n.width,n.setPointColor(v,n.interior),n.opacity,n.dashArray,h)),c="M",h=""),s=o,v=o,this.storePointLocation(o,n,u,l)):(s="Drop"===n.emptyPointSettings.mode?s:null,c="Drop"===n.emptyPointSettings.mode?c:"M",o.symbolLocations=[]);""!==h&&a.push(new i.PathOption(n.chart.element.id+"_Series_"+n.index,"none",n.width,n.setPointColor(b,n.interior),n.opacity,n.dashArray,h));this.applySegmentAxis(n,a,p,f);e||this.renderMarker(n)},t.prototype.updateDirection=function(n,t){this.render(n,n.xAxis,n.yAxis,n.chart.requireInvertedAxis,!1,!0);for(var i=0;i<t.length;i++)n.marker&&n.marker.visible&&n.chart.markerRender.renderMarker(n,n.points[t[i]],n.points[t[i]].symbolLocations[0],null,!0),n.marker.dataLabel.visible&&n.chart.dataLabelModule&&(n.chart.dataLabelModule.commonId=n.chart.element.id+"_Series_"+n.index+"_Point_",n.chart.dataLabelModule.renderDataLabel(n,n.points[t[i]],null,n.marker.dataLabel))},t.prototype.doAnimation=function(n){this.doLinearAnimation(n,n.animation)},t.prototype.getModuleName=function(){return"MultiColoredLineSeries"},t.prototype.destroy=function(){},t}(yc),cht=function(){function n(n){this.xAxisPrevHeight=[];this.xAxisMultiLabelHeight=[];this.yAxisPrevHeight=[];this.yAxisMultiLabelHeight=[];this.multiLevelLabelRectXRegion=[];this.xLabelCollection=[];this.chart=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.chart.isDestroyed||this.chart.on("click",this.click,this)},n.prototype.getMultilevelLabelsHeight=function(n){var f,u,t,e=this,s=0,r=[],h=[],o="Vertical"===n.orientation,c=o?n.rect.height:n.rect.width;n.multiLevelLabels.map(function(l,a){l.categories.map(function(s,h){if(""!==s.text&&null!==s.start&&null!==s.end){f=i.measureText(s.text,l.textStyle,e.chart.themeStyle.axisLabelFont);u=o?f.width:f.height;u+=2*l.border.width+("CurlyBrace"===l.border.type?10:0);t=null!==s.maximumTextWidth?s.maximumTextWidth:ut("string"==typeof s.end?Number(new Date(s.end)):s.end,n)*c-ut("string"==typeof s.start?Number(new Date(s.start)):s.start,n)*c;var v=n.multiLevelLabels[a].categories.length;t=0!==h&&h!==v-1||"OnTicks"!==n.labelPlacement||"Shift"!==n.edgeLabelPlacement?t:t/2;f.width>t-10&&(e.chart.enableRtl?t<0:t>0)&&"Wrap"===l.overflow&&!o&&(u*=ur(s.text,t-10,l.textStyle,e.chart.enableRtl,null,null,e.chart.themeStyle.axisLabelFont).length);r[a]=r[a]?r[a]<u?u:r[a]:u}});h[a]=s;s+=r[a]?r[a]+10:0});n.multiLevelLabelHeight=s+(""!==n.title||this.chart.legendModule&&this.chart.legendSettings.visible?5:0);o?(this.yAxisMultiLabelHeight=r,this.yAxisPrevHeight=h):(this.xAxisMultiLabelHeight=r,this.xAxisPrevHeight=h)},n.prototype.renderXAxisMultiLevelLabels=function(n,r,u,f){var l,p,h,k,c,it,rt,v,w,d,o,g,e=this,s=10,b=(n.labelPosition===n.tickPosition?n.majorTickLines.height:0)+n.maxLabelSize.height+s,nt="",a="Outside"===n.labelPosition,tt=n.isAxisInverse,y=n.isAxisOpposedPosition,ft=n.scrollbarSettings.enable||a&&t.isNullOrUndefined(n.crossesAt)?n.scrollBarHeight:0,et=y&&!a||!y&&a?f.y+b-n.majorTickLines.width:f.y-b-n.multiLevelLabelHeight;this.createClipRect(f.x-n.majorTickLines.width,et+ft,n.multiLevelLabelHeight+s,f.width+2*n.majorTickLines.width,this.chart.element.id+"_XAxis_Clippath_"+r,this.chart.element.id+"XAxisMultiLevelLabel"+r);n.multiLevelLabels.map(function(u,et){k=0;e.labelElement=e.chart.renderer.createGroup({id:e.chart.element.id+r+"_MultiLevelLabel"+et});u.categories.map(function(ot,st){var at,ht,lt;if(g=u.categories.length,nt="",it="string"==typeof ot.start?Number(new Date(ot.start)):ot.start,rt="string"==typeof ot.end?Number(new Date(ot.end)):ot.end,at=t.extend({},t.getValue("properties",u.textStyle),null,!0),!(o=e.triggerMultiLabelRender(n,ot.text,at,n.multiLevelLabels[et].alignment,ot.customAttributes)).cancel){if(h=ut(it,n)*f.width,c=ut(rt,n)*f.width,c=tt?[h,h=c][0]:c,v=i.measureText(o.text,o.textStyle,e.chart.themeStyle.axisLabelFont),w=(null===ot.maximumTextWidth?c-h:ot.maximumTextWidth)-s,l=h+f.x+s,p=(y&&!a||!y&&a?b+f.y+v.height/2+s+e.xAxisPrevHeight[et]:f.y-b+v.height/2-e.xAxisMultiLabelHeight[et]-e.xAxisPrevHeight[et])+ft,"Center"===o.alignment?(l+=(c-h-s)/2,d="middle"):"Far"===o.alignment?(l=l+(c-h-s)-u.border.width/2,"OnTicks"!==n.labelPlacement||0!==st&&st!==g-1||(l+=(c-h-s)/2,l-=v.width/2),d="end"):(d="start",l+=u.border.width/2),p="CurlyBrace"===u.border.type?!y&&a||y&&!a?p+s:p-5:p,ht=new i.TextOption(e.chart.element.id+r+"_Axis_MultiLevelLabel_Level_"+et+"_Text_"+st,l,p,d,o.text),"None"!==u.overflow){if(n.edgeLabelPlacement&&"OnTicks"===n.labelPlacement)switch(n.edgeLabelPlacement){case"Shift":0===st||tt&&st===g-1?("Center"===o.alignment&&(ht.x<f.x+s||ht.x-v.width/2)<n.rect.x?(ht.x+=f.x/2,ht.x/2<f.x&&(ht.x=f.x+5,ht.anchor="start")):"Far"===o.alignment&&(ht.x<f.x+s||ht.x>f.x+s)?ht.x+=v.width/2-w/2:"Near"===o.alignment&&(ht.x<f.x+s||ht.x>f.x+s)&&(ht.x=f.x+s),w/=2):(st===g-1||tt&&0===st)&&("Center"===o.alignment&&ht.x>f.x+f.width?(ht.x-=s,ht.x>f.width&&(ht.x=f.width+f.x,ht.anchor="end")):"Far"===o.alignment&&(ht.x=f.width+f.x),w/=2)}ht.text="Wrap"===u.overflow?ur(o.text,w,o.textStyle,e.chart.enableRtl,null,null,e.chart.themeStyle.axisLabelFont):wi(w,o.text,o.textStyle,e.chart.enableRtl,e.chart.themeStyle.axisLabelFont);ht.x=ht.x-5}(ct(e.chart.renderer,ht,o.textStyle,o.textStyle.color||e.chart.themeStyle.axisLabelFont.color,e.labelElement,!1,e.chart.redraw,!0,null,null,null,0,null,e.chart.enableCanvas,null,e.chart.themeStyle.axisLabelFont),e.chart.enableCanvas)&&(lt=i.measureText(o.text,o.textStyle,e.chart.themeStyle.axisLabelFont),e.multiLevelLabelRectXRegion.push(new i.Rect(ht.x,ht.y,lt.width,lt.height)),e.xLabelCollection.push(ht));u.border.width>0&&"WithoutBorder"!==u.border.type&&""!==(nt=e.renderXAxisLabelBorder(et,c-h-s,n,h,b,v,ht,f,o.alignment,nt,a,y,k))&&(e.createBorderElement(et,r,n,nt,k),k++);e.chart.enableCanvas||e.multiElements.appendChild(e.labelElement)}})});this.chart.enableCanvas||u.appendChild(this.multiElements)},n.prototype.renderXAxisLabelBorder=function(n,i,r,u,f,e,o,s,h,c,l,a,v){var d,g,tt,it,b=10,ft=r.multiLevelLabels[n],ot=ft.categories[v].type,w=i+b,k=t.isNullOrUndefined(this.xAxisMultiLabelHeight[n])?0:this.xAxisMultiLabelHeight[n]+b,et="Outside"===r.labelPosition?r.scrollBarHeight:0,p=u+s.x,y=!a&&l||a&&!l?f+s.y+this.xAxisPrevHeight[n]+et:s.y-f-this.xAxisPrevHeight[n]-et,ut=ot||ft.border.type,rt,nt;switch(ut){case"WithoutTopandBottomBorder":case"Rectangle":case"WithoutTopBorder":rt=v===r.multiLevelLabels[n].categories.length-1&&p+w>s.width?s.width+s.x:p+w;nt=0===v&&r.multiLevelLabels[n].categories[0].start<=0?s.x:p;c+="M "+nt+" "+y+" L "+nt+" "+(y+(k=!a&&l||a&&!l?k:-k))+" M "+rt+" "+y+" L "+rt+" "+(y+k);c+="WithoutTopandBottomBorder"!==ut?" L "+nt+" "+(y+k)+" ":" ";c+="Rectangle"===ut?"M "+nt+" "+y+" L "+rt+" "+y:" ";break;case"Brace":"Near"===h?(tt=o.x,it=o.x+e.width+2):"Center"===h?(tt=o.x-e.width/2-2,it=o.x+e.width/2+2):(tt=o.x-e.width-2,it=o.x);c+="M "+p+" "+y+" L "+p+" "+(y+(k=!a&&l||a&&!l?k:-k)/2)+" M "+p+" "+(y+k/2)+" L "+(tt-2)+" "+(y+k/2)+" M "+it+" "+(y+k/2)+" L "+(p+w)+" "+(y+k/2)+" M "+(p+w)+" "+(y+k/2)+" L "+(p+w)+" "+y;break;case"CurlyBrace":!a&&l||a&&!l?(b=10,d=15,g=5):(b=-10,d=-15,g=-5);c+="Center"===h?"M "+p+" "+y+" C "+p+" "+y+" "+(p+5)+" "+(y+b)+" "+(p+10)+" "+(y+b)+" L "+(p+w/2-5)+" "+(y+b)+" L "+(p+w/2)+" "+(y+d)+" L "+(p+w/2+5)+" "+(y+b)+" L "+(p+w-10)+" "+(y+b)+" C "+(p+w-10)+" "+(y+b)+" "+(p+w)+" "+(y+g)+" "+(p+w)+" "+y:"Near"===h?"M "+p+" "+y+" C "+p+" "+y+" "+(p+5)+" "+(y+b)+" "+(p+10)+" "+(y+b)+" L "+(p+15)+" "+(y+d)+" L "+(p+20)+" "+(y+b)+" L "+(p+w-10)+" "+(y+b)+" C "+(p+w-10)+" "+(y+b)+" "+(p+w)+" "+(y+g)+" "+(p+w)+" "+y:"M "+p+" "+y+" C "+p+" "+y+" "+(p+5)+" "+(y+b)+" "+(p+10)+" "+(y+b)+" L "+(p+w-20)+" "+(y+b)+" L "+(p+w-15)+" "+(y+d)+" L "+(p+w-10)+" "+(y+b)+" L "+(p+w-10)+" "+(y+b)+" C "+(p+w-10)+" "+(y+b)+" "+(p+w)+" "+(y+g)+" "+(p+w)+" "+y}return c},n.prototype.renderYAxisMultiLevelLabels=function(n,r,u,f){var w,s,a,v,y,o,k,nt,tt,b,e=this,h="Outside"===n.labelPosition,p=10,c=(n.tickPosition===n.labelPosition?n.majorTickLines.height:0)+n.maxLabelSize.width+p,d="",rt=n.isAxisInverse,l=n.isAxisOpposedPosition,g=h&&t.isNullOrUndefined(n.crossesAt)?n.scrollBarHeight:0,it;g*=l?1:-1;it=l&&!h||!l&&h?f.x-n.multiLevelLabelHeight-c-p:f.x+c;this.createClipRect(it+g,f.y-n.majorTickLines.width,f.height+2*n.majorTickLines.width,n.multiLevelLabelHeight+p,this.chart.element.id+"_YAxis_Clippath_"+r,this.chart.element.id+"YAxisMultiLevelLabel"+r);n.multiLevelLabels.map(function(u,it){e.labelElement=e.chart.renderer.createGroup({id:e.chart.element.id+r+"_MultiLevelLabel"+it});k=0;u.categories.map(function(ft,et){var ht,st,ot;d="";tt="string"==typeof ft.end?Number(new Date(ft.end)):ft.end;nt="string"==typeof ft.start?Number(new Date(ft.start)):ft.start;v=ut(nt,n)*f.height;y=ut(tt,n)*f.height;y=rt?[v,v=y][0]:y;ht=t.extend({},t.getValue("properties",u.textStyle),null,!0);(o=e.triggerMultiLabelRender(n,ft.text,ht,u.alignment,ft.customAttributes)).cancel||(st=null===ft.maximumTextWidth?e.yAxisMultiLabelHeight[it]/2:ft.maximumTextWidth/2,w=i.measureText(o.text,o.textStyle,e.chart.themeStyle.axisLabelFont),b=y-v,s=f.x-c-e.yAxisPrevHeight[it]-st-5,a=f.height+f.y-v-b/2,s=l?h?f.x+c+5+st+e.yAxisPrevHeight[it]+g:f.x-c-st-e.yAxisPrevHeight[it]-5:h?s+g:f.x+c+5+st+e.yAxisPrevHeight[it],"Center"===o.alignment?a+=w.height/4:"Far"===o.alignment?a+=b/2-w.height/2:a=a-b/2+w.height,s="CurlyBrace"===u.border.type?!l&&h||l&&!h?s-p:s+p:s,ot=new i.TextOption(e.chart.element.id+r+"_Axis_MultiLevelLabel_Level_"+it+"_Text_"+et,s,a,"middle",o.text),ot.text="Trim"===u.overflow?wi(null===ft.maximumTextWidth?e.yAxisMultiLabelHeight[it]:ft.maximumTextWidth,o.text,o.textStyle,e.chart.enableRtl,e.chart.themeStyle.axisLabelFont):ot.text,ot.text="Wrap"===u.overflow?ur(o.text,null===ft.maximumTextWidth?e.yAxisMultiLabelHeight[it]:ft.maximumTextWidth,o.textStyle,e.chart.enableRtl,null,null,e.chart.themeStyle.axisLabelFont):ot.text,"string"!=typeof ot.text&&ot.text.length>1&&(ot.y-=p*ot.text.length/2),ct(e.chart.renderer,ot,o.textStyle,o.textStyle.color||e.chart.themeStyle.axisLabelFont.color,e.labelElement,e.chart.redraw,!0,null,null,null,null,0,null,e.chart.enableCanvas,null,e.chart.themeStyle.axisLabelFont),u.border.width>0&&"WithoutBorder"!==u.border.type&&""!==(d=e.renderYAxisLabelBorder(it,b,n,y,c,v,w,ot,f,o.alignment,d,h,l,k))&&(e.createBorderElement(it,r,n,d,k),k++),e.chart.enableCanvas||e.multiElements.appendChild(e.labelElement))})});this.chart.enableCanvas||u.appendChild(this.multiElements)},n.prototype.renderYAxisLabelBorder=function(n,i,r,u,f,e,o,s,h,c,l,a,v,y){var g,nt,b=u-e,k=10,tt=r.multiLevelLabels[n],rt=tt.categories[y].type,w=h.y+h.height-u,ut=(a&&t.isNullOrUndefined(r.crossesAt)?r.scrollBarHeight:0)*(v?1:-1);var d=(null===tt.categories[y].maximumTextWidth?this.yAxisMultiLabelHeight[n]:tt.categories[y].maximumTextWidth)+k,p=(!v&&a||v&&!a?h.x-f-this.yAxisPrevHeight[n]:h.x+f+this.yAxisPrevHeight[n])+ut,it=rt||tt.border.type;switch(it){case"WithoutTopandBottomBorder":case"Rectangle":case"WithoutTopBorder":l+="M "+p+" "+w+" L "+(p+(d=!v&&a||v&&!a?-d:d))+" "+w+" M "+p+" "+(w+b)+" L "+(p+d)+" "+(w+b);l+="WithoutTopandBottomBorder"!==it?" L "+(p+d)+" "+w+" ":" ";l+="Rectangle"===it?"M "+p+" "+(w+b)+"L "+p+" "+w+" ":" ";break;case"Brace":l+="M "+p+" "+w+" L "+(p-(d=!v&&a||v&&!a?d:-d)/2)+" "+w+" L "+(p-d/2)+" "+(s.y-o.height/2-4)+" M "+(p-d/2)+" "+(s.y+o.height/4+2)+" L "+(p-d/2)+" "+(w+b)+" L "+p+" "+(w+b);break;case"CurlyBrace":!v&&a||v&&!a?(k=-10,g=-15,nt=-5):(k=10,g=15,nt=5);l+="Center"===c?"M "+p+" "+w+" C "+p+" "+w+" "+(p+k)+" "+w+" "+(p+k)+" "+(w+10)+" L "+(p+k)+" "+(w+(b-10)/2)+" L "+(p+g)+" "+(w+(b-10)/2+5)+" L "+(p+k)+" "+(w+(b-10)/2+10)+" L "+(p+k)+" "+(w+(b-10))+" C "+(p+k)+" "+(w+(b-10))+" "+(p+nt)+" "+(w+b)+" "+p+" "+(w+b):"Far"===c?"M "+p+" "+w+" C "+p+" "+w+" "+(p+k)+" "+w+" "+(p+k)+" "+(w+10)+" L "+(p+k)+" "+(w+b-20)+"  L "+(p+g)+" "+(w+(b-15))+" L "+(p+k)+" "+(w+(b-10))+" L "+(p+k)+" "+(w+(b-10))+" C "+(p+k)+" "+(w+(b-10))+" "+(p+k)+" "+(w+b)+" "+p+" "+(w+b):"M "+p+" "+w+" C "+p+" "+w+" "+(p+k)+" "+w+" "+(p+k)+" "+(w+10)+" L "+(p+g)+" "+(w+15)+" L "+(p+k)+" "+(w+20)+" L "+(p+k)+" "+(w+(b-10))+" C "+(p+k)+" "+(w+(b-10))+" "+(p+nt)+" "+(w+b)+" "+p+" "+(w+b)}return l},n.prototype.createClipRect=function(n,t,i,r,u,f){this.multiElements=this.chart.renderer.createGroup({id:f,"clip-path":"url(#"+u+")"});this.chart.enableCanvas||this.multiElements.appendChild(eu(this.chart.redraw,{id:u,x:n,y:t,width:r,height:i,fill:"white","stroke-width":1,stroke:"Gray"},this.chart.renderer))},n.prototype.createBorderElement=function(n,t,r,u,f){var s=u,e=this.chart.renderer.drawPath(new i.PathOption(this.chart.element.id+t+"_Axis_MultiLevelLabel_Rect_"+n+"_"+f,"Transparent",r.multiLevelLabels[n].border.width,r.multiLevelLabels[n].border.color||this.chart.themeStyle.axisLine,1,"",u));e.style.pointerEvents="none";o(this.chart.enableCanvas,this.labelElement,e,this.chart.redraw,!0,"x","y",null,s)},n.prototype.triggerMultiLabelRender=function(n,t,i,r,u){var f={cancel:!1,name:ta,axis:n,text:t,textStyle:i,alignment:r,customAttributes:u};return this.chart.trigger(ta,f),f},n.prototype.MultiLevelLabelClick=function(n,t){var u=parseInt(n.substr(0,1),10),i=parseInt(n.substr(7),10),f=this.chart.axisCollections[t],r=f.multiLevelLabels[u].categories,o=r[i].text,s=r[i].start,h=r[i].end,e={axis:f,level:u,text:o,customAttributes:r[i].customAttributes,start:s,end:h,name:va,cancel:!1};return this.chart.trigger(va,e),e},n.prototype.click=function(n){var f,r,e,i=n.target.id,u="_Axis_MultiLevelLabel_Level_",t;if(this.chart.enableCanvas)for(t=0;t<this.multiLevelLabelRectXRegion.length;t++)ht(n.x,n.y,this.multiLevelLabelRectXRegion[t],this.multiLevelLabelRectXRegion[t].width,this.multiLevelLabelRectXRegion[t].height)&&(i=this.xLabelCollection[t].id);i.indexOf(u)>-1&&(f=i.split(u)[1],r=i.split(u)[0],e=parseInt(r.charAt(r.length-1),10),this.MultiLevelLabelClick(f,e))},n.prototype.getModuleName=function(){return"MultiLevelLabel"},n.prototype.destroy=function(){},n}(),lht=function(){function n(n){this.chartId=n.element.id+"_"}return n.prototype.renderElements=function(n,t){var i=n.axis.isAxisInverse,r=n.axis.scrollbarSettings,f=t.createGroup({id:this.chartId+"scrollBar_"+n.axis.name,transform:"translate("+(n.isVertical&&i?n.height:i?n.width:"0")+","+(n.isVertical&&i?"0":i?n.height:n.isVertical?n.width:"0")+") rotate("+(n.isVertical&&i?"90":n.isVertical?"270":i?"180":"0")+")"}),e=t.createGroup({id:this.chartId+"scrollBar_backRect_"+n.axis.name}),u=t.createGroup({id:this.chartId+"scrollBar_thumb_"+n.axis.name,transform:"translate(0,0)"});return this.backRect(n,t,e,r),this.thumb(n,t,u,r),this.renderCircle(n,t,u,r),this.arrows(n,t,u,r),this.thumbGrip(n,t,u,r),f.appendChild(e),f.appendChild(u),f},n.prototype.backRect=function(n,t,r,u){var f=n.scrollbarThemeStyle,e=t.drawRectangle(new ft(this.chartId+"scrollBarBackRect_"+n.axis.name,u.trackColor||f.backRect,{width:1,color:u.trackColor||f.backRect},1,new i.Rect(u.enableZoom&&!n.isVertical?n.svgExtraWidth/2:0,0,n.width,n.height),u.trackRadius,u.trackRadius));r.appendChild(e)},n.prototype.arrows=function(n,t,r,u){var e=n.scrollbarThemeStyle,f=new i.PathOption(this.chartId+"scrollBar_leftArrow_"+n.axis.name,e.arrow,1,e.arrow,1,"","");this.leftArrowEle=t.drawPath(f);f.id=this.chartId+"scrollBar_rightArrow_"+n.axis.name;this.rightArrowEle=t.drawPath(f);this.setArrowDirection(this.thumbRectX+(!n.isVertical&&n.axis.scrollbarSettings.enableZoom?n.svgExtraWidth/2:0),this.thumbRectWidth-(!n.isVertical&&this.thumbRectWidth+this.thumbRectX>n.width?n.svgExtraWidth/2:0),n.height);u.enableZoom&&(r.appendChild(this.leftArrowEle),r.appendChild(this.rightArrowEle))},n.prototype.setArrowDirection=function(n,t,i){var r=i/2,u="M "+(n-r/2)+" "+i/2+" L "+(n-r/2+(i/2-r/4))+" "+(i-r/2)+" L "+(n-r/2+(i/2-r/4))+" "+r/2+" Z",f="M "+(n+t+r/2)+" "+i/2+" L "+(n+t+r/2-(i/2-r/4))+" "+(i-r/2)+" L "+(n+t+r/2-(i/2-r/4))+" "+r/2+" Z";this.leftArrowEle.setAttribute("d",u);this.rightArrowEle.setAttribute("d",f)},n.prototype.thumb=function(n,t,r,u){n.startX=this.thumbRectX;var f=n.scrollbarThemeStyle;this.slider=t.drawRectangle(new ft(this.chartId+"scrollBarThumb_"+n.axis.name,u.scrollbarColor||f.thumb,{width:1,color:u.scrollbarColor||f.thumb},1,new i.Rect(u.enableZoom?this.thumbRectX+(!n.isVertical&&n.axis.scrollbarSettings.enableZoom?n.svgExtraWidth/2:0):this.thumbRectX-n.height/2,0,u.enableZoom?this.thumbRectWidth-(!n.isVertical&&this.thumbRectWidth+this.thumbRectX>n.width?n.svgExtraWidth/2:0):this.thumbRectWidth+n.height/2,n.height),u.scrollbarRadius,u.scrollbarRadius));r.appendChild(this.slider)},n.prototype.renderCircle=function(n,t,i,r){var f=n.scrollbarThemeStyle,u=new ef(this.chartId+"scrollBar_leftCircle_"+n.axis.name,f.circle,{width:1,color:f.circle},1,this.thumbRectX+(!n.isVertical&&n.axis.scrollbarSettings.enableZoom?n.svgExtraWidth/2:0),n.height/2,n.height/2),e=t.createDefs(),o=t.createGroup({id:this.chartId+n.axis.name+"_thumb_shadow"});e.innerText='<filter x="-25.0%" y="-20.0%" width="150.0%" height="150.0%" filterUnits="objectBoundingBox"id="scrollbar_shadow"><feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"><\/feOffset><feGaussianBlur stdDeviation="1.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"><\/feGaussianBlur><feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"><\/feComposite><feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.16 0" type="matrix" in="shadowBlurOuter1"><\/feColorMatrix><\/filter>';o.innerText='<use fill="black" fill-opacity="1" filter="url(#scrollbar_shadow)" xlink:href="#'+this.chartId+"scrollBar_leftCircle_"+n.axis.name+'"><\/use><use fill="black" fill-opacity="1" filter="url(#scrollbar_shadow)" xlink:href="#'+this.chartId+"scrollBar_rightCircle_"+n.axis.name+'"><\/use>';this.leftCircleEle=t.drawCircle(u);u.id=this.chartId+"scrollBar_rightCircle_"+n.axis.name;u.cx=this.thumbRectX+(!n.isVertical&&n.axis.scrollbarSettings.enableZoom?n.svgExtraWidth/2:0)+(this.thumbRectWidth-(!n.isVertical&&this.thumbRectWidth+this.thumbRectX>n.width?n.svgExtraWidth/2:0));this.rightCircleEle=t.drawCircle(u);i.appendChild(e);r.enableZoom&&(i.appendChild(this.leftCircleEle),i.appendChild(this.rightCircleEle));i.appendChild(o)},n.prototype.thumbGrip=function(n,t,i,r){var e=n.component.theme.indexOf("Fluent2")>-1||n.component.theme.indexOf("Bootstrap5")>-1||n.component.theme.indexOf("Tailwind3")>-1?-5:0,o=0,s=n.scrollbarThemeStyle,f=new ef(this.chartId+"scrollBar_gripCircle0_"+n.axis.name,r.gripColor||s.grip,{width:1,color:r.gripColor||s.grip},1,0,0,1),u;for(this.gripCircle=t.createGroup({id:this.chartId+"scrollBar_gripCircle_"+n.axis.name,transform:"translate("+(r.enableZoom?this.thumbRectX+(!n.isVertical&&n.axis.scrollbarSettings.enableZoom?n.svgExtraWidth/2:0)+(this.thumbRectWidth-(!n.isVertical&&n.axis.scrollbarSettings.enableZoom&&this.thumbRectWidth+this.thumbRectX>n.width?n.svgExtraWidth/2:0))/2+5*(n.isVertical?1:-1):this.thumbRectX+this.thumbRectWidth/2+5*(n.isVertical?2:0)-r.height/2)+","+(n.isVertical?n.height/2+2.5-.5:n.height/2-2.5-.5)+") rotate("+(n.isVertical?"180":"0")+")"}),u=1;u<=(n.component.theme.indexOf("Fluent2")>-1||n.component.theme.indexOf("Bootstrap5")>-1||n.component.theme.indexOf("Tailwind3")>-1?10:6);u++)f.id=this.chartId+"scrollBar_gripCircle"+u+"_"+n.axis.name,f.cx=e,f.cy=o,this.gripCircle.appendChild(t.drawCircle(f)),e=u===(n.component.theme.indexOf("Fluent2")>-1||n.component.theme.indexOf("Bootstrap5")>-1||n.component.theme.indexOf("Tailwind3")>-1?5:3)?n.component.theme.indexOf("Fluent2")>-1||n.component.theme.indexOf("Bootstrap5")>-1||n.component.theme.indexOf("Tailwind3")>-1?-5:0:e+5,o=u>=(n.component.theme.indexOf("Fluent2")>-1||n.component.theme.indexOf("Bootstrap5")>-1||n.component.theme.indexOf("Tailwind3")>-1?5:3)?5:0;r.height>=12&&i.appendChild(this.gripCircle)},n}(),aht=function(){function n(n,i){this.svgExtraWidth=50;this.scrollRange={max:null,min:null,interval:null,delta:null};this.component=n;this.elements=[];this.scrollElements=new lht(n);this.axis=i;this.mouseMoveListener=this.scrollMouseMove.bind(this);this.mouseUpListener=this.scrollMouseUp.bind(this);this.animateDuration=500;this.isPointer=t.Browser.isPointer;this.browserName=t.Browser.info.name}return n.prototype.getMouseXY=function(n){var t,i,f,u;n.type.indexOf("touch")>-1?(t=(f=n).changedTouches[0].clientX,i=f.changedTouches[0].clientY):(t=n.clientX,i=n.clientY);u=r(this.component.element.id+"_scrollBar_svg"+this.axis.name).getBoundingClientRect();this.mouseX=t-Math.max(u.left,0);this.mouseY=i-Math.max(u.top,0)},n.prototype.wireEvents=function(n){t.EventHandler.add(n,t.Browser.touchStartEvent,this.scrollMouseDown,this);t.EventHandler.add(n,t.Browser.touchMoveEvent,this.scrollMouseMove,this);t.EventHandler.add(n,t.Browser.touchEndEvent,this.scrollMouseUp,this);t.EventHandler.add(n,"mousewheel",this.scrollMouseWheel,this);window.addEventListener("mousemove",this.mouseMoveListener,!1);window.addEventListener("mouseup",this.mouseUpListener,!1)},n.prototype.unWireEvents=function(n){t.EventHandler.remove(n,t.Browser.touchStartEvent,this.scrollMouseDown);t.EventHandler.remove(n,t.Browser.touchMoveEvent,this.scrollMouseMove);t.EventHandler.remove(n,t.Browser.touchEndEvent,this.scrollMouseUp);t.EventHandler.remove(n,"mousewheel",this.scrollMouseWheel);window.removeEventListener("mousemove",this.mouseMoveListener,!1);window.removeEventListener("mouseup",this.mouseUpListener,!1)},n.prototype.scrollMouseDown=function(n){var i=n.target.id,t=this.scrollElements,f=this.axis.isAxisInverse,r,e,u;(this.getMouseXY(n),this.isResizeLeft=this.isExist(i,"_leftCircle_")||this.isExist(i,"_leftArrow_"),this.isResizeRight=this.isExist(i,"_rightCircle_")||this.isExist(i,"_rightArrow_"),this.previousXY=this.isVertical&&f?this.mouseY:this.isVertical?this.width-this.mouseY:f?this.width-this.mouseX:this.mouseX,this.previousWidth=t.thumbRectWidth,this.previousRectX=t.thumbRectX,this.startZoomPosition=this.axis.zoomPosition,this.startZoomFactor=this.axis.zoomFactor,this.startRange=this.axis.visibleRange,this.scrollStarted=!0,this.component.trigger(la,this.getArgs(la)),this.isExist(i,"scrollBarThumb_")||this.isExist(i,"gripCircle"))?(this.isThumbDrag=!0,this.axis.scrollbarSettings.height>=12&&(this.svgObject.style.cursor="-webkit-grabbing")):this.isExist(i,"scrollBarBackRect_")&&(r=this.moveLength(this.previousXY,this.previousRectX),(t.thumbRectX=this.isWithIn(r)?r:t.thumbRectX,this.positionThumb(t.thumbRectX,t.thumbRectWidth),this.setZoomFactorPosition(t.thumbRectX,t.thumbRectWidth),this.axis.zoomPosition=this.zoomPosition<0?0:this.zoomPosition>.9?1:this.zoomPosition,this.isLazyLoad)&&(e=t.thumbRectX>this.previousRectX?"RightMove":"LeftMove",u=this.calculateLazyRange(t.thumbRectX,t.thumbRectWidth,e),u&&this.component.trigger(vo,u)));""===this.component.element.style.height&&(this.isCustomHeight=!0,this.component.element.style.height=this.component.availableSize.height+"px")},n.prototype.isExist=function(n,t){return n.indexOf(t)>-1},n.prototype.isWithIn=function(n){var t=this.axis.scrollbarSettings.height/2;return n-(this.axis.scrollbarSettings.enableZoom&&"Horizontal"===this.axis.orientation?this.svgExtraWidth/2:0)-t>=0&&n+this.scrollElements.thumbRectWidth+t<=this.width+(this.axis.scrollbarSettings.enableZoom&&"Horizontal"===this.axis.orientation?this.svgExtraWidth/2:0)},n.prototype.moveLength=function(n,t,i){void 0===i&&(i=this.axis.scrollbarSettings.height/2);var r=.1*(this.width-2*i);return n<t?t-(t-r>i?r:i):t+(t+this.scrollElements.thumbRectWidth+r<this.width-i?r:i)},n.prototype.setZoomFactorPosition=function(n,t){var i,r;this.isScrollUI=!0;i=this.axis;r=this.axis.scrollbarSettings.height/2;i.scrollbarSettings.enableZoom&&!this.isVertical&&(n-=this.svgExtraWidth/2,t+=this.svgExtraWidth/2);var f=n+t+r+1,e=r+.5,u=this.isVertical?i.rect.height:this.width;this.zoomFactor=(t+(f>=this.width?r+1:0))/u;this.zoomPosition=f>u?1-i.zoomFactor:n<r+1?0:(n-(n-e<=0?e:0))/u;this.zoomPosition=this.component.enableRtl&&!this.isVertical&&!i.isInversed||i.isInversed&&(!this.component.enableRtl||this.isVertical)?1-(this.zoomPosition+i.zoomFactor):this.zoomPosition},n.prototype.scrollMouseMove=function(n){var e=n.target,i=this.scrollElements,s=this.axis.isAxisInverse,h,f;if(!r(this.svgObject.id))return null;this.getMouseXY(n);t.isNullOrUndefined(e.id)||(this.setCursor(e),this.setTheme(e));var o,u=this.isVertical&&s?this.width-this.mouseY:this.isVertical?this.mouseY:this.mouseX,c=this.axis.visibleRange,l=this.zoomPosition,a=this.zoomFactor,v=this.previousRectX-i.thumbRectX<0?"RightMove":"LeftMove";this.isLazyLoad&&(this.isThumbDrag||this.isResizeLeft||this.isResizeRight)&&(o=this.calculateLazyRange(i.thumbRectX,i.thumbRectWidth,v));h=o?o.currentRange:null;this.isThumbDrag?(this.component.isScrolling=this.isThumbDrag,u=this.isVertical||s?this.width-u:u,f=i.thumbRectX+(u-this.previousXY),u>=f+i.thumbRectWidth?this.setCursor(e):this.axis.scrollbarSettings.height>=12&&(this.svgObject.style.cursor="-webkit-grabbing"),u>=0&&u<=f+i.thumbRectWidth&&(i.thumbRectX=this.isWithIn(f)?f:i.thumbRectX,this.positionThumb(i.thumbRectX,i.thumbRectWidth),this.previousXY=u,this.setZoomFactorPosition(f,i.thumbRectWidth),this.axis.zoomPosition=this.zoomPosition<0?0:this.zoomPosition>.9?1:this.zoomPosition),this.component.trigger(tf,this.getArgs(tf,c,l,a,h))):(this.isResizeLeft&&("Horizontal"!==this.axis.orientation||u>this.svgExtraWidth/2+this.axis.scrollbarSettings.height/2)||this.isResizeRight&&("Horizontal"!==this.axis.orientation||u<this.width+this.svgExtraWidth))&&this.resizeThumb()},n.prototype.scrollMouseWheel=function(n){var o;if(!this.axis.scrollbarSettings.enableZoom)return null;o=r(this.component.element.id+"_scrollBar_svg"+this.axis.name).getBoundingClientRect();this.mouseX=n.clientX-Math.max(o.left,0);this.mouseY=n.clientY-Math.max(o.top,0);var u,f=.5,t=this.scrollElements,i=this.axis,s="mozilla"!==this.browserName||this.isPointer?n.wheelDelta/120>0?1:-1:-n.detail/3>0?1:-1,e=Math.max(Math.max(1/ff(i.zoomFactor,0,1),1)+.25*s,1),h=this.axis.visibleRange,c=this.zoomPosition,l=this.zoomFactor;e>=1&&(f=(f="Horizontal"===i.orientation?this.mouseX/i.rect.width:1-this.mouseY/i.rect.height)>1?1:f<0?0:f,this.zoomFactor=1===e?1:ff(1/e,0,1),this.zoomPosition=1===e?0:i.zoomPosition+(i.zoomFactor-this.zoomFactor)*f);t.thumbRectX=this.isWithIn(this.zoomPosition*this.width)?this.zoomPosition*this.width:t.thumbRectX;this.isScrollUI=!0;this.positionThumb(t.thumbRectX,t.thumbRectWidth);this.isLazyLoad&&(this.setZoomFactorPosition(t.thumbRectX,t.thumbRectWidth),this.axis.zoomFactor=this.zoomFactor,this.axis.zoomPosition=this.zoomPosition<0?0:this.zoomPosition>.9?1:this.zoomPosition);i.zoomFactor=this.zoomFactor;i.zoomPosition=this.zoomPosition;this.isLazyLoad&&(u=this.calculateMouseWheelRange(t.thumbRectX,t.thumbRectWidth))&&u.currentRange.minimum!==u.previousAxisRange.minimum&&u.currentRange.maximum!==u.previousAxisRange.maximum&&(this.component.trigger(vo,u),this.isScrollEnd=!1);this.isLazyLoad||this.component.trigger(tf,this.getArgs(tf,h,c,l))},n.prototype.scrollMouseUp=function(){var i,t,r;this.startX=this.scrollElements.thumbRectX;var n=this.axis.scrollbarSettings.height/2,u=this.startX+this.scrollElements.thumbRectWidth+n+1,f=n+.5;(!this.isResizeLeft&&!this.isResizeRight||this.isLazyLoad||(this.axis.zoomFactor=u>=this.width-1&&this.startX-f<=0?1:this.zoomFactor),this.isLazyLoad)&&(t=this.previousRectX-this.startX,(t>0||t<0)&&this.isThumbDrag&&(r=t<0?"RightMove":"LeftMove",this.startX="RightMove"===r?this.startX+Math.abs(t)<this.width-n?this.startX:this.width-n-this.scrollElements.thumbRectWidth:this.startX+this.scrollElements.thumbRectWidth-Math.abs(t)>n?this.startX:n,(i=this.calculateLazyRange(this.startX,this.scrollElements.thumbRectWidth,r))&&(this.component.trigger(vo,i),this.scrollStarted=!1)),(this.isResizeLeft||this.isResizeRight)&&(i=this.calculateLazyRange(this.startX,this.scrollElements.thumbRectWidth))&&(this.component.trigger(vo,i),this.scrollStarted=!1));this.isThumbDrag=!1;this.isResizeLeft=!1;this.isResizeRight=!1;this.isScrollEnd=!1;this.component.isScrolling=!1;this.scrollStarted&&!this.isLazyLoad&&(this.component.trigger(vo,this.getArgs(tf,this.startRange,this.startZoomPosition,this.startZoomFactor)),this.scrollStarted=!1);this.isCustomHeight&&(this.component.element.style.height=null)},n.prototype.calculateMouseWheelRange=function(n,t){var f,e,o,i=this.scrollRange,h=this.getStartEnd(this.previousStart,this.previousEnd,!1),s=this.axis.scrollbarSettings.height/2,r,u;return n+t+s<=this.width&&(e=(n-s)/this.width,f=t/this.width),r=i.min+e*i.delta,u=r+f*i.delta,u&&(o={axis:this.axis,currentRange:this.getStartEnd(r,u,!0),previousAxisRange:h}),o},n.prototype.calculateLazyRange=function(n,t,i){var f,e,u,o,c,s=t,r=this.scrollRange,l=this.getStartEnd(this.previousStart,this.previousEnd,!1),h=this.axis.scrollbarSettings.height/2;return this.isResizeRight||"RightMove"===i?(f=(s=this.isResizeRight?s+16:s)/this.width,e="RightMove"===i?(n+h)/this.width:this.axis.zoomPosition,o=(u="RightMove"===i?r.min+e*r.delta:this.previousStart)+f*r.delta):this.isResizeLeft||"LeftMove"===i?(e=(n-h)/this.width,f=s/this.width,u=(u=r.min+e*r.delta)>=r.min?u:r.min,o="LeftMove"===i?u+f*r.delta:this.previousEnd):this.isThumbDrag&&(e="RightMove"===i?(n+h)/this.width:(n-h)/this.width,f=this.scrollElements.thumbRectWidth/this.width,o=(u=(u=r.min+e*r.delta)>=r.min?u:r.min)+f*r.delta),o&&(c={axis:this.component.isBlazor?{}:this.axis,currentRange:this.getStartEnd(u,o,!0),previousAxisRange:l}),c},n.prototype.getStartEnd=function(n,t,i){var f=this.valueType,u,r;("DateTime"===f||"DateTimeCategory"===f)&&i?(this.previousStart=n,this.previousEnd=t):i&&(u=Math.round(n),r=Math.ceil(t),"Category"===this.axis.valueType&&(r-=!this.axis.scrollbarSettings.enableZoom&&r-u>this.previousEnd-this.previousStart?r-u-(this.previousEnd-this.previousStart):0),this.previousStart=n=u,this.previousEnd=t=r);switch(f){case"Double":case"Category":case"Logarithmic":n=Math.round(n);t=Math.ceil(t);break;case"DateTime":case"DateTimeCategory":n=new Date(n);t=new Date(t)}return{minimum:n,maximum:t}},n.prototype.render=function(n){return(this.component.zoomModule||n&&this.axis.scrollbarSettings.enable)&&this.getDefaults(),this.getTheme(),this.removeScrollSvg(),function(n,t){for(var u,s,r,h,c,l,a=n.axis.rect,i="Horizontal"===n.axis.orientation,f=!1,e=0,o=0,v=n.axis.series;o<v.length;o++)(r=v[o]).marker.visible&&r.marker.height>e&&(e=r.marker.height);for(u=0,s=n.axis.series;u<s.length;u++)if((r=s[u]).visible&&(l=r.yMin.toString(),f=r.yData.some(function(n){return n===l})),f)break;h=(n.axis.isAxisOpposedPosition&&i?-16:f?e:0)+a.y+Math.max(.5,n.axis.lineStyle.width/2);c=(n.axis.isAxisOpposedPosition&&!i?16:0)+a.x-(n.isVertical?n.height:0);i||"Left"!==n.axis.scrollbarSettings.position&&"Right"!==n.axis.scrollbarSettings.position?!i||"Top"!==n.axis.scrollbarSettings.position&&"Bottom"!==n.axis.scrollbarSettings.position||(h=ks(n,i)):c=ks(n,i);n.svgObject=t.createSvg({id:n.component.element.id+"_scrollBar_svg"+n.axis.name,width:n.isVertical?n.height:n.axis.scrollbarSettings.enableZoom?n.width+n.svgExtraWidth:n.width,height:n.isVertical?n.width:n.height,style:"position: absolute;top: "+h+"px;left: "+(c-(!n.isVertical&&n.axis.scrollbarSettings.enableZoom?n.svgExtraWidth/2:0))+"px;cursor:auto;"});n.elements.push(n.svgObject)}(this,this.component.svgRenderer),this.wireEvents(this.svgObject),this.svgObject.appendChild(this.scrollElements.renderElements(this,this.component.svgRenderer)),this.svgObject},n.prototype.getTheme=function(){this.scrollbarThemeStyle=yb(this.component.theme)},n.prototype.removeScrollSvg=function(){document.getElementById(this.component.element.id+"_scrollBar_svg"+this.axis.name)&&t.remove(document.getElementById(this.component.element.id+"_scrollBar_svg"+this.axis.name))},n.prototype.setCursor=function(n){var t=n.id;this.svgObject.style.cursor=(t.indexOf("scrollBarThumb_")>-1||t.indexOf("_gripCircle")>-1)&&this.axis.scrollbarSettings.height>=12?"-webkit-grab":t.indexOf("Circle_")>-1||t.indexOf("Arrow_")>-1?this.isVertical?"ns-resize":"ew-resize":"auto"},n.prototype.setTheme=function(n){var f=n.id,r=f.indexOf("_leftCircle_")>-1||f.indexOf("_leftArrow_")>-1,u=f.indexOf("_rightCircle_")>-1||f.indexOf("_rightArrow_")>-1,t=this.scrollbarThemeStyle,e=this.scrollElements.leftArrowEle,h=this.scrollElements.rightArrowEle,o=this.scrollElements.leftCircleEle,s=this.scrollElements.rightCircleEle,i=this.isCurrentAxis(n,e);o.style.fill=r&&i?t.circleHover:t.circle;s.style.fill=u&&i?t.circleHover:t.circle;o.style.stroke=r&&i?t.circleHover:t.circle;s.style.stroke=u&&i?t.circleHover:t.circle;"HighContrastLight"===this.component.theme&&(e.style.fill=r&&i?t.arrowHover:t.arrow,e.style.stroke=r&&i?t.arrowHover:t.arrow,h.style.fill=u&&i?t.arrowHover:t.arrow,h.style.stroke=u&&i?t.arrowHover:t.arrow,o.style.stroke=r&&i?t.circleHover:t.circle,s.style.stroke=u&&i?t.circleHover:t.circle)},n.prototype.isCurrentAxis=function(n,t){return n.id.split("_")[2]===t.id.split("_")[2]},n.prototype.resizeThumb=function(){var t,u=this.axis.scrollbarSettings.height/2,e=2*u+10+14,o=this.previousRectX,s=this.axis.isAxisInverse,i=this.isVertical&&s?this.mouseY:this.isVertical?this.width-this.mouseY:s?this.width-this.mouseX:this.mouseX,f=Math.abs(this.previousXY-i),r,n;this.isResizeLeft&&i>=0?(r=o+(i>this.previousXY?f:-f),(t=r-u>=0?this.previousWidth+(i>this.previousXY?-f:f):this.previousWidth,r=r-u>=0?r:o,t>=e&&i<r+t)&&(this.scrollElements.thumbRectX=this.previousRectX=r,this.scrollElements.thumbRectWidth=this.previousWidth=t,this.previousXY=i,this.setZoomFactorPosition(r,t),n={axis:this.component.isBlazor?{}:this.axis,name:tf,range:this.axis.visibleRange,zoomFactor:this.zoomFactor,zoomPosition:this.zoomPosition,previousRange:this.axis.visibleRange,previousZoomFactor:this.axis.zoomFactor,previousZoomPosition:this.axis.zoomPosition,currentRange:null,cancel:!1},this.component.trigger(tf,n),n.cancel?(this.zoomFactor=n.previousZoomFactor,this.zoomPosition=n.previousZoomPosition):(this.positionThumb(r,t),this.axis.zoomFactor=n.zoomFactor,this.axis.zoomPosition=n.zoomPosition))):this.isResizeRight&&(t=i>=e+this.scrollElements.thumbRectX&&i<=this.width+("Horizontal"===this.axis.orientation?this.svgExtraWidth/2:0)-u?i-this.scrollElements.thumbRectX:this.previousWidth,this.scrollElements.thumbRectWidth=this.previousWidth=t,this.previousXY=i,this.setZoomFactorPosition(this.startX,t),this.isLazyLoad||this.setZoomFactorPosition(this.startX,t),n={axis:this.component.isBlazor?{}:this.axis,name:tf,range:this.axis.visibleRange,zoomFactor:this.zoomFactor,zoomPosition:this.zoomPosition,previousRange:this.axis.visibleRange,previousZoomFactor:this.axis.zoomFactor,previousZoomPosition:this.axis.zoomPosition,currentRange:null,cancel:!1},this.component.trigger(tf,n),n.cancel?(this.zoomFactor=n.previousZoomFactor,this.zoomPosition=n.previousZoomPosition):(this.positionThumb(this.startX,t),this.axis.zoomFactor=n.zoomFactor,this.axis.zoomPosition=n.zoomPosition))},n.prototype.positionThumb=function(n,t){var i=this.scrollElements;i.slider.setAttribute("x",this.axis.scrollbarSettings.enableZoom?n.toString():(n-this.axis.scrollbarSettings.height/2).toString());i.slider.setAttribute("width",this.axis.scrollbarSettings.enableZoom?t.toString():(t+this.axis.scrollbarSettings.height).toString());i.leftCircleEle.setAttribute("cx",n.toString());i.rightCircleEle.setAttribute("cx",(n+t).toString());i.setArrowDirection(n,t,this.height);i.gripCircle.setAttribute("transform","translate("+(n+t/2+5*(this.isVertical?1:-1))+","+(this.isVertical?this.axis.scrollbarSettings.height/2+2.5-.5:this.axis.scrollbarSettings.height/2-2.5-.5)+") rotate("+(this.isVertical?"180":"0")+")")},n.prototype.getDefaults=function(){var n=this.axis,t=this.axis.scrollbarSettings.height/2,u=2*t+10+14,f,i,r,e;this.axis.scrollbarSettings.enable&&(this.isLazyLoad=!0,this.getLazyDefaults(n));this.isVertical="Vertical"===n.orientation;f=this.component.enableRtl&&!this.isVertical&&!n.isInversed||n.isInversed&&!(this.component.enableRtl&&!this.isVertical);this.zoomFactor=this.isLazyLoad?this.zoomFactor:n.zoomFactor;this.zoomPosition=this.isLazyLoad?f?1-(this.zoomPosition+this.zoomFactor):this.zoomPosition:f?1-(n.zoomPosition+n.zoomFactor):n.zoomPosition;i=this.zoomFactor*(this.isVertical?n.rect.height:n.rect.width);i=this.isLazyLoad&&!this.axis.scrollbarSettings.enableZoom||i>u?i:u;this.scrollX=n.rect.x;this.scrollY=n.rect.y;this.width=this.isVertical?n.rect.height:n.rect.width;this.height=this.axis.scrollbarSettings.height;r=this.zoomPosition*(this.isVertical?n.rect.height:this.width);e=this.width-u-t;this.scrollElements.thumbRectX=r>e?e:r<t?t:r;this.scrollElements.thumbRectWidth=this.isThumbDrag?this.scrollElements.thumbRectWidth:i+this.scrollElements.thumbRectX<this.width-2*t?i:this.width-this.scrollElements.thumbRectX-t},n.prototype.getLazyDefaults=function(n){var r,u,f=n.valueType,e=n.scrollbarSettings,t=n.scrollbarSettings.range,i=n.visibleRange,o=n.scrollbarSettings.pointsLength,l,a;this.valueType=f=e.range.minimum&&e.range.maximum||!e.pointsLength?f:"Double";var s={skeleton:"full",type:"dateTime"},h=this.component.intl.getDateParser(s),c=this.component.intl.getDateFormat(s);switch(f){case"Double":case"Category":case"Logarithmic":r=t.minimum?t.minimum:o?0:i.min;u=t.maximum?t.maximum:o?o-1:i.max;break;case"DateTime":case"DateTimeCategory":r=t.minimum?Date.parse(h(c(t.minimum))):i.min;u=t.maximum?Date.parse(h(c(t.maximum))):i.max}r=Math.min(r,i.min);u=Math.max(u,i.max);l=(i.max-i.min)/(u-r);a=(i.min-r)/(u-r);this.zoomFactor=t.minimum||t.maximum?l:this.axis.maxPointLength/n.scrollbarSettings.pointsLength;this.zoomPosition=t.minimum||t.maximum?a:n.zoomPosition;this.zoomPosition=this.component.enableRtl&&"Horizontal"===n.orientation&&!n.isInversed||n.isInversed&&(!this.component.enableRtl||"Horizontal"!==n.orientation)?1-(this.zoomPosition+this.zoomFactor):this.zoomPosition;this.scrollRange.min=r;this.scrollRange.max=u;this.scrollRange.delta=u-r;this.previousStart=i.min;this.previousEnd=i.max},n.prototype.getLogRange=function(n){var i=n.scrollbarSettings.range,t=hi(i.minimum,n.logBase),r=hi(i.maximum,n.logBase);return t=isFinite(t)?t:i.minimum,r=isFinite(t)?r:i.maximum,{minimum:Math.floor(t/1),maximum:Math.ceil(r/1)}},n.prototype.injectTo=function(t,i){t.zoomingScrollBar=new n(i,t)},n.prototype.destroy=function(){var n=this;this.axes?this.axes.map(function(n){n.zoomingScrollBar.destroy()}):(this.elements.map(function(i){n.unWireEvents(i);t.remove(i.firstChild)}),this.elements=[])},n.prototype.getModuleName=function(){return"ScrollBar"},n.prototype.getArgs=function(n,t,i,r,u){return{axis:this.component.isBlazor?{}:this.axis,name:n,range:this.axis.visibleRange,zoomFactor:this.axis.zoomFactor,zoomPosition:this.axis.zoomPosition,previousRange:t,previousZoomFactor:r,previousZoomPosition:i,currentRange:u}},n}(),vht=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yht=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.paretoAxes=[],t}return vht(t,n),t.prototype.initSeries=function(n,t){var i=new vt(t,"series",n.properties,!0),r=t.palettes.length?t.palettes:ro(t.theme),u=r.length;i.name="Pareto";i.yAxisName=n.yAxisName+"_CumulativeAxis";i.category="Pareto";n.category="Pareto";i.index=n.index+t.series.length;i.type="Line";i.interior=i.fill=i.paretoOptions.fill?i.paretoOptions.fill:r[i.index%u];i.width=i.paretoOptions.width;i.dashArray=i.paretoOptions.dashArray;i.marker=i.paretoOptions.marker;i.marker&&i.marker.visible&&(i.marker.shape=i.marker.shape?i.marker.shape:av[t.markerIndex%10],t.markerIndex++);t.visibleSeries.push(i);this.initAxis(n,i,t)},t.prototype.initAxis=function(n,t,i){if(!this.paretoAxes.some(function(n){return n.name===t.yAxisName})){var r=n.yAxisName&&i.axes.length?i.axes.filter(function(t){return t.name===n.yAxisName})[0]:i.primaryYAxis,u=new yo(i,"axes",{name:t.yAxisName,majorGridLines:{width:0},majorTickLines:r.majorTickLines,lineStyle:r.lineStyle,minimum:0,maximum:100,interval:20,rowIndex:r.rowIndex,opposedPosition:!0,labelFormat:"{value}%"});this.paretoAxes.push(u)}},t.prototype.render=function(n){n.chart.columnSeriesModule.render(n)},t.prototype.performCumulativeCalculation=function(n,t){for(var r=n,u=0,f=0,e=r.length,i=0;i<e;i++)u+=r[i][t.yName];for(i=0;i<e;i++)f+=r[i][t.yName],r[i][t.yName]=Number((f/u*100).toFixed(2));return r},t.prototype.doAnimation=function(n){this.animate(n)},t.prototype.getModuleName=function(){return"ParetoSeries"},t.prototype.destroy=function(){},t}(ku);const kr=ejdashboard.pdfexport;du=function(){function n(n){this.control=n}return n.prototype.export=function(n,i,r,u,f,e,o,s,h,c){var d=this,l=this.getControlsValue(u,o,c&&"PDF"===n,n),a=[],y=[],p=[],w=!(t.Browser.userAgent.toString().indexOf("HeadlessChrome")>-1);r=t.isNullOrUndefined(r)?kr.PdfPageOrientation.Landscape:r;for(var g=function(o){var rt,k,ut,tt,g,ft;y.push(f||l[o].width);p.push(e||l[o].height);var c=u[o].svgObject,nt=u[o].enableCanvas,it=void 0;nt||(c=t.createElement("canvas",{id:"ej2-canvas",attrs:{width:y[o].toString(),height:p[o].toString()}}));rt='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+l[o].svg.outerHTML+"<\/svg>";k=window.URL.createObjectURL(new Blob("SVG"===n?[rt]:[(new XMLSerializer).serializeToString(l[o].svg)],{type:"image/svg+xml"}));"SVG"===n?"msie"===t.Browser.info.name?(ut=new Blob([(new XMLSerializer).serializeToString(l[o].svg)],{type:"application/octet-stream"}),window.navigator.msSaveOrOpenBlob(ut,i+"."+n.toLocaleLowerCase())):b.triggerDownload(i,n,k,w):"msie"===t.Browser.info.name?(tt=c,nt||(tt=b.createCanvas()),it=tt.toDataURL(),a.push(c),"PDF"===n?a.length===l.length&&b.exportPdf(a,r,y,p,w,i,s,h):b.doexport(n,it,i)):(g=new Image,ft=c.getContext("2d"),g.onload=function(){ft.drawImage(g,0,0);window.URL.revokeObjectURL(k);a.push(c);"PDF"===n?a.length===l.length&&d.exportPdf(a,r,y,p,w,i,s,h):window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(c.toBlob(null),i+"."+n.toLocaleLowerCase()):d.triggerDownload(i,n,c.toDataURL("image/"+n.toLowerCase()),w)},g.src=k);nt||v(document.getElementById(u[o].element.id+"_canvas"))},b=this,k=0;k<l.length;k++)g(k)},n.prototype.getDataUrl=function(n){var e=this.getControlsValue([n]),i=this.control.svgObject,o=this.control.enableCanvas,r,u,s,f,h;return(o||(i=t.createElement("canvas",{id:"ej2-canvas",attrs:{width:e[0].width.toString(),height:e[0].height.toString()}})),r=window.URL.createObjectURL(new Blob([(new XMLSerializer).serializeToString(e[0].svg)],{type:"image/svg+xml"})),"msie"===t.Browser.info.name)?(u=i,o||(u=this.createCanvas()),s={name:bs,cancel:!1,dataUrl:i.toDataURL("image/png")},n.trigger(bs,s),{element:u,dataUrl:u.toDataURL()}):(f=new Image,h=i.getContext("2d"),f.onload=function(){h.drawImage(f,0,0);window.URL.revokeObjectURL(r);var t={name:bs,cancel:!1,dataUrl:i.toDataURL("image/png")};return n.trigger(bs,t),t.dataUrl},f.src=r,{element:i,blobUrl:r})},n.prototype.triggerDownload=function(n,i,r,u){t.createElement("a",{attrs:{download:n+"."+i.toLocaleLowerCase(),href:r}}).dispatchEvent(new MouseEvent(u?"click":"move",{view:window,bubbles:!1,cancelable:!0}))},n.prototype.getControlsValue=function(n,r,u,f){for(var e,v,y,p,l,o=0,s=0,h=new i.SvgRenderer("").createSvg({id:"Svg_Export_Element",width:200,height:200}),b=[],a=0;a<n.length;a++){e=n[a];e.enableRtl&&h.setAttribute("direction","rtl");var w=e.enableCanvas,c=e.svgObject.cloneNode(!0),k=e.renderer.createGroup({style:t.isNullOrUndefined(r)||r?"transform: translateY("+s+"px)":"transform: translateX("+o+"px)"});if("transparent"===(l=c.childNodes[0]?c.childNodes[0].getAttribute("fill"):"transparent")&&(l=e.theme.indexOf("Dark")>-1||e.theme.indexOf("HighContrast")>-1?"rgba(0, 0, 0, 1)":"rgba(255, 255, 255, 1)"),!w){if("stockChart"===e.getModuleName())for(c.childNodes[0].firstChild.setAttribute("fill",l),v=1;v<c.childNodes.length;v++)c.childNodes[v].childNodes[0].setAttribute("fill",l);else"SVG"===f&&c.childNodes[0].setAttribute("fill",l);k.appendChild(c)}y=0;p=0;e.stockLegendModule&&e.legendSettings.visible&&("Bottom"===e.legendSettings.position||"Top"===e.legendSettings.position||"Auto"===e.legendSettings.position?y+=e.stockLegendModule.legendBounds.height:"Left"!==e.legendSettings.position&&"Right"!==e.legendSettings.position||(p+=e.stockLegendModule.legendBounds.width));o=t.isNullOrUndefined(r)||r?Math.max(e.availableSize.width+p,o):o+e.availableSize.width+p;s=t.isNullOrUndefined(r)||r?s+e.availableSize.height+y:Math.max(e.availableSize.height+y,s);w||h.appendChild(k);(u||a===n.length-1)&&((!u&&!this.control.enableCanvas||u&&!w)&&(h.setAttribute("width",o+""),h.setAttribute("height",s+""),h.style.backgroundColor=l),b.push({width:o,height:s,svg:h}));u&&a<n.length&&(o=0,s=0,h=new i.SvgRenderer("").createSvg({id:"Svg_Export_Element",width:200,height:200}))}return b},n.prototype.createCanvas=function(){var n=this.control,t;return this.canvasRender(!0,n),t=n.svgObject,this.canvasRender(!1,n),t},n.prototype.canvasRender=function(n,t){t.enableCanvas=n;t.preRender();t.render()},n.prototype.exportPdf=function(n,t,r,u,f,e,o,s){for(var a,v,g,it,d,c=new kr.PdfDocument,l=c.pageSettings.margins,p=c.pageSettings.width,w=c.pageSettings.height,h=0;n.length>h;h++){if(a=n[h].toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream"),c.pageSettings.orientation=t,v=p<r[h]?r[h]+l.left+l.right:p,g=0===t&&w>u[h]?r[h]+l.left+l.right:w<u[h]?u[h]+l.top+l.bottom:w,void 0!==o){for(var b=new kr.PdfStandardFont(1,o.fontSize||15),rt=new kr.PdfSolidBrush(new kr.PdfColor(0,0,0)),k=ur(o.content,r[h]-(l.left+l.right+p/2),{size:o.fontSize.toString(),fontStyle:"Normal",fontWeight:"400",fontFamily:"Segoe UI"},null),nt=i.measureText("chartMeasureText",{size:o.fontSize.toString(),fontStyle:"Normal",fontWeight:"400",fontFamily:"Segoe UI"}).height,ut=nt*k.length,tt=new kr.PdfPageTemplateElement(v,ut),y=0;y<k.length;y++)it=(o.y||0)+y*nt,tt.graphics.drawString(k[y],b,null,rt,o.x,it,null);c.template.top=tt}void 0!==s&&(b=new kr.PdfStandardFont(1,s.fontSize||15),d=new kr.PdfPageTemplateElement(v,30),d.graphics.drawString(s.content+"",b,null,new kr.PdfSolidBrush(new kr.PdfColor(0,0,0)),s.x,s.y,null),c.template.bottom=d);c.pageSettings.size=new kr.SizeF(v,g);a=a.slice(a.indexOf(",")+1);c.pages.add().graphics.drawImage(new kr.PdfBitmap(a),0,0,r[h],u[h])}f&&(c.save(e+".pdf"),c.destroy())},n.prototype.doexport=function(n,t,i){var r,u=n||"JPG";r=[t];this.exportImage(r,i,u,t)},n.prototype.exportImage=function(n,i,r){for(var f,c,e=[],l=n instanceof HTMLElement?0:n.length,o=0;o<l;o++){for(var a=n[o].replace(/^data:[a-z]*;,/,"").split(","),s=atob(a[1]),h=new ArrayBuffer(s.length),v=new Uint8Array(h),u=0;u<s.length;u++)v[u]=s.charCodeAt(u);e.push(h)}for(f=0;f<e.length;f++)c=new Blob([e[f]],{type:"application/octet-stream"}),"msie"===t.Browser.info.name&&window.navigator.msSaveOrOpenBlob(c,i+"."+r.toLocaleLowerCase())},n}();const pht=ejdashboard.excelexport;var wht=function(){function n(n){this.actualRowCount=0;this.series=[];this.axisCollection=[];this.requiredValuesLength=0;this.histogramSeriesCount=0;this.chart=n}return n.prototype.export=function(n,t,i,r,u,f,e,o,s,h){var l=new du(this.chart),c;(r=r||[this.chart],"CSV"===n||"XLSX"===n)?this.excelExport(r,t,n,u,f):(c={cancel:!1,name:yf,width:u,height:f,excelProperties:{rows:void 0,columns:void 0}},this.chart.trigger(yf,c),c.cancel||l.export(n,t,i,r,u=c.width,f=c.height,e,o,s,h))},n.prototype.excelExport=function(n,t,i,r,u){var e,o,v,c,s;this.rows=[];this.actualRowCount=1;for(var y=[],h=[],l={bold:!0,hAlign:"Center",vAlign:"Center",wrapText:!0},a=[],f=0;f<n.length;f++)if(e="rangeNavigator"===n[f].getModuleName(),o="accumulationchart"===n[f].getModuleName(),this.series=e?n[f].series:n[f].visibleSeries,e&&0===this.series.length)n[f].dataSource&&this.createRangeNavigatorExcelSheet(n[f],l,i);else{if(this.histogramSeriesCount=0,this.requiredValuesLength=0,this.axisCollection=[],o||e?this.axisCollection.push(null):this.axisCollection="stockChart"===n[f].getModuleName()?n[f].chart.horizontalAxes:n[f].horizontalAxes,h=this.getRequiredValues(e),0===this.requiredValuesLength&&this.series.length===this.histogramSeriesCount)return;a=this.getXValue(h,n[f],e,o);this.getTitle(h,l,n[f],e,o,i,a[0].length);this.createExcelSheet(e,o,a,i,h,l,n[f])}for(v=[],this.requiredValuesLength=0===this.requiredValuesLength?1:this.requiredValuesLength,c=0;c<this.requiredValuesLength;c++)v.push({index:c+1,width:100});s={cancel:!1,name:yf,width:r,height:u,excelProperties:{rows:this.rows,columns:v}};n[0].trigger(yf,s);s.cancel||(y.push({columns:s.excelProperties.columns,rows:s.excelProperties.rows}),t=t||("XLSX"===i?"XLSX":"CSV"),new pht.Workbook({worksheets:y},"XLSX"===i?"xlsx":"csv").save(t+("XLSX"===i?".xlsx":".csv")))},n.prototype.createRangeNavigatorExcelSheet=function(n,t,i){var e=n.xName,f=n.yName,u,r;for(this.rows.push({index:this.actualRowCount,cells:[{index:1,value:n.valueType.indexOf("DateTime")>-1?n.valueType:"Category",colSpan:1,rowSpan:1,style:t},{index:2,value:f,colSpan:1,rowSpan:1,style:t}]}),this.actualRowCount++,u=n.dataSource,r=0;r<u.length;r++)this.rows.push({index:this.actualRowCount,cells:[{index:1,value:"CSV"===i&&null===u[r][e]?"":u[r][e],colSpan:1,rowSpan:1,style:t},{index:2,value:"CSV"===i&&null===u[r][f]?"":u[r][f],colSpan:1,rowSpan:1,style:{}}]}),this.actualRowCount++;this.requiredValuesLength=2},n.prototype.getRequiredValues=function(n){for(var i=[],u=function(r){var u=t.series[r].type,f;if(!n&&!t.series[r].visible||"TrendLine"===t.series[r].category)return i.push([]),"continue";("Histogram"===u?(i.push([]),t.histogramSeriesCount++):"Pareto"===t.series[r].category?i.push([t.series[r].xName,"y"]):-1!==u.indexOf("Range")||"Hilo"===u?i.push([t.series[r].xName,t.series[r].high,t.series[r].low]):"HiloOpenClose"===u||"Candle"===u?(i.push([t.series[r].xName,t.series[r].high,t.series[r].low,t.series[r].open,t.series[r].close]),"Candle"===u&&""!==t.series[r].volume&&i[r].push(t.series[r].volume)):"BoxAndWhisker"===u?i.push([t.series[r].xName,"maximum","upperQuartile","median","lowerQuartile","minimum","outliers"]):"Bubble"===u?(i.push([t.series[r].xName,t.series[r].yName]),""!==t.series[r].size&&i[r].push(t.series[r].size)):"Pie"===u?(i.push([t.series[r].xName,t.series[r].yName]),t.series[r].radius.match(/[a-zA-Z]/)&&i[r].push(t.series[r].radius)):i.push([t.series[r].xName,t.series[r].yName]),t.series[r].errorBar&&t.series[r].errorBar.visible)&&(f=t.series[r].errorBar,["verticalError","horizontalError","verticalNegativeError","horizontalNegativeError","verticalPositiveError","horizontalPositiveError"].forEach(function(n){"string"==typeof f[n]&&i[r].push(f[n])}));t.requiredValuesLength+=i[r].length},t=this,r=0;r<this.series.length;r++)u(r);return i},n.prototype.getTitle=function(n,t,i,r,u,f,e){var p,h=[],w=[],s=1,d=!1,l,tt,k,y,c,a;for(!r&&"XLSX"===f&&i.title&&(this.rows.push({}),p=this.rows.length>0?this.rows.length-1:-1,this.actualRowCount++,d=!0),l=0;l<this.axisCollection.length&&(!u||0!==e);l++){for(var g=!1,v="",nt=s,b=!1,o=0;o<this.series.length;o++)if(tt=null!==this.axisCollection[l]?"primaryXAxis"===this.axisCollection[l].name||"primaryYAxis"===this.axisCollection[l].name&&this.series[o].type.indexOf("Bar")>-1?null:this.axisCollection[l].name:"",r||(u||tt===this.series[o].xAxisName)&&this.series[o].visible&&"TrendLine"!==this.series[o].category&&"Histogram"!==this.series[o].type){if(b||(h.push({}),s++),b=!0,k=this.series[o].name,y="BoxAndWhisker"===this.series[o].type?n[o].length-1:n[o].length,n[o][1]===this.series[o].yName)for(c=1;c<y;c++)h.push({index:s,value:1===c?k||"Series-"+(o+1):n[o][c],colSpan:1,rowSpan:1,style:t}),s++;else{for(h.push({index:s,value:k||"Series-"+(o+1),colSpan:y-1,rowSpan:1,style:t}),a=s,c=1;c<y;c++)w.push({index:a,value:n[o][c],colSpan:1,rowSpan:1,style:t}),a++;"BoxAndWhisker"===this.series[o].type&&(h.push({index:a,value:n[o][y],colSpan:1,rowSpan:2,style:t}),a++);s=a;g=!0}v=u?n[0][0]:r?i.valueType:this.axisCollection[l].valueType;v=u||v.indexOf("DateTime")>-1?v:"Category"}b&&(h[nt-1]={index:nt,value:v,colSpan:1,rowSpan:g?2:1,style:t})}h.length&&(this.rows.push({index:this.actualRowCount,cells:h}),this.actualRowCount++);w.length&&(this.rows.push({index:this.actualRowCount,cells:w}),this.actualRowCount++);d&&((h=[]).push({index:1,value:i.title,colSpan:1===s?s:s-1,rowSpan:1,style:t}),this.rows[p]={index:p+1,cells:h});this.requiredValuesLength=s-1},n.prototype.getXValue=function(n,t,i,r){for(var c,o,l,s,e=[],f=0;f<this.axisCollection.length;f++){for(var h=[],a=r?"":i?t.valueType:this.axisCollection[f].valueType,u=0;u<this.series.length;u++)if(c=null!==this.axisCollection[f]?"primaryXAxis"===this.axisCollection[f].name||"primaryYAxis"===this.axisCollection[f].name&&this.series[u].type.indexOf("Bar")>-1?null:this.axisCollection[f].name:"",(i||(r||c===this.series[u].xAxisName)&&this.series[u].visible)&&"TrendLine"!==this.series[u].category&&"Histogram"!==this.series[u].type)for(o=0;o<this.series[u].dataSource.length;o++)r&&!this.series[u].points[o].visible||h.push(a.indexOf("DateTime")>-1?new Date(this.series[u].dataSource[o][n[u][0]]).getTime():this.series[u].dataSource[o][n[u][0]]);e.push(h)}for(l=function(n){e[n]=e[n].filter(function(t,i){return e[n].indexOf(t)===i})},s=0;s<e.length;s++)l(s);return e},n.prototype.createExcelSheet=function(n,i,r,u,f,e,o){for(var k,p,g,tt,l,it,rt,w,y=0,a=0,c=0;c<this.axisCollection.length;c++){for(k=i?"":n?o[0].valueType:this.axisCollection[c].valueType,p=0;p<r[c].length;p++){a=y||1;for(var b=[],d=!0,s=0;s<this.series.length;s++)if(g=null!==this.axisCollection[c]?"primaryXAxis"===this.axisCollection[c].name||"primaryYAxis"===this.axisCollection[c].name&&this.series[s].type.indexOf("Bar")>-1?null:this.axisCollection[c].name:"",(n||(i||this.series[s].xAxisName===g)&&this.series[s].visible)&&"TrendLine"!==this.series[s].category&&"Histogram"!==this.series[s].type){for(var nt=!1,v=this.series[s].dataSource,h=0;h<v.length;h++)if(tt=k.indexOf("DateTime")>-1?"Pareto"===this.series[s].category?new Date(this.series[s].points[h][f[s][0]]).getTime():new Date(v[h][f[s][0]]).getTime():"Pareto"===this.series[s].category?this.series[s].points[h][f[s][0]]:v[h][f[s][0]],r[c][p]===tt){for(l=d?0:1,it="BoxAndWhisker"===this.series[s].type?f[s].length-1:f[s].length;l<it;l++)rt=this.series[s].enableComplexProperty?t.getValue(f[s][l],v[h]):v[h][f[s][l]],w=0===l||"BoxAndWhisker"!==this.series[s].type&&"Pareto"!==this.series[s].category?rt:this.series[s].points[h][f[s][l]],null===w&&"CSV"===u&&(w=""),b.push({index:0===l?0===y?1:y:a,value:w,colSpan:1,rowSpan:1,style:0===l?e:{}}),a++;"BoxAndWhisker"===this.series[s].type&&(b.push({index:a,value:this.series[s].points[h].outliers[0],colSpan:1,rowSpan:1,style:{}}),a++);d=!1;nt=!0;break}nt||(a+=f[s].length-1)}this.rows.push({index:this.actualRowCount,cells:b});this.actualRowCount++}y=a}},n.prototype.getDataUrl=function(n){return new du(n).getDataUrl(n)},n.prototype.getModuleName=function(){return"Export"},n.prototype.destroy=function(){},n}(),wc=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),y=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},hk=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return wc(i,n),y([t.Property(null)],i.prototype,"content",void 0),y([t.Property("0")],i.prototype,"x",void 0),y([t.Property("0")],i.prototype,"y",void 0),y([t.Property("Pixel")],i.prototype,"coordinateUnits",void 0),y([t.Property("Chart")],i.prototype,"region",void 0),y([t.Property("Middle")],i.prototype,"verticalAlignment",void 0),y([t.Property("Center")],i.prototype,"horizontalAlignment",void 0),y([t.Property(null)],i.prototype,"description",void 0),i}(t.ChildProperty),ck=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return wc(i,n),y([t.Property(!1)],i.prototype,"visible",void 0),y([t.Property(!0)],i.prototype,"showZero",void 0),y([t.Property(null)],i.prototype,"name",void 0),y([t.Property("transparent")],i.prototype,"fill",void 0),y([t.Property("Inside")],i.prototype,"position",void 0),y([t.Property(5)],i.prototype,"rx",void 0),y([t.Property(5)],i.prototype,"ry",void 0),y([t.Property(0)],i.prototype,"angle",void 0),y([t.Property(!1)],i.prototype,"enableRotation",void 0),y([t.Complex({width:null,color:null},yt)],i.prototype,"border",void 0),y([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},oi)],i.prototype,"font",void 0),y([t.Complex({},ye)],i.prototype,"connectorStyle",void 0),y([t.Property(null)],i.prototype,"template",void 0),y([t.Property("")],i.prototype,"format",void 0),y([t.Property(null)],i.prototype,"maxWidth",void 0),y([t.Property("Ellipsis")],i.prototype,"textOverflow",void 0),y([t.Property("Normal")],i.prototype,"textWrap",void 0),i}(t.ChildProperty),lk=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return wc(i,n),y([t.Property("50%")],i.prototype,"x",void 0),y([t.Property("50%")],i.prototype,"y",void 0),i}(t.ChildProperty),gv=function(){return function(){this.visible=!0;this.symbolLocation=null;this.region=null;this.labelRegion=null;this.labelVisible=!0;this.regions=null;this.isExplode=!1;this.isClubbed=!1;this.isSliced=!1;this.argsData=null;this.isLabelUpdated=null;this.initialLabelRegion=null}}(),ak=function(n){function u(){var t=null!==n&&n.apply(this,arguments)||this;return t.points=[],t.clubbedPoints=[],t.sumOfPoints=0,t.isRectSeries=!0,t.clipRect=new i.Rect(0,0,0,0),t.category="Series",t.rightSidePoints=[],t.leftSidePoints=[],t}return wc(u,n),u.prototype.refreshDataManager=function(n,i){var u=this,r;this.accumulation=n;this.radius=this.radius?this.radius:t.Browser.isDevice&&"Outside"===this.dataLabel.position?"40%":"80%";r=this.dataSource||n.dataSource;r instanceof gt.DataManager||!t.isNullOrUndefined(this.query)?this.dataModule.getData(this.dataModule.generateQuery().requiresCount()).then(function(t){return u.dataManagerSuccess(t,n)}):this.dataManagerSuccess({result:r,count:r.length},n,i)},u.prototype.dataManagerSuccess=function(n,t,i){void 0===i&&(i=!0);var r={name:re,series:this,data:n.result};t.allowServerDataBinding=!1;t.trigger(re,r);this.resultData=""!==n.result?n.result:[];t.isBlazor||i||this.getPoints(this.resultData,t);(++t.seriesCounts===t.visibleSeries.length&&i||window.Blazor&&!i&&1===t.seriesCounts)&&(this.getPoints(this.resultData,t),t.refreshChart())},u.prototype.getPoints=function(n,i){var r,o=Object.keys(n).length,e,s;if(this.sumOfPoints=0,0===o)return this.points=[],null;this.groupTo&&this.findSumOfPoints(n);this.points=[];this.clubbedPoints=[];this.sumOfClub=0;for(var f=this.palettes.length?this.palettes:ro(i.theme),h=it(this.groupTo,this.sumOfPoints),u=0;u<o;u++)r=this.setPoints(n,u,f,i),this.isClub(r,h,u)?(r.index=this.clubbedPoints.length,r.isExplode=!0,this.clubbedPoints.push(r),r.isSliced=!0):(t.isNullOrUndefined(r.y)&&(r.visible=!1),this.pushPoints(r,f));(this.groupTo||this.findSumOfPoints(n),this.lastGroupTo=this.groupTo,this.sumOfClub>0)&&(e=this.generateClubPoint(),this.pushPoints(e,f),s=this.points.length-1,this.clubbedPoints.map(function(n){n.index+=s;n.color=e.color}));this.clubbedPoints.length&&this.explode&&"Pie"===this.type&&(this.explodeAll||this.points[this.points.length-1].index===this.explodeIndex)&&(this.points.splice(this.points.length-1,1),this.points=this.points.concat(this.clubbedPoints))},u.prototype.generateClubPoint=function(){var n=new gv;return n.isClubbed=!0,n.x="Others",n.y=this.sumOfClub,n.text=n.originalText=n.x+": "+this.sumOfClub,n.sliceRadius="80%",n},u.prototype.pushPoints=function(n,t){n.index=this.points.length;n.isExplode=this.explodeAll||n.index===this.explodeIndex;n.color=n.color||t[n.index%t.length];this.points.push(n)},u.prototype.isClub=function(n,i,r){return!t.isNullOrUndefined(i)&&("Value"===this.groupMode&&Math.abs(n.y)<=i||"Point"===this.groupMode&&r>=i)?(this.sumOfClub+=Math.abs(n.y),!0):!1},u.prototype.findSumOfPoints=function(n){for(var r=Object.keys(n).length,i=0;i<r;i++)t.isNullOrUndefined(n[i])||t.isNullOrUndefined(n[i][this.yName])||isNaN(n[i][this.yName])||!(this.points.length&&this.points[i]&&this.points[i].visible&&!t.isNullOrUndefined(this.points[i].y)||this.groupTo)||(this.sumOfPoints+=Math.abs(n[i][this.yName]))},u.prototype.setPoints=function(n,i,r,u){var f=new gv;return f.x=t.getValue(this.xName,n[i]),f.y=t.getValue(this.yName,n[i]),f.legendImageUrl=t.getValue(this.legendImageUrl,n[i]),f.color=t.getValue(this.pointColorMapping,n[i]),f.text=f.originalText=t.getValue(this.dataLabel.name||"",n[i]),f.tooltip=t.getValue(this.tooltipMappingName||"",n[i]),f.sliceRadius=t.getValue(this.radius,n[i]),f.sliceRadius=t.isNullOrUndefined(f.sliceRadius)?"80%":f.sliceRadius,f.separatorY=u.intl.formatNumber(f.y,{useGrouping:u.useGroupingSeparator}),this.setVisibility(f,i),this.setAccEmptyPoint(f,i,n),f},u.prototype.renderSeries=function(n,i){var u,f=i?r(n.element.id+"_Series_"+this.index):n.renderer.createGroup({id:n.element.id+"_Series_"+this.index});this.renderPoints(n,f,i);n.accumulationDataLabelModule&&this.dataLabel.visible&&((u=n.renderer.createGroup({id:n.element.id+"_datalabel_Series_"+this.index})).style.visibility=(this.animation.enable&&"Disable"!==t.animationMode||"Enable"===t.animationMode)&&n.animateSeries&&"Pie"===this.type?"hidden":"visible",this.renderDataLabel(n,u,i));"Pie"===this.type&&(n.redraw||this.findMaxBounds(this.labelBound,this.accumulationBound),n.pieSeriesModule.animateSeries(n,this.animation,this,f,this.borderRadius,this.points));!n.redraw&&n.accumulationLegendModule&&(this.labelBound.x-=n.explodeDistance,this.labelBound.y-=n.explodeDistance,this.labelBound.height+=n.explodeDistance-this.labelBound.y,this.labelBound.width+=n.explodeDistance-this.labelBound.x)},u.prototype.renderPoints=function(n,t,r,u,f,e){for(var s,h,c,l,b=n.element.id+"_Series_"+this.index+"_Point_",v=[],y=[],p=["Chessboard","Dots","DiagonalForward","Crosshatch","Pacman","DiagonalBackward","Grid","Turquoise","Star","Triangle","Circle","Tile","HorizontalDash","VerticalDash","Rectangle","Box","VerticalStripe","HorizontalStripe","Bubble"],a=0,w=this.points;a<w.length;a++)s=w[a],s.percentage=+(s.y/this.sumOfPoints*100).toFixed(2),h={cancel:!1,name:rr,series:this,point:s,fill:s.color,border:this.isEmpty(s)?{width:this.emptyPointSettings.border.width,color:this.emptyPointSettings.border.color}:{width:this.border.width,color:this.border.color},pattern:this.applyPattern?p[s.index%p.length]:"None"},n.trigger(rr,h),s.color=h.fill,l=s.color,this.applyPattern&&(l=new rh(n).pattern(n,s.color,s.index,h.pattern,this.opacity)),c=new i.PathOption(b+s.index,l,h.border.width||1,h.border.color||s.color,this.opacity,h.series.dashArray,""),"Trapezoidal"===this.funnelMode&&"Funnel"===this.type?(v.push(c),s.visible&&y.push(s)):n[et(this.type)+"SeriesModule"].renderPoint(s,this,n,c,t,r,u,f,e);"Trapezoidal"===this.funnelMode&&"Funnel"===this.type?n[et(this.type)+"SeriesModule"].renderTrapezoidalFunnel(this,y,n,v,t,r):o(!1,n.getSeriesElement(),t,r)},u.prototype.renderDataLabel=function(n,i,u){var e,f,a;n.accumulationDataLabelModule.findAreaRect();e=t.createElement("div",{id:n.element.id+"_Series_0_DataLabelCollections"});this.leftSidePoints=[];this.rightSidePoints=[];for(var s=[],h=[],c=0,l=this.points;c<l.length;c++)f=l[c],f.visible&&(this.dataLabel.showZero||!this.dataLabel.showZero&&(0!==f.y||0===f.y&&"Zero"===this.emptyPointSettings.mode))&&n.accumulationDataLabelModule.renderDataLabel(f,this.dataLabel,i,this.points,this.index,e,u),f.midAngle>=90&&f.midAngle<=270?this.leftSidePoints.push(f):f.midAngle>=0&&f.midAngle<=90?h.push(f):s.push(f);(s.sort(function(n,t){return n.midAngle-t.midAngle}),h.sort(function(n,t){return n.midAngle-t.midAngle}),this.leftSidePoints.sort(function(n,t){return n.midAngle-t.midAngle}),this.rightSidePoints=s.concat(h),n.accumulationDataLabelModule.drawDataLabels(this,this.dataLabel,i,e,u),null!==this.dataLabel.template&&e.childElementCount)&&(a=n.accumulationDataLabelModule.drawDataLabels.bind(n.accumulationDataLabelModule,this,this.dataLabel,i,e,u),n.isReact&&n.renderReactTemplates(a),o(!1,r(n.element.id+"_Secondary_Element"),e,u));o(!1,n.getSeriesElement(),i,u)},u.prototype.findMaxBounds=function(n,t){n.x=t.x<n.x?t.x:n.x;n.y=t.y<n.y?t.y:n.y;n.height=t.y+t.height>n.height?t.y+t.height:n.height;n.width=t.x+t.width>n.width?t.x+t.width:n.width},u.prototype.findMaxLabelWidth=function(){for(var t,n=0;n<this.points.length;n++)(t=this.points[0].textSize.width)<this.points[n].textSize.width&&(t=this.points[n].textSize.width);return t},u.prototype.setAccEmptyPoint=function(n,i,r){if(!t.isNullOrUndefined(n.y)&&!isNaN(n.y))return null;switch(n.color=this.emptyPointSettings.fill||n.color,this.emptyPointSettings.mode){case"Zero":n.y=0;n.visible=!0;break;case"Average":var u=r[i-1]&&r[i-1][this.yName]||0,f=r[i+1]&&r[i+1][this.yName]||0;n.y=(Math.abs(u)+Math.abs(f))/2;this.sumOfPoints+=n.y;n.visible=!0;break;default:n.visible=!1}},u.prototype.setVisibility=function(n,t){this.accumulation.accumulationLegendModule&&this.accumulation.accumulationLegendModule.legendCollections&&this.accumulation.accumulationLegendModule.legendCollections[t]&&!this.accumulation.accumulationLegendModule.legendCollections[t].visible&&(n.visible=!1)},u.prototype.setData=function(n,i){var f,u,o,e,s;if(!n)return null;if(f=!1,this.dataSource.length===n.length)for(f=!0,u=0;u<n.length;u++){if(this.dataSource[u][this.xName]!==n[u][this.xName]){f=!1;break}o=this.points[u];this.dataSource[u][this.yName]!==n[u][this.yName]&&(o.y=n[u][this.yName],this.dataSource[u]=n[u])}if(f){for(this.sumOfPoints=0,e=[],u=0;u<this.resultData.length;u++)this.points[u]&&this.points[u].visible&&e.push(this.resultData[u]);this.findSumOfPoints(e);this.accumulation.redraw=!this.borderRadius&&this.accumulation.enableAnimation;this.accumulation.animateSeries=!1;s=this.accumulation.duration;this.accumulation.duration=t.isNullOrUndefined(i)?500:i;this.accumulation[et(this.type)+"SeriesModule"].initProperties(this.accumulation,this);this.renderPoints(this.accumulation,r(this.accumulation.element.id+"_Series_"+this.index),this.accumulation.redraw,null,null,!0);this.accumulation.centerLabel.text&&this.accumulation.renderCenterLabel(!0,!0);this.accumulation.annotationModule&&this.accumulation.annotationModule.renderAnnotations(r(this.accumulation.element.id+"_Secondary_Element"));this.accumulation.accumulationDataLabelModule&&this.dataLabel.visible&&this.renderDataLabel(this.accumulation,r(this.accumulation.element.id+"_datalabel_Series_"+this.index),this.accumulation.redraw);this.accumulation.redraw=!1;this.accumulation.duration=s}else this.dataSource=n},u.prototype.addPoint=function(n,i){var e,f,u,s;for(this.accumulation.series[0].dataLabel.visible&&(e=this.findMaxLabelWidth()),this.dataSource.push(n),this.resultData=this.dataSource,this.sumOfPoints=0,f=[],u=0;u<this.resultData.length;u++)(this.points[u]&&this.points[u].visible||u===this.resultData.length-1)&&f.push(this.resultData[u]);var h=0===this.points.length?0:this.points[this.points.length-1].index+1,o=this.palettes.length?this.palettes:ro(this.accumulation.theme),c=this.setPoints(this.dataSource,h,o,this.accumulation);this.pushPoints(c,o);this.findSumOfPoints(f);this.accumulation.redraw=!this.borderRadius&&this.accumulation.enableAnimation;s=this.accumulation.duration;this.accumulation.duration=t.isNullOrUndefined(i)?500:i;this.updateSeries(r(this.accumulation.element.id+"_Series_"+this.index),e,"addPoint");this.accumulation.redraw=!1;this.accumulation.duration=s},u.prototype.removePoint=function(n,i){var e=t.extend([],this.dataSource,null,!0),h=this.accumulation.duration,o,u,s,f;if(e.length>0&&n>=0&&n<e.length){for(this.sumOfPoints=0,o=[],u=0;u<this.dataSource.length;u++)u!==n&&this.points[u]&&this.points[u].visible&&o.push(this.dataSource[u]);for(e.splice(n,1),this.dataSource.splice(n,1),this.accumulation.redraw=!this.borderRadius&&this.accumulation.enableAnimation,this.accumulation.duration=t.isNullOrUndefined(i)?500:i,this.points.splice(n,1),u=n;u<this.points.length;u++)s=this.points[u],s.index=u,s.y=this.points[u].y;this.findSumOfPoints(o);f=r(this.accumulation.element.id+"_Series_0_Point_"+this.points.length);f&&f.parentNode.removeChild(f);this.updateSeries(r(this.accumulation.element.id+"_Series_"+this.index),void 0,"removePoint",n);this.accumulation.redraw=!1;this.accumulation.duration=h}},u.prototype.updateSeries=function(n,t,u,f){var e,l=this.accumulation[et(this.type)+"SeriesModule"].radius,a=this.accumulation[et(this.type)+"SeriesModule"].center,o,s,h,c;if(this.accumulation.legendSettings.visible){if("addPoint"===u)this.accumulation.accumulationLegendModule.legendCollections.push(new br(this.points[this.points.length-1].x.toString(),this.points[this.points.length-1].color,this.legendShape,this.points[this.points.length-1].visible,this.type,this.points[this.points.length-1].legendImageUrl,null,null,this.points[this.points.length-1].index,this.index));else for(this.accumulation.accumulationLegendModule.legendCollections.splice(f,1),o=f;o<this.accumulation.accumulationLegendModule.legendCollections.length;o++)this.accumulation.accumulationLegendModule.legendCollections[o].pointIndex=o;this.accumulation.accumulationLegendModule.legendCollections.length>=1&&(e=this.accumulation.accumulationLegendModule.legendBounds,this.accumulation.accumulationLegendModule.calculateLegendBounds(this.accumulation.initialClipRect,this.accumulation.availableSize,null,e,!0),!this.dataLabel||"Outside"!==this.dataLabel.position||"Bottom"!==this.accumulation.legendSettings.position&&"Top"!==this.accumulation.legendSettings.position?e.width!==this.accumulation.accumulationLegendModule.legendBounds.width:e.height!==this.accumulation.accumulationLegendModule.legendBounds.height)&&(s=this.accumulation.title?i.measureText(this.accumulation.title,this.accumulation.titleStyle,this.accumulation.themeStyle.chartTitleFont).height*this.accumulation.titleCollection.length:0,h=this.accumulation.subTitle?i.measureText(this.accumulation.subTitle,this.accumulation.subTitleStyle,this.accumulation.themeStyle.chartSubTitleFont).height*this.accumulation.subTitleCollection.length:0,this.accumulation.initialClipRect=new i.Rect(this.accumulation.margin.left,this.accumulation.margin.top,this.accumulation.availableSize.width,this.accumulation.availableSize.height),tc(this.accumulation.initialClipRect,new i.Rect(0,h+s,this.accumulation.margin.right+this.accumulation.margin.left,this.accumulation.margin.bottom+this.accumulation.margin.top)),this.accumulation.accumulationLegendModule.calculateLegendBounds(this.accumulation.initialClipRect,this.accumulation.availableSize,null))}(this.accumulation[et(this.type)+"SeriesModule"].initProperties(this.accumulation,this),this.renderPoints(this.accumulation,n,this.accumulation.redraw,l,a,!0),e&&("Bottom"===this.accumulation.legendSettings.position||"Top"===this.accumulation.legendSettings.position?e.height!==this.accumulation.accumulationLegendModule.legendBounds.height:e.width!==this.accumulation.accumulationLegendModule.legendBounds.width)&&this.accumulation.centerLabel.text&&this.accumulation.renderCenterLabel(!0,!0),this.accumulation.annotationModule&&this.accumulation.annotationModule.renderAnnotations(r(this.accumulation.element.id+"_Secondary_Element")),this.accumulation.accumulationDataLabelModule&&this.dataLabel.visible)&&(c=this.accumulation.renderer.createGroup({id:this.accumulation.element.id+"_datalabel_Series_"+this.index}),this.renderDataLabel(this.accumulation,c,this.accumulation.redraw));this.accumulation.legendSettings.visible&&("Pie"===this.type&&(this.dataLabel.visible&&this.points[this.points.length-1]&&this.points[this.points.length-1].textSize.width>t&&"Top"!==this.accumulation.legendSettings.position&&"Bottom"!==this.accumulation.legendSettings.position&&(this.accumulation.visibleSeries[0].findMaxBounds(this.accumulation.visibleSeries[0].labelBound,this.points[this.points.length-1].labelRegion),this.findMaxBounds(this.labelBound,this.accumulationBound),this.labelBound.x-=this.accumulation.explodeDistance,this.labelBound.y-=this.accumulation.explodeDistance,this.labelBound.height+=this.accumulation.explodeDistance-this.labelBound.y,this.labelBound.width+=this.accumulation.explodeDistance-this.labelBound.x),this.accumulation.accumulationLegendModule.getSmartLegendLocation(this.accumulation.visibleSeries[0].labelBound,this.accumulation.accumulationLegendModule.legendBounds,this.accumulation.margin)),this.accumulation.accumulationLegendModule.renderLegend(this.accumulation,this.accumulation.legendSettings,this.accumulation.accumulationLegendModule.legendBounds,this.accumulation.redraw,!0))},u.prototype.isEmpty=function(n){return n.color===this.emptyPointSettings.fill},y([t.Property("")],u.prototype,"dataSource",void 0),y([t.Property()],u.prototype,"query",void 0),y([t.Property("")],u.prototype,"xName",void 0),y([t.Property("")],u.prototype,"name",void 0),y([t.Property("")],u.prototype,"tooltipMappingName",void 0),y([t.Property("")],u.prototype,"yName",void 0),y([t.Property(!0)],u.prototype,"visible",void 0),y([t.Complex({color:null,width:0},yt)],u.prototype,"border",void 0),y([t.Complex(null,au)],u.prototype,"animation",void 0),y([t.Property("SeriesType")],u.prototype,"legendShape",void 0),y([t.Property("")],u.prototype,"legendImageUrl",void 0),y([t.Property("")],u.prototype,"pointColorMapping",void 0),y([t.Property(!1)],u.prototype,"applyPattern",void 0),y([t.Property(null)],u.prototype,"selectionStyle",void 0),y([t.Property(null)],u.prototype,"groupTo",void 0),y([t.Property("Value")],u.prototype,"groupMode",void 0),y([t.Complex({},ck)],u.prototype,"dataLabel",void 0),y([t.Property([])],u.prototype,"palettes",void 0),y([t.Property(0)],u.prototype,"startAngle",void 0),y([t.Property(null)],u.prototype,"endAngle",void 0),y([t.Property(null)],u.prototype,"radius",void 0),y([t.Property("0")],u.prototype,"innerRadius",void 0),y([t.Property("Pie")],u.prototype,"type",void 0),y([t.Property(!0)],u.prototype,"enableTooltip",void 0),y([t.Property(!1)],u.prototype,"explode",void 0),y([t.Property("30%")],u.prototype,"explodeOffset",void 0),y([t.Property(!1)],u.prototype,"explodeAll",void 0),y([t.Property(null)],u.prototype,"explodeIndex",void 0),y([t.Complex({mode:"Drop"},pl)],u.prototype,"emptyPointSettings",void 0),y([t.Property(0)],u.prototype,"gapRatio",void 0),y([t.Property("80%")],u.prototype,"width",void 0),y([t.Property("80%")],u.prototype,"height",void 0),y([t.Property("20%")],u.prototype,"neckWidth",void 0),y([t.Property("20%")],u.prototype,"neckHeight",void 0),y([t.Property("Linear")],u.prototype,"pyramidMode",void 0),y([t.Property("Standard")],u.prototype,"funnelMode",void 0),y([t.Property(1)],u.prototype,"opacity",void 0),y([t.Property("0")],u.prototype,"dashArray",void 0),y([t.Complex({},lu)],u.prototype,"accessibility",void 0),y([t.Property(0)],u.prototype,"borderRadius",void 0),u}(t.ChildProperty);var bc=function(){function n(n){this.accumulation=n}return Object.defineProperty(n.prototype,"center",{get:function(){return this.pieCenter||("Pie"===this.accumulation.visibleSeries[0].type?this.accumulation.pieSeriesModule.pieBaseCenter:null)},set:function(n){this.pieCenter=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"radius",{get:function(){return void 0!==this.pieRadius?this.pieRadius:this.accumulation.pieSeriesModule.pieBaseRadius},set:function(n){this.pieRadius=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labelRadius",{get:function(){return void 0!==this.pieLabelRadius?this.pieLabelRadius:this.accumulation.pieSeriesModule.pieBaseLabelRadius},set:function(n){this.pieLabelRadius=n},enumerable:!0,configurable:!0}),n.prototype.isCircular=function(){return"Pie"===this.accumulation.type},n.prototype.isVariousRadius=function(){return this.accumulation.pieSeriesModule.isRadiusMapped},n.prototype.processExplode=function(n){if(n.target.id.indexOf("_Series_")>-1||n.target.id.indexOf("_datalabel_")>-1){var t=uu(n.target.id).point;if(isNaN(t)||n.target.id.indexOf("_datalabel_")>-1&&"Outside"===this.accumulation.visibleSeries[0].points[t].labelPosition)return null;this.explodePoints(t,this.accumulation);this.deExplodeAll(t,this.accumulation.enableAnimation?300:0)}},n.prototype.invokeExplode=function(){for(var n,t,r,u,o=this.accumulation.visibleSeries[0],f=this.accumulation.enableAnimation?300:0,i=0,e=o.points;i<e.length;i++)n=e[i],n.isExplode&&0!==n.y&&this.pointExplode(n.index,n,f);if(this.accumulation.accumulationSelectionModule&&"None"!==this.accumulation.selectionMode&&this.accumulation.accumulationSelectionModule.selectedDataIndexes.length)for(t=0,r=this.accumulation.accumulationSelectionModule.selectedDataIndexes;t<r.length;t++)u=r[t],this.explodePoints(u.point,this.accumulation,!0),this.deExplodeAll(u.point,f)},n.prototype.deExplodeAll=function(n,t){for(var i,f=this.accumulation.element.id+"_Series_0_Point_",r=0,u=this.accumulation.visibleSeries[0].points;r<u.length;r++)i=u[r],(n!==i.index&&!i.isSliced||i.isClubbed)&&(i.isExplode=!1,this.deExplodeSlice(i.index,f,t))},n.prototype.explodePoints=function(n,i,r,u){var s;void 0===r&&(r=!1);var f=i.visibleSeries[0],o=f.points,e=ny(n,o),h=!0,c=this.accumulation.enableAnimation?300:0;if(t.isNullOrUndefined(e))return null;s=!r&&(e.isSliced||f.clubbedPoints.length&&o[o.length-1].index===f.clubbedPoints[f.clubbedPoints.length-1].index);"Pie"===f.type&&(s||e.isClubbed)&&(h=this.clubPointExplode(n,e,f,o,i,c,s));h&&0!==e.y&&this.pointExplode(n,e,c,r,u)},n.prototype.getSum=function(n){var t=0;return n.map(function(n){t+=n.visible?n.y:0}),t},n.prototype.clubPointExplode=function(n,t,i,r,u,f,e){if(void 0===e&&(e=!1),t.isClubbed)return u.animateSeries=!1,r.splice(r.length-1,1),i.clubbedPoints.map(function(n){n.visible=!0;n.isExplode=!0}),u.visibleSeries[0].points=r.concat(i.clubbedPoints),this.deExplodeAll(n,f),i.sumOfPoints=this.getSum(u.visibleSeries[0].points),u.refreshChart(),!1;if(e||t.isSliced){u.animateSeries=!1;r.splice(r.length-i.clubbedPoints.length,i.clubbedPoints.length);var o=i.generateClubPoint();if(o.index=r.length,o.color=i.clubbedPoints[0].color,r.push(o),i.sumOfPoints=this.getSum(r),this.deExplodeAll(n,f),o.isExplode=!1,u.visibleSeries[0].points=r,u.refreshChart(),this.pointExplode(o.index,r[o.index],0,!0),o.isExplode=!1,this.deExplodeSlice(o.index,u.element.id+"_Series_0_Point_",f),t.isSliced)return!1}return!0},n.prototype.pointExplode=function(n,t,i,r,u){var o,f=this.accumulation.element.id+"_Series_0_Point_",e=this.accumulation;o=this.isCircular()?yi(t.midAngle,e.explodeDistance,this.center):{x:t.labelRegion&&t.labelRegion.x<t.region.x?-e.explodeDistance:e.explodeDistance,y:0};this.isExplode(f+n)||r?(t.isExplode=!0,this.explodeSlice(n,o,f,this.center||{x:0,y:0},i,u)):(t.isExplode=!1,this.deExplodeSlice(n,f,i))},n.prototype.isExplode=function(n){var t=r(n),i=t?t.getAttribute("transform"):null;return t&&("translate(0, 0)"===i||null===i||"translate(0)"===i)},n.prototype.deExplodeSlice=function(n,t,i){var f=r(t+n),u=f?f.getAttribute("transform"):null,e;this.accumulation.enableAnimation&&f&&u&&"translate(0, 0)"!==u&&"translate(0)"!==u?(e=u.split("(")[1].split(")")[0].split(","),this.performAnimation(n,t,0,0,+e[0],+e[1]||0,i,!0)):this.performAnimation(n,t,0,0,0,0,i,!0)},n.prototype.setTranslate=function(n,t,i,r){this.setElementTransform(t+n,i);this.setElementTransform(t+n+"_polygon",i);this.accumulation.visibleSeries[0].dataLabel.visible&&(t=this.accumulation.element.id+"_datalabel_Series_0_",this.setElementTransform(t+"shape_"+n,i),this.setElementTransform(t+"text_"+n,i+r),this.setElementTransform(t+"connector_"+n,i))},n.prototype.setElementTransform=function(n,t){var i=r(n);i&&i.setAttribute("transform",t)},n.prototype.explodeSlice=function(n,t,i,u,f,e){e&&r(this.accumulation.element.id+"_Series_0_Point_"+n).getAttribute("transform")?this.setElementTransform(i+n,"translate("+(t.x-u.x)+", "+(t.y-u.y)+")"):this.performAnimation(n,i,0,0,t.x-u.x,t.y-u.y,f)},n.prototype.performAnimation=function(n,i,r,u,f,e,o,s){var h,c,a=this,p=this.accumulation,w=i.split("_"),v=parseInt(i.split("_")[w.length-3],10),l=p.visibleSeries[v].points[n],y;if(o<=0)return this.setTranslate(n,i,"translate("+f+", "+e+")",l.transform),null;y="Pie"===this.accumulation.series[v].type&&this.accumulation.animateSeries&&this.accumulation.series[0].animation.enable?this.accumulation.series[0].animation.duration:0;new t.Animation({}).animate(t.createElement("div"),{duration:o,delay:y,progress:function(t){h=ti(t.timeStamp,r,f,t.duration);c=ti(t.timeStamp,u,e,t.duration);a.setTranslate(n,i,"translate("+(s?f-h:h)+", "+(s?e-c:c)+")",l.transform)},end:function(){a.setTranslate(n,i,"translate("+(s?r:f)+", "+(s?r:e)+")",l.transform)}})},n}(),bht=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kht=function(n){function u(){return null!==n&&n.apply(this,arguments)||this}return bht(u,n),u.prototype.initProperties=function(n,t){var u,r,i,f,e;if(this.accumulation=n,this.size=Math.min(n.initialClipRect.width,n.initialClipRect.height),this.initAngles(t),u=parseInt(t.radius,10),-1===t.radius.indexOf("%")&&"number"!=typeof u||isNaN(u)){for(r=[],this.isRadiusMapped=!0,i=0;i<Object.keys(t.points).length;i++)r[i]=-1!==t.points[i].sliceRadius.indexOf("%")?it(t.points[i].sliceRadius,this.size/2):parseInt(t.points[i].sliceRadius,10);f=Math.min.apply(null,r);e=Math.max.apply(null,r);this.pieBaseRadius=this.seriesRadius=e;this.innerRadius=it(t.innerRadius,this.seriesRadius);this.innerRadius=this.innerRadius>f?this.innerRadius/2:this.innerRadius}else this.isRadiusMapped=!1,this.pieBaseRadius=it(t.radius,t.border.width>20?.4*this.size:this.size/2),this.innerRadius=it(t.innerRadius,this.pieBaseRadius),this.pieBaseLabelRadius="Inside"===t.dataLabel.position?(this.pieBaseRadius-this.innerRadius)/2+this.innerRadius:this.pieBaseRadius+it(t.dataLabel.connectorStyle.length||"4%",this.size/2);this.radius=this.pieBaseRadius;this.labelRadius=this.pieBaseLabelRadius;n.explodeDistance=t.explode?it(t.explodeOffset,this.pieBaseRadius):0;this.findCenter(n,t);this.center=this.pieBaseCenter;n.redraw||this.defaultLabelBound(t,t.dataLabel.visible,t.dataLabel.position);this.totalAngle-=.001},u.prototype.getLabelRadius=function(n,t){return"Inside"===n.dataLabel.position?(it(t.sliceRadius,this.pieBaseRadius)-this.innerRadius)/2+this.innerRadius:it(t.sliceRadius,this.size/2)+it(n.dataLabel.connectorStyle.length||"4%",this.size/2)},u.prototype.findCenter=function(n,t){this.accumulation=n;this.pieBaseCenter={x:it(n.center.x,n.initialClipRect.width)+n.initialClipRect.x,y:it(n.center.y,n.initialClipRect.height)+n.initialClipRect.y};var i=this.getSeriesBound(t),r=new h(i.x+i.width/2,i.y+i.height/2);this.pieBaseCenter.x+=this.pieBaseCenter.x-r.x;this.pieBaseCenter.y+=this.pieBaseCenter.y-r.y;this.accumulation.origin=this.pieBaseCenter},u.prototype.initAngles=function(n){var i=t.isNullOrUndefined(n.endAngle)?n.startAngle:n.endAngle;this.totalAngle=(i-n.startAngle)%360;this.startAngle=n.startAngle-90;this.totalAngle=this.totalAngle<=0?360+this.totalAngle:this.totalAngle;this.startAngle=(this.startAngle<0?this.startAngle+360:this.startAngle)%360},u.prototype.defaultLabelBound=function(n,t,r){var u=this.getSeriesBound(n);n.accumulationBound=u;n.labelBound=new i.Rect(u.x,u.y,u.width+u.x,u.height+u.y);t&&"Outside"===r&&(n.labelBound=new i.Rect(1/0,1/0,-1/0,-1/0))},u.prototype.getSeriesBound=function(n){var t=new i.Rect(1/0,1/0,-1/0,-1/0),f,r,h,s;this.initAngles(n);var e=this.startAngle,o=this.totalAngle,u=(this.startAngle+o)%360;for(u=0===u?360:u,n.findMaxBounds(t,this.getRectFromAngle(e)),n.findMaxBounds(t,this.getRectFromAngle(u)),n.findMaxBounds(t,new i.Rect(this.pieBaseCenter.x,this.pieBaseCenter.y,0,0)),f=(90*Math.floor(e/90)+90)%360,r=90*Math.floor(u/90)%360,r=0===r?360:r,(o>=90||r===f)&&(n.findMaxBounds(t,this.getRectFromAngle(f)),n.findMaxBounds(t,this.getRectFromAngle(r))),(0===e||e+o>=360)&&n.findMaxBounds(t,this.getRectFromAngle(0)),h=f===r?0:Math.floor(o/90),s=1;s<h;s++)((f+=90)<r||u<e||360===o)&&n.findMaxBounds(t,this.getRectFromAngle(f));return t.width-=t.x,t.height-=t.y,t},u.prototype.getRectFromAngle=function(n){var t=yi(n,this.pieBaseRadius,this.pieBaseCenter);return new i.Rect(t.x,t.y,0,0)},u.prototype.getPathArc=function(n,t,i,r,u,f,e,o){var s=i-t,h=(s=s<0?s+360:s)<180?0:1;return u||0!==u?this.getDoughnutPath(n,yi(t,r,n),yi(i,r,n),r,yi(t,u,n),yi(i,u,n),u,h,f,e,o):this.getPiePath(n,yi(t,r,n),yi(i,r,n),r,h,f,o)},u.prototype.getPiePath=function(n,t,i,r,u,f,e){var o,s;f=1===this.sliceCheck(e)?0:f;o=Math.atan2(t.y-n.y,t.x-n.x);s=Math.atan2(i.y-n.y,i.x-n.x);f=this.adjustCornerRadius(o,s,r,f);var h=t.x-f*Math.cos(o),c=t.y-f*Math.sin(o),l=i.x-f*Math.cos(Math.PI/2+s),a=i.y-f*Math.sin(Math.PI/2+s),v=i.x-f*Math.cos(s),y=i.y-f*Math.sin(s),p=t.x+f*Math.cos(Math.PI/2+o),w=t.y+f*Math.sin(Math.PI/2+o);return"M "+n.x+" "+n.y+" L "+h+" "+c+" A "+f+" "+f+" 0 0 1 "+p+" "+w+" A "+r+" "+r+" 0 "+u+" 1 "+l+" "+a+" A "+f+" "+f+" 0 0 1 "+v+" "+y+" Z"},u.prototype.getDoughnutPath=function(n,t,i,r,u,f,e,o,s,h,c){var l,a;s=1===this.sliceCheck(c)?0:s;l=Math.atan2(t.y-u.y,t.x-u.x);a=Math.atan2(i.y-f.y,i.x-f.x);s=this.adjustCornerRadius(l,a,e,s);s=h&&0===this.innerRadius?-1*s:s;var nt=t.x-s*Math.cos(l),tt=t.y-s*Math.sin(l),v=i.x-s*Math.cos(Math.PI/2+a),y=i.y-s*Math.sin(Math.PI/2+a),it=f.x+s*Math.cos(a),rt=f.y+s*Math.sin(a),p=u.x+s*Math.cos(Math.PI/2+l),w=u.y+s*Math.sin(Math.PI/2+l),b=t.x+s*Math.cos(Math.PI/2+l),k=t.y+s*Math.sin(Math.PI/2+l),ut=i.x-s*Math.cos(a),ft=i.y-s*Math.sin(a),d=f.x-s*Math.cos(Math.PI/2+a),g=f.y-s*Math.sin(Math.PI/2+a),et=u.x+s*Math.cos(l),ot=u.y+s*Math.sin(l);return h?"M "+b+" "+k+" A "+r+" "+r+" 0 "+o+" 1 "+v+" "+y+" L "+d+" "+g+" A "+e+" "+e+" 0 "+o+" 0 "+p+" "+w+" Z":"M "+nt+" "+tt+" A "+s+" "+s+" 0 0 1 "+b+" "+k+" A "+r+" "+r+" 0 "+o+" 1 "+v+" "+y+" A "+s+" "+s+" 0 0 1 "+ut+" "+ft+" L "+it+" "+rt+" A "+s+" "+s+" 0 0 1 "+d+" "+g+" A "+e+" "+e+" 0 "+o+" 0 "+p+" "+w+" A "+s+" "+s+" 0 0 1 "+et+" "+ot+" Z"},u.prototype.adjustCornerRadius=function(n,t,i,r){var u=Math.abs(t-n),f;return u>Math.PI&&(u=2*Math.PI-u),f=i*(u/(2*Math.PI)),Math.min(r,f)},u.prototype.sliceCheck=function(n){for(var i=0,t=0;t<n.length;t++)n[t].visible&&i++;return i},u.prototype.doAnimation=function(n,i,u,f,e){var h,o=this,c=i.startAngle-90,l=this.accumulation.duration?this.accumulation.duration:i.animation.duration,s,a;this.pieBaseCenter.x+=1;s=.75*Math.max(this.accumulation.availableSize.height,this.accumulation.availableSize.width);s+=.414*s;a=fe("Linear");new t.Animation({}).animate(n,{duration:0===l&&"Enable"===t.animationMode?1e3:l,delay:i.animation.delay,progress:function(t){h=a(t.timeStamp,c,o.totalAngle,t.duration);n.setAttribute("d",o.getPathArc(o.pieBaseCenter,c,h,s,0,f,!1,e))},end:function(){var t,h;o.pieBaseCenter.x-=1;n.setAttribute("d",o.getPathArc(o.pieBaseCenter,0,359.99999,s,0,f,!1,e));o.accumulation.trigger(gl,o.accumulation.isBlazor?{}:{series:i,accumulation:o.accumulation,chart:o.accumulation});t=r(o.accumulation.element.id+"_datalabel_Series_"+i.index);t&&pu(t,i.animation.delay,i.animation.duration,i,null,0,!1);u.style.cssText="";h=r(o.accumulation.element.id+"_Annotation_Collections");h&&(h.style.visibility="visible")}})},u}(bc),dht=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ty=function(n){function u(){return null!==n&&n.apply(this,arguments)||this}return dht(u,n),u.prototype.renderPoint=function(n,t,i,r,u,f,e,o,s){var a=t.sumOfPoints,v=this.accumulation.visibleSeries[0].points,y=t.borderRadius;n.startAngle=this.startAngle;var h,p=n.visible?n.y:0,c=a?Math.abs(p)/a*this.totalAngle:null,l=Math.PI/180*(this.startAngle-360);(this.radius=this.isRadiusMapped?it(n.sliceRadius,this.seriesRadius):this.radius,r.d=this.getPathOption(n,c,this.startAngle%360,y,v),n.midAngle=(this.startAngle-c/2)%360,n.endAngle=this.startAngle%360,n.symbolLocation=yi(n.midAngle,(this.radius+this.innerRadius)/2,this.center),f)?(h=i.renderer.drawPath(r),!n.isExplode&&s&&h.setAttribute("transform","translate(0, 0)"),h.setAttribute("role",t.accessibility.accessibilityRole?t.accessibility.accessibilityRole:"img"),h.setAttribute("tabindex",0===n.index&&t.accessibility.focusable?String(t.accessibility.tabIndex):"-1"),h.style.outline="none",h.setAttribute("stroke-linejoin","round"),h.setAttribute("aria-label",t.accessibility.accessibilityDescription?t.accessibility.accessibilityDescription:n.x+": "+n.y+"%. "+t.name),void 0===n.degree&&(n.degree=c,n.start=l),u.appendChild(h),this.refresh(n,c,l,i,r,y,v,e,o,s)):((h=i.renderer.drawPath(r)).setAttribute("role",t.accessibility.accessibilityRole?t.accessibility.accessibilityRole:"img"),h.setAttribute("tabindex",0===n.index&&t.accessibility.focusable?String(t.accessibility.tabIndex):"-1"),h.style.outline="none",h.setAttribute("stroke-linejoin","round"),h.setAttribute("aria-label",t.accessibility.accessibilityDescription?t.accessibility.accessibilityDescription:n.x+": "+n.y+"%. "+t.name),u.appendChild(h),n.degree=c,n.start=l)},u.prototype.findSeries=function(n,t){var i=0===this.innerRadius?this.radius+3:this.innerRadius-3,r=0===this.innerRadius?i+2:i-2;this.toggleInnerPoint(n,i,r,t)},u.prototype.toggleInnerPoint=function(n,u,f,e){var h,v=uu(n.target.id,!0),c=n.target.id.substring(0,n.target.id.indexOf("Series")-1),o=document.getElementById(this.accumulation.element.id+"PointHover_Border"),d=this.accumulation.visibleSeries[0].points,l=v.series,a=v.point,y=r(c+"_Series_"+l+"_Point_"+a),b,k,p;if(!isNaN(v.series)&&y){if(!(t.isNullOrUndefined(l)||isNaN(l)||t.isNullOrUndefined(a)||isNaN(a))){var s=this.accumulation.visibleSeries[0].points[a],g=y.getAttribute("class")===c+"_ej2_deselected"?this.accumulation.tooltip.enable?.5:.3:this.accumulation.tooltip.enable?.5:1,w=this.getPathArc(this.accumulation.pieSeriesModule.center,s.startAngle%360,(s.startAngle+s.degree)%360,u,f,e,!0,d);o&&c===this.accumulation.element.id&&(o.getAttribute("d")!==w||s.isExplode)&&(o.parentNode.removeChild(o),o=null);b=r(c+"_Series_"+l);o||s.isExplode&&(!s.isExplode||"click"===n.type)||(k=new i.PathOption(c+"PointHover_Border",s.color,1,s.color,g,"",w),((h=this.accumulation.renderer.drawPath(k)).removeAttribute("transform"),"None"!==this.accumulation.selectionMode&&n.target.hasAttribute("class")&&this.accumulation.accumulationSelectionModule.addSvgClass(h,n.target.getAttribute("class")),b.appendChild(h),s.isExplode&&h)&&(p=y.getAttribute("transform"),p&&h.setAttribute("transform",p)))}}else o&&(this.removeBorder(o,1e3),o=null)},u.prototype.removeBorder=function(n,t){n&&setTimeout(function(){n.parentNode&&n.parentNode.removeChild(n)},t)},u.prototype.refresh=function(n,i,u,f,e,o,s,h,c,l){var a=this,v=r(e.id),y=f.duration?f.duration:300;new t.Animation({}).animate(t.createElement("div"),{duration:y,delay:0,progress:function(t){var e=ti(t.timeStamp,n.degree,i-n.degree,t.duration),r=ti(t.timeStamp,n.start,u-n.start,t.duration);if(r=(r/(Math.PI/180)+360)%360,h&&c){var y=ti(t.timeStamp,h,a.radius-h,t.duration),p=ti(t.timeStamp,c.x,a.center.x-c.x,t.duration),w=ti(t.timeStamp,c.y,a.center.y-c.y,t.duration);v.setAttribute("d",a.getPathOption(n,e,r,o,s,y,p,w))}else v.setAttribute("d",a.getPathOption(n,e,r,o,s));n.isExplode&&f.accBaseModule.explodePoints(n.index,f,!0,l);v.style.visibility="visible"},end:function(){v.style.visibility=n.visible?"visible":"hidden";v.setAttribute("d",e.d);n.degree=i;n.start=u}})},u.prototype.getPathOption=function(n,t,i,r,u,f,e,o){if(!t)return"";var s=this.getPathArc(e?{x:e,y:o}:this.center,i%360,(i+t)%360,this.isRadiusMapped?it(n.sliceRadius,this.size/2):f||this.radius,this.innerRadius,r,!1,u);return this.startAngle+=t,s},u.prototype.animateSeries=function(n,r,u,f,e,o){var h=n.element.id+"SeriesGroup"+u.index;if((u.animation.enable&&"Disable"!==t.animationMode||"Enable"===t.animationMode)&&n.animateSeries){var s=n.renderer.createClipPath({id:h+"_clipPath"}),l=new i.PathOption(h+"_slice","transparent",1,"transparent",1,"",""),c=n.renderer.drawPath(l);s.appendChild(c);n.svgObject.appendChild(s);f.style.cssText="clip-path:url(#"+s.id+"); -webkit-clip-path:url(#"+s.id+");";this.doAnimation(c,u,f,e,o)}},u.prototype.getModuleName=function(){return"PieSeries"},u.prototype.destroy=function(){},u}(kht),ght=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),w=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},nct=function(n){function u(t,i){var r=n.call(this,t,i)||this;return r.animateselected=!1,r.explodeDistance=0,r.currentLegendIndex=0,r.currentPointIndex=0,r.previousTargetId="",r.isLegendClicked=!1,r.chartid=57724,r}return ght(u,n),u.prototype.animate=function(n){var u;this.duration=0===n&&"Enable"===t.animationMode?700:n;this.animateselected=!0;this.animateSeries=!1;var e=0,o=[],f=[],s=[],r=this.visibleSeries[0],h=[];if(h=r.dataSource,r.sumOfPoints=0,r.points.length<Object.keys(r.dataSource).length)this.refresh();else if(r.points.length>Object.keys(r.dataSource).length){u=this.visibleSeries[0];u.points=u.points.filter(function(n){return n.visible=!1,f.push(n.index),o.push(n.color),h.some(function(t){var i=t;return n.x===i.x&&(n.visible=!0,s.push(n.index),n.index=e,e++),n.x===i.x})});for(var c=f.filter(function(n){return s.indexOf(n)<0}),l=f.length-c.length,i=f.length-1;i>=l;i--)v("container_Series_0_Point_"+f[i]);for(i=0;i<u.points.length;i++)u.points[i].y=u.dataSource[i].y,u.points[i].color=o[i],u.sumOfPoints+=u.dataSource[i].y;this.redraw=this.enableAnimation;this.animateSeries=!1;this.calculateBounds();this.renderElements()}else{for(i=0;i<r.points.length;i++)r.points[i].y=r.dataSource[i][r.yName],r.points[i].color=null!=r.dataSource[i][r.pointColorMapping]?r.dataSource[i][r.pointColorMapping]:r.points[i].color,r.sumOfPoints+=r.dataSource[i][r.yName];this.redraw=this.enableAnimation;this.animateSeries=!1;this.removeSvg();this.refreshPoints(r.points);this.renderElements()}},Object.defineProperty(u.prototype,"type",{get:function(){return this.series&&this.series.length?this.series[0].type:"Pie"},enumerable:!0,configurable:!0}),u.prototype.preRender=function(){if(this.isBlazor=window.Blazor,this.allowServerDataBinding=!1,this.unWireEvents(),this.setCulture(),this.animateSeries=!0,""===this.element.id){for(var n=document.getElementsByClassName("e-accumulationchart").length,t="acc_chart_"+this.chartid+"_"+n;document.getElementById(t);)n++,t="acc_chart_"+this.chartid+"_"+n;this.element.id="acc_chart_"+this.chartid+"_"+n}this.wireEvents();this.element.setAttribute("dir",this.enableRtl?"rtl":"ltr");this.element.style.outline="none"},u.prototype.setTheme=function(){this.themeStyle=lc(this.theme,!1,this)},u.prototype.render=function(){var n=this,t;-1===this.element.className.indexOf("e-accumulationchart")&&this.element.classList.add("e-accumulationchart");this.element.setAttribute("role",this.accessibility.accessibilityRole?this.accessibility.accessibilityRole:"region");this.element.setAttribute("tabindex",this.accessibility.focusable?String(this.accessibility.tabIndex):"-1");this.element.setAttribute("aria-label",this.accessibility.accessibilityDescription?this.accessibility.accessibilityDescription:this.title+". Syncfusion interactive chart.");this.element.setAttribute("class",this.element.getAttribute("class")+" e-accumulationchart-focused");t={chart:this.isBlazor?{}:this,accumulation:this.isBlazor?{}:this,theme:this.theme,name:ne,cancel:!1};this.trigger(ne,t,function(){n.theme=n.isBlazor?t.theme:n.theme;n.setTheme();n.accBaseModule=new bc(n);n.pieSeriesModule=new ty(n);n.calculateVisibleSeries();n.processData();n.renderComplete();n.allowServerDataBinding=!0})},u.prototype.unWireEvents=function(){var n=t.Browser.isPointer,i=t.Browser.touchStartEvent,r=t.Browser.touchMoveEvent,u=t.Browser.touchEndEvent,f=n?"pointerleave":"mouseleave";t.EventHandler.remove(this.element,r,this.accumulationMouseMove);t.EventHandler.remove(this.element,u,this.accumulationMouseEnd);t.EventHandler.remove(this.element,i,this.accumulationMouseStart);t.EventHandler.remove(this.element,"click",this.accumulationOnMouseClick);t.EventHandler.remove(this.element,"dblclick",this.accumulationOnDoubleClick);t.EventHandler.remove(this.element,"contextmenu",this.accumulationRightClick);t.EventHandler.remove(this.element,f,this.accumulationMouseLeave);t.EventHandler.remove(this.element,"keydown",this.accumulationChartKeyDown);t.EventHandler.remove(document.body,"keydown",this.documentKeyHandler);t.EventHandler.remove(this.element,"keyup",this.accumulationChartKeyUp);window.removeEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.accumulationResizeBound)},u.prototype.wireEvents=function(){if(this.element){var n=t.Browser.isPointer,i=t.Browser.touchStartEvent,r=t.Browser.touchEndEvent,u=t.Browser.touchMoveEvent,f=n?"pointerleave":"mouseleave";t.EventHandler.add(this.element,u,this.accumulationMouseMove,this);t.EventHandler.add(this.element,r,this.accumulationMouseEnd,this);t.EventHandler.add(this.element,i,this.accumulationMouseStart,this);t.EventHandler.add(this.element,"click",this.accumulationOnMouseClick,this);t.EventHandler.add(this.element,"dblclick",this.accumulationOnDoubleClick,this);t.EventHandler.add(this.element,"contextmenu",this.accumulationRightClick,this);t.EventHandler.add(this.element,f,this.accumulationMouseLeave,this);t.EventHandler.add(this.element,"keydown",this.accumulationChartKeyDown,this);t.EventHandler.add(document.body,"keydown",this.documentKeyHandler,this);t.EventHandler.add(this.element,"keyup",this.accumulationChartKeyUp,this);this.accumulationResizeBound=this.accumulationResize.bind(this);window.addEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.accumulationResizeBound);new t.Touch(this.element);this.setStyle(this.element)}},u.prototype.setMouseXY=function(n){var i,u,o=r(this.element.id+"_svg"),f,t,e;o&&this.element&&(f=o.getBoundingClientRect(),t=this.element.getBoundingClientRect(),n.type.indexOf("touch")>-1?(this.isTouch=!0,e=n,u=e.changedTouches[0].clientY,i=e.changedTouches[0].clientX):(this.isTouch="touch"===n.pointerType||"2"===n.pointerType,i=n.clientX,u=n.clientY),this.mouseY=u-t.top-Math.max(f.top-t.top,0),this.mouseX=i-t.left-Math.max(f.left-t.left,0))},u.prototype.accumulationMouseEnd=function(n){return this.setMouseXY(n),this.trigger(oa,{target:n.target.id,x:this.mouseX,y:this.mouseY}),this.isTouch&&(this.titleTooltip(n,this.mouseX,this.mouseY,this.isTouch),this.accumulationDataLabelModule&&this.visibleSeries[0].dataLabel.visible&&this.accumulationDataLabelModule.move(n,this.mouseX,this.mouseY,this.isTouch),this.accumulationLegendModule&&this.legendSettings.visible&&this.accumulationLegendModule.move(n)),this.centerLabel.hoverTextFormat&&this.updateCenterLabel(n),this.notify(t.Browser.touchEndEvent,n),!1},u.prototype.accumulationMouseStart=function(n){return this.setMouseXY(n),this.trigger(ea,{target:n.target.id,x:this.mouseX,y:this.mouseY}),!1},u.prototype.accumulationResize=function(){var n=this,t,r;return this.animateSeries=!1,t={accumulation:this.isBlazor?{}:this,previousSize:new i.Size(this.availableSize.width,this.availableSize.height),name:af,currentSize:new i.Size(0,0),chart:this.isBlazor?{}:this},r={name:"beforeResize",cancelResizedEvent:!1},this.resizeTo&&clearTimeout(this.resizeTo),this.trigger(ao,r),r.cancelResizedEvent||(this.resizeTo=+setTimeout(function(){n.isDestroyed?clearTimeout(n.resizeTo):(ns(n),t.currentSize=n.availableSize,n.trigger(af,t),n.refreshSeries(),n.refreshChart())},500)),!1},u.prototype.print=function(n){var t=document.getElementById(this.element.id+"_Series_0").style.clipPath;document.getElementById(this.element.id+"_Series_0").style.clipPath="";new es(this).print(n);document.getElementById(this.element.id+"_Series_0").style.clipPath=t},u.prototype.export=function(n,t){this.exportModule&&(this.exportModule.export(n,t),this.afterExport&&this.exportModule.getDataUrl(this))},u.prototype.setStyle=function(n){n.style.touchAction="element";n.style.msTouchAction="element";n.style.msContentZooming="none";n.style.msUserSelect="none";n.style.webkitUserSelect="none";n.style.position="relative";n.style.display="block";n.style.height=n.style.height||this.height&&-1===this.height.indexOf("%")?n.style.height:"inherit";this.theme},u.prototype.setAnnotationValue=function(n,t){var i,u=this.annotations[n],f=r(this.element.id+"_Annotation_Collections");t&&(u.content=t,f?(i=this.createElement("div"),v(this.element.id+"_Annotation_"+n),this.annotationModule.processAnnotation(u,n,i),f.appendChild(i.children[0])):this.annotationModule.renderAnnotations(r(this.element.id+"_Secondary_Element")))},u.prototype.accumulationMouseMove=function(n){return!!r(this.element.id+"_svg")&&(this.setMouseXY(n),this.trigger(ia,{target:n.target.id,x:this.mouseX,y:this.mouseY}),this.pointMove&&this.triggerPointEvent(ws,n.target,n),this.accumulationLegendModule&&this.legendSettings.visible&&this.accumulationLegendModule.move(n),this.accumulationDataLabelModule&&this.visibleSeries[0]&&this.visibleSeries[0].dataLabel.visible&&this.accumulationDataLabelModule.move(n,this.mouseX,this.mouseY),this.centerLabel.hoverTextFormat&&this.updateCenterLabel(n),this.isTouch||this.titleTooltip(n,this.mouseX,this.mouseY),this.enableBorderOnMouseMove&&"Pie"===this.type&&this.pieSeriesModule&&ht(this.mouseX,this.mouseY,this.initialClipRect)&&this.pieSeriesModule.findSeries(n,this.series[0].borderRadius),this.notify(t.Browser.touchMoveEvent,n),!1)},u.prototype.titleTooltip=function(n,t,i,u){var f=n.target.id,e=f===this.element.id+"_title"||f===this.element.id+"_subTitle"||f===this.element.id+"_chart_legend_title";n.target.textContent.indexOf("...")>-1&&e?uf(f===this.element.id+"_title"?this.title:f===this.element.id+"_subTitle"?this.subTitle:this.legendSettings.title,t,i,this.element.offsetWidth,this.element.id+"_EJ2_Title_Tooltip",r(this.element.id+"_Secondary_Element"),u):v(this.element.id+"_EJ2_Title_Tooltip")},u.prototype.accumulationChartKeyDown=function(n){var t="";return this.tooltip.enable&&("Tab"===n.code&&this.previousTargetId.indexOf("Series")>-1||"Escape"===n.code)&&(t="ESC"),n.code.indexOf("Arrow")>-1&&n.preventDefault(),n.ctrlKey&&"p"===n.key&&(n.preventDefault(),t="CtrlP"),""!==t&&this.chartKeyboardNavigations(n,n.target.id,t),"Tab"===n.code&&this.removeNavigationStyle(),!1},u.prototype.accumulationChartKeyUp=function(n){var u="",t=n.target.id,i=r(this.element.id+"_chart_legend_translate_g"),h=r(this.element.id+"_chart_legend_pageup"),c,f,l,o,e,s;if(i&&(c=i.firstElementChild,f=c.getAttribute("class"),f&&-1===f.indexOf("e-accumulationchart-focused")?f+=" e-accumulationchart-focused":f||(f="e-accumulationchart-focused"),c.setAttribute("class",f)),h&&h.setAttribute("class","e-accumulationchart-focused"),this.removeNavigationStyle(),"Tab"===n.code)""!==this.previousTargetId&&(this.previousTargetId.indexOf("_Point_")>-1&&-1===t.indexOf("_Point_")?(l=document.getElementById(this.previousTargetId).parentElement,this.setTabIndex(l.children[this.currentPointIndex],l.firstElementChild),this.currentPointIndex=0):this.previousTargetId.indexOf("_chart_legend_page")>-1&&-1===t.indexOf("_chart_legend_page")&&-1===t.indexOf("_chart_legend_g_")?this.setTabIndex(n.target,h):this.previousTargetId.indexOf("_chart_legend_g_")>-1&&-1===t.indexOf("chart_legend_g_")&&i&&this.setTabIndex(i.children[this.currentLegendIndex],i.firstElementChild)),this.previousTargetId=t,t.indexOf("_chart_legend_g_")>-1&&"None"!==this.highlightMode?(t=n.target.lastElementChild.id,u="Tab"):t.indexOf("_Point_")>-1&&("None"!==this.highlightMode||this.tooltip.enable)&&(u="Tab");else if(n.code.indexOf("Arrow")>-1){if(n.preventDefault(),t.indexOf("_chart_legend_page")>-1)n.target.removeAttribute("tabindex"),this.previousTargetId=t=this.element.id+"_chart_legend_page"+("ArrowRight"===n.code?"up":"down"),this.focusTarget(r(t));else if(t.indexOf("_chart_legend_")>-1&&i)n.target.removeAttribute("tabindex"),this.currentLegendIndex+="ArrowUp"===n.code||"ArrowRight"===n.code?1:-1,this.currentLegendIndex=this.getActualIndex(this.currentLegendIndex,i.children.length),o=i.children[this.currentLegendIndex],this.focusTarget(o),this.removeNavigationStyle(),this.setNavigationStyle(o.id),this.previousTargetId=t=o.lastElementChild.id,u="None"!==this.highlightMode?"ArrowMove":"";else if(t.indexOf("_Point_")>-1){for(n.target.setAttribute("tabindex","-1"),this.currentPointIndex+="ArrowUp"===n.code||"ArrowRight"===n.code?1:-1,e=0,s=0;s<n.target.parentElement.children.length;s++)e=n.target.parentElement.children[s].id.indexOf("_Point_")>-1?e+1:e;this.currentPointIndex=this.getActualIndex(this.currentPointIndex,e);t=this.element.id+"_Series_0_Point_"+this.currentPointIndex;this.focusTarget(r(t));this.removeNavigationStyle();this.setNavigationStyle(t);u=this.tooltip.enable?"ArrowMove":""}}else("Enter"===n.code||"Space"===n.code)&&(t.indexOf("_chart_legend_")>-1||t.indexOf("_Point_")>-1)&&(t=t.indexOf("_chart_legend_g")>-1?n.target.lastElementChild.id:t,u="Enter");return""!==u&&this.chartKeyboardNavigations(n,t,u),"Tab"===n.code&&this.setNavigationStyle(t),!1},u.prototype.setTabIndex=function(n,t){n&&n.removeAttribute("tabindex");t&&t.setAttribute("tabindex","0")},u.prototype.getActualIndex=function(n,t){return n>t-1?0:n<0?t-1:n},u.prototype.focusTarget=function(n){var t=n.getAttribute("class");return n.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-accumulationchart-focused")?t+=" e-accumulationchart-focused":t||(t="e-accumulationchart-focused"),n.setAttribute("tabindex","0"),n.setAttribute("class",t),n.focus(),n.id},u.prototype.documentKeyHandler=function(n){n.altKey&&74===n.keyCode&&!t.isNullOrUndefined(this.element)&&this.element.focus()},u.prototype.setNavigationStyle=function(n){var t=document.getElementById(n);t&&(t.style.setProperty("outline",this.focusBorderWidth+"px solid "+(this.focusBorderColor||this.themeStyle.tabColor)),t.style.setProperty("margin",this.focusBorderMargin+"px"))},u.prototype.removeNavigationStyle=function(){var n=document.querySelectorAll("path[id*=_Series_0_Point_], [id*="+this.element.id+"], [id*=_ChartBorder], text[id*=_title],g[id*=_chart_legend]");n&&n.forEach(function(n){(n instanceof HTMLElement||n instanceof SVGElement)&&(n.style.setProperty("outline","none"),n.style.setProperty("margin",""))})},u.prototype.chartKeyboardNavigations=function(n,i,u){var f,e,o,c;switch(this.isLegendClicked=!1,u){case"Tab":case"ArrowMove":if(this.accumulationHighlightModule,i.indexOf("_Point_")>-1){var l=+i.split("_Series_")[1].split("_Point_")[0],a=+i.split("_Series_")[1].replace("_Symbol","").split("_Point_")[1],v=this.visibleSeries[l].points[a].symbolLocation;if((this.mouseX=v.x+this.initialClipRect.x,this.mouseY=v.y+this.initialClipRect.y,this.accumulationHighlightModule)&&(f=r(i),!t.isNullOrUndefined(f)))return(f.id.indexOf("text")>1&&(f=r(f.id.replace("text","shape"))),f.hasAttribute("class")&&f.getAttribute("class").indexOf("highlight")>-1)?void 0:void this.accumulationHighlightModule.calculateSelectedElements(this,f,"mousemove");this.accumulationTooltipModule&&(e=this.visibleSeries[l],o=void 0,e.enableTooltip&&(o=new is(e.points[a],e)),this.accumulationTooltipModule.renderSeriesTooltip(this,o))}if(this.accumulationHighlightModule&&"None"!==this.highlightMode){i=i.indexOf("_chart_legend_g_")>-1?document.getElementById(i).firstChild.id:i;for(var s=this.element.id+"_chart_legend",y=[s+"_text_",s+"_shape_marker_",s+"_shape_"],h=0;h<y.length;h++)if(c=y[h],i.indexOf(c)>-1){document.getElementById(i).setAttribute("class","");this.accumulationHighlightModule.legendSelection(this,0,parseInt(i.split(c)[1],10),r(i),"mousemove");break}}break;case"Enter":case"Space":i.indexOf("_chart_legend_")>-1&&this.accumulationLegendModule?(this.isLegendClicked=!0,this.accumulationLegendModule.click(n),this.focusChild(document.getElementById(i).parentElement),this.setNavigationStyle(document.getElementById(i).parentElement.id)):(this.accumulationSelectionModule&&this.accumulationSelectionModule.calculateSelectedElements(this,document.getElementById(i),"click"),this.setNavigationStyle(i));break;case"CtrlP":this.print();break;case"ESC":this.accumulationTooltipModule&&this.accumulationTooltipModule.removeTooltip(1)}},u.prototype.focusChild=function(n){n.setAttribute("tabindex","0");var t=n.getAttribute("class");return n.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-accumulationchart-focused")?t="e-accumulationchart-focused "+t:t||(t="e-accumulationchart-focused"),n.setAttribute("class",t),n.focus(),n.id},u.prototype.accumulationOnDoubleClick=function(n){return this.trigger(ua,{target:n.target.id,x:this.mouseX,y:this.mouseY}),!1},u.prototype.accumulationOnMouseClick=function(n){return this.setMouseXY(n),this.accumulationLegendModule&&this.legendSettings.visible&&this.accumulationLegendModule.click(n),"None"!==this.selectionMode&&this.accumulationSelectionModule&&this.accumulationSelectionModule.calculateSelectedElements(this,n.target,n.type),this.visibleSeries[0].explode&&this.accBaseModule.processExplode(n),this.enableBorderOnMouseMove&&this.pieSeriesModule&&"Pie"===this.type&&this.pieSeriesModule.findSeries(n,this.series[0].borderRadius),this.trigger(ra,{target:n.target.id,x:this.mouseX,y:this.mouseY}),this.pointClick&&this.triggerPointEvent(ps,n.target,n),this.removeNavigationStyle(),!1},u.prototype.triggerPointEvent=function(n,t,i){var u=i,r=uu(t.id,!0);r.series>=0&&r.point>=0&&this.trigger(n,{series:this.isBlazor?{}:this.series[r.series],point:this.series[r.series].points[r.point],seriesIndex:r.series,pointIndex:r.point,x:this.mouseX,y:this.mouseY,pageX:u.pageX,pageY:u.pageY})},u.prototype.accumulationRightClick=function(n){return 2!==n.buttons||"touch"!==n.pointerType||(n.preventDefault(),n.stopPropagation(),!1)},u.prototype.accumulationMouseLeave=function(n){this.setMouseXY(n);this.trigger(fa,{target:n.target.id,x:this.mouseX,y:this.mouseY});this.notify(t.Browser.isPointer?"pointerleave":"mouseleave",n);var i=document.getElementById(this.element.id+"PointHover_Border");return i&&(this.pieSeriesModule.removeBorder(i,1e3),i=null),!1},u.prototype.setCulture=function(){this.intl=new t.Internationalization},u.prototype.createPieSvg=function(){this.removeSvg();ts(this)},u.prototype.removeSvg=function(){if(this.redraw)return null;if(nh(this),v(this.element.id+"_Secondary_Element"),this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&t.remove(this.svgObject)}v("EJ2_legend_tooltip");v("EJ2_datalabel_tooltip");v(this.element.id+"PointHover_Border")},u.prototype.createSecondaryElement=function(){var n=ci(this.redraw,this.element.id+"_Secondary_Element")||this.createElement("div",{id:this.element.id+"_Secondary_Element",styles:"position: relative"});o(!1,this.element,n,this.redraw)},u.prototype.calculateVisibleSeries=function(){this.visibleSeries=[];for(var n=0,t=this.series.length;n<t;n++)if(this.series[n].index=n,this.series[n].type===this.type&&0===this.visibleSeries.length){this.visibleSeries.push(this.series[n]);break}},u.prototype.processData=function(n){var i,r,t;for(void 0===n&&(n=!0),this.seriesCounts=0,i=0,r=this.visibleSeries;i<r.length;i++)t=r[i],t.dataModule=new ih(t.dataSource||this.dataSource,t.query),t.refreshDataManager(this,n)},u.prototype.refreshChart=function(){this.doGrouppingProcess();this.createPieSvg();this.calculateBounds();this.renderElements();v("chartmeasuretext")},u.prototype.doGrouppingProcess=function(){var n=this.visibleSeries[0];t.isNullOrUndefined(n.resultData)||t.isNullOrUndefined(n.lastGroupTo)||n.lastGroupTo===n.groupTo||n.getPoints(n.resultData,this)},u.prototype.calculateBounds=function(){var u,c,a;this.initialClipRect=new i.Rect(this.margin.left,this.margin.top,this.availableSize.width,this.availableSize.height);this.titleCollection=[];this.subTitleCollection=[];var r=0,s=0,h=0,l=0;if(this.title&&(this.titleCollection=tu(this.title,this.titleStyle,this.initialClipRect.width,this.enableRtl,this.themeStyle.chartTitleFont)),r=this.title?i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont).height*this.titleCollection.length:r,this.subTitle){for(u=0,c=this.titleCollection;u<c.length;u++)a=c[u],h=(l=i.measureText(a,this.titleStyle,this.themeStyle.chartSubTitleFont).width)>h?l:h;this.subTitleCollection=tu(this.subTitle,this.subTitleStyle,this.initialClipRect.width,this.enableRtl,this.themeStyle.chartSubTitleFont);s=i.measureText(this.subTitle,this.subTitleStyle,this.themeStyle.chartSubTitleFont).height*this.subTitleCollection.length}var n=this.margin.left+this.border.width,t=this.availableSize.width-n-this.margin.right-this.border.width,f=this.margin.top+this.border.width,e=this.availableSize.height-f-this.border.width-this.margin.bottom,o=s+r;switch(this.titleStyle.position){case"Top":n=0;f=s+r;t=this.margin.right+this.margin.left;e=this.margin.bottom+this.margin.top;break;case"Bottom":e-=o+2*this.margin.bottom;break;case"Left":n+=o;t-=o;break;case"Right":t-=o}this.initialClipRect="Top"!==this.titleStyle.position?new i.Rect(n,f,t,e):tc(this.initialClipRect,new i.Rect(n,f,t,e));this.calculateLegendBounds()},u.prototype.calculateLegendBounds=function(){if(!this.accumulationLegendModule||!this.legendSettings.visible)return null;this.accumulationLegendModule.getLegendOptions(this,this.visibleSeries);this.accumulationLegendModule.calculateLegendBounds(this.initialClipRect,this.availableSize,null)},u.prototype.renderElements=function(){this.renderBorder();this.createSecondaryElement();this.renderSeries();this.renderTitle();this.renderCenterLabel(!0);this.renderLegend();o(!1,this.element,this.svgObject,this.redraw);this.processSelection();this.processExplode();this.renderAnnotation();this.setSecondaryElementPosition();this.series.every(function(n){return 0===(n.dataSource||[]).length})&&!t.isNullOrUndefined(this.noDataTemplate)&&this.renderNoDataTemplate(!0);t.updateBlazorTemplate(this.element.id+"_DataLabel","Template",this.series[0].dataLabel);this.trigger("loaded",{accumulation:this.isBlazor?{}:this,chart:this.isBlazor?{}:this});this.animateSeries=!1},u.prototype.setSecondaryElementPosition=function(){var n=r(this.element.id+"_Secondary_Element"),t,i;n&&(t=this.element.getBoundingClientRect(),i=r(this.element.id+"_svg").getBoundingClientRect(),n.style.left=Math.max(i.left-t.left,0)+"px",n.style.top=Math.max(i.top-t.top,0)+"px")},u.prototype.renderNoDataTemplate=function(n){var c=this.element.querySelector("#"+this.element.id+"_NoDataTemplate_wrapper");if(c&&c.remove(),n){var e="function"==typeof this.noDataTemplate?this.noDataTemplate():this.noDataTemplate,y=this.enableHtmlSanitizer&&"string"==typeof e?this.sanitize(e):e,o=t.createElement("div",{id:this.element.id+"_NoDataTemplate_wrapper"}),f=0,l=this.element.querySelector("#"+this.element.id+"_border");l&&(f=parseFloat(l.getAttribute("stroke-width")));var s=this.availableSize.width-2*f,h=this.availableSize.height-2*f,a=f,v=f,u=0;if(this.title)switch(u=i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont).height+(this.subTitle?i.measureText(this.subTitle,this.subTitleStyle,this.themeStyle.chartSubTitleFont).height:0)+(this.subTitle?5:0),this.titleStyle.position){case"Top":a+=u+10;h-=u+10;break;case"Left":v+=u+10;s-=u+10;break;case"Bottom":h-=u+16;break;case"Right":s-=u+10}o.style.cssText="position: absolute; top: "+a+"px; left: "+v+"px; width: "+s+"px;\n                height: "+h+"px; z-index: 1;\n            ";r(this.element.id+"_Secondary_Element").appendChild(o);ee(o,null,y,this,null,null,this.element.id+"_NoData")}},u.prototype.renderAnnotation=function(){this.annotationModule&&this.annotationModule.renderAnnotations(r(this.element.id+"_Secondary_Element"))},u.prototype.processExplode=function(){return this.redraw?null:this.visibleSeries[0].explode?void this.accBaseModule.invokeExplode():null},u.prototype.renderSeries=function(){var t,i,n;for(this.redraw||this.svgObject.appendChild(this.renderer.createGroup({id:this.element.id+"_SeriesCollection"})),t=0,i=this.visibleSeries;t<i.length;t++)n=i[t],n.visible&&this[et(n.type)+"SeriesModule"]&&(this[et(n.type)+"SeriesModule"].initProperties(this,n),n.renderSeries(this,this.redraw))},u.prototype.renderBorder=function(){var n=this.border.width,f=new ft(this.element.id+"_border",this.background||this.themeStyle.background,this.border,1,new i.Rect(n/2,n/2,this.availableSize.width-n,this.availableSize.height-n),0,0,"",this.border.dashArray),r=this.renderer.drawRectangle(f),t,u;r.setAttribute("aria-hidden","true");o(!1,this.svgObject,r,this.redraw);t=this.backgroundImage;t&&(u=new to(this.availableSize.height-n,this.availableSize.width-n,t,0,0,this.element.id+"_background","visible","none"),o(!1,this.svgObject,this.renderer.drawImage(u),this.redraw))},u.prototype.renderLegend=function(){if(!this.accumulationLegendModule||!this.legendSettings.visible)return null;this.accumulationLegendModule.legendCollections.length&&("Pie"===this.visibleSeries[0].type&&this.accumulationLegendModule.getSmartLegendLocation(this.visibleSeries[0].labelBound,this.accumulationLegendModule.legendBounds,this.margin),this.accumulationLegendModule.renderLegend(this,this.legendSettings,this.accumulationLegendModule.legendBounds,this.redraw))},u.prototype.processSelection=function(){var n=[];this.accumulationSelectionModule&&"None"!==this.selectionMode&&(n=t.extend([],this.accumulationSelectionModule.selectedDataIndexes,null,!0),this.accumulationSelectionModule.invokeSelection(this));this.accumulationHighlightModule&&"None"!==this.highlightMode&&this.accumulationHighlightModule.invokeHighlight(this);n.length>0&&(this.accumulationSelectionModule.selectedDataIndexes=n,this.accumulationSelectionModule.redrawSelection(this))},u.prototype.renderTitle=function(){var e=this.margin,f,v,o;if(!this.title)return null;var c,n=bu(this.titleStyle.textAlignment,this.enableRtl),s=i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont),l=this.margin.top+3*s.height/4,h=void 0===this.accumulationLegendModule?0:"Top"===this.legendSettings.position?this.accumulationLegendModule.legendBounds.height:0,y=0===this.explodeDistance?0:this.explodeDistance,p=0!==h?0:y/2,a=new i.Rect(e.left,0,this.availableSize.width-e.left-e.right,0),t=this.margin.top+3*s.height/4,r=pr(a,this.titleStyle||this.themeStyle.chartTitleFont),u=this.titleStyle.textAlignment,w=i.measureText(this.subTitle,this.subTitleStyle,this.themeStyle.chartSubTitleFont);switch(this.titleStyle.position){case"Top":r=pr(a,this.titleStyle);t=l;break;case"Bottom":r+="start"===n||"end"===n?this.border.width:0;t=this.availableSize.height-this.margin.bottom-w.height-s.height/2;break;case"Left":r=this.margin.left+3*s.height/4;t="Near"===u?e.bottom+this.border.width:"Far"===u?this.availableSize.height-e.bottom-this.border.width:this.availableSize.height/2;n="Near"===u?"end":"Far"===u?"start":"middle";n=this.enableRtl?"end"===n?"start":"start"===n?"end":n:n;c="rotate(-90,"+r+","+t+")";break;case"Right":r=this.availableSize.width-this.margin.right-3*s.height/4;t="Near"===u?e.bottom+this.border.width:"Far"===u?this.availableSize.height-e.bottom-this.border.width:this.availableSize.height/2;n="Near"===u?"start":"Far"===u?"end":"middle";n=this.enableRtl?"end"===n?"start":"start"===n?"end":n:n;c="rotate(90,"+r+","+t+")";break;case"Custom":r=this.titleStyle.x;t=this.titleStyle.y;n="middle"}f=new i.TextOption(this.element.id+"_title",r,t,n,this.titleCollection,c,"auto");v="Pie"===this.series[0].type&&"Outside"===this.visibleSeries[0].dataLabel.position&&this.visibleSeries[0].dataLabel.connectorStyle.length?it(this.visibleSeries[0].dataLabel.connectorStyle.length,this.accBaseModule.radius):0;this.subTitle||"Funnel"===this.series[0].type||"Pyramid"===this.series[0].type||(f.y=parseInt(this.series[0].radius,10)>=80?f.y:this.accBaseModule.center.y-this.accBaseModule.radius-20-l-h-p-v,"Pie"===this.series[0].type&&(parseInt(this.series[0].radius,10)<80||isNaN(parseInt(this.series[0].radius,10)))&&(f.y=f.y<this.initialClipRect.y-h?this.initialClipRect.y-h:f.y));o=ct(this.renderer,f,this.titleStyle,this.titleStyle.color||this.themeStyle.chartTitleFont.color,this.svgObject,!1,this.redraw,null,null,null,null,0,null,null,null,this.themeStyle.chartTitleFont);o&&(o.setAttribute("tabindex","0"),o.style.outline="none",o.parentNode.insertBefore(o,this.svgObject.children&&this.svgObject.children[1]));this.subTitle&&this.renderSubTitle(f)},u.prototype.updateCenterLabel=function(n){var t=this.getPieData(n);this.format=null==t.point?"":this.parseFormat(t.point,this.visibleSeries[0],this.centerLabel.hoverTextFormat);this.renderCenterLabel()},u.prototype.getPieData=function(n){var t=uu(n.target.id,!0);return isNaN(t.series)?new is(null,null):new is(this.visibleSeries[0].points[t.point],this.visibleSeries[0])},u.prototype.parseFormat=function(n,t,i){for(var u,o,f,r,s,h=RegExp,e=0,c=Object.keys(n);e<c.length;e++)r=new h("${point."+(f=c[e])+"}","gm"),i=i.replace(r.source,n[f]);for(u=0,o=Object.keys(Object.getPrototypeOf(t));u<o.length;u++)r=new h("${series."+(f=o[u])+"}","gm"),s=t[f],i=i.replace(r.source,s);return i},u.prototype.renderCenterLabel=function(n,u){var p=this,a,k,s;if(!this.centerLabel.text||"Pie"!==this.type)return null;a=[];u&&r(this.element.id+"_centerLabel").querySelectorAll("tspan").forEach(function(n){a.push({x:n.getAttribute("x"),y:n.getAttribute("y")})});for(var l,v=this.series[0],d=bu(this.centerLabel.textStyle.textAlignment,this.enableRtl),h=10,c=this.pieSeriesModule.innerRadius?2*this.pieSeriesModule.innerRadius*.7071067:2*this.pieSeriesModule.radius*.7071067,f=(this.format||this.centerLabel.text).split("<br>"),o=i.measureText(f[0],this.centerLabel.textStyle,this.themeStyle.chartTitleFont),g=f.length,e=0;e<g;e++)i.measureText(f[e],this.centerLabel.textStyle,this.themeStyle.chartTitleFont).width>c&&f.splice.apply(f,[e,1].concat(ur(f[e],c,this.centerLabel.textStyle,this.enableRtl,null,null,this.themeStyle.chartTitleFont)));o.height*f.length>c?l=this.accBaseModule.center.y+(o.height+h)/2-c/2:v.startAngle&&v.endAngle&&180===Math.abs(v.endAngle-v.startAngle)?(l=this.accBaseModule.center.y-o.height*f.length/2+(o.height+h)/2-this.pieSeriesModule.innerRadius/2+(this.pieSeriesModule.innerRadius?h:0),o.height*f.length+this.pieSeriesModule.innerRadius/2+h>c&&(l=this.accBaseModule.center.y+(o.height+h)/2-c/2)):l=f.length>1?this.accBaseModule.center.y-o.height*f.length/2+(o.height+h)/2:this.accBaseModule.center.y+o.height/4;var y=new i.TextOption(this.element.id+"_centerLabel",(this.series[0].animation.enable&&"Disable"!==t.animationMode||"Enable"===t.animationMode)&&n?this.pieSeriesModule.center.x-1:this.pieSeriesModule.center.x,l,d,"","","auto"),w=ct(this.renderer,y,this.centerLabel.textStyle,this.centerLabel.textStyle.color||this.themeStyle.chartTitleFont.color,this.svgObject,!1,this.redraw,null,null,null,null,0,null,null,null,this.themeStyle.chartTitleFont),b=[];for(e=0;e<f.length;e++)k={x:y.x,y:y.y+e*o.height,fill:""},s=this.renderer.createTSpan(k,""),s.style.fontFamily="inherit",s.style.fontStyle="inherit",s.style.fontSize="inherit",s.style.fontWeight=f[e].indexOf("<b>")>-1||f[e].indexOf("<\/b>")>-1?"bold":"inherit",s.textContent=f[e].replace(/<\/?b>/g,""),w.appendChild(s),b.push(s);u&&b.forEach(function(n,t){p.animateTspan(n,Number(a[t].x),Number(a[t].y),Number(n.getAttribute("x")),Number(n.getAttribute("y")),p.duration)});n&&(this.series[0].animation.enable&&"Disable"!==t.animationMode||"Enable"===t.animationMode)&&this.animateSeries&&this.centerLabelDelay(w)},u.prototype.animateTspan=function(n,i,r,u,f,e){new t.Animation({}).animate(n,{duration:e,progress:function(t){n.style.animation="";var e=t.timeStamp/t.duration,o=i+(u-i)*e,s=r+(f-r)*e;n.setAttribute("x",o.toString());n.setAttribute("y",s.toString())},end:function(){n.setAttribute("x",u.toString());n.setAttribute("y",f.toString())}})},u.prototype.centerLabelDelay=function(n){n.style.visibility="hidden";new t.Animation({}).animate(n,{delay:this.duration?this.duration:this.series[0].animation.duration,progress:function(n){n.element.style.visibility="visible"}})},u.prototype.renderSubTitle=function(n){for(var h,f,c,t=0,e=0,r=this.titleStyle.textAlignment,o=i.measureText(this.subTitle,this.subTitleStyle,this.themeStyle.chartSubTitleFont),u=0,s=this.titleCollection;u<s.length;u++)h=s[u],t=(e=i.measureText(h,this.titleStyle,this.themeStyle.chartSubTitleFont).width)>t?e:t;f=new i.Rect("Center"===r?n.x-t/2:"Far"===r?n.x-t:n.x,0,t,0);"Left"===this.titleStyle.position&&(f.x="Center"===r?n.x-.5*t:"Far"===r?this.margin.left+3*o.height/4:n.x-t);c=new i.TextOption(this.element.id+"_subTitle",pr(f,this.subTitleStyle),n.y*n.text.length+3*o.height/4+10,bu(this.subTitleStyle.textAlignment,this.enableRtl),this.subTitleCollection,n.transform,"auto");ct(this.renderer,c,this.subTitleStyle,this.subTitleStyle.color||this.themeStyle.chartSubTitleFont.color,this.svgObject,!1,this.redraw,null,null,null,null,0,null,null,null,this.themeStyle.chartSubTitleFont)},u.prototype.getSeriesElement=function(){return this.svgObject.getElementsByTagName("g")[0]},u.prototype.refreshSeries=function(){for(var i,n=0,t=this.visibleSeries;n<t.length;n++)i=t[n],this.refreshPoints(i.points)},u.prototype.refreshPoints=function(n){for(var i,t=0,r=n;t<r.length;t++)i=r[t],i.labelPosition=null,i.labelRegion=null,i.labelVisible=!0},u.prototype.getModuleName=function(){return"accumulationchart"},u.prototype.destroy=function(){var t,i,r;this.element&&(this.unWireEvents(),n.prototype.destroy.call(this),this.element.classList.remove("e-accumulationchart"),this.element.classList.remove("e-accumulationchart-focused"),t=document.getElementById(this.element.id+"Keyboard_accumulationchart_focus"),t&&t.remove(),v("chartmeasuretext"),this.removeSvg(),i=document.getElementById(this.element.id+"_ej2_chart_highlight"),i&&i.remove(),r=document.getElementById(this.element.id+"_ej2_chart_selection"),r&&r.remove(),this.svgObject=null)},u.prototype.requiredModules=function(){var n=[];return n.push({member:this.type+"Series",args:[this]}),this.legendSettings.visible&&n.push({member:"AccumulationLegend",args:[this]}),this.findDatalabelVisibility()&&n.push({member:"AccumulationDataLabel",args:[this]}),this.tooltip.enable&&n.push({member:"AccumulationTooltip",args:[this]}),"None"!==this.selectionMode&&n.push({member:"AccumulationSelection",args:[this]}),"None"!==this.highlightMode&&n.push({member:"AccumulationHighlight",args:[this]}),(this.enableExport||this.allowExport)&&n.push({member:"Export",args:[this]}),this.annotations.some(function(n){return null!==n.content})&&n.push({member:"Annotation",args:[this]}),n},u.prototype.findDatalabelVisibility=function(){for(var n=0,t=this.series;n<t.length;n++)if(t[n].dataLabel.visible)return!0;return!1},u.prototype.changeVisibleSeries=function(n,t){for(var u,i=0,r=n;i<r.length;i++)if(u=r[i],t===u.index)return u;return null},u.prototype.getPersistData=function(){return""},u.prototype.sanitize=function(n){return this.enableHtmlSanitizer?t.SanitizeHtmlHelper.sanitize(n):n},u.prototype.onPropertyChanged=function(i,r){for(var e={refreshElements:!1,refreshBounds:!1},o=0,s=Object.keys(i);o<s.length;o++)switch(s[o]){case"theme":this.animateSeries=!0;break;case"title":case"subTitle":case"height":case"width":case"margin":e.refreshBounds=!0;break;case"titleStyle":i.titleStyle&&(i.titleStyle.size||i.titleStyle.textOverflow)?e.refreshBounds=!0:e.refreshElements=!0;break;case"subTitleStyle":i.subTitleStyle&&(i.subTitleStyle.size||i.subTitleStyle.textOverflow)?e.refreshBounds=!0:e.refreshElements=!0;break;case"legendSettings":e.refreshBounds=!0;e.refreshElements=!0;break;case"dataSource":this.processData(!1);e.refreshBounds=!0;break;case"series":if(!this.animateselected){for(var l=this.series.length,h=!1,u=void 0,c=void 0,f=0;f<l;f++)((u=i.series[f]).startAngle||u.endAngle||u.explodeOffset||u.neckHeight||u.neckWidth||u.radius||u.innerRadius||u.groupMode||u.emptyPointSettings)&&this.isBlazor&&(c=!0),i.series[f]&&(i.series[f].dataSource||i.series[f].yName||i.series[f].xName||u.type||i.series[f].dataLabel||u.radius||u.innerRadius||u.startAngle||u.endAngle||u.gapRatio||u.neckWidth||u.explode||u.neckWidth||u.pyramidMode||u.explodeOffset||u.funnelMode||c)&&(t.extend(this.changeVisibleSeries(this.visibleSeries,f),u,null,!0),h=!0),i.series[f]&&!t.isNullOrUndefined(i.series[f].explodeIndex)&&i.series[f].explodeIndex>=0&&i.series[f].explodeIndex!==r.series[f].explodeIndex?(this.accBaseModule.explodePoints(i.series[f].explodeIndex,this),this.accBaseModule.deExplodeAll(i.series[f].explodeIndex,this.enableAnimation?300:0)):i.series[f].explodeIndex<0&&this.accBaseModule.deExplodeAll(i.series[f].explodeIndex,this.enableAnimation?300:0),this.pieSeriesModule||(this.pieSeriesModule=new ty(this));h&&(this.calculateVisibleSeries(),this.processData(!1),e.refreshBounds=!0)}this.animateselected=!1;this.redraw=!1;break;case"enableRtl":case"locale":case"currencyCode":n.prototype.refresh.call(this);break;case"background":case"border":case"annotations":case"enableSmartLabels":e.refreshElements=!0;break;case"isMultiSelect":case"selectedDataIndexes":case"selectionMode":this.accumulationSelectionModule&&(t.isNullOrUndefined(this.accumulationSelectionModule.selectedDataIndexes)?this.accumulationSelectionModule.invokeSelection(this):(this.accumulationSelectionModule.selectedDataIndexes=this.selectedDataIndexes,this.accumulationSelectionModule.redrawSelection(this)));break;case"tooltip":this.accumulationTooltipModule&&(this.accumulationTooltipModule.previousPoints=[],this.tooltip.template&&(this.accumulationTooltipModule.template=this.tooltip.template));break;case"center":t.isNullOrUndefined(i.center.x)||(this.center.x=i.center.x,e.refreshElements=!0);t.isNullOrUndefined(i.center.y)||(this.center.y=i.center.y,e.refreshElements=!0)}!e.refreshBounds&&e.refreshElements?(this.createPieSvg(),this.renderElements()):e.refreshBounds&&(this.refreshSeries(),this.createPieSvg(),this.calculateBounds(),this.renderElements())},w([t.Property(null)],u.prototype,"noDataTemplate",void 0),w([t.Property(null)],u.prototype,"width",void 0),w([t.Property(null)],u.prototype,"height",void 0),w([t.Property(null)],u.prototype,"title",void 0),w([t.Property(null)],u.prototype,"backgroundImage",void 0),w([t.Complex({},lk)],u.prototype,"center",void 0),w([t.Property("")],u.prototype,"dataSource",void 0),w([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},kl)],u.prototype,"titleStyle",void 0),w([t.Property(null)],u.prototype,"subTitle",void 0),w([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},kl)],u.prototype,"subTitleStyle",void 0),w([t.Complex({},gb)],u.prototype,"legendSettings",void 0),w([t.Complex({},yl)],u.prototype,"tooltip",void 0),w([t.Complex({},hp)],u.prototype,"centerLabel",void 0),w([t.Property("None")],u.prototype,"selectionMode",void 0),w([t.Property("")],u.prototype,"highlightColor",void 0),w([t.Property("None")],u.prototype,"highlightMode",void 0),w([t.Property("None")],u.prototype,"selectionPattern",void 0),w([t.Property("None")],u.prototype,"highlightPattern",void 0),w([t.Property(!1)],u.prototype,"enableHtmlSanitizer",void 0),w([t.Property(!0)],u.prototype,"enableBorderOnMouseMove",void 0),w([t.Property(!1)],u.prototype,"isMultiSelect",void 0),w([t.Property(!0)],u.prototype,"enableAnimation",void 0),w([t.Collection([],as)],u.prototype,"selectedDataIndexes",void 0),w([t.Complex({},lr)],u.prototype,"margin",void 0),w([t.Property(!0)],u.prototype,"enableSmartLabels",void 0),w([t.Complex({color:"#DDDDDD",width:0},yt)],u.prototype,"border",void 0),w([t.Property(null)],u.prototype,"background",void 0),w([t.Collection([{}],ak)],u.prototype,"series",void 0),w([t.Collection([{}],hk)],u.prototype,"annotations",void 0),w([t.Property("Material")],u.prototype,"theme",void 0),w([t.Property(!1)],u.prototype,"useGroupingSeparator",void 0),w([t.Property(!0)],u.prototype,"enableExport",void 0),w([t.Property(!1)],u.prototype,"allowExport",void 0),w([t.Complex({},lu)],u.prototype,"accessibility",void 0),w([t.Property(null)],u.prototype,"focusBorderColor",void 0),w([t.Property(1.5)],u.prototype,"focusBorderWidth",void 0),w([t.Property(0)],u.prototype,"focusBorderMargin",void 0),w([t.Event()],u.prototype,"loaded",void 0),w([t.Event()],u.prototype,"legendClick",void 0),w([t.Event()],u.prototype,"load",void 0),w([t.Event()],u.prototype,"seriesRender",void 0),w([t.Event()],u.prototype,"legendRender",void 0),w([t.Event()],u.prototype,"textRender",void 0),w([t.Event()],u.prototype,"tooltipRender",void 0),w([t.Event()],u.prototype,"pointRender",void 0),w([t.Event()],u.prototype,"annotationRender",void 0),w([t.Event()],u.prototype,"beforePrint",void 0),w([t.Event()],u.prototype,"chartMouseMove",void 0),w([t.Event()],u.prototype,"chartMouseClick",void 0),w([t.Event()],u.prototype,"chartDoubleClick",void 0),w([t.Event()],u.prototype,"pointClick",void 0),w([t.Event()],u.prototype,"pointMove",void 0),w([t.Event()],u.prototype,"animationComplete",void 0),w([t.Event()],u.prototype,"chartMouseDown",void 0),w([t.Event()],u.prototype,"chartMouseLeave",void 0),w([t.Event()],u.prototype,"chartMouseUp",void 0),w([t.Event()],u.prototype,"beforeResize",void 0),w([t.Event()],u.prototype,"resized",void 0),w([t.Event()],u.prototype,"beforeExport",void 0),w([t.Event()],u.prototype,"afterExport",void 0),w([t.Event()],u.prototype,"selectionComplete",void 0),w([t.Property("USD")],u.prototype,"currencyCode",void 0),w([t.NotifyPropertyChanges],u)}(t.Component),tct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yk=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return tct(t,n),t.prototype.initProperties=function(n,t){var r=n.initialClipRect,u;t.triangleSize=new i.Size(it(t.width,r.width),it(t.height,r.height));t.neckSize=new i.Size(it(t.neckWidth,r.width),it(t.neckHeight,r.height));this.defaultLabelBound(t,t.dataLabel.visible,t.dataLabel.position,n);"30%"===t.explodeOffset&&(t.explodeOffset="25px");n.explodeDistance=it(t.explodeOffset,r.width);u=t.points;this.initializeSizeRatio(u,t)},t.prototype.initializeSizeRatio=function(n,t,i){var r,e;void 0===i&&(i=!1);for(var o=t.sumOfPoints,f=Math.min(Math.max(t.gapRatio,0),1),h=0!==o?1/(o*(1+f/(1-f))):0,c=f/(n.length-1),s=0,u=n.length-1;u>=0;u--)r=i?n.length-1-u:u,n[r].visible&&(e=h*n[r].y,n[r].yRatio=s,n[r].heightRatio=e,s+=e+c)},t.prototype.setLabelLocation=function(n,t,r){var f=r.length-1,u="Funnel"===n.type?r.length-2:r.length-1,e=(r[0].x+r[u].x)/2,o=(r[1].x+r[u-1].x)/2;t.region=new i.Rect(e,r[0].y,o-e,r[u].y-r[0].y);t.symbolLocation={x:t.region.x+t.region.width/2,y:t.region.y+t.region.height/2};t.labelOffset={x:t.symbolLocation.x-(r[0].x+r[f].x)/2,y:t.symbolLocation.y-(r[0].y+r[f].y)/2}},t.prototype.getPath=function(n,t,i,r,u,f){var a=f.points.length,e=f.borderRadius,v=Math.min(t.region.width,t.region.height),c=Math.min(f.neckSize.height,f.neckSize.width),o,s,y,l,h;return 0===c&&(c=0===f.neckSize.height&&0===f.neckSize.width?t.region.height:0===f.neckSize.width?f.neckSize.height:f.neckSize.width),e=e>v/2?v/2:e,"Funnel"===f.type&&(e=e>c/2?c/2:e),o=Math.atan2(n[1].x-n[2].x,n[1].y-n[2].y),s=e,("Pyramid"===f.type&&(e=t.index===u&&1!==a&&r!==u?0:e,i+=n[0].x-s*Math.sin(-o)+" "+(n[0].y+-s*Math.cos(o))+" Q"+n[0].x+" "+n[0].y+" "+(n[0].x+e*Math.sin(-o))+" "+(n[0].y+-e*Math.cos(-o)),i+=" L"+(n[1].x+e*Math.sin(-o))+" "+(n[1].y+-e*Math.cos(o)),e=t.index===u?s:0,i+=" L"+(n[2].x-s*Math.sin(-o))+" "+(n[2].y- -s*Math.cos(o))+" Q"+n[2].x+" "+n[2].y+" "+(n[2].x-e)+" "+n[2].y,i+=" L"+(n[3].x+e)+" "+n[3].y+" Q"+n[3].x+" "+n[3].y+" "+(n[3].x+s*Math.sin(-o))+" "+(n[3].y- -s*Math.cos(o))),"Funnel"===f.type)&&((e=t.index===r&&1!==a&&r!==u?0:e,i+=n[0].x+-e*Math.sin(-o)+" "+(n[0].y+-e*Math.cos(o))+" Q"+n[0].x+" "+n[0].y+" "+(n[0].x+e)+" "+n[0].y,i+=" L"+(n[1].x-e)+" "+n[1].y+" Q"+n[1].x+" "+n[1].y+" "+(n[1].x-e*Math.sin(o))+" "+(n[1].y+-e*Math.cos(o)),e=t.index===r?s:0,"0%"===f.neckWidth)?(y=n[5].x+(n[3].x-n[5].x)/2,i+=" L"+(n[2].x+-e*Math.sin(-o))+" "+(n[2].y- -e*Math.cos(o))+" Q"+y+" "+n[2].y+" "+(n[5].x- -e*Math.sin(-o))+" "+(n[2].y- -e*Math.cos(o))):(i="0%"!==f.neckHeight&&n[2].y!==n[3].y?i+=" L"+n[2].x+" "+n[2].y:i,l="0%"===f.neckHeight?e*Math.sin(-o):0,h="0%"===f.neckHeight?-e*Math.cos(o):e,i+=" L"+(n[3].x-l)+" "+(n[3].y-h)+" Q"+n[3].x+" "+n[3].y+" "+(n[3].x-h)+" "+n[3].y,i+=" L"+(n[4].x+h)+" "+n[4].y+" Q"+n[4].x+" "+n[4].y+" "+(n[5].x+l)+" "+(n[4].y-h),i="0%"!==f.neckHeight&&n[4].y!==n[5].y?i+=" L"+n[5].x+" "+n[5].y:i)),i},t.prototype.findPath=function(n,t,i){for(var r,u="M ",e=-1,o=-1,f=0;f<i.points.length;f++)i.points[f].visible&&(-1===e&&(e=f),o=f);if(i.borderRadius&&(t.index===o||t.index===e))u=this.getPath(n,t,u,e,o,i);else for(r=0;r<n.length;r++)u+=n[r].x+" "+n[r].y,r!==n.length-1&&(u+=" L ");return u+" Z "},t.prototype.defaultLabelBound=function(n,t,r,u){var e=(u.initialClipRect.width-n.triangleSize.width)/2,o=(u.initialClipRect.height-n.triangleSize.height)/2,f=new i.Rect(e,o,n.triangleSize.width,n.triangleSize.height);n.labelBound=new i.Rect(f.x,f.y,f.width+f.x,f.height+f.y);n.accumulationBound=f;t&&"Outside"===r&&(n.labelBound=new i.Rect(1/0,1/0,-1/0,-1/0))},t}(bc),ict=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rct=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ict(t,n),t.prototype.getSegmentData=function(n,t,i){var f,a,s,v,h,y,p,l,r=t.triangleSize,e=(i.initialClipRect.width-t.triangleSize.width)/2+i.initialClipRect.x,w=i.initialClipRect.y+(i.initialClipRect.height-r.height)/2,c=n.yRatio*r.height,o=c+n.heightRatio*r.height,u=t.neckSize,b,k,d;return f=u.width+(r.width-u.width)*((r.height-u.height-c)/(r.height-u.height)),v=(a=r.width/2-f/2)+f,f=o>r.height-u.height||r.height===u.height?u.width:u.width+(r.width-u.width)*((r.height-u.height-o)/(r.height-u.height)),h=(s=r.width/2-f/2)+f,c>=r.height-u.height?(a=s=y=r.width/2-u.width/2,v=h=p=r.width/2+u.width/2):o>r.height-u.height&&(p=h=(y=s=r.width/2-f/2)+f,l=r.height-u.height),b={x:e+0+h,y:o+=w},k={x:e+0+s,y:o},(l+=w)&&(b={x:e+0+p,y:l},k={x:e+0+y,y:l}),d=[{x:e+0+a,y:c+=w},{x:e+0+v,y:c},b,{x:e+0+h,y:o},{x:e+0+s,y:o},k],this.setLabelLocation(t,n,d),this.findPath(d,n,t)},t.prototype.renderPoint=function(n,t,i,r,u,f,e,s,h){var l,a,c;if(!n.visible)return v(r.id),null;a=this.getSegmentData(n,t,i);n.midAngle=0;r.d=a;h&&document.getElementById(r.id)&&(l=document.getElementById(r.id).getAttribute("d"));c=i.renderer.drawPath(r);c.setAttribute("role",t.accessibility.accessibilityRole?t.accessibility.accessibilityRole:"img");c.setAttribute("tabindex",0===n.index&&t.accessibility.focusable?String(t.accessibility.tabIndex):"-1");c.setAttribute("aria-label",t.accessibility.accessibilityDescription?t.accessibility.accessibilityDescription:n.x+":"+n.y+"%. "+t.name);o(!1,u,c,f,h||void 0,h?"x":void 0,h?"y":void 0,void 0,h?l:void 0,void 0,void 0,void 0,h?i.duration:void 0);n.isExplode&&i.accBaseModule.explodePoints(n.index,i,!0)},t.prototype.renderTrapezoidalFunnel=function(n,t,u,f,e,s){for(var h,a,g,w=n.triangleSize.width,it=n.triangleSize.height,d=(u.initialClipRect.width-w)/2+u.initialClipRect.x,st=u.initialClipRect.y+(u.initialClipRect.height-it)/2,rt=Math.max.apply(Math,t.map(function(n){return n.y})),ut=0,ft=s?r(u.element.id+"_Series_"+n.index+"_Polygon"):u.renderer.createGroup({id:u.element.id+"_Series_"+n.index+"_Polygon"}),nt=0;nt<n.points.length;nt++)if(h=n.points[nt],a=f[h.index],h.visible){var y=(it-10*(t.length-1))/t.length,b=w*(h.y/rt),tt=t.indexOf(h),et=tt<t.length-1?w*(t[tt+1].y/rt):0,p=d+(w-b)/2,l=st+ut,c=Math.min(n.borderRadius,y/2),ht="M"+(p+c)+" "+l+" L"+(p+b-c)+" "+l+" A"+c+" "+c+" 0 0 1 "+(p+b)+" "+(l+c)+" L"+(p+b)+" "+(l+y-c)+" A"+c+" "+c+" 0 0 1 "+(p+b-c)+" "+(l+y)+" L"+(p+c)+" "+(l+y)+" A"+c+" "+c+" 0 0 1 "+p+" "+(l+y-c)+" L"+p+" "+(l+c)+" A"+c+" "+c+" 0 0 1 "+(p+c)+" "+l+" Z";if(h.midAngle=0,a.d=ht,g=u.renderer.drawPath(a),g.setAttribute("role",n.accessibility.accessibilityRole?n.accessibility.accessibilityRole:"img"),g.setAttribute("tabindex",0===h.index&&n.accessibility.focusable?String(n.accessibility.tabIndex):"-1"),g.setAttribute("aria-label",n.accessibility.accessibilityDescription?n.accessibility.accessibilityDescription:h.x+":"+h.y+"%. "+n.name),o(!1,e,g,s),tt<t.length-1){var ot=new i.PathOption(a.id+"_polygon",this.lightenColor(a.fill),.4*a["stroke-width"],this.lightenColor(a.stroke),a.opacity,a["stroke-dasharray"],""),k=[[(w-b)/2+d+c,l+y],[(w+b)/2+d-c,l+y],[(w+et)/2+d,l+y+10],[(w-et)/2+d,l+y+10]],ct="M"+k[0][0]+" "+k[0][1]+" L"+k[1][0]+" "+k[1][1]+" L"+k[2][0]+" "+k[2][1]+" L"+k[3][0]+" "+k[3][1]+" Z";ot.d=ct;o(!1,ft,u.renderer.drawPath(ot),s)}else v(a.id+"_polygon");ut+=y+10;h.region=new i.Rect(p,l,b,y);h.symbolLocation={x:h.region.x+h.region.width/2,y:h.region.y+h.region.height/2};h.labelOffset={x:h.symbolLocation.x+h.region.width/2,y:h.symbolLocation.y+h.region.height/2};h.isExplode&&u.accBaseModule.explodePoints(h.index,u,!0)}else v(a.id),v(a.id+"_polygon");o(!1,u.getSeriesElement(),e,s);o(!1,u.getSeriesElement(),ft,s)},t.prototype.lightenColor=function(n){var t=wu(vi(n));return"rgb("+t.r+","+t.g+","+t.b+",0.4)"},t.prototype.getModuleName=function(){return"FunnelSeries"},t.prototype.destroy=function(){},t}(yk),uct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fct=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return uct(t,n),t.prototype.getSegmentData=function(n,t,i){var r=t.triangleSize,s=i.initialClipRect.y+(i.initialClipRect.height-r.height)/2,u=(i.initialClipRect.width-t.triangleSize.width)/2+i.initialClipRect.x,e=n.yRatio,f=n.yRatio+n.heightRatio,h=.5*(1-n.yRatio),c=.5*(1-f),o;return e+=s/r.height,f+=s/r.height,o=[{x:u+0+h*r.width,y:e*r.height},{x:u+0+(1-h)*r.width,y:e*r.height},{x:u+0+(1-c)*r.width,y:f*r.height},{x:u+0+c*r.width,y:f*r.height}],this.setLabelLocation(t,n,o),this.findPath(o,n,t)},t.prototype.initializeSizeRatio=function(t,i){"Linear"===i.pyramidMode?n.prototype.initializeSizeRatio.call(this,t,i,!0):this.calculateSurfaceSegments(i)},t.prototype.calculateSurfaceSegments=function(n){for(var f,r=n.points.length,h=n.sumOfPoints,e=[],u=[],c=Math.min(0,Math.max(n.gapRatio,1)),o=n.points.length>1?c/(r-1):0,s=this.getSurfaceHeight(0,h),i=0,t=0;t<r;t++)n.points[t].visible&&(e[t]=i,u[t]=this.getSurfaceHeight(i,Math.abs(n.points[t].y)),i+=u[t]+o*s);for(f=1/(i-o*s),t=0;t<r;t++)n.points[t].visible&&(n.points[t].yRatio=f*e[t],n.points[t].heightRatio=f*u[t])},t.prototype.getSurfaceHeight=function(n,t){return this.solveQuadraticEquation(1,2*n,-t)},t.prototype.solveQuadraticEquation=function(n,t,i){var u,f,e=t*t-4*n*i,r;return e>=0?(r=Math.sqrt(e),u=(-t-r)/(2*n),f=(-t+r)/(2*n),Math.max(u,f)):0},t.prototype.renderPoint=function(n,t,r,u,f,e,s,h,c){var a,l;if(!n.visible)return i.removeElement(u.id),null;u.d=this.getSegmentData(n,t,r);c&&document.getElementById(u.id)&&(a=document.getElementById(u.id).getAttribute("d"));n.midAngle=0;l=r.renderer.drawPath(u);l.setAttribute("role",t.accessibility.accessibilityRole?t.accessibility.accessibilityRole:"img");l.setAttribute("tabindex",0===n.index&&t.accessibility.focusable?String(t.accessibility.tabIndex):"-1");l.setAttribute("aria-label",t.accessibility.accessibilityDescription?t.accessibility.accessibilityDescription:n.x+": "+n.y+"%. "+t.name);o(!1,f,l,e,c||void 0,c?"x":void 0,c?"y":void 0,void 0,c?a:void 0,void 0,void 0,void 0,c?r.duration:void 0);n.isExplode&&r.accBaseModule.explodePoints(n.index,r,!0)},t.prototype.getModuleName=function(){return"PyramidSeries"},t.prototype.destroy=function(){},t}(yk),ect=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),oct=function(n){function u(t){var r=n.call(this,t)||this;return r.legendRenderArgFill=[],r.library=r,r.titleRect=new i.Rect(0,t.margin.top,0,0),r.addEventListener(),r}return ect(u,n),u.prototype.addEventListener=function(){this.chart.isDestroyed||(this.chart.on(t.Browser.touchMoveEvent,this.mouseMove,this),this.chart.on(t.Browser.touchEndEvent,this.mouseEnd,this),this.chart.on("click",this.click,this))},u.prototype.removeEventListener=function(){this.chart.isDestroyed||(this.chart.off(t.Browser.touchMoveEvent,this.mouseMove),this.chart.off("click",this.click),this.chart.off(t.Browser.touchEndEvent,this.mouseEnd))},u.prototype.mouseMove=function(n){var i;if(this.chart.legendSettings.visible&&!this.chart.isTouch&&this.chart.accumulationHighlightModule&&"None"!==this.chart.highlightMode){this.chart.legendSettings.toggleVisibility||this.click(n);for(var e=[this.legendID+"_text_",this.legendID+"_shape_marker_",this.legendID+"_shape_",this.legendID+"_g_"],r=n.target.id,u=void 0,t=0,f=e;t<f.length;t++)if(i=f[t],r.indexOf(i)>-1){u=parseInt(r.split(i)[1],10);this.chart.accumulationHighlightModule.legendSelection(this.chart,0,u,n.target,n.type);break}}},u.prototype.mouseEnd=function(n){this.chart.legendSettings.visible&&this.chart.isTouch&&this.move(n)},u.prototype.getLegendOptions=function(n,i){var u,f,e,o,r;for(this.legendCollections=[],this.isRtlEnable=n.enableRtl,this.isReverse=!this.isRtlEnable&&n.legendSettings.reverse,u=0;u<1;u++){for(f=i[u].type,"Pie"!==f&&"Doughnut"!==f||(f="0"!==i[u].innerRadius&&"0%"!==i[u].innerRadius?"Doughnut":"Pie"),e=0,o=i[u].points;e<o.length;e++)r=o[e],t.isNullOrUndefined(r.x)||t.isNullOrUndefined(r.y)||this.legendCollections.push(new br(n.useGroupingSeparator&&"number"==typeof r.x?n.intl.formatNumber(r.x,{useGrouping:!0}):r.x.toString(),r.color,i[u].legendShape,r.visible,f,r.legendImageUrl,null,null,r.index,i[u].index,null,r.x.toString()));this.isReverse&&this.legendCollections.reverse()}},u.prototype.getLegendBounds=function(n,t,r){var f,d,g,rt,ut,v,c,ft,k;this.calculateLegendTitle(r,t);this.isTitle=!!r.title;d=0;g=0;this.chartRowCount=1;this.rowHeights=[];this.columnHeights=[];this.pageHeights=[];var u=r.padding,nt=r.titlePosition,w=0,ct=this.arrowWidth,b=r.enablePages?0:this.arrowHeight;this.isVertical?d=r.width?0:n.width/20:g=r.height?0:n.height/20;t.width+=d;t.height+=g;var p,a,et=r.shapePadding,l=r.maximumLabelWidth?r.maximumLabelWidth:0,ot=r.shapeWidth,o=0,s=0,e=0,tt=[],st=[],it=0,ht=0,h=0,y=0;if(this.maxItemHeight=Math.max(i.measureText("MeasureText",r.textStyle,this.chart.themeStyle.legendLabelFont).height,r.shapeHeight),ut=!1,v="Auto"===r.layout&&r.maximumColumns>0,r.fixedWidth)for(c=0;c<this.legendCollections.length;c++)ft=ot+et+(this.isVertical||0===c?u:this.itemPadding)+(r.maximumLabelWidth?r.maximumLabelWidth:i.measureText(this.legendCollections[c].text,r.textStyle,this.chart.themeStyle.legendLabelFont).width),this.maxColumnWidth=this.maxColumnWidth>ft?this.maxColumnWidth:ft;for(c=0;c<this.legendCollections.length;c++)(a={fill:(f=this.legendCollections[c]).fill,text:f.text,shape:f.shape,name:"legendRender",cancel:!1},this.chart.trigger("legendRender",a),f.render=!a.cancel,f.text=f.originalText=a.text.indexOf("&")>-1?this.convertHtmlEntities(a.text):a.text,f.fill!==a.fill&&this.legendRenderArgFill.push(c),f.fill=a.fill,f.shape=a.shape,f.textSize=i.measureText(f.text,r.textStyle,this.chart.themeStyle.legendLabelFont),f.render&&""!==f.text)&&((ut=!0,y=r.fixedWidth?this.maxColumnWidth:ot+et+(r.maximumLabelWidth?r.maximumLabelWidth:f.textSize.width)+(this.isVertical&&"Horizontal"!==r.layout||0===c||1===s&&e>0&&"Horizontal"===r.layout?u:this.itemPadding),this.getLegendHeight(f,r,t,o,this.maxItemHeight,u),this.isVertical&&"Auto"===r.layout&&!v)?((h+=Math.max(f.textSize.height,r.shapeHeight)+(0===c?u:this.itemPadding))+this.itemPadding+b/this.pageButtonSize>t.height&&(o+=l,it=this.getPageWidth(st),this.totalPages=Math.max(e,this.totalPages||1),o-it+y>t.width?(st.push(o-it),ht=e=this.rowHeights.length):e=ht,tt.push(l),l=0,h=Math.max(f.textSize.height,r.shapeHeight)+u,s++),this.columnHeights[s]=(this.columnHeights[s]?this.columnHeights[s]:0)+Math.max(f.textSize.height,r.shapeHeight)+(0===c?u:this.itemPadding),l=Math.max(y,l),this.rowHeights[e]=Math.max(this.rowHeights[e]?this.rowHeights[e]:0,Math.max(f.textSize.height,r.shapeHeight)),e++):(r.enablePages||(w=this.isTitle&&"Top"!==nt?this.legendTitleSize.width+this.fivePixel:0,w+=ct),o+=y,(v?r.maximumColumns===s:t.width<u+o+w||"Vertical"===this.legend.layout&&1===s)&&(l=Math.max(l,o+u+w-y),0===e&&y!==o&&(e=1),o=y,e++,s=0),k=e?e-1:e,this.rowHeights[k]=Math.max(this.rowHeights[k]?this.rowHeights[k]:0,Math.max(f.textSize.height,r.shapeHeight)),this.columnHeights[s]=(this.columnHeights[s]?this.columnHeights[s]:0)+Math.max(f.textSize.height,r.shapeHeight)+u,v&&this.columnHeights[s]>t.height&&(this.columnHeights[s]-=Math.max(f.textSize.height,r.shapeHeight)+u),s++));p="Top"===nt?this.legendTitleSize.height:0;this.isVertical&&"Auto"===r.layout&&!v?(o+=l,this.isPaging=t.width<o+u,h=Math.max.apply(null,this.columnHeights)+u+b+p,h=Math.max(h,(this.totalPages||1)*(this.maxItemHeight+u)+u+b),this.isPaging=this.isPaging&&this.totalPages>1,tt.push(l)):(this.totalPages=this.totalRowCount=e,h=Math.max.apply(null,this.columnHeights)+u+b+p,this.isPaging=(t.height<h||"Horizontal"===r.layout&&this.rowHeights.length>1)&&!v,h=!r.enablePages&&this.isPaging&&"Vertical"!==r.layout?this.maxItemHeight+u+u+p:h,h=Math.max(h,this.maxItemHeight+u+u+p),"Horizontal"===r.layout&&(h=this.maxItemHeight+2*u+p+this.pageButtonSize+r.border.width),this.isPaging||(o+=this.isTitle&&"Top"!==nt?this.fivePixel+this.legendTitleSize.width+this.fivePixel:0));this.maxColumns=0;v&&this.maxColumnWidth&&r.fixedWidth?(rt=this.maxColumnWidth*r.maximumColumns+u,this.isPaging=!1):rt=this.isVertical&&"Auto"===r.layout&&!v?this.getMaxColumn(tt,t.width,u,o+u):Math.max(o+u,l);ut?this.setBounds(rt,h,r,t):this.setBounds(0,0,r,t)},u.prototype.getPageWidth=function(n){for(var i=0,t=0;t<n.length;t++)i+=n[t];return i},u.prototype.getLegendHeight=function(n,t,i,r,u,f){var e=n.textSize.width,o=t.shapePadding+2*f+t.shapeWidth;switch(t.textWrap){case"Wrap":case"AnyWhere":e>t.maximumLabelWidth||e+r>i.width?n.textCollection=ur(n.text,t.maximumLabelWidth?Math.min(t.maximumLabelWidth,i.width-o):i.width-o,t.textStyle,this.chart.enableRtl,"AnyWhere"===t.textWrap,null,this.chart.themeStyle.legendLabelFont):n.textCollection.push(n.text);n.textSize.height=u*n.textCollection.length}},u.prototype.convertHtmlEntities=function(n){var t=n.replace("&amp;","&").replace("&lt;","<").replace("&gt;",">").replace("&quot;",'"').replace("&nbsp;"," ").replace("&cent;","¢").replace("&pound;","£").replace("&yen;","¥").replace("&euro;","€").replace("&copy;","©").replace("&reg;","®");return t.replace("&#38;","&").replace("&#60;","<").replace("&#62;",">").replace("&#34;",'"').replace("&#160;"," ").replace("&#162;","¢").replace("&#163;","£").replace("&#165;","¥").replace("&#8364;","€").replace("&#169;","©").replace("&#174;","®")},u.prototype.getMaxColumn=function(n,t,i,r){var u=i,o,s,e;for(this.maxColumnWidth=Math.max.apply(null,n),o=0,s=n;o<s.length;o++)if(s[o],u+=this.maxColumnWidth,this.maxColumns++,u+i>t){u-=this.maxColumnWidth;this.maxColumns--;break}this.isPaging=u<r&&this.totalPages>1;u===i&&(u=t);this.maxColumns=Math.max(1,this.maxColumns);this.maxWidth=u;var c=this.maxColumnWidth+i,f=0,h=this.columnHeights.length;if(this.isPaging&&this.isVertical){for(e=1;e<h;e++)(c+=this.maxColumnWidth+i)>t&&(this.pageHeights.push(f!==e-1?Math.max.apply(null,this.columnHeights.slice(f,e-1)):this.columnHeights[f]),c=this.maxColumnWidth+i,f=e);this.pageHeights.push(f!==h-1?Math.max.apply(null,this.columnHeights.slice(f,h-1)):this.columnHeights[f]);this.totalPages=this.pageHeights.length}return u},u.prototype.getAvailWidth=function(n,t){if(!this.isVertical||"Auto"!==this.legend.layout||this.legend.maximumColumns>0){if(!this.isVertical&&"Vertical"!==this.legend.layout&&!(this.legend.maximumColumns>0)&&this.isPaging&&!this.legend.enablePages)return t-n-this.fivePixel}else t=this.maxWidth;return t-(2*this.legend.padding+this.legend.shapeWidth+this.legend.shapePadding)},u.prototype.getRenderPoint=function(n,t,i,r,u,f,e){var s=this.legend.padding,a=r.location.y+this.maxItemHeight/4+(r.textCollection.length>0?(r.textCollection.length-1)*this.maxItemHeight:0),h,c,l,o;!this.isVertical||"Auto"!==this.legend.layout||this.legend.maximumColumns>0?(h=this.legend.fixedWidth?this.maxColumnWidth:i+(this.legend.maximumLabelWidth?this.legend.maximumLabelWidth:r.textSize.width),c=r.location.x+(this.isRtlEnable?-h:h),("Auto"===this.legend.layout&&this.legend.maximumColumns>0?f%this.legend.maximumColumns==0:this.isWithinBounds(c,(this.legend.maximumLabelWidth?this.legend.maximumLabelWidth:n.textSize.width)+i-this.itemPadding,u,this.legend.shapeWidth/2)||"Vertical"===this.legend.layout)?(f!==e&&this.chartRowCount++,n.location.y=f===e?r.location.y:r.location.y+this.rowHeights[this.chartRowCount-2]+s,n.location.x=t.x):(n.location.y=r.location.y,n.location.x=f===e?r.location.x:c)):f===e||a+Math.max(n.textSize.height,this.legend.shapeHeight)+s>u.y+u.height?(n.location.x=r.location.x+(f===e?0:this.isRtlEnable?-this.maxColumnWidth:this.maxColumnWidth),n.location.y=t.y,l=this.legend.shapeWidth/2+s,this.pageXCollections.push(n.location.x+(this.isRtlEnable?l:-l))):(n.location.x=r.location.x,n.location.y=r.location.y+Math.max(r.textSize.height,this.legend.shapeHeight)+this.itemPadding);o=this.getAvailWidth(n.location.x,this.legendBounds.width);o=this.legend.maximumLabelWidth?Math.min(this.legend.maximumLabelWidth,o):o;"Ellipsis"===this.legend.textOverflow&&"Normal"===this.legend.textWrap&&(n.text=wi(+o.toFixed(4),n.text,this.legend.textStyle,this.chart.enableRtl,this.chart.themeStyle.legendLabelFont))},u.prototype.isWithinBounds=function(n,t,i,r){return this.isRtlEnable?n-t<i.x-r:n+t>i.x+i.width+r},u.prototype.getSmartLegendLocation=function(n,t,i){var r;switch(this.position){case"Left":r=(n.x-t.width-i.left)/2;t.x=n.x-t.width<i.left?t.x:n.x-t.width-r;break;case"Right":r=(this.chart.availableSize.width-i.right-(n.x+n.width+t.width))/2;t.x=n.x+n.width+t.width>this.chart.availableSize.width-i.right?t.x:n.x+n.width+r;break;case"Top":this.getTitleRect(this.chart);r=(n.y-t.height-(this.titleRect.y+this.titleRect.height))/2;t.y=n.y-t.height<i.top?t.y:n.y-t.height-r;break;case"Bottom":r=(this.chart.availableSize.height-i.bottom-(n.y+n.height+t.height))/2;t.y=n.y+n.height+t.height>this.chart.availableSize.height-i.bottom?t.y:n.y+n.height+r}},u.prototype.getTitleRect=function(n){if(!n.title)return null;var t=i.measureText(n.title,n.titleStyle,this.chart.themeStyle.legendTitleFont);this.titleRect=new i.Rect(n.availableSize.width/2-t.width/2,n.margin.top,t.width,t.height)},u.prototype.legendByIndex=function(n,t){for(var u,i=0,r=t;i<r.length;i++)if(u=r[i],u.pointIndex===n)return u;return null},u.prototype.click=function(n){var u=n.target.id.indexOf("_chart_legend_g_")>-1?n.target.firstChild.id:n.target.id,r=this.chart,a=[this.legendID+"_text_",this.legendID+"_shape_",this.legendID+"_shape_marker_"],f,o,s,t,c;for(this.chart.animateSeries=!1,f=0,o=a;f<o.length;f++)if(s=o[f],u.indexOf(s)>-1)if(t=parseInt(u.split(s)[1],10),this.chart.legendSettings.toggleVisibility&&!isNaN(t)){var e=this.chart.visibleSeries[0],i=ny(t,e.points),h=this.legendByIndex(t,this.legendCollections),l={legendText:h.text,legendShape:h.shape,chart:r.isBlazor?{}:r,series:e,point:i,name:ar,cancel:!1};(this.chart.trigger(ar,l),l.cancel)||(i.visible=!i.visible,h.visible=i.visible,e.sumOfPoints+=i.visible?i.y:-i.y,r.redraw=r.enableAnimation,this.sliceVisibility(t,i.visible),r.removeSvg(),nh(r),this.chart.refreshPoints(e.points),this.chart.calculateBounds(),c=document.getElementById(this.chart.element.id+"PointHover_Border"),c&&this.chart.pieSeriesModule.removeBorder(c,0),this.chart.accumulationTooltipModule&&this.chart.accumulationTooltipModule.removeTooltip(0),this.chart.renderElements())}else this.chart.accumulationSelectionModule&&!isNaN(t)?this.chart.accumulationSelectionModule.legendSelection(this.chart,0,t,n.target,n.type):this.chart.accumulationHighlightModule&&!isNaN(t)&&this.chart.accumulationHighlightModule.legendSelection(this.chart,0,t,n.target,n.type);u.indexOf(this.legendID+"_pageup")>-1?this.changePage(n,!0):u.indexOf(this.legendID+"_pagedown")>-1&&this.changePage(n,!1);r.redraw=!1},u.prototype.sliceVisibility=function(n,t){var i=this.chart.element.id+"_Series_0_Point_";this.chart.visibleSeries[0].dataLabel.visible&&(i=this.chart.element.id+"_datalabel_Series_0_",this.sliceAnimate(r(i+"g_"+n),t))},u.prototype.sliceAnimate=function(n,i){if(!n)return null;new t.Animation({}).animate(n,{duration:300,delay:0,name:i?"FadeIn":"FadeOut",end:function(n){n.element.style.visibility=i?"visible":"hidden"}})},u.prototype.getModuleName=function(){return"AccumulationLegend"},u.prototype.destroy=function(){this.removeEventListener()},u}(fs),sct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hct=function(n){function u(t){var i=n.call(this,t)||this;return i.rightSideRenderingPoints=[],i.leftSideRenderingPoints=[],i.id=t.element.id+"_datalabel_Series_",i}return sct(u,n),u.prototype.getDataLabelPosition=function(n,t,r,u){var e=this.isCircular()?this.isVariousRadius()?this.accumulation.pieSeriesModule.getLabelRadius(this.accumulation.visibleSeries[0],n):this.accumulation.pieSeriesModule.labelRadius:this.getLabelDistance(n,t),f;this.accumulation.title&&(f=i.measureText(this.accumulation.title,this.accumulation.titleStyle,this.accumulation.themeStyle.datalabelFont),this.titleRect=new i.Rect(this.accumulation.availableSize.width/2-f.width/2,this.accumulation.margin.top,f.width,f.height));this.getLabelRegion(n,t.position,r,e,this.marginValue);n.labelAngle=n.midAngle;n.labelPosition=t.position;this.accumulation.enableSmartLabels&&this.getSmartLabel(n,t,r,u)},u.prototype.getLabelRegion=function(n,t,r,u,f,e){void 0===e&&(e=0);var s=e||n.midAngle,o=yi(s,u,this.isCircular()?this.center:this.getLabelLocation(n,t));o.y="Inside"===t?o.y-r.height/2:o.y;o.x="Inside"===t?o.x-r.width/2:o.x;n.labelRegion=new i.Rect(o.x,o.y,r.width+2*f,r.height+2*f);"Outside"===t&&(n.labelRegion.y-=n.labelRegion.height/2,s>=90&&s<=270?n.labelRegion.x-=n.labelRegion.width+20:n.labelRegion.x+=20)},u.prototype.calculateLabelCollection=function(n,t){if(null!==n.argsData.template)return null;var u=n.labelPosition||t.position,f=this.isCircular()?this.isVariousRadius()?this.accumulation.pieSeriesModule.getLabelRadius(this.accumulation.visibleSeries[0],n):this.accumulation.pieSeriesModule.labelRadius:this.getLabelDistance(n,t),e=this.isVariousRadius()?this.accumulation.pieSeriesModule.getLabelRadius(this.accumulation.visibleSeries[0],n):this.accumulation.pieSeriesModule.radius-this.accumulation.pieSeriesModule.innerRadius,i=yi(n.midAngle,f,this.isCircular()?this.center:this.getLabelLocation(n,u)),r=t.maxWidth;r||(r="Outside"===u?this.isCircular()?i.x>=this.center.x?this.areaRect.x+this.areaRect.width-i.x:i.x-this.areaRect.x:i.x>=n.region.x?this.areaRect.x+this.areaRect.width-i.x:i.x-this.areaRect.x:this.isCircular()?e-20:n.region.width);-1!==n.label.indexOf("<br>")?n.labelCollection=n.label.split("<br>"):"Normal"===t.textWrap&&"Ellipsis"===t.textOverflow?n.labelCollection[0]=wi(r,n.label,n.argsData.font,this.accumulation.enableRtl,this.accumulation.themeStyle.datalabelFont):"Wrap"===t.textWrap||"AnyWhere"===t.textWrap?n.labelCollection=ur(n.label,r,n.argsData.font,this.accumulation.enableRtl,"AnyWhere"===t.textWrap,"Clip"===t.textOverflow,this.accumulation.themeStyle.datalabelFont):n.labelCollection[0]=n.label},u.prototype.getTextSize=function(n,t){for(var u,e=0,o=t.font,r=t.maxWidth?t.maxWidth:0,f=0;f<n.length;f++)u=i.measureText(n[f],o,this.accumulation.themeStyle.datalabelFont),r=Math.max(u.width,r),e+=u.height;return"Clip"===t.textOverflow&&"Normal"!==t.textWrap&&t.maxWidth&&(r=t.maxWidth),new i.Size(r,e)},u.prototype.getSmartLabel=function(n,t,r,u){var o=this.isCircular(),e=o?this.radius:this.getLabelDistance(n,t),f;if(e+=it(o?t.connectorStyle.length||"4%":"0px",e),f=this.findPreviousPoint(u,n.index,n.labelPosition),"Inside"===t.position?(n.labelRegion.height-=4,n.labelRegion.width-=4,(f&&f.labelRegion&&!t.enableRotation&&(pi(n.labelRegion,f.labelRegion)||this.isOverlapping(n,u))||!o&&!rb(n.region,n.labelRegion))&&(n.labelPosition="Outside",o||(e=this.getLabelDistance(n,t)),this.calculateLabelCollection(n,t),(r=this.getTextSize(n.labelCollection,t)).height+=4,r.width+=4,n.textSize=r,this.getLabelRegion(n,n.labelPosition,r,e,this.marginValue),(f=this.findPreviousPoint(u,n.index,n.labelPosition))&&(pi(n.labelRegion,f.labelRegion)||this.isConnectorLineOverlapping(n,f))&&this.setOuterSmartLabel(f,n,t.border.width,e,r,this.marginValue))):f&&f.labelRegion&&(pi(n.labelRegion,f.labelRegion)||this.isOverlapping(n,u)||this.isConnectorLineOverlapping(n,f))&&this.setOuterSmartLabel(f,n,t.border.width,e,r,this.marginValue),this.isOverlapping(n,u)&&("Pyramid"===this.accumulation.type||"Funnel"===this.accumulation.type)){var c=n.midAngle||0,s=o?this.radius:this.getLabelDistance(n,t),h=yi(c,-s,this.isCircular()?this.center:this.getLabelLocation(n,"OutsideLeft"));n.labelRegion=new i.Rect(h.x,h.y,r.width+2*this.marginValue,r.height+2*this.marginValue);n.labelRegion.y-=n.labelRegion.height/2;n.labelRegion.x=n.labelRegion.x-20-n.labelRegion.width;f&&f.labelRegion&&(pi(n.labelRegion,f.labelRegion)||this.isOverlapping(n,u)||this.isConnectorLineOverlapping(n,f))&&this.setOuterSmartLabel(f,n,t.border.width,s,r,this.marginValue)}},u.prototype.move=function(n,t,i,u){var h=this,f,e,o,s;n.target.textContent.indexOf("...")>-1?(f=n.target.id.split(this.id),2===f.length&&(e=parseInt(f[1].split("_text_")[0],10),o=parseInt(f[1].split("_text_")[1],10),isNaN(e)||isNaN(o)||(u&&v(this.accumulation.element.id+"_EJ2_Datalabel_Tooltip"),s=vk(e,this.accumulation.visibleSeries).points[o],uf(s.text||s.y.toString(),t,i,this.areaRect.width,this.accumulation.element.id+"_EJ2_Datalabel_Tooltip",r(this.accumulation.element.id+"_Secondary_Element"),null,null,this.accumulation.initialClipRect)))):v(this.accumulation.element.id+"_EJ2_Datalabel_Tooltip");u&&(clearTimeout(this.clearTooltip),this.clearTooltip=+setTimeout(function(){v(h.accumulation.element.id+"_EJ2_Datalabel_Tooltip")},1e3))},u.prototype.findPreviousPoint=function(n,t,i){for(var r=n[0],u=t-1;u>=0;u--)if((r=n[u]).visible&&r.labelVisible&&r.labelRegion&&r.labelPosition===i)return r;return null},u.prototype.isOverlapping=function(n,t){for(var i=n.index-1;i>=0;i--)if(t[i].visible&&t[i].labelVisible&&t[i].labelRegion&&n.labelRegion&&n.labelVisible&&pi(n.labelRegion,t[i].labelRegion))return!0;return!1},u.prototype.textTrimming=function(n,t,i,r,u){var f,e;if(pi(n.labelRegion,t)&&(f=n.labelRegion.width,"Right"===r?f=t.x-n.labelRegion.x:"Left"===r?(f=n.labelRegion.x-(t.x+t.width))<0&&(f+=n.labelRegion.width,n.labelRegion.x=t.x+t.width):"InsideRight"===r?f=t.x+t.width-n.labelRegion.x:"InsideLeft"===r?(f=n.labelRegion.x+n.labelRegion.width-t.x)<n.labelRegion.width&&(n.labelRegion.x=t.x):this.accumulation.enableSmartLabels&&this.setPointVisibileFalse(n),n.labelVisible&&n.labelRegion))for(-1!==n.label.indexOf("<br>")?n.labelCollection=n.label.split("<br>"):f<n.labelRegion.width&&("Normal"===u.textWrap&&"Ellipsis"===u.textOverflow?n.labelCollection[0]=wi(f-2*this.marginValue,n.label,i,this.accumulation.enableRtl,this.accumulation.themeStyle.datalabelFont):"Wrap"!==u.textWrap&&"AnyWhere"!==u.textWrap||(n.labelCollection=ur(n.label,f-2*this.marginValue,i,this.accumulation.enableRtl,"AnyWhere"===u.textWrap,"Clip"===u.textOverflow,this.accumulation.themeStyle.datalabelFont)),n.labelRegion.width=f),e=0;e<n.labelCollection.length;e++)if(3===n.labelCollection[e].length&&n.labelCollection[e].indexOf("...")>-1){this.setPointVisibileFalse(n);break}},u.prototype.setPointVisibileFalse=function(n){n.labelVisible=!1;n.labelRegion=null},u.prototype.setPointVisibleTrue=function(n){n.labelVisible=!0},u.prototype.setOuterSmartLabel=function(n,t,i,r,u,f){if(this.isCircular()){var e=this.getOverlappedAngle(n.labelRegion,t.labelRegion,t.midAngle,2*i);for(this.getLabelRegion(t,"Outside",u,r,f,e),e>t.endAngle&&(e=t.midAngle),t.labelAngle=e;t.labelVisible&&(pi(n.labelRegion,t.labelRegion)||e<=n.labelAngle||e<=.9*t.midAngle||this.isConnectorLineOverlapping(t,n))&&!(e>t.endAngle);)t.labelAngle=e,this.getLabelRegion(t,"Outside",u,r,f,e),e+=.1}else this.setSmartLabelForSegments(t,n)},u.prototype.setSmartLabelForSegments=function(n,t){var r=n.labelRegion,i="Funnel"===this.accumulation.type?t.labelRegion.y-(r.y+r.height):n.labelRegion.y-(t.labelRegion.y+t.labelRegion.height);i<0&&(n.labelRegion.y+="Funnel"===this.accumulation.type?i:-i)},u.prototype.isConnectorLineOverlapping=function(n,t){var f,r,i,e,u;return!this.isCircular()&&n.labelRegion.x<n.region.x&&(f="outsideLeft"),r=this.getLabelLocation(n,f),i=new h(0,0),this.getEdgeOfLabel(n.labelRegion,n.labelAngle,i,0,n),e=this.getLabelLocation(t),u=new h(0,0),this.getEdgeOfLabel(t.labelRegion,t.labelAngle,u,0,n),this.isLineRectangleIntersect(r,i,n.labelRegion)||this.isLineRectangleIntersect(r,i,t.labelRegion)||this.isLineRectangleIntersect(e,u,n.labelRegion)},u.prototype.isLineRectangleIntersect=function(n,t,i){var u=[new h(Math.round(i.x),Math.round(i.y)),new h(Math.round(i.x+i.width),Math.round(i.y)),new h(Math.round(i.x+i.width),Math.round(i.y+i.height)),new h(Math.round(i.x),Math.round(i.y+i.height))],r;for(n.x=Math.round(n.x),n.y=Math.round(n.y),t.x=Math.round(t.x),t.y=Math.round(t.y),r=0;r<u.length;r++)if(this.isLinesIntersect(n,t,u[r],u[(r+1)%u.length]))return!0;return!1},u.prototype.isLinesIntersect=function(n,t,i,r){var e=t.y-n.y,o=n.x-t.x,a=e*n.x+o*n.y,s=r.y-i.y,h=i.x-r.x,v=s*i.x+h*i.y,c=e*h-s*o;if(0!==c){var u=(h*a-o*v)/c,f=(e*v-s*a)/c,l=Math.min(n.x,t.x)<=u&&u<=Math.max(n.x,t.x);return(l=(l=l&&Math.min(n.y,t.y)<=f&&f<=Math.max(n.y,t.y))&&Math.min(i.x,r.x)<=u&&u<=Math.max(i.x,r.x))&&Math.min(i.y,r.y)<=f&&f<=Math.max(i.y,r.y)}return!1},u.prototype.getOverlappedAngle=function(n,t,i,r){var u=n.x;return i>=90&&i<=270?(t.y=n.y-(r+t.height/2),u=n.x+n.width):t.y=n.y+n.height+r,vw(this.center,new h(u,t.y))},u.prototype.getConnectorPath=function(n,t,i,r){var l;void 0===r&&(r=0);var o=i.connectorStyle,s=this.isCircular()?this.isVariousRadius()?this.accumulation.pieSeriesModule.getLabelRadius(this.accumulation.visibleSeries[0],t):this.labelRadius:this.getLabelDistance(t,i),f=this.getConnectorStartPoint(t,o),c=this.accumulation.enableSmartLabels?t.midAngle:r||t.midAngle,u=new h(0,0),e=this.getEdgeOfLabel(n,c,u,o.width,t);return"Curve"===o.type?this.isCircular()?(l=s-(this.isVariousRadius()?it(t.sliceRadius,this.accumulation.pieSeriesModule.size/2):this.radius),t.isLabelUpdated?u=this.getPerpendicularDistance(f,t):(u=yi(c,s-l/2,this.center),"Outside"===t.labelPosition&&"Inside"===i.position&&(u=yi(c,s-1.25*l,this.center))),"M "+f.x+" "+f.y+" Q "+u.x+" "+u.y+" "+e.x+" "+e.y):this.getPolyLinePath(f,e):"M "+f.x+" "+f.y+" L "+u.x+" "+u.y+" L "+e.x+" "+e.y},u.prototype.getPolyLinePath=function(n,t){var e=[n,t],r,i,f,u;if(n.y===t.y)return"M "+n.x+" "+n.y+" L "+t.x+" "+t.y;for(r="M",i=0;i<=16;i++)f=i/16,u=this.getBezierPoint(f,e,0,2),r+=u.x+","+u.y,16!==i&&(r+=" L");return r},u.prototype.getBezierPoint=function(n,t,i,r){if(1===r)return t[i];var u=this.getBezierPoint(n,t,i,r-1),f=this.getBezierPoint(n,t,i+1,r-1),e=(u.x,u.x),o=(u.y,u.y),s=(1-n)*e+n*(f.x,f.x),h=(1-n)*o+n*(f.y,f.y);return u.x,{x:s,y:h}},u.prototype.getEdgeOfLabel=function(n,t,i,r,u){void 0===r&&(r=1);var f=new h(n.x,n.y);return t>=90&&t<=270?(f.x+=n.width+r/2+10,f.y+=n.height/2,i.x=f.x+10,i.y=f.y):u&&u.region&&u.region.x>u.labelRegion.x?(f.x+=2*r+n.width+10,f.y+=n.height/2,i.x=f.x+10,i.y=f.y):(f.x-=10-r/2,f.y+=n.height/2,i.x=f.x-10,i.y=f.y),f},u.prototype.getLabelDistance=function(n,t){var i;if((n.labelPosition&&t.position!==n.labelPosition||t.connectorStyle.length&&"Outside"===t.position)&&(i=it(t.connectorStyle.length||"70px",this.accumulation.initialClipRect.width),i<this.accumulation.initialClipRect.width))return i;var r,u=n.labelPosition||t.position,f=this.accumulation.visibleSeries[0],e=(this.accumulation.initialClipRect.width-f.triangleSize.width)/2;switch(u){case"Inside":return 0;case"Outside":return r=n.symbolLocation.x+n.labelOffset.x,this.accumulation.initialClipRect.width-r-e}},u.prototype.getLabelLocation=function(n,t){var i,r;if(void 0===t&&(t="Outside"),"Pie"!==this.accumulation.type&&"Trapezoidal"!==this.accumulation.series[0].funnelMode){t="OutsideLeft"===t?"OutsideLeft":n.labelPosition||t;i={x:n.symbolLocation.x,y:n.symbolLocation.y-n.labelOffset.y};switch(t){case"Inside":i.y=n.region.y+n.region.height/2;break;case"Outside":i.x+=n.labelOffset.x;break;case"OutsideLeft":i.x-=n.labelOffset.x}return i}return"Trapezoidal"===this.accumulation.series[0].funnelMode&&"Funnel"===this.accumulation.type?(r={x:n.symbolLocation.x,y:n.symbolLocation.y},"Outside"===t&&(r.x=n.labelOffset.x),r):yi(n.midAngle,this.isVariousRadius()?it(n.sliceRadius,this.accumulation.pieSeriesModule.seriesRadius):this.radius,this.center)},u.prototype.getConnectorStartPoint=function(n,t){var i;return!this.isCircular()&&n.region.x>n.labelRegion.x&&(i="OutsideLeft"),this.isCircular()?yi(n.midAngle,(this.isVariousRadius()?it(n.sliceRadius,this.accumulation.pieSeriesModule.seriesRadius):this.radius)-t.width,this.center):this.getLabelLocation(n,i)},u.prototype.findAreaRect=function(){this.areaRect=new i.Rect(0,0,this.accumulation.availableSize.width,this.accumulation.availableSize.height);var n=this.accumulation.margin;vr(this.areaRect,new wr(n.left,n.right,n.top,n.bottom))},u.prototype.renderDataLabel=function(n,i,r,u,f,e,o){var h=this.accumulation.element.id+"_datalabel_Series_"+f+"_",a=this.accumulation.renderer.createGroup({id:h+"g_"+n.index}),v={width:i.border.width,color:i.border.color},y=t.extend({},t.getValue("properties",i.font),null,!0),s,c,l;n.label=this.getDatalabelText(i.format,this.accumulation,n.originalText||n.y.toString());s={cancel:!1,name:ie,series:this.accumulation.visibleSeries[0],point:n,text:n.label,border:v,color:i.fill,template:this.accumulation.enableHtmlSanitizer?this.accumulation.sanitize(i.template):i.template,font:y};this.accumulation.trigger(ie,s);n.argsData=s;c=null!==s.template;n.labelVisible=!s.cancel;n.text=n.label=s.text;n.labelCollection=[];this.marginValue=s.border.width?5+s.border.width:1;l=t.createElement("div",{id:this.accumulation.element.id+"_Series_0_DataLabel_"+n.index,styles:"position: absolute;background-color:"+s.color+";"+ko(i.font,this.accumulation.themeStyle.datalabelFont)+";border:"+s.border.width+"px solid "+s.border.color+";"});this.calculateLabelSize(c,l,n,u,s,a,h,i,o)},u.prototype.getDatalabelText=function(n,t,i){if(Number(i)){var r=null!==n.match("{value}"),u=t.intl.getNumberFormat({format:r?"":n,useGrouping:t.useGroupingSeparator});i=r?n.replace("{value}",u(parseFloat(i))):u(parseFloat(i))}return i},u.prototype.calculateLabelSize=function(n,t,i,r,u,f,e,o,s,h,c){this.calculateLabelCollection(i,o);var l=n?c?{width:h.width,height:h.height}:this.getTemplateSize(t,i,u,s,n,r,f,e,o):this.getTextSize(i.labelCollection,o);l.height+=4;l.width+=4;i.textSize=l;i.templateElement=t;this.getDataLabelPosition(i,o,l,r);i.labelRegion&&this.correctLabelRegion(i.labelRegion,i.textSize)},u.prototype.drawDataLabels=function(n,u,f,e,s){var a,k,d=n.leftSidePoints.concat(n.rightSidePoints),b,g,c,y,p,w,it,rt,ut;for(d.sort(function(n,t){return n.index-t.index}),"Pie"===n.type&&this.accumulation.enableSmartLabels&&this.extendedLabelsCalculation(),b=0,g=d;b<g.length;b++)if(c=g[b],!t.isNullOrUndefined(c.argsData)&&!t.isNullOrUndefined(c.y)){this.finalizeDatalabels(c,d,u);var nt=document.getElementById(this.accumulation.element.id+"_Series_0_Point_"+c.index),v=this.accumulation.element.id+"_datalabel_Series_0_",l=this.accumulation.renderer.createGroup({id:v+"g_"+c.index});if(l.setAttribute("aria-hidden","true"),y=void 0,p=void 0,c.visible&&c.labelVisible){if(a=k=u.angle,c.argsData.template)this.setTemplateStyle(c.templateElement,c,e,u.font.color,c.color,s);else{y=new h(c.labelRegion.x+this.marginValue,c.labelRegion.y+3*c.textSize.height/(4*c.labelCollection.length)+this.marginValue);var et=(p=r(v+"shape_"+c.index))?new h(+p.getAttribute("x"),+p.getAttribute("y")):null,ot=c.textSize.width,tt="rotate("+(k=u.enableRotation?0===a?"Outside"===c.labelPosition?0:c.midAngle>=90&&c.midAngle<=260?c.midAngle+180:c.midAngle:a>360?a-360:a<-360?a+360:a:0)+","+(y.x+ot/2)+","+y.y+")";c.transform=tt;o(!1,l,this.accumulation.renderer.drawRectangle(new ft(v+"shape_"+c.index,c.argsData.color,c.argsData.border,1,c.labelRegion,u.rx,u.ry,tt,n.dataLabel.border.dashArray)),s,!0,"x","y",et,null,!1,!1,null,this.accumulation.duration);ct(this.accumulation.renderer,new i.TextOption(v+"text_"+c.index,y.x,y.y,this.accumulation.enableRtl?"end":"start",c.labelCollection,tt,"auto",k),c.argsData.font,c.argsData.font.color||this.getSaturatedColor(c,c.argsData.color),l,!1,s,!0,!1,this.accumulation.duration,null,0,null,null,!0,this.accumulation.themeStyle.datalabelFont);p=null}if(nt&&"None"!==this.accumulation.highlightMode)for(l.setAttribute("class",nt.getAttribute("class")?nt.getAttribute("class"):""),w=0;w<l.children.length;w++)it=document.getElementById(l.children[w].id),it&&(l.children[w].style.opacity=it.style.opacity);(this.accumulation.accumulationLegendModule&&this.accumulation.legendSettings.visible&&!this.accumulation.redraw&&("Outside"===u.position||this.accumulation.enableSmartLabels)&&this.accumulation.visibleSeries[0].findMaxBounds(this.accumulation.visibleSeries[0].labelBound,c.labelRegion),"Outside"===c.labelPosition)&&(rt=r(v+"connector_"+c.index),ut=rt?rt.getAttribute("d"):"",o(!1,l,this.accumulation.renderer.drawPath(new i.PathOption(v+"connector_"+c.index,"transparent",u.connectorStyle.width,u.connectorStyle.color||c.color,1,u.connectorStyle.dashArray,this.getConnectorPath(t.extend({},c.labelRegion,null,!0),c,u,c.labelAngle))),s,!0,null,null,null,ut,!1,!1,null,this.accumulation.duration));o(!1,f,l,s)}else r(l.id)&&r(l.id).parentNode.removeChild(r(l.id))}"Pie"===this.accumulation.type&&"Normal"===u.textWrap&&"Clip"===u.textOverflow&&this.dataLabelClipPath(u,f)},u.prototype.dataLabelClipPath=function(n,t){var s,h=this.accumulation.element.id+"_datalabel_Series_0_",c=this.accumulation.renderer.createClipPath({id:h+"clipPath"}),e=this.accumulation.pieSeriesModule.pieBaseRadius,r;if("Inside"===n.position)s=this.accumulation.renderer.drawCircle(new ef(h+"clipPath_rect","transparent",{width:0},0,this.center.x,this.center.y,e));else if(n.maxWidth){var f=this.center.x-e-it(n.connectorStyle.length||"4%",e)-n.maxWidth,a=this.center.y-e-it(n.connectorStyle.length||"4%",e)-n.maxWidth,l=2*(e+it(n.connectorStyle.length||"4%",e)+n.maxWidth),u=l;this.accumulation.legendSettings.visible&&(r=this.accumulation.accumulationLegendModule,"Left"===r.position?(u=r.legendBounds.x+r.legendBounds.width-f>0?u-(r.legendBounds.width-f):u,f=r.legendBounds.x+r.legendBounds.width<f?f:r.legendBounds.x+r.legendBounds.width):"Right"===r.position&&(u=f+u-r.legendBounds.x>0?u-(f+u-r.legendBounds.x):u));s=this.accumulation.renderer.drawRectangle(new ft(h+"clipPath_rect","transparent",{width:0},0,new i.Rect(f,a,l,u),0,0))}("Inside"===n.position||n.maxWidth)&&(c.appendChild(s),o(!1,this.accumulation.svgObject,c),t.style.cssText="clip-path:url(#"+c.id+")")},u.prototype.finalizeDatalabels=function(n,t,r){var u,f,e;((this.isOverlapping(n,t)||this.titleRect&&n.labelRegion&&pi(n.labelRegion,this.titleRect))&&this.isCircular()&&"Outside"===n.labelPosition&&this.accumulation.enableSmartLabels&&this.setPointVisibileFalse(n),this.accumulation.accumulationLegendModule&&this.accumulation.legendSettings.visible&&n.labelVisible&&n.labelRegion&&!r.maxWidth&&("Clip"!==r.textOverflow||"Normal"!==r.textWrap))&&(u=this.accumulation.accumulationLegendModule.legendBounds,"Pie"!==this.accumulation.visibleSeries[0].type&&"Left"===this.accumulation.legendSettings.position&&"Outside"===r.position&&(n.labelRegion.x=n.labelRegion.x+u.width),f=this.accumulation.legendSettings.border.width/2,this.textTrimming(n,new i.Rect(u.x-f,u.y-f,u.width+2*f,u.height+2*f),r.font,this.accumulation.accumulationLegendModule.position,r));n.labelVisible&&n.labelRegion&&!r.maxWidth&&("Clip"!==r.textOverflow||"Normal"!==r.textWrap)&&(e=this.isCircular()?n.labelRegion.x>=this.center.x?"InsideRight":"InsideLeft":n.labelRegion.x>=n.region.x?"InsideRight":"InsideLeft",this.textTrimming(n,this.areaRect,r.font,e,r));n.labelVisible&&n.labelRegion&&!r.maxWidth&&"Clip"!==r.textOverflow&&this.accumulation.enableSmartLabels&&(n.labelRegion.y+n.labelRegion.height/2>this.areaRect.y+this.areaRect.height||n.labelRegion.y<this.areaRect.y||n.labelRegion.x<this.areaRect.x||n.labelRegion.x+n.labelRegion.width>this.areaRect.x+this.areaRect.width)&&this.setPointVisibileFalse(n)},u.prototype.getTemplateSize=function(n,t,i,r,u,f,e,o,s){var h=go(n=ee(n,t.index,i.template,this.accumulation,t,this.accumulation.visibleSeries[0],this.accumulation.element.id+"_DataLabel",0,i,u,f,e,o,s,r),r);return{width:h.width,height:h.height}},u.prototype.setTemplateStyle=function(n,t,i,r,u,f){if(n.style.left=t.labelRegion.x+"px",n.style.top=t.labelRegion.y+"px",n.style.color=r||this.getSaturatedColor(t,"Inside"===t.labelPosition?u:this.getLabelBackground(t)),this.accumulation.isBlazor){var e=this.isCircular()?t.labelRegion.x>=this.center.x?"InsideRight":"InsideLeft":t.labelRegion.x>=t.region.x?"InsideRight":"InsideLeft";n.style.transform="InsideRight"===e?"translate(0%, -50%)":"translate(-100%, -50%)"}n.childElementCount&&(o(!1,i,n,f,!0,"left","top"),this.doTemplateAnimation(this.accumulation,n))},u.prototype.getSaturatedColor=function(n,t){var i,r=wu(vi(i="transparent"===(i=this.marginValue>=1?"transparent"===t?this.getLabelBackground(n):t:this.getLabelBackground(n))?this.accumulation.theme.indexOf("Dark")>-1||this.accumulation.theme.indexOf("HighContrast")>-1?"black":"white":i)),u=Math.round((299*r.r+587*r.g+114*r.b)/1e3);return"Bootstrap5"===this.accumulation.theme?"#212529":"Bootstrap5Dark"===this.accumulation.theme?"#DEE2E6":u>=128?this.accumulation.theme.indexOf("Tailwind3")>-1?"#111827":"black":this.accumulation.theme.indexOf("Tailwind3")>-1?"#FFFFFF":"white"},u.prototype.doTemplateAnimation=function(n,i){var r=n.visibleSeries[0],u=r.animation.delay+r.animation.duration;(r.animation.enable&&"Disable"!==t.animationMode||"Enable"===t.animationMode)&&n.animateSeries&&(i.style.visibility="hidden",bo(i,u,200,"ZoomIn"))},u.prototype.getLabelBackground=function(n){return"Outside"===n.labelPosition?this.accumulation.background||this.accumulation.themeStyle.background:n.y?n.color:this.accumulation.theme.indexOf("dark")?"white":"black"},u.prototype.correctLabelRegion=function(n,t,i){void 0===i&&(i=4);n.height-=i;n.width-=i;n.x+=i/2;n.y+=i/2;t.height-=i;t.width-=i},u.prototype.getModuleName=function(){return"AccumulationDataLabel"},u.prototype.destroy=function(){},u.prototype.extendedLabelsCalculation=function(){var t=this,n=this.accumulation.series[0];n.rightSidePoints.forEach(function(n,i,r){n.initialLabelRegion=n.labelRegion;n.isLabelUpdated=0;t.skipPoints(n,r,i)});n.leftSidePoints.forEach(function(n,i,r){n.initialLabelRegion=n.labelRegion;n.isLabelUpdated=0;t.skipPoints(n,r,i)});this.arrangeLeftSidePoints(n);this.isIncreaseAngle=!1;this.arrangeRightSidePoints(n)},u.prototype.arrangeRightSidePoints=function(n){var s,h,o,f,t=n.rightSidePoints.filter(function(n){return n.labelVisible&&"Outside"===n.labelPosition}),e,u,r,i;for(this.rightSideRenderingPoints=t,u=t[t.length-1],u&&u.labelAngle>90&&u.labelAngle<270&&(this.isIncreaseAngle=!0,this.changeLabelAngle(u,89)),r=t.length-1;r>=0;r--)if(f=t[r],e=t[r+1],(!this.isOverlapWithNext(f,t,r)||!f.labelVisible)&&(f.labelAngle<=90||f.labelAngle>=270))h&&e&&!e.isLabelUpdated&&(s=!0);else if(o=u.labelAngle+10,h=!0,s?this.isIncreaseAngle=!1:o>90&&o<270&&e.isLabelUpdated&&(this.isIncreaseAngle=!0),this.isIncreaseAngle)for(i=r+1;i>0;i--)this.decreaseAngle(t[i],t[i-1],n,!0);else for(i=r+1;i<t.length;i++)this.increaseAngle(t[i-1],t[i],n,!0)},u.prototype.arrangeLeftSidePoints=function(n){var f,u,e,o,s=this,t=n.leftSidePoints.filter(function(n){return n.labelVisible&&"Outside"===n.labelPosition}),r,i;for(this.leftSideRenderingPoints=t,r=0;r<t.length;r++)if(u=t[r],f=t[r-1],(!this.isOverlapWithPrevious(u,t,r)||!u.labelVisible)&&u.labelAngle<270)e&&f&&f.isLabelUpdated&&(o=!0);else if(e=!0,o&&(this.isIncreaseAngle=!1),this.isIncreaseAngle)for(i=r;i<t.length;i++)this.increaseAngle(t[i-1],t[i],n,!1);else for(i=r;i>0;i--)this.decreaseAngle(t[i],t[i-1],n,!1),t.filter(function(n,i){n.isLabelUpdated&&t[i].labelAngle-10<100&&(s.isIncreaseAngle=!0)})},u.prototype.decreaseAngle=function(n,i,r,u){var e,f;if(t.isNullOrUndefined(n)||t.isNullOrUndefined(i))return null;if(e=1,u)for(;pi(n.labelRegion,i.labelRegion)||!this.isVariousRadius()&&!(i.labelRegion.height+i.labelRegion.y<n.labelRegion.y);){if((f=i.midAngle-e)<0&&(f=360+f),f<=270&&f>=90){f=270;this.isIncreaseAngle=!0;break}this.changeLabelAngle(i,f);e++}else for(n.labelAngle>270&&(this.changeLabelAngle(n,270),i.labelAngle=270);pi(n.labelRegion,i.labelRegion)||!this.isVariousRadius()&&n.labelRegion.y+n.labelRegion.height>i.labelRegion.y;){if(!((f=i.midAngle-e)<=270&&f>=90)){f=90;this.isIncreaseAngle=!0;break}if(this.changeLabelAngle(i,f),pi(n.labelRegion,i.labelRegion)&&!r.leftSidePoints.indexOf(i)&&f-1<90&&f-1>270){this.changeLabelAngle(n,n.labelAngle+1);this.arrangeLeftSidePoints(r);break}e++}},u.prototype.increaseAngle=function(n,i,r,u){var e,f;if(t.isNullOrUndefined(n)||t.isNullOrUndefined(i))return null;if(e=1,u)for(;pi(n.labelRegion,i.labelRegion)||!this.isVariousRadius()&&!(n.labelRegion.y+n.labelRegion.height<i.labelRegion.y);){if((f=i.midAngle+e)<270&&f>90){f=90;this.isIncreaseAngle=!0;break}if(this.changeLabelAngle(i,f),pi(n.labelRegion,i.labelRegion)&&f+1>90&&f+1<270&&this.rightSideRenderingPoints.indexOf(i)===this.rightSideRenderingPoints.length-1){this.changeLabelAngle(n,n.labelAngle-1);i.labelRegion=i.initialLabelRegion;this.arrangeRightSidePoints(r);break}if(e>360)break;e++}else for(;pi(n.labelRegion,i.labelRegion)||!this.isVariousRadius()&&n.labelRegion.y<i.labelRegion.y+i.labelRegion.height;){if(!((f=i.midAngle+e)<270&&f>90)){f=270;this.isIncreaseAngle=!1;break}if(this.changeLabelAngle(i,f),e>360)break;e++}},u.prototype.changeLabelAngle=function(n,t){var i,r=this.accumulation.series[0].dataLabel,u,f;this.isVariousRadius()&&(i=this.accumulation.pieSeriesModule.getLabelRadius(this.accumulation.visibleSeries[0],n));u="Outside"===n.labelPosition&&this.accumulation.enableSmartLabels&&"Inside"===r.position?this.radius+it(r.connectorStyle.length||"4%",this.accumulation.pieSeriesModule.size/2):this.isVariousRadius()?i:this.accumulation.pieSeriesModule.labelRadius+10;f=this.isVariousRadius()?i:u;this.getLabelRegion(n,"Outside",n.textSize,f,this.marginValue,t);n.isLabelUpdated=1;n.labelAngle=t},u.prototype.isOverlapWithPrevious=function(n,t,i){for(var r=0;r<i;r++)if(r!==t.indexOf(n)&&t[r].visible&&t[r].labelVisible&&t[r].labelRegion&&n.labelRegion&&n.labelVisible&&pi(n.labelRegion,t[r].labelRegion))return!0;return!1},u.prototype.isOverlapWithNext=function(n,t,i){for(var r=i;r<t.length;r++)if(r!==t.indexOf(n)&&t[r].visible&&t[r].labelVisible&&t[r].labelRegion&&n.labelRegion&&n.labelVisible&&pi(n.labelRegion,t[r].labelRegion))return!0;return!1},u.prototype.skipPoints=function(n,t,i){var u,r;if(i>0&&(n.midAngle<285&&n.midAngle>255||n.midAngle<105&&n.midAngle>75))u=t[i-1],r=n.endAngle%360-n.startAngle%360,(o=u.endAngle%360-u.startAngle%360)<=r&&r<5&&u.labelVisible&&this.setPointVisibleTrue(n);else if(i>1&&(n.midAngle<300&&n.midAngle>240||n.midAngle<120&&n.midAngle>60)){var f=t[i-1],e=t[i-2],o=(r=n.endAngle%360-n.startAngle%360,f.endAngle%360-f.startAngle%360),s=e.endAngle%360-e.startAngle%360;r<3&&o<3&&s<3&&f.labelVisible&&n.labelVisible&&this.setPointVisibleTrue(n)}},u.prototype.getPerpendicularDistance=function(n,t){var i=10+10*Math.sin(t.midAngle*Math.PI/360);return t.midAngle>270&&t.midAngle<360?new h(n.x+i*Math.cos((360-t.midAngle)*Math.PI/180),n.y-i*Math.sin((360-t.midAngle)*Math.PI/180)):t.midAngle>0&&t.midAngle<90?new h(n.x+i*Math.cos(t.midAngle*Math.PI/180),n.y+i*Math.sin(t.midAngle*Math.PI/180)):t.midAngle>0&&t.midAngle<90?new h(n.x-i*Math.cos((t.midAngle-90)*Math.PI/180),n.y+i*Math.sin((t.midAngle-90)*Math.PI/180)):new h(n.x-i*Math.cos((t.midAngle-180)*Math.PI/180),n.y-i*Math.sin((t.midAngle-180)*Math.PI/180))},u}(bc),cct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),lct=function(n){function i(t){var i=n.call(this,t)||this;return i.accumulation=t,i.addEventListener(),i.template=i.accumulation.tooltip.template,i}return cct(i,n),i.prototype.addEventListener=function(){this.accumulation.isDestroyed||(this.accumulation.on(t.Browser.isPointer?"pointerleave":"mouseleave",this.mouseLeaveHandler,this),this.accumulation.on(t.Browser.touchMoveEvent,this.mouseMoveHandler,this),this.accumulation.on(t.Browser.touchEndEvent,this.mouseUpHandler,this))},i.prototype.mouseLeaveHandler=function(){this.removeTooltip(this.accumulation.tooltip.fadeOutDuration)},i.prototype.mouseUpHandler=function(n){var t=this.accumulation;t.tooltip.enable&&t.isTouch&&ht(t.mouseX,t.mouseY,t.initialClipRect)&&(this.tooltip(n),this.removeTooltip(2e3))},i.prototype.mouseMoveHandler=function(n){var t=this.accumulation;t.tooltip.enable&&ht(t.mouseX,t.mouseY,t.initialClipRect)&&this.tooltip(n)},i.prototype.tooltip=function(n){this.renderSeriesTooltip(this.accumulation,this.getPieData(n,this.accumulation))},i.prototype.renderSeriesTooltip=function(n,t){var i=this.getElement(this.element.id+"_tooltip_svg"),r=i&&parseInt(i.getAttribute("opacity"),10)>0,f=this.getTooltipElement(r),u=!r;if(this.currentPoints=[],!t.point||this.previousPoints[0]&&this.previousPoints[0].point===t.point)!t.point&&this.isRemove&&(this.removeTooltip(this.accumulation.tooltip.fadeOutDuration),this.isRemove=!1);else{if(this.previousPoints[0]&&t.point.index===this.previousPoints[0].point.index&&t.series.index===this.previousPoints[0].series.index)return null;this.pushData(t,u,f,!1)&&this.triggerTooltipRender(t,u,this.getTooltipText(t,n.tooltip),this.findHeader(t))}},i.prototype.triggerTooltipRender=function(n,i,r,u){var f=this,e=this.chart.tooltip,s={cancel:!1,name:gu,text:r,point:n.point,textStyle:this.textStyle,series:this.accumulation.isBlazor?{}:n.series,headerText:u,data:{pointX:n.point.x,pointY:n.point.y,seriesIndex:n.series.index,pointIndex:n.point.index,pointText:n.point.text,seriesName:n.series.name}},o=function(r){r.cancel?(f.removeHighlight(),t.remove(f.getElement(f.element.id+"_tooltip"))):(f.formattedText=f.formattedText.concat(r.text),f.text=f.formattedText,f.headerText=r.headerText,f.createTooltip(f.chart,i,{x:null!==e.location.x?e.location.x:n.point.symbolLocation.x,y:null!==e.location.y?e.location.y:n.point.symbolLocation.y},n.series.clipRect,n.point,e.enableMarker?["Circle"]:[],0,f.chart.initialClipRect,!1,null,n.point,f.template?f.accumulation.enableHtmlSanitizer?f.accumulation.sanitize(f.template):r.template:""));f.isRemove=!0};o.bind(this,n);this.chart.trigger(gu,s,o)},i.prototype.getPieData=function(n,i){var e=uu(n.target.id,!0),r,u,f;return!isNaN(e.series)&&(r=e.series,u=e.point,!(t.isNullOrUndefined(r)||isNaN(r)||t.isNullOrUndefined(u)||isNaN(u))&&(f=this.getSeriesFromIndex(r,i.visibleSeries),f.enableTooltip))?new is(f.points[u],f):new is(null,null)},i.prototype.getSeriesFromIndex=function(n,t){return t[0]},i.prototype.getTooltipText=function(n,t){var r=n.series,i=t.format?t.format:this.accumulation.theme.indexOf("Tailwind3")>-1?"${point.x} : ${point.y}":"${point.x} : <b>${point.y}<\/b>";return i=this.accumulation.useGroupingSeparator?i.replace("${point.y}","${point.separatorY}"):i,this.parseTemplate(n.point,r,i)},i.prototype.findHeader=function(n){return""===this.header?"":(this.header=this.parseTemplate(n.point,n.series,this.header),""!==this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()?this.header:"")},i.prototype.parseTemplate=function(n,t,i){for(var l,f,o,r,u,s,h=RegExp,e=0,c=Object.keys(n);e<c.length;e++)u=new h("${point."+(r=c[e])+"}","gm"),l="x"===r&&this.accumulation.useGroupingSeparator&&"number"==typeof n[r]?this.accumulation.intl.formatNumber(n.x,{useGrouping:!0}):n[r],i=i.replace(u.source,l);for(f=0,o=Object.keys(Object.getPrototypeOf(t));f<o.length;f++)u=new h("${series."+(r=o[f])+"}","gm"),s=t[r],i=i.replace(u.source,s);return i},i.prototype.getModuleName=function(){return"AccumulationTooltip"},i.prototype.destroy=function(){},i}(pc),act=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pk=function(n){function i(t){var i=n.call(this,t)||this;return i.accumulation=t,i.renderer=t.renderer,i.addEventListener(),i}return act(i,n),i.prototype.addEventListener=function(){this.accumulation.isDestroyed||(this.accumulation.on(t.Browser.touchMoveEvent,this.mouseMove,this),this.accumulation.on("click",this.mouseClick,this))},i.prototype.removeEventListener=function(){this.accumulation.isDestroyed||(this.accumulation.off(t.Browser.touchMoveEvent,this.mouseMove),this.accumulation.off("click",this.mouseClick))},i.prototype.initPrivateVariables=function(n){this.styleId=n.element.id+"_ej2_chart_selection";this.unselected=n.element.id+"_ej2_deselected";this.selectedDataIndexes=[];this.rectPoints=null},i.prototype.invokeSelection=function(n){this.initPrivateVariables(n);this.series=t.extend({},n.visibleSeries,null,!0);this.seriesStyles();this.currentMode=n.selectionMode;this.selectDataIndex(this.concatIndexes(n.selectedDataIndexes,this.selectedDataIndexes),n)},i.prototype.generateStyle=function(n,t){return n.selectionStyle||this.styleId+"_series_"+n.index+"_point_"+t},i.prototype.findElements=function(n,t,i){return[this.getElementByIndex(i)]},i.prototype.getElementByIndex=function(n){var t=this.control.element.id+"_Series_"+n.series+"_Point_"+n.point;return document.getElementById(t)},i.prototype.isAlreadySelected=function(n,t){var u,r,i;if("mousemove"===t?(this.currentMode=this.accumulation.highlightMode,this.highlightDataIndexes=[],this.styleId=this.accumulation.element.id+"_ej2_chart_highlight"):"click"===t&&(this.currentMode=this.accumulation.selectionMode,this.styleId=this.accumulation.element.id+"_ej2_chart_selection"),"None"!==this.accumulation.highlightMode&&"None"===this.accumulation.selectionMode&&"click"===t)return!1;if("None"!==this.accumulation.highlightMode&&this.previousSelectedElement&&this.previousSelectedElement[0])for(u=n.parentNode.id,r=void 0,n.parentNode&&(r=u.indexOf("SeriesGroup")>0||u.indexOf("SymbolGroup")>0),i=0;i<this.previousSelectedElement.length;i++)this.previousSelectedElement[i].hasAttribute("class")&&(this.previousSelectedElement[i].getAttribute("class").indexOf("highlight")>-1&&(r||"click"===t)?(this.previousSelectedElement[i].removeAttribute("class"),this.addOrRemoveIndex(this.highlightDataIndexes,uu(this.previousSelectedElement[i].id))):!r&&this.previousSelectedElement[i].getAttribute("class").indexOf("highlight")>-1&&this.performSelection(uu(this.previousSelectedElement[i].id),this.accumulation,this.previousSelectedElement[i]));return!0},i.prototype.mouseClick=function(n,t){this.calculateSelectedElements(n,t.target,t.type)},i.prototype.calculateSelectedElements=function(n,i,r){if(!t.isNullOrUndefined(i)&&("None"!==n.highlightMode||"None"!==n.selectionMode)&&-1!==i.id.indexOf(n.element.id+"_")&&("mousemove"!==r||t.isNullOrUndefined(i.parentNode)||!i.parentNode.hasAttribute("class")||!(i.parentNode.getAttribute("class").indexOf("highlight")>0||i.parentNode.getAttribute("class").indexOf("selection")>0))&&!(i.getAttribute("id").indexOf("_connector_")>-1)){if(this.isAlreadySelected(i,r),"Point"===this.accumulation.selectionMode&&"mousemove"===r&&this.accumulation.accumulationLegendModule&&this.accumulation.accumulationHighlightModule.highlightDataIndexes&&this.accumulation.accumulationHighlightModule.highlightDataIndexes.length>0&&-1===i.id.indexOf("_chart_legend_")&&-1===i.id.indexOf("_Series_"))for(var u=0;u<this.accumulation.accumulationHighlightModule.previousSelectedElement.length;u++)this.removeStyles(this.accumulation.accumulationHighlightModule.previousSelectedElement,uu(this.accumulation.accumulationHighlightModule.previousSelectedElement[u].id)),this.blurEffect(this.accumulation.element.id,this.accumulation.visibleSeries);(i.id.indexOf("_Series_")>-1||i.id.indexOf("_datalabel_")>-1)&&this.performSelection(uu(i.id),n,i)}},i.prototype.performSelection=function(n,t,i){if(i=i.id.indexOf("datalabel")>-1?t.getSeriesElement().childNodes[n.series].childNodes[n.point]:i,"Point"===this.currentMode&&!isNaN(n.point)){var r=document.getElementById(t.element.id+"_datalabel_Series_"+n.series+"_g_"+n.point);this.series[0].dataLabel.visible&&r&&(r.setAttribute("class",i&&i.hasAttribute("class")?i.getAttribute("class"):r.hasAttribute("class")?r.getAttribute("class"):""),this.selection(t,n,[r]));this.selection(t,n,[i]);this.selectionComplete(t,t.series[0]);this.blurEffect(t.element.id,t.visibleSeries)}},i.prototype.selectionComplete=function(n,t){for(var i,f,u=[],r=0;r<this.selectedDataIndexes.length;r++)i=this.selectedDataIndexes[r].point,isNaN(i)||u.push({x:t.dataSource[i][t.xName],y:t.points[i].y,seriesIndex:this.selectedDataIndexes[r].series,pointIndex:i});f={name:ue,selectedDataValues:u,cancel:!1};n.trigger(ue,f)},i.prototype.selection=function(n,i,r){var f,u;n.isMultiSelect||-1!==this.styleId.indexOf("highlight")||"None"===n.selectionMode||this.removeMultiSelectEelments(n,this.selectedDataIndexes,i,n.series);f=r[0]&&(r[0].getAttribute("class")||"");r[0]&&f.indexOf(this.getSelectionClass(r[0].id,i.point))>-1?(this.removeStyles(r,i),this.styleId.indexOf("highlight")>0&&"None"!==n.highlightMode?this.addOrRemoveIndex(this.highlightDataIndexes,i):this.addOrRemoveIndex(this.selectedDataIndexes,i),n.enableBorderOnMouseMove&&-1===r[0].id.indexOf("datalabel"))&&(u=document.getElementById(r[0].id.split("_")[0]+"PointHover_Border"),t.isNullOrUndefined(u)||this.removeSvgClass(u,u.getAttribute("class"))):(this.previousSelectedElement="None"!==n.highlightMode?r:[],r[0]&&f.indexOf("selection")<0&&this.applyStyles(r,i),n.enableBorderOnMouseMove&&-1===r[0].id.indexOf("datalabel")&&(u=document.getElementById(r[0].id.split("_")[0]+"PointHover_Border"),t.isNullOrUndefined(u)||(this.removeSvgClass(u,u.getAttribute("class")),this.addSvgClass(u,r[0].getAttribute("class")))),this.styleId.indexOf("highlight")>0&&"None"!==n.highlightMode?this.addOrRemoveIndex(this.highlightDataIndexes,i,!0):this.addOrRemoveIndex(this.selectedDataIndexes,i,!0))},i.prototype.redrawSelection=function(n){var i=t.extend([],this.selectedDataIndexes,null,!0),r=t.extend([],this.highlightDataIndexes,null,!0);this.styleId.indexOf("highlight")>0&&r.length>0?(this.removeSelectedElements(n,this.highlightDataIndexes),i=r):this.removeSelectedElements(n,this.selectedDataIndexes);this.blurEffect(n.element.id,n.visibleSeries);this.selectDataIndex(i,n)},i.prototype.removeSelectedElements=function(n,t){for(var i,f,r,u=0,e=t;u<e.length;u++)i=e[u],this.removeStyles([this.getElementByIndex(i)],i);for(f=n.visibleSeries[0].points,r=0;r<f.length;r++)i=new ir(0,f[r].index),this.removeStyles([this.getElementByIndex(i)],i),n.visibleSeries[0].dataLabel.visible&&this.removeStyles([document.getElementById(n.element.id+"_datalabel_Series_0_g_"+f[r].index)],i)},i.prototype.legendSelection=function(n,t,i,u,f){if("mousemove"===f){if(u.id.indexOf("text")>1&&(u=r(u.id.replace("text","shape"))),u.hasAttribute("class")&&(u.getAttribute("class").indexOf("highlight")>-1||u.getAttribute("class").indexOf("selection")>-1))return;this.currentMode=this.accumulation.highlightMode}if(this.isAlreadySelected(u,f)){var o=n.getSeriesElement().childNodes[t].childNodes[i],e=document.getElementById(n.element.id+"_datalabel_Series_"+t+"_g_"+i);this.series[0].dataLabel.visible&&e&&this.selection(n,new ir(t,i),[e]);this.selection(n,new ir(t,i),[o]);this.blurEffect(n.element.id,n.visibleSeries)}},i.prototype.selectDataIndex=function(n,t){for(var f,u,i=0,r=n;i<r.length;i++)u=r[i],(f=this.getElementByIndex(u))&&this.performSelection(u,t,f)},i.prototype.removeMultiSelectEelments=function(n,t,i,r){for(var f,u=0;u<t.length;u++)f=r[t[u].series],this.checkEquals(t[u],i)||(this.removeStyles(this.findElements(n,f,t[u]),t[u]),f.dataLabel.visible&&this.removeStyles([document.getElementById(n.element.id+"_datalabel_Series_0_g_"+t[u].point)],t[u]),t.splice(u,1),u--)},i.prototype.blurEffect=function(n,t){for(var r,f=this.checkVisibility(this.highlightDataIndexes)||this.checkVisibility(this.selectedDataIndexes),i=0,u=t;i<u.length;i++)r=u[i],r.visible&&this.checkSelectionElements(document.getElementById(n+"_SeriesCollection"),this.generateStyle(r),f)},i.prototype.checkSelectionElements=function(n,t,i){var u=[],o,f,e,s,r;for(n.childNodes[0].childNodes.forEach(function(n){return u.push(n)}),s=document.getElementById(this.control.element.id+"_datalabel_Series_0"),s&&s.childNodes.forEach(function(n){return u.push(n)}),r=0;r<u.length;r++)f=u[r].getAttribute("class")||"",e=u[r].parentNode.getAttribute("class")||"","None"===this.accumulation.selectionMode&&"None"===this.accumulation.highlightMode||(t=f.indexOf("selection")>0||f.indexOf("highlight")>0?f:t,t=e.indexOf("selection")>0||e.indexOf("highlight")>0?e:t),-1===f.indexOf(t)&&-1===e.indexOf(t)&&i?this.addSvgClass(u[r],this.unselected):this.removeSvgClass(u[r],this.unselected),-1===f.indexOf(t)&&-1===e.indexOf(t)&&i?this.addSvgClass(u[r],this.unselected):(this.removeSvgClass(u[r],this.unselected),this.removeSvgClass(u[r].parentNode,this.unselected)),this.control.accumulationLegendModule&&this.control.legendSettings.visible&&(o=document.getElementById(this.control.element.id+"_chart_legend_shape_"+r))&&(-1===f.indexOf(t)&&-1===e.indexOf(t)&&i?this.addSvgClass(o,this.unselected):this.removeSvgClass(o,this.unselected))},i.prototype.applyStyles=function(n,t){for(var i,r,o,u=this.control.accumulationTooltipModule,f=0,e=n;f<e.length;f++)i=e[f],r=void 0,i&&(this.control.accumulationLegendModule&&this.control.legendSettings.visible&&(r=document.getElementById(this.control.element.id+"_chart_legend_shape_"+t.point),this.removeSvgClass(r,r.getAttribute("class")),this.addSvgClass(r,this.getSelectionClass(r.id,t.point))),this.removeSvgClass(i.parentNode,this.unselected),this.removeSvgClass(i,this.unselected),o=u&&u.previousPoints.length>0&&u.previousPoints[0].point.index!==t.point?u.svgTooltip.opacity:this.series[t.series].opacity,i.setAttribute("opacity",o.toString()),this.addSvgClass(i,this.getSelectionClass(i.id,t.point)))},i.prototype.getSelectionClass=function(n,t){return this.generateStyle(this.control.series[uu(n).series],t)},i.prototype.removeStyles=function(n,t){for(var i,o,u,r=this.control.accumulationTooltipModule,f=0,e=n;f<e.length;f++)i=e[f],i&&(this.control.accumulationLegendModule&&this.control.legendSettings.visible&&(u=document.getElementById(this.control.element.id+"_chart_legend_shape_"+t.point),this.removeSvgClass(u,this.getSelectionClass(u.id,t.point))),o=r&&r.previousPoints.length>0&&r.previousPoints[0].point.index===t.point?r.svgTooltip.opacity:this.series[t.series].opacity,i.setAttribute("opacity",o.toString()),this.removeSvgClass(i,this.getSelectionClass(i.id,t.point)))},i.prototype.addOrRemoveIndex=function(n,t,i){for(var r=0;r<n.length;r++)this.checkEquals(n[r],t)&&(n.splice(r,1),r--);i&&n.push(t)},i.prototype.checkEquals=function(n,t){return n.point===t.point&&n.series===t.series},i.prototype.mouseMove=function(n){var u=this.accumulation,i=n.target;if("None"===u.highlightMode||t.isNullOrUndefined(i))u.selectionMode;else{if(n.target.id.indexOf("text")>1&&(i=r(n.target.id.replace("text","shape"))),i.hasAttribute("class")&&i.getAttribute("class").indexOf("highlight")>-1)return;this.calculateSelectedElements(u,n.target,n.type)}},i.prototype.getModuleName=function(){return"AccumulationSelection"},i.prototype.destroy=function(){this.removeEventListener()},i}(rh),vct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yct=function(n){function i(t){var i=n.call(this,t)||this;return i.accumulation=t,i.renderer=t.renderer,i.wireEvents(),i}return vct(i,n),i.prototype.wireEvents=function(){this.accumulation.isDestroyed||this.accumulation.on(t.Browser.touchMoveEvent,this.mouseMove,this)},i.prototype.unWireEvents=function(){this.accumulation.isDestroyed||this.accumulation.off(t.Browser.touchMoveEvent,this.mouseMove)},i.prototype.declarePrivateVariables=function(n){this.styleId=n.element.id+"_ej2_chart_highlight";this.unselected=n.element.id+"_ej2_deselected";this.selectedDataIndexes=[];this.highlightDataIndexes=[]},i.prototype.invokeHighlight=function(n){this.declarePrivateVariables(n);this.series=t.extend({},n.visibleSeries,null,!0);this.seriesStyles();this.currentMode=n.highlightMode},i.prototype.getModuleName=function(){return"AccumulationHighlight"},i.prototype.destroy=function(){this.unWireEvents()},i}(pk),pct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wct=function(n){function i(t){var i=n.call(this,t)||this;return i.pie=t,i}return pct(i,n),i.prototype.renderAnnotations=function(n){var r=this,i;this.annotations=this.pie.annotations;i=this.pie.redraw;this.parentElement=ci(i,this.pie.element.id+"_Annotation_Collections")||t.createElement("div",{id:this.pie.element.id+"_Annotation_Collections"});this.annotations.map(function(n,t){r.processAnnotation(n,t,r.parentElement)});this.pie.series[0].animation.enable&&"Pie"===this.pie.series[0].type&&this.pie.animateSeries&&(this.parentElement.style.visibility="hidden");ec(this.parentElement,n,i)},i.prototype.getModuleName=function(){return"Annotation"},i.prototype.destroy=function(){},i}(sk);var kk=function(){return function(n,t,i,r,u){void 0===u&&(u=!0);this.x=n;this.y=t;this.xValue=i;this.visible=u}}(),bct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dk=function(n){function r(t){var i=n.call(this)||this;return i.dataSource=t.dataSource,i.xName=t.xName,i.yName=t.yName,i.query=t.query,i.xMin=1/0,i.xMax=-1/0,i.yMin=1/0,i.yMax=-1/0,i.labels=[],i.indexLabels={},i}return bct(r,n),r.prototype.renderChart=function(n){var t,i,r=this;this.seriesLength=0;n.rangeSlider.points=[];n.series.length?n.series.map(function(u){t=u.dataSource||n.dataSource;i=u.query||n.query;u.points=[];r.processDataSource(t,i,n,u)}):this.processDataSource(n.dataSource,n.query,n)},r.prototype.processDataSource=function(n,i,r,u){var f=this;n instanceof gt.DataManager||t.isNullOrUndefined(n)||!t.isNullOrUndefined(i)?(r.dataModule=new ih(n,i),r.dataModule.getData(r.dataModule.generateQuery().requiresCount()).then(function(n){return f.dataManagerSuccess(n,r,u)})):this.dataManagerSuccess({result:n,count:n.length},r,u)},r.prototype.dataManagerSuccess=function(n,t,i){var r=n.count?n.result:[];t.allowServerDataBinding=!1;this.processJsonData(r,t,Object.keys(r).length,i);this.seriesLength+=i?1:this.seriesLength;i&&this.seriesLength!==t.series.length||(this.processXAxis(t),this.calculateGroupingBounds(t),this.processYAxis(t),t.renderChart())},r.prototype.processJsonData=function(n,i,r,u){for(var o,s,f,e=0,h=u&&u.xName||i.xName,c=u&&u.yName||i.yName;e<r;)((f=new kk(t.getValue(h,n[e]),t.getValue(c,n[e]))).yValue=+f.y,i.valueType.indexOf("DateTime")>-1)?(o=i.intl.getDateParser({skeleton:"full",type:"dateTime"}),s=i.intl.getDateFormat({skeleton:"full",type:"dateTime"}),f.x=new Date(gt.DataUtil.parse.parseJson({val:f.x}).val),f.xValue=Date.parse(o(s(f.x))),"DateTimeCategory"===i.valueType&&(void 0===this.indexLabels[f.xValue.toString()]&&(this.indexLabels[f.xValue.toString()]=this.labels.length,this.labels.push(f.xValue.toString())),f.xValue=this.indexLabels[f.xValue])):f.xValue=+f.x,u&&u.points.push(f),this.xMin=Math.min(this.xMin,f.xValue),this.yMin=Math.min(this.yMin,f.yValue),this.xMax=Math.max(this.xMax,f.xValue),this.yMax=Math.max(this.yMax,f.yValue),i.rangeSlider.points.push(f),e++},r.prototype.processXAxis=function(n){var i={minimum:n.minimum,maximum:n.maximum,interval:n.interval,valueType:n.valueType,isInversed:n.enableRtl,labelFormat:n.labelFormat,logBase:n.logBase,skeleton:n.skeleton,skeletonType:n.skeletonType},t;this.xAxis=i;this.xAxis.intervalType=n.intervalType;this.xAxis.maximumLabels=3;this.xAxis.skeleton=n.skeleton;this.xAxis.intervalDivs=[10,5,2,1];this.xAxis.rect=n.bounds;this.xAxis.visibleLabels=[];this.xAxis.orientation="Horizontal";this.xAxis.labels=this.labels;this.xAxis.indexLabels=this.indexLabels;t=n[et(n.valueType)+"Module"];t.min=this.xMin;t.max=this.xMax;t.getActualRange(this.xAxis,n.bounds);"Double"!==this.xAxis.valueType&&"DateTime"!==this.xAxis.valueType&&"DateTimeCategory"!==this.xAxis.valueType||t.updateActualRange(this.xAxis,this.xAxis.actualRange.min,this.xAxis.actualRange.max,this.xAxis.actualRange.interval);this.xAxis.actualRange.delta=this.xAxis.actualRange.max-this.xAxis.actualRange.min;this.xAxis.visibleRange=this.xAxis.actualRange;t.calculateVisibleLabels(this.xAxis,n);"DateTimeCategory"===this.xAxis.valueType&&n.periodSelectorModule&&(n.periodSelectorModule.isDatetimeCategory=!0,n.periodSelectorModule.sortedData=this.labels.map(function(n){return parseInt(n,10)}))},r.prototype.processYAxis=function(n){this.yAxis={majorGridLines:{width:0},rangePadding:"None",majorTickLines:{width:0},labelStyle:{size:"0"},visible:!1,valueType:"Double",minimum:null,maximum:null,interval:null};this.yAxis.rect=n.bounds;this.yAxis.maximumLabels=3;this.yAxis.intervalDivs=[10,5,2,1];this.yAxis.orientation="Vertical";this.yMin===this.yMax&&(this.yMax+=1,this.yMin-=1);n.doubleModule.min=this.yMin;n.doubleModule.max=this.yMax;n.doubleModule.getActualRange(this.yAxis,n.bounds);n.doubleModule.updateActualRange(this.yAxis,this.yAxis.actualRange.min,this.yAxis.actualRange.max,this.yAxis.actualRange.interval);this.yAxis.actualRange.delta=this.yAxis.actualRange.max-this.yAxis.actualRange.min;this.yAxis.visibleRange=this.yAxis.actualRange},r.prototype.renderSeries=function(n){var i=this,r;this.chartGroup=n.renderer.createGroup({id:n.element.id+"_chart"});r=ro(n.theme);n.series.map(function(u,f){if(!n.stockChart||n.stockChart.series[f].visible){if(u.xAxis=i.xAxis,u.yAxis=i.yAxis,u.chart=n,u.index=f,u.xAxis.isInversed=n.enableRtl,u.interior=u.fill||r[f%r.length],i.createSeriesElement(n,u,f),"DateTimeCategory"===u.xAxis.valueType)for(var e=0;e<u.points.length;e++)u.points[e].xValue=i.xAxis.labels.indexOf(Date.parse(u.points[e].x.toString()).toString());n[et(u.type)+"SeriesModule"]?n[et(u.type)+"SeriesModule"].render(u,i.xAxis,i.yAxis,!1):n.lineSeriesModule.render(u,i.xAxis,i.yAxis,!1);i.chartGroup.appendChild(u.seriesElement);(u.animation.enable&&"Disable"!==t.animationMode||"Enable"===t.animationMode)&&n.animateSeries&&n[et(u.type)+"SeriesModule"]&&n[et(u.type)+"SeriesModule"].doAnimation(u)}})},r.prototype.appendSeriesElements=function(n){n.svgObject.appendChild(this.chartGroup);n.series.length&&this.drawSeriesBorder(n)},r.prototype.createSeriesElement=function(n,t,r){var u=n.element.id;t.clipRect=new i.Rect(this.xAxis.rect.x,this.yAxis.rect.y,this.xAxis.rect.width,this.yAxis.rect.height);t.clipRectElement=n.renderer.drawClipPath(new ft(u+"_RangeSeriesClipRect_"+r,"transparent",{width:1,color:"Gray"},1,{x:0,y:0,width:t.clipRect.width,height:t.clipRect.height}));t.seriesElement=n.renderer.createGroup({id:u+"SeriesGroup"+r,transform:"translate("+t.clipRect.x+","+t.clipRect.y+")","clip-path":"url(#"+u+"_RangeSeriesClipRect_"+r+")"});t.seriesElement.appendChild(t.clipRectElement)},r.prototype.calculateGroupingBounds=function(n){var t=n.margin.bottom,r=i.measureText("string",n.labelStyle,n.themeStyle.axisLabelFont).height,u="DateTimeCategory"===n.valueType?parseInt(this.xAxis.labels[this.xMin],10):this.xMin,f="DateTimeCategory"===n.valueType?parseInt(this.xAxis.labels[this.xMax],10):this.xMax;this.calculateDateTimeNiceInterval(this.xAxis,new i.Size(n.bounds.width,n.bounds.height),u,f,!1);!n.enableGrouping||"DateTime"!==n.valueType&&"DateTimeCategory"!==n.valueType||"Years"===this.xAxis.actualIntervalType&&n.series.length||(n.bounds.height-="Outside"===n.labelPosition||0===n.series.length?t+r:r+2*t);n.series.length||(n.bounds.y+=n.bounds.height/4,n.bounds.height=n.bounds.height/2)},r.prototype.drawSeriesBorder=function(n){var t=n.stockChart?"M":"L",r=n.stockChart?"":"Z",u=new i.PathOption(n.element.id+"_SeriesBorder","transparent",n.navigatorBorder.width,n.navigatorBorder.color||(n.theme.indexOf("Dark")>-1?"#49454F":"#DDDDDD"),1,n.navigatorBorder.dashArray,"M "+n.bounds.x+" "+n.bounds.y+" L "+(n.bounds.x+n.bounds.width)+" "+n.bounds.y+t+(n.bounds.x+n.bounds.width)+" "+(n.bounds.y+n.bounds.height)+" L "+n.bounds.x+" "+(n.bounds.y+n.bounds.height)+r),f=n.renderer.drawPath(u);n.svgObject.appendChild(f)},r}(vc),kct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gk=function(n){function t(t){var i=n.call(this)||this;return i.firstLevelLabels=[],i.secondLevelLabels=[],i.rangeNavigator=t,i}return kct(t,n),t.prototype.renderGridLines=function(){var u=0,n=this.rangeNavigator,e=n.majorGridLines,o=n.majorTickLines,h="",c="",r=n.bounds,t=n.chartSeries.xAxis,l=n.disableRangeSelector?"transparent":null,a,v,y,f,s;for(this.gridLines=n.renderer.createGroup({id:n.element.id+"_GridLines"}),a="Outside"===n.tickPosition||0===n.series.length?r.y+r.height+o.height:r.y+r.height-o.height,(this.firstLevelLabels=[],t.labelStyle=n.labelStyle,t.skeleton=n.skeleton,t.skeletonType=n.skeletonType,t.isChart=!1,n.valueType.indexOf("DateTime")>-1)&&(v=this.calculateDateTimeNiceInterval(t,r,t.doubleRange.start,t.doubleRange.end,t.isChart),"DateTime"===n.valueType&&this.findAxisLabels(t,v),this.actualIntervalType=t.actualIntervalType,"DateTimeCategory"!==n.valueType||"Quarter"!==this.actualIntervalType&&"Weeks"!==this.actualIntervalType||this.findSecondaryAxisLabels(t)),this.firstLevelLabels=t.visibleLabels,this.lowerValues=[],y=t.visibleLabels.length,f=0;f<y;f++)this.lowerValues.push(this.firstLevelLabels[f].value),(u=ut(this.firstLevelLabels[f].value,t)*r.width+r.x)>=r.x&&r.x+r.width>=u&&(h=h.concat("M "+u+" "+(n.bounds.y+n.bounds.height)+" L "+u+" "+n.bounds.y+" "),c=c.concat("M "+u+" "+(r.y+r.height)+" L "+u+" "+a+" "));s=new i.PathOption(n.element.id+"_MajorGridLine","transparent",e.width,n.series.length?l||e.color||n.themeStyle.gridLineColor:"transparent",1,e.dashArray,h);this.gridLines.appendChild(n.renderer.drawPath(s));s=new i.PathOption(n.element.id+"_MajorTickLine","transparent",o.width,l||o.color||n.themeStyle.gridLineColor,1,e.dashArray,c);this.gridLines.appendChild(n.renderer.drawPath(s))},t.prototype.renderAxisLabels=function(){var r,u=this.rangeNavigator.chartSeries.xAxis,n=this.rangeNavigator,f=n.renderer.createGroup({id:n.element.id+"_AxisLabels"}),e=n.renderer.createGroup({id:n.element.id+"_FirstLevelAxisLabels"}),o=n.renderer.createGroup({id:n.element.id+"_SecondLevelAxisLabels"}),t=u,s,h,c;(r=this.findLabelY(n,!1),this.placeAxisLabels(u,r,"_AxisLabel_",n,e),t.intervalType=t.actualIntervalType=n.groupBy||this.getSecondaryLabelType(u.actualIntervalType),t.labelFormat="",n.enableGrouping&&n.valueType.indexOf("DateTime")>-1&&"Years"!==this.actualIntervalType)&&(t.visibleRange.interval=1,t.visibleLabels=[],s=this.calculateDateTimeNiceInterval(t,n.bounds,t.doubleRange.start,t.doubleRange.end,t.isChart),"DateTime"===n.valueType?this.findAxisLabels(t,s):this.findSecondaryAxisLabels(t),this.secondLevelLabels=t.visibleLabels,r=this.findLabelY(n,!0),h=this.placeAxisLabels(t,r,"_SecondaryLabel_",n,o),c=new i.PathOption(n.element.id+"_SecondaryMajorLines","transparent",n.majorTickLines.width,n.majorTickLines.color||n.themeStyle.gridLineColor,1,n.majorGridLines.dashArray,h),this.gridLines.appendChild(n.renderer.drawPath(c)));n.chartSeries.xAxis.visibleLabels=n.chartSeries.xAxis.visibleLabels.concat(t.visibleLabels);f.style.cursor=u.valueType.indexOf("DateTime")>-1?"cursor: pointer":"cursor: default";f.appendChild(e);f.appendChild(o);n.svgObject.appendChild(this.gridLines);n.svgObject.appendChild(f)},t.prototype.getSecondaryLabelType=function(n){var t=["Years","Quarter","Months","Weeks","Days","Hours","Minutes","Seconds"];return"Years"===n?"Years":t[t.indexOf(n)-1]},t.prototype.findSecondaryAxisLabels=function(n){var r,t,i,u;for(n.visibleLabels=[],n.visibleRange.interval=Math.max(n.visibleRange.interval,1),this.rangeNavigator.format=this.rangeNavigator.intl.getDateFormat({format:n.labelFormat||"",type:et(n.skeleton),skeleton:this.getSkeleton(n,null,null)}),t=Math.ceil(n.visibleRange.min);t<=n.visibleRange.max;t+=n.visibleRange.interval)(!this.rangeNavigator.dateTimeCategoryModule.sameInterval(n.labels.map(Number)[t],n.labels.map(Number)[t-n.visibleRange.interval],n.actualIntervalType,t)||n.isIndexed)&&si(t,n.visibleRange)&&this.rangeNavigator.dateTimeCategoryModule.isMaximum(t,r,n)&&(i=new Date(n.labels.map(Number)[t]),"Quarter"===n.actualIntervalType&&(u=Math.floor(i.getMonth()/3),i.setMonth([0,3,6,9][u])),n.visibleLabels.push(new gh(this.dateFormats(this.rangeNavigator.format(i),n,n.visibleLabels.length),t,this.rangeNavigator.labelStyle,this.rangeNavigator.format(i))),r=t)},t.prototype.findAxisLabels=function(n,t){n.visibleLabels=[];var r,u,i=new Date(n.visibleRange.min);switch(t=this.rangeNavigator.interval?this.rangeNavigator.interval:t,n.actualIntervalType){case"Years":i=new Date(i.getFullYear(),0,1);break;case"Quarter":i=i.getMonth()<=2?new Date(i.getFullYear(),0,1):i.getMonth()<=5?new Date(i.getFullYear(),3,1):i.getMonth()<=8?new Date(i.getFullYear(),6,1):new Date(i.getFullYear(),9,1);break;case"Months":i=new Date(i.getFullYear(),i.getMonth());break;case"Weeks":i=new Date(i.getFullYear(),i.getMonth(),i.getDate()-i.getDay());break;case"Days":i=new Date(i.getFullYear(),i.getMonth(),i.getDate());break;case"Hours":i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours());break;case"Minutes":i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes());break;case"Seconds":i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds())}for(r=i.getTime(),this.rangeNavigator.format=this.rangeNavigator.intl.getDateFormat({format:n.labelFormat||"",type:et(n.skeletonType),skeleton:this.getSkeleton(n,null,null)});r<=n.visibleRange.max;)u=this.dateFormats(this.rangeNavigator.format(new Date(r)),n,n.visibleLabels.length),n.visibleLabels.push(new gh(u,r,this.rangeNavigator.labelStyle,u)),r=this.increaseDateTimeInterval(n,r,t).getTime()},t.prototype.dateFormats=function(n,t,i){var r=n,u=this.rangeNavigator.enableGrouping&&0===this.firstLevelLabels.length;switch(t.actualIntervalType){case"Quarter":n.indexOf("Jan")>-1?r=u?"Quarter1":n.replace("Jan","Quarter1"):n.indexOf("Apr")>-1?r=u?"Quarter2":n.replace("Apr","Quarter2"):n.indexOf("Jul")>-1?r=u?"Quarter3":n.replace("Jul","Quarter3"):n.indexOf("Oct")>-1&&(r=u?"Quarter4":n.replace("Oct","Quarter4"));break;case"Weeks":r="Week"+ ++i;break;default:r=n}return r},t.prototype.findLabelY=function(n,t){var e,u=n.bounds.y+n.bounds.height,o=n.majorTickLines.height,f=i.measureText("Quarter1 2011",n.labelStyle,n.themeStyle.axisLabelFont).height,r="Inside"===n.labelPosition?3:8;return e="Outside"===n.labelPosition&&"Outside"===n.tickPosition||0===n.series.length?u+o+r+.75*f:"Inside"===n.labelPosition&&"Inside"===n.tickPosition?u-o-r:"Inside"===n.labelPosition&&"Outside"===n.tickPosition?u-r:u+r+.75*f,t&&(r=15,"Outside"===n.labelPosition||0===n.series.length?e+=r+.75*f:e="Outside"===n.tickPosition||0===n.series.length?u+o+r+.75*f:u+r+.75*f),e},t.prototype.placeAxisLabels=function(n,t,r,u,f){var o,y,s,a,p=n.visibleLabels.length,e=u.bounds,v="",d=u.disableRangeSelector?"transparent":null,w=u.enableRtl?e.x+e.width:e.x,b=n.actualIntervalType,g="Auto"===u.labelPlacement&&"DateTime"===u.valueType||"BetweenTicks"===u.labelPlacement?p>1?n.visibleLabels[1].value-n.visibleLabels[0].value:(n.visibleRange.max-n.visibleLabels[0].value)/2:0,h,k;for(u.valueType.indexOf("DateTime")>-1&&("Quarter"===b||"Weeks"===b)&&this.findSuitableFormat(n,u),h=0,k=p;h<k;h++)if((o=n.visibleLabels[h]).size=i.measureText(o.text,n.labelStyle,u.themeStyle.axisLabelFont),!("Middle"===u.secondaryLabelAlignment||r.indexOf("_AxisLabel_")>-1)||"Auto"!==u.labelPlacement&&"BetweenTicks"!==u.labelPlacement?r.indexOf("Secondary")>-1&&(s=this.findAlignment(n,h)):s=ut(o.value+g/2,n)*e.width+e.x,"OnTicks"===u.labelPlacement&&"Inside"===u.labelPosition?s=ut(o.value,n)*e.width+e.x+o.size.width/2+2:"OnTicks"===u.labelPlacement&&"Outside"===u.labelPosition&&(s=ut(o.value,n)*e.width+e.x),a=ut(o.value,n)*e.width+e.x,(0===h||h===n.visibleLabels.length-1&&u.enableRtl)&&s<e.x&&(s=e.x+o.size.width/2),(h===n.visibleLabels.length-1||0===h&&u.enableRtl)&&s+o.size.width>e.x+e.width&&(s=e.x+e.width-o.size.width/2),r.indexOf("_SecondaryLabel_")>-1&&s>=e.x&&e.x+e.width>=s&&(v=v.concat("M "+a+" "+t+" L "+a+" "+(t-o.size.height))),"Hide"!==u.labelIntersectAction||0===h||!this.isIntersect(n,s,o.size.width,w,y.size.width)){"Middle"===u.secondaryLabelAlignment&&1===n.visibleLabels.length&&(s=ut(o.value,n)+(e.x+e.width/2));var c=u.labelStyle,nt={size:c.size,color:d||c.color||u.themeStyle.axisLabelFont.color,fontFamily:c.fontFamily,fontStyle:c.fontStyle||u.labelStyle.fontStyle,fontWeight:c.fontWeight||u.labelStyle.fontWeight,opacity:c.opacity||u.labelStyle.opacity,textAlignment:c.textAlignment||u.labelStyle.textAlignment,textOverflow:c.textOverflow||u.labelStyle.textOverflow},l={cancel:!1,name:"labelRender",text:o.text,value:o.value,labelStyle:nt,region:new i.Rect(s,t,o.size.width,o.size.height)};u.trigger("labelRender",l);l.cancel||(u.labels.push(l),ct(this.rangeNavigator.renderer,new i.TextOption(this.rangeNavigator.element.id+r+h,s,t,"middle",l.text),l.labelStyle,l.labelStyle.color||u.themeStyle.labelFontColor,f,null,null,null,null,null,null,0,null,null,null,u.themeStyle.axisLabelFont).style.cursor=n.valueType.indexOf("DateTime")>-1?"cursor: pointer":"cursor: default",w=s,y=o)}return v},t.prototype.isIntersect=function(n,t,i,r,u){return n.isInversed?t+i/2>r-u/2:t-i/2<r+u/2},t.prototype.findSuitableFormat=function(n,t){for(var e,f,r=n.visibleLabels,s=r.length,o=t.bounds,h="DateTime"===t.valueType?s>1?r[1].value-r[0].value:n.visibleRange.interval:0,u=0;u<s;u++)f=ut(r[u].value+h/2,n)*o.width+o.x,r[u].size=i.measureText(r[u].text,n.labelStyle,t.themeStyle.axisLabelFont),0===u&&f<o.x&&(f=o.x+r[u].size.width/2),"Quarter"===n.actualIntervalType?0!==u&&(r[u].text.indexOf("Quarter")>-1&&this.isIntersect(n,f,r[u].size.width,e,r[u-1].size.width)?(r.every(function(n){return n.text=n.text.toString().replace("Quarter","QTR"),!0}),n.visibleLabels=r,this.findSuitableFormat(n,t)):this.isIntersect(n,f,r[u].size.width,e,r[u-1].size.width)&&(r.every(function(n){return n.text=n.text.toString().replace("QTR","Q"),!0}),n.visibleLabels=r)):"Weeks"===n.actualIntervalType&&0!==u&&r[u].text.indexOf("Week")>-1&&this.isIntersect(n,f,r[u].size.width,e,r[u-1].size.width)&&(r.every(function(n){return n.text=n.text.toString().replace("Week","W"),!0}),n.visibleLabels=r),e=f},t.prototype.findAlignment=function(n,t){var r=n.visibleLabels[t],u=n.visibleLabels[t+1],i=this.rangeNavigator.bounds;return"Near"===this.rangeNavigator.secondaryLabelAlignment?ut(r.value,n)*i.width+i.x+r.size.width/2:ut(u?u.value:n.visibleRange.max,n)*i.width+i.x-r.size.width},t}(tk),dc=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ii=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},nd=function(n){function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.clipRect=new i.Rect(0,0,0,0),t}return dc(r,n),ii([t.Property(null)],r.prototype,"dataSource",void 0),ii([t.Property(null)],r.prototype,"xName",void 0),ii([t.Property(null)],r.prototype,"yName",void 0),ii([t.Property()],r.prototype,"query",void 0),ii([t.Property("Line")],r.prototype,"type",void 0),ii([t.Complex({enable:!1},au)],r.prototype,"animation",void 0),ii([t.Complex({color:"transparent",width:2},yt)],r.prototype,"border",void 0),ii([t.Property(null)],r.prototype,"fill",void 0),ii([t.Property(1)],r.prototype,"width",void 0),ii([t.Property(1)],r.prototype,"opacity",void 0),ii([t.Property("0")],r.prototype,"dashArray",void 0),r}(t.ChildProperty),td=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dc(i,n),ii([t.Property(null)],i.prototype,"width",void 0),ii([t.Property(null)],i.prototype,"height",void 0),ii([t.Complex({width:1,color:null},yt)],i.prototype,"border",void 0),ii([t.Property(null)],i.prototype,"fill",void 0),ii([t.Property("Circle")],i.prototype,"type",void 0),i}(t.ChildProperty),id=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dc(i,n),ii([t.Complex({},td)],i.prototype,"thumb",void 0),ii([t.Property(null)],i.prototype,"selectedRegionColor",void 0),ii([t.Property(null)],i.prototype,"unselectedRegionColor",void 0),i}(t.ChildProperty),rd=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dc(i,n),ii([t.Property(!1)],i.prototype,"enable",void 0),ii([t.Property(null)],i.prototype,"opacity",void 0),ii([t.Property(null)],i.prototype,"fill",void 0),ii([t.Property(null)],i.prototype,"format",void 0),ii([t.Complex({fontFamily:null,size:"12px",fontStyle:"Normal",fontWeight:null,color:null},oi)],i.prototype,"textStyle",void 0),ii([t.Property(null)],i.prototype,"template",void 0),ii([t.Complex({color:null,width:null},yt)],i.prototype,"border",void 0),ii([t.Property("OnDemand")],i.prototype,"displayMode",void 0),i}(t.ChildProperty),ud=function(){function n(n){this.control=n;this.points=[];this.isIOS=t.Browser.isIos||t.Browser.isIos7;var i=n.navigatorStyleSettings.thumb;this.thumbVisible=0!==n.themeStyle.thumbWidth&&0!==n.themeStyle.thumbHeight;this.elementId=n.element.id;this.thumpPadding=n.themeStyle.thumbWidth/2;this.addEventListener();this.thumbColor=n.disableRangeSelector?"transparent":i.fill||n.themeStyle.thumbBackground}return n.prototype.render=function(n){var t=n.renderer,u=n.navigatorStyleSettings,f=n.disableRangeSelector?"transparent":null,i=t.createGroup({id:this.elementId+"_sliders",style:n.disableRangeSelector?"pointer-events:none;":""}),r=new ft(this.elementId+"_leftUnSelectedArea",f||u.unselectedRegionColor||n.themeStyle.unselectedRectColor,{width:0},1,{x:n.bounds.x,y:n.bounds.y,width:n.bounds.width/3,height:n.bounds.height},0,0,"",u.thumb.border.dashArray);this.leftUnSelectedElement=t.drawRectangle(r);r.id=this.elementId+"_rightUnSelectedArea";this.rightUnSelectedElement=t.drawRectangle(r);r.id=this.elementId+"_SelectedArea";r.fill=f||u.selectedRegionColor||n.themeStyle.selectedRegionColor;this.selectedElement=t.drawRectangle(r);this.selectedElement.setAttribute("role","region");this.selectedElement.setAttribute("aria-label","Range Slider with "+n.rangeSlider.points.length+" data points");this.selectedElement.style.cursor="-webkit-grab";this.leftSlider=t.createGroup({id:this.elementId+"_LeftSlider",style:"cursor: ew-resize"});this.rightSlider=t.createGroup({id:this.elementId+"_RightSlider",style:"cursor: ew-resize"});this.createThump(t,n.bounds,this.leftSlider,this.elementId+"_LeftSlider",i);this.createThump(t,n.bounds,this.rightSlider,this.elementId+"_RightSlider");i.appendChild(this.leftUnSelectedElement);i.appendChild(this.rightUnSelectedElement);i.appendChild(this.selectedElement);i.appendChild(this.leftSlider);i.appendChild(this.rightSlider);n.svgObject.appendChild(i)},n.prototype.createThump=function(n,t,r,u,f){var v,e=this.control,h=e.navigatorStyleSettings.thumb,y=e.themeStyle,s=t.y+t.height/2,o=this.thumpPadding,c=e.themeStyle.thumbHeight/2-5,l=e.disableRangeSelector?"transparent":null,a=l||h.border.color||y.thumpLineColor;r.appendChild(n.drawPath(new i.PathOption(u+"_ThumpLine","transparent",h.border.width,e.series.length?a:"transparent",1,h.border.dashArray,"M "+o+" "+t.y+" L "+o+" "+(t.y+t.height)+" ")));this.thumpY=s-e.themeStyle.thumbHeight/2;this.sliderY=t.y>this.thumpY?this.thumpY:t.y;f&&!e.disableRangeSelector&&((v=n.createDefs()).innerText='<rect xmlns="http://www.w3.org/2000/svg" id="'+this.control.element.id+'_shadow" x="0" y="'+this.thumpY+'" width="'+e.themeStyle.thumbWidth+'" height="'+e.themeStyle.thumbHeight+'" rx="'+("Circle"===h.type?"50%":"0%")+'"/><filter xmlns="http://www.w3.org/2000/svg" x="-25.0%" y="-20.0%" width="150.0%" height="150.0%" filterUnits="objectBoundingBox" id="ej2-range-shadow"><feOffset dx="0" dy="1" in="SourceAlpha"result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.16 0" type="matrix" in="shadowBlurOuter1"/><\/filter>',f.appendChild(v));r.innerText+='<use xmlns="http://www.w3.org/2000/svg" fill="black" fill-opacity="1" filter="url(#ej2-range-shadow)" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#path-1"/>';"Circle"===h.type?r.appendChild(tr({x:o,y:s},"Circle",{width:e.themeStyle.thumbWidth,height:e.themeStyle.thumbHeight},"",new i.PathOption(u+"_ThumpSymbol",l||this.thumbColor,h.border.width,a,1,null))):r.appendChild(n.drawRectangle(new ft(u+"_ThumpSymbol",l||this.thumbColor,{width:h.border.width,color:a},1,{x:o-e.themeStyle.thumbWidth/2,y:s-e.themeStyle.thumbHeight/2,width:e.themeStyle.thumbWidth,height:e.themeStyle.thumbHeight},2,2,"",h.border.dashArray)));this.thumbVisible&&r.appendChild(n.drawPath(new i.PathOption(u+"_ThumpGrip","transparent",1,l||e.themeStyle.gripColor,1,null,"M "+(o+2)+" "+(s+c)+" L "+(o+2)+" "+(s-c)+" "+(this.control.theme.indexOf("Fluent2")>-1||this.control.theme.indexOf("Bootstrap5")>-1||this.control.theme.indexOf("Tailwind3")>-1?"":"M "+o+" "+(s+c)+" L "+o+" "+(s-c)+" ")+"M "+(o-2)+" "+(s+c)+" L "+(o-2)+" "+(s-c)+" ")))},n.prototype.setSlider=function(n,t,i,r,u){var l,c,h,p;void 0===u&&(u=!1);var f=this.control,o=f.bounds.x,s=f.chartSeries.xAxis.actualRange,e=0===f.series.length;isNaN(n)&&isNaN(t)&&(n=0,t=f.bounds.width);t>=n||(n=[t,t=n][0]);n=t>=n?n:[t,t=n][0];n=Math.max(n,s.min);t=Math.min(t,s.max);this.startX=o+uh(n,s,f.bounds.width,f.enableRtl);this.endX=o+uh(t,s,f.bounds.width,f.enableRtl);l=f.enableRtl?this.endX:this.startX;c=f.enableRtl?this.startX:this.endX;this.sliderWidth=Math.abs(this.endX-this.startX);this.selectedElement.setAttribute("x",l+"");this.selectedElement.setAttribute("width",this.sliderWidth+"");this.leftUnSelectedElement.setAttribute("width",l-o+"");this.rightUnSelectedElement.setAttribute("x",c+"");this.rightUnSelectedElement.setAttribute("width",f.bounds.width-(c-o)+"");this.leftSlider.setAttribute("transform","translate("+(this.startX-this.thumpPadding)+", 0)");this.rightSlider.setAttribute("transform","translate("+(this.endX-this.thumpPadding)+", 0)");var a=this.control.svgObject.getBoundingClientRect().left-this.control.element.getBoundingClientRect().left,v=this.control.enableRtl?this.endX:this.startX,y=this.control.enableRtl?this.startX:this.endX;this.leftRect={x:e?a+o:o,y:e?0:f.bounds.y,width:e?v-o:v,height:e?this.thumpY:f.bounds.height};this.rightRect={x:e?a+y:y,y:e?0:f.bounds.y,width:f.bounds.width-(c-o),height:e?this.thumpY:f.bounds.height};this.midRect={x:e?v+a:0,y:e?0:f.bounds.y,width:e?Math.abs(this.endX-this.startX):y,height:e?this.thumpY:f.bounds.height};this.currentStart=n;this.currentEnd=t;r&&(this.control.rangeTooltipModule.renderLeftTooltip(this),this.control.rangeTooltipModule.renderRightTooltip(this));h=this.control.periodSelectorModule;h&&this.control.redraw&&"rangeNavigator"===this.control.getModuleName()&&(p=h.findSelectedIndex(n,t,h.control.periods),h.setSelectedStyle(p),this.control.redraw=!1);i&&!u&&this.triggerEvent(s)},n.prototype.triggerEvent=function(n){var i=this.control.chartSeries.xAxis,t=i.valueType,r={cancel:!1,start:"DateTime"===t?new Date(this.currentStart):"DateTimeCategory"===t?this.currentStart:"Logarithmic"===t?Math.pow(i.logBase,this.currentStart):this.currentStart,end:"DateTime"===t?new Date(this.currentEnd):"DateTimeCategory"===t?this.currentEnd:"Logarithmic"===t?Math.pow(i.logBase,this.currentEnd):this.currentEnd,name:"changed",selectedData:bk(this.points,this.currentStart,this.currentEnd),zoomPosition:(this.control.enableRtl?n.max-this.currentEnd:this.currentStart-n.min)/n.delta,zoomFactor:(this.currentEnd-this.currentStart)/n.delta,selectedPeriod:this.selectedPeriod?this.selectedPeriod:""};this.control.trigger("changed",r)},n.prototype.addEventListener=function(){this.control.isDestroyed||(this.control.on(t.Browser.touchMoveEvent,this.mouseMoveHandler,this),this.control.on(t.Browser.touchStartEvent,this.mouseDownHandler,this),this.control.on(t.Browser.touchEndEvent,this.mouseUpHandler,this),this.control.on(t.Browser.isPointer?"pointerleave":"mouseleave",this.mouseCancelHandler,this))},n.prototype.removeEventListener=function(){this.control.isDestroyed||(this.control.off(t.Browser.touchMoveEvent,this.mouseMoveHandler),this.control.off(t.Browser.touchStartEvent,this.mouseDownHandler),this.control.off(t.Browser.touchEndEvent,this.mouseUpHandler),this.control.off(t.Browser.isPointer?"pointerleave":"mouseleave",this.mouseCancelHandler))},n.prototype.mouseMoveHandler=function(n){var e,f,t=this.control,i=t.chartSeries.xAxis.actualRange,r=t.bounds,u,o,s;if(this.getCurrentSlider(n.target.id),this.isDrag&&t.mouseX>=r.x){switch(this.currentSlider){case"Left":t.startValue=this.getRangeValue(Math.abs(t.mouseX-r.x));break;case"Right":t.endValue=this.getRangeValue(Math.abs(t.mouseX-r.x));break;case"Middle":e=Math.max(this.getRangeValue(Math.abs(this.startX-(this.previousMoveX-t.mouseX)-r.x)),i.min);f=Math.min(this.getRangeValue(Math.abs(this.endX-(this.previousMoveX-t.mouseX)-r.x)),i.max);Math.floor(Math.abs(uh(f,i,t.bounds.width,t.enableRtl)-uh(e,i,t.bounds.width,t.enableRtl)))===Math.floor(this.sliderWidth)?(t.startValue=e,t.endValue=f):(f===i.max&&(t.endValue=i.max),Math.floor(this.startX)===r.x&&(t.startValue=i.min))}(n.preventDefault&&this.isIOS&&n.preventDefault(),"Middle"!==this.currentSlider)&&(u=this.control.periodSelectorModule,u&&(o=u.control.periods,o.map(function(n){n.selected=!1}),u.selectedIndex=void 0,s=u.findSelectedIndex(t.startValue,t.endValue,o),u.setSelectedStyle(s)));this.setSlider(t.startValue,t.endValue,!t.enableDeferredUpdate,t.rangeTooltipModule&&t.tooltip.enable);this.previousMoveX=t.mouseX}},n.prototype.getRangeValue=function(n){var t=this.control,i=t.chartSeries.xAxis.actualRange;return kc(n,t.bounds.width,i,t.enableRtl)},n.prototype.mouseDownHandler=function(n){this.currentSlider=this.getCurrentSlider(n.target.id);this.selectedElement.style.cursor="-webkit-grabbing";this.isDrag=!("UnSelectedArea"===this.currentSlider||!this.currentSlider);this.previousMoveX=this.control.mouseDownX},n.prototype.getCurrentSlider=function(n){var t=this.control.themeStyle.thumbHoverColor;return n.indexOf(this.elementId+"_LeftSlider")>-1?(this.leftSlider.childNodes[2].setAttribute("fill",t),"Left"):n.indexOf(this.elementId+"_RightSlider")>-1?(this.rightSlider.childNodes[2].setAttribute("fill",t),"Right"):n.indexOf(this.elementId+"_SelectedArea")>-1?"Middle":n.indexOf("UnSelectedArea")>-1?(this.leftSlider.childNodes[2].setAttribute("fill",this.thumbColor),this.rightSlider.childNodes[2].setAttribute("fill",this.thumbColor),"UnSelectedArea"):n.indexOf(this.elementId+"_AxisLabel_")>-1&&("DateTime"===this.control.valueType||"DateTimeCategory"===this.control.valueType)?(this.labelIndex=+n.substring(n.lastIndexOf("_")+1,n.length),"firstLevelLabels"):n.indexOf(this.elementId+"_SecondaryLabel")>-1&&("DateTime"===this.control.valueType||"DateTimeCategory"===this.control.valueType)?(this.labelIndex=+n.substring(n.lastIndexOf("_")+1,n.length),"secondLevelLabels"):(this.leftSlider.childNodes[2].setAttribute("fill",this.thumbColor),this.rightSlider.childNodes[2].setAttribute("fill",this.thumbColor),this.control.periodSelectorModule&&(this.control.periodSelectorModule.triggerChange=!0),null)},n.prototype.mouseUpHandler=function(){var n=this.control,f=n.chartSeries.xAxis.actualRange,u=n.enableDeferredUpdate,l=n.tooltip.enable,i,r,c,a;if(n.stockChart&&(n.stockChart.zoomChange=!1),"UnSelectedArea"===this.currentSlider){var t=void 0,s=void 0,h=void 0,e=n.enableRtl,o=n.endValue-n.startValue;n.mouseDownX<this.startX?(t=Math.max(this.getRangeValue(n.mouseDownX-this.sliderWidth/2-n.bounds.x),f.min),h=e?t:t+o,s=e?t-o:t):(t=Math.min(this.getRangeValue(n.mouseDownX+this.sliderWidth/2-n.bounds.x),f.max),s=e?t:t-o,h=e?t+o:t);this.performAnimation(s,h,n);u=!1}else"firstLevelLabels"===this.currentSlider||"secondLevelLabels"===this.currentSlider?(i=n.rangeAxis[this.currentSlider][this.labelIndex+1],this.selectedPeriod&&(r=this.control.periodSelectorModule,r&&(c=r.control.periods,c.map(function(n){n.selected=!1}),r.selectedIndex=void 0,a=r.findSelectedIndex(n.rangeAxis[this.currentSlider][this.labelIndex].value,i?n.allowIntervalData?i.value-1:i.value:f.max,c),r.setSelectedStyle(a))),this.performAnimation(n.rangeAxis[this.currentSlider][this.labelIndex].value,i?n.allowIntervalData?i.value-1:i.value:f.max,n),u=!1):null===this.currentSlider&&(u=!1);this.isDrag&&n.allowSnapping&&(this.setAllowSnapping(n,this.currentStart,this.currentEnd,!0,l),u=!1);u&&this.setSlider(this.currentStart,this.currentEnd,!0,l);null!==this.currentSlider&&this.control.periodSelectorSettings.periods.length>0&&(this.control.periodSelectorModule.triggerChange=!1,this.control.periodSelectorModule.datePicker.startDate=this.control.periodSelectorModule.isDatetimeCategory?new Date(this.control.periodSelectorModule.sortedData[Math.floor(this.currentStart)]):new Date(this.currentStart),this.control.periodSelectorModule.datePicker.endDate=this.control.periodSelectorModule.isDatetimeCategory?new Date(this.control.periodSelectorModule.sortedData[Math.floor(this.currentEnd)]):new Date(this.currentEnd));this.selectedElement.style.cursor="-webkit-grab";n.startValue=this.currentStart;n.endValue=this.currentEnd;this.isDrag=!1;this.labelIndex=null;this.currentSlider=null},n.prototype.setAllowSnapping=function(n,t,i,r,u){var f=n.rangeAxis.lowerValues;f.push(n.chartSeries.xAxis.actualRange.max);this.setSlider(iy(f,t),iy(f,i),r,u);n.startValue=this.currentStart;n.endValue=this.currentEnd},n.prototype.performAnimation=function(n,i,r){var u=this,e=this.currentStart,o=this.currentEnd,s=r.enableDeferredUpdate,f=r.tooltip.enable;new t.Animation({}).animate(t.createElement("div"),{duration:0===this.control.animationDuration&&"Enable"===t.animationMode?1e3:this.control.animationDuration,progress:function(t){u.setSlider(ti(t.timeStamp,0,n-e,t.duration)+e,ti(t.timeStamp,0,i-o,t.duration)+o,!s,f)},end:function(){r.allowSnapping?u.setAllowSnapping(r,n,i,!0,f):u.setSlider(n,i,!0,f);u.control.startValue=u.currentStart;u.control.endValue=u.currentEnd;u.control.periodSelectorSettings.periods.length>0&&(u.control.periodSelectorModule.triggerChange=!1,u.control.periodSelectorModule.datePicker.startDate=u.control.periodSelectorModule.isDatetimeCategory?new Date(u.control.periodSelectorModule.sortedData[Math.floor(u.currentStart)]):new Date(u.currentStart),u.control.periodSelectorModule.datePicker.endDate=u.control.periodSelectorModule.isDatetimeCategory?new Date(u.control.periodSelectorModule.sortedData[Math.floor(u.currentEnd)]):new Date(u.currentEnd))}})},n.prototype.mouseCancelHandler=function(){this.isDrag&&this.control.allowSnapping&&this.setAllowSnapping(this.control,this.currentStart,this.currentEnd,!1,this.control.tooltip.enable);this.isDrag=!1;this.currentSlider=null;this.control.startValue=this.currentStart;this.control.endValue=this.currentEnd},n.prototype.destroy=function(){this.removeEventListener()},n}();const dct=ejdashboard.navigations,gct=ejdashboard.calendars;var ry=function(){function n(n){this.control={};this.isDatetimeCategory=!1;this.sortedData=[];this.startValue=0;this.endValue=0;this.rootControl=n;"stockChart"===this.rootControl.getModuleName()&&(this.sortedData=this.rootControl.sortedData,this.isDatetimeCategory=this.rootControl.isDateTimeCategory)}return n.prototype.setControlValues=function(n){"rangeNavigator"===n.getModuleName()?(this.control.periods=this.rootControl.periodSelectorSettings.periods,this.control.seriesXMax=n.chartSeries.xMax,this.control.seriesXMin=n.chartSeries.xMin,this.control.rangeSlider=n.rangeSlider,this.control.rangeNavigatorControl=n,this.control.endValue=n.endValue,this.control.startValue=n.startValue):(this.control.periods=this.rootControl.periods,this.control.endValue=this.control.seriesXMax=n.seriesXMax,this.control.startValue=this.control.seriesXMin=n.seriesXMin,this.control.rangeNavigatorControl=this.rootControl.rangeNavigator,this.control.rangeNavigatorControl&&(this.control.rangeSlider=this.rootControl.rangeNavigator.rangeSlider));this.control.element=n.element;this.control.disableRangeSelector=n.disableRangeSelector},n.prototype.appendSelector=function(n,t){void 0===t&&(t=0);this.renderSelectorElement(null,n,t);this.renderSelector()},n.prototype.renderSelectorElement=function(n,u,f){var o,e;this.periodSelectorSize=n?this.periodSelectorSize:new i.Rect(f,this.rootControl.titleSize.height?this.rootControl.titleSize.height:10,u.width,u.height);n?(o=n.themeStyle.thumbWidth,e=n.element):(o=u.thumbSize,e=u.element);r(e.id+"_Secondary_Element")&&t.remove(r(e.id+"_Secondary_Element"));this.periodSelectorDiv=t.createElement("div",{id:e.id+"_Secondary_Element",styles:"width: "+(this.periodSelectorSize.width-o)+"px;height: "+this.periodSelectorSize.height+"px;top:"+this.periodSelectorSize.y+"px;left:"+(this.periodSelectorSize.x+o/2)+"px; position: absolute"});e.appendChild(this.periodSelectorDiv)},n.prototype.renderSelector=function(){var n=this,s,f,c;this.setControlValues(this.rootControl);var l,h=!0,i=this.control.element.id,a=t.createElement("div",{id:i+"_selector"}),u=this.control.periods,e=this.updateCustomElement(),o=i+"customRange";for(this.periodSelectorDiv.appendChild(a),s=0;s<u.length;s++)e.push({align:"Left",text:u[s].text});"stockChart"===this.rootControl.getModuleName()&&(h=this.rootControl.enableCustomRange);h&&(this.calendarId=i+"_calendar",e.push({template:"<button id="+this.calendarId+"><\/button>",align:"Right"}));f={selector:e,name:"RangeSelector",cancel:!1,enableCustomFormat:!0,content:"Date Range"};"stockChart"===this.rootControl.getModuleName()&&this.rootControl.exportType.length&&(c=t.createElement("button",{id:i+"_export",styles:"text-transform: none; text-overflow: unset",className:"e-dropdown-btn e-btn e-flat"}),c.innerText="Export",e.push({template:c,align:"Right"}));this.rootControl.trigger("selectorRender",f);this.toolbar=new dct.Toolbar({items:f.selector,height:this.periodSelectorSize.height,clicked:function(t){n.buttonClick(t,n.control)},created:function(){if(n.nodes=n.toolbar.element.querySelectorAll(".e-toolbar-left")[0],t.isNullOrUndefined(n.selectedIndex)&&u.map(function(t,i){if(t.selected&&null!==n.selectedPeriod){l=t;n.control.startValue=n.changedRange(t.intervalType,n.control.endValue,t.interval).getTime();n.isDatetimeCategory&&(n.control.startValue="stockChart"!==n.rootControl.getModuleName()?n.findStartValue(n.control.startValue,n.control.endValue):n.rootControl.startValue);n.control.startValue=t.text&&"all"===t.text.toLowerCase()?n.control.seriesXMin:n.control.startValue;n.control.endValue=t.text&&"all"===t.text.toLowerCase()?n.control.seriesXMax:n.control.endValue;n.selectedIndex=n.nodes.childNodes.length-u.length+i;var r=n.control.rangeSlider;r&&(r.selectedPeriod=t.text)}}),!l&&"stockChart"!==n.rootControl.getModuleName()){var i=n.findSelectedIndex(n.control.startValue,n.control.endValue,u);n.selectedIndex=i||n.selectedIndex}n.setSelectedStyle(n.selectedIndex)}});this.toolbar.isStringTemplate=!0;this.toolbar.appendTo(a);this.triggerChange=!0;h&&(this.datePicker=new gct.DateRangePicker({min:this.isDatetimeCategory?new Date(this.sortedData[this.control.seriesXMin]):new Date(this.control.seriesXMin),max:this.isDatetimeCategory?new Date(this.sortedData[this.control.seriesXMax]):new Date(this.control.seriesXMax),format:"dd/MM/yyyy",placeholder:"Select a range",showClearButton:!1,startDate:this.isDatetimeCategory?new Date(this.sortedData[Math.floor(this.control.startValue)]):new Date(this.control.startValue),endDate:this.isDatetimeCategory?new Date(this.sortedData[Math.floor(this.control.endValue)]):new Date(this.control.endValue),created:function(){var h;if(f.enableCustomFormat){for(var e=document.getElementsByClassName("e-date-range-wrapper"),s=void 0,u=0;u<e.length;u++)-1!==e[u].children[0].id.indexOf(i)&&(s=e[u]);s.style.display="none";h=t.createElement("div",{id:o,className:"e-control e-btn e-dropdown-btn e-flat",styles:"font-size: 14px; font-weight: 500; text-transform: none "});h.innerText=f.content;s.insertAdjacentElement("afterend",h);r(o).insertAdjacentElement("afterbegin",t.createElement("span",{id:i+"dateIcon",className:"e-input-group-icon e-range-icon e-btn-icon e-icons",styles:"font-size: 16px; min-height: 0px; margin: -3px 0 0 0; outline: none; min-width: 30px"}));document.getElementById(o).onclick=function(){n.datePicker.show(r(o))}}},change:function(t){if(n.triggerChange&&(n.isDatetimeCategory&&(n.startValue=t.startDate.getTime(),n.endValue=t.endDate.getTime(),n.findPeriodValue(n.startValue,n.endValue)),n.control.rangeSlider&&t.event?("stockChart"!==n.rootControl.getModuleName()&&(n.control.rangeNavigatorControl.startValue=n.isDatetimeCategory?n.startValue:t.startDate.getTime(),n.control.rangeNavigatorControl.endValue=n.isDatetimeCategory?n.endValue:t.endDate.getTime(),n.selectedIndex=void 0,n.selectedPeriod=null,n.control.rangeNavigatorControl.refresh()),n.control.rangeSlider.performAnimation(n.isDatetimeCategory?n.startValue:t.startDate.getTime(),n.isDatetimeCategory?n.endValue:t.endDate.getTime(),n.control.rangeNavigatorControl)):t.event&&n.rootControl.rangeChanged(n.isDatetimeCategory?n.startValue:t.startDate.getTime(),n.isDatetimeCategory?n.endValue:t.endDate.getTime()),n.nodes=n.toolbar.element.querySelectorAll(".e-toolbar-left")[0],!n.rootControl.resizeTo&&n.control.rangeSlider&&n.control.rangeSlider.isDrag))for(var i=0,r=n.nodes.childNodes.length;i<r;i++)n.nodes.childNodes[i].childNodes[0].classList.remove("e-active"),n.nodes.childNodes[i].childNodes[0].classList.remove("e-active")}}),this.datePicker.appendTo("#"+this.calendarId))},n.prototype.findPeriodValue=function(n,t){for(var i=0;i<this.sortedData.length;i++)if(this.sortedData[i]>=n){this.startValue=i;break}for(i=this.sortedData.length-1;i>=0;i--)if(this.sortedData[i]<=t){this.endValue=i;break}},n.prototype.findSelectedIndex=function(n,t,i){for(var e,r,u=(t-n)/864e5,f=0;f<i.length;f++)r=i[f],"Years"===r.intervalType&&u/365===r.interval?e=f:"Months"!==r.intervalType||u/30!==r.interval&&u/31!==r.interval?("Days"===r.intervalType&&u===r.interval||"Weeks"===r.intervalType&&u/7===r.interval||"Hours"===r.intervalType&&24*u===r.interval||"Seconds"===r.intervalType&&86400*u===r.interval)&&(e=f):e=f;return e},n.prototype.updateCustomElement=function(){var n=[],i=this.rootControl.element.id,r="text-transform: none; text-overflow: unset",u="e-dropdown-btn e-btn e-flat",f,e,o;return"stockChart"===this.rootControl.getModuleName()&&(this.rootControl.seriesType.length&&(f=t.createElement("button",{id:i+"_seriesType",styles:r,className:u}),f.innerText="Series",n.push({template:f,align:"Left"})),this.rootControl.indicatorType.length&&(e=t.createElement("button",{id:i+"_indicatorType",styles:r,className:u}),e.innerText="Indicators",n.push({template:e,align:"Left"})),this.rootControl.trendlineType.length&&(o=t.createElement("button",{id:i+"_trendType",styles:r,className:u}),o.innerText="Trendline",n.push({template:o,align:"Left"}))),n},n.prototype.setSelectedStyle=function(n){for(var i=0,r=this.nodes.childNodes.length;i<r;i++)this.nodes.childNodes[i].childNodes[0].classList.remove("e-active");t.isNullOrUndefined(n)||(this.nodes.childNodes[n].childNodes[0].classList.add("e-flat"),this.nodes.childNodes[n].childNodes[0].classList.add("e-active"))},n.prototype.buttonClick=function(n,i){var u,e,s=this,o=n.item,f=this.control.rangeSlider,c=this.control.periods,h=c.filter(function(n){return n.text===o.text});c.map(function(t,i){t.selected&&"stockChart"!==s.rootControl.getModuleName()&&(t.selected=!1);t.text===n.item.text&&(s.selectedIndex=s.nodes.childNodes.length-c.length+i,"stockChart"!==s.rootControl.getModuleName()&&(t.selected=!0))});""!==n.item.text&&this.setSelectedStyle(this.selectedIndex);f&&o.text&&(f.selectedPeriod=o.text);"all"===o.text.toLowerCase()?(u=i.seriesXMin,e=i.seriesXMax,f?f.performAnimation(u,e,this.control.rangeNavigatorControl):this.rootControl.rangeChanged(u,e)):"ytd"===o.text.toLowerCase()?f?(u=this.isDatetimeCategory?new Date(new Date(this.sortedData[Math.floor(f.currentEnd)]).getFullYear().toString()).getTime():new Date(new Date(f.currentEnd).getFullYear().toString()).getTime(),u=this.isDatetimeCategory?this.findStartValue(u,f.currentEnd):u,e=f.currentEnd,f.performAnimation(u,e,this.control.rangeNavigatorControl)):(u=this.isDatetimeCategory?new Date(new Date(this.sortedData[Math.floor(this.rootControl.currentEnd)]).getFullYear().toString()).getTime():new Date(new Date(this.rootControl.currentEnd).getFullYear().toString()).getTime(),u=this.isDatetimeCategory?this.findStartValue(u,this.rootControl.currentEnd):u,e=this.rootControl.currentEnd,this.rootControl.rangeChanged(u,e)):""!==o.text.toLowerCase()&&(f?(u=this.changedRange(h[0].intervalType,f.currentEnd,h[0].interval).getTime(),u=this.isDatetimeCategory?this.findStartValue(u,f.currentEnd):u,e=f.currentEnd,f.performAnimation(u,e,this.control.rangeNavigatorControl)):(u=this.changedRange(h[0].intervalType,this.rootControl.currentEnd,h[0].interval).getTime(),u=this.isDatetimeCategory?this.findStartValue(u,this.rootControl.currentEnd):u,e=this.rootControl.currentEnd,this.rootControl.rangeChanged(u,e)));"stockChart"===this.rootControl.getModuleName()&&(this.rootControl.zoomChange=!1);r(this.calendarId+"_popup")&&!t.Browser.isDevice&&(r(this.calendarId+"_popup").querySelectorAll(".e-range-header")[0].style.display="none")},n.prototype.findStartValue=function(n,t){for(var i=Math.floor(t);i>=0;i--)if(this.sortedData[i]<=n)return i+1;return 0},n.prototype.changedRange=function(n,t,i){var r=this.isDatetimeCategory?new Date(this.sortedData[Math.floor(t)]):new Date(t);switch(n){case"Quarter":r.setMonth(r.getMonth()-3*i);break;case"Months":r.setMonth(r.getMonth()-i);break;case"Weeks":r.setDate(r.getDate()-7*i);break;case"Days":r.setDate(r.getDate()-i);break;case"Hours":r.setHours(r.getHours()-i);break;case"Minutes":r.setMinutes(r.getMinutes()-i);break;case"Seconds":r.setSeconds(r.getSeconds()-i);break;default:r.setFullYear(r.getFullYear()-i)}return r},n.prototype.getModuleName=function(){return"PeriodSelector"},n.prototype.destroy=function(){},n}(),nlt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nt=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},gc=function(n){function u(t,i){var r=n.call(this,t,i)||this;return r.animateSeries=!0,r.chartid=57725,r.redraw=!1,r}return nlt(u,n),u.prototype.preRender=function(){if(this.unWireEvents(),this.setCulture(),this.allowServerDataBinding=!1,this.periodSelectorModule&&(this.periodSelectorModule.selectedIndex=null),""===this.element.id){var n=document.getElementsByClassName("e-rangenavigator").length;this.element.id="rangenavigator_"+this.chartid+"_"+n}this.wireEvents()},u.prototype.initPrivateVariables=function(){this.doubleModule=new ys;this.labels=[];this.rangeSlider=new ud(this);this.chartSeries=new dk(this);this.lineSeriesModule=new rk;this.rangeAxis=new gk(this)},u.prototype.setCulture=function(){this.intl=new t.Internationalization},u.prototype.setSliderValue=function(){var t="DateTime"===this.valueType,n="DateTimeCategory"===this.valueType,i=this.chartSeries.xAxis.actualRange;this.startValue=this.startValue||n&&0===this.startValue?this.startValue:this.value[0]?t?new Date(this.value[0].toString()).getTime():n?this.getRangeValue(new Date(this.value[0].toString()).getTime(),!0):+this.value[0]:i.min;this.endValue=this.endValue||n&&0===this.endValue?this.endValue:this.value[1]?t?new Date(this.value[1].toString()).getTime():n?this.getRangeValue(new Date(this.value[1].toString()).getTime(),!1):+this.value[1]:i.max},u.prototype.getRangeValue=function(n,t){for(var r=this.chartSeries.xAxis.labels,i=r.length-1;i>=0&&parseInt(r[i],10)>n;)i--;return t?-1!==i?i:this.chartSeries.xAxis.actualRange.min:0===i?this.chartSeries.xAxis.actualRange.max:i},u.prototype.render=function(){var n=this,t={name:"load",rangeNavigator:this,theme:this.theme};this.trigger("load",t,function(){n.setTheme();n.initPrivateVariables();n.createRangeSvg();n.calculateBounds();n.chartSeries.renderChart(n);v("chartmeasuretext");n.renderComplete();n.allowServerDataBinding=!0});this.element.setAttribute("tabindex","0");this.element.style.outline="none";this.element.setAttribute("role","region");this.element.setAttribute("aria-label","Range navigator Syncfusion interactive chart.")},u.prototype.setTheme=function(){this.themeStyle=fd(this.theme,this)},u.prototype.createRangeSvg=function(){this.removeSvg();ts(this);this.renderChartBackground()},u.prototype.calculateBounds=function(){var f=this.enableGrouping?15:8,e=this.navigatorStyleSettings.thumb,o=i.measureText("tempString",this.labelStyle,this.themeStyle.axisLabelFont).height,t=this.margin,r=!this.series.length,s=!this.disableRangeSelector&&r&&this.tooltip.enable?35:0,n,l,u;this.periodSelectorModule||!this.periodSelectorSettings.periods.length||this.stockChart||(this.periodSelectorModule=new ry(this));n=this.periodSelectorModule;this.periodSelectorModule&&this.periodSelectorSettings.periods.length>0&&(n.periodSelectorSize={x:0,y:0,height:0,width:0},n.periodSelectorSize.width=this.availableSize.width,n.periodSelectorSize.height=this.periodSelectorSettings.height,n.periodSelectorSize.y="Bottom"===this.periodSelectorSettings.position?this.availableSize.height-n.periodSelectorSize.height:0);var a="Top"===this.periodSelectorSettings.position&&n?n.periodSelectorSize.y+n.periodSelectorSize.height:0,h=0,c=0;this.stockChart&&this.stockChart.stockLegendModule&&this.stockChart.legendSettings.visible&&("Left"===this.stockChart.legendSettings.position?h+=this.stockChart.stockLegendModule.legendBounds.width:"Top"===this.stockChart.legendSettings.position&&(c+=this.stockChart.stockLegendModule.legendBounds.height));this.bounds=new i.Rect(this.themeStyle.thumbWidth/2+e.border.width+t.left+h,t.top+s+a+c,this.availableSize.width-this.themeStyle.thumbWidth-2*e.border.width-t.left-t.right,this.availableSize.height-t.top-t.bottom-s-(n?n.periodSelectorSize.height:0));l=("Outside"===this.labelPosition||r?o+f:0)+("Outside"===this.tickPosition||r?this.majorTickLines.height:0);(this.bounds.height-=l,r)&&(u=this.enableGrouping?this.bounds.height-(o+f):this.bounds.height,this.bounds.y+=this.themeStyle.thumbHeight>u?(this.themeStyle.thumbHeight-u)/2:0);this.disableRangeSelector&&(this.bounds.y=0,this.bounds.height=this.periodSelectorSettings.periods.length>0?this.periodSelectorSettings.height:0)},u.prototype.renderChart=function(n){void 0===n&&(n=!1);this.chartSeries.renderSeries(this);this.chartSeries.appendSeriesElements(this);this.rangeAxis.renderGridLines();this.rangeAxis.renderAxisLabels();this.createSecondaryElement();this.setSliderValue();this.renderPeriodSelector();this.renderSlider(n);this.stockChart||this.element.appendChild(this.svgObject);this.trigger("loaded",{rangeNavigator:this});this.rangeSlider.setSlider(this.startValue,this.endValue,!1,this.tooltip.enable&&"Always"===this.tooltip.displayMode,n)},u.prototype.renderPeriodSelector=function(){this.periodSelectorModule&&(this.periodSelectorModule.renderSelectorElement(this),this.periodSelectorModule.renderSelector())},u.prototype.createSecondaryElement=function(){if(this.tooltip.enable){var n=this.createElement("div");n.id=this.element.id+"_Secondary_Element";n.style.position="relative";this.element.appendChild(n)}},u.prototype.renderSlider=function(n){this.rangeSlider.render(this);this.periodSelectorModule&&(this.startValue=this.periodSelectorModule.control.startValue,this.endValue=this.periodSelectorModule.control.endValue);this.rangeSlider.setSlider(this.startValue,this.endValue,!0,this.tooltip.enable&&"Always"===this.tooltip.displayMode,n)},u.prototype.removeSvg=function(){if(r(this.element.id+"_Secondary_Element")&&(t.remove(r(this.element.id+"_Secondary_Element")),this.isReact&&this.clearTemplate()),this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);this.svgObject.hasChildNodes()||!this.svgObject.parentNode||this.stockChart||t.remove(this.svgObject)}},u.prototype.unWireEvents=function(){var n=t.Browser.touchStartEvent,i=t.Browser.touchMoveEvent,r=t.Browser.touchEndEvent,u=t.Browser.isPointer?"pointerleave":"mouseleave";t.EventHandler.remove(this.element,n,this.rangeOnMouseDown);t.EventHandler.remove(this.element,i,this.mouseMove);t.EventHandler.remove(this.element,r,this.mouseEnd);t.EventHandler.remove(this.element,"click",this.rangeOnMouseClick);t.EventHandler.remove(this.element,u,this.mouseLeave);window.removeEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.rangeResize)},u.prototype.wireEvents=function(){var i=t.Browser.isPointer?"pointerleave":"mouseleave",n;t.EventHandler.add(this.element,t.Browser.touchStartEvent,this.rangeOnMouseDown,this);t.EventHandler.add(this.element,t.Browser.touchMoveEvent,this.mouseMove,this);t.EventHandler.add(this.element,t.Browser.touchEndEvent,this.mouseEnd,this);t.EventHandler.add(this.element,"click",this.rangeOnMouseClick,this);t.EventHandler.add(this.element,i,this.mouseLeave,this);window.addEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.rangeResize.bind(this));n=this.element;n.style.touchAction="none";n.style.msTouchAction="none";n.style.msContentZooming="none";n.style.msUserSelect="none";n.style.webkitUserSelect="none";n.style.position="relative";n.style.display="block"},u.prototype.rangeResize=function(){var n=this,t,r;return!document.getElementById(this.element.id)||!this.svgObject?!1:(this.animateSeries=!1,this.removeAllTooltip(),t={name:"beforeResize",cancelResizedEvent:!1},this.resizeTo&&clearTimeout(this.resizeTo),r={rangeNavigator:this,name:"resized",currentSize:new i.Size(0,0),previousSize:new i.Size(this.availableSize.width,this.availableSize.height)},this.trigger(ao,t),t.cancelResizedEvent||(this.resizeTo=+setTimeout(function(){n.isDestroyed?clearTimeout(n.resizeTo):(n.createRangeSvg(),r.currentSize=n.availableSize,n.trigger("resized",r),n.calculateBounds(),n.chartSeries.processXAxis(n),n.chartSeries.calculateGroupingBounds(n),n.chartSeries.processYAxis(n),n.renderChart(!0))},500)),!1)},u.prototype.removeAllTooltip=function(){this.tooltip.enable&&"Always"===this.tooltip.displayMode&&(r(this.element.id+"_leftTooltip")&&t.remove(r(this.element.id+"_leftTooltip")),r(this.element.id+"_rightTooltip")&&t.remove(r(this.element.id+"_rightTooltip")))},u.prototype.mouseMove=function(n){return this.stockChart||r(this.stockChart?this.element.id:this.element.id+"_svg")&&(this.mouseX=this.setMouseX(n),this.notify(t.Browser.touchMoveEvent,n)),!1},u.prototype.mouseLeave=function(n){var i=this.rangeSlider,r,u;if(i.isDrag){if(this.stockChart)return!1;r=i.control.tooltip.enable;i.control.allowSnapping&&(i.isDrag=!1,i.setAllowSnapping(i.control,i.currentStart,i.currentEnd,!1,r));i.triggerEvent(this.chartSeries.xAxis.actualRange)}return u=t.Browser.isPointer?"pointerleave":"mouseleave",this.mouseX=this.setMouseX(n),this.notify(u,n),!1},u.prototype.rangeOnMouseClick=function(n){return this.notify("click",n),!1},u.prototype.print=function(n){new es(this).print(n)},u.prototype.export=function(n,t,i,r,u,f,e){r=r||[this];new du(this).export(n,t,i,r,u,f,e)},u.prototype.renderChartBackground=function(){var n=0,t=0,r;this.stockChart&&this.stockChart.legendSettings.visible&&this.stockChart.stockLegendModule&&("Top"===this.stockChart.legendSettings.position?n+=this.stockChart.stockLegendModule.legendBounds.height:"Left"===this.stockChart.legendSettings.position&&(t+=this.stockChart.stockLegendModule.legendBounds.width));r=new ft(this.element.id+"_ChartBorder",this.background||this.themeStyle.background,{width:0,color:"transparent"},1,new i.Rect(t,n,this.availableSize.width,this.availableSize.height));this.svgObject.appendChild(this.renderer.drawRectangle(r))},u.prototype.rangeOnMouseDown=function(n){return this.mouseDownX=this.setMouseX(n),this.notify(t.Browser.touchStartEvent,n),!1},u.prototype.mouseEnd=function(n){return this.mouseX=this.setMouseX(n),this.notify(t.Browser.touchEndEvent,n),!1},u.prototype.setMouseX=function(n){var i=n.type.indexOf("touch")>-1?n.changedTouches[0].clientX:n.clientX,t=this.element.getBoundingClientRect(),u=this.stockChart?r(this.element.id).getBoundingClientRect():r(this.element.id+"_svg").getBoundingClientRect();return i-t.left-Math.max(u.left-t.left,0)},u.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},u.prototype.onPropertyChanged=function(t){var i=!1,r=!1,e=!1,u,f;for(this.animateSeries=!1,u=0,f=Object.keys(t);u<f.length;u++)switch(f[u]){case"width":case"height":case"navigatorBorder":case"enableGrouping":case"labelPosition":case"tickPosition":case"labelStyle":r=!0;break;case"enableRtl":case"xName":case"yName":case"query":case"minimum":case"maximum":case"interval":case"intervalType":case"logBase":case"valueType":case"majorGridLines":case"minorGridLines":case"navigatorStyleSettings":case"labelFormat":case"skeleton":case"skeletonType":case"secondaryLabelAlignment":case"background":i=!0;break;case"dataSource":case"series":i=!0;r=!0;break;case"theme":this.animateSeries=!0;break;case"locale":n.prototype.refresh.call(this);break;case"value":this.startValue=null;this.endValue=null;e=!0;this.redraw=!0}!r&&i&&(this.removeSvg(),this.chartSeries.xMin=1/0,this.chartSeries.xMax=-1/0,this.chartSeries.renderChart(this));r&&i&&(this.removeSvg(),this.chartSeries.xMin=this.chartSeries.yMin=1/0,this.chartSeries.xMax=this.chartSeries.yMax=-1/0,this.calculateBounds(),this.chartSeries.renderChart(this));r&&!i&&(this.removeSvg(),this.calculateBounds(),this.chartSeries.renderChart(this));r||i||!e||(this.setSliderValue(),this.rangeSlider.setSlider(this.startValue,this.endValue,!0,this.tooltip.enable&&"Always"===this.tooltip.displayMode))},u.prototype.requiredModules=function(){var t=this,n=[];return this.series.map(function(i){"Area"!==i.type&&"StepLine"!==i.type||n.push({member:i.type+"Series",args:[t]})}),this.periodSelectorSettings.periods.length>0&&n.push({member:"PeriodSelector",args:[this]}),"Double"!==this.valueType&&n.push({member:this.valueType,args:[this]}),this.tooltip.enable&&n.push({member:"RangeTooltip",args:[this]}),n},u.prototype.getModuleName=function(){return"rangeNavigator"},u.prototype.destroy=function(){this.unWireEvents();this.isReact&&this.clearTemplate();this.rangeSlider.destroy();n.prototype.destroy.call(this);this.element.innerText="";this.element.classList.remove("e-rangenavigator")},nt([t.Property(null)],u.prototype,"width",void 0),nt([t.Property(null)],u.prototype,"height",void 0),nt([t.Property(null)],u.prototype,"dataSource",void 0),nt([t.Property(null)],u.prototype,"xName",void 0),nt([t.Property(null)],u.prototype,"yName",void 0),nt([t.Property()],u.prototype,"query",void 0),nt([t.Collection([],nd)],u.prototype,"series",void 0),nt([t.Complex({},rd)],u.prototype,"tooltip",void 0),nt([t.Property(null)],u.prototype,"minimum",void 0),nt([t.Property(null)],u.prototype,"maximum",void 0),nt([t.Property(null)],u.prototype,"interval",void 0),nt([t.Property("Auto")],u.prototype,"intervalType",void 0),nt([t.Property("Hide")],u.prototype,"labelIntersectAction",void 0),nt([t.Property(10)],u.prototype,"logBase",void 0),nt([t.Property("Double")],u.prototype,"valueType",void 0),nt([t.Property("Outside")],u.prototype,"labelPosition",void 0),nt([t.Property("Auto")],u.prototype,"labelPlacement",void 0),nt([t.Property(500)],u.prototype,"animationDuration",void 0),nt([t.Property(!1)],u.prototype,"enableGrouping",void 0),nt([t.Property(!1)],u.prototype,"enableDeferredUpdate",void 0),nt([t.Property(!1)],u.prototype,"disableRangeSelector",void 0),nt([t.Property(!1)],u.prototype,"allowSnapping",void 0),nt([t.Property(!1)],u.prototype,"allowIntervalData",void 0),nt([t.Property(!1)],u.prototype,"useGroupingSeparator",void 0),nt([t.Property()],u.prototype,"groupBy",void 0),nt([t.Property("Outside")],u.prototype,"tickPosition",void 0),nt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},oi)],u.prototype,"labelStyle",void 0),nt([t.Complex({},kh)],u.prototype,"majorGridLines",void 0),nt([t.Complex({},dh)],u.prototype,"majorTickLines",void 0),nt([t.Complex({},id)],u.prototype,"navigatorStyleSettings",void 0),nt([t.Complex({},yp)],u.prototype,"periodSelectorSettings",void 0),nt([t.Complex({color:null,width:1},yt)],u.prototype,"navigatorBorder",void 0),nt([t.Property("Material")],u.prototype,"theme",void 0),nt([t.Property([])],u.prototype,"value",void 0),nt([t.Property(null)],u.prototype,"background",void 0),nt([t.Property("")],u.prototype,"labelFormat",void 0),nt([t.Property("")],u.prototype,"skeleton",void 0),nt([t.Property("DateTime")],u.prototype,"skeletonType",void 0),nt([t.Property("Middle")],u.prototype,"secondaryLabelAlignment",void 0),nt([t.Complex({top:5,bottom:5,right:5,left:5},lr)],u.prototype,"margin",void 0),nt([t.Event()],u.prototype,"load",void 0),nt([t.Event()],u.prototype,"loaded",void 0),nt([t.Event()],u.prototype,"resized",void 0),nt([t.Event()],u.prototype,"beforeResize",void 0),nt([t.Event()],u.prototype,"labelRender",void 0),nt([t.Event()],u.prototype,"changed",void 0),nt([t.Event()],u.prototype,"tooltipRender",void 0),nt([t.Event()],u.prototype,"selectorRender",void 0),nt([t.Event()],u.prototype,"beforePrint",void 0),nt([t.NotifyPropertyChanges],u)}(t.Component),tlt=function(){function n(n){this.stockChart=n}return n.prototype.initializeChart=function(n){var u=this,i=this.stockChart,v="isProtectedOnChange",s=null,h=null,e,o,c,w,a,f;if(i[v]=!0,i.chartObject){for(e=document.getElementById(i.chartObject.id);e.firstChild;)e.removeChild(e.firstChild);r(i.chartObject+"_tooltip")&&t.remove(r(i.chartObject+"_tooltip"))}else i.chartObject=i.renderer.createGroup({id:i.element.id+"_stockChart_chart"}),i.mainObject.appendChild(i.chartObject);if(this.stockChart.isDateTimeCategory="DateTimeCategory"===this.stockChart.primaryXAxis.valueType,this.stockChart.isDateTimeCategory&&!this.stockChart.sortedData.length){for(o=0,c=this.stockChart.series;o<c.length;o++)for(var y=c[o],b=y.dataSource,k=y.xName,l=0,p=b;l<p.length;l++)w=p[l],a=Date.parse(new Date(gt.DataUtil.parse.parseJson({val:w[k]}).val).toString()),-1===this.stockChart.sortedData.indexOf(a)&&this.stockChart.sortedData.push(a);this.stockChart.sortedData.sort(function(n,t){return n-t})}if(this.cartesianChartSize=this.calculateChartSize(),i.chart=new wv({chartArea:i.chartArea,margin:this.findMargin(i),primaryXAxis:this.copyObject(i.primaryXAxis),primaryYAxis:this.copyObject(i.primaryYAxis),rows:i.rows,indicators:i.indicators,axes:i.axes,tooltipRender:function(n){u.stockChart.trigger("tooltipRender",n)},axisLabelRender:function(n){u.stockChart.trigger("axisLabelRender",n)},seriesRender:function(t){s=null!=u.stockChart.startValue&&u.stockChart.isDateTimeCategory?u.stockChart.sortedData[Math.floor(u.stockChart.startValue)]:u.stockChart.startValue;h=null!=u.stockChart.endValue&&u.stockChart.isDateTimeCategory?u.stockChart.sortedData[Math.floor(u.stockChart.endValue)]:u.stockChart.endValue;t.data&&s&&h&&(t.data=t.data.filter(function(n){return new Date(gt.DataUtil.parse.parseJson({val:n[t.series.xName]}).val).getTime()>=s&&new Date(gt.DataUtil.parse.parseJson({val:n[t.series.xName]}).val).getTime()<=h}));t.data=n||t.data;u.stockChart.trigger("seriesRender",t)},onZooming:function(n){u.stockChart.trigger(or,n)},pointClick:function(n){u.stockChart.trigger("pointClick",n)},pointMove:function(n){u.stockChart.trigger("pointMove",n)},dataSource:i.dataSource,series:this.findSeriesCollection(i.series),zoomSettings:this.copyObject(i.zoomSettings),tooltip:i.tooltip,crosshair:i.crosshair,height:this.cartesianChartSize.height.toString(),selectedDataIndexes:i.selectedDataIndexes,selectionMode:i.selectionMode,isMultiSelect:i.isMultiSelect,annotations:i.annotations,theme:i.theme,legendSettings:{visible:!1},enableRtl:i.enableRtl,zoomComplete:function(n){if(-1!==n.axis.valueType.indexOf("DateTime")&&i.rangeNavigator){u.stockChart.zoomChange=!0;var t=u.calculateUpdatedRange(n.currentZoomFactor,n.currentZoomPosition,n.axis);i.rangeSelector.sliderChange(t.start,t.end)}}}),0!==i.indicators.length){if(i.isSelect)for(f=0;f<i.indicators.length;f++)i.chart.indicators[f].animation.enable=!1,i.chart.indicators[f].dataSource=t.extend([],i.chart.series[0].dataSource,null,!0);i.isSelect=!0}i.chart.stockChart=i;i.chart.appendTo(i.chartObject);i[v]=!1;i.onPanning&&(r(this.stockChart.element.id+"_stockChart_chart").setAttribute("cursor","pointer"),i.chart.mouseMove(i.mouseMoveEvent))},n.prototype.findMargin=function(n){var t={};return t.top=n.stockLegendModule&&n.legendSettings.visible&&"Top"===n.legendSettings.position?n.margin.top:2*n.margin.top,t.left=n.margin.left,t.right=n.margin.right,t.bottom=n.margin.bottom,t},n.prototype.findSeriesCollection=function(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push(n[t]),i[t].high=n[t].high,i[t].low=n[t].low,i[t].open=n[t].open,i[t].close=n[t].close,i[t].xName=n[t].xName,i[t].volume=n[t].volume,i[t].animation=n[t].animation,n[t].localData&&(i[t].dataSource=n[t].localData),i[t].yName=""===n[t].yName?n[t].close:n[t].yName,i[t].splineType="Spline"===i[t].type?"Cardinal":"Natural";return i},n.prototype.calculateChartSize=function(){var n=this.stockChart;return new i.Size(n.availableSize.width,n.enablePeriodSelector&&n.enableSelector?n.availableSize.height-n.toolbarHeight-51:n.enableSelector&&!n.enablePeriodSelector?n.availableSize.height-51:n.enablePeriodSelector&&!n.enableSelector?n.availableSize.height-n.toolbarHeight:n.availableSize.height)},n.prototype.calculateUpdatedRange=function(n,t,i){var r,u,f=i.actualRange;return u=(r=f.min+t*f.delta)+n*f.delta,this.stockChart.isDateTimeCategory&&(r=this.stockChart.sortedData.indexOf(parseInt(i.labels[Math.floor(r)],10)),u=this.stockChart.sortedData.indexOf(parseInt(i.labels[Math.floor(u)],10))),{start:r,end:u}},n.prototype.cartesianChartRefresh=function(n,t){n.cartesianChart.initializeChart(t)},n.prototype.copyObject=function(n){return t.extend({},n,{},!0)},n}(),ilt=function(){function n(n){this.stockChart=n}return n.prototype.initializeRangeNavigator=function(){var i=this,n=this.stockChart,u;if(n.chart.axisCollections[1].labelPadding,n.chart.axisCollections[1].lineStyle.width,n.selectorObject){for(u=document.getElementById(n.selectorObject.id);u.firstChild;)u.removeChild(u.firstChild);r(n.selectorObject.id+"_leftTooltip")&&t.remove(r(n.selectorObject.id+"_leftTooltip"));r(n.selectorObject.id+"_rightTooltip")&&t.remove(r(n.selectorObject.id+"_rightTooltip"))}else n.selectorObject=n.renderer.createGroup({id:n.element.id+"_stockChart_rangeSelector",transform:"translate(0,"+n.cartesianChart.cartesianChartSize.height+")"}),n.mainObject.appendChild(n.selectorObject);n.rangeNavigator=new gc({locale:"en",valueType:n.primaryXAxis.valueType,theme:this.stockChart.theme,series:this.findSeriesCollection(n.series),height:this.calculateChartSize().height.toString(),tickPosition:"Inside",majorTickLines:{width:0},value:[n.isDateTimeCategory?new Date(n.sortedData[Math.floor(n.startValue)]):new Date(n.startValue),n.isDateTimeCategory?new Date(n.sortedData[Math.floor(n.endValue)]):new Date(n.endValue)],margin:this.findMargin(),tooltip:{enable:n.tooltip.enable,displayMode:"OnDemand"},labelPlacement:"OnTicks",labelPosition:"Inside",dataSource:n.dataSource,intervalType:n.primaryXAxis.intervalType,enableRtl:n.enableRtl,changed:function(t){var r={name:"rangeChange",end:t.end,selectedData:t.selectedData,start:t.start,zoomFactor:t.zoomFactor,zoomPosition:t.zoomPosition,data:void 0};i.stockChart.trigger("rangeChange",r);i.stockChart.startValue=t.start;i.stockChart.endValue=t.end;i.stockChart.zoomChange||i.stockChart.cartesianChart.cartesianChartRefresh(i.stockChart,r.data);n.periodSelector&&n.periodSelector.datePicker&&(n.periodSelector.datePicker.startDate=i.stockChart.isDateTimeCategory?new Date(i.stockChart.sortedData[Math.floor(t.start)]):new Date(t.start),n.periodSelector.datePicker.endDate=i.stockChart.isDateTimeCategory?new Date(i.stockChart.sortedData[Math.floor(t.end)]):new Date(t.end),n.periodSelector.datePicker.dataBind())}});n.rangeNavigator.stockChart=n;n.rangeNavigator.appendTo(n.selectorObject)},n.prototype.findMargin=function(){return{top:5,left:0,right:0,bottom:0}},n.prototype.findSeriesCollection=function(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push(n[t]),i[t].xName=n[t].xName,i[t].yName=n[t].yName;return i},n.prototype.calculateChartSize=function(){var n=this.stockChart;return new i.Size(n.availableSize.width,n.enableSelector?51:0)},n.prototype.sliderChange=function(n,t){this.stockChart.rangeNavigator.rangeSlider.performAnimation(n,t,this.stockChart.rangeNavigator)},n}();const nl=ejdashboard.splitbuttons;var rlt=function(){function n(n){this.selectedSeries="";this.selectedIndicator="";this.selectedTrendLine="";this.indicators=[];this.stockChart=n;this.selectedSeries=this.stockChart.series[0].type}return n.prototype.initializePeriodSelector=function(){var t=this.stockChart.tempPeriods;this.stockChart.periods=t;this.stockChart.periodSelector.rootControl=this.stockChart;var n=this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect,i=r(this.stockChart.element.id+"_Secondary_Element"),u=this.stockChart.toolbarHeight;this.stockChart.periodSelector.appendSelector({thumbSize:0,element:i,width:n.width,height:u},n.x);this.stockChart.seriesType.length>0&&this.initializeSeriesSelector();this.initializeIndicatorSelector();this.stockChart.trendlineType.length>0&&this.initializeTrendlineSelector();this.exportButton()},n.prototype.getDropDownItems=function(n){var i=[],t,r,u;if(n===this.stockChart.seriesType){for(t=0;t<n.length;t++)i.push({text:"&nbsp;&nbsp;&nbsp;"+n[t].toString()});for(t=0;t<this.stockChart.series.length;t++)for(r=0;r<i.length;r++)(u="OHLC"===(u=i[r].text.replace("&nbsp;&nbsp;&nbsp;",""))?"HiloOpenClose":u)===this.stockChart.series[t].type&&(i[r].text=i[r].text.replace("&nbsp;&nbsp;&nbsp;","&#10004&nbsp;"))}else if(n===this.stockChart.indicatorType){for(t=0;t<n.length;t++)i.push({text:"&nbsp;&nbsp;&nbsp;"+n[t].toString()});for(t=0;t<this.stockChart.indicators.length;t++)for(r=0;r<i.length;r++)(u="Accumulation distribution"===(u=(u=i[r].text.replace("&nbsp;&nbsp;&nbsp;","")).toLowerCase().replace(/(^\w|_\w)/g,function(n){return n.toUpperCase()}).replace(/_/g,""))?"AccumulationDistribution":"Bollinger bands"===u?"BollingerBands":u)===this.stockChart.indicators[t].type&&(i[r].text=i[r].text.replace("&nbsp;&nbsp;&nbsp;","&#10004&nbsp;"),this.indicators.push(u))}else if(n===this.stockChart.exportType)for(t=0;t<n.length;t++)i.push({text:n[t].toString()});else for(t=0;t<n.length;t++)"Print"!==n[t].toString()&&i.push({text:"&nbsp;&nbsp;&nbsp;"+n[t].toString()});return i},n.prototype.addedSeries=function(n){for(var r,u,i=this.stockChart.series,t=0;t<i.length;t++)if("volume"!==i[t].yName)for(i[t].type=n.indexOf("Candle")>-1?"Candle":n.indexOf("OHLC")>-1?"HiloOpenClose":n,i[t].enableSolidCandles="Candle"===n,r=0;r<i[t].trendlines.length;r++)u=i[t].trendlines[r],u.animation.enable=!1,u.enableTooltip=!1},n.prototype.initializeSeriesSelector=function(){var n=this;this.stockChart.seriesType.indexOf("HiloOpenClose")>-1&&(this.stockChart.seriesType[this.stockChart.seriesType.indexOf("HiloOpenClose")]="OHLC");this.stockChart.seriesType.indexOf("Candle")>-1&&-1===this.stockChart.seriesType.indexOf("Hollow Candle")&&(this.stockChart.seriesType[this.stockChart.seriesType.length]="Hollow Candle");new nl.DropDownButton({enableHtmlSanitizer:!1,items:this.getDropDownItems(this.stockChart.seriesType),select:function(t){var i,r;n.selectedSeries=t.item.text;i=n.tickMark(t);(n.addedSeries(i),n.stockChart.cartesianChart.initializeChart(),n.stockChart.stockLegendModule&&n.stockChart.stockLegendModule.legendCollections.length&&n.stockChart.legendSettings.visible)&&(r=n.stockChart.stockLegendModule.legendBounds,n.stockChart.stockLegendModule.renderLegend(n.stockChart,n.stockChart.legendSettings,r))}}).appendTo("#"+this.stockChart.element.id+"_seriesType")},n.prototype.initializeTrendlineSelector=function(){var n=this;this.trendlineDropDown=new nl.DropDownButton({enableHtmlSanitizer:!1,items:this.stockChart.resizeTo?this.trendlineDropDown.items:this.getDropDownItems(this.stockChart.trendlineType),select:function(t){var i=n.tickMark(t),r,u;if(n.selectedTrendLine=""===n.selectedTrendLine?i:n.selectedTrendLine+","+i,n.trendline!==i){for(n.trendline=i,r=0;r<n.stockChart.series.length;r++)"volume"!==n.stockChart.series[r].yName&&(0===n.stockChart.series[0].trendlines.length?(u=void 0,n.stockChart.trendlinetriggered&&(u=[{type:i,width:1,enableTooltip:!1}],n.stockChart.trendlinetriggered=!1),n.stockChart.series[0].trendlines=u):(n.stockChart.series[0].trendlines[0].width=1,n.stockChart.series[0].trendlines[0].type=i,n.stockChart.series[0].trendlines[0].animation.enable=!!n.stockChart.trendlinetriggered));n.stockChart.cartesianChart.initializeChart()}else t.item.text="&nbsp;&nbsp;&nbsp;"+t.item.text.replace("&#10004&nbsp;",""),n.stockChart.series[0].trendlines[0].width=0,n.trendline=null,n.stockChart.cartesianChart.initializeChart()}});this.trendlineDropDown.appendTo("#"+this.stockChart.element.id+"_trendType")},n.prototype.initializeIndicatorSelector=function(){var n=this;this.indicatorDropDown=new nl.DropDownButton({enableHtmlSanitizer:!1,items:this.stockChart.resizeTo?this.indicatorDropDown.items:this.getDropDownItems(this.stockChart.indicatorType),select:function(t){for(var r,i,e,f,u=0;u<n.stockChart.series.length;u++)0!==n.stockChart.series[u].trendlines.length&&(n.stockChart.series[u].trendlines[0].animation.enable=!1);if(t.item.text=t.item.text.indexOf("&#10004&nbsp;")>=0?t.item.text.substr(t.item.text.indexOf(";")+1):t.item.text,r=t.item.text.replace("&nbsp;&nbsp;&nbsp;",""),i=r=(r=r.split(" ")[0].toLocaleLowerCase()+(r.split(" ")[1]?r.split(" ")[1]:"")).substr(0,1).toUpperCase()+r.substr(1),n.selectedIndicator=-1===n.selectedIndicator.indexOf(i)?n.selectedIndicator+" "+i:n.selectedIndicator.replace(i,""),"Tma"===i||"BollingerBands"===i||"Sma"===i||"Ema"===i)if(-1===n.indicators.indexOf(i))t.item.text="&#10004&nbsp;"+t.item.text.replace("&nbsp;&nbsp;&nbsp;",""),e=n.getIndicator(i,n.stockChart.series[0].yAxisName),n.indicators.push(i),n.stockChart.indicators=n.stockChart.indicators.concat(e),n.stockChart.cartesianChart.initializeChart();else{for(t.item.text="&nbsp;&nbsp;&nbsp;"+t.item.text,f=0;f<n.stockChart.indicators.length;f++)n.stockChart.indicators[f].type===i&&n.stockChart.indicators.splice(f,1);n.indicators.splice(n.indicators.indexOf(i),1);n.stockChart.cartesianChart.initializeChart()}else n.createIndicatorAxes(i,t)}});this.indicatorDropDown.appendTo("#"+this.stockChart.element.id+"_indicatorType")},n.prototype.getIndicator=function(n,t){var i=this.stockChart.series[0];return[{type:n,period:3,yAxisName:t,dataSource:i.localData,xName:i.xName,open:i.open,close:i.close,high:i.high,low:i.low,volume:i.volume,fill:"Sma"===n?"#32CD32":"#6063ff",animation:{enable:!1},upperLine:{color:"#FFE200",width:1},periodLine:{width:2},lowerLine:{color:"#FAA512",width:1},fastPeriod:8,slowPeriod:5,macdType:"Both",width:1,macdPositiveColor:"#6EC992",macdNegativeColor:"#FF817F",bandColor:"rgba(245, 203, 35, 0.12)"}]},n.prototype.createIndicatorAxes=function(n,t){var u,e,r,o,s,f,i;if(-1===this.indicators.indexOf(n)){if(t.item.text="&#10004&nbsp;"+t.item.text.replace("&nbsp;&nbsp;&nbsp;",""),this.indicators.push(n),u=this.stockChart.rows.length,this.stockChart.rows[this.stockChart.rows.length-1].height="15%",e=[{height:100-15*u+"px"}],1===this.stockChart.rows.length&&(this.stockChart.isSingleAxis=!0),this.stockChart.rows=this.stockChart.rows.concat(e),this.stockChart.isSingleAxis)for(r=0;r<this.stockChart.axes.length;r++)this.stockChart.axes[r].rowIndex+=1;else this.stockChart.axes[0].rowIndex+=1;o=[{plotOffset:10,opposedPosition:!0,rowIndex:this.stockChart.isSingleAxis?0:this.stockChart.axes.length,desiredIntervals:1,labelFormat:"n2",majorGridLines:this.stockChart.primaryYAxis.majorGridLines,lineStyle:this.stockChart.primaryYAxis.lineStyle,labelPosition:this.stockChart.primaryYAxis.labelPosition,majorTickLines:this.stockChart.primaryYAxis.majorTickLines,rangePadding:"None",name:n.toString()}];this.stockChart.axes=this.stockChart.axes.concat(o);this.stockChart.primaryYAxis.rowIndex=this.stockChart.isSingleAxis?u+1:0;s=this.getIndicator(n,n.toString());this.stockChart.indicators=this.stockChart.indicators.concat(s);this.stockChart.cartesianChart.initializeChart()}else{for(t.item.text="&nbsp;&nbsp;&nbsp;"+t.item.text,r=0;r<this.stockChart.indicators.length;r++)this.stockChart.indicators[r].type===n&&this.stockChart.indicators.splice(r,1);for(this.indicators.splice(this.indicators.indexOf(n),1),f=0,i=0;i<this.stockChart.axes.length;i++)this.stockChart.axes[i].name===n&&(f=this.stockChart.axes[i].rowIndex,this.stockChart.rows.splice(i,1),this.stockChart.axes.splice(i,1));for(i=0;i<this.stockChart.axes.length;i++)0!==this.stockChart.axes[i].rowIndex&&this.stockChart.axes[i].rowIndex>f&&(this.stockChart.axes[i].rowIndex=this.stockChart.axes[i].rowIndex-1);this.stockChart.cartesianChart.initializeChart()}},n.prototype.tickMark=function(n){for(var r,i=n.item.parentObj.items,t=0;t<i.length;t++)i[t].text=i[t].text.indexOf("&#10004&nbsp;")>=0?i[t].text.substr(i[t].text.indexOf(";")+1):i[t].text,i[t].text.indexOf("&nbsp;&nbsp;&nbsp;")>=0||(i[t].text="&nbsp;&nbsp;&nbsp;"+i[t].text);return n.item.text.indexOf("&nbsp;&nbsp;&nbsp;")>=0?(r=n.item.text.replace("&nbsp;&nbsp;&nbsp;",""),n.item.text=n.item.text.replace("&nbsp;&nbsp;&nbsp;","&#10004&nbsp;")):r=n.item.text.replace("&#10004&nbsp;",""),r},n.prototype.exportButton=function(){var n=this;new nl.DropDownButton({enableHtmlSanitizer:!1,items:this.getDropDownItems(this.stockChart.exportType),select:function(u){var s=u.item.text,e,c;if(n.stockChart.chart.exportModule){var f=n.stockChart,o=f.element.id+"_stockChart_",h=f.svgObject.getBoundingClientRect();n.stockChart.svgObject.insertAdjacentElement("afterbegin",n.addExportSettings("Print"===s));e=f.svgObject.firstElementChild.getBoundingClientRect();c=new ft("additionalRect","transparent",{width:0,color:"transparent"},1,new i.Rect(0,0,n.stockChart.availableSize.width,e.height));f.svgObject.firstElementChild.insertAdjacentElement("afterbegin",n.stockChart.renderer.drawRectangle(c));n.stockChart.svgObject.setAttribute("height",(h.height+e.height).toString());r(o+"chart").style.transform="translateY("+e.height+"px)";f.enableSelector&&r(o+"rangeSelector").setAttribute("transform","translate(0,"+(f.cartesianChart.cartesianChartSize.height+e.height)+")");n.stockChart.legendSettings.visible&&n.stockChart.stockLegendModule&&(r(f.element.id+"_chart_legend_g").style.transform="translateY("+e.height+"px)");"Print"===s?n.stockChart.chart.print(n.stockChart.svgObject.id):f.chart.exportModule.export(s,"StockChart",null,[f],null,f.svgObject.clientHeight);t.remove(r(n.stockChart.element.id+"_additionalExport"));r(o+"chart").style.transform="";f.enableSelector&&r(o+"rangeSelector").setAttribute("transform","translate(0,"+f.cartesianChart.cartesianChartSize.height+")");n.stockChart.legendSettings.visible&&n.stockChart.stockLegendModule&&(r(f.element.id+"_chart_legend_g").style.transform="translateY(0px)");n.stockChart.svgObject.setAttribute("height",h.height.toString())}}}).appendTo("#"+this.stockChart.element.id+"_export")},n.prototype.calculateAutoPeriods=function(){var n=[],t=this.stockChart.isDateTimeCategory?this.stockChart.sortedData[this.stockChart.seriesXMin]:this.stockChart.seriesXMin,i=this.stockChart.isDateTimeCategory?this.stockChart.sortedData[this.stockChart.seriesXMax]:this.stockChart.seriesXMax;return(n=this.findRange(t,i)).push({text:"YTD",selected:!0},{text:"All"}),n},n.prototype.findRange=function(n,t){var i=[];return(t-n)/3154e7>=1?i.push({text:"1M",interval:1,intervalType:"Months"},{text:"3M",interval:3,intervalType:"Months"},{text:"6M",interval:6,intervalType:"Months"},{text:"1Y",interval:1,intervalType:"Years"}):(t-n)/1577e7>=1?i.push({text:"1M",interval:1,intervalType:"Months"},{text:"3M",interval:3,intervalType:"Months"},{text:"6M",interval:6,intervalType:"Months"}):(t-n)/2628e6>=1?i.push({text:"1D",interval:1,intervalType:"Days"},{text:"3W",interval:3,intervalType:"Weeks"},{text:"1M",interval:1,intervalType:"Months"}):(t-n)/864e5>=1&&i.push({text:"1H",interval:1,intervalType:"Hours"},{text:"12H",interval:12,intervalType:"Hours"},{text:"1D",interval:1,intervalType:"Days"}),i},n.prototype.addExportSettings=function(n){var t=this.stockChart.renderer.createGroup({id:this.stockChart.element.id+"_additionalExport",width:this.stockChart.availableSize.width,fill:this.stockChart.background?this.stockChart.background:"transparent"}),e=i.measureText(this.stockChart.title,this.stockChart.titleStyle,this.stockChart.themeStyle.chartTitleFont).height,o=new i.TextOption(t.id+"_Title",pr(new i.Rect(0,0,this.stockChart.availableSize.width,0),this.stockChart.titleStyle),0,"middle",this.stockChart.title,"","text-before-edge");if(ct(this.stockChart.renderer,o,this.stockChart.titleStyle,this.stockChart.titleStyle.color||this.stockChart.themeStyle.chartTitleFont.color,t,null,null,null,null,null,null,0,null,null,null,this.stockChart.themeStyle.chartTitleFont),n)return t;var r={size:"16px",fontWeight:"600",color:this.stockChart.themeStyle.chartTitleFont.color,fontStyle:"Normal",fontFamily:this.stockChart.themeStyle.chartTitleFont.fontFamily},u=i.measureText("Series: "+this.selectedSeries,r).width/2,f=e;return this.textElementSpan(new i.TextOption(t.id+"_Series",u,f,"start",["Series : ",this.selectedSeries],"","text-before-edge"),r,this.stockChart.themeStyle.chartTitleFont.color,t),u+=i.measureText("Series: "+this.selectedSeries+" Z",r).width,""!==this.selectedIndicator&&(this.textElementSpan(new i.TextOption(t.id+"_Indicator",u,f,"start",["Indicator :",this.selectedIndicator],"","text-before-edge"),r,this.stockChart.themeStyle.chartTitleFont.color,t),u+=i.measureText("Indicator: "+this.selectedIndicator+" Z",r).width),""!==this.selectedTrendLine&&this.textElementSpan(new i.TextOption(t.id+"_TrendLine",u,f,"start",["Trendline :",this.selectedTrendLine],"","text-before-edge"),r,this.stockChart.themeStyle.chartTitleFont.color,t),t},n.prototype.textElementSpan=function(n,t,r,u,f,e,s,h,c){var p,w,v,y,a,l,b;if(void 0===f&&(f=!1),void 0===h&&(h=!1),v=new i.SvgRenderer(""),p={id:n.id,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-weight":t.fontWeight,"text-anchor":n.anchor,x:n.x,y:n.y,fill:r,"font-size":t.size,transform:n.transform,opacity:t.opacity,"dominant-baseline":n.baseLine},y="string"==typeof n.text?n.text:f?n.text[n.text.length-1]:n.text[0],a=v.createText(p,y),"string"!=typeof n.text&&n.text.length>1)for(l=1,b=n.text.length;l<b;l++)n.text[l]=" "+n.text[l],w=v.createTSpan({x:n.x+i.measureText(y,t).width+5,id:n.id,y:n.y,opacity:.5},n.text[l]),a.appendChild(w);return o(!1,u,a,e,s,"x","y",null,null,h,!1,null,c),a},n}(),dr=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),u=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},fo=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Property("")],i.prototype,"color",void 0),u([t.Property("16px")],i.prototype,"size",void 0),u([t.Property("Segoe UI")],i.prototype,"fontFamily",void 0),u([t.Property("Normal")],i.prototype,"fontStyle",void 0),u([t.Property("Normal")],i.prototype,"fontWeight",void 0),u([t.Property(1)],i.prototype,"opacity",void 0),u([t.Property("Trim")],i.prototype,"textOverflow",void 0),u([t.Property("Center")],i.prototype,"textAlignment",void 0),i}(t.ChildProperty),he=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Property("")],i.prototype,"color",void 0),u([t.Property(1)],i.prototype,"width",void 0),i}(t.ChildProperty),ed=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Complex({},he)],i.prototype,"border",void 0),u([t.Property("transparent")],i.prototype,"background",void 0),u([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),uy=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Property(null)],i.prototype,"left",void 0),u([t.Property(null)],i.prototype,"right",void 0),u([t.Property(null)],i.prototype,"top",void 0),u([t.Property(null)],i.prototype,"bottom",void 0),i}(t.ChildProperty),od=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Property(!1)],i.prototype,"startFromAxis",void 0),u([t.Property(!0)],i.prototype,"visible",void 0),u([t.Property(null)],i.prototype,"start",void 0),u([t.Property("#808080")],i.prototype,"color",void 0),u([t.Property(null)],i.prototype,"end",void 0),u([t.Property(null)],i.prototype,"size",void 0),u([t.Property("Auto")],i.prototype,"sizeType",void 0),u([t.Property(null)],i.prototype,"dashArray",void 0),u([t.Property(!1)],i.prototype,"isRepeat",void 0),u([t.Property(null)],i.prototype,"repeatEvery",void 0),u([t.Property(!1)],i.prototype,"isSegmented",void 0),u([t.Property(null)],i.prototype,"repeatUntil",void 0),u([t.Property(null)],i.prototype,"segmentStart",void 0),u([t.Property(null)],i.prototype,"segmentAxisName",void 0),u([t.Property(null)],i.prototype,"segmentEnd",void 0),u([t.Property(1)],i.prototype,"opacity",void 0),u([t.Property("")],i.prototype,"text",void 0),u([t.Complex({color:"transparent",width:1},he)],i.prototype,"border",void 0),u([t.Property(null)],i.prototype,"rotation",void 0),u([t.Property("Behind")],i.prototype,"zIndex",void 0),u([t.Property("Middle")],i.prototype,"horizontalAlignment",void 0),u([t.Property("Middle")],i.prototype,"verticalAlignment",void 0),u([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},fo)],i.prototype,"textStyle",void 0),i}(t.ChildProperty),sd=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Property(null)],i.prototype,"fill",void 0),u([t.Property("Gap")],i.prototype,"mode",void 0),u([t.Complex({color:"transparent",width:0},he)],i.prototype,"border",void 0),i}(t.ChildProperty),fh=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Property("Line")],i.prototype,"type",void 0),u([t.Property(null)],i.prototype,"length",void 0),u([t.Property(null)],i.prototype,"color",void 0),u([t.Property("")],i.prototype,"dashArray",void 0),u([t.Property(1)],i.prototype,"width",void 0),i}(t.ChildProperty),hd=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.localData=void 0,t}return dr(i,n),u([t.Property("date")],i.prototype,"xName",void 0),u([t.Property("close")],i.prototype,"yName",void 0),u([t.Property("open")],i.prototype,"open",void 0),u([t.Property("close")],i.prototype,"close",void 0),u([t.Property("high")],i.prototype,"high",void 0),u([t.Property("low")],i.prototype,"low",void 0),u([t.Property("volume")],i.prototype,"volume",void 0),u([t.Property("")],i.prototype,"pointColorMapping",void 0),u([t.Property("SeriesType")],i.prototype,"legendShape",void 0),u([t.Property("")],i.prototype,"legendImageUrl",void 0),u([t.Complex(null,au)],i.prototype,"animation",void 0),u([t.Property(null)],i.prototype,"xAxisName",void 0),u([t.Property(null)],i.prototype,"yAxisName",void 0),u([t.Property(null)],i.prototype,"fill",void 0),u([t.Property("0")],i.prototype,"dashArray",void 0),u([t.Property(1)],i.prototype,"width",void 0),u([t.Property("")],i.prototype,"name",void 0),u([t.Property("")],i.prototype,"dataSource",void 0),u([t.Property()],i.prototype,"query",void 0),u([t.Property("#e74c3d")],i.prototype,"bullFillColor",void 0),u([t.Property("#2ecd71")],i.prototype,"bearFillColor",void 0),u([t.Property(!1)],i.prototype,"enableSolidCandles",void 0),u([t.Property(!0)],i.prototype,"visible",void 0),u([t.Complex({color:"transparent",width:0},yt)],i.prototype,"border",void 0),u([t.Property(1)],i.prototype,"opacity",void 0),u([t.Property("Candle")],i.prototype,"type",void 0),u([t.Complex(null,us)],i.prototype,"marker",void 0),u([t.Collection([],cv)],i.prototype,"trendlines",void 0),u([t.Property(!0)],i.prototype,"enableTooltip",void 0),u([t.Property("")],i.prototype,"tooltipMappingName",void 0),u([t.Property(null)],i.prototype,"selectionStyle",void 0),u([t.Property(.5)],i.prototype,"cardinalSplineTension",void 0),u([t.Complex(null,wl)],i.prototype,"cornerRadius",void 0),u([t.Complex(null,sd)],i.prototype,"emptyPointSettings",void 0),u([t.Property(null)],i.prototype,"columnWidth",void 0),u([t.Property(0)],i.prototype,"columnSpacing",void 0),u([t.Property(!0)],i.prototype,"showNearestTooltip",void 0),u([t.Complex({},hv)],i.prototype,"lastValueLabel",void 0),i}(t.ChildProperty),cd=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Property("Sma")],i.prototype,"type",void 0),u([t.Property(14)],i.prototype,"period",void 0),u([t.Property(3)],i.prototype,"dPeriod",void 0),u([t.Property(14)],i.prototype,"kPeriod",void 0),u([t.Property(80)],i.prototype,"overBought",void 0),u([t.Property(20)],i.prototype,"overSold",void 0),u([t.Property("Close")],i.prototype,"field",void 0),u([t.Property(2)],i.prototype,"standardDeviation",void 0),u([t.Property(12)],i.prototype,"slowPeriod",void 0),u([t.Property(!0)],i.prototype,"showZones",void 0),u([t.Property(26)],i.prototype,"fastPeriod",void 0),u([t.Complex({color:"#ff9933",width:2},fh)],i.prototype,"macdLine",void 0),u([t.Property("Both")],i.prototype,"macdType",void 0),u([t.Property("#e74c3d")],i.prototype,"macdNegativeColor",void 0),u([t.Property("#2ecd71")],i.prototype,"macdPositiveColor",void 0),u([t.Property("rgba(211,211,211,0.25)")],i.prototype,"bandColor",void 0),u([t.Complex({color:"#ffb735",width:1},fh)],i.prototype,"upperLine",void 0),u([t.Property("")],i.prototype,"seriesName",void 0),u([t.Complex({color:"#f2ec2f",width:1},fh)],i.prototype,"periodLine",void 0),u([t.Complex({color:"#f2ec2f",width:1},fh)],i.prototype,"lowerLine",void 0),u([t.Property("")],i.prototype,"high",void 0),u([t.Property("")],i.prototype,"open",void 0),u([t.Property("")],i.prototype,"low",void 0),u([t.Property("")],i.prototype,"xName",void 0),u([t.Property("")],i.prototype,"close",void 0),u([t.Property("")],i.prototype,"pointColorMapping",void 0),u([t.Property("")],i.prototype,"volume",void 0),u([t.Property(null)],i.prototype,"xAxisName",void 0),u([t.Property(null)],i.prototype,"yAxisName",void 0),u([t.Complex(null,au)],i.prototype,"animation",void 0),u([t.Property(null)],i.prototype,"fill",void 0),u([t.Property("0")],i.prototype,"dashArray",void 0),u([t.Property(1)],i.prototype,"width",void 0),u([t.Property()],i.prototype,"query",void 0),u([t.Property("")],i.prototype,"dataSource",void 0),i}(t.ChildProperty),tl=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Complex({},ka)],i.prototype,"crosshairTooltip",void 0),u([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},oi)],i.prototype,"labelStyle",void 0),u([t.Property("")],i.prototype,"title",void 0),u([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},fo)],i.prototype,"titleStyle",void 0),u([t.Property("")],i.prototype,"labelFormat",void 0),u([t.Property("DateTime")],i.prototype,"skeletonType",void 0),u([t.Property("")],i.prototype,"skeleton",void 0),u([t.Property(0)],i.prototype,"plotOffset",void 0),u([t.Property(10)],i.prototype,"logBase",void 0),u([t.Property(0)],i.prototype,"rowIndex",void 0),u([t.Property(1)],i.prototype,"span",void 0),u([t.Property(3)],i.prototype,"maximumLabels",void 0),u([t.Property(null)],i.prototype,"desiredIntervals",void 0),u([t.Property(1)],i.prototype,"zoomFactor",void 0),u([t.Property(0)],i.prototype,"zoomPosition",void 0),u([t.Property(!1)],i.prototype,"opposedPosition",void 0),u([t.Property(!0)],i.prototype,"enableAutoIntervalOnZooming",void 0),u([t.Property("Double")],i.prototype,"valueType",void 0),u([t.Property("Auto")],i.prototype,"rangePadding",void 0),u([t.Property("None")],i.prototype,"edgeLabelPlacement",void 0),u([t.Property("BetweenTicks")],i.prototype,"labelPlacement",void 0),u([t.Property("Auto")],i.prototype,"intervalType",void 0),u([t.Property("Outside")],i.prototype,"tickPosition",void 0),u([t.Property("")],i.prototype,"name",void 0),u([t.Property("Outside")],i.prototype,"labelPosition",void 0),u([t.Property(!0)],i.prototype,"visible",void 0),u([t.Property(0)],i.prototype,"labelRotation",void 0),u([t.Property(0)],i.prototype,"minorTicksPerInterval",void 0),u([t.Property(null)],i.prototype,"crossesAt",void 0),u([t.Property(null)],i.prototype,"crossesInAxis",void 0),u([t.Property(!0)],i.prototype,"placeNextToAxisLine",void 0),u([t.Property(null)],i.prototype,"minimum",void 0),u([t.Property(null)],i.prototype,"interval",void 0),u([t.Property(null)],i.prototype,"maximum",void 0),u([t.Property(34)],i.prototype,"maximumLabelWidth",void 0),u([t.Complex({},dh)],i.prototype,"majorTickLines",void 0),u([t.Property(!1)],i.prototype,"enableTrim",void 0),u([t.Complex({},ba)],i.prototype,"minorTickLines",void 0),u([t.Complex({},pa)],i.prototype,"minorGridLines",void 0),u([t.Complex({},kh)],i.prototype,"majorGridLines",void 0),u([t.Complex({},wa)],i.prototype,"lineStyle",void 0),u([t.Property(!1)],i.prototype,"isInversed",void 0),u([t.Property("Trim")],i.prototype,"labelIntersectAction",void 0),u([t.Property(100)],i.prototype,"coefficient",void 0),u([t.Property(0)],i.prototype,"startAngle",void 0),u([t.Property(2)],i.prototype,"tabIndex",void 0),u([t.Collection([],od)],i.prototype,"stripLines",void 0),u([t.Property(null)],i.prototype,"description",void 0),i}(t.ChildProperty),ld=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Property("100%")],i.prototype,"height",void 0),u([t.Complex({},he)],i.prototype,"border",void 0),i}(t.ChildProperty),ult=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Property(2)],i.prototype,"period",void 0),u([t.Property("")],i.prototype,"name",void 0),u([t.Property("Linear")],i.prototype,"type",void 0),u([t.Property(2)],i.prototype,"polynomialOrder",void 0),u([t.Property(0)],i.prototype,"forwardForecast",void 0),u([t.Property(0)],i.prototype,"backwardForecast",void 0),u([t.Complex({},au)],i.prototype,"animation",void 0),u([t.Property(!0)],i.prototype,"enableTooltip",void 0),u([t.Complex({},us)],i.prototype,"marker",void 0),u([t.Property(null)],i.prototype,"intercept",void 0),u([t.Property("")],i.prototype,"fill",void 0),u([t.Property("SeriesType")],i.prototype,"legendShape",void 0),u([t.Property(1)],i.prototype,"width",void 0),i}(t.ChildProperty),ad=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Property("0")],i.prototype,"y",void 0),u([t.Property("0")],i.prototype,"x",void 0),u([t.Property(null)],i.prototype,"content",void 0),u([t.Property("Chart")],i.prototype,"region",void 0),u([t.Property("Center")],i.prototype,"horizontalAlignment",void 0),u([t.Property("Pixel")],i.prototype,"coordinateUnits",void 0),u([t.Property("Middle")],i.prototype,"verticalAlignment",void 0),u([t.Property(null)],i.prototype,"yAxisName",void 0),u([t.Property(null)],i.prototype,"description",void 0),u([t.Property(null)],i.prototype,"xAxisName",void 0),i}(t.ChildProperty),vd=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Property(0)],i.prototype,"point",void 0),u([t.Property(0)],i.prototype,"series",void 0),i}(t.ChildProperty),yd=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return dr(i,n),u([t.Property("Circle")],i.prototype,"type",void 0),u([t.Property("")],i.prototype,"text",void 0),u([t.Property("")],i.prototype,"description",void 0),u([t.Property()],i.prototype,"date",void 0),u([t.Complex({color:"black",width:1},he)],i.prototype,"border",void 0),u([t.Property("transparent")],i.prototype,"background",void 0),u([t.Property(!0)],i.prototype,"showOnSeries",void 0),u([t.Property("close")],i.prototype,"placeAt",void 0),u([t.Complex(sv,fo)],i.prototype,"textStyle",void 0),u([t.Property([])],i.prototype,"seriesIndexes",void 0),i}(t.ChildProperty),flt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),elt=function(n){function u(t){var i=n.call(this,t.chart)||this;return i.symbolLocations=[],i.stockChart=t,i.chartId=i.stockChart.element.id,i}return flt(u,n),u.prototype.renderStockEvents=function(){var n,c,l,r=this.stockChart,a=r.renderer.createGroup({id:this.chartId+"_StockEvents"}),u,o,v,t,e,f,s;for(this.symbolLocations=function(n,t,i){for(var e,u,f=[],r=0;r<n;++r){for(e=[],u=0;u<t;++u)e[u]=i;f[r]=e}return f}(r.series.length,r.stockEvents.length,new h(0,0)),u=0;u<r.stockEvents.length;u++)for(n=this.stockChart.stockEvents[u],o=0,v=r.chart.series;o<v.length;o++)if(t=v[o],e={name:aa,stockChart:r,text:n.text,type:n.type,cancel:!1,series:t},(r.trigger(aa,e),n.text=e.text,n.type=e.type,l=i.measureText(n.text+"W",n.textStyle,this.stockChart.themeStyle.axisLabelFont),!e.cancel)&&(c=r.renderer.createGroup({id:this.chartId+"_Series_"+t.index+"_StockEvents_"+u}),f=this.dateParse(n.date).getTime(),si(f=this.stockChart.isDateTimeCategory?t.xAxis.labels.indexOf(f.toString()):f,t.xAxis.visibleRange)&&f>=t.xMin&&f<=t.xMax))if(n.seriesIndexes.length>0)for(s=0;s<n.seriesIndexes.length;s++)n.seriesIndexes[s]===t.index&&a.appendChild(this.creatEventGroup(c,t,n,u,l));else a.appendChild(this.creatEventGroup(c,t,n,u,l));return a},u.prototype.creatEventGroup=function(n,t,i,r,u){var f=this.findClosePoint(t,i);return i.showOnSeries||(f.y=t.yAxis.rect.y+t.yAxis.rect.height),this.symbolLocations[t.index][r]=f,this.createStockElements(n,i,t,r,f,u),n},u.prototype.findClosePoint=function(n,t){var r=this.dateParse(t.date).getTime(),f,e,o,u,i,s;for(r=this.stockChart.isDateTimeCategory?n.xAxis.labels.indexOf(r.toString()):r,u=this.getClosest(n,r),i=0;i<n.points.length;i++)(u===(e=n.points[i]).xValue&&e.visible||0!==i&&i!==n.points.length-1&&u>n.points[i-1].xValue&&u<n.points[i+1].xValue)&&(f=new io(e,n));return s=n.xAxis.rect.x+ut(f.point.xValue,n.xAxis)*n.xAxis.rect.width,o=-1*(o=ut(f.point[t.placeAt],n.yAxis)*n.yAxis.rect.height)+(n.yAxis.rect.y+n.yAxis.rect.height),new h(s,o)},u.prototype.createStockElements=function(n,t,r,u,f,e){var v,y,a=new i.Size(e.width>20?e.width:20,e.height>20?e.height:20),o=f.x,s=f.y,l=this.chartId+"_Series_"+r.index+"_StockEvents_"+u,c=t.border;switch(t.type){case"Flag":case"Circle":case"Square":n.appendChild(tr(new h(o,s),"Circle",new i.Size(2,2),"",new i.PathOption(l+"_Circle","transparent",c.width,c.color),this.dateParse(t.date).toISOString()));n.appendChild(tr(new h(o,s-5),"VerticalLine",new i.Size(9,9),"",new i.PathOption(l+"_Path",c.color,c.width,c.color),this.dateParse(t.date).toISOString()));n.appendChild(tr(new h("Flag"!==t.type?o:o+a.width/2,s-a.height),t.type,a,"",new i.PathOption(l+"_Shape",t.background,c.width,c.color),this.dateParse(t.date).toISOString()));ct(this.stockChart.renderer,new i.TextOption(l+"_Text","Flag"!==t.type?f.x:f.x+a.width/2,f.y-a.height,"middle",t.text,"","middle"),t.textStyle,t.textStyle.color,n);break;case"ArrowUp":case"ArrowDown":case"ArrowRight":case"ArrowLeft":v="M "+o+" "+s+" "+this.findArrowpaths(t.type);y=new i.PathOption(l+"_Shape",t.background,c.width,c.color,1,"",v);n.appendChild(this.stockChart.renderer.drawPath(y));break;case"Triangle":case"InvertedTriangle":a.height=3*e.height;a.width=e.width+1.5*e.width;n.appendChild(tr(new h(f.x,f.y),t.type,new i.Size(20,20),"",new i.PathOption(l+"_Shape",t.background,c.width,c.color),this.dateParse(t.date).toISOString()));ct(this.stockChart.renderer,new i.TextOption(l+"_Text",f.x,f.y,"middle",t.text,"","middle"),t.textStyle,t.textStyle.color,n);break;case"Text":e.height+=8;v="M "+o+" "+s+" L "+(o-5)+" "+(s-5)+" L "+(o-e.width/2)+" "+(s-5)+" L "+(o-e.width/2)+" "+(s-e.height)+" L "+(o+e.width/2)+" "+(s-e.height)+" L "+(o+e.width/2)+" "+(s-5)+" L "+(o+5)+" "+(s-5)+" Z";y=new i.PathOption(l+"_Shape",t.background,c.width,c.color,1,"",v);n.appendChild(this.stockChart.renderer.drawPath(y));ct(this.stockChart.renderer,new i.TextOption(l+"_Text",o,s-e.height/2,"middle",t.text,"","middle"),t.textStyle,t.textStyle.color,n);break;default:v="M "+o+" "+s+" L "+(o-e.width/2)+" "+(s-e.height/3)+" L "+(o-e.width/2)+" "+(s-e.height)+" L "+(o+e.width/2)+" "+(s-e.height)+" L "+(o+e.width/2)+" "+(s-e.height/3)+" Z";y=new i.PathOption(l+"_Shape",t.background,c.width,c.color,1,"",v);n.appendChild(this.stockChart.renderer.drawPath(y));ct(this.stockChart.renderer,new i.TextOption(l+"_Text",o,s-e.height/2,"middle",t.text,"","middle"),t.textStyle,t.textStyle.color,n)}},u.prototype.renderStockEventTooltip=function(n){var o=parseInt(n.split("_StockEvents_")[0].split(this.chartId+"_Series_")[1],10),u=parseInt(n.split("_StockEvents_")[1].replace(/\D+/g,""),10),s=this.symbolLocations[o][u],c=new h(s.x,s.y+this.stockChart.toolbarHeight+this.stockChart.titleSize.height),f,e;this.applyHighLights(u,o);f=this.getElement(this.chartId+"_StockEvents_Tooltip_svg");this.stockEventTooltip&&f&&parseInt(f.getAttribute("opacity"),10)>0?(this.stockEventTooltip.content=[this.stockChart.stockEvents[u].description],this.stockEventTooltip.location=c,this.stockEventTooltip.dataBind()):(r(this.chartId+"_StockEvents_Tooltip_svg")&&t.remove(r(this.chartId+"_StockEvents_Tooltip")),e=t.createElement("div",{id:this.chartId+"_StockEvents_Tooltip",className:"ejSVGTooltip",attrs:{style:"pointer-events:none; position:absolute;z-index: 1"}}),r(this.chartId+"_Secondary_Element").appendChild(e),this.stockEventTooltip=new i.Tooltip({opacity:1,header:"",content:[this.stockChart.stockEvents[u].description],enableAnimation:!0,location:c,theme:this.stockChart.theme,inverted:!0,areaBounds:this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect}),this.stockEventTooltip.areaBounds.y+=this.stockChart.toolbarHeight+this.stockChart.titleSize.height,this.stockEventTooltip.appendTo("#"+e.id))},u.prototype.removeStockEventTooltip=function(n){var r=this,i=this.getElement(this.chartId+"_StockEvents_Tooltip");this.stopAnimation();i&&this.stockEventTooltip?this.toolTipInterval=+setTimeout(function(){r.stockEventTooltip.fadeOut();r.removeHighLights()},n):i&&this.stockChart.onPanning&&t.remove(i)},u.prototype.findArrowpaths=function(n){var t="";switch(n){case"ArrowUp":t="l -10 10 l 5 0 l 0 10 l 10 0 l 0 -10 l 5 0 z";break;case"ArrowDown":t="l -10 -10 l 5 0 l 0 -10 l 10 0 l 0 10 l 5 0 z";break;case"ArrowLeft":t="l -10 -10 l 0 5 l -10 0 l 0 10 l 10 0 l 0 5 z";break;case"ArrowRight":t="l 10 -10 l 0 5 l 10 0 l 0 10 l -10 0 l 0 5 z"}return t},u.prototype.applyHighLights=function(n,t){this.pointIndex===n&&this.seriesIndex===t||this.removeHighLights();this.pointIndex=n;this.seriesIndex=t;var i=this.chartId+"_Series_"+t+"_StockEvents_"+n;this.setOpacity(i+"_Shape",.5);this.setOpacity(i+"_Text",.5)},u.prototype.removeHighLights=function(){var n=this.chartId+"_Series_"+this.seriesIndex+"_StockEvents_"+this.pointIndex;this.setOpacity(n+"_Shape",1);this.setOpacity(n+"_Text",1)},u.prototype.setOpacity=function(n,t){r(n)&&r(n).setAttribute("opacity",t.toString())},u.prototype.dateParse=function(n){var t=this.chart.intl.getDateParser({skeleton:"full",type:"dateTime"}),i=this.chart.intl.getDateFormat({skeleton:"full",type:"dateTime"});return new Date(Date.parse(t(i(new Date(gt.DataUtil.parse.parseJson({val:n}).val)))))},u}(pc),pd=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ri=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},wd=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return pd(i,n),ri([t.Property(!1)],i.prototype,"visible",void 0),ri([t.Property(null)],i.prototype,"height",void 0),ri([t.Property(null)],i.prototype,"width",void 0),ri([t.Complex({x:0,y:0},lf)],i.prototype,"location",void 0),ri([t.Property("Auto")],i.prototype,"position",void 0),ri([t.Property("Series")],i.prototype,"mode",void 0),ri([t.Property(8)],i.prototype,"padding",void 0),ri([t.Property(null)],i.prototype,"itemPadding",void 0),ri([t.Property("Center")],i.prototype,"alignment",void 0),ri([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},fo)],i.prototype,"textStyle",void 0),ri([t.Property(10)],i.prototype,"shapeHeight",void 0),ri([t.Property(10)],i.prototype,"shapeWidth",void 0),ri([t.Complex({},he)],i.prototype,"border",void 0),ri([t.Complex({left:0,right:0,top:0,bottom:0},uy)],i.prototype,"margin",void 0),ri([t.Complex({left:0,right:0,top:0,bottom:0},vs)],i.prototype,"containerPadding",void 0),ri([t.Property(8)],i.prototype,"shapePadding",void 0),ri([t.Property("transparent")],i.prototype,"background",void 0),ri([t.Property(1)],i.prototype,"opacity",void 0),ri([t.Property(!0)],i.prototype,"toggleVisibility",void 0),ri([t.Property(null)],i.prototype,"description",void 0),ri([t.Property(3)],i.prototype,"tabIndex",void 0),ri([t.Property(null)],i.prototype,"title",void 0),ri([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},fo)],i.prototype,"titleStyle",void 0),ri([t.Property("Top")],i.prototype,"titlePosition",void 0),ri([t.Property(100)],i.prototype,"maximumTitleWidth",void 0),ri([t.Property(!0)],i.prototype,"enablePages",void 0),ri([t.Property(!1)],i.prototype,"isInversed",void 0),i}(t.ChildProperty),olt=function(n){function r(t){var i=n.call(this,t)||this;return i.library=i,i.addEventListener(),i}return pd(r,n),r.prototype.addEventListener=function(){this.chart.isDestroyed||(this.chart.on("click",this.click,this),this.chart.on(t.Browser.touchEndEvent,this.mouseEnd,this),this.chart.on(t.Browser.touchMoveEvent,this.mouseMove,this))},r.prototype.removeEventListener=function(){this.chart.isDestroyed||(this.chart.off("click",this.click),this.chart.off(t.Browser.touchEndEvent,this.mouseEnd),this.chart.off(t.Browser.touchMoveEvent,this.mouseMove))},r.prototype.mouseMove=function(n){this.chart.legendSettings.visible&&!this.chart.isTouch&&this.move(n)},r.prototype.mouseEnd=function(n){this.chart.legendSettings.visible&&this.chart.isTouch&&this.move(n)},r.prototype.getLegendOptions=function(n){var u,f,i,r,t;for(this.legendCollections=[],n.length>1&&(this.legend.mode="Series"),i=0,r=n;i<r.length;i++)t=r[i],"Series"===this.legend.mode&&"Indicator"!==t.category&&(u=t.type,f=t.pointColorMapping&&t.points.length>0&&t.points[0].interior?t.points[0].interior:t.interior,this.legendCollections.push(new br(t.name,f,t.legendShape,"TrendLine"===t.category?this.chart.series[t.sourceIndex].trendlines[t.index].visible:t.visible,u,t.legendImageUrl,t.marker.shape,t.marker.visible)))},r.prototype.getLegendBounds=function(n,t,r){var f,w,l;this.calculateLegendTitle(r,t);f=r.padding;this.isTitle=!!r.title;var u,h=r.titlePosition,b=0,k=0,d=this.arrowHeight,g=this.arrowWidth,nt=this.isVertical&&!r.enablePages?d:0,c=this.isTitle&&"Top"===h?this.fivePixel+this.legendTitleSize.height:0;c=this.isTitle&&this.isVertical&&"Top"!==h?this.fivePixel+this.legendTitleSize.height:c;this.isVertical?b=r.width?0:n.width/20:k=r.height?0:n.height/20;t.height+=k;t.width+=b;var e,tt=r.shapePadding,it=r.shapeWidth,p=0,o=0,a=0,s=0,v=0,y=0;for(this.maxItemHeight=Math.max(i.measureText("MeasureText",r.textStyle,this.chart.themeStyle.legendLabelFont).height,r.shapeHeight),w=!1,l=0;l<this.legendCollections.length;l++)u=this.legendCollections[l],pe.test(u.text)&&(u.text=no(u.text,pe)),vf.test(u.text)&&(u.text=no(u.text,vf)),e={fill:u.fill,text:u.text,shape:u.shape,markerShape:u.markerShape,name:te,cancel:!1},this.chart.trigger(te,e),u.text=e.text,u.render=!e.cancel,u.shape=e.shape,u.fill=e.fill,u.markerShape=e.markerShape,u.textSize=i.measureText(u.text,r.textStyle,this.chart.themeStyle.legendLabelFont),u.render&&(w=!0,o+=a=tt+it+u.textSize.width+(this.isVertical||0===l?f:this.itemPadding),r.enablePages||this.isVertical||(y=this.isTitle&&"Top"!==h?this.legendTitleSize.width+this.fivePixel:0,y+=g),(t.width<f+o+y||this.isVertical)&&(p=Math.max(p,o+f+y-(this.isVertical?0:a)),0===v&&a!==o&&(v=1),o=this.isVertical?0:a,s=++v*(this.maxItemHeight+(this.isVertical?this.itemPadding:f))+f+c+nt));s=Math.max(s,this.maxItemHeight+f+f+c);this.isPaging=t.height<s;this.isPaging&&!r.enablePages&&(this.isVertical||(s=this.maxItemHeight+f+f+("Top"===h?c:0)));this.totalPages=v;this.isPaging||this.isVertical||(o+=this.isTitle&&"Top"!==h?this.fivePixel+this.legendTitleSize.width+this.fivePixel:0);w?this.setBounds(Math.max(o+f,p),s,r,t):this.setBounds(0,0,r,t)},r.prototype.getRenderPoint=function(n,t,i,r,u,f,e){var o=r.location.x+i+r.textSize.width,h=this.legend.padding,s;o+(n.textSize.width+i-this.itemPadding)>u.x+u.width+this.legend.shapeWidth/2||this.isVertical?(n.location.x=t.x,n.location.y=f===e?r.location.y:r.location.y+this.maxItemHeight+(this.isVertical?this.itemPadding:h)):(n.location.x=f===e?r.location.x:o,n.location.y=r.location.y);s=this.legendBounds.width+this.legendBounds.x-(n.location.x+i-this.itemPadding-this.legend.shapeWidth/2);n.text=wi(+s.toFixed(4),n.text,this.legend.textStyle,this.chart.enableRtl,this.chart.themeStyle.legendLabelFont)},r.prototype.legendClick=function(n){var i=this.chart,f="Series"===i.legendSettings.mode?n:0,t=i.visibleSeries[f],r=this.legendCollections[n],u={legendText:r.text,legendShape:r.shape,chart:i,series:t,name:ar,cancel:!1};this.chart.trigger(ar,u);t.legendShape=u.legendShape;null!==t.fill&&(i.visibleSeries[n].interior=t.fill);i.legendSettings.toggleVisibility&&(i.legendClicked=!0,this.changeSeriesVisiblity(t,t.visible),r.visible="TrendLine"===t.category?i.series[t.sourceIndex].trendlines[t.index].visible:t.visible,this.refreshLegendToggle(i))},r.prototype.refreshLegendToggle=function(n){var t=n.stockLegendModule.legendBounds;n.stockLegendModule.renderLegend(n,n.legendSettings,t)},r.prototype.changeSeriesVisiblity=function(n,t){n.visible=!t;this.SecondaryAxis(n.yAxis)&&(n.yAxis.internalVisibility=n.yAxis.series.some(function(n){return n.visible}));this.SecondaryAxis(n.xAxis)&&(n.xAxis.internalVisibility=n.xAxis.series.some(function(n){return n.visible}))},r.prototype.SecondaryAxis=function(n){return this.chart.axes.indexOf(n)>-1},r.prototype.click=function(n){var i=this,u;if(this.chart.legendSettings.visible){for(var f,o=this.chart.mouseY,s=this.chart.mouseX,h=[this.legendID+"_text_",this.legendID+"_shape_marker_",this.legendID+"_shape_"],t=n.target.id,r=0,e=h;r<e.length;r++)if(u=e[r],t.indexOf(u)>-1){f=parseInt(t.split(u)[1],10);this.legendClick(f);break}t.indexOf(this.legendID+"_pagedown")>-1?this.changePage(n,!1):t.indexOf(this.legendID+"_pageup")>-1&&this.changePage(n,!0);this.legendRegions.filter(function(n){return ht(s,o+(i.isPaging?(i.currentPageNumber-1)*i.translatePage(!1,null,1,2):0),n.rect)})}},r.prototype.getModuleName=function(){return"StockLegend"},r.prototype.destroy=function(){this.removeEventListener()},r}(fs),slt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),b=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},hlt=function(n){function u(i,r){var u=n.call(this,i,r)||this;return u.isSingleAxis=!1,u.chartid=57723,u.tempSeriesType=[],u.zoomChange=!1,u.allowPan=!1,u.onPanning=!1,u.trendlinetriggered=!0,u.initialRender=!0,u.rangeFound=!1,u.tempPeriods=[],u.isDateTimeCategory=!1,u.sortedData=[],u.visibleRange={min:0,max:0,delta:0,interval:0},u.isStockChartRendered=!1,f.Inject(bv,fk,ek),u.toolbarHeight=u.enablePeriodSelector?t.Browser.isDevice?56:42:0,u}var f;return slt(u,n),f=u,u.prototype.onPropertyChanged=function(n){for(var t=0,i=Object.keys(n);t<i.length;t++)"series"===i[t]&&(this.storeDataSource(),this.chartRender(),this.stockChartDataManagerSuccess(),this.legendClicked=!1)},u.prototype.rangeChanged=function(n,t){var i=document.getElementById(this.chartObject.id);if(i)for(;i.firstChild;)i.removeChild(i.firstChild);this.startValue=n;this.endValue=t;this.cartesianChart.initializeChart();this.periodSelector.datePicker.startDate=this.isDateTimeCategory?new Date(this.sortedData[n]):new Date(n);this.periodSelector.datePicker.endDate=this.isDateTimeCategory?new Date(this.sortedData[t]):new Date(t);this.periodSelector.datePicker.dataBind()},u.prototype.preRender=function(){this.unWireEvents();this.initPrivateVariable();this.allowServerDataBinding=!1;this.isProtectedOnChange=!0;this.setCulture();this.wireEvents()},u.prototype.unWireEvents=function(){var n=t.Browser.touchStartEvent,i=t.Browser.touchMoveEvent,r=t.Browser.touchEndEvent,u=t.Browser.isPointer?"pointerleave":"mouseleave";t.EventHandler.remove(this.element,n,this.stockChartOnMouseDown);t.EventHandler.remove(this.element,i,this.stockChartOnMouseMove);t.EventHandler.remove(this.element,r,this.stockChartMouseEnd);t.EventHandler.remove(this.element,"click",this.stockChartOnMouseClick);t.EventHandler.remove(this.element,"contextmenu",this.stockChartRightClick);t.EventHandler.remove(this.element,u,this.stockChartOnMouseLeave);window.removeEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.stockChartResize)},u.prototype.wireEvents=function(){var n=t.Browser.isPointer?"pointerleave":"mouseleave";t.EventHandler.add(this.element,t.Browser.touchStartEvent,this.stockChartOnMouseDown,this);t.EventHandler.add(this.element,t.Browser.touchMoveEvent,this.stockChartOnMouseMove,this);t.EventHandler.add(this.element,t.Browser.touchEndEvent,this.stockChartMouseEnd,this);t.EventHandler.add(this.element,"click",this.stockChartOnMouseClick,this);t.EventHandler.add(this.element,"contextmenu",this.stockChartRightClick,this);t.EventHandler.add(this.element,n,this.stockChartOnMouseLeave,this);window.addEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.stockChartResize.bind(this));this.setStyle(this.element)},u.prototype.initPrivateVariable=function(){if(""===this.element.id){var n=document.getElementsByClassName("e-stockChart").length;this.element.id="stockChart_"+this.chartid+"_"+n}this.seriesXMax=null;this.seriesXMin=null;this.startValue=null;this.endValue=null;this.currentEnd=null;this.margin={right:null===this.margin.right?t.Browser.isDevice?5:10:this.margin.right,left:null===this.margin.left?t.Browser.isDevice?5:10:this.margin.left,top:null===this.margin.top?t.Browser.isDevice?5:10:this.margin.top,bottom:null===this.margin.bottom?t.Browser.isDevice?5:10:this.margin.bottom};this.isStockChartRendered=!1},u.prototype.setCulture=function(){this.intl=new t.Internationalization},u.prototype.storeDataSource=function(){for(var t,n=0;n<this.series.length;n++)t=this.series[n],this.tempSeriesType.push(t.type),t.localData=void 0;0===this.series.length&&this.series.push({});this.initialRender=!this.legendClicked;this.rangeFound=!1;this.resizeTo=null;this.startValue=null;this.endValue=null},u.prototype.render=function(){var n=this,t={name:"load",stockChart:this,theme:this.theme};this.trigger("load",t,function(){n.themeStyle=lc(n.theme,!1,n);n.storeDataSource();n.drawSVG();n.renderTitle();n.renderLegend();n.chartModuleInjection();n.chartRender();n.dataSource instanceof gt.DataManager&&n.series[0].dataSource instanceof gt.DataManager||(n.stockChartDataManagerSuccess(),n.initialRender=!1);n.renderComplete();n.allowServerDataBinding=!0;n.isStockChartRendered=!0});this.isProtectedOnChange=!1},u.prototype.stockChartDataManagerSuccess=function(){this.findRange();var n=this.series.every(function(n){var t=n.dataSource||[];return!t||0===t.length});this.renderNoDataTemplate(n&&!t.isNullOrUndefined(this.noDataTemplate));this.renderRangeSelector();this.renderPeriodSelector();this.trigger("loaded",{stockChart:this})},u.prototype.renderNoDataTemplate=function(n){var c=this.element.querySelector("#"+this.element.id+"_NoDataTemplate_wrapper"),o,s,f,y,p;if(c&&c.remove(),n){var w="function"==typeof this.noDataTemplate?this.noDataTemplate():this.noDataTemplate,e=t.createElement("div",{id:this.element.id+"_NoDataTemplate_wrapper"}),l=this.element.querySelector("#"+this.element.id+"_Secondary_Element"),u=0,a=document.getElementById(this.element.id+"_stock_border");a&&(o=getComputedStyle(a),s=o.borderWidth||o.borderTopWidth,u=s?parseFloat(s):0);f=0;this.title&&(f=i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont).height+11);var b=this.element.getBoundingClientRect(),v=document.querySelector("#"+this.element.id+"_rangeSelector")||l.querySelector('[id*="rangeSelector"]'),h=b.bottom;v&&(y=v.getBoundingClientRect(),h=Math.max(h,y.bottom));p=h-l.getBoundingClientRect().top-f-u;e.style.cssText="position: absolute; top: "+f+"px; left: "+u+"px; width: "+(this.availableSize.width-2*u)+"px;\n                height: "+p+"px; z-index: 1;\n            ";r(this.element.id+"_Secondary_Element").appendChild(e);ee(e,null,w,this,null,null,this.element.id+"_NoData")}},u.prototype.setStyle=function(n){var t=this.zoomSettings,i=t.enableSelectionZooming||t.enablePinchZooming||"None"!==this.selectionMode||this.crosshair.enable;n.style.msTouchAction=i?"none":"element";n.style.touchAction=i?"none":"element";n.style.msUserSelect="none";n.style.msContentZooming="none";n.style.position="relative";n.style.display="block";n.style.webkitUserSelect="none"},u.prototype.drawSVG=function(){this.removeSvg();ns(this);this.renderer=new i.SvgRenderer(this.element.id);this.renderBorder();this.createSecondaryElements();this.calculateVisibleSeries();this.calculateLegendBounds();this.mainObject=this.renderer.createSvg({id:this.element.id+"_stockChart_svg",width:this.availableSize.width,height:this.availableSize.height-(this.enablePeriodSelector?this.toolbarHeight:0)-this.titleSize.height,style:"display: block;"});this.svgObject=this.mainObject;this.element.appendChild(this.mainObject)},u.prototype.calculateVisibleSeries=function(){var n;this.visibleSeries=[];for(var r=ro(this.theme),u=r.length,i=this.series.sort(function(n,t){return n.zOrder-t.zOrder}),t=0,f=i.length;t<f;t++)(n=i[t]).category="Series",n.index=t,n.interior=n.fill||r[t%u],this.visibleSeries.push(n),i[t]=n},u.prototype.createSecondaryElements=function(){var n=ci(!1,this.element.id+"_Secondary_Element")||this.createElement("div"),t;n.id=this.element.id+"_Secondary_Element";this.title?(this.titleSize=i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont),this.titleSize.height+=15):this.titleSize={height:null,width:null};t=(this.enablePeriodSelector?this.toolbarHeight:0)+this.titleSize.height;n.style.cssText="position: relative; height:"+t+"px";o(!1,this.element,n,!1)},u.prototype.requiredModules=function(){var n=[];return this.legendSettings.visible&&n.push({member:"StockLegend",args:[this]}),n},u.prototype.findCurrentData=function(n,t){var i=this.enablePeriodSelector||this.enableSelector?void 0:n,r=this.isDateTimeCategory?new Date(this.sortedData[Math.floor(this.startValue)]).getTime():this.startValue,u=this.isDateTimeCategory?new Date(this.sortedData[Math.floor(this.endValue)]).getTime():this.endValue;return n&&r&&u&&(i=n.filter(function(n){return new Date(Date.parse(n[t])).getTime()>=r&&new Date(Date.parse(n[t])).getTime()<=u})),i},u.prototype.renderPeriodSelector=function(){this.enablePeriodSelector&&(this.toolbarSelector.initializePeriodSelector(),this.periodSelector.toolbar.refreshOverflow(),this.enableSelector||this.cartesianChart.cartesianChartRefresh(this))},u.prototype.chartRender=function(){this.sortedData=[];this.cartesianChart=new tlt(this);this.cartesianChart.initializeChart()},u.prototype.renderRangeSelector=function(){this.enableSelector&&(this.rangeSelector=new ilt(this),this.rangeSelector.initializeRangeNavigator())},u.prototype.getModuleName=function(){return"stockChart"},u.prototype.getPersistData=function(){return""},u.prototype.removeSvg=function(){if(document.getElementById(this.element.id+"_Secondary_Element")&&t.remove(document.getElementById(this.element.id+"_Secondary_Element")),this.mainObject){for(;this.mainObject.childNodes.length>0;)this.mainObject.removeChild(this.mainObject.firstChild);!this.mainObject.hasChildNodes()&&this.mainObject.parentNode&&(t.remove(this.mainObject),this.mainObject=null,this.selectorObject=null,this.chartObject=null)}},u.prototype.chartModuleInjection=function(){for(var n,t,i=0,r=this.getInjectedModules();i<r.length;i++)t=r[i],-1===(n=t.prototype.getModuleName().toLowerCase()).indexOf("rangetooltip")?wv.Inject(t):gc.Inject(t),"datetime"!==n&&"areaseries"!==n&&"steplineseries"!==n&&"datetimecategory"!==n||gc.Inject(t)},u.prototype.findRange=function(){var n=this,t,r,i;for(this.seriesXMin=1/0,this.seriesXMax=-1/0,t=0,r=this.chart.series;t<r.length;t++)i=r[t],i.visible&&(this.seriesXMin=Math.min(this.seriesXMin,i.xMin),this.seriesXMax=Math.max(this.seriesXMax,i.xMax));this.endValue=this.currentEnd=this.seriesXMax;this.enablePeriodSelector?(this.toolbarSelector=new rlt(this),this.periodSelector=new ry(this),this.tempPeriods=this.periods.length?this.periods:this.toolbarSelector.calculateAutoPeriods(),this.tempPeriods.map(function(t){if(t.selected&&"ytd"===t.text.toLowerCase())if(n.isDateTimeCategory){for(var r=new Date(n.sortedData[n.currentEnd]).getFullYear(),i=n.currentEnd-1;i>=0;i--)if(new Date(n.sortedData[i]).getFullYear()!==r){n.startValue=i+1;break}n.startValue=-1===i?0:n.startValue}else n.startValue=new Date(new Date(n.currentEnd).getFullYear().toString()).getTime();else t.selected&&"all"===t.text.toLowerCase()?n.startValue=n.seriesXMin:t.selected&&(n.startValue=n.periodSelector.changedRange(t.intervalType,n.endValue,t.interval).getTime(),n.startValue=n.isDateTimeCategory?n.periodSelector.findStartValue(n.startValue,n.endValue):n.startValue)})):this.startValue=this.seriesXMin;this.rangeFound=!0},u.prototype.stockChartResize=function(){var n=this;return!!document.getElementById(this.element.id)&&(this.animateSeries=!1,this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=+setTimeout(function(){n.cartesianChart&&(ns(n),n.renderBorder(),n.calculateLegendBounds(),n.renderTitle(),n.renderLegend(),n.cartesianChart.cartesianChartRefresh(n),n.mainObject.setAttribute("width",(n.availableSize.width+(!n.stockLegendModule||"Right"!==n.legendSettings.position&&"Left"!==n.legendSettings.position?0:n.stockLegendModule.legendBounds.width)).toString()),n.enablePeriodSelector&&n.renderPeriodSelector())},500),!1)},u.prototype.stockChartOnMouseDown=function(n){var i,u,e,o,f=this.chart.element.getBoundingClientRect(),h=n.target,s;return(this.trigger("stockChartMouseDown",{target:h.id,x:this.mouseX,y:this.mouseY}),"touchstart"===n.type?(this.isTouch=!0,i=(o=n).changedTouches[0].clientX,e=o.target,u=o.changedTouches[0].clientY):(this.isTouch="touch"===n.pointerType,i=n.clientX,u=n.clientY,e=n.target),e.id.indexOf(this.element.id+"_stockChart_chart")>-1)&&(s=r(this.element.id+"_stockChart_chart").getBoundingClientRect(),this.mouseDownY=this.previousMouseMoveY=u-f.top-Math.max(s.top-f.top,0),this.mouseDownX=this.previousMouseMoveX=i-f.left-Math.max(s.left-f.left,0),this.setMouseXY(i,u),this.referenceXAxis=this.chart.primaryXAxis,r(this.element.id+"_stockChart_chart").setAttribute("cursor","pointer"),this.isDateTimeCategory?(this.visibleRange.min=this.sortedData.indexOf(parseInt(this.referenceXAxis.labels[this.referenceXAxis.visibleRange.min],10)),this.visibleRange.max=this.sortedData.indexOf(parseInt(this.referenceXAxis.labels[this.referenceXAxis.visibleRange.max],10)),this.visibleRange.delta=this.referenceXAxis.visibleRange.delta,this.visibleRange.interval=this.referenceXAxis.visibleRange.interval):this.visibleRange=this.referenceXAxis.visibleRange,this.mouseDownXPoint=kc(this.mouseX-this.referenceXAxis.rect.x,this.referenceXAxis.rect.width,this.visibleRange,this.referenceXAxis.isInversed),this.allowPan=!0,this.notify(t.Browser.touchStartEvent,n)),!1},u.prototype.stockChartMouseEnd=function(n){var t,i,u;return"touchend"===n.type?(i=(u=n).changedTouches[0].clientX,t=u.changedTouches[0].clientY,this.isTouch=!0):(t=n.clientY,i=n.clientX,this.isTouch="touch"===n.pointerType||"2"===n.pointerType),r(this.element.id+"_stockChart_chart").setAttribute("cursor","auto"),this.onPanning=!1,this.setMouseXY(i,t),this.stockChartOnMouseUp(n),!1},u.prototype.stockChartOnMouseUp=function(n){var i=n.target;return this.trigger("stockChartMouseUp",{target:i.id,x:this.mouseX,y:this.mouseY}),this.isChartDrag=!1,this.allowPan=!1,this.rangeNavigator&&(this.rangeNavigator.rangeSlider.isDrag=!1),this.isTouch&&(this.threshold=(new Date).getTime()+300),this.notify(t.Browser.touchEndEvent,n),this.stockEvent&&this.stockEvent.removeStockEventTooltip(0),!1},u.prototype.setMouseXY=function(n,t){var f=r(this.element.id+"_stockChart_chart"),i,u;this.element&&f&&(i=this.element.getBoundingClientRect(),u=f.getBoundingClientRect(),this.mouseX=n-i.left-Math.max(u.left-i.left,0),this.mouseY=t-i.top-Math.max(u.top-i.top,0))},u.prototype.stockChartOnMouseMove=function(n){var t,u,i;return this.mouseMoveEvent=n,"touchmove"===n.type?(this.isTouch=!0,i=(u=n).changedTouches[0].clientY,t=u.changedTouches[0].clientX):(this.isTouch="touch"===n.pointerType||"2"===n.pointerType||this.isTouch,t=n.clientX,i=n.clientY),this.trigger("stockChartMouseMove",{target:n.target.id,x:this.mouseX,y:this.mouseY}),r(this.element.id+"_stockChart_chart")&&(this.setMouseXY(t,i),this.chartOnMouseMove(n)),!1},u.prototype.chartOnMouseMove=function(n){var i,u;return(this.rangeNavigator&&this.rangeNavigator.rangeSlider.isDrag&&(this.rangeNavigator.mouseX=this.mouseX,this.rangeNavigator.rangeSlider.mouseMoveHandler(n)),this.allowPan&&!this.chart.startMove&&this.mouseDownXPoint&&this.mouseX!==this.previousMouseMoveX&&this.zoomSettings.enablePan)&&(this.onPanning=!0,this.zoomChange=!1,r(this.element.id+"_stockChart_chart").setAttribute("cursor","pointer"),this.mouseUpXPoint=kc(this.mouseX-this.referenceXAxis.rect.x,this.referenceXAxis.rect.width,this.visibleRange,this.referenceXAxis.isInversed),i=Math.abs(this.mouseUpXPoint-this.mouseDownXPoint),this.mouseDownXPoint<this.mouseUpXPoint?this.seriesXMin<=this.visibleRange.min-i&&(this.startValue=this.visibleRange.min-i,this.endValue=this.visibleRange.max-i,this.enableSelector?this.rangeNavigator.rangeSlider.setSlider(this.visibleRange.min-i,this.visibleRange.max-i,!this.rangeNavigator.enableDeferredUpdate,this.rangeNavigator.rangeTooltipModule&&this.rangeNavigator.tooltip.enable):this.cartesianChart.cartesianChartRefresh(this)):this.seriesXMax>=this.visibleRange.max+i&&(this.startValue=this.visibleRange.min+i,this.endValue=this.visibleRange.max+i,this.enableSelector?this.rangeNavigator.rangeSlider.setSlider(this.visibleRange.min+i,this.visibleRange.max+i,!this.rangeNavigator.enableDeferredUpdate,this.rangeNavigator.rangeTooltipModule&&this.rangeNavigator.tooltip.enable):this.cartesianChart.cartesianChartRefresh(this))),(this.notify(t.Browser.touchMoveEvent,n),""===n.target.id&&1==!this.onPanning)&&(u=void 0,(this.chart.tooltip.enable||this.crosshair.enable)&&(u=document.getElementById(this.element.id+"_stockChart_chart_tooltip"))&&t.remove(u),r(this.element.id+"_StockEvents_Tooltip")&&this.stockEvent.removeStockEventTooltip(0)),-1!==n.target.id.indexOf("StockEvents")?(clearInterval(this.stockEvent.toolTipInterval),this.stockEvent.renderStockEventTooltip(n.target.id)):this.stockEvent&&this.stockEvent.removeStockEventTooltip(1e3),this.isTouch=!1,!1},u.prototype.stockChartOnMouseClick=function(n){var t=n.target;return this.trigger("stockChartMouseClick",{target:t.id,x:this.mouseX,y:this.mouseY}),this.notify("click",n),!1},u.prototype.stockChartRightClick=function(n){return!this.crosshair.enable||2!==n.buttons&&0!==n.which&&"touch"!==n.pointerType||(n.preventDefault(),n.stopPropagation(),!1)},u.prototype.stockChartOnMouseLeave=function(n){var r,t,i;return"touchleave"===n.type?(this.isTouch=!0,t=(r=n).changedTouches[0].clientX,i=r.changedTouches[0].clientY):(t=n.clientX,i=n.clientY,this.isTouch="touch"===n.pointerType||"2"===n.pointerType),this.setMouseXY(t,i),this.allowPan=!1,this.stockChartOnMouseLeaveEvent(n),!1},u.prototype.stockChartOnMouseLeaveEvent=function(n){var i=t.Browser.isPointer?"pointerleave":"mouseleave";return this.isChartDrag=!1,this.notify(i,n),this.stockEvent&&this.stockEvent.removeStockEventTooltip(1e3),this.rangeNavigator&&(this.rangeNavigator.rangeSlider.isDrag=!1),this.onPanning&&(this.onPanning=!1,this.chart.mouseLeave(n),r(this.element.id+"_stockChart_chart").setAttribute("cursor","auto")),!1},u.prototype.destroy=function(){var t,i;this.cartesianChart=null;this.chart=null;this.periodSelector=null;this.rangeNavigator=null;this.rangeSelector=null;this.tempPeriods=[];this.toolbarSelector=null;this.visibleSeries=[];this.yAxisElements=null;t=document.getElementById(this.element.id+"_stockChart_chartKeyboard_chart_focus");t&&t.remove();i=document.getElementById(this.element.id+"_stock_border");i&&i.remove();this.element&&(this.unWireEvents(),n.prototype.destroy.call(this),this.removeSvg(),this.svgObject=null)},u.prototype.renderBorder=function(){if(this.border.width){var n=this.createElement("div");n.id=this.element.id+"_stock_border";n.style.width=this.availableSize.width+"px";n.style.height=this.availableSize.height+"px";n.style.position="absolute";n.style.border=this.border.width+"px solid "+this.border.color;n.style.pointerEvents="none";o(!1,r(this.element.id),n)}},u.prototype.renderTitle=function(){var t,n,u,f;this.title&&(o(!1,r(this.element.id+"_Secondary_Element"),this.renderer.createSvg({id:this.element.id+"_stockChart_Title",width:this.availableSize.width,height:this.titleSize.height,fill:this.background||this.themeStyle.background}),!1),n=this.titleStyle.textAlignment,u="Near"===n?"start":"Far"===n?"end":"middle",t=new i.Rect(0,0,this.availableSize.width,0),f=new i.TextOption(this.element.id+"_ChartTitle",pr(t,this.titleStyle),this.titleSize.height-10,u,this.title,"","auto"),ct(this.renderer,f,this.titleStyle,this.titleStyle.color||this.themeStyle.chartTitleFont.color||this.findTitleColor(),r(this.element.id+"_stockChart_Title"),!1,!1,null,null,null,null,0,null,null,null,this.themeStyle.chartTitleFont),this.availableSize.height-=this.titleSize.height+5)},u.prototype.calculateLegendBounds=function(){this.stockLegendModule&&this.legendSettings.visible&&this.stockLegendModule.getLegendOptions(this.visibleSeries);var n=this.titleSize.height,t=this.border.width,u=this.availableSize.width-this.border.width-t,r=.5*this.chartArea.border.width+this.border.width,f=this.availableSize.height-r-this.border.width-(this.enablePeriodSelector?this.toolbarHeight:0)-n;this.initialClipRect=new i.Rect(t,r,u,f);this.tempAvailableSize=new i.Size(this.availableSize.width,this.availableSize.height-(this.enablePeriodSelector?this.toolbarHeight:0)-n);this.stockLegendModule&&this.legendSettings.visible&&this.stockLegendModule.calculateLegendBounds(this.initialClipRect,this.tempAvailableSize,null)},u.prototype.renderLegend=function(){if(this.stockLegendModule&&this.stockLegendModule.legendCollections.length&&this.legendSettings.visible){this.stockLegendModule.calTotalPage=!0;var n=this.stockLegendModule.legendBounds;this.stockLegendModule.renderLegend(this,this.legendSettings,n);"Auto"===this.legendSettings.position||"Bottom"===this.legendSettings.position||"Top"===this.legendSettings.position?this.availableSize.height-=this.stockLegendModule.legendBounds.height:"Left"!==this.legendSettings.position&&"Right"!==this.legendSettings.position||(this.availableSize.width-=this.stockLegendModule.legendBounds.width)}},u.prototype.findTitleColor=function(){return this.theme.toLocaleLowerCase().indexOf("highcontrast")>-1||this.theme.indexOf("Dark")>-1?"#ffffff":"#424242"},u.prototype.calculateStockEvents=function(){this.stockEvents.length&&(this.stockEvent=new elt(this),o(!1,this.chartObject,this.stockEvent.renderStockEvents()))},b([t.Property(null)],u.prototype,"noDataTemplate",void 0),b([t.Property(null)],u.prototype,"width",void 0),b([t.Property(null)],u.prototype,"height",void 0),b([t.Property("")],u.prototype,"dataSource",void 0),b([t.Complex({},uy)],u.prototype,"margin",void 0),b([t.Complex({color:"#DDDDDD",width:1},he)],u.prototype,"border",void 0),b([t.Property(null)],u.prototype,"background",void 0),b([t.Property("Material")],u.prototype,"theme",void 0),b([t.Complex({name:"primaryXAxis",valueType:"DateTime"},tl)],u.prototype,"primaryXAxis",void 0),b([t.Complex({border:{color:null,width:.5},background:"transparent"},ed)],u.prototype,"chartArea",void 0),b([t.Complex({name:"primaryYAxis",opposedPosition:!0,labelPosition:"Inside",tickPosition:"Inside"},tl)],u.prototype,"primaryYAxis",void 0),b([t.Collection([{}],ld)],u.prototype,"rows",void 0),b([t.Collection([{opposedPosition:!0}],tl)],u.prototype,"axes",void 0),b([t.Collection([],hd)],u.prototype,"series",void 0),b([t.Collection([],yd)],u.prototype,"stockEvents",void 0),b([t.Property(!1)],u.prototype,"isTransposed",void 0),b([t.Property("")],u.prototype,"title",void 0),b([t.Complex({size:null,fontWeight:null,color:null,fontStyle:null,fontFamily:null},fo)],u.prototype,"titleStyle",void 0),b([t.Collection([],cd)],u.prototype,"indicators",void 0),b([t.Complex({shared:!0,enableMarker:!1},pp)],u.prototype,"tooltip",void 0),b([t.Complex({dashArray:"5",lineType:"Vertical"},yv)],u.prototype,"crosshair",void 0),b([t.Complex({},wd)],u.prototype,"legendSettings",void 0),b([t.Complex({enablePan:!0},pv)],u.prototype,"zoomSettings",void 0),b([t.Property(!0)],u.prototype,"enablePeriodSelector",void 0),b([t.Property(!0)],u.prototype,"enableCustomRange",void 0),b([t.Property(!1)],u.prototype,"isSelect",void 0),b([t.Property(!0)],u.prototype,"enableSelector",void 0),b([t.Collection([],dl)],u.prototype,"periods",void 0),b([t.Collection([{}],ad)],u.prototype,"annotations",void 0),b([t.Event()],u.prototype,"selectorRender",void 0),b([t.Event()],u.prototype,"stockChartMouseMove",void 0),b([t.Event()],u.prototype,"stockChartMouseLeave",void 0),b([t.Event()],u.prototype,"stockChartMouseDown",void 0),b([t.Event()],u.prototype,"stockChartMouseUp",void 0),b([t.Event()],u.prototype,"stockChartMouseClick",void 0),b([t.Event()],u.prototype,"pointClick",void 0),b([t.Event()],u.prototype,"pointMove",void 0),b([t.Event()],u.prototype,"onZooming",void 0),b([t.Event()],u.prototype,"legendRender",void 0),b([t.Event()],u.prototype,"legendClick",void 0),b([t.Property("None")],u.prototype,"selectionMode",void 0),b([t.Property(!1)],u.prototype,"isMultiSelect",void 0),b([t.Event()],u.prototype,"load",void 0),b([t.Event()],u.prototype,"loaded",void 0),b([t.Event()],u.prototype,"rangeChange",void 0),b([t.Event()],u.prototype,"axisLabelRender",void 0),b([t.Event()],u.prototype,"beforeExport",void 0),b([t.Event()],u.prototype,"tooltipRender",void 0),b([t.Event()],u.prototype,"seriesRender",void 0),b([t.Event()],u.prototype,"stockEventRender",void 0),b([t.Collection([],vd)],u.prototype,"selectedDataIndexes",void 0),b([t.Property([])],u.prototype,"seriesType",void 0),b([t.Property(["EMA","TMA","SMA","Momentum","ATR","Accumulation Distribution","Bollinger Bands","MACD","Stochastic","RSI"])],u.prototype,"indicatorType",void 0),b([t.Property(["PNG","JPEG","SVG","PDF","XLSX","CSV","Print"])],u.prototype,"exportType",void 0),b([t.Property([])],u.prototype,"trendlineType",void 0),f=b([t.NotifyPropertyChanges],u)}(t.Component),clt=function(){function n(n){this.control=n;this.elementId=n.element.id}return n.prototype.renderLeftTooltip=function(n){this.fadeOutTooltip();var i=this.getTooltipContent(n.currentStart),r=this.getContentSize(i),t=this.control.enableRtl?n.rightRect:n.leftRect;r>t.width&&(t=n.midRect);this.leftTooltip=this.renderTooltip(t,this.createElement("_leftTooltip"),n.startX,i)},n.prototype.getContentSize=function(n){var r=this.control.tooltip.textStyle;return this.control.tooltip.template?ee(t.createElement("div",{id:"measureElement",styles:"position: absolute;"}),0,this.control.tooltip.template,this.control).getBoundingClientRect().width:i.measureText(n[0],r,this.control.themeStyle.tooltipLabelFont).width+20},n.prototype.renderRightTooltip=function(n){this.fadeOutTooltip();var i=this.getTooltipContent(n.currentEnd),r=this.getContentSize(i),t=this.control.enableRtl?n.leftRect:n.rightRect;r>t.width&&((t=n.midRect).x=this.control.series.length?0:t.x);this.rightTooltip=this.renderTooltip(t,this.createElement("_rightTooltip"),n.endX,i)},n.prototype.createElement=function(n){var t,i;return r(this.elementId+n)?r(this.elementId+n):(t=document.createElement("div"),(t.id=this.elementId+n,t.className="ejSVGTooltip",t.style.cssText="pointer-events:none; position:absolute;z-index: 1",this.control.stockChart)?(i=this.control.stockChart,r(i.element.id+"_Secondary_Element").appendChild(t),t.style.transform="translateY("+(i.availableSize.height-i.toolbarHeight-51+i.toolbarHeight+i.titleSize.height)+"px)"):r(this.elementId+"_Secondary_Element").appendChild(t),t)},n.prototype.renderTooltip=function(n,t,r,u){var e=this.control,f=e.tooltip,o={cancel:!1,name:"tooltipRender",text:u,textStyle:f.textStyle},s;return o.textStyle.fontWeight=f.textStyle.fontWeight||this.control.themeStyle.tooltipLabelFont.fontWeight,this.control.trigger("tooltipRender",o),s=e.svgObject.getBoundingClientRect().left-e.element.getBoundingClientRect().left,o.cancel?null:new i.Tooltip({location:{x:r,y:e.rangeSlider.sliderY},content:o.text,marginX:2,enableShadow:!1,marginY:2,arrowPadding:8,rx:4,ry:4,inverted:e.series.length>0,areaBounds:n,fill:f.fill?f.fill:this.control.themeStyle.tooltipBackground,theme:this.control.theme,clipBounds:{x:s},border:f.border,opacity:f.opacity?f.opacity:"Material3"===this.control.theme||"Material3Dark"===this.control.theme||this.control.theme.indexOf("Bootstrap5")>-1?1:.75,template:f.template,textStyle:o.textStyle,availableSize:e.availableSize,controlName:"RangeNavigator",data:{start:this.getTooltipContent(this.control.startValue)[0],end:this.getTooltipContent(this.control.endValue)[0],value:u[0]}},t)},n.prototype.getTooltipContent=function(n){var f,t=this.control,o=t.tooltip,i=t.chartSeries.xAxis,r=o.format||i.labelFormat,e=null!==r.match("{value}"),u=i.valueType;return n="DateTimeCategory"===u?parseInt(i.labels[Math.floor(n)],10):n,u.indexOf("DateTime")>-1?f=t.intl.getDateFormat({format:r||"MM/dd/yyyy",type:et(t.skeletonType),skeleton:"DateTime"===u?t.dateTimeModule.getSkeleton(i,null,null):t.dateTimeCategoryModule.getSkeleton(i,null,null)})(new Date(n)):(i.format=t.intl.getNumberFormat({format:e?"":r,useGrouping:t.useGroupingSeparator}),f=t.doubleModule.formatValue(i,e,r,"Logarithmic"===u?Math.pow(i.logBase,n):n)),[f]},n.prototype.fadeOutTooltip=function(){var n=this;"OnDemand"===this.control.tooltip.displayMode&&(de(this.toolTipInterval),this.rightTooltip&&(this.toolTipInterval=+setTimeout(function(){n.leftTooltip.fadeOut();n.rightTooltip.fadeOut()},1e3)))},n.prototype.getModuleName=function(){return"RangeTooltip"},n.prototype.destroy=function(){},n}(),bd=function(){function n(n){this.bulletChart=n;this.isVertical="Vertical"===n.orientation;this.isLabelsInside="Inside"===n.labelPosition;this.isHorizontal="Horizontal"===n.orientation;this.isLeft="Left"===n.titlePosition;this.isRight="Right"===n.titlePosition;this.isTop="Top"===n.titlePosition;this.majorTickSize=n.majorTickLines.height;this.location=10;this.labelOffset=15;this.labelSize=parseFloat(n.labelStyle.size);this.isLabelBelow=!this.bulletChart.opposedPosition}return n.prototype.renderMajorTickLines=function(n,t){"Horizontal"===this.bulletChart.orientation?this.renderXMajorTickLines(n,t):this.renderYMajorTickLines(n,t)},n.prototype.renderMinorTickLines=function(n,t){"Horizontal"===this.bulletChart.orientation?this.renderXMinorTickLines(n,t):this.renderYMinorTickLines(n,t)},n.prototype.renderAxisLabels=function(n,t){"Horizontal"===this.bulletChart.orientation?this.renderXAxisLabels(n,t):this.renderYAxisLabels(n,t)},n.prototype.renderXMajorTickLines=function(n,t){for(var y,s,h,i=this.bulletChart,c=i.renderer.createGroup({id:i.svgObject.id+"_majorTickGroup"}),f=i.minimum,e=i.maximum,p=i.interval,l=i.enableRtl,a=i.initialClipRect.y+(i.opposedPosition?0:i.initialClipRect.height),w=a+(i.opposedPosition?"Inside"!==i.tickPosition?-this.majorTickSize:this.majorTickSize:"Inside"!==i.tickPosition?this.majorTickSize:-this.majorTickSize),o=i.majorTickLines,v=o.color||i.themeStyle.majorTickLineColor,b=i.initialClipRect.x+(i.enableRtl?i.initialClipRect.width:0),u=i.initialClipRect.x+o.width/2+(l?i.initialClipRect.width:0),r=f;r<=e;r+=p)(i.enableRtl?r===f:r===e)&&(u-=o.width/2),h=i.enableRtl?r===f:r===e,i.majorTickLines.useRangeColor&&(v=this.bindingRangeStrokes(u-(h?this.bulletChart.majorTickLines.width/2:0),b,this.bulletChart.orientation,i.enableRtl)),s=this.majorTicks(u,u,a,w,v,r),y=i.renderer.drawLine(s),u+=l?-n:n,c.appendChild(y),t.appendChild(c)},n.prototype.renderYMajorTickLines=function(n,t){for(var p,h,c,i=this.bulletChart,l=i.renderer.createGroup({id:i.svgObject.id+"_majorTickGroup"}),e=i.minimum,o=i.maximum,w=i.interval,a=i.enableRtl,u=i.initialClipRect,v=u.x+(i.opposedPosition?u.width:0),b=v-(i.opposedPosition?"Inside"!==i.tickPosition?-this.majorTickSize:this.majorTickSize:"Inside"!==i.tickPosition?this.majorTickSize:-this.majorTickSize),s=i.majorTickLines,y=s.color||i.themeStyle.majorTickLineColor,k=u.y+(i.enableRtl?0:u.height),f=u.y+s.width/2+(a?0:u.height),r=e;r<=o;r+=w)(i.enableRtl?r===o:r===e)&&(f-=s.width/2),h=i.enableRtl?r===e:r===o,i.majorTickLines.useRangeColor&&(y=this.bindingRangeStrokes(f-(h?this.bulletChart.majorTickLines.width/2:0),k,this.bulletChart.orientation,i.enableRtl)),c=this.majorTicks(v,b,f,f,y,r),p=i.renderer.drawLine(c),f+=a?n:-n,l.appendChild(p),t.appendChild(l)},n.prototype.majorTicks=function(n,t,i,r,u,f){return{id:this.bulletChart.svgObject.id+"_MajorTickLine_"+f,x1:n,y1:i,x2:t,y2:r,"stroke-width":this.bulletChart.majorTickLines.width,stroke:this.bulletChart.majorTickLines.useRangeColor&&u?u:this.bulletChart.majorTickLines.color||u}},n.prototype.bindingRangeStrokes=function(n,t,i,r){return"Vertical"===i&&!r||r&&"Horizontal"===i?this.backwardStrokeBinding(n,t):this.forwardStrokeBinding(n,t)},n.prototype.renderXMinorTickLines=function(n,t){for(var r,u,f,h,c,l=this.bulletChart.renderer.createGroup({id:this.bulletChart.svgObject.id+"_minorTickGroup"}),i=this.bulletChart,p=i.maximum,w=i.minimum,b=i.interval,e=i.minorTickLines.height,o=this.bulletChart.minorTicksPerInterval,a=i.initialClipRect.x,v=i.initialClipRect.y+(i.opposedPosition?0:i.initialClipRect.height),k=v+(i.opposedPosition?"Inside"!==i.tickPosition?-e:e:"Inside"!==i.tickPosition?e:-e),y=i.minorTickLines.color||i.themeStyle.minorTickLineColor,d=i.initialClipRect.x+(i.enableRtl?i.initialClipRect.width:0),s=w;s<p;s+=b){for(u=n/o,r=1;r<=o;r++)f=a+u-u/(o+1),i.minorTickLines.useRangeColor&&(y=this.bindingRangeStrokes(f,d,this.bulletChart.orientation,i.enableRtl)),h=this.minorXTicks(f,f,v,k,y,s.toString()+r.toString()),c=this.bulletChart.renderer.drawLine(h),l.appendChild(c),t.appendChild(l),u=n/o*(r+1);a+=n}},n.prototype.renderYMinorTickLines=function(n,t){for(var f,r,e,c,l,a=this.bulletChart.renderer.createGroup({id:this.bulletChart.svgObject.id+"_minorTickGroup"}),i=this.bulletChart,p=i.maximum,w=i.minimum,b=i.interval,o=i.minorTickLines.height,u=this.bulletChart.minorTicksPerInterval,s=i.initialClipRect.y+(i.enableRtl?0:i.initialClipRect.height),v=i.initialClipRect.x+(i.opposedPosition?i.initialClipRect.width:0),k=v-(i.opposedPosition?"Inside"!==i.tickPosition?-o:o:"Inside"!==i.tickPosition?o:-o),y=i.minorTickLines.color||i.themeStyle.minorTickLineColor,d=i.initialClipRect.y+(i.enableRtl?0:i.initialClipRect.height),h=w;h<p;h+=b){for(r=n/u,f=1;f<=u;f++)e=this.bulletChart.enableRtl?s+r-r/(u+1):s-r+r/(u+1),i.minorTickLines.useRangeColor&&(y=this.bindingRangeStrokes(e,d,this.bulletChart.orientation,i.enableRtl)),c=this.minorXTicks(v,k,e,e,y,h.toString()+f.toString()),l=this.bulletChart.renderer.drawLine(c),a.appendChild(l),t.appendChild(a),r=n/u*(f+1);s-=this.bulletChart.enableRtl?-n:n}},n.prototype.minorXTicks=function(n,t,i,r,u,f){return{id:this.bulletChart.svgObject.id+"_MajorTickLine_"+f,x1:n,x2:t,y1:i,y2:r,"stroke-width":this.bulletChart.minorTickLines.width,stroke:this.bulletChart.minorTickLines.useRangeColor&&u?u:this.bulletChart.minorTickLines.color||u}},n.prototype.forwardStrokeBinding=function(n,t){for(var r=this.bulletChart,u=t,i=0;i<=r.rangeCollection.length-1;i++)if(n>=(u+=i?r.rangeCollection[i-1]:0)&&n<u+r.rangeCollection[i])return r.ranges[i].color;return null},n.prototype.backwardStrokeBinding=function(n,t){for(var r=this.bulletChart,u=t,i=0;i<=r.rangeCollection.length-1;i++)if(u-=i?r.rangeCollection[i-1]:0,Math.round(n)>=Math.round(u-r.rangeCollection[i])&&n<=u)return r.ranges[i].color;return null},n.prototype.renderXAxisLabels=function(n,t){var h,c,l=this.bulletChart.renderer.createGroup({id:this.bulletChart.svgObject.id+"_axisLabelGroup"}),r=this.bulletChart,a=this.bulletChart.locale,v=r.enableRtl,f=(r.tickPosition===r.labelPosition?r.majorTickLines.height:0)+10,y=r.initialClipRect.y+(r.opposedPosition?"Inside"===r.labelPosition?f:-f:r.initialClipRect.height+("Inside"===r.labelPosition?-f:f)),o=r.initialClipRect.x+(v?r.initialClipRect.width:0),p=r.minimum,w=r.maximum,nt=r.interval,tt=a&&this.bulletChart.enableGroupSeparator,e=this.getFormat(this.bulletChart),b=r.labelStyle.color||r.themeStyle.axisLabelFont.color,s=null!==e.match("{value}"),k,u,d,g;for(this.format=this.bulletChart.intl.getNumberFormat({format:s?"":e,useGrouping:this.bulletChart.enableGroupSeparator}),k=r.initialClipRect.x+(r.enableRtl?r.initialClipRect.width:0),y+=i.measureText(this.formatValue(this,s,e,this.bulletChart.maximum),r.labelStyle,this.bulletChart.themeStyle.axisLabelFont).height/3,u=p;u<=w;u+=nt)c=r.enableRtl?u===p:u===w,r.labelStyle.useRangeColor&&(b=this.bindingRangeStrokes(o-(c?this.bulletChart.majorTickLines.width/2:0),k,this.bulletChart.orientation,r.enableRtl)),h=tt?u.toLocaleString(a):this.formatValue(this,s,e,u),d=this.labelXOptions(o,y,h,u),this.bulletChart.labelStyle.fontFamily=this.bulletChart.labelStyle.fontFamily||this.bulletChart.themeStyle.axisLabelFont.fontFamily,g=i.textElement(d,this.bulletChart.labelStyle,b,t,this.bulletChart.themeStyle.axisLabelFont),l.appendChild(g),o+=v?-n:n;t.appendChild(l)},n.prototype.labelXOptions=function(n,t,i,r){return{id:this.bulletChart.svgObject.id+"_AxisLabel_"+r,anchor:"middle",text:i,transform:"",x:n,y:t,baseLine:"",labelRotation:0}},n.prototype.renderYAxisLabels=function(n,t){var h,c,l=this.bulletChart.renderer.createGroup({id:this.bulletChart.svgObject.id+"_axisLabelGroup"}),r=this.bulletChart,a=r.locale,v=r.enableRtl,e=(r.tickPosition===r.labelPosition?r.majorTickLines.height:0)+10,o=r.initialClipRect.y+(v?0:r.initialClipRect.height),nt=r.initialClipRect.x+(r.opposedPosition?r.initialClipRect.width+("Inside"===r.labelPosition?-(e+10):e):"Inside"===r.labelPosition?e+10:-e),y=r.minimum,p=r.maximum,tt=r.interval,it=a&&this.bulletChart.enableGroupSeparator,w=r.labelStyle.color||r.themeStyle.axisLabelFont.color,f=this.getFormat(this.bulletChart),s=null!==f.match("{value}"),u,d,g;this.format=this.bulletChart.intl.getNumberFormat({format:s?"":f,useGrouping:this.bulletChart.enableGroupSeparator});var rt=r.initialClipRect.y+(r.enableRtl?0:r.initialClipRect.height),b=i.measureText(this.formatValue(this,s,f,this.bulletChart.maximum),r.labelStyle,this.bulletChart.themeStyle.axisLabelFont).width/2,k=i.measureText(this.formatValue(this,s,f,this.bulletChart.maximum),r.labelStyle,this.bulletChart.themeStyle.axisLabelFont).height/3;for(o+=k,u=y;u<=p;u+=tt)c=r.enableRtl?u===p:u===y,r.labelStyle.useRangeColor&&(w=this.bindingRangeStrokes(o-k-(c?this.bulletChart.majorTickLines.width/2:0),rt,this.bulletChart.orientation,r.enableRtl)),h=it?u.toLocaleString(a):this.formatValue(this,s,f,u),d=this.labelXOptions(nt-(this.bulletChart.opposedPosition?-b:b),o,h,u),this.bulletChart.labelStyle.fontFamily=this.bulletChart.labelStyle.fontFamily||this.bulletChart.themeStyle.axisLabelFont.fontFamily,g=i.textElement(d,this.bulletChart.labelStyle,w,t,r.themeStyle.axisLabelFont),l.appendChild(g),o+=v?n:-n;t.appendChild(l)},n.prototype.getFormat=function(n){return n.labelFormat?n.labelFormat:""},n.prototype.formatValue=function(n,t,i,r){return t?i.replace("{value}",n.format(r)):n.format(r)},n}(),llt=function(){function n(n){this.comparative=[];this.dataSource=n.dataSource;this.isVertical="Vertical"===n.orientation;this.isTicksInside="Inside"===n.tickPosition;this.isLabelsInside="Inside"===n.labelPosition;this.isHorizontal="Horizontal"===n.orientation;this.isLeft="Left"===n.titlePosition;this.isRight="Right"===n.titlePosition;this.isTop="Top"===n.titlePosition;this.location=10;this.featureBarBounds=[];this.majorTickSize=n.majorTickLines.height;this.labelOffset=15;this.labelSize=12;this.bulletChart=n;this.isLabelBelow=!this.bulletChart.opposedPosition;this.scaleOrientation=this.bulletChart.orientation;this.rangeColor=[]}return n.prototype.drawScaleGroup=function(n){var c,l=this.bulletChart.renderer.createGroup({id:this.bulletChart.svgObject.id+"_rangeGroup"}),p=this.bulletChart.maximum,o=this.bulletChart.ranges,y;this.scaleSettingsGroup=n;var t=this.bulletChart,e=t.enableRtl,r=t.initialClipRect,s=r.x+(e&&"Horizontal"===t.orientation?r.width:0),h=r.y+(e||"Vertical"!==t.orientation?0:r.height),u=0;t.rangeCollection=[];for(var a=0,w="Horizontal"===t.orientation?r.width:r.height,v="Horizontal"===t.orientation?r.height:r.width,f=0;f<o.length;f++)u=w*((o[f].end-a)/p),"Horizontal"===t.orientation?s-=e?u:0:h-=e?0:u,c=new ft(t.svgObject.id+"_range_"+f,o[f].color||this.bulletChart.themeStyle.rangeStrokes[f].color,{width:1},o[f].opacity,new i.Rect(s,h,"Horizontal"===t.orientation?u:v,"Horizontal"===t.orientation?v:u)),y=t.renderer.drawRectangle(c),l.appendChild(y),n.appendChild(l),"Horizontal"===t.orientation?s+=e?0:u:h+=e?u:0,t.rangeCollection.push(u),a=o[f].end;return this.bulletChart.rangeCollection},n.prototype.sortRangeCollection=function(n,t){return n-t},n.prototype.renderFeatureBar=function(n){0!==n&&this.renderCommonFeatureBar(n,this.isHorizontal)},n.prototype.renderCommonFeatureBar=function(n,r){for(var c,p,o,s,l,f,u=this.bulletChart,b=r?u.initialClipRect.y+u.initialClipRect.height:u.initialClipRect.x,k=u.renderer.createGroup({id:u.svgObject.id+"_featureGroup"}),a=(r?u.initialClipRect.height:u.initialClipRect.width)/n,e=0;e<n;e++){if((o=(l=u.dataSource[e])[u.categoryField],s=r?b-a*e-(a+u.valueHeight)/2:b+a*e+a/2-u.valueHeight/2,f=this.calculateFeatureMeasureBounds(l[u.valueField],o,r),l&&"Dot"===u.type)&&(c=l[u.valueField],f.pointX=r?f.pointX+(c>0&&!u.enableRtl||c<0&&u.enableRtl?f.width:0)-3:f.pointX+(c>0&&u.enableRtl||c<0&&!u.enableRtl?f.width:0)-3,f.width=6),f&&(p=r?this.featureBar(f.pointX,s,f.width,e):this.verticalFeatureBar(s,f.pointX,f.width,e),k.appendChild(p),this.feature=p,this.scaleSettingsGroup.appendChild(k),this.featureBarBounds[e]={x:f.pointX,y:s,width:f.width,height:u.valueHeight},!t.isNullOrUndefined(o))){var d=i.measureText(o,u.categoryLabelStyle,u.themeStyle.axisLabelFont),v=r?d.width:d.height,h=u.initialClipRect,y=void 0,w=void 0;r?(y=u.enableRtl?h.x+h.width+5+v/2:h.x-5-v/2,w=this.drawcategory(y,s,o)):(y=u.enableRtl?h.y-5-v/2:h.y+h.height+5+v/2,w=this.drawcategory(s+u.valueHeight/2,y,o));u.categoryLabelStyle.fontFamily=u.categoryLabelStyle.fontFamily||u.themeStyle.axisLabelFont.fontFamily;i.textElement(w,u.categoryLabelStyle,u.categoryLabelStyle.color||u.themeStyle.categoryFontColor,this.scaleSettingsGroup)}(u.animation.enable&&"Disable"!==t.animationMode||"Enable"===t.animationMode)&&this.doValueBarAnimation()}},n.prototype.featureBar=function(n,t,r,u){var e=new ft(this.bulletChart.svgObject.id+"_FeatureMeasure_"+u,this.bulletChart.dataSource[u][this.bulletChart.valueFill]||this.bulletChart.valueFill,this.bulletChart.valueBorder,1,new i.Rect(n,t,r,this.bulletChart.valueHeight),0,0,"",this.bulletChart.valueBorder.dashArray),f=this.bulletChart.renderer.drawRectangle(e);return f.setAttribute("class",this.bulletChart.svgObject.id+"_FeatureMeasure"),f.id=this.bulletChart.svgObject.id+"_FeatureMeasure_"+u,f.setAttribute("role","img"),f.setAttribute("tabindex","0"),f.style.outline="none",f.setAttribute("aria-label",this.bulletChart.title+", value: "+this.bulletChart.dataSource[u].value+", target: "+this.bulletChart.dataSource[u].target),f},n.prototype.verticalFeatureBar=function(n,t,r,u){var e=new ft(this.bulletChart.svgObject.id+"_FeatureMeasure_"+u,this.bulletChart.dataSource[u][this.bulletChart.valueFill]||this.bulletChart.valueFill,this.bulletChart.valueBorder,1,new i.Rect(n,t,this.bulletChart.valueHeight,r)),f=this.bulletChart.renderer.drawRectangle(e);return f.setAttribute("class",this.bulletChart.svgObject.id+"_FeatureMeasure"),f.id=this.bulletChart.svgObject.id+"_FeatureMeasure_"+u,f.setAttribute("role","img"),f.setAttribute("tabindex","0"),f.style.outline="none",f.setAttribute("aria-label",this.bulletChart.title+", value: "+this.bulletChart.dataSource[u].value+", target: "+this.bulletChart.dataSource[u].target),f},n.prototype.drawcategory=function(n,t,i){return{id:"",anchor:"middle",x:n,y:t+(parseInt(this.bulletChart.categoryLabelStyle.size,10)/4+this.bulletChart.valueHeight/2),transform:"",text:i,baseLine:"",labelRotation:0}},n.prototype.renderComparativeSymbol=function(n){0!==n&&this.renderCommonComparativeSymbol(n,this.isHorizontal)},n.prototype.renderCommonComparativeSymbol=function(n,i){for(var e,p,c,l,w,o,a,r=this.bulletChart,u=r.initialClipRect,v=i?u.width:u.height,b=i?u.y+u.height:u.x,k=r.renderer.createGroup({id:r.svgObject.id+"_comparativeGroup"}),d=r.minimum,y=r.maximum,g=y-d,nt=i?u.x-2.5:u.y+u.height,f=[],tt=r.targetTypes,it="Rect",rt=tt.length,h=(i?u.height:u.width)/n,s=0;s<n;s++){for(p=r.dataSource[s][r.targetField],f=f.concat(p),e=0;e<f.length;e++)it=tt[e%rt],f[e]>=d&&f[e]<=y&&(c=(o=i?b-h*s-h/2:b+h*s+h/2)-7.5,l=o+7.5,o=v/(g/(g-(y-f[e]))),w=i?nt+(r.enableRtl?v-o:o):nt-(r.enableRtl?v-o:o),a=this.getTargetElement(it,i,w,c,l,f[e],s),this.comparative.push(a),k.appendChild(a),c=0,l=0),this.scaleSettingsGroup.appendChild(k);f=[];(r.animation.enable&&"Disable"!==t.animationMode||"Enable"===t.animationMode)&&this.doTargetBarAnimation(0)}},n.prototype.getTargetElement=function(n,t,r,u,f,e,o){var c,l,s=this.bulletChart,b="Cross"===n?s.targetWidth-1:1,h="Circle"===n?s.targetWidth-1:s.targetWidth,a=t?r+h/2:u+(f-u)/2,v=t?u+(f-u)/2:r,p=s.svgObject.id+"_ComparativeMeasure_"+o,k=s.svgObject.id+"_ComparativeMeasure",y=s.dataSource[o][s.targetColor]||s.targetColor,w;return"Rect"===n?(c=t?this.compareMeasure(r,u,f,o,e):this.compareVMeasure(u,f,r,o),l=s.renderer.drawLine(c)):"Circle"===n?(c=new ef(p,y,{width:1,color:y||"black"},1,a,v,h),l=s.renderer.drawCircle(c)):(w="M "+(a-h)+" "+(v-h)+" L "+(a+h)+" "+(v+h)+" M "+(a-h)+" "+(v+h)+" L "+(a+h)+" "+(v-h),c=new i.PathOption(p,"transparent",b,y,1,"",w),l=s.renderer.drawPath(c)),l.setAttribute("class",k),l},n.prototype.compareMeasure=function(n,t,i,r,u){var f=this.bulletChart;return{"class":f.svgObject.id+"_ComparativeMeasure",id:f.svgObject.id+"_ComparativeMeasure_"+r,x1:u===f.maximum?n-f.targetWidth/2:u===f.minimum?n+f.targetWidth/2:n,y1:t,x2:u===f.maximum?n-f.targetWidth/2:u===f.minimum?n+f.targetWidth/2:n,y2:i,"stroke-width":f.targetWidth,stroke:f.dataSource[r][f.targetColor]||f.targetColor||"black"}},n.prototype.compareVMeasure=function(n,t,i,r){var u=this.bulletChart;return{"class":u.svgObject.id+"_ComparativeMeasure",id:u.svgObject.id+"_ComparativeMeasure_"+r,x1:n,y1:i,x2:t,y2:i,"stroke-width":u.targetWidth,stroke:u.dataSource[r][u.targetColor]||u.targetColor||"black"}},n.prototype.calculateFeatureMeasureBounds=function(n,r,u){var e=this.bulletChart,c=e.minimum,p;if((n=n<c&&c<=0?c:n)>=c){var o=void 0,a=void 0,f=void 0,s=u?e.initialClipRect.x:e.initialClipRect.y,h=u?e.initialClipRect.width:e.initialClipRect.height,l=e.maximum-e.minimum,v=e.maximum-n,y=(e.enableRtl?"backward":"forward")+this.scaleOrientation.toLowerCase();r=t.isNullOrUndefined(r)?"":r;p=i.measureText(r.toString(),e.labelStyle,this.bulletChart.themeStyle.axisLabelFont).width;switch(y){case"forwardhorizontal":case"backwardvertical":o=s+(c>0?0:h/l*Math.abs(c));f=h/(l/(c>0?l-v:n));n<0&&(o-=f=Math.abs(f));f=o+f<s+h?f:s+h-o;a=s-("forwardhorizontal"===y?p/2+5:this.labelOffset);break;default:o=s+(h-h/(l/(l-v)));f=c>0?h/(l/(l-v)):h/(l/n);n<0&&(o-=f=Math.abs(f));o<s&&(f=o+f-s,o=s);a=s+h+("backwardhorizontal"===y?p/2+5:5)}return{pointX:o,width:f,lastPointX:a}}return null},n.prototype.doValueBarAnimation=function(){var n=this.feature;if(!n)return null;var e,r,u,f,o,s=this.bulletChart.animation,h=this.bulletChart.animateSeries?this.bulletChart.animation.duration:s.duration,c=fe("Linear"),l=this.bulletChart.dataSource<0,a=n.getBoundingClientRect().height,i=n.getBoundingClientRect().width;"Horizontal"===this.bulletChart.orientation&&n&&(r=parseInt(n.getAttribute("height"),10),e=parseInt(n.getAttribute("x"),10),f=l?r:r+a,u=e);n.style.visibility="hidden";new t.Animation({}).animate(n,{duration:0===h&&"Enable"===t.animationMode?1e3:h,delay:s.delay,progress:function(t){t.timeStamp>=t.delay&&(n.style.visibility="visible",i=i||1,o=c(t.timeStamp-t.delay,0,i,t.duration),n.setAttribute("transform","translate("+u+" "+f+") scale("+o/i+", 1) translate("+-u+" "+-f+")"))},end:function(){n.setAttribute("transform","translate(0,0)");n.style.visibility="visible"}})},n.prototype.doTargetBarAnimation=function(n){var i,r,t=this.comparative[n];if(!t)return null;"Horizontal"===this.bulletChart.orientation&&t&&(r=parseFloat(t.getAttribute("y1"))+parseFloat(t.getAttribute("y2")),i=parseFloat(t.getAttribute("x1")));t.style.visibility="hidden";this.animateRect(t,i,r,n+1)},n.prototype.animateRect=function(n,i,r,u){var f,s=this,h=fe("Linear"),e=this.bulletChart.animation,c=this.comparative.length,o=this.bulletChart.animateSeries?this.bulletChart.animation.duration:e.duration;new t.Animation({}).animate(n,{duration:0===o&&"Enable"===t.animationMode?1e3:o,delay:e.delay,progress:function(t){t.timeStamp>=t.delay&&(n.style.visibility="visible",f=h(t.timeStamp-t.delay,0,1,t.duration),n.setAttribute("transform","translate("+i+" "+r/2+") scale(1,"+f+") translate("+-i+" "+-r/2+")"))},end:function(){n.setAttribute("transform","translate(0,0)");u<c&&s.doTargetBarAnimation(u+1)}})},n}(),eo=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rt=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},kd=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return eo(i,n),rt([t.Property(null)],i.prototype,"end",void 0),rt([t.Property(1)],i.prototype,"opacity",void 0),rt([t.Property(null)],i.prototype,"color",void 0),rt([t.Property(null)],i.prototype,"index",void 0),rt([t.Property(null)],i.prototype,"name",void 0),rt([t.Property("Rectangle")],i.prototype,"shape",void 0),rt([t.Property("")],i.prototype,"legendImageUrl",void 0),i}(t.ChildProperty),dd=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return eo(i,n),rt([t.Property(12)],i.prototype,"height",void 0),rt([t.Property(1)],i.prototype,"width",void 0),rt([t.Property(null)],i.prototype,"color",void 0),rt([t.Property(!1)],i.prototype,"useRangeColor",void 0),i}(t.ChildProperty),gd=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return eo(i,n),rt([t.Property(8)],i.prototype,"height",void 0),rt([t.Property(1)],i.prototype,"width",void 0),rt([t.Property(null)],i.prototype,"color",void 0),rt([t.Property(!1)],i.prototype,"useRangeColor",void 0),i}(t.ChildProperty),ce=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return eo(i,n),rt([t.Property("Normal")],i.prototype,"fontStyle",void 0),rt([t.Property("16px")],i.prototype,"size",void 0),rt([t.Property("")],i.prototype,"color",void 0),rt([t.Property("Normal")],i.prototype,"fontWeight",void 0),rt([t.Property("Segoe UI")],i.prototype,"fontFamily",void 0),rt([t.Property("Center")],i.prototype,"textAlignment",void 0),rt([t.Property("None")],i.prototype,"textOverflow",void 0),rt([t.Property(1)],i.prototype,"opacity",void 0),rt([t.Property(!0)],i.prototype,"enableTrim",void 0),rt([t.Property(null)],i.prototype,"maximumTitleWidth",void 0),rt([t.Property(!1)],i.prototype,"useRangeColor",void 0),i}(t.ChildProperty),ng=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return eo(i,n),rt([t.Property(!1)],i.prototype,"enable",void 0),rt([t.Property(null)],i.prototype,"fill",void 0),rt([t.Complex({fontFamily:null,size:"12px",fontStyle:"Normal",fontWeight:"400",color:null},ce)],i.prototype,"textStyle",void 0),rt([t.Complex({color:null,width:null},yt)],i.prototype,"border",void 0),rt([t.Property(null)],i.prototype,"template",void 0),i}(t.ChildProperty),tg=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return eo(i,n),rt([t.Property(!1)],i.prototype,"enable",void 0),rt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},ce)],i.prototype,"labelStyle",void 0),i}(t.ChildProperty),ig=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return eo(i,n),rt([t.Property(!1)],i.prototype,"visible",void 0),rt([t.Complex({x:0,y:0},lf)],i.prototype,"location",void 0),rt([t.Property(8)],i.prototype,"padding",void 0),rt([t.Property("Center")],i.prototype,"alignment",void 0),rt([t.Property(10)],i.prototype,"shapeHeight",void 0),rt([t.Property(10)],i.prototype,"shapeWidth",void 0),rt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},ce)],i.prototype,"textStyle",void 0),rt([t.Property("Auto")],i.prototype,"position",void 0),rt([t.Complex({left:0,right:0,top:0,bottom:0},lr)],i.prototype,"margin",void 0),rt([t.Complex({},yt)],i.prototype,"border",void 0),rt([t.Property(5)],i.prototype,"shapePadding",void 0),rt([t.Property("transparent")],i.prototype,"background",void 0),rt([t.Property(1)],i.prototype,"opacity",void 0),rt([t.Property(3)],i.prototype,"tabIndex",void 0),i}(t.ChildProperty);var alt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tt=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},vlt=function(n){function u(t,r){var u=n.call(this,t,r)||this;return u.bulletid=57726,u.animateSeries=!0,u.padding=5,u.leftSize=0,u.rightSize=0,u.topSize=0,u.bottomSize=0,u.maxLabelSize=new i.Size(0,0),u.maxTitleSize=new i.Size(0,0),u.intervalDivs=[10,5,2,1],u.currentLegendIndex=0,u.previousTargetId="",u}return alt(u,n),u.prototype.preRender=function(){this.allowServerDataBinding=!1;this.unWireEvents();this.initPrivateValues();this.setCulture();this.wireEvents()},u.prototype.initPrivateValues=function(){if(this.delayRedraw=!1,this.scale=new llt(this),this.bulletAxis=new bd(this),""===this.element.id){var n=document.getElementsByClassName("e-BulletChart").length;this.element.id="BulletChart_"+this.bulletid+"_"+n}},u.prototype.setCulture=function(){this.intl=new t.Internationalization},u.prototype.render=function(){var n=this,t={bulletChart:this,theme:this.theme,name:"load"};this.trigger("load",t,function(){n.setTheme();n.createSvg(n);n.findRange();n.bulletChartLegendModule&&n.legendSettings.visible&&(n.calculateVisibleElements(),n.bulletChartLegendModule.getLegendOptions(n.visibleRanges));n.calculatePosition();n.renderBulletElements();n.trigger("loaded",{bulletChart:n});n.allowServerDataBinding=!0;n.renderComplete()})},u.prototype.setTheme=function(){this.themeStyle=rg(this.theme);null!==this.targetColor&&"#191919"!==this.targetColor&&null!=this.valueFill||!(this.theme.indexOf("Fluent")>-1||this.theme.indexOf("Bootstrap5")>-1||this.theme.indexOf("Tailwind3")>-1)||(this.valueFill=this.valueFill?this.valueFill:"FluentDark"===this.theme?"#797775":"Bootstrap5"===this.theme?"#343A40":"Tailwind3"===this.theme?"#1F2937":"Tailwind3Dark"===this.theme?"#6B7280":"#A19F9D",this.targetColor="#191919"===this.targetColor?"FluentDark"===this.theme?"#797775":"Bootstrap5"===this.theme?"#343A40":"Tailwind3"===this.theme?"#1F2937":"Tailwind3Dark"===this.theme?"#6B7280":"#A19F9D":this.targetColor);null!==this.targetColor&&"#191919"!==this.targetColor&&null!=this.valueFill||!(this.theme.indexOf("Material3")>-1||this.theme.indexOf("Bootstrap5")>-1)||(this.valueFill=this.valueFill?this.valueFill:"Material3Dark"===this.theme?"#938F99":"Bootstrap5Dark"===this.theme?"#343A40":"#79747E",this.targetColor="#191919"===this.targetColor?"Material3Dark"===this.theme?"#938F99":"Bootstrap5Dark"===this.theme?"#343A40":"#79747E":this.targetColor)},u.prototype.findRange=function(){if(this.minimum||(this.minimum=0),!this.maximum&&this.ranges.length){this.maximum=0;for(var n=0;n<this.ranges.length;n++)this.maximum=this.maximum>this.ranges[n].end?this.maximum:this.ranges[n].end}if(null===this.maximum)if(t.isNullOrUndefined(this.dataSource))this.maximum=10;else for(n=0;n<Object.keys(this.dataSource).length;n++)this.maximum=this.dataSource[n][this.targetField]>this.dataSource[n][this.valueField]?this.maximum>this.dataSource[n][this.targetField]?this.maximum+this.interval:this.dataSource[n][this.targetField]+this.interval:this.maximum>this.dataSource[n][this.valueField]?this.maximum+this.interval:this.dataSource[n][this.valueField]+this.interval;this.interval||(this.interval=this.calculateNumericNiceInterval(this.maximum-this.minimum))},u.prototype.getActualDesiredIntervalsCount=function(n){var t="Horizontal"===this.orientation?n.width:n.height,i=3*("Horizontal"===this.orientation?.533:1);return Math.max(t*(i/100),1)},u.prototype.calculateNumericNiceInterval=function(n){for(var r,u=this.getActualDesiredIntervalsCount(this.availableSize),t=n/u,e=Math.pow(10,Math.floor(hi(t,10))),i=0,f=this.intervalDivs;i<f.length;i++){if(r=e*f[i],u<n/r)break;t=r}return t},u.prototype.setSecondaryElementPosition=function(){var n=r(this.element.id+"_Secondary_Element"),t,i;n&&(t=this.element.getBoundingClientRect(),i=r(this.element.id+"_svg").getBoundingClientRect(),n.style.left=Math.max(i.left-t.left,0)+"px",n.style.top=Math.max(i.top-t.top,0)+"px",n.style.position="relative")},u.prototype.createSvg=function(n){this.removeSvg();n.renderer=new i.SvgRenderer(n.element.id);this.calculateAvailableSize(this);n.svgObject=n.renderer.createSvg({id:n.element.id+"_svg",width:n.availableSize.width,height:n.availableSize.height});this.renderChartBackground()},u.prototype.renderChartBackground=function(){var n=new ft(this.element.id+"_ChartBorder",this.themeStyle.background,{width:this.border.width||0,color:this.border.color||"transparent"},1,new i.Rect(0,0,this.availableSize.width,this.availableSize.height),0,0,"",this.border.dashArray);this.svgObject.appendChild(this.renderer.drawRectangle(n))},u.prototype.renderBulletElements=function(){var n=this.renderer.createGroup({id:this.svgObject.id+"_scaleGroup"}),t,i,r;this.renderBulletChartTitle();this.svgObject.appendChild(n);this.rangeCollection=this.scale.drawScaleGroup(n);t=("Horizontal"===this.orientation?this.initialClipRect.width:this.initialClipRect.height)/((this.maximum-this.minimum)/this.interval);this.bulletAxis.renderMajorTickLines(t,n);this.bulletAxis.renderMinorTickLines(t,n);this.bulletAxis.renderAxisLabels(t,n);this.bulletChartRect.x="Left"===this.titlePosition||"Right"===this.titlePosition||"Vertical"===this.orientation?this.bulletChartRect.x:0;i=this.element.id;"g"!==this.element.tagName&&(r=ci(this.redraw,i+"_Secondary_Element")||this.createElement("div"),r.id=i+"_Secondary_Element",o(!1,this.element,r,this.redraw));this.tooltip.enable&&o(!1,this.svgObject,this.renderer.createGroup({id:i+"_UserInteraction",style:"pointer-events:none;"}),this.redraw);this.bindData();this.renderDataLabel();this.renderBulletLegend();this.element.appendChild(this.svgObject);this.setSecondaryElementPosition()},u.prototype.renderBulletLegend=function(){if(this.bulletChartLegendModule&&this.bulletChartLegendModule.legendCollections.length){this.bulletChartLegendModule.calTotalPage=!0;var n=this.bulletChartLegendModule.legendBounds;this.bulletChartLegendModule.renderLegend(this,this.legendSettings,n)}},u.prototype.bulletResize=function(){var n=this,t;return this.animateSeries=!1,t={chart:this,name:af,currentSize:new i.Size(0,0),previousSize:new i.Size(this.availableSize.width,this.availableSize.height)},this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=+setTimeout(function(){n.isDestroyed?clearTimeout(n.resizeTo):(n.createSvg(n),t.currentSize=n.availableSize,n.trigger(af,t),n.calculatePosition(),n.renderBulletElements())},500),!1},u.prototype.bindData=function(){null!=this.dataSource&&(this.dataCount=this.dataSource.length,this.drawMeasures(this.dataCount))},u.prototype.drawMeasures=function(n){this.scale.renderFeatureBar(n);this.scale.renderComparativeSymbol(n)},u.prototype.calculatePosition=function(){var v=this.margin,h=0,c=0,t=new i.Size(0,0),f,o,l,e,s,a;this.titleCollections=[];this.subTitleCollections=[];var r=0,n=0,u=5;if(this.title){for(this.titleCollections=tu(this.title,this.titleStyle,this.titleStyle.maximumTitleWidth,this.enableRtl,this.themeStyle.titleFont),h=i.measureText(this.title,this.titleStyle,this.themeStyle.titleFont).height*this.titleCollections.length+5,f=0,o=this.titleCollections;f<o.length;f++)l=o[f],r=(t=i.measureText(l,this.titleStyle,this.themeStyle.titleFont)).width>r?t.width:r,n=t.height>n?t.height:n;if(u+=n,this.subTitleCollections=tu(this.subtitle,this.subtitleStyle,this.titleStyle.maximumTitleWidth,this.enableRtl),this.subtitle){for(e=0,s=this.subTitleCollections;e<s.length;e++)a=s[e],r=(t=i.measureText(a,this.subtitleStyle,this.themeStyle.subTitleFont)).width>r?t.width:r,n=t.height>n?t.height:n;c=i.measureText(this.subtitle,this.subtitleStyle,this.themeStyle.subTitleFont).height*this.subTitleCollections.length+5;u+=n}}this.maxTitleSize=new i.Size(r,"Vertical"===this.orientation?u:n);this.maxLabelSize=this.getMaxLabelWidth();this.initialClipRect=this.getBulletBounds("Vertical"===this.orientation?u:r,h,c,v);this.bulletChartRect=new i.Rect(this.initialClipRect.x,this.initialClipRect.y,this.initialClipRect.width,this.initialClipRect.height);this.bulletChartLegendModule&&this.bulletChartLegendModule.calculateLegendBounds(this.initialClipRect,this.availableSize,this.maxLabelSize)},u.prototype.getBulletBounds=function(n,t,r,u){var f=new i.Rect(0,0,0,0),w=this.enableRtl,b=this.labelPosition===this.tickPosition?5:0,k="Inside"===this.tickPosition?0:this.majorTickLines.height,nt="Inside"===this.labelPosition?0:5+("Outside"===this.tickPosition?0:i.measureText(this.maximum.toString(),this.labelStyle,this.themeStyle.dataLabelFont).height),v=0,h=0,l=0,e=0,y=0,c=0,a=0,o=0,p=n,d=this.bulletAxis.getFormat(this),tt=null!==d.match("{value}"),s,g;this.bulletAxis.format=this.intl.getNumberFormat({format:tt?"":d,useGrouping:this.enableGroupSeparator});g=i.measureText(this.bulletAxis.formatValue(this.bulletAxis,tt,d,this.maximum),this.labelStyle,this.themeStyle.axisLabelFont).width;switch("Horizontal"===this.orientation?(s=this.maxLabelSize.width,v=this.opposedPosition?k+nt+b:0,h=this.opposedPosition?0:k+nt+b,a=s&&!w?s:0,a+=p&&"Left"===this.titlePosition?15:0,o=s&&w?s:0,o+=p&&"Right"===this.titlePosition?5:0):(s=this.maxLabelSize.height,e=this.opposedPosition?k+b:0,e+=this.opposedPosition&&"Inside"!==this.labelPosition?g:0,l=this.opposedPosition?0:k+b,l+=this.opposedPosition||"Inside"===this.labelPosition?0:g,y=s&&w?s+5:0,c=s&&!w?s+5:0),this.titlePosition){case"Left":f.x=u.left+p+a+l;f.width=this.availableSize.width-u.right-f.x-o-e<0?0:this.availableSize.width-u.right-f.x-o-e;f.y=u.top+v+y;f.height=this.availableSize.height-f.y-u.bottom-h-c<0?0:this.availableSize.height-f.y-u.bottom-h-c;break;case"Right":f.x=u.left+a+l;f.width=this.availableSize.width-e-u.right-f.x-(p+5)-o<0?0:this.availableSize.width-e-u.right-f.x-(p+5)-o;f.y=u.top+v+y;f.height=this.availableSize.height-f.y-u.bottom-h-c<0?0:this.availableSize.height-f.y-u.bottom-h-c;break;case"Top":f.x=u.left+l+a;f.width=this.availableSize.width-u.right-f.x-o-e<0?0:this.availableSize.width-u.right-f.x-o-e;f.y=u.top+(t+r)+v+y;f.height=this.availableSize.height-f.y-u.bottom-h-c<0?0:this.availableSize.height-f.y-u.bottom-h-c;break;case"Bottom":f.x=u.left+l+a;f.y=u.top+v+y;f.width=this.availableSize.width-u.right-f.x-o-e<0?0:this.availableSize.width-u.right-f.x-o-e;f.height=this.availableSize.height-f.y-c-u.bottom-h-(t+r)<0?0:this.availableSize.height-f.y-c-u.bottom-h-(t+r)}return f},u.prototype.getMaxLabelWidth=function(){var n,r,u;if(this.maxLabelSize=new i.Size(0,0),!this.categoryField)return this.maxLabelSize;if(!t.isNullOrUndefined(this.dataSource))for(r=0,u=Object.keys(this.dataSource).length;r<u;r++)(n=i.measureText(this.dataSource[r][this.categoryField]||"",this.categoryLabelStyle,this.themeStyle.axisLabelFont)).width>this.maxLabelSize.width&&(this.maxLabelSize.width=n.width),n.height>this.maxLabelSize.height&&(this.maxLabelSize.height=n.height);return this.maxLabelSize},u.prototype.calculateVisibleElements=function(){var t,i=this.ranges,n,r;for(this.visibleRanges=[],n=0,r=i.length;n<r;n++)(t=i[n]).index=n,this.visibleRanges.push(t),i[n]=t},u.prototype.renderBulletChartTitle=function(){var r=this.margin,n=0,t=0,u="middle",h="",f=this.titleStyle.textAlignment,o=i.measureText(this.title,this.titleStyle,this.themeStyle.titleFont),e=this.subtitle?i.measureText(this.subtitle,this.subtitleStyle,this.themeStyle.subTitleFont):new i.Size(0,0),c,s;if(this.title){if("Horizontal"===this.orientation)switch(this.titlePosition){case"Top":n=this.findHorizontalAlignment(r);u="Far"===f?"end":"Near"===f?"start":"middle";t=r.top+o.height/2+5;break;case"Bottom":n=this.findHorizontalAlignment(r);u="Far"===f?"end":"Near"===f?"start":"middle";t=this.availableSize.height-r.bottom-o.height/3+10-(e.height?e.height+5:0);break;case"Left":u="end";n=r.left+this.maxTitleSize.width;t=this.margin.top+this.availableSize.height/2-o.height/3-(e.height?e.height:0);break;case"Right":u="start";n=this.availableSize.width-r.right-this.maxTitleSize.width+5;t=this.margin.top+this.availableSize.height/2-o.height/3-(e.height?e.height:0)}else{switch(this.titlePosition){case"Top":n=this.availableSize.width/2+10;t=this.margin.top+o.height/2+5;break;case"Bottom":n=this.availableSize.width/2;t=this.availableSize.height-this.margin.bottom-o.height/3+10-(e.height?e.height+5:0);break;case"Left":t=this.findVerticalAlignment(r);u="Far"===f?"start":"Near"===f?"end":"middle";n=r.left;break;case"Right":n=this.availableSize.width-r.right-o.height/3;u="Far"===f?"start":"Near"===f?"end":"middle";t=this.findVerticalAlignment(r)}h="Left"===this.titlePosition?"rotate(-90,"+n+","+t+")":"Right"===this.titlePosition?"rotate(90,"+n+","+t+")":""}c=new i.TextOption(this.element.id+"_BulletChartTitle",n,t,u,this.titleCollections,h,"auto");s=ct(this.renderer,c,this.titleStyle,this.titleStyle.color||this.themeStyle.titleFont.color,this.svgObject,null,null,null,null,null,null,0,null,null,null,this.themeStyle.titleFont);s&&(s.setAttribute("aria-label",this.title+". Syncfusion interactive chart."),s.setAttribute("tabindex","0"),s.style.outline="none",s.setAttribute("role","img"));this.subtitle&&this.renderBulletChartSubTitle(n,t,u)}},u.prototype.renderDataLabel=function(){var f,h,n,u=0,e=0,w=this.enableRtl,c=this.dataLabel.labelStyle.textAlignment,s=this.labelFormat?this.labelFormat:"",l=null!==s.match("{value}"),t,a,r,p;if(this.dataLabel.enable)for(t=0,a=Object.keys(this.dataSource).length;t<a;t++){h=this.dataSource[t];n=this.scale.featureBarBounds[t];r=h[this.valueField].toString();this.format=this.intl.getNumberFormat({format:l?"":s,useGrouping:this.enableGroupSeparator});r=l?s.replace("{value}",this.format(r)):r;var v=i.measureText(r,this.dataLabel.labelStyle,this.themeStyle.axisLabelFont),o=v.width,y=v.height;"Horizontal"===this.orientation?(f="Rect"===this.type||w?"end":"start",(u=this.findTextAlignment(n,o,c))-o<this.initialClipRect.x&&(f="start"),u>this.initialClipRect.width&&(u-=o),e=n.y+n.height/2):(f="middle",u=n.y+n.height/2,(e=this.findTextAlignment(n,o,c))+y/2>this.initialClipRect.height+this.initialClipRect.y&&(e-=y/3));p=new i.TextOption(this.element.id+"_DataLabel_"+t,u,e,f,r,"","middle");ct(this.renderer,p,this.dataLabel.labelStyle,this.dataLabel.labelStyle.color||this.themeStyle.dataLabelFont.color,this.svgObject,null,null,null,null,null,null,0,null,null,null,this.themeStyle.dataLabelFont)}},u.prototype.findTextAlignment=function(n,t,i){var r=0;switch(i){case"Center":r=n.x+n.width/2;break;case"Near":r=n.x+("Horizontal"===this.orientation?this.enableRtl?n.width-5:5:this.enableRtl?10:n.width);break;case"Far":r=n.x+("Horizontal"===this.orientation?(this.enableRtl?"Rect"===this.type?t+10:-10:n.width)+("Rect"===this.type?-5:5):(this.enableRtl?n.width+("Rect"===this.type?-10:10):0)+("Rect"===this.type?10:-10))}return r},u.prototype.findHorizontalAlignment=function(n){var t=0;switch(this.titleStyle.textAlignment){case"Center":t=(this.availableSize.width-n.left-n.right)/2;break;case"Near":t=n.left;break;case"Far":t=this.availableSize.width-n.right}return t},u.prototype.findVerticalAlignment=function(n){var t=0;switch(this.titleStyle.textAlignment){case"Center":t=(this.availableSize.height-n.top-n.bottom)/2;break;case"Near":t=n.top;break;case"Far":t=this.availableSize.height-n.bottom}return t},u.prototype.renderBulletChartSubTitle=function(n,t,r){var e=this.margin,o="",u=i.measureText(this.subtitle,this.subtitleStyle,this.themeStyle.subTitleFont),s,f;if("Horizontal"===this.orientation)switch(this.titlePosition){case"Top":case"Left":case"Right":t=t+u.height+2.5;break;case"Bottom":t=this.availableSize.height-e.bottom-u.height/3+5}else{switch(this.titlePosition){case"Top":t=t+u.height+2.5;break;case"Bottom":t=this.availableSize.height-e.bottom-u.height/3+5;break;case"Left":n+=u.height+2.5;break;case"Right":n-=u.height+2.5}o="Left"===this.titlePosition?"rotate(-90,"+n+","+t+")":"Right"===this.titlePosition?"rotate(90,"+n+","+t+")":""}s=new i.TextOption(this.element.id+"_BulletChartSubTitle",n,t,r,this.subTitleCollections,o,"auto");f=ct(this.renderer,s,this.subtitleStyle,this.subtitleStyle.color||this.themeStyle.subTitleFont.color,this.svgObject,null,null,null,null,null,null,0,null,null,null,this.themeStyle.subTitleFont);f&&(f.setAttribute("aria-label",this.subtitle),f.setAttribute("tabindex","0"),f.style.outline="none",f.setAttribute("role","img"))},u.prototype.calculateAvailableSize=function(n){var t=this.element.clientWidth||this.element.offsetWidth||200,u="Vertical"===this.orientation?450:"Left"===this.titlePosition||"Right"===this.titlePosition?83:126,r=this.element.clientHeight||u;n.availableSize=new i.Size(it(n.width,t)||t,it(n.height,r)||r)},u.prototype.removeSvg=function(){var n=document.getElementById(this.element.id+"_svg");n&&t.remove(n)},u.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},u.prototype.unWireEvents=function(){var n=t.Browser.touchStartEvent,i=t.Browser.touchMoveEvent,r=t.Browser.isPointer?"pointerleave":"mouseleave";t.EventHandler.remove(this.element,n,this.bulletMouseDown);t.EventHandler.remove(this.element,i,this.bulletMouseMove);t.EventHandler.remove(this.element,r,this.bulletMouseLeave);t.EventHandler.remove(this.element,"click",this.bulletChartOnMouseClick);t.EventHandler.remove(this.element,"keyup",this.chartKeyUp);t.EventHandler.remove(this.element,"keydown",this.chartKeyDown);window.removeEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resizeBound)},u.prototype.wireEvents=function(){var n=t.Browser.isPointer?"pointerleave":"mouseleave";t.EventHandler.add(this.element,t.Browser.touchMoveEvent,this.bulletMouseMove,this);t.EventHandler.add(this.element,n,this.bulletMouseLeave,this);t.EventHandler.add(this.element,t.Browser.touchStartEvent,this.bulletMouseDown,this);t.EventHandler.add(this.element,"click",this.bulletChartOnMouseClick,this);t.EventHandler.add(this.element,"keyup",this.chartKeyUp,this);t.EventHandler.add(this.element,"keydown",this.chartKeyDown,this);this.resizeBound=this.bulletResize.bind(this);window.addEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resizeBound);this.setStyle(this.element)},u.prototype.chartKeyDown=function(n){"Tab"===n.code&&this.removeNavigationStyle()},u.prototype.setStyle=function(n){n.style.position="relative";n.style.display="block"},u.prototype.bulletMouseMove=function(n){var o=n.clientX,s=n.clientY,u,r,i,e,f;if(this.setPointMouseXY(o,s),u=n.target.id,r=n.target.className.baseVal,(r!==this.svgObject.id+"_FeatureMeasure"||(this.svgObject.id,1))&&!t.isNullOrUndefined(this.dataSource))for(i=0;i<Object.keys(this.dataSource).length;i++)document.getElementById(this.svgObject.id+"_FeatureMeasure_"+i).setAttribute("opacity","1"),document.getElementById(this.svgObject.id+"_ComparativeMeasure_"+i).setAttribute("opacity","1");this.isTouchEvent(n)||(e="tooltipDiv"+this.element.id,f=document.getElementById(e),f&&(this.isReact&&this.clearTemplate(),t.remove(f)),this.bulletTooltipModule&&(this.bulletTooltipModule._elementTooltip(n,r,u,this.mouseX),this.bulletTooltipModule._displayTooltip(n,r,u,this.mouseX,this.mouseY)))},u.prototype.setPointMouseXY=function(n,t){var u=r(this.svgObject.id).getBoundingClientRect(),i=this.element.getBoundingClientRect();this.mouseX=n-i.left-Math.max(u.left-i.left,0);this.mouseY=t-i.top-Math.max(u.top-i.top,0)},u.prototype.bulletMouseLeave=function(n){if(!this.isTouchEvent(n)){var i=document.getElementById(".tooltipDiv"+this.element.id);i&&(this.isReact&&this.clearTemplate(),t.remove(i))}},u.prototype.isTouchEvent=function(n){return"touch"===n.pointerType||n.type.indexOf("touch")>-1},u.prototype.bulletMouseDown=function(n){var i,r,o,u,f,e;("touchstart"===n.type?(this.isTouch=!0,i=(o=n).changedTouches[0].clientX,r=o.changedTouches[0].clientY):(this.isTouch="touch"===n.pointerType,i=n.clientX,r=n.clientY),this.setPointMouseXY(i,r),this.isTouchEvent(n))&&(this.isReact&&this.clearTemplate(),u=document.getElementById("tooltipDiv"+this.element.id),u&&t.remove(u),f=n.target.id,e=n.target.className.baseVal,this.bulletTooltipModule&&(this.bulletTooltipModule._elementTooltip(n,e,f,this.mouseX),this.bulletTooltipModule._displayTooltip(n,e,f,this.mouseX,this.mouseY)));this.removeNavigationStyle()},u.prototype.bulletChartOnMouseClick=function(n){var t=n.target;return this.trigger(nw,{target:t.id,x:this.mouseX,y:this.mouseY}),this.notify("click",n),this.removeNavigationStyle(),!1},u.prototype.print=function(n){new es(this).print(n)},u.prototype.export=function(n,t,i,r,u,f,e){r=r||[this];new du(this).export(n,t,i,r,u,f,e)},u.prototype.chartKeyUp=function(n){var e,i=n.target.id,h=n.target,s=r(this.element.id+"_chart_legend_translate_g"),o,t,u,f;return(this.removeNavigationStyle(),"Tab"===n.code&&this.setNavigationStyle(i),s)&&(o=s.firstElementChild,t=o.getAttribute("class"),t&&-1===t.indexOf("e-bullet-chart-focused")?t+=" e-bullet-chart-focused":t||(t="e-bullet-chart-focused"),o.setAttribute("class",t)),"Tab"===n.code?(""!==this.previousTargetId&&this.previousTargetId.indexOf("_chart_legend_g_")>-1&&-1===i.indexOf("_chart_legend_g_")&&(e=r(this.element.id+"_chart_legend_translate_g"),this.setTabIndex(e.children[this.currentLegendIndex],e.firstElementChild)),this.previousTargetId=i):n.code.indexOf("Arrow")>-1&&(n.preventDefault(),i.indexOf("_chart_legend_")>-1)&&(u=h.parentElement.children,u[this.currentLegendIndex].removeAttribute("tabindex"),this.currentLegendIndex+="ArrowUp"===n.code||"ArrowRight"===n.code?1:-1,this.currentLegendIndex=this.getActualIndex(this.currentLegendIndex,u.length),f=u[this.currentLegendIndex],this.focusChild(f),this.removeNavigationStyle(),this.setNavigationStyle(f.id),i=f.children[1].id),!1},u.prototype.setNavigationStyle=function(n){var t=document.getElementById(n);t&&t.style.setProperty("outline","1.5px solid "+this.themeStyle.tabColor)},u.prototype.removeNavigationStyle=function(){var n=document.querySelectorAll("[id*="+this.element.id+"], [id*=_ChartBorder], text[id*=_title], text[id*=_BulletChartTitle] ,g[id*=_chart_legend]");n&&n.forEach(function(n){(n instanceof HTMLElement||n instanceof SVGElement)&&n.style.setProperty("outline","none")})},u.prototype.setTabIndex=function(n,t){n&&n.removeAttribute("tabindex");t&&t.setAttribute("tabindex","0")},u.prototype.getActualIndex=function(n,t){return n>t-1?0:n<0?t-1:n},u.prototype.focusChild=function(n){n.setAttribute("tabindex","0");var t=n.getAttribute("class");return n.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-bullet-chart-focused")?t="e-bullet-chart-focused "+t:t||(t="e-bullet-chart-focused"),n.setAttribute("class",t),n.focus(),n.id},u.prototype.onPropertyChanged=function(t){var r=!1,i=!1,u,f;if(this.animateSeries=!1,!this.delayRedraw){for(u=0,f=Object.keys(t);u<f.length;u++)switch(f[u]){case"height":case"width":this.createSvg(this);i=!0;break;case"subtitle":case"title":case"minimum":case"maximum":case"interval":case"majorTickLines":case"minorTickLines":case"type":case"ranges":case"valueFill":case"targetColor":i=!0;break;case"tickPosition":case"labelPosition":case"titlePosition":case"border":case"opposedPosition":r=!0;break;case"titleStyle":t.titleStyle?i=!0:r=!0;break;case"subtitleStyle":t.subtitleStyle&&(t.subtitleStyle.size||t.subtitleStyle.textOverflow)?i=!0:r=!0;break;case"dataSource":this.bindData();i=!0;break;case"theme":this.animateSeries=!0;break;case"enableRtl":case"locale":case"currencyCode":n.prototype.refresh.call(this)}!i&&r&&(this.removeSvg(),this.renderBulletElements(),this.trigger("loaded",{bulletChart:this}));i&&(this.render(),this.trigger("loaded",{bulletChart:this}),this.redraw=!1)}},u.prototype.requiredModules=function(){for(var i,n=[],t=0;t<this.ranges.length;t++)null!==this.ranges[t].name&&(i=!0);return this.isLegend=this.legendSettings.visible&&(i||!!this.isLegend||""!==this.targetField||""!==this.valueField),this.tooltip.enable&&n.push({member:"BulletTooltip",args:[this]}),this.isLegend&&n.push({member:"BulletChartLegend",args:[this]}),n},u.prototype.getModuleName=function(){return"bulletChart"},u.prototype.destroy=function(){this.unWireEvents();n.prototype.destroy.call(this);this.removeSvg();this.svgObject=null;this.element.classList.remove("e-BulletChart");this.element.innerText="";var t=document.getElementById(this.element.id+"Keyboard_bullet_chart_focus");t&&t.remove();v("chartmeasuretext")},tt([t.Property(null)],u.prototype,"width",void 0),tt([t.Property(null)],u.prototype,"height",void 0),tt([t.Property(null)],u.prototype,"locale",void 0),tt([t.Complex({},dd)],u.prototype,"majorTickLines",void 0),tt([t.Complex({},gd)],u.prototype,"minorTickLines",void 0),tt([t.Property(null)],u.prototype,"minimum",void 0),tt([t.Property(null)],u.prototype,"maximum",void 0),tt([t.Property(null)],u.prototype,"interval",void 0),tt([t.Property(4)],u.prototype,"minorTicksPerInterval",void 0),tt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},ce)],u.prototype,"labelStyle",void 0),tt([t.Complex({fontFamily:null,size:"12px",fontStyle:"Normal",fontWeight:"400",color:null},ce)],u.prototype,"categoryLabelStyle",void 0),tt([t.Property("")],u.prototype,"labelFormat",void 0),tt([t.Property("")],u.prototype,"title",void 0),tt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},ce)],u.prototype,"titleStyle",void 0),tt([t.Property("")],u.prototype,"subtitle",void 0),tt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},ce)],u.prototype,"subtitleStyle",void 0),tt([t.Property("Horizontal")],u.prototype,"orientation",void 0),tt([t.Complex({color:"#DDDDDD",width:0},yt)],u.prototype,"border",void 0),tt([t.Complex({},ng)],u.prototype,"tooltip",void 0),tt([t.Collection([{end:null,opacity:1,color:""},{end:null,opacity:1,color:""},{end:null,opacity:1,color:""}],kd)],u.prototype,"ranges",void 0),tt([t.Property("Outside")],u.prototype,"labelPosition",void 0),tt([t.Property("Outside")],u.prototype,"tickPosition",void 0),tt([t.Property("Top")],u.prototype,"titlePosition",void 0),tt([t.Property(!1)],u.prototype,"opposedPosition",void 0),tt([t.Property("Material")],u.prototype,"theme",void 0),tt([t.Complex({},au)],u.prototype,"animation",void 0),tt([t.Complex({},tg)],u.prototype,"dataLabel",void 0),tt([t.Complex({},ig)],u.prototype,"legendSettings",void 0),tt([t.Property(!1)],u.prototype,"enableGroupSeparator",void 0),tt([t.Complex({top:15,bottom:10,left:15,right:15},lr)],u.prototype,"margin",void 0),tt([t.Property(5)],u.prototype,"targetWidth",void 0),tt([t.Property("#191919")],u.prototype,"targetColor",void 0),tt([t.Property(6)],u.prototype,"valueHeight",void 0),tt([t.Property(null)],u.prototype,"valueFill",void 0),tt([t.Complex({color:"transparent",width:0},yt)],u.prototype,"valueBorder",void 0),tt([t.Property(null)],u.prototype,"dataSource",void 0),tt([t.Property(null)],u.prototype,"query",void 0),tt([t.Property(null)],u.prototype,"categoryField",void 0),tt([t.Property("Rect")],u.prototype,"type",void 0),tt([t.Property("")],u.prototype,"valueField",void 0),tt([t.Property("")],u.prototype,"targetField",void 0),tt([t.Property(["Rect","Cross","Circle"])],u.prototype,"targetTypes",void 0),tt([t.Property(0)],u.prototype,"tabIndex",void 0),tt([t.Event()],u.prototype,"tooltipRender",void 0),tt([t.Event()],u.prototype,"load",void 0),tt([t.Event()],u.prototype,"loaded",void 0),tt([t.Event()],u.prototype,"bulletChartMouseClick",void 0),tt([t.Event()],u.prototype,"legendRender",void 0),tt([t.Event()],u.prototype,"beforePrint",void 0),tt([t.NotifyPropertyChanges],u)}(t.Component),ylt=function(){function n(n){this.control=n;this.elementId=n.element.id;this.bulletAxis=new bd(this.control)}return n.prototype._elementTooltip=function(n,t,i,r){var u=this.control.createElement("div");u.id="tooltip";u.className="tooltipDiv";var e=n.target,o=r+20,s=n.clientY,f="",h=this.control.tooltip.textStyle.fontStyle?this.control.tooltip.textStyle.fontStyle:this.control.themeStyle.tooltipLabelFont.fontStyle,c=this.control.tooltip.fill?this.control.tooltip.fill:this.control.themeStyle.tooltipFill,l="left:"+o+"px;top:"+s+'px;display: block; position: absolute; "z-index": "13000",cursor: default;font-family: Segoe UI;color:'+(this.control.themeStyle.tooltipLabelFont.color||this.control.themeStyle.tooltipBoldLabel)+"; font-size: 13px; background-color:"+c+"; border: 1px solid #707070;font-style:"+h+";";u.style.cssText=l;t===this.control.svgObject.id+"_Caption"?f=e.textContent===this.control.title?"":this.control.title:t===this.control.svgObject.id+"_SubTitle"&&(f=e.textContent===this.control.subtitle?"":this.control.subtitle);""!==f&&(u.innerHTML="&nbsp"+f+"&nbsp",document.body.insertAdjacentElement("afterbegin",u))},n.prototype._displayTooltip=function(n,t,i,r,u){var p,e,o,c,l,g,et,ot;if("undefined"!==t&&this.control.tooltip.enable&&(t===this.control.svgObject.id+"_FeatureMeasure"||t===this.control.svgObject.id+"_ComparativeMeasure")){var a=[],f=void 0,v=this.bulletAxis.getFormat(this.control),y=null!==v.match("{value}"),w=i.substring(i.lastIndexOf("_")+1),b=[];this.bulletAxis.format=this.bulletAxis.bulletChart.intl.getNumberFormat({format:y?"":v,useGrouping:this.bulletAxis.bulletChart.enableGroupSeparator});p=this.control.dataSource[w][this.control.valueField];a=a.concat(this.control.dataSource[w][this.control.targetField]);var k=this.control.dataSource[w][this.control.categoryField],d=p&&p.toString(),ht=a?a.toString():"",tt=k&&k.toString();for(d=this.bulletAxis.formatValue(this.bulletAxis,y,v,+p),e=0;e<a.length;e++)b=b.concat(this.bulletAxis.formatValue(this.bulletAxis,y,v,+a[e]));var rt={value:d,target:b,category:tt=this.bulletAxis.formatValue(this.bulletAxis,y,v,+k)},ct={value:d,target:ht,category:tt},ut="position: absolute; z-index: 13000; display: block;";if(0===document.getElementsByClassName("tooltipDiv"+this.control.element.id).length&&((f=this.control.createElement("div")).id="tooltipDiv"+this.control.element.id,f.style.cssText=ut,document.getElementById(this.control.element.id+"_Secondary_Element").appendChild(f)),o={value:rt.value,target:rt.target,name:gu},""!==this.control.tooltip.template&&null!=this.control.tooltip.template){for(this.updateTemplateFn(),c=this.control.createElement("div",{id:this.control.element.id+"parent_template"}),l=this.templateFn(ct,this.control,"template",c.id+"_blazorTemplate","",null,c);l&&l.length>0;)1===l.length?(c.appendChild(l[0]),l=null):c.appendChild(l[0]);o.template=c.innerHTML;this.control.trigger(gu,o);c.innerHTML=o.template;f.appendChild(c)}else{for(g="Value : "+o.value,e=0;e<o.target.length;e++)g+="<br/> Target"+(0===e?"":"_"+e)+" : "+o.target[e];o.text=g;this.control.trigger(gu,o);f.innerHTML=o.text;f.style.font=this.control.tooltip.textStyle.fontStyle?this.control.tooltip.textStyle.fontStyle:this.control.themeStyle.tooltipLabelFont.fontStyle;f.style.color=this.control.themeStyle.tooltipLabelFont.color||this.control.themeStyle.tooltipBoldLabel;f.style.fontSize=this.control.themeStyle.titleFont.size}var lt=this.control.tooltip.fill?this.control.tooltip.fill:this.control.themeStyle.tooltipFill,at="Fabric"===this.control.theme||"Fluent"===this.control.theme&&!this.control.tooltip.border.width?1:this.control.tooltip.border.width,ft="Fabric"===this.control.theme||"Fluent"===this.control.theme&&!this.control.tooltip.border.color?"#D2D0CE":this.control.tooltip.border.color,vt=this.control.tooltip.border.dashArray?"dashed "+ft+"; border-dasharray: "+this.control.tooltip.border.dashArray+";":"Solid "+ft+";",s=r,h=u;if(s=s+it(f.getAttribute("width"),this.control.containerWidth)<window.innerWidth?s:it(f.getAttribute("width"),this.control.containerWidth),h=h+it(f.getAttribute("height"),this.control.containerHeight)<window.innerHeight?h:it(f.getAttribute("height"),this.control.containerHeight),null==s&&(s=r),s+f.clientWidth>this.control.availableSize.width&&(s-=f.clientWidth+20),null==h&&(h=n.clientY),h+f.clientHeight>this.control.availableSize.height&&(h-=f.clientHeight+20),""!==this.control.tooltip.template&&null!=this.control.tooltip.template)f.style.cssText="position: absolute;left:"+(s+20)+"px;top:"+(h+20)+"px;";else{if(et=this.control.tooltip.textStyle.fontFamily||this.control.themeStyle.tooltipLabelFont.fontFamily,ot=ut+"left:"+(s+20)+"px;top:"+(h+20)+"px;-webkit-border-radius: 5px 5px 5px 5px; -moz-border-radius: 5px 5px 5px 5px;-o-border-radius: 5px 5px 5px 5px;border-radius: 5px 5px 5px 5px;background-color:"+lt+";color:"+(this.control.tooltip.textStyle.color||this.control.themeStyle.tooltipLabelFont.color)+"; border:"+at+"px "+vt+"padding-bottom: 7px;font-style:"+this.control.themeStyle.tooltipLabelFont.fontStyle+"; padding-left: 10px; font-family:"+et+"; font-size:"+this.control.tooltip.textStyle.size+"; padding-right: 10px; padding-top: 7px",f.style.cssText=ot,this.control.theme.indexOf("Fluent2")>-1){var st=this.control.element.id+"_shadow",yt='<filter id="'+st+'" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="3"/><feOffset dx="-1" dy="3.6" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="0.2"/><\/feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/><\/feMerge><\/filter>',nt=this.control.renderer.createDefs();nt.setAttribute("id",this.control.element.id+"SVG_tooltip_definition");f.appendChild(nt);nt.innerHTML=yt;f.style.filter="url(#"+st+")"}t!==this.control.svgObject.id+"_FeatureMeasure"&&t!==this.control.svgObject.id+"_ComparativeMeasure"||document.getElementById(i).setAttribute("opacity","0.6")}this.control.isReact&&this.control.renderReactTemplates()}},n.prototype.updateTemplateFn=function(){if(this.control.tooltip.template)try{this.templateFn="function"!=typeof this.control.tooltip.template&&document.querySelectorAll(this.control.tooltip.template).length?t.compile(document.querySelector(this.control.tooltip.template).innerHTML.trim()):t.compile(this.control.tooltip.template)}catch(n){this.templateFn=t.compile(this.control.tooltip.template)}},n.prototype.getModuleName=function(){return"BulletTooltip"},n.prototype.destroy=function(){},n}(),plt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wlt=function(n){function r(t){var i=n.call(this,t)||this;return i.library=i,i.addEventListener(),i}return plt(r,n),r.prototype.addEventListener=function(){this.chart.isDestroyed||(this.chart.on("click",this.click,this),this.chart.on(t.Browser.touchEndEvent,this.mouseEnd,this),this.chart.on(t.Browser.touchMoveEvent,this.bulletMouseMove,this))},r.prototype.removeEventListener=function(){this.chart.isDestroyed||(this.chart.off("click",this.click),this.chart.off(t.Browser.touchEndEvent,this.mouseEnd),this.chart.off(t.Browser.touchMoveEvent,this.bulletMouseMove))},r.prototype.bulletMouseMove=function(n){this.chart.legendSettings.visible&&this.chart.isTouch&&this.move(n)},r.prototype.mouseEnd=function(n){this.chart.legendSettings.visible&&this.chart.isTouch&&this.move(n)},r.prototype.getLegendOptions=function(n){var e,s,u,h,o,r;this.legendCollections=[];s=0;this.isRtlEnable=this.chart.enableRtl;for(var i=this.chart,c=0,l=n;c<l.length;c++)u=l[c],null!==u.name&&(e=u.color?u.color:i.themeStyle.rangeStrokes[u.index].color,this.legendCollections.push(new br(u.name,e,u.shape,this.chart.legendSettings.visible,null,u.legendImageUrl,null,!1,u.index,null)),s++);if(null!==i.dataSource&&""!==i.valueField&&(e=i.theme.indexOf("Dark")>-1?"white":i.valueFill?i.valueFill:"black",h="Vertical"===i.orientation?"TargetRect":"ActualRect",this.legendCollections.push(new br("Actual",e,h,this.chart.legendSettings.visible,null,"",null,!1,s++,null))),null!==i.dataSource&&""!==i.targetField)for(e=i.theme.indexOf("Dark")>-1?"white":i.targetColor?i.targetColor:"black",h="Vertical"===i.orientation?"ActualRect":"TargetRect",o=0;o<Object.keys(i.dataSource).length;o++)if(t.isNullOrUndefined(i.dataSource[o][i.targetField].length)||1===i.dataSource[o][i.targetField].length)for(;0===o;){this.legendCollections.push(new br("Target",e,h,this.chart.legendSettings.visible,null,"",null,!1,s++,null));break}else for(var a=i.targetTypes,f=[],v=a.length;0===o;){for(r=0;r<v;r++)f[r]=a[r%v],f[r]="Rect"===f[r]?"Vertical"===i.orientation?"ActualRect":"TargetRect":f[r],f[r]="Cross"===f[r]?"Multiply":f[r],this.legendCollections.push(new br("Target_"+r,e,f[r],this.chart.legendSettings.visible,null,"",null,!1,s++,null));break}},r.prototype.getLegendBounds=function(n,t,r){var v=0,f=r.padding,y=0,u;this.isVertical?v=n.width/20:y=n.height/20;t.height+=y;t.width+=v;var e,l=0,o=0,h=0,c=0,s=0,b=r.shapeWidth,k=r.shapePadding;this.maxItemHeight=Math.max(i.measureText("MeasureText",r.textStyle,this.chart.themeStyle.legendLabelFont).height,r.shapeHeight);for(var p=!1,a=0,w=this.legendCollections;a<w.length;a++)u=w[a],e={fill:u.fill,text:u.text,shape:u.shape,name:te,cancel:!1},this.chart.trigger(te,e),u.render=!e.cancel,u.text=e.text,u.fill=e.fill,u.shape=e.shape,u.textSize=i.measureText(u.text,r.textStyle,this.chart.themeStyle.legendLabelFont),u.render&&""!==u.text&&(p=!0,o+=c=b+k+u.textSize.width+f,(t.width<f+o||this.isVertical)&&(l=Math.max(l,o+f-(this.isVertical?0:c)),0===h&&c!==o&&(h=1),o=this.isVertical?0:c,s=++h*(this.maxItemHeight+f)+f));s=Math.max(s,this.maxItemHeight+f+f);this.isPaging=t.height<s;this.totalPages=h;p?this.setBounds(Math.max(o+f,l),"Bottom"===this.position||"Top"===this.position?Math.min(s,this.chart.initialClipRect.height-(this.legend.border.width+this.legend.margin.bottom+this.legend.margin.top)):s,r,t):this.setBounds(0,0,r,t)},r.prototype.getRenderPoint=function(n,t,i,r,u,f,e){var o=i+(this.legend.maximumLabelWidth?this.legend.maximumLabelWidth:r.textSize.width),s=r.location.x+(this.isRtlEnable?-o:o),c=this.legend.padding,h;s+(n.textSize.width+i)>u.x+u.width+this.legend.shapeWidth/2||this.isVertical?(n.location.x=t.x,n.location.y=f===e?r.location.y:r.location.y+this.maxItemHeight+c):(n.location.x=f===e?r.location.x:s,n.location.y=r.location.y);h=this.isRtlEnable?n.location.x-i+this.itemPadding+this.legend.shapeWidth/2-this.legendBounds.x:this.legendBounds.x+this.legendBounds.width-(n.location.x+i-this.itemPadding-this.legend.shapeWidth/2);n.text=wi(+h.toFixed(4),n.text,this.legend.textStyle,this.chart.enableRtl,this.chart.themeStyle.legendLabelFont)},r.prototype.click=function(n){var t=n.target.id;t.indexOf(this.legendID+"_pagedown")>-1?this.changePage(n,!1):t.indexOf(this.legendID+"_pageup")>-1&&this.changePage(n,!0)},r.prototype.getModuleName=function(){return"BulletChartLegend"},r.prototype.destroy=function(){this.removeEventListener()},r}(fs),eh=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ou=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},df=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return eh(i,n),ou([t.Property("Segoe UI")],i.prototype,"fontFamily",void 0),ou([t.Property("Normal")],i.prototype,"fontStyle",void 0),ou([t.Property("Regular")],i.prototype,"fontWeight",void 0),ou([t.Property("")],i.prototype,"color",void 0),ou([t.Property("12px")],i.prototype,"size",void 0),ou([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),ug=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return eh(i,n),ou([t.Property(t.Browser.isDevice?5:10)],i.prototype,"top",void 0),ou([t.Property(t.Browser.isDevice?5:10)],i.prototype,"bottom",void 0),ou([t.Property(t.Browser.isDevice?5:10)],i.prototype,"right",void 0),ou([t.Property(t.Browser.isDevice?5:10)],i.prototype,"left",void 0),i}(t.ChildProperty),fg=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return eh(i,n),ou([t.Property(0)],i.prototype,"width",void 0),ou([t.Property(1)],i.prototype,"opacity",void 0),ou([t.Property("transparent")],i.prototype,"color",void 0),i}(t.ChildProperty),oh=function(){return function(n,t,i,r){this.x=n;this.y=t;this.width=i;this.height=r}}(),eg=function(){return function(){}}(),blt=function(){return function(){}}(),og=function(){return function(){}}(),fy=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return eh(t,n),t}(eg),sg=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return eh(t,n),t}(fy),hg=function(){return function(){}}(),cg=function(){return function(){}}(),lg=function(){return function(){}}(),ag=function(){return function(){}}(),vg=function(){return function(n,t,i,r,u){this.id=n;this.fill=t;this.borderColor=i;this.borderWidth=r;this.opacity=u}}(),yg=function(){return function(){}}(),pg=function(){return function(){this.counterclockwise=0;this.clockwise=1}}(),wg=function(){return function(){}}(),bg=function(){return function(){}}(),il=function(){return function(n,t){this.width=n;this.height=t}}(),kg=function(){return function(){}}(),dg=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var fr=function(){return function(n,t,i,r,u,f,e){this.id=n;this.opacity=u;this.fill=t;this.stroke=r;this["stroke-width"]=i;this["stroke-dasharray"]=f;this.d=e}}(),rl=function(n){function t(t,i,r,u,f){var e=n.call(this,t,i,r.width,r.color,u)||this;return e.y=f.y,e.x=f.x,e.height=f.height,e.width=f.width,e}return dg(t,n),t}(fr),un=function(n){function t(t,i,r,u,f,e,o,s){var h=n.call(this,t,i,r.width,r.color,u)||this;return h.cy=e,h.cx=f,h.r=o,h["stroke-dasharray"]=s,h}return dg(t,n),t}(fr);le=function(){return function(n,t,i,r,u){this.id=n;this.x=t;this.y=i;this.anchor=r;this.text=u}}();var os=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kt=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},en=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return os(i,n),kt([t.Property(!0)],i.prototype,"visible",void 0),kt([t.Property("")],i.prototype,"text",void 0),kt([t.Property("")],i.prototype,"description",void 0),kt([t.Property("Center")],i.prototype,"textAlignment",void 0),kt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},df)],i.prototype,"textStyle",void 0),i}(t.ChildProperty),on=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return os(i,n),kt([t.Property(0)],i.prototype,"x",void 0),kt([t.Property(0)],i.prototype,"y",void 0),i}(t.ChildProperty),sn=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return os(i,n),kt([t.Property(1)],i.prototype,"width",void 0),kt([t.Property(null)],i.prototype,"color",void 0),i}(t.ChildProperty),hn=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return os(i,n),kt([t.Property(10)],i.prototype,"width",void 0),kt([t.Property(10)],i.prototype,"height",void 0),kt([t.Complex({},sn)],i.prototype,"border",void 0),i}(t.ChildProperty),cn=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return os(i,n),kt([t.Property(1)],i.prototype,"width",void 0),kt([t.Property(null)],i.prototype,"color",void 0),i}(t.ChildProperty),ln=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return os(i,n),kt([t.Property(!1)],i.prototype,"visible",void 0),kt([t.Property("bottom")],i.prototype,"position",void 0),kt([t.Property("Center")],i.prototype,"alignment",void 0),kt([t.Property(null)],i.prototype,"width",void 0),kt([t.Property(null)],i.prototype,"height",void 0),kt([t.Property("circle")],i.prototype,"shape",void 0),kt([t.Property(null)],i.prototype,"rowCount",void 0),kt([t.Property(null)],i.prototype,"columnCount",void 0),kt([t.Property(8)],i.prototype,"itemPadding",void 0),kt([t.Property(5)],i.prototype,"shapePadding",void 0),kt([t.Property("")],i.prototype,"description",void 0),kt([t.Property(!0)],i.prototype,"toggleVisibility",void 0),kt([t.Complex({},en)],i.prototype,"title",void 0),kt([t.Complex({},on)],i.prototype,"location",void 0),kt([t.Complex({},hn)],i.prototype,"itemStyle",void 0),kt([t.Complex({},cn)],i.prototype,"border",void 0),kt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},df)],i.prototype,"textStyle",void 0),i}(t.ChildProperty),ul=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),di=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},an=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ul(i,n),di([t.Property(1)],i.prototype,"width",void 0),di([t.Property("")],i.prototype,"dashArray",void 0),di([t.Property(!0)],i.prototype,"visible",void 0),di([t.Property(null)],i.prototype,"color",void 0),di([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),vn=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ul(i,n),di([t.Property(1)],i.prototype,"width",void 0),di([t.Property("")],i.prototype,"dashArray",void 0),di([t.Property(!1)],i.prototype,"visible",void 0),di([t.Property(null)],i.prototype,"color",void 0),di([t.Property(8)],i.prototype,"count",void 0),i}(t.ChildProperty),yn=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ul(i,n),di([t.Property(!0)],i.prototype,"visible",void 0),di([t.Property(1)],i.prototype,"width",void 0),di([t.Property(null)],i.prototype,"color",void 0),di([t.Property("")],i.prototype,"dashArray",void 0),i}(t.ChildProperty),oy=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ul(i,n),di([t.Property(!0)],i.prototype,"visible",void 0),di([t.Property("Outside")],i.prototype,"labelPosition",void 0),di([t.Property("Hide")],i.prototype,"labelIntersectAction",void 0),di([t.Complex({},an)],i.prototype,"majorGridLines",void 0),di([t.Complex({},vn)],i.prototype,"minorGridLines",void 0),di([t.Complex({},yn)],i.prototype,"axisLine",void 0),di([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},df)],i.prototype,"labelStyle",void 0),i}(t.ChildProperty),pn=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hr=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},wn=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return pn(i,n),hr([t.Property(!0)],i.prototype,"visible",void 0),hr([t.Property("")],i.prototype,"text",void 0),hr([t.Property("")],i.prototype,"description",void 0),hr([t.Property("Far")],i.prototype,"textAlignment",void 0),hr([t.Property(!0)],i.prototype,"enableTrim",void 0),hr([t.Property(null)],i.prototype,"maximumWidth",void 0),hr([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},df)],i.prototype,"textStyle",void 0),i}(t.ChildProperty),bn=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return pn(i,n),hr([t.Property(!0)],i.prototype,"visible",void 0),hr([t.Property("")],i.prototype,"text",void 0),hr([t.Property("")],i.prototype,"description",void 0),hr([t.Property("Center")],i.prototype,"textAlignment",void 0),hr([t.Property(!0)],i.prototype,"enableTrim",void 0),hr([t.Property(null)],i.prototype,"maximumWidth",void 0),hr([t.Complex({},wn)],i.prototype,"subtitle",void 0),hr([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},df)],i.prototype,"font",void 0),hr([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},df)],i.prototype,"textStyle",void 0),i}(t.ChildProperty),ae=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ot=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},kn=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ae(i,n),ot([t.Property(1)],i.prototype,"width",void 0),ot([t.Property(null)],i.prototype,"color",void 0),i}(t.ChildProperty),dn=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ae(i,n),ot([t.Property(!1)],i.prototype,"visible",void 0),ot([t.Property(null)],i.prototype,"fill",void 0),ot([t.Property(.75)],i.prototype,"opacity",void 0),ot([t.Property("")],i.prototype,"template",void 0),ot([t.Complex({},kn)],i.prototype,"border",void 0),i}(t.ChildProperty),gn=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ae(i,n),ot([t.Property(3)],i.prototype,"width",void 0),ot([t.Property("white")],i.prototype,"color",void 0),i}(t.ChildProperty),ntt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ae(i,n),ot([t.Property(.1)],i.prototype,"width",void 0),ot([t.Property("white")],i.prototype,"color",void 0),i}(t.ChildProperty),ttt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ae(i,n),ot([t.Property(1)],i.prototype,"width",void 0),ot([t.Property(null)],i.prototype,"color",void 0),i}(t.ChildProperty),itt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ae(i,n),ot([t.Property(!1)],i.prototype,"visible",void 0),ot([t.Property("")],i.prototype,"template",void 0),ot([t.Property(null)],i.prototype,"fill",void 0),ot([t.Property(1)],i.prototype,"opacity",void 0),ot([t.Complex({},ntt)],i.prototype,"border",void 0),ot([t.Complex({},ttt)],i.prototype,"connectorLine",void 0),ot([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},df)],i.prototype,"textStyle",void 0),i}(t.ChildProperty),rtt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ae(i,n),ot([t.Property(!1)],i.prototype,"visible",void 0),ot([t.Property("circle")],i.prototype,"shape",void 0),ot([t.Property(6)],i.prototype,"width",void 0),ot([t.Property(6)],i.prototype,"height",void 0),ot([t.Property("")],i.prototype,"imageUrl",void 0),ot([t.Property("")],i.prototype,"fill",void 0),ot([t.Property(1)],i.prototype,"opacity",void 0),ot([t.Complex({},gn)],i.prototype,"border",void 0),ot([t.Complex({},itt)],i.prototype,"dataLabel",void 0),i}(t.ChildProperty),utt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ae(i,n),ot([t.Property("visible")],i.prototype,"visibility",void 0),ot([t.Property([])],i.prototype,"points",void 0),ot([t.Property("")],i.prototype,"resistance",void 0),ot([t.Property("")],i.prototype,"reactance",void 0),ot([t.Property("")],i.prototype,"tooltipMappingName",void 0),ot([t.Property(null)],i.prototype,"dataSource",void 0),ot([t.Property("")],i.prototype,"name",void 0),ot([t.Property(null)],i.prototype,"fill",void 0),ot([t.Property(!1)],i.prototype,"enableAnimation",void 0),ot([t.Property("2000ms")],i.prototype,"animationDuration",void 0),ot([t.Property(!1)],i.prototype,"enableSmartLabels",void 0),ot([t.Property(1)],i.prototype,"width",void 0),ot([t.Property(1)],i.prototype,"opacity",void 0),ot([t.Complex({},rtt)],i.prototype,"marker",void 0),ot([t.Complex({},dn)],i.prototype,"tooltip",void 0),i}(t.ChildProperty),iat=function(){function n(){}return n.prototype.calculateAreaBounds=function(n,t,i){var u=n.margin,f=n.border,r=this.getLegendSpace(n,i),e=r.leftLegendWidth+u.left+f.width,o=r.rightLegendWidth+u.left+u.right+2*f.width,s=n.availableSize.width-(e+o);return{x:e,y:u.top+2*n.elementSpacing+r.modelTitleHeight+r.modelsubTitleHeight+r.topLegendHeight+f.width,width:s,height:n.availableSize.height-(r.modelTitleHeight+2*n.elementSpacing+r.modelsubTitleHeight+u.top+r.topLegendHeight+r.bottomLegendHeight)}},n.prototype.getLegendSpace=function(n,t){var o,f,i=n.title,r=n.legendSettings,u=r.position.toLowerCase(),s=n.font,v=r.border.width,h=0,c=0,l=0,a=0,e=0;return r.visible&&(f=t.width+5+n.elementSpacing+2*v,h="left"===u?f:0,c="right"===u?f:0,e=r.title.visible?er(r.title.text,s,n.themeStyle.legendLabelFont).height:0,l="top"===u?n.elementSpacing+t.height+e:0,a="bottom"===u?n.elementSpacing+t.height+e:0),o=er(i.subtitle.text,s,n.themeStyle.legendLabelFont).height,""!==i.text&&i.visible,{leftLegendWidth:h,rightLegendWidth:c,topLegendHeight:l,bottomLegendHeight:a,modelTitleHeight:0,modelsubTitleHeight:""!==i.subtitle.text&&i.subtitle.visible?o:0}},n}(),ftt="animationComplete",ett="legendRender",ott="titleRender",stt="subtitleRender",htt="textRender",ctt="seriesRender",fl="axisLabelRender",rat=function(){function n(){this.radialLabels=[-50,-20,-10,-5,-4,-3,-2,-1.5,-1,-.8,-.6,-.4,-.2,0,.2,.4,.6,.8,1,1.5,2,3,4,5,10,20,50];this.radialLabelCollections=[];this.horizontalLabelCollections=[];this.labelCollections=[];this.direction=new pg}return n.prototype.renderArea=function(n,t){this.calculateChartArea(n,t);this.calculateCircleMargin(n,t);this.calculateXAxisRange(n);this.calculateRAxisRange(n);this.measureHorizontalAxis(n);this.measureRadialAxis(n);n.horizontalAxis.visible&&this.updateHAxis(n);n.radialAxis.visible&&this.updateRAxis(n);n.horizontalAxis.visible&&this.drawHAxisLabels(n);n.radialAxis.visible&&this.drawRAxisLabels(n)},n.prototype.updateHAxis=function(n){var t=n.horizontalAxis.majorGridLines,i=n.horizontalAxis.minorGridLines,r=n.horizontalAxis.axisLine;t.visible&&this.updateHMajorGridLines(n);i.visible&&this.updateHMinorGridLines(n);r.visible&&this.updateHAxisLine(n)},n.prototype.updateRAxis=function(n){var t=n.radialAxis.majorGridLines,i=n.radialAxis.minorGridLines,r=n.radialAxis.axisLine;t.visible&&this.updateRMajorGridLines(n);i.visible&&this.updateRMinorGridLines(n);r.visible&&this.updateRAxisLine(n)},n.prototype.measureHorizontalAxis=function(n){var t=n.horizontalAxis.minorGridLines;this.measureHMajorGridLines(n);t.visible&&this.measureHMinorGridLines(n)},n.prototype.measureRadialAxis=function(n){var t=n.radialAxis.minorGridLines;this.measureRMajorGridLines(n);t.visible&&this.measureRMinorGridLines(n)},n.prototype.calculateChartArea=function(n,t){var r=n.availableSize.width,i=n.availableSize.height;r=t.width;i=t.height;var f=Math.min(r,i),u=Math.min(r,i),e=t.x+(t.width/2-f/2),o=t.y+((i-u)/2>0?(i-u)/2:0);n.chartArea={x:e,y:o,width:f,height:u}},n.prototype.calculateCircleMargin=function(n,t){var e,o=n.chartArea.width,r=n.radius;e=this.maximumLabelLength(n);var i="Outside"===n.radialAxis.labelPosition?e+10:10,u=(o-2*i>0?o-2*i:0)/2,f=r>1?1:r<.1?.1:r;this.areaRadius=u*f;this.circleLeftX=n.chartArea.x+i+u*(1-f);this.circleTopY=n.chartArea.y+i+u*(1-f);this.circleCenterX=this.circleLeftX+this.areaRadius;this.circleCenterY=t.y+t.height/2},n.prototype.maximumLabelLength=function(n){for(var r,t=0,u=n.horizontalAxis.labelStyle,i=0;i<this.radialLabels.length;i++)t<(r=er(this.radialLabels[i].toString(),u,n.themeStyle.axisLabelFont)).width&&(t=r.width);return t},n.prototype.calculateAxisLabels=function(){for(var o,f,r=0,t=0,u=[],e=2*this.areaRadius,n=0;n<2;n+=.1){var s=!1,h=!1,i=e*(1/(1+(n=Math.round(10*n)/10)))*1;0!==r&&1!==n?(n<1&&(s=this.isOverlap(1,e,i,30)),n>1&&(h=this.isOverlap(2,e,i,30)),s||h||r-i>=30&&(u[t]=n,t++,r=i)):(r=i,u[t]=n,t++)}for(o=[2,3,4,5,10,20,50],f=0;f<o.length;f++)u[t]=o[f],t++;return u},n.prototype.isOverlap=function(n,t,i,r){return i-t*(1/(n+1))*1<r},n.prototype.calculateXAxisRange=function(n){for(var r,t,u,f=2*this.areaRadius,e=this.calculateAxisLabels(),s=this.circleCenterY,h=this.circleLeftX,o=this.circleLeftX,i=0;i<e.length;i++)t=f*(1/((r=e[i])+1))/2,"Impedance"===n.renderType&&(o=h+f-2*t),u=o+t,this.horizontalLabelCollections.push({centerX:u,centerY:s,radius:t,value:r,region:null})},n.prototype.calculateRAxisRange=function(n){var f,i,r,e=2*this.areaRadius,t=new lg,u;for("Impedance"===n.renderType?(t.x=this.circleLeftX+e,t.y=this.circleTopY+this.areaRadius):(t.x=this.circleLeftX,t.y=this.circleTopY+this.areaRadius),u=0;u<this.radialLabels.length;u++)r=this.radialLabels[u],i=Math.abs(1/r*e/2),f="Impedance"===n.renderType?r>0?t.y-i:t.y+i:r<0?t.y-i:t.y+i,this.radialLabelCollections.push({centerX:t.x,centerY:f,radius:i,value:r})},n.prototype.measureHMajorGridLines=function(n){var f,e,i,r,s,u=[],o,t;for(this.majorHGridArcPoints=[],o=0;o<this.horizontalLabelCollections.length;o++)t=new fy,t=this.horizontalLabelCollections[o],u=this.calculateHMajorArcStartEndPoints(t.value),"Impedance"===n.renderType?(i=u[0],r=u[1]):(i=u[1],r=u[0]),s={width:t.radius,height:t.radius},0!==t.value&&50!==t.value?(f=this.intersectingCirclePoints(i[0].centerX,i[0].centerY,i[0].radius,t.centerX,t.centerY,t.radius,n.renderType),e=this.intersectingCirclePoints(r[0].centerX,r[0].centerY,r[0].radius,t.centerX,t.centerY,t.radius,n.renderType),this.majorHGridArcPoints.push({startPoint:f,endPoint:e,rotationAngle:2*Math.PI,sweepDirection:"Impedance"===n.renderType?this.direction.counterclockwise:this.direction.clockwise,isLargeArc:!0,size:s})):(f={x:t.centerX+t.radius,y:t.centerY},e={x:t.centerX+t.radius,y:t.centerY-.05},this.majorHGridArcPoints.push({startPoint:f,endPoint:e,rotationAngle:2*Math.PI,sweepDirection:this.direction.clockwise,isLargeArc:!0,size:s}))},n.prototype.measureRMajorGridLines=function(n){var r,i,o,t,s,u,f,h,c,l=[],a,e;for(this.majorRGridArcPoints=[],this.labelCollections=[],a=tn(),e=0;e<this.radialLabelCollections.length;e++)(r=this.radialLabelCollections[e]).radius<=a||(i=r.value,o=(l=this.calculateMajorArcStartEndPoints(r,Math.abs(i),n))[0],t=l[1],s=this.circleXYRadianValue(this.circleCenterX,this.circleCenterY,t.x,t.y)*(180/Math.PI),0!==i?(u={x:o.x,y:o.y},f={x:t.x,y:t.y},h={width:r.radius,height:r.radius},c=i>0?this.direction.clockwise:this.direction.counterclockwise,this.majorRGridArcPoints.push({startPoint:u,endPoint:f,size:h,rotationAngle:2*Math.PI,isLargeArc:!1,sweepDirection:c}),this.labelCollections.push({centerX:t.x,centerY:t.y,angle:s,value:i,radius:this.areaRadius,region:null})):(u={x:this.circleLeftX,y:this.circleCenterY},f={x:this.circleCenterX+this.areaRadius,y:this.circleCenterY},this.majorRGridArcPoints.push({startPoint:u,endPoint:f,size:null,rotationAngle:null,isLargeArc:null,sweepDirection:null}),this.labelCollections.push({centerX:"Impedance"===n.renderType?this.circleCenterX-this.areaRadius:this.circleCenterX+this.areaRadius,centerY:this.circleCenterY,angle:"Impedance"===n.renderType?180:360,value:i,radius:this.areaRadius,region:null})))},n.prototype.circleXYRadianValue=function(n,t,i,r){var u;return(u=Math.atan2(r-t,i-n))<0?u+2*Math.PI:u},n.prototype.calculateMajorArcStartEndPoints=function(n,t,i){var u=[],r=[],f=this.circleCenterX,e=this.circleCenterY;return t>=10?u[0]="Impedance"===i.renderType?{x:f+this.areaRadius,y:e}:{x:f-this.areaRadius,y:e}:r=t>=3?this.horizontalLabelCollections.filter(function(n){return 10===n.value}):t>=1?this.horizontalLabelCollections.filter(function(n){return 5===n.value}):this.horizontalLabelCollections.filter(function(n){return 3===n.value}),r.length>0&&(u[0]=this.intersectingCirclePoints(n.centerX,n.centerY,n.radius,r[0].centerX,r[0].centerY,r[0].radius,i.renderType)),u[1]=this.intersectingCirclePoints(n.centerX,n.centerY,n.radius,f,e,this.areaRadius,i.renderType),u},n.prototype.calculateHMajorArcStartEndPoints=function(n){var t,i,r=[];return n<=.3?(t=2,i=-2):n<=1?(t=3,i=-3):n<=2?(t=5,i=-5):n<=5?(t=10,i=-10):(t=50,i=-50),r[0]=this.radialLabelCollections.filter(function(n){return n.value===t}),r[1]=this.radialLabelCollections.filter(function(n){return n.value===i}),r},n.prototype.calculateMinorArcStartEndPoints=function(n){var t,i,r=[];return n<=.1?(t=1,i=-1):n<=.2?(t=.8,i=-.8):n<=.3?(t=.4,i=-.4):n<=.6?(t=1,i=-1):n<=1?(t=1.5,i=-1.5):n<=1.5?(t=2,i=-2):n<=2?(t=1,i=-1):n<=5?(t=3,i=-3):(t=10,i=-10),r[0]=this.radialLabelCollections.filter(function(n){return n.value===t}),r[1]=this.radialLabelCollections.filter(function(n){return n.value===i}),r},n.prototype.intersectingCirclePoints=function(n,t,i,r,u,f,e){var o={x:0,y:0},l=n-r,a=t-u,v=Math.sqrt(l*l+a*a),s=v*v,y=(i*i-f*f)/(2*s),p=i*i-f*f,w=Math.sqrt(2*(i*i+f*f)/s-p*p/(s*s)-1),b=(n+r)/2+y*(r-n),k=w*(u-t)/2,h=b+k,c=b-k,d=(t+u)/2+y*(u-t),g=w*(n-r)/2,nt=d+g,tt=d-g;return"Impedance"===e?c<h?(o.x=c,o.y=tt):(o.x=h,o.y=nt):h>c?(o.x=h,o.y=nt):(o.x=c,o.y=tt),{x:o.x,y:o.y}},n.prototype.updateHMajorGridLines=function(n){var t=n.horizontalAxis.majorGridLines,i=n.renderer.createGroup({id:n.element.id+"_svg_horizontalAxisMajorGridLines"});i.setAttribute("aria-hidden","true");var r=this.calculateGridLinesPath(this.majorHGridArcPoints),u=new fr(n.element.id+"_horizontalAxisMajorGridLines","none",t.width,t.color?t.color:n.themeStyle.majorGridLine,t.opacity,t.dashArray,r),f=n.renderer.drawPath(u);i.appendChild(f);n.svgObject.appendChild(i)},n.prototype.updateRMajorGridLines=function(n){var t=n.radialAxis.majorGridLines,i=n.renderer.createGroup({id:n.element.id+"_svg_radialAxisMajorGridLines"});i.setAttribute("aria-hidden","true");var r=this.calculateGridLinesPath(this.majorRGridArcPoints),u=new fr(n.element.id+"_radialAxisMajorGridLines","none",t.width,t.color?t.color:n.themeStyle.majorGridLine,t.opacity,t.dashArray,r),f=n.renderer.drawPath(u);i.appendChild(f);n.svgObject.appendChild(i)},n.prototype.updateHAxisLine=function(n){var t=this.areaRadius,i=n.horizontalAxis.axisLine,r=n.renderer.createGroup({id:n.element.id+"_svg_hAxisLine"});r.setAttribute("aria-hidden","true");var u=this.circleCenterX+t,f=this.circleCenterY,e=this.circleCenterX+t,o=this.circleCenterY-.05,s=t,h=t,c=this.direction.clockwise,l="M"+u+" "+f+" A "+s+" "+h+" "+2*Math.PI+" 1 "+c+" "+e+" "+o,a=new fr(n.element.id+"_horizontalAxisLine","none",i.width,i.color?i.color:n.themeStyle.axisLine,1,i.dashArray,l),v=n.renderer.drawPath(a);r.appendChild(v);n.svgObject.appendChild(r)},n.prototype.updateRAxisLine=function(n){var r=this.areaRadius,t=n.radialAxis.axisLine,f=this.circleCenterX-r,e=this.circleCenterY,o=this.circleCenterX+r,s=this.circleCenterY,h="M "+f+" "+e+" A 0 0 0 0 "+this.direction.counterclockwise+" "+o+" "+s,c=new fr(n.element.id+"_radialAxisLine","none",t.width,t.color?t.color:n.themeStyle.axisLine,1,t.dashArray,h),i=n.renderer.createGroup({id:n.element.id+"_svg_rAxisLine"}),u;i.setAttribute("aria-hidden","true");u=n.renderer.drawPath(c);i.appendChild(u);n.svgObject.appendChild(i)},n.prototype.drawHAxisLabels=function(n){var y=n.horizontalAxis,t,u,f,e,o,p,h,w,c,b,l,k,a,i,s;n.radialAxis.labelStyle.fontFamily=n.themeStyle.fontFamily||n.radialAxis.labelStyle.fontFamily;i=n.horizontalAxis.labelStyle;s=n.renderer.createGroup({id:n.element.id+"_HAxisLabels"});s.setAttribute("aria-hidden","true");for(var d=function(v){var g,d,nt;if(t=r.horizontalLabelCollections[v],u=r.horizontalLabelCollections[v].value.toString(),0!==t.value){if(f="Impedance"===n.renderType?t.centerX-t.radius:t.centerX+t.radius,e=t.centerY,o=er(u,i,n.themeStyle.axisLabelFont),f="Impedance"===n.renderType?f-o.width:f,"Outside"===y.labelPosition?e-=o.height/4:e+=o.height,r.horizontalLabelCollections[v].region=r.calculateRegion(u,o,f,e),"Hide"===y.labelIntersectAction)for(p=r.horizontalLabelCollections[v],h=p.region.bounds,w=h.width,c=h.x,g=1;g<v;g++)b=r.horizontalLabelCollections[g],l=b.region.bounds,k=l.width,a=l.x,"Impedance"===n.renderType&&a+k>c&&(u=""),"Admittance"===n.renderType&&a<c+w&&(u="");d={text:u.toString(),x:f,y:e,name:fl,cancel:!1};nt=function(t){var r,u,f;t.cancel||(r=new le(n.element.id+"_HLabel_"+v,d.x,d.y,"none",d.text),u=i.color?i.color:n.themeStyle.axisLabelFont.color,i.fontFamily=i.fontFamily||n.themeStyle.labelFontFamily,f=oo(r,i,u,s,n.themeStyle.axisLabelFont),s.appendChild(f))};nt.bind(r);n.trigger(fl,d,nt)}},r=this,v=0;v<this.horizontalLabelCollections.length;v++)d(v);n.svgObject.appendChild(s)},n.prototype.drawRAxisLabels=function(n){n.radialAxis.labelStyle.fontFamily=n.themeStyle.fontFamily||n.radialAxis.labelStyle.fontFamily;var f,h,l,i,r,a,v,b,k,d,e,y,p,g,nt,tt,o,u=n.radialAxis.labelStyle,s=new sg,it=n.radialAxis,c=n.renderer.createGroup({id:n.element.id+"_RAxisLabels"});c.setAttribute("aria-hidden","true");for(var rt=function(w){var ut,rt,ft;if(s=t.labelCollections[w],f=s.value.toString(),h=er(f,u,n.themeStyle.axisLabelFont),l=Math.round(100*s.angle)/100,"Outside"===it.labelPosition?(i=t.circlePointPosition(t.circleCenterX,t.circleCenterY,s.angle,t.areaRadius+2),r=t.setLabelsOutsidePosition(l,i.x,i.y,h)):(i=t.circlePointPosition(t.circleCenterX,t.circleCenterY,s.angle,t.areaRadius-2),r=t.setLabelsInsidePosition(l,i.x,i.y,h)),t.labelCollections[w].region=t.calculateRegion(f,h,r.x,r.y),"Hide"===it.labelIntersectAction)for(d=t.labelCollections[w],e=d.region.bounds,b=e.width,k=e.height,a=e.x,v=e.y,ut=0;ut<w;ut++)tt=t.labelCollections[ut],o=tt.region.bounds,g=o.width,nt=o.height,y=o.x,p=o.y,y<=a+b&&a<=y+g&&p<=v+k&&v<=p+nt&&(f=" ");rt={text:f.toString(),x:r.x,y:r.y,name:fl,cancel:!1};ft=function(t){var i,r,f;t.cancel||(i=new le(n.element.id+"_RLabel_"+w,rt.x,rt.y,"none",rt.text),r=u.color?u.color:n.themeStyle.axisLabelFont.color,u.fontFamily=n.themeStyle.labelFontFamily?n.themeStyle.labelFontFamily:u.fontFamily,f=oo(i,u,r,c,n.themeStyle.axisLabelFont),c.appendChild(f))};ft.bind(t);n.trigger(fl,rt,ft)},t=this,w=0;w<this.labelCollections.length;w++)rt(w);n.svgObject.appendChild(c)},n.prototype.calculateRegion=function(n,t,i,r){return new og,{bounds:{x:i,y:r,width:t.width,height:t.height},labelText:n}},n.prototype.updateHMinorGridLines=function(n){var t=n.horizontalAxis.minorGridLines,i=n.renderer.createGroup({id:n.element.id+"_svg_horizontalAxisMinorGridLines"}),r=this.calculateGridLinesPath(this.minorHGridArcPoints),u=new fr(n.element.id+"_horizontalAxisMinorGridLines","none",t.width,t.color?t.color:n.themeStyle.minorGridLine,t.opacity,t.dashArray,r),f=n.renderer.drawPath(u);i.appendChild(f);n.svgObject.appendChild(i)},n.prototype.updateRMinorGridLines=function(n){var t=n.radialAxis.minorGridLines,i=n.renderer.createGroup({id:n.element.id+"_svg_radialAxisMinorGridLines"}),r=this.calculateGridLinesPath(this.minorGridArcPoints),u=new fr(n.element.id+"_radialAxisMinorGridLines","none",t.width,t.color?t.color:n.themeStyle.minorGridLine,t.opacity,t.dashArray,r),f=n.renderer.drawPath(u);i.appendChild(f);n.svgObject.appendChild(i)},n.prototype.calculateGridLinesPath=function(n){for(var u,f,e,o,t=new kg,i="",r=0;r<n.length;r++)u=(t=n[r]).startPoint.x,f=t.startPoint.y,e=t.endPoint.x,o=t.endPoint.y,i=i+"M "+u+" "+f+" A "+(t.size?t.size.width:0)+" "+(t.size?t.size.height:0)+" "+(t.rotationAngle?t.rotationAngle:0)+" "+(t.isLargeArc?1:0)+" "+(t.sweepDirection?t.sweepDirection:0)+" "+e+" "+o+" ";return i.toString()},n.prototype.measureHMinorGridLines=function(n){var i,r,c,l,a,v,h,o,u,y,p,w,t,f=[],k=n.horizontalAxis.minorGridLines.count,b,e,s;for(this.minorHGridArcPoints=[],b=2*this.areaRadius,e=0;e<this.horizontalLabelCollections.length-3;e++)for(o=this.horizontalLabelCollections[e],u=this.horizontalLabelCollections[e+1],w=(y=2*(o.radius-u.radius))/(p=Math.floor(k/100*y)),s=0;s<p;s++)t=u.radius+s*w/2,h=("Impedance"===n.renderType?this.circleLeftX+b-2*t:this.circleLeftX)+t,c=u.value>5,f=this.calculateMinorArcStartEndPoints(u.value),"Impedance"===n.renderType?(i=f[0],r=f[1]):(i=f[1],r=f[0]),l=this.intersectingCirclePoints(i[0].centerX,i[0].centerY,i[0].radius,h,o.centerY,t,n.renderType),a=this.intersectingCirclePoints(r[0].centerX,r[0].centerY,r[0].radius,h,o.centerY,t,n.renderType),v={width:t,height:t},this.minorHGridArcPoints.push({startPoint:l,endPoint:a,rotationAngle:2*Math.PI,sweepDirection:"Impedance"===n.renderType?this.direction.counterclockwise:this.direction.clockwise,isLargeArc:c,size:v})},n.prototype.measureRMinorGridLines=function(n){var l,r,e,o,t,i,a,v,y,p,w,g=n.radialAxis.minorGridLines.count,nt=Math.PI*2*this.areaRadius,tt=l="Impedance"===n.renderType?this.circleCenterX+this.areaRadius:this.circleCenterX-this.areaRadius,it=this.circleCenterY,b,u,s,d;for(this.minorGridArcPoints=[],b={x:tt,y:it},u=2;u<this.labelCollections.length-3;u++)for(t=this.labelCollections[u],i=this.labelCollections[u+1],"Impedance"===n.renderType?(r=360===i.angle?0:i.angle,e=Math.abs(r-t.angle)):(r=360===t.angle?0:t.angle,e=Math.abs(r-i.angle)),v=nt/360*e,p=e/(y=Math.floor(g/100*v)),w=i.value>0?i.value:t.value,o=this.minorGridLineArcIntersectCircle(Math.abs(w)),s=1;s<y;s++){var h=p*s+(360===t.angle?r:t.angle),c=this.circlePointPosition(this.circleCenterX,this.circleCenterY,h,this.areaRadius),f=this.arcRadius(b,c,h),rt=h>180?this.circleCenterY-f:this.circleCenterY+f,k=this.intersectingCirclePoints(l,rt,f,o[0].centerX,o[0].centerY,o[0].radius,n.renderType),ut={x:k.x,y:k.y},ft={x:c.x,y:c.y};a={width:f,height:f};d=t.value>=0?this.direction.clockwise:this.direction.counterclockwise;this.minorGridArcPoints.push({startPoint:ut,endPoint:ft,rotationAngle:2*Math.PI,sweepDirection:d,isLargeArc:!1,size:a})}},n.prototype.minorGridLineArcIntersectCircle=function(n){var t;return t=n>=3?20:n>=1.5?10:n>=.6?3:2,this.horizontalLabelCollections.filter(function(n){return n.value===t})},n.prototype.circlePointPosition=function(n,t,i,r){var u=i*(Math.PI/180);return{x:n+r*Math.cos(u),y:t+r*Math.sin(u)}},n.prototype.setLabelsInsidePosition=function(n,t,i,r){var f=t,u=i;return 0===n||360===n?(f-=r.width,u-=r.height/2):90===n?(f-=r.width,u+=r.height/8):180===n?u+=r.height:270===n?u+=r.height/2:n>0&&n<=20?f-=r.width:n>20&&n<=60?(f-=r.width+r.width/2,u+=r.height/2):n>60&&n<90?(f-=r.width+r.width/4,u+=r.height/4):n>90&&n<=135?(f-=r.width/2,u+=r.height/16):n>135&&n<=150?(f+=r.width/2,u+=r.height/2):n>150&&n<180?(f+=r.width/2,u+=r.height):n>180&&n<=210?(f+=r.width/6,u+=r.height/6):n>210&&n<240?u+=r.height/4:n>225&&n<270?u+=r.height/3:n>270&&n<=300?(f-=r.width+r.width/4,u+=r.height/4):n>300&&n<=330?(f-=r.width+r.width/3,u+=r.height/4):n>330&&n<=340?(f-=r.width+r.width/2,u+=r.height/4):n>340&&(f-=r.width,u+=r.height/8),{x:f,y:u}},n.prototype.setLabelsOutsidePosition=function(n,t,i,r){var f=t,u=i;return 90===n?(f-=r.width/2,u+=r.height):180===n?(f-=r.width+5,u-=r.height/4):270===n?(f-=r.width/2,u-=r.height/4):360===n?(f+=5,u-=r.height/2):n>0&&n<=30?(f+=r.width/4,u+=r.height/8):n>30&&n<=60?(f+=r.width/2,u+=r.height/4):n>60&&n<=90?(f-=r.width/2,u+=r.height):n>90&&n<=135?(f-=r.width,u+=r.height):n>135&&n<=180?(f-=r.width+r.width/4,u+=r.height/4):n>180&&n<=210?(f-=r.width+r.width/4,u-=r.height/4):n>210&&n<=270?(f-=r.width,u-=r.height/4):n>270&&n<=340?u-=r.height/4:n>340&&(u+=r.height/4,f+=r.width/6),{x:f,y:u}},n.prototype.arcRadius=function(n,t,i){var r=i>180?Math.PI/2:270*Math.PI/180,u=(t.x-n.x)/2,f=(t.y-n.y)/2,e=(f-u*((Math.cos(r)*f-Math.sin(r)*u)/(Math.cos(r)*u+Math.sin(r)*f)))/Math.sin(r),o=n.y+Math.sin(r)*e;return Math.abs(n.y-o)},n}(),uat=function(){function n(){}return n.prototype.drawMarker=function(n,t,i,r){if(n.series[t].marker.visible){var u=n.series[t].marker,s=n.series[t].points.length-1,h=u.width,c=u.height,l=u.shape,e=n.renderer.createGroup({id:n.element.id+"_svg_series"+t+"_Marker"});i.appendChild(e);for(var a=u.border.width,v=u.border.color,y=u.opacity,p=u.fill?u.fill:n.series[t].fill||n.seriesColors[t%n.seriesColors.length],f=0;f<s+1;f++){var w=r[f].point,o=f,b=new vg(n.element.id+"_Series"+t+"_Points"+o+"_Marker"+o,p,v,a,y);e.appendChild(this.drawSymbol(l,u.imageUrl,w,new il(h,c),b,n))}}},n.prototype.drawSymbol=function(n,t,i,r,u,f){var h,b,l,s,k=n.toLowerCase(),c={color:u.borderColor,width:u.borderWidth},v=u.opacity,e=i.x,o=i.y,y=Math.sqrt(r.height*r.height+r.width*r.width)/2,a,p,w;switch(k){case"circle":b=new un(u.id,u.fill,c,v,i.x,i.y,y,null);h=f.renderer.drawCircle(b);break;case"rectangle":s="M "+(e+-r.width/2)+" "+(o+-r.height/2)+" L "+(e+r.width/2)+" "+(o+-r.height/2)+" L "+(e+r.width/2)+" "+(o+r.height/2)+" L "+(e+-r.width/2)+" "+(o+r.height/2)+" L "+(e+-r.width/2)+" "+(o+-r.height/2)+"z";l=new fr(u.id,u.fill,c.width,c.color,v,"",s);h=f.renderer.drawPath(l);break;case"triangle":s="M "+(e+-r.width/2)+" "+(o+r.height/2)+" L "+e+" "+(o+-r.height/2)+" L "+(e+r.width/2)+" "+(o+r.height/2)+" L "+(e+-r.width/2)+" "+(o+r.height/2)+"z";l=new fr(u.id,u.fill,c.width,c.color,v,"",s);h=f.renderer.drawPath(l);break;case"diamond":s="M "+(e+-r.width/2)+" "+o+" L "+e+" "+(o+-r.height/2)+" L "+(e+r.width/2)+" "+o+" L "+e+" "+(o+r.height/2)+" L "+(e+-r.width/2)+" "+o+"z";l=new fr(u.id,u.fill,c.width,c.color,v,"",s);h=f.renderer.drawPath(l);break;case"pentagon":for(a=0;a<=5;a++)p=y*Math.cos(Math.PI/180*72*a),w=y*Math.sin(Math.PI/180*72*a),s=0===a?"M "+(e+p)+" "+(o+w)+" ":s.concat("L "+(e+p)+" "+(o+w)+" ");s=s.concat("Z");l=new fr(u.id,u.fill,c.width,c.color,v,"",s);h=f.renderer.drawPath(l)}return h.setAttribute("role","img"),h.setAttribute("aria-label","x: "+i.x+", y: "+i.y),f.element.id+"_Series0_Points0_Marker0"===u.id&&h.setAttribute("tabindex","0"),h},n}(),fat=function(){function n(){this.textOptions=[];this.labelOptions=[];this.allPoints=[]}return n.prototype.drawDataLabel=function(n,t,i,r,u){var v;this.textOptions=[];this.allPoints=[];for(var y,c,h,p,o,f=n.margin,w=n.series[t].marker,b=w.dataLabel,s=b.textStyle,d=r.length,e=0;e<d;e++){o=er(p=n.series[t].points[e].reactance.toString(),s,n.themeStyle.dataLabelFont);var l=(c=r[e].point).x-o.width/2,a=c.y-(o.height+w.height+f.top),g=o.width+f.left/2+f.right/2,k=o.height+f.top/2+f.bottom/2;s.fontFamily=s.fontFamily?s.fontFamily:n.themeStyle.dataLabelFont.fontFamily;y=e;new yg;h={textX:l+f.left/2,textY:a+k/2+f.top/2,x:l,y:a};this.textOptions[e]={id:n.element.id+"_Series"+t+"_Points"+y+"_dataLabel_displayText"+e,x:h.textX,y:h.textY,fill:"black",text:p,font:s,xPosition:l,yPosition:a,width:g,height:k,location:c,labelOptions:h,visible:!0,connectorFlag:null}}v=new bg;v.textOptions=this.textOptions;this.labelOptions.push(v);this.drawDatalabelSymbol(n,t,b,i,u,r)},n.prototype.calculateSmartLabels=function(n,t){for(var r=n.textOptions.length,i=0;i<r;i++)this.allPoints[this.allPoints.length]=n.textOptions[i],this.connectorFlag=!1,this.compareDataLabels(i,n,0,t),this.labelOptions[t].textOptions[i]=n.textOptions[i],this.labelOptions[t].textOptions[i].connectorFlag=this.connectorFlag},n.prototype.compareDataLabels=function(n,t,i,r){for(var u,e,s=this.allPoints.length,f=10,o=0;o<s;o++)if(e=this.allPoints[o],u=this.allPoints[s-1],this.isCollide(e,u))switch(this.connectorFlag=!0,i){case 0:this.resetValues(u);this.prevLabel=e;u.xPosition=this.prevLabel.xPosition+(this.prevLabel.width/2+u.width/2+f);u.x=u.xPosition+5;i+=1;this.compareDataLabels(n,t,i,r);break;case 1:this.resetValues(u);u.xPosition=this.prevLabel.xPosition+this.prevLabel.width/2+u.width/2+f;u.x=u.xPosition+5;u.yPosition=u.location.y+u.height/2+5;u.y=u.yPosition+u.height/2+5;i+=1;this.compareDataLabels(n,t,i,r);break;case 2:this.resetValues(u);u.yPosition=u.location.y+u.height/2+5;u.y=u.yPosition+u.height/2+5;i+=1;this.compareDataLabels(n,t,i,r);break;case 3:this.resetValues(u);u.xPosition=this.prevLabel.xPosition-this.prevLabel.width/2-u.width/2-f;u.x=u.xPosition+5;u.yPosition=u.height/2+u.location.y+5;u.y=u.yPosition+u.height/2+5;i+=1;this.compareDataLabels(n,t,i,r);break;case 4:this.resetValues(u);u.xPosition=this.prevLabel.xPosition-this.prevLabel.width/2-u.width/2-f;u.x=u.xPosition+5;i+=1;this.compareDataLabels(n,t,i,r);break;case 5:this.resetValues(u);u.xPosition=this.prevLabel.xPosition-this.prevLabel.width/2-u.width/2-f;u.x=u.xPosition+5;u.yPosition=this.prevLabel.yPosition-u.height-f;u.y=u.yPosition+u.height/2+5;i+=1;this.compareDataLabels(n,t,i,r);break;case 6:this.resetValues(u);u.yPosition=this.prevLabel.yPosition-(u.height+f);u.y=u.yPosition+u.height/2+5;i+=1;this.compareDataLabels(n,t,i,r);break;case 7:this.resetValues(u);u.xPosition=this.prevLabel.xPosition+this.prevLabel.width/2+u.width/2+f;u.x=u.xPosition+5;u.yPosition=this.prevLabel.yPosition-u.height-f;u.y=u.yPosition+u.height/2+5;i+=1;this.compareDataLabels(n,t,i,r);break;case 8:i=0;this.compareDataLabels(n,t,i,r)}},n.prototype.isCollide=function(n,t){var i=!1;return n!==t&&(i=!(n.y+n.height<t.y||n.y>t.y+t.height||n.x+n.width/2<t.x-t.width/2||n.x-n.width/2>t.x+t.width/2)),i},n.prototype.resetValues=function(n){n.xPosition=n.labelOptions.x;n.yPosition=n.labelOptions.y;n.x=n.labelOptions.textX;n.y=n.labelOptions.textY},n.prototype.drawConnectorLines=function(n,t,i,r,u){var o,f=r.location;o=f.y>r.y?r.y:r.y-r.height/2;var s="M "+f.x+" "+f.y+" L "+r.x+" "+o,e=n.series[t].marker.dataLabel.connectorLine,h=e.color?e.color:n.series[t].fill||n.seriesColors[t%n.seriesColors.length],c=new fr(n.element.id+"_dataLabelConnectorLine_series"+t+"_point"+i,"none",e.width,h,1,"none",s),l=n.renderer.drawPath(c);u.appendChild(l)},n.prototype.drawDatalabelSymbol=function(n,i,r,u,f,e){for(var l,o=0;o<n.series[i].points.length;o++)if(r.template){l=t.createElement("div",{id:n.element.id+"_seriesIndex_"+i+"_Label_Template_Group",className:"template",styles:"position: absolute;"});document.getElementById(n.element.id+"_Secondary_Element").appendChild(l);var a=r.template+"_seriesIndex"+i+"_pointIndex"+o+n.element.id,v={point:n.series[i].points[o].reactance},s=dlt(klt(r.template)(n),a,v);l.appendChild(s);s.style.left=e[o].point.x-s.offsetWidth/2+"px";s.style.top=e[o].point.y-s.offsetHeight-n.series[i].marker.height/2+"px";var h=parseInt(s.style.left,10),c=parseInt(s.style.top,10),y=s.offsetWidth,p=s.offsetHeight,w=e[o].point,b={textX:h,textY:c,x:h,y:c};this.labelOptions[i].textOptions[o]={id:a,x:h,y:c,fill:"black",text:"",font:r.textStyle,xPosition:h,yPosition:c,width:y,height:p,location:w,labelOptions:b,visible:!0,connectorFlag:null}}},n}(),eat=function(){function n(){this.xValues=[];this.yValues=[];this.pointsRegion=[];this.lineSegments=[];this.location=[];this.dataLabel=new fat}return n.prototype.processData=function(n){var i=n.dataSource,r=n.resistance,u=n.reactance,f=n.tooltipMappingName,t;for(n.points=[],t=0;t<i.length;t++)n.points.push({resistance:i[t][r],reactance:i[t][u],tooltip:i[t][f]})},n.prototype.draw=function(n,i,r){for(var rt,u,ft,e,nt,h,et,a,b,v,k,c,d,tt=n.renderer.createGroup({id:n.element.id+"_svg_seriesCollections"}),s=n.series,ot=s.length,it=i.areaRadius,f=0;f<ot;f++){for(rt=f,s[f].dataSource&&s[f].resistance&&s[f].reactance&&this.processData(s[f]),this.pointsRegion[f]=[],this.location[f]=[],u=0;u<s[f].points.length;u++)this.xValues[u]=s[f].points[u].resistance,this.yValues[u]=s[f].points[u].reactance;for(var st=i.circleCenterX,l=i.circleCenterY,g=2*i.areaRadius,ht=l,ct=st+("Impedance"===n.renderType?it:-it),o=0;o<s[f].points.length;o++){var ut=this.xValues[o],y=g*(1/(ut+1))/2,p=this.yValues[o],w=Math.abs(1/p*g/2);"Impedance"===n.renderType?(k=p>0?l-w:l+w,v=i.circleLeftX+g-y):(k=p<0?l-w:l+w,v=i.circleLeftX+y);c=i.intersectingCirclePoints(ct,k,w,v,ht,y,n.renderType);ft=tn();Math.abs(p)<ft&&(c.x="Impedance"===n.renderType?v-y:v+y,c.y=l);this.pointsRegion[f][o]=new cg;this.pointsRegion[f][o]={point:c,x:ut,y:p};this.location[f][o]={x:c.x,y:c.y}}for(e=0;e<s[f].points.length-1;e++)d=e+1,this.lineSegments[e]=new hg,this.lineSegments[e]={x1:this.xValues[e],y1:this.yValues[e],x2:this.xValues[d],y2:this.yValues[d]};n.svgObject.appendChild(tt);this.drawSeries(n,rt,tt,r)}for(u=0;u<n.series.length;u++)if(n.series[u].enableSmartLabels&&n.series[u].marker.dataLabel.visible)for(nt=n.renderer.createGroup({id:n.element.id+"_svg_series"+u+"_Datalabel_connectorLines"}),(b=document.getElementById(n.element.id+"_svg_seriesCollection"+u))&&(b.setAttribute("aria-label","Smithchart with "+s[u].points.length+" points"),b.appendChild(nt)),this.dataLabel.calculateSmartLabels(this.dataLabel.labelOptions[u],u),o=0;o<n.series[u].points.length;o++)h=this.dataLabel.labelOptions[u].textOptions[o],(h.xPosition+h.width>n.chartArea.x+n.chartArea.width||h.xPosition<n.chartArea.x||h.yPosition<n.chartArea.y||h.yPosition+h.height>n.chartArea.y+n.chartArea.height)&&(this.dataLabel.labelOptions[u].textOptions[o].connectorFlag=!1,this.dataLabel.labelOptions[u].textOptions[o].visible=!1),h.connectorFlag&&this.dataLabel.drawConnectorLines(n,u,o,h,nt);for(et=function(t){var i=n.series[t].marker.dataLabel,f,r,e,u;if(n.series[t].marker.dataLabel.visible)for(f=document.getElementById(n.element.id+"_svg_seriesCollection"+t),r=n.renderer.createGroup({id:n.element.id+"_svg_series"+t+"_Datalabel"}),r.setAttribute("aria-hidden","true"),f&&f.appendChild(r),e=function(u){var c=a.dataLabel.labelOptions[t].textOptions[u],f,h,o,s;if(!i.template&&c.visible){f=new wg;f=a.dataLabel.labelOptions[t].textOptions[u];var e=i.textStyle,l=f.xPosition,v=f.yPosition,y=n.element.id+"_Series"+t+"_Points"+u+"_dataLabel_symbol"+u,p=i.fill?i.fill:n.series[t].fill||n.seriesColors[t%n.seriesColors.length],w=n.series[t].marker.dataLabel.border,b=new rl(y,p,w,f.opacity,new oh(l,v,f.width,f.height)),k=n.renderer.drawRectangle(b);r.appendChild(k);h={text:f.text,x:f.x,y:f.y,seriesIndex:t,pointIndex:u,name:htt,cancel:!1};o=function(t){if(!t.cancel){var i=new le(f.id,t.x,t.y,"start",t.text),u=e.color?e.color:n.themeStyle.dataLabelFont.color,o=oo(i,e,u,r,n.themeStyle.dataLabelFont);r.appendChild(o)}};o.bind(a);n.trigger(htt,h,o)}else i.template&&(s=document.getElementById(i.template+"_seriesIndex"+t+"_pointIndex"+u+n.element.id),s.style.left=a.dataLabel.labelOptions[t].textOptions[u].xPosition+"px",s.style.top=a.dataLabel.labelOptions[t].textOptions[u].yPosition+"px")},u=0;u<n.series[t].points.length;u++)e(u)},a=this,u=0;u<n.series.length;u++)et(u);for(e=0;e<n.series.length;e++)(n.series[e].enableAnimation&&"Disable"!==t.animationMode||"Enable"===t.animationMode)&&n.animateSeries&&(n.series[e].marker.dataLabel.template&&this.animateDataLabelTemplate(e,n),(b=document.getElementById(n.element.id+"_svg_seriesCollection"+e)).setAttribute("aria-label","Smithchart with "+s[e].points.length+" points"),this.performAnimation(n,b,e))},n.prototype.drawSeries=function(n,t,i,r){var h=this,u=n.renderer.createGroup({id:n.element.id+"_svg_seriesCollection"+t,"clip-path":"url(#"+n.element.id+"_ChartSeriesClipRect_"+t+")"}),o,s;n.series[t].marker.visible||(u.setAttribute("tabindex",0===t?"0":""),u.style.outline="none");u.setAttribute("visibility",n.series[t].visibility);u.setAttribute("role","region");u.setAttribute("aria-label","Smithchart with "+n.series[t].points.length+" points");i.appendChild(u);for(var c,e="",v=n.series[t].points.length-1,f=0;f<v;f++)o=this.pointsRegion[t][f].point,s=this.pointsRegion[t][f+1].point,e=e+"M "+o.x+" "+o.y+" L "+s.x+" "+s.y+" ";var y=e.toString(),p=n.series[t].fill||n.seriesColors[t%n.seriesColors.length],l={text:n.series[t].name,fill:p,name:ctt,cancel:!1},a=function(i){var e,f;i.cancel||(e=new fr(n.element.id+"_series"+t+"_points","none",n.series[t].width,l.fill,n.series[t].opacity,"none",y),h.clipRectElement=n.renderer.drawClipPath(new rl(n.element.id+"_ChartSeriesClipRect_"+t,"transparent",{width:1,color:"Gray"},1,{x:r.x,y:r.y,width:n.availableSize.width,height:n.availableSize.height})),u.appendChild(h.clipRectElement),f=n.renderer.createGroup({id:n.element.id+"_svg"+t}),c=n.renderer.drawPath(e),f.appendChild(c),u.appendChild(f))};a.bind(this);n.trigger(ctt,l,a);(new uat).drawMarker(n,t,u,this.pointsRegion[t]);this.dataLabel.drawDataLabel(n,t,u,this.pointsRegion[t],r)},n.prototype.animateDataLabelTemplate=function(n,t){for(var r,u=t.series[n].points.length,f=parseFloat(t.series[n].animationDuration),i=0;i<u;i++)r=document.getElementById(t.series[n].marker.dataLabel.template+"_seriesIndex"+n+"_pointIndex"+i+t.element.id),r.style.visibility="hidden",glt(t,r,0,f,"FadeIn")},n.prototype.performAnimation=function(n,i,r){var f,o=new t.Animation({}),u=i.childNodes[0].childNodes[0].childNodes[0],s=fn("Linear"),h=fn("Reverse"),e=+u.getAttribute("width"),c=+u.getAttribute("x");o.animate(u,{duration:0===parseFloat(n.series[r].animationDuration)&&"Enable"===t.animationMode?2e3:parseFloat(n.series[r].animationDuration),progress:function(t){"Impedance"===n.renderType?(f=s(t.timeStamp-t.delay,0,e,t.duration),u.setAttribute("width",f.toString())):(f=h(t.timeStamp-t.delay,e,0,t.duration),u.setAttribute("x",f.toString()))},end:function(){"Impedance"===n.renderType?u.setAttribute("width",e.toString()):u.setAttribute("x",c.toString());var t={cancel:!1,name:ftt,smithchart:n};n.trigger(ftt,t)}})},n.prototype.getLocation=function(n,t){return{x:this.location[n][t].x,y:this.location[n][t].y}},n}(),sy="beforePrint",ltt=function(){function n(n){this.control=n}return n.prototype.print=function(n){this.smithchartPrint=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no");this.smithchartPrint.moveTo(0,0);this.smithchartPrint.resizeTo(screen.availWidth,screen.availHeight);var i={cancel:!1,htmlContent:this.getHTMLContent(n),name:sy};this.control.trigger(sy,i);i.cancel||t.print(i.htmlContent,this.smithchartPrint)},n.prototype.getHTMLContent=function(n){var i=t.createElement("div");return n?n instanceof Array?n.forEach(function(n){i.appendChild(gg(n).cloneNode(!0))}):n instanceof Element?i.appendChild(n.cloneNode(!0)):i.appendChild(gg(n).cloneNode(!0)):i.appendChild(this.control.element.cloneNode(!0)),i},n.prototype.export=function(n,i,r){var e=this,o=t.createElement("canvas",{id:"ej2-canvas",attrs:{width:this.control.availableSize.width.toString(),height:this.control.availableSize.height.toString()}}),s=!(t.Browser.userAgent.toString().indexOf("HeadlessChrome")>-1),h,u,f,c;r=t.isNullOrUndefined(r)?kr.PdfPageOrientation.Landscape:r;h='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+this.control.svgObject.outerHTML+"<\/svg>";u=window.URL.createObjectURL(new Blob("SVG"===n?[h]:[(new XMLSerializer).serializeToString(this.control.svgObject)],{type:"image/svg+xml"}));"SVG"===n?this.triggerDownload(i,n,u,s):(f=new Image,c=o.getContext("2d"),f.onload=function(){if(c.drawImage(f,0,0),window.URL.revokeObjectURL(u),"PDF"===n){var t=new kr.PdfDocument,h=o.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");t.pageSettings.orientation=r;h=h.slice(h.indexOf(",")+1);t.pages.add().graphics.drawImage(new kr.PdfBitmap(h),0,0,e.control.availableSize.width-60,e.control.availableSize.height);s&&(t.save(i+".pdf"),t.destroy())}else e.triggerDownload(i,n,o.toDataURL("image/png").replace("image/png","image/octet-stream"),s)},f.src=u)},n.prototype.triggerDownload=function(n,i,r,u){t.createElement("a",{attrs:{download:n+"."+i.toLocaleLowerCase(),href:r}}).dispatchEvent(new MouseEvent(u?"click":"move",{view:window,bubbles:!1,cancelable:!0}))},n}(),oat=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ui=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},sat=function(n){function u(t,i){var r=n.call(this,t,i)||this;return r.isLegendClicked=!1,r.previousTargetId="",r.currentPointIndex=0,r.currentSeriesIndex=0,r.currentLegendIndex=0,r}return oat(u,n),u.prototype.getModuleName=function(){return"smithchart"},u.prototype.getPersistData=function(){return""},u.prototype.createChartSvg=function(){var n;this.removeSvg();(n=this).renderer=new i.SvgRenderer(n.element.id),function(n){var t=n.element.clientWidth,i=n.element.clientHeight;n.availableSize=new il(rn(n.width,t)||t||600,rn(n.height,i)||i||450)}(n);n.svgObject=n.renderer.createSvg({id:n.element.id+"_svg",width:n.availableSize.width,height:n.availableSize.height})},u.prototype.renderTitle=function(n,i,r){var h,f=this,e=n.textStyle,u=er(n.text,e,this.themeStyle.smithchartTitleFont),c=n.textAlignment,o=n.text,l=t.isNullOrUndefined(n.maximumWidth)?Math.abs(this.margin.left+this.margin.right-this.availableSize.width):n.maximumWidth,y=u.width>l,a,v,s;h=u.width>this.availableSize.width?this.margin.left+this.border.width:"Center"===c?this.availableSize.width/2-u.width/2:"Near"===c?this.margin.left+this.elementSpacing+this.border.width:this.availableSize.width-u.width-(this.margin.right+this.elementSpacing+this.border.width);a=this.margin.top+u.height/2+this.elementSpacing;n.enableTrim&&y&&(o=nn(l,n.text,e,this.themeStyle.smithchartTitleFont),u=er(o,e,this.themeStyle.smithchartTitleFont));r=this.renderer.createGroup({id:this.element.id+"_Title_Group"});v={text:o,x:h,y:a,name:ott,cancel:!1};s=function(t){if(!t.cancel){oo(new le(f.element.id+"_Smithchart_"+i,t.x,t.y,"start",t.text),e,e.color||f.themeStyle.smithchartTitleFont.color,r,f.themeStyle.smithchartTitleFont).setAttribute("tabindex","0");var o={x:t.x,y:t.y,textSize:u};f.svgObject.appendChild(r);""!==n.subtitle.text&&n.subtitle.visible&&f.renderSubtitle(n,i,u,f.availableSize,o,r)}};s.bind(this);this.trigger(ott,v,s)},u.prototype.renderSubtitle=function(n,i,r,u,f,e){var h=this,s=n.subtitle.textStyle,o=n.subtitle,v=er(o.text,s,this.themeStyle.smithchartSubtitleFont),c=o.text,l=t.isNullOrUndefined(o.maximumWidth)?.75*this.bounds.width:o.maximumWidth;o.enableTrim&&v.width>l&&(c=nn(l,o.text,s,this.themeStyle.smithchartSubtitleFont));var y="Far"===n.subtitle.textAlignment?f.x+f.textSize.width:"Near"===n.subtitle.textAlignment?f.x:f.x+f.textSize.width/2,p=f.y+2*this.elementSpacing,w="Far"===n.subtitle.textAlignment?"end":"Near"===n.subtitle.textAlignment?"start":"middle",b={text:c,x:y,y:p,name:stt,cancel:!1},a=function(n){if(!n.cancel){var t=oo(new le(h.element.id+"_Smithchart_"+i,n.x,n.y,w,n.text),s,s.color||h.themeStyle.smithchartSubtitleFont.color,e,h.themeStyle.smithchartSubtitleFont);t.setAttribute("aria-label",o.description||n.text);e.appendChild(t)}};a.bind(this);this.trigger(stt,b,a)},u.prototype.renderBorder=function(){var n=this.border,t;this.background=this.background?this.background:this.themeStyle.background;t=new rl(this.element.id+"_SmithchartBorder",this.background,n,1,new oh(n.width/2,n.width/2,this.availableSize.width-n.width,this.availableSize.height-n.width));this.svgObject.appendChild(this.renderer.drawRectangle(t)).setAttribute("aria-hidden","true")},u.prototype.onPropertyChanged=function(n){var t=!1,i,r;if(!this.delayRedraw){for(i=0,r=Object.keys(n);i<r.length;i++)switch(r[i]){case"background":case"border":case"series":case"legendSettings":case"radius":case"enableRtl":t=!0;break;case"size":this.createChartSvg();t=!0;break;case"theme":case"renderType":this.animateSeries=!0;t=!0}t&&this.render()}},u.prototype.preRender=function(){this.allowServerDataBinding=!1;this.trigger("load",{smithchart:this});this.unWireEVents();this.initPrivateVariable();this.wireEVents()},u.prototype.initPrivateVariable=function(){this.animateSeries=!0;this.delayRedraw=!1;this.element.setAttribute("role","region");this.element.setAttribute("aria-label",this.title.description||this.title.text+". Syncfusion interactive chart.");this.element.setAttribute("tabindex","0");this.element.style.outline="none"},u.prototype.setNavigationStyle=function(n){var t=document.getElementById(n);t&&t.style.setProperty("outline","1.5px solid "+this.themeStyle.tabColor)},u.prototype.removeNavigationStyle=function(){var n=document.querySelectorAll("text[id*=_Smithchart_title], g[id*=_svg_Legend], g[id*=_svg_seriesCollection], path[id*=_Points], [id*="+this.element.id+"]");n&&n.forEach(function(n){(n instanceof HTMLElement||n instanceof SVGElement)&&(n.style.setProperty("outline","none"),n.style.setProperty("margin",""))})},u.prototype.setTheme=function(){this.themeStyle=function(n){var t,i="MaterialDark"===n?"#383838":"FabricDark"===n?"#242424":"#1b1b1b";switch(n){case"HighContrast":t={axisLabel:"#ffffff",axisLine:"#ffffff",majorGridLine:"#BFBFBF",minorGridLine:"#969696",chartTitle:"#ffffff",legendLabel:"#ffffff",background:"#000000",areaBorder:"#ffffff",tooltipFill:"#ffffff",dataLabel:"#ffffff",tooltipBoldLabel:"#000000",tooltipLightLabel:"#000000",tooltipHeaderLine:"#969696",tooltipFontSize:"12px",tabColor:"#FFD939",smithchartTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#FFFFFF",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"MaterialDark":case"BootstrapDark":case"FabricDark":t={axisLabel:"#DADADA",axisLine:" #6F6C6C",majorGridLine:"#414040",minorGridLine:"#514F4F",chartTitle:"#ffffff",legendLabel:"#DADADA",background:i,areaBorder:" #9A9A9A",tooltipFill:"MaterialDark"===n?"#F4F4F4":"BootstrapDark"===n?"#F0F0F0":"#A19F9D",dataLabel:"#DADADA",tooltipBoldLabel:"MaterialDark"===n?"rgba(18, 18, 18, 1)":"BootstrapDark"===n?"#1A1A1A":"#DADADA",tooltipLightLabel:"MaterialDark"===n?"rgba(18, 18, 18, 1)":"BootstrapDark"===n?"#1A1A1A":"#DADADA",tooltipHeaderLine:"#9A9A9A",tooltipFontSize:"12px",tabColor:"MaterialDark"===n?"#00B0FF":"FabricDark"===n?"#0074CC":"#0070F0",smithchartTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"BootstrapDark"===n?"#FFFFFF":"#DADADA",fontFamily:"MaterialDark"===n?"Roboto":"BootstrapDark"===n?"Helvetica":"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"BootstrapDark"===n?"#676767":"#A19F9D",fontFamily:"MaterialDark"===n?"Roboto":"BootstrapDark"===n?"Helvetica":"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"BootstrapDark"===n?"#FFFFFF":"#DADADA",fontFamily:"MaterialDark"===n?"Roboto":"BootstrapDark"===n?"Helvetica":"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"BootstrapDark"===n?"#676767":"#A19F9D",fontFamily:"MaterialDark"===n?"Roboto":"BootstrapDark"===n?"Helvetica":"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"BootstrapDark"===n?"#CED4DA":"#A19F9D",fontFamily:"MaterialDark"===n?"Roboto":"BootstrapDark"===n?"Helvetica":"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"BootstrapDark"===n?"#FFFFFF":"#DADADA",fontFamily:"MaterialDark"===n?"Roboto":"BootstrapDark"===n?"Helvetica":"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap4":t={axisLabel:"#212529",axisLine:"#ADB5BD",majorGridLine:"#CED4DA",minorGridLine:"#DEE2E6",chartTitle:"#212529",legendLabel:"#212529",background:"#FFFFFF",areaBorder:"#DEE2E6",tooltipFill:"#212529",dataLabel:"#212529",tooltipBoldLabel:"#F9FAFB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#FFFFFF",tooltipFontSize:"12px",tabColor:"#007BFF",fontFamily:"Helvetica",fontSize:"16px",labelFontFamily:"Helvetica",tooltipFillOpacity:1,tooltipTextOpacity:.9,smithchartTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#666666",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#212529",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"#495057",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#495057",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#212529",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Tailwind3":t={axisLabel:"#4B5563",axisLine:"#D1D5DB",majorGridLine:"#E5E7EB",minorGridLine:"#D1D5DB",chartTitle:"#6B7280",legendLabel:"#6B7280",background:"#FFFFFF",areaBorder:"#D1D5DB",tooltipFill:"#111827",dataLabel:"#111827",tooltipBoldLabel:"#F9FAFB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#D1D5DB",tooltipFontSize:"12px",tabColor:"#4F46E5",fontFamily:"Inter",fontSize:"12px",labelFontFamily:"inter",tooltipFillOpacity:1,tooltipTextOpacity:1,smithchartTitleFont:{color:"#6B7280",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"},legendLabelFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},legendTitleFont:{color:"#374151",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"500"},dataLabelFont:{color:"#111827",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#4B5563",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"600"}};break;case"Tailwind3Dark":t={axisLabel:"#D1D5DB",axisLine:"#282F3C",majorGridLine:"#282F3C",minorGridLine:"#374151",chartTitle:"#9CA3AF",legendLabel:"#9CA3AF",background:"rgba(17, 24, 39, 1)",areaBorder:"#374151",tooltipFill:"#F9FAFB",dataLabel:"#FFFFFF",tooltipBoldLabel:"#1F2937",tooltipLightLabel:"#1F2937",tooltipHeaderLine:"#374151",tooltipFontSize:"12px",tabColor:"#22D3EE",fontFamily:"Inter",fontSize:"14px",labelFontFamily:"inter",tooltipFillOpacity:1,tooltipTextOpacity:1,smithchartTitleFont:{color:"#9CA3AF",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"},legendLabelFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},legendTitleFont:{color:"#E5E7EB",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"500"},dataLabelFont:{color:"#FFFFFF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"600"}};break;case"Tailwind":t={axisLabel:"#6B7280",axisLine:"#D1D5DB",majorGridLine:"#E5E7EB",minorGridLine:"#D1D5DB",chartTitle:"#374151",legendLabel:"#374151",background:"#FFFFFF",areaBorder:"#D1D5DB6",tooltipFill:"#111827",dataLabel:"#F9FAFB",tooltipBoldLabel:"#F9FAFB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#9CA3AF",tooltipFontSize:"12px",tabColor:"#4F46E5",fontFamily:"Inter",fontSize:"14px",labelFontFamily:"inter",tooltipFillOpacity:1,tooltipTextOpacity:1,smithchartTitleFont:{color:"#374151",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#374151",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"TailwindDark":t={axisLabel:"#9CA3AF",axisLine:"#4B5563",majorGridLine:"#374151",minorGridLine:"#4B5563",chartTitle:"#D1D5DB",legendLabel:"#D1D5DB",background:"#1f2937",areaBorder:"#4B5563",tooltipFill:"#E9ECEF",dataLabel:"#D1D5DB",tooltipBoldLabel:"#1F2937",tooltipLightLabel:"#1F2937",tooltipHeaderLine:"#9CA3AF",tooltipFontSize:"12px",tabColor:"#22D3EE",fontFamily:"Inter",fontSize:"14px",labelFontFamily:"inter",tooltipFillOpacity:1,tooltipTextOpacity:1,smithchartTitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#D1D5DB",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap5":t={axisLabel:"#21252980",axisLine:"#DEE2E6",majorGridLine:"#DEE2E6",minorGridLine:"#DEE2E6",chartTitle:"#212529",legendLabel:"#212529BF",background:"#FFFFFF",areaBorder:"#E9ECEF",tooltipFill:"#000000E5",dataLabel:"#212529",tooltipBoldLabel:"#FFFFFF",tooltipLightLabel:"#FFFFFF",tooltipHeaderLine:"#FFFFFF",tooltipFontSize:"12px",tabColor:"#0D6EFD",fontFamily:"Segoe UI",fontSize:"14px",labelFontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,smithchartTitleFont:{color:"#212529",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#212529BF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#21252980",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"}};break;case"Bootstrap5Dark":t={axisLabel:"#DEE2E680",axisLine:"#495057",majorGridLine:"#495057",minorGridLine:"#495057",chartTitle:"#DEE2E6",legendLabel:"#DEE2E6BF",background:"#212529",areaBorder:"#343A40",tooltipFill:"#FFFFFFE5",dataLabel:"#DEE2E6",tooltipBoldLabel:"#212529",tooltipLightLabel:"#212529",tooltipHeaderLine:"#212529",tooltipFontSize:"12px",tabColor:"#0D6EFD",fontFamily:"Segoe UI",fontSize:"14px",labelFontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,smithchartTitleFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"400"},legendLabelFont:{color:"#DEE2E6BF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"#E9ECEF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#DEE2E680",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"}};break;case"Fluent":t={axisLabel:"#3B3A39",axisLine:"#D2D0CE",majorGridLine:"#D2D0CE",minorGridLine:"#EDEBE9",chartTitle:"#201F1E",legendLabel:"#323130",background:"#FFFFFF",areaBorder:" #D2D0CE",tooltipFill:"#FFFFFF",dataLabel:"#3B3A39",tooltipBoldLabel:"#323130",tooltipLightLabel:"#323130",tooltipHeaderLine:"#D2D0CE",tooltipFontSize:"12px",tabColor:"#0078D4",fontFamily:"Segoe UI",fontSize:"14px",labelFontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,smithchartTitleFont:{color:"#201F1E",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#49454E",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#201F1E",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"#3B3A39",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#3B3A39",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#323129",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"FluentDark":t={axisLabel:"#C8C6C4",axisLine:"#3B3A39",majorGridLine:"#414040",minorGridLine:"#414040",chartTitle:"#F3F2F1",legendLabel:"#D2D0CE",background:"transparent",areaBorder:"#414040",tooltipFill:"#323130",dataLabel:"#C8C6C4",tooltipBoldLabel:"#F3F2F1",tooltipLightLabel:"#F3F2F2",tooltipHeaderLine:"#3B3A39",tooltipFontSize:"12px",tabColor:"#0078D4",fontFamily:"Segoe UI",fontSize:"14px",labelFontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,smithchartTitleFont:{color:"#C8C6C4",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#D2D0CE",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#F3F2F1",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"#D2D0CE",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#C8C6C4",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Fluent2":t={axisLabel:"#616161",axisLine:"#D2D0CE",majorGridLine:"#EDEBE9",minorGridLine:"#FAFAFA",chartTitle:"#242424",legendLabel:"#424242",background:"#FFFFFF",areaBorder:"#EDEBE9",tooltipFill:"#FFFFFF",dataLabel:"#242424",tooltipBoldLabel:"#242424",tooltipLightLabel:"#242424",tooltipHeaderLine:"#D2D0CE",tooltipFontSize:"12px",tabColor:"#0078D4",fontFamily:"Segoe UI",fontSize:"14px",labelFontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,smithchartTitleFont:{color:"#242424",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#424242",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#616161",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#616161",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"}};break;case"Fluent2Dark":t={axisLabel:"#ADADAD",axisLine:"#3B3A39",majorGridLine:"#292827",minorGridLine:"#3B3A39",chartTitle:"#FFFFFF",legendLabel:"#D6D6D6",background:"transparent",areaBorder:"#292827",tooltipFill:"#292929",dataLabel:"#FFFFFF",tooltipBoldLabel:"#FFFFFF",tooltipLightLabel:"#FFFFFF",tooltipHeaderLine:"#3B3A39",tooltipFontSize:"12px",tabColor:"#0078D4",fontFamily:"Segoe UI",fontSize:"14px",labelFontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,smithchartTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#D6D6D6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#ADADAD",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#ADADAD",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"}};break;case"Fluent2HighContrast":t={axisLabel:"#FFFFFF",axisLine:"#3B3A39",majorGridLine:"#3B3A39",minorGridLine:"#3B3A39",chartTitle:"#FFFFFF",legendLabel:"#FFFFFF",background:"#1c1b1f",areaBorder:"#292827",tooltipFill:"#000000",dataLabel:"#FFFFFF",tooltipBoldLabel:"#FFFFFF",tooltipLightLabel:"#FFFFFF",tooltipHeaderLine:"#3B3A39",tooltipFontSize:"12px",tabColor:"#0078D4",fontFamily:"Segoe UI",fontSize:"14px",labelFontFamily:"Segoe UI",tooltipFillOpacity:1,tooltipTextOpacity:1,smithchartTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#ADADAD",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"}};break;case"Material3":t={axisLine:"#C4C7C5",axisLabel:"#1C1B1F",majorGridLine:"#C4C7C5",minorGridLine:"#C4C7C5",legendLabel:"#1C1B1F",background:"#FFFFFF",chartTitle:"#1C1B1F",areaBorder:" #E7E0EC",dataLabel:"#49454E",tooltipFill:"#313033",tooltipBoldLabel:"#F4EFF4",tooltipLightLabel:"#F4EFF4",tooltipHeaderLine:"#F4EFF4",tooltipFontFamily:"Inter",tooltipFontSize:"12px",tabColor:"#49454E",fontFamily:"Inter",fontSize:"16px",labelFontFamily:"Inter",tooltipFillOpacity:1,tooltipTextOpacity:1,smithchartTitleFont:{color:"#1C1B1F",fontFamily:"Roboto",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#49454E",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#1C1B1F",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"#49454E",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#1E192B",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#49454E",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Material3Dark":t={axisLabel:"#E6E1E5",axisLine:"#444746",majorGridLine:"#444746",minorGridLine:"#444746",chartTitle:"#E6E1E5",legendLabel:"#E6E1E5",background:"transparent",areaBorder:" #49454F",tooltipFill:"#E6E1E5",dataLabel:"#CAC4D0",tooltipBoldLabel:"#313033",tooltipLightLabel:"#313033",tooltipHeaderLine:"#313033",tooltipFontFamily:"Roboto",tooltipFontSize:"12px",tabColor:"#CAC4D0",fontFamily:"Roboto",fontSize:"16px",labelFontFamily:"Roboto",tooltipFillOpacity:1,tooltipTextOpacity:1,smithchartTitleFont:{color:"#E6E1E5",fontFamily:"Roboto",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"#E6E1E5",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;default:t={axisLabel:"#686868",axisLine:"#b5b5b5",majorGridLine:"#dbdbdb",minorGridLine:"#eaeaea",chartTitle:"#424242",legendLabel:"#353535",background:"#FFFFFF",areaBorder:"Gray",tooltipFill:"Material"===n?"#000816":"Bootstrap"===n?"#212529":"#FFFFFF",dataLabel:"#424242",tooltipBoldLabel:"Material"===n?"rgba(249, 250, 251, 1)":"Bootstrap"===n?"#F9FAFB":"#333333",tooltipLightLabel:"Material"===n?"rgba(249, 250, 251, 1)":"Bootstrap"===n?"#F9FAFB":"#333333",tooltipHeaderLine:"Fabric"===n?"#D2D0CE":"#ffffff",tooltipFontSize:"12px",tabColor:"Material"===n?"#ff4081":"Fabric"===n?"#0078D6":"#317AB9",fontFamily:"Material"===n?"Roboto":"Bootstrap"===n?"Helvetica":"Segoe UI",smithchartTitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Bootstrap"===n?"#212529":"#333333",fontFamily:"Material"===n?"Roboto":"Bootstrap"===n?"Helvetica":"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"Material"===n?"rgba(97, 97, 97, 1)":"#666666",fontFamily:"Material"===n?"Roboto":"Bootstrap"===n?"Helvetica":"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},legendTitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Bootstrap"===n?"#212529":"#F3F2F1",fontFamily:"Material"===n?"Roboto":"Bootstrap"===n?"Helvetica":"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},dataLabelFont:{color:"Material"===n?"rgba(97, 97, 97, 1)":"Bootstrap"===n?"#676767":"#666666",fontFamily:"Material"===n?"Roboto":"Bootstrap"===n?"Helvetica":"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},axisLabelFont:{color:"Material"===n?"rgba(97, 97, 97, 1)":"Bootstrap"===n?"#676767":"#666666",fontFamily:"Material"===n?"Roboto":"Bootstrap"===n?"Helvetica":"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},smithchartSubtitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Bootstrap"===n?"#212529":"#333333",fontFamily:"Material"===n?"Roboto":"Bootstrap"===n?"Helvetica":"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"}}}return t}(this.theme);this.seriesColors=function(n){var t;switch(n){case"Fabric":case"FabricDark":t=["#4472c4","#ed7d31","#ffc000","#70ad47","#5b9bd5","#c1c1c1","#6f6fe2","#e269ae","#9e480e","#997300"];break;case"Bootstrap4":case"Bootstrap":case"BootstrapDark":t=["#a16ee5","#f7ce69","#55a5c2","#7ddf1e","#ff6ea6","#7953ac","#b99b4f","#407c92","#5ea716","#b91c52"];break;case"HighContrastLight":case"HighContrast":t=["#79ECE4","#E98272","#DFE6B6","#C6E773","#BA98FF","#FA83C3","#00C27A","#43ACEF","#D681EF","#D8BC6E"];break;case"MaterialDark":t=["#9ECB08","#56AEFF","#C57AFF","#61EAA9","#EBBB3E","#F45C5C","#8A77FF","#63C7FF","#FF84B0","#F7C928"];break;case"Tailwind3":t=["#2F4074","#03B4B4","#0D72DE","#FF5733","#D63384","#F39C12","#EF291F","#91C822"];break;case"Tailwind3Dark":t=["#8029F1","#1ABC9C","#0D72DE","#FF5733","#D63384","#F39C12","#EF291F","#91C822"];break;case"Tailwind":t=["#5A61F6","#65A30D","#334155","#14B8A6","#8B5CF6","#0369A1","#F97316","#9333EA","#F59E0B","#15803D"];break;case"TailwindDark":t=["#8B5CF6","#22D3EE","#F87171","#4ADE80","#E879F9","#FCD34D","#F97316","#2DD4BF","#F472B6","#10B981"];break;case"Bootstrap5Dark":case"Bootstrap5":t=["#FD7E14","#6610F2","#6F42C1","#D63384","#DC3545","#FFC107","#198754","#0DCAF0"];break;case"Fluent":case"FluentDark":t=["#1AC9E6","#DA4CB2","#EDBB40","#AF4BCF","#FF7266","#1BD565","#EE993D","#5887FF","#EC548D","#7D39C0"];break;case"Fluent2":t=["#6200EE","#09AF74","#0076E5","#CB3587","#E7910F","#0364DE","#66CD15","#F3A93C","#107C10","#C19C00"];break;case"Fluent2Dark":case"Fluent2HighContrast":t=["#9BB449","#2A72D5","#43B786","#3F579A","#584EC6","#E85F9C","#6E7A89","#EA6266","#0B6A0B","#C19C00"];break;case"Material3":t=["#6355C7","#00AEE0","#FFB400","#F7523F","#963C70","#FD7400","#4BE0BC","#2196F5","#DE3D8A","#162F88"];break;case"Material3Dark":t=["#4EAAFF","#FA4EAB","#FFF500","#17EA58","#38FFE7","#FF9E45","#B3F32F","#B93CE4","#FC5664","#9B55FF"];break;default:t=["#00bdae","#404041","#357cd2","#e56590","#f8b883","#70ad47","#dd8abd","#7f84e8","#7bb4eb","#ea7a57"]}return t}(this.theme)},u.prototype.render=function(){var t,n;this.createChartSvg();this.element.appendChild(this.svgObject);this.setTheme();this.createSecondaryElement();this.renderBorder();this.smithchartLegendModule&&this.legendSettings.visible&&(this.legendBounds=this.smithchartLegendModule.calculateLegendBounds(this));t=new iat;this.bounds=t.calculateAreaBounds(this,this.title,this.legendBounds);""!==this.title.text&&this.title.visible&&this.renderTitle(this.title,"title",null);n=new rat;n.renderArea(this,this.bounds);this.seriesrender=new eat;this.seriesrender.draw(this,n,this.bounds);this.smithchartLegendModule&&this.legendSettings.visible&&this.smithchartLegendModule.renderLegend(this);this.renderComplete();this.allowServerDataBinding=!0;this.trigger("loaded",{smithchart:this})},u.prototype.createSecondaryElement=function(){var n,i,r,u;t.isNullOrUndefined(document.getElementById(this.element.id+"_Secondary_Element"))?(n=t.createElement("div",{id:this.element.id+"_Secondary_Element",styles:"z-index:1;"}),this.element.appendChild(n),i=this.element.getBoundingClientRect(),r=document.getElementById(this.element.id+"_svg"),r&&(u=r.getBoundingClientRect(),n.style.left=Math.max(u.left-i.left,0)+"px",n.style.top=Math.max(u.top-i.top,0)+"px")):ey(this.element.id+"_Secondary_Element")},u.prototype.destroy=function(){if(this.element){this.unWireEVents();n.prototype.destroy.call(this);this.element.classList.remove("e-smithchart");this.removeSvg();this.svgObject=null;var t=document.getElementById(this.element.id+"Keyboard_smith_chart_focus");t&&t.remove();ey("smithchartmeasuretext")}},u.prototype.wireEVents=function(){t.EventHandler.add(this.element,"click",this.smithchartOnClick,this);t.EventHandler.add(this.element,t.Browser.touchMoveEvent,this.mouseMove,this);t.EventHandler.add(this.element,t.Browser.touchEndEvent,this.mouseEnd,this);t.EventHandler.add(this.element,"keyup",this.chartKeyUp,this);t.EventHandler.add(this.element,"keydown",this.chartKeyDown,this);window.addEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.smithchartOnResize.bind(this))},u.prototype.mouseMove=function(n){this.isTouch="touchmove"===n.type?!0:"touch"===n.pointerType||"2"===n.pointerType||this.isTouch;this.tooltipRenderModule&&!this.isTouch&&this.tooltipRenderModule.smithchartMouseMove(this,n)},u.prototype.mouseEnd=function(n){if(this.isTouch="touchend"===n.type?!0:"touch"===n.pointerType||"2"===n.pointerType,this.tooltipRenderModule&&this.isTouch){var t=this.tooltipRenderModule.smithchartMouseMove(this,n);t&&(this.fadeoutTo=+setTimeout(function(){t.fadeOut()},2e3))}},u.prototype.smithchartOnClick=function(n){var f=n.target,s=this.isLegendClicked?f.children[1].id:f.id,u=document.getElementById(s).parentElement,r;if("containerlegendItem_Group"===document.getElementById(u.id).parentElement.id&&this.legendSettings.toggleVisibility){for(var h=u.childNodes[1],e=u.childNodes[0],c=h.textContent,i=void 0,o=void 0,t=0;t<this.smithchartLegendModule.legendSeries.length;t++)c===this.smithchartLegendModule.legendSeries[t].text&&(i=this.smithchartLegendModule.legendSeries[t].seriesIndex,o=this.smithchartLegendModule.legendSeries[t].fill);r=document.getElementById(this.element.id+"_svg_seriesCollection"+i);"visible"===r.getAttribute("visibility")?(e.setAttribute("fill","gray"),r.setAttribute("visibility","hidden"),this.series[i].visibility="hidden"):(e.setAttribute("fill",o),r.setAttribute("visibility","visible"),this.series[i].visibility="visible")}this.removeNavigationStyle()},u.prototype.unWireEVents=function(){t.EventHandler.remove(this.element,"click",this.smithchartOnClick);t.EventHandler.remove(this.element,t.Browser.touchMoveEvent,this.mouseMove);t.EventHandler.remove(this.element,t.Browser.touchEndEvent,this.mouseEnd);t.EventHandler.remove(this.element,"keyup",this.chartKeyUp);t.EventHandler.remove(this.element,"keydown",this.chartKeyDown);window.removeEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.smithchartOnResize)},u.prototype.print=function(n){new ltt(this).print(n)},u.prototype.export=function(n,t,i){new ltt(this).export(n,t,i)},u.prototype.chartKeyDown=function(n){var t="";return this.series[this.currentSeriesIndex].tooltip.visible&&("Tab"===n.code&&this.previousTargetId.indexOf("_Series")>-1||"Escape"===n.code)&&(t="ESC"),""!==t&&this.smithchartKeyboardNavigations(n,n.target.id,t),"Tab"===n.code&&this.removeNavigationStyle(),!1},u.prototype.chartKeyUp=function(n){var u,h,i,f="",t=n.target.id,e=n.target,y=r(this.element.id+"_Smithchart_title"),c=r(this.element.id+"_svg_seriesCollections"),p=r(this.element.id+"legendItem_Group"),w,l,a,v,o,s;if(this.removeNavigationStyle(),y&&y.setAttribute("class","e-smith-chart-focused"),c&&c.firstElementChild&&c.firstElementChild.children[1].lastElementChild&&((i=(h=c.firstElementChild.children[1].lastElementChild).getAttribute("class"))&&-1===i.indexOf("e-smith-chart-focused")?i+=" e-smith-chart-focused":i||(i="e-smith-chart-focused"),h.setAttribute("class",i)),p&&((i=(h=p.firstElementChild).getAttribute("class"))&&-1===i.indexOf("e-smith-chart-focused")?i+=" e-smith-chart-focused":i||(i="e-smith-chart-focused"),h.setAttribute("class",i)),"Tab"===n.code)""!==this.previousTargetId&&(this.previousTargetId.indexOf("_Series")>-1&&-1===t.indexOf("_Series")?(u=r(this.element.id+"_svg_seriesCollections"),w=this.previousTargetId.indexOf("_Marker")>-1?r(this.element.id+"_svg_series"+this.currentSeriesIndex+"_Marker").children[this.currentPointIndex]:u.children[this.currentSeriesIndex],this.setTabIndex(w,document.getElementById(this.element.id+"_Series0_Points0_Marker0")),this.currentPointIndex=0,this.currentSeriesIndex=0):this.previousTargetId.indexOf("_svg_Legend")>-1&&-1===t.indexOf("_svg_Legend")&&(u=r(this.element.id+"legendItem_Group"),this.setTabIndex(u.children[this.currentLegendIndex],u.firstElementChild))),this.previousTargetId=t,f=this.series[0].tooltip.visible?"Tab":"";else if(n.code.indexOf("Arrow")>-1){if(n.preventDefault(),this.previousTargetId=t,t.indexOf("_svg_Legend")>-1)l=e.parentElement.children,l[this.currentLegendIndex].removeAttribute("tabindex"),this.currentLegendIndex+="ArrowUp"===n.code||"ArrowRight"===n.code?1:-1,this.currentLegendIndex=this.getActualIndex(this.currentLegendIndex,l.length),a=l[this.currentLegendIndex],this.focusChild(a),this.removeNavigationStyle(),this.setNavigationStyle(a.id),t=a.children[1].id;else if(t.indexOf("_Series")>-1){if(u=e.parentElement.parentElement.parentElement,v=n.target,e.removeAttribute("tabindex"),e.blur(),"ArrowRight"===n.code||"ArrowLeft"===n.code){for(o=[],s=0;s<u.children.length;s++)u.children[s].id.indexOf("_svg_seriesCollection")>-1&&o.push(+u.children[s].id.split("_svg_seriesCollection")[1]);this.currentSeriesIndex=o.indexOf(this.currentSeriesIndex)+("ArrowRight"===n.code?1:-1);this.currentSeriesIndex=o[this.getActualIndex(this.currentSeriesIndex,o.length)]}else this.currentPointIndex+="ArrowUp"===n.code?1:-1;t.indexOf("_Marker")>-1&&(this.currentPointIndex=this.getActualIndex(this.currentPointIndex,r(this.element.id+"_svg_series"+this.currentSeriesIndex+"_Marker").childElementCount),v=r(this.element.id+"_Series"+this.currentSeriesIndex+"_Points"+this.currentPointIndex+"_Marker"+this.currentPointIndex));t=this.focusChild(v);this.removeNavigationStyle();this.setNavigationStyle(t);f=this.series[this.currentSeriesIndex].tooltip.visible?"ArrowMove":""}}else("Enter"===n.code||"Space"===n.code)&&t.indexOf("_svg_Legend")>-1&&(t=t.indexOf("_svg_Legend")>-1?e.children[1].id:t,f="Enter");return""!==f&&this.smithchartKeyboardNavigations(n,t,f),"Tab"===n.code&&this.setNavigationStyle(t),!1},u.prototype.smithchartKeyboardNavigations=function(n,t,i){switch(this.isLegendClicked=!1,i){case"Tab":case"ArrowMove":if(t.indexOf("_Points")>-1){var r=+t.split("_Series")[1].split("_Points")[0],u=+t.split("_Series")[1].split("_Marker")[0].split("_Points")[1];this.tooltipRenderModule&&this.series[r].tooltip.visible&&this.tooltipRenderModule.createTooltip(this,n,u,r,this.series[r])}break;case"Enter":case"Space":t.indexOf("_LegendItemText")>-1&&(this.isLegendClicked=!0,this.delayRedraw=!0,this.smithchartOnClick(n),this.focusChild(document.getElementById(t).parentElement),this.setNavigationStyle(document.getElementById(t).parentElement.id));break;case"ESC":this.tooltipRenderModule.tooltipElement.fadeOut()}},u.prototype.setTabIndex=function(n,t){n&&n.removeAttribute("tabindex");t&&t.setAttribute("tabindex","0")},u.prototype.getActualIndex=function(n,t){return n>t-1?0:n<0?t-1:n},u.prototype.focusChild=function(n){n.setAttribute("tabindex","0");var t=n.getAttribute("class");return n.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-smith-chart-focused")?t="e-smith-chart-focused "+t:t||(t="e-smith-chart-focused"),n.setAttribute("class",t),n.focus(),n.id},u.prototype.smithchartOnResize=function(){var n=this;return this.animateSeries=!1,this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=+setTimeout(function(){n.render()},500),!1},u.prototype.requiredModules=function(){var t=[],n;for(this.legendSettings.visible&&t.push({member:"SmithchartLegend",args:[this]}),n=0;n<this.series.length;n++)if(this.series[n].tooltip.visible){t.push({member:"TooltipRender",args:[this]});break}return t},u.prototype.removeSvg=function(){if(ey(this.element.id+"_Secondary_Element"),this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&t.remove(this.svgObject)}},ui([t.Property("Impedance")],u.prototype,"renderType",void 0),ui([t.Property("")],u.prototype,"width",void 0),ui([t.Property("")],u.prototype,"height",void 0),ui([t.Property("Material")],u.prototype,"theme",void 0),ui([t.Complex({},ug)],u.prototype,"margin",void 0),ui([t.Complex({},df)],u.prototype,"font",void 0),ui([t.Complex({},fg)],u.prototype,"border",void 0),ui([t.Complex({},bn)],u.prototype,"title",void 0),ui([t.Collection([{}],utt)],u.prototype,"series",void 0),ui([t.Complex({},ln)],u.prototype,"legendSettings",void 0),ui([t.Complex({},oy)],u.prototype,"horizontalAxis",void 0),ui([t.Complex({},oy)],u.prototype,"radialAxis",void 0),ui([t.Property(null)],u.prototype,"background",void 0),ui([t.Property(10)],u.prototype,"elementSpacing",void 0),ui([t.Property(1)],u.prototype,"radius",void 0),ui([t.Event()],u.prototype,"beforePrint",void 0),ui([t.Event()],u.prototype,"animationComplete",void 0),ui([t.Event()],u.prototype,"load",void 0),ui([t.Event()],u.prototype,"loaded",void 0),ui([t.Event()],u.prototype,"legendRender",void 0),ui([t.Event()],u.prototype,"titleRender",void 0),ui([t.Event()],u.prototype,"subtitleRender",void 0),ui([t.Event()],u.prototype,"textRender",void 0),ui([t.Event()],u.prototype,"axisLabelRender",void 0),ui([t.Event()],u.prototype,"seriesRender",void 0),ui([t.Event()],u.prototype,"tooltipRender",void 0),ui([t.NotifyPropertyChanges],u)}(t.Component),hat=function(){function n(){}return n.prototype.smithchartMouseMove=function(n,t){var e,u,f,i;for("touchend"===t.type||"touchmove"===t.type?(u=(e=t).changedTouches[0].clientX,f=e.changedTouches[0].clientY,this.tooltipElement=void 0):(f=t.clientY,u=t.clientX),this.setMouseXY(n,u,f),i=0;i<n.series.length;i++){var r=n.series[i],o=i,s=new ag;if((s=this.closestPointXY(n,this.mouseX,this.mouseY,r,o)).location&&r.tooltip.visible&&"visible"===r.visibility){this.createTooltip(n,t,s.index,o,r);break}this.tooltipElement&&(this.tooltipElement.enable&&!r.tooltip.template&&(this.tooltipElement.enable=!1),this.tooltipElement.fadeOut())}return this.tooltipElement},n.prototype.setMouseXY=function(n,t,i){var f=document.getElementById(n.element.id+"_svg"),r,u;n.element&&f&&(r=n.element.getBoundingClientRect(),u=f.getBoundingClientRect(),this.mouseX=t-r.left-Math.max(u.left-r.left,0),this.mouseY=i-r.top-Math.max(u.top-r.top,0))},n.prototype.createTooltip=function(n,r,u,f,e){var o=this,s=e.points[u],l=s.resistance,h=s.reactance,a=s.tooltip?[s.tooltip]:null,v=[l+" : "+(n.theme.indexOf("Tailwind3")>-1?h:"<b>"+h+"<\/b>")],y={cancel:!1,name:"tooltipRender",text:a||v,headerText:n.theme.indexOf("Tailwind3")>-1?e.name:"<b>"+e.name+"<\/b>",template:e.tooltip.template,point:s},c=function(r){var c=n.series[f].marker.height/2,u=document.getElementById(n.element.id+"_smithchart_tooltip_div"),h;t.isNullOrUndefined(u)&&(u=t.createElement("div",{id:n.element.id+"_smithchart_tooltip_div",styles:"pointer-events: none; position: absolute;z-index:1;"}),document.getElementById(n.element.id+"_Secondary_Element").appendChild(u));o.tooltipElement=new i.Tooltip({enable:!0,header:r.headerText,content:r.text,border:e.tooltip.border,fill:e.tooltip.fill||n.themeStyle.tooltipFill,opacity:e.tooltip.opacity,data:s,template:r.template,location:{x:o.locationX+n.element.offsetLeft,y:o.locationY-c+n.element.offsetTop},shared:!1,areaBounds:new oh(n.bounds.x,n.bounds.y,n.bounds.width,n.bounds.height),palette:[e.fill||n.seriesColors[f%n.seriesColors.length]],shapes:["Circle"],availableSize:n.availableSize,theme:n.theme});o.tooltipElement.opacity=n.themeStyle.tooltipFillOpacity||o.tooltipElement.opacity;o.tooltipElement.textStyle.fontFamily=n.themeStyle.fontFamily||"Roboto, Segoe UI, Noto, Sans-serif";o.tooltipElement.textStyle.size=n.themeStyle.tooltipFontSize||"13px";o.tooltipElement.textStyle.color=n.themeStyle.tooltipBoldLabel||o.tooltipElement.textStyle.color;o.tooltipElement.appendTo(u);h=document.getElementById(n.element.id+"_smithchart_tooltip_div_Trackball_0");h&&h.setAttribute("role","img")};c.bind(this,n);n.trigger("tooltipRender",y,c)},n.prototype.closestPointXY=function(n,t,i,r,u){for(var o,f,c,s,h,e=0;e<r.points.length;e++)if(f=n.seriesrender.getLocation(u,e),this.locationX=f.x,this.locationY=f.y,o=e,s=t-f.x,h=i-f.y,Math.abs(Math.sqrt(s*s+h*h))<r.marker.width){c=f;o=e;break}return{location:c,index:o}},n.prototype.getModuleName=function(){return"TooltipRender"},n.prototype.destroy=function(){},n}(),cat=function(){function n(){this.legendSeries=[]}return n.prototype.renderLegend=function(n){this._drawLegend(n)},n.prototype.calculateLegendBounds=function(n){var r,l;this.legendSeries=[];var p,b,u=n.legendSettings,k=u.height,d=u.width,e=u.itemPadding>0?u.itemPadding:0,o=u.position.toLowerCase(),tt=u.title.textStyle,a=0,v=0,g=0,it=n.availableSize.width-(4*n.elementSpacing-2*u.border.width+2*n.border.width),t=u.rowCount,i=u.columnCount,nt=er(n.legendSettings.title.text,tt,n.themeStyle.legendTitleFont),s=0,y=0,f=0,c=0,w=0,h=n.series.length;if(n.legendSettings.visible&&0!==h){for("bottom"===o||"top"===o||"custom"===o?(t&&i&&t<=i||null==t&&null!=i?t=h/i:null==t&&null==i&&(t=1),t&&(p=Math.ceil(h/t))):(t&&i&&t<=i||null!=t&&null==i?i=h/t:null==t&&null==i&&(i=1),i&&(p=i)),r=0;r<h;r++)this.legendSeries.push({text:n.series[r].name?n.series[r].name:"series"+r,seriesIndex:r,shape:n.legendSettings.shape,fill:n.series[r].fill||n.seriesColors[r%n.seriesColors.length],bounds:null}),l=this._getLegendSize(n,this.legendSeries[r]),a=Math.max(l.width,a),v=Math.max(l.height,v),this.legendSeries[r].bounds={width:a,height:v},w+=1,f=f+a+e,c=Math.max(v,c),"top"!==o&&"bottom"!==o&&"custom"!==o||f>it&&(f-=l.width+e,s=Math.max(s,f),f=l.width+e,y=y+c+e),w!==p&&r!==h-1||(s=Math.max(s,f),g=y=y+c+e,w=0,c=0,f=0);b={x:0,y:0,width:nt.width>s-e?nt.width+20+e:s+20-2*n.border.width,height:g+n.elementSpacing}}return this.legendActualBounds=b,null!=d&&(this.legendActualBounds.width=d),null!=k&&(this.legendActualBounds.height=k),this.legendActualBounds},n.prototype._getLegendSize=function(n,t){var i=n.legendSettings,u=i.itemStyle.width,f=i.itemStyle.height,r=er(t.text,i.textStyle,n.themeStyle.legendLabelFont);return{width:u+r.width+i.shapePadding,height:Math.max(f,r.height)}},n.prototype._drawLegend=function(n){var k,v,i=n.legendSettings,f=i.position.toLowerCase(),d=i.alignment,t=this.legendActualBounds,w=0,nt=n.title.font?n.title.font:n.title.textStyle,tt=er(n.title.text,nt,n.themeStyle.legendLabelFont).height,it=er(n.title.subtitle.text,n.title.subtitle.textStyle,n.themeStyle.legendLabelFont).height,r=n.elementSpacing,g=tt+it+r+n.margin.top,c=i.itemPadding>0?i.itemPadding:0,rt=n.availableSize.width,ut=n.availableSize.height,l=i.border.width,ft=0,b=er(i.title.text,i.title.textStyle,n.themeStyle.legendLabelFont).height,s=n.border.width,a=rt-2*s,y=ut-2*s,p,e,h,o,u;if(t.height+=b,"custom"!==f){switch(f){case"bottom":t.y=y-(t.height+l+r);break;case"top":t.y=s+g;break;case"right":t.x=a-t.width-2*r;break;case"left":t.x=s+2*r}if("left"===f||"right"===f)switch(d){case"Center":t.y=y/2-(t.height+2*l)/2+r/2;break;case"Near":t.y=s+2*r+g;break;case"Far":t.y=y-(t.height+l)-2*r}else switch(d){case"Center":t.x=a/2-(t.width+2*l)/2+r/2;break;case"Near":t.x=s+2*r;break;case"Far":t.x=a-(t.width+l)-2*r}}else t.y=i.location.y<y?i.location.y:0,t.x=i.location.x<a?i.location.x:0;if("bottom"===f||"top"===f)for(p=0;p<this.legendSeries.length;p++)if((ft+=this.legendSeries[p].bounds.width+c)>a){t.x=a/2-(t.width+2*l)/2+r/2;break}for(e=n.renderer.createGroup({id:n.element.id+"_legend_group"}),n.svgObject.appendChild(e),this.legendItemGroup=n.renderer.createGroup({id:n.element.id+"legendItem_Group"}),h=k=r,o=v=r,""!==i.title.text&&i.title.visible&&(e.appendChild(this.drawLegendTitle(n,i,t,e)),o=v=r+b),u=0;u<this.legendSeries.length;u++)!(i.rowCount<i.columnCount||i.rowCount===i.columnCount)||"top"!==f&&"bottom"!==f&&"custom"!==f?(o+this.legendSeries[u].bounds.height+c+b+s>t.height+v&&(o=v,h+=w+c),this.legendGroup=this.drawLegendItem(n,i,this.legendSeries[u],u,h,o),e.appendChild(this.legendGroup),o+=this.legendSeries[u].bounds.height+c,w=Math.max(w,this.legendSeries[u].bounds.width)):(h+this.legendSeries[u].bounds.width>t.width+k&&(h=r,o+=this.legendSeries[u].bounds.height+c),this.legendGroup=this.drawLegendItem(n,i,this.legendSeries[u],u,h,o),e.appendChild(this.legendGroup),h+=this.legendSeries[u].bounds.width+c);e.setAttribute("transform","translate("+t.x.toString()+","+t.y.toString()+")");this.drawLegendBorder(e,n,i,t)},n.prototype.drawLegendBorder=function(n,t,i,r){var u=new rl(t.element.id+"_svg_legendRect","none",i.border,1,new oh(0,0,r.width,r.height));n.appendChild(t.renderer.drawRectangle(u))},n.prototype.drawLegendTitle=function(n,t,i,r){var h=n.elementSpacing,s=er(t.title.text,t.title.textStyle,n.themeStyle.legendLabelFont),f=s.width,c=s.height,l=t.title.textAlignment,u=0,e=i.width,a=h+c/2,o;switch(l){case"Far":u=e-f-u;break;case"Center":u=e/2-f/2}return u<0&&(u=0,e=f),e<f+u&&(e=f+u),o=oo(new le(n.element.id+"_LegendTitleText",u,a,"start",t.title.text),t.title.textStyle,t.title.textStyle.color||n.themeStyle.legendTitleFont.color,r,n.themeStyle.legendTitleFont),o.setAttribute("aria-label",t.title.description||t.title.text),o},n.prototype.drawLegendItem=function(n,t,i,r,u,f){var l=this,o=t.itemStyle,h=er(i.text,t.textStyle,n.themeStyle.legendLabelFont).height,s={x:u+o.width/2,y:f+(h>o.height?h:o.height)/2},e=n.renderer.createGroup({id:n.element.id+"_svg_Legend"+r.toString()}),a,c;return e.style.cursor=t.toggleVisibility?"pointer":"default",e.setAttribute("tabindex",0===r?"0":""),a={text:i.text,fill:i.fill,shape:i.shape,name:ett,cancel:!1},c=function(u){var c,f,a;u.cancel||(c=l.drawLegendShape(n,i,s.x,s.y,r,t,u),e.appendChild(c),f=new le(n.element.id+"_LegendItemText"+r.toString(),s.x+o.width/2+t.shapePadding,s.y+h/4,"start",u.text),t.textStyle.fontFamily=t.textStyle.fontFamily||n.themeStyle.legendLabelFont.fontFamily,t.textStyle.size=t.textStyle.size||n.themeStyle.legendLabelFont.size,a=oo(f,t.textStyle,t.textStyle.color||n.themeStyle.legendLabelFont.color,e,n.themeStyle.legendLabelFont),e.setAttribute("aria-label",t.description||"Show "+f.text),e.setAttribute("role","button"),e.appendChild(a),l.legendItemGroup.appendChild(e))},c.bind(this),n.trigger(ett,a,c),this.legendItemGroup},n.prototype.drawLegendShape=function(n,t,i,r,u,f,e){var v,g,c,s,w=f.itemStyle,l=w.width,o=w.height,a=i+-l/2,h={color:w.border.color,width:w.border.width},p="visible"===n.series[u].visibility?e.fill:"grey",nt=e.shape.toLowerCase(),b=Math.sqrt(o*o+l*l)/2,y,k,d;switch(nt){case"circle":g=new un(n.element.id+"_svg_LegendItemShape"+u.toString(),p,h,1,i,r,b,null);v=n.renderer.drawCircle(g);break;case"rectangle":s="M "+a+" "+(r+-o/2)+" L "+(l/2+i)+" "+(r+-o/2)+" L "+(i+l/2)+" "+(r+o/2)+" L "+a+" "+(r+o/2)+" L "+a+" "+(r+-o/2)+" z";c=new fr(n.element.id+"_svg_LegendItemShape"+u.toString(),p,h.width,h.color,1,"",s);v=n.renderer.drawPath(c);break;case"diamond":s="M "+a+" "+r+" L "+i+" "+(r+-o/2)+" L "+(l/2+i)+" "+r+" L "+i+" "+(r+o/2)+" L "+a+" "+r+" z";c=new fr(n.element.id+"_svg_LegendItemShape"+u.toString(),p,h.width,h.color,1,"",s);v=n.renderer.drawPath(c);break;case"pentagon":for(y=0;y<=5;y++)k=b*Math.cos(Math.PI/180*72*y),d=b*Math.sin(Math.PI/180*72*y),s=0===y?"M "+(k+i)+" "+(r+d)+" ":s.concat("L "+(i+k)+" "+(r+d)+" ");s=s.concat("Z");c=new fr(n.element.id+"_svg_LegendItemShape"+u.toString(),p,h.width,h.color,1,"",s);v=n.renderer.drawPath(c);break;case"triangle":s="M "+a+" "+(o/2+r)+" L "+i+" "+(r+-o/2)+" L "+(i+l/2)+" "+(r+o/2)+" L "+a+" "+(r+o/2)+" Z";c=new fr(n.element.id+"_svg_LegendItemShape"+u.toString(),p,h.width,h.color,1,"",s);v=n.renderer.drawPath(c)}return v},n.prototype.getModuleName=function(){return"SmithchartLegend"},n.prototype.destroy=function(){},n}(),cu=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),d=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},ss=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cu(i,n),d([t.Property("")],i.prototype,"color",void 0),d([t.Property(0)],i.prototype,"width",void 0),i}(t.ChildProperty),hy=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cu(i,n),d([t.Property(null)],i.prototype,"size",void 0),d([t.Property(null)],i.prototype,"color",void 0),d([t.Property("Roboto, Segoe UI, Noto, Sans-serif")],i.prototype,"fontFamily",void 0),d([t.Property(null)],i.prototype,"fontWeight",void 0),d([t.Property(null)],i.prototype,"fontStyle",void 0),d([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),att=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cu(i,n),d([t.Property(!1)],i.prototype,"visible",void 0),d([t.Property(null)],i.prototype,"color",void 0),d([t.Property(1)],i.prototype,"width",void 0),i}(t.ChildProperty),vtt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cu(i,n),d([t.Property(!1)],i.prototype,"visible",void 0),d([t.Property("")],i.prototype,"fill",void 0),d([t.Property("")],i.prototype,"template",void 0),d([t.Property("")],i.prototype,"format",void 0),d([t.Complex({color:null,width:null},ss)],i.prototype,"border",void 0),d([t.Complex({size:"12px",fontWeight:null,fontStyle:"Normal",fontFamily:null},hy)],i.prototype,"textStyle",void 0),d([t.Complex({},att)],i.prototype,"trackLineSettings",void 0),i}(t.ChildProperty),ytt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cu(i,n),d([t.Property("transparent")],i.prototype,"background",void 0),d([t.Complex({},ss)],i.prototype,"border",void 0),i}(t.ChildProperty),ptt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cu(i,n),d([t.Property(!1)],i.prototype,"visible",void 0),d([t.Property(null)],i.prototype,"color",void 0),d([t.Property("")],i.prototype,"dashArray",void 0),d([t.Property(1)],i.prototype,"width",void 0),d([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),wtt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cu(i,n),d([t.Property(null)],i.prototype,"startRange",void 0),d([t.Property(null)],i.prototype,"endRange",void 0),d([t.Property(null)],i.prototype,"color",void 0),d([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),btt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cu(i,n),d([t.Property(null)],i.prototype,"minX",void 0),d([t.Property(null)],i.prototype,"maxX",void 0),d([t.Property(null)],i.prototype,"minY",void 0),d([t.Property(null)],i.prototype,"maxY",void 0),d([t.Property(0)],i.prototype,"value",void 0),d([t.Complex({},ptt)],i.prototype,"lineSettings",void 0),i}(t.ChildProperty),ktt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cu(i,n),d([t.Property(5)],i.prototype,"left",void 0),d([t.Property(5)],i.prototype,"right",void 0),d([t.Property(5)],i.prototype,"bottom",void 0),d([t.Property(5)],i.prototype,"top",void 0),i}(t.ChildProperty),dtt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cu(i,n),d([t.Property([])],i.prototype,"visible",void 0),d([t.Property(1)],i.prototype,"opacity",void 0),d([t.Property(8)],i.prototype,"size",void 0),d([t.Property("#00bdae")],i.prototype,"fill",void 0),d([t.Complex({width:1},ss)],i.prototype,"border",void 0),i}(t.ChildProperty),gtt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cu(i,n),d([t.Property(0)],i.prototype,"x",void 0),d([t.Property(0)],i.prototype,"y",void 0),i}(t.ChildProperty),nit=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cu(i,n),d([t.Property([])],i.prototype,"visible",void 0),d([t.Property(1)],i.prototype,"opacity",void 0),d([t.Property("transparent")],i.prototype,"fill",void 0),d([t.Property("")],i.prototype,"format",void 0),d([t.Complex({color:"transparent",width:0},ss)],i.prototype,"border",void 0),d([t.Complex({size:null,fontWeight:null,fontStyle:null,fontFamily:null},hy)],i.prototype,"textStyle",void 0),d([t.Complex({},gtt)],i.prototype,"offset",void 0),d([t.Property("None")],i.prototype,"edgeLabelMode",void 0),i}(t.ChildProperty),tit=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cy=function(){return function(n,t){this.width=n;this.height=t}}();var gf=function(){return function(n,t,i,r){this.x=n;this.y=t;this.width=i;this.height=r}}(),hs=function(){return function(n,t,i,r,u,f,e){this.id=n;this.fill=t;this.opacity=u;this["stroke-width"]=i;this.stroke=r;this.d=e;this["stroke-dasharray"]=f}}(),sh=function(n){function t(t,i,r,u,f,e,o,s,h){void 0===e&&(e=0);void 0===o&&(o=0);void 0===s&&(s=0);void 0===h&&(h=0);var c=n.call(this,t,i,r.width,r.color,u)||this;return c.rect=f,c.topLeft=e,c.topRight=o,c.bottomLeft=s,c.bottomRight=h,c}return tit(t,n),t}(hs),lat=function(n){function t(t,i,r,u,f,e,o,s){var h=n.call(this,t,i,r.width,r.color,u)||this;return h.cy=e,h.cx=f,h.r=o,h["stroke-dasharray"]=s,h}return tit(t,n),t}(hs);fit=function(){return function(n,t,i,r,u,f,e){void 0===e&&(e="");this.transform="";this.baseLine="auto";this.id=n;this.x=t;this.y=i;this.anchor=r;this.text=u;this.transform=e;this.baseLine=f}}();var aat=function(){function n(n){this.sparkline=n}return n.prototype.processData=function(){var n=this.sparkline.dataSource;!t.isNullOrUndefined(n)&&n.length&&(isNaN(this.sparkline.dataSource[0])&&"Numeric"!==this.sparkline.valueType?this["process"+this.sparkline.valueType]():(n=this.sparkline.enableRtl?n.reverse():n,this.sparkline.sparklineData=n),this.axisCalculation())},n.prototype.processDataManager=function(){var t,i,n=this;this.sparkline.dataSource instanceof gt.DataManager?(t=this.sparkline.dataSource,i=this.sparkline.query instanceof gt.Query?this.sparkline.query:new gt.Query,t.executeQuery(i).then(function(t){n.sparkline.setProperties({dataSource:t.result},!0);n.sparkline.sparklineData=n.sparkline.dataSource;n.sparkline.processSparklineData()})):this.sparkline.processSparklineData()},n.prototype.processCategory=function(n,t,i){var f=this,u,r;void 0===n&&(n=this.sparkline.dataSource);void 0===t&&(t=this.sparkline.xName);void 0===i&&(i=this.sparkline.yName);u=[];r=[];n.forEach(function(n){-1===r.indexOf(n[t])&&r.push(n[t]);var e={};e[f.sparkline.xName]=r.indexOf(n[t]);e[f.sparkline.yName]=n[i];u.push(e)});this.sparkline.sparklineData=u},n.prototype.processDateTime=function(n,t,i){void 0===n&&(n=this.sparkline.dataSource);void 0===t&&(t=this.sparkline.xName);void 0===i&&(i=this.sparkline.yName);var r=[];n.forEach(function(n){var u={};u[t]=n[t].getTime();u[i]=n[i];r.push(u)});this.sparkline.sparklineData=r},n.prototype.renderSeries=function(){var t=this,n=this.sparkline,r,i;this.clipId=n.element.id+"_sparkline_clip_path";this.drawAxis();r={name:"seriesRendering",cancel:!1,lineWidth:n.lineWidth,border:n.border,fill:n.fill,sparkline:n};i=function(i){if(t.visiblePoints&&!i.cancel){if("Pie"!==n.type&&"WinLoss"!==n.type&&n.rangeBandSettings.length){for(var u=t.sparkline.renderer.createGroup({id:t.sparkline.element.id+"_sparkline_rangeband_g"}),r=0;r<n.rangeBandSettings.length;r++)(n.axisSettings.minY<=n.rangeBandSettings[r].startRange||n.axisSettings.maxY>=n.rangeBandSettings[r].endRange)&&t.rangeBand(n.rangeBandSettings[r],u,r);t.sparkline.svgObject.appendChild(u)}t["render"+n.type](t.visiblePoints,i);t.renderMarker(t.visiblePoints);t.renderLabel(t.visiblePoints)}};i.bind(this);n.trigger("seriesRendering",r,i)},n.prototype.rangeBand=function(n,t,i){var r=this.sparkline,u=r.availableSize.height-2*r.padding.top,o=r.availableSize.width-2*r.padding.left,c=n.startRange,l=n.endRange,f=u-u/this.unitY*(c-this.min)+r.padding.top,e=u-u/this.unitY*(l-this.min)+r.padding.top,a=n.color||this.sparkline.sparkTheme.rangeBandColor,s,h;e>u+r.padding.top?e=u+r.padding.top:e<0+r.padding.top&&(e=0+r.padding.top);f>u+r.padding.top?f=u+r.padding.top:f<0+r.padding.top&&(f=0+r.padding.top);s="M "+r.padding.left+" "+f+" L "+(o+r.padding.left)+" "+f+" L "+(o+r.padding.left)+" "+e+" L "+r.padding.left+" "+e+" Z ";h={id:r.element.id+"_rangeBand_"+i,fill:a,opacity:n.opacity,stroke:"transparent","stroke-width":r.lineWidth,d:s,"stroke-dasharray":""};cs(this.sparkline,h,t)},n.prototype.renderLine=function(n,t){var u=this.sparkline,o=this.sparkline.renderer.createGroup({id:u.element.id+"_sparkline_g","clip-path":"url(#"+this.clipId+")"}),f=this.sparkline.fill;f="#00bdae"===this.sparkline.fill&&"Bootstrap4"===this.sparkline.theme?this.sparkline.sparkTheme.axisLineColor:f;for(var r=new hs(u.element.id+"_sparkline_line","transparent",t.lineWidth,f,u.opacity),e="",i=0,s=n.length;i<s;i++)0===i&&(e="M "+n[0].x+" "+n[i].y+" "),e+="L "+n[i].x+" "+n[i].y+" ";r.d=e;r["aria-label"]="Line series with"+n.length+"data points";r.tabindex="0";cs(this.sparkline,r,o);this.sparkline.svgObject.appendChild(o)},n.prototype.renderPie=function(n,i){var e,h,k,d,r=this.sparkline,g=r.availableSize.height-(r.padding.top+r.padding.bottom),nt=r.availableSize.width-(r.padding.left+r.padding.right),f=g<=nt?g/2:nt/2,a=r.availableSize.width/2,v=r.availableSize.height/2,o=0,tt=i.border.color,st=r.opacity,it=i.border.width,rt=r.palette.length?r.palette:ly(this.sparkline.theme),ut=this.sparkline.renderer.createGroup({id:r.element.id+"_sparkline_g"}),ht=t.extend([],[],n),p,c,l,w,b;(r.highPointColor||r.lowPointColor)&&(p=ht.map(function(n){return n.yVal}),k=Math.min.apply(null,p),d=Math.max.apply(null,p));this.negativePointIndexes=[];for(var u=0,ft=90,et=void 0,ot=void 0;u<n.length;u++){et=(ft+=o)+(o=360===(o=n[u].degree)?o-.001:o);e=(ft-90)*Math.PI/180;h=(et-90)*Math.PI/180;n[u].stAng=e;n[u].endAng=h;ot=o<180?"0":"1";var y=n[u].coordinates={sX:a+f*Math.cos(e),sY:v+f*Math.sin(e),eX:a+f*Math.cos(h),eY:v+f*Math.sin(h)},ct="M "+a+" "+v+" L "+y.eX+" "+y.eY+" A "+f+" "+f+" 0 "+ot+",0 "+y.sX+" "+y.sY+" Z",s={id:r.element.id+"_sparkline_pie_"+u,opacity:st,fill:rt[u%rt.length],stroke:tt,"stroke-width":it,d:ct,"stroke-dasharray":""};this.getPieSpecialPoint(n[u],r,s,u,d,k,n.length);c=this.triggerPointRender("pointRendering",u,s.fill,{color:tt,width:it});(s.fill=c.fill,s.stroke=c.border.color,s["stroke-width"]=c.border.width,c.cancel)||(l=cs(this.sparkline,s,ut),l.setAttribute("role","img"),l.setAttribute("aria-label",r.dataSource[u][r.xName]+" : "+n[u].yVal),l.setAttribute("tabindex",0===u?"0":"-1"),l.style.outline="none");w=h-e;b={x:a+f/2*Math.cos(e+w/2),y:v+f/2*Math.sin(e+w/2)};n[u].location.x=b.x;n[u].location.y=b.y}this.sparkline.svgObject.appendChild(ut)},n.prototype.getPieSpecialPoint=function(n,t,i,r,u,f,e){n.yVal<0&&t.negativePointColor&&(i.fill=t.negativePointColor,this.negativePointIndexes.push(r));0===r&&t.startPointColor?(i.fill=t.startPointColor,this.startPointIndex=r):r===e-1&&t.endPointColor&&(i.fill=t.endPointColor,this.endPointIndex=r);n.yVal===u&&t.highPointColor?(i.fill=t.highPointColor,this.highPointIndex=r):n.yVal===f&&t.lowPointColor&&(i.fill=t.lowPointColor,this.lowPointIndex=r)},n.prototype.renderArea=function(n,t){for(var r=this.sparkline,e=this.sparkline.renderer.createGroup({id:r.element.id+"_sparkline_g","clip-path":"url(#"+this.clipId+")"}),u=new hs(r.element.id+"_sparkline_area",t.fill,0,"transparent",r.opacity),f="",o="",i=0,s=n.length;i<s;i++)0!==i?o+="L "+n[i].x+" "+n[i].y+" ":(f="M "+n[i].x+" "+this.axisHeight+" ",o="M "+n[i].x+" "+n[i].y+" "),f+="L "+n[i].x+" "+n[i].y+" ",i===s-1&&(f+="L "+n[i].x+" "+this.axisHeight+" Z");u.d=f;u["aria-label"]="Area series with"+n.length+"data points";cs(this.sparkline,u,e);u=new hs(r.element.id+"_sparkline_area_str","transparent",t.border.width,t.border.color,r.opacity,"",o);cs(this.sparkline,u,e);this.sparkline.svgObject.appendChild(e)},n.prototype.renderColumn=function(n,i){var e,o,y=this,f=this.sparkline,p=t.extend([],[],n),s=this.sparkline.renderer.createGroup({id:f.element.id+"_sparkline_g","clip-path":"url(#"+this.clipId+")"}),h;(this.sparkline.highPointColor||this.sparkline.lowPointColor)&&(h=p.map(function(n){return n.markerPosition}),o=Math.min.apply(null,h),e=Math.max.apply(null,h));var r,c=f.element.id+"_sparkline_column_",u=new sh(c,"",i.border,f.opacity,null),l=n.length;this.negativePointIndexes=[];for(var w=f.palette.length?f.palette:ly(this.sparkline.theme),b=function(t){r=n[t];u.id=c+t;u.fill="#00bdae"!==f.fill?f.fill:w[0];u.rect=new gf(r.x,r.y,r.width,r.height);a.getSpecialPoint(!0,r,f,u,t,o,e,l);r.location.y=r.markerPosition<=a.axisHeight?r.y:r.y+r.height;r.location.x=r.x+r.width/2;u.stroke=i.border.color?i.border.color:u.fill;var h={name:"pointRendering",cancel:!1,pointIndex:t,fill:u.fill,border:{color:u.stroke,width:i.border.width}};a.sparkline.trigger("pointRendering",h,function(){if(r=n[t],u.id=c+t,u.rect=new gf(r.x,r.y,r.width,r.height),y.getSpecialPoint(!0,r,f,u,t,o,e,l),u.fill=h.fill,u.stroke=h.border.color,r.location.y=r.markerPosition<=y.axisHeight?r.y:r.y+r.height,u["stroke-width"]=h.border.width,r.location.x=r.x+r.width/2,!h.cancel){var i=hh(f,u,s);i.setAttribute("role","img");i.setAttribute("aria-label",f.dataSource[t][f.xName]+" : "+n[t].yVal);i.setAttribute("tabindex",0===t?"0":"-1");i.style.outline="none";s.appendChild(i)}})},a=this,v=0;v<l;v++)b(v);this.sparkline.svgObject.appendChild(s)},n.prototype.renderWinLoss=function(n,t){for(var e,o,i,r=this.sparkline,s=this.sparkline.renderer.createGroup({id:r.element.id+"_sparkline_g","clip-path":"url(#"+this.clipId+")"}),h=r.element.id+"_sparkline_winloss_",u=new sh(h,"",t.border,r.opacity,null),a=n.length,c=r.palette.length,l=r.palette.length?r.palette:ly(this.sparkline.theme),f=0;f<a;f++)i=n[f],u.id=h+f,u.fill=c?r.palette[f%c]:i.yVal===this.axisValue?this.sparkline.tiePointColor||"#a216f3":i.yVal>this.axisValue?t.fill||l[f%l.length]:r.negativePointColor||"#e20f07",u.stroke=t.border.color?t.border.color:u.fill,u.rect=new gf(i.x,i.y,i.width,i.height),i.location.x=i.x+i.width/2,i.location.y=i.yVal>=this.axisValue?i.y:i.y+i.height,e=this.triggerPointRender("pointRendering",f,u.fill,{color:u.stroke,width:t.border.width}),(u.fill=e.fill,u.stroke=e.border.color,u["stroke-width"]=e.border.width,e.cancel)||(o=hh(r,u,s),o.setAttribute("role","img"),o.setAttribute("aria-label",r.dataSource[f][r.xName]+" : "+n[f].yVal),o.setAttribute("tabindex",0===f?"0":"-1"),o.style.outline="none");this.sparkline.svgObject.appendChild(s)},n.prototype.renderMarker=function(n){var l=this,u=this.sparkline,r=u.markerSettings,s;if("Pie"!==u.type&&"WinLoss"!==u.type&&r.visible.length){var f,a,v,w=t.extend([],[],n),o=this.sparkline.renderer.createGroup({id:u.element.id+"_sparkline_marker_g","clip-path":"url(#"+this.clipId+")"}),y=u.element.id+"_sparkline_marker_",i=new lat("",r.fill,r.border,r.opacity,0,0,r.size/2,""),e=r.visible.join();(e.toLowerCase().indexOf("high")>-1||e.toLowerCase().indexOf("low")>-1)&&(s=w.map(function(n){return n.markerPosition}),a=Math.min.apply(null,s),v=Math.max.apply(null,s));this.negativePointIndexes=[];for(var b=function(t,s){var p,c;f=n[t];i.id=y+t;i.cx=f.location.x;i.cy=f.location.y;i.fill=r.fill;p=e.toLowerCase().indexOf("all")>-1;p=h.getSpecialPoint(p,f,u,i,t,a,v,s,e.toLowerCase());i.stroke=r.border.color||i.fill;c={name:"markerRendering",cancel:!1,border:{color:i.stroke,width:r.border.width},fill:i.fill,pointIndex:t,sparkline:h.sparkline,x:i.cx,y:i.cy,size:r.size};h.sparkline.trigger("markerRendering",c,function(){if(p&&!c.cancel){i.id=y+t;i.cx=c.x;i.cy=c.y;i.fill=c.fill;i.stroke=c.border.color;i["stroke-width"]=c.border.width;i.r=c.size/2;var r=function(n,t,i){return ay(n.renderer.drawCircle(t),i)}(u,i,o);r.setAttribute("role","img");r.setAttribute("aria-label",u.dataSource[t][u.xName]+" : "+n[t].yVal);(l.sparkline.type.indexOf("Line")>-1||l.sparkline.type.indexOf("Area")>-1)&&(r.setAttribute("tabindex",0===t?"0":"-1"),r.style.outline="none");o.appendChild(r)}})},h=this,c=0,p=n.length;c<p;c++)b(c,p);this.sparkline.svgObject.appendChild(o)}},n.prototype.getSpecialPoint=function(n,t,i,r,u,f,e,o,s){return void 0===s&&(s=""),t.markerPosition>this.axisHeight&&(r.fill=i.negativePointColor||r.fill,this.negativePointIndexes.push(u),n=n||s.indexOf("negative")>-1),0===u?(r.fill=i.startPointColor||r.fill,this.startPointIndex=u,n=n||s.indexOf("start")>-1):u===o-1&&(r.fill=i.endPointColor||r.fill,this.endPointIndex=u,n=n||s.indexOf("end")>-1),t.markerPosition===f?(r.fill=i.highPointColor||r.fill,this.highPointIndex=u,n=n||s.indexOf("high")>-1):t.markerPosition===e&&(r.fill=i.lowPointColor||r.fill,this.lowPointIndex=u,n=n||s.indexOf("low")>-1),s.indexOf("none")>-1&&(n=!1),n},n.prototype.renderLabel=function(n){var c=this,o=this.sparkline,r=o.dataLabelSettings,g=r.textStyle.color||o.sparkTheme.dataLabelColor;if("WinLoss"!==o.type&&r.visible.length){var a,f,nt=t.extend([],[],n),v=o.element.id+"_sparkline_label_",y=this.sparkline.renderer.createGroup({id:o.element.id+"_sparkline_label_g",style:"pointer-events: none;"});y.setAttribute("aria-hidden","true");for(var p,tt=v+"text_",it=v+"rect_",u=new fit("",0,0,"middle","","middle"),w=r.textStyle,k=nt.map(function(n){return n.markerPosition}),rt=Math.min.apply(null,k),ut=Math.max.apply(null,k),s="transparent"!==r.fill||r.border.width?2:0,e=uit("sparkline_measure_text",w,this.sparkline.sparkTheme.dataLabelFont),h=new sh("",r.fill,r.border,r.opacity,null),ft=function(t,b){f=n[t];u.id=tt+t;u.x=f.location.x+r.offset.x;u.y=("Pie"===o.type?f.location.y:f.markerPosition>l.axisHeight?f.location.y+e.height/2+1+2+s:f.location.y-e.height/2-1-s)+r.offset.y;u.text=""!==r.format?l.formatter(r.format,l.sparkline.dataSource[t]):f.yVal.toString();var k={name:"dataLabelRendering",cancel:!1,border:r.border,fill:r.fill,pointIndex:t,sparkline:l.sparkline,x:u.x,y:u.y,text:u.text,color:g};l.sparkline.trigger("dataLabelRendering",k,function(){e=uit(k.text,w,c.sparkline.sparkTheme.dataLabelFont);u.text=k.text;var n=r.visible.join().toLowerCase().indexOf("all")>-1;n=c.getLabelVisible(n,f,t,r,b,rt,ut);p=c.arrangeLabelPosition(r.edgeLabelMode,n,k.x,t,b,e,s);n&&!k.cancel&&p.render&&(h.id=it+t,h.fill=k.fill,h.stroke=k.border.color,h["stroke-width"]=k.border.width,u.y=k.y,u.x=p.x,h.rect=new gf(u.x-(e.width/2+s),u.y-s-e.height/1.75,e.width+2*s,e.height+2*s),a=c.sparkline.renderer.createGroup({id:v+"g"+t}),hh(o,h,a),function(n,t,r,u,f){var o={id:n.id,x:n.x,y:n.y,transform:n.transform,opacity:t.opacity,fill:r,"font-family":t.fontFamily||f.fontFamily,"font-weight":t.fontWeight||f.fontWeight,"font-size":t.size||f.size,"font-style":t.fontStyle||f.fontStyle,"text-anchor":n.anchor,"dominant-baseline":n.baseLine},e=new i.SvgRenderer("").createText(o,n.text);e.style["user-select"]="none";e.style["-moz-user-select"]="none";e.style["-webkit-touch-callout"]="none";e.style["-webkit-user-select"]="none";e.style["-khtml-user-select"]="none";e.style["-ms-user-select"]="none";e.style["-o-user-select"]="none";u.appendChild(e)}(u,w,k.color,a,c.sparkline.sparkTheme.dataLabelFont),y.appendChild(a))})},l=this,b=0,d=n.length;b<d;b++)ft(b,d);this.sparkline.svgObject.appendChild(y)}},n.prototype.arrangeLabelPosition=function(n,t,i,r,u,f,e){return"None"===n||(0===r&&i-f.width/2-e<=0?"Hide"===n?t=!1:i=this.sparkline.padding.left+e+f.width/2:r===u-1&&i+f.width/2+e>=this.sparkline.availableSize.width&&("Hide"===n?t=!1:i-=f.width/2+e)),{x:i,render:t}},n.prototype.getLabelVisible=function(n,t,i,r,u,f,e){var o=r.visible.join().toLowerCase();return t.markerPosition>this.axisHeight&&(n=n||o.indexOf("negative")>-1),0===i?n=n||o.indexOf("start")>-1:i===u-1&&(n=n||o.indexOf("end")>-1),t.markerPosition===f?n=n||o.indexOf("high")>-1:t.markerPosition===e&&(n=n||o.indexOf("low")>-1),r.visible.join().toLowerCase().indexOf("none")>-1&&(n=!1),n},n.prototype.formatter=function(n,i){var r,u,f;if(t.isNullOrUndefined(n))return null;for(r=0,u=Object.keys(i);r<u.length;r++)f=u[r],n=n.split("${"+f+"}").join(i[f]);return n},n.prototype.axisCalculation=function(){this.findRanges(this.sparkline.sparklineData)},n.prototype.getInterval=function(n,i){var u=1,e=n[0][i],o=t.isNullOrUndefined(n[1])?void 0:n[1][i],f,r;return t.isNullOrUndefined(e)||t.isNullOrUndefined(o)||(f=t.extend([],n),r=[],f.forEach(function(n){t.isNullOrUndefined(n[i])||r.push(n)}),r.sort(function(n,r){return t.isNullOrUndefined(n[i])||t.isNullOrUndefined(r[i])?0:n[i]-r[i]}),u=(r=this.sparkline.enableRtl?r.reverse():r)[1][i]-r[0][i]),u},n.prototype.getPaddingInterval=function(n,t,i,r){for(var e,h=this.sparkline.availableSize.height,u=1*n.length,o=r/(u=Math.max(h*(u/100),1)),f=0,s=this.sparkline.intervalDivs;f<s.length;f++){if(e=1*s[f],u<r/e)break;o=e}return o},n.prototype.findRanges=function(n){var e,r,h,v,y,c,f,tt,i=this.sparkline,k=n.length,it=0,ht=Array.isArray(n)&&"object"!=typeof n[0],u,et,ct,w,nt,o,g,b,ft,st,at;if(ht)if("Pie"===i.type)for(u=0;u<k;u++)it+=Math.abs(n[u]);else e=Math.max.apply(null,n),r=Math.min.apply(null,n),h=0,v=k-1;else if("Pie"===i.type)for(u=0;u<k;u++)it+=Math.abs(n[u][i.yName]);else t.isNullOrUndefined(n[0][i.xName])?(et=n.map(function(n){return n[i.yName]}),e=Math.max.apply(null,et),r=Math.min.apply(null,et)):(e=(y=(y=t.extend([],n)).sort(function(n,t){return n[i.yName]-t[i.yName]}))[y.length-1][i.yName],r=y[0][i.yName]),t.isNullOrUndefined(n[0][i.xName])?(h=0,v=k-1):(y=y.sort(function(n,t){return n[i.xName]-t[i.xName]}),v=(y=this.sparkline.enableRtl?y.reverse():y)[y.length-1][i.xName],h=y[0][i.xName]);var s,l,rt=0,p=i.padding,a=i.axisSettings,d=a.value;if("Pie"!==i.type){if(this.maxLength=k,f=i.availableSize.height-(p.bottom+p.top),tt=i.availableSize.width-(p.left+p.right),v=t.isNullOrUndefined(a.maxX)?v:a.maxX,h=t.isNullOrUndefined(a.minX)?h:a.minX,e=t.isNullOrUndefined(a.maxY)?e:a.maxY,r=t.isNullOrUndefined(a.minY)?r:a.minY,ct=a.lineSettings.color||this.sparkline.sparkTheme.axisLineColor,w={name:"axisRendering",cancel:!1,sparkline:i,maxX:v,minX:h,maxY:e,minY:r,value:a.value,lineColor:ct,lineWidth:a.lineSettings.width},i.trigger("axisRendering",w),w.cancel)return void(this.visiblePoints=[]);v=w.maxX;h=w.minX;e=w.maxY;r=w.minY;d=this.axisValue=w.value;this.axisColor=w.lineColor;this.axisWidth=w.lineWidth}g=v-h;b=e-r;g=0===g?1:g;b=0===b?1:b;this.unitX=g;this.unitY=b;this.min=r;rt=0;s=f-f/b*-r;s=r<0&&e<=0?0:r<0&&e>0?s:f;d>=r&&d<=e&&(s=f-Math.round(f*((d-r)/this.unitY)));this.axisHeight=s+p.top;var ot=[],vt=e-r,lt=this.getInterval(n,i.xName),ut=this.getPaddingInterval(n,i.xName,i.valueType,vt);for(u=0;u<k;u++)(t.isNullOrUndefined(n[u][i.xName])&&t.isNullOrUndefined(n[u][i.yName])&&0!==n[u][i.yName]&&ht?(nt=u,o=n[u]):t.isNullOrUndefined(n[u][i.xName])?(nt=u,o=n[u][i.yName]):(nt=n[u][i.xName],o=n[u][i.yName]),t.isNullOrUndefined(nt)||t.isNullOrUndefined(o))||("Line"===i.type||"Area"===i.type?(c=r!==e&&1!==k?f-Math.round(f*((o-r)/this.unitY)):p.top,l={x:h!==v?Math.round(tt*((nt-h)/this.unitX)):tt/2,y:c,markerPosition:c}):"Column"===i.type||"WinLoss"===i.type?(ft=tt/((v-h)/lt+1),(rt=(nt-h)/lt*(1+(ft-=1))+.5,"WinLoss"===i.type)?l={x:rt,y:c=o>d?f/4:o<d?.5*f:.5*f-f/40,height:o!==d?f/4:f/20,width:ft,markerPosition:c>s?s+Math.abs(c-s):c}:(0===u&&"None"!==i.rangePadding&&(r-="Additional"===i.rangePadding?ut+p.top:ut,g=0==(g=v-h)?1:g,b=0==(b=(e+="Additional"===i.rangePadding?ut+p.top:ut)-r)?1:b,this.unitX=g,this.unitY=b,this.min=r),st=f/this.unitY*(o-r),at=o===r&&o>d?1!==k&&1!==this.unitY?f/this.unitY*(r/2):1|st:o===e&&o<d&&1!==k&&1!==this.unitY?f/this.unitY*(-e/2):st,l={x:rt,y:(c=Math.abs(f-at))>s?s:c,height:Math.abs(c-s),width:ft,markerPosition:c>s?s+Math.abs(c-s):c})):"Pie"===i.type&&(l={percent:Math.abs(o)/it*100,degree:Math.abs(o)/it*360}),"Pie"!==i.type&&(l.x+=p.left,l.y+=p.top),"WinLoss"!==i.type&&(l.markerPosition+=p.top),l.location={x:l.x,y:l.y},l.xVal=nt,l.yVal=o,ot.push(l));ot.sort(function(n,t){return n.x-t.x});this.visiblePoints=ot},n.prototype.drawAxis=function(){var n=this.sparkline,t=this.axisHeight,i;"WinLoss"!==n.type&&"Pie"!==n.type&&n.axisSettings.lineSettings.visible&&(i={id:n.element.id+"_Sparkline_XAxis",x1:n.padding.left,y1:t,x2:n.availableSize.width-n.padding.right,y2:t,stroke:this.axisColor,opacity:n.axisSettings.lineSettings.opacity,"stroke-dasharray":n.axisSettings.lineSettings.dashArray,"stroke-width":this.axisWidth,"clip-path":"url(#"+this.clipId+")"},n.svgObject.appendChild(n.renderer.drawLine(i)))},n.prototype.triggerPointRender=function(n,t,i,r){var u={name:n,cancel:!1,border:r,fill:i,sparkline:this.sparkline,pointIndex:t};return this.sparkline.trigger(n,u),u},n}(),vat=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),st=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},yat=function(n){function u(i,r){var u=n.call(this,i,r)||this;return u.isDevice=t.Browser.isDevice,u.intervalDivs=[10,5,2,1],u.previousTargetId="",u.currentPointIndex=0,u}return vat(u,n),u.prototype.preRender=function(){this.allowServerDataBinding=!1;this.unWireEvents();this.trigger("load",{sparkline:this});this.sparkTheme=iit(this.theme);this.sparklineRenderer=new aat(this);this.setTheme();this.createSVG();this.wireEvents();this.setCulture()},u.prototype.render=function(){this.sparklineRenderer.processDataManager();this.renderComplete();this.allowServerDataBinding=!0},u.prototype.processSparklineData=function(){this.sparklineRenderer.processData();this.renderSparkline();this.element.appendChild(this.svgObject);this.setSecondaryElementPosition();this.trigger("loaded",{sparkline:this})},u.prototype.renderSparkline=function(){this.renderBorder();this.createDiv();this.sparklineRenderer.renderSeries()},u.prototype.createDiv=function(){var n=document.createElement("div");n.id=this.element.id+"_Secondary_Element";n.style.position="relative";this.element.appendChild(n);this.element.setAttribute("tabindex","0");this.element.style.outline="none";this.element.style.display="block";this.element.style.position="relative"},u.prototype.setSecondaryElementPosition=function(){var n=so(this.element.id+"_Secondary_Element"),t,i;n&&(t=this.element.getBoundingClientRect(),i=so(this.element.id+"_svg").getBoundingClientRect(),n.style.left=Math.max(i.left-t.left,0)+"px",n.style.top=Math.max(i.top-t.top,0)+"px")},u.prototype.renderBorder=function(){var i,t=this.containerArea.border.width,n,r;(t>0||"transparent"!==this.containerArea.background)&&(i=new sh(this.element.id+"_SparklineBorder",this.sparkTheme.background,this.containerArea.border,1,new gf(t/2,t/2,this.availableSize.width-t,this.availableSize.height-t)),this.svgObject.appendChild(hh(this,i)));n=this.padding;this.markerSettings.visible.length&&(n.left=0,n.right=0,n.bottom=0,n.top=0);i=new sh(this.element.id+"_sparkline_clip_rect","transparent",{color:"transparent",width:0},1,new gf(n.left,n.top,this.availableSize.width-(n.left+n.right),this.availableSize.height-(n.top+n.bottom)));r=this.renderer.createClipPath({id:this.element.id+"_sparkline_clip_path"});hh(this,i,r);this.svgObject.appendChild(r)},u.prototype.createSVG=function(){var n;this.removeSvg();(n=this).renderer=new i.SvgRenderer(n.element.id),function(n){var i=n.element.clientWidth?n.element.clientWidth:n.element.parentElement?n.element.parentElement.clientWidth?n.element.parentElement.clientWidth:window.innerWidth:100,t=n.element.clientHeight?n.element.clientHeight:n.element.parentElement?n.element.parentElement.clientHeight:50;n.availableSize=new cy(rit(n.width,i)||i,rit(n.height,t)||t||(n.isDevice?Math.min(window.innerWidth,window.innerHeight):t))}(n);n.svgObject=n.renderer.createSvg({id:n.element.id+"_svg",width:n.availableSize.width,height:n.availableSize.height})},u.prototype.removeSvg=function(){if(this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&t.remove(this.svgObject)}eit(this.element.id+"_Secondary_Element");this.sparklineTooltipModule&&this.sparklineTooltipModule.removeTooltipElements()},u.prototype.setCulture=function(){this.intl=new t.Internationalization;this.localeObject=new t.L10n(this.getModuleName(),this.defaultLocalConstants,this.locale)},u.prototype.setTheme=function(){this.sparkTheme=iit(this.theme)},u.prototype.requiredModules=function(){var n=[];return(this.tooltipSettings.visible||this.tooltipSettings.trackLineSettings.visible)&&n.push({member:"SparklineTooltip",args:[this]}),n},u.prototype.unWireEvents=function(){var n=t.Browser.isPointer?"pointerleave":"mouseleave";t.EventHandler.remove(this.element,t.Browser.touchMoveEvent,this.sparklineMove);t.EventHandler.remove(this.element,n,this.sparklineMouseLeave);t.EventHandler.remove(this.element,t.Browser.touchEndEvent,this.sparklineMouseEnd);t.EventHandler.remove(this.element,"keyup",this.chartKeyUp);t.EventHandler.remove(this.element,"keydown",this.chartKeyDown);window.removeEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.sparklineResize)},u.prototype.wireEvents=function(){var n=t.Browser.isPointer?"pointerleave":"mouseleave";t.EventHandler.add(this.element,t.Browser.touchMoveEvent,this.sparklineMove,this);t.EventHandler.add(this.element,"click",this.sparklineClick,this);t.EventHandler.add(this.element,n,this.sparklineMouseLeave,this);t.EventHandler.add(this.element,t.Browser.touchEndEvent,this.sparklineMouseEnd,this);t.EventHandler.add(this.element,"keyup",this.chartKeyUp,this);t.EventHandler.add(this.element,"keydown",this.chartKeyDown,this);window.addEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.sparklineResize.bind(this));new t.Touch(this.element)},u.prototype.sparklineResize=function(){var n=this,t={name:"resize",previousSize:this.availableSize,sparkline:this,currentSize:new cy(0,0)};return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=+setTimeout(function(){n.isDestroyed?clearTimeout(n.resizeTo):(n.unWireEvents(),n.createSVG(),n.refreshing=!0,n.wireEvents(),t.currentSize=n.availableSize,n.trigger("resize",t),n.render(),n.refreshing=!1)},500),!1},u.prototype.sparklineMove=function(n){var i,r,u;return this.setSparklineMouseXY(n),this.notify(t.Browser.touchMoveEvent,n),i={name:"sparklineMouseMove",cancel:!1,sparkline:this,event:n},this.trigger(i.name,i),r=this.isPointRegion(n),r.isPointRegion&&(u={name:"pointRegionMouseMove",cancel:!1,event:n,sparkline:this,pointIndex:r.pointIndex},this.trigger(u.name,u)),!1},u.prototype.sparklineClick=function(n){var t,i,r;return this.setSparklineMouseXY(n),t={name:"sparklineMouseClick",cancel:!1,sparkline:this,event:n},this.trigger(t.name,t),i=this.isPointRegion(n),i.isPointRegion&&(r={name:"pointRegionMouseClick",cancel:!1,event:n,sparkline:this,pointIndex:i.pointIndex},this.trigger(r.name,r)),this.removeNavigationStyle(),!1},u.prototype.isPointRegion=function(n){var r=this,f=this.element.id+"_",u=n.target.id.replace(f,"").split("_"),i;return u[1]===this.type.toLowerCase()?(i=parseInt(u[2],10),!t.isNullOrUndefined(i)&&!isNaN(i)||"Line"!==this.type&&"Area"!==this.type||this.sparklineRenderer.visiblePoints.forEach(function(n,t){oit(r.mouseX,r.mouseY,new gf(n.x-5,n.y-5,10,10))&&(i=t)}),{isPointRegion:!0,pointIndex:i}):{isPointRegion:!1,pointIndex:null}},u.prototype.sparklineMouseEnd=function(n){return this.setSparklineMouseXY(n),this.notify(t.Browser.touchEndEvent,n),!1},u.prototype.sparklineMouseLeave=function(n){return this.setSparklineMouseXY(n),this.notify(t.Browser.isPointer?"pointerleave":"mouseleave",n),!1},u.prototype.chartKeyDown=function(n){var t="";return this.tooltipSettings.visible&&("Tab"===n.code&&this.previousTargetId.indexOf("_sparkline_")>-1||"Escape"===n.code)&&(t="ESC"),""!==t&&this.sparklineKeyboardNavigations(n,n.target.id,t),("Tab"===n.code||"Enter"===n.code||n.code.indexOf("Arrow")>-1)&&this.removeNavigationStyle(),!1},u.prototype.chartKeyUp=function(n){var f,e="",t=n.target.id,o=n.target,s=r(this.element.id+"_sparkline_g"),c=r(this.element.id+"_sparkline_line"),h,i,u;return(this.removeNavigationStyle(),this.setNavigationStyle(t),c&&c.removeAttribute("tabindex"),s&&s.firstElementChild)&&(h=s.firstElementChild,i=h.getAttribute("class"),i&&-1===i.indexOf("e-sparkline-focused")?i+=" e-sparkline-focused":i||(i="e-sparkline-focused"),h.setAttribute("class",i)),"Tab"===n.code?(""!==this.previousTargetId&&this.previousTargetId.indexOf("_sparkline_")>-1&&-1===t.indexOf("_sparkline_")&&(f=r(this.element.id+"_sparkline_g"),this.setTabIndex(f.children[this.currentPointIndex],f.firstElementChild)),this.previousTargetId=t,e=this.tooltipSettings.visible?"Tab":""):n.code.indexOf("Arrow")>-1&&(n.preventDefault(),this.previousTargetId=t,t.indexOf("_sparkline_")>-1)&&(f=o.parentElement,u=n.target,o.removeAttribute("tabindex"),o.blur(),"ArrowUp"!==n.code&&"ArrowDown"!==n.code||(this.currentPointIndex+="ArrowUp"===n.code?1:-1),t.indexOf("_marker")>-1?(this.currentPointIndex=this.getActualIndex(this.currentPointIndex,r(this.element.id+"_sparkline_marker_g").childElementCount),u=r(this.element.id+"_sparkline_marker_"+this.currentPointIndex)):t.indexOf("_column")>-1?(this.currentPointIndex=this.getActualIndex(this.currentPointIndex,r(this.element.id+"_sparkline_g").childElementCount),u=r(this.element.id+"_sparkline_column_"+this.currentPointIndex)):t.indexOf("_winloss")>-1?(this.currentPointIndex=this.getActualIndex(this.currentPointIndex,r(this.element.id+"_sparkline_g").childElementCount),u=r(this.element.id+"_sparkline_winloss_"+this.currentPointIndex)):t.indexOf("_pie")>-1&&(this.currentPointIndex=this.getActualIndex(this.currentPointIndex,r(this.element.id+"_sparkline_g").childElementCount),u=r(this.element.id+"_sparkline_pie_"+this.currentPointIndex)),t=this.focusChild(u),e=this.tooltipSettings.visible?"ArrowMove":""),""!==e&&this.sparklineKeyboardNavigations(n,t,e),!1},u.prototype.setNavigationStyle=function(n){var t=document.getElementById(n);t&&t.style.setProperty("outline","1.5px solid "+this.sparkTheme.tabColor)},u.prototype.removeNavigationStyle=function(){var n=document.querySelectorAll("path[id*=_sparkline_], [id*="+this.element.id+"]");n&&n.forEach(function(n){(n instanceof HTMLElement||n instanceof SVGElement)&&(n.style.setProperty("outline","none"),n.style.setProperty("margin",""))})},u.prototype.sparklineKeyboardNavigations=function(n,t,i){switch(i){case"Tab":case"ArrowMove":if(t.indexOf("_sparkline_")>-1){var r;r=this.type.indexOf("Line")>-1||this.type.indexOf("Area")>-1?+t.split("_sparkline_")[1].split("marker_")[1]:this.type.indexOf("WinLoss")>-1?+t.split("_sparkline_")[1].split("winloss_")[1]:this.type.indexOf("Pie")>-1?+t.split("_sparkline_")[1].split("pie_")[1]:+t.split("_sparkline_")[1].split("column_")[1];this.sparklineTooltipModule&&this.sparklineTooltipModule.renderTooltip(this.sparklineRenderer.visiblePoints[r])}break;case"ESC":this.sparklineTooltipModule.removeTooltipElements()}},u.prototype.setTabIndex=function(n,t){n&&n.removeAttribute("tabindex");t&&t.setAttribute("tabindex","0")},u.prototype.getActualIndex=function(n,t){return n>t-1?0:n<0?t-1:n},u.prototype.focusChild=function(n){n.setAttribute("tabindex","0");var t=n.getAttribute("class");return n.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-sparkline-focused")?t="e-sparkline-focused "+t:t||(t="e-sparkline-focused"),n.setAttribute("class",t),n.focus(),n.id},u.prototype.setSparklineMouseXY=function(n){var i,r,u,t,f;n.type.indexOf("touch")>-1?(this.isTouch=!0,u=n,r=u.changedTouches[0].clientX,i=u.changedTouches[0].clientY):(this.isTouch="touch"===n.pointerType||"2"===n.pointerType,i=n.clientY,r=n.clientX);t=this.element.getBoundingClientRect();f=so(this.element.id+"_svg").getBoundingClientRect();this.mouseY=i-t.top-Math.max(f.top-t.top,0);this.mouseX=r-t.left-Math.max(f.left-t.left,0)},u.prototype.onPropertyChanged=function(n){for(var i=!1,r=!1,t=0,u=Object.keys(n);t<u.length;t++)switch(u[t]){case"xName":case"yName":case"axisSettings":case"rangeBandSettings":case"type":case"valueType":case"enableRtl":case"dataSource":r=!0;break;case"border":case"markerSettings":case"dataLabelSettings":case"tooltipSettings":case"startPointColor":case"highPointColor":case"lowPointColor":case"endPointColor":case"negativePointColor":case"theme":i=!0}r?(this.createSVG(),this.sparklineRenderer.processData(),this.refreshSparkline()):i&&(this.createSVG(),this.refreshSparkline())},u.prototype.refreshSparkline=function(){this.renderSparkline();this.element.appendChild(this.svgObject);this.setSecondaryElementPosition()},u.prototype.getModuleName=function(){return"sparkline"},u.prototype.destroy=function(){this.sparklineData=[];var t=document.getElementById(this.element.id+"Keyboard_sparkline_focus");t&&t.remove();eit("sparklinesmeasuretext");this.element&&(this.unWireEvents(),n.prototype.destroy.call(this),this.removeSvg(),this.svgObject=null)},u.prototype.getPersistData=function(){return""},st([t.Property(null)],u.prototype,"width",void 0),st([t.Property(null)],u.prototype,"height",void 0),st([t.Complex({},ss)],u.prototype,"border",void 0),st([t.Property("Line")],u.prototype,"type",void 0),st([t.Property("None")],u.prototype,"rangePadding",void 0),st([t.Property(null)],u.prototype,"dataSource",void 0),st([t.Property(null)],u.prototype,"query",void 0),st([t.Property("Numeric")],u.prototype,"valueType",void 0),st([t.Property(null)],u.prototype,"xName",void 0),st([t.Property(null)],u.prototype,"yName",void 0),st([t.Property("#00bdae")],u.prototype,"fill",void 0),st([t.Property("")],u.prototype,"highPointColor",void 0),st([t.Property("")],u.prototype,"lowPointColor",void 0),st([t.Property("")],u.prototype,"startPointColor",void 0),st([t.Property("")],u.prototype,"endPointColor",void 0),st([t.Property("")],u.prototype,"negativePointColor",void 0),st([t.Property("")],u.prototype,"tiePointColor",void 0),st([t.Property([])],u.prototype,"palette",void 0),st([t.Property(1)],u.prototype,"lineWidth",void 0),st([t.Property(1)],u.prototype,"opacity",void 0),st([t.Property(null)],u.prototype,"format",void 0),st([t.Property(!1)],u.prototype,"useGroupingSeparator",void 0),st([t.Complex({},vtt)],u.prototype,"tooltipSettings",void 0),st([t.Complex({},ytt)],u.prototype,"containerArea",void 0),st([t.Collection([],wtt)],u.prototype,"rangeBandSettings",void 0),st([t.Complex({},btt)],u.prototype,"axisSettings",void 0),st([t.Complex({},dtt)],u.prototype,"markerSettings",void 0),st([t.Complex({},nit)],u.prototype,"dataLabelSettings",void 0),st([t.Complex({},ktt)],u.prototype,"padding",void 0),st([t.Property("Material")],u.prototype,"theme",void 0),st([t.Event()],u.prototype,"loaded",void 0),st([t.Event()],u.prototype,"load",void 0),st([t.Event()],u.prototype,"tooltipInitialize",void 0),st([t.Event()],u.prototype,"seriesRendering",void 0),st([t.Event()],u.prototype,"axisRendering",void 0),st([t.Event()],u.prototype,"pointRendering",void 0),st([t.Event()],u.prototype,"pointRegionMouseMove",void 0),st([t.Event()],u.prototype,"pointRegionMouseClick",void 0),st([t.Event()],u.prototype,"sparklineMouseMove",void 0),st([t.Event()],u.prototype,"sparklineMouseClick",void 0),st([t.Event()],u.prototype,"dataLabelRendering",void 0),st([t.Event()],u.prototype,"markerRendering",void 0),st([t.Event()],u.prototype,"resize",void 0),st([t.NotifyPropertyChanges],u)}(t.Component),pat=function(){function n(n){this.sparkline=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.sparkline.isDestroyed||(this.sparkline.on(t.Browser.isPointer?"pointerleave":"mouseleave",this.mouseLeaveHandler,this),this.sparkline.on(t.Browser.touchMoveEvent,this.mouseMoveHandler,this),this.sparkline.on(t.Browser.touchEndEvent,this.mouseUpHandler,this))},n.prototype.mouseLeaveHandler=function(){this.removeTooltipElements()},n.prototype.mouseUpHandler=function(n){this.sparkline.isTouch&&(this.processTooltip(n),this.fadeOut())},n.prototype.fadeOut=function(){clearTimeout(this.clearTooltip);this.clearTooltip=+setTimeout(this.removeTooltipElements.bind(this),5e3)},n.prototype.removeTooltipElements=function(){this.removeTooltip();this.removeTracker()},n.prototype.mouseMoveHandler=function(n){this.processTooltip(n)},n.prototype.processTooltip=function(n){var i,r=this.sparkline,f=r.sparklineRenderer.visiblePoints,e=r.mouseX,l=r.mouseY,c;if("Pie"!==r.type)for(var o=t.extend([],[],f).map(function(n){return n.location.x}),s=1/0,u=0,h=void 0,a=o.length;u<a;u++)s>(h=Math.abs(e-o[u]))&&(s=h,i=u);else c=n.target.id,i=parseInt(c.split("_pie_")[1],10);if(isNaN(i)||!oit(e,l,new gf(0,0,r.availableSize.width,r.availableSize.height)))return this.removeTracker(),void this.removeTooltip();this.pointIndex!==i&&(this.pointIndex=i,this.renderTrackerLine(f[i]),this.renderTooltip(f[i]))},n.prototype.renderTrackerLine=function(n){var i=this.sparkline,f=i.tooltipSettings.trackLineSettings,e=i.sparkTheme.trackerLineColor?i.sparkTheme.trackerLineColor:f.color,r,u,o,s;f.visible&&"Pie"!==i.type&&(r=so(i.element.id+"_sparkline_tracker_g"),t.isNullOrUndefined(r)&&(r=i.renderer.createGroup({id:i.element.id+"_sparkline_tracker_g"}),i.svgObject.appendChild(r)),u=so(i.element.id+"_sparkline_tracker"),o="M "+n.location.x+" "+i.padding.top+" L "+n.location.x+" "+(i.availableSize.height-i.padding.bottom),t.isNullOrUndefined(u)?(s=new hs(i.element.id+"_sparkline_tracker",e,f.width,e,1),s.d=o,cs(i,s,r)):(u.setAttribute("d",o),u.setAttribute("stroke-width",f.width.toString()),u.setAttribute("stroke",e)))},n.prototype.renderTooltip=function(n){var h=this,i=this.sparkline,r=i.tooltipSettings,u,f,o,e;if(r.visible){u=so(i.element.id+"_sparkline_tooltip_div");t.isNullOrUndefined(u)&&(u=t.createElement("div",{id:i.element.id+"_sparkline_tooltip_div",styles:"pointer-events: none; position: absolute;z-index:1;"}),so(i.element.id+"_Secondary_Element").appendChild(u));f=n.xVal.toString();"Category"===i.valueType?f=i.dataSource[n.xVal][i.xName]:"DateTime"===i.valueType&&(f=new Date(n.xVal).toDateString());o=this.getFormat(i.tooltipSettings.format,i,f,this.formatValue(n.yVal,i).toString());e={x:n.location.x,y:n.location.y};e="Pie"===i.type?{x:n.location.x,y:n.location.y}:e;var c=r.textStyle.color||i.sparkTheme.tooltipFontColor,l=""===r.fill?i.sparkTheme.tooltipFill:r.fill,s={name:"tooltipInitialize",cancel:!1,text:o,textStyle:{size:r.textStyle.size,opacity:i.sparkTheme.tooltipTextOpacity||r.textStyle.opacity,fontWeight:r.textStyle.fontWeight||i.sparkTheme.tooltipFontWeight,fontStyle:r.textStyle.fontStyle,fontFamily:r.textStyle.fontFamily||i.sparkTheme.tooltipFontFamily,color:c}};i.trigger("tooltipInitialize",s,function(){h.addTooltip(s,i,l,r,e,u)})}},n.prototype.addTooltip=function(n,r,u,f,e,o,s){var h,c;t.isNullOrUndefined(n)?(s.cancel,h=s):(n.cancel,!function(n,t){var u={},i,r;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&(u[i[r]]=n[i[r]])}(n,["cancel"]),h=n);n.cancel||(c=new i.Tooltip({content:h.text,border:f.border,template:f.template,data:r.dataSource[this.pointIndex],fill:u,textStyle:h.textStyle,enableAnimation:!1,location:{x:e.x,y:e.y},shared:!1,availableSize:this.sparkline.availableSize,areaBounds:new gf(0,0,r.availableSize.width,r.availableSize.height),theme:r.theme}),c.opacity=r.sparkTheme.tooltipFillOpacity||c.opacity,c.appendTo(o))},n.prototype.getFormat=function(n,i,r,u){return t.isNullOrUndefined(n)||""===n?[u]:[n.split("${"+i.xName+"}").join(r).split("${"+i.yName+"}").join(u)]},n.prototype.formatValue=function(n,t){return t.format&&!isNaN(Number(n))?t.intl.getNumberFormat({format:t.format,useGrouping:t.useGroupingSeparator})(n):n},n.prototype.removeTracker=function(){var n=this.sparkline.element.querySelector("#"+this.sparkline.element.id+"_sparkline_tracker_g");return n?t.remove(n):null},n.prototype.removeTooltip=function(){this.pointIndex=null;var n=this.sparkline.element.querySelector("#"+this.sparkline.element.id+"_sparkline_tooltip_div");return n?t.remove(n):null},n.prototype.getModuleName=function(){return"SparklineTooltip"},n.prototype.destroy=function(){},n}(),vy=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bi=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},el=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return vy(i,n),bi([t.Property("Normal")],i.prototype,"fontStyle",void 0),bi([t.Property("16px")],i.prototype,"size",void 0),bi([t.Property("Normal")],i.prototype,"fontWeight",void 0),bi([t.Property("")],i.prototype,"color",void 0),bi([t.Property("Segoe UI")],i.prototype,"fontFamily",void 0),bi([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),sit=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return vy(i,n),bi([t.Property("transparent")],i.prototype,"color",void 0),bi([t.Property(0)],i.prototype,"width",void 0),bi([t.Property(.8)],i.prototype,"cornerRadius",void 0),i}(t.ChildProperty),yy=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return vy(i,n),bi([t.Property("Normal")],i.prototype,"fontStyle",void 0),bi([t.Property("15px")],i.prototype,"size",void 0),bi([t.Property("500")],i.prototype,"fontWeight",void 0),bi([t.Property("")],i.prototype,"color",void 0),bi([t.Property("Center")],i.prototype,"textAlignment",void 0),bi([t.Property("Segoe UI")],i.prototype,"fontFamily",void 0),bi([t.Property(1)],i.prototype,"opacity",void 0),bi([t.Property("Wrap")],i.prototype,"textOverflow",void 0),bi([t.Property("Top")],i.prototype,"position",void 0),bi([t.Property(0)],i.prototype,"x",void 0),bi([t.Property(0)],i.prototype,"y",void 0),bi([t.Property("transparent")],i.prototype,"background",void 0),bi([t.Complex({},sit)],i.prototype,"border",void 0),i}(t.ChildProperty),hit=function(){function n(n){this.chart=n}return n.prototype.measureAxis=function(n){var t=this.chart;this.seriesClipRect=new i.Rect(n.x,n.y,n.width,n.height);this.initialClipRect=n;this.leftSize=0;this.rightSize=0;this.topSize=0;this.bottomSize=0;this.measureRowAxis(t,this.initialClipRect);this.initialClipRect=vr(this.initialClipRect,new wr(this.leftSize,this.rightSize,0,0));this.measureColumnAxis(t,this.initialClipRect);this.initialClipRect=vr(this.initialClipRect,new wr(0,0,this.topSize,this.bottomSize));this.chart.delayRedraw||this.calculateAxisSize(this.initialClipRect);this.leftSize=0;this.rightSize=0;this.topSize=0;this.bottomSize=0;this.measureRowAxis(t,this.initialClipRect);this.seriesClipRect=vr(this.seriesClipRect,new wr(this.leftSize,this.rightSize,0,0));this.measureColumnAxis(t,this.initialClipRect);this.seriesClipRect=vr(this.seriesClipRect,new wr(0,0,this.topSize,this.bottomSize));this.chart.delayRedraw||(t.refreshAxis(),this.calculateAxisSize(this.seriesClipRect))},n.prototype.measureRowAxis=function(n,t){var r,u,f;for(this.calculateRowSize(t),u=0,f=n.rows;u<f.length;u++)(r=f[u]).nearSizes=[],r.farSizes=[],this.arrangeAxis(r),this.measureDefinition(r,n,new i.Size(n.availableSize.width,r.computedHeight)),this.leftSize<lt(r.nearSizes)&&(this.leftSize=lt(r.nearSizes)),this.rightSize<lt(r.farSizes)&&(this.rightSize=lt(r.farSizes))},n.prototype.measureColumnAxis=function(n,t){var r,u,f;for(this.calculateColumnSize(t),u=0,f=n.columns;u<f.length;u++)(r=f[u]).farSizes=[],r.nearSizes=[],this.arrangeAxis(r),this.measureDefinition(r,n,new i.Size(r.computedWidth,n.availableSize.height)),this.bottomSize<lt(r.nearSizes)&&(this.bottomSize=lt(r.nearSizes)),this.topSize<lt(r.farSizes)&&(this.topSize=lt(r.farSizes))},n.prototype.measureDefinition=function(n,t,i){for(var r,u=0,f=n.axes;u<f.length;u++)r=f[u],r.getModule(t),r.baseModule.calculateRangeAndInterval(i,r),n.computeSize(r,t);n.farSizes.length>0&&(n.farSizes[n.farSizes.length-1]-=10);n.nearSizes.length>0&&(n.nearSizes[n.nearSizes.length-1]-=10)},n.prototype.calculateAxisSize=function(n){var f,l,p,t,e,o,a,s=this.chart,h=0,c=0,v=0,i,y,r,w,u,b,k,d;for(this.calculateRowSize(n),i=0,y=s.rows.length;i<y;i++)for(h=0,c=0,r=0,w=(f=s.rows[i]).axes.length;r<w;r++){if(a=(t=f.axes[r]).plotOffset,0===t.rect.height){for(t.rect.height=f.computedHeight,v=0,u=i+1,b=i+t.span;u<b;u++)v+=(p=s.rows[u]).computedHeight;t.rect.y=f.computedTop-v+(t.plotOffsetTop?t.plotOffsetTop:a);t.rect.height=t.rect.height+v-this.getAxisOffsetValue(t.plotOffsetTop,t.plotOffsetBottom,t.plotOffset);t.rect.width=0}t.isAxisOpposedPosition?(e=n.x+n.width+lt(sr(f.farSizes,c)),t.rect.x=t.rect.x>=e?t.rect.x:e,c++):(e=n.x-lt(sr(f.nearSizes,h)),t.rect.x=t.rect.x<=e?t.rect.x:e,h++)}for(this.calculateColumnSize(n),i=0,y=s.columns.length;i<y;i++)for(h=0,c=0,r=0,k=(l=s.columns[i]).axes.length;r<k;r++){if(a=(t=l.axes[r]).plotOffset,0===t.rect.width){for(u=i,d=i+t.span;u<d;u++)p=s.columns[u],t.rect.width+=p.computedWidth;t.rect.x=l.computedLeft+(t.plotOffsetLeft?t.plotOffsetLeft:a);t.rect.width-=this.getAxisOffsetValue(t.plotOffsetLeft,t.plotOffsetRight,t.plotOffset);t.rect.height=0}t.isAxisOpposedPosition?(o=n.y-lt(sr(l.farSizes,c)),t.rect.y=t.rect.y<=o?t.rect.y:o,c++):(o=n.y+n.height+lt(sr(l.nearSizes,h)),t.rect.y=t.rect.y>=o?t.rect.y:o,h++)}},n.prototype.measure=function(){for(var t,r,u,f,e,i,o,n=this.chart,s=0,h=n.axisCollections;s<h.length;s++){if(t=h[s],"Vertical"===t.orientation){for(n.verticalAxes.push(t),i=this.getActualRow(t),u=n.rows[i],this.pushAxis(u,t),o=i+t.span>n.rows.length?n.rows.length:i+t.span,r=i+1;r<o;r++)(e=n.rows[r]).axes[u.axes.length-1]=t,n.rows[r]=e;n.rows[i]=u}else{for(n.horizontalAxes.push(t),i=this.getActualColumn(t),f=n.columns[i],this.pushAxis(f,t),o=i+t.span>n.columns.length?n.columns.length:i+t.span,r=i+1;r<o;r++)(e=n.columns[r]).axes[f.axes.length-1]=t,n.columns[r]=e;n.columns[i]=f}t.isRTLEnabled=n.enableRtl;t.setIsInversedAndOpposedPosition()}},n.prototype.getAxisOffsetValue=function(n,t,i){return n?n+(t||i):t?t+i:2*i},n.prototype.pushAxis=function(n,t){for(var i=0,r=n.axes.length;i<=r;i++)if(!n.axes[i]){n.axes[i]=t;break}},n.prototype.arrangeAxis=function(n){for(var i=[],t=0,r=n.axes.length;t<=r;t++)n.axes[t]&&i.push(n.axes[t]);n.axes=i},n.prototype.getActualColumn=function(n){var i=this.chart.columns.length,t=n.columnIndex;return t>=i?i-1:t<0?0:t},n.prototype.getActualRow=function(n){var i=this.chart.rows.length,t=n.rowIndex;return t>=i?i-1:t<0?0:t},n.prototype.calculateRowSize=function(n){for(var i,f=this.chart,e=n.y+n.height,t=0,r=Math.max(0,n.height),u=0,o=f.rows.length;u<o;u++)t=-1!==(i=f.rows[u]).height.indexOf("%")?Math.min(r,n.height*parseInt(i.height,10)/100):Math.min(r,parseInt(i.height,10)),t=u!==o-1?t:r,i.computedHeight=t,e-=t,i.computedTop=e,r-=t},n.prototype.calculateColumnSize=function(n){for(var i,f=this.chart,e=n.x,t=0,r=Math.max(0,n.width),u=0,o=f.columns.length;u<o;u++)t=-1!==(i=f.columns[u]).width.indexOf("%")?Math.min(r,n.width*parseInt(i.width,10)/100):Math.min(r,parseInt(i.width,10)),t=u!==o-1?t:r,i.computedWidth=t,i.computedLeft=e,e+=t,r-=t},n}();var ol=function(){return ol=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n},ol.apply(this,arguments)},py=function(){return function(){this.transform=null}}(),fi=new py,ho=function(){function n(n,t,i){this.x=0;this.y=0;this.z=0;this.epsilon=1e-5;this.x=n;this.y=t||0;this.z=i||0}return n.prototype.isValid=function(n){return!isNaN(n.x)&&!isNaN(n.y)&&!isNaN(n.z)},n.prototype.vector3D=function(n,t,i){return this.x=n,this.y=t,this.z=i,{x:this.x,y:this.y,z:this.z}},n.prototype.vector3DMinus=function(n,t){return this.vector3D(n.x-t.x,n.y-t.y,n.z-t.z)},n.prototype.vector3DPlus=function(n,t){return this.vector3D(n.x+t.x,n.y+t.y,n.z+t.z)},n.prototype.vector3DMultiply=function(n,t){var i=n.y*t.z-t.y*n.z,r=n.z*t.x-t.z*n.x,u=n.x*t.y-t.x*n.y;return this.vector3D(i,r,u)},n.prototype.vector3DAdd=function(n,t){return n.x*t.x+n.y*t.y+n.z*t.z},n.prototype.vector3DStarMultiply=function(n,t){var i=n.x*t,r=n.y*t,u=n.z*t;return this.vector3D(i,r,u)},n.prototype.getLength=function(n){var t=this.vector3DAdd(n,n);return Math.sqrt(t)},n.prototype.normalize=function(){var n=this.getLength(this);this.x/=n;this.y/=n;this.z/=n},n.prototype.getNormal=function(n,t,i){var f=this.vector3DMinus(n,t),e=this.vector3DMinus(i,t),r=this.vector3DMultiply(f,e),u=this.getLength(r);return u<this.epsilon?this.vector3D(0,0,0):this.vector3D(r.x/u,r.y/u,r.z/u)},n}(),ch=function(){function n(){this.matrixSize=4}return n.prototype.matrix3D=function(n){for(var i=[],t=0;t<n;t++)i[t]=this.createArray(n);return i},n.prototype.isAffine=function(n){return 0===n[0][3]&&0===n[1][3]&&0===n[2][3]&&1===n[3][3]},n.prototype.createArray=function(n){for(var i=[],t=0;t<n;++t)i[t]=0;return i},n.prototype.getIdentity=function(){for(var t=this.matrix3D(this.matrixSize),n=0;n<this.matrixSize;n++)t[n][n]=1;return t},n.prototype.getInterval=function(n){for(var r,t=this.getIdentity(),i=0;i<this.matrixSize;i++)for(r=0;r<this.matrixSize;r++)t[i][r]=this.getMinor(n,i,r);return t=this.transposed(t),this.getMatrixMultiple(1/this.getDeterminant(n),t)},n.prototype.getMatrixMultiple=function(n,t){for(var r,i=0;i<t.length;i++)for(r=0;r<t[i].length;r++)t[i][r]=t[i][r]*n;return t},n.prototype.getMatrixVectorMultiple=function(n,t){var r=n[0][0]*t.x+n[1][0]*t.y+n[2][0]*t.z+n[3][0],u=n[0][1]*t.x+n[1][1]*t.y+n[2][1]*t.z+n[3][1],f=n[0][2]*t.x+n[1][2]*t.y+n[2][2]*t.z+n[3][2],i;return this.isAffine(n)||(i=1/(n[0][3]*t.x+n[1][3]*t.y+n[2][3]*t.z+n[3][3]),r*=i,u*=i,f*=i),{x:r,y:u,z:f}},n.prototype.getMatrixVectorAnd=function(n,t){var i=n[0][0]*t.x+n[1][0]*t.y+n[2][0]*t.z,r=n[0][1]*t.x+n[1][1]*t.y+n[2][1]*t.z,u=n[0][2]*t.x+n[1][2]*t.y+n[2][2]*t.z;return new ho(i,r,u)},n.prototype.getMatrixMultiplication=function(n,t){for(var r,e,u,f=this.getIdentity(),i=0;i<this.matrixSize;i++)for(r=0;r<this.matrixSize;r++){for(e=0,u=0;u<this.matrixSize;u++)e+=n[u][r]*t[i][u];f[i][r]=e}return f},n.prototype.getMinor=function(n,t,i){return((t+i)%2==0?1:-1)*this.getDeterminant(this.getMatrix(n,t,i))},n.prototype.getMatrix=function(n,t,i){for(var o,u,s,f=n.length-1,e=this.createArray(f),r=0;r<f;r++)for(o=r>=t?r+1:r,e[r]=this.createArray(f),u=0;u<f;u++)s=u>=i?u+1:u,e[r][u]=n[o][s];return e},n.prototype.getDeterminant=function(n){var u=n.length,r=0,i,t,f;if(u<2)r=n[0][0];else for(i=1,t=0;t<u;t++)f=this.getMatrix(n,t,0),r+=i*n[t][0]*this.getDeterminant(f),i=i>0?-1:1;return r},n.prototype.transform=function(n,t,i){var r=this.getIdentity();return r[3][0]=n,r[3][1]=t,r[3][2]=i,r},n.prototype.turn=function(n){var t=this.getIdentity();return t[0][0]=Math.cos(n),t[2][0]=-Math.sin(n),t[0][2]=Math.sin(n),t[2][2]=Math.cos(n),t},n.prototype.tilt=function(n){var t=this.getIdentity();return t[1][1]=Math.cos(n),t[2][1]=Math.sin(n),t[1][2]=-Math.sin(n),t[2][2]=Math.cos(n),t},n.prototype.transposed=function(n){for(var i,r=this.getIdentity(),t=0;t<this.matrixSize;t++)for(i=0;i<this.matrixSize;i++)r[t][i]=n[i][t];return r},n}(),ait=function(){function n(){this.toRadial=Math.PI/180;this.vector=new ho(0,0,0);this.matrixObj=new ch}return n.prototype.transform3D=function(n){return{viewingArea:n,rotation:0,tilt:0,depth:0,perspectiveAngle:0,needUpdate:!0,centeredMatrix:this.matrixObj.getIdentity(),perspective:this.matrixObj.getIdentity(),resultMatrix:this.matrixObj.getIdentity(),viewMatrix:this.matrixObj.getIdentity()}},n.prototype.transform=function(n){this.setCenter(this.vector.vector3D(n.viewingArea.width/2,n.viewingArea.height/2,n.depth/2),n);this.setViewMatrix(this.matrixObj.transform(0,0,n.depth),n);this.setViewMatrix(this.matrixObj.getMatrixMultiplication(n.viewMatrix,this.matrixObj.turn(-this.toRadial*n.rotation)),n);this.setViewMatrix(this.matrixObj.getMatrixMultiplication(n.viewMatrix,this.matrixObj.tilt(-this.toRadial*n.tilt)),n);this.updatePerspective(n.perspectiveAngle,n);n.needUpdate=!0},n.prototype.updatePerspective=function(n,t){var i=(t.viewingArea.width+t.viewingArea.height)*Math.tan(this.degreeToRadianConverter((180-Math.abs(n%181))/2))+t.depth/1;t.perspective[0][0]=i;t.perspective[1][1]=i;t.perspective[2][3]=1;t.perspective[3][3]=i},n.prototype.degreeToRadianConverter=function(n){return n*Math.PI/180},n.prototype.toScreen=function(n,t,i){return i?(this.matrixObj=i,n=i.getMatrixVectorMultiple(this.result(t,i),n)):(t.chartObj=this.matrixObj,n=this.matrixObj.getMatrixVectorMultiple(this.result(t),n)),{x:n.x,y:n.y}},n.prototype.setViewMatrix=function(n,t){t.viewMatrix!==n&&(t.viewMatrix=n,t.needUpdate=!0)},n.prototype.result=function(n,t){var i=n.chartObj?n.chartObj:this.matrixObj,r;return(i||(i=t),!n.needUpdate)?n.resultMatrix:(r=this.matrixObj?this.matrixObj:t,n.resultMatrix=i.getMatrixMultiplication(r.getInterval(n.centeredMatrix),n.perspective),n.resultMatrix=i.getMatrixMultiplication(n.resultMatrix,n.viewMatrix),n.resultMatrix=i.getMatrixMultiplication(n.resultMatrix,n.centeredMatrix),n.needUpdate=!1,n.resultMatrix)},n.prototype.setCenter=function(n,t){t.centeredMatrix=this.matrixObj.transform(-n.x,-n.y,-n.z);t.needUpdate=!0},n}(),wy=function(){function n(){this.vector=new ho(0,0,0)}return n.prototype.addVisual=function(n,t){return null==n||ve.test()?-1:yit.add(n,t)},n.prototype.prepareView=function(n,t,i,r,u,f){null==fi.transform?fi.transform=f.transform3D.transform3D(u):fi.transform.viewingArea=u;fi.tree||(fi.tree=[]);fi.transform.rotation=i;fi.transform.tilt=r;fi.transform.depth=t;fi.transform.perspectiveAngle=n;f.transform3D.transform(fi.transform);fi.tree[f.chart3D.id]=yit.build()},n.prototype.view=function(n,t,i,r,u,f,e){var o,s;if(2===arguments.length){if(null==n)return;o=this.vector.vector3D(0,0,32767);this.drawNode3D(fi.tree[t.chart3D.id],o,n,t)}else{if(null==n)return;null==fi.transform?fi.transform=t.transform3D.transform3D(u):fi.transform.viewingArea=u;fi.transform.rotation=i;fi.transform.tilt=r;fi.transform.depth=e;fi.transform.perspectiveAngle=f;t.transform3D.transform(fi.transform);s=this.vector.vector3D(0,0,32767);this.drawNode3D(fi.tree[t.chart3D.id],s,n,t)}},n.prototype.draw3DElement=function(n,t){n.plane.element?"text"===n.plane.element.tag||"dataLabel"===n.plane.element.tag?ve.drawText(n.plane,t):"template"===n.plane.element.tag?ve.drawTemplate(n.plane,t):ve.drawLine(n.plane,t):ve.draw(n.plane,t)},n.prototype.drawNode3D=function(n,t,i,r){if(null!==n&&null!=fi.transform)for(;;){if(hf.vector3DAdd(ve.getNormal(r.transform3D.result(fi.transform),n.plane.vectorPoints),t)>n.plane.d){if(null!=n.front&&this.drawNode3D(n.front,t,i,r),this.draw3DElement(n,r),null!=n.back){n=n.back;continue}}else if(null!=n.back&&this.drawNode3D(n.back,t,i,r),this.draw3DElement(n,r),null!=n.front){n=n.front;continue}break}},n}(),by=function(){function n(n){this.epsilon=.0005;this.chart=n}return n.prototype.add=function(n,t){return this.chart=t,t.polygons.push(n),t.polygons.length-1},n.prototype.getNext=function(n,t){return n>=t?n-t:n<0?n+t:n},n.prototype.vector3DIndexClassification=function(n,t,i){return{index:t,result:i,vector:n,isCuttingBackPoint:!1,cuttingBackPairIndex:null,alreadyCutBack:!1,isCuttingFrontPoint:!1,cuttingFrontPairIndex:null,alreadyCutFront:!1}},n.prototype.classifyPoint=function(n,t){var i="OnPlane",r=-t.d-hf.vector3DAdd(n,t.normal);return r>this.epsilon?i="OnBack":r<-this.epsilon&&(i="OnFront"),i},n.prototype.classifyPolygon=function(n,t){var i=t.points,o;if(null==i)return"Unknown";for(var u=0,f=0,r=0,s=n.normal,h=n.d,e=0,c=i.length;e<c;e++)if(o=-h-hf.vector3DAdd(i[e],s),o>this.epsilon?u++:o<-this.epsilon?f++:r++,u>0&&f>0)break;return r===i.length?"OnPlane":f+r===i.length?"ToRight":u+r===i.length?"ToLeft":"Unknown"},n.prototype.splitPolygon=function(n,t){var p=[],w=[],it,c,s,h,v,y,rt,ut;if(null!=n.points){for(var e=[],r=[],u=[],g=void 0,nt=void 0,b=n.points.length,i=0;i<b;i++){var k=n.points[i],l=n.points[this.getNext(i+1,b)],a=this.classifyPoint(k,t),o=this.classifyPoint(l,t),f=this.vector3DIndexClassification(k,e.length,a);if(e.push(f),a!==o&&"OnPlane"!==a&&"OnPlane"!==o){var tt=hf.vector3DMinus(k,l),ft=hf.vector3DMinus(hf.vector3DStarMultiply(t.normal,-t.d),l),et=hf.vector3DAdd(ft,t.normal)/hf.vector3DAdd(t.normal,tt),ot=hf.vector3DPlus(l,hf.vector3DStarMultiply(tt,et)),d=this.vector3DIndexClassification(ot,e.length,"OnPlane");e.push(d);r.push(d);u.push(d)}else if("OnPlane"===a){if(it=n.points[this.getNext(i-1,b)],c=this.classifyPoint(it,t),c===o)continue;if("OnPlane"!==c&&"OnPlane"!==o)r.push(f),u.push(f);else if("OnPlane"===c)switch(o){case"OnBack":r.push(f);break;case"OnFront":u.push(f)}else if("OnPlane"===o)switch(c){case"OnBack":r.push(f);break;case"OnFront":u.push(f)}}}if(0!==u.length||0!==r.length){for(i=0;i<r.length-1;i+=2)s=r[i],h=r[i+1],s.cuttingBackPoint=!0,h.cuttingBackPoint=!0,s.alterCuttingBackPairIndex=h.index,h.alterCuttingBackPairIndex=s.index;for(i=0;i<u.length-1;i+=2)v=u[i],y=u[i+1],v.cuttingFrontPoint=!0,y.cuttingFrontPoint=!0,v.alterCuttingFrontPairIndex=y.index,y.alterCuttingFrontPairIndex=v.index;for(i=0;i<r.length-1;i++)!(s=r[i]).alreadyCutBack&&(g=this.cutOutBackPolygon(e,s)).length>2&&(rt=ve.polygon3D(g,n),p.push(ol({},rt)));for(i=0;i<u.length-1;i++)!(h=u[i]).alreadyCutFront&&(nt=this.cutOutFrontPolygon(e,h)).length>2&&(ut=ve.polygon3D(nt,n),w.push(ol({},ut)))}}else p.push(n),w.push(n);return{backPolygon:p,frontPolygon:w}},n.prototype.cutOutFrontPolygon=function(n,t){for(var e,r,u,f=[],i=t;;)if(i.alreadyCutFront=!0,f.push(i.vector),e=n[i.alterCuttingFrontPairIndex],i.cuttingFrontPoint)if(e.alreadyCutFront)if(r=n[this.getNext(i.index-1,n.length)],u=n[this.getNext(i.index+1,n.length)],"OnFront"!==r.result||r.alreadyCutFront){if("OnFront"!==u.result||u.alreadyCutFront)return f;i=u}else i=r;else i=e;else if(r=n[this.getNext(i.index-1,n.length)],u=n[this.getNext(i.index+1,n.length)],"OnBack"===r.result||r.alreadyCutFront){if("OnBack"===u.result||u.alreadyCutFront)return f;i=u}else i=r;return null},n.prototype.cutOutBackPolygon=function(n,t){for(var e,r,u,f=[],i=t;;)if(i.alreadyCutBack=!0,f.push(i.vector),e=n[i.alterCuttingBackPairIndex],i.cuttingBackPoint)if(e.alreadyCutBack)if(r=n[this.getNext(i.index-1,n.length)],u=n[this.getNext(i.index+1,n.length)],"OnBack"!==r.result||r.alreadyCutBack){if("OnBack"!==u.result||u.alreadyCutBack)return f;i=u}else i=r;else i=e;else if(r=n[this.getNext(i.index-1,n.length)],u=n[this.getNext(i.index+1,n.length)],"OnFront"===r.result||r.alreadyCutBack){if("OnFront"===u.result||u.alreadyCutBack)return f;i=u}else i=r;return null},n.prototype.build=function(n){var f,e,o,t,i,r,u;if(n){if(f=n,f.length<1)return null;e={back:null,front:null,plane:null};o=f[0];e.plane=o;for(var s=[],h=[],c=1,l=f.length;c<l;c++)if(t=f[c],t!==o)switch(this.classifyPolygon(o,t)){case"OnPlane":case"ToRight":h.push(t);break;case"ToLeft":s.push(t);break;case"Unknown":if(t.element&&("line"===t.element.tag||"text"===t.element.tag))s.push(t);else{for(i=this.splitPolygon(t,o),r=0;r<i.backPolygon.length;r++)i.backPolygon[r].name=i.backPolygon[r].name+"-back",s.push(i.backPolygon[r]);for(u=0;u<i.frontPolygon.length;u++)i.frontPolygon[u].name=i.frontPolygon[u].name+"-front",h.push(i.frontPolygon[u])}}return s.length>0&&(e.back=this.build(s)),h.length>0&&(e.front=this.build(h)),e}return this.build(this.chart.polygons)},n}(),vit=function(){function n(){}return n.prototype.getStringBuilder=function(){var n=[],t=0;return{append:function(i){return n[t++]=i,this},remove:function(t,i){return n.splice(t,i||1),this},insert:function(t,i){return n.splice(t,0,i),this},toString:function(t){return n.join(t||"")}}},n.prototype.hexToValue=function(n){var i,t;return 0===n.indexOf("rgba(")?(t=n.slice(5,-1).split(","))?{red:parseInt(t[0],10),green:parseInt(t[1],10),blue:parseInt(t[2],10),alpha:parseFloat(t[3])}:null:0===n.indexOf("rgb(")?(t=n.slice(4,-1).split(","))?{red:parseInt(t[0],10),green:parseInt(t[1],10),blue:parseInt(t[2],10)}:null:(i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n))?{red:parseInt(i[1],16),green:parseInt(i[2],16),blue:parseInt(i[3],16)}:null},n.prototype.hexColor=function(n){var i=n.red,r=n.green,u=n.blue,t;return n.alpha?"rgba("+i.toString()+","+r.toString()+","+u.toString()+","+n.alpha+")":(t=[i.toString(16),r.toString(16),u.toString(16)],t.forEach(function(n,i){1===n.length&&(t[i]="0"+n)}),"#"+t.join("").toUpperCase())},n.prototype.checkColorFormat=function(n){var t,i;if(0===n.indexOf("rgba(")||0===n.indexOf("rgb(")){if(t=n.substring(n.indexOf("(")+1,n.lastIndexOf(")")).split(","),3===t.length||4===t.length)return t.every(function(n){var t=parseFloat(n);return!isNaN(t)&&t>=0&&t<=255})}else if(0===n.indexOf("#"))return i=n.substring(1),(3===i.length||6===i.length)&&/^[0-9A-Fa-f]{3,6}$/.test(i);return!1},n.prototype.drawText=function(n,t,r,u){var f=document.getElementById(n.id),s,e,o;if(null===f&&(f=document.createElementNS("http://www.w3.org/2000/svg","text")),t.length>1&&"string"!=typeof t)for(s=0,e=0;e<t.length;e++)o=document.createElementNS("http://www.w3.org/2000/svg","tspan"),o.textContent=t[e],o.setAttribute("x",String(n.x)),o.setAttribute("dy",String(s)),f.appendChild(o),s=i.measureText(t[e],r,u.themeStyle.axisLabelFont).height;else f.textContent=t;return u.svgRenderer.setElementAttributes(n,f)},n.prototype.transform3DToVisible=function(n,t,i,r){var f,u,e,o;return null!=n.xAxis&&null!=n.yAxis?("Logarithmic"===n.xAxis.valueType&&t>0&&(t=Math.log(t)/Math.log(10)),f=n.yAxis.logBase,"Logarithmic"===n.yAxis.valueType&&i>0&&(i=Math.log(i)/Math.log(f)),r.requireInvertedAxis)?(u=r.chartAxisLayoutPanel.seriesClipRect.x,e=r.chartAxisLayoutPanel.seriesClipRect.y,{x:u+n.yAxis.rect.width*iu(i,n.yAxis),y:e+n.xAxis.rect.height*(1-iu(t,n.xAxis))}):(u=n.xAxis.rect.x,o=n.yAxis.rect.y,{x:u+Math.round(n.xAxis.rect.width*iu(t,n.xAxis)),y:o+Math.round(n.yAxis.rect.height*(1-iu(i,n.yAxis)))}):{x:0,y:0}},n}(),ky=function(){function n(){this.epsilon=1e-5;this.normal={x:0,y:0,z:0};this.vector=new ho(0,0,0);this.vectorPoints=[];this.matrixObj=new ch;this.tabIndex=!0}return n.prototype.polygon3D=function(n,t,i,r,u,f,e,o,s,h){if(3===arguments.length)return this.calculateNormal(n,t,i),null;if(2===arguments.length)return this.calculateNormal(n[0],n[1],n[2]),this.vectorPoints=n,this.calculateNormal(this.vectorPoints),(c=t).normal=this.normal,c.points=n,c.vectorPoints=this.vectorPoints,c.isSplit=!0,c.d=this.d,c;this.calculateNormal(n[0],n[1],n[2]);this.vectorPoints=n;this.calculateNormal(this.vectorPoints);var l={tag:"path",parent:s},c={normal:this.normal,points:n,vectorPoints:this.vectorPoints,index:i,tag:t,name:o||null,strokeThickness:u,opacity:f,fill:e,d:this.d,text:h||"",polygonElement:l};return 1!==arguments.length&&(c.polygonElement=l),c},n.prototype.createLine=function(n,t,i,r,u,f){var o=n.width,e=[];return e[0]=this.vector.vector3D(t,i,f),e[1]=this.vector.vector3D(t+o,u+o,f),e[2]=this.vector.vector3D(r,u,f),this.line3D(n,e)},n.prototype.line3D=function(n,t){var i=this.polygon3D(t);return i.element=n,i},n.prototype.text3D=function(n,t){var i=this.polygon3D(t);return i.element=n,i},n.prototype.createCylinder=function(n,t,i,r,u,f,e,o,s,h,c){var nt,tt,p,w,l=0,y=24,b=360/y,k=Math.PI/180,it=(n.z+t.z)/2,v=[],a=[],d=[],g=[],rt=t.y-n.y<t.z-n.z?(t.y-n.y)/2:(t.z-n.z)/2,ut=t.x-n.x<t.z-n.z?(t.x-n.x)/2:(t.z-n.z)/2,ft=(n.x+t.x)/2,et=(n.y+t.y)/2;switch(u){case"Bar":case"StackingBar":case"StackingBar100":for(y++;y--;)tt=et+rt*Math.cos(l*b*k),p=it+rt*Math.sin(l*b*k),a[l]={Y:tt,Z:p},d.push(this.vector.vector3D(n.x,a[l].Y,a[l].Z)),g.push(this.vector.vector3D(t.x,a[l].Y,a[l].Z)),l>0&&(w=[this.vector.vector3D(n.x,a[l-1].Y,a[l-1].Z),this.vector.vector3D(t.x,a[l-1].Y,a[l-1].Z),this.vector.vector3D(t.x,a[l].Y,a[l].Z),this.vector.vector3D(n.x,a[l].Y,a[l].Z)],v[l+1]=this.polygon3D(w,i,r,e,0,s,e,"-"+(l+1).toString()+"-"+h,c),cr.addVisual(v[l+1],i)),l++;break;case"Column":case"StackingColumn":case"StackingColumn100":for(y++;y--;)nt=ft+ut*Math.cos(l*b*k),p=it+ut*Math.sin(l*b*k),a[l]={Y:nt,Z:p},d.push(this.vector.vector3D(a[l].Y,n.y,a[l].Z)),g.push(this.vector.vector3D(a[l].Y,t.y,a[l].Z)),l>0&&(w=[this.vector.vector3D(a[l-1].Y,n.y,a[l-1].Z),this.vector.vector3D(a[l-1].Y,t.y,a[l-1].Z),this.vector.vector3D(a[l].Y,t.y,a[l].Z),this.vector.vector3D(a[l].Y,n.y,a[l].Z)],v[l+1]=this.polygon3D(w,i,r,e,0,s,e,"-"+(l+1).toString()+"-"+h,c),cr.addVisual(v[l+1],i)),l++}return v[0]=this.polygon3D(g,i,r,f,0,s,e,"-0-"+h,c),v[1]=this.polygon3D(d,i,r,f,o,s,e,"-1-"+h,c),cr.addVisual(v[0],i),cr.addVisual(v[1],i),v},n.prototype.createBox=function(n,t,i,r,u,f,e,o,s,h,c,l){var a=[],v=[this.vector.vector3D(n.x,n.y,n.z),this.vector.vector3D(t.x,n.y,n.z),this.vector.vector3D(t.x,t.y,n.z),this.vector.vector3D(n.x,t.y,n.z)],y=[this.vector.vector3D(n.x,n.y,t.z),this.vector.vector3D(t.x,n.y,t.z),this.vector.vector3D(t.x,t.y,t.z),this.vector.vector3D(n.x,t.y,t.z)],p=[this.vector.vector3D(n.x,n.y,t.z),this.vector.vector3D(t.x,n.y,t.z),this.vector.vector3D(t.x,n.y,n.z),this.vector.vector3D(n.x,n.y,n.z)],w=[this.vector.vector3D(n.x,t.y,t.z),this.vector.vector3D(t.x,t.y,t.z),this.vector.vector3D(t.x,t.y,n.z),this.vector.vector3D(n.x,t.y,n.z)],b=[this.vector.vector3D(n.x,n.y,n.z),this.vector.vector3D(n.x,n.y,t.z),this.vector.vector3D(n.x,t.y,t.z),this.vector.vector3D(n.x,t.y,n.z)],k=[this.vector.vector3D(t.x,n.y,n.z),this.vector.vector3D(t.x,n.y,t.z),this.vector.vector3D(t.x,t.y,t.z),this.vector.vector3D(t.x,t.y,n.z)];return h?(a[0]=this.polygon3D(v,i,r,u,e,o,f,"-0-"+h,c,l),a[1]=this.polygon3D(y,i,r,u,e,o,f,"-1-"+h,c,l),a[2]=this.polygon3D(p,i,r,u,e,o,f,"-2-"+h,c,l),a[3]=this.polygon3D(w,i,r,u,e,o,f,"-3-"+h,c,l),a[4]=this.polygon3D(b,i,r,u,e,o,f,"-4-"+h,c,l),a[5]=this.polygon3D(k,i,r,u,e,o,f,"-5-"+h,c,l)):(a[0]=this.polygon3D(v,i,r,u,e,o,f,"-0-"+r,c,l),a[1]=this.polygon3D(y,i,r,u,e,o,f,"-1-"+r,c,l),a[2]=this.polygon3D(p,i,r,u,e,o,f,"-2-"+r,c,l),a[3]=this.polygon3D(w,i,r,u,e,o,f,"-3-"+r,c,l),a[4]=this.polygon3D(b,i,r,u,e,o,f,"-4-"+r,c,l),a[5]=this.polygon3D(k,i,r,u,e,o,f,"-5-"+r,c,l)),s?(cr.addVisual(a[0],i),cr.addVisual(a[1],i),cr.addVisual(a[2],i),cr.addVisual(a[3],i),cr.addVisual(a[4],i),cr.addVisual(a[5],i)):(cr.addVisual(a[5],i),cr.addVisual(a[4],i),cr.addVisual(a[0],i),cr.addVisual(a[1],i),cr.addVisual(a[2],i),cr.addVisual(a[3],i)),a},n.prototype.calculateNormal=function(){for(var t,u,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(n.length>=3){var f=n[0],o=n[1],s=n[2],h=this.vector.vector3DMinus(f,o),c=this.vector.vector3DMinus(s,o),e=this.vector.vector3DMultiply(h,c),r=this.vector.getLength(e);r<this.epsilon&&(r=1);this.normal=this.vector.vector3D(e.x/r,e.y/r,e.z/r);this.d=-(this.normal.x*f.x+this.normal.y*f.y+this.normal.z*f.z);n[3]&&(n[3].normal=this.normal,n[3].d=this.d)}else for(t=n[0],this.calculateNormal(t[0],t[1],t[2],n[1]),u=3;u<t.length&&this.test();u++)this.calculateNormal(t[u],t[0],t[u/2])},n.prototype.test=function(){return!this.vector.isValid(this.normal)},n.prototype.transform=function(n,t){if(null!=t.points){for(var i=0;i<t.points.length;i++)t.vectorPoints[i]=t.points[i]=ls.getMatrixVectorMultiple(n,t.points[i]);this.calculateNormal(t.vectorPoints,t)}},n.prototype.getNormal=function(n,t){var r,i;if(null!=t)for(r=this.vector.getNormal(this.matrixObj.getMatrixVectorMultiple(n,t[0]),ls.getMatrixVectorMultiple(n,t[1]),this.matrixObj.getMatrixVectorMultiple(n,t[2])),i=3;i<t.length&&!this.vector.isValid(r)&&t[i/2];i++){var u=ls.getMatrixVectorMultiple(n,t[i]),f=ls.getMatrixVectorMultiple(n,t[0]),e=ls.getMatrixVectorMultiple(n,t[i/2]);r=this.vector.getNormal(u,f,e)}else r=ls.getMatrixVectorAnd(n),this.vector.normalize();return r},n.prototype.createTextElement=function(n,t,i,r){var u=[],f=n.x,e=n.y,o=t.width,s=t.height;return u[0]=this.vector.vector3D(f,e,n.z),u[1]=this.vector.vector3D(f+o,e+s+r,n.z),u[2]=this.vector.vector3D(f+o+i,e+s+r,n.z),this.text3D(t,u)},n.prototype.drawLine=function(n,t){var r=fi.transform,f,i;if(null!=r){var e=t.transform3D.toScreen(n.vectorPoints[0],r),o=t.transform3D.toScreen(n.vectorPoints[2],r),u={id:n.element.id,x1:e.x,y1:e.y,x2:o.x,y2:o.y,"stroke-dasharray":"","stroke-width":n.element.width,stroke:n.element.stroke,opacity:n.element.opacity};(t.chart3D.appendChild(t.svgRenderer.drawLine(u)),t.previousID&&t.isTouch)&&(f=document.getElementById(t.previousID),i=document.getElementById(u.id),f&&i&&i.parentNode.insertBefore(i,f.nextSibling));t.previousID=u.id}},n.prototype.drawTemplate=function(n,t){var r=n.element,u=fi.transform,i,f;null!=u&&(i=r.label,f=t.transform3D.toScreen(n.vectorPoints[0],u),t.dataLabel3DModule.createDataLabelTemplate(i.series.dataLabelElement,i.series,i.series.dataLabel,i.series.visiblePoints[i.pointIndex],r.argsData,i.pointIndex,!1,f))},n.prototype.drawText=function(n,t){var r=n.element,s=fi.transform,l,o;if(null!=s){var e=t.transform3D.toScreen(n.vectorPoints[0],s),h=e.x,c=e.y;if("text"===r.tag)l={id:r.id,x:h,y:c,fill:r.font.color||r.fill,"font-size":r.font.size,"font-family":r.font.fontFamily,"font-style":r.font.fontStyle,"font-weight":r.font.fontWeight,opacity:r.font.opacity,"text-anchor":r.textAnchor,cursor:"default",transform:r.angle?"rotate("+r.angle+","+h+","+c+")":""},o=t.svg3DRenderer.drawText(l,r.label.text,n.element.font,t),r.id.indexOf("-axis-title")>-1&&o.setAttribute("aria-hidden","true"),t.chart3D.append(o);else{var f=r.series,a=f.yAxis&&f.yAxis.labelFormat?f.yAxis.labelFormat:"",w=r.point.text?r.point.text:r.point.y+a.substring(a.indexOf("}")+1),v=i.measureText(w,f.dataLabel.font,t.themeStyle.datalabelFont),u=f.dataLabel.margin,b=v.width+u.left+u.right,y=v.height+u.top+u.bottom,p={x:e.x,y:e.y},k=p.x-u.left/2+u.right/2,d=p.y-u.top/2-y/u.top+u.bottom/2,g=f.index;this.dataLabelSymbol(g,f,r.pointIndex,k,d,b,y,t)}}},n.prototype.dataLabelSymbol=function(n,t,i,r,u,f,e,o){var s="M "+(r+-f/2)+" "+(u+-e/2)+" L "+(r+f/2)+" "+(u+-e/2)+" L "+(r+f/2)+" "+(u+e/2)+" L "+(r+-f/2)+" "+(u+e/2)+" L "+(r+-f/2)+" "+(u+-e/2)+" z",h={id:o.element.id+"-svg-data-label-series-"+n+"-point-"+i,fill:t.dataLabel.fill,"stroke-width":t.dataLabel.border.width,"stroke-dasharray":t.dataLabel.border.dashArray,stroke:t.dataLabel.border.color,opacity:t.dataLabel.opacity,visibility:"",d:s},c=o.svgRenderer.drawPath(h);o.chart3D.append(c)},n.prototype.draw=function(n,t){var e,s,y,h,r,c,p,l;if(!(null==n.vectorPoints||n.vectorPoints.length<=0)){var a=fi.transform,v=t.svg3DRenderer.getStringBuilder(),i=n.fill;if(t.svg3DRenderer.checkColorFormat(i)||"transparent"!==i&&(i=vi(i)),e={StartPoint:null},null!=a)for(e.StartPoint=t.transform3D.toScreen(n.vectorPoints[0],a),v.append("M "+e.StartPoint.x+" "+e.StartPoint.y+" "),s=0;s<n.vectorPoints.length;s++)y=t.transform3D.toScreen(n.vectorPoints[s],a),v.append("L "+y.x+" "+y.y+" ");var w=v.toString(),u="Light",f=2*(Math.abs(this.vector.vector3DAdd(n.normal,this.vector.vector3D(0,0,1)))-1),b=2*(Math.abs(this.vector.vector3DAdd(n.normal,this.vector.vector3D(0,1,0)))-1),k=2*(Math.abs(this.vector.vector3DAdd(n.normal,this.vector.vector3D(1,0,0)))-1);!n.name||n.name.indexOf("-wall-brush")>-1||(f===k?(u="ZLight",i=this.applyZLight(i,t)):b===f||0!==f&&b<f?(u="XLight",i=this.applyXLight(i,t)):f<0?(u="ZLight",i=this.applyZLight(i,t)):u="Light");h={id:t.element.id+"-svg"+n.name,name:u,fill:i,stroke:"","stroke-width":n.strokeThickness,opacity:n.opacity,d:w};r=t.svgRenderer.drawPath(h);(n.text&&(r.setAttribute("aria-label",n.text),r.setAttribute("role","img")),n.name&&n.name.indexOf("-wall-brush")>-1&&r.setAttribute("aria-hidden","true"),r.id.indexOf("0-region-series-0-point-0")>-1)&&(this.tabIndex?r.setAttribute("tabindex","0"):(c=n.polygonElement.parent.querySelectorAll('[id*="0-region-series-0-point-0"]'),c.length>0&&c[c.length-1].removeAttribute("tabindex"),r.setAttribute("tabindex","0")),this.tabIndex=!1);(o(!1,n.polygonElement.parent,r,t.redraw,!0,"x","y",null,w),t.previousID&&t.isTouch)&&(p=document.getElementById(t.previousID),l=document.getElementById(h.id),p&&l&&l.parentNode.insertBefore(l,p.nextSibling));t.previousID=h.id}},n.prototype.applyXLight=function(n,t){var i=t.svg3DRenderer.hexToValue(n);return i.red=parseInt((.7*i.red).toString(),10),i.green=parseInt((.7*i.green).toString(),10),i.blue=parseInt((.7*i.blue).toString(),10),t.svg3DRenderer.hexColor(i)},n.prototype.applyZLight=function(n,t){var i=t.svg3DRenderer.hexToValue(n);return i.red=parseInt((.9*i.red).toString(),10),i.green=parseInt((.9*i.green).toString(),10),i.blue=parseInt((.9*i.blue).toString(),10),t.svg3DRenderer.hexColor(i)},n}(),hf=new ho(0,0,0),ls=new ch,yit=new by,ve=new ky,cr=new wy;var pit=function(){function n(){}return n.prototype.update3DWall=function(n){var t,i,r;for(this.updateBackWall(n),t=0;t<n.axisCollections.length;t++)i=n.axisCollections[t],r=i.opposedPosition||i.isAxisOpposedPosition,"vertical"===i.orientation.toLowerCase()?r?this.updateRightWall(n):this.updateLeftWall(n):r?this.updateTopWall(n):this.updateBottomWall(n)},n.prototype.updateTopWall=function(n){var u,t=n.chartAxisLayoutPanel.seriesClipRect,i=t.y;u=n.wallSize<i?i-n.wallSize:-(n.wallSize-i);for(var e=n.vector.vector3D(t.x+t.width,-n.depth,i-.1),o=n.vector.vector3D(t.x,-.1,u),f=n.polygon.createBox(e,o,n,0,n.wallColor||n.themeStyle.leftWallColor,n.wallColor||n.themeStyle.leftWallColor,0,n.theme.indexOf("Fluent2")>-1?.3:n.theme.indexOf("Bootstrap5")>-1?.1:.5,!1,"top-wall-brush",n.chart3D),r=0;r<f.length;r++)n.polygon.transform(n.matrixObj.tilt(Math.PI/2),f[r])},n.prototype.updateRightWall=function(n){for(var t=n.chartAxisLayoutPanel.seriesClipRect,u=t.x+t.width,i={left:-n.depth,top:t.y,bottom:t.height+t.y,right:0},e=n.vector.vector3D(i.left,i.top,u+1.5),o=n.vector.vector3D(i.right,i.bottom,u+n.wallSize),f=n.polygon.createBox(e,o,n,0,n.wallColor||n.themeStyle.leftWallColor,n.wallColor||n.themeStyle.leftWallColor,0,n.theme.indexOf("Fluent2")>-1?.3:n.theme.indexOf("Bootstrap5")>-1?.1:.5,!1,"right-wall-brush",n.chart3D),r=0;r<f.length;r++)n.polygon.transform(n.matrixObj.turn(-Math.PI/2),f[r])},n.prototype.updateBackWall=function(n){var t=n.chartAxisLayoutPanel.seriesClipRect,i=n.vector.vector3D(t.x,t.y,0===n.depth?1.5:n.depth+n.wallSize),r=n.vector.vector3D(t.x+t.width,t.y+t.height,0===n.depth?1.5:n.depth);n.polygon.createBox(i,r,n,0,n.wallColor||n.themeStyle.backWallColor,n.wallColor||n.themeStyle.backWallColor,0,n.theme.indexOf("Fluent2")>-1?.3:n.theme.indexOf("Bootstrap5")>-1?.1:.25,!1,"back-wall-brush",n.chart3D)},n.prototype.updateLeftWall=function(n){for(var t=n.chartAxisLayoutPanel.seriesClipRect,i={left:-n.depth,top:t.y,bottom:t.height+t.y,right:0},u=t.x,e=n.vector.vector3D(i.left,i.top,u-.1),o=n.vector.vector3D(i.right,i.bottom,u-n.wallSize),f=n.polygon.createBox(e,o,n,0,n.wallColor||n.themeStyle.leftWallColor,n.wallColor||n.themeStyle.leftWallColor,0,n.theme.indexOf("Fluent2")>-1?.3:n.theme.indexOf("Bootstrap5")>-1?.1:.5,!1,"left-wall-brush",n.chart3D),r=0;r<f.length;r++)n.polygon.transform(n.matrixObj.turn(-Math.PI/2),f[r])},n.prototype.updateBottomWall=function(n){for(var t=n.chartAxisLayoutPanel.seriesClipRect,r=t.y+t.height,f=n.vector.vector3D(t.x+t.width,-n.depth,n.wallSize+r),e=n.vector.vector3D(t.x,-.1,r+1),u=n.polygon.createBox(e,f,n,0,n.wallColor||n.themeStyle.leftWallColor,n.wallColor||n.themeStyle.leftWallColor,0,n.theme.indexOf("Fluent2")>-1?.3:n.theme.indexOf("Bootstrap5")>-1?.1:.5,!1,"bottom-wall-brush",n.chart3D),i=0;i<u.length;i++)n.polygon.transform(n.matrixObj.tilt(Math.PI/2),u[i])},n}(),wit=function(){function n(){}return n.prototype.drawAxes=function(n,t,i){t.majorGridLines.width&&this.drawGridLines3D(t,i,n);t.visible&&t.internalVisibility&&t.majorTickLines.width&&this.renderTicks3D(t,t.majorTickLines.height,t.majorTickLines.width,i,n);t.visible&&t.internalVisibility&&(this.drawAxisLabel(t,i,n),this.drawAxisTitle(t,i,n))},n.prototype.drawAxisTitle=function(n,t,r){var f,y,s,o,u,p;if(n.title){var a={size:n.titleStyle.size||t.themeStyle.axisTitleFont.size,fontWeight:n.titleStyle.fontWeight||t.themeStyle.axisTitleFont.fontWeight,fontStyle:n.titleStyle.fontStyle||t.themeStyle.axisTitleFont.fontStyle,fontFamily:n.titleStyle.fontFamily||t.themeStyle.axisTitleFont.fontFamily,color:n.titleStyle.color,opacity:n.titleStyle.opacity},h=n.opposedPosition||n.isAxisOpposedPosition,v={width:t.availableSize.width,height:t.availableSize.height},e=t.transform3D.transform3D(v);if(e.viewingArea=v,e.rotation=0,e.tilt=0,e.depth=100,e.perspectiveAngle=90,t.transform3D.transform(e),"horizontal"===n.orientation.toLowerCase()){f=0;y=i.measureText(n.title,n.titleStyle,t.themeStyle.axisTitleFont).height/2;f=n.titleRotation?n.titlePadding+10+n.labelPadding+n.titleSize.height/2:n.titlePadding+y+n.labelPadding+10;var w=n.maxLabelSize.height+f,c=(o={text:n.title,location:{x:n.rect.width/2,y:w+n.majorTickLines.height+t.wallSize}}).location.x+n.rect.x,l=h?n.rect.y-o.location.y:o.location.y+n.rect.y;(u={width:0,height:0,angle:n.titleRotation?n.titleRotation:0,label:o,textAnchor:"middle",tag:"text",font:a,id:t.element.id+"-svg-axis-title-"+r,child:t.chart3D}).font.color=u.font.color?u.font.color:t.themeStyle.axisTitle;u.font.fontFamily=u.font.fontFamily?u.font.fontFamily:t.themeStyle.axisTitleFont.fontFamily;t.graphics.addVisual(t.polygon.createTextElement(t.vector.vector3D(c,l,0),u,10,10),t)}else s=i.measureText(n.title,n.titleStyle,t.themeStyle.axisTitleFont),f=0,f=n.titleRotation?n.labelPadding+n.titlePadding+n.titleSize.width/2:n.titlePadding+n.labelPadding,c=h?n.rect.x+(10+n.maxLabelSize.width+n.majorTickLines.height+t.wallSize+f):n.rect.x-(10+n.maxLabelSize.width+n.majorTickLines.height+t.wallSize+f),p=(null==n.titleRotation?h?90:-90:n.titleRotation)%360,l=(o={text:n.title,location:{x:s.width/2,y:0}}).location.y+(n.rect.y+n.rect.height)+n.rect.height/-2,(u={width:s.width,height:s.height,angle:p,label:o,textAnchor:"middle",tag:"text",font:a,id:t.element.id+"-svg-axis-title-"+r,child:t.chart3D}).font.color=u.font.color?u.font.color:t.themeStyle.axisTitle,u.font.fontFamily=u.font.fontFamily?u.font.fontFamily:t.themeStyle.axisTitleFont.fontFamily,t.graphics.addVisual(t.polygon.createTextElement(t.vector.vector3D(c,l,0),u,10,10),t)}},n.prototype.textTrim=function(n,t,r,u){var e,o=t.length,f;if(i.measureText(t,r,u).width>n){for(f=o-1;f>=0;--f)if(e=t.substring(0,f)+"...",i.measureText(e,r,u).width<=n)return e;return""}return t},n.prototype.multipleRows=function(n,t,r,u,f){for(var e,s,h=[],o=n-1;o>=0;o--)e=u.visibleLabels[o],s=i.measureText(e.text,u.labelStyle,f),t<iu(o,u)*u.rect.width+u.rect.x+s.width/2?(e.index=e.index?e.index:0,h.push(e.index),r.index=r.index>e.index?r.index:e.index+1):r.index=h.indexOf(e.index)>-1?r.index:e.index},n.prototype.drawAxisLabel=function(n,r,u){for(var d,it,o,g,p,rt,h,nt,c=[],ut=n.visibleLabels.length,v=r.chartAxisLayoutPanel.seriesClipRect,y=n.opposedPosition||n.isAxisOpposedPosition,w=n.angle?5:10,tt=v.y+(!y&&v.height),ft=v.x+(y&&v.width),f=0;f<ut;f++)if(!t.isNullOrUndefined(n.visibleLabels[f].text)){var l=0,e=0,b=void 0;n.visibleLabels[f].originalText=n.visibleLabels[f].text;var k=void 0,a=i.measureText(n.visibleLabels[f].text,n.labelStyle,r.themeStyle.axisLabelFont),s=(n.visibleLabels[f].value-n.visibleRange.min)/n.visibleRange.delta;if((s=n.isInversed||n.isAxisInverse?1-s:s,s=isNaN(s)?0:s,"horizontal"===n.orientation.toLowerCase())?(l=Math.round(n.rect.width*s)+v.x+n.plotOffset,e=y?tt-r.wallSize-n.majorTickLines.height-n.labelPadding-w/2:tt+r.wallSize+n.majorTickLines.height+w+n.labelPadding,k="middle"):(e=Math.round(n.plotOffset+n.rect.y+a.height/4+n.rect.height*(1-s)),d=90===n.labelRotation||-90===n.labelRotation||270===n.labelRotation||-270===n.labelRotation?2*w:w,l=y?n.rect.x+n.majorTickLines.height+d+n.labelPadding:ft-r.wallSize-n.majorTickLines.height-d+n.labelPadding,k=y?n.isRTLEnabled?"end":"start":n.isRTLEnabled?"start":"end"),c.push({x:l,y:e,size:a}),it=n.rect.width/n.visibleLabels.length-5,o=c[f],(o.x>n.rect.x&&0===f||o.x+o.size.width/2>n.rect.x+n.rect.width&&f===n.visibleLabels.length-1)&&"Trim"!==n.labelIntersectAction&&n.labelIntersectAction.indexOf("wrap")<0){if("Hide"===n.edgeLabelPlacement)continue;"Shift"===n.edgeLabelPlacement&&(0===f?o.x=l=n.rect.x+o.size.width/2:f===n.visibleLabels.length-1&&(o.x=l=n.rect.x+n.rect.width-o.size.width/2))}if("horizontal"===n.orientation.toLowerCase())if(n.labelRotation)nt=n.labelRotation,e+=yu(n.labelStyle,n.visibleLabels[f].text,nt,r,r.themeStyle.axisLabelFont).height/2;else if("Trim"===n.labelIntersectAction)n.visibleLabels[f].text=this.textTrim(it,n.visibleLabels[f].text,n.labelStyle,r.themeStyle.axisLabelFont);else if(n.angle&&("Rotate45"===n.labelIntersectAction||"Rotate90"===n.labelIntersectAction))e+=yu(n.labelStyle,n.visibleLabels[f].text,n.angle,r,r.themeStyle.axisLabelFont).height/2;else if("MultipleRows"===n.labelIntersectAction)b=o.x,b-=a.width/2,this.multipleRows(f,b,n.visibleLabels[f],n,r.themeStyle.axisLabelFont),e=n.visibleLabels[f].index?e+n.visibleLabels[f].index*(a.height+5):e;else if("Hide"===n.labelIntersectAction){for(g=!1,p=0;p<f;p++)if(c[p].x+c[p].size.width/2>=c[f].x-c[f].size.width/2){g=!0;break}if(g)continue}rt={size:n.visibleLabels[f].labelStyle.size,fontWeight:n.visibleLabels[f].labelStyle.fontWeight,fontStyle:n.visibleLabels[f].labelStyle.fontStyle,fontFamily:n.visibleLabels[f].labelStyle.fontFamily,color:n.visibleLabels[f].labelStyle.color,opacity:n.visibleLabels[f].labelStyle.opacity};h={width:a.width,height:a.height,label:n.visibleLabels[f],textAnchor:k,tag:"text",font:rt,id:r.element.id+"-"+u+"-axis-label-"+f,child:r.chart3D,angle:n.angle};h.font.color=h.font.color?h.font.color:r.themeStyle.axisLabel;h.font.fontFamily=h.font.fontFamily?h.font.fontFamily:r.themeStyle.axisLabelFont.fontFamily;r.graphics.addVisual(r.polygon.createTextElement(r.vector.vector3D(l,e,0),h,10,10),r)}},n.prototype.renderTicks3D=function(n,t,i,r,u){var d,c=n.visibleLabels.length,l=r.chartAxisLayoutPanel.seriesClipRect,w="Category"===n.valueType&&"BetweenTicks"===n.labelPlacement?.5:0,e,o,b,s,h,k;for(c+="Category"===n.valueType&&c>0&&"BetweenTicks"===n.labelPlacement?1:0,e=0;e<c;e++){var a=0,v=0,y=0,p=0,f=(("DateTimeCategory"!==n.valueType?n.visibleLabels[e]?n.visibleLabels[e].value-w:n.visibleLabels[e-1].value+n.visibleRange.interval-w:n.visibleLabels[e].value?n.visibleLabels[e].value-w:n.visibleRange.max)-n.visibleRange.min)/n.visibleRange.delta;if(f=n.isInversed||n.isAxisInverse?1-f:f,f=isNaN(f)?0:f,"horizontal"===n.orientation.toLowerCase()?v=a=Math.round(n.rect.width*f)+l.x+n.plotOffset:y=p=Math.round(n.plotOffset+n.rect.height*(1-f))+n.rect.y,o=this.calculatePosition3D(n,t,i,a,y,v,p,r),b={width:n.majorTickLines.width,opacity:1,stroke:n.majorTickLines.color||r.themeStyle.majorTickLine,child:r.chart3D,tag:"line",id:""},b.id=r.element.id+"-"+u+"-major-tick-lines-"+e,r.graphics.addVisual(r.polygon.createLine(b,o.x1,o.y1,o.x2,o.y2,0),r),n.minorGridLines.width&&n.minorTicksPerInterval>0&&e<c-1)for(d=n.visibleRange.interval/(n.minorTicksPerInterval+1),s=0;s<n.minorTicksPerInterval;s++)f=iu(n.visibleLabels[e].value+d*(s+1),n),f=isNaN(f)?0:f,"horizontal"===n.orientation.toLowerCase()?a=v=Math.round(n.plotOffset+l.width*f+l.x):y=p=Math.round(n.plotOffset+l.height*(1-f))+n.rect.y,h=this.calculatePosition3D(n,t,i,a,y,v,p,r),k={width:n.minorTickLines.width,opacity:.6,stroke:n.minorTickLines.color||r.themeStyle.minorTickLine,child:r.chart3D,tag:"line",id:""},k.id=r.element.id+"-"+u+"-minor-tick-lines-"+e+"-"+s,r.graphics.addVisual(r.polygon.createLine(k,h.x1,h.y1,h.x2,h.y2,0),r)}},n.prototype.calculatePosition3D=function(n,t,i,r,u,f,e,o){var s=n.opposedPosition||n.isAxisOpposedPosition,h=o.chartAxisLayoutPanel.seriesClipRect,a=h.y+(!s&&h.height),v=h.x+(s&&h.width),c,l;return"horizontal"===n.orientation.toLowerCase()?(u=0,e=s?t:u+t,c=s?a-o.wallSize-t:a+o.wallSize-t/2,u+=c,e+=c,r=f=r):(r=0,f=s?r+t:t,l=s?v+o.wallSize:v-o.wallSize-t,r+=l,f+=l,u=e=u),{x1:r,y1:u,x2:f,y2:e}},n.prototype.drawGridLines3D=function(n,t,i){var u,r,h,a,g,d,w,c,v,nt,tt,f,it,rt,ot,y,ut,ft;if(null!=n){var k,l,e,o,s,p=n.visibleLabels.length,et=n.opposedPosition||n.isAxisOpposedPosition,st=n.orientation,b="Category"===n.valueType&&"BetweenTicks"===n.labelPlacement?.5:0;if(p+="Category"===n.valueType&&p>0&&"BetweenTicks"===n.labelPlacement?1:0,u=t.chartAxisLayoutPanel.seriesClipRect,"horizontal"===st.toLowerCase()){for(r=void 0,r=0;r<p;r++)if(h=iu("DateTimeCategory"!==n.valueType?n.visibleLabels[r]?n.visibleLabels[r].value-b:n.visibleLabels[r-1].value+n.visibleRange.interval-b:n.visibleLabels[r].value?n.visibleLabels[r].value-b:n.visibleRange.max,n),h=isNaN(h)?0:h,e=l=Math.round(n.rect.width*h)+u.x+n.plotOffset,o=u.y,s=u.y+u.height,a=t.depth>2?t.depth-2:1,g=u.y+(!et&&u.height),(f={opacity:1,width:n.majorGridLines.width,stroke:n.majorGridLines.color||t.themeStyle.majorGridLine,child:t.chart3D,tag:"line",id:""}).id=t.element.id+"-"+i+"-grid-lines-"+r,t.graphics.addVisual(t.polygon.createLine(f,l,o,e,s,a),t),d={opacity:f.opacity,width:f.width,stroke:f.stroke,child:f.child,tag:f.tag,id:""},d.id=f.id+"-parallel",d.id=t.element.id+"-"+i+"-parallel-grid-lines-"+r,w=t.polygon.createLine(d,e,0,e,-a,g),t.polygon.transform(t.matrixObj.tilt(Math.PI/2),w),t.graphics.addVisual(w,t),n.minorGridLines.width&&n.minorTicksPerInterval>0&&r<p-1)for(k=n.visibleRange.interval/(n.minorTicksPerInterval+1),c=0;c<n.minorTicksPerInterval;c++)h=iu(n.visibleLabels[r].value+k*(c+1),n),h=isNaN(h)?0:h,e=l=Math.round(u.width*h)+u.x,o=u.y,s=u.y+u.height,v={opacity:.6,width:n.minorGridLines.width,stroke:n.minorGridLines.color||t.themeStyle.minorGridLine,child:t.chart3D,tag:"line",id:""},v.id=t.element.id+"-"+i+"-minor-grid-lines-"+r+"-"+c,t.graphics.addVisual(t.polygon.createLine(v,l,o,e,s,a),t),nt={opacity:v.opacity,width:v.width,stroke:v.stroke,child:v.child,tag:v.tag,id:""},nt.id=t.element.id+"-"+i+"-parallel-minor-grid-lines-"+r+"-"+c,tt=t.polygon.createLine(nt,e,0,e,-a,g),t.polygon.transform(t.matrixObj.tilt(Math.PI/2),tt),t.graphics.addVisual(tt,t)}else for(r=0;r<p;r++)if(h=((n.visibleLabels[r]?n.visibleLabels[r].value-b:n.visibleLabels[r-1].value+n.visibleRange.interval-b)-n.visibleRange.min)/n.visibleRange.delta,l=u.x,o=Math.round(n.rect.height*(1-h))+.5,o+=n.rect.y,e=l+u.width,s=o,a=t.depth>2?t.depth-2:1,(f={opacity:1,width:n.majorGridLines.width,stroke:n.majorGridLines.color||t.themeStyle.majorGridLine,axisName:n.name,child:t.chart3D,tag:"line",id:""}).id=t.element.id+"-"+i+"-grid-lines-"+r,t.graphics.addVisual(t.polygon.createLine(f,l,o,e,s,a),t),it=u.x+(et&&u.width+1),rt={opacity:f.opacity,width:f.width,stroke:f.stroke,child:f.child,tag:f.tag,id:""},rt.id=t.element.id+"-"+i+"-parallel-grid-lines-"+r,w=t.polygon.createLine(rt,-a,s,0,s,it),t.polygon.transform(t.matrixObj.turn(-Math.PI/2),w),t.graphics.addVisual(w,t),n.minorGridLines.width&&n.minorTicksPerInterval>0&&r<p-1)for(k=n.visibleRange.interval/(n.minorTicksPerInterval+1),c=0;c<n.minorTicksPerInterval;c++)ot=iu(n.visibleLabels[r].value+k*(c+1),n),l=u.x,o=Math.round(n.rect.height*(1-ot))+.5,o+=n.rect.y,e=l+u.width,s=o,y={opacity:.6,width:n.minorGridLines.width,stroke:n.minorGridLines.color||t.themeStyle.minorGridLine,axisName:n.name,child:t.chart3D,tag:"line",id:""},y.id=t.element.id+"-"+i+"-minor-grid-lines-"+r+"-"+c,t.graphics.addVisual(t.polygon.createLine(y,l,o,e,s,a),t),ut={opacity:y.opacity,width:y.width,stroke:y.stroke,child:y.child,tag:y.tag,id:""},ut.id=t.element.id+"-"+i+"-parallel-minor-grid-lines-"+r+c,ft=t.polygon.createLine(ut,-a,s,0,s,it),t.polygon.transform(t.matrixObj.turn(-Math.PI/2),ft),t.graphics.addVisual(ft,t)}},n}(),lh=function(){function n(n,t){n<t?(this.mStart=n,this.mEnd=t):(this.mStart=t,this.mEnd=n)}return Object.defineProperty(n.prototype,"start",{get:function(){return this.mStart},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this.mEnd},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"delta",{get:function(){return this.mEnd-this.mStart},enumerable:!0,configurable:!0}),n}(),sl=function(){function n(n){this.isColumn=0;this.isStacking=!1;this.chart=n}return n.prototype.calculateNumericNiceInterval=function(n,i,r){var o=ke(r,n),u=i/o,e;if(!t.isNullOrUndefined(n.desiredIntervals))return u;for(var h=Math.pow(10,Math.floor(hi(u,10))),f=0,s=n.intervalDivs;f<s.length;f++){if(e=h*s[f],o<i/e)break;u=e}return u},n.prototype.getActualRange=function(n,t){this.initializeDoubleRange(n);!n.startFromZero&&this.isColumn>0?(n.actualRange.interval=n.interval||this.calculateNumericNiceInterval(n,n.doubleRange.delta,t),n.actualRange.max=n.doubleRange.end+n.actualRange.interval,n.actualRange.min=n.doubleRange.start-n.actualRange.interval<0&&n.doubleRange.start>0?0:n.doubleRange.start-(this.isStacking?0:n.actualRange.interval)):(n.actualRange.interval=n.interval||this.calculateNumericNiceInterval(n,n.doubleRange.delta,t),n.actualRange.min=n.doubleRange.start,n.actualRange.max=n.doubleRange.end)},n.prototype.initializeDoubleRange=function(n){null!==n.minimum?this.min=n.minimum:null!==this.min&&this.min!==Number.POSITIVE_INFINITY||(this.min=0);null!==n.maximum?this.max=n.maximum:null!==this.max&&this.max!==Number.NEGATIVE_INFINITY||(this.max=5);this.min===this.max&&(this.max=n.valueType.indexOf("Category")>-1?this.max:this.min+1);n.doubleRange=new lh(this.min,this.max);n.actualRange={}},n.prototype.calculateRangeAndInterval=function(n,t){this.calculateRange(t);this.getActualRange(t,n);this.applyRangePadding(t,n);this.calculateVisibleLabels(t,this.chart)},n.prototype.calculateRange=function(n){var r,u,i;if(this.min=null,this.max=null,!nr(n))for(r=0,u=n.series;r<u.length;r++)i=u[r],i.visible&&(this.paddingInterval=0,t.isNullOrUndefined(i.points)||(n.maxPointLength=i.points.length),n.maxPointLength=i.points.length,(i.type.indexOf("Column")>-1&&"Horizontal"===n.orientation||i.type.indexOf("Bar")>-1&&"Vertical"===n.orientation)&&("Double"!==i.xAxis.valueType&&"DateTime"!==i.xAxis.valueType||"Auto"!==i.xAxis.rangePadding||(this.paddingInterval=.5*dy(i.xAxis,n.series))),"Horizontal"===n.orientation&&(this.chart.requireInvertedAxis?this.yAxisRange(n,i):this.findMinMax(i.xMin-this.paddingInterval,i.xMax+this.paddingInterval)),"Vertical"===n.orientation&&(this.isColumn+=-1!==i.type.indexOf("Column")||-1!==i.type.indexOf("Bar")?1:0,this.isStacking=-1!==i.type.indexOf("Stacking"),this.chart.requireInvertedAxis?this.findMinMax(i.xMin-this.paddingInterval,i.xMax+this.paddingInterval):this.yAxisRange(n,i)))},n.prototype.yAxisRange=function(n,t){this.findMinMax(t.yMin,t.yMax)},n.prototype.findMinMax=function(n,t){(null===this.min||this.min>n)&&(this.min=n);(null===this.max||this.max<t)&&(this.max=t);this.max===this.min&&this.max<0&&this.min<0&&(this.max=0)},n.prototype.applyRangePadding=function(n,t){var u=n.actualRange.min,f=n.actualRange.max,i,r;nr(n)||(i=n.actualRange.interval,r=n.getRangePadding(this.chart),"Additional"===r||"Round"===r?this.findAdditional(n,u,f,i,t):"Normal"===r?this.findNormal(n,u,f,i,t):this.updateActualRange(n,u,f,i));n.actualRange.delta=n.actualRange.max-n.actualRange.min;this.calculateVisibleRange(t,n)},n.prototype.updateActualRange=function(n,t,i,r){n.actualRange={min:null!=n.minimum?n.minimum:t,max:null!=n.maximum?n.maximum:i,interval:null!=n.interval?n.interval:r,delta:n.actualRange.delta}},n.prototype.findAdditional=function(n,i,r,u,f){var e,o,s;(e=Math.floor(i/u)*u,o=Math.ceil(r/u)*u,"Additional"===n.rangePadding&&(e-=u,o+=u),t.isNullOrUndefined(n.desiredIntervals))||(s=o-e,u=this.calculateNumericNiceInterval(n,s,f));this.updateActualRange(n,e,o,u)},n.prototype.findNormal=function(n,t,i,r,u){var f,e,o=t;t<0?(o=0,.365*r>=r+(f=t+.05*t)%r&&(f-=r),f%r<0&&(f=f-r-f%r)):(f=t<5/6*i?0:t-.5*(i-t))%r>0&&(f-=f%r);.365*r>=r-(e=i>0?i+.05*(i-o):i-.05*(i-o))%r&&(e+=r);e%r>0&&(e=e+r-e%r);n.doubleRange=new lh(f,e);(0===f||f<0&&e<0)&&(r=this.calculateNumericNiceInterval(n,n.doubleRange.delta,u),e=Math.ceil(e/r)*r);this.updateActualRange(n,f,e,r)},n.prototype.calculateVisibleRange=function(n,t){if(t.visibleRange={max:t.actualRange.max,min:t.actualRange.min,delta:t.actualRange.delta,interval:t.actualRange.interval},t.maximum&&"Vertical"===t.orientation&&"Auto"===t.rangePadding){for(var i=void 0,r=t.visibleRange.min;r<=t.visibleRange.max&&i!==r;r+=t.visibleRange.interval)i=r;i<t.visibleRange.max&&(t.visibleRange.max=i+t.visibleRange.interval)}t.triggerRangeRender(this.chart,t.visibleRange.min,t.visibleRange.max,t.visibleRange.interval)},n.prototype.calculateVisibleLabels=function(n,i){n.visibleLabels=[];var f,h,r=n.visibleRange.min,u=this.getFormat(n),e=null!==u.match("{value}"),o=0,s=0;for(n.labelFormat&&n.labelFormat.indexOf("n")>-1&&(s=parseInt(n.labelFormat.substring(1,n.labelFormat.length),10)),n.format=i.intl.getNumberFormat({format:e?"":u,useGrouping:i.useGroupingSeparator}),n.startLabel=n.format(n.visibleRange.min),n.endLabel=n.format(n.visibleRange.max),n.visibleRange.interval&&(n.visibleRange.interval+"").indexOf(".")>=0&&(o=(n.visibleRange.interval+"").split(".")[1].length);r<=n.visibleRange.max&&h!==r;r+=n.visibleRange.interval)h=r,f=t.extend({},t.getValue("properties",n.labelStyle),null,!0),si(r,n.visibleRange)&&yr(i,r,this.formatValue(n,e,u,r),f,n);r&&(r+"").indexOf(".")>=0&&(r+"").split(".")[1].length>10&&(r=(r+"").split(".")[1].length>(s||o)?+r.toFixed(s||o):r)<=n.visibleRange.max&&yr(i,r,this.formatValue(n,e,u,r),f,n);n.getMaxLabelWidth&&n.getMaxLabelWidth(this.chart)},n.prototype.getFormat=function(n){return n.labelFormat?0===n.labelFormat.indexOf("p")&&-1===n.labelFormat.indexOf("{value}")&&n.isStack100?"{value}%":n.labelFormat:n.isStack100?"{value}%":""},n.prototype.formatValue=function(n,t,i,r){var u=r%1?Number(r.toLocaleString().split(",").join("")):r;return t?i.replace("{value}",n.format(u)):i?n.format(r):n.format(u)},n.prototype.getModuleName=function(){return"Double3D"},n}(),co=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),k=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},bit=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.axes=[],t.nearSizes=[],t.farSizes=[],t}return co(i,n),i.prototype.computeSize=function(n,t){var i=0;n.visible&&n.internalVisibility&&(i+=n.majorTickLines.height+n.findLabelSize(5,t));n.isAxisOpposedPosition?this.farSizes.push(i):this.nearSizes.push(i)},k([t.Property("100%")],i.prototype,"height",void 0),i}(t.ChildProperty),kit=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.axes=[],t.nearSizes=[],t.farSizes=[],t}return co(i,n),i.prototype.computeSize=function(n,t){var i=0;n.visible&&n.internalVisibility&&(i+=n.majorTickLines.height+n.findLabelSize(5,t));n.isAxisOpposedPosition?this.farSizes.push(i):this.nearSizes.push(i)},k([t.Property("100%")],i.prototype,"width",void 0),i}(t.ChildProperty),dit=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return co(i,n),k([t.Property(1)],i.prototype,"width",void 0),k([t.Property(null)],i.prototype,"color",void 0),i}(t.ChildProperty),git=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return co(i,n),k([t.Property(.7)],i.prototype,"width",void 0),k([t.Property(null)],i.prototype,"color",void 0),i}(t.ChildProperty),nrt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return co(i,n),k([t.Property(0)],i.prototype,"width",void 0),k([t.Property(5)],i.prototype,"height",void 0),k([t.Property(null)],i.prototype,"color",void 0),i}(t.ChildProperty),trt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return co(i,n),k([t.Property(0)],i.prototype,"width",void 0),k([t.Property(5)],i.prototype,"height",void 0),k([t.Property(null)],i.prototype,"color",void 0),i}(t.ChildProperty),hl=function(n){function r(t,r,u,f){var e=n.call(this,t,r,u,f)||this;return e.visibleLabels=[],e.series=[],e.rect=new i.Rect(void 0,void 0,0,0),e.isStack100=!1,e.updatedRect=null,e.isIntervalInDecimal=!0,e.intervalDivs=[10,5,2,1],e.titleCollection=[],e.titleSize=new i.Size(0,0),e.internalVisibility=!0,e.isRTLEnabled=!1,e.angle=e.labelRotation,e}return co(r,n),r.prototype.findLabelSize=function(n,r){var u=0,o="Horizontal"===this.orientation,f,e;return this.title&&(f=this.titleRotation,(t.isNullOrUndefined(f)?(this.titleSize=i.measureText(this.title,this.titleStyle,r.themeStyle.axisTitleFont),u=this.titleSize.height+n):(this.titleSize=yu(this.titleStyle,this.title,f,r,r.themeStyle.axisTitleFont),u=("Vertical"===this.orientation?this.titleSize.width:this.titleSize.height)+n),this.rect.width||this.rect.height)&&(e=o?this.rect.width:this.rect.height,this.titleCollection=tu(this.title,this.titleStyle,e,r.enableRtl,r.themeStyle.axisTitleFont),u*=this.titleCollection.length)),u+n+this.titlePadding+this.labelPadding+("Vertical"===this.orientation?this.maxLabelSize.width:this.maxLabelSize.height)},r.prototype.triggerRangeRender=function(n,t,i,r){var u={cancel:!1,axis:this,minimum:t,maximum:i,interval:r};n.trigger(bh,u);u.cancel||(this.visibleRange={min:u.minimum,max:u.maximum,interval:u.interval,delta:u.maximum-u.minimum})},r.prototype.getRangePadding=function(n){var t=this.rangePadding;if("Auto"!==t)return t;switch(this.orientation){case"Horizontal":t=n.requireInvertedAxis?this.isStack100?"Round":"Normal":"None";break;case"Vertical":t=n.requireInvertedAxis?"None":this.isStack100?"Round":"Normal"}return t},r.prototype.getMaxLabelWidth=function(n){var u,e,l=0,b=!1,a,v,s,c,w;this.angle=this.labelRotation;this.maxLabelSize=new i.Size(0,0);for(var r,o=this.labelIntersectAction,f=0,d=this.visibleLabels.length;f<d;f++)if((e=rf((r=this.visibleLabels[f]).originalText))?(r.size=i.measureText(r.originalText.replace(/<br>/g," "),this.labelStyle,n.themeStyle.axisLabelFont),r.breakLabelSize=i.measureText(this.enableTrim?r.text.join("<br>"):r.originalText,this.labelStyle,n.themeStyle.axisLabelFont)):r.size=i.measureText(r.text,this.labelStyle,n.themeStyle.axisLabelFont),a=e?r.breakLabelSize.width:r.size.width,a>this.maxLabelSize.width&&(this.maxLabelSize.width=a,this.rotatedLabel=r.text),v=e?r.breakLabelSize.height:r.size.height,v>this.maxLabelSize.height&&(this.maxLabelSize.height=v),e&&(r.text=this.enableTrim?r.text:r.originalText.split("<br>")),"None"!==o&&"Hide"!==o&&"Trim"!==o&&("None"!==o||this.angle%360==0)&&"Horizontal"===this.orientation&&this.rect.width>0&&!b){s=e?r.breakLabelSize.width:r.size.width;switch(u=iu(r.value,this)*this.rect.width+this.rect.x,u-=s/2,"Shift"===this.edgeLabelPlacement&&(0===f&&u<this.rect.x&&(u=this.rect.x),f===this.visibleLabels.length-1&&u+s>this.rect.x+this.rect.width&&(u=this.rect.x+this.rect.width-s)),o){case"MultipleRows":f>0&&this.findMultiRows(f,u,r,e);break;case"Rotate45":case"Rotate90":f>0&&(this.isAxisInverse?u+s>=l:u<=l)&&(this.angle="Rotate45"===o?45:90,b=!0);break;default:if(e){for(var h=void 0,y=[],k=void 0,p=0;p<r.text.length;p++)if((h=ur(r.text[p],this.rect.width/this.visibleLabels.length,this.labelStyle,n.enableRtl,null,null,n.themeStyle.axisLabelFont)).length>1)for(c=0;c<h.length;c++)k=h[c],y.push(k);else y.push(h[0]);r.text=y}else r.text=ur(r.text,this.rect.width/this.visibleLabels.length,this.labelStyle,n.enableRtl,null,null,n.themeStyle.axisLabelFont);w=r.size.height*r.text.length;w>this.maxLabelSize.height&&(this.maxLabelSize.height=w)}l=this.isAxisInverse?u:u+s}(0!==this.angle&&"Horizontal"===this.orientation||0!==this.angle&&"Vertical"===this.orientation)&&(this.rotatedLabel=t.isNullOrUndefined(this.rotatedLabel)?"":this.rotatedLabel,!(-360===this.angle||0===this.angle||-180===this.angle||180===this.angle||360===this.angle)&&rf(this.rotatedLabel)&&(this.maxLabelSize=new i.Size(this.maxLabelSize.height,this.maxLabelSize.width)),this.maxLabelSize=yu(this.labelStyle,this.rotatedLabel,this.angle,n,n.themeStyle.axisLabelFont))},r.prototype.findMultiRows=function(n,t,i,r){for(var u,e,o,h,s=[],f=n-1;f>=0;f--)u=this.visibleLabels[f],o=r?u.breakLabelSize.width:u.size.width,e=iu(u.value,this)*this.rect.width+this.rect.x,(this.isAxisInverse?t+i.size.width>e-.5*o:t<e+.5*o)?(s.push(u.index),i.index=i.index>u.index?i.index:u.index+1):i.index=s.indexOf(u.index)>-1?i.index:u.index;h=(r?i.breakLabelSize.height:i.size.height)*i.index+5*(i.index-1);h>this.maxLabelSize.height&&(this.maxLabelSize.height=h)},r.prototype.getModule=function(n){this.baseModule="Double"===this.valueType?new sl(n):n[et(this.valueType)+"3DModule"]},r.prototype.setIsInversedAndOpposedPosition=function(){this.isAxisOpposedPosition=this.opposedPosition||this.isRTLEnabled&&"Vertical"===this.orientation;this.isAxisInverse=this.isInversed||this.isRTLEnabled&&"Horizontal"===this.orientation},k([t.Complex({fontFamily:null,size:"12px",fontStyle:"Normal",fontWeight:"400",color:null},el)],r.prototype,"labelStyle",void 0),k([t.Property("")],r.prototype,"title",void 0),k([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},el)],r.prototype,"titleStyle",void 0),k([t.Property("")],r.prototype,"labelFormat",void 0),k([t.Property("")],r.prototype,"skeleton",void 0),k([t.Property("DateTime")],r.prototype,"skeletonType",void 0),k([t.Property(0)],r.prototype,"plotOffset",void 0),k([t.Property(null)],r.prototype,"plotOffsetLeft",void 0),k([t.Property(null)],r.prototype,"plotOffsetTop",void 0),k([t.Property(null)],r.prototype,"plotOffsetRight",void 0),k([t.Property(null)],r.prototype,"plotOffsetBottom",void 0),k([t.Property(!1)],r.prototype,"isIndexed",void 0),k([t.Property(10)],r.prototype,"logBase",void 0),k([t.Property(0)],r.prototype,"columnIndex",void 0),k([t.Property(0)],r.prototype,"rowIndex",void 0),k([t.Property(1)],r.prototype,"span",void 0),k([t.Property(null)],r.prototype,"desiredIntervals",void 0),k([t.Property(3)],r.prototype,"maximumLabels",void 0),k([t.Property(!1)],r.prototype,"opposedPosition",void 0),k([t.Property("Auto")],r.prototype,"rangePadding",void 0),k([t.Property("Double")],r.prototype,"valueType",void 0),k([t.Property("None")],r.prototype,"edgeLabelPlacement",void 0),k([t.Property("Auto")],r.prototype,"intervalType",void 0),k([t.Property("OnTicks")],r.prototype,"labelPlacement",void 0),k([t.Property("")],r.prototype,"name",void 0),k([t.Property(!0)],r.prototype,"visible",void 0),k([t.Property(0)],r.prototype,"minorTicksPerInterval",void 0),k([t.Property(0)],r.prototype,"labelRotation",void 0),k([t.Property(null)],r.prototype,"titleRotation",void 0),k([t.Property(null)],r.prototype,"minimum",void 0),k([t.Property(null)],r.prototype,"maximum",void 0),k([t.Property(null)],r.prototype,"interval",void 0),k([t.Property(34)],r.prototype,"maximumLabelWidth",void 0),k([t.Property(!1)],r.prototype,"enableTrim",void 0),k([t.Property(5)],r.prototype,"labelPadding",void 0),k([t.Property(5)],r.prototype,"titlePadding",void 0),k([t.Complex({},nrt)],r.prototype,"majorTickLines",void 0),k([t.Complex({},trt)],r.prototype,"minorTickLines",void 0),k([t.Complex({},dit)],r.prototype,"majorGridLines",void 0),k([t.Complex({},git)],r.prototype,"minorGridLines",void 0),k([t.Property(t.Browser.isDevice?"Rotate45":"Trim")],r.prototype,"labelIntersectAction",void 0),k([t.Property(!1)],r.prototype,"isInversed",void 0),k([t.Property(!0)],r.prototype,"startFromZero",void 0),r}(t.ChildProperty),wat=function(){return function(n,t,r,u,f,e,o){void 0===f&&(f=new i.Size(0,0));void 0===e&&(e=new i.Size(0,0));void 0===o&&(o=1);this.text=n;this.originalText=u;this.value=t;this.labelStyle=r;this.size=f;this.breakLabelSize=e;this.index=o}}(),gy=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),at=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},irt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return gy(i,n),at([t.Property(!1)],i.prototype,"visible",void 0),at([t.Property(null)],i.prototype,"name",void 0),at([t.Property("transparent")],i.prototype,"fill",void 0),at([t.Property(null)],i.prototype,"format",void 0),at([t.Property(1)],i.prototype,"opacity",void 0),at([t.Property(0)],i.prototype,"angle",void 0),at([t.Property(!1)],i.prototype,"enableRotation",void 0),at([t.Property("Middle")],i.prototype,"position",void 0),at([t.Complex({width:null,color:null},yt)],i.prototype,"border",void 0),at([t.Complex({left:5,right:5,top:5,bottom:5},lr)],i.prototype,"margin",void 0),at([t.Complex({size:null,color:null,fontStyle:null,fontWeight:null,fontFamily:null},el)],i.prototype,"font",void 0),at([t.Property(null)],i.prototype,"template",void 0),i}(t.ChildProperty),rrt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return gy(i,n),at([t.Property(null)],i.prototype,"fill",void 0),at([t.Property("Gap")],i.prototype,"mode",void 0),i}(t.ChildProperty),np=function(){return function(){this.symbolLocations=null;this.percentage=null;this.isSelect=!1}}(),tp=function(n){function r(t,r,u,f){var e=n.call(this,t,r,u,f)||this;return e.currentViewData=[],e.clipRect=new i.Rect(0,0,0,0),e.visibleSeriesCount=0,e.category="Series",e.isRectSeries=!1,e.all=!1,e}return gy(r,n),r.prototype.processJsonData=function(){var i=0,n=new np,u=this.xName,f=this instanceof r&&this.dataLabel.name?this.dataLabel.name:"",e=(this.currentViewData||[]).length;if(this.points=[],this.xMin=1/0,this.xMax=-1/0,this.yMin=1/0,this.yMax=-1/0,this.sizeMax=-1/0,"Category"===this.xAxis.valueType)for(;i<e;)n=this.dataPoint(i,f,u),this.pushCategoryData(n,i,n.x),this.pushData(n,i),this.setEmptyPoint(n,i),i++;else if(this.xAxis.valueType.indexOf("DateTime")>-1)for(var o={skeleton:"full",type:"dateTime"},s=this.chart.intl.getDateParser(o),h=this.chart.intl.getDateFormat(o);i<e;)n=this.dataPoint(i,f,u),t.isNullOrUndefined(n.x)||""===n.x?n.visible=!1:(n.x=new Date(gt.DataUtil.parse.parseJson({val:n.x}).val),"DateTime"===this.xAxis.valueType?n.xValue=Date.parse(n.x.toString()):this.pushCategoryData(n,i,Date.parse(s(h(n.x))).toString()),this.pushData(n,i),this.setEmptyPoint(n,i)),i++;else for(;i<e;)(n=this.dataPoint(i,f,u)).xValue=n.x,this.pushData(n,i),this.setEmptyPoint(n,i),i++},r.prototype.pushData=function(n,t){n.index=t;n.yValue=n.y;n.series=this;this.xMin=Math.min(this.xMin,n.xValue);this.xMax=Math.max(this.xMax,n.xValue);this.xData.push(n.xValue)},r.prototype.dataPoint=function(n,t,i){this.points[n]=new np;var u=this.points[n],f=this.currentViewData[n],e=this.get3DObjectValue;return u.x=e(i,f),u.interior=e(this.pointColorMapping,f),this instanceof r&&(u.y=e(this.yName,f),u.size=e(this.size,f),u.text=e(t,f),u.tooltip=e(this.tooltipMappingName,f)),u},r.prototype.get3DObjectValue=function(n,t){return t[n]},r.prototype.setEmptyPoint=function(n,t){if(!this.findVisibility(n))return n.visible=!0,null;switch(n.isEmpty=!0,(this instanceof r&&this).emptyPointSettings.mode){case"Zero":n.visible=!0;n.y=n.yValue=this.yData[t]=0;break;case"Average":this instanceof r&&(n.y=n.yValue=this.yData[t]=this.getAverage(this.yName,t));n.visible=!0;break;case"Drop":case"Gap":this.yData[t]=null;n.visible=!1}},r.prototype.findVisibility=function(n){return this.setXYMinMax(n.yValue),this.yData.push(n.yValue),t.isNullOrUndefined(n.x)||t.isNullOrUndefined(n.y)||isNaN(+n.y)},r.prototype.setXYMinMax=function(n){var i,r="Logarithmic"===this.yAxis.valueType||"Logarithmic"===this.xAxis.valueType,u=n<0||"None"===this.yAxis.rangePadding;i=nr(this.yAxis)||r||u?n:0;this.yMin=r?Math.min(this.yMin,t.isNullOrUndefined(i)||isNaN(i)||0===i||"0"===i.toString()||""===i.toString()?this.yMin:i):Math.min(this.yMin,t.isNullOrUndefined(i)||isNaN(i)?this.yMin:i);this.yMax=Math.max(this.yMax,t.isNullOrUndefined(n)||isNaN(n)?this.yMax:n)},r.prototype.pushCategoryData=function(n,t,i){if(this.chart.tooltip&&!this.visible)return null;this.xAxis.isIndexed?(this.xAxis.labels[t]?this.xAxis.labels[t]+=", "+i:this.xAxis.labels.push(i),n.xValue=t):(void 0===this.xAxis.indexLabels[i]&&(this.xAxis.indexLabels[i]=this.xAxis.labels.length,this.xAxis.labels.push(i)),n.xValue=this.xAxis.indexLabels[i])},r.prototype.getAverage=function(n,t,i){return void 0===i&&(i=this.currentViewData),((i[t-1]&&i[t-1][n]||0)+(i[t+1]&&i[t+1][n]||0))/2},r.prototype.refreshDataManager=function(n){var i,r=this;this.chart=n;(i=n.isAngular?Object.keys(this.dataSource).length?this.dataSource:n.dataSource:this.dataSource||n.dataSource)instanceof gt.DataManager||!t.isNullOrUndefined(this.query)?this.dataModule.getData(this.dataModule.generateQuery().requiresCount()).then(function(n){return r.dataManagerSuccess(n)}):this.dataManagerSuccess({result:i,count:i.length},!1)},r.prototype.dataManagerSuccess=function(n,t){if(void 0===t&&(t=!0),this.currentViewData=n.count?n.result:[],this.chart.allowServerDataBinding=!1,this instanceof r){var i={series:this,data:this.currentViewData,fill:this.interior};this.chart.trigger(re,i);this.interior=i.fill;this.currentViewData=i.data}this.processJsonData();this.refreshChart(t);this.currentViewData=null},r.prototype.refreshChart=function(n){var t=this.chart;this instanceof r&&(t.visibleSeriesCount+=n?1:0);t.visibleSeries.length===t.visibleSeriesCount&&(t.refreshBound(),t.trigger("loaded",{chart:t}));this instanceof r&&(t.visibleSeriesCount+=n?0:1)},r.prototype.refreshAxisLabel=function(){var i,u,n,r,f,t;if("Category"!==this.xAxis.valueType)return null;for(this.xAxis.labels=[],this.xAxis.indexLabels={},i=0,u=this.xAxis.series;i<u.length;i++)if(n=u[i],n.visible)for(n.xMin=1/0,n.xMax=-1/0,r=0,f=n.points;r<f.length;r++)t=f[r],n.pushCategoryData(t,t.index,t.x),n.xMin=Math.min(n.xMin,t.xValue),n.xMax=Math.max(n.xMax,t.xValue)},r.prototype.findSeriesCollection=function(n,t,i){for(var u,o,f,h,r,c=[],e=0,l=t.axes;e<l.length;e++)for(u=0,o=l[e].series;u<o.length;u++)for(var v=o[u],s=0,a=n.axes;s<a.length;s++)for(f=0,h=a[s].series;f<h.length;f++)r=h[f],r===v&&r.visible&&this.rectSeriesInChart(r,i)&&c.push(r);return c},r.prototype.rectSeriesInChart=function(n,t){var i=n.type.toLowerCase();return-1!==i.indexOf("column")||-1!==i.indexOf("bar")||t},r.prototype.calculateStackedValue=function(n,t){for(var e,i=0,r=t.columns;i<r.length;i++)for(var o=r[i],u=0,f=t.rows;u<f.length;u++)e=f[u],this.calculateStackingValues(this.findSeriesCollection(o,e,!0),n)},r.prototype.calculateStackingValues=function(n,t){var c,o,f,l,u,g=[],h=[],a=[],nt=[],w,v,i,r,rt,k,d;t&&(nt=this.findFrequencies(n));for(var s=[],e=[],p=0;p<n.length;p++)s[(i=n[p]).stackingGroup]?void 0!==s[i.stackingGroup]&&s[i.stackingGroup].push(i):(s[i.stackingGroup]=[],s[i.stackingGroup].push(i));for(w=Object.keys(s),v=0;v<w.length;v++){for(var tt=[],y=[],b=0,it=s[w[v]];b<it.length;b++)if(-1!==(i=it[b]).type.indexOf("Stacking")){for(h[f=i.stackingGroup]||(h[f]=[],a[f]=[]),g=i.yData,c=[],o=[],tt.push(i),r=0,rt=(e=vu(i)).length;r<rt;r++)l=0,u=+g[r],void 0===h[f][e[r].xValue]&&(h[f][e[r].xValue]=0),void 0===a[f][e[r].xValue]&&(a[f][e[r].xValue]=0),t?(u=u/nt[f][e[r].xValue]*100,u=isNaN(u)?0:u,e[r].percentage=+u.toFixed(2)):y[r]=y[r]?y[r]+Math.abs(u):Math.abs(u),u>=0?(l=h[f][e[r].xValue],h[f][e[r].xValue]+=u):(l=a[f][e[r].xValue],a[f][e[r].xValue]+=u),c.push(l),o.push(u+l),t&&o[r]>100&&(o[r]=100);i.stackedValues=new ov(c,o);k="Logarithmic"===i.yAxis.valueType;d=-1!==i.type.indexOf("Column")||-1!==i.type.indexOf("Bar");i.yMin=k&&d&&i.yMin<1?i.yMin:i.yAxis.startFromZero&&i.type.indexOf("100")>-1&&"Auto"===i.yAxis.rangePadding&&i.yMin>=0?0:parseFloat(Math.min.apply(0,t?c:o).toFixed(10));i.yMax=Math.max.apply(0,o);i.yMin>Math.min.apply(0,o)&&(i.yMin=t?-100:k&&d&&i.yMin<1?i.yMin:Math.min.apply(0,o));i.yMax<Math.max.apply(0,c)&&(i.yMax=0)}this.findPercentageOfStacking(tt,y,t)}},r.prototype.findPercentageOfStacking=function(n,t,i){for(var s,u,o,f,r=0,e=n;r<e.length;r++){if(s=e[r],i)return null;for(u=0,o=vu(s);u<o.length;u++)f=o[u],f.percentage=Math.abs(+(f.y/t[f.index]*100).toFixed(2))}},r.prototype.findFrequencies=function(n){for(var i,t,s,u,r=[],f=[],e=0,o=n;e<o.length;e++)if(i=o[e],i.yAxis.isStack100=-1!==i.type.indexOf("100"),f=this.getVisiblePoints(),-1!==i.type.indexOf("Stacking"))for(r[u=i.stackingGroup]||(r[u]=[]),t=0,s=f.length;t<s;t++)void 0===r[u][f[t].xValue]&&(r[u][f[t].xValue]=0),i.yData[t]>0?r[u][f[t].xValue]+=i.yData[t]:r[u][f[t].xValue]-=i.yData[t];return r},r.prototype.renderSeries=function(n){var t=et(this.type);n[(t=t.replace("100",""))+"Series3DModule"]&&(this.visiblePoints=this.getVisiblePoints(),n[t+"Series3DModule"].draw(this,n),this.dataLabel.visible&&this.visible&&n.dataLabel3DModule.render(this,this.chart,this.dataLabel))},r.prototype.getVisiblePoints=function(){for(var n,r=t.extend([],this.points,null,!0),u=[],f=0,i=0;i<r.length;i++)n=r[i],t.isNullOrUndefined(n.x)||(n.index=f++,u.push(n));return u},r.prototype.setPointColor=function(n,t){return t=n.interior||t,n.isEmpty&&this.emptyPointSettings.fill||t},r.prototype.getYValues=function(n){for(var i=[],r=n.length,t=0;t<r;t++)i.push(n[t].yValue);return i},r.prototype.getXValues=function(n){for(var i=[],r=n.length,t=0;t<r;t++)i.push(n[t].xValue);return i},r.prototype.getSegmentDepth=function(n){var i,r,f=this.chart.depth,t,e,u;return this.chart.enableSideBySidePlacement?(i=t=f/4,r=t*("Rectangle"===n.columnFacet?2.5:3)):(e=n.position-1,u=n.rectCount,r=(i=(t=f/(2*u+u+1))+t*e*3)+t*("Rectangle"===n.columnFacet?1.5:2)),{start:i,end:r,delta:r-i}},r.prototype.getSideBySidePositions=function(n){for(var e,r=n.chart,t=0,u=r.columns;t<u.length;t++)for(var o=u[t],i=0,f=r.rows;i<f.length;i++)e=f[i],this.findRectPosition(n.findSeriesCollection(o,e,!1))},r.prototype.findRectPosition=function(n){for(var u,t,f=[],i={rectCount:0,position:null},r=0;r<n.length;r++)-1!==(t=n[r]).type.indexOf("Stacking")||""!==t.groupName?(u=-1!==t.type.indexOf("Stacking")?t.stackingGroup:t.type+t.groupName,u?void 0===f[u]?(t.position=i.rectCount,f[u]=i.rectCount++):t.position=f[u]:null===i.position?(i.rectCount++,t.position=i.rectCount,i.position=i.rectCount):t.position=i.position):(i.rectCount++,t.position=i.rectCount);for(r=0;r<n.length;r++)(t=n[r]).rectCount=i.rectCount},r.prototype.getDoubleRange=function(n,t){var i,r;return n>t?(i=t,r=n):(i=n,r=t),{start:i,end:r,delta:r-i,median:(i+r)/2,isEmpty:isNaN(i)||isNaN(r)}},r.prototype.setStyle=function(n){return{interior:n.interior,opacity:n.opacity,dashArray:""}},r.prototype.getSideBySideInfo=function(n){var r;this.chart.currentSeries=n;var e=dy(n.xAxis,this.chart.visibleSeries),o=n.columnSpacing,s=null===n.columnWidth||isNaN(+n.columnWidth)?.7:Math.min(n.columnWidth,1);this.getSideBySidePositions(n);var h=n.position,u=n.rectCount,i=e*s,f=(h-(""===n.stackingGroup?1:0))/u-.5,t=this.getDoubleRange(f,f+1/u);return this.chart.enableSideBySidePlacement?(t.isEmpty||(r=o*(t=this.getDoubleRange(t.start*i,t.end*i)).delta,t=this.getDoubleRange(t.start+r/2,t.end-r/2)),t):this.getDoubleRange(-i/2,i/2)},at([t.Property("")],r.prototype,"xName",void 0),at([t.Property("")],r.prototype,"pointColorMapping",void 0),at([t.Property(!0)],r.prototype,"visible",void 0),at([t.Property(null)],r.prototype,"xAxisName",void 0),at([t.Property(null)],r.prototype,"yAxisName",void 0),at([t.Complex({duration:2e3},au)],r.prototype,"animation",void 0),at([t.Property(null)],r.prototype,"fill",void 0),at([t.Property("")],r.prototype,"dataSource",void 0),at([t.Property()],r.prototype,"query",void 0),at([t.Complex({},irt)],r.prototype,"dataLabel",void 0),at([t.Property("")],r.prototype,"name",void 0),at([t.Property("")],r.prototype,"yName",void 0),at([t.Property("")],r.prototype,"size",void 0),at([t.Property("")],r.prototype,"stackingGroup",void 0),at([t.Property(1)],r.prototype,"opacity",void 0),at([t.Property("")],r.prototype,"groupName",void 0),at([t.Property("Column")],r.prototype,"type",void 0),at([t.Property(!0)],r.prototype,"enableTooltip",void 0),at([t.Property("")],r.prototype,"tooltipFormat",void 0),at([t.Property("")],r.prototype,"tooltipMappingName",void 0),at([t.Property("SeriesType")],r.prototype,"legendShape",void 0),at([t.Property("")],r.prototype,"legendImageUrl",void 0),at([t.Complex(null,rrt)],r.prototype,"emptyPointSettings",void 0),at([t.Property(null)],r.prototype,"columnWidth",void 0),at([t.Property("Rectangle")],r.prototype,"columnFacet",void 0),at([t.Property(.1)],r.prototype,"columnSpacing",void 0),r}(t.ChildProperty),urt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gr=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},frt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return urt(i,n),gr([t.Property(!1)],i.prototype,"enable",void 0),gr([t.Property(!0)],i.prototype,"enableMarker",void 0),gr([t.Property(null)],i.prototype,"fill",void 0),gr([t.Property(null)],i.prototype,"header",void 0),gr([t.Property(null)],i.prototype,"opacity",void 0),gr([t.Complex({fontFamily:null,size:"12px",fontStyle:"Normal",fontWeight:null,color:null},oi)],i.prototype,"textStyle",void 0),gr([t.Property(null)],i.prototype,"format",void 0),gr([t.Property(null)],i.prototype,"template",void 0),gr([t.Property(!0)],i.prototype,"enableAnimation",void 0),gr([t.Property(300)],i.prototype,"duration",void 0),gr([t.Property(1e3)],i.prototype,"fadeOutDuration",void 0),gr([t.Property("Move")],i.prototype,"fadeOutMode",void 0),gr([t.Property(!1)],i.prototype,"enableTextWrap",void 0),gr([t.Complex({color:null,width:null},yt)],i.prototype,"border",void 0),gr([t.Complex({x:null,y:null},lf)],i.prototype,"location",void 0),i}(t.ChildProperty),bat=function(n){function r(t){var i=n.call(this,t)||this;return i.chart3D=t,i.commonXvalues=[],i.addEventListener(),i}return urt(r,n),r.prototype.addEventListener=function(){if(!this.chart.isDestroyed){var n=t.Browser.isPointer?"pointerleave":"mouseleave";this.chart.on(n,this.mouseLeaveHandler,this);this.chart.on("tapHold",this.longPress,this);this.chart.on(t.Browser.touchMoveEvent,this.mouseMoveHandler,this);this.chart.on(t.Browser.touchEndEvent,this.mouseUpHandler,this)}},r.prototype.removeEventListener=function(){this.chart.isDestroyed||(this.chart.off("pointerleave",this.mouseLeaveHandler),this.chart.off("tapHold",this.longPress),this.chart.off(t.Browser.touchMoveEvent,this.mouseLeaveHandler),this.chart.off(t.Browser.touchMoveEvent,this.mouseMoveHandler),this.chart.off(t.Browser.touchEndEvent,this.mouseUpHandler))},r.prototype.mouseUpHandler=function(n){var i=this,t=this.control,r=this.get3dData(n);t.isTouch?(this.tooltip(n),"Move"===t.tooltip.fadeOutMode&&(this.removeTooltip(t.tooltip.fadeOutDuration),clearTimeout(this.timerId),this.timerId=+setTimeout(function(){i.removeBlurEffect()},500)),t.startMove&&"Move"===t.tooltip.fadeOutMode&&(this.removeTooltip(2e3),this.removeBlurEffect())):this.findData(r,this.previousPoints[0])||"Click"!==t.tooltip.fadeOutMode||(this.removeTooltip(0),this.removeBlurEffect())},r.prototype.mouseLeaveHandler=function(){this.removeTooltip(this.chart.tooltip.fadeOutDuration);this.removeBlurEffect()},r.prototype.mouseMoveHandler=function(n){var t=this.chart3D;t.mouseX=t.mouseX/t.scaleX;t.mouseY=t.mouseY/t.scaleY;t.disableTrackTooltip||t.rotateActivate||t.isTouch&&!t.startMove||this.tooltip(n)},r.prototype.longPress=function(){return!1},r.prototype.seriesStyles=function(){if(!this.styleAdded){var n=document.createElement("style");n.setAttribute("id",this.element.id+"_ej2_chart_tooltip");n.innerText+=" ."+this.element.id+"_ej2_tooltipDeselected { opacity:0.2;} ";document.body.appendChild(n);this.styleAdded=!0}},r.prototype.tooltip=function(n){var r=this.element.id+"_tooltip_svg",t=this.getElement(r),i=t&&parseInt(t.getAttribute("opacity"),10)>0,u=this.getTooltipElement(i);this.chart3D.tooltip3DModule&&this.renderSeriesTooltip(this.chart3D,!i,u,n)},r.prototype.findHeader=function(n){return""===this.header?"":(this.header=this.parseTemplate(n.point,n.series,this.header,n.series.xAxis,n.series.yAxis),""!==this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()?this.header:"")},r.prototype.renderSeriesTooltip=function(n,t,i,r){var u=this.get3dData(r);this.currentPoints=[];!this.findData(u,this.previousPoints[0])||(!this.previousPoints[0]||this.previousPoints[0].point.index===u.point.index&&this.previousPoints[0].series.index===u.series.index&&this.chart3D.isRemove)&&this.previousPoints[0]?!u.point&&this.chart3D.isRemove&&"Move"===n.tooltip.fadeOutMode&&(this.removeTooltip(this.chart.tooltip.fadeOutDuration),this.removeBlurEffect(),this.chart3D.isRemove=!1):this.pushData(u,t,i,!0)&&this.triggerTooltipRender(u,t,this.getTooltipText(u),this.findHeader(u));u&&u.point&&this.findMouseValue(u,n)},r.prototype.triggerTooltipRender=function(n,r,u,f){var e=this,h={cancel:!1,text:u,headerText:f,template:void 0,textStyle:this.textStyle,data:{pointX:n.point.x,pointY:n.point.y,seriesIndex:n.series.index,seriesName:n.series.name,pointIndex:n.point.index,pointText:n.point.text}},o=this.chart.border.width,s=function(u){u.cancel?(e.removeHighlight(),t.remove(e.getElement(e.element.id+"_tooltip"))):(e.headerText=u.headerText,e.formattedText=e.formattedText.concat(u.text),e.text=e.formattedText,e.createTooltip(e.chart,r,e.getSymbolLocation(n),n.series.clipRect,n.point,e.chart3D.tooltip.enableMarker?["Circle"]:[],0,new i.Rect(o,o,e.chart.availableSize.width-3-2*o,e.chart.availableSize.height-3-2*o),!1,null,e.getTemplateText(n),e.template?u.template:""),e.blurEffect(e.chart3D.visibleSeries,n.series));e.chart3D.isRemove=!0};s.bind(this,n);this.chart.trigger(gu,h,s)},r.prototype.blurEffect=function(n,t){var r,s,i,e,u;if(!this.chart3D.highlight3DModule||this.chart3D.legendSettings.enableHighlight&&"None"===this.chart3D.highlightMode){for(var f=[],o=0,h=n;o<h.length;o++)if(r=h[o],r.visible&&r.index!==t.index)document.querySelectorAll('[id*="region-series-'+r.index+'"]').forEach(function(n){f.push(n)});else if(r.visible)for(s=document.querySelectorAll('[id*="region-series-'+r.index+'"]'),i=0;i<s.length;i++)e=s[i],(u=e.getAttribute("class")||"").indexOf(this.element.id+"_ej2_tooltipDeselected")>-1&&e.setAttribute("class",u.replace(this.element.id+"_ej2_tooltipDeselected","")),this.chart3D.stopElementAnimation(e,r.index);for(i=0;i<f.length;i++)f[i]&&(u=f[i].getAttribute("class")||"",-1===(u+=""!==u?" ":"").indexOf("_selection_")&&-1===u.indexOf(this.element.id+"_ej2_tooltipDeselected")&&f[i].setAttribute("class",u+this.element.id+"_ej2_tooltipDeselected"))}},r.prototype.removeBlurEffect=function(){var t,n,i,r;if(!this.chart3D.highlight3DModule||this.chart3D.legendSettings.enableHighlight&&"None"===this.chart3D.highlightMode)for(t=document.getElementsByClassName(this.element.id+"_ej2_tooltipDeselected");t.length>0;)n=t[0],i=n.getAttribute("class")||"",i.indexOf(this.element.id+"_ej2_tooltipDeselected")>-1&&(n.setAttribute("class",i.replace(this.element.id+"_ej2_tooltipDeselected","")),r=parseFloat(n.id.split("-series-")[1].split("-point-")[0]),this.chart3D.highlightAnimation(n,r,700,.2))},r.prototype.getSymbolLocation=function(n){var i,t,f=document.getElementById(this.element.id+"_svg").getBoundingClientRect(),r,u;if(i="Cylinder"===n.series.columnFacet?document.querySelectorAll('[id*="'+this.element.id+"-svg-"+(-1===n.series.type.indexOf("Column")?"0":"1")+"-region-series-"+n.series.index+"-point-"+n.point.index+'"]'):document.querySelectorAll('[id*="'+this.element.id+"-svg-"+(-1===n.series.type.indexOf("Column")?"5":"2")+"-region-series-"+n.series.index+"-point-"+n.point.index+'"]')){if(1===i.length)t=i[0].getBoundingClientRect();else for(r=0;r<i.length;r++)if(u=i[r],-1!==u.id.indexOf("-"+n.point.index+"-back-front")||-1!==u.id.indexOf("-"+n.point.index+"-front-back")){t=u.getBoundingClientRect();break}0===i.length||t||(t=i[0].getBoundingClientRect())}return new h(null!==this.chart3D.tooltip.location.x?this.chart3D.tooltip.location.x:t.left-f.left+t.width/2,null!==this.chart3D.tooltip.location.y?this.chart3D.tooltip.location.y:t.top-f.top+t.height/2)},r.prototype.getTooltipText=function(n){return this.parseTemplate(n.point,n.series,this.getFormat(this.chart3D,n.series),n.series.xAxis,n.series.yAxis)},r.prototype.getTemplateText=function(n){if(this.template){var i=t.extend({},n.point);return i.x=this.formatPointValue(n.point,n.series.xAxis,"x",!0,!1),i.y=this.formatPointValue(n.point,n.series.yAxis,"y",!1,!0),i}return n.point},r.prototype.findMouseValue=function(n,t){t.requireInvertedAxis?(this.valueY=(1-iu(n.point.xValue,n.series.xAxis))*n.series.xAxis.rect.height+n.series.xAxis.rect.y,this.valueX=t.mouseX):(this.valueX=iu(n.point.xValue,n.series.xAxis)*n.series.xAxis.rect.width+n.series.xAxis.rect.x,this.valueY=t.mouseY)},r.prototype.parseTemplate=function(n,t,i,r,u){for(var e,h,o,f,c,l=RegExp,s=0,a=Object.keys(n);s<a.length;s++)f=new l("${point."+(o=a[s])+"}","gm"),i=i.replace(f.source,this.formatPointValue(n,"${point.x}"===f.source?r:u,o,"${point.x}"===f.source,"${point.y}"===f.source));for(e=0,h=Object.keys(Object.getPrototypeOf(t));e<h.length;e++)f=new l("${series."+(o=h[e])+"}","gm"),c=t[o],i=i.replace(f.source,c);return i},r.prototype.formatPointValue=function(n,i,r,u,f){var e,o,s;return"Category"!==i.valueType&&u?e=(o=i.labelFormat&&null!==i.labelFormat.match("{value}"))?i.labelFormat.replace("{value}",i.format(n[r])):i.format(n[r]):f&&!t.isNullOrUndefined(n[r])?(o=i.labelFormat&&null!==i.labelFormat.match("{value}"),s=i.format(n[r]),e=o?i.labelFormat.replace("{value}",s):s):e=n[r],e},r.prototype.getFormat=function(n,t){return t.tooltipFormat?t.tooltipFormat:!t.tooltipFormat&&n.tooltip.format?n.tooltip.format:"${point.x} : "+(n.theme.indexOf("Tailwind3")>-1?"${point.y}":"<b>${point.y}<\/b>")},r.prototype.get3dData=function(n){var r,s,e,a=this.chart3D,h=null,u=null,c=this.chart3D.mouseX,l=this.chart3D.mouseY,i=this.chart3D.chartAxisLayoutPanel.seriesClipRect,f=n.target,o;return f&&c>i.x&&c<i.x+i.width&&l>i.y&&l<i.y+i.height&&(o=f.nodeName,("shape"===o||"path"===o)&&f.id.indexOf("region")>1&&(r=f.id.match(/(\d+)/g),s=parseInt(r[r.length-1].toString(),10),e=parseInt(r[r.length-2].toString(),10))),t.isNullOrUndefined(e)||(u=a.visibleSeries[e]),u&&u.visible&&(h=u.points[s]),new cb(h,u)},r.prototype.findData=function(n,t){return n.point&&(!t||t.point!==n.point||t.point===n.point)},r.prototype.getModuleName=function(){return"Tooltip3D"},r.prototype.destroy=function(){this.removeEventListener()},r}(pc),ert=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wt=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},ort=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ert(i,n),wt([t.Property(!0)],i.prototype,"visible",void 0),wt([t.Property(null)],i.prototype,"height",void 0),wt([t.Property(null)],i.prototype,"width",void 0),wt([t.Complex({x:0,y:0},lf)],i.prototype,"location",void 0),wt([t.Property("Auto")],i.prototype,"position",void 0),wt([t.Property("Series")],i.prototype,"mode",void 0),wt([t.Property(8)],i.prototype,"padding",void 0),wt([t.Property(null)],i.prototype,"itemPadding",void 0),wt([t.Property("Center")],i.prototype,"alignment",void 0),wt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},oi)],i.prototype,"textStyle",void 0),wt([t.Property(10)],i.prototype,"shapeHeight",void 0),wt([t.Property(10)],i.prototype,"shapeWidth",void 0),wt([t.Complex({},yt)],i.prototype,"border",void 0),wt([t.Complex({left:0,right:0,top:0,bottom:0},lr)],i.prototype,"margin",void 0),wt([t.Complex({left:0,right:0,top:0,bottom:0},vs)],i.prototype,"containerPadding",void 0),wt([t.Property(8)],i.prototype,"shapePadding",void 0),wt([t.Property("transparent")],i.prototype,"background",void 0),wt([t.Property(1)],i.prototype,"opacity",void 0),wt([t.Property(!0)],i.prototype,"toggleVisibility",void 0),wt([t.Property(!1)],i.prototype,"enableHighlight",void 0),wt([t.Property(null)],i.prototype,"description",void 0),wt([t.Property(3)],i.prototype,"tabIndex",void 0),wt([t.Property(null)],i.prototype,"title",void 0),wt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},oi)],i.prototype,"titleStyle",void 0),wt([t.Property("Top")],i.prototype,"titlePosition",void 0),wt([t.Property("Normal")],i.prototype,"textWrap",void 0),wt([t.Property("Ellipsis")],i.prototype,"textOverflow",void 0),wt([t.Property(100)],i.prototype,"maximumTitleWidth",void 0),wt([t.Property(null)],i.prototype,"maximumLabelWidth",void 0),wt([t.Property(!0)],i.prototype,"enablePages",void 0),wt([t.Property(!1)],i.prototype,"isInversed",void 0),wt([t.Property(!1)],i.prototype,"reverse",void 0),i}(t.ChildProperty),kat=function(n){function r(t){var i=n.call(this,t)||this;return i.library=i,i.addEventListener(),i}return ert(r,n),r.prototype.addEventListener=function(){this.chart.isDestroyed||(this.chart.on(t.Browser.touchMoveEvent,this.mouseMove,this),this.chart.on("click",this.click,this),this.chart.on(t.Browser.touchEndEvent,this.mouseEnd,this))},r.prototype.removeEventListener=function(){this.chart.isDestroyed||(this.chart.off(t.Browser.touchMoveEvent,this.mouseMove),this.chart.off("click",this.click),this.chart.off(t.Browser.touchEndEvent,this.mouseEnd))},r.prototype.mouseMove=function(n){var i;if(this.chart.legendSettings.visible&&!this.chart.isTouch&&(this.move(n),this.chart.highlight3DModule&&("None"!==this.chart.highlightMode||this.chart.legendSettings.enableHighlight)))for(var e=[this.legendID+"_text_",this.legendID+"_shape_marker_",this.legendID+"_shape_",this.legendID+"_g_"],r=n.target.id,u=void 0,t=0,f=e;t<f.length;t++)if(i=f[t],r.indexOf(i)>-1){u=parseInt(r.split(i)[1],10);this.chart.highlight3DModule.legendSelection(this.chart,u,n.target,n.type);break}},r.prototype.mouseEnd=function(n){this.chart.legendSettings.visible&&this.chart.isTouch&&this.move(n)},r.prototype.getLegendOptions=function(n,t){var r,u,f,e,i;for(this.legendCollections=[],this.isRtlEnable=t.enableRtl,this.isReverse=!this.isRtlEnable&&t.legendSettings.reverse,n.length>1&&(this.legend.mode="Series"),f=0,e=n;f<e.length;f++)if(i=e[f],"Series"===this.legend.mode)r=i.type,u=i.pointColorMapping&&i.points.length>0&&i.points[0].interior?i.points[0].interior:i.interior,this.legendCollections.push(new br(i.name,u,i.legendShape,i.visible,r,i.legendImageUrl?i.legendImageUrl:"","None",!1,null,null));else if("Point"===this.legend.mode)for(var c=function(n){r=i.type;u=n.interior?n.interior:i.interior;0===s.legendCollections.filter(function(t){return t.text===n.x.toString()}).length&&s.legendCollections.push(new br(n.x.toString(),u,i.legendShape,n.visible,r,"","None",!1))},s=this,o=0,h=i.points;o<h.length;o++)c(h[o]);this.isReverse&&this.legendCollections.reverse()},r.prototype.get3DLegendBounds=function(n,t,r){var c,w;this.calculateLegendTitle(r,t);this.isTitle=!!r.title;this.chartRowCount=1;this.rowHeights=[];this.columnHeights=[];this.pageHeights=[];var u,f=r.padding,l=r.titlePosition,k=0,d=0,it=this.arrowWidth,rt=this.arrowHeight,ut=this.isVertical&&!r.enablePages?rt:0,a=this.isTitle&&"Top"===l?this.legendTitleSize.height+this.fivePixel:0;a=this.isTitle&&this.isVertical&&"Top"!==l?this.legendTitleSize.height+this.fivePixel:a;this.isVertical?d=r.width?0:n.width/20:k=r.height?0:n.height/20;t.height+=k;t.width+=d;var s,g=r.shapeWidth,nt=r.shapePadding,b=0,o=0,y=0,e=0,v=0,h=0,p=0,tt=!1;for(this.maxItemHeight=Math.max(i.measureText("MeasureText",r.textStyle,this.chart.themeStyle.legendLabelFont).height,r.shapeHeight),c=0;c<this.legendCollections.length;c++)(u=this.legendCollections[c],vf.test(u.text)&&(u.text=no(u.text,vf)),pe.test(u.text)&&(u.text=no(u.text,pe)),s={fill:u.fill,text:u.text,shape:u.shape,cancel:!1},this.chart.trigger(te,s),u.render=!s.cancel,u.text=s.text,u.fill=s.fill,u.shape=s.shape,u.markerShape="None",u.textSize=i.measureText(u.text,r.textStyle,this.chart.themeStyle.legendLabelFont),g=u.text?r.shapeWidth:0,nt=u.text?r.shapePadding:0,u.render&&u.text)&&(tt=!0,o+=y=g+nt+(r.maximumLabelWidth?r.maximumLabelWidth:u.textSize.width)+(this.isVertical||0===c?f:this.itemPadding),r.enablePages||this.isVertical||(p=this.isTitle&&"Top"!==l?this.legendTitleSize.width+this.fivePixel:0,p+=it),this.getLegendHeight(u,r,t,o,this.maxItemHeight,f),(t.width<f+o+p||this.isVertical)&&(b=Math.max(b,o+f+p-(this.isVertical?0:y)),0===h&&y!==o&&(h=1),o=this.isVertical?0:y,h++,v=0,e=ut),w=h>0?h-1:0,this.rowHeights[w]=Math.max(this.rowHeights[w]?this.rowHeights[w]:0,u.textSize.height),this.columnHeights[v]=(this.columnHeights[v]?this.columnHeights[v]:0)+u.textSize.height+(this.isVertical?0===c?f:this.itemPadding:f),v++);e=Math.max.apply(null,this.columnHeights)+f+a;e=Math.max(e,this.maxItemHeight+f+f+a);this.isPaging=t.height<e;this.isPaging&&!r.enablePages&&(this.isVertical?e+=e:e=this.maxItemHeight+f+f+("Top"===l?a:0));this.totalPages=h;this.isPaging||this.isVertical||(o+=this.isTitle&&"Top"!==l?this.fivePixel+this.legendTitleSize.width+this.fivePixel:0);tt?this.setBounds(Math.max(o+f,b),e,r,t):this.setBounds(0,0,r,t)},r.prototype.getLegendHeight=function(n,t,i,r,u,f){var e=n.textSize.width,o=t.shapePadding+2*f+t.shapeWidth;switch(t.textWrap){case"Wrap":case"AnyWhere":e>t.maximumLabelWidth||e+r>i.width?n.textCollection=ur(n.text,t.maximumLabelWidth?Math.min(t.maximumLabelWidth,i.width-o):i.width-o,t.textStyle,this.chart.enableRtl,null,null,this.chart.themeStyle.legendLabelFont):n.textCollection.push(n.text);n.textSize.height=u*n.textCollection.length}},r.prototype.getRenderPoint=function(n,t,i,r,u,f,e){var c=this.legend.padding,s=i+(this.legend.maximumLabelWidth?this.legend.maximumLabelWidth:r.textSize.width),h=r.location.x+(this.isRtlEnable?-s:s),o;this.isWithinBounds(h,(this.legend.maximumLabelWidth?this.legend.maximumLabelWidth:n.textSize.width)+i-this.itemPadding,u)||this.isVertical?(n.location.x=t.x,f!==e&&this.chartRowCount++,n.location.y=f===e?r.location.y:r.location.y+(this.isVertical?r.textSize.height:this.rowHeights[this.chartRowCount-2])+(this.isVertical?this.itemPadding:c)):(n.location.x=f===e?r.location.x:h,n.location.y=r.location.y);o=this.isRtlEnable?n.location.x-i+this.itemPadding+this.legend.shapeWidth/2-this.legendBounds.x:this.legendBounds.x+this.legendBounds.width-(n.location.x+i-this.itemPadding-this.legend.shapeWidth/2);this.isVertical||!this.isPaging||this.legend.enablePages||(o=this.legendBounds.width-n.location.x-this.fivePixel);o=this.legend.maximumLabelWidth?Math.min(this.legend.maximumLabelWidth,o):o;"Ellipsis"===this.legend.textOverflow&&"Normal"===this.legend.textWrap&&(n.text=wi(+o.toFixed(4),n.text,this.legend.textStyle,this.chart.enableRtl,this.chart.themeStyle.legendLabelFont))},r.prototype.isWithinBounds=function(n,t,i){return this.isRtlEnable?n-t<i.x-this.legend.shapeWidth/2:n+t>i.x+i.width+this.legend.shapeWidth/2},r.prototype.LegendClick=function(n,t){var i=this.chart,s="Series"===i.legendSettings.mode?n:0,h=this.isReverse?this.legendCollections.length-1-n:n,r=i.visibleSeries[s],f=this.legendCollections[h],o="isProtectedOnChange",u,e;"Series"===i.legendSettings.mode?(u={legendText:f.text,legendShape:f.shape,series:r,cancel:!1},this.chart.trigger(ar,u),r.legendShape=u.legendShape,u.cancel||(null!==r.fill&&(i.visibleSeries[n].interior=r.fill),i.legendSettings.toggleVisibility?(r.chart[o]=!0,this.changeSeriesVisiblity(r,r.visible),f.visible=r.visible,this.refreshLegendToggle(i,r)):i.highlight3DModule?i.highlight3DModule.legendSelection(i,n,t.target,t.type):i.selection3DModule&&i.selection3DModule.legendSelection(i,n,t.target,t.type),r.chart[o]=!1)):"Point"===i.legendSettings.mode&&(e=r.points[n],u={legendText:f.text,legendShape:f.shape,series:r,cancel:!1},this.chart.trigger(ar,u),i.legendSettings.toggleVisibility&&!u.cancel&&(e.visible=!e.visible,this.legendCollections[n].visible=e.visible,this.refreshLegendToggle(i,r)))},r.prototype.refreshLegendToggle=function(n,r){var u=[];if(n.selection3DModule&&(u=t.extend([],n.selection3DModule.selectedDataIndexes,null,!0)),n.svgObject.childNodes.length>0){for(;n.svgObject.lastChild;)n.svgObject.removeChild(n.svgObject.lastChild);t.remove(n.svgObject)}n.animateSeries=!1;v(i.getElement(n.element.id+"_Secondary_Element").querySelectorAll(".ejSVGTooltip")[0]);this.redrawSeriesElements(r,n);n.removeSvg();n.refreshAxis();r.refreshAxisLabel();this.refreshSeries(n.visibleSeries);n.polygons=[];n.refreshBound();n.trigger("loaded",{chart:n});u.length>0&&(n.selection3DModule.selectedDataIndexes=u,n.selection3DModule.redrawSelection(n,n.selectionMode));(n.highlight3DModule&&"None"!==n.highlightMode||n.legendSettings.enableHighlight)&&n.highlight3DModule.redrawSelection(n,n.highlightMode);n.redraw=!1},r.prototype.changeSeriesVisiblity=function(n,t){n.visible=!t;this.isSecondaryAxis(n.xAxis)&&(n.xAxis.internalVisibility=n.xAxis.series.some(function(n){return n.visible}));this.isSecondaryAxis(n.yAxis)&&(n.yAxis.internalVisibility=n.yAxis.series.some(function(n){return n.visible}))},r.prototype.isSecondaryAxis=function(n){return this.chart.axes.indexOf(n)>-1},r.prototype.redrawSeriesElements=function(n,t){if(!t.redraw)return null;v(t.element.id+"_Series_"+(void 0===n.index?n.category:n.index)+"_DataLabelCollections")},r.prototype.refreshSeries=function(n){for(var t=0,i=n;t<i.length;t++)i[t].position=void 0},r.prototype.click=function(n){var r;if(this.chart.legendSettings.visible){for(var u,t=n.target.id.indexOf("_chart_legend_g_")>-1?n.target.firstChild.id:n.target.id,i=0,f=[this.legendID+"_text_",this.legendID+"_shape_marker_",this.legendID+"_shape_"];i<f.length;i++)if(r=f[i],t.indexOf(r)>-1){u=parseInt(t.split(r)[1],10);this.LegendClick(u,n);break}t.indexOf(this.legendID+"_pageup")>-1?this.changePage(n,!0):t.indexOf(this.legendID+"_pagedown")>-1&&this.changePage(n,!1)}},r.prototype.getModuleName=function(){return"Legend3D"},r.prototype.destroy=function(){this.removeEventListener()},r}(fs),dat=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),p=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},gat=function(n){function u(t,i){var r=n.call(this,t,i)||this;return r.previousTargetId="",r.currentPointIndex=0,r.currentSeriesIndex=0,r.currentLegendIndex=0,r.animated=!1,r.isPointMouseDown=!1,r.visible=0,r.clickCount=0,r.maxPointCount=0,r.singleClickTimer=0,r.isRtlEnabled=!1,r.scaleX=1,r.scaleY=1,r.chartId=57723,r.isLegendClicked=!1,r.rotateActivate=!1,r.isRemove=!1,r.polygons=[],r}return dat(u,n),u.prototype.isIdHasSpecialCharacter=function(n){var u=/^[A-Za-z ]+$/,f=/^[0-9 ]+$/,i="",r,t;if(u.test(n))return n;for(r=0,f.test(n[0])&&(i+="\\3"+n[0],r=1),t=r;t<n.length;t++)i+=u.test(n[t])||-1!==n.indexOf("-")||-1!==n.indexOf("_")||-1!==n.indexOf("\\")||f.test(n[t])?n[t]:"\\"+n[t];return i},u.prototype.preRender=function(){this.element.id=this.isIdHasSpecialCharacter(this.element.id);this.allowServerDataBinding=!1;this.unWireEvents();this.initPrivateVariable();this.setCulture();this.wireEvents();this.element.setAttribute("dir",this.enableRtl?"rtl":"")},u.prototype.initPrivateVariable=function(){if(this.delayRedraw=!1,this.animateSeries=!0,this.horizontalAxes=[],this.verticalAxes=[],this.polygons=[],this.vector=new ho(0,0,0),this.wallRender=new pit,this.matrixObj=new ch,this.bspTreeObj=new by,this.polygon=new ky,this.graphics=new wy,this.transform3D=new ait,this.svg3DRenderer=new vit,this.axisRender=new wit,this.chart3DRender=new py,this.chartAxisLayoutPanel=new hit(this),this.refreshAxis(),this.refreshDefinition(this.rows),this.refreshDefinition(this.columns),this.tooltip3DModule&&(this.tooltip3DModule.previousPoints=[]),this.element.setAttribute("role","region"),this.element.setAttribute("tabindex","0"),this.element.style.outline="none",this.element.setAttribute("aria-label",this.description||this.title+". Syncfusion interactive chart."),this.element.classList.contains("e-chart-focused")||this.element.setAttribute("class",this.element.getAttribute("class")+" e-chart-focused"),""===this.element.id){var n=document.getElementsByClassName("e-chart").length;this.element.id="chart_"+this.chartId+"_"+n}this.svgId=this.element.id+"_svg"},u.prototype.setCulture=function(){this.intl=new t.Internationalization;this.localeObject=new t.L10n(this.getModuleName(),this.defaultLocalConstants,this.locale)},u.prototype.render=function(){var t=this,n;this.svgRenderer=new i.SvgRenderer(this.element.id);n={chart:this,theme:this.theme,cancel:!1};this.trigger(ne,n,function(){n.cancel||t.cartesianChartRendering()})},u.prototype.cartesianChartRendering=function(){this.setTheme();this.createChartSvg();this.calculateVisibleSeries();this.calculateVisibleAxis();this.processData();this.renderComplete();this.allowServerDataBinding=!0},u.prototype.createChartSvg=function(){this.removeSvg();ts(this)},u.prototype.removeSvg=function(){if(this.redraw)return null;if(i.removeElement(this.element.id+"_Secondary_Element"),this.isReact&&this.clearTemplate(),this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&t.remove(this.svgObject)}},u.prototype.processData=function(n){var t,i,r;for(void 0===n&&(n=!0),this.visibleSeriesCount=0,t=0,i=this.visibleSeries;t<i.length;t++)r=i[t],r.visible||this.legendSettings.visible?this.initializeDataModule(r):this.visibleSeriesCount++;!n||this.visibleSeries.length&&this.visibleSeriesCount!==this.visibleSeries.length||(this.refreshBound(),this.trigger("loaded",{chart:this}))},u.prototype.initializeDataModule=function(n){var t;n.xData=[];n.yData=[];t=this.isAngular?Object.keys(n.dataSource).length?n.dataSource:this.dataSource:n.dataSource||this.dataSource;n.dataModule=new ih(t,n.query);n.points=[];n.refreshDataManager(this)},u.prototype.animate=function(n){this.redraw=!0;this.animated=!0;this.duration=n||1e3},u.prototype.refreshBound=function(){this.legend3DModule&&this.legendSettings.visible&&this.legend3DModule.getLegendOptions(this.visibleSeries,this);this.tooltip.enable&&this.tooltip3DModule&&(this.tooltip3DModule.previousPoints=[]);this.calculateStackValues();this.calculateBounds();this.renderElements();i.removeElement("chartmeasuretext");this.removeSelection()},u.prototype.removeSelection=function(){for(var r,t,u,n=0,i=this.visibleSeries;n<i.length;n++)if(r=i[n],r.visible)for(t=0,u=r.points;t<u.length;t++)u[t].isSelect=!1},u.prototype.calculateStackValues=function(){for(var n,i=!1,t=0,r=this.visibleSeries.length;t<r;t++)(n=this.visibleSeries[t]).position=n.rectCount=void 0,-1===n.type.indexOf("Stacking")||i||(n.calculateStackedValue(n.type.indexOf("100")>-1,this),i=!0)},u.prototype.calculateBounds=function(){var t=this.margin,h=0,c=0,l=0,a="Top"===this.titleStyle.position||"Bottom"===this.titleStyle.position?15:5,f=t.left+this.border.width,e=this.availableSize.width-f-t.right-this.border.width,v=0,r=t.top+this.border.width,u=this.availableSize.height-r-this.border.width-t.bottom,p,n;if(this.titleCollection=[],this.subTitleCollection=[],this.title){if(this.titleCollection=tu(this.title,this.titleStyle,"Left"===this.titleStyle.position||"Right"===this.titleStyle.position?u:e,this.enableRtl,this.themeStyle.chartTitleFont),h=i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont).height*this.titleCollection.length+a,this.subTitle){for(var o=0,s=0,y=this.titleCollection;s<y.length;s++)p=y[s],o=(l=i.measureText(p,this.titleStyle,this.themeStyle.chartSubTitleFont).width)>o?l:o;this.subTitleCollection=tu(this.subTitle,this.subTitleStyle,o,this.enableRtl,this.themeStyle.chartSubTitleFont);c=i.measureText(this.subTitle,this.subTitleStyle,this.themeStyle.chartSubTitleFont).height*this.subTitleCollection.length+a}}else"Top"!==this.legendSettings.position&&this.border.width&&(v=10);r=t.top+v+this.border.width;u=this.availableSize.height-r-this.border.width-t.bottom;n=c+h+this.titleStyle.border.width+this.subTitleStyle.border.width;switch(this.titleStyle.position){case"Top":r+=n;u-=n;break;case"Bottom":u-=n;break;case"Left":f+=n;e-=n;break;case"Right":f-=this.titleStyle.border.width+this.subTitleStyle.border.width;e-=n}this.initialClipRect=new i.Rect(f,r,e,u);this.legend3DModule&&this.legendSettings.visible&&this.legend3DModule.calculateLegendBounds(this.initialClipRect,this.availableSize,null);this.chartAxisLayoutPanel.measureAxis(this.initialClipRect)},u.prototype.renderElements=function(){this.renderBorder();this.renderTitle();this.createSeriesElements();this.render3DChart();this.renderLegend();this.performSelection();this.setSecondaryElementPosition();this.doAnimation()},u.prototype.animateRect=function(n,i,r,u,f,e){var o,s,v,p=i.animation,w=i.chart.animated?i.chart.duration:p.duration,b=fe("Linear"),h=n.getAttribute("height")?+n.getAttribute("height"):0,c=n.getAttribute("width")?+n.getAttribute("width"):0,y=r.yValue<0,l=+n.getAttribute("x"),a=+n.getAttribute("y");i.chart.requireInvertedAxis?i.type.indexOf("Stacking")>-1?(o=l,s=a):(s=y?a:a+h,o=y!==i.yAxis.isAxisInverse?l+c:l):(s=y!==i.yAxis.isAxisInverse?a:a+h,o=y?l:l+c);t.isNullOrUndefined(n)||(n.style.visibility="hidden",u&&(u.style.visibility="hidden"),f&&(f.style.visibility="hidden"),e&&(e.style.visibility="hidden"),new t.Animation({}).animate(n,{duration:0===w&&"Enable"===t.animationMode?1e3:w,delay:p.delay,progress:function(t){t.timeStamp>=t.delay&&(n.style.visibility="visible",i.chart.requireInvertedAxis?(c=c||1,v=b(t.timeStamp-t.delay,0,c,t.duration),n.setAttribute("transform","translate("+o+" "+s+") scale("+v/c+", 1) translate("+-o+" "+-s+")")):(h=h||1,v=b(t.timeStamp-t.delay,0,h,t.duration),n.setAttribute("transform","translate("+o+" "+s+") scale(1,"+v/h+") translate("+-o+" "+-s+")")))},end:function(){n.setAttribute("transform","translate(0,0)");u&&(u.style.visibility="visible");f&&(f.style.visibility="visible");e&&(e.style.visibility="visible");i.chart.trigger("animationComplete",{series:i})}}))},u.prototype.doAnimation=function(){for(var i=this,u=function(t){var u=n.visibleSeries[t],f,c;if(u.visible&&u.animation.enable&&n.animateSeries&&!n.rotateActivate){var e=void 0,s=void 0,h=void 0,l=new ft(n.element.id+"_ChartSeriesClipRect_"+t,"transparent",{width:1,color:"Gray"},1,{x:0,y:0,width:n.availableSize.width,height:n.availableSize.height}),a=eu(n.redraw,l,n.svgRenderer);for(o(!1,n.chart3D,a.children[0],n.redraw),f=0;u.visiblePoints&&f<u.visiblePoints.length;f++)c=u.visiblePoints[f],document.querySelectorAll('[id*="region-series-'+t+'"]').forEach(function(n){n.setAttribute("clip-path","url(#"+i.element.id+"_ChartSeriesClipRect_"+t+")")}),u.dataLabel.visible&&(e=r(n.element.id+"-svg-series-"+u.index+"-point-"+f+"-data-label"),s=r(n.element.id+"-svg-data-label-series-"+u.index+"-point-"+f),h=r(n.element.id+"-series-"+u.index+"-data-label-"+f)),n.animateRect(document.getElementById(n.element.id+"_ChartSeriesClipRect_"+t).children[0],u,c,e,s,h)}},n=this,t=0;t<this.visibleSeries.length;t++)u(t)},u.prototype.performSelection=function(){var n=[];this.selection3DModule&&(n=t.extend([],this.selection3DModule.selectedDataIndexes,null,!0),this.selection3DModule.invokeSelection(this));this.highlight3DModule&&this.highlight3DModule.invokeHighlight(this);(!this.highlight3DModule||this.legendSettings.enableHighlight&&"None"===this.highlightMode)&&this.tooltip3DModule&&this.tooltip3DModule.seriesStyles();n.length>0&&(this.selection3DModule.selectedDataIndexes=n,this.selection3DModule.redrawSelection(this,this.selectionMode))},u.prototype.renderLegend=function(){if(this.legend3DModule&&this.legend3DModule.legendCollections.length&&this.legendSettings.visible){this.legend3DModule.calTotalPage=!0;var n=this.legend3DModule.legendBounds;this.legend3DModule.renderLegend(this,this.legendSettings,n)}this.redraw||this.element.appendChild(this.svgObject)},u.prototype.setSecondaryElementPosition=function(){var n=r(this.element.id+"_Secondary_Element"),t,i;n&&(t=this.element.getBoundingClientRect(),i=r(this.svgId).getBoundingClientRect(),n.style.left=Math.max(i.left-t.left,0)+"px",n.style.top=Math.max(i.top-t.top,0)+"px")},u.prototype.initializeModuleElements=function(){this.dataLabelCollections=[];var n=this.element.id;this.series.length&&(this.seriesElements=this.svgRenderer.createGroup({id:n+"SeriesCollection"}));this.dataLabelElements=this.renderer.createGroup({id:n+"DataLabelCollection"})},u.prototype.createSeriesElements=function(){this.initializeModuleElements();var n=this.element.id,t=ci(this.redraw,n+"_Secondary_Element")||this.createElement("div");t.id=n+"_Secondary_Element";t.style.cssText="position: relative";o(!1,this.element,t,this.redraw);this.tooltip.enable&&o(!1,this.svgObject,this.renderer.createGroup({id:n+"_UserInteraction",style:"pointer-events:none;"}),this.redraw)},u.prototype.renderTitle=function(){var v,s=this.margin,n,r,a,y,l,h;if(this.title){n=bu(this.titleStyle.textAlignment,this.enableRtl);r=i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont);v=new i.Rect(s.left,0,this.availableSize.width-s.left-s.right,0);var t=this.titleStyle.border.width,u=this.margin.top+3*r.height/4,f=pr(v,this.titleStyle||this.themeStyle.chartTitleFont)+t,c=void 0,e=this.titleStyle.textAlignment,p=i.measureText(this.subTitle,this.subTitleStyle,this.themeStyle.chartSubTitleFont);switch(this.titleStyle.position){case"Top":u+=.5*t;f+="start"===n?.5*t+this.border.width:"end"===n?2*-t-this.border.width:0;break;case"Bottom":f+="start"===n?.5*t+this.border.width:"end"===n?2*-t-this.border.width:0;u=this.availableSize.height-this.margin.bottom-p.height-r.height/2-.5*t-.5*this.subTitleStyle.border.width;break;case"Left":f=this.margin.left+3*r.height/4+.5*t;u="Near"===e?s.bottom+.5*t+this.border.width:"Far"===e?this.availableSize.height-s.bottom-.5*t-this.border.width:this.availableSize.height/2;n="Near"===e?"end":"Far"===e?"start":"middle";n=this.enableRtl?"end"===n?"start":"start"===n?"end":n:n;c="rotate(-90,"+f+","+u+")";break;case"Right":f=this.availableSize.width-this.margin.right-3*r.height/4-.5*t;u="Near"===e?s.bottom+.5*t+this.border.width:"Far"===e?this.availableSize.height-s.bottom-.5*t-this.border.width:this.availableSize.height/2;n="Near"===e?"start":"Far"===e?"end":"middle";n=this.enableRtl?"end"===n?"start":"start"===n?"end":n:n;c="rotate(90,"+f+","+u+")";break;case"Custom":f=this.titleStyle.x;u=this.titleStyle.y;n="middle"}a={id:this.element.id+"-chart-title-border",x:f-("middle"===n?r.width/2+5:"end"===n?r.width+5:5),y:u-r.height+r.height/4,rx:this.titleStyle.border.cornerRadius,ry:this.titleStyle.border.cornerRadius,width:r.width+10,height:r.height*this.titleCollection.length,fill:this.titleStyle.background,"stroke-width":t,stroke:this.titleStyle.border.color,transform:c||""};y=ci(this.redraw,this.element.id+"-chart-title-border",a,this.renderer)||this.renderer.drawRectangle(a);o(!1,this.svgObject,y,this.redraw);l=new i.TextOption(this.element.id+"-chart-title",f,u,n,this.titleCollection,c,"auto");h=ci(this.redraw,this.element.id+"-chart-title",l,this.renderer)||ct(this.renderer,l,this.titleStyle,this.titleStyle.color||this.themeStyle.chartTitleFont.color,this.svgObject,null,null,null,null,null,null,0,null,!1,null,this.themeStyle.chartTitleFont);h&&(h.setAttribute("tabindex","0"),h.style.outline="none",h.setAttribute("class","e-chart-focused"));this.subTitle&&this.renderSubTitle(l)}},u.prototype.renderSubTitle=function(n){for(var v,p,f,h,w,c,r=0,l=0,u=this.titleStyle.textAlignment,e=0,a=this.titleCollection;e<a.length;e++)v=a[e],r=(l=i.measureText(v,this.titleStyle,this.themeStyle.chartTitleFont).width)>r?l:r;var t=i.measureText(this.subTitleCollection.reduce(function(n,t){return n.length>t.length?n:t}),this.subTitleStyle,this.themeStyle.chartSubTitleFont),y=bu(this.subTitleStyle.textAlignment,this.enableRtl),s=new i.Rect("Center"===u?n.x-.5*r:"Far"===u?n.x-r:n.x,0,r,0);"Left"===this.titleStyle.position&&(s.x="Center"===u?n.x-.5*r:"Far"===u?this.margin.left+3*t.height/4:n.x-r);p=i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont);f=n.y*n.text.length+t.height+5+this.titleStyle.border.width+.5*this.subTitleStyle.border.width;"Bottom"===this.titleStyle.position&&(f=n.y*n.text.length+5+p.height/2+t.height/2);h={id:this.element.id+"-chart-sub-title-border",x:pr(s,this.subTitleStyle)-("middle"===y?t.width/2+5:"end"===y?t.width+5:5),y:f-t.height+t.height/4,rx:this.subTitleStyle.border.cornerRadius,ry:this.subTitleStyle.border.cornerRadius,width:t.width+10,height:t.height*this.subTitleCollection.length,fill:this.subTitleStyle.background,"stroke-width":this.subTitleStyle.border.width,stroke:this.subTitleStyle.border.color,transform:n.transform};w=ci(this.redraw,this.element.id+"-chart-sub-title-border",h,this.renderer)||this.renderer.drawRectangle(h);o(!1,this.svgObject,w,this.redraw);c=new i.TextOption(this.element.id+"-chart-sub-title",pr(s,this.subTitleStyle),f,bu(this.subTitleStyle.textAlignment,this.enableRtl),this.subTitleCollection,n.transform,"auto");ci(this.redraw,this.element.id+"-chart-sub-title",c,this.renderer)||ct(this.renderer,c,this.subTitleStyle,this.subTitleStyle.color||this.themeStyle.chartSubTitleFont.color,this.svgObject,null,null,null,null,null,null,0,null,!1,null,this.themeStyle.chartSubTitleFont)},u.prototype.renderBorder=function(){var n=this.border.width,t=this.backgroundImage,f=t?"transparent":this.background||this.themeStyle.background,u=new ft(this.element.id+"-chart-border",f,this.border,1,new i.Rect(.5*n+0,.5*n+0,this.availableSize.width-n,this.availableSize.height-n),0,0,"",this.border.dashArray),r;(this.htmlObject=ci(this.redraw,this.element.id+"-chart-border",u,this.renderer)||this.renderer.drawRectangle(u),this.htmlObject.setAttribute("aria-hidden","true"),o(!1,this.svgObject,this.htmlObject,this.redraw),t)&&(r=new to(this.availableSize.height-n,this.availableSize.width-n,t,0,0,this.element.id+"-chart-background","visible","none"),this.htmlObject=ci(this.redraw,this.element.id+"-chart-background",r,this.renderer)||this.renderer.drawImage(r),o(!1,this.svgObject,this.htmlObject,this.redraw))},u.prototype.requiredModules=function(){var i,t=this,n=[],r=this.series,u=!1;return this.tooltip.enable&&n.push({member:"Tooltip3D",args:[this]}),r.map(function(f){t.isLegend=t.legendSettings.visible&&(""!==f.name||!!t.isLegend);i=-1!==f.type.indexOf("100")?f.type.replace("100","")+"Series3D":f.type+"Series3D";u=f.dataLabel.visible||u;n.some(function(n){return n.member===i})||n.push({member:i,args:[t,r]})}),u&&n.push({member:"DataLabel3D",args:[this,r]}),n=this.findAxisModule(n),this.isLegend&&n.push({member:"Legend3D",args:[this]}),this.enableExport&&n.push({member:"Export3D",args:[this]}),"None"!==this.selectionMode&&n.push({member:"Selection3D",args:[this]}),("None"!==this.highlightMode||this.legendSettings.enableHighlight)&&n.push({member:"Highlight3D",args:[this]}),n},u.prototype.findAxisModule=function(n){var i=[],t;i.push(this.primaryXAxis);i.push(this.primaryYAxis);for(var r=!1,u=!1,f=!1,e=!1,o=0,s=i=i.concat(this.axes);o<s.length;o++)t=s[o],r="DateTime"===t.valueType||r,u="Category"===t.valueType||u,f="Logarithmic"===t.valueType||f,e="DateTimeCategory"===t.valueType||e;return r&&n.push({member:"DateTime3D",args:[this]}),u&&n.push({member:"Category3D",args:[this]}),f&&n.push({member:"Logarithmic3D",args:[this]}),e&&n.push({member:"DateTimeCategory3D",args:[this]}),n},u.prototype.setTheme=function(){this.themeStyle=cit(this.theme)},u.prototype.setNavigationStyle=function(n){var t=document.getElementById(n);t&&t.style.setProperty("outline","1.5px solid "+this.themeStyle.tabColor)},u.prototype.removeNavigationStyle=function(){var n=document.querySelectorAll("[id*=_Point_], [id*="+this.element.id+"], [id*=_ChartBorder], text[id*=_ChartTitle],g[id*=_chart_legend],  text[id*=_ChartSubTitle], div[id*=_Annotation]");n&&n.forEach(function(n){(n instanceof HTMLElement||n instanceof SVGElement)&&n.style.setProperty("outline","none")})},u.prototype.render3DChart=function(){this.chart3D=this.svgRenderer.createGroup({id:this.element.id+"-svg-chart-3d"});this.chart3D.setAttribute("role","region");this.chart3D.setAttribute("aria-hidden","false");this.draw3DAxis();this.wallRender.update3DWall(this);this.renderSeries();o(!1,this.svgObject,this.chart3D,this.redraw);var n=new i.Size(this.availableSize.width,this.availableSize.height);this.graphics.prepareView(this.perspectiveAngle,this.depth,this.rotation,this.tilt,n,this);this.graphics.view(this.svgObject,this)},u.prototype.draw3DAxis=function(){for(var n=0;n<this.axisCollections.length;n++)this.axisRender.drawAxes(n,this.axisCollections[n],this)},u.prototype.renderSeries=function(){for(var i,n=0,t=this.visibleSeries;n<t.length;n++)i=t[n],i.visible&&(this.visible++,i.renderSeries(this));this.visible=0},u.prototype.initAxis=function(n,t,i){n.xAxisName===t.name||null==n.xAxisName&&"primaryXAxis"===t.name?(t.orientation=this.requireInvertedAxis?"Vertical":"Horizontal",n.xAxis=t,i&&t.series.push(n)):(n.yAxisName===t.name||null==n.yAxisName&&"primaryYAxis"===t.name)&&(t.orientation=this.requireInvertedAxis?"Horizontal":"Vertical",n.yAxis=t,i&&t.series.push(n))},u.prototype.calculateVisibleAxis=function(){var n,i=[this.primaryXAxis,this.primaryYAxis],t,f,r,u,e;for(i=i.concat(this.axes),this.axisCollections=[],t=0,f=i.length;t<f;t++){for((n=i[t]).series=[],n.labels=[],n.indexLabels={},n.orientation=0===t?this.requireInvertedAxis?"Vertical":"Horizontal":1===t?this.requireInvertedAxis?"Horizontal":"Vertical":n.orientation,r=0,u=this.visibleSeries;r<u.length;r++)e=u[r],this.initAxis(e,n,!0);null!=n.orientation&&this.axisCollections.push(n)}this.rows.length>0&&this.columns.length>0&&this.chartAxisLayoutPanel.measure()},u.prototype.unWireEvents=function(){var n=t.Browser.touchStartEvent,i=t.Browser.touchMoveEvent,r=t.Browser.touchEndEvent,u=t.Browser.isPointer?"pointerleave":"mouseleave";t.EventHandler.remove(this.element,n,this.chartOnMouseDown);t.EventHandler.remove(this.element,i,this.mouseMove);t.EventHandler.remove(this.element,r,this.mouseEnd);t.EventHandler.remove(this.element,"click",this.chartOnMouseClick);t.EventHandler.remove(this.element,u,this.mouseLeave);t.EventHandler.remove(this.element,"keydown",this.chartKeyDown);t.EventHandler.remove(document.body,"keydown",this.documentKeyHandler);t.EventHandler.remove(this.element,"keyup",this.chartKeyUp);window.removeEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resizeBound);this.touchObject&&(this.touchObject.destroy(),this.touchObject=null)},u.prototype.wireEvents=function(){if(this.element){var n=t.Browser.isPointer?"pointerleave":"mouseleave";t.EventHandler.add(this.element,t.Browser.touchStartEvent,this.chartOnMouseDown,this);t.EventHandler.add(this.element,t.Browser.touchMoveEvent,this.mouseMove,this);t.EventHandler.add(this.element,t.Browser.touchEndEvent,this.mouseEnd,this);t.EventHandler.add(this.element,"click",this.chartOnMouseClick,this);t.EventHandler.add(this.element,n,this.mouseLeave,this);t.EventHandler.add(this.element,"keydown",this.chartKeyDown,this);t.EventHandler.add(document.body,"keydown",this.documentKeyHandler,this);t.EventHandler.add(this.element,"keyup",this.chartKeyUp,this);this.resizeBound=this.chartResize.bind(this);window.addEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resizeBound);this.longPressBound=this.longPress.bind(this);this.touchObject=new t.Touch(this.element,{tapHold:this.longPressBound,tapHoldThreshold:500});this.setStyle(this.element)}},u.prototype.longPress=function(n){return this.mouseX=n&&n.originalEvent.changedTouches?n.originalEvent.changedTouches[0].clientX:0,this.mouseY=n&&n.originalEvent.changedTouches?n.originalEvent.changedTouches[0].clientY:0,this.startMove=!0,this.setMouseXY(this.mouseX,this.mouseY),this.notify("tapHold",n),!1},u.prototype.chartOnMouseClick=function(n){var r=this,u=n.target,t=this,i;return this.clickCount++,i=400,1===this.clickCount?this.singleClickTimer=+setTimeout(function(){t.clickCount=0;t.trigger("chart3DMouseClick",{target:u.id,x:t.mouseX,y:t.mouseY})},i):2===this.clickCount&&(clearTimeout(this.singleClickTimer),this.clickCount=0),this.isAngular,i=0,1===this.clickCount&&this.pointClick&&(this.singleClickTimer=+setTimeout(function(){r.clickCount=0;r.triggerPointEvent(ps,n)},i)),this.removeNavigationStyle(),this.notify("click",n),!1},u.prototype.export=function(n,t){this.export3DModule&&(this.export3DModule.export(n,t),this.afterExport&&this.export3DModule.getDataUrl(this))},u.prototype.chartResize=function(){var n=this,t,r;return this.animateSeries=!1,t={chart:this,currentSize:new i.Size(0,0),previousSize:new i.Size(this.availableSize.width,this.availableSize.height)},r={cancel:!1},this.resizeTo&&clearTimeout(this.resizeTo),this.trigger(ao,r),r.cancel||(this.resizeTo=+setTimeout(function(){n.isDestroyed?clearTimeout(n.resizeTo):(n.createChartSvg(),t.currentSize=n.availableSize,n.trigger(af,t),n.polygons=[],n.refreshAxis(),n.refreshBound(),n.trigger("loaded",{chart:n}))},500)),!1},u.prototype.triggerPointEvent=function(n,i){var u,o,f,r=null,s=null,e=i.target,h;e&&(h=e.nodeName,("path"===h||"shape"===h)&&e.id.indexOf("-region-")>1&&(u=e.id.match(/(\d+)/g),o=parseInt(u[u.length-1].toString(),10),f=parseInt(u[u.length-2].toString(),10)),t.isNullOrUndefined(f)||(r=this.visibleSeries[f]),r&&r.visible&&(s=r.points[o]));r&&s&&this.trigger(n,{series:r,point:s,seriesIndex:f,pointIndex:o,x:this.mouseX,y:this.mouseY})},u.prototype.chartOnMouseDown=function(n){var u,f,o,i=this.element.getBoundingClientRect(),s=n.target,e;return this.trigger("chart3DMouseDown",{target:s.id,x:this.mouseX,y:this.mouseY}),"touchstart"===n.type?(this.isTouch=!0,u=(o=n).changedTouches[0].clientX,f=o.changedTouches[0].clientY):(this.isTouch="touch"===n.pointerType,u=n.clientX,f=n.clientY),e=r(this.svgId).getBoundingClientRect(),this.mouseDownX=this.previousMouseMoveX=u-i.left-Math.max(e.left-i.left,0),this.mouseDownY=this.previousMouseMoveY=f-i.top-Math.max(e.top-i.top,0),this.enableRotation&&(this.isTouch&&this.tooltip3DModule&&this.tooltip3DModule.svgTooltip&&this.tooltip3DModule.svgTooltip.fadeOut(),this.rotateActivate=!0,this.previousCoords={x:this.mouseDownX,y:this.mouseDownY}),this.notify(t.Browser.touchStartEvent,n),!1},u.prototype.mouseMove=function(n){var t,i,u;return"touchmove"===n.type?(this.isTouch=!0,t=(u=n).changedTouches[0].clientX,i=u.changedTouches[0].clientY):(this.isTouch="touch"===n.pointerType||"2"===n.pointerType||this.isTouch,t=n.clientX,i=n.clientY),r(this.svgId)&&(this.setMouseXY(t,i),this.chartOnMouseMove(n)),!1},u.prototype.mouseLeave=function(n){var t,i,r;return"touchleave"===n.type?(this.isTouch=!0,t=(r=n).changedTouches[0].clientX,i=r.changedTouches[0].clientY):(this.isTouch="touch"===n.pointerType||"2"===n.pointerType,t=n.clientX,i=n.clientY),this.setMouseXY(t,i),this.chartOnMouseLeave(n),!1},u.prototype.mouseEnd=function(n){var t,i,r;return"touchend"===n.type?(i=(r=n).changedTouches[0].clientX,this.isTouch=!0,t=r.changedTouches[0].clientY):(t=n.clientY,i=n.clientX,this.isTouch="touch"===n.pointerType||"2"===n.pointerType),this.setMouseXY(i,t),this.chartOnMouseUp(n),!1},u.prototype.chartOnMouseUp=function(n){var i=n.target;return this.trigger("chart3DMouseUp",{target:i.id,x:this.mouseX,y:this.mouseY}),this.isTouch&&(this.titleTooltip(n,this.mouseX,this.mouseY),this.axisTooltip(n,this.mouseX,this.mouseY,this.isTouch)),this.notify(t.Browser.touchEndEvent,n),this.rotateActivate=!1,this.delayRedraw=!1,!1},u.prototype.print=function(n){new es(this).print(n)},u.prototype.chartOnMouseMove=function(n){var e=n.target,i,r,u,f;return(this.trigger("chart3DMouseMove",{target:e.id,x:this.mouseX,y:this.mouseY}),this.pointMove&&this.triggerPointEvent(ws,n),this.isTouch||(this.titleTooltip(n,this.mouseX,this.mouseY),this.axisTooltip(n,this.mouseX,this.mouseY)),this.rotateActivate&&ht(this.mouseX,this.mouseY,this.chartAxisLayoutPanel.seriesClipRect))&&(i=this.previousCoords.x-this.mouseX,r=this.previousCoords.y-this.mouseY,(i||r)&&((this.tilt-=r,this.rotation+=i,this.isTouch)?(document.querySelectorAll('[id*="axis-label-"]').forEach(function(n){return n.remove()}),this.delayRedraw=!0):(u=document.getElementById(this.chart3D.id),u.innerHTML="",u.remove()),f={width:this.availableSize.width,height:this.availableSize.height},this.graphics.view(this.svgObject,this,this.rotation,this.tilt,f,this.perspectiveAngle,this.depth),o(!1,this.svgObject,this.chart3D,this.redraw),this.previousCoords.y=this.mouseY,this.previousCoords.x=this.mouseX,this.isRemove=!1)),this.notify(t.Browser.touchMoveEvent,n),this.isTouch=!1,!1},u.prototype.titleTooltip=function(n,t,u,f){var e=n.target.id,s=e===this.element.id+"-chart-title"||e===this.element.id+"-chart-sub-title"||e.indexOf("-axis-title")>-1||e.indexOf("_legend_title")>-1,o=0;e.indexOf("-axis-title")>-1&&(o=parseInt(e.replace(this.element.id+"-svg","").replace("-axis-title","").split("-")[1],10));s&&n.target.textContent.indexOf("...")>-1?uf(e===this.element.id+"-chart-title"?this.title:e.indexOf("-axis-title")>-1?this.axisCollections[o].title:e.indexOf("-chart-sub-title")>-1?this.subTitle:this.legendSettings.title,t,u,this.element.offsetWidth,this.element.id+"-EJ2-title-tooltip",r(this.element.id+"_Secondary_Element"),f):i.removeElement(this.element.id+"-EJ2-title-tooltip")},u.prototype.setMouseXY=function(n,t){if(r(this.svgId)){var u=r(this.svgId).getBoundingClientRect(),i=this.element.getBoundingClientRect();this.mouseY=t-i.top-Math.max(u.top-i.top,0)/this.scaleX;this.mouseX=n-i.left-Math.max(u.left-i.left,0)/this.scaleY}},u.prototype.chartOnMouseLeave=function(n){var r=n.target,u=t.Browser.isPointer?"pointerleave":"mouseleave";return this.trigger("chart3DMouseLeave",{target:r.id,x:this.mouseX,y:this.mouseY}),i.removeElement(this.element.id+"-EJ2-axis-label-tooltip"),this.isPointMouseDown=!1,this.notify(u,n),this.rotateActivate=!1,this.delayRedraw=!1,!1},u.prototype.chartKeyDown=function(n){var t="";return"Tab"===n.code&&this.removeNavigationStyle(),"Space"===n.code&&n.preventDefault(),this.tooltip.enable&&("Tab"===n.code&&this.previousTargetId.indexOf("-series")>-1||"Escape"===n.code)&&(t="ESC"),"None"!==this.highlightMode&&"Tab"===n.code&&this.previousTargetId.indexOf("_chart_legend_")>-1&&this.highlight3DModule&&this.highlight3DModule.removeLegendHighlightStyles(),n.ctrlKey&&"p"===n.key&&(n.preventDefault(),t="CtrlP"),""!==t&&this.chartKeyboardNavigations(n,n.target.id,t),!1},u.prototype.chartKeyUp=function(n){var a,f="",t=n.target.id,u=n.target,y=r(this.element.id+"-chart-title"),o=r(this.element.id+"-svg-0-region-series-0-point-0"),p=r(this.element.id+"_chart_legend_translate_g"),w=r(this.element.id+"_chart_legend_pageup"),i,v,b,s,h,c,l,e;if((this.removeNavigationStyle(),y&&y.setAttribute("class","e-chart-focused"),o&&((i=o.getAttribute("class"))&&-1===i.indexOf("e-chart-focused")?i+=" e-chart-focused":i||(i="e-chart-focused"),o.setAttribute("class",i)),p)&&(v=p.firstElementChild,(i=v.getAttribute("class"))&&-1===i.indexOf("e-chart-focused")?i+=" e-chart-focused":i||(i="e-chart-focused"),v.setAttribute("class",i)),w&&w.setAttribute("class","e-chart-focused"),"Tab"===n.code)""!==this.previousTargetId&&(this.previousTargetId.indexOf("-series-")>-1&&-1===t.indexOf("-series-")?(b=r(this.element.id+"-svg-0-region-series-"+this.currentSeriesIndex+"-point-"+this.currentPointIndex),this.setTabIndex(b,o),this.currentPointIndex=0,this.currentSeriesIndex=0):this.previousTargetId.indexOf("_chart_legend_page")>-1&&-1===t.indexOf("_chart_legend_page")&&-1===t.indexOf("_chart_legend_g_")?this.setTabIndex(n.target,r(this.element.id+"_chart_legend_pageup")):this.previousTargetId.indexOf("_chart_legend_g_")>-1&&-1===t.indexOf("_chart_legend_g_")&&(a=r(this.element.id+"_chart_legend_translate_g"),this.setTabIndex(a.children[this.currentLegendIndex],a.firstElementChild))),this.previousTargetId=t,t.indexOf("-series-")>-1&&(this.currentSeriesIndex=+t.split("-series-")[1].split("-point-")[0],u.removeAttribute("tabindex"),u.blur(),t=this.focusChild(u)),f="None"!==this.highlightMode||this.tooltip.enable?"Tab":"";else if(n.code.indexOf("Arrow")>-1){if(n.preventDefault(),this.previousTargetId=t,t.indexOf("_chart_legend_page")>-1)"ArrowLeft"===n.code?(r(this.element.id+"_chart_legend_pagedown").removeAttribute("tabindex"),this.focusChild(r(this.element.id+"_chart_legend_pageup"))):"ArrowRight"===n.code&&(r(this.element.id+"_chart_legend_pageup").removeAttribute("tabindex"),this.focusChild(r(this.element.id+"_chart_legend_pagedown")));else if(t.indexOf("_chart_legend_")>-1)s=u.parentElement.children,s[this.currentLegendIndex].removeAttribute("tabindex"),this.currentLegendIndex+="ArrowUp"===n.code||"ArrowRight"===n.code?1:-1,this.currentLegendIndex=this.getActualIndex(this.currentLegendIndex,s.length),h=s[this.currentLegendIndex],this.focusChild(h),this.removeNavigationStyle(),this.setNavigationStyle(h.id),t=h.children[1].id,f="None"!==this.highlightMode?"ArrowMove":"";else if(t.indexOf("-series-")>-1){if(c=n.target,u.removeAttribute("tabindex"),u.blur(),"ArrowRight"===n.code||"ArrowLeft"===n.code?(this.currentSeriesIndex=this.currentSeriesIndex+("ArrowRight"===n.code?1:-1),this.currentSeriesIndex=this.getActualIndex(this.currentSeriesIndex,this.series.length)):this.currentPointIndex+="ArrowUp"===n.code?1:-1,t.indexOf("-point-")>-1)for(this.currentPointIndex=this.getActualIndex(this.currentPointIndex,this.visibleSeries[this.currentSeriesIndex].points.length?this.currentSeries.points.length:1),l=document.querySelectorAll('[id*="svg-0-region-series-'+this.currentSeriesIndex+"-point-"+this.currentPointIndex+'"]'),e=0;e<l.length;e++)l[e].id.split("-point-")[1].split("-")[0]===this.currentPointIndex.toString()&&(c=l[e]);t=this.focusChild(c);this.removeNavigationStyle();this.setNavigationStyle(c.id);f=this.tooltip.enable||"None"!==this.highlightMode?"ArrowMove":""}}else("Enter"===n.code||"Space"===n.code)&&(t.indexOf("_chart_legend_")>-1||t.indexOf("-point-")>-1)&&(t=t.indexOf("_chart_legend_page")>-1?t:t.indexOf("_chart_legend_")>-1?u.children[1].id:t,f="Enter");return""!==f&&this.chartKeyboardNavigations(n,t,f),"Tab"===n.code&&this.setNavigationStyle(t),!1},u.prototype.setTabIndex=function(n,t){n&&n.removeAttribute("tabindex");t&&t.setAttribute("tabindex","0")},u.prototype.getActualIndex=function(n,t){return n>t-1?0:n<0?t-1:n},u.prototype.axisTooltip=function(n,t,u,f){var e=n.target.id,o;e.indexOf("axis-label")>-1&&n.target.textContent.indexOf("...")>-1?(o=this.legendSettings.visible||""===this.primaryXAxis.title,uf(this.findAxisLabel(e),t,u,this.element.offsetWidth,this.element.id+"-EJ2-axis-label-tooltip",r(this.element.id+"_Secondary_Element"),f,o)):i.removeElement(this.element.id+"-EJ2-axis-label-tooltip")},u.prototype.findAxisLabel=function(n){var t=n.replace(this.element.id+"-","").replace("-axis-label","").split("-");return this.axisCollections[parseInt(t[0],10)].visibleLabels[parseInt(t[1],10)].originalText},u.prototype.focusChild=function(n){n.setAttribute("tabindex","0");var t=n.getAttribute("class");return n.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-chart-focused")?t="e-chart-focused "+t:t||(t="e-chart-focused"),n.setAttribute("class",t),n.focus(),n.id},u.prototype.documentKeyHandler=function(n){n.altKey&&74===n.keyCode&&!t.isNullOrUndefined(this.element)&&this.element.focus()},u.prototype.chartKeyboardNavigations=function(n,t,i){var s;switch(this.isLegendClicked=!1,this.removeNavigationStyle(),this.setNavigationStyle(t),i){case"Tab":case"ArrowMove":if(this.highlight3DModule&&this.highlight3DModule.removeLegendHighlightStyles(),t.indexOf("-point-")>-1){if(document.activeElement){var u=document.activeElement.getBoundingClientRect(),l=u.left+u.width/2,a=u.top,v=window.scrollX+l,y=window.scrollY+a;this.mouseX=v;this.mouseY=y}if(this.highlight3DModule&&(this.highlight3DModule.highlightChart(document.getElementById(t),"mousemove"),this.highlight3DModule.completeSelection()),this.tooltip3DModule){var r={series:this.visibleSeries[t.split("-series-")[1].split("-point-")[0]],point:this.visibleSeries[t.split("-series-")[1].split("-point-")[0]].points[t.split("-point-")[1].split("-")[0]]},h=document.getElementById(this.element.id+"_tooltip_svg"),f=h&&parseInt(h.getAttribute("opacity"),10)>0,p=this.tooltip3DModule.getTooltipElement(f);this.tooltip3DModule.pushData(r,!f,p,!0)&&this.tooltip3DModule.triggerTooltipRender(r,!f,this.tooltip3DModule.getTooltipText(r),this.tooltip3DModule.findHeader(r))}}if(this.highlight3DModule&&"None"!==this.highlightMode){t=t.indexOf("_chart_legend_g_")>-1?document.getElementById(t).firstChild.id:t;for(var e=this.element.id+"_chart_legend",c=[e+"_text_",e+"_shape_marker_",e+"_shape_"],o=0;o<c.length;o++)if(s=c[o],t.indexOf(s)>-1){document.getElementById(t).setAttribute("class","");this.highlight3DModule.legendSelection(this,parseInt(t.split(s)[1],10),document.getElementById(t),"mousemove");break}}break;case"Enter":case"Space":t.indexOf("_chart_legend_")>-1?(this.isLegendClicked=!0,this.legend3DModule.click(n),this.focusChild(document.getElementById(t).parentElement),this.setNavigationStyle(document.getElementById(t).parentElement.id)):(this.selection3DModule&&this.selection3DModule.calculateSelectedElements(document.getElementById(t),"click"),this.setNavigationStyle(t));break;case"CtrlP":this.print();break;case"ESC":this.tooltip3DModule.removeTooltip(1)}},u.prototype.setStyle=function(n){var t="None"!==this.selectionMode||"None"!==this.highlightMode;n.style.touchAction=this.enableRotation||t?"none":"element";n.style.msTouchAction=t?"none":"element";n.style.msContentZooming="none";n.style.msUserSelect="none";n.style.webkitUserSelect="none";n.style.position="relative";n.style.display="block";n.style.overflow="hidden";n.style.height=n.style.height||this.height&&-1===this.height.indexOf("%")?n.style.height:"inherit"},u.prototype.isSecondaryAxis=function(n){return this.axes.indexOf(n)>-1},u.prototype.refreshDefinition=function(n){for(var t=0,i=n;t<i.length;t++)i[t].axes=[]},u.prototype.addSeries=function(n){var t,r,i;for(this.animateSeries=!1,t=0,r=n;t<r.length;t++)i=r[t],i=new tp(this,"series",i),this.series.push(i);this.refresh()},u.prototype.removeSeries=function(n){this.redraw=!1;this.animateSeries=!1;this.visibleSeries[n]&&(this.visibleSeries[n].xAxis.orientation=null,this.visibleSeries[n].yAxis.orientation=null);for(var t=0;t<this.axes.length;t++)null===this.axes[t].orientation&&this.axes.splice(t,1);this.series.splice(n,1);this.refresh()},u.prototype.refreshAxis=function(){var n=this.primaryXAxis,t,r;for(n.rect=new i.Rect(void 0,void 0,0,0),(n=this.primaryYAxis).isStack100=!1,n.rect=new i.Rect(void 0,void 0,0,0),t=0,r=this.axes;t<r.length;t++)(n=r[t]).rect=new i.Rect(void 0,void 0,0,0),n.isStack100=!1},u.prototype.axisChange=function(n){return!(!n.name&&!n.valueType||(this.refreshDefinition(this.columns),this.refreshDefinition(this.rows),this.calculateVisibleAxis(),this.processData(),0))},u.prototype.getVisibleSeries=function(n,t){for(var u,i=0,r=n;i<r.length;i++)if(u=r[i],t===u.index)return u;return null},u.prototype.removeStyles=function(){i.removeElement(this.element.id+"_ej2_chart_selection");i.removeElement(this.element.id+"_ej2_chart_highlight")},u.prototype.calculateVisibleSeries=function(){var n,t,f;this.visibleSeries=[];var u=this.palettes.length?this.palettes:lit(this.theme),e=u.length,i=this.series,r=this.series[0];for(r&&(this.requireInvertedAxis=-1!==r.type.indexOf("Bar")&&!this.isTransposed||-1===r.type.indexOf("Bar")&&this.isTransposed),t=0,f=i.length;t<f;t++){switch((n=i[t]).category="Series",n.index=t,n.interior=n.fill||u[t%e],this.isSecondaryAxis(n.xAxis)&&(n.xAxis.internalVisibility=n.xAxis.series.some(function(n){return n.visible})),this.isSecondaryAxis(n.yAxis)&&(n.yAxis.internalVisibility=n.yAxis.series.some(function(n){return n.visible})),n.type){case"Bar":case"StackingBar":case"StackingBar100":if(-1===i[0].type.indexOf("Bar"))continue;break;default:if(i[0].type.indexOf("Bar")>-1)continue}this.visibleSeries.push(n);i[t]=n}},u.prototype.highlightAnimation=function(n,i,r,u){var f=parseFloat(this.visibleSeries[i].opacity.toString());f&&new t.Animation({}).animate(n,{duration:r,progress:function(t){n.style.animation="";var i=t.timeStamp/t.duration,r=u+(f-u)*i;n.setAttribute("opacity",r.toString())},end:function(){n.setAttribute("opacity",f.toString())}})},u.prototype.stopElementAnimation=function(n,i){var r=parseFloat(this.visibleSeries[i].opacity.toString());n.getAttribute("e-animate")&&t.Animation.stop(n);n.setAttribute("opacity",r.toString())},u.prototype.destroy=function(){var r,u,t;this.horizontalAxes=[];this.verticalAxes=[];this.visibleSeries=[];this.axisCollections=[];this.seriesElements=null;this.chartAxisLayoutPanel=null;this.dataLabelElements=null;this.dataLabelCollections=null;i.removeElement(this.element.id+"Keyboard_chart_focus");i.removeElement(this.element.id+"_ej2_chart_highlight");i.removeElement("chartmeasuretext");r=document.getElementById(this.element.id+"_ej2_chart_highlight");r&&r.remove();u=document.getElementById(this.element.id+"_ej2_chart_selection");(u&&u.remove(),this.element)&&(this.unWireEvents(),this.isReact&&this.clearTemplate(),n.prototype.destroy.call(this),this.polygons=[],t=document.getElementById(this.chart3D.id),t&&(t.innerHTML="",t.remove()),this.removeSvg(),this.svgObject=null)},u.prototype.getModuleName=function(){return"chart3d"},u.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},u.prototype.onPropertyChanged=function(n,i){var u,y,e=!1,r=!1,f,c,s,l,h,a,v,o;if(this.animateSeries=!1,c=!1,!this.delayRedraw){for(s=0,l=Object.keys(n);s<l.length;s++)switch(l[s]){case"primaryXAxis":u=n.primaryXAxis;r=this.axisChange(u);n.primaryXAxis.edgeLabelPlacement&&(e=!0);r=!0;t.isNullOrUndefined(u.isInversed)&&t.isNullOrUndefined(u.opposedPosition)||this.primaryXAxis.setIsInversedAndOpposedPosition();break;case"primaryYAxis":u=n.primaryYAxis;r=this.axisChange(u);n.primaryYAxis.edgeLabelPlacement&&(e=!0);r=!0;t.isNullOrUndefined(u.isInversed)&&t.isNullOrUndefined(u.opposedPosition)||this.primaryYAxis.setIsInversedAndOpposedPosition();break;case"axes":for(h=0,a=Object.keys(n.axes);h<a.length;h++)v=a[h],u=n.axes[v],r=r||this.axisChange(u),r=!0,t.isNullOrUndefined(u.isInversed)&&t.isNullOrUndefined(u.opposedPosition)||this.axes[v].setIsInversedAndOpposedPosition();break;case"height":case"width":this.createChartSvg();r=!0;break;case"subTitle":case"title":r=!0;break;case"titleStyle":n.titleStyle&&(n.titleStyle.size||n.titleStyle.textOverflow)?r=!0:e=!0;break;case"subTitleStyle":n.subTitleStyle&&(n.subTitleStyle.size||n.subTitleStyle.textOverflow)?r=!0:e=!0;break;case"border":case"background":case"enableRotation":case"tilt":case"depth":case"wallSize":case"rotation":case"perspectiveAngle":case"enableSideBySidePlacement":e=!0;break;case"series":for(y=this.series.length,o=0;o<y;o++)(f=n.series[o])&&(f.dataSource||f.query||f.xName||f.yName||f.size||f.fill||f.name||f.type)&&(t.extend(this.getVisibleSeries(this.visibleSeries,o),f,null,!0),c=!0);this.availableSize&&this.element&&(this.element.style.height=this.element.style.height&&"inherit"!==this.element.style.height?this.element.style.height:this.availableSize.height+"px");c&&(this.calculateVisibleSeries(),this.refreshDefinition(this.columns),this.refreshDefinition(this.rows),this.calculateVisibleAxis(),this.processData(!1),r=!0);break;case"dataSource":this.processData(!1);r=!0;break;case"legendSettings":n.legendSettings.background&&n.legendSettings.opacity||(r=!0);e=!0;break;case"palettes":this.calculateVisibleSeries();e=!0;break;case"selectedDataIndexes":this.selection3DModule&&(this.selection3DModule.currentMode=this.selectionMode,this.selection3DModule.selectedDataIndexes=this.selectedDataIndexes,this.selection3DModule.styleId=this.element.id+"_ej2_chart_selection",this.selection3DModule.redrawSelection(this,i.selectionMode,!0));break;case"selectionMode":this.selection3DModule&&n.selectionMode&&-1===n.selectionMode.indexOf("Drag")&&(this.selection3DModule.currentMode=this.selectionMode,this.selection3DModule.styleId=this.element.id+"_ej2_chart_selection",this.selection3DModule.redrawSelection(this,i.selectionMode,!0));break;case"isMultiSelect":this.selection3DModule&&!n.isMultiSelect&&this.selection3DModule.selectedDataIndexes.length>1&&(this.selection3DModule.currentMode=this.selectionMode,this.selection3DModule.styleId=this.element.id+"_ej2_chart_selection",this.selection3DModule.redrawSelection(this,i.selectionMode));break;case"highlightMode":case"selectionPattern":case"highlightPattern":this.removeStyles();e=!0;break;case"theme":this.animateSeries=!0;break;case"enableRtl":case"locale":case"currencyCode":this.refresh();break;case"tooltip":this.tooltip3DModule&&(this.tooltip3DModule.previousPoints=[],this.tooltip.template&&(this.tooltip3DModule.template=this.tooltip.template))}!r&&e&&(this.removeSvg(),this.polygons=[],this.renderElements(),this.trigger("loaded",{chart:this}));r&&(this.removeSvg(),this.isReact&&this.clearTemplate(),this.polygons=[],this.refreshAxis(),this.refreshBound(),this.trigger("loaded",{chart:this}),this.redraw=!1,this.animated=!1)}},p([t.Property("")],u.prototype,"title",void 0),p([t.Property("")],u.prototype,"subTitle",void 0),p([t.Property("Bootstrap5")],u.prototype,"theme",void 0),p([t.Property(null)],u.prototype,"description",void 0),p([t.Property(null)],u.prototype,"width",void 0),p([t.Property(null)],u.prototype,"backgroundImage",void 0),p([t.Property(null)],u.prototype,"background",void 0),p([t.Property("")],u.prototype,"dataSource",void 0),p([t.Property(null)],u.prototype,"height",void 0),p([t.Property(50)],u.prototype,"depth",void 0),p([t.Property(2)],u.prototype,"wallSize",void 0),p([t.Property(0)],u.prototype,"tilt",void 0),p([t.Property(!1)],u.prototype,"enableRotation",void 0),p([t.Property(0)],u.prototype,"rotation",void 0),p([t.Property(!0)],u.prototype,"enableSideBySidePlacement",void 0),p([t.Property(90)],u.prototype,"perspectiveAngle",void 0),p([t.Property(null)],u.prototype,"wallColor",void 0),p([t.Property(!1)],u.prototype,"isTransposed",void 0),p([t.Property("USD")],u.prototype,"currencyCode",void 0),p([t.Property(!1)],u.prototype,"enableExport",void 0),p([t.Event()],u.prototype,"load",void 0),p([t.Event()],u.prototype,"loaded",void 0),p([t.Event()],u.prototype,"pointClick",void 0),p([t.Event()],u.prototype,"pointMove",void 0),p([t.Event()],u.prototype,"pointRender",void 0),p([t.Event()],u.prototype,"legendRender",void 0),p([t.Event()],u.prototype,"legendClick",void 0),p([t.Event()],u.prototype,"seriesRender",void 0),p([t.Event()],u.prototype,"textRender",void 0),p([t.Event()],u.prototype,"tooltipRender",void 0),p([t.Event()],u.prototype,"beforeResize",void 0),p([t.Event()],u.prototype,"resized",void 0),p([t.Event()],u.prototype,"chart3DMouseMove",void 0),p([t.Event()],u.prototype,"chart3DMouseClick",void 0),p([t.Event()],u.prototype,"chart3DMouseDown",void 0),p([t.Event()],u.prototype,"chart3DMouseLeave",void 0),p([t.Event()],u.prototype,"chart3DMouseUp",void 0),p([t.Event()],u.prototype,"axisLabelRender",void 0),p([t.Event()],u.prototype,"selectionComplete",void 0),p([t.Event()],u.prototype,"beforeExport",void 0),p([t.Event()],u.prototype,"afterExport",void 0),p([t.Event()],u.prototype,"beforePrint",void 0),p([t.Complex({},lr)],u.prototype,"margin",void 0),p([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},yy)],u.prototype,"titleStyle",void 0),p([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},yy)],u.prototype,"subTitleStyle",void 0),p([t.Complex({},ort)],u.prototype,"legendSettings",void 0),p([t.Complex({color:"#DDDDDD",width:0},yt)],u.prototype,"border",void 0),p([t.Complex({name:"primaryXAxis"},hl)],u.prototype,"primaryXAxis",void 0),p([t.Complex({name:"primaryYAxis"},hl)],u.prototype,"primaryYAxis",void 0),p([t.Complex({},frt)],u.prototype,"tooltip",void 0),p([t.Collection([{}],bit)],u.prototype,"rows",void 0),p([t.Collection([{}],kit)],u.prototype,"columns",void 0),p([t.Collection([{}],hl)],u.prototype,"axes",void 0),p([t.Collection([{}],tp)],u.prototype,"series",void 0),p([t.Property("")],u.prototype,"highlightColor",void 0),p([t.Property("None")],u.prototype,"selectionMode",void 0),p([t.Property("None")],u.prototype,"highlightMode",void 0),p([t.Property("None")],u.prototype,"selectionPattern",void 0),p([t.Property("None")],u.prototype,"highlightPattern",void 0),p([t.Property(!1)],u.prototype,"isMultiSelect",void 0),p([t.Collection([],as)],u.prototype,"selectedDataIndexes",void 0),p([t.Property(!1)],u.prototype,"useGroupingSeparator",void 0),p([t.Property([])],u.prototype,"palettes",void 0),p([t.NotifyPropertyChanges],u)}(t.Component),nvt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ip=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return nvt(t,n),t.prototype.calculateDateTimeNiceInterval=function(n,t,i,r){var u,e=new Date(i),o=new Date(r),f=Math.abs((e.getTime()-o.getTime())/864e5);switch(n.actualIntervalType=n.intervalType,n.intervalType){case"Years":u=this.calculateNumericNiceInterval(n,f/365,t);break;case"Months":u=this.calculateNumericNiceInterval(n,f/30,t);break;case"Days":u=this.calculateNumericNiceInterval(n,f,t);break;case"Hours":u=this.calculateNumericNiceInterval(n,24*f,t);break;case"Minutes":u=this.calculateNumericNiceInterval(n,1440*f,t);break;case"Seconds":u=this.calculateNumericNiceInterval(n,86400*f,t);break;case"Auto":return(u=this.calculateNumericNiceInterval(n,f/365,t))>=1?(n.actualIntervalType="Years",u):(u=this.calculateNumericNiceInterval(n,f/30,t))>=1?(n.actualIntervalType="Months",u):(u=this.calculateNumericNiceInterval(n,f,t))>=1?(n.actualIntervalType="Days",u):(u=this.calculateNumericNiceInterval(n,24*f,t))>=1?(n.actualIntervalType="Hours",u):(u=this.calculateNumericNiceInterval(n,1440*f,t))>=1?(n.actualIntervalType="Minutes",u):(u=this.calculateNumericNiceInterval(n,86400*f,t),n.actualIntervalType="Seconds",u)}return u},t.prototype.getSkeleton=function(n){var t=n.actualIntervalType;return n.skeleton?n.skeleton:"Years"===t?"DateTime"===n.valueType&&n.isIntervalInDecimal?"y":"yMMM":"Months"===t?"MMMd":"Days"===t?"DateTime"===n.valueType?"MMMd":"yMd":"Hours"===t?"DateTime"===n.valueType?"Hm":"EHm":"Hms"},t.prototype.findCustomFormats=function(n){var t=n.labelFormat?n.labelFormat:"";return n.skeleton||"Months"!==n.actualIntervalType||t||(t="DateTime"===n.valueType?"MMM yyyy":"yMMM"),t},t}(sl),tvt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),srt=function(n){function i(t){return n.call(this,t)||this}return tvt(i,n),i.prototype.calculateRangeAndInterval=function(n,t){this.calculateRange(t);this.getActualRange(t,n);this.applyRangePadding(t,n);this.calculateVisibleLabels(t)},i.prototype.getActualRange=function(n,t){this.initializeDoubleRange(n);n.actualRange={};n.actualRange.interval=n.interval?Math.ceil(n.interval):Math.max(1,Math.floor(n.doubleRange.delta/ke(t,n)));n.actualRange.min=n.doubleRange.start;n.actualRange.max=n.doubleRange.end;n.actualRange.delta=n.doubleRange.delta},i.prototype.applyRangePadding=function(n,t){n.actualRange.min-=.5;n.actualRange.max+=.5;n.doubleRange=new lh(n.actualRange.min,n.actualRange.max);n.actualRange.delta=n.doubleRange.delta;this.calculateVisibleRange(t,n)},i.prototype.calculateVisibleLabels=function(n){n.visibleLabels=[];n.visibleRange.interval=n.visibleRange.interval<1?1:n.visibleRange.interval;var u,i,r=Math.ceil(n.visibleRange.min);for(n.startLabel=n.labels[Math.round(n.visibleRange.min)],n.endLabel=n.labels[Math.floor(n.visibleRange.max)];r<=n.visibleRange.max;r+=n.visibleRange.interval)u=t.extend({},t.getValue("properties",n.labelStyle),null,!0),si(r,n.visibleRange)&&n.labels.length>0&&(i=Math.round(r),yr(this.chart,i,n.labels[i]?n.labels[i].toString():i.toString(),u,n));n.getMaxLabelWidth&&n.getMaxLabelWidth(this.chart)},i.prototype.getModuleName=function(){return"Category3D"},i.prototype.destroy=function(){},i}(ip),ivt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rvt=function(n){function i(t){return n.call(this,t)||this}return ivt(i,n),i.prototype.calculateRangeAndInterval=function(n,t){this.calculateRange(t);this.getActualRange(t,n);this.applyRangePadding(t,n);this.calculateVisibleLabels(t,this.chart)},i.prototype.getActualRange=function(n,t){var u={skeleton:"full",type:"dateTime"},i=this.chart.intl.getDateParser(u),r=this.chart.intl.getDateFormat(u),f;null!==n.minimum?this.min=Date.parse(i(r(new Date(gt.DataUtil.parse.parseJson({val:n.minimum}).val)))):null!==this.min&&this.min!==Number.POSITIVE_INFINITY||(this.min=Date.parse(i(r(new Date(1970,1,1)))));null!==n.maximum?this.max=Date.parse(i(r(new Date(gt.DataUtil.parse.parseJson({val:n.maximum}).val)))):null!==this.max&&this.max!==Number.NEGATIVE_INFINITY||(this.max=Date.parse(i(r(new Date(1970,5,1)))));this.min===this.max&&(this.max=this.max+2592e6,this.min=this.min-2592e6);n.actualRange={};n.doubleRange=new lh(this.min,this.max);f=this.calculateDateTimeNiceInterval(n,t,n.doubleRange.start,n.doubleRange.end);n.actualRange.interval=n.interval?n.interval:f;n.actualRange.min=n.doubleRange.start;n.actualRange.max=n.doubleRange.end},i.prototype.applyRangePadding=function(n,t){var i,r,u,f,c,e,s,o,h;if(this.min=n.actualRange.min,this.max=n.actualRange.max,u=n.actualRange.interval,!nr(n))if(f=n.getRangePadding(this.chart),i=new Date(this.min),r=new Date(this.max),c=n.actualIntervalType,"None"===f)this.min=i.getTime(),this.max=r.getTime();else if("Additional"===f||"Round"===f)switch(c){case"Years":this.getYear(i,r,f,u);break;case"Months":this.getMonth(i,r,f,u);break;case"Days":this.getDay(i,r,f,u);break;case"Hours":this.getHour(i,r,f,u);break;case"Minutes":e=i.getMinutes()/u*u;s=r.getMinutes()+(i.getMinutes()-e);"Round"===f?(this.min=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),e,0).getTime(),this.max=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),s,59).getTime()):(this.min=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),e+-u,0).getTime(),this.max=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),s+u,0).getTime());break;case"Seconds":o=i.getSeconds()/u*u;h=r.getSeconds()+(i.getSeconds()-o);"Round"===f?(this.min=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),o,0).getTime(),this.max=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),h,0).getTime()):(this.min=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),o+-u,0).getTime(),this.max=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),h+u,0).getTime())}n.actualRange.min=(n.minimum,this.min);n.actualRange.max=(n.maximum,this.max);n.actualRange.delta=n.actualRange.max-n.actualRange.min;n.doubleRange=new lh(n.actualRange.min,n.actualRange.max);this.calculateVisibleRange(t,n)},i.prototype.getYear=function(n,t,i,r){var u=n.getFullYear(),f=t.getFullYear();"Additional"===i?(this.min=new Date(u-r,1,1,0,0,0).getTime(),this.max=new Date(f+r,1,1,0,0,0).getTime()):(this.min=new Date(u,0,0,0,0,0).getTime(),this.max=new Date(f,11,30,23,59,59).getTime())},i.prototype.getMonth=function(n,t,i,r){var f=n.getMonth(),u=t.getMonth();"Round"===i?(this.min=new Date(n.getFullYear(),f,0,0,0,0).getTime(),this.max=new Date(t.getFullYear(),u,new Date(t.getFullYear(),t.getMonth(),0).getDate(),23,59,59).getTime()):(this.min=new Date(n.getFullYear(),f+-r,1,0,0,0).getTime(),this.max=new Date(t.getFullYear(),u+r,2===u?28:30,0,0,0).getTime())},i.prototype.getDay=function(n,t,i,r){var u=n.getDate(),f=t.getDate();"Round"===i?(this.min=new Date(n.getFullYear(),n.getMonth(),u,0,0,0).getTime(),this.max=new Date(t.getFullYear(),t.getMonth(),f,23,59,59).getTime()):(this.min=new Date(n.getFullYear(),n.getMonth(),u+-r,0,0,0).getTime(),this.max=new Date(t.getFullYear(),t.getMonth(),f+r,0,0,0).getTime())},i.prototype.getHour=function(n,t,i,r){var u=n.getHours()/r*r,f=t.getHours()+(n.getHours()-u);"Round"===i?(this.min=new Date(n.getFullYear(),n.getMonth(),n.getDate(),u,0,0).getTime(),this.max=new Date(t.getFullYear(),t.getMonth(),t.getDate(),f,59,59).getTime()):(this.min=new Date(n.getFullYear(),n.getMonth(),n.getDate(),u+-r,0,0).getTime(),this.max=new Date(t.getFullYear(),t.getMonth(),t.getDate(),f+r,0,0).getTime())},i.prototype.calculateVisibleRange=function(n,t){t.visibleRange={min:t.actualRange.min,max:t.actualRange.max,interval:t.actualRange.interval,delta:t.actualRange.delta};t.dateTimeInterval=this.increaseDateTimeInterval(t,t.visibleRange.min,t.visibleRange.interval).getTime()-t.visibleRange.min;t.triggerRangeRender(this.chart,t.visibleRange.min,t.visibleRange.max,t.visibleRange.interval)},i.prototype.calculateVisibleLabels=function(n,i){n.visibleLabels=[];var u,r=n.visibleRange.min;for(nr(n)||(r=this.alignRangeStart(n,r,n.visibleRange.interval).getTime());r<=n.visibleRange.max&&(u=t.extend({},t.getValue("properties",n.labelStyle),null,!0),n.format=i.intl.getDateFormat({format:this.findCustomFormats(n)||"",type:et(n.skeletonType),skeleton:this.getSkeleton(n)}),n.startLabel=n.format(new Date(n.visibleRange.min)),n.endLabel=n.format(new Date(n.visibleRange.max)),si(r,n.visibleRange)&&(this.increaseDateTimeInterval(n,r,n.visibleRange.interval).getTime()>n.visibleRange.max&&(n.endLabel=n.format(new Date(r))),yr(i,r,n.format(new Date(r)),u,n)),r!==(r=this.increaseDateTimeInterval(n,r,n.visibleRange.interval).getTime())););"Months"!==n.actualIntervalType&&"Days"!==n.actualIntervalType||(n.format=i.intl.getDateFormat({format:n.labelFormat||("Months"!==n.actualIntervalType||n.skeleton?"":"y MMM"),type:et(n.skeletonType),skeleton:n.skeleton||("Days"===n.actualIntervalType?"MMMd":"")}));n.getMaxLabelWidth&&n.getMaxLabelWidth(this.chart)},i.prototype.increaseDateTimeInterval=function(n,t,i){var r=new Date(t),u;if(n.interval?(n.isIntervalInDecimal=i%1==0,n.visibleRange.interval=i):(i=Math.ceil(i),n.visibleRange.interval=i),u=n.actualIntervalType,n.isIntervalInDecimal)switch(u){case"Years":return r.setFullYear(r.getFullYear()+i),r;case"Months":return r.setMonth(r.getMonth()+i),r;case"Days":return r.setDate(r.getDate()+i),r;case"Hours":return r.setHours(r.getHours()+i),r;case"Minutes":return r.setMinutes(r.getMinutes()+i),r;case"Seconds":return r.setSeconds(r.getSeconds()+i),r}return r},i.prototype.alignRangeStart=function(n,t,i){var r=new Date(t),u,f,e,o,s,h;switch(n.actualIntervalType){case"Years":return u=Math.floor(Math.floor(r.getFullYear()/i)*i),new Date(u,r.getMonth(),r.getDate(),0,0,0);case"Months":return f=Math.floor(Math.floor(r.getMonth()/i)*i),new Date(r.getFullYear(),f,r.getDate(),0,0,0);case"Days":return e=Math.floor(Math.floor(r.getDate()/i)*i),new Date(r.getFullYear(),r.getMonth(),e,0,0,0);case"Hours":return o=Math.floor(Math.floor(r.getHours()/i)*i),new Date(r.getFullYear(),r.getMonth(),r.getDate(),o,0,0);case"Minutes":return s=Math.floor(Math.floor(r.getMinutes()/i)*i),new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),s,0,0);case"Seconds":return h=Math.floor(Math.floor(r.getSeconds()/i)*i),new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),h,0)}return r},i.prototype.getModuleName=function(){return"DateTime3D"},i.prototype.destroy=function(){},i}(ip),uvt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fvt=function(n){function i(t){return n.call(this,t)||this}return uvt(i,n),i.prototype.calculateRangeAndInterval=function(n,t){this.axisSize=n;this.calculateRange(t);this.getActualRange(t,n);this.applyRangePadding(t,n);this.calculateVisibleLabels(t)},i.prototype.calculateVisibleLabels=function(n){var r,i;for(n.visibleLabels=[],"Auto"===n.intervalType?this.calculateDateTimeNiceInterval(n,this.axisSize,parseInt(n.labels[0],10),parseInt(n.labels[n.labels.length-1],10)):n.actualIntervalType=n.intervalType,n.format=this.chart.intl.getDateFormat({format:n.labelFormat||"",type:et(n.skeletonType),skeleton:this.getSkeleton(n)}),i=0;i<n.labels.length;i++)r=t.extend({},t.getValue("properties",n.labelStyle),null,!0),this.sameInterval(n.labels.map(Number)[i],n.labels.map(Number)[i-1],n.actualIntervalType,i)&&!n.isIndexed||si(+i,n.visibleRange)&&yr(this.chart,i,n.isIndexed?this.getIndexedAxisLabel(n.labels[i],n.format):n.format(new Date(n.labels.map(Number)[i])),r,n);n.getMaxLabelWidth&&n.getMaxLabelWidth(this.chart)},i.prototype.getIndexedAxisLabel=function(n,t){for(var i=n.split(","),r=0;r<i.length;r++)i[r]=t(new Date(parseInt(i[r],10)));return i.join(", ")},i.prototype.sameInterval=function(n,t,i,r){var u;if(0===r)u=!1;else switch(i){case"Years":u=new Date(n).getFullYear()===new Date(t).getFullYear();break;case"Months":u=new Date(n).getFullYear()===new Date(t).getFullYear()&&new Date(n).getMonth()===new Date(t).getMonth();break;case"Days":u=Math.abs(n-t)<864e5&&new Date(n).getDay()===new Date(t).getDay();break;case"Hours":u=Math.abs(n-t)<36e5&&new Date(n).getDay()===new Date(t).getDay();break;case"Minutes":u=Math.abs(n-t)<6e4&&new Date(n).getMinutes()===new Date(t).getMinutes();break;case"Seconds":u=Math.abs(n-t)<1e3&&new Date(n).getDay()===new Date(t).getDay()}return u},i.prototype.getModuleName=function(){return"DateTimeCategory3D"},i.prototype.destroy=function(){},i}(srt),evt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ovt=function(n){function i(t){return n.call(this,t)||this}return evt(i,n),i.prototype.calculateRangeAndInterval=function(n,t){this.calculateRange(t);this.getActualRange(t,n);this.calculateVisibleRange(n,t);this.calculateVisibleLabels(t,this.chart)},i.prototype.getActualRange=function(n,t){var i,r;this.initializeDoubleRange(n);this.min=this.min<0?0:this.min;i=hi(this.min,n.logBase);i=isFinite(i)?i:this.min;r=1===this.max?1:hi(this.max,n.logBase);r=isFinite(i)?r:this.max;this.min=Math.floor(i/1);n.series&&n.series.some(function(n){return-1!==n.type.indexOf("Column")||-1!==n.type.indexOf("Bar")})&&(this.min=this.min<=0?+this.min-1:this.min);this.max=Math.ceil(r/1);this.max=this.max===this.min?this.max+1:this.max;n.actualRange.interval=n.interval||this.calculateLogNiceInterval(this.max-this.min,t,n);n.actualRange.min=this.min;n.actualRange.max=this.max;n.actualRange.delta=this.max-this.min},i.prototype.calculateVisibleRange=function(n,t){t.visibleRange={interval:t.actualRange.interval,max:t.actualRange.max,min:t.actualRange.min,delta:t.actualRange.delta}},i.prototype.calculateLogNiceInterval=function(n,t,i){for(var f,e=ke(t,i),r=n,o=Math.pow(i.logBase,Math.floor(hi(r,10))),u=0,s=i.intervalDivs.length;u<s;u++){if(f=o*i.intervalDivs[u],e<n/f)break;r=f}return r},i.prototype.calculateVisibleLabels=function(n,i){var o,u,r=n.visibleRange.min;n.visibleLabels=[];var e=this.getFormat(n),s=null!==e.match("{value}"),f=Math.pow(n.logBase,n.visibleRange.min);for(n.format=i.intl.getNumberFormat({format:s?"":e,useGrouping:i.useGroupingSeparator,maximumFractionDigits:f<1?20:3}),n.startLabel=n.format(f<1?+f.toPrecision(1):f),n.endLabel=n.format(Math.pow(n.logBase,n.visibleRange.max));r<=n.visibleRange.max;r+=n.visibleRange.interval)o=t.extend({},t.getValue("properties",n.labelStyle),null,!0),si(r,n.visibleRange)&&(u=Math.pow(n.logBase,r),yr(this.chart,r,this.formatValue(n,s,e,u<1?+u.toPrecision(1):u),o,n));n.getMaxLabelWidth&&n.getMaxLabelWidth(this.chart)},i.prototype.getModuleName=function(){return"Logarithmic3D"},i.prototype.destroy=function(){},i}(sl),svt=function(){function n(){}return n.prototype.draw=function(n,t){var u,i,r;for(this.createSegments(n),u=0;u<n.visiblePoints.length;u++)i=n.visiblePoints[u],i.visible&&(r={cancel:!1,series:n,point:i,fill:n.setPointColor(i,n.interior)},t.trigger(rr,r),i.color=r.fill,i.plans=null,r.cancel?i.symbolLocations=null:this.update(r.series,r.point,u,t))},n.prototype.update=function(n,t,i,r){var b=n.index,h=t.left,c=t.right,u="Logarithmic"===n.yAxis.valueType?Math.pow(n.yAxis.logBase,n.yAxis.visibleRange.min):n.yAxis.visibleRange.min,l="Logarithmic"===n.yAxis.valueType?Math.pow(n.yAxis.logBase,n.yAxis.visibleRange.max):n.yAxis.visibleRange.max,f=n.xAxis.visibleRange.min,e=n.xAxis.visibleRange.max,a;if(h>=f&&h<=e&&c>=f&&c<=e){a=t.top<0?t.top>u?t.top:u:n.yAxis.valueType&&"logarithmic"===n.yAxis.valueType.toLowerCase()||t.top<l?t.top:l;var o=r.svg3DRenderer.transform3DToVisible(n,t.left>f?t.left:f,a,r),s=r.svg3DRenderer.transform3DToVisible(n,e>t.right?t.right:e,u>t.bottom?u:t.bottom,r),v=r.vector.vector3D(Math.min(o.x,s.x),Math.min(o.y,s.y),t.startDepth),y=r.vector.vector3D(Math.max(o.x,s.x),Math.max(o.y,s.y),t.endDepth),p=n.setStyle(n),w="region-series-"+b+"-point-"+i,k=t.x+":"+t.yValue+", "+n.name;"Cylinder"===n.columnFacet?r.polygon.createCylinder(v,y,r,i,n.type,"",t.color,null,p.opacity,w,r.chart3D):"Rectangle"===n.columnFacet&&r.polygon.createBox(v,y,r,i,"",t.color,null,p.opacity,r.requireInvertedAxis,w,r.chart3D,k)}},n.prototype.createSegments=function(n){var f=n.getXValues(n.visiblePoints),h=n.getYValues(n.visiblePoints);if(null!=f&&null!=h)for(var e=n.getSideBySideInfo(n),r=n.getSegmentDepth(n),o=e.delta/2,i=n.visiblePoints,t=0;t<i.length;t++){var u=f[t]+e.start,c=f[t]+e.end,s=h[t];if(this.setData(u,s,c,0,r.start,r.end,n,i[t]),n.dataLabel.visible)switch(i[t].symbolLocations={x:0,y:0,z:0},n.dataLabel.position){case"Top":i[t].symbolLocations.x=u+o;i[t].symbolLocations.y=s;i[t].symbolLocations.z=r.start;break;case"Bottom":i[t].symbolLocations.x=u+o;i[t].symbolLocations.y=-.2+n.yAxis.visibleRange.min;i[t].symbolLocations.z=r.start+(r.end-r.start)/2;break;default:i[t].symbolLocations.x=u+o;i[t].symbolLocations.y=Math.abs(0-s)/2+n.yAxis.visibleRange.min/2;i[t].symbolLocations.z=r.start}}},n.prototype.setData=function(n,t,i,r,u,f,e,o){o.left=n;o.bottom=r;o.top=t;o.right=i;o.startDepth=u;o.endDepth=f;o.xRange=e.getDoubleRange(o.left,o.right);isNaN(o.top)||isNaN(o.bottom)||(o.yRange=e.getDoubleRange(o.top,o.bottom))},n.prototype.destroy=function(){},n.prototype.getModuleName=function(){return"ColumnSeries3D"},n}(),hvt=function(){function n(){}return n.prototype.draw=function(n,t){var u,i,r;for(this.createSegments(n),u=0;u<n.visiblePoints.length;u++)i=n.visiblePoints[u],i.visible&&(r={cancel:!1,series:n,point:i,fill:n.setPointColor(i,n.interior)},t.trigger(rr,r),i.color=r.fill,i.plans=null,r.cancel?i.symbolLocations=null:this.update(r.series,r.point,u,t))},n.prototype.update=function(n,t,i,r){var b=n.index,h=t.left,c=t.right,u="Logarithmic"===n.yAxis.valueType?Math.pow(n.yAxis.logBase,n.yAxis.visibleRange.min):n.yAxis.visibleRange.min,l="Logarithmic"===n.yAxis.valueType?Math.pow(n.yAxis.logBase,n.yAxis.visibleRange.max):n.yAxis.visibleRange.max,f=n.xAxis.visibleRange.min,e=n.xAxis.visibleRange.max,a;if(h>=f&&h<=e&&c>=f&&c<=e){a=t.top<0?t.top>u?t.top:u:n.yAxis.valueType&&"logarithmic"===n.yAxis.valueType.toLowerCase()||t.top<l?t.top:l;var o=r.svg3DRenderer.transform3DToVisible(n,t.left>f?t.left:f,a,r),s=r.svg3DRenderer.transform3DToVisible(n,e>t.right?t.right:e,u>t.bottom?u:t.bottom,r),v=r.vector.vector3D(Math.min(o.x,s.x),Math.min(o.y,s.y),t.startDepth),y=r.vector.vector3D(Math.max(o.x,s.x),Math.max(o.y,s.y),t.endDepth),p=n.setStyle(n),w="region-series-"+b+"-point-"+i;"Cylinder"===n.columnFacet?r.polygon.createCylinder(v,y,r,i,n.type,"",t.color,null,p.opacity,w,r.chart3D):"Rectangle"===n.columnFacet&&r.polygon.createBox(v,y,r,i,"",t.color,null,p.opacity,r.requireInvertedAxis,w,r.chart3D)}},n.prototype.createSegments=function(n){var e=n.getXValues(n.visiblePoints);if(null!=e)for(var o=n.getSideBySideInfo(n),r=n.getSegmentDepth(n),s=o.delta/2,i=n.visiblePoints,t=0;t<i.length;t++){var u=e[t]+o.start,c=e[t]+o.end,f=n.stackedValues.startValues[t],h=n.stackedValues.endValues[t];if(this.setData(u,f,c,h,r.start,r.end,n,i[t]),n.dataLabel.visible)switch(i[t].symbolLocations={x:0,y:0,z:0},n.dataLabel.position){case"Top":i[t].symbolLocations.x=u+s;i[t].symbolLocations.y=f;i[t].symbolLocations.z=r.start+r.delta/2;break;case"Bottom":i[t].symbolLocations.x=u+s;i[t].symbolLocations.y=h-.2;i[t].symbolLocations.z=r.start+(r.end-r.start)/2;break;default:i[t].symbolLocations.x=u+s;i[t].symbolLocations.y=f+(h-f)/2;i[t].symbolLocations.z=r.start}}},n.prototype.setData=function(n,t,i,r,u,f,e,o){o.left=n;o.bottom=r;o.top=t;o.right=i;o.startDepth=u;o.endDepth=f;o.xRange=e.getDoubleRange(o.left,o.right);isNaN(o.top)||isNaN(o.bottom)||(o.yRange=e.getDoubleRange(o.top,o.bottom))},n.prototype.destroy=function(){},n.prototype.getModuleName=function(){return"StackingColumnSeries3D"},n}(),cvt=function(){function n(){}return n.prototype.draw=function(n,t){var u,i,r;for(this.createSegments(n),n.isRectSeries=!0,u=0;u<n.visiblePoints.length;u++)i=n.visiblePoints[u],i.visible&&(r={cancel:!1,series:n,point:i,fill:n.setPointColor(i,n.interior)},t.trigger(rr,r),i.color=r.fill,i.plans=null,r.cancel?i.symbolLocations=null:this.update(r.series,r.point,u,t))},n.prototype.update=function(n,t,i,r){var b=n.index,h=t.left,c=t.right,u="Logarithmic"===n.yAxis.valueType?Math.pow(n.yAxis.logBase,n.yAxis.visibleRange.min):n.yAxis.visibleRange.min,l="Logarithmic"===n.yAxis.valueType?Math.pow(n.yAxis.logBase,n.yAxis.visibleRange.max):n.yAxis.visibleRange.max,f=n.xAxis.visibleRange.min,e=n.xAxis.visibleRange.max,a;if(h>=f&&h<=e&&c>=f&&c<=e){a=t.top<0?t.top>u?t.top:u:n.yAxis.valueType&&"logarithmic"===n.yAxis.valueType.toLowerCase()||t.top<l?t.top:l;var o=r.svg3DRenderer.transform3DToVisible(n,t.left>f?t.left:f,a,r),s=r.svg3DRenderer.transform3DToVisible(n,e>t.right?t.right:e,u>t.bottom?u:t.bottom,r),v=r.vector.vector3D(Math.min(o.x,s.x),Math.min(o.y,s.y),t.startDepth),y=r.vector.vector3D(Math.max(o.x,s.x),Math.max(o.y,s.y),t.endDepth),p=n.setStyle(n),w="region-series-"+b+"-point-"+i;"Cylinder"===n.columnFacet?r.polygon.createCylinder(v,y,r,i,n.type,"",t.color,null,p.opacity,w,r.chart3D):"Rectangle"===n.columnFacet&&r.polygon.createBox(v,y,r,i,"",t.color,null,p.opacity,r.requireInvertedAxis,w,r.chart3D)}},n.prototype.createSegments=function(n){var e=n.getXValues(n.visiblePoints);if(null!=e)for(var o=n.getSideBySideInfo(n),r=n.getSegmentDepth(n),s=o.delta/2,i=n.visiblePoints,t=0;t<i.length;t++){var u=e[t]+o.start,c=e[t]+o.end,h=n.stackedValues.startValues[t],f=n.stackedValues.endValues[t];if(this.setData(u,f,c,h,r.start,r.end,n,i[t]),n.dataLabel.visible)switch(i[t].symbolLocations={x:0,y:0,z:0},n.dataLabel.position){case"Top":i[t].symbolLocations.x=u+s;i[t].symbolLocations.y=f;i[t].symbolLocations.z=r.start+r.delta/2;break;case"Bottom":i[t].symbolLocations.x=u+s;i[t].symbolLocations.y=h-.2;i[t].symbolLocations.z=r.start+(r.end-r.start)/2;break;default:i[t].symbolLocations.x=u+s;i[t].symbolLocations.y=f+(h-f)/2;i[t].symbolLocations.z=r.start}}},n.prototype.setData=function(n,t,i,r,u,f,e,o){o.left=n;o.bottom=r;o.top=t;o.right=i;o.startDepth=u;o.endDepth=f;o.xRange=e.getDoubleRange(o.left,o.right);isNaN(o.top)||isNaN(o.bottom)||(o.yRange=e.getDoubleRange(o.top,o.bottom))},n.prototype.destroy=function(){},n.prototype.getModuleName=function(){return"StackingBarSeries3D"},n}(),lvt=function(){function n(){}return n.prototype.draw=function(n,t){var u,i,r;for(this.createSegments(n),u=0;u<n.visiblePoints.length;u++)i=n.visiblePoints[u],i.visible&&(r={cancel:!1,series:n,point:i,fill:n.setPointColor(i,n.interior)},t.trigger(rr,r),i.color=r.fill,i.plans=null,r.cancel?i.symbolLocations=null:this.update(r.series,r.point,u,t))},n.prototype.update=function(n,t,i,r){var b=r.visibleSeries.indexOf(n),h=t.left,c=t.right,u="Logarithmic"===n.yAxis.valueType?Math.pow(n.yAxis.logBase,n.yAxis.visibleRange.min):n.yAxis.visibleRange.min,l="Logarithmic"===n.yAxis.valueType?Math.pow(n.yAxis.logBase,n.yAxis.visibleRange.max):n.yAxis.visibleRange.max,f=n.xAxis.visibleRange.min,e=n.xAxis.visibleRange.max,a;if(h>=f&&h<=e||c>=f&&c<=e){a=t.top<0?t.top>u?t.top:u:n.yAxis.valueType&&"logarithmic"===n.yAxis.valueType.toLowerCase()||t.top<l?t.top:l;var o=r.svg3DRenderer.transform3DToVisible(n,t.left>f?t.left:f,a,r),s=r.svg3DRenderer.transform3DToVisible(n,e>t.right?t.right:e,u>t.bottom?u:t.bottom,r),v=r.vector.vector3D(Math.min(o.x,s.x),Math.min(o.y,s.y),t.startDepth),y=r.vector.vector3D(Math.max(o.x,s.x),Math.max(o.y,s.y),t.endDepth),p=n.setStyle(n),w="region-series-"+b+"-point-"+i;"Cylinder"===n.columnFacet?r.polygon.createCylinder(v,y,r,i,n.type,"",t.color,null,p.opacity,w,r.chart3D):r.polygon.createBox(v,y,r,i,"",t.color,null,p.opacity,r.requireInvertedAxis,w,r.chart3D)}},n.prototype.createSegments=function(n){var f=n.getXValues(n.visiblePoints),h=n.getYValues(n.visiblePoints);if(null!=f){n.isRectSeries=!0;for(var e=n.getSideBySideInfo(n),r=n.getSegmentDepth(n),o=e.delta/2,i=n.visiblePoints,t=0;t<i.length;t++){var u=f[t]+e.start,c=f[t]+e.end,s=h[t];if(this.setData(u,s,c,0,r.start,r.end,n,i[t]),n.dataLabel.visible)switch(i[t].symbolLocations={x:0,y:0,z:0},n.dataLabel.position){case"Top":i[t].symbolLocations.x=u+o;i[t].symbolLocations.y=s;i[t].symbolLocations.z=r.start;break;case"Bottom":i[t].symbolLocations.x=u+o;i[t].symbolLocations.y=-.2+n.yAxis.visibleRange.min;i[t].symbolLocations.z=r.start+(r.end-r.start)/2;break;default:i[t].symbolLocations.x=u+o;i[t].symbolLocations.y=Math.abs(0-s)/2+n.yAxis.visibleRange.min/2;i[t].symbolLocations.z=r.start}}}},n.prototype.setData=function(n,t,i,r,u,f,e,o){o.left=n;o.bottom=r;o.top=t;o.right=i;o.startDepth=u;o.endDepth=f;o.xRange=e.getDoubleRange(o.left,o.right);isNaN(o.top)||isNaN(o.bottom)||(o.yRange=e.getDoubleRange(o.top,o.bottom))},n.prototype.destroy=function(){},n.prototype.getModuleName=function(){return"BarSeries3D"},n}(),avt=function(){function n(n){this.chart=n}return n.prototype.render=function(n,i,r){var f,e=i.element.id+"-series-"+n.index+"-data-label-collections",u;for(n.dataLabelElement=t.createElement("div",{id:e}),u=0;u<n.visiblePoints.length;u++)(f=n.visiblePoints[u]).visible&&this.draw3DDataLabel(n,f.index,f,i,r);n.dataLabel.template&&o(!1,document.getElementById(this.chart.element.id+"_Secondary_Element"),n.dataLabelElement,i.redraw,!1,"x","y",null,"",!1,!1,null)},n.prototype.draw3DDataLabel=function(n,t,r,u,f){var h,c,o={data:null},a=this.getLabelText(r,n,this.chart)[0],l=i.measureText(a,f.font,this.chart.themeStyle.datalabelFont),s=u.svg3DRenderer.transform3DToVisible(n,r.symbolLocations.x,r.symbolLocations.y,u),e,y;s.y;s.x;c="Bottom"===n.dataLabel.position?s.y+0:s.y-0;h=s.x+0;o.data={text:a,location:{x:h,y:c},series:n,pointIndex:t};o.data.Text=o.data.text;e={cancel:!1,series:n,point:r,text:a,border:f.border,color:f.fill,template:f.template,textStyle:f.font};(u.trigger(ie,e),this.fontBackground="Middle"===n.dataLabel.position&&"transparent"===e.color?r.color:e.color,o.data.text=e.text,n.dataLabel.template||""===o.data.Text||e.cancel)||(y={tag:"dataLabel",series:n,point:r,pointIndex:t,id:u.svgObject.id+n.index+"-data-label"+t,child:u.chart3D},u.graphics.addVisual(u.polygon.createTextElement(u.vector.vector3D(h,c,r.symbolLocations.z),y,0,-l.height),u));var p=n.dataLabel&&n.dataLabel.template?"template":"text",v=wu(vi("transparent"===this.fontBackground?this.chart.theme.indexOf("Dark")>-1||"HighContrast"===this.chart.theme?"#000000":"#FFFFFF":this.fontBackground)),w=Math.round((299*v.r+587*v.g+114*v.b)/1e3),b={size:e.textStyle.size||this.chart.themeStyle.datalabelFont.size,fontWeight:e.textStyle.fontWeight||this.chart.themeStyle.datalabelFont.fontWeight,fontStyle:e.textStyle.fontStyle||u.themeStyle.datalabelFont.fontStyle,fontFamily:e.textStyle.fontFamily||this.chart.themeStyle.datalabelFont.fontFamily,color:e.textStyle.color||("Bootstrap5"===this.chart.theme?"#212529":"Bootstrap5Dark"===this.chart.theme?"#DEE2E6":e.textStyle.color),opacity:e.textStyle.opacity},k={width:l.width,height:l.height,label:o.data,textAnchor:"middle",tag:p,font:b,angle:n.dataLabel.angle,id:u.element.id+"-svg-series-"+n.index+"-point-"+t+"-data-label",child:u.chart3D,argsData:e,fill:w>=128?this.chart.theme.indexOf("Tailwind3")>-1?"#111827":"#000000":"#FFFFFF"};e.cancel||u.graphics.addVisual(u.polygon.createTextElement(u.vector.vector3D(h,c,r.symbolLocations.z),k,0,-l.height),u)},n.prototype.getLabelText=function(n,t,i){var f=t.dataLabel.format?t.dataLabel.format:t.yAxis.labelFormat,r=[],e=null!==f.match("{value}"),u;if(r.push(n.text||n.yValue.toString()),(f||i.useGroupingSeparator)&&!n.text)for(t.yAxis.format=i.intl.getNumberFormat({format:e?"":f,useGrouping:i.useGroupingSeparator}),u=0;u<r.length;u++)r[u]=e?f.replace("{value}",t.yAxis.format(parseFloat(r[u]))):t.yAxis.format(parseFloat(r[u]));return r},n.prototype.createDataLabelTemplate=function(n,i,r,u,f,e,o,s){this.margin={left:0,right:0,bottom:0,top:0};var h=i.clipRect,c=this.createTemplate(t.createElement("div",{id:this.chart.element.id+"-series-"+i.index+"-data-label-"+e,styles:"position: absolute;background-color:"+f.color+";"+ko(r.font,this.chart.themeStyle.datalabelFont)+";border:"+f.border.width+"px solid "+f.border.color+";"}),f.template,this.chart,u,i,this.chart.element.id+"-data-label-",e,s);this.calculateTemplateLabelSize(n,c,u,i,r,h,o,s)},n.prototype.calculateTemplateLabelSize=function(n,t,r,u,f,e,s,h,c){var a=go(t,s,c),l={x:0,y:0,width:0,height:0},w=this.calculateTextPosition(u,r,a,h),b=!1;c&&(b=0===a.width||0===a.height);t.style.left=w.left-0+"px";t.style.top=w.top+0+"px";var v=wu(vi("transparent"===this.fontBackground?this.chart.theme.indexOf("Dark")>-1?"black":"white":this.fontBackground)),y=u.chart.requireInvertedAxis?u.xAxis:u.yAxis,p=u.chart.requireInvertedAxis?u.yAxis:u.xAxis;t.style.color=f.font.color||"Bootstrap5"===this.chart.theme?"#212529":"Bootstrap5Dark"===this.chart.theme?"#DEE2E6":Math.round((299*v.r+587*v.g+114*v.b)/1e3)>=128?this.chart.theme.indexOf("Tailwind3")>-1?"#111827":"black":this.chart.theme.indexOf("Tailwind3")>-1?"#FFFFFF":"white";t.childElementCount&&!b&&!oe(l,this.chart.dataLabelCollections,e)&&(void 0===r.yValue||si(r.yValue,u.yAxis.visibleRange)||u.type.indexOf("Stacking")>-1||u.type.indexOf("100")>-1&&si(u.stackedValues.endValues[r.index],u.yAxis.visibleRange))&&si(r.xValue,u.xAxis.visibleRange)&&parseFloat(t.style.top)>=y.rect.y&&parseFloat(t.style.left)>=p.rect.x&&parseFloat(t.style.top)<=y.rect.y+y.rect.height&&parseFloat(t.style.left)<=p.rect.x+p.rect.width&&(this.chart.dataLabelCollections.push(new i.Rect(l.x+e.x,l.y+e.y,l.width,l.height)),o(!1,n,t,s,!0,"left","top"))},n.prototype.calculateTextPosition=function(n,t,i,r){var f,e,o,u=i.width/2,s=i.height;return-1!==n.type.indexOf("Bar")?(f=r.x-u,e=r.y-s+n.xAxis.plotOffset,o=r.x+u):(f=r.x-u,e=r.y-s,o=r.x+u),{left:f,top:e,right:o}},n.prototype.chartReactTemplate=function(n,t,i,r,u,f,e){var o=document.getElementById(t.element.id+"-series-"+r.index+"-data-label-collections");o&&(0===i.index&&(t.dataLabelCollections=[]),t.dataLabel3DModule.calculateTemplateLabelSize(o,n,i,r,r.dataLabel,r.clipRect,f,e,!0))},n.prototype.createTemplate=function(n,t,i,r,u,f,e,o,s){var a,v=fc(t),l,y,h,c;try{if(l=v?v({chart:i,series:u,point:r},i,f+"-template",f):[],l.length)for(y=(a=Array.prototype.slice.call(l)).length,h=0;h<y;h++)n.appendChild(a[h]);c=void 0;"chart3d"===i.getModuleName()&&(c=r&&u?this.chartReactTemplate.bind(this,n,i,r,u,e,s,o):c,i.isReact&&i.renderReactTemplates(c))}catch(t){return n}return n},n.prototype.getModuleName=function(){return"DataLabel3D"},n.prototype.destroy=function(){},n}(),vvt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hrt=function(n){function i(t){var i=n.call(this,t)||this;return i.seriesIndex=0,i.chart=t,i.addEventListener(),i}return vvt(i,n),i.prototype.addEventListener=function(){if(!this.chart.isDestroyed){var n=t.Browser.isPointer?"pointerleave":"mouseleave";this.chart.on(t.Browser.touchMoveEvent,this.mouseMove,this);this.chart.on(n,this.mouseLeave,this);this.chart.on("click",this.mouseClick,this);this.chart.on(t.Browser.touchStartEvent,this.mousedown,this);this.chart.on(t.Browser.touchEndEvent,this.mouseLeave,this)}},i.prototype.mousedown=function(){var n=this.chart;n.isPointMouseDown||n.selectionMode},i.prototype.removeEventListener=function(){this.chart.isDestroyed||(this.chart.off(t.Browser.touchMoveEvent,this.mouseMove),this.chart.off("pointerleave",this.mouseLeave),this.chart.off("click",this.mouseClick),this.chart.off(t.Browser.touchStartEvent,this.mousedown),this.chart.off(t.Browser.touchEndEvent,this.mouseLeave))},i.prototype.initPrivateVariables=function(n){this.styleId=n.element.id+"_ej2_chart_selection";this.unselected=n.element.id+"_ej2_deselected";this.selectedDataIndexes=[];this.isSeriesMode="Series"===n.selectionMode},i.prototype.invokeSelection=function(n){this.initPrivateVariables(n);this.series=t.extend({},n.visibleSeries,null,!0);this.seriesStyles();this.currentMode=n.selectionMode;this.selectDataIndex(n,this.concatIndexes(n.selectedDataIndexes,this.selectedDataIndexes))},i.prototype.generateStyle=function(n){return n?this.styleId+"_series_"+n.index:"undefined"},i.prototype.selectDataIndex=function(n,t){for(var u,i=0,r=t;i<r.length;i++)u=r[i],this.performSelection(u,n,this.getElementByIndex(n,u)[0])},i.prototype.getElementByIndex=function(n,t){var i=[];return document.querySelectorAll('[id*="-region-series-'+t.series+"-point-"+t.point+'"]').forEach(function(n){i.push(n)}),i},i.prototype.getClusterElements=function(n,t){for(var u,f,i,e=[],r=0,o=n.visibleSeries;r<o.length;r++)if(u=o[r],u.visible)for(t=new ir(u.index,t.point),f=this.getElementByIndex(n,t),i=0;i<f.length;i++)e.push(f[i]);return e},i.prototype.findElements=function(n,t,i){return this.isSeriesMode?this.getSeriesElements(t):"Cluster"===this.currentMode?this.getClusterElements(n,i):this.getElementByIndex(n,i)},i.prototype.isAlreadySelected=function(n,i,r){var f,e;if("click"===i?(this.currentMode=this.chart.selectionMode,this.styleId=this.chart.element.id+"_ej2_chart_selection"):"mousemove"!==i&&"pointermove"!==i||(this.currentMode=this.chart.highlightMode,this.highlightDataIndexes=[],this.styleId=this.chart.element.id+"_ej2_chart_highlight"),"None"!==this.chart.highlightMode&&"None"===this.chart.selectionMode&&"click"===i)return!1;if(("None"!==this.chart.highlightMode||this.chart.legendSettings.enableHighlight)&&this.previousSelectedEle&&this.previousSelectedEle[0]){f=void 0;e=n.nodeName;n.parentNode&&(f=("path"===e||"shape"===e)&&n.id.indexOf("region")>1);for(var s=function(n){var e;u.previousSelectedEle[n].hasAttribute("class")&&(u.previousSelectedEle[n].getAttribute("class").indexOf("highlight")>-1&&(f||"click"===i)?(u.previousSelectedEle[n].classList.forEach(function(n){n.indexOf("selection")>-1&&(e=n)}),u.previousSelectedEle[n].removeAttribute("class"),e&&u.addSvgClass(u.previousSelectedEle[n],e),u.previousSelectedEle[n].classList.remove(u.styleId+"_series_"+r.series),""===u.chart.highlightColor||t.isNullOrUndefined(u.chart.highlightColor)||"None"!==u.chart.highlightPattern||u.previousSelectedEle[n].setAttribute("fill",u.control.visibleSeries[u.indexFinder(u.previousSelectedEle[n].id).series].interior),u.addOrRemoveIndex(u.highlightDataIndexes,u.indexFinder(u.previousSelectedEle[n].id))):!f&&u.previousSelectedEle[n].getAttribute("class").indexOf("highlight")>-1&&u.performSelection(u.indexFinder(u.previousSelectedEle[n].id),u.chart,u.previousSelectedEle[n]))},u=this,o=0;o<this.previousSelectedEle.length;o++)s(o)}return!0},i.prototype.mouseClick=function(n){this.chart.rotateActivate||this.calculateSelectedElements(n.target,n.type)},i.prototype.calculateSelectedElements=function(n,i){t.isNullOrUndefined(n)||"None"===this.chart.selectionMode&&"None"===this.chart.highlightMode||n.id&&-1===n.id.indexOf(this.chart.element.id+"-")||("mousemove"===i||"pointermove"===i)&&n.hasAttribute("class")&&(n.getAttribute("class").indexOf("highlight")>-1||n.getAttribute("class").indexOf("selection")>-1)||(this.isAlreadySelected(n,i,this.indexFinder(n.id)),!(n.id&&n.id.indexOf("-series-")>-1&&-1===n.id.indexOf("_Text_")))||this.performSelection(this.indexFinder(n.id),this.chart,n)},i.prototype.performSelection=function(n,t,i){switch(this.isSeriesMode="Series"===this.currentMode,this.currentMode){case"Series":this.selection(t,n,this.getSeriesElements(t.series[n.series]));this.selectionComplete(t,n,this.currentMode);this.blurEffect(t.element.id,t.visibleSeries);break;case"Point":!isNaN(n.point)&&i&&(this.selection(t,n,this.getElementByIndex(t,n)),this.selectionComplete(t,n,this.currentMode),this.blurEffect(t.element.id,t.visibleSeries));break;case"Cluster":isNaN(n.point)||(this.clusterSelection(t,n),this.selectionComplete(t,n,this.currentMode),this.blurEffect(t.element.id,t.visibleSeries))}},i.prototype.selectionComplete=function(n,t,i){var f,r,e,h,o,s=[],c,v,u,l,a,y;if("Cluster"===i){for(c=0,v=n.visibleSeries;c<v.length;c++)if((a=v[c]).visible)for(u=0;u<this.selectedDataIndexes.length;u++)r=n.isMultiSelect?this.selectedDataIndexes[u].point:t.point,e=a.index,f=a.points,isNaN(r)||(h=f[r].yValue,o=f[r].xValue,"Category"===n.primaryXAxis.valueType?o=f[r].x.toLocaleString():"DateTime"===n.primaryXAxis.valueType&&(o=new Date(f[r].xValue)),s.push({x:o,y:h,seriesIndex:e,pointIndex:r}))}else if("Series"===i)if(n.isMultiSelect)for(u=0;u<this.selectedDataIndexes.length;u++)e=this.selectedDataIndexes[u].series,this.selectedDataIndexes.length>0&&s.push({seriesIndex:e});else e=this.selectedDataIndexes.length>0?this.selectedDataIndexes[0].series:this.highlightDataIndexes&&this.highlightDataIndexes.length>0?this.highlightDataIndexes[0].series:0,(this.selectedDataIndexes.length>0||this.highlightDataIndexes&&this.highlightDataIndexes.length>0)&&s.push({seriesIndex:e});else if("Point"===i)for(l=this.styleId.indexOf("highlight")>-1?this.highlightDataIndexes:this.selectedDataIndexes,u=0;u<l.length;u++)r=l[u].point,e=l[u].series,f=(a=n.series[e]).points,isNaN(r)||(o=f[r].xValue,h=f[r].yValue,"Category"===n.primaryXAxis.valueType?o=f[r].x.toLocaleString():"DateTime"===n.primaryXAxis.valueType&&(o=new Date(f[r].xValue)),s.push({x:o,y:h,seriesIndex:e,pointIndex:r}));y={selectedDataValues:s,cancel:!1,chart:n};n.trigger(ue,y)},i.prototype.selection=function(n,i,u){var e,f,o;n.isMultiSelect||-1!==this.styleId.indexOf("highlight")||"None"===n.selectionMode||this.removeMultiSelectElements(n,this.selectedDataIndexes,i,n.series);e=i.series;t.isNullOrUndefined(u[0])||(n.visibleSeries[e].isRectSeries&&u[0].id&&document.getElementById(u[0].id+"_Symbol")&&u.push(r(u[0].id+"_Symbol")),f=void 0,o=u[0]&&(u[0].getAttribute("class")||""),u[0]&&o.indexOf(this.getSelectionClass(u[0].id))>-1?this.removeStyles(u):(this.previousSelectedEle="None"!==n.highlightMode||n.legendSettings.enableHighlight?u:[],this.chart.selection3DModule&&(this.chart.selection3DModule.previousSelectedEle=u),this.applyStyles(u),f=!0),this.styleId.indexOf("highlight")>0&&("None"!==n.highlightMode||n.legendSettings.enableHighlight)?this.addOrRemoveIndex(this.highlightDataIndexes,i,f):this.addOrRemoveIndex(this.selectedDataIndexes,i,f))},i.prototype.clusterSelection=function(n,t){this.selection(n,t,this.getClusterElements(n,new ir(t.series,t.point)))},i.prototype.removeMultiSelectElements=function(n,t,i,r){for(var f,u=0;u<t.length;u++)f=r[t[u].series],(!this.isSeriesMode||this.toEquals(t[u],i,this.isSeriesMode))&&("Cluster"!==this.currentMode||this.toEquals(t[u],i,!1))&&(this.isSeriesMode||!this.toEquals(t[u],i,!0)||this.toEquals(t[u],i,!1))||(this.removeStyles(this.findElements(n,f,t[u])),t.splice(u,1),u--)},i.prototype.blurEffect=function(n,i){for(var e=this.checkVisibility(this.highlightDataIndexes,this.chart)||this.checkVisibility(this.selectedDataIndexes,this.chart),s=function(i){var o=i.index,s=u.chart.visibleSeries[i.index].interior,f=[];i.visible&&(document.querySelectorAll('[id*="region-series-'+i.index+'"]').forEach(function(n){f.push(n)}),u.checkSelectionElements(f,u.generateStyle(i),e,o,s),t.isNullOrUndefined(r(n+"SymbolGroup"+i.index))||u.checkSelectionElements(f,u.generateStyle(i),e,o,s))},u=this,f=0,o=i;f<o.length;f++)s(o[f])},i.prototype.checkSelectionElements=function(n,i,u,f,e){var s,a,o,h,l,c;for(void 0===f&&(f=0),void 0===e&&(e="#D3D3D3"),h=this.isSeriesMode?n||[n]:n,"None"!==this.chart.selectionMode&&("None"!==this.chart.highlightMode||this.chart.legendSettings.enableHighlight)&&(h=n),l=n,c=0;c<h.length;c++)s=h[c].getAttribute("class")||"",a=h[c].parentNode.getAttribute("class")||"","None"===this.chart.selectionMode||"None"===this.chart.highlightMode&&!this.chart.legendSettings.enableHighlight||(i=s.indexOf("selection")>0||s.indexOf("highlight")>0?s:i),-1===s.indexOf(i)&&-1===a.indexOf(i)&&u?this.addSvgClass(h[c],this.unselected):(l=h[c],-1!==s.indexOf(this.unselected)&&this.chart.tooltip3DModule&&i.indexOf("highlight")>0&&this.chart.highlightAnimation(h[c],f,700,.3),this.removeSvgClass(h[c],this.unselected),this.removeSvgClass(h[c].parentNode,this.unselected));this.control.legend3DModule&&this.control.legendSettings.visible&&(o=r(this.control.element.id+"_chart_legend_shape_"+f))&&(o.hasAttribute("class")&&(this.removeSvgClass(o,o.getAttribute("class")),t.isNullOrUndefined(this.chart.highlightColor&&""!==this.chart.highlightColor)||this.chart.legendSettings.enableHighlight||(o.setAttribute("stroke",e),"None"===this.chart.highlightPattern&&o.setAttribute("fill",e))),l.length>0?(s=l[0].getAttribute("class"),a=l[0].parentNode.getAttribute("class")||""):l&&(s=l.getAttribute("class")||"",a=l.parentNode.getAttribute("class")||""),-1===s.indexOf(i)&&-1===a.indexOf(i)&&u?(this.addSvgClass(o,"None"===this.chart.highlightMode&&this.chart.legendSettings.enableHighlight?i:this.unselected),this.removeSvgClass(o,i),""===this.chart.highlightColor||t.isNullOrUndefined(this.chart.highlightColor)||(o.setAttribute("stroke",this.control.visibleSeries[f].interior),"None"===this.chart.highlightPattern&&o.setAttribute("fill",this.control.visibleSeries[f].interior))):(this.removeSvgClass(o,this.unselected),t.isNullOrUndefined(this.chart.highlightColor)||""===this.chart.highlightColor||(o.setAttribute("stroke",this.control.visibleSeries[f].interior),"None"===this.chart.highlightPattern&&o.setAttribute("fill",this.control.visibleSeries[f].interior)),""===s&&""===a||"EJ2-Trackball"===s.trim()?this.removeSvgClass(o,i):(this.addSvgClass(o,i),i.indexOf("highlight")>0&&""!==this.chart.highlightColor&&"transparent"!==this.chart.highlightColor&&!t.isNullOrUndefined(this.chart.highlightColor)&&(o.setAttribute("stroke",this.chart.highlightColor),this.styleId.indexOf("highlight")>0&&"None"===this.chart.highlightPattern&&o.setAttribute("fill",this.chart.highlightColor)))))},i.prototype.applyStyles=function(n){for(var i,f,e=0,o=n;e<o.length;e++)if(i=o[e],i){if(this.removeSvgClass(i.parentNode,this.unselected),this.removeSvgClass(i,this.unselected),"fill"===this.chart.series[0].pointColorMapping){var r=this.getSelectionClass(i.id),s=r.indexOf("highlight")>-1?parseInt(r.split(this.chart.element.id+"_ej2_chart_highlight_series_")[1],10):parseInt(r.split(this.chart.element.id+"_ej2_chart_selection_series_")[1],10),h=this.styleId.indexOf("highlight")>0?this.chart.highlightPattern:this.chart.selectionPattern,u=void 0;if((r.indexOf("highlight")>-1||r.indexOf("selection")>-1)&&(u=document.getElementById(this.chart.element.id+"_"+h+"_Selection_"+s)),-1===i.id.indexOf("legend")&&-1===i.id.indexOf("Group")&&null!=u)for(f=1;f<u.children.length;f++)u.children[f].setAttribute("fill",i.getAttribute("fill")),u.children[f].setAttribute("stroke",i.getAttribute("fill"))}this.addSvgClass(i,this.getSelectionClass(i.id));this.chart.tooltip3DModule&&this.getSelectionClass(i.id).indexOf("highlight")>0&&(s=parseFloat(i.id.split("-series-")[1].split("-point-")[0]),this.chart.stopElementAnimation(i,s));this.styleId.indexOf("highlight")>0&&""!==this.chart.highlightColor&&!t.isNullOrUndefined(this.chart.highlightColor)&&"None"===this.chart.highlightPattern&&"transparent"!==this.chart.highlightColor&&i.setAttribute("fill",this.chart.highlightColor)}},i.prototype.getSelectionClass=function(n){return this.generateStyle(this.control.visibleSeries[this.indexFinder(n).series])},i.prototype.removeStyles=function(n){for(var i,r,u=0,f=n;u<f.length;u++)i=f[u],i&&(this.removeSvgClass(i,this.getSelectionClass(i.id)),"None"===this.chart.highlightPattern&&""!==this.chart.highlightColor&&!t.isNullOrUndefined(this.chart.highlightColor)&&"transparent"!==this.chart.highlightColor)&&(r=this.control.visibleSeries[this.indexFinder(i.id).series].interior,"ZLight"===i.getAttribute("name")&&(r=this.chart.polygon.applyZLight(r,this.control)),"XLight"===i.getAttribute("name")&&(r=this.chart.polygon.applyXLight(r,this.control)),i.setAttribute("fill",r))},i.prototype.addOrRemoveIndex=function(n,t,i){for(var r=0;r<n.length;r++)this.toEquals(n[r],t,this.isSeriesMode)&&(n.splice(r,1),r--);i&&n.push(t)},i.prototype.toEquals=function(n,t,i){return(n.series===t.series||"Cluster"===this.currentMode&&!i)&&(i||n.point===t.point)},i.prototype.redrawSelection=function(n,i,r){this.isSeriesMode="Series"===i;t.isNullOrUndefined(i)||(n.isRedrawSelection=!r);var u=t.extend([],this.selectedDataIndexes,null,!0),f=t.extend([],this.highlightDataIndexes,null,!0);this.styleId.indexOf("highlight")>0&&f.length>0?(this.removeSelectedElements(n,this.highlightDataIndexes,n.series),u=f):this.removeSelectedElements(n,this.selectedDataIndexes,n.series);this.blurEffect(n.element.id,n.visibleSeries);this.selectDataIndex(n,u)},i.prototype.legendSelection=function(n,t,i,u){var o,f,e,h,s,c,l,a;if("mousemove"===u){if(i.id.indexOf("text")>1&&(i=r(i.id.replace("text","shape"))),i.id.indexOf("marker")>1&&(i=r(i.id.replace("_marker",""))),i.id.indexOf("g")>1&&(i=r(i.id.replace("_g_","_shape_"))),i.hasAttribute("class")&&(i.getAttribute("class").indexOf("highlight")>-1||i.getAttribute("class").indexOf("selection")>-1))return;this.currentMode=this.chart.highlightMode}else"click"===u&&(i.id.indexOf("text")>1&&(i=r(i.id.replace("text","shape"))),i.id.indexOf("g")>1&&(i=r(i.id.replace("_g_","_shape_"))));if(o=this.indexFinder(i.id),this.isAlreadySelected(i,u,o))if(f=this.generateStyle(n.visibleSeries[t]),e=document.querySelectorAll("."+f),this.isSeriesMode="Series"===this.currentMode,h=!0,e.length>0)this.removeSelection(n,t,e,f,h);else{for(s=0,c=n.visibleSeries;s<c.length;s++)l=c[s],l.index===t||n.isMultiSelect||(f=this.generateStyle(n.visibleSeries[l.index]),e=document.querySelectorAll("."+f),this.removeSelection(n,t,e,f,h));(a="Point"===this.chart.legendSettings.mode?this.getElementByIndex(n,o):this.getSeriesElements(n.visibleSeries[t])).length>0&&(this.checkSelectionElements(a,f,!1,t,""),this.isSeriesMode=!0,this.selection(n,new ir(o.series,NaN),a),this.isSeriesMode="Series"===n.selectionMode,this.blurEffect(n.element.id,n.visibleSeries))}},i.prototype.removeSelection=function(n,t,i,r,u){var f,e,o,h,l,s,c,a;if(i.length>0){for(f=[],e=0;e<i.length;e++)f.push(i[e]);for(this.removeStyles(f),this.isSeriesMode=!0,this.addOrRemoveIndex(this.selectedDataIndexes,new ir(t,NaN)),o=0,h=n.visibleSeries;o<h.length;o++)if(l=h[o],r=this.generateStyle(l),document.querySelectorAll("."+r).length>0){for(s=0,c=f;s<c.length;s++)a=c[s],this.checkSelectionElements(a,r,!0,t,"");u=!1;break}u&&(this.isSeriesMode="Series"===n.selectionMode,this.blurEffect(n.element.id,n.visibleSeries))}},i.prototype.getSeriesElements=function(n){var t=[];return n.visible&&document.querySelectorAll('[id*="region-series-'+n.index+'"]').forEach(function(n){t.push(n)}),t},i.prototype.indexFinder=function(n){var t=["NaN","NaN"];return n.indexOf("-point-")>-1?t=n.split("-series-")[1].split("-point-"):n.indexOf("-border-")>-1?t[0]=n.split("-border-")[1]:n.indexOf("-series-")>-1?t[0]=n.split("-series-")[1]:n.indexOf("_chart_legend_shape_")>-1&&((t=n.split("_chart_legend_shape_"))[0]=t[1]),new ir(parseInt(t[0],10),parseInt(t[1],10))},i.prototype.removeSelectedElements=function(n,t,i){var f,r,e,o,u,s,h;for(t=n.isRedrawSelection?t:t.splice(0,t.length),r=0,e=i;r<e.length;r++)if(o=e[r],o.visible)for(f=this.getSeriesElements(o),this.removeStyles(f),u=0,s=f;u<s.length;u++)h=s[u],this.removeStyles(this.getChildren(h))},i.prototype.mouseLeave=function(){this.completeSelection()},i.prototype.completeSelection=function(){var n=this.chart;"None"!==n.selectionMode&&(this.currentMode=n.selectionMode)},i.prototype.mouseMove=function(n){var r=this.chart,u=n.target,i=n.type;this.highlightChart(u,i);"None"!==r.selectionMode&&"touchmove"===i&&(t.Browser.isIos||t.Browser.isIos7)&&n.preventDefault&&n.preventDefault()},i.prototype.highlightChart=function(n,i){if(!this.chart.rotateActivate&&("None"!==this.chart.highlightMode||this.chart.legendSettings.enableHighlight)&&!t.isNullOrUndefined(n)){if(n.id.indexOf("_legend_text")>1&&(n=r(n.id.replace("text","shape"))),n.hasAttribute("class")&&(n.getAttribute("class").indexOf("highlight")>-1||n.getAttribute("class").indexOf("selection")>-1))return;this.calculateSelectedElements(n,i);this.chart.highlight3DModule.highlightDataIndexes&&this.chart.highlight3DModule.highlightDataIndexes.length>0&&-1===n.id.indexOf("_chart_legend_")&&-1===n.id.indexOf("-series-")&&this.removeLegendHighlightStyles()}},i.prototype.removeLegendHighlightStyles=function(){var i,r,u,n;for(this.chart.highlight3DModule.highlightDataIndexes=[],r=0;r<this.chart.visibleSeries.length;r++)if(i=document.getElementsByClassName(this.generateStyle(this.chart.visibleSeries[r])),0===this.selectedDataIndexes.length){for(i=document.getElementsByClassName(this.generateStyle(this.chart.visibleSeries[r]));i.length>0;)(n=i[0])&&(this.removeSvgClass(n,n.getAttribute("class")),"None"===this.chart.highlightPattern&&""!==this.chart.highlightColor&&!t.isNullOrUndefined(this.chart.highlightColor)&&"transparent"!==this.chart.highlightColor)&&(u=this.control.visibleSeries[r].interior,"ZLight"===n.getAttribute("name")&&(u=this.chart.polygon.applyZLight(u,this.control)),"XLight"===n.getAttribute("name")&&(u=this.chart.polygon.applyXLight(u,this.control)),-1!==n.id.indexOf("_chart_legend_shape")&&n.getAttribute("stroke")&&n.setAttribute("stroke",u),n.setAttribute("fill",u));for(i=document.getElementsByClassName(this.unselected);i.length>0;)(n=i[0])&&(this.removeSvgClass(n,n.getAttribute("class")),this.chart.tooltip3DModule&&this.generateStyle(this.chart.visibleSeries[r]).indexOf("highlight")>-1&&this.chart.highlightAnimation(n,r,700,.3))}else for(i=document.getElementsByClassName(this.generateStyle(this.chart.visibleSeries[r]));i.length>0;)(n=i[0])&&(this.removeSvgClass(n,n.getAttribute("class")),this.addSvgClass(n,this.unselected))},i.prototype.getModuleName=function(){return"Selection3D"},i.prototype.destroy=function(){this.removeEventListener()},i}(rh),yvt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pvt=function(n){function i(t){var i=n.call(this,t)||this;return i.chart=t,i.wireEvents(),i}return yvt(i,n),i.prototype.wireEvents=function(){this.chart.isDestroyed||this.chart.on(t.Browser.touchMoveEvent,this.mouseMove,this)},i.prototype.unWireEvents=function(){this.chart.isDestroyed||this.chart.off(t.Browser.touchMoveEvent,this.mouseMove)},i.prototype.declarePrivateVariables=function(n){this.styleId=n.element.id+"_ej2_chart_highlight";this.unselected=n.element.id+"_ej2_deselected";this.selectedDataIndexes=[];this.highlightDataIndexes=[];this.isSeriesMode="Series"===n.highlightMode},i.prototype.invokeHighlight=function(n){this.declarePrivateVariables(n);this.series=t.extend({},n.visibleSeries,null,!0);this.seriesStyles();this.currentMode=n.highlightMode},i.prototype.getModuleName=function(){return"Highlight3D"},i.prototype.destroy=function(){this.unWireEvents()},i}(hrt),wvt=function(){function n(n){this.chart=n}return n.prototype.export=function(n,t){var r=new du(this.chart),i={cancel:!1,width:null,height:null};this.chart.trigger(yf,i);i.cancel||r.export(n,t,void 0,[this.chart])},n.prototype.pdfExport=function(n,t,i,r,u,f,e,o,s){var c=new du(this.chart),h;i=i||[this.chart];h={cancel:!1,width:r,height:u};this.chart.trigger(yf,h);h.cancel||c.export("PDF",n,t,i,r=h.width,u=h.height,f,e,o,s)},n.prototype.getDataUrl=function(n){return new du(n).getDataUrl(n)},n.prototype.getModuleName=function(){return"Export3D"},n.prototype.destroy=function(){},n}(),cl=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gi=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},crt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cl(i,n),gi([t.Property("Normal")],i.prototype,"fontStyle",void 0),gi([t.Property("16px")],i.prototype,"size",void 0),gi([t.Property("Normal")],i.prototype,"fontWeight",void 0),gi([t.Property("")],i.prototype,"color",void 0),gi([t.Property("Segoe UI")],i.prototype,"fontFamily",void 0),gi([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),lrt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cl(i,n),gi([t.Property(null)],i.prototype,"color",void 0),gi([t.Property(1)],i.prototype,"width",void 0),gi([t.Property(null)],i.prototype,"length",void 0),gi([t.Property("")],i.prototype,"dashArray",void 0),i}(t.ChildProperty),art=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return cl(i,n),gi([t.Property(!1)],i.prototype,"visible",void 0),gi([t.Property(null)],i.prototype,"name",void 0),gi([t.Property("transparent")],i.prototype,"fill",void 0),gi([t.Property("Inside")],i.prototype,"position",void 0),gi([t.Property(0)],i.prototype,"angle",void 0),gi([t.Property(!1)],i.prototype,"enableRotation",void 0),gi([t.Complex({width:null,color:null},yt)],i.prototype,"border",void 0),gi([t.Complex({fontFamily:null,size:"12px",fontStyle:"Normal",fontWeight:"400",color:null},crt)],i.prototype,"font",void 0),gi([t.Complex({},lrt)],i.prototype,"connectorStyle",void 0),gi([t.Property(null)],i.prototype,"template",void 0),gi([t.Property("")],i.prototype,"format",void 0),i}(t.ChildProperty),bvt=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return cl(r,n),r.prototype.renderDataLabel=function(n,r){var s=r.element.id+"-series-"+n.index+"-data-label-collections",f;for(n.labelBound=t.isNullOrUndefined(n.labelBound)?new i.Rect(1/0,1/0,-1/0,-1/0):n.labelBound,n.dataLabelElement=t.createElement("div",{id:s}),f=0;f<n.points.length;f++){var u=n.points[f],h=this.getDatalabelText(n.dataLabel.format,r,u.text?u.text:t.isNullOrUndefined(u.y)?"":u.y.toString()),c={width:n.dataLabel.border.width,color:n.dataLabel.border.color,dashArray:n.dataLabel.border.dashArray},l=t.extend({},t.getValue("properties",n.dataLabel.font),null,!0),e={cancel:!1,name:ie,series:n,point:u,text:h,border:c,color:n.dataLabel.fill,template:n.dataLabel.template,font:l};r.trigger(ie,e);u.argsData=e;!u.visible||e.cancel||t.isNullOrUndefined(u.y)||this.draw3DDataLabel(n,u.index,u,r)}n.dataLabel.template&&o(!1,document.getElementById(r.element.id+"_Secondary_Element"),n.dataLabelElement,r.redraw,!1,"x","y",null,"",!1,!1,null)},r.prototype.createDataLabelTemplate=function(n,i,r,u,f,e,o,s,h){var c=this.createTemplate(t.createElement("div",{id:h.element.id+"-series-"+i.index+"-data-label-"+e,styles:"position: absolute;background-color:"+f.color+";"+ko(r.font,h.themeStyle.datalabelFont)+";border:"+f.border.width+"px solid "+f.border.color+";"}),f.template,h,u,i,h.element.id+"-data-label-");this.calculateTemplateLabelSize(n,c,u,i,r,o,s)},r.prototype.calculateTemplateLabelSize=function(n,t,i,r,u,f,e,s){var h=go(t,f,s);t.style.left=e.x-h.width/2+"px";t.style.top=e.y-h.height+"px";o(!1,n,t,f,!0,"left","top")},r.prototype.createTemplate=function(n,t,i,r,u,f){var s,h=fc(t),o,c,e;try{if(o=h?h({chart:i,series:u,point:r},i,f+"-template",f):[],o.length)for(c=(s=Array.prototype.slice.call(o)).length,e=0;e<c;e++)n.appendChild(s[e]);i.isReact&&i.renderReactTemplates(void 0)}catch(t){return n}return n},r.prototype.draw3DDataLabel=function(n,r,u,f){var d,p,w,l,g=n.dataLabel.connectorStyle.length?parseFloat(n.dataLabel.connectorStyle.length):n.dataLabel.connectorStyle.length,a={data:null},o={x:0,y:0},rt=n.index,ut=u.symbolLocation.center,ft=u.symbolLocation.radius*n.coefficient,s,h,b,v,et,k,ht,ct;t.isNullOrUndefined(g)&&(g=i.measureText(u.argsData.text,n.dataLabel.font,f.themeStyle.datalabelFont).height);null!=n&&"Inside"!==n.dataLabel.position?d=u.symbolLocation.radius+g:null!=n&&(d=ft+(u.symbolLocation.radius-ft)/2);p=o.x=ut.x+parseFloat(u.argsData.font.size)/3+d*Math.cos(u.symbolLocation.angle);w=o.y=ut.y+parseFloat(u.argsData.font.size)/3+d*Math.sin(u.symbolLocation.angle);a.data={text:u.argsData.text,location:{x:p,y:w},series:n,pointIndex:r,seriesIndex:rt};a.data.Text=a.data.text;s=i.measureText(u.argsData.text,n.dataLabel.font,f.themeStyle.datalabelFont);p=o.x=a.data.location.x;w=o.y=a.data.location.y;var nt,lt=n.dataLabel.template?"template":"text",at=this.getSaturatedColor(u,u.argsData.color,f),e={width:s.width,height:s.height,fill:at,label:a.data,textAnchor:"middle",tag:lt,font:u.argsData.font,angle:0,id:f.element.id+"-svg-data-label-text-"+r,child:f.groupElement};if(!f.circularChartLegend3DModule||!f.legendSettings.visible||!u.visible||"Outside"!==n.dataLabel.position||(h=f.circularChartLegend3DModule.legendBounds,b=f.legendSettings.border.width/2,h=new i.Rect(h.x-b,h.y-b,h.width+2*b,h.height+2*b),v=new i.Rect(e.label.location.x+s.width/2+20,e.label.location.y+2.5,e.width,e.height),!pi(v,h)||!("Right"===f.circularChartLegend3DModule.position?e.width=h.x-v.x:"Left"===f.circularChartLegend3DModule.position&&(e.width=v.x-(h.x+h.width),e.width<0&&(e.width+=v.width,e.label.location.x=h.x+h.width-s.width/2+20)),v&&e.width<v.width&&(e.label.text=wi(e.width,e.label.text,n.dataLabel.font,f.enableRtl,f.themeStyle.datalabelFont)),3===e.label.text.length&&e.label.text.indexOf("...")>-1))){("Inside"!==n.dataLabel.position&&(nt=this.updateConnectorLine(u,r,n,g,f)),n.dataLabel.template&&"Inside"!==n.dataLabel.position)&&(et=this.createTemplate(t.createElement("div",{id:f.element.id+"-series-data-label-0",styles:"position: absolute;background-color:"+u.argsData.color+";"+ko(u.argsData.font,f.themeStyle.datalabelFont)+";border:"+u.argsData.border.width+"px solid "+u.argsData.border.color+";"}),u.argsData.template,f,u,n,f.element.id+"-data-label-"),s=i.measureText(et.textContent,n.dataLabel.font,f.themeStyle.datalabelFont));f.circularChartLegend3DModule&&f.legendSettings.visible&&"Outside"===n.dataLabel.position&&f.visibleSeries[0].findMaxBounds(f.visibleSeries[0].labelBound,{x:p,y:w,width:s.width,height:s.height});var tt=0,it=0,c=u.symbolLocation.angle;if("Inside"!==n.dataLabel.position&&((c>1.5&&c<1.8||c>1.3&&c<1.5||c>4.5&&c<4.8||c>4.3&&c<4.5)&&(o.x=nt.x,o.y=nt.y,c=nt.angle),c<Math.PI/2||c>=Math.PI/2+Math.PI?(tt=s.width/2+20,it=2.5):(tt=-(s.width/2+("transparent"!==u.argsData.color||u.argsData.border.color?25:20)),it=2.5)),!u.argsData.template&&""!==a.data.text){var ot={tag:"dataLabel",series:n,point:u,pointIndex:r,id:f.element.id+"-svg-"+rt+"-data-label-"+r,child:f.groupElement},y=void 0,st="";n.dataLabel.enableRotation&&(0===(y=l=n.dataLabel.angle)?(k=function(n){return n*(180/Math.PI)}(u.symbolLocation.angle),"Outside"===n.dataLabel.position?l=0:k>=90&&k<=260?(l=k+180,o.x=o.x-parseFloat(u.argsData.font.size)/2):l=k):l=y>360?y-360:y<-360?y+360:y,st="rotate("+l+","+o.x+","+o.y+")");ot.transform=st;ht=f.polygon.createTextElement(f.vector.vector3D(p+tt,w+it,u.symbolLocation.z?u.symbolLocation.z:0),ot,0,-s.height);f.circular3DPolygon.push(ht)}e.angle=n.dataLabel.enableRotation?0!==n.dataLabel.angle?n.dataLabel.angle:l:0;ct=f.polygon.createTextElement(f.vector.vector3D(o.x+tt,o.y+it,-1),e,0,-s.height);f.circular3DPolygon.push(ct)}},r.prototype.getSaturatedColor=function(n,t,i){var r,u=wu(vi(r="transparent"===(r="transparent"===t?this.getLabelBackground(n,i):t)?i.theme.indexOf("Dark")>-1||i.theme.indexOf("HighContrast")>-1?"black":"white":r)),f=Math.round((299*u.r+587*u.g+114*u.b)/1e3);return"Bootstrap5"===i.theme?"#212529":"Bootstrap5Dark"===i.theme?"#DEE2E6":f>=128?i.theme.indexOf("Tailwind3")>-1?"#4B5563":"black":i.theme.indexOf("Tailwind3")>-1?"#D1D5DB":"white"},r.prototype.getLabelBackground=function(n,t){return"Outside"===n.argsData.series.dataLabel.position?t.background||t.themeStyle.background:n.y?n.color:t.theme.indexOf("dark")?"white":"black"},r.prototype.getDatalabelText=function(n,t,i){if(Number(i)){var r=null!==n.match("{value}"),u=t.intl.getNumberFormat({format:r?"":n,useGrouping:t.useGroupingSeparator});i=r?n.replace("{value}",u(parseFloat(i))):u(parseFloat(i))}return i},r.prototype.updateConnectorLine=function(n,t,i,r,u){var h=[],f=n.symbolLocation,o=f.center.x+Math.cos(f.angle)*f.radius,s=f.center.y+Math.sin(f.angle)*f.radius,l,c,e;return h.push({x:o,y:s}),c=f.radius+r,e=f.angle,o=f.center.x+Math.cos(e)*c,s=f.center.y+Math.sin(e)*c,h.push({x:o,y:s}),l=e<Math.PI/2||e>=Math.PI/2+Math.PI?10:-10,h.push({x:o+l,y:s}),this.drawLineSegment(h,t,i,u),{x:o,y:s,angle:e}},r.prototype.drawLineSegment=function(n,t,i,r){for(var f=[],u=0;u<n.length;u++)f.push(r.vector.vector3D(n[u].x,n[u].y,0));var e=i.index,o=i.points[t].color,s=i.dataLabel.connectorStyle.color?i.dataLabel.connectorStyle.color:o,h={width:i.dataLabel.connectorStyle.width,stroke:s,child:r.groupElement,tag:"polyline",dashArray:i.dataLabel.connectorStyle.dashArray,id:r.element.id+"-datalabel-series-"+e+"-connector-"+t},c=r.polygon.createPolyline(f,h);r.circular3DPolygon.push(c)},r.prototype.getModuleName=function(){return"CircularChartDataLabel3D"},r.prototype.destroy=function(){},r}(t.ChildProperty),rp=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ai=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},vrt=function(){return function(){this.visible=!0;this.isExplode=!1;this.argsData=null}}(),yrt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return rp(i,n),ai([t.Property(null)],i.prototype,"fill",void 0),ai([t.Property("Gap")],i.prototype,"mode",void 0),i}(t.ChildProperty),up=function(n){function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.points=[],t.sumOfPoints=0,t.isRectSeries=!0,t.clipRect=new i.Rect(0,0,0,0),t.category="Series",t.rightSidePoints=[],t.leftSidePoints=[],t.segments=[],t.isExploded=!1,t}return rp(r,n),r.prototype.refreshDataManager=function(n,i){var u=this,r=this.dataSource||n.dataSource;r instanceof gt.DataManager||!t.isNullOrUndefined(this.query)?this.dataModule.getData(this.dataModule.generateQuery().requiresCount()).then(function(t){return u.dataManagerSuccess(t,n)}):this.dataManagerSuccess({result:r,count:r.length},n,i)},r.prototype.dataManagerSuccess=function(n,t,i){void 0===i&&(i=!0);var r={name:re,series:this,data:n.result};t.allowServerDataBinding=!1;t.trigger(re,r);this.resultData=""!==n.result?n.result:[];i||this.getPoints(this.resultData,t);++t.seriesCounts===t.visibleSeries.length&&i&&(this.getPoints(this.resultData,t),t.refreshChart())},r.prototype.getPoints=function(n,i){var r,f=Object.keys(n).length,e,u;if(this.sumOfPoints=0,0===f)return this.points=[],null;for(this.findSumOfPoints(n),this.points=[],e=this.palettes.length?this.palettes:function(n){var t;switch(n){case"Fabric":case"FabricDark":t=["#4472c4","#ed7d31","#ffc000","#70ad47","#5b9bd5","#c1c1c1","#6f6fe2","#e269ae","#9e480e","#997300"];break;case"Bootstrap4":case"Bootstrap":case"BootstrapDark":t=["#a16ee5","#f7ce69","#55a5c2","#7ddf1e","#ff6ea6","#7953ac","#b99b4f","#407c92","#5ea716","#b91c52"];break;case"HighContrastLight":case"HighContrast":t=["#79ECE4","#E98272","#DFE6B6","#C6E773","#BA98FF","#FA83C3","#00C27A","#43ACEF","#D681EF","#D8BC6E"];break;case"MaterialDark":t=["#9ECB08","#56AEFF","#C57AFF","#61EAA9","#EBBB3E","#F45C5C","#8A77FF","#63C7FF","#FF84B0","#F7C928"];break;case"Tailwind3":t=["#2F4074","#03B4B4","#0D72DE","#FF5733","#D63384","#F39C12","#EF291F","#91C822"];break;case"Tailwind3Dark":t=["#8029F1","#1ABC9C","#0D72DE","#FF5733","#D63384","#F39C12","#EF291F","#91C822"];break;case"Tailwind":t=["#5A61F6","#65A30D","#334155","#14B8A6","#8B5CF6","#0369A1","#F97316","#9333EA","#F59E0B","#15803D"];break;case"TailwindDark":t=["#8B5CF6","#22D3EE","#F87171","#4ADE80","#E879F9","#FCD34D","#F97316","#2DD4BF","#F472B6","#10B981"];break;case"Bootstrap5Dark":case"Bootstrap5":t=["#FD7E14","#6610F2","#6F42C1","#D63384","#DC3545","#FFC107","#198754","#0DCAF0"];break;case"FluentDark":case"Fluent":t=["#1AC9E6","#DA4CB2","#EDBB40","#AF4BCF","#FF7266","#1BD565","#EE993D","#5887FF","#EC548D","#7D39C0"];break;case"Fluent2":t=["#6200EE","#09AF74","#0076E5","#CB3587","#E7910F","#0364DE","#66CD15","#F3A93C","#107C10","#C19C00"];break;case"Fluent2Dark":case"Fluent2HighContrast":t=["#9BB449","#2A72D5","#43B786","#3F579A","#584EC6","#E85F9C","#6E7A89","#EA6266","#0B6A0B","#C19C00"];break;case"Material3":t=["#6355C7","#00AEE0","#FFB400","#F7523F","#963C70","#FD7400","#4BE0BC","#2196F5","#DE3D8A","#162F88"];break;case"Material3Dark":t=["#4EAAFF","#FA4EAB","#FFF500","#17EA58","#38FFE7","#FF9E45","#B3F32F","#B93CE4","#FC5664","#9B55FF"];break;default:t=["#00bdae","#404041","#357cd2","#e56590","#f8b883","#70ad47","#dd8abd","#7f84e8","#7bb4eb","#ea7a57"]}return t}(i.theme),u=0;u<f;u++)r=this.setPoints(n,u,i),t.isNullOrUndefined(r.y)&&(r.visible=!1),this.pushPoints(r,e,i)},r.prototype.pushPoints=function(n,t,i){n.index=this.points.length;n.isExplode=this.explodeAll||n.index===this.explodeIndex;n.color=n.color||t[n.index%t.length];var r={cancel:!1,name:rr,series:this,point:n,fill:n.color};i.trigger(rr,r);n.color=r.fill;n.visible=!r.cancel;this.points.push(n)},r.prototype.findSumOfPoints=function(n){for(var r=Object.keys(n).length,i=0;i<r;i++)t.isNullOrUndefined(n[i])||t.isNullOrUndefined(n[i][this.yName])||isNaN(n[i][this.yName])||(this.sumOfPoints+=Math.abs(n[i][this.yName]))},r.prototype.setPoints=function(n,i,r){var u=new vrt;return u.x=t.getValue(this.xName,n[i]),u.y=t.getValue(this.yName,n[i]),u.percentage=+(u.y/this.sumOfPoints*100).toFixed(2),u.legendImageUrl=t.getValue(this.legendImageUrl,n[i]),u.color=t.getValue(this.pointColorMapping,n[i]),u.text=u.originalText=t.getValue(this.dataLabel.name||"",n[i]),u.tooltip=t.getValue(this.tooltipMappingName||"",n[i]),u.sliceRadius=t.getValue(this.radius?this.radius:"80%",n[i]),u.sliceRadius=t.isNullOrUndefined(u.sliceRadius)?"80%":u.sliceRadius,u.separatorY=r.intl.formatNumber(u.y,{useGrouping:r.useGroupingSeparator}),this.setEmptyPoint(u,i,n,r),u},r.prototype.draw=function(n,r){var f=r.visibleSeries.indexOf(n),u,e,s;this.calculateSize(r,n);u=n.radius?n.radius:t.Browser.isDevice&&"Outside"===n.dataLabel.position?"40%":"80%";e=parseInt(u,10);(-1===u.indexOf("%")&&"number"!=typeof e||isNaN(e))&&(this.isRadiusMapped=!0);n.size=this.isRadiusMapped?.8:parseInt(u,10)/100;n.coefficient=parseInt(n.innerRadius,10)/100;r.circularRadius[f]=.97*Math.min(n.actualWidth/2-(r.legendSettings.visible&&r.circularChartLegend3DModule&&("Right"===r.legendSettings.position||"Left"===r.legendSettings.position)?r.circularChartLegend3DModule.legendBounds.width:0),n.actualHeight/2)*n.size;r.innerRadius[f]=n.coefficient*r.circularRadius[f];this.createPolygons(n,r);this.dataLabel.visible&&r.circularChartDataLabel3DModule.renderDataLabel(n,r);o(!1,r.svgObject,r.groupElement,r.redraw);s=new i.Size(r.availableSize.width,r.availableSize.height);r.graphics.prepareView(0,r.depth,r.rotation,r.tilt,s,r);r.graphics.view(r.svgObject,r)},r.prototype.calculateSize=function(n,t){var l=n.legendSettings,f=0,e=0,i=n.circularChartLegend3DModule?n.circularChartLegend3DModule.position:"Auto",o=n.title,a=n.subTitle,u=n.titleLocation,c=n.subTitleLocation,v=n.titleStyle.textOverflow,y=n.subTitleStyle.textOverflow,p=!(!o||"Wrap"!==v),s=!(!a||"Wrap"!==y),h,r;return(l.visible&&n.circularChartLegend3DModule&&"Custom"!==i&&("Right"===i||"Left"===i?f="right"===i.toLowerCase()?n.margin.right:n.margin.left+n.circularChartLegend3DModule.legendBounds.width:e="Top"===i?n.margin.top:"Bottom"===i?n.margin.bottom+n.circularChartLegend3DModule.legendBounds.height:0),t.actualWidth=n.availableSize.width-f,h=.5*t.actualWidth+("Left"===i?f:0),p||s)?(r=u.size.height+(s?c.size.height:0)+e,t.actualHeight=n.svgObject.height.baseVal.value-r,{centerX:h,centerY:.5*t.actualHeight+(u.size.height+(s?c.size.height:0))}):(r=(o?u.y:0)+e,t.actualHeight=n.svgObject.height.baseVal.value-r,{centerX:h,centerY:.5*t.actualHeight+("Top"===i?r:o?u.y:0)})},r.prototype.createPolygons=function(n,t){for(var i,e,l,s,h,c,o,u=[],f=[],a=(o=0===n.segments.length?this.createPoints(n,t):n.segments).length,r=0;r<a;r++)if((s=o[r]).visible&&(c=o[r].pointIndex,h={opacity:n.opacity,interior:n.points[c].color},null!==(f=this.createSector(s,t,h,n.index))))for(i=0;i<f.length;i++)if(u[i]||(u[i]=[]),null!==f[i])for(e=0;e<f[i].length;e++)u[i].push(f[i][e]);for(r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)l=u[r][i],t.circular3DPolygon.push(l);return null},r.prototype.createSector=function(n,t,i,r){var o=Math.ceil(n.actualEndValue/6),y=Math.PI/180,s=0,h=t.depth,g,nt,tt,it,k,l,d,a,v,w,b;if(o<1)return null;for(var c=[],p=n.actualEndValue/o,f=[],e=[],u=0;u<o+1;u++)g=n.center.x+n.radius*Math.cos((n.actualStartValue+u*p)*y),nt=n.center.y+n.radius*Math.sin((n.actualStartValue+u*p)*y),f[u]={x:g,y:nt},tt=n.center.x+n.inSideRadius*Math.cos((n.actualStartValue+u*p)*y),it=n.center.y+n.inSideRadius*Math.sin((n.actualStartValue+u*p)*y),e[u]={x:tt,y:it};for(k=[],l=[],u=0;u<o;u++)l=[this.vector(f[u].x,f[u].y,0),this.vector(f[u].x,f[u].y,h),this.vector(f[u+1].x,f[u+1].y,h),this.vector(f[u+1].x,f[u+1].y,0)],k[u]=t.polygon.polygon3D(l,null,n.index,null,null,i.opacity,i.interior,s.toString()+"-region-series-"+r+"-point-"+n.index,t.groupElement,n.accessibilityText),s++;if(c[1]=k,n.inSideRadius>0){for(d=[],u=0;u<o;u++)l=[this.vector(e[u].x,e[u].y,0),this.vector(e[u].x,e[u].y,h),this.vector(e[u+1].x,e[u+1].y,h),this.vector(e[u+1].x,e[u+1].y,0)],d[u]=t.polygon.polygon3D(l,null,n.index,null,null,i.opacity,i.interior,s.toString()+"-region-series-"+r+"-point-"+n.index,t.groupElement,n.accessibilityText),s++;c[3]=d}for(a=[],v=[],u=0;u<o+1;u++)a.push(this.vector(f[u].x,f[u].y,0)),v.push(this.vector(f[u].x,f[u].y,h));if(n.inSideRadius>0)for(u=o;u>-1;u--)a.push(this.vector(e[u].x,e[u].y,0)),v.push(this.vector(e[u].x,e[u].y,h));else a.push(n.center),v.push(this.vector(n.center.x,n.center.y,h));return(c[0]=[],c[0].push(t.polygon.polygon3D(a,null,n.index,null,null,i.opacity,i.interior,s.toString()+"-region-series-"+r+"-point-"+n.index,t.groupElement,n.accessibilityText)),s++,c[0].push(t.polygon.polygon3D(v,null,n.index,null,null,i.opacity,i.interior,s.toString()+"-region-series-"+r+"-point-"+n.index,t.groupElement,n.accessibilityText)),s++,n.inSideRadius>0)?(w=[this.vector(f[0].x,f[0].y,0),this.vector(f[0].x,f[0].y,h),this.vector(e[0].x,e[0].y,h),this.vector(e[0].x,e[0].y,0)],b=[this.vector(f[o].x,f[o].y,0),this.vector(f[o].x,f[o].y,h),this.vector(e[o].x,e[o].y,h),this.vector(e[o].x,e[o].y,0)],c[2]=[],c[2].push(t.polygon.polygon3D(w,null,n.index,null,null,i.opacity,i.interior,s.toString()+"-region-series-"+r+"-point-"+n.index,t.groupElement,n.accessibilityText)),s++,c[2].push(t.polygon.polygon3D(b,null,n.index,null,null,i.opacity,i.interior,s.toString()+"-region-series-"+r+"-point-"+n.index,t.groupElement,n.accessibilityText)),s++):(w=[this.vector(f[0].x,f[0].y,0),this.vector(f[0].x,f[0].y,h),this.vector(n.center.x,n.center.y,h),this.vector(n.center.x,n.center.y,0)],b=[this.vector(f[o].x,f[o].y,0),this.vector(f[o].x,f[o].y,h),this.vector(n.center.x,n.center.y,h),this.vector(n.center.x,n.center.y,0)],c[2]=[],c[2].push(t.polygon.polygon3D(w,null,n.index,null,null,i.opacity,i.interior,s.toString()+"-region-series-"+r+"-point-"+n.index,t.groupElement,n.accessibilityText)),s++,c[2].push(t.polygon.polygon3D(b,null,n.index,null,null,i.opacity,i.interior,s.toString()+"-region-series-"+r+"-point-"+n.index,t.groupElement,n.accessibilityText)),s++),c},r.prototype.createPoints=function(n,r){var f,ut;n.segments=[];for(var b=this.calculateSize(r,n),o=0,c=n.points,k=c.length,h=0;h<k;h++)c[h].visible&&!t.isNullOrUndefined(c[h].y)&&(o+=c[h].y);for(var v,d,e,g,nt=360/(o=0!==o?o:1),tt=n.index,ft=r.innerRadius[tt],y=this.getYValues(n.points),et=r.depth,p=0,w=0,l=0,s=new i.Rect(0,0,0,0),a={X:0,Y:0},rt=0,ot=r.circularRadius[tt],u=0;u<k;u++)n.points[u].visible&&!t.isNullOrUndefined(y[u])&&(d=n.points[u].index,e=Math.abs(y[u]),w=Math.abs(e)*(2*Math.PI/o),s.x=0,s.y=0,f=n.points[u],f.radius=n.isRadiusMapped?-1!==n.points[u].sliceRadius.indexOf("%")?it(n.points[u].sliceRadius,this.size/2):parseInt(n.points[u].sliceRadius,10):ot,ut=f.x+":"+f.y+", "+n.name,t.isNullOrUndefined(e)||(n.explode&&(n.explodeIndex===f.index||!n.isExploded&&n.explodeAll)&&(a.X=Math.cos(2*Math.PI*(l+e/2)/o),a.Y=Math.sin(2*Math.PI*(l+e/2)/o),s.x=.01*f.radius*a.X*it(n.explodeOffset,100),s.y=.01*f.radius*a.Y*it(n.explodeOffset,100)),v=this.vector(s.x+b.centerX,s.y+b.centerY,0),g=this.createSegment(v,nt*l,nt*e,et,f.radius,u,e,ft,d,n,ut),n.segments.push(g)),this.addPieDataLabel(rt,y[u],p,p+w,f.radius,this.isChartRotated(r)?r.depth+5:0,v,n.points[u]),rt++,p+=w,l+=e);return n.segments},r.prototype.addPieDataLabel=function(n,t,i,r,u,f,e,o){var s=(i+r)/2;o.symbolLocation={x:0,y:0,radius:0,angle:0};o.symbolLocation.x=n;o.symbolLocation.y=t;o.symbolLocation.radius=u;o.symbolLocation.angle=s;o.symbolLocation.center=e;o.startDepth=f},r.prototype.isChartRotated=function(n){var t=Math.abs(n.tilt%360),i=Math.abs(n.rotation%360);return(t>90&&t<270)!=(i>90&&i<270)},r.prototype.createSegment=function(n,t,i,r,u,f,e,o,s,h,c){return{startValue:t,endValue:i,depth:r,radius:u,index:f,yData:e,center:n,inSideRadius:o,actualEndValue:i,actualStartValue:t,pointIndex:s,series:h,visible:!0,accessibilityText:c}},r.prototype.vector=function(n,t,i){return{x:n,y:t,z:i}},r.prototype.getYValues=function(n){for(var i=[],r=n.length,t=0;t<r;t++)i.push(n[t].y);return i},r.prototype.findMaxBounds=function(n,t){n.x=t.x<n.x?t.x:n.x;n.y=t.y<n.y?t.y:n.y;n.height=t.y+t.height>n.height?t.y+t.height:n.height;n.width=t.x+t.width>n.width?t.x+t.width:n.width},r.prototype.setEmptyPoint=function(n,i,r,u){if(!t.isNullOrUndefined(n.y)&&!isNaN(n.y))return null;var f,e;switch(n.color=this.emptyPointSettings.fill||n.color,this.emptyPointSettings.mode){case"Zero":n.y=0;n.visible=!0;break;case"Average":f=r[i-1]&&r[i-1][this.yName]||0;e=r[i+1]&&r[i+1][this.yName]||0;n.y=(Math.abs(f)+Math.abs(e))/2;n.separatorY=u.intl.formatNumber(n.y,{useGrouping:u.useGroupingSeparator});this.sumOfPoints+=n.y;n.visible=!0;break;default:n.visible=!1}},ai([t.Property("")],r.prototype,"dataSource",void 0),ai([t.Property()],r.prototype,"query",void 0),ai([t.Property("")],r.prototype,"xName",void 0),ai([t.Property("")],r.prototype,"name",void 0),ai([t.Property("")],r.prototype,"tooltipMappingName",void 0),ai([t.Property("")],r.prototype,"yName",void 0),ai([t.Property(!0)],r.prototype,"visible",void 0),ai([t.Complex(null,au)],r.prototype,"animation",void 0),ai([t.Property("SeriesType")],r.prototype,"legendShape",void 0),ai([t.Property("")],r.prototype,"legendImageUrl",void 0),ai([t.Property("")],r.prototype,"pointColorMapping",void 0),ai([t.Complex({},art)],r.prototype,"dataLabel",void 0),ai([t.Property([])],r.prototype,"palettes",void 0),ai([t.Property(null)],r.prototype,"radius",void 0),ai([t.Property("0")],r.prototype,"innerRadius",void 0),ai([t.Property(!0)],r.prototype,"enableTooltip",void 0),ai([t.Property(!1)],r.prototype,"explode",void 0),ai([t.Property("30%")],r.prototype,"explodeOffset",void 0),ai([t.Property(!1)],r.prototype,"explodeAll",void 0),ai([t.Property(null)],r.prototype,"explodeIndex",void 0),ai([t.Complex({mode:"Drop"},yrt)],r.prototype,"emptyPointSettings",void 0),ai([t.Property(1)],r.prototype,"opacity",void 0),r}(t.ChildProperty),kvt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return rp(t,n),t.prototype.getModuleName=function(){return"PieSeries3D"},t.prototype.destroy=function(){},t}(up),ll=function(){return ll=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n},ll.apply(this,arguments)},ei=new(function(){return function(){this.transform=null}}()),ah=function(){function n(n,t,i){this.x=0;this.y=0;this.z=0;this.epsilon=1e-5;this.x=n;this.y=t||0;this.z=i||0}return n.prototype.isValid=function(n){return!isNaN(n.x)&&!isNaN(n.y)&&!isNaN(n.z)},n.prototype.vector3D=function(n,t,i){return this.x=n,this.y=t,this.z=i,{x:this.x,y:this.y,z:this.z}},n.prototype.vector3DMinus=function(n,t){return this.vector3D(n.x-t.x,n.y-t.y,n.z-t.z)},n.prototype.vector3DPlus=function(n,t){return this.vector3D(n.x+t.x,n.y+t.y,n.z+t.z)},n.prototype.vector3DMultiply=function(n,t){var i=n.y*t.z-t.y*n.z,r=n.z*t.x-t.z*n.x,u=n.x*t.y-t.x*n.y;return this.vector3D(i,r,u)},n.prototype.vector3DAdd=function(n,t){return n.x*t.x+n.y*t.y+n.z*t.z},n.prototype.vector3DStarMultiply=function(n,t){var i=n.x*t,r=n.y*t,u=n.z*t;return this.vector3D(i,r,u)},n.prototype.getLength=function(n){var t=this.vector3DAdd(n,n);return Math.sqrt(t)},n.prototype.getNormal=function(n,t,i){var f=this.vector3DMinus(n,t),e=this.vector3DMinus(i,t),r=this.vector3DMultiply(f,e),u=this.getLength(r);return u<this.epsilon?this.vector3D(0,0,0):this.vector3D(r.x/u,r.y/u,r.z/u)},n}(),al=function(){function n(){this.matrixSize=4}return n.prototype.matrix3D=function(n){for(var i=[],t=0;t<n;t++)i[t]=this.createArray(n);return i},n.prototype.isAffine=function(n){return 0===n[0][3]&&0===n[1][3]&&0===n[2][3]&&1===n[3][3]},n.prototype.createArray=function(n){for(var i=[],t=0;t<n;++t)i[t]=0;return i},n.prototype.getIdentity=function(){for(var t=this.matrix3D(this.matrixSize),n=0;n<this.matrixSize;n++)t[n][n]=1;return t},n.prototype.getInterval=function(n){for(var r,t=this.getIdentity(),i=0;i<this.matrixSize;i++)for(r=0;r<this.matrixSize;r++)t[i][r]=this.getMinor(n,i,r);return t=this.transposed(t),this.getMatrixMultiple(1/this.getDeterminant(n),t)},n.prototype.getMatrixMultiple=function(n,t){for(var r,i=0;i<t.length;i++)for(r=0;r<t[i].length;r++)t[i][r]=t[i][r]*n;return t},n.prototype.getMatrixVectorMultiple=function(n,t){var r=n[0][0]*t.x+n[1][0]*t.y+n[2][0]*t.z+n[3][0],u=n[0][1]*t.x+n[1][1]*t.y+n[2][1]*t.z+n[3][1],f=n[0][2]*t.x+n[1][2]*t.y+n[2][2]*t.z+n[3][2],i;return this.isAffine(n)||(i=1/(n[0][3]*t.x+n[1][3]*t.y+n[2][3]*t.z+n[3][3]),r*=i,u*=i,f*=i),{x:r,y:u,z:f}},n.prototype.getMatrixMultiplication=function(n,t){for(var r,e,u,f=this.getIdentity(),i=0;i<this.matrixSize;i++)for(r=0;r<this.matrixSize;r++){for(e=0,u=0;u<this.matrixSize;u++)e+=n[u][r]*t[i][u];f[i][r]=e}return f},n.prototype.getMinor=function(n,t,i){return((t+i)%2==0?1:-1)*this.getDeterminant(this.getMatrix(n,t,i))},n.prototype.getMatrix=function(n,t,i){for(var o,u,s,f=n.length-1,e=this.createArray(f),r=0;r<f;r++)for(o=r>=t?r+1:r,e[r]=this.createArray(f),u=0;u<f;u++)s=u>=i?u+1:u,e[r][u]=n[o][s];return e},n.prototype.getDeterminant=function(n){var u=n.length,r=0,i,t,f;if(u<2)r=n[0][0];else for(i=1,t=0;t<u;t++)f=this.getMatrix(n,t,0),r+=i*n[t][0]*this.getDeterminant(f),i=i>0?-1:1;return r},n.prototype.transform=function(n,t,i){var r=this.getIdentity();return r[3][0]=n,r[3][1]=t,r[3][2]=i,r},n.prototype.turn=function(n){var t=this.getIdentity();return t[0][0]=Math.cos(n),t[2][0]=-Math.sin(n),t[0][2]=Math.sin(n),t[2][2]=Math.cos(n),t},n.prototype.tilt=function(n){var t=this.getIdentity();return t[1][1]=Math.cos(n),t[2][1]=Math.sin(n),t[1][2]=-Math.sin(n),t[2][2]=Math.cos(n),t},n.prototype.transposed=function(n){for(var i,r=this.getIdentity(),t=0;t<this.matrixSize;t++)for(i=0;i<this.matrixSize;i++)r[t][i]=n[i][t];return r},n}(),dvt=function(){function n(){this.toRadial=Math.PI/180;this.vector=new ah(0,0,0);this.matrixObj=new al}return n.prototype.transform3D=function(n){return{viewingArea:n,rotation:0,tilt:0,depth:0,perspectiveAngle:0,needUpdate:!0,centeredMatrix:this.matrixObj.getIdentity(),perspective:this.matrixObj.getIdentity(),resultMatrix:this.matrixObj.getIdentity(),viewMatrix:this.matrixObj.getIdentity()}},n.prototype.transform=function(n){this.setCenter(this.vector.vector3D(n.viewingArea.width/2,n.viewingArea.height/2,n.depth/2),n);this.setViewMatrix(this.matrixObj.transform(0,0,n.depth),n);this.setViewMatrix(this.matrixObj.getMatrixMultiplication(n.viewMatrix,this.matrixObj.turn(-this.toRadial*n.rotation)),n);this.setViewMatrix(this.matrixObj.getMatrixMultiplication(n.viewMatrix,this.matrixObj.tilt(-this.toRadial*n.tilt)),n);this.updatePerspective(n.perspectiveAngle,n);n.needUpdate=!0},n.prototype.updatePerspective=function(n,t){var i=(t.viewingArea.width+t.viewingArea.height)*Math.tan(this.degreeToRadianConverter((180-Math.abs(n%181))/2))+t.depth/1;t.perspective[0][0]=i;t.perspective[1][1]=i;t.perspective[2][3]=1;t.perspective[3][3]=i},n.prototype.degreeToRadianConverter=function(n){return n*Math.PI/180},n.prototype.toScreen=function(n,t,i){return i?(this.matrixObj=i,n=i.getMatrixVectorMultiple(this.result(t,i),n)):(t.chartObj=this.matrixObj,n=this.matrixObj.getMatrixVectorMultiple(this.result(t),n)),{x:n.x,y:n.y}},n.prototype.setViewMatrix=function(n,t){t.viewMatrix!==n&&(t.viewMatrix=n,t.needUpdate=!0)},n.prototype.result=function(n,t){var i=n.chartObj?n.chartObj:this.matrixObj,r;return(i||(i=t),!n.needUpdate)?n.resultMatrix:(r=this.matrixObj,n.resultMatrix=i.getMatrixMultiplication(r.getInterval(n.centeredMatrix),n.perspective),n.resultMatrix=i.getMatrixMultiplication(n.resultMatrix,n.viewMatrix),n.resultMatrix=i.getMatrixMultiplication(n.resultMatrix,n.centeredMatrix),n.needUpdate=!1,n.resultMatrix)},n.prototype.setCenter=function(n,t){t.centeredMatrix=this.matrixObj.transform(-n.x,-n.y,-n.z);t.needUpdate=!0},n}(),gvt=function(){function n(){this.vector=new ah(0,0,0)}return n.prototype.prepareView=function(n,t,i,r,u,f){0===arguments.length?brt.build(null,f):(null==ei.transform?ei.transform=f.transform3D.transform3D(u):ei.transform.viewingArea=u,ei.tree||(ei.tree=[]),ei.transform.rotation=i,ei.transform.tilt=r,ei.transform.depth=t,ei.transform.perspectiveAngle=n,f.transform3D.transform(ei.transform),ei.tree[f.groupElement.id]=brt.build(null,f))},n.prototype.view=function(n,t,i,r,u,f,e){var o,s;if(2===arguments.length){if(null==n)return;o=this.vector.vector3D(0,0,32767);this.drawNode3D(ei.tree[t.groupElement.id],o,n,t)}else{if(null==n)return;null==ei.transform?ei.transform=t.transform3D.transform3D(u):ei.transform.viewingArea=u;ei.transform.rotation=i;ei.transform.tilt=r;ei.transform.depth=e;ei.transform.perspectiveAngle=f;t.transform3D.transform(ei.transform);s=this.vector.vector3D(0,0,32767);this.drawNode3D(ei.tree[t.groupElement.id],s,n,t)}},n.prototype.draw3DElement=function(n,t){n.plane.element?"text"===n.plane.element.tag||"dataLabel"===n.plane.element.tag?lo.drawText(n.plane,t):"polyline"===n.plane.element.tag?lo.drawPolyLine(n.plane,t):"template"===n.plane.element.tag&&lo.drawTemplate(n.plane,t):lo.draw(n.plane,t)},n.prototype.drawNode3D=function(n,t,i,r){if(null!==n&&null!=ei.transform){for(;;){if(cf.vector3DAdd(lo.getNormal(r.transform3D.result(ei.transform),n.plane.vectorPoints),t)>n.plane.d){if(null!=n.front&&this.drawNode3D(n.front,t,i,r),this.draw3DElement(n,r),null!=n.back){n=n.back;continue}}else if(null!=n.back&&this.drawNode3D(n.back,t,i,r),this.draw3DElement(n,r),null!=n.front){n=n.front;continue}break}return null}},n}(),prt=function(){function n(n){this.epsilon=.0005;this.chart=n}return n.prototype.getNext=function(n,t){return n>=t?n-t:n<0?n+t:n},n.prototype.vector3DIndexClassification=function(n,t,i){return{index:t,result:i,vector:n,isCuttingBackPoint:!1,cuttingBackPairIndex:null,alreadyCutBack:!1,isCuttingFrontPoint:!1,cuttingFrontPairIndex:null,alreadyCutFront:!1}},n.prototype.classifyPoint=function(n,t){var i="OnPlane",r=-t.d-cf.vector3DAdd(n,t.normal);return r>this.epsilon?i="OnBack":r<-this.epsilon&&(i="OnFront"),i},n.prototype.classifyPolygon=function(n,t){var i=t.points,o;if(null==i)return"Unknown";for(var u=0,f=0,r=0,s=n.normal,h=n.d,e=0,c=i.length;e<c;e++)if(o=-h-cf.vector3DAdd(i[e],s),o>this.epsilon?u++:o<-this.epsilon?f++:r++,u>0&&f>0)break;return r===i.length?"OnPlane":f+r===i.length?"ToRight":u+r===i.length?"ToLeft":"Unknown"},n.prototype.splitPolygon=function(n,t){var l=[],a=[],e,o,h,c,nt,tt;if(null!=n.points){for(var f=[],r=[],u=[],w=void 0,b=void 0,k=n.points.length,i=0;i<k;i++){var v=n.points[i],s=n.points[this.getNext(i+1,k)],y=this.classifyPoint(v,t),d=this.classifyPoint(s,t),it=this.vector3DIndexClassification(v,f.length,y);if(f.push(it),y!==d&&"OnPlane"!==y&&"OnPlane"!==d){var g=cf.vector3DMinus(v,s),rt=cf.vector3DMinus(cf.vector3DStarMultiply(t.normal,-t.d),s),ut=cf.vector3DAdd(rt,t.normal)/cf.vector3DAdd(t.normal,g),ft=cf.vector3DPlus(s,cf.vector3DStarMultiply(g,ut)),p=this.vector3DIndexClassification(ft,f.length,"OnPlane");f.push(p);r.push(p);u.push(p)}}if(0!==u.length||0!==r.length){for(i=0;i<r.length-1;i+=2)e=r[i],o=r[i+1],e.cuttingBackPoint=!0,o.cuttingBackPoint=!0,e.alterCuttingBackPairIndex=o.index,o.alterCuttingBackPairIndex=e.index;for(i=0;i<u.length-1;i+=2)h=u[i],c=u[i+1],h.cuttingFrontPoint=!0,c.cuttingFrontPoint=!0,h.alterCuttingFrontPairIndex=c.index,c.alterCuttingFrontPairIndex=h.index;for(i=0;i<r.length-1;i++)!(e=r[i]).alreadyCutBack&&(w=this.cutOutBackPolygon(f,e)).length>2&&(nt=lo.polygon3D(w,n),l.push(ll({},nt)));for(i=0;i<u.length-1;i++)!(o=u[i]).alreadyCutFront&&(b=this.cutOutFrontPolygon(f,o)).length>2&&(tt=lo.polygon3D(b,n),a.push(ll({},tt)))}}else l.push(n),a.push(n);return{backPolygon:l,frontPolygon:a}},n.prototype.cutOutFrontPolygon=function(n,t){for(var e,r,u,f=[],i=t;;)if(i.alreadyCutFront=!0,f.push(i.vector),e=n[i.alterCuttingFrontPairIndex],i.cuttingFrontPoint)if(e.alreadyCutFront)if(r=n[this.getNext(i.index-1,n.length)],u=n[this.getNext(i.index+1,n.length)],"OnFront"!==r.result||r.alreadyCutFront){if("OnFront"!==u.result||u.alreadyCutFront)return f;i=u}else i=r;else i=e;else if(r=n[this.getNext(i.index-1,n.length)],u=n[this.getNext(i.index+1,n.length)],"OnBack"===r.result||r.alreadyCutFront){if("OnBack"===u.result||u.alreadyCutFront)return f;i=u}else i=r;return null},n.prototype.cutOutBackPolygon=function(n,t){for(var e,r,u,f=[],i=t;;)if(i.alreadyCutBack=!0,f.push(i.vector),e=n[i.alterCuttingBackPairIndex],i.cuttingBackPoint)if(e.alreadyCutBack)if(r=n[this.getNext(i.index-1,n.length)],u=n[this.getNext(i.index+1,n.length)],"OnBack"!==r.result||r.alreadyCutBack){if("OnBack"!==u.result||u.alreadyCutBack)return f;i=u}else i=r;else i=e;else if(r=n[this.getNext(i.index-1,n.length)],u=n[this.getNext(i.index+1,n.length)],"OnFront"===r.result||r.alreadyCutBack){if("OnFront"===u.result||u.alreadyCutBack)return f;i=u}else i=r;return null},n.prototype.build=function(n,t){var e,o,s,r,i,u,f;if(n){if(e=n,e.length<1)return null;o={back:null,front:null,plane:null};s=e[0];o.plane=s;for(var h=[],c=[],l=1,a=e.length;l<a;l++)if(r=e[l],r!==s)switch(this.classifyPolygon(s,r)){case"OnPlane":case"ToRight":c.push(r);break;case"ToLeft":h.push(r);break;case"Unknown":if(r.element)h.push(r);else{for(i=this.splitPolygon(r,s),u=0;u<i.backPolygon.length;u++)i.backPolygon[u].name=i.backPolygon[u].name+"-back",h.push(i.backPolygon[u]);for(f=0;f<i.frontPolygon.length;f++)i.frontPolygon[f].name=i.frontPolygon[f].name+"-front",c.push(i.frontPolygon[f])}}return h.length>0&&(o.back=this.build(h)),c.length>0&&(o.front=this.build(c)),o}return this.build(t.circular3DPolygon)},n}(),nyt=function(){function n(){}return n.prototype.getStringBuilder=function(){var n=[],t=0;return{append:function(i){return n[t++]=i,this},toString:function(t){return n.join(t||"")}}},n.prototype.hexToValue=function(n){var i,t;return 0===n.indexOf("rgba(")?(t=n.slice(5,-1).split(","))?{red:parseInt(t[0],10),green:parseInt(t[1],10),blue:parseInt(t[2],10),alpha:parseFloat(t[3])}:null:0===n.indexOf("rgb(")?(t=n.slice(4,-1).split(","))?{red:parseInt(t[0],10),green:parseInt(t[1],10),blue:parseInt(t[2],10)}:null:(i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n))?{red:parseInt(i[1],16),green:parseInt(i[2],16),blue:parseInt(i[3],16)}:null},n.prototype.drawText=function(n,t,i,r){var u=document.getElementById(n.id)||r.groupElement.querySelector("#"+n.id);return null===u&&(u=document.createElementNS("http://www.w3.org/2000/svg","text")),u.textContent=t,r.renderer.setElementAttributes(n,u)},n.prototype.hexColor=function(n){var i=n.red,r=n.green,u=n.blue,t;return n.alpha?"rgba("+i.toString()+","+r.toString()+","+u.toString()+","+n.alpha+")":(t=[i.toString(16),r.toString(16),u.toString(16)],t.forEach(function(n,i){1===n.length&&(t[i]="0"+n)}),"#"+t.join("").toUpperCase())},n.prototype.checkColorFormat=function(n){var t,i;if(0===n.indexOf("rgba(")||0===n.indexOf("rgb(")){if(t=n.substring(n.indexOf("(")+1,n.lastIndexOf(")")).split(","),3===t.length||4===t.length)return t.every(function(n){var t=parseFloat(n);return!isNaN(t)&&t>=0&&t<=255})}else if(0===n.indexOf("#"))return i=n.substring(1),(3===i.length||6===i.length)&&/^[0-9A-Fa-f]{3,6}$/.test(i);return!1},n}(),wrt=function(){function n(){this.epsilon=1e-5;this.normal={x:0,y:0,z:0};this.vector=new ah(0,0,0);this.vectorPoints=[];this.matrixObj=new al}return n.prototype.polygon3D=function(n,t,i,r,u,f,e,o,s,h){if(2===arguments.length)return this.calculateNormal(n[0],n[1],n[2]),this.vectorPoints=n,this.calculateNormal(this.vectorPoints),(c=t).normal=this.normal,c.points=n,c.vectorPoints=this.vectorPoints,c.isSplit=!0,c.d=this.d,c;this.calculateNormal(n[0],n[1],n[2]);this.vectorPoints=n;this.calculateNormal(this.vectorPoints);var l={tag:"path",parent:s},c={normal:this.normal,points:n,vectorPoints:this.vectorPoints,index:i,tag:t,name:o||null,strokeThickness:u,opacity:f,fill:e,d:this.d,text:h||"",polygonElement:l};return 1!==arguments.length&&(c.polygonElement=l),c},n.prototype.calculateNormal=function(){for(var t,u,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(n.length>=3){var f=n[0],o=n[1],s=n[2],h=this.vector.vector3DMinus(f,o),c=this.vector.vector3DMinus(s,o),e=this.vector.vector3DMultiply(h,c),r=this.vector.getLength(e);r<this.epsilon&&(r=1);this.normal=this.vector.vector3D(e.x/r,e.y/r,e.z/r);this.d=-(this.normal.x*f.x+this.normal.y*f.y+this.normal.z*f.z);n[3]&&(n[3].normal=this.normal,n[3].d=this.d)}else for(t=n[0],this.calculateNormal(t[0],t[1],t[2],n[1]),u=3;u<t.length&&this.test();u++)this.calculateNormal(t[u],t[0],t[u/2])},n.prototype.test=function(){return!this.vector.isValid(this.normal)},n.prototype.getNormal=function(n,t){var r,i;if(null!=t)for(r=this.vector.getNormal(this.matrixObj.getMatrixVectorMultiple(n,t[0]),vl.getMatrixVectorMultiple(n,t[1]),this.matrixObj.getMatrixVectorMultiple(n,t[2])),i=3;i<t.length&&!this.vector.isValid(r)&&t[i/2];i++){var u=vl.getMatrixVectorMultiple(n,t[i]),f=vl.getMatrixVectorMultiple(n,t[0]),e=vl.getMatrixVectorMultiple(n,t[i/2]);r=this.vector.getNormal(u,f,e)}return r},n.prototype.createTextElement=function(n,t,i,r){var u=[],f=n.x,e=n.y,o=t.width,s=t.height;return u[0]=this.vector.vector3D(f,e,n.z),u[1]=this.vector.vector3D(f+o,e+s+r,n.z),u[2]=this.vector.vector3D(f+o+i,e+s+r,n.z),this.text3D(t,u)},n.prototype.createPolyline=function(n,t){if(2===n.length){var i=n[1];n.push({x:i.x,y:i.y,z:i.z})}return this.polyLine3D(t,n)},n.prototype.polyLine3D=function(n,t){var i=this.polygon3D(t);return i.element=n,i},n.prototype.text3D=function(n,t){var i=this.polygon3D(t);return i.element=n,i},n.prototype.drawPolyLine=function(n,t){var u=ei.transform,i=t.svg3DRenderer.getStringBuilder(),e=t.transform3D.toScreen(n.vectorPoints[0],u),r,f;i.append("M "+e.x+" "+e.y+" ");r=t.transform3D.toScreen(n.vectorPoints[1],u);i.append("L "+r.x+" "+r.y+" ");i.append("M "+r.x+" "+r.y+" ");f=t.transform3D.toScreen(n.vectorPoints[2],u);i.append("L "+f.x+" "+f.y+" ");var s=i.toString(),h={id:n.element.id,"stroke-dasharray":n.element.dashArray,"stroke-width":n.element.width,stroke:n.element.stroke,d:s},c=t.renderer.drawPath(h);o(!1,t.groupElement,c,t.redraw,!0,"x","y",null,s)},n.prototype.drawText=function(n,t){var r=n.element,h=ei.transform,f,o,s,e;if(null!=h){var u=t.transform3D.toScreen(n.vectorPoints[0],h),c=u.x,l=u.y;if("text"===r.tag)f={id:r.id,x:c,y:l,fill:r.font.color||r.fill,"font-size":r.font.size,"font-family":r.font.fontFamily||t.themeStyle.datalabelFont.fontFamily,"font-style":r.font.fontStyle,"font-weight":r.font.fontWeight,opacity:r.font.opacity,"text-anchor":r.textAnchor,cursor:"default",transform:r.angle?"rotate("+r.angle+","+c+","+l+")":""},o=t.svg3DRenderer.drawText(f,r.label.text,n.element.font,t),(r.id.indexOf("text")>-1&&o.setAttribute("aria-hidden","true"),t.groupElement.append(o),t.previousID&&t.isTouch)&&(s=document.getElementById(t.previousID),e=document.getElementById(f.id),s&&e&&e.parentNode.insertBefore(e,s.nextSibling)),t.previousID=f.id;else{var a=r.series,w=r.point.argsData.text,v=i.measureText(w,r.point.argsData.font,t.themeStyle.datalabelFont),b=v.width+10+10,y=v.height+10+10,p={x:u.x,y:u.y},k=p.x-0,d=p.y-5-y/10+5,g=a.index;this.dataLabelSymbol(g,a,r,k,d,b,y,t)}}},n.prototype.dataLabelSymbol=function(n,t,i,r,u,f,e,o){var w="M "+(r+-f/2)+" "+(u+-e/2)+" L "+(r+f/2)+" "+(u+-e/2)+" L "+(r+f/2)+" "+(u+e/2)+" L "+(r+-f/2)+" "+(u+e/2)+" L "+(r+-f/2)+" "+(u+-e/2)+" z",y="",h,s,c,l,p,v,a;t.dataLabel.enableRotation&&(h=void 0,s=h=t.dataLabel.angle,0===s?(c=function(n){return n*(180/Math.PI)}(i.point.symbolLocation.angle),h="Outside"===t.dataLabel.position?0:c>=90&&c<=260?c+180:c):h=s>360?s-360:s<-360?s+360:s,y="rotate("+h+","+r+","+u+")");l={id:o.element.id+"-svg-data-label-series-"+n+"-shape-"+i.pointIndex,fill:i.point.argsData.color,"stroke-width":i.point.argsData.border.width,stroke:i.point.argsData.border.color,"stroke-dasharray":i.point.argsData.border.dashArray,opacity:1,visibility:"",transform:y,d:w};p=o.renderer.drawPath(l);(o.groupElement.append(p),o.previousID&&o.isTouch)&&(v=document.getElementById(o.previousID),a=document.getElementById(l.id),v&&a&&a.parentNode.insertBefore(a,v.nextSibling));o.previousID=l.id},n.prototype.draw=function(n,t){var f,e,v,s,h,y,c;if(!(null==n.vectorPoints||n.vectorPoints.length<=0)){var l=ei.transform,a=t.svg3DRenderer.getStringBuilder(),i=n.fill;if(t.svg3DRenderer.checkColorFormat(i)||(i=vi(i)),f={StartPoint:null},null!=l)for(f.StartPoint=t.transform3D.toScreen(n.vectorPoints[0],l),a.append("M "+f.StartPoint.x+" "+f.StartPoint.y+" "),e=0;e<n.vectorPoints.length;e++)v=t.transform3D.toScreen(n.vectorPoints[e],l),a.append("L "+v.x+" "+v.y+" ");var p=a.toString(),r="Light",u=2*(Math.abs(this.vector.vector3DAdd(n.normal,this.vector.vector3D(0,0,1)))-1),w=2*(Math.abs(this.vector.vector3DAdd(n.normal,this.vector.vector3D(0,1,0)))-1),b=2*(Math.abs(this.vector.vector3DAdd(n.normal,this.vector.vector3D(1,0,0)))-1);!n.name||n.name.indexOf("-wall-brush")>-1||(u===b?(r="ZLight",i=this.applyZLight(i,t)):w===u||0!==u&&w<u?(r="XLight",i=this.applyXLight(i,t)):u<0?(r="ZLight",i=this.applyZLight(i,t)):r="Light");s={id:t.element.id+"-svg-"+n.name,name:r,fill:i,stroke:"","stroke-width":n.strokeThickness,opacity:n.opacity,d:p};h=t.renderer.drawPath(s);(n.text&&(h.setAttribute("aria-label",n.text),h.setAttribute("role","img")),o(!1,n.polygonElement.parent,h,t.redraw,!0,"x","y",null,p),t.previousID&&t.isTouch)&&(y=document.getElementById(t.previousID),c=document.getElementById(s.id),y&&c&&c.parentNode.insertBefore(c,y.nextSibling));t.previousID=s.id}},n.prototype.drawTemplate=function(n,t){var f=n.element,r=ei.transform,i,u;null!=r&&(i=f.label,u=t.transform3D.toScreen(n.vectorPoints[0],r),t.circularChartDataLabel3DModule.createDataLabelTemplate(i.series.dataLabelElement,i.series,i.series.dataLabel,i.series.points[i.pointIndex],i.series.points[i.pointIndex].argsData,i.pointIndex,!1,u,t))},n.prototype.applyXLight=function(n,t){var i=t.svg3DRenderer.hexToValue(n);return i.red=parseInt((.7*i.red).toString(),10),i.green=parseInt((.7*i.green).toString(),10),i.blue=parseInt((.7*i.blue).toString(),10),t.svg3DRenderer.hexColor(i)},n.prototype.applyZLight=function(n,t){var i=t.svg3DRenderer.hexToValue(n);return i.red=parseInt((.9*i.red).toString(),10),i.green=parseInt((.9*i.green).toString(),10),i.blue=parseInt((.9*i.blue).toString(),10),t.svg3DRenderer.hexColor(i)},n}(),cf=new ah(0,0,0),vl=new al,brt=new prt,lo=new wrt,krt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dt=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},drt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return krt(i,n),dt([t.Property(!0)],i.prototype,"visible",void 0),dt([t.Property(null)],i.prototype,"height",void 0),dt([t.Property(null)],i.prototype,"width",void 0),dt([t.Complex({x:0,y:0},lf)],i.prototype,"location",void 0),dt([t.Property("Auto")],i.prototype,"position",void 0),dt([t.Property(8)],i.prototype,"padding",void 0),dt([t.Property(null)],i.prototype,"itemPadding",void 0),dt([t.Property("Center")],i.prototype,"alignment",void 0),dt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},oi)],i.prototype,"textStyle",void 0),dt([t.Property(10)],i.prototype,"shapeHeight",void 0),dt([t.Property(10)],i.prototype,"shapeWidth",void 0),dt([t.Complex({},yt)],i.prototype,"border",void 0),dt([t.Complex({left:0,right:0,top:0,bottom:0},lr)],i.prototype,"margin",void 0),dt([t.Complex({left:0,right:0,top:0,bottom:0},vs)],i.prototype,"containerPadding",void 0),dt([t.Property(8)],i.prototype,"shapePadding",void 0),dt([t.Property("transparent")],i.prototype,"background",void 0),dt([t.Property(1)],i.prototype,"opacity",void 0),dt([t.Property(!0)],i.prototype,"toggleVisibility",void 0),dt([t.Property(!1)],i.prototype,"enableHighlight",void 0),dt([t.Property(null)],i.prototype,"description",void 0),dt([t.Property(3)],i.prototype,"tabIndex",void 0),dt([t.Property(null)],i.prototype,"title",void 0),dt([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},oi)],i.prototype,"titleStyle",void 0),dt([t.Property("Top")],i.prototype,"titlePosition",void 0),dt([t.Property("Normal")],i.prototype,"textWrap",void 0),dt([t.Property("Ellipsis")],i.prototype,"textOverflow",void 0),dt([t.Property(100)],i.prototype,"maximumTitleWidth",void 0),dt([t.Property(null)],i.prototype,"maximumLabelWidth",void 0),dt([t.Property(!0)],i.prototype,"enablePages",void 0),dt([t.Property(!1)],i.prototype,"isInversed",void 0),dt([t.Property(!1)],i.prototype,"reverse",void 0),i}(t.ChildProperty),tyt=function(n){function u(t){var r=n.call(this,t)||this;return r.library=r,r.titleRect=new i.Rect(0,t.margin.top,0,0),r.addEventListener(),r}return krt(u,n),u.prototype.addEventListener=function(){this.chart.isDestroyed||(this.chart.on(t.Browser.touchMoveEvent,this.mouseMove,this),this.chart.on(t.Browser.touchEndEvent,this.mouseEnd,this),this.chart.on("click",this.click,this))},u.prototype.removeEventListener=function(){this.chart.isDestroyed||(this.chart.off(t.Browser.touchMoveEvent,this.mouseMove),this.chart.off("click",this.click),this.chart.off(t.Browser.touchEndEvent,this.mouseEnd))},u.prototype.mouseMove=function(n){var r;if(this.chart.legendSettings.visible&&!this.chart.isTouch&&(this.move(n),this.chart.circularChartHighlight3DModule&&("None"!==this.chart.highlightMode||this.chart.legendSettings.enableHighlight)))for(var u=[this.legendID+"_text_",this.legendID+"_shape_marker_",this.legendID+"_shape_",this.legendID+"_g_"],f=n.target.id,t=0,i=u;t<i.length;t++)if(r=i[t],f.indexOf(r)>-1){this.chart.circularChartSelection3DModule?this.chart.circularChartSelection3DModule.legendSelection(this.chart,n.target,n.type):this.chart.circularChartHighlight3DModule&&this.chart.circularChartHighlight3DModule.legendSelection(this.chart,n.target,n.type);break}},u.prototype.mouseEnd=function(n){this.chart.legendSettings.visible&&this.chart.isTouch&&this.move(n)},u.prototype.getLegendOptions=function(n,i){var u,f,e,r;for(this.legendCollections=[],this.isRtlEnable=n.enableRtl,this.isReverse=!this.isRtlEnable&&n.legendSettings.reverse,u=0;u<1;u++){for(f=0,e=i[u].points;f<e.length;f++)r=e[f],t.isNullOrUndefined(r.x)||t.isNullOrUndefined(r.y)||this.legendCollections.push(new br(r.x.toString(),r.color,i[u].legendShape,r.visible,"Pie",i[0].legendImageUrl,null,null,r.index,i[u].index));this.isReverse&&this.legendCollections.reverse()}},u.prototype.getLegendBounds=function(n,t,r){var f,k,d,it,v,b,ft;this.calculateLegendTitle(r,t);this.isTitle=!!r.title;k=0;d=0;this.chartRowCount=1;this.rowHeights=[];this.columnHeights=[];this.pageHeights=[];var u=r.padding,g=r.titlePosition,p=0,et=this.arrowWidth,w=r.enablePages?0:this.arrowHeight;this.isVertical?k=r.width?0:n.width/20:d=r.height?0:n.height/20;t.width+=k;t.height+=d;var y,l,ot=r.shapePadding,h=r.maximumLabelWidth?r.maximumLabelWidth:0,st=r.shapeWidth,e=0,c=0,o=0,nt=[],rt=[],tt=0,ut=0,s=0,a=0;for(this.maxItemHeight=Math.max(i.measureText("MeasureText",r.textStyle,this.chart.themeStyle.legendLabelFont).height,r.shapeHeight),it=!1,v=0;v<this.legendCollections.length;v++)(l={fill:(f=this.legendCollections[v]).fill,text:f.text,shape:f.shape,name:"legendRender",cancel:!1},this.chart.trigger("legendRender",l),f.render=!l.cancel,f.text=l.text.indexOf("&")>-1?this.convertHtmlEntities(l.text):l.text,f.fill=l.fill,f.shape=l.shape,f.textSize=i.measureText(f.text,r.textStyle,this.chart.themeStyle.legendLabelFont),f.render&&""!==f.text)&&((it=!0,a=st+ot+(r.maximumLabelWidth?r.maximumLabelWidth:f.textSize.width)+(this.isVertical||0===v?u:this.itemPadding),this.getLegendHeight(f,r,t,e,this.maxItemHeight,u),this.isVertical)?((s+=f.textSize.height+(0===v?u:this.itemPadding))+this.itemPadding+w/this.pageButtonSize>t.height&&(e+=h,tt=this.getPageWidth(rt),this.totalPages=Math.max(o,this.totalPages||1),e-tt+a>t.width?(rt.push(e-tt),ut=o=this.rowHeights.length):o=ut,nt.push(h),h=0,s=f.textSize.height+u,c++),this.columnHeights[c]=(this.columnHeights[c]?this.columnHeights[c]:0)+f.textSize.height+(0===v?u:this.itemPadding),h=Math.max(a,h),this.rowHeights[o]=Math.max(this.rowHeights[o]?this.rowHeights[o]:0,f.textSize.height),o++):(r.enablePages||(p=this.isTitle&&"Top"!==g?this.legendTitleSize.width+this.fivePixel:0,p+=et),e+=a,t.width<u+e+p&&(h=Math.max(h,e+u+p-a),0===o&&a!==e&&(o=1),e=a,o++,c=0),b=o?o-1:o,this.rowHeights[b]=Math.max(this.rowHeights[b]?this.rowHeights[b]:0,f.textSize.height),this.columnHeights[c]=(this.columnHeights[c]?this.columnHeights[c]:0)+f.textSize.height+u,c++));y="Top"===g?this.legendTitleSize.height:0;this.isVertical?(e+=h,this.isPaging=t.width<e+u,s=Math.max.apply(null,this.columnHeights)+u+w+y,s=Math.max(s,(this.totalPages||1)*(this.maxItemHeight+u)+u+w),this.isPaging=this.isPaging&&this.totalPages>1,nt.push(h)):(this.totalPages=o,s=Math.max.apply(null,this.columnHeights)+u+w+y,this.isPaging=t.height<s,s=!r.enablePages&&this.isPaging?this.maxItemHeight+u+u+y:s,s=Math.max(s,this.maxItemHeight+u+u+y),this.isPaging||(e+=this.isTitle&&"Top"!==g?this.fivePixel+this.legendTitleSize.width+this.fivePixel:0));this.maxColumns=0;ft=this.isVertical?this.getMaxColumn(nt,t.width,u,e+u):Math.max(e+u,h);it?this.setBounds(ft,s,r,t):this.setBounds(0,0,r,t)},u.prototype.getPageWidth=function(n){for(var i=0,t=0;t<n.length;t++)i+=n[t];return i},u.prototype.getLegendHeight=function(n,t,i,r,u,f){var e=n.textSize.width,o=t.shapePadding+2*f+t.shapeWidth;switch(t.textWrap){case"Wrap":case"AnyWhere":e>t.maximumLabelWidth||e+r>i.width?n.textCollection=ur(n.text,t.maximumLabelWidth?Math.min(t.maximumLabelWidth,i.width-o):i.width-o,t.textStyle,this.chart.enableRtl,null,null,this.chart.themeStyle.legendLabelFont):n.textCollection.push(n.text);n.textSize.height=u*n.textCollection.length}},u.prototype.convertHtmlEntities=function(n){var t=n.replace("&amp;","&").replace("&lt;","<").replace("&gt;",">").replace("&quot;",'"').replace("&nbsp;"," ").replace("&cent;","¢").replace("&pound;","£").replace("&yen;","¥").replace("&euro;","€").replace("&copy;","©").replace("&reg;","®");return t.replace("&#38;","&").replace("&#60;","<").replace("&#62;",">").replace("&#34;",'"').replace("&#160;"," ").replace("&#162;","¢").replace("&#163;","£").replace("&#165;","¥").replace("&#8364;","€").replace("&#169;","©").replace("&#174;","®")},u.prototype.getMaxColumn=function(n,t,i,r){var f=i,u;for(this.maxColumnWidth=Math.max.apply(null,n),u=0;u<n.length;u++)if(f+=this.maxColumnWidth,this.maxColumns++,f+i>t){f-=this.maxColumnWidth;this.maxColumns--;break}this.isPaging=f<r&&this.totalPages>1;f===i&&(f=t);this.maxColumns=Math.max(1,this.maxColumns);this.maxWidth=f;var s=this.maxColumnWidth+i,e=0,o=this.columnHeights.length;if(this.isPaging&&this.isVertical){for(u=1;u<o;u++)(s+=this.maxColumnWidth+i)>t&&(this.pageHeights.push(e!==u-1?Math.max.apply(null,this.columnHeights.slice(e,u-1)):this.columnHeights[e]),s=this.maxColumnWidth+i,e=u);this.pageHeights.push(e!==o-1?Math.max.apply(null,this.columnHeights.slice(e,o-1)):this.columnHeights[e]);this.totalPages=this.pageHeights.length}return f},u.prototype.getAvailWidth=function(n,t){if(this.isVertical)t=this.maxWidth;else if(!this.isVertical&&this.isPaging&&!this.legend.enablePages)return t-n-this.fivePixel;return t-(2*this.legend.padding+this.legend.shapeWidth+this.legend.shapePadding)},u.prototype.getRenderPoint=function(n,t,i,r,u,f,e){var s=this.legend.padding,a=r.location.y+this.maxItemHeight/4+(r.textCollection.length>0?(r.textCollection.length-1)*this.maxItemHeight:0),h,c,l,o;this.isVertical?f===e||a+n.textSize.height+s>u.y+u.height?(n.location.x=r.location.x+(f===e?0:this.isRtlEnable?-this.maxColumnWidth:this.maxColumnWidth),n.location.y=t.y,h=this.legend.shapeWidth/2+s,this.pageXCollections.push(n.location.x+(this.isRtlEnable?h:-h))):(n.location.x=r.location.x,n.location.y=r.location.y+r.textSize.height+this.itemPadding):(c=i+(this.legend.maximumLabelWidth?this.legend.maximumLabelWidth:r.textSize.width),l=r.location.x+(this.isRtlEnable?-c:c),this.isWithinBounds(l,(this.legend.maximumLabelWidth?this.legend.maximumLabelWidth:n.textSize.width)+i-this.itemPadding,u,this.legend.shapeWidth/2)?(f!==e&&this.chartRowCount++,n.location.y=f===e?r.location.y:r.location.y+this.rowHeights[this.chartRowCount-2]+s,n.location.x=t.x):(n.location.y=r.location.y,n.location.x=f===e?r.location.x:l));o=this.getAvailWidth(n.location.x,this.legendBounds.width);o=this.legend.maximumLabelWidth?Math.min(this.legend.maximumLabelWidth,o):o;"Ellipsis"===this.legend.textOverflow&&"Normal"===this.legend.textWrap&&(n.text=wi(+o.toFixed(4),n.text,this.legend.textStyle,this.chart.enableRtl,this.chart.themeStyle.legendLabelFont))},u.prototype.isWithinBounds=function(n,t,i,r){return this.isRtlEnable?n-t<i.x-r:n+t>i.x+i.width+r},u.prototype.getSmartLegendLocation=function(n,t,i){var r;switch(this.position){case"Left":r=(n.x-t.width-i.left)/2;t.x=n.x-t.width<i.left?t.x:n.x-t.width-r;break;case"Right":r=(this.chart.availableSize.width-i.right-(n.x+n.width+t.width))/2;t.x=n.x+n.width+t.width>this.chart.availableSize.width-i.right?t.x:n.x+n.width+r;break;case"Top":this.getTitleRect(this.chart);r=(n.y-t.height-(this.titleRect.y+this.titleRect.height))/2;t.y=n.y-t.height<i.top?t.y:n.y-t.height-r;break;case"Bottom":r=(this.chart.availableSize.height-i.bottom-(n.y+n.height+t.height))/2;t.y=n.y+n.height+t.height>this.chart.availableSize.height-i.bottom?t.y:n.y+n.height+r}},u.prototype.getTitleRect=function(n){if(!n.title)return null;var t=i.measureText(n.title,n.titleStyle,this.chart.themeStyle.legendTitleFont);this.titleRect=new i.Rect(n.availableSize.width/2-t.width/2,n.margin.top,t.width,t.height)},u.prototype.legendByIndex=function(n,t){for(var u,i=0,r=t;i<r.length;i++)if(u=r[i],u.pointIndex===n)return u;return null},u.prototype.click=function(n){var f=n.target.id.indexOf("_chart_legend_g_")>-1?n.target.firstChild.id:n.target.id,t=this.chart,a=[this.legendID+"_text_",this.legendID+"_shape_",this.legendID+"_shape_marker_"],e,o,s,r,u;for(this.chart.animateSeries=!1,e=0,o=a;e<o.length;e++)if(s=o[e],f.indexOf(s)>-1)if(r=parseInt(f.split(s)[1],10),this.chart.legendSettings.toggleVisibility&&!isNaN(r)){var h=this.chart.visibleSeries[0],i=h.points[r],c=this.legendByIndex(r,this.legendCollections),l={legendText:c.text,legendShape:c.shape,chart:t,series:h,point:i,name:ar,cancel:!1};if(this.chart.trigger(ar,l),!l.cancel){if(i.visible=!i.visible,c.visible=i.visible,h.sumOfPoints+=i.visible?i.y:-i.y,t.redraw=t.enableAnimation,this.sliceVisibility(r,i.visible),t.removeSeriesElements(t),t.removeSvg(),u=document.getElementById(this.chart.element.id+"-svg-chart-3d"),u)for(;u.childNodes.length>0;)u.removeChild(u.firstChild);this.chart.circular3DPolygon=[];this.chart.visibleSeries[0].segments=[];this.chart.animateSeries=!1;this.chart.calculateBounds();this.chart.renderElements();t.circularChartHighlight3DModule&&("None"!==t.highlightMode||t.legendSettings.enableHighlight)&&t.circularChartHighlight3DModule.redrawSelection(t)}}else this.chart.circularChartSelection3DModule&&!isNaN(r)?this.chart.circularChartSelection3DModule.legendSelection(this.chart,n.target,n.type):this.chart.circularChartHighlight3DModule&&!isNaN(r)&&this.chart.circularChartHighlight3DModule.legendSelection(this.chart,n.target,n.type);f.indexOf(this.legendID+"_pageup")>-1?this.changePage(n,!0):f.indexOf(this.legendID+"_pagedown")>-1&&this.changePage(n,!1);t.redraw=!1},u.prototype.sliceVisibility=function(n,t){var i=this.chart.element.id+"_Series_0_Point_";this.chart.visibleSeries[0].dataLabel.visible&&(i=this.chart.element.id+"_datalabel_Series_0_",this.sliceAnimate(r(i+"g_"+n),t))},u.prototype.sliceAnimate=function(n,i){if(!n)return null;new t.Animation({}).animate(n,{duration:300,delay:0,name:i?"FadeIn":"FadeOut",end:function(n){n.element.style.visibility=i?"visible":"hidden"}})},u.prototype.getModuleName=function(){return"CircularChartLegend3D"},u.prototype.destroy=function(){this.removeEventListener()},u}(fs),grt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ru=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},fp=function(){return function(n,t,i){void 0===i&&(i=0);this.point=n;this.series=t;this.index=i}}(),nut=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return grt(i,n),ru([t.Property(!1)],i.prototype,"enable",void 0),ru([t.Property(!0)],i.prototype,"enableMarker",void 0),ru([t.Property(null)],i.prototype,"fill",void 0),ru([t.Property(null)],i.prototype,"header",void 0),ru([t.Property(null)],i.prototype,"opacity",void 0),ru([t.Complex({fontFamily:null,size:"12px",fontStyle:"Normal",fontWeight:null,color:null},oi)],i.prototype,"textStyle",void 0),ru([t.Property(null)],i.prototype,"format",void 0),ru([t.Property(null)],i.prototype,"template",void 0),ru([t.Property(!1)],i.prototype,"enableAnimation",void 0),ru([t.Property(300)],i.prototype,"duration",void 0),ru([t.Property(700)],i.prototype,"fadeOutDuration",void 0),ru([t.Property(!1)],i.prototype,"enableTextWrap",void 0),ru([t.Complex({color:null,width:null},yt)],i.prototype,"border",void 0),ru([t.Complex({x:null,y:null},lf)],i.prototype,"location",void 0),i}(t.ChildProperty),iyt=function(n){function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.currentPoints=[],t.previousPoints=[],t.tooltipRendered=!1,t}return grt(r,n),r.prototype.mouseLeaveHandler=function(){this.removeTooltip(this.control.tooltip.fadeOutDuration)},r.prototype.mouseUpHandler=function(n,t){this.control=t;this.element=t.element;var i=Math.abs(t.mouseX-t.cachedX)<10&&Math.abs(t.mouseY-t.cachedY)<10;this.control.tooltip.enable&&!t.rotateActivate&&i&&ht(this.control.mouseX,this.control.mouseY,this.control.initialClipRect)&&this.control.isTouch?(this.tooltip(n),this.removeTooltip(2e3),this.tooltipRendered=!0):this.control.isTouch&&this.removeTooltip(0)},r.prototype.mouseMoveHandler=function(n,t){this.control=t;this.element=t.element;this.tooltipRendered||(this.control.tooltip.enable&&!t.rotateActivate&&ht(this.control.mouseX,this.control.mouseY,this.control.initialClipRect)?this.tooltip(n):this.removeTooltip(0));this.tooltipRendered=!1},r.prototype.tooltip=function(n){this.renderSeriesTooltip(this.control,this.getPieData(n,this.control))},r.prototype.getElement=function(n){return document.getElementById(n)},r.prototype.getTooltipElement=function(n){this.header=null===this.control.tooltip.header?"${series.name}":this.control.tooltip.header;this.formattedText=[];var t=document.getElementById(this.control.element.id+"_tooltip");return n||t?null:this.createElement()},r.prototype.createElement=function(){var n=document.createElement("div");return n.id=this.element.id+"_tooltip",n.className="ejSVGTooltip",n.style.pointerEvents="none",n.style.position="absolute",n.style.zIndex="1",n},r.prototype.renderSeriesTooltip=function(n,t){var i=this.getElement(this.element.id+"_tooltip_svg"),r=i&&parseInt(i.getAttribute("opacity"),10)>0,u=this.getTooltipElement(r),f=!r;this.template=n.tooltip.template;this.currentPoints=[];t.point?this.pushData(t,u)&&this.triggerTooltipRender(t,f,this.getTooltipText(t,n.tooltip),this.findHeader(t)):!t.point&&this.isRemove&&(this.removeTooltip(this.control.tooltip.fadeOutDuration),this.isRemove=!1)},r.prototype.removeTooltip=function(n){var t=this,i=this.getElement(this.element.id+"_tooltip");this.stopAnimation();i&&this.previousPoints.length>0&&(this.tooltipInterval=+setTimeout(function(){t.svgTooltip&&t.svgTooltip.fadeOut()},n))},r.prototype.stopAnimation=function(){de(this.tooltipInterval)},r.prototype.pushData=function(n,t){return!!n.series.enableTooltip&&(this.currentPoints.push(n),this.stopAnimation(),t&&!document.getElementById(t.id)&&document.getElementById(this.element.id+"_Secondary_Element").appendChild(t),!0)},r.prototype.triggerTooltipRender=function(n,i,r,u){var f=this,e=this.control.tooltip,s={cancel:!1,text:r,point:n.point,textStyle:e.textStyle,series:n.series,headerText:u,template:this.template,data:{pointX:n.point.x,pointY:n.point.y,seriesIndex:n.series.index,pointIndex:n.point.index,pointText:n.point.text,seriesName:n.series.name}},o=function(r){if(r.cancel)f.removeHighlight(),t.remove(f.getElement(f.element.id+"_tooltip"));else{f.formattedText=f.formattedText.concat(r.text);f.text=f.formattedText;f.headerText=r.headerText;var u={x:null!==e.location.x?e.location.x:f.control.mouseX,y:null!==e.location.y?e.location.y:f.control.mouseY-10};f.createTooltip(f.control,i,u,n.series.clipRect,n.point,0,f.control.initialClipRect,null,n.point,f.template?r.template:"")}f.isRemove=!0};o.bind(this,n);this.control.trigger(gu,s,o)},r.prototype.getPieData=function(n,t){var r,u=t.visibleSeries[0],i=n.target,e,f;return i.id.indexOf("point")>-1&&i.id.indexOf("series")>-1?(e=parseInt(i.id.split("point-")[1],10),r=u.points[e]):i.id.indexOf("-data-label-text")>-1&&"Inside"===u.dataLabel.position?(f=parseInt(i.id.split("data-label-text-")[1],10),r=u.points[f]):i.id.indexOf("data-label-series")>-1&&"Inside"===u.dataLabel.position&&(f=parseInt(i.id.split("data-label-series-0-shape-")[1],10),r=u.points[f]),r?{point:r,series:u,index:r.index}:new fp(null,null)},r.prototype.getTooltipText=function(n,t){var r=n.series,i=t.format?t.format:this.control.theme.indexOf("Tailwind3")>-1?"${point.x} : ${point.y}":"${point.x} : <b>${point.y}<\/b>";return i=this.control.useGroupingSeparator?i.replace("${point.y}","${point.separatorY}"):i,this.parseTemplate(n.point,r,i)},r.prototype.findHeader=function(n){return""===this.header?"":(this.header=this.parseTemplate(n.point,n.series,this.header),""!==this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()?this.header:"")},r.prototype.parseTemplate=function(n,t,i){for(var u,o,f,r,s,h=RegExp,e=0,c=Object.keys(n);e<c.length;e++)r=new h("${point."+(f=c[e])+"}","gm"),i=i.replace(r.source,n[f]);for(u=0,o=Object.keys(Object.getPrototypeOf(t));u<o.length;u++)r=new h("${series."+(f=o[u])+"}","gm"),s=t[f],i=i.replace(r.source,s);return i},r.prototype.createTooltip=function(n,t,r,u,f,e,o,s,h,c){void 0===s&&(s=null);void 0===h&&(h=null);var l=n.circularChartTooltip3DModule;l&&null!==r?(t?(this.svgTooltip=new i.Tooltip({opacity:n.tooltip.opacity?n.tooltip.opacity:"Material3"===this.control.theme||"Material3Dark"===this.control.theme||this.control.theme.indexOf("Bootstrap5")>-1?1:.75,header:this.headerText,content:this.text,fill:n.tooltip.fill,border:n.tooltip.border,enableAnimation:n.tooltip.enableAnimation,location:r,shared:!1,crosshair:!1,shapes:n.tooltip.enableMarker?["Circle"]:[],clipBounds:u,areaBounds:o,palette:this.findPalette(),template:c||this.template,data:h,theme:n.theme,offset:e,textStyle:n.tooltip.textStyle,isNegative:!1,inverted:!1,arrowPadding:0,availableSize:n.availableSize,duration:this.control.tooltip.duration,isCanvas:!1,isFixed:null!==this.control.tooltip.location.x||null!==this.control.tooltip.location.y,isTextWrap:n.tooltip.enableTextWrap,blazorTemplate:{name:"Template",parent:this.control.tooltip},controlInstance:this.control,enableRTL:n.enableRtl,controlName:"Chart",allowHighlight:!1,tooltipRender:function(){l.removeHighlight();l.highlightPoints();l.updatePreviousPoint(s)},animationComplete:function(n){n.tooltip.fadeOuted&&l.fadeOut()}}),this.svgTooltip.appendTo(this.getElement(this.element.id+"_tooltip"))):this.svgTooltip&&(this.svgTooltip.location=r,this.svgTooltip.content=this.text,this.svgTooltip.header=this.headerText,this.svgTooltip.offset=e,this.svgTooltip.palette=this.findPalette(),this.svgTooltip.shapes=n.tooltip.enableMarker?["Circle"]:[],this.svgTooltip.data=h,this.svgTooltip.template=this.template,this.svgTooltip.controlName="Chart",this.svgTooltip.crosshair=!1,this.svgTooltip.textStyle=n.tooltip.textStyle,this.svgTooltip.isNegative=!1,this.svgTooltip.clipBounds=u,this.svgTooltip.arrowPadding=0,this.svgTooltip.allowHighlight=!1,this.svgTooltip.dataBind()),this.control.isReact&&this.control.renderReactTemplates()):v(this.control.element.id+"_tooltip")},r.prototype.highlightPoints=function(){for(var n,t=0,i=this.currentPoints;t<i.length;t++)n=i[t],n.series.isRectSeries&&"Series"===n.series.category&&this.highlightPoint(n.series,n.point.index,!0)},r.prototype.removeHighlight=function(){for(var n,t=0,i=this.previousPoints.length;t<i;t++)(n=this.previousPoints[t]).series.isRectSeries&&n.series.visible&&this.highlightPoint(n.series,n.point.index,!1)},r.prototype.highlightPoint=function(n,t,i){var v=this,s,r,e,f,o,u,a;if(this.control.circularChartHighlight3DModule&&"None"===this.control.highlightMode||!this.control.circularChartHighlight3DModule){s=document.querySelectorAll('[id*="region-series-0-point-'+t+'"]');r=[];s.forEach(function(n){parseInt(n.id.split("point-")[1],10)===t&&r.push(n)});var h=document.getElementById(this.control.element.id+"-svg-data-label-text-"+t),c=document.getElementById(this.control.element.id+"-datalabel-series-0-connector-"+t),l=document.getElementById(this.control.element.id+"-svg-data-label-series-0-shape-"+t);if(h&&r.push(h),c&&r.push(c),l&&r.push(l),e=document.getElementById(this.element.id+"-svg-chart-3d").children,e)for(f=0,o=e;f<o.length;f++)u=o[f],u.parentElement.id===this.control.groupElement.id&&(a=!u.hasAttribute("class")||-1===u.getAttribute("class").indexOf("_selection_"),u.setAttribute("opacity",(i&&"transparent"!==this.control.highlightColor&&a?.2:n.opacity).toString()));r&&r.forEach(function(t){t.parentElement.id===v.control.groupElement.id&&t.setAttribute("opacity",n.opacity.toString())})}},r.prototype.fadeOut=function(){var n=this.getElement(this.element.id+"_tooltip_svg");n&&parseInt(n.getAttribute("opacity"),10)>0||(this.currentPoints=[],this.removeHighlight(),this.previousPoints=[],this.svgTooltip=null,this.control.trigger("animationComplete",{}))},r.prototype.updatePreviousPoint=function(n){n&&(this.currentPoints=this.currentPoints.concat(n));this.previousPoints=t.extend([],this.currentPoints,null,!0)},r.prototype.findPalette=function(){for(var r,t=[],n=0,i=this.currentPoints;n<i.length;n++)r=i[n],t.push(r.point.color);return t},r.prototype.getModuleName=function(){return"CircularChartTooltip3D"},r.prototype.destroy=function(){},r}(t.ChildProperty),ryt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),g=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},uyt=function(n){function u(t,i){var r=n.call(this,t,i)||this;return r.chartId=57724,r.explodeDistance=0,r.rotateActivate=!1,r.previousTargetId="",r.currentPointIndex=0,r.currentLegendIndex=0,r.isLegendClicked=!1,r.delayRedraw=!1,r}return ryt(u,n),Object.defineProperty(u.prototype,"type",{get:function(){return"Pie"},enumerable:!0,configurable:!0}),u.prototype.preRender=function(){if(this.allowServerDataBinding=!1,this.unWireEvents(),this.titleLocation={x:0,y:0,size:new i.Size(0,0)},this.subTitleLocation={x:0,y:0,size:new i.Size(0,0)},this.circularRadius=[],this.innerRadius=[],this.matrixObj=new al,this.bspTreeObj=new prt,this.polygon=new wrt,this.vector=new ah(null,null,null),this.graphics=new gvt,this.transform3D=new dvt,this.svg3DRenderer=new nyt,this.circular3DPolygon=[],this.explodeDistance=0,this.setCulture(),this.animateSeries=!0,""===this.element.id){var n=document.getElementsByClassName("e-circular3dchart").length;this.element.id="acc_chart_"+this.chartId+"_"+n}this.wireEvents();this.element.setAttribute("dir",this.enableRtl?"rtl":"");this.element.style.outline="none"},u.prototype.unWireEvents=function(){var n=t.Browser.isPointer,i=t.Browser.touchStartEvent,r=t.Browser.touchMoveEvent,u=t.Browser.touchEndEvent,f=n?"pointerleave":"mouseleave";t.EventHandler.remove(this.element,r,this.chartOnMouseMove);t.EventHandler.remove(this.element,u,this.chartMouseUp);t.EventHandler.remove(this.element,i,this.chartMouseDown);t.EventHandler.remove(this.element,"click",this.chartOnMouseClick);t.EventHandler.remove(this.element,f,this.chartMouseLeave);t.EventHandler.remove(this.element,"keydown",this.circular3DChartKeyDown);t.EventHandler.remove(this.element,"keyup",this.circular3DChartKeyUp);window.removeEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.chartResizeBound)},u.prototype.chartOnMouseClick=function(n){if(this.setMouseXY(n),this.circularChartLegend3DModule&&this.legendSettings.visible&&this.circularChartLegend3DModule.click(n),"None"!==this.selectionMode&&this.circularChartSelection3DModule&&this.circularChartSelection3DModule.calculateSelectedElements(this,n.target,n.type),this.visibleSeries[0].explode){var i=n.target.id,r=void 0,t=void 0;i.indexOf("-point-")>-1&&(r=i.split("-series-")[1].split("-point-"),t=parseInt(r[1],10),this.visibleSeries[0].explodeIndex===t||this.visibleSeries[0].points[t].isExplode?(this.visibleSeries[0].explodeIndex=null,this.visibleSeries[0].isExploded=!0,this.visibleSeries[0].points.forEach(function(n){n.isExplode=!1})):this.visibleSeries[0].explodeIndex=t,this.removeSeriesElements(this),this.visibleSeries[0].segments=[],this.circular3DPolygon=[],this.renderSeries(),this.processSelection(),this.delayRedraw=!0)}return this.trigger("circularChart3DMouseClick",{target:n.target.id,x:this.mouseX,y:this.mouseY}),this.pointClick&&this.triggerPointEvent(ps,n.target,n),this.removeNavigationStyle(),!1},u.prototype.triggerPointEvent=function(n,t,i){var r,f=i,u=this.visibleSeries[0],e;t.id.indexOf("point")>-1&&t.id.indexOf("series")>-1&&(e=parseInt(t.id.split("point-")[1],10),r=u.points[e]);r&&this.trigger(n,{series:u,point:r,seriesIndex:u.index,pointIndex:r.index,x:this.mouseX,y:this.mouseY,pageX:f.pageX,pageY:f.pageY})},u.prototype.chartOnMouseMove=function(n){var i,u,f,e;return r(this.element.id+"_svg")?((this.setMouseXY(n),this.trigger("circularChart3DMouseMove",{target:n.target.id,x:this.mouseX,y:this.mouseY}),this.rotateActivate)&&(i=this.previousCoords.x-this.mouseX,u=this.previousCoords.y-this.mouseY,(i||u)&&((this.tilt-=u,this.rotation+=i,this.isTouch)||(f=document.getElementById(this.groupElement.id),f.innerHTML="",f.remove()),e={width:this.availableSize.width,height:this.availableSize.height},this.graphics.view(this.svgObject,this,this.rotation,this.tilt,e,0,this.depth),o(!1,this.svgObject,this.groupElement,this.redraw),this.setSeriesTabIndex(),this.previousCoords.y=this.mouseY,this.previousCoords.x=this.mouseX,this.circularChartHighlight3DModule&&"None"!==this.highlightMode&&(this.circularChartHighlight3DModule.calculateSelectedElements(this,document.getElementById(this.element.id+"-border"),"mousemove"),this.circularChartHighlight3DModule.previousSelectedElement=[]),this.processSelection())),this.pointMove&&this.triggerPointEvent(ws,n.target,n),this.tooltip.enable&&this.circularChartTooltip3DModule&&this.circularChartTooltip3DModule.mouseMoveHandler(n,this),this.isTouch||this.titleTooltip(n,this.mouseX,this.mouseY),this.notify(t.Browser.touchMoveEvent,n),!1):!1},u.prototype.titleTooltip=function(n,t,i,u){var f=n.target.id,e=f===this.element.id+"-title"||f===this.element.id+"-sub-title"||f===this.element.id+"_chart_legend_title";n.target.textContent.indexOf("...")>-1&&e?uf(f===this.element.id+"-title"?this.title:f===this.element.id+"-sub-title"?this.subTitle:this.legendSettings.title,t,i,this.element.offsetWidth,this.element.id+"_EJ2_Title_Tooltip",r(this.element.id+"_Secondary_Element"),u):v(this.element.id+"_EJ2_Title_Tooltip")},u.prototype.setMouseXY=function(n){var i,u,o=r(this.element.id+"_svg"),f,t,e;o&&this.element&&(f=o.getBoundingClientRect(),t=this.element.getBoundingClientRect(),n.type.indexOf("touch")>-1?(this.isTouch=!0,e=n,u=e.changedTouches[0].clientY,i=e.changedTouches[0].clientX):(this.isTouch="touch"===n.pointerType||"2"===n.pointerType,i=n.clientX,u=n.clientY),this.mouseY=u-t.top-Math.max(f.top-t.top,0),this.mouseX=i-t.left-Math.max(f.left-t.left,0))},u.prototype.wireEvents=function(){if(this.element){var n=t.Browser.isPointer,i=t.Browser.touchStartEvent,r=t.Browser.touchEndEvent,u=t.Browser.touchMoveEvent,f=n?"pointerleave":"mouseleave";t.EventHandler.add(this.element,u,this.chartOnMouseMove,this);t.EventHandler.add(this.element,r,this.chartMouseUp,this);t.EventHandler.add(this.element,i,this.chartMouseDown,this);t.EventHandler.add(this.element,"click",this.chartOnMouseClick,this);t.EventHandler.add(this.element,f,this.chartMouseLeave,this);t.EventHandler.add(this.element,"keydown",this.circular3DChartKeyDown,this);t.EventHandler.add(this.element,"keyup",this.circular3DChartKeyUp,this);this.chartResizeBound=this.chartResize.bind(this);window.addEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.chartResizeBound);this.setStyle(this.element)}},u.prototype.chartMouseLeave=function(n){return this.setMouseXY(n),this.trigger("circularChart3DMouseLeave",{target:n.target.id,x:this.mouseX,y:this.mouseY}),this.tooltip.enable&&this.circularChartTooltip3DModule&&this.circularChartTooltip3DModule.mouseLeaveHandler(),this.notify(t.Browser.isPointer?"pointerleave":"mouseleave",n),this.rotateActivate=!1,!1},u.prototype.chartMouseUp=function(n){return this.setMouseXY(n),this.trigger("circularChart3DMouseUp",{target:n.target.id,x:this.mouseX,y:this.mouseY}),this.isTouch&&this.titleTooltip(n,this.mouseX,this.mouseY,this.isTouch),this.rotateActivate=!1,this.tooltip.enable&&this.circularChartTooltip3DModule&&this.circularChartTooltip3DModule.mouseUpHandler(n,this),this.notify(t.Browser.touchEndEvent,n),!1},u.prototype.chartMouseDown=function(n){this.setMouseXY(n);this.trigger("circularChart3DMouseDown",{target:n.target.id,x:this.mouseX,y:this.mouseY});this.cachedX=this.mouseX;this.cachedY=this.mouseY;var i=r(this.element.id+"_svg").getBoundingClientRect(),t=document.getElementById(this.element.id+"-svg-chart-3d").getBoundingClientRect(),u={x:t.left-i.left,y:t.top-i.top,width:t.width,height:t.height};return this.enableRotation&&ht(this.mouseX,this.mouseY,u)&&(this.rotateActivate=!0,this.previousCoords={x:this.mouseX,y:this.mouseY}),!1},u.prototype.setStyle=function(n){n.style.touchAction=this.enableRotation?"none":"element";n.style.msTouchAction="element";n.style.msContentZooming="none";n.style.msUserSelect="none";n.style.webkitUserSelect="none";n.style.position="relative";n.style.display="block";n.style.height=n.style.height||this.height&&-1===this.height.indexOf("%")?n.style.height:"inherit"},u.prototype.setCulture=function(){this.intl=new t.Internationalization},u.prototype.render=function(){var n=this,t;-1===this.element.className.indexOf("e-circular3dchart")&&this.element.classList.add("e-circular3dchart");this.element.setAttribute("role","region");this.element.setAttribute("tabindex","0");this.element.setAttribute("aria-label",this.title+". Syncfusion interactive chart.");this.element.setAttribute("class",this.element.getAttribute("class")+" e-circular3dchart-focused");t={chart:this,theme:this.theme,name:ne,cancel:!1};this.trigger(ne,t,function(){t.cancel||(n.setTheme(),n.calculateVisibleSeries(),n.processData(),n.renderComplete(),n.allowServerDataBinding=!0)})},u.prototype.setTheme=function(){this.themeStyle=function(n){var t;switch(n){case"HighContrastLight":case"HighContrast":t={chartTitle:"#ffffff",legendLabel:"#ffffff",background:"transparent",tooltipFill:"#ffffff",tooltipBoldLabel:"#000000",tooltipLightLabel:"#000000",tooltipHeaderLine:"#969696",tabColor:"#FFD939",chartTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#000000",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#969696",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"MaterialDark":case"FabricDark":case"BootstrapDark":t={chartTitle:"#ffffff",legendLabel:"#DADADA",background:"transparent",tooltipFill:"#F4F4F4",tooltipBoldLabel:"#282727",tooltipLightLabel:"#333232",tooltipHeaderLine:"#9A9A9A",tabColor:"MaterialDark"===n?"#00B0FF":"FabricDark"===n?"#0074CC":"#0070F0",chartTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"FabricDark"===n?"#DADADA":"#FFFFFF",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"FabricDark"===n?"#DADADA":"#FFFFFF",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#676767",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"MaterialDark"===n?"rgba(18, 18, 18, 1)":"FabricDark"===n?"#DADADA":"#1A1A1A",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.6)":"FabricDark"===n?"#A19F9D":"#676767",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"MaterialDark"===n?"rgba(255, 255, 255, 0.87)":"FabricDark"===n?"#DADADA":"#FFFFFF",fontFamily:"MaterialDark"===n?"Roboto":"FabricDark"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap4":t={chartTitle:"#212529",legendLabel:"#212529",background:"transparent",tooltipFill:"#020202",tooltipBoldLabel:"rgba(255,255,255)",tooltipLightLabel:"rgba(255,255,255, 0.9)",tooltipHeaderLine:"rgba(255,255,255, 0.2)",tabColor:"#007BFF",chartTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#666666",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#495057",fontFamily:"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#212529",fontFamily:"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Tailwind3":t={chartTitle:"#111827",legendLabel:"#6B7280",background:"transparent",tooltipFill:"#111827",tooltipBoldLabel:"#F9FAFB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#D1D5DB",tabColor:"#4F46E5",chartTitleFont:{color:"#111827",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#374151",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},legendLabelFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Inter",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#4B5563",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#6B7280",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"}};break;case"Tailwind3Dark":t={chartTitle:"#FFFFFF",legendLabel:"#9CA3AF",background:"transparent",tooltipFill:"#F9FAFB",tooltipBoldLabel:"#1F2937",tooltipLightLabel:"#1F2937",tooltipHeaderLine:"#374151",tabColor:"#22D3EE",chartTitleFont:{color:"#FFFFFF",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#E5E7EB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},legendLabelFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"500"},tooltipLabelFont:{color:"#1F2937",fontFamily:"Inter",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#9CA3AF",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"500"}};break;case"Tailwind":t={chartTitle:"#374151",legendLabel:"#374151",background:"transparent",tooltipFill:"#111827",tooltipBoldLabel:"#D1D5DB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#6B7280",tabColor:"#4F46E5",chartTitleFont:{color:"#374151",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F9FAFB",fontFamily:"Inter",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#6B7280",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#374151",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"TailwindDark":t={chartTitle:"#D1D5DB",legendLabel:"#D1D5DB",background:"transparent",tooltipFill:"#F9FAFB",tooltipBoldLabel:"#6B7280",tooltipLightLabel:"#1F2937",tooltipHeaderLine:"#9CA3AF",tabColor:"#22D3EE",chartTitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#1F2937",fontFamily:"Inter",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#9CA3AF",fontFamily:"Inter",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#D1D5DB",fontFamily:"Inter",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Bootstrap5":t={chartTitle:"#212529",legendLabel:"#212529",background:"transparent",tooltipFill:"#000000E5",tooltipBoldLabel:"#F9FAFB",tooltipLightLabel:"#FFFFFF",tooltipHeaderLine:"#FFFFFF",tabColor:"#0D6EFD",chartTitleFont:{color:"#212529",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#21252980",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"}};break;case"Bootstrap5Dark":t={chartTitle:"#DEE2E6",legendLabel:"#DEE2E6",background:"transparent",tooltipFill:"#E9ECEF",tooltipBoldLabel:"#212529",tooltipLightLabel:"#212529",tooltipHeaderLine:"#212529",tabColor:"#0D6EFD",chartTitleFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#212529",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#DEE2E6",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#DEE2E680",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"}};break;case"Fluent":t={chartTitle:"#201F1E",legendLabel:"#323130",background:"transparent",tooltipFill:"#FFFFFF",tooltipBoldLabel:"#323130",tooltipLightLabel:"#323130",tooltipHeaderLine:"#D2D0CE",tabColor:"#0078D4",chartTitleFont:{color:"#201F1E",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#201F1E",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#49454E",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#323130",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#3B3A39",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#323129",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"FluentDark":t={chartTitle:"#F3F2F1",legendLabel:"#D2D0CE",background:"transparent",tooltipFill:"#252423",tooltipBoldLabel:"#F3F2F1",tooltipLightLabel:"#F3F2F1",tooltipHeaderLine:"#3B3A39",tabColor:"#0078D4",chartTitleFont:{color:"#C8C6C4",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#D2D0CE",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#D2D0CE",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#F3F2F1",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Fluent2":t={chartTitle:"#242424",legendLabel:"#242424",background:"transparent",tooltipFill:"#FFFFFF",tooltipBoldLabel:"#242424",tooltipLightLabel:"#242424",tooltipHeaderLine:"#D2D0CE",tabColor:"#0078D4",chartTitleFont:{color:"#242424",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#242424",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#616161",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"}};break;case"Fluent2Dark":t={chartTitle:"#FFFFFF",legendLabel:"#FFFFFF",background:"transparent",tooltipFill:"#292929",tooltipBoldLabel:"#FFFFFF",tooltipLightLabel:"#FFFFFF",tooltipHeaderLine:"#3B3A39",tabColor:"#0078D4",chartTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#ADADAD",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"}};break;case"Fluent2HighContrast":t={chartTitle:"#FFFFFF",legendLabel:"#FFFFFF",background:"transparent",tooltipFill:"#000000",tooltipBoldLabel:"#FFFFFF",tooltipLightLabel:"#FFFFFF",tooltipHeaderLine:"#3B3A39",tabColor:"#0078D4",chartTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#FFFFFF",fontFamily:"Segoe UI",size:"14px",fontStyle:"Normal",fontWeight:"600"}};break;case"Material3":t={chartTitle:"#1C1B1F",legendLabel:"#49454E",background:"transparent",tooltipFill:"#313033",tooltipBoldLabel:"#F4EFF4",tooltipLightLabel:"#F4EFF4",tooltipHeaderLine:"#F4EFF4",tabColor:"#49454E",chartTitleFont:{color:"#1C1B1F",fontFamily:"Roboto",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#1C1B1F",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#49454E",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#F4EFF4",fontFamily:"Roboto",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#49454E",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#49454E",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;case"Material3Dark":t={chartTitle:"#E6E1E5",legendLabel:"#CAC4D0",background:"transparent",tooltipFill:"#E6E1E5",tooltipBoldLabel:"#313033",tooltipLightLabel:"#313033",tooltipHeaderLine:"#313033",tabColor:"#CAC4D0",chartTitleFont:{color:"#E6E1E5",fontFamily:"Roboto",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"#E6E1E5",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"#313033",fontFamily:"Roboto",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"#CAC4D0",fontFamily:"Roboto",size:"14px",fontStyle:"Normal",fontWeight:"400"}};break;default:t={chartTitle:"#424242",legendLabel:"#353535",background:"transparent",tooltipFill:"#000816",tooltipBoldLabel:"#ffffff",tooltipLightLabel:"#dbdbdb",tooltipHeaderLine:"#ffffff",tabColor:"Material"===n?"#ff4081":"Fabric"===n?"#0078D6":"#317AB9",chartTitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Fabric"===n?"#333333":"#212529",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"16px",fontStyle:"Normal",fontWeight:"600"},legendTitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Fabric"===n?"#333333":"#212529",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"600"},legendLabelFont:{color:"Material"===n?"rgba(97, 97, 97, 1)":"#666666",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"},tooltipLabelFont:{color:"Material"===n?"rgba(249, 250, 251, 1)":"Fabric"===n?"#333333":"#F9FAFB",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal"},datalabelFont:{color:"Material"===n?"rgba(97, 97, 97, 1)":"Fabric"===n?"#666666":"#676767",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"12px",fontStyle:"Normal",fontWeight:"400"},chartSubTitleFont:{color:"Material"===n?"rgba(0, 0, 0, 1)":"Fabric"===n?"#333333":"#212529",fontFamily:"Material"===n?"Roboto":"Fabric"===n?"Segoe UI":"Helvetica",size:"14px",fontStyle:"Normal",fontWeight:"400"}}}return t}(this.theme)},u.prototype.processData=function(n){var i,r,t;for(void 0===n&&(n=!0),this.seriesCounts=0,i=0,r=this.visibleSeries;i<r.length;i++)t=r[i],t.dataModule=new ih(t.dataSource||this.dataSource,t.query),t.refreshDataManager(this,n)},u.prototype.refreshChart=function(){this.createPieSvg();this.calculateBounds();this.circular3DPolygon=[];this.visibleSeries[0].segments=[];this.groupElement=this.renderer.createGroup({id:this.element.id+"-svg-chart-3d"});this.groupElement.setAttribute("role","region");this.groupElement.setAttribute("aria-hidden","false");this.renderElements();v("chartmeasuretext")},u.prototype.renderElements=function(){this.renderBorder();this.createSecondaryElement();this.renderTitle();this.renderSeries();this.renderLegend();o(!1,this.element,this.svgObject,this.redraw);this.processSelection();this.setSecondaryElementPosition();this.trigger("loaded",{chart:this});this.setSeriesTabIndex();this.doAnimation();this.animateSeries=!1},u.prototype.setSeriesTabIndex=function(){for(var n,t=0;t<this.visibleSeries[0].points.length;t++)if(this.visibleSeries[0].points[t].visible){n=document.querySelectorAll('[id*="region-series-0-point-'+this.visibleSeries[0].points[t].index+'"]');break}n&&n.length>0&&n[n.length-1].setAttribute("tabindex","0")},u.prototype.processSelection=function(){var n=[];this.circularChartSelection3DModule&&"None"!==this.selectionMode&&(n=t.extend([],this.circularChartSelection3DModule.selectedDataIndexes,null,!0),this.circularChartSelection3DModule.invokeSelection(this));this.circularChartHighlight3DModule&&this.circularChartHighlight3DModule.invokeHighlight(this);n.length>0&&(this.circularChartSelection3DModule.selectedDataIndexes=n,this.circularChartSelection3DModule.redrawSelection(this))},u.prototype.highlightAnimation=function(n,i,r){var u=parseFloat(this.visibleSeries[0].opacity.toString());u&&new t.Animation({}).animate(n,{duration:i,progress:function(t){n.style.animation="";var i=t.timeStamp/t.duration,f=r+(u-r)*i;n.setAttribute("opacity",f.toString())},end:function(){n.setAttribute("opacity",u.toString())}})},u.prototype.stopElementAnimation=function(n){var i=parseFloat(this.visibleSeries[0].opacity.toString());n.getAttribute("e-animate")&&t.Animation.stop(n);n.setAttribute("opacity",i.toString())},u.prototype.doAnimation=function(){var t=this.visibleSeries[0],u,f;if(t.animation.enable&&this.animateSeries){var n=this.renderer.createClipPath({id:this.element.id+"SeriesGroup0_clipPath"}),e=new i.PathOption(this.element.id+"SeriesGroup0_slice","transparent",1,"transparent",1,"",""),r=this.renderer.drawPath(e);n.appendChild(r);this.svgObject.appendChild(n);u=this.element.id;f=this.groupElement.id;document.querySelectorAll('[id*="region-series-"]').forEach(function(t){t.parentElement.id===f&&(t.style.cssText="clip-path:url(#"+n.id+"); -webkit-clip-path:url(#"+n.id+");",t.setAttribute("clip-path","url(#"+u+"SeriesGroup0_clipPath)"))});t.segments[0]&&this.animationRect(r,t)}},u.prototype.renderLegend=function(){if(!this.circularChartLegend3DModule||!this.legendSettings.visible)return null;this.circularChartLegend3DModule.legendCollections.length&&this.visibleSeries[0].labelBound&&this.circularChartLegend3DModule.getSmartLegendLocation(this.visibleSeries[0].labelBound,this.circularChartLegend3DModule.legendBounds,this.margin);this.circularChartLegend3DModule.renderLegend(this,this.legendSettings,this.circularChartLegend3DModule.legendBounds,this.redraw)},u.prototype.animationRect=function(n,i){var l,u=this,a=i.animation.duration,e=.75*Math.max(this.availableSize.height,this.availableSize.width),o,s,h,c;e+=.414*e;for(var y=fe("Linear"),v={x:i.segments[0].center.x-this.rotation/2,y:i.segments[0].center.y+this.tilt/2},f=0;f<i.points.length;f++)o=r(this.element.id+"-svg-data-label-text-"+f),o&&(o.style.visibility="hidden"),s=r(this.element.id+"-svg-data-label-series-0-shape-"+f),s&&(s.style.visibility="hidden"),h=r(this.element.id+"-series-"+i.index+"-data-label-"+f),h&&(h.style.visibility="hidden"),c=r(this.element.id+"-datalabel-series-0-connector-"+f),c&&(c.style.visibility="hidden");t.isNullOrUndefined(n)||new t.Animation({}).animate(n,{duration:0===a&&"Enable"===t.animationMode?1e3:a,delay:i.animation.delay,progress:function(t){l=y(t.timeStamp,-90,359.99999,t.duration);n.setAttribute("d",u.getPathArc(v,-90,l,e))},end:function(){var t,f,o,s,h;for(n.setAttribute("d",u.getPathArc(v,0,359.99999,e)),u.trigger(gl,{series:i,chart:u}),t=0;t<i.points.length;t++)f=r(u.element.id+"-svg-data-label-text-"+t),f&&(f.style.visibility="visible"),o=r(u.element.id+"-svg-data-label-series-0-shape-"+t),o&&(o.style.visibility="visible"),s=r(u.element.id+"-series-"+i.index+"-data-label-"+t),s&&(s.style.visibility="visible"),h=r(u.element.id+"-datalabel-series-0-connector-"+t),h&&(h.style.visibility="visible")}})},u.prototype.getPathArc=function(n,t,i,r){var u=i-t,f=(u=u<0?u+360:u)<180?0:1;return this.getPiePath(n,yi(t,r,n),yi(i,r,n),r,f)},u.prototype.getPiePath=function(n,t,i,r,u){return"M "+n.x+" "+n.y+" L "+t.x+" "+t.y+" A "+r+" "+r+" 0 "+u+" 1 "+i.x+" "+i.y+" Z"},u.prototype.renderBorder=function(){var n=this.border.width,f=new ft(this.element.id+"-border",this.background||this.themeStyle.background,this.border,1,new i.Rect(n/2,n/2,this.availableSize.width-n,this.availableSize.height-n)),r=this.renderer.drawRectangle(f),t,u;r.setAttribute("aria-hidden","true");o(!1,this.svgObject,r,this.redraw);t=this.backgroundImage;t&&(u=new to(this.availableSize.height-n,this.availableSize.width-n,t,0,0,this.element.id+"-background","visible","none"),o(!1,this.svgObject,this.renderer.drawImage(u),this.redraw))},u.prototype.createSecondaryElement=function(){var n=ci(this.redraw,this.element.id+"_Secondary_Element")||this.createElement("div",{id:this.element.id+"_Secondary_Element",styles:"position: relative"});o(!1,this.element,n,this.redraw)},u.prototype.renderSeries=function(){var t,i,n;for(this.redraw||this.svgObject.appendChild(this.renderer.createGroup({id:this.element.id+"_SeriesCollection"})),t=0,i=this.visibleSeries;t<i.length;t++)n=i[t],n.visible&&this.pieSeries3DModule&&(n.draw(n,this),this.defaultLabelBound(n))},u.prototype.defaultLabelBound=function(n){if(n.segments.length>0&&n.dataLabel.visible){var t=this.getSeriesBound(n);n.dataLabel.visible&&"Inside"===n.dataLabel.position&&(n.labelBound=new i.Rect(t.x,t.y,t.width+t.x,t.height+t.y));n.findMaxBounds(n.labelBound,t);this.circularChartLegend3DModule&&(n.labelBound.x-=this.explodeDistance,n.labelBound.y-=this.explodeDistance,n.labelBound.height+=this.explodeDistance-n.labelBound.y,n.labelBound.width+=this.explodeDistance-n.labelBound.x)}},u.prototype.getSeriesBound=function(n){var t=new i.Rect(1/0,1/0,-1/0,-1/0),u=0,f,r,o,e;for(u=0===u?360:u,n.findMaxBounds(t,this.getRectFromAngle(0)),n.findMaxBounds(t,this.getRectFromAngle(u)),n.findMaxBounds(t,new i.Rect(n.segments[0].center.x,n.segments[0].center.y,0,0)),f=(90*Math.floor(0)+90)%360,r=90*Math.floor(u/90)%360,r=0===r?360:r,n.findMaxBounds(t,this.getRectFromAngle(f)),n.findMaxBounds(t,this.getRectFromAngle(r)),n.findMaxBounds(t,this.getRectFromAngle(0)),o=f===r?0:Math.floor(4),e=1;e<o;e++)f+=90,n.findMaxBounds(t,this.getRectFromAngle(f));return t.width-=t.x,t.height-=t.y,t},u.prototype.getRectFromAngle=function(n){var t=yi(n,this.circularRadius[0],this.visibleSeries[0].segments[0].center);return new i.Rect(t.x,t.y,0,0)},u.prototype.renderTitle=function(){var r=this.margin,n;if(!this.title)return null;var f=this.getTextAnchor(this.titleStyle.textAlignment,this.enableRtl),u=i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont),e=this.margin.top+3*u.height/4,o=new i.Rect(r.left,0,this.availableSize.width-r.left-r.right,0),t=new i.TextOption(this.element.id+"-title",pr(o,this.titleStyle),e,f,this.titleCollection,"","auto");this.titleLocation={x:t.x,y:t.y,size:u};n=ct(this.renderer,t,this.titleStyle,this.titleStyle.color||this.themeStyle.chartTitleFont.color,this.svgObject,!1,this.redraw,null,null,null,null,0,null,null,null,this.themeStyle.chartTitleFont);n&&(n.setAttribute("tabindex","0"),n.style.outline="none",n.parentNode.insertBefore(n,this.svgObject.children&&this.svgObject.children[1]));this.subTitle&&this.renderSubTitle(t)},u.prototype.getTextAnchor=function(n,t){switch(n){case"Near":return t?"end":"start";case"Far":return t?"start":"end";default:return"middle"}},u.prototype.renderSubTitle=function(n){for(var h,c,r,t=0,f=0,e=this.titleStyle.textAlignment,o=i.measureText(this.subTitle,this.subTitleStyle,this.themeStyle.chartSubTitleFont),u=0,s=this.titleCollection;u<s.length;u++)h=s[u],t=(f=i.measureText(h,this.titleStyle,this.themeStyle.chartTitleFont).width)>t?f:t;c=new i.Rect("Center"===e?n.x-t/2:"Far"===e?n.x-t:n.x,0,t,0);r=new i.TextOption(this.element.id+"-sub-title",pr(c,this.subTitleStyle),n.y*n.text.length+3*o.height/4+10,this.getTextAnchor(this.subTitleStyle.textAlignment,this.enableRtl),this.subTitleCollection,"","auto");this.subTitleLocation={x:r.x,y:r.y,size:o};ct(this.renderer,r,this.subTitleStyle,this.subTitleStyle.color||this.themeStyle.chartSubTitleFont.color,this.svgObject,!1,this.redraw,null,null,null,null,0,null,null,null,this.themeStyle.chartSubTitleFont)},u.prototype.setSecondaryElementPosition=function(){var n=r(this.element.id+"_Secondary_Element"),t,i;n&&(t=this.element.getBoundingClientRect(),i=r(this.element.id+"_svg").getBoundingClientRect(),n.style.left=Math.max(i.left-t.left,0)+"px",n.style.top=Math.max(i.top-t.top,0)+"px")},u.prototype.createPieSvg=function(){this.removeSvg();ts(this)},u.prototype.removeSvg=function(){if(this.redraw)return null;if(v(this.element.id+"_Secondary_Element"),this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&t.remove(this.svgObject)}v("EJ2_legend_tooltip");v("EJ2_datalabel_tooltip");v(this.element.id+"PointHover_Border")},u.prototype.calculateVisibleSeries=function(){this.visibleSeries=[];this.series[0].index=0;this.visibleSeries.push(this.series[0])},u.prototype.calculateBounds=function(){var t,u,o;this.initialClipRect=new i.Rect(this.margin.left,this.margin.top,this.availableSize.width,this.availableSize.height);this.titleCollection=[];this.subTitleCollection=[];var r=0,f=0,n=0,e=0;if(this.title&&(this.titleCollection=tu(this.title,this.titleStyle,this.initialClipRect.width,this.enableRtl,this.themeStyle.chartTitleFont)),r=this.title?i.measureText(this.title,this.titleStyle,this.themeStyle.chartTitleFont).height*this.titleCollection.length:r,this.subTitle){for(t=0,u=this.titleCollection;t<u.length;t++)o=u[t],n=(e=i.measureText(o,this.titleStyle,this.themeStyle.chartTitleFont).width)>n?e:n;this.subTitleCollection=tu(this.subTitle,this.subTitleStyle,n,this.enableRtl,this.themeStyle.chartSubTitleFont);f=i.measureText(this.subTitle,this.subTitleStyle,this.themeStyle.chartSubTitleFont).height*this.subTitleCollection.length}tc(this.initialClipRect,new i.Rect(0,f+r,this.margin.right+this.margin.left,this.margin.bottom+this.margin.top));this.calculateLegendBounds()},u.prototype.calculateLegendBounds=function(){if(!this.circularChartLegend3DModule||!this.legendSettings.visible)return null;this.circularChartLegend3DModule.getLegendOptions(this,this.visibleSeries);this.circularChartLegend3DModule.calculateLegendBounds(this.initialClipRect,this.availableSize,null)},u.prototype.print=function(n){new es(this).print(n)},u.prototype.export=function(n,t){this.circularChartExport3DModule&&(this.circularChartExport3DModule.export(n,t),this.afterExport&&this.circularChartExport3DModule.getDataUrl(this))},u.prototype.pdfExport=function(n,t,i,r,u,f,e,o,s){this.circularChartExport3DModule&&this.circularChartExport3DModule.pdfExport(n,t,i,r,u,f,e,o,s)},u.prototype.requiredModules=function(){var n=[];return n.push({member:this.type+"Series3D",args:[this]}),this.legendSettings.visible&&n.push({member:"CircularChartLegend3D",args:[this]}),this.series[0].dataLabel.visible&&n.push({member:"CircularChartDataLabel3D",args:[this]}),this.tooltip.enable&&n.push({member:"CircularChartTooltip3D",args:[this]}),"None"!==this.selectionMode&&n.push({member:"CircularChartSelection3D",args:[this]}),("None"!==this.highlightMode||this.legendSettings.enableHighlight)&&n.push({member:"CircularChartHighlight3D",args:[this]}),this.enableExport&&n.push({member:"CircularChartExport3D",args:[this]}),n},u.prototype.setNavigationStyle=function(n){var t="",i;switch(this.theme){case"HighContrastLight":case"HighContrast":t="#969696";break;case"MaterialDark":case"FabricDark":case"Bootstrap":case"Bootstrap4":t="#66afe9";break;case"Tailwind":case"TailwindDark":t="#4f46e5";break;case"Bootstrap5":case"Bootstrap5Dark":t="#0d6efd";break;case"Fluent":case"FluentDark":default:t="#9e9e9e";break;case"Fluent2":case"Fluent2Dark":case"Fluent2HighContrast":t="#0078D4"}i=document.getElementById(n);i&&i.style.setProperty("outline","1.5px solid "+t)},u.prototype.removeNavigationStyle=function(){var n=document.querySelectorAll("path[id*=_Series_0_Point_], [id*="+this.element.id+"], [id*=_ChartBorder], text[id*=_title],g[id*=_chart_legend]");n&&n.forEach(function(n){(n instanceof HTMLElement||n instanceof SVGElement)&&n.style.setProperty("outline","none")})},u.prototype.circular3DChartKeyDown=function(n){var t="";return this.tooltip.enable&&("Tab"===n.code&&this.previousTargetId.indexOf("series")>-1||this.previousTargetId.indexOf("legend")>-1||"Escape"===n.code)&&(t="ESC"),n.code.indexOf("Arrow")>-1&&n.preventDefault(),n.ctrlKey&&"p"===n.key&&(n.preventDefault(),t="CtrlP"),""!==t&&this.chartKeyboardNavigations(n,n.target.id,t),"Tab"===n.code&&this.removeNavigationStyle(),!1},u.prototype.chartKeyboardNavigations=function(n,i,u){var f,o,s,w;switch(this.isLegendClicked=!1,u){case"Tab":case"ArrowMove":if(i.indexOf("-point-")>-1){var l=parseInt(i.split("point-")[1],10),e=this.visibleSeries[0].points[l],a=e.symbolLocation.center,v=e.symbolLocation.radius*this.visibleSeries[0].coefficient,y=v+(e.symbolLocation.radius-v)/2;(this.mouseX=a.x+y*Math.cos(e.symbolLocation.angle),this.mouseY=a.y+y*Math.sin(e.symbolLocation.angle),this.circularChartHighlight3DModule)&&(f=r(i),t.isNullOrUndefined(f)||(f.id.indexOf("text")>1&&(f=r(f.id.replace("text","shape"))),this.circularChartSelection3DModule?this.circularChartSelection3DModule.calculateSelectedElements(this,f,"mousemove"):this.circularChartHighlight3DModule.calculateSelectedElements(this,f,"mousemove")));this.circularChartTooltip3DModule&&(o=this.visibleSeries[0],s=void 0,o.enableTooltip&&(s=new fp(o.points[l],o)),this.circularChartTooltip3DModule.element=this.element,this.circularChartTooltip3DModule.control=this,this.circularChartTooltip3DModule.renderSeriesTooltip(this,s))}if(this.circularChartHighlight3DModule&&"None"!==this.highlightMode){i=i.indexOf("_chart_legend_g_")>-1?document.getElementById(i).firstChild.id:i;for(var h=this.element.id+"_chart_legend",p=[h+"_text_",h+"_shape_marker_",h+"_shape_"],c=0;c<p.length;c++)if(w=p[c],i.indexOf(w)>-1){document.getElementById(i).setAttribute("class","");this.circularChartSelection3DModule?this.circularChartSelection3DModule.legendSelection(this,r(i),"mousemove"):this.circularChartHighlight3DModule.legendSelection(this,r(i),"mousemove");break}}break;case"Enter":case"Space":i.indexOf("_chart_legend_")>-1&&this.circularChartLegend3DModule?(this.isLegendClicked=!0,this.circularChartLegend3DModule.click(n),this.focusChild(document.getElementById(i).parentElement),this.setNavigationStyle(document.getElementById(i).parentElement.id)):(this.circularChartSelection3DModule&&this.circularChartSelection3DModule.calculateSelectedElements(this,document.getElementById(i),"click"),this.setNavigationStyle(i));break;case"CtrlP":this.print();break;case"ESC":this.circularChartTooltip3DModule&&this.circularChartTooltip3DModule.removeTooltip(1);this.circularChartSelection3DModule?this.circularChartSelection3DModule.calculateSelectedElements(this,document.getElementById(this.element.id+"-border"),"mousemove"):this.circularChartHighlight3DModule&&"None"!==this.highlightMode&&this.circularChartHighlight3DModule.calculateSelectedElements(this,document.getElementById(this.element.id+"-border"),"mousemove")}},u.prototype.focusChild=function(n){n.setAttribute("tabindex","0");var t=n.getAttribute("class");return n.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-circular3dchart-focused")?t="e-circular3dchart-focused "+t:t||(t="e-circular3dchart-focused"),n.setAttribute("class",t),n.focus(),n.id},u.prototype.circular3DChartKeyUp=function(n){var i="",t=n.target.id,f=r(this.element.id+"_chart_legend_translate_g"),l=r(this.element.id+"_chart_legend_pageup"),a,u,o,h,c;if(f&&(a=f.firstElementChild,u=a.getAttribute("class"),u&&-1===u.indexOf("e-circular3dchart-focused")?u+=" e-circular3dchart-focused":u||(u="e-circular3dchart-focused"),a.setAttribute("class",u)),l&&l.setAttribute("class","e-circular3dchart-focused"),this.removeNavigationStyle(),"Tab"===n.code)""!==this.previousTargetId&&(this.previousTargetId.indexOf("-point-")>-1&&-1===t.indexOf("-point-")?this.currentPointIndex=0:this.previousTargetId.indexOf("_chart_legend_page")>-1&&-1===t.indexOf("_chart_legend_page")&&-1===t.indexOf("_chart_legend_g_")?this.setTabIndex(n.target,l):this.previousTargetId.indexOf("_chart_legend_g_")>-1&&-1===t.indexOf("chart_legend_g_")?this.setTabIndex(f.children[this.currentLegendIndex],f.firstElementChild):this.previousTargetId.indexOf("-title")>-1&&t.indexOf("-point-")>-1&&(this.currentPointIndex=parseInt(t.split("point-")[1],10))),this.previousTargetId=t,t.indexOf("_chart_legend_g_")>-1&&"None"!==this.highlightMode?(t=n.target.lastElementChild.id,i="Tab"):t.indexOf("-point-")>-1&&("None"!==this.highlightMode||this.tooltip.enable)&&(i="Tab");else if(n.code.indexOf("Arrow")>-1){if(n.preventDefault(),t.indexOf("_chart_legend_page")>-1)n.target.removeAttribute("tabindex"),this.previousTargetId=t=this.element.id+"_chart_legend_page"+("ArrowRight"===n.code?"up":"down"),this.focusTarget(r(t));else if(t.indexOf("_chart_legend_")>-1)n.target.removeAttribute("tabindex"),this.currentLegendIndex+="ArrowUp"===n.code||"ArrowRight"===n.code?1:-1,this.currentLegendIndex=this.getActualIndex(this.currentLegendIndex,f.children.length),o=f.children[this.currentLegendIndex],this.focusTarget(o),this.removeNavigationStyle(),this.setNavigationStyle(o.id),this.previousTargetId=t=o.lastElementChild.id,i="None"!==this.highlightMode?"ArrowMove":"";else if(t.indexOf("-point-")>-1){n.target.setAttribute("tabindex","-1");for(var v=0,s=[],e=0;e<this.visibleSeries[0].points.length;e++)v=this.visibleSeries[0].points[e].visible?v+1:v,this.visibleSeries[0].points[e].visible&&s.push(this.visibleSeries[0].points[e].index);this.currentPointIndex=s.indexOf(this.currentPointIndex)+("ArrowUp"===n.code||"ArrowRight"===n.code?1:-1);this.currentPointIndex=s[this.getActualIndex(this.currentPointIndex,s.length)];h=document.querySelectorAll('[id*="region-series-0-point-'+this.currentPointIndex+'"]');c=void 0;h.length>0&&(c=h[h.length-1]);t=c?c.id:"";this.focusTarget(r(t));this.removeNavigationStyle();this.setNavigationStyle(t);i=this.tooltip.enable||this.circularChartHighlight3DModule?"ArrowMove":""}}else("Enter"===n.code||"Space"===n.code)&&(t.indexOf("_chart_legend_")>-1||t.indexOf("-point-")>-1)&&(t=t.indexOf("_chart_legend_g")>-1?n.target.lastElementChild.id:t,i="Enter");return""!==i&&this.chartKeyboardNavigations(n,t,i),"Tab"===n.code&&this.setNavigationStyle(t),!1},u.prototype.getActualIndex=function(n,t){return n>t-1?0:n<0?t-1:n},u.prototype.focusTarget=function(n){var t=n.getAttribute("class");return n.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-circular3dchart-focused")?t+=" e-circular3dchart-focused":t||(t="e-circular3dchart-focused"),n.setAttribute("tabindex","0"),n.setAttribute("class",t),n.focus(),n.id},u.prototype.setTabIndex=function(n,t){n&&n.removeAttribute("tabindex");t&&t.setAttribute("tabindex","0")},u.prototype.getPersistData=function(){return""},u.prototype.getModuleName=function(){return"circularchart3d"},u.prototype.destroy=function(){var t,i,r;this.element&&(this.unWireEvents(),this.circular3DPolygon=[],this.visibleSeries[0].segments=[],n.prototype.destroy.call(this),this.element.classList.remove("e-circular3dchart"),this.element.classList.remove("e-circular3dchart-focused"),t=document.getElementById(this.element.id+"Keyboard_circular3dchart_focus"),t&&t.remove(),i=document.getElementById(this.element.id+"_ej2_chart_highlight"),i&&i.remove(),r=document.getElementById(this.element.id+"_ej2_chart_selection"),r&&r.remove(),v("chartmeasuretext"),this.removeSvg(),this.svgObject=null)},u.prototype.chartResize=function(){var n=this,t,r;return this.animateSeries=!1,t={previousSize:new i.Size(this.availableSize.width,this.availableSize.height),currentSize:new i.Size(0,0),chart:this},r={cancel:!1},this.resizeTo&&clearTimeout(this.resizeTo),this.trigger(ao,r),r.cancel||(this.resizeTo=+setTimeout(function(){n.isDestroyed?clearTimeout(n.resizeTo):(ns(n),t.currentSize=n.availableSize,n.trigger(af,t),n.refreshChart())},500)),!1},u.prototype.changeVisibleSeries=function(n,t){for(var u,i=0,r=n;i<r.length;i++)if(u=r[i],t===u.index)return u;return null},u.prototype.removeSeriesElements=function(n){document.querySelectorAll('[id*="region-series-"]').forEach(function(t){if(t.parentElement.id===n.groupElement.id)return t.remove()});document.querySelectorAll('[id*="data-label-text-"]').forEach(function(t){if(t.parentElement.id===n.groupElement.id)return t.remove()});document.querySelectorAll('[id*="data-label-series-0-shape-"]').forEach(function(t){if(t.parentElement.id===n.groupElement.id)return t.remove()});document.querySelectorAll('[id*="datalabel-series-0-connector-"]').forEach(function(t){if(t.parentElement.id===n.groupElement.id)return t.remove()})},u.prototype.onPropertyChanged=function(i,r){for(var u={refreshElements:!1,refreshBounds:!1},o=0,h=Object.keys(i);o<h.length;o++){switch(h[o]){case"theme":this.animateSeries=!0;break;case"title":case"subTitle":case"height":case"width":case"margin":case"enableRotation":case"depth":u.refreshBounds=!0;break;case"tilt":case"rotation":this.rotateActivate||(u.refreshBounds=!0,this.animateSeries=!1);break;case"titleStyle":i.titleStyle&&(i.titleStyle.size||i.titleStyle.textOverflow)?u.refreshBounds=!0:u.refreshElements=!0;break;case"subTitleStyle":i.subTitleStyle&&(i.subTitleStyle.size||i.subTitleStyle.textOverflow)?u.refreshBounds=!0:u.refreshElements=!0;break;case"legendSettings":u.refreshBounds=!0;u.refreshElements=!0;break;case"dataSource":this.processData(!1);u.refreshBounds=!0;break;case"series":if(!this.delayRedraw){for(var s=!1,e=void 0,c=void 0,f=0;f<this.series.length;f++)((e=i.series[f]).explodeOffset||e.radius||e.innerRadius||e.emptyPointSettings)&&(c=!0),i.series[f]&&(i.series[f].dataSource||i.series[f].yName||i.series[f].xName||i.series[f].dataLabel||c)&&(t.extend(this.changeVisibleSeries(this.visibleSeries,f),e,null,!0),s=!0),i.series[f]&&!t.isNullOrUndefined(i.series[f].explodeIndex)&&i.series[f].explodeIndex>=0&&i.series[f].explodeIndex!==r.series[f].explodeIndex&&(s=!0,this.removeSeriesElements(this));s&&(this.processData(!1),u.refreshBounds=!0)}this.delayRedraw=!1;this.redraw=!1;break;case"enableRtl":case"locale":this.circularChartHighlight3DModule&&v(this.circularChartHighlight3DModule.styleId);this.circularChartSelection3DModule&&v(this.circularChartSelection3DModule.styleId);n.prototype.refresh.call(this);break;case"background":case"border":u.refreshElements=!0;break;case"isMultiSelect":case"selectedDataIndexes":case"selectionMode":this.circularChartSelection3DModule&&(t.isNullOrUndefined(this.circularChartSelection3DModule.selectedDataIndexes)?this.circularChartSelection3DModule.invokeSelection(this):(this.circularChartSelection3DModule.selectedDataIndexes=this.selectedDataIndexes,this.circularChartSelection3DModule.redrawSelection(this)));break;case"tooltip":this.circularChartTooltip3DModule&&(this.circularChartTooltip3DModule.previousPoints=[],this.tooltip.template&&(this.circularChartTooltip3DModule.template=this.tooltip.template))}!u.refreshBounds&&u.refreshElements?(this.removeSeriesElements(this),this.createPieSvg(),this.circular3DPolygon=[],this.visibleSeries[0].segments=[],this.renderElements()):u.refreshBounds&&(this.removeSeriesElements(this),this.createPieSvg(),this.circular3DPolygon=[],this.visibleSeries[0].segments=[],this.calculateBounds(),this.renderElements())}},g([t.Property(null)],u.prototype,"width",void 0),g([t.Property(null)],u.prototype,"height",void 0),g([t.Property(null)],u.prototype,"title",void 0),g([t.Property(null)],u.prototype,"backgroundImage",void 0),g([t.Property("")],u.prototype,"dataSource",void 0),g([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},oi)],u.prototype,"titleStyle",void 0),g([t.Property(null)],u.prototype,"subTitle",void 0),g([t.Complex({fontFamily:null,size:null,fontStyle:null,fontWeight:null,color:null},oi)],u.prototype,"subTitleStyle",void 0),g([t.Property("None")],u.prototype,"selectionMode",void 0),g([t.Property("None")],u.prototype,"highlightMode",void 0),g([t.Collection([{}],up)],u.prototype,"series",void 0),g([t.Complex({},drt)],u.prototype,"legendSettings",void 0),g([t.Property("")],u.prototype,"highlightColor",void 0),g([t.Property("None")],u.prototype,"selectionPattern",void 0),g([t.Property("None")],u.prototype,"highlightPattern",void 0),g([t.Property(!1)],u.prototype,"isMultiSelect",void 0),g([t.Property(!0)],u.prototype,"enableAnimation",void 0),g([t.Property("Material")],u.prototype,"theme",void 0),g([t.Collection([],as)],u.prototype,"selectedDataIndexes",void 0),g([t.Complex({},lr)],u.prototype,"margin",void 0),g([t.Complex({color:"#DDDDDD",width:0},yt)],u.prototype,"border",void 0),g([t.Complex({},nut)],u.prototype,"tooltip",void 0),g([t.Property(null)],u.prototype,"background",void 0),g([t.Property(!1)],u.prototype,"useGroupingSeparator",void 0),g([t.Property(50)],u.prototype,"depth",void 0),g([t.Property(0)],u.prototype,"tilt",void 0),g([t.Property(!1)],u.prototype,"enableRotation",void 0),g([t.Property(0)],u.prototype,"rotation",void 0),g([t.Property(!1)],u.prototype,"enableExport",void 0),g([t.Event()],u.prototype,"load",void 0),g([t.Event()],u.prototype,"loaded",void 0),g([t.Event()],u.prototype,"legendRender",void 0),g([t.Event()],u.prototype,"legendClick",void 0),g([t.Event()],u.prototype,"selectionComplete",void 0),g([t.Event()],u.prototype,"pointRender",void 0),g([t.Event()],u.prototype,"seriesRender",void 0),g([t.Event()],u.prototype,"textRender",void 0),g([t.Event()],u.prototype,"beforeExport",void 0),g([t.Event()],u.prototype,"afterExport",void 0),g([t.Event()],u.prototype,"beforePrint",void 0),g([t.Event()],u.prototype,"beforeResize",void 0),g([t.Event()],u.prototype,"resized",void 0),g([t.Event()],u.prototype,"circularChart3DMouseMove",void 0),g([t.Event()],u.prototype,"circularChart3DMouseClick",void 0),g([t.Event()],u.prototype,"circularChart3DMouseDown",void 0),g([t.Event()],u.prototype,"circularChart3DMouseLeave",void 0),g([t.Event()],u.prototype,"circularChart3DMouseUp",void 0),g([t.Event()],u.prototype,"pointClick",void 0),g([t.Event()],u.prototype,"pointMove",void 0),g([t.Event()],u.prototype,"tooltipRender",void 0),g([t.NotifyPropertyChanges],u)}(t.Component),fyt=function(){function n(n){this.chart=n}return n.prototype.export=function(n,t){var r=new du(this.chart),i={cancel:!1,width:null,height:null};this.chart.trigger(yf,i);i.cancel||r.export(n,t,void 0,[this.chart])},n.prototype.pdfExport=function(n,t,i,r,u,f,e,o,s){var c=new du(this.chart),h;i=i||[this.chart];h={cancel:!1,width:r,height:u};this.chart.trigger(yf,h);h.cancel||c.export("PDF",n,t,i,r=h.width,u=h.height,f,e,o,s)},n.prototype.getDataUrl=function(n){return new du(n).getDataUrl(n)},n.prototype.getModuleName=function(){return"CircularChartExport3D"},n.prototype.destroy=function(){},n}(),eyt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tut=function(n){function i(t){var i=n.call(this,t)||this;return i.circular3D=t,i.renderer=t.renderer,i.addEventListener(),i}return eyt(i,n),i.prototype.addEventListener=function(){this.circular3D.isDestroyed||(this.circular3D.on(t.Browser.touchMoveEvent,this.mouseMove,this),this.circular3D.on("click",this.mouseClick,this))},i.prototype.removeEventListener=function(){this.circular3D.isDestroyed||(this.circular3D.off(t.Browser.touchMoveEvent,this.mouseMove),this.circular3D.off("click",this.mouseClick))},i.prototype.initPrivateVariables=function(n){this.styleId=n.element.id+"_ej2_chart_selection";this.unselected=n.element.id+"_ej2_deselected";this.selectedDataIndexes=[];this.rectPoints=null},i.prototype.invokeSelection=function(n){this.initPrivateVariables(n);this.series=t.extend({},n.visibleSeries,null,!0);this.seriesStyles();this.currentMode=n.selectionMode;this.selectDataIndex(this.concatIndexes(n.selectedDataIndexes,this.selectedDataIndexes),n)},i.prototype.generateStyle=function(n,t){return this.styleId+"_series_"+n.index+"_point_"+t},i.prototype.getElementByIndex=function(n){var i=this,t=[];document.querySelectorAll('[id*="-region-series-'+n.series+"-point-"+n.point+'"]').forEach(function(r){r.id.indexOf(i.circular3D.element.id+"-")>-1&&i.indexFinder(r.id).point===n.point&&t.push(r)});var r=document.getElementById(this.control.element.id+"-svg-data-label-text-"+n.point),u=document.getElementById(this.control.element.id+"-datalabel-series-0-connector-"+n.point),f=document.getElementById(this.control.element.id+"-svg-data-label-series-0-shape-"+n.point);return r&&t.push(r),u&&t.push(u),f&&t.push(f),t},i.prototype.isAlreadySelected=function(n,t,i){var u,f;if("mousemove"===t?(this.currentMode=this.circular3D.highlightMode,this.highlightDataIndexes=[],this.styleId=this.circular3D.element.id+"_ej2_chart_highlight"):"click"!==t&&"keyup"!==t||(this.currentMode=this.circular3D.selectionMode,this.styleId=this.circular3D.element.id+"_ej2_chart_selection"),"None"!==this.circular3D.highlightMode&&"None"===this.circular3D.selectionMode&&"click"===t)return!1;if(("None"!==this.circular3D.highlightMode||this.circular3D.legendSettings.enableHighlight)&&this.previousSelectedElement&&this.previousSelectedElement[0]){u=void 0;f=n.nodeName;n.parentNode&&(u=("path"===f||"shape"===f)&&n.id.indexOf("region")>1);for(var o=function(n){var f;r.previousSelectedElement[n].hasAttribute("class")&&(r.previousSelectedElement[n].getAttribute("class").indexOf("highlight")>-1&&(u||"click"===t||"keyup"===t)?(r.previousSelectedElement[n].classList.forEach(function(n){n.indexOf("selection")>-1&&(f=n)}),r.previousSelectedElement[n].removeAttribute("class"),f&&r.addSvgClass(r.previousSelectedElement[n],f),r.previousSelectedElement[n].classList.remove(r.styleId+"_series_"+i.series),r.addOrRemoveIndex(r.highlightDataIndexes,r.indexFinder(r.previousSelectedElement[n].id))):!u&&r.previousSelectedElement[n].getAttribute("class").indexOf("highlight")>-1&&r.performSelection(r.indexFinder(r.previousSelectedElement[n].id),r.circular3D,r.previousSelectedElement[n]))},r=this,e=0;e<this.previousSelectedElement.length;e++)o(e)}return!0},i.prototype.mouseClick=function(n,t){this.calculateSelectedElements(n,t.target,t.type)},i.prototype.calculateSelectedElements=function(n,i,r){t.isNullOrUndefined(i)||"None"===n.selectionMode&&"None"===n.highlightMode||i.id&&-1===i.id.indexOf(n.element.id+"-")||i.getAttribute("id").indexOf("_connector_")>-1||(this.isAlreadySelected(i,r,this.indexFinder(i.id)),(i.id.indexOf("-series-")>-1||i.id.indexOf("-data-label-")>-1)&&this.performSelection(this.indexFinder(i.id),n,i))},i.prototype.indexFinder=function(n){var t=["NaN","NaN"];return n.indexOf("-point-")>-1?t=n.split("-series-")[1].split("-point-"):n.indexOf("-border-")>-1?t[0]=n.split("-border-")[1]:n.indexOf("data-label-series-0-shape-")>-1&&"Inside"===this.control.series[0].dataLabel.position?(t[0]="0",t[1]=n.split("-shape-")[1]):n.indexOf("-series-")>-1?t[0]=n.split("-series-")[1]:n.indexOf("_chart_legend_shape_")>-1?(t=n.split("_chart_legend_shape_"))[0]="0":n.indexOf("_chart_legend_g_")>-1?(t=n.split("_chart_legend_g_"))[0]="0":n.indexOf("-data-label-")>-1?(t[0]="0",t[1]=n.split("-data-label-text-")[1]):n.indexOf("-connector-")>-1&&(t[0]="0",t[1]=n.split("-connector-")[1]),new ir(parseInt(t[0],10),parseInt(t[1],10))},i.prototype.performSelection=function(n,t,i){!isNaN(n.point)&&"Point"===this.currentMode&&i&&this.getElementByIndex(n).length>0&&(this.selection(t,n,this.getElementByIndex(n)),this.selectionComplete(t,t.series[0]),this.blurEffect(t.element.id,t.visibleSeries))},i.prototype.selectionComplete=function(n,t){for(var i,f,u=[],r=0;r<this.selectedDataIndexes.length;r++)i=this.selectedDataIndexes[r].point,isNaN(i)||u.push({x:t.dataSource[i][t.xName],y:t.points[i].y,seriesIndex:this.selectedDataIndexes[r].series,pointIndex:i});f={name:ue,selectedDataValues:u,cancel:!1};n.trigger(ue,f)},i.prototype.selection=function(n,t,i){n.isMultiSelect||-1!==this.styleId.indexOf("highlight")||"None"===n.selectionMode||this.removeMultiSelectElements(n,this.selectedDataIndexes,t);var r=i[0]&&(i[0].getAttribute("class")||"");i[0]&&r.indexOf(this.getSelectionClass(i[0].id))>-1?(this.removeStyles(i),this.styleId.indexOf("highlight")>0&&("None"!==n.highlightMode||n.legendSettings.enableHighlight)?this.addOrRemoveIndex(this.highlightDataIndexes,t):this.addOrRemoveIndex(this.selectedDataIndexes,t)):(this.previousSelectedElement="None"!==n.highlightMode?i:[],r.indexOf("selection")<0&&this.applyStyles(i,t),this.styleId.indexOf("highlight")>0&&("None"!==n.highlightMode||n.legendSettings.enableHighlight)?this.addOrRemoveIndex(this.highlightDataIndexes,t,!0):this.addOrRemoveIndex(this.selectedDataIndexes,t,!0))},i.prototype.redrawSelection=function(n){var i=t.extend([],this.selectedDataIndexes,null,!0),r=t.extend([],this.highlightDataIndexes,null,!0);this.styleId.indexOf("highlight")>0&&r.length>0?(this.removeSelectedElements(n,this.highlightDataIndexes),i=r):this.removeSelectedElements(n,this.selectedDataIndexes);this.blurEffect(n.element.id,n.visibleSeries);this.selectDataIndex(i,n)},i.prototype.removeSelectedElements=function(n,t){for(var i,e,u,r=0,f=t;r<f.length;r++)i=f[r],this.removeStyles(this.getElementByIndex(i));for(e=n.visibleSeries[0].points,u=0;u<e.length;u++)i=new ir(0,e[u].index),this.removeStyles(0===this.getElementByIndex(i).length?[document.getElementById(this.control.element.id+"_chart_legend_shape_"+i.point)]:this.getElementByIndex(i))},i.prototype.legendSelection=function(n,t,i){var u,o,s,h,c;if("mousemove"===i){if(t.id.indexOf("text")>1&&(t=r(t.id.replace("text","shape"))),t.id.indexOf("marker")>1&&(t=r(t.id.replace("_marker",""))),t.id.indexOf("g")>1&&(t=r(t.id.replace("_g_","_shape_"))),t.hasAttribute("class")&&(t.getAttribute("class").indexOf("highlight")>-1||t.getAttribute("class").indexOf("selection")>-1))return;this.currentMode=this.circular3D.highlightMode}else"click"===i&&(t.id.indexOf("text")>1&&(t=r(t.id.replace("text","shape"))),t.id.indexOf("g")>1&&(t=r(t.id.replace("_g_","_shape_"))));if(u=this.indexFinder(t.id),this.isAlreadySelected(t,i,u)){var f=this.generateStyle(n.visibleSeries[u.series],u.point),e=document.querySelectorAll("."+f),l=!0;if(e.length>0)this.removeSelection(n,u.series,e,f,l,u);else{for(o=0,s=n.visibleSeries[0].points;o<s.length;o++)h=s[o],h.index!==u.point&&(!n.isMultiSelect||f.indexOf("highlight")>0)&&(f=this.generateStyle(n.visibleSeries[u.series],h.index),e=document.querySelectorAll("."+f),this.removeSelection(n,u.series,e,f,l,u));(c=this.getElementByIndex(u)).length>0&&(this.checkSelectionElements(c,f,!1,u.point),this.selection(n,u,c),this.blurEffect(n.element.id,n.visibleSeries))}}},i.prototype.selectDataIndex=function(n,t){for(var f,u,i=0,r=n;i<r.length;i++)u=r[i],(f=this.getElementByIndex(u)[0])&&this.performSelection(u,t,f)},i.prototype.removeMultiSelectElements=function(n,t,i){for(var r=0;r<t.length;r++)this.checkEquals(t[r],i)||(this.removeStyles(this.getElementByIndex(t[r])),t.splice(r,1),r--)},i.prototype.blurEffect=function(n,t){for(var i,u,e=this.checkVisibility(this.highlightDataIndexes)||this.checkVisibility(this.selectedDataIndexes),r=0,f=t[0].points;r<f.length;r++)i=f[r],u=[],i.visible&&(u=this.getElementByIndex({series:0,point:i.index}),this.checkSelectionElements(u,this.generateStyle(t[0],i.index),e,i.index))},i.prototype.checkSelectionElements=function(n,t,i,u){var o,s,f,h,e,c;for(void 0===u&&(u=0),f=n,"None"!==this.circular3D.selectionMode&&("None"!==this.circular3D.highlightMode||this.circular3D.legendSettings.enableHighlight)&&(f=n),h=n,e=0;e<f.length;e++)if(o=f[e].getAttribute("class")||"","None"===this.circular3D.selectionMode||"None"===this.circular3D.highlightMode&&!this.circular3D.legendSettings.enableHighlight||(t=o.indexOf("selection")>0||o.indexOf("highlight")>0?o:t),-1===o.indexOf(t)&&i?this.addSvgClass(f[e],this.unselected):(h=f[e],-1!==o.indexOf(this.unselected)&&t.indexOf("highlight")>0&&this.circular3D.highlightAnimation(f[e],700,.3),this.removeSvgClass(f[e],this.unselected),this.removeSvgClass(f[e].parentNode,this.unselected)),(-1!==f[e].id.indexOf("-data-label-text-")||-1!==f[e].id.indexOf("-connector-")||-1!==f[e].id.indexOf("-data-label-series-0-shape-"))&&(this.highlightDataIndexes&&this.highlightDataIndexes[0]&&u===this.highlightDataIndexes[0].point&&this.removeSvgClass(f[e],this.unselected),this.selectedDataIndexes))for(c=0;c<this.selectedDataIndexes.length;c++)u===this.selectedDataIndexes[c].point&&this.removeSvgClass(f[e],this.unselected);this.control.circularChartLegend3DModule&&this.control.legendSettings.visible&&(s=r(this.control.element.id+"_chart_legend_shape_"+u))&&(s.hasAttribute("class")&&this.removeSvgClass(s,s.getAttribute("class")),h.length>0?o=h[0].getAttribute("class"):h&&(o=h.getAttribute("class")||""),-1===o.indexOf(t)&&i?this.addSvgClass(s,this.unselected):(this.removeSvgClass(s,this.unselected),""===o?this.removeSvgClass(s,t):this.addSvgClass(s,t)))},i.prototype.applyStyles=function(n,t){for(var i,o,r,u=this.control.circularChartTooltip3DModule,f=0,e=n;f<e.length;f++)i=e[f],i&&(this.removeSvgClass(i.parentNode,this.unselected),this.removeSvgClass(i,this.unselected),o=u&&u.previousPoints.length>0&&u.previousPoints[0].point.index!==t.point?u.svgTooltip.opacity:this.series[t.series].opacity,i.setAttribute("opacity",o.toString()),-1===i.id.indexOf("-data-label-text-")&&-1===i.id.indexOf("-connector-")&&-1===i.id.indexOf("-data-label-series-0-shape-")&&this.addSvgClass(i,this.getSelectionClass(i.id)),this.getSelectionClass(i.id).indexOf("highlight")>0&&this.circular3D.stopElementAnimation(i));this.control.circularChartLegend3DModule&&this.control.legendSettings.visible&&(r=document.getElementById(this.control.element.id+"_chart_legend_shape_"+t.point),this.removeSvgClass(r,r.getAttribute("class")),this.addSvgClass(r,this.getSelectionClass(r.id)))},i.prototype.getSelectionClass=function(n){return this.generateStyle(this.control.series[this.indexFinder(n).series],this.indexFinder(n).point)},i.prototype.removeSelection=function(n,t,i,r,u,f){var e,o,s,c,a,h,l,v;if(i.length>0){for(e=[],o=0;o<i.length;o++)e.push(i[o]);for(this.removeStyles(e),this.addOrRemoveIndex(this.selectedDataIndexes,new ir(t,f.point)),s=0,c=n.visibleSeries[0].points;s<c.length;s++)if(a=c[s],r=this.generateStyle(n.visibleSeries[0],a.index),document.querySelectorAll("."+r).length>0){for(h=0,l=e;h<l.length;h++)v=l[h],this.checkSelectionElements(v,r,!0,f.point);u=!1;break}u&&this.blurEffect(n.element.id,n.visibleSeries)}},i.prototype.removeStyles=function(n){for(var i,t=0,r=n;t<r.length;t++)i=r[t],i&&this.removeSvgClass(i,this.getSelectionClass(i.id))},i.prototype.addOrRemoveIndex=function(n,t,i){for(var r=0;r<n.length;r++)this.checkEquals(n[r],t)&&(n.splice(r,1),r--);i&&n.push(t)},i.prototype.checkEquals=function(n,t){return n.point===t.point&&n.series===t.series},i.prototype.mouseMove=function(n){var u=this.circular3D,i=n.target;if(!u.rotateActivate&&u.circularChartHighlight3DModule&&("None"!==u.highlightMode||u.legendSettings.enableHighlight)&&!t.isNullOrUndefined(i))return(n.target.id.indexOf("text")>1&&n.target.id.indexOf("legend")>-1&&(i=r(n.target.id.replace("text","shape"))),i.hasAttribute("class")&&(i.getAttribute("class").indexOf("highlight")>-1||i.getAttribute("class").indexOf("selection")>-1))?void 0:(this.calculateSelectedElements(u,n.target,n.type),void(this.highlightDataIndexes&&(-1===i.id.indexOf("_chart_legend_")||-1!==i.id.indexOf("_legend_element"))&&this.highlightDataIndexes.length>0&&-1===i.id.indexOf("-series-")&&-1===i.id.indexOf("-data-label-")&&this.removeLegendHighlightStyles()));u.selectionMode},i.prototype.removeLegendHighlightStyles=function(){var t,i,n;for(this.circular3D.circularChartHighlight3DModule.highlightDataIndexes=[],i=0;i<this.circular3D.visibleSeries[0].points.length;i++)if(t=document.getElementsByClassName(this.generateStyle(this.circular3D.visibleSeries[0],i)),0===this.selectedDataIndexes.length){for(t=document.getElementsByClassName(this.generateStyle(this.circular3D.visibleSeries[0],i));t.length>0;)(n=t[0])&&this.removeSvgClass(n,n.getAttribute("class"));for(t=document.getElementsByClassName(this.unselected);t.length>0;)(n=t[0])&&(this.removeSvgClass(n,n.getAttribute("class")),this.generateStyle(this.circular3D.visibleSeries[0],i).indexOf("highlight")>-1&&this.circular3D.highlightAnimation(n,700,.3))}else for(t=document.getElementsByClassName(this.generateStyle(this.circular3D.visibleSeries[0],i));t.length>0;)(n=t[0])&&(this.removeSvgClass(n,n.getAttribute("class")),this.addSvgClass(n,this.unselected))},i.prototype.getModuleName=function(){return"CircularChartSelection3D"},i.prototype.destroy=function(){this.removeEventListener()},i}(rh),oyt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),syt=function(n){function i(t){var i=n.call(this,t)||this;return i.circular3D=t,i.renderer=t.renderer,i.wireEvents(),i}return oyt(i,n),i.prototype.wireEvents=function(){this.circular3D.isDestroyed||this.circular3D.on(t.Browser.touchMoveEvent,this.mouseMove,this)},i.prototype.unWireEvents=function(){this.circular3D.isDestroyed||this.circular3D.off(t.Browser.touchMoveEvent,this.mouseMove)},i.prototype.declarePrivateVariables=function(n){this.styleId=n.element.id+"_ej2_chart_highlight";this.unselected=n.element.id+"_ej2_deselected";this.selectedDataIndexes=[];this.highlightDataIndexes=[]},i.prototype.invokeHighlight=function(n){this.declarePrivateVariables(n);this.series=t.extend({},n.visibleSeries,null,!0);this.seriesStyles();this.currentMode=n.highlightMode},i.prototype.getModuleName=function(){return"CircularChartHighlight3D"},i.prototype.destroy=function(){this.unWireEvents()},i}(tut),ep={};yh.C(ep,vh);iut={charts:ep=yh.C(window.ejdashboard?window.ejdashboard.charts:{},ep)};window.ejdashboard=yh.C(window.ejdashboard||{},iut)})()})();ejdashboard.charts.Chart.Inject(ejdashboard.charts.LineSeries,ejdashboard.charts.ScatterSeries,ejdashboard.charts.ColumnSeries,ejdashboard.charts.SplineSeries,ejdashboard.charts.SplineRangeAreaSeries,ejdashboard.charts.SplineAreaSeries,ejdashboard.charts.StripLine,ejdashboard.charts.AreaSeries,ejdashboard.charts.ScrollBar,ejdashboard.charts.StepLineSeries,ejdashboard.charts.StepAreaSeries,ejdashboard.charts.StackingColumnSeries,ejdashboard.charts.StackingAreaSeries,ejdashboard.charts.StackingLineSeries,ejdashboard.charts.BarSeries,ejdashboard.charts.StackingBarSeries,ejdashboard.charts.RangeColumnSeries,ejdashboard.charts.BubbleSeries,ejdashboard.charts.Tooltip,ejdashboard.charts.Crosshair,ejdashboard.charts.Category,ejdashboard.charts.DateTime,ejdashboard.charts.Logarithmic,ejdashboard.charts.Legend,ejdashboard.charts.Zoom,ejdashboard.charts.DataLabel,ejdashboard.charts.Selection,ejdashboard.charts.ChartAnnotation,ejdashboard.charts.HiloSeries,ejdashboard.charts.HiloOpenCloseSeries,ejdashboard.charts.WaterfallSeries,ejdashboard.charts.RangeAreaSeries,ejdashboard.charts.CandleSeries,ejdashboard.charts.PolarSeries,ejdashboard.charts.RadarSeries,ejdashboard.charts.SmaIndicator,ejdashboard.charts.TmaIndicator,ejdashboard.charts.EmaIndicator,ejdashboard.charts.AccumulationDistributionIndicator,ejdashboard.charts.MacdIndicator,ejdashboard.charts.AtrIndicator,ejdashboard.charts.RsiIndicator,ejdashboard.charts.MomentumIndicator,ejdashboard.charts.StochasticIndicator,ejdashboard.charts.BollingerBands,ejdashboard.charts.BoxAndWhiskerSeries,ejdashboard.charts.HistogramSeries,ejdashboard.charts.ErrorBar,ejdashboard.charts.Trendlines,ejdashboard.charts.DateTimeCategory,ejdashboard.charts.MultiColoredLineSeries,ejdashboard.charts.MultiColoredAreaSeries,ejdashboard.charts.MultiLevelLabel,ejdashboard.charts.ParetoSeries,ejdashboard.charts.Export,ejdashboard.charts.Highlight);ejdashboard.charts.RangeNavigator.Inject(ejdashboard.charts.RangeTooltip,ejdashboard.charts.PeriodSelector,ejdashboard.charts.AreaSeries,ejdashboard.charts.StepLineSeries,ejdashboard.charts.DateTime,ejdashboard.charts.Logarithmic),function(n,t){typeof exports=="object"&&typeof module!="undefined"?t():typeof define=="function"&&define.amd?define(t):t()}(this,function(){"use strict";function f(n){var t=this.constructor;return this.then(function(i){return t.resolve(n()).then(function(){return i})},function(i){return t.resolve(n()).then(function(){return t.reject(i)})})}function h(){}function c(n,t){return function(){n.apply(t,arguments)}}function n(t){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=undefined;this._deferreds=[];o(t,this)}function e(i,u){while(i._state===3)i=i._value;if(i._state===0){i._deferreds.push(u);return}i._handled=!0;n._immediateFn(function(){var n=i._state===1?u.onFulfilled:u.onRejected,f;if(n===null){(i._state===1?r:t)(u.promise,i._value);return}try{f=n(i._value)}catch(e){t(u.promise,e);return}r(u.promise,f)})}function r(i,r){try{if(r===i)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var f=r.then;if(r instanceof n){i._state=3;i._value=r;u(i);return}if(typeof f=="function"){o(c(f,r),i);return}}i._state=1;i._value=r;u(i)}catch(e){t(i,e)}}function t(n,t){n._state=2;n._value=t;u(n)}function u(t){t._state===2&&t._deferreds.length===0&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var i=0,r=t._deferreds.length;i<r;i++)e(t,t._deferreds[i]);t._deferreds=null}function l(n,t,i){this.onFulfilled=typeof n=="function"?n:null;this.onRejected=typeof t=="function"?t:null;this.promise=i}function o(n,i){var u=!1;try{n(function(n){u||(u=!0,r(i,n))},function(n){u||(u=!0,t(i,n))})}catch(f){if(u)return;u=!0;t(i,f)}}var s=setTimeout,i;n.prototype["catch"]=function(n){return this.then(null,n)};n.prototype.then=function(n,t){var i=new this.constructor(h);return e(this,new l(n,t,i)),i};n.prototype["finally"]=f;n.all=function(t){return new n(function(n,i){function e(t,u){try{if(u&&(typeof u=="object"||typeof u=="function")){var o=u.then;if(typeof o=="function"){o.call(u,function(n){e(t,n)},i);return}}r[t]=u;--f==0&&n(r)}catch(s){i(s)}}var r,f,u;if(!t||typeof t.length=="undefined")throw new TypeError("Promise.all accepts an array");if(r=Array.prototype.slice.call(t),r.length===0)return n([]);for(f=r.length,u=0;u<r.length;u++)e(u,r[u])})};n.resolve=function(t){return t&&typeof t=="object"&&t.constructor===n?t:new n(function(n){n(t)})};n.reject=function(t){return new n(function(n,i){i(t)})};n.race=function(t){return new n(function(n,i){for(var r=0,u=t.length;r<u;r++)t[r].then(n,i)})};n._immediateFn=typeof setImmediate=="function"&&function(n){setImmediate(n)}||function(n){s(n,0)};n._unhandledRejectionFn=function(n){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};i=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("unable to locate global object");}();"Promise"in i?i.Promise.prototype["finally"]||(i.Promise.prototype["finally"]=f):i.Promise=n});(()=>{function n(r){var f=t[r],u;return void 0!==f?f.exports:(u=t[r]={exports:{}},i[r](u,u.exports,n),u.exports)}var i={864:(n,t)=>{t.C=function(n,t,i,r){var u=n||{},e=arguments.length;r&&(e-=1);for(var s=function(n){if(!o[n])return"continue";var t=o[n];Object.keys(t).forEach(function(n){var f,e=u[n],i=t[n];r&&(isObject(i)||Array.isArray(i))?isObject(i)?(f=e||{},u[n]=i({},f,i,r)):(f=e||[],u[n]=i([],f,i,r)):u[n]=i})},o=arguments,f=1;f<e;f++)s(f);return u}}},t={};n.d=(t,i)=>{for(var r in i)n.o(i,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})};n.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);n.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};(()=>{function re(n,t,i,r){r&&n?n.removeAttribute(t):n&&n.setAttribute(t,i)}function eht(){return["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound","enableHtmlSanitizer"]}function art(n,t){return n.prototype&&t in n.prototype}function lb(n,i){return t.isNullOrUndefined(n)||""===n?"":u.DataUtil.getObject(n,i)}function oht(n,i){return t.isNullOrUndefined(n)||""===n?"":u.DataUtil.getObject(n,i)}function ab(n,t){requestAnimationFrame(function(){try{t(null,n())}catch(n){t(n)}})}function ph(n){return!t.isNullOrUndefined(n)&&!t.isNullOrUndefined(n.columns)&&n.columns.length>0}function vb(n,t){for(var u,f=n.columns,r=t.columns,i=0;i<f.length;i++)if(r.length-1>=i)if(r[parseInt(i.toString(),10)].columns)for(u=0;u<r[parseInt(i.toString(),10)].columns.length;u++)f[parseInt(i.toString(),10)].columns[parseInt(u.toString(),10)].type=r[parseInt(i.toString(),10)].columns[parseInt(u.toString(),10)].type;else f[parseInt(i.toString(),10)].type=r[parseInt(i.toString(),10)].type}function vrt(n){for(var r=[],i=n.vRows,t=0;t<i.length;t++)i[parseInt(t.toString(),10)].isDataRow?r.push(i[parseInt(t.toString(),10)]):i[parseInt(t.toString(),10)].isDataRow||(r.push(i[parseInt(t.toString(),10)]),!i[parseInt(t.toString(),10)].isExpand&&i[parseInt(t.toString(),10)].isCaptionRow&&(t+=yrt(i[parseInt(t.toString(),10)],n)));n.vcRows=r}function yrt(n,i){var h,a,f;di=0;var e="gSummary",o=i.groupSettings.columns.length,s="records",r="items",l=n[""+e],c=0,u="aggregatesCount";if(l===n.data.count)return i.groupSettings.columns.length&&!t.isNullOrUndefined(n[""+u])&&n[""+u]?1!==i.groupSettings.columns.length?di+=0!==n.indent&&l<2?n[""+e]*(o-n.indent+(o-n.indent)*n[""+u]):n[""+e]*(o-n.indent+(o-n.indent-1)*n[""+u])+n[""+u]:1===i.groupSettings.columns.length&&(di+=n[""+e]*(o-n.indent)+n[""+u]):i.groupSettings.columns.length&&(di+=1!==i.groupSettings.columns.length?n[""+e]*(i.groupSettings.columns.length-n.indent):n[""+e]),di;for(h=0,a=n.data[""+r].length;h<a;h++)f=n.data[""+r][parseInt(h.toString(),10)],di+=f[""+r].length+(o===i.columns.length||t.isNullOrUndefined(f[""+r][""+s])?0:f[""+r][""+s].length),c+=t.isNullOrUndefined(f[""+r][""+s])||t.isNullOrUndefined(n[""+u])?f[""+r].length:f[""+r][""+s].length,f[""+r].GroupGuid&&0!==f[""+r].childLevels&&yb(f);return di+=n.data[""+r].length,t.isNullOrUndefined(n[""+u])||n[""+u]&&di&&0!==c&&(di+=(di-c)*n[""+u]+n[""+u]),di}function yb(n){for(var t,i="items",r=0,u=n[""+i].length;r<u;r++)t=n[""+i][parseInt(r.toString(),10)],di+=t.count,0!==t[""+i].childLevels&&yb(t)}function uf(n,i){for(var u,f=[],r=0,e=n.length;r<e;r++)u=i(n[parseInt(r.toString(),10)],r),t.isNullOrUndefined(u)||f.push(u);return f}function lo(n){for(var r=[],i=0;i<n.length;i++)r.push(t.extend({},ao(n[parseInt(i.toString(),10)]),{},!0));return r}function et(n){if(n)try{var i="<"!==n[0];return"function"==typeof n?t.compile(n):i&&document.querySelectorAll(n).length?t.compile(document.querySelector(n).innerHTML.trim()):t.compile(n)}catch(i){return t.compile(n)}}function ar(n,i){var r={},u=["style","class"];t.extend(r,i,{});"style"in r&&(t.setStyleAttribute(n,r[u[0]]),delete r[u[0]]);"class"in r&&(t.addClass([n],r[u[1]]),delete r[u[1]]);t.attributes(n,r)}function ff(n,i,r,u){for(var e=t.extend(n,i,r),o=Object.keys(e),f=0;f<o.length;f++)u&&-1!==u.indexOf(o[parseInt(f.toString(),10)])&&delete e[o[parseInt(f.toString(),10)]];return e}function wh(n,i){void 0===i&&(i=0);for(var r=0,u=t.isNullOrUndefined(n)?0:n.length;r<u;r++)n[parseInt(r.toString(),10)].columns?(n[parseInt(r.toString(),10)].index=t.isNullOrUndefined(n[parseInt(r.toString(),10)].index)?i:n[parseInt(r.toString(),10)].index,i++,i=wh(n[parseInt(r.toString(),10)].columns,i)):(n[parseInt(r.toString(),10)].index=t.isNullOrUndefined(n[parseInt(r.toString(),10)].index)?i:n[parseInt(r.toString(),10)].index,i++);return i}function se(n,i,r){for(var u,f=0,e=t.isNullOrUndefined(n)?0:n.length;f<e;f++)u=void 0,"string"==typeof n[parseInt(f.toString(),10)]?u=new ht({field:n[parseInt(f.toString(),10)]},r):n[parseInt(f.toString(),10)]instanceof ht&&!n[parseInt(f.toString(),10)].columns?u=n[parseInt(f.toString(),10)]:n[parseInt(f.toString(),10)].columns?(n[parseInt(f.toString(),10)].columns=se(n[parseInt(f.toString(),10)].columns,null,r),u=new ht(n[parseInt(f.toString(),10)],r)):u=new ht(n[parseInt(f.toString(),10)],r),u.type&&"checkbox"===u.type.toLowerCase()&&(u.allowReordering=!1),u.headerText=t.isNullOrUndefined(u.headerText)?u.foreignKeyValue||u.field||"":u.headerText,u.foreignKeyField=u.foreignKeyField||u.field,u.valueAccessor=("string"==typeof u.valueAccessor?t.getValue(u.valueAccessor,window):u.valueAccessor)||lb,u.headerValueAccessor="string"==typeof u.headerValueAccessor?t.getValue(u.headerValueAccessor,window):u.headerValueAccessor,u.width=i&&t.isNullOrUndefined(u.width)?200:u.width,t.isNullOrUndefined(u.visible)&&(u.visible=!0),n[parseInt(f.toString(),10)]=u;return n}function pb(n,i,r){var o=n.querySelector("span"),f=n.parentElement.getBoundingClientRect(),e=i.target.getBoundingClientRect(),u;o.className=r;n.style.display="";u=(t.isNullOrUndefined(i.clientY)?i.changedTouches[0].clientY:i.clientY)>n.offsetHeight+10;n.style.top=e.top-f.top+(u?-(n.offsetHeight+10):n.offsetHeight+10)+"px";n.style.left=function(n,t,i,r){var u=n.offsetWidth/2,f=cu(t).x;return f-i.left<u?i.left-r:i.right-f<u?i.right-r-2*u:f-r-u}(n,i,e,f.left)+"px";u?(n.querySelector(".e-downtail").style.display="",n.querySelector(".e-uptail").style.display="none"):(n.querySelector(".e-downtail").style.display="none",n.querySelector(".e-uptail").style.display="")}function ao(n){return n instanceof t.ChildProperty?t.getValue("properties",n):n}function i(n,t,i){for(var r=n;r&&!(i?r.id===t:r.classList.contains(t));)r=r.parentElement;return r}function wv(n,t){for(var r=-1,i=0,u=t.length;i<u;i++)if(t[parseInt(i.toString(),10)].isEqualNode(n)){r=i;break}return r}function bh(n,t){for(var i=0,r=t.length;i<r;i++)if(t[parseInt(i.toString(),10)]===n)return i;return-1}function bv(n){for(var i=[],t=0,r=n.length;t<r;t++)n[parseInt(t.toString(),10)].hasOwnProperty("properties")?i.push(n[parseInt(t.toString(),10)].properties):i.push(n[parseInt(t.toString(),10)]);return i}function kv(n,i){for(var u=[].slice.call(n.querySelectorAll(i)),r=0;r<u.length;r++)t.remove(u[parseInt(r.toString(),10)])}function cu(n){var i={};return i.x=t.isNullOrUndefined(n.clientX)?n.changedTouches[0].clientX:n.clientX,i.y=t.isNullOrUndefined(n.clientY)?n.changedTouches[0].clientY:n.clientY,i}function pi(n){return n+prt++}function nt(n,t){for(var i=0,r=t.length;i<r;i++)r===t.length?n.appendChild(t[parseInt(i.toString(),10)]):n.appendChild(t[0]);return n}function wrt(n,t,i){for(var r=n,u=[];r;)(i?r.id===t:r.classList.contains(t))&&u.push(r),r=r.parentElement;return u}function wb(n,i,r,f){if("Custom"===n){var e=r.customAggregate;return"string"==typeof e&&(e=t.getValue(e,window)),e?e.call(f,i,r):""}return r.field in i||i instanceof Array?u.DataUtil.aggregates[n.toLowerCase()](i,r.field):null}function oi(){if(null!==ny)return ny;var t,n=document.createElement("div");return n.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(n),t=n.offsetWidth-n.clientWidth|0,document.body.removeChild(n),ny=t}function brt(n,i){var r,u;return i&&void 0!==gv?gv:void 0!==dv?dv:(r=t.createElement("table",{className:yi,attrs:{role:"grid"}}),r.style.visibility="hidden",r.innerHTML='<tr><td class="e-rowcell">A<td><\/tr>',n.appendChild(r),u=r.querySelector("td").getBoundingClientRect(),n.removeChild(r),gv=u.height,dv=Math.ceil(u.height),i?gv:dv)}function sht(n){var i=t.createElement("table",{className:yi,attrs:{role:"grid"}}),r;return i.style.visibility="hidden",i.innerHTML='<tr><td class="e-rowcell">A<td><\/tr>',n.appendChild(i),r=i.querySelector("tr").getBoundingClientRect(),n.removeChild(i),r.height}function gi(n){return n.split(".").length>1}function vt(n){return void 0===n&&(n=""),n.replace(/\./g,"___")}function kh(n){return void 0===n&&(n=""),n.replace(/[^a-zA-Z0-9_.]/g,"\\$&")}function ty(n){return void 0===n&&(n=""),n.replace(/___/g,".")}function yr(n,t,r){var u=i(r,y),f=!u||u&&!u.classList.contains("e-insertedrow");return"beginEdit"===t&&f?!(n.isIdentity||n.isPrimaryKey||!n.allowEditing):!("add"===t&&n.isIdentity||f&&!n.allowEditing&&!n.isIdentity&&!n.isPrimaryKey)}function he(n,t){return!(!t||!t.element||0!==t.element.offsetWidth)||0!==n.getBoundingClientRect().width}function rr(n){var i=t.select("#"+n.element.id+"EditConfirm",n.element);return"Batch"===n.editSettings.mode&&(t.selectAll(".e-updatedtd",n.element).length||t.selectAll(".e-gridform.e-formvalidator",n.element).length)&&n.editSettings.showConfirmDialog&&(!i||i.classList.contains("e-popup-close"))}function nr(n,t){var r="e-wrap",i;for(n=n instanceof Array?n:[n],i=0;i<n.length;i++)t?n[parseInt(i.toString(),10)].classList.add(r):n[parseInt(i.toString(),10)].classList.remove(r)}function iy(n,t){var i,r=n.getService("valueFormatter");switch("date"!==t.type&&"datetime"!==t.type&&"dateonly"!==t.type||(i={type:"dateonly"===t.type?"date":t.type,skeleton:t.format},"string"==typeof t.format&&"yMd"!==t.format&&(i.format=t.format)),t.type){case"date":case"dateonly":case"datetime":t.setFormatter(r.getFormatFunction(i));t.setParser(r.getParserFunction(i));break;case"number":t.setFormatter(r.getFormatFunction({format:t.format}));t.setParser(r.getParserFunction({format:t.format}))}}function ui(n,i){for(var r,e,f=[],u=2;u<arguments.length;u++)f[u-2]=arguments[u];for(r=0,e=n.length;r<e;r++)i?(t.classList(n[parseInt(r.toString(),10)],f.slice(),[]),n[parseInt(r.toString(),10)].setAttribute("aria-selected","true")):(t.classList(n[parseInt(r.toString(),10)],[],f.slice()),n[parseInt(r.toString(),10)].removeAttribute("aria-selected"))}function krt(n){for(var i={},r=[],t=0;t<n.length;t++)n[parseInt(t.toString(),10)]in i||(r.push(n[parseInt(t.toString(),10)].toString()),i[n[parseInt(t.toString(),10)]]=1);return r}function bb(n,t,i){var s=t.element.style.display,u,f,r,e,o;t.element.style.display="block";u=t.width;f=tt.calculateRelativeBasedPosition(n,t.element);t.element.style.display=s;t.element.style.top=f.top+n.getBoundingClientRect().height-5+"px";r=f.left-u+n.clientWidth;i&&i.enableRtl?(e=i.element?i.element.clientWidth:0,o=n.getBoundingClientRect().right+u-e,t.element.style.left=o>1?r-4+"px":u+r-16+"px"):t.element.style.left=r<1?u+r-16+"px":r-4+"px"}function ry(n,t){n.popup.element.style.zIndex=(t.zIndex+1).toString()}function vo(n,r,u,f,e){var o;if(t.isNullOrUndefined(u.filterTemplate)){o="";"string"===f?o="strui-"+r:"number"===f?o="numberui-"+r:"boolean"===f?o="bool-ui-"+r:"date"!==f&&"datetime"!==f||(o="dateui-"+r);var s="in"===n||"notin"===n,h=i(e.element.querySelector("#multiselect"+o),"e-control-wrapper"),c=i(e.element.querySelector("#"+o),"e-popup-flmenu");h&&(h.style.display=s?"inline-flex":"none");c&&(c.style.display=s?"none":"inline-flex")}}function ce(n){var i=n.querySelector(".e-frame"),r=i.previousSibling;i.classList.contains("e-check")?(r.checked=!1,t.classList(i,["e-uncheck"],["e-check"])):(r.checked=!0,t.classList(i,["e-check"],["e-uncheck"]))}function ur(n,t){n.checked=t}function dh(n,i,r){var u=t.createElement("div",{className:r});return u.appendChild(i),u.setAttribute("data-uid",n),u}function yo(n,i){t.removeClass([n],["e-check","e-stop","e-uncheck"]);i?n.classList.add("e-check"):n.classList.add("e-uncheck")}function gh(n,i,r){for(var f,u=0;u<(t.isNullOrUndefined(i)?0:i.length);u++)t.setValue(i[parseInt(u.toString(),10)].field,nu(i[parseInt(u.toString(),10)],r),n.foreignKeyData);for(f=n.cells,u=0;u<f.length;u++)f[parseInt(u.toString(),10)].isForeignKey&&t.setValue("foreignKeyData",t.getValue(f[parseInt(u.toString(),10)].column.field,n.foreignKeyData),f[parseInt(u.toString(),10)])}function nu(n,i,r,f){var s=n.foreignKeyField,e=t.isNullOrUndefined(r)?lb(n.field,i):r,o,h;return e=t.isNullOrUndefined(e)?"":e,o=new u.Query,h=f||(n.dataSource instanceof u.DataManager&&n.dataSource.dataSource.json.length?n.dataSource.dataSource.json:n.columnData),e.getDay?o.where(au({field:s,operator:"equal",value:e,matchCase:!1})):o.where(s,"==",e,!1),new u.DataManager(h).executeLocal(o)}function po(n,t){var i;return t.some(function(t){return i=t,t.foreignKeyValue===n})&&i}function lu(n){return n<10?"0"+n:String(n)}function au(n,i,r){var o,c,h,f=t.extend({},ao(n)),s=t.extend({},ao(n)),e,l,a,v;return t.isNullOrUndefined(n.value)||""===n.value?new u.Predicate(f.field,f.operator,f.value,!1):(e=new Date(n.value),"dateonly"!==i||r?(n.operator=n.operator.toLowerCase(),"equal"===n.operator||"notequal"===n.operator)?("datetime"===i?(c=new Date(e.setSeconds(e.getSeconds()-1)),h=new Date(e.setSeconds(e.getSeconds()+2)),n.value=new Date(e.setSeconds(h.getSeconds()-1))):(c=new Date(e.setHours(0)-1),h=new Date(e.setHours(24))),f.value=c,s.value=h,"equal"===n.operator?(f.operator="greaterthan",s.operator="lessthan"):"notequal"===n.operator&&(f.operator="lessthanorequal",s.operator="greaterthanorequal"),l=new u.Predicate(f.field,f.operator,f.value,!1),a=new u.Predicate(s.field,s.operator,s.value,!1),o="equal"===n.operator?l.and(a):l.or(a)):("date"!==i||"lessthanorequal"!==n.operator&&"greaterthan"!==n.operator||(f.value=new Date(e.setHours(24)-1)),"string"==typeof f.value&&(f.value=new Date(f.value)),o=new u.Predicate(f.field,f.operator,f.value,!1)):("string"==typeof f.value&&(f.value=new Date(f.value)),v=f.value.getFullYear()+"-"+lu(f.value.getMonth()+1)+"-"+lu(f.value.getDate()),o=new u.Predicate(f.field,f.operator,v,!1)),n.setProperties?n.setProperties({ejpredicate:o},!0):n.ejpredicate=o,o)}function b(n){return n.enableVirtualization&&n.groupSettings.columns.length>0&&n.isVirtualAdaptive&&!n.groupSettings.enableLazyLoading}function d(n,i){var e;if(void 0===n&&(n=""),n){for(var r=i,f=n.split("."),u=0;u<f.length&&!t.isNullOrUndefined(r);u++)(r=r[f[parseInt(u.toString(),10)]],t.isUndefined(r))&&(e=f[parseInt(u.toString(),10)].charAt(0).toUpperCase()+f[parseInt(u.toString(),10)].slice(1),r=i[""+e]||i[(""+e).charAt(0).toLowerCase()+(""+e).slice(1)]);return r}}function nc(n,i){var r=new t.Internationalization,f="format",u="type";return"date"===i?"object"==typeof n?r.getDatePattern({type:n[""+u]?n[""+u]:"date",format:n[""+f]},!1):r.getDatePattern({type:"dateTime",skeleton:n},!1):"object"==typeof n?r.getDatePattern({type:n[""+u]?n[""+u]:"dateTime",format:n[""+f]},!1):r.getDatePattern({type:"dateTime",skeleton:n},!1)}function drt(n,i){for(var r,u,f={},e=0,o=n.getRowsObject();e<o.length;e++)r=o[e],r.isExpand&&!r.isDetailRow&&(u=n.allowPaging&&"AllPages"===n.printMode?r.index+n.pageSettings.currentPage*n.pageSettings.pageSize-n.pageSettings.pageSize:r.index,t.isNullOrUndefined(u)||(f[parseInt(u.toString(),10)]={},f[parseInt(u.toString(),10)].isExpand=!0,n.childGrid&&(f[parseInt(u.toString(),10)].gridModel=tc(r.childGrid,i),f[parseInt(u.toString(),10)].gridModel.query=n.childGrid.query)));return f}function tc(n,t){var i,u,f,r;if(void 0===t&&(t="Expanded"),i={},!n)return i;for(u=0,f=pv.printGridProp;u<f.length;u++)r=f[u],i[""+r]="columns"===r?bv(n[""+r]):"allowPaging"===r?"CurrentPage"===n.printMode:ao(n[""+r]);return i.enableHover=!1,(n.childGrid||n.detailTemplate)&&"None"!==t&&(i.expandedRows=drt(n,t)),i}function ic(n,i,r,u){var s=n||{},a=arguments.length,h;for(u&&(a-=1),h=1;h<a;h++)if(arguments[parseInt(h.toString(),10)])for(var c=arguments[parseInt(h.toString(),10)],e=Object.keys(Object.getPrototypeOf(c)).length?Object.keys(c).concat(grt(c)):Object.keys(c),f=0;f<e.length;f++){var v=s[e[parseInt(f.toString(),10)]],o=c[e[parseInt(f.toString(),10)]],l=void 0;u&&(t.isObject(o)||Array.isArray(o))?t.isObject(o)?(l=v||{},s[e[parseInt(f.toString(),10)]]=t.extend({},l,o,u)):(l=v||[],s[e[parseInt(f.toString(),10)]]=t.extend([],l,o,u)):s[e[parseInt(f.toString(),10)]]=o}return s}function grt(n){for(var t=[];Object.getPrototypeOf(n)&&Object.keys(Object.getPrototypeOf(n)).length;)t=t.concat(Object.keys(Object.getPrototypeOf(n))),n=Object.getPrototypeOf(n);return t}function rc(n){for(var u,i=0,r=0;r<(t.isNullOrUndefined(n)?0:n.length);r++)u=kb(n[parseInt(r.toString(),10)],0),i<u&&(i=u);return i+1}function kb(n,t){var f=t,u=[],i,r;if(n.columns){for(t++,i=0;i<n.columns.length;i++)u[parseInt(i.toString(),10)]=kb(n.columns[parseInt(i.toString(),10)],t);for(r=0;r<u.length;r++)f<u[parseInt(r.toString(),10)]&&(f=u[parseInt(r.toString(),10)]);t=f}return t}function nut(n,t){for(var i=0;i<t.length;i++)t[parseInt(i.toString(),10)].uid=t[parseInt(i.toString(),10)].isForeignKey?po(t[parseInt(i.toString(),10)].field,n.getForeignKeyColumns()).uid:n.enableColumnVirtualization?sut(n,t[parseInt(i.toString(),10)].field).uid:n.getColumnByField(t[parseInt(i.toString(),10)].field).uid}function uc(n){var t=document.defaultView.getComputedStyle(n,null).getPropertyValue("transform").replace(/,/g,"");return{width:parseFloat(t.split(" ")[4]),height:parseFloat(t.split(" ")[5])}}function le(n,t){n.classList.contains("e-bigger")&&t.classList.add("e-bigger")}function uy(n){var t=n.getContent().firstElementChild;return t.scrollWidth>t.offsetWidth?oi():0}function db(n,t){var i=0,f=n.getColumns(),u=30*t,e,r;for(n.isRowDragable()&&(i++,u+=30),i+=n.groupSettings.columns.length-t,u+=30*(n.groupSettings.columns.length-t),e=("auto"===n.width?n.element.offsetWidth:-1!==n.width.toString().indexOf("%")?n.element.getBoundingClientRect().width:parseInt(n.width.toString(),10))-uy(n),r=0;r<f.length;r++)if(f[parseInt(r.toString(),10)].visible&&(u+=parseInt(f[parseInt(r.toString(),10)].width.toString(),10),i++),u>e){i--;break}return i}function gb(n,t){for(var i,e,o,f,h,c,l,r=0,s=0,a=t.getVisibleFrozenLeftCount(),u=0;u<n.childNodes.length;u++){if(i=n.childNodes[parseInt(u.toString(),10)],a===s)break;if((i.classList.contains("e-groupcaption")||i.classList.contains("e-summarycell"))&&(s+=parseInt(i.getAttribute("colspan"),10)),i.classList.add("e-leftfreeze"),i.classList.contains("e-groupcaption")&&1===parseInt(i.getAttribute("colspan"),10)&&i.classList.add("e-freezeleftborder"),g(i,r,t.enableRtl,"Left"),(i.classList.contains("e-indentcell")||i.classList.contains("e-recordplusexpand")||i.classList.contains("e-recordpluscollapse"))&&(r+=30),i.classList.contains("e-groupcaption"))for(e=parseInt(i.getAttribute("colspan"),10),t.isRowDragable()&&(e--,r+=30),e-=t.groupSettings.columns.length-u,r+=30*(t.groupSettings.columns.length-u),o=t.getColumns(),f=0;f<o.length;f++){if(parseInt(i.getAttribute("colspan"),10)>1&&parseInt(o[parseInt(f.toString(),10)].width.toString(),10)+r>parseInt(t.width.toString(),10)-uy(t)){h=db(t,u);i.setAttribute("colspan",h.toString());break}if(o[parseInt(f.toString(),10)].visible&&(r+=parseInt(o[parseInt(f.toString(),10)].width.toString(),10),e--),0===e)break}i.classList.contains("e-summarycell")&&(c=i.getAttribute("data-mappinguid"),l=t.getColumnByUid(c),r+=parseInt(l.width.toString(),10))}}function tut(n,t){var i=t.getContent().firstElementChild;return n&&n.getBoundingClientRect().top-i.getBoundingClientRect().top+t.getRowHeight()>i.offsetHeight}function iut(n,t){return n&&n.getBoundingClientRect().top<t}function rut(n,t){var i=t.getRowHeight(),r=t.getContent().firstElementChild.scrollTop/i;return n<r+t.getContent().firstElementChild.offsetHeight/i&&n>r}function fy(n,t){var r,i=n.getPrimaryKeyFieldNames()[0];return n.getCurrentViewRecords().filter(function(n,u){i.includes(".")?d(i,n)===d(i,t)&&(r=u):n[""+i]===t[""+i]&&(r=u)}),r}function fc(n,t){var i=uut(t),r=new u.Deferred;return i.dataSource=r.resolve,i.action=n,{state:i,deffered:r}}function uut(n){var t=new u.UrlAdaptor,i=new u.DataManager({url:"",adaptor:new u.UrlAdaptor}),r=t.processQuery(i,n);return JSON.parse(r.data)}function ey(n){for(var r=n.getVisibleColumns(),u=0,f=0,i=0;i<r.length;i++)t.isUndefined(r[parseInt(i.toString(),10)].width)?f++:-1!==r[parseInt(i.toString(),10)].width.toString().indexOf("%")&&u++;return("auto"===n.width||"string"==typeof n.width&&-1!==n.width.indexOf("%"))&&!n.groupSettings.showGroupedColumn&&n.groupSettings.columns.length&&u&&!f}function wo(n,t,i,r,u){for(var o,e=r||0,f=u||0;f<t.length;f++)if(t[parseInt(f.toString(),10)]&&t[parseInt(f.toString(),10)].isDataRow){for(t[parseInt(f.toString(),10)].index=e,t[parseInt(f.toString(),10)].isAltRow=!!n.enableAltRow&&e%2!=0,i[parseInt(f.toString(),10)].setAttribute(c,(e+1).toString()),t[parseInt(f.toString(),10)].isAltRow?i[parseInt(f.toString(),10)].classList.add("e-altrow"):i[parseInt(f.toString(),10)].classList.remove("e-altrow"),o=0;o<i[parseInt(f.toString(),10)].cells.length;o++)i[parseInt(f.toString(),10)].cells[parseInt(o.toString(),10)].setAttribute("data-index",e.toString());e++}t.length||n.renderModule.emptyRow(!0)}function oy(n){for(var r,i,f,e=n.enableInfiniteScrolling&&n.infiniteScrollSettings.enableCache?n.getRowsObject():n.vRows,h=n.getRows(),o=0,u=0,s=0;o<e.length;o++)if(r=e[parseInt(o.toString(),10)],r.isDataRow){if(r.index=u,r.isAltRow=!!n.enableAltRow&&u%2!=0,i=n.getRowElementByUID(r.uid),!t.isNullOrUndefined(i)){for(h[parseInt(s.toString(),10)]=i,i.setAttribute(c,(u+1).toString()),r.isAltRow?i.classList.add("e-altrow"):i.classList.remove("e-altrow"),f=0;f<i.cells.length;f++)i.cells[parseInt(f.toString(),10)].setAttribute("data-index",u.toString());s++}u++}n.enableInfiniteScrolling&&n.infiniteScrollSettings.enableCache&&n.infiniteScrollModule.resetInfiniteCache(e)}function sy(n,i,r,u){for(var l,p,w,o,e=n.enableVirtualization?n.vRows:n.getRowsObject(),s=[],h=u||n.getRowObjectFromUID(i.target.closest("tr").getAttribute("data-uid")),f=0;f<i.rows.length;f++)l=n.getRowObjectFromUID(i.rows[parseInt(f.toString(),10)].getAttribute("data-uid")),h===l&&(o=e.indexOf(h)),s.push(e.splice(e.indexOf(l),1)[0]);if(t.isNullOrUndefined(o)?(o=e.indexOf(h),i.fromIndex>i.dropIndex?e.splice.apply(e,[o,0].concat(s)):e.splice.apply(e,[o+1,0].concat(s))):e.splice.apply(e,[o,0].concat(s)),!n.enableVirtualization&&!n.infiniteScrollSettings.enableCache){for(var v={},y=n.getCurrentViewRecords(),a=(f=0,r.length);f<a;f++)p=parseInt(r[parseInt(f.toString(),10)].getAttribute(c),10)-1,v[parseInt(f.toString(),10)]=y[parseInt(p.toString(),10)];for(w=n.getRows(),f=0,a=r.length;f<a;f++)w[parseInt(f.toString(),10)]=r[parseInt(f.toString(),10)],y[parseInt(f.toString(),10)]=v[parseInt(f.toString(),10)]}n.enableInfiniteScrolling&&n.infiniteScrollSettings.enableCache&&n.infiniteScrollModule.resetInfiniteCache(e)}function fut(n,t,i,r){var u=n.dataToBeUpdated[""+i].concat(t[""+i]).reduce(function(n,t){return n[t[""+r]]=void 0===n[t[""+r]]?t:Object.assign(n[t[""+r]],t),n},{});n.dataToBeUpdated[""+i]=Object.keys(u).map(function(n){return u[""+n]})}function bo(n){n.contentModule.rowElements=n.enableInfiniteScrolling&&(n.childGrid||n.detailTemplate)?[].slice.call(n.getContentTable().rows).filter(function(n){return(n.classList.contains("e-row")||n.classList.contains("e-detailrow"))&&!n.classList.contains("e-addedrow")}):[].slice.call(n.element.querySelectorAll(".e-row:not(.e-addedrow):not(.e-cloneproperties .e-row)"))}function hht(n,t,i){for(var f=n.children.length,u=0,r=0;r<f;r++,u++)r>=t&&r<i||(n.removeChild(n.children[parseInt(u.toString(),10)]),u--)}function ko(n,t){var i=n.createElement("div",{className:"e-grid-popup",id:n.element.id+"_e-popup"}),f=tt.calculatePosition(n.element,"left","Top"),r,u;document.getElementById(n.element.id+"_e-popup")&&(i=document.getElementById(n.element.id+"_e-popup"));i.style.top=f.top+"px";i.style.left=f.left+"px";i.style.zIndex=t.zIndex.toString();i.style.width=t.element.offsetWidth+"px";i.appendChild(t.element);r=document.querySelector(".sb-demo-section,.e-grid-dialog-fixed");r?(u=tt.calculateRelativeBasedPosition(n.element,r),i.style.top=u.top+"px",i.style.left=u.left+"px",r.insertBefore(i,r.firstChild)):document.body.insertBefore(i,document.body.firstChild)}function ec(n,t){var i=[];return i.push(n.uid),nk(n,i),i.indexOf(t)>-1}function nk(n,t){for(var i=0;i<n.columns.length;i++)n.columns[parseInt(i.toString(),10)].uid&&t.push(n.columns[parseInt(i.toString(),10)].uid),n.columns[parseInt(i.toString(),10)].columns&&n.columns[parseInt(i.toString(),10)].columns.length&&nk(n.columns[parseInt(i.toString(),10)],t)}function ef(n){return n.columns[0].freeze||n.columns[0].isFrozen?"Left"===n.columns[0].freeze||n.columns[0].isFrozen?"Left":"Right"===n.columns[0].freeze?"Right":"Fixed"===n.columns[0].freeze?"Fixed":"None":n.columns[0].columns&&n.columns[0].columns.length?ef(n.columns[0]):"None"}function of(n){if(n.querySelector(".e-fixedfreeze"))for(var i=[].slice.call(n.querySelectorAll(".e-filterbarcell:not(.e-hide),.e-summarycell:not(.e-hide),.e-headercell:not(.e-hide),.e-rowcell:not(.e-hide)")),t=0;t<i.length;t++)i[parseInt(t.toString(),10)].classList.contains("e-fixedfreeze")&&(!i[t-1]||i[t-1]&&!i[t-1].classList.contains("e-fixedfreeze"))&&i[parseInt(t.toString(),10)].classList.add("e-freezeleftborder"),i[parseInt(t.toString(),10)].classList.contains("e-fixedfreeze")&&(!i[t+1]||i[t+1]&&!i[t+1].classList.contains("e-fixedfreeze"))&&i[parseInt(t.toString(),10)].classList.add("e-freezerightborder")}function g(n,t,i,r){"Left"===r&&(i?n.style.right=t+"px":n.style.left=t+"px");"Right"===r&&(i?n.style.left=t+"px":n.style.right=t+"px")}function tk(n,t,i,r){var f=n.getColumns(),s=t.index,e,o,u;if("Left"===t.freeze&&"Left"!==t.border){for(e=s+(r-1);!1===f[parseInt(e.toString(),10)].visible;)e++;"Left"===f[parseInt(e.toString(),10)].border&&i.classList.add("e-freezeleftborder")}else if("Right"===t.freeze||"Fixed"===t.freeze){for(o=0,u=s+1;u<s+r&&u!==f.length;u++)f[parseInt(u.toString(),10)].visible?o+=parseInt(f[parseInt(u.toString(),10)].width.toString(),10):r++;n.enableRtl?i.style.left=parseInt(i.style.left,10)-o+"px":i.style.right=parseInt(i.style.right,10)-o+"px"}}function hy(n,t,i){for(var u=n.getRowByIndex(t),r=0;r<u.cells.length;r++)if(parseInt(u.cells[parseInt(r.toString(),10)].getAttribute("aria-colindex").toString(),10)-1===i)return u.cells[parseInt(r.toString(),10)];return null}function ae(n,t,i){if("Left"===t.freeze||t.isFrozen)if(i.classList.add("e-leftfreeze"),"Left"===t.border&&i.classList.add("e-freezeleftborder"),0===t.index)g(i,30*n.getIndentCount(),n.enableRtl,"Left"),n.enableColumnVirtualization&&(t.valueX=30*n.getIndentCount());else{for(var u=n.getColumns(),f=30*n.getIndentCount(),r=0;r<u.length&&t.uid!==u[parseInt(r.toString(),10)].uid;r++)u[parseInt(r.toString(),10)].visible&&(f+=parseFloat(u[parseInt(r.toString(),10)].width.toString()));g(i,f,n.enableRtl,"Left");n.enableColumnVirtualization&&(t.valueX=f)}else if("Right"===t.freeze)if(i.classList.add("e-rightfreeze"),u=n.getColumns(),"Right"===t.border&&i.classList.add("e-freezerightborder"),t.index===u[u.length-1].index)g(i,f="Right"===n.getFrozenMode()&&n.isRowDragable()?30:0,n.enableRtl,"Right"),n.enableColumnVirtualization&&(t.valueX=f);else{for(f="Right"===n.getFrozenMode()&&n.isRowDragable()?30:0,r=u.length-1;r>=0&&t.uid!==u[parseInt(r.toString(),10)].uid;r--)u[parseInt(r.toString(),10)].visible&&(f+=parseFloat(u[parseInt(r.toString(),10)].width.toString()));g(i,f,n.enableRtl,"Right");n.enableColumnVirtualization&&(t.valueX=f)}else if("Fixed"===t.freeze){for(i.classList.add("e-fixedfreeze"),u=n.getColumns(),f=0,n.getVisibleFrozenLeftCount()?f=30*n.getIndentCount():"Right"===n.getFrozenMode()&&(f=30*n.groupSettings.columns.length),r=0;r<u.length&&t.uid!==u[parseInt(r.toString(),10)].uid;r++)("Left"===u[parseInt(r.toString(),10)].freeze||u[parseInt(r.toString(),10)].isFrozen||"Fixed"===u[parseInt(r.toString(),10)].freeze)&&u[parseInt(r.toString(),10)].visible&&(f+=parseFloat(u[parseInt(r.toString(),10)].width.toString()));for(g(i,f-1,n.enableRtl,"Left"),f="Right"===n.getFrozenMode()&&n.isRowDragable()?30:0,r=u.length-1;r>=0&&t.uid!==u[parseInt(r.toString(),10)].uid;r--)"Right"!==u[parseInt(r.toString(),10)].freeze&&"Fixed"!==u[parseInt(r.toString(),10)].freeze||u[parseInt(r.toString(),10)].visible&&(f+=parseFloat(u[parseInt(r.toString(),10)].width.toString()));g(i,f-1,n.enableRtl,"Right")}else i.classList.add("e-unfreeze")}function ik(n,t,i){return[].slice.call(n.getDataRows()[parseInt(i.toString(),10)].getElementsByClassName(v))}function rk(n,t,i,r){return ik(n,0,i)[parseInt(r.toString(),10)]}function uk(n,t,i,r,u,f,e){e||n.getFreezeTableName()===iit||!t&&n.getFreezeTableName()===oh||1===f?i[vt(n.field)]=n.validationRules:"movable"!==n.getFreezeTableName()&&n.getFreezeTableName()?n.getFreezeTableName()===oh&&(u[vt(n.field)]=n.validationRules):r[vt(n.field)]=n.validationRules}function eut(n,i,r,u){var f,e=new t.Internationalization,o;if("number"===i)try{f=e.getNumberPattern({format:n,currency:u,useGrouping:!0},!0)}catch(i){f=n}else if("date"===i||"time"===i||"datetime"===i)try{if(f=e.getDatePattern({skeleton:n,type:i},r),t.isNullOrUndefined(f))throw"error";}catch(t){try{f=e.getDatePattern({format:n,type:i},r)}catch(i){f=n}}else f=n;return"number"!==i&&(o={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"},f=f.replace(/G|H|c|'| a|yy|y|EEEE|E/g,function(n){return o[""+n]})),f}function fk(n){if(n.enableAdaptiveUI)for(var i=document.getElementsByClassName("e-responsive-dialog"),t=0;t<i.length;t++)i[parseInt(t.toString(),10)].classList.add("e-bigger")}function cy(n,t){for(var r,f=n.split(".").length,e=n.split("."),u=t,i=0;i<f;i++)u=r=u[e[parseInt(i.toString(),10)]];return r}function ek(n,r,u,f,e,o){for(var h,l,c=Object.keys(n),a=r,s=0;s<c.length;s++){if(h=n[c[parseInt(s.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(r.toString(),10)],e&&!e.isFrozenGrid()&&!e.isRowDragable()){if(h=!t.isNullOrUndefined(h)&&(parseInt(h.getAttribute("aria-colindex"),10)-1===r||i(h,"e-addedrow")&&h.parentElement.childNodes[parseInt(r.toString(),10)]===h)?h:n[parseInt(s.toString(),10)].querySelector('td[aria-colindex="'+(r+1)+'"]'),t.isNullOrUndefined(h))continue;r=e.getContentTable().querySelector(".e-detailrowcollapse, .e-detailrowexpand")?h.cellIndex-1:h.cellIndex}n[c[parseInt(s.toString(),10)]].querySelectorAll("td.e-rowcell").length&&h&&((t.setStyleAttribute(n[c[parseInt(s.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(r.toString(),10)],{display:u}),n[c[parseInt(s.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(r.toString(),10)].classList.contains("e-hide")&&t.removeClass([n[c[parseInt(s.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(r.toString(),10)]],["e-hide"]),o&&e.isRowDragable()||e&&e.isDetail())?(l=r+1,f[c[parseInt(s.toString(),10)]].cells[parseInt(l.toString(),10)].visible=""===u):t.isNullOrUndefined(f[c[parseInt(s.toString(),10)]])||(f[c[parseInt(s.toString(),10)]].cells[parseInt(r.toString(),10)].visible=""===u,!1===f[c[parseInt(s.toString(),10)]].cells[parseInt(r.toString(),10)].visible&&n[c[parseInt(s.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(r.toString(),10)].classList.add("e-hide")),r=a)}}function yt(n,t,i,r){for(var u,f=0,e=t;f<e.length;f++)u=e[f],i?n.on(u.event,u.handler,r):n.off(u.event,u.handler)}function go(n,t,i,r){var u=vt(t.field);return r=Object.assign(r,{id:n.element.id+u,name:u,"data-mappinguid":t.uid}),n.createElement("input",{className:i,attrs:r})}function out(n,t){for(var f,u,i=0,r=n.columnModel;i<r.length;i++)if(u=r[i],u.uid===t){f=u;break}return f}function sut(n,t){var f,i,r,u;for(n.columnModel||n.getColumns(),i=0,r=n.columnModel;i<r.length;i++)if(u=r[i],u.field===t){f=u;break}return f}function ok(n,t,i,r){r.eventHandlers[""+n]={};for(var u=0;u<t.length;u++)r.eventHandlers[""+n][t[parseInt(u.toString(),10)]]=i[t[parseInt(u.toString(),10)]]}function sk(n,t,i){for(var r=0;r<t.length&&!n.isDestroyed;r++)n.removeEventListener(t[parseInt(r.toString(),10)],i.eventHandlers[n.element.id][t[parseInt(r.toString(),10)]])}function vu(n,t,i){n.destroyTemplate(t,void 0,i);n.isReact&&n.renderTemplates()}function yu(n){for(var i=0;i<n.length;i++)t.remove(n[i])}function oc(n,t){for(var i=0;i<n.length;i++)t.insertBefore(n[i],t.children[i])}function ns(n,i){var r=i?t.createElement("li",{className:"e-cclist"}):t.createElement("div",{className:"e-ftrchk"}),u;return r.style.visibility="hidden",i&&(r.style.listStyle="none"),r.innerHTML=i?'<div class="e-ccheck"><div class="e-checkbox-wrapper"><span class="e-frame e-icons e-check"><\/span><span class="e-label">A<\/span><\/div><\/div>':'<div class="e-checkbox-wrapper"><span class="e-frame e-icons e-check"><\/span><span class="e-label e-checkboxfiltertext">A<\/div><\/span>',n.appendChild(r),u=r.getBoundingClientRect(),n.removeChild(r),Math.round(u.height)}function tr(n){return parseInt(n.getAttribute(c),10)-1}function ly(n){return n.parentDetails&&n.parentDetails.parentInstObj?ly(n.parentDetails.parentInstObj):n}function ay(n,i,r){for(var f=[],u=0;u<n.length;u++){var o=r.parent.getColumnByField(n[parseInt(u.toString(),10)]),e="null"===i[parseInt(u.toString(),10)]?null:i[parseInt(u.toString(),10)],s={field:n[parseInt(u.toString(),10)],predicate:"or",uid:o.uid,operator:"equal",type:o.type,matchCase:r.allowCaseSensitive,ignoreAccent:r.parent.filterSettings.ignoreAccent};""===e||t.isNullOrUndefined(e)?f=f.concat(tu.generateNullValuePredicates(s)):f.push(ff({},{value:e},s))}return tu.getPredicate(f)}function vy(n){for(var u,i=[],t=0,r=Object.keys(n);t<r.length;t++)u=r[t],i.push(n[""+u]);return i}function ts(n,t){for(var r=[],u=[],i=n;i>=0&&(!t[parseInt(i.toString(),10)].isCaptionRow||-1!==r.indexOf(t[parseInt(i.toString(),10)].data.field)||!(t[parseInt(i.toString(),10)].indent<t[parseInt(n.toString(),10)].indent||i===n)||(r.push(t[parseInt(i.toString(),10)].data.field),u.push(t[parseInt(i.toString(),10)].data.key),0!==t[parseInt(i.toString(),10)].indent));i--);return{fields:r,keys:u}}function fr(n,t,i){var e=n,o=t,f=!1,r,s,u;if(i)for(r=o[0];r<e.length;r++)for(s=e[parseInt(r.toString(),10)],u=0;u<s.length;u++){if(f&&1===e[parseInt(r.toString(),10)][parseInt(u.toString(),10)])return[r,u];f||o.toString()!==[r,u].toString()||(f=!0)}else for(r=o[0];r>=0;r--)for(u=(s=e[parseInt(r.toString(),10)]).length-1;u>=0;u--){if(f&&1===e[parseInt(r.toString(),10)][parseInt(u.toString(),10)])return[r,u];f||o.toString()!==[r,u].toString()||(f=!0)}return o}function hut(n){return n.charAt(0).toUpperCase()+n.slice(1)}function sc(n){return!(b(n)||n.groupSettings.enableLazyLoading||!n.enableVirtualization&&n.enableColumnVirtualization)}function hk(n){for(var r,t=[],i=0;i<n.length;i++)r=Math.ceil(n[parseInt(i.toString(),10)]/2),-1===t.indexOf(r)&&t.push(r);return t}function gut(n,t){for(var r,i=0;i<n.length;i++)for(r=0;r<n[parseInt(i.toString(),10)].columns.length;r++)t(n[parseInt(i.toString(),10)].columns[parseInt(r.toString(),10)],n[parseInt(i.toString(),10)])}function vft(n,t,r,u,f){var o="Dialog"!==t,s=nc(n.column.format,n.column.type),e=d(n.column.field,n.rowData);return{floatLabelType:o?"Never":"Always",value:e=e?new Date(e):null,format:s,placeholder:o?"":n.column.headerText,enableRtl:r,enabled:yr(n.column,n.requestType,n.element)&&he(i(n.element,"e-rowcell"),f&&f.parent?f.parent:null),cssClass:u||null,close:cct.bind(f)}}function cct(n){n.event&&"escape"===n.event.action&&(this.edit.editCellDialogClose=!0)}var cc,lc,pv,di,prt,dv,gv,at,ny,tu,lk,ak,wft;cc={};n.r(cc);n.d(cc,{Aggregate:()=>ict,AutoCompleteEditCell:()=>ult,BatchEdit:()=>lft,BatchEditRender:()=>uft,BooleanEditCell:()=>oft,BooleanFilterUI:()=>kut,Cell:()=>bi,CellRenderer:()=>fi,CellRendererFactory:()=>cit,CellType:()=>e,CheckBoxFilter:()=>vk,CheckBoxFilterBase:()=>tu,Clipboard:()=>bit,Column:()=>ht,ColumnChooser:()=>vct,ColumnMenu:()=>kct,ComboboxEditCell:()=>elt,CommandColumn:()=>pct,CommandColumnModel:()=>bft,CommandColumnRenderer:()=>pft,ContentRender:()=>vh,ContextMenu:()=>wct,Data:()=>fh,DateFilterUI:()=>yy,DatePickerEditCell:()=>dk,DefaultEditCell:()=>cft,DetailRow:()=>bht,DialogEdit:()=>aft,DialogEditRender:()=>fft,DropDownEditCell:()=>sft,Edit:()=>act,EditCellBase:()=>wr,EditRender:()=>eft,EditSettings:()=>crt,ExcelExport:()=>td,ExcelFilter:()=>dut,ExcelFilterBase:()=>cut,ExportHelper:()=>hf,ExportValueFormatter:()=>nd,ExternalMessage:()=>yut,Filter:()=>py,FilterCellRenderer:()=>wut,FilterSettings:()=>rrt,FlMenuOptrUI:()=>but,ForeignKey:()=>gct,Freeze:()=>bct,Global:()=>at,Grid:()=>yv,GridColumn:()=>ed,Group:()=>sf,GroupCaptionCellRenderer:()=>oit,GroupCaptionEmptyCellRenderer:()=>sit,GroupLazyLoadRenderer:()=>rd,GroupModelGenerator:()=>ah,GroupSettings:()=>hrt,HeaderCellRenderer:()=>eb,HeaderRender:()=>fb,IndentCellRenderer:()=>cv,InfiniteScroll:()=>nlt,InfiniteScrollSettings:()=>irt,InlineEdit:()=>kk,InlineEditRender:()=>wk,InterSectionObserver:()=>nft,LazyLoadGroup:()=>ilt,LoadingIndicator:()=>lrt,Logger:()=>kit,MaskedTextBoxCellEdit:()=>ylt,MultiSelectEditCell:()=>slt,NormalEdit:()=>bk,NumberFilterUI:()=>ak,NumericContainer:()=>lut,NumericEditCell:()=>hft,Page:()=>hc,Pager:()=>ck,PagerDropDown:()=>vut,PagerMessage:()=>aut,PdfExport:()=>id,Predicate:()=>trt,Print:()=>pv,Render:()=>hit,RenderType:()=>ni,Reorder:()=>pht,Resize:()=>wy,ResizeSettings:()=>srt,ResponsiveDialogAction:()=>a,ResponsiveDialogRenderer:()=>sb,ResponsiveToolbarAction:()=>bu,Row:()=>cr,RowDD:()=>wht,RowDropSettings:()=>ert,RowModelGenerator:()=>eu,RowRenderer:()=>ci,Scroll:()=>hb,Search:()=>pit,SearchSettings:()=>frt,Selection:()=>yit,SelectionSettings:()=>urt,ServiceLocator:()=>lit,Sort:()=>is,SortDescriptor:()=>git,SortSettings:()=>nrt,StackedColumn:()=>kft,StackedHeaderCellRenderer:()=>ob,StringFilterUI:()=>lk,TextWrapSettings:()=>ort,TimePickerEditCell:()=>clt,ToggleEditCell:()=>alt,Toolbar:()=>kht,ToolbarItem:()=>by,ValueFormatter:()=>wu,VirtualContentRenderer:()=>ift,VirtualElementHandler:()=>pk,VirtualHeaderRenderer:()=>rft,VirtualRowModelGenerator:()=>yk,VirtualScroll:()=>rct,accessPredicate:()=>tot,actionBegin:()=>p,actionComplete:()=>s,actionFailure:()=>ye,addBegin:()=>det,addBiggerDialog:()=>fk,addComplete:()=>get,addDeleteAction:()=>pp,addFixedColumnBorder:()=>of,addRemoveActiveClasses:()=>ui,addRemoveEventListener:()=>yt,addStickyColumnPosition:()=>ae,addedRecords:()=>lr,addedRow:()=>ii,afterContentRender:()=>aot,afterFilterColumnMenuClose:()=>oo,appendChildren:()=>nt,appendInfiniteContent:()=>ea,applyBiggerTheme:()=>le,applyStickyLeftRightPosition:()=>g,ariaColIndex:()=>ft,ariaRowIndex:()=>c,autoCol:()=>du,batchAdd:()=>gc,batchCancel:()=>yf,batchCnfrmDlgCancel:()=>ktt,batchDelete:()=>nl,batchEditFormRendered:()=>pn,batchForm:()=>an,beforeAutoFill:()=>eg,beforeBatchAdd:()=>vd,beforeBatchCancel:()=>yn,beforeBatchDelete:()=>yd,beforeBatchSave:()=>pd,beforeCellFocused:()=>pf,beforeCheckboxRenderer:()=>rtt,beforeCheckboxRendererQuery:()=>ptt,beforeCheckboxfilterRenderer:()=>btt,beforeCopy:()=>ug,beforeCustomFilterOpen:()=>wn,beforeDataBound:()=>es,beforeDetailTemplateDetach:()=>tb,beforeExcelExport:()=>pg,beforeFltrcMenuOpen:()=>kn,beforeFragAppend:()=>tw,beforeOpen:()=>rb,beforeOpenAdaptiveDialog:()=>ip,beforeOpenColumnChooser:()=>ng,beforePaste:()=>fg,beforePdfExport:()=>dg,beforePrint:()=>gy,beforeRefreshOnDataChange:()=>va,beforeStartEdit:()=>vn,beginEdit:()=>wd,bulkSave:()=>lp,cBoxFltrBegin:()=>ta,cBoxFltrComplete:()=>df,calculateAggregate:()=>wb,cancelBegin:()=>vs,capitalizeFirstLetter:()=>hut,captionActionComplete:()=>nv,cellDeselected:()=>dy,cellDeselecting:()=>ky,cellEdit:()=>bd,cellFocused:()=>ss,cellSave:()=>kd,cellSaved:()=>tl,cellSelected:()=>us,cellSelecting:()=>we,cellSelectionBegin:()=>pet,cellSelectionComplete:()=>vg,change:()=>te,changedRecords:()=>gf,checkBoxChange:()=>rg,checkDepth:()=>kb,checkIsVirtual:()=>sc,checkScrollReset:()=>ctt,clearReactVueTemplates:()=>vu,click:()=>kt,closeBatch:()=>lot,closeEdit:()=>eo,closeFilterDialog:()=>ca,closeInline:()=>ytt,colGroup:()=>hi,colGroupRefresh:()=>ul,columnChooserCancelBtnClick:()=>ntt,columnChooserClose:()=>yot,columnChooserOpened:()=>ln,columnChooserSearch:()=>vot,columnChooserUpdate:()=>pot,columnDataStateChange:()=>sn,columnDeselected:()=>sd,columnDeselecting:()=>od,columnDrag:()=>ku,columnDragStart:()=>af,columnDragStop:()=>ll,columnDrop:()=>vf,columnMenuClick:()=>fn,columnMenuClose:()=>on,columnMenuOpen:()=>en,columnPositionChanged:()=>ke,columnSelected:()=>dc,columnSelecting:()=>kc,columnSelectionBegin:()=>vet,columnSelectionComplete:()=>yet,columnVisibilityChanged:()=>br,columnWidthChanged:()=>be,columnsPrepared:()=>na,commandClick:()=>sg,commandColumnDestroy:()=>rv,compareChanges:()=>fut,componentRendered:()=>uot,content:()=>lt,contentReady:()=>k,contextMenuClick:()=>tn,contextMenuClose:()=>un,contextMenuOpen:()=>rn,create:()=>sh,createCboxWithWrap:()=>dh,createEditElement:()=>go,createVirtualValidationForm:()=>ih,created:()=>dft,crudAction:()=>yp,customFilterClose:()=>ww,customFilterOpen:()=>bn,dataBound:()=>ti,dataReady:()=>wi,dataSourceChanged:()=>nw,dataSourceModified:()=>de,dataStateChange:()=>kf,dblclick:()=>no,deleteBegin:()=>not,deleteComplete:()=>vp,deletedRecords:()=>ne,destroy:()=>l,destroyAutoFillElements:()=>sl,destroyChildGrid:()=>ga,destroyEditForm:()=>so,destroyForm:()=>al,destroyed:()=>gft,detachDetailTemplate:()=>uh,detailDataBound:()=>fs,detailIndentCellInfo:()=>ew,detailLists:()=>dit,detailStateChange:()=>fw,dialogDestroy:()=>cs,distinctStringValues:()=>krt,doesImplementInterface:()=>art,doubleTap:()=>vl,downArrow:()=>sv,editBegin:()=>bet,editComplete:()=>ket,editNextValCell:()=>ys,editReset:()=>bs,editedRow:()=>ut,endAdd:()=>net,endDelete:()=>tet,endEdit:()=>iet,ensureFirstRow:()=>iut,ensureLastRow:()=>tut,enter:()=>hv,enterKeyHandler:()=>nh,eventPromise:()=>fc,excelAggregateQueryCellInfo:()=>lw,excelExportComplete:()=>wg,excelHeaderQueryCellInfo:()=>kg,excelQueryCellInfo:()=>bg,expandChildGrid:()=>dl,exportDataBound:()=>cn,exportDetailDataBound:()=>wp,exportDetailTemplate:()=>bp,exportGroupCaption:()=>rl,exportRowDataBound:()=>iw,extend:()=>ff,extendObjWithFn:()=>ic,filterAfterOpen:()=>rp,filterBeforeOpen:()=>up,filterBegin:()=>fet,filterCboxValue:()=>gn,filterChoiceRequest:()=>il,filterCmenuSelect:()=>pw,filterComplete:()=>fp,filterDialogClose:()=>gs,filterDialogCreated:()=>io,filterMenuClose:()=>vi,filterOpen:()=>ls,filterSearchBegin:()=>og,findCellIndex:()=>fr,fltrPrevent:()=>ro,focus:()=>ie,foreignKeyData:()=>gp,freezeRefresh:()=>iot,freezeRender:()=>ru,frozenContent:()=>gtt,frozenDirection:()=>ef,frozenHeader:()=>nit,frozenHeight:()=>rot,frozenLeft:()=>iit,frozenRight:()=>oh,generateExpandPredicates:()=>ay,generateQuery:()=>bf,getActualPropFromColl:()=>bv,getActualProperties:()=>ao,getActualRowHeight:()=>sht,getAggregateQuery:()=>eot,getCellByColAndRowIndex:()=>rk,getCellFromRow:()=>hy,getCellsByTableName:()=>ik,getCloneProperties:()=>eht,getCollapsedRowsCount:()=>yrt,getColumnByForeignKeyValue:()=>po,getColumnModelByFieldName:()=>sut,getColumnModelByUid:()=>out,getComplexFieldID:()=>vt,getCustomDateFormat:()=>nc,getDatePredicate:()=>au,getEditedDataIndex:()=>fy,getElementIndex:()=>wv,getExpandedState:()=>drt,getFilterBarOperator:()=>ttt,getFilterMenuPostion:()=>bb,getForeignData:()=>nu,getForeignKeyData:()=>as,getGroupKeysAndFields:()=>ts,getListHeight:()=>ns,getNumberFormat:()=>eut,getObject:()=>d,getParentIns:()=>ly,getParsedFieldID:()=>kh,getPosition:()=>cu,getPredicates:()=>vy,getPrintGridModel:()=>tc,getPrototypesOfObj:()=>grt,getRowHeight:()=>brt,getRowIndexFromElement:()=>tr,getScrollBarWidth:()=>oi,getScrollWidth:()=>uy,getStateEventArgument:()=>uut,getTransformValues:()=>uc,getUid:()=>pi,getUpdateUsingRaf:()=>ab,getVirtualData:()=>nf,getVisiblePage:()=>hk,getZIndexCalcualtion:()=>ry,gridChkBox:()=>rf,gridContent:()=>it,gridFooter:()=>fu,gridHeader:()=>st,groupAggregates:()=>iu,groupBegin:()=>het,groupCaptionRow:()=>tit,groupCaptionRowLeftRightPos:()=>gb,groupCollapse:()=>aa,groupComplete:()=>el,groupReorderRowObject:()=>sy,headerCellInfo:()=>pc,headerContent:()=>ct,headerDrop:()=>wf,headerRefreshed:()=>bt,headerValueAccessor:()=>oht,hierarchyPrint:()=>kl,immutableBatchCancel:()=>stt,inArray:()=>bh,inBoundModelChanged:()=>wt,infiniteAppendElements:()=>oc,infiniteCrudCancel:()=>vtt,infiniteEditHandler:()=>ds,infinitePageQuery:()=>ua,infiniteRemoveElements:()=>yu,infiniteScrollComplete:()=>nb,infiniteScrollHandler:()=>ra,infiniteShowHide:()=>fa,initForeignKeyColumn:()=>yl,initialCollapse:()=>ha,initialEnd:()=>pt,initialFrozenColumnIndex:()=>ub,initialLoad:()=>or,isActionPrevent:()=>rr,isCellHaveWidth:()=>he,isChildColumn:()=>ec,isComplexField:()=>gi,isEditable:()=>yr,isExportColumns:()=>ph,isGroupAdaptive:()=>b,isRowEnteredInGrid:()=>rut,ispercentageWidth:()=>ey,iterateArrayOrObject:()=>uf,iterateExtend:()=>lo,keyPressed:()=>rt,lastRowCellBorderUpdated:()=>dtt,lazyLoadGroupCollapse:()=>cg,lazyLoadGroupExpand:()=>hg,lazyLoadScrollHandler:()=>vw,leftRight:()=>ir,load:()=>yc,measureColumnDepth:()=>rc,menuClass:()=>o,modelChanged:()=>ot,movableContent:()=>eh,movableHeader:()=>ov,nextCellIndex:()=>att,onEmpty:()=>ai,onResize:()=>ig,open:()=>dt,padZero:()=>lu,pageBegin:()=>ret,pageComplete:()=>lg,pageDown:()=>uit,pageUp:()=>rit,pagerRefresh:()=>bw,parents:()=>wrt,parentsUntil:()=>i,partialRefresh:()=>gl,pdfAggregateQueryCellInfo:()=>itt,pdfExportComplete:()=>kp,pdfHeaderQueryCellInfo:()=>nn,pdfQueryCellInfo:()=>gg,performComplexDataOperation:()=>cy,prepareColumns:()=>se,preventBatch:()=>si,preventFrozenScrollRefresh:()=>ltt,printComplete:()=>np,printGridInit:()=>hn,pushuid:()=>nk,queryCellInfo:()=>cf,recordAdded:()=>bl,recordClick:()=>gd,recordDoubleClick:()=>dd,recursive:()=>yb,refreshAggregateCell:()=>ol,refreshAggregates:()=>cp,refreshComplete:()=>yg,refreshCustomFilterClearBtn:()=>yw,refreshCustomFilterOkBtn:()=>dr,refreshExpandandCollapse:()=>gr,refreshFilteredColsUid:()=>nut,refreshFooterRenderer:()=>sr,refreshForeignData:()=>gh,refreshFrozenColumns:()=>utt,refreshFrozenHeight:()=>hot,refreshFrozenPosition:()=>rh,refreshHandlers:()=>fo,refreshInfiniteCurrentViewData:()=>ya,refreshInfiniteEditrowindex:()=>iv,refreshInfiniteModeBlocks:()=>cw,refreshInfinitePersistSelection:()=>tv,refreshResizePosition:()=>fv,refreshSplitFrozenColumn:()=>ev,refreshVirtualBlock:()=>ge,refreshVirtualCache:()=>ws,refreshVirtualEditFormCells:()=>dw,refreshVirtualFrozenHeight:()=>ett,refreshVirtualFrozenRows:()=>htt,refreshVirtualLazyLoadCache:()=>uv,refreshVirtualMaxPage:()=>ba,registerEventHandlers:()=>ok,removeAddCboxClasses:()=>yo,removeElement:()=>kv,removeEventHandlers:()=>sk,removeInfiniteRows:()=>oa,renderResponsiveChangeAction:()=>ei,renderResponsiveCmenu:()=>pa,renderResponsiveColumnChooserDiv:()=>tf,reorderBegin:()=>oet,reorderComplete:()=>op,resetCachedRowIndex:()=>oy,resetColandRowSpanStickyPosition:()=>tk,resetColspanGroupCaption:()=>db,resetColumns:()=>la,resetDialogAppend:()=>ko,resetInfiniteBlocks:()=>ia,resetRowIndex:()=>wo,resetVirtualFocus:()=>kw,resizeClassList:()=>er,resizeStart:()=>tg,resizeStop:()=>os,restoreFocus:()=>uu,row:()=>y,rowCell:()=>v,rowDataBound:()=>rs,rowDeselected:()=>pe,rowDeselecting:()=>bc,rowDrag:()=>ld,rowDragAndDrop:()=>wet,rowDragAndDropBegin:()=>set,rowDragAndDropComplete:()=>sp,rowDragStart:()=>cd,rowDragStartHelper:()=>hd,rowDrop:()=>ad,rowModeChange:()=>wa,rowPositionChanged:()=>rw,rowSelected:()=>lf,rowSelecting:()=>wc,rowSelectionBegin:()=>aet,rowSelectionComplete:()=>ag,rowsAdded:()=>cl,rowsRemoved:()=>hs,rtlUpdated:()=>pl,saveComplete:()=>ap,scroll:()=>hl,scrollToEdit:()=>gw,searchBegin:()=>eet,searchComplete:()=>ep,selectRowOnContextOpen:()=>ka,selectVirtualRow:()=>uw,setChecked:()=>ur,setColumnIndex:()=>wh,setComplexFieldID:()=>ty,setCssInGridPopUp:()=>pb,setDisplayValue:()=>ek,setFormatter:()=>iy,setFreezeSelection:()=>ott,setFullScreenDialog:()=>vr,setGroupCache:()=>aw,setHeightToFrozenElement:()=>cot,setInfiniteCache:()=>sa,setInfiniteColFrozenHeight:()=>sot,setInfiniteFrozenHeight:()=>oot,setReorderDestinationElement:()=>ftt,setRowElements:()=>bo,setStyleAndAttributes:()=>ar,setValidationRuels:()=>uk,setVirtualPageQuery:()=>th,shiftEnter:()=>hh,shiftTab:()=>bot,showAddNewRowFocus:()=>hr,showEmptyGrid:()=>dp,sliceElements:()=>hht,sortBegin:()=>uet,sortComplete:()=>fl,stickyScrollComplete:()=>wtt,summaryIterator:()=>gut,tab:()=>wot,table:()=>yi,tbody:()=>h,templateCompiler:()=>et,textWrapRefresh:()=>wl,toggleFilterUI:()=>vo,toogleCheckbox:()=>ce,toolbarClick:()=>tp,toolbarRefresh:()=>kr,tooltipDestroy:()=>gu,uiUpdate:()=>w,ungroupBegin:()=>cet,ungroupComplete:()=>hp,upArrow:()=>ho,updateColumnTypeForExportColumns:()=>vb,updateData:()=>to,updatecloneRow:()=>vrt,valCustomPlacement:()=>dn,validateVirtualForm:()=>da,valueAccessor:()=>lb,virtaulCellFocus:()=>ow,virtaulKeyHandler:()=>fot,virtualScrollAddActionBegin:()=>ks,virtualScrollEdit:()=>hw,virtualScrollEditActionBegin:()=>ps,virtualScrollEditCancel:()=>sw,virtualScrollEditSuccess:()=>uo,wrap:()=>nr});lc=n(864);const t=ejdashboard.base,u=ejdashboard.data;var ac,wu=function(){function n(n){this.intl=new t.Internationalization;t.isNullOrUndefined(n)||(this.intl.culture=n)}return n.prototype.getFormatFunction=function(n){return t.isNullOrUndefined(n)||"dateTime"!==n.type&&"datetime"!==n.type&&"date"!==n.type&&"time"!==n.type?this.intl.getNumberFormat(n):this.intl.getDateFormat(n)},n.prototype.getParserFunction=function(n){return n.type?this.intl.getDateParser(n):this.intl.getNumberParser(n)},n.prototype.fromView=function(n,i,r){return"date"!==r&&"datetime"!==r&&"number"!==r||t.isNullOrUndefined(i)||t.isNullOrUndefined(n)?n:i(n)},n.prototype.toView=function(n,i){var r=n;return t.isNullOrUndefined(i)||t.isNullOrUndefined(n)||(r=i(n)),r},n.prototype.setCulture=function(n){t.isNullOrUndefined(n)||t.setCulture(n)},n}(),fd=(ac=function(n,t){return ac=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},ac(n,t)},function(n,t){function i(){this.constructor=n}ac(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),vc=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},ht=function(){function n(n,i){var r=this,e,f;this.disableHtmlEncode=!0;this.enableRowSpan=!0;this.enableColumnSpan=!0;this.allowSorting=!0;this.allowResizing=!0;this.allowFiltering=!0;this.allowGrouping=!0;this.allowReordering=!0;this.showColumnMenu=!0;this.enableGroupByFormat=!1;this.allowEditing=!0;this.filter={};this.showInColumnChooser=!0;this.edit={};this.allowSearching=!0;this.autoFit=!1;this.sortDirection="Descending";this.getEditTemplate=function(){return r.editTemplateFn};this.getFilterTemplate=function(){return r.filterTemplateFn};this.templateOptions={enableAriaLabel:!0};t.merge(this,n);this.parent=i;"none"===this.type?this.type=null:this.type&&(this.type="string"==typeof this.type?this.type.toLowerCase():void 0);this.editType&&(this.editType=this.editType.toLowerCase());t.isNullOrUndefined(this.uid)&&(this.uid=pi("grid-column"));e=new wu;(n.format&&(n.format.skeleton||n.format.format&&"string"==typeof n.format.format)&&(this.setFormatter(e.getFormatFunction(t.extend({},n.format))),this.setParser(e.getParserFunction(n.format))),this.toJSON=function(){for(var u,i={},f=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],t=Object.keys(r),n=0;n<t.length;n++)if("columns"===t[parseInt(n.toString(),10)])for(i[t[parseInt(n.toString(),10)]]=[],u=0;u<r[t[parseInt(n.toString(),10)]].length;u++)i[t[parseInt(n.toString(),10)]].push(r[t[parseInt(n.toString(),10)]][parseInt(u.toString(),10)].toJSON());else f.indexOf(t[parseInt(n.toString(),10)])<0&&(i[t[parseInt(n.toString(),10)]]=r[t[parseInt(n.toString(),10)]]);return i},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.enableColumnSpan=!1,this.enableRowSpan=!1,this.columns&&(this.allowResizing=this.columns.some(function(n){return n.allowResizing}))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=et(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=et(this.headerTemplate)),!t.isNullOrUndefined(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=et(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=et(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=et(this.filterTemplate)),this.isForeignColumn()&&(t.isNullOrUndefined(this.editType)||"dropdownedit"===this.editType||"defaultedit"===this.editType)&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=t.extend({dataSource:this.dataSource,query:new u.Query,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer)&&(f=this.sortComparer,this.sortComparer=function(n,t,i,u){var e,o;return("string"==typeof f&&(f=d(f,window)),"Descending"===r.sortDirection)&&(e=n,n=t,t=e,o=i,i=u,u=o),f(n,t,i,u)});!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(n,t){return n=d(r.foreignKeyValue,nu(r,{},n)[0]),t=d(r.foreignKeyValue,nu(r,{},t)[0]),"Descending"===r.sortDirection?u.DataUtil.fnDescending(n,t):u.DataUtil.fnAscending(n,t)})}return n.prototype.getSortDirection=function(){return this.sortDirection},n.prototype.setSortDirection=function(n){this.sortDirection=n},n.prototype.getFreezeTableName=function(){return this.freezeTable},n.prototype.setProperties=function(n){for(var t=Object.keys(n),u=function(r){if("columns"===t[parseInt(r.toString(),10)])for(var u=n[t[parseInt(r.toString(),10)]],e=function(n){i.columns.find(function(t){return t.field===u[parseInt(n.toString(),10)].field}).setProperties(u[parseInt(n.toString(),10)])},f=0;f<u.length;f++)e(f);else i[t[parseInt(r.toString(),10)]]=n[t[parseInt(r.toString(),10)]];i.parent&&i.parent.isReact&&("template"===t[parseInt(r.toString(),10)]?(i.templateFn=et(n[t[parseInt(r.toString(),10)]]),i.parent.refreshReactColumnTemplateByUid(i.uid,!0)):"headerTemplate"===t[parseInt(r.toString(),10)]?(i.headerTemplateFn=et(n[t[parseInt(r.toString(),10)]]),i.parent.refreshReactHeaderTemplateByUid(i.uid)):"editTemplate"===t[parseInt(r.toString(),10)]?i.editTemplateFn=et(n[t[parseInt(r.toString(),10)]]):"filterTemplate"===t[parseInt(r.toString(),10)]?i.filterTemplateFn=et(n[t[parseInt(r.toString(),10)]]):"commandsTemplate"===t[parseInt(r.toString(),10)]&&(i.templateFn=et(n[t[parseInt(r.toString(),10)]])))},i=this,r=0;r<t.length;r++)u(r)},n.prototype.isForeignColumn=function(){return!(!this.dataSource||!this.foreignKeyValue)},n.prototype.getFormatter=function(){return this.formatFn},n.prototype.setFormatter=function(n){this.formatFn=n},n.prototype.getParser=function(){return this.parserFn},n.prototype.setParser=function(n){this.parserFn=n},n.prototype.getColumnTemplate=function(){return this.templateFn},n.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},n.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},n.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},n}(),bft=function(){function n(){}return vc([t.Property()],n.prototype,"title",void 0),vc([t.Property()],n.prototype,"type",void 0),vc([t.Property()],n.prototype,"buttonOption",void 0),n}(),ed=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return fd(i,n),vc([t.Property(null)],i.prototype,"columns",void 0),i}(ht),kft=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return fd(t,n),t}(ed);const tt=ejdashboard.popups;var e,ni,by,a,bu,dft="create",gft="destroy",yc="load",rs="rowDataBound",cf="queryCellInfo",pc="headerCellInfo",p="actionBegin",s="actionComplete",ye="actionFailure",ti="dataBound",wc="rowSelecting",lf="rowSelected",bc="rowDeselecting",pe="rowDeselected",we="cellSelecting",us="cellSelected",ky="cellDeselecting",dy="cellDeselected",kc="columnSelecting",dc="columnSelected",od="columnDeselecting",sd="columnDeselected",af="columnDragStart",ku="columnDrag",vf="columnDrop",hd="rowDragStartHelper",cd="rowDragStart",ld="rowDrag",ad="rowDrop",gy="beforePrint",np="printComplete",fs="detailDataBound",tp="toolbarClick",gc="batchAdd",yf="batchCancel",nl="batchDelete",vd="beforeBatchAdd",yd="beforeBatchDelete",pd="beforeBatchSave",wd="beginEdit",bd="cellEdit",kd="cellSave",tl="cellSaved",net="endAdd",tet="endDelete",iet="endEdit",dd="recordDoubleClick",gd="recordClick",es="beforeDataBound",ng="beforeOpenColumnChooser",ip="beforeOpenAdaptiveDialog",tg="resizeStart",ig="resizing",os="resizeStop",rg="checkBoxChange",ug="beforeCopy",fg="beforePaste",eg="beforeAutoFill",il="filterchoicerequest",rp="filterAfterOpen",up="filterBeforeOpen",og="filterSearchBegin",sg="commandClick",rl="exportGroupCaption",hg="lazyLoadGroupExpand",cg="lazyLoadGroupCollapse",or="initial-load",pt="initial-end",wi="data-ready",k="content-ready",w="ui-update",ai="on-empty",wt="inbound-model-changed",ot="model-changed",ul="colgroup-refresh",bt="header-refreshed",ret="paging-begin",lg="paging-complete",uet="sorting-begin",fl="sorting-complete",fet="filtering-begin",fp="filtering-complete",eet="searching-begin",ep="searching-complete",oet="reorder-begin",op="reorder-complete",set="rowdraganddrop-begin",sp="rowdraganddrop-complete",het="grouping-begin",el="grouping-complete",cet="ungrouping-begin",hp="ungrouping-complete",iu="group-aggregates",sr="refresh-footer-rendered",ol="refresh-aggregate-cell",cp="refresh-aggregates",aet="rowselecting",ag="rowselected",vet="columnselecting",yet="columnselected",pet="cellselecting",vg="cellselected",sl="destroy-autofill-elements",pf="beforecellfocused",ss="cellfocused",rt="key-pressed",kt="click",l="destroy",br="column-visible-changed",hl="scroll",be="column-width-changed",ke="column-position-changed",wet="row-drag-and-drop",cl="rows-added",hs="rows-removed",ll="column-drag-stop",wf="header-drop",de="datasource-modified",yg="refresh-complete",ge="refresh-virtual-block",no="dblclick",kr="toolbar-refresh",lp="bulk-save",du="auto-col",gu="tooltip-destroy",to="update-data",bet="edit-begin",ket="edit-complete",det="add-begin",get="add-complete",ap="save-complete",not="delete-begin",vp="delete-complete",si="prevent-batch",cs="dialog-destroy",yp="crud-Action",pp="add-delete-Action",al="destroy-form",vl="double-tap",pg="beforeExcelExport",wg="excelExportComplete",bg="excelQueryCellInfo",kg="excelHeaderQueryCellInfo",wp="exportDetailDataBound",bp="exportDetailTemplate",dg="beforePdfExport",kp="pdfExportComplete",gg="pdfQueryCellInfo",nn="pdfHeaderQueryCellInfo",tot="access-predicate",tn="contextMenuClick",ru="freezerender",iot="freezerefresh",rn="contextMenuOpen",un="contextMenuClose",fn="columnMenuClick",en="columnMenuOpen",on="columnMenuClose",ls="filterOpen",io="filterDialogCreated",vi="filter-menu-close",yl="initForeignKeyColumn",as="getForeignKeyData",bf="generateQuery",dp="showEmptyGrid",gp="foreignKeyData",sn="columnDataStateChange",kf="dataStateChange",nw="dataSourceChanged",pl="rtl-updated",tw="beforeFragAppend",rot="frozenHeight",wl="textWrapRefresh",bl="recordAdded",vs="cancel-Begin",ys="editNextValCell",kl="hierarchyprint",dl="expandchildgrid",hn="printGrid-Init",iw="export-RowDataBound",cn="export-DataBound",rw="row-position-changed",ln="columnChooserOpened",an="batchedit-form",vn="edit-form",yn="before-batch-cancel",pn="batcheditform-rendered",gl="partial-refresh",wn="beforeCustomFilterOpen",bn="customFilterOpen",uw="select-virtual-Row",na="columns-prepared",ta="cbox-filter-begin",df="cbox-filter-complete",ro="filter-Prevent",kn="before-filter-cmenu-open",dn="validation-custom-placement",gn="filter-cbox-value",uot="component-rendered",uu="restore-Focus",fw="detail-state-change",ew="detail-indentcell-info",fot="virtaul-key-handler",ow="virtaul-cell-focus",ps="virtual-scroll-edit-action-begin",uo="virtual-scroll-edit-success",sw="virtual-scroll-edit-cancel",hw="virtual-scroll-edit",ws="refresh-virtual-cache",bs="edit-reset",ks="virtual-scroll-add-action-begin",nf="get-virtual-data",cw="refresh-infinite-mode-blocks",ia="reset-infinite-blocks",ra="infinite-scroll-handler",ua="infinite-page-query",fa="infinite-show-hide",ea="append-infinite-content",oa="remove-infinite-rows",sa="set-infinite-cache",ds="infinite-edit-handler",ha="initial-collapse",eot="get-aggregate-query",ca="close-filter-dialog",ntt="columnChooserCancelBtnClick",ttt="get-filterbar-operator",la="reset-columns",itt="pdfAggregateQueryCellInfo",lw="excelAggregateQueryCellInfo",aw="group-cache",vw="lazy-load-scroll-handler",aa="group-collapse",rtt="beforeCheckboxRenderer",fo="refreshResizeHandlers",utt="refresh-frozen-columns",ftt="set-reorder-destination-element",ett="refresh-virtual-frozen-height",ott="set-freeze-selection",oot="set-infinite-frozen-height",sot="set-infinite-col-frozen-height",va="before-refresh-on-data-change",stt="immutable-batch-cancel",htt="refresh-virtual-frozenrows",ctt="check-scroll-reset",hot="refresh-frozen-height",cot="set-height-to-frozen-element",ltt="prevent-frozen-scroll-refresh",att="next-cell-index",ya="refresh-infinite-current-view-data",vtt="infinite-crud-cancel",gs="filter-dialog-close",dr="refresh-cutsom-filter-ok-button",yw="refresh-cutsom-filter-clear-button",pa="render-responsive-cmenu",pw="filter-cmenu-select",ww="custom-filter-close",vr="set-fullscreen-dialog",gr="refresh-Expand-and-Collapse",wa="row-mode-change",nh="enter-key-handler",ba="refresh-virtual-max-page",th="set-virtual-page-query",ka="select-row-on-context-open",bw="pager-refresh",ytt="closeinline",lot="closebatch",eo="close-edit",kw="reset-virtual-focus",aot="after-content-renderer",dw="refresh-virtual-editform-cells",gw="scroll-to-edit",ptt="before-checkbox-renderer-query",ih="create-virtual-validation-form",da="validate-virtual-form",ga="destroy-child-grid",wtt="sticky-scroll-complete",nv="infinite-group-collapse",tv="refresh-infinite-persist-selection",iv="refresh-infinite-editrowindex",oo="after-filter-column-menu-close",btt="beforeCheckboxfilterRenderer",rv="commandColumnDestroy",ktt="cancelcnfrmDlg",uv="refresh-Virtual-LazyLoad-Cache",rh="refresh-Frozen-Position",fv="refresh-Resize-Position",ev="refresh-Split-Frozen-Column",ei="render-Responsive-Change-Action",tf="render-Responsive-Column-Chooser-Div",hr="show-Add-New-Row-Focus",nb="infinitescroll-complete",dtt="last-rowcell-border-updated",vot="columnChooserSearch",yot="columnChooserClose",pot="columnChooserUpdate",so="destroy-edit-form",tb="beforeDetailTemplateDetach",uh="detach-detail-template";!function(n){n[n.Data=0]="Data";n[n.Header=1]="Header";n[n.Summary=2]="Summary";n[n.GroupSummary=3]="GroupSummary";n[n.CaptionSummary=4]="CaptionSummary";n[n.Filter=5]="Filter";n[n.Indent=6]="Indent";n[n.GroupCaption=7]="GroupCaption";n[n.GroupCaptionEmpty=8]="GroupCaptionEmpty";n[n.Expand=9]="Expand";n[n.HeaderIndent=10]="HeaderIndent";n[n.StackedHeader=11]="StackedHeader";n[n.DetailHeader=12]="DetailHeader";n[n.DetailExpand=13]="DetailExpand";n[n.CommandColumn=14]="CommandColumn";n[n.DetailFooterIntent=15]="DetailFooterIntent";n[n.RowDragIcon=16]="RowDragIcon";n[n.RowDragHIcon=17]="RowDragHIcon"}(e||(e={})),function(n){n[n.Header=0]="Header";n[n.Content=1]="Content";n[n.Summary=2]="Summary"}(ni||(ni={})),function(n){n[n.Add=0]="Add";n[n.Edit=1]="Edit";n[n.Update=2]="Update";n[n.Delete=3]="Delete";n[n.Cancel=4]="Cancel";n[n.Print=5]="Print";n[n.Search=6]="Search";n[n.ColumnChooser=7]="ColumnChooser";n[n.PdfExport=8]="PdfExport";n[n.ExcelExport=9]="ExcelExport";n[n.CsvExport=10]="CsvExport";n[n.WordExport=11]="WordExport"}(by||(by={})),function(n){n[n.isEdit=0]="isEdit";n[n.isAdd=1]="isAdd";n[n.isSort=2]="isSort";n[n.isFilter=3]="isFilter";n[n.isColMenu=4]="isColMenu";n[n.isColumnChooser=5]="isColumnChooser"}(a||(a={})),function(n){n[n.isInitial=0]="isInitial";n[n.isSearch=1]="isSearch"}(bu||(bu={}));var fh=function(){function n(n,t){this.dataState={isPending:!1,resolver:null,group:[]};this.foreignKeyDataState={isPending:!1,resolver:null};this.parent=n;this.serviceLocator=t;this.initDataManager();this.parent.isDestroyed||"foreignKey"===this.getModuleName()||(this.parent.on(cl,this.addRows,this),this.parent.on(rw,this.reorderRows,this),this.parent.on(hs,this.removeRows,this),this.parent.on(de,this.initDataManager,this),this.parent.on(l,this.destroy,this),this.parent.on(to,this.crudActions,this),this.parent.on(pp,this.getData,this),this.parent.on(du,this.refreshFilteredCols,this),this.parent.on(na,this.refreshFilteredCols,this))}return n.prototype.reorderRows=function(n){this.parent.getDataModule().isRemote()?this.parent.getCurrentViewRecords().splice(n.toIndex,0,this.parent.getCurrentViewRecords().splice(n.fromIndex,1)[0]):this.dataManager.dataSource.json.splice(n.toIndex,0,this.dataManager.dataSource.json.splice(n.fromIndex,1)[0])},n.prototype.getModuleName=function(){return"data"},n.prototype.initDataManager=function(){var n=this.parent;this.dataManager=n.dataSource instanceof u.DataManager?n.dataSource:t.isNullOrUndefined(n.dataSource)?new u.DataManager:new u.DataManager(n.dataSource);!n.isAngular||n.query instanceof u.Query?(this.isQueryInvokedFromData=!0,n.query instanceof u.Query||(n.query=new u.Query)):n.setProperties({query:new u.Query},!0)},n.prototype.generateQuery=function(n,i){var e=this.parent,r=t.isNullOrUndefined(e.getQuery())?new u.Query:e.getQuery().clone();if("ExcludeHidden"===this.parent.columnQueryMode)r.select(this.parent.getColumns().filter(function(n){return!(!0!==n.isPrimaryKey&&!1===n.visible||void 0===n.field)}).map(function(n){return n.field}));else if("Schema"===this.parent.columnQueryMode){for(var o=[],s=this.parent.columns,f=0;f<s.length;f++)o.push(s[parseInt(f.toString(),10)].field);r.select(o)}return this.filterQuery(r),this.searchQuery(r),this.aggregateQuery(r),this.sortQuery(r),b(this.parent)?this.virtualGroupPageQuery(r):this.pageQuery(r,n),!t.isNullOrUndefined(i)&&i||this.groupQuery(r),r},n.prototype.aggregateQuery=function(n){for(var f,i,u=this.parent.aggregates,t=0;t<u.length;t++)for(f=u[parseInt(t.toString(),10)],i=0;i<f.columns.length;i++)for(var r=f.columns[parseInt(i.toString(),10)],o=r.type instanceof Array?r.type:[r.type],e=0;e<o.length;e++)n.aggregate(o[parseInt(e.toString(),10)].toLowerCase(),r.field);return n},n.prototype.virtualGroupPageQuery=function(n){if(n.queries.length)for(var t=0;t<n.queries.length;t++)"onPage"===n.queries[parseInt(t.toString(),10)].fn&&n.queries.splice(t,1);return n},n.prototype.pageQuery=function(n,i){var r=this.parent,e={query:n,skipPage:!1},f;if(r.notify(th,e),e.skipPage)return n;if((r.allowPaging||r.enableVirtualization||r.enableInfiniteScrolling)&&!0!==i){if(r.pageSettings.currentPage=Math.max(1,r.pageSettings.currentPage),r.pageSettings.pageCount<=0&&(r.pageSettings.pageCount=8),r.pageSettings.pageSize<=0&&(r.pageSettings.pageSize=12),n.queries.length)for(f=0;f<n.queries.length;f++)"onPage"===n.queries[parseInt(f.toString(),10)].fn&&n.queries.splice(f,1);!t.isNullOrUndefined(r.infiniteScrollModule)&&r.enableInfiniteScrolling?this.parent.notify(ua,n):n.page(r.pageSettings.currentPage,!(r.allowPaging&&r.pagerModule&&r.pagerModule.pagerObj.isAllPage)||r.isManualRefresh||this.dataManager.dataSource.offline||this.dataManager.adaptor instanceof u.RemoteSaveAdaptor?r.pageSettings.pageSize:null)}return n},n.prototype.groupQuery=function(n){var u=this.parent,r,f,e;if(u.allowGrouping&&u.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&n.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});for(var i=u.groupSettings.columns,t=0,o=i.length;t<o;t++)r=this.getColumnByField(i[parseInt(t.toString(),10)]),r||this.parent.log("initial_action",{moduleName:"group",columnName:i[parseInt(t.toString(),10)]}),f=r.enableGroupByFormat,e=r.format,f?n.group(i[parseInt(t.toString(),10)],this.formatGroupColumn.bind(this),e):n.group(i[parseInt(t.toString(),10)],null)}return n},n.prototype.sortQuery=function(n){var f=this.parent,e,o,i;if((f.allowSorting||f.allowGrouping)&&f.sortSettings.columns.length){for(var r=f.sortSettings.columns,u=[],t=r.length-1;t>-1;t--){if(!(i=this.getColumnByField(r[parseInt(t.toString(),10)].field)))return this.parent.log("initial_action",{moduleName:"sort",columnName:r[parseInt(t.toString(),10)].field}),n;i.setSortDirection(r[parseInt(t.toString(),10)].direction);e=r[parseInt(t.toString(),10)].direction;i.sortComparer&&(this.parent.log("grid_sort_comparer"),e=this.isRemote()?r[parseInt(t.toString(),10)].direction:i.sortComparer.bind(i));-1===f.groupSettings.columns.indexOf(r[parseInt(t.toString(),10)].field)?i.isForeignColumn()||i.sortComparer?n.sortByForeignKey(i.field,e,void 0,r[parseInt(t.toString(),10)].direction.toLowerCase()):n.sortBy(i.field,e):u.push({direction:e,field:i.field})}for(t=0,o=u.length;t<o;t++)"string"==typeof u[parseInt(t.toString(),10)].direction?n.sortBy(u[parseInt(t.toString(),10)].field,u[parseInt(t.toString(),10)].direction):(i=this.getColumnByField(u[parseInt(t.toString(),10)].field),n.sortByForeignKey(u[parseInt(t.toString(),10)].field,u[parseInt(t.toString(),10)].direction,void 0,i.getSortDirection().toLowerCase()))}return n},n.prototype.searchQuery=function(n,i,r){var f=this.parent.searchSettings,e=!t.isNullOrUndefined(f.fields)&&f.fields.length?f.fields:this.getSearchColumnFieldNames(),s=[],a=!1,h,o,c,l;if(!t.isNullOrUndefined(this.parent.searchSettings.key)&&this.parent.searchSettings.key.length)if(a=this.parent.getForeignKeyColumns().some(function(n){return e.indexOf(n.field)>-1}),h=r?i.dataSource.adaptor:this.dataManager.adaptor,a||h.getModuleName&&"ODataV4Adaptor"===h.getModuleName()){for(e=r?[i.foreignKeyValue]:e,o=0;o<e.length;o++)c=r?i:this.getColumnByField(e[parseInt(o.toString(),10)]),c.isForeignColumn()&&!r?s=this.fGeneratePredicate(c,s):s.push(new u.Predicate(e[parseInt(o.toString(),10)],f.operator,f.key,f.ignoreCase,f.ignoreAccent));l=u.Predicate.or(s);l.key=f.key;n.where(l)}else n.search(f.key,e,f.operator,f.ignoreCase,f.ignoreAccent);return n},n.prototype.filterQuery=function(n,i,r){var tt,e=this.parent,h=[],ot=[],st=this.parent.getForeignKeyColumns(),c,s,ft,v,y,g,f,a,p,nt;if(e.allowFiltering&&e.filterSettings.columns.length){for(var it=i||e.filterSettings.columns,ht={},w=0,rt=e.getColumns();w<rt.length;w++)ht[(f=rt[w]).field]=f.filter.type?f.filter.type:e.filterSettings.type;for(var b=[],o=[],k=0,ut=it;k<ut.length;k++)c=(f=ut[k]).isForeignKey?e.getColumnByUid(f.uid):e.getColumnByField(f.field),t.isNullOrUndefined(f.type)&&c&&("date"===c.type||"datetime"===c.type||"dateonly"===c.type)&&(f.type=f.isForeignKey?e.getColumnByUid(f.uid).type:e.getColumnByField(f.field).type),f.isForeignKey?b.push(f):o.push(f);if(o.length){for(s=0,ft=o.length;s<ft;s++)o[parseInt(s.toString(),10)].uid=o[parseInt(s.toString(),10)].uid||this.parent.grabColumnByFieldFromAllCols(o[parseInt(s.toString(),10)].field,o[parseInt(s.toString(),10)].isForeignKey).uid;for(var l=tu.getPredicate(o),d=0,et=Object.keys(l);d<et.length;d++)v=et[d],h.push(l[""+v])}if(b.length)for(y=0,g=b;y<g.length;y++)if((f=g[y]).uid=f.uid||this.parent.grabColumnByFieldFromAllCols(f.field,f.isForeignKey).uid,a=this.parent.grabColumnByUidFromAllCols(f.uid),a||this.parent.log("initial_action",{moduleName:"filter",columnName:f.field}),a.isForeignColumn()&&po(f.field,st)&&!r)ot.push(f),a.columnData.length||(tt=!0),h=this.fGeneratePredicate(a,h);else for(l=tu.getPredicate(it),p=0,nt=Object.keys(l);p<nt.length;p++)v=nt[p],h.push(l[""+v]);h.length&&!tt?n.where(u.Predicate.and(h)):this.parent.notify(dp,{})}return n},n.prototype.fGeneratePredicate=function(n,t){var i={};return n&&(this.parent.notify(bf,{predicate:i,column:n}),i.predicate.predicates.length&&t.push(i.predicate)),t},n.prototype.getData=function(n,i){var e=this,u,r,f;if(void 0===n&&(n={requestType:""}),u=this.getKey(n.foreignKeyData&&Object.keys(n.foreignKeyData).length?n.foreignKeyData:this.parent.getPrimaryKeyFieldNames()),this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource)return this.eventPromise(n,i,u).promise;r=void 0;switch(n.requestType){case"delete":(i=i||this.generateQuery(),1===Object.keys(n.data).length)?r=this.dataManager.remove(u,n.data[0],i.fromTable,i):(f={addedRecords:[],deletedRecords:[],changedRecords:[]},f.deletedRecords=n.data,r=this.dataManager.saveChanges(f,u,i.fromTable,i.requiresCount()));break;case"save":i=i||this.generateQuery();n.index=t.isNullOrUndefined(n.index)?0:n.index;r=this.dataManager.insert(n.data,i.fromTable,i,n.index)}return n.promise=r,!r||Array.isArray(r)||r.hasOwnProperty("deletedRecords")?this.insert(i,n):r.then(function(){return e.insert(i,n)})},n.prototype.insert=function(n,t){return"save"===t.requestType&&(t.query=n,this.parent.notify(bl,t)),this.executeQuery(n)},n.prototype.executeQuery=function(n){var i=this,t;return this.dataManager.ready?(t=new u.Deferred,this.dataManager.ready.then(function(){i.dataManager.executeQuery(n).then(function(n){t.resolve(n)})}).catch(function(n){t.reject(n)}),t.promise):this.dataManager.executeQuery(n)},n.prototype.formatGroupColumn=function(n,i){var f=this.serviceLocator,r=this.getColumnByField(i),u=n;return r.type||(r.type=u.getDay?u.getHours()>0||u.getMinutes()>0||u.getSeconds()>0||u.getMilliseconds()>0?"datetime":"date":typeof n),t.isNullOrUndefined(r.getFormatter())&&iy(f,r),wu.prototype.toView(n,r.getFormatter())},n.prototype.crudActions=function(n){var t=this.generateQuery(),i=null,r="promise",u=this.getKey(n.foreignKeyData&&Object.keys(n.foreignKeyData).length?n.foreignKeyData:this.parent.getPrimaryKeyFieldNames());this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(n,t,u);"save"===n.requestType&&(i=this.dataManager.update(u,n.data,t.fromTable,t,n.previousData));n[""+r]=i||n[""+r];this.parent.notify(yp,n)},n.prototype.saveChanges=function(n,t,i,r){if(void 0===r&&(r=this.generateQuery()),r.requiresCount(),"result"in this.parent.dataSource){var f=new u.Deferred,e={requestType:"batchsave",changes:n,key:t,query:r,endEdit:f.resolve};return this.setState({isPending:!0,resolver:f.resolve}),this.parent.trigger(nw,e),f.promise}return this.dataManager.saveChanges(n,t,r.fromTable,r,i)},n.prototype.getKey=function(n){if(n&&n.length)return n[0]},n.prototype.isRemote=function(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url},n.prototype.addRows=function(n){for(var i=n.records.length;i>0;i--)this.parent.dataSource instanceof u.DataManager&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json.splice(n.toIndex,0,n.records[i-1]):this.parent.getDataModule().isRemote()||t.isNullOrUndefined(this.parent.dataSource)||this.parent.dataSource.result||this.parent.dataSource.splice(n.toIndex,0,n.records[i-1])},n.prototype.removeRows=function(n){var i=this.dataManager.dataSource.json;this.parent.dataSource instanceof u.DataManager&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json=i.filter(function(t){return-1===n.records.indexOf(t)}):this.parent.getDataModule().isRemote()||t.isNullOrUndefined(this.parent.dataSource)||this.parent.dataSource.result||(this.parent.dataSource=i.filter(function(t){return-1===n.records.indexOf(t)}))},n.prototype.getColumnByField=function(n){var t;return this.parent.columnModel.some(function(i){return t=i,i.field===n})&&t},n.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(cl,this.addRows),this.parent.off(hs,this.removeRows),this.parent.off(de,this.initDataManager),this.parent.off(l,this.destroy),this.parent.off(to,this.crudActions),this.parent.off(pp,this.getData),this.parent.off(du,this.refreshFilteredCols),this.parent.off(na,this.refreshFilteredCols))},n.prototype.getState=function(){return this.dataState},n.prototype.setState=function(n){return this.dataState=n},n.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},n.prototype.setForeignKeyDataState=function(n){this.foreignKeyDataState=n},n.prototype.getStateEventArgument=function(n){var r=new u.UrlAdaptor,f=new u.DataManager({url:"",adaptor:new u.UrlAdaptor}),i=r.processQuery(f,n),e=JSON.parse(i.data);return t.extend(e,i.pvtData)},n.prototype.eventPromise=function(n,t,i){var s=this,h=n,r=this.getStateEventArgument(t),o=new u.Deferred,e=new u.Deferred,f;return(void 0!==n.requestType||this.parent.groupSettings.disablePageWiseAggregates&&t.queries.some(function(n){return"onGroup"===n.fn}))&&!1!==this.dataState.isDataChanged?(r.action=n,"save"===n.requestType||"delete"===n.requestType||"batchsave"===n.requestType)?(f=n,f.key=i,f.promise=e.promise,f.state=r,this.setState({isPending:!0,resolver:e.resolve}),h.endEdit=e.resolve,h.cancelEdit=e.reject,this.parent.trigger(nw,f),e.promise.then(function(){s.setState({isPending:!0,resolver:o.resolve,group:r.group,aggregates:r.aggregates});"save"===f.requestType&&s.parent.notify(bl,f);s.parent.trigger(kf,r)}).catch(function(){})):(this.setState({isPending:!0,resolver:o.resolve,group:r.group,aggregates:r.aggregates}),this.parent.trigger(kf,r)):(this.setState({}),o.resolve(this.parent.dataSource)),o},n.prototype.getSearchColumnFieldNames=function(){for(var n,r=[],i=0,u=this.parent.getColumns();i<u.length;i++)n=u[i],n.allowSearching&&!t.isNullOrUndefined(n.field)&&r.push(n.field);return r},n.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&nut(this.parent,this.parent.filterSettings.columns)},n}(),cr=function(){function n(n,i){t.merge(this,n);this.parent=i}return n.prototype.clone=function(){var i=new n({});return t.merge(i,this),i.cells=this.cells.map(function(n){return n.clone()}),i},n.prototype.setRowValue=function(n){if(this.parent){var t=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(t,n)}},n.prototype.setCellValue=function(n,t){if(this.parent&&this.data[""+n].toString()!==t.toString()){var i=this.parent.getPrimaryKeyFieldNames()[0],r=this.data[""+i];this.parent.setCellValue(r,n,t);this.makechanges(i,this.data)}},n.prototype.makechanges=function(n,t){this.parent&&this.parent.getDataModule().dataManager.update(n,t)},n}(),bi=function(){function n(n){this.isSpanned=!1;this.isRowSpanned=!1;t.merge(this,n)}return n.prototype.clone=function(){var i=new n({});return t.merge(i,this),i},n}(),ib=function(){function n(n,t){this.serviceLocator=n;this.parent=t}return n.prototype.render=function(n,i,r,u){var s,v=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(i.cells[parseInt(r.toString(),10)].cellType||e.Data),f=i.cells[parseInt(r.toString(),10)].cellSpan?i.cells[parseInt(r.toString(),10)].cellSpan:n.colSpan?n.colSpan+r<=i.cells.length?n.colSpan:i.cells.length-r:1,c=n.rowSpan,h=0,a,o;if(i.index>0){var l=this.parent.getRowsObject().filter(function(n){return n.isDataRow}),y=this.parent.groupSettings.columns.length>0&&!l[i.index-1].isDataRow?l[i.index].cells:l[i.index-1].cells,p=i.cells[parseInt(r.toString(),10)];s=y.filter(function(n){return n.column.uid===p.column.uid})[0]}for(a=s&&s.colSpanRange>1&&s.rowSpanRange>1?s.colSpanRange:f,o=r+1;o<r+a&&o<i.cells.length;o++)!1===i.cells[parseInt(o.toString(),10)].visible?h++:i.cells[parseInt(o.toString(),10)].isSpanned=!0;if(h>0){for(o=r+f;o<r+f+h&&o<i.cells.length;o++)i.cells[parseInt(o.toString(),10)].isSpanned=!0;r+f+h>=i.cells.length&&(f-=r+f+h-i.cells.length)}return i.cells[parseInt(r.toString(),10)].cellSpan&&(i.data[n.column.field]=i.cells[parseInt(r.toString(),10)].spanText,u=v.render(i.cells[parseInt(r.toString(),10)],i.data,{index:t.isNullOrUndefined(i.index)?"":i.index.toString()})),f>1&&t.attributes(u,{colSpan:f.toString(),"aria-colSpan":f.toString()}),c>1&&(t.attributes(u,{rowspan:c.toString(),"aria-rowspan":c.toString()}),i.cells[parseInt(r.toString(),10)].isRowSpanned=!0,i.cells[parseInt(r.toString(),10)].rowSpanRange=Number(c),f>1&&(i.cells[parseInt(r.toString(),10)].colSpanRange=Number(f))),i.index>0&&s.rowSpanRange>1&&(i.cells[parseInt(r.toString(),10)].isSpanned=!0,i.cells[parseInt(r.toString(),10)].rowSpanRange=Number(s.rowSpanRange-1),i.cells[parseInt(r.toString(),10)].colSpanRange=s.rowSpanRange>0?s.colSpanRange:1),!this.parent.enableColumnVirtualization||i.cells[parseInt(r.toString(),10)].cellSpan||this.containsKey(n.column.field,n.data[n.column.field])||this.backupMergeCells(n.column.field,n.data[n.column.field],n.colSpan),u},n.prototype.backupMergeCells=function(n,t,i){this.setMergeCells(this.generteKey(n,t),i)},n.prototype.generteKey=function(n,t){return n+"__"+t.toString()},n.prototype.splitKey=function(n){return n.split("__")},n.prototype.containsKey=function(n,t){return this.getMergeCells().hasOwnProperty(this.generteKey(n,t))},n.prototype.getMergeCells=function(){return this.parent.mergeCells},n.prototype.setMergeCells=function(n,t){this.parent.mergeCells[""+n]=t},n.prototype.updateVirtualCells=function(n){for(var i,f,r,e=this.getMergeCells(),u=0,o=Object.keys(e);u<o.length;u++){var s=o[u],a=e[""+s],t=this.splitKey(s),h=this.getIndexFromAllColumns(t[0]),c=this.parent.getColumnIndexesInView(),l=a-(c[0]-h);if(h<c[0]&&l>1)for(i=0,f=n;i<f.length;i++)if(r=f[i],r.data[t[0]].toString()===t[1].toString()){r.cells[0].cellSpan=l;r.cells[0].spanText=t[1];break}}return n},n.prototype.getIndexFromAllColumns=function(n){return uf(this.parent.getVisibleColumns(),function(t,i){if(t.field===n)return i})[0]},n}(),v="e-rowcell",st="e-gridheader",it="e-gridcontent",fu="e-gridfooter",ct="e-headercontent",eh="e-movablecontent",ov="e-movableheader",gtt="e-frozencontent",nit="e-frozenheader",lt="e-content",yi="e-table",y="e-row",rf="e-gridchkbox",ut="e-editedrow",ii="e-addedrow",tit="e-groupcaptionrow",gf="changedRecords",lr="addedRecords",ne="deletedRecords",ir="Left-Right",oh="frozen-right",iit="frozen-left",ft="aria-colindex",c="aria-rowindex",h="tbody",hi="colgroup",dt="open",te="change",ie="focus",sh="created",rb="beforeOpen",sv="downArrow",ho="upArrow",rit="PageUp",uit="PageDown",hv="enter",hh="shiftEnter",wot="tab",bot="shiftTab",ub="initialFrozenColumnIndex",ci=function(){function n(n,t,i){this.isSpan=!1;this.cellType=t;this.serviceLocator=n;this.parent=i;this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return n.prototype.render=function(n,t,i,r,u){return this.refreshRow(n,t,i,r,u)},n.prototype.refresh=function(n,t,i,r,u){var a=this,e,s,l;i&&(n.data=ic({},n.changes),this.refreshMergeCells(n));var f=this.parent.element.querySelector("[data-uid="+n.uid+"]"),h=this.refreshRow(n,t,r,u,null,i),v=[].slice.call(h.cells),y=[].slice.call(f.querySelectorAll(".e-templatecell"));if(this.parent.isReact&&y.length)for(var p=function(n){if(n.template)return setTimeout(function(){a.parent.refreshReactColumnTemplateByUid(n.uid,!0)},0),"break"},o=0,c=t;o<c.length&&"break"!==p(c[o]);o++);for([].slice.call(h.attributes).map(function(n){f.setAttribute(n.name,n.value)}),f.innerHTML="",e=0,s=v;e<s.length;e++)l=s[e],f.appendChild(l)},n.prototype.refreshRow=function(n,i,r,u,f,o){var c=t.isNullOrUndefined(f)?this.element.cloneNode():f,w={data:n.data},h={data:n.data},ot=this.parent.getColumns().filter(function(n){return"checkbox"===n.type&&n.field})[0],st=!1,nt=this.parent.isFrozenGrid(),ut=!0,tt,y,it,ft,p,ht,et,a,rt,v,ct,lt,b,at,k,pt,wt;ot&&(st=d(ot.field,w.data));tt=this.parent.getSelectedRowIndexes();n.isDataRow&&(n.isSelected=tt.indexOf(n.index)>-1||st);y=this.parent.currentViewData;n.isDataRow&&this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(n.isSelected=!0,-1===tt.indexOf(n.index)&&tt.push(n.index));this.buildAttributeFromRow(c,n);t.attributes(c,t.extend({},r,{}));ar(c,n.attributes);for(var bt=this.serviceLocator.getService("cellRendererFactory"),kt=function(i){var r=n.cells[parseInt(i.toString(),10)],d,at,vt,u,ii,ri,ot,a,ft,yt,f,l,b,g,ui,pt,tt,wt,w,dt,ct,gt,ni,it;if(r.isSelected=n.isSelected,r.isColumnSelected=r.column.isSelected,d=bt.getCellRenderer(n.cells[parseInt(i.toString(),10)].cellType||e.Data),at={"data-index":t.isNullOrUndefined(n.index)?"":n.index.toString()},n.isExpand&&n.cells[parseInt(i.toString(),10)].cellType===e.DetailExpand&&(at.class=s.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand"),vt=!s.parent.enableRtl&&s.parent.groupSettings&&ut&&s.parent.groupSettings.columns.length&&("Vertical"===s.parent.gridLines||"Both"===s.parent.gridLines),u=d.render(n.cells[parseInt(i.toString(),10)],n.data,at,n.isExpand,o),n.cells[parseInt(i.toString(),10)].cellType!==e.Filter){if(n.cells[parseInt(i.toString(),10)].cellType===e.Data||n.cells[parseInt(i.toString(),10)].cellType===e.CommandColumn){if(r.visible&&vt&&(u.classList.add("e-grid-group-first-cell"),ut=!1),ii=s.parent.parentDetails&&s.parent.parentDetails.parentInstObj&&s.parent.parentDetails.parentInstObj.isReact,ri=s.parent.printGridParent&&s.parent.printGridParent.isReact,(s.parent.isReact&&s.parent.requireTemplateRef||ii&&s.parent.parentDetails.parentInstObj.requireTemplateRef||ri&&s.parent.printGridParent.requireTemplateRef)&&r.isTemplate?(ot=s,ot.parent.renderTemplates(function(){if("string"!=typeof r.column.template){var f=u.getAttribute("aria-label");u.setAttribute("aria-label",u.innerText+f)}ot.parent.trigger(cf,t.extend(h,{cell:u,column:r.column,colSpan:1,rowSpan:1,foreignKeyData:n.cells[parseInt(i.toString(),10)].foreignKeyData,requestType:ot.parent.requestTypeAction}))})):s.parent.trigger(cf,t.extend(h,{cell:u,column:r.column,colSpan:1,rowSpan:1,foreignKeyData:n.cells[parseInt(i.toString(),10)].foreignKeyData,requestType:s.parent.requestTypeAction})),!(s.parent.enableVirtualization||s.parent.enableColumnVirtualization||s.parent.enableInfiniteScrolling||s.parent.allowGrouping&&s.parent.groupSettings.columns.length&&s.parent.groupSettings.enableLazyLoading)){if(a="field",ft=["date","datetime","dateonly"],n.isDataRow&&s.parent.enableColumnSpan&&r.column.enableColumnSpan&&!r.isSpanned&&r.visible&&!r.isTemplate&&""!==n.data[r.column[""+a]]&&!r.isForeignKey){for(yt=1,f=d.getValue(r.column[""+a],n.data,r.column),-1!==ft.indexOf(r.column.type)&&!t.isNullOrUndefined(f)&&f instanceof Date&&(f=f.getTime()),l=i;l<n.cells.length-1;l++){if(b=n.cells[parseInt(l.toString(),10)+1],g=d.getValue(b.column[""+a],n.data,b.column),-1!==ft.indexOf(b.column.type)&&!t.isNullOrUndefined(g)&&g instanceof Date&&(g=g.getTime()),f!==g||!b.visible||!b.column.enableColumnSpan||b.isForeignKey)break;yt++}h.colSpan=yt}if(n.isDataRow&&s.parent.enableRowSpan&&r.column.enableRowSpan&&!r.isSpanned&&!r.isTemplate&&r.visible&&""!==n.data[r.column[""+a]]&&!r.isForeignKey){for(ui=s.parent.groupSettings.columns.length?n.groupDataIndex:n.index,n.isDataRow&&s.parent.groupSettings.columns.length&&!t.isNullOrUndefined(n.parentUid)&&(y=s.parent.getRowObjectFromUID(n.parentUid).data.items),pt=1,f=d.getValue(r.column[""+a],n.data,r.column),-1!==ft.indexOf(r.column.type)&&!t.isNullOrUndefined(f)&&f instanceof Date&&(f=f.getTime()),l=ui+1;l<y.length;l++){if(tt=d.getValue(r.column[""+a],y[parseInt(l.toString(),10)],r.column),-1!==ft.indexOf(r.column.type)&&!t.isNullOrUndefined(tt)&&tt instanceof Date&&(tt=tt.getTime()),f!==tt)break;pt++}h.rowSpan=pt}}if(wt=!1,n.index>0&&(s.isSpan||s.parent.isSpan&&o)){var k=s.parent.getRowsObject().filter(function(n){return n.isDataRow}),et=s.parent.groupSettings.columns.length>0&&!k[n.index-1].isDataRow?k[n.index].cells:k[n.index-1].cells,v=et.filter(function(t){return t.column.uid===n.cells[parseInt(i.toString(),10)].column.uid})[0];wt=v.isRowSpanned?v.isRowSpanned:v.rowSpanRange>1}if(h.rowSpan>1||h.colSpan>1)if(s.resetrowSpanvalue(s.parent.frozenRows>n.index?s.parent.frozenRows:y.length,h,n.index),!1===h.column.visible)h.colSpan=1;else if(nt){var st=s.parent.getColumns(),fi=s.parent.getFrozenRightColumnsCount(),kt=s.parent.getFrozenLeftCount(),ht=st.length-fi,p=h.column.index;if(kt>p&&kt<p+h.colSpan)w=p+h.colSpan-kt,h.colSpan=h.colSpan-w;else if(ht<=p&&st.length<p+h.colSpan)w=p+h.colSpan-st.length,h.colSpan=h.colSpan-w;else if("Fixed"===h.column.freeze){for(w=1,dt=p,l=dt+1;l<dt+h.colSpan&&"Fixed"===st[parseInt(l.toString(),10)].freeze;l++)w++;h.colSpan=w}else ht>p&&ht<p+h.colSpan&&(w=p+h.colSpan-ht,h.colSpan=h.colSpan-w)}(h.colSpan>1||n.cells[parseInt(i.toString(),10)].cellSpan>1||h.rowSpan>1||wt)&&(s.parent.isSpan=!0,s.isSpan=!0,ct=new ib(s.serviceLocator,s.parent),u=ct.render(h,n,i,u),nt&&tk(s.parent,h.column,u,h.colSpan))}if((r.cellType===e.Header||r.cellType===e.StackedHeader)&&vt&&(r.visible||r.cellType===e.StackedHeader)&&(gt=s.parent.getVisibleColumns(),ni=(a="field","type"),(r.column[""+ni]&&"checkbox"===r.column[""+ni]||r.cellType===e.Header&&r.column[""+a]&&gt.length&&gt[0].field===r.column[""+a]||r.cellType===e.StackedHeader)&&(u.classList.add("e-grid-group-first-cell"),ut=!1)),(r.cellType===e.Header&&(n.cells[parseInt(i.toString(),10)].colSpan>1||n.cells[parseInt(i.toString(),10)].rowSpan>1)&&(ct=new ib(s.serviceLocator,s.parent),u=ct.render(n.cells[parseInt(i.toString(),10)],n,i,u)),s.isSpan)&&(k=s.parent.getRowsObject(),it=s.parent.enableRtl,k[n.index-1]&&k[n.index-1].isDataRow)){v=(et=k[n.index-1].cells)[i-1];var lt=et[parseInt(i.toString(),10)],rt=et[i+1],ti=et[parseInt(i.toString(),10)].column.freeze;v&&(v.isRowSpanned||v.rowSpanRange>1)&&v.visible&&(it||lt.isRowSpanned&&!(v.rowSpanRange>lt.rowSpanRange)||u.classList.add("e-rowcell-firstchild"),nt&&("Fixed"===v.column.freeze&&"Fixed"===ti?u.classList.add(it?"e-removefreezerightborder":"e-removefreezeleftborder"):it||1!==i||"Left"!==ti||u.classList.add("e-addfreezefirstchildborder")));rt&&(rt.isRowSpanned||rt.rowSpanRange>1)&&rt.visible&&(it&&(!lt.isRowSpanned||rt.rowSpanRange>lt.rowSpanRange)&&u.classList.add("e-rowcell-lastchild"),nt&&"Fixed"===rt.column.freeze&&"Fixed"===ti&&h.colSpan<2&&u.classList.add(it?"e-removefreezeleftborder":"e-removefreezerightborder"))}h.rowSpan>1&&y.length-n.index===h.rowSpan&&u.classList.add("e-row-span-lastrowcell");n.cells[parseInt(i.toString(),10)].isSpanned||c.appendChild(u)}},s=this,l=0,dt=n.cells.length;l<dt;l++)kt(l);if(it=0,this.parent.groupSettings.columns.length&&this.parent.getFrozenLeftColumnsCount()){if(c.classList.contains("e-groupcaptionrow"))if(ft=[].slice.call(c.querySelectorAll(".e-leftfreeze,.e-unfreeze,.e-rightfreeze,.e-fixedfreeze,.e-freezerightborder,.e-freezeleftborder")),ft.length&&t.removeClass(ft,["e-leftfreeze","e-unfreeze","e-rightfreeze","e-fixedfreeze","e-freezerightborder","e-freezeleftborder"]),c.querySelector(".e-summarycell"))gb(c,this.parent);else{for(p=0;p<c.childNodes.length;p++)((a=c.childNodes[parseInt(p.toString(),10)]).classList.add("e-leftfreeze"),g(a,30*p,this.parent.enableRtl,"Left"),a.classList.contains("e-groupcaption"))&&(ht=parseInt(a.getAttribute("colspan"),10),et=db(this.parent,p),a.setAttribute("colspan",et.toString()),it=ht-et);it&&(a=this.parent.createElement("TD",{className:"e-groupcaption",attrs:{colspan:it.toString(),id:this.parent.element.id+"captioncell",tabindex:"-1"}}),c.appendChild(a))}if((c.querySelectorAll(".e-leftfreeze").length||c.classList.contains("e-columnheader"))&&(c.querySelectorAll(".e-indentcell").length||c.querySelectorAll(".e-grouptopleftcell").length))for(a=c.querySelectorAll(".e-indentcell, .e-grouptopleftcell"),l=0;l<a.length;l++)a[parseInt(l.toString(),10)].classList.add("e-leftfreeze"),g(a[parseInt(l.toString(),10)],30*l,this.parent.enableRtl,"Left")}if(rt={row:c,rowHeight:this.parent.rowHeight},n.isDataRow){if(v=t.extend(w,rt),v.isSelectable=!0,ct=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,lt=v.row.querySelectorAll(".e-templatecell"),(this.parent.isReact&&this.parent.requireTemplateRef||ct&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&lt.length?(b=this,b.parent.renderTemplates(function(){b.parent.trigger(rs,v);v.isSelectable||(n.isSelectable=v.isSelectable,b.disableRowSelection(b,n,rt,v))})):this.parent.trigger(rs,v),n.isSelectable=v.isSelectable,at=this.parent.isRowDragable(),this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var vt=this.parent.getPrimaryKeyFieldNames()[0],gt=n.data?n.data[""+vt]:null,yt=v.isSelectable?this.parent.partialSelectedRecords:this.parent.disableSelectedRecords;yt.some(function(n){return n[""+vt]===gt})||yt.push(n.data)}v.isSelectable||this.disableRowSelection(this,n,rt,v);(this.parent.childGrid||at||this.parent.detailTemplate)&&(a=c.querySelectorAll(".e-rowcell:not(.e-hide)")[0])&&a.classList.add("e-detailrowvisible")}if(this.parent.enableVirtualization&&(w.rowHeight=this.parent.rowHeight),w.rowHeight?c.style.height=w.rowHeight+"px":this.parent.rowHeight&&(c.querySelector(".e-headercell")||c.querySelector(".e-groupcaption"))&&(c.style.height=this.parent.rowHeight+"px"),n.cssClass&&c.classList.add(n.cssClass),n.lazyLoadCssClass&&c.classList.add(n.lazyLoadCssClass),"Vertical"!==this.parent.rowRenderingMode||!this.parent.allowTextWrap||"Header"!==this.parent.textWrapSettings.wrapMode&&"Both"!==this.parent.textWrapSettings.wrapMode||c.classList.add("e-verticalwrap"),!this.parent.enableColumnVirtualization&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(l=0;l<this.parent.aggregates.length;l++)this.parent.aggregates[parseInt(l.toString(),10)].properties.columns[0].footerTemplate&&(k=[].slice.call(c.getElementsByClassName("e-summarycell")),k.length&&(pt=k[k.length-1],t.addClass([pt],["e-lastsummarycell"]),wt=k[0],t.addClass([wt],["e-firstsummarycell"])));return c},n.prototype.resetrowSpanvalue=function(n,t,i){if(n>i&&n<i+t.rowSpan){var r=i+t.rowSpan-n;t.rowSpan=t.rowSpan-r}},n.prototype.disableRowSelection=function(n,i,r,u){var c=this.parent.getSelectedRowIndexes(),e,h;this.parent.selectionModule.isPartialSelection=!0;i.isSelected=!1;e=c.indexOf(i.index);e>-1&&c.splice(e,1);for(var o=r.row.querySelectorAll(".e-rowcell.e-gridchkbox"),s=u.row.querySelector(".e-rowdragdrop"),l=n.parent.groupSettings.columns.length+(s||n.parent.isDetail()?1:0),f=0;f<o.length;f++)o[parseInt(f.toString(),10)].firstElementChild.classList.add("e-checkbox-disabled"),o[parseInt(f.toString(),10)].querySelector(".e-frame").classList.remove("e-check");if(i.cells.length)for(f=l;f<i.cells.length;f++)h=u.row.querySelector('.e-rowcell[aria-colindex="'+(i.cells[parseInt(f.toString(),10)].index+1)+'"]'),h&&t.removeClass([h],["e-selectionbackground","e-active"]);s&&t.removeClass([s],["e-selectionbackground","e-active"])},n.prototype.refreshMergeCells=function(n){for(var t=0,i=n.cells;t<i.length;t++)i[t].isSpanned=!1;return n},n.prototype.buildAttributeFromRow=function(n,i){var r={},u=[];i.isDataRow&&u.push(y);i.isAltRow&&u.push("e-altrow");i.isCaptionRow&&u.push("e-groupcaptionrow");i.isAggregateRow&&i.parentUid&&u.push("e-groupfooterrow");t.isNullOrUndefined(i.index)||(r[c]=i.index+1);i.rowSpan&&(r.rowSpan=i.rowSpan);i.uid&&(r["data-uid"]=i.uid);i.isSelected&&(r["aria-selected"]=!0);!1===i.visible&&u.push("e-hide");r.class=u;ar(n,r)},n}(),eu=function(){function n(n){this.parent=n}return n.prototype.generateRows=function(n,t){var u=[],i=this.parent.enableVirtualization&&t?t.startIndex:0,r,f;for(i=this.parent.enableInfiniteScrolling&&t?this.getInfiniteIndex(t):i,this.parent.enableImmutableMode&&t&&t.startIndex&&(i=t.startIndex),r=0,f=Object.keys(n).length;r<f;r++,i++)u[parseInt(r.toString(),10)]=this.generateRow(n[parseInt(r.toString(),10)],i);return u},n.prototype.ensureColumns=function(){var n=[],t;return(this.parent.detailTemplate||this.parent.childGrid)&&(t={},this.parent.notify(ew,t),n.push(this.generateCell(t,null,e.DetailExpand))),this.parent.isRowDragable()&&n.push(this.generateCell({},null,e.RowDragIcon)),n},n.prototype.generateRow=function(n,t,i,r,u,f,e,o){var s={foreignKeyData:{}},h,c;return s.uid=pi("grid-row"),s.data=n,s.index=t,s.indent=r,s.tIndex=f,s.isDataRow=!0,s.parentGid=u,s.parentUid=e,this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&(s.groupDataIndex=o),this.parent.isPrinting&&("All"===this.parent.hierarchyPrintMode?s.isExpand=!0:"Expanded"===this.parent.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[parseInt(t.toString(),10)]&&(s.isExpand=this.parent.expandedRows[parseInt(t.toString(),10)].isExpand)),s.cssClass=i,s.isAltRow=!!this.parent.enableAltRow&&t%2!=0,s.isAltRow=!!this.parent.enableAltRow&&t%2!=0,s.isSelected=this.parent.getSelectedRowIndexes().indexOf(t)>-1,this.refreshForeignKeyRow(s),h=this.ensureColumns(),c=new cr(s,this.parent),c.cells="Right"===this.parent.getFrozenMode()?this.generateCells(s).concat(h):h.concat(this.generateCells(s)),c},n.prototype.refreshForeignKeyRow=function(n){for(var r=this.parent.getForeignKeyColumns(),i=0;i<r.length;i++)t.setValue(r[parseInt(i.toString(),10)].field,nu(r[parseInt(i.toString(),10)],n.data),n.foreignKeyData)},n.prototype.generateCells=function(n){for(var r=this.parent.getColumns(),u=[],i=0;i<r.length;i++)u.push(this.generateCell(r[parseInt(i.toString(),10)],n.uid,t.isNullOrUndefined(r[parseInt(i.toString(),10)].commands)?void 0:e.CommandColumn,null,i,n.foreignKeyData));return u},n.prototype.generateCell=function(n,i,r,u,f,o){var s={visible:n.visible,isDataCell:!t.isNullOrUndefined(n.field||n.template),isTemplate:!t.isNullOrUndefined(n.template),rowID:i,column:n,cellType:t.isNullOrUndefined(r)?e.Data:r,colSpan:u,commands:n.commands,isForeignKey:n.isForeignColumn&&n.isForeignColumn(),foreignKeyData:n.isForeignColumn&&n.isForeignColumn()&&t.getValue(n.field,o)};return(s.isDataCell||"checkbox"===s.column.type||s.commands)&&(s.index=f),new bi(s)},n.prototype.refreshRows=function(n){for(var t=0;t<n.length;t++)this.refreshForeignKeyRow(n[parseInt(t.toString(),10)]),n[parseInt(t.toString(),10)].cells=this.generateCells(n[parseInt(t.toString(),10)]);return n},n.prototype.getInfiniteIndex=function(n){return"infiniteScroll"===n.requestType||"delete"===n.requestType||"add"===n.action?t.isNullOrUndefined(n.startIndex)?n.index:n.startIndex:0},n}(),fit=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ch=function(){function n(n){this.parent=n}return n.prototype.getData=function(){for(var t,u=this,i=[],r=this.parent.aggregates.slice(),n=0;n<r.length;n++)t=r[parseInt(n.toString(),10)].columns.filter(function(n){return!(n.footerTemplate||n.groupFooterTemplate||n.groupCaptionTemplate)||u.columnSelector(n)}),t.length&&i.push({columns:t});return i},n.prototype.columnSelector=function(n){return void 0!==n.footerTemplate},n.prototype.getColumns=function(n){var i=[],r;if(!this.parent.detailTemplate&&t.isNullOrUndefined(this.parent.childGrid)||i.push(new ht({})),this.parent.allowGrouping)for(r=0;r<this.parent.groupSettings.columns.length;r++)i.push(new ht({}));return this.parent.isRowDragable()&&!n&&i.push(new ht({})),i.push.apply(i,this.parent.getColumns()),i},n.prototype.generateRows=function(n,t,i,r,u){if(0===n.length&&(void 0===t||!t.count&&!t.loadSummaryOnEmpty))return[];for(var s=this.buildSummaryData(n,t),e=[],o=this.getData(),f=0;f<o.length;f++)e.push(this.getGeneratedRow(o[parseInt(f.toString(),10)],s[parseInt(f.toString(),10)],t?t.level:void 0,i,r,t?t.parentUid:void 0,u));return e},n.prototype.getGeneratedRow=function(n,i,r,u,f,o,s){var l=[],a=this.getIndentByLevel(),y=!t.isNullOrUndefined(this.parent.childGrid),p=this.parent.getIndentCount(),v,h,c;for(this.parent.groupSettings.columns.length&&this.parent.allowRowDragAndDrop?a.push("e-indentcelltop"):this.parent.isRowDragable()&&!u&&(a=["e-indentcelltop"]),v=s||this.getColumns(u),h=0;h<v.length;h++)l.push(this.getGeneratedCell(v[parseInt(h.toString(),10)],n,h>=p?this.getCellType():0===h&&(this.parent.childGrid||this.parent.detailTemplate)?e.DetailFooterIntent:e.Indent,a[parseInt(h.toString(),10)],y));return c=new cr({data:i,attributes:{"class":"e-summaryrow"}}),c.cells=l,c.uid=pi("grid-row"),c.parentUid=o,c.isAggregateRow=!0,c.visible=l.some(function(n){return n.isDataCell&&n.visible}),c},n.prototype.getGeneratedCell=function(n,i,r,u,f){var e=i.columns.filter(function(t){return t.columnName===n.field})[0],o={"data-mappinguid":n.uid,"data-index":n.index},s,h;return n.textAlign&&(s={right:"e-rightalign",left:"e-leftalign",center:"e-centeralign",justify:"e-justifyalign"},s[n.textAlign.toLowerCase()]&&(o.class=s[n.textAlign.toLowerCase()])),u&&(o.class=u),t.isNullOrUndefined(u)&&f&&(o.class="e-detailindentcelltop"),h={visible:n.visible,isDataCell:!t.isNullOrUndefined(e),isTemplate:e&&!t.isNullOrUndefined(e.footerTemplate||e.groupFooterTemplate||e.groupCaptionTemplate),column:e||{},attributes:o,cellType:r},h.column.headerText=n.headerText,new bi(h)},n.prototype.buildSummaryData=function(n,t){for(var f,r,e=[],o=this.getData(),i={},u=0;u<o.length;u++){for(i={},f=o[parseInt(u.toString(),10)].columns,r=0;r<f.length;r++)i=this.setTemplate(f[parseInt(r.toString(),10)],t&&t.aggregates?t:n,i);e.push(i)}return e},n.prototype.getIndentByLevel=function(){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},n.prototype.setTemplate=function(n,i,r){var f=n.type,c={},l=n.getFormatter()||function(n){return n},u=i,e;for(f instanceof Array||(f=[n.type]),e=0;e<f.length;e++){var s=n.field+" - "+f[parseInt(e.toString(),10)].toLowerCase(),o=n.columnName,a=!!(this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&u.items),h=("Custom"!==f[parseInt(e.toString(),10)]||a)&&u.aggregates&&s in u.aggregates?u.aggregates[""+s]:wb(f[parseInt(e.toString(),10)],u.aggregates?u:i,n,this.parent);r[""+o]=r[""+o]||{};r[""+o][""+s]=h;r[""+o][f[parseInt(e.toString(),10)]]=t.isNullOrUndefined(h)?" ":l(h);u.field&&(r[""+o].field=u.field,r[""+o].key=u.key)}return c.format=n.getFormatter(),n.setTemplate(c),r},n.prototype.getCellType=function(){return e.Summary},n}(),co=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return fit(t,n),t.prototype.columnSelector=function(n){return void 0!==n.groupFooterTemplate},t.prototype.getIndentByLevel=function(n){return void 0===n&&(n=this.parent.groupSettings.columns.length),this.parent.allowRowDragAndDrop&&this.parent.groupSettings.columns.length&&(n-=1),this.parent.groupSettings.columns.map(function(t,i){return i<=n-1?"":"e-indentcelltop"})},t.prototype.getCellType=function(){return e.GroupSummary},t}(ch),lh=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return fit(t,n),t.prototype.columnSelector=function(n){return void 0!==n.groupCaptionTemplate},t.prototype.getData=function(){return[n.prototype.getData.call(this).reduce(function(n,t){return n.columns=n.columns.concat(t.columns),n},{columns:[]})]},t.prototype.isEmpty=function(){return 0===(this.getData()[0].columns||[]).length},t.prototype.getCellType=function(){return e.CaptionSummary},t}(ch),kot=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ah=function(n){function i(t){var i=n.call(this,t)||this;return i.rows=[],i.index=0,i.infiniteChildCount=0,i.renderInfiniteAgg=!0,i.parent=t,i.summaryModelGen=new co(t),i.captionModelGen=new lh(t),i}return kot(i,n),i.prototype.generateRows=function(t,i){if(0===this.parent.groupSettings.columns.length)return n.prototype.generateRows.call(this,t,i);this.isInfiniteScroll="infiniteScroll"===i.requestType;this.rows=[];this.index=this.parent.enableVirtualization||this.isInfiniteScroll?i.startIndex:0;for(var r=0,u=t.length;r<u;r++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,t[parseInt(r.toString(),10)],t.level,r,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},i.prototype.getGroupedRecords=function(n,i,r,u,f,e,o){var v,p=r,l,y,c,s,a,h;if(t.isNullOrUndefined(i.items))if(t.isNullOrUndefined(i.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(i,n,u,this.rows.length,o));else for(l=0,y=i.length;l<y;l++)this.getGroupedRecords(n,i[parseInt(l.toString(),10)],i.level,u,n,this.rows.length,o);else{if(c=void 0,s=this.generateCaptionRow(i,n,u,f,e,o),this.isInfiniteScroll&&(c=this.getPreCaption(n,s.data.key)),c?s.uid=c.uid:this.rows=this.rows.concat(s),i.items&&i.items.length&&this.getGroupedRecords(n+1,i.items,i.items.level,u,n+1,this.rows.length,s.uid),this.parent.aggregates.length&&this.isRenderAggregate(s))for(a=this.rows.length,(v=this.rows).push.apply(v,this.summaryModelGen.generateRows(i,{level:p,parentUid:s.uid})),h=a-1;h>=0;h--)if(this.rows[parseInt(h.toString(),10)].isCaptionRow)this.rows[parseInt(h.toString(),10)].aggregatesCount=this.rows.length-a;else if(!this.rows[parseInt(h.toString(),10)].isCaptionRow&&!this.rows[parseInt(h.toString(),10)].isDataRow)break;c&&this.setInfiniteRowVisibility(c)}},i.prototype.isRenderAggregate=function(n){return this.parent.enableInfiniteScrolling?!!this.renderInfiniteAgg&&(this.getPreCaption(n.indent,n.data.key),this.renderInfiniteAgg=n.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!this.parent.enableInfiniteScrolling},i.prototype.getPreCaption=function(n,t){var f,r=this.parent.getRowsObject().concat(this.rows),i,u;for(this.infiniteChildCount=0,i=r.length;i--;){if(r[parseInt(i.toString(),10)].isCaptionRow&&r[parseInt(i.toString(),10)].indent===n&&(u=r[parseInt(i.toString(),10)].data.key,(u&&u.toString()===t.toString()&&u instanceof Date||u===t)&&(f=r[parseInt(i.toString(),10)])),r[parseInt(i.toString(),10)].indent===n||r[parseInt(i.toString(),10)].indent<n)break;r[parseInt(i.toString(),10)].indent===n+1&&this.infiniteChildCount++}return f},i.prototype.getCaptionRowCells=function(n,i,r){var f=[],u=[],h=this.parent.getColumnByField(n),p=this.parent.getColumnIndexesInView(),c,s,l,o,a,v,y;if(this.parent.enableColumnVirtualization&&(h=this.parent.columns.filter(function(t){return t.field===n})[0]),c=this.parent.groupSettings.columns.length,s=this.parent,!this.parent.enableColumnVirtualization||-1!==p.indexOf(i)){for(l=0;l<i;l++)f.push(this.generateIndentCell());f.push(this.generateCell({},null,e.Expand))}(i=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+c+(s.detailTemplate||s.childGrid?1:0)-i+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty())&&(o=this.captionModelGen.generateRows(r)[0],t.extend(r,o.data),a=0,o.cells.some(function(n,t){return a=t,n.visible&&n.isDataCell}),u=o.cells.slice(a).filter(function(n){return n.visible}),o.visible&&u[0].column.field===this.parent.getVisibleColumns()[0].field&&(u=u.slice(1)),1===this.parent.getVisibleColumns().length&&(u=[]),i-=u.length);for(var k=this.parent.enableColumnVirtualization?this.parent.getColumns():[h],w=!0,b=0;b<k.length;b++)v=w&&-1!==p.indexOf(i),v&&(w=!1),y=!this.parent.enableColumnVirtualization||v?e.GroupCaption:e.GroupCaptionEmpty,i=this.parent.enableColumnVirtualization&&y===e.GroupCaption?i+c:i,s.isRowDragable()&&i++,f.push(this.generateCell(h,null,y,i));return f.push.apply(f,u),f},i.prototype.generateCaptionRow=function(n,i,r,u,f,e){var o={},h="records",c=this.parent.getColumnByField(n.field),s;return o.data=t.extend({},n),c&&(o.data.field=n.field),o.isDataRow=!1,o.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),o.parentGid=r,o.childGid=u,o.tIndex=f,o.isCaptionRow=!0,o.parentUid=e,o.gSummary=t.isNullOrUndefined(n.items[""+h])?n.items.length:n.items[""+h].length,o.uid=pi("grid-row"),s=new cr(o),s.indent=i,this.getForeignKeyData(s),s.cells=this.getCaptionRowCells(n.field,i,s.data),s},i.prototype.getForeignKeyData=function(n){var r=n.data,i=this.parent.getColumnByField(r.field),u;i&&i.isForeignColumn&&i.isForeignColumn()&&(u=t.isNullOrUndefined(r.key)?"":i.valueAccessor(i.foreignKeyValue,nu(i,{},r.key)[0],i),t.setValue("foreignKey",u,n.data))},i.prototype.generateDataRows=function(n,t,i,r,u){for(var o,e=[],s=this.parent.getColumnIndexesInView(),f=0,h=n.length;f<h;f++,r++){for(e[parseInt(f.toString(),10)]=this.generateRow(n[parseInt(f.toString(),10)],this.index,f?void 0:"e-firstchildrow",t,i,r,u,f),o=0;o<t;o++)this.parent.enableColumnVirtualization&&-1===s.indexOf(t)||e[parseInt(f.toString(),10)].cells.unshift(this.generateIndentCell());this.index++}return e},i.prototype.generateIndentCell=function(){return this.generateCell({},null,e.Indent)},i.prototype.refreshRows=function(n){for(var i,u,r=this.parent.getColumnIndexesInView(),t=0;t<n.length;t++)if(n[parseInt(t.toString(),10)].isDataRow)for(n[parseInt(t.toString(),10)].cells=this.generateCells(n[parseInt(t.toString(),10)]),i=0;i<n[parseInt(t.toString(),10)].indent;i++)this.parent.enableColumnVirtualization&&-1===r.indexOf(n[parseInt(t.toString(),10)].indent)||n[parseInt(t.toString(),10)].cells.unshift(this.generateIndentCell());else u=this.generateCaptionRow(n[parseInt(t.toString(),10)].data,n[parseInt(t.toString(),10)].indent),n[parseInt(t.toString(),10)].cells=u.cells;return n},i.prototype.setInfiniteRowVisibility=function(n){var i,r,t;if(!n.isExpand||!1===n.visible)for(i=0,r=this.rows;i<r.length;i++)t=r[i],t.parentUid===n.uid&&(t.visible=!1,t.isCaptionRow&&this.setInfiniteRowVisibility(t))},i.prototype.ensureRowVisibility=function(){for(var i,t,r,n=0;n<this.rows.length;n++)if(i=this.rows[parseInt(n.toString(),10)],i.isCaptionRow)for(t=n+1;t<this.rows.length;t++)r=this.rows[parseInt(t.toString(),10)],i.uid===r.parentUid&&(this.rows[parseInt(t.toString(),10)].visible=i.isExpand)},i}(eu),vh=function(){function n(n,i){var r=this;this.rows=[];this.freezeRows=[];this.movableRows=[];this.freezeRowElements=[];this.currentInfo={};this.prevCurrentView=[];this.isLoaded=!0;this.drop=function(n){r.parent.notify(vf,{target:n.target,droppedElement:n.droppedElement});t.remove(n.droppedElement)};this.infiniteCache={};this.visibleRows=[];this.visibleFrozenRows=[];this.rightFreezeRows=[];this.isAddRows=!1;this.isInfiniteFreeze=!1;this.useGroupCache=!1;this.tempFreezeRows=[];this.rafCallback=function(n){var t=n;return function(){var u,i,o,h,c,e,l,f,a;if(r.ariaService.setBusy(r.getPanel().querySelector("."+lt),!1),!r.parent.isDestroyed){if(u=r.rows.slice(0),r.parent.enableInfiniteScrolling){if(r.parent.groupSettings.enableLazyLoading)for(i=0;i<r.visibleRows.length;i++)r.setRowsInLazyGroup(r.visibleRows[parseInt(i.toString(),10)],i);if(u=r.parent.getRowsObject(),o=t.prevPage,r.parent.infiniteScrollSettings.enableCache&&o)for(h=r.parent.infiniteScrollSettings.maxBlocks,u=[],c=parseInt(r.rowElements[0].getAttribute("aria-rowindex"),10),e=(i=0,Math.ceil(c/r.parent.pageSettings.pageSize));i<h;i++,e++)r.infiniteCache[parseInt(e.toString(),10)]&&(u=u.concat(r.infiniteCache[parseInt(e.toString(),10)]))}(r.parent.notify(k,{rows:u,args:t}),r.parent.editSettings.showAddNewRow&&r.parent.addNewRowFocus&&(r.parent.notify(hr,{}),r.parent.addNewRowFocus=!1),r.parent.autoFit&&r.parent.preventAdjustColumns(),r.parent.isInitialLoad||r.parent.focusModule.setFirstFocusableTabIndex(),r.isLoaded)&&(r.parent.isManualRefresh=!1,r.parent.enableInfiniteScrolling&&r.parent.groupSettings.enableLazyLoading&&"sorting"===n.requestType&&(r.parent.infiniteScrollModule.groupCaptionAction=void 0),l=r.parent.parentDetails&&r.parent.parentDetails.parentInstObj&&r.parent.parentDetails.parentInstObj.isReact,(r.parent.isReact||l)&&r.parent.element.querySelectorAll(".e-templatecell").length?(f=r,f.parent.renderTemplates(function(){f.parent.trigger(ti,{},function(){f.parent.allowTextWrap&&f.parent.notify(ru,{"case":"textwrap"})})})):r.parent.trigger(ti,{},function(){r.parent.allowTextWrap&&r.parent.notify(ru,{"case":"textwrap"})}),r.parent.allowTextWrap&&"auto"===r.parent.height&&(r.parent.getContentTable().scrollHeight>r.parent.getContent().clientHeight?r.parent.scrollModule.setPadding():r.parent.scrollModule.removePadding()));t&&(a=(t.requestType||"").toLowerCase()+"-complete",r.parent.notify(a,t),"batchsave"===n.requestType&&(n.cancel=!1,r.parent.trigger(s,n)));r.isLoaded&&r.parent.hideSpinner()}}};this.parent=n;this.serviceLocator=i;this.widthService=i.getService("widthService");this.ariaService=this.serviceLocator.getService("ariaService");this.parent.enableDeepCompare=this.parent.getDataModule().isRemote();this.generator=this.getModelGenerator();this.parent.isDestroyed||(this.parent.enableColumnVirtualization||this.parent.enableVirtualization||this.parent.groupSettings.enableLazyLoading||this.parent.on(br,this.setVisible,this),this.parent.on(ul,this.colGroupRefresh,this),this.parent.on(w,this.enableAfterRender,this),this.parent.on(cw,this.refreshContentRows,this),this.parent.on(pf,this.beforeCellFocused,this),this.parent.on(l,this.droppableDestroy,this))}return n.prototype.beforeCellFocused=function(n){this.pressedKey=!n.byKey||"upArrow"!==n.keyArgs.action&&"downArrow"!==n.keyArgs.action?void 0:n.keyArgs.action},n.prototype.renderPanel=function(){var i=this.parent,n=this.parent.element.querySelector("."+it),t;if(n)return this.ariaService.setOptions(this.parent.element.querySelector("."+lt),{busy:!1}),void this.setPanel(n);n=this.parent.createElement("div",{className:it});t=this.parent.createElement("div",{className:lt});this.ariaService.setOptions(t,{busy:!1});this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&(this.renderHorizontalScrollbar(n),t.classList.add("e-virtual-content"));n.appendChild(t);this.setPanel(n);i.element.appendChild(n)},n.prototype.renderHorizontalScrollbar=function(n){var t=this.parent.createElement("div",{className:"e-movablescrollbar"}),i=this.parent.createElement("div",{className:"e-movablechild"}),r=oi().toString();this.setScrollbarHeight(i,r);this.setScrollbarHeight(t,r);t.appendChild(i);n.appendChild(t)},n.prototype.setScrollbarHeight=function(n,t){n.style.minHeight=t+"px";n.style.maxHeight=t+"px"},n.prototype.renderTable=function(){var n=this.getPanel(),i=n.querySelector(".e-virtualtable"),r=n.querySelector(".e-virtualtrack");!this.parent.enableVirtualization||t.isNullOrUndefined(i)||t.isNullOrUndefined(r)||(t.remove(i),t.remove(r));n.appendChild(this.createContentTable("_content_table"));this.setTable(n.querySelector("."+yi));"Multiple"===this.parent.selectionSettings.type&&this.ariaService.setOptions(this.parent.element,{multiselectable:!0});this.initializeContentDrop();this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdr")},n.prototype.createContentTable=function(n){var r=this.getPanel().firstElementChild,i;return this.getTable()&&t.remove(this.getTable()),i=r.querySelector("."+yi)?r.querySelector("."+yi):this.parent.createElement("table",{className:yi,attrs:{role:"presentation",id:this.parent.element.id+n}}),i.style.cssText="border-collapse: separate; border-spacing: .25px;",this.setColGroup(this.parent.getHeaderTable().querySelector(hi).cloneNode(!0)),i.appendChild(this.getColGroup()),i.appendChild(this.parent.createElement(h,{attrs:{role:"rowgroup"}})),r.appendChild(i),r},n.prototype.refreshContentRows=function(n){var r=this,i,ut,ft,s,f,st,a,ht,o,d,ct,g,lt,tt,k,dt,gt,ni,vt,ti,ri;if(void 0===n&&(n={}),i=this.parent,0!==i.currentViewData.length){i.editSettings&&i.editModule&&"Batch"===i.editSettings.mode&&i.editModule.formObj&&!1===i.editSettings.showConfirmDialog&&i.editModule.destroyForm();var v=this.currentMovableRows||i.currentViewData,it=i.isReact&&!t.isNullOrUndefined(i.rowTemplate),rt=this.parent.printGridParent&&this.parent.printGridParent.isReact,l=it||rt?i.createElement(h,{attrs:{role:"rowgroup"}}):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=t.extend([],v));s=it?i.createElement(h,{attrs:{role:"rowgroup"}}):document.createDocumentFragment();(i.isReact||rt)&&i.rowTemplate&&(ut=l,ft=s);var e,p,w,et=i.getColumns(),ot=new ci(this.serviceLocator,null,this.parent),y=this.parent.enableInfiniteScrolling&&"infiniteScroll"===n.requestType,yt=this.isInfiniteColumnvirtualization()&&"virtualscroll"!==n.requestType,pt=!(!i.enableInfiniteScrolling||!i.childGrid&&!i.detailTemplate),wt=pt&&("add"===n.action&&"save"===n.requestType||"delete"===n.requestType);if(wt&&(n.startIndex=0,i.notify(uh,{})),y&&(i.childGrid||i.detailTemplate)&&!i.infiniteScrollSettings.enableCache||(pt&&(this.parent.infiniteScrollModule.infiniteDetailDestroy=!0),i.notify(ga,y&&(i.childGrid||i.detailTemplate)&&i.infiniteScrollSettings.enableCache?n:{})),this.rowElements=[],this.rows=[],this.tempFreezeRows=[],st=!(!this.parent.frozenRows||!this.parent.groupSettings.columns.length),b(i)&&["sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"].some(function(t){return n.requestType===t})&&this.emptyVcRows(),f=this.checkCache(f,n),this.isAddRows||this.useGroupCache||(f=this.generator.generateRows(v,n)),this.setGroupCache(f,n),this.parent.notify(sa,{isInfiniteScroll:y,modelData:f,args:n}),a=this.parent.registeredTemplate,("infiniteScroll"!==n.requestType||this.parent.infiniteScrollSettings.enableCache)&&a&&a.template&&!n.isFrozen){for(ht=[],o=0;o<a.template.length;o++)for(d=0;d<a.template[parseInt(o.toString(),10)].rootNodes.length;d++)t.isNullOrUndefined(a.template[parseInt(o.toString(),10)].rootNodes[parseInt(d.toString(),10)].parentNode)&&ht.push(a.template[parseInt(o.toString(),10)]);this.parent.destroyTemplate(["template"],ht)}if((this.parent.isReact||this.parent.isVue)&&("infiniteScroll"!==n.requestType||this.parent.infiniteScrollSettings.enableCache)&&!n.isFrozen&&(ct=[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"],"infiniteScroll"===n.requestType&&this.parent.infiniteScrollSettings.enableCache&&(ct=[this.parent.isVue?"template":"columnTemplate","commandsTemplate"]),vu(this.parent,ct)),this.parent.enableColumnVirtualization&&new ib(this.serviceLocator,this.parent).updateVirtualCells(f),this.tbody=this.getTable().querySelector(h),g=0,lt=!0,b(i)&&i.vcRows.length&&(tt=t.isNullOrUndefined(n.virtualInfo.offsets)?t.isNullOrUndefined(n.scrollTop)?0:n.scrollTop.top:n.virtualInfo.offsets.top,0!==tt)){for(var bt=i.vGroupOffsets,at=i.pageSettings.pageSize/2,kt=Object.keys(bt).map(function(n){return bt[""+n]}),c=0;c<kt.length;c++)if(tt<kt[parseInt(c.toString(),10)]){if(t.isNullOrUndefined(n.virtualInfo)||"up"!==n.virtualInfo.direction){g=c*at;(this.parent.contentModule.isEndBlock(c)||this.parent.contentModule.isEndBlock(c+1))&&(n.virtualInfo.blockIndexes=[c,c+1]);break}g=c>0?(c-1)*at:c*at;break}Math.round(tt+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!n.rowObject&&(lt=!1)}if(k=i.frozenRows&&this.parent.enableVirtualization&&"reorder"===n.requestType,i.frozenRows&&"virtualscroll"===n.requestType&&"X"===n.virtualInfo.sentinelInfo.axis||k){for(dt=n.virtualInfo.blockIndexes,gt=n.virtualInfo.page,n.virtualInfo.blockIndexes=[1,2],k&&(n.virtualInfo.page=1),ni=k?this.initialPageRecords:v,vt=this.vgenerator.generateRows(ni,n),vt.splice(this.parent.frozenRows),o=0;o<this.parent.frozenRows;o++)of(e=ot.render(vt[parseInt(o.toString(),10)],et)),s.appendChild(e);n.virtualInfo.blockIndexes=dt;n.virtualInfo.page=gt;k&&1===n.virtualInfo.page&&f.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(s,f,ot,n,v,et);this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&((this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]=[]);(this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&"delete"===n.requestType||wt)&&(this.visibleRows=[]);for(var ui=function(r){var a,o,k,d,h,c,p,g,tt;if(u.rows.push(f[parseInt(r.toString(),10)]),u.parent.groupSettings.enableLazyLoading&&!u.useGroupCache&&u.parent.groupSettings.columns.length&&((u.parent.enableVirtualization?u.parent.lazyLoadRender:u.parent.contentModule).refRowsObj[u.parent.pageSettings.currentPage].push(f[parseInt(r.toString(),10)]),u.setRowsInLazyGroup(f[parseInt(r.toString(),10)],r),t.isNullOrUndefined(f[parseInt(r.toString(),10)].indent)))return"continue";if(u.setInfiniteVisibleRows(n,f[parseInt(r.toString(),10)]),b(i)&&n.virtualInfo&&n.virtualInfo.blockIndexes&&u.rowElements.length>=n.virtualInfo.blockIndexes.length*u.parent.contentModule.getBlockSize()&&lt)return u.parent.currentViewData.records=u.rows.map(function(n){return n.data}),"break";if(i.rowTemplate){if(a=i.element.id+"rowTemplate",o=void 0,i.isReact||rt){if(k=i.frozenRows&&r<i.frozenRows,d=t.extend({index:r},v[parseInt(r.toString(),10)]),i.getRowTemplate()(d,i,"rowTemplate",a,null,null,k?s:l),i.requireTemplateRef)return h=u,h.parent.renderTemplates(function(){i.frozenRows&&r<i.frozenRows?e=ft.childNodes[parseInt(r.toString(),10)]:w=ut.childNodes[parseInt(r.toString(),10)];var n={data:f[parseInt(r.toString(),10)].data,row:w||e};h.parent.trigger(rs,n);(f[parseInt(r.toString(),10)].isDataRow||h.parent.enableVirtualization&&h.parent.groupSettings.enableLazyLoading)&&h.rowElements.push(n.row);h.ariaService.setOptions(h.parent.element,{colcount:i.getColumns().length.toString()});r===f.length-1&&(ut=null,ft=null)}),"continue"}else o=i.getRowTemplate()(t.extend({index:r},v[parseInt(r.toString(),10)]),i,"rowTemplate",a,void 0,void 0,void 0,u.parent.root);if(i.isReact||"TBODY"!==o[0].tagName)i.frozenRows&&r<i.frozenRows?e=i.isReact?s.lastElementChild:nt(s,o):(i.isReact||(e=nt(l,o)),w=i.isReact?l.lastElementChild:e.lastElementChild);else{for(c=0;c<o.length;c++)p="tr"===o[parseInt(c.toString(),10)].nodeName.toLowerCase(),(p||o[parseInt(c.toString(),10)].querySelectorAll&&o[parseInt(c.toString(),10)].querySelectorAll("tr").length)&&(e=p?o[parseInt(c.toString(),10)]:o[parseInt(c.toString(),10)].querySelector("tr"));i.frozenRows&&r<i.frozenRows?s.appendChild(e):l.appendChild(e)}g={data:f[parseInt(r.toString(),10)].data,row:w||e};u.parent.trigger(rs,g)}else of(e=ot.render(f[parseInt(r.toString(),10)],et)),tt=u.ensureFrozenHeaderRender(n),i.frozenRows&&(r<i.frozenRows||st)&&!y&&"virtualscroll"!==n.requestType&&tt&&u.ensureVirtualFrozenHeaderRender(n)?s.appendChild(e):l.appendChild(e),parseInt(e.getAttribute("aria-rowindex"),10)-0===i.frozenRows&&(st=!1),f[parseInt(r.toString(),10)].isExpand&&i.notify(dl,e.cells[i.groupSettings.columns.length]);(f[parseInt(r.toString(),10)].isDataRow||u.parent.enableVirtualization&&u.parent.groupSettings.enableLazyLoading)&&(!t.isNullOrUndefined(i.rowTemplate)&&(i.isAngular||i.isVue3||i.isVue)?u.rowElements.push(w||e):u.rowElements.push(e));u.ariaService.setOptions(u.parent.element,{colcount:i.getColumns().length.toString()})},u=this,fi=(o=g,f.length);o<fi&&"break"!==ui(o);o++);ti=i.parentDetails&&i.parentDetails.parentInstObj&&i.parentDetails.parentInstObj.isReact;(!i.isReact&&!ti||i.requireTemplateRef||i.renderTemplates(),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=this.parent.contentModule.groupCache[this.parent.pageSettings.currentPage]),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.notify(gr,{rows:(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]}),i.removeMaskRow(),this.parent.notify("removeGanttShimmer",{requestType:"hideShimmer"}),i.frozenRows&&"virtualscroll"!==n.requestType&&!y&&this.ensureVirtualFrozenHeaderRender(n)||"virtualscroll"===n.requestType&&n.virtualInfo.sentinelInfo&&"X"===n.virtualInfo.sentinelInfo.axis)&&((p=i.getHeaderTable().querySelector(h),it)?(ri=p.parentElement,t.remove(p),ri.appendChild(s)):(p.innerHTML="",p.appendChild(s)),i.isInitialLoad||i.scrollModule.setHeight());n.rows=this.rows.slice(0);ab(function(){var e,u,f;(r.parent.notify(tw,n),r.parent.enableVirtualization||r.parent.enableColumnVirtualization&&!yt||y||(i.isReact||(r.tbody.innerHTML=""),t.isNullOrUndefined(r.tbody.parentElement)?t.remove(i.getContentTable().querySelector(h)):t.remove(r.tbody),r.tbody=r.parent.createElement(h,{attrs:{role:"rowgroup"}})),i.rowTemplate&&t.updateBlazorTemplate(i.element.id+"rowTemplate","RowTemplate",i),!t.isNullOrUndefined(r.parent.infiniteScrollModule)&&(r.parent.enableInfiniteScrolling&&!r.isInfiniteColumnvirtualization()||yt))?(r.isAddRows=!1,r.parent.notify(oa,{args:n}),r.parent.notify(ea,{tbody:r.tbody,frag:l,args:n,rows:r.rows,rowElements:r.rowElements,visibleRows:r.visibleRows,tableName:void 0}),r.isInfiniteColumnvirtualization()&&r.parent.isFrozenGrid())&&(e=uc(r.parent.getContent().querySelector(".e-virtualtable")),r.parent.contentModule.resetStickyLeftPos(e.width),r.widthService.refreshFrozenScrollbar()):(r.useGroupCache=!1,r.appendContent(r.tbody,l,n));r.parent.editSettings.showAddNewRow&&(r.parent.enableVirtualization||r.parent.enableInfiniteScrolling)&&(u=r.parent.element.querySelector(".e-addrow-removed"),u&&t.remove(u));f=!r.parent.element.querySelector("."+ii);r.parent.editSettings.showAddNewRow&&"Normal"===r.parent.editSettings.mode&&(f&&((r.parent.enableVirtualization||r.parent.enableInfiniteScrolling)&&(r.parent.isAddNewRow=!0),r.parent.isEdit=!1,r.parent.addRecord()),(f||(r.parent.enableVirtualization||r.parent.enableInfiniteScrolling)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some(function(t){return n.requestType===t}))&&r.parent.notify(hr,{}));r.parent.getVisibleFrozenRightCount()&&r.parent.getContent()&&uy(r.parent)>0&&r.parent.element.classList.add("e-right-shadow");l=null},this.rafCallback(t.extend({},n)))}},n.prototype.isInfiniteColumnvirtualization=function(){return this.parent.enableColumnVirtualization&&this.parent.enableInfiniteScrolling},n.prototype.enableCacheOnInfiniteColumnVirtual=function(){return this.isInfiniteColumnvirtualization()&&this.parent.infiniteScrollSettings.enableCache},n.prototype.emptyVcRows=function(){this.parent.vcRows=[];this.parent.vRows=[]},n.prototype.appendContent=function(n,i){var u,r,f;if(this.parent.isReact&&!t.isNullOrUndefined(this.parent.rowTemplate)?this.getTable().appendChild(i):(n.appendChild(i),this.getTable().appendChild(n)),"Vertical"===this.parent.rowRenderingMode&&this.parent.allowTextWrap&&("Header"===this.parent.textWrapSettings.wrapMode||"Both"===this.parent.textWrapSettings.wrapMode))for(u=n.querySelectorAll("td"),r=0;r<u.length;r++)f=parseFloat(document.defaultView.getComputedStyle(u[parseInt(r.toString(),10)],"::before").getPropertyValue("height")),f>u[parseInt(r.toString(),10)].offsetHeight&&(u[parseInt(r.toString(),10)].style.height=f+"px",u[parseInt(r.toString(),10)].style.boxSizing="content-box");this.parent.getVisibleFrozenLeftCount()&&this.parent.enableColumnVirtualization&&this.widthService.refreshFrozenScrollbar()},n.prototype.setRowsInLazyGroup=function(n,t){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).maintainRows(n,t)},n.prototype.setGroupCache=function(n,t){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify(aw,{args:t,data:n})},n.prototype.ensureFrozenHeaderRender=function(n){return!(this.parent.enableVirtualization&&("reorder"===n.requestType||"refresh"===n.requestType)||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&"delete"===this.parent.infiniteScrollModule.requestType&&1!==this.parent.pageSettings.currentPage)},n.prototype.ensureVirtualFrozenHeaderRender=function(n){return!(this.parent.enableVirtualization&&"delete"===n.requestType)},n.prototype.checkCache=function(n,i){if(this.parent.infiniteScrollSettings.enableCache&&"infiniteScroll"===i.requestType){if(this.isAddRows=!t.isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage]),this.isAddRows){var r=this.infiniteCache[this.parent.pageSettings.currentPage];n=1===this.parent.pageSettings.currentPage?r.slice(this.parent.frozenRows):r}return n}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&("paging"===i.requestType||"columnstate"===i.requestType||"reorder"===i.requestType||"virtualscroll"===i.requestType)&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).getGroupCache()[this.parent.pageSettings.currentPage]?(this.parent.enableVirtualization||(this.useGroupCache=!0),this.parent.enableVirtualization?this.parent.getRowsObject():this.parent.contentModule.initialGroupRows("reorder"===i.requestType)):null},n.prototype.setInfiniteVisibleRows=function(n,t){!this.parent.enableInfiniteScrolling||this.parent.infiniteScrollSettings.enableCache||this.isInfiniteColumnvirtualization()&&"virtualscroll"===n.requestType||this.visibleRows.push(t)},n.prototype.getCurrentBlockInfiniteRecords=function(){var n=[],u,t;if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];var i=this.parent.getRows(),r=parseInt(i[this.parent.frozenRows].getAttribute(c),10)-1,f=Math.ceil((r+1)/this.parent.pageSettings.pageSize);for(r=parseInt(i[i.length-1].getAttribute(c),10)-1,u=Math.ceil((r+(i.length?1:0))/this.parent.pageSettings.pageSize),t=f;t<=u;t++)n=n.length?n.concat(this.infiniteCache[parseInt(t.toString(),10)]):this.infiniteCache[parseInt(t.toString(),10)];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(n=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(n))}return n},n.prototype.getReorderedRows=function(n){return this.parent.contentModule.getReorderedFrozenRows(n)},n.prototype.virtualFrozenHdrRefresh=function(n,t,i,r,u,f){if(this.parent.frozenRows&&this.parent.enableVirtualization&&("reorder"===r.requestType||"refresh"===r.requestType)){for(var o=void 0,s=this.getReorderedRows(r),e=0;e<s.length;e++)o=i.render(s[parseInt(e.toString(),10)],f),n.appendChild(o);1===r.virtualInfo.page&&t.splice(0,this.parent.frozenRows)}},n.prototype.getInfiniteRows=function(){var n=[],i,t;if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache)for(i=Object.keys(this.infiniteCache),t=0;t<i.length;t++)n=n.concat(this.infiniteCache[i[parseInt(t.toString(),10)]]);else n=this.visibleRows;return n},n.prototype.getInfiniteMovableRows=function(){var n=this.getCurrentBlockInfiniteRecords();return this.parent.enableInfiniteScrolling?n.length?n:this.visibleRows:[]},n.prototype.getPanel=function(){return this.contentPanel},n.prototype.setPanel=function(n){this.contentPanel=n},n.prototype.getTable=function(){return this.contentTable},n.prototype.setTable=function(n){this.contentTable=n},n.prototype.getRows=function(){var n=this.getInfiniteRows();return n.length?n:this.rows},n.prototype.getRowElements=function(){return this.rowElements},n.prototype.setRowElements=function(n){this.rowElements=n},n.prototype.getColGroup=function(){return this.colgroup},n.prototype.setColGroup=function(n){return t.isNullOrUndefined(n)||(n.id="content-"+n.id),this.colgroup=n},n.prototype.setVisible=function(n){var r,o=this.parent,u;this.getRows().some(function(n){return n.isDataRow&&(r=n),n.isDataRow});u=!0;!o.groupSettings.columns.length&&r&&(u=!1);for(var c=o.getDataRows(),s=this.infiniteRowVisibility()||this.rows.filter(function(n){return!n.isDetailRow}),f=0,l=n.length;f<l;f++){var i=n[parseInt(f.toString(),10)],e=this.parent.getNormalizedColumnIndex(i.uid),a=this.parent.getColumnIndexByUid(i.uid),h=!0===i.visible?"":"none";-1!==e&&r&&e<r.cells.length&&t.setStyleAttribute(this.getColGroup().childNodes[parseInt(e.toString(),10)],{display:h});u||this.setDisplayNone(c,a,h,s);!this.parent.invokedFromMedia&&i.hideAtMedia&&this.parent.updateMediaColumns(i);this.parent.invokedFromMedia=!1}u?this.refreshContentRows({requestType:"refresh"}):(this.parent.notify(gl,{rows:s,args:{}}),this.parent.editSettings.showAddNewRow&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.notify(hr,{}))},n.prototype.setDisplayNone=function(n,t,i,r){ek(n,t,i,r,this.parent,this.parent.isRowDragable());this.parent.notify(fa,{visible:i,index:t,isFreeze:this.isInfiniteFreeze})},n.prototype.infiniteRowVisibility=function(n){var t;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=n,t=this.parent.infiniteScrollSettings.enableCache?this.getCurrentBlockInfiniteRecords():n?this.visibleFrozenRows:this.visibleRows),t},n.prototype.colGroupRefresh=function(){if(this.getColGroup()){var n=this.getHeaderColGroup();this.getTable().replaceChild(n,this.getColGroup());this.setColGroup(n)}},n.prototype.getHeaderColGroup=function(){return this.parent.element.querySelector("."+st).querySelector(hi+":not(.e-masked-colgroup)").cloneNode(!0)},n.prototype.initializeContentDrop=function(){var n=this.parent;this.droppable=new t.Droppable(n.element,{accept:".e-dragclone",drop:this.drop})},n.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()},n.prototype.canSkip=function(n,i,r){return t.isNullOrUndefined(i)||t.isNullOrUndefined(n.visible)||i.cells[parseInt(r.toString(),10)].visible===n.visible},n.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new ah(this.parent):new eu(this.parent)},n.prototype.renderEmpty=function(n){this.getTable().appendChild(n);this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(h).innerHTML="")},n.prototype.setSelection=function(n,t,i){var u,r,e,f;for(this.parent.notify(ott,{uid:n,set:t,clearAll:i}),u=this.getRows().filter(function(t){return i||n===t.uid}),r=0;r<u.length;r++)for(u[parseInt(r.toString(),10)].isSelected=t,e=u[parseInt(r.toString(),10)].cells,f=0;f<e.length;f++)e[parseInt(f.toString(),10)].isSelected=t},n.prototype.getRowByIndex=function(n){return n=this.getInfiniteRowIndex(n),t.isNullOrUndefined(n)?void 0:this.parent.getDataRows()[parseInt(n.toString(),10)]},n.prototype.getInfiniteRowIndex=function(n){if(this.parent.infiniteScrollSettings.enableCache&&!t.isNullOrUndefined(n)){var i=this.parent.frozenRows,r=i>n?0:i,u=parseInt(this.parent.getRows()[parseInt(r.toString(),10)].getAttribute(c),10)-1;n=i>n?n:n-u+i}return n},n.prototype.getVirtualRowIndex=function(n){return n},n.prototype.enableAfterRender=function(n){"group"===n.module&&n.enable&&(this.generator=this.getModelGenerator())},n.prototype.setRowObjects=function(n){this.rows=n},n.prototype.immutableModeRendering=function(n){var nt=this,f,g,y,i,u,p,o,ut;void 0===n&&(n={});f=this.parent;f.hideSpinner();var e=f.getPrimaryKeyFieldNames()[0],w={},tt={},s=[],it={},c=f.getRowsObject().slice(),b=this.getBatchEditedRecords(e,c),v={},k=0!==Object.keys(b).length;if(f.getContent().querySelector(".e-emptyrow")||"reorder"===n.requestType||this.parent.groupSettings.columns.length)this.refreshContentRows(n);else{if(0===f.currentViewData.length)return;var d={},a=f.createElement(h,{attrs:{role:"rowgroup"}}),r=f.currentViewData,l=[].slice.call(this.getTable().querySelector(h).children);if(this.prevCurrentView.length)if(g=this.prevCurrentView.length,y=r.length,g===y)for(i=0;i<y;i++)"Batch"===this.parent.editSettings.mode&&l[parseInt(i.toString(),10)].classList.contains("e-insertedrow")?(l.splice(i,1),--i):(tt[r[parseInt(i.toString(),10)][""+e]]=w[this.prevCurrentView[parseInt(i.toString(),10)][""+e]]=i,v[parseInt(i.toString(),10)]=r[parseInt(i.toString(),10)][""+e],d[c[parseInt(i.toString(),10)].uid]=l[parseInt(i.toString(),10)],it[parseInt(i.toString(),10)]=this.prevCurrentView[parseInt(i.toString(),10)][""+e]);else{for(i=0;i<y;i++)tt[r[parseInt(i.toString(),10)][""+e]]=i,v[parseInt(i.toString(),10)]=r[parseInt(i.toString(),10)][""+e];for(i=0;i<g;i++)"Batch"===this.parent.editSettings.mode&&l[parseInt(i.toString(),10)].classList.contains("e-insertedrow")?(l.splice(i,1),--i):(d[c[parseInt(i.toString(),10)].uid]=l[parseInt(i.toString(),10)],w[this.prevCurrentView[parseInt(i.toString(),10)][""+e]]=i,it[parseInt(i.toString(),10)]=this.prevCurrentView[parseInt(i.toString(),10)][""+e])}for(i=0;i<r.length;i++)if(u=w[r[parseInt(i.toString(),10)][""+e]],t.isNullOrUndefined(u)){var ft=new ci(this.serviceLocator,null,f),et={startIndex:i},rt=this.generator.generateRows([r[parseInt(i.toString(),10)]],et);s.push(rt[0]);o=ft.render(rt[0],f.getColumns());a.appendChild(o);this.refreshImmutableContent(i,o,s[parseInt(i.toString(),10)])}else{if(p=!1,this.parent.enableDeepCompare&&(p=this.objectEqualityChecker(this.prevCurrentView[parseInt(u.toString(),10)],r[parseInt(i.toString(),10)])),o=d[c[parseInt(u.toString(),10)].uid],s.push(c[parseInt(u.toString(),10)]),this.rowElements[parseInt(u.toString(),10)]&&this.rowElements[parseInt(u.toString(),10)].getAttribute("data-uid")===s[parseInt(i.toString(),10)].uid&&(k&&t.isNullOrUndefined(b[v[parseInt(i.toString(),10)]])||!k&&(p||this.prevCurrentView[parseInt(u.toString(),10)]===r[parseInt(i.toString(),10)]))){u!==i&&this.refreshImmutableContent(i,o,s[parseInt(i.toString(),10)]);a.appendChild(o);continue}(!k||t.isNullOrUndefined(b[v[parseInt(i.toString(),10)]]))&&(this.parent.enableDeepCompare||r[parseInt(i.toString(),10)]===this.prevCurrentView[parseInt(u.toString(),10)])&&(!this.parent.enableDeepCompare||p)||c[parseInt(u.toString(),10)].setRowValue(r[parseInt(i.toString(),10)]);a.appendChild(o);this.refreshImmutableContent(i,o,s[parseInt(i.toString(),10)])}(this.rows=s,this.rowElements=[].slice.call(a.children),t.remove(this.getTable().querySelector(h)),this.getTable().appendChild(a),this.parent.trigger(ti,{},function(){nt.parent.allowTextWrap&&nt.parent.notify(ru,{"case":"textwrap"})}),n)&&(ut=(n.requestType||"").toLowerCase()+"-complete",this.parent.notify(ut,n))}},n.prototype.objectEqualityChecker=function(n,t){for(var r=Object.keys(n),u=!0,i=0;i<r.length;i++)if(!(n[r[parseInt(i.toString(),10)]]===t[r[parseInt(i.toString(),10)]]||n[r[parseInt(i.toString(),10)]]instanceof Date&&t[r[parseInt(i.toString(),10)]]instanceof Date&&n[r[parseInt(i.toString(),10)]].getTime()===t[r[parseInt(i.toString(),10)]].getTime())){u=!1;break}return u},n.prototype.getBatchEditedRecords=function(n,t){var o={},u=this.parent.getBatchChanges(),f=[],r=[],e,i;for(Object.keys(u).length&&(f=u.changedRecords,r=u.addedRecords),e={cancel:!1},this.parent.notify(stt,{rows:t,args:e}),r.length&&("Bottom"===this.parent.editSettings.newRowPosition?t.splice(t.length-1,r.length):e.cancel||t.splice(0,r.length)),i=0;i<f.length;i++)o[f[parseInt(i.toString(),10)][""+n]]=i;return o},n.prototype.refreshImmutableContent=function(n,t,i){i.isAltRow=!!this.parent.enableAltRow&&n%2!=0;i.isAltRow?t.classList.add("e-altrow"):t.classList.remove("e-altrow");i.index=n;i.edit=void 0;i.isDirty=!1;t.setAttribute(c,(n+1).toString());this.updateCellIndex(t,n)},n.prototype.updateCellIndex=function(n,t){for(var i=0;i<n.cells.length;i++)n.cells[parseInt(i.toString(),10)].setAttribute("data-index",t.toString())},n}();const ri=ejdashboard.buttons;var fb=function(){function n(n,r){var u=this;this.frzIdx=0;this.notfrzIdx=0;this.isFirstCol=!1;this.isReplaceDragEle=!0;this.helper=function(){var n=u.parent,s=u.draggable.currentStateTarget,h=i(s,"e-headercell"),r,e,f,c,o;if(!n.allowReordering&&!n.allowGrouping||!t.isNullOrUndefined(h)&&h.getElementsByClassName("e-checkselectall").length>0||(r=u.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),e=s.classList.contains("e-headercell")?s:h,!e||!n.allowReordering&&e.classList.contains("e-stackedheadercell")))return!1;if(c=e.offsetHeight,o=e.querySelector(".e-headercelldiv")||e.querySelector(".e-stackedheadercelldiv"),o){if(f=e.querySelector(".e-stackedheadercelldiv")?n.getStackedHeaderColumnByHeaderText(o.innerText.trim(),n.columns):n.getColumnByUid(o.getAttribute("data-mappinguid")),u.column=f,u.column.lockColumn)return!1;r.setAttribute("data-mappinguid",u.column.uid)}if(f&&!t.isNullOrUndefined(f.headerTemplate)){if(t.isNullOrUndefined(f.headerTemplate))r.innerHTML=f.headerTemplate;else{var l=n.getColumnIndexByField(f.field),a=f.getHeaderTemplate()(t.extend({index:l},f),n,"headerTemplate",null,null,null,null,n.root),v=n.isReact&&"string"!=typeof f.headerTemplate,y=n.parentDetails&&n.parentDetails.parentInstObj&&n.parentDetails.parentInstObj.isReact;(v||y)&&n.renderTemplates();nt(r,a)}t.isNullOrUndefined(r.firstChild)||1!==r.firstChild.nodeType||(r.firstChild.style.pointerEvents="none")}else r.innerHTML=o?f.headerText:e.firstElementChild.innerHTML;return r.style.width=e.offsetWidth+"px",r.style.height=e.offsetHeight+"px",r.style.lineHeight=(c-6).toString()+"px",n.element.appendChild(r),r};this.dragStart=function(n){var t=u.parent;t.element.querySelector(".e-gridpopup").style.display="none";t.notify(af,{target:u.draggable.currentStateTarget,column:u.column,event:n.event})};this.drag=function(n){var i=u.parent,f=n.target,r,e;if(f){if(r=t.closest(f,".e-grid"),e=u.parent.element.querySelector(".e-cloneproperties"),!(r&&r.getAttribute("id")===i.element.getAttribute("id")||(t.classList(e,["e-notallowedcur"],["e-defaultcur"]),i.allowReordering&&(i.element.querySelector(".e-reorderuparrow").style.display="none",i.element.querySelector(".e-reorderdownarrow").style.display="none"),i.groupSettings.allowReordering)))return;i.notify(ku,{target:n.target,column:u.column,event:n.event})}};this.dragStop=function(n){var f,r=u.parent;r.element.querySelector(".e-gridpopup").style.display="none";(!i(n.target,"e-headercell")&&!i(n.target,"e-groupdroparea")||!r.allowReordering&&i(n.target,"e-headercell")||!n.helper.getAttribute("data-mappinguid")&&i(n.target,"e-groupdroparea"))&&(t.remove(n.helper),f=!0);r.notify(ll,{target:n.target,event:n.event,column:u.column,cancel:f})};this.drop=function(n){var i=u.parent,f=n.droppedElement.getAttribute("data-mappinguid"),r=t.closest(n.target,".e-grid");t.remove(n.droppedElement);(!r||r.getAttribute("id")===i.element.getAttribute("id"))&&(i.allowReordering||i.allowGrouping)&&i.notify(wf,{target:n.target,uid:f,droppedElement:n.droppedElement})};this.parent=n;this.serviceLocator=r;this.ariaService=this.serviceLocator.getService("ariaService");this.widthService=this.serviceLocator.getService("widthService");this.parent.isDestroyed||(this.parent.enableColumnVirtualization||this.parent.on(br,this.setVisible,this),this.parent.on(ke,this.colPosRefresh,this),this.parent.on(pt,this.renderCustomToolbar,this),"Vertical"===this.parent.rowRenderingMode&&this.parent.on(w,this.updateCustomResponsiveToolbar,this))}return n.prototype.renderPanel=function(){var n=this.parent.element.querySelector("."+st),t=null!=n,i;n=t?n:this.parent.createElement("div",{className:"e-gridheader"});i=t?n.querySelector("."+ct):this.parent.createElement("div",{className:ct});this.toggleStackClass(n);n.appendChild(i);this.setPanel(n);t||this.parent.element.appendChild(n)},n.prototype.renderTable=function(){var n=this.getPanel();n.appendChild(this.createHeaderTable());this.setTable(n.querySelector("."+yi));this.initializeHeaderDrag();this.initializeHeaderDrop();this.parent.notify(bt,{rows:this.rows})},n.prototype.getPanel=function(){return this.headerPanel},n.prototype.setPanel=function(n){this.headerPanel=n},n.prototype.getTable=function(){return this.headerTable},n.prototype.setTable=function(n){this.headerTable=n},n.prototype.getColGroup=function(){return this.colgroup},n.prototype.setColGroup=function(n){return this.colgroup=n},n.prototype.getRows=function(){return this.getTable().tHead.rows},n.prototype.createHeaderTable=function(){var t=this.createTable(),n=this.getPanel().querySelector("."+ct);return n.appendChild(t),n},n.prototype.createHeader=function(n,i){var u,r,e,y;void 0===n&&(n=null);u=this.parent;this.getTable()&&t.remove(this.getTable());r=this.parent.createElement("table",{className:yi,attrs:{role:"presentation"}});r.style.cssText="border-collapse: separate; border-spacing: .25px;";var o=this.createHeaderContent(i),p=o.thead,s=this.parent.createElement(h,{className:this.parent.frozenRows||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"":"e-hide",attrs:{role:"rowgroup"}});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var c,l=this.parent.createElement(hi),a=this.parent.createElement("tr",{attrs:{role:"row"},className:(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"e-hide":""}),v=this.rows=o.rows,f=0,w=v.length;f<w;f++)for(e=0,y=v[parseInt(f.toString(),10)].cells.length;e<y;e++)c=this.parent.createElement("td"),a.appendChild(c);return(u.allowFiltering||u.allowSorting||u.allowGrouping)&&r.classList.add("e-sortfilter"),this.updateColGroup(l),s.appendChild(a),r.appendChild(this.caption),r.appendChild(this.setColGroup(l)),r.appendChild(p),r.appendChild(s),r},n.prototype.createTable=function(n){return void 0===n&&(n=null),this.createHeader(n)},n.prototype.createHeaderContent=function(n){var f=this.parent,o=f.getColumns(),s=this.parent.createElement("thead",{attrs:{role:"rowgroup"}}),c=this.parent.createElement("tr",{className:"e-columnheader",attrs:{role:"row"}}),h=new ci(this.serviceLocator,e.Header,f),u,i,t,r;for(h.element=c,i=[],this.colDepth=rc(f.columns),t=0,r=this.colDepth;t<r;t++)i[parseInt(t.toString(),10)]=this.generateRow(t),i[parseInt(t.toString(),10)].cells=[];if(i=this.ensureColumns(i),i=this.getHeaderCells(i,n),f.isRowDragable()&&"Right"===this.parent.getFrozenMode())for(t=0,r=i.length;t<r;t++)i[parseInt(t.toString(),10)].cells.push(this.generateCell({},e.RowDragHIcon));for(o.filter(function(n){return n.headerTemplate}).length&&(this.parent.isReact||this.parent.isVue)&&vu(this.parent,["headerTemplate"]),t=0,r=this.colDepth;t<r;t++)u=h.render(i[parseInt(t.toString(),10)],o),this.parent.rowHeight&&u.querySelector(".e-headercell")&&(u.style.height=this.parent.rowHeight+"px"),of(u),s.appendChild(u);return{thead:s,rows:i}},n.prototype.updateColGroup=function(n){var i,f=this.parent.getColumns(),e=this.parent.getColumnIndexesInView(),r,u;if(n.id=this.parent.element.id+hi,this.parent.allowGrouping)for(r=0,u=this.parent.groupSettings.columns.length;r<u;r++)this.parent.enableColumnVirtualization&&-1===e.indexOf(r)||(i=this.parent.createElement("col",{className:"e-group-intent"}),n.appendChild(i));for((this.parent.detailTemplate||this.parent.childGrid)&&(i=this.parent.createElement("col",{className:"e-detail-intent"}),n.appendChild(i)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),n.appendChild(i)),r=0,u=f.length;r<u;r++)i=this.parent.createElement("col"),!1===f[parseInt(r.toString(),10)].visible&&t.setStyleAttribute(i,{display:"none"}),n.appendChild(i);return this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),n.appendChild(i)),n},n.prototype.ensureColumns=function(n){for(var u,f,s,t,o,r=this.parent,h=this.parent.getColumnIndexesInView(),i=0,c=n.length;i<c;i++){if(u=0===i?this.colDepth:0,r.allowGrouping)for(f=0,s=r.groupSettings.columns.length;f<s;f++)this.parent.enableColumnVirtualization&&-1===h.indexOf(f)||(t=this.generateCell({},e.HeaderIndent),this.colDepth>1&&(t.rowSpan=u),n[parseInt(i.toString(),10)].cells.push(t));(r.detailTemplate||r.childGrid)&&(o={},this.parent.notify(ew,o),t=this.generateCell(o,e.DetailHeader),this.colDepth>1&&(t.rowSpan=u),n[parseInt(i.toString(),10)].cells.push(t));r.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(t=this.generateCell({},e.RowDragHIcon),this.colDepth>1&&(t.rowSpan=u),n[parseInt(i.toString(),10)].cells.push(t))}return n},n.prototype.getHeaderCells=function(n,i){var e=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),u=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns,r,f;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(r=0;r<(t.isNullOrUndefined(u)?0:u.length);r++)this.lockColsRendered=!1,n=this.appendCells(u[parseInt(r.toString(),10)],n,0,0===r,!1,r===u.length-1,e,i,!1);for(r=0,f=t.isNullOrUndefined(u)?0:u.length;r<f;r++)this.notfrzIdx=0,this.lockColsRendered=!0,n=this.appendCells(u[parseInt(r.toString(),10)],n,0,0===r,!1,r===f-1,e,i,!1);return n},n.prototype.appendCells=function(n,t,i,r,u,f,o,s,h){var w=f?h?"e-laststackcell":"e-lastcell":"",b=!this.parent.lockcolPositionCount||n.lockColumn&&!this.lockColsRendered||!n.lockColumn&&this.lockColsRendered,l,a,c,v,p,y;if(n.columns){if(this.isFirstCol=!1,l=this.getCellCnt(n,0),l&&(a=this.getStackedLockColsCount(n,0),(0===this.parent.lockcolPositionCount||!this.lockColsRendered&&0!==a||this.lockColsRendered&&l-a!=0)&&t[parseInt(i.toString(),10)].cells.push(new bi({cellType:e.StackedHeader,column:n,colSpan:this.getColSpan(l,a),className:r?"":u?"e-firstcell":""}))),this.parent.lockcolPositionCount&&!this.lockColsRendered)for(c=0;c<n.columns.length;c++)t=this.appendCells(n.columns[parseInt(c.toString(),10)],t,i+1,r,0===c,c===n.columns.length-1&&f,o,s,!1);if(this.lockColsRendered)for(c=0,v=n.columns.length;c<v;c++)r=r&&0===c,p=this.isFirstCol=n.columns[parseInt(c.toString(),10)].visible&&!r,y=c===v-1&&f,t=this.appendCells(n.columns[parseInt(c.toString(),10)],t,i+1,r,p&&!y,y,o,s,!0)}else b&&t[parseInt(i.toString(),10)].cells.push(this.generateCell(n,e.Header,this.colDepth-i,(r?"":u?"e-firstcell":"")+w,i,this.parent.getColumnIndexByUid(n.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(n.lockColumn&&!this.lockColsRendered||!n.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;return t},n.prototype.getStackedLockColsCount=function(n,t){if(n.columns)for(var i=0;i<n.columns.length;i++)t=this.getStackedLockColsCount(n.columns[parseInt(i.toString(),10)],t);else n.lockColumn&&t++;return t},n.prototype.getColSpan=function(n,t){return this.lockColsRendered?n-t:t},n.prototype.generateRow=function(){return new cr({})},n.prototype.generateCell=function(n,i,r,u,f,e){var o={visible:n.visible,isDataCell:!1,isTemplate:!t.isNullOrUndefined(n.headerTemplate),rowID:"",column:n,cellType:i,rowSpan:r,className:u,index:f,colIndex:e};return(!o.rowSpan||o.rowSpan<2)&&delete o.rowSpan,new bi(o)},n.prototype.setVisible=function(n){for(var e,r,u,i=this.parent,f=0,o=n.length;f<o;f++)e=n[parseInt(f.toString(),10)],u=i.getNormalizedColumnIndex(e.uid),r=e.visible?"":"none",t.setStyleAttribute(this.getColGroup().children[parseInt(u.toString(),10)],{display:r}),i.editSettings.showAddNewRow&&i.element.querySelector(".e-addedrow")&&t.setStyleAttribute(i.element.querySelector(".e-addedrow").querySelector("colgroup").childNodes[parseInt(u.toString(),10)],{display:r});this.refreshUI();this.parent.editSettings.showAddNewRow&&(this.parent.isAddNewRow=!0)},n.prototype.colPosRefresh=function(){this.refreshUI()},n.prototype.refreshUI=function(){var s=this.getPanel(),n,u,f,l,r,o;if(this.toggleStackClass(s),n=this.getTable(),n){t.remove(n);this.parent.editSettings.showAddNewRow&&!this.parent.isAddNewRow&&n.querySelector(".e-addedrow")&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(n.querySelector(".e-addedrow").classList.add("e-addrow-removed"),this.parent.isAddNewRow=!0);n.removeChild(n.childNodes[1]);n.removeChild(n.childNodes[1]);u=this.parent.createElement(hi);f=this.createHeaderContent(void 0);this.rows=f.rows;n.insertBefore(f.thead,n.childNodes[1]);this.updateColGroup(u);n.insertBefore(this.setColGroup(u),n.childNodes[1]);this.appendContent(n);this.parent.notify(ul,{});this.widthService.setWidthToColumns();this.parent.updateDefaultCursor();this.initializeHeaderDrag();for(var h=[].slice.call(s.querySelectorAll("tr.e-columnheader")),e=0,c=h;e<c.length;e++)l=c[e],r=[].slice.call(l.getElementsByClassName("e-grouptopleftcell")),r.length&&r[r.length-1].classList.add("e-lastgrouptopleftcell");this.parent.notify(bt,{rows:this.rows});this.parent.enableColumnVirtualization&&i(n,ov)&&this.parent.notify(bt,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}});this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&nr(h,!0)}o=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");t.isNullOrUndefined(o)||(o.tabIndex=0)},n.prototype.toggleStackClass=function(n){var i=this.parent.columns;!t.isNullOrUndefined(i)&&i.some(function(n){return!t.isNullOrUndefined(n.columns)})?n.classList.add("e-stackedheader"):n.classList.remove("e-stackedheader")},n.prototype.appendContent=function(n){this.getPanel().querySelector("."+ct).appendChild(n)},n.prototype.getCellCnt=function(n,t){if(n.columns)for(var i=0,r=n.columns.length;i<r;i++)t=this.getCellCnt(n.columns[parseInt(i.toString(),10)],t);else n.visible&&t++;return t},n.prototype.initializeHeaderDrag=function(){var n=this.parent;(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)&&(this.draggable=new t.Draggable(n.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}),this.parent.on(l,this.droppableDestroy,this))},n.prototype.initializeHeaderDrop=function(){var n=this.parent;this.droppable=new t.Droppable(n.getHeaderContent(),{accept:".e-dragclone",drop:this.drop});this.parent.on(l,this.droppableDestroy,this)},n.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy();this.draggable&&!this.draggable.isDestroyed&&this.draggable.destroy()},n.prototype.renderCustomToolbar=function(){var r=this,n=this.parent;if("Vertical"===n.rowRenderingMode&&!n.toolbar&&(n.allowSorting||n.allowFiltering&&"FilterBar"!==n.filterSettings.type)){for(var u=n.createElement("div",{className:"e-res-toolbar e-toolbar"}),f=n.createElement("div",{className:"e-toolbar-items"}),e=n.createElement("div",{className:"e-toolbar-left"}),o=this.parent.allowFiltering&&this.parent.allowSorting?2:1,i=0;i<o;i++){var s=n.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),h=1===o?this.parent.allowSorting?"sort":"filter":1===i?"sort":"filter",t=n.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),c=n.createElement("span",{className:"e-btn-icon e-res"+h+"-icon e-icons"});t.appendChild(c);new ri.Button({cssClass:this.parent.cssClass?this.parent.cssClass:""}).appendTo(t);t.onclick=function(n){n.target.classList.contains("e-ressort-btn")||n.target.classList.contains("e-ressort-icon")||n.target.querySelector(".e-ressort-icon")?r.parent.showResponsiveCustomSort():r.parent.showResponsiveCustomFilter()};s.appendChild(t);e.appendChild(s)}f.appendChild(e);u.appendChild(f);n.element.insertBefore(u,this.parent.element.querySelector("."+st))}else n.enableAdaptiveUI&&!n.toolbar&&n.getContent().classList.add("e-responsive-header")},n.prototype.updateCustomResponsiveToolbar=function(n){var i=this.parent.element.querySelector(".e-responsive-toolbar");"toolbar"===n.module&&(i?t.remove(i):this.renderCustomToolbar())},n}(),fi=function(){function n(n,t){this.localizer=t.getService("localization");this.formatter=t.getService("valueFormatter");this.parent=n;this.element=this.parent.createElement("TD",{className:v,attrs:{role:"gridcell",tabindex:"-1"}});this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":this.localizer.getConstant("SelectRow")}})}return n.prototype.getGui=function(){return""},n.prototype.format=function(n,i){if(!t.isNullOrUndefined(n.format)){if("number"===n.type&&isNaN(parseInt(i,10))&&(i=null),"dateonly"===n.type&&"string"==typeof i&&i){var r=i.split(/[^0-9.]/);i=new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10))}i=this.formatter.toView(i,n.getFormatter())}return t.isNullOrUndefined(i)?"":i.toString()},n.prototype.evaluate=function(n,i,r,u,f){var o,e,p;if(i.column.template){var s=this.parent.isReact&&"string"!=typeof i.column.template&&!(i.column.template.prototype&&i.column.template.prototype.CSPTemplate),h=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,c=this.parent.printGridParent&&this.parent.printGridParent.isReact,l=["data-index"],a=ic({},r,((o={})[gp]=f,o.column=i.column,o)),v=this.parent.element.id+i.column.uid,y="isStringTemplate";return s||h||c?(p={index:u[l[0]]},i.column.getColumnTemplate()(t.extend(p,a),this.parent,"columnTemplate",v,this.parent[""+y],null,n)):e=i.column.getColumnTemplate()(t.extend({index:u[l[0]]},a),this.parent,"template",v,this.parent[""+y],void 0,void 0,this.parent.root),s||h||c||nt(n,e),this.parent.notify("template-result",{template:e}),e=null,i.column.templateOptions.enableAriaLabel&&n.setAttribute("aria-label",n.innerText+this.localizer.getConstant("TemplateCell")+this.localizer.getConstant("ColumnHeader")+i.column.headerText),!1}return!0},n.prototype.invokeFormatter=function(n,i,r){return t.isNullOrUndefined(n.formatter)||(i=art(n.formatter,"getValue")?(new n.formatter).getValue(n,r):"function"==typeof n.formatter?n.formatter(n,r):n.formatter.getValue(n,r)),i},n.prototype.render=function(n,t,i,r,u){return this.refreshCell(n,t,i,u)},n.prototype.refreshTD=function(n,i,r,u){var a="Batch"===this.parent.editSettings.mode&&n.classList.contains("e-editedbatchcell"),s,f,e,h,c,o,l,v;if(this.parent.isReact)s=n.cellIndex,f=n.parentElement,t.remove(n),e=this.refreshCell(i,r,u,a),this.cloneAttributes(e,n),f.cells.length!==s-1?f.insertBefore(e,f.cells[parseInt(s.toString(),10)]):f.appendChild(e);else for(h=this.refreshCell(i,r,u,a),n.innerHTML="",c=h.getAttribute("aria-label"),c&&n.setAttribute("aria-label",c),o=0,l=[].slice.call(h.childNodes);o<l.length;o++)v=l[o],n.appendChild(v)},n.prototype.cloneAttributes=function(n,t){for(var i,r=t.attributes,u=r.length;u--;)i=r[parseInt(u.toString(),10)],n.setAttribute(i.name,i.value)},n.prototype.refreshCell=function(n,i,r,u){var y,l,o=this.element.cloneNode(),f=n.column,h,e,c,a,v,s,p,w;return n.isForeignKey&&(l=n.foreignKeyData[0]||((y={})[f.foreignKeyValue]=f.format?null:"",y)),h=this.getGui(),e=n.isForeignKey?this.getValue(f.foreignKeyValue,l,f):this.getValue(f.field,i,f),("date"!==f.type&&"datetime"!==f.type||t.isNullOrUndefined(e)||(e=new Date(e)),"dateonly"!==f.type||t.isNullOrUndefined(e)||"string"!=typeof e)||(c=e.split(/[^0-9.]/),e=new Date(parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10))),(h=(e=this.format(f,e,i)).toString(),"boolean"!==f.type||f.displayAsCheckBox)||(a="true"!==e&&"false"!==e?null:"true"===e?"True":"False",h=a?this.localizer.getConstant(a):h),v=this.invokeFormatter(f,e,i),(h=t.isNullOrUndefined(f.formatter)?h:t.isNullOrUndefined(v)?"":v.toString(),this.evaluate(o,n,i,r,l,u)&&"checkbox"!==f.type)?this.appendHtml(o,this.parent.sanitize(h),f.getDomSetter?f.getDomSetter():"innerHTML"):"checkbox"===f.type&&(o.classList.add(rf),e=!!this.parent.selectionSettings.persistSelection&&"true"===e,s=ri.createCheckBox(this.parent.createElement,!1,{checked:e,label:" "}),this.parent.cssClass&&t.addClass([s],[this.parent.cssClass]),this.rowChkBox.id="checkbox-"+n.rowID,s.insertBefore(this.rowChkBox.cloneNode(),s.firstChild),o.appendChild(s)),("Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(n.isSelected=!0),this.setAttributes(o,n,r),"boolean"===f.type&&f.displayAsCheckBox)&&(p=isNaN(parseInt(e.toString(),10))?"true"===e:parseInt(e.toString(),10)>0,s=ri.createCheckBox(this.parent.createElement,!1,{checked:p,label:" "}),o.innerHTML="",o.classList.add("e-gridchkbox-cell"),s.classList.add("e-checkbox-disabled"),this.parent.cssClass&&t.addClass([s],[this.parent.cssClass]),o.appendChild(s)),o.classList.contains("e-summarycell")&&!i.key&&(w=o.getAttribute("data-mappinguid"),f=this.parent.getColumnByUid(w),o.setAttribute("aria-label",h+this.localizer.getConstant("ColumnHeader")+n.column.headerText)),this.parent.isFrozenGrid()&&(!i||i&&!i.key)&&ae(this.parent,f,o),o},n.prototype.appendHtml=function(n,t,i){return void 0===i&&(i="innerHTML"),n[""+i]=t,n},n.prototype.setAttributes=function(n,t,i){var r=t.column,u;(this.buildAttributeFromCell(n,t,"checkbox"===r.type),ar(n,i),ar(n,t.attributes),r.customAttributes&&ar(n,r.customAttributes),"Vertical"===this.parent.rowRenderingMode&&ar(n,{"data-cell":r.headerText}),r.textAlign)&&(u={right:"e-rightalign",left:"e-leftalign",center:"e-centeralign",justify:"e-justifyalign"},u[r.textAlign.toLowerCase()]&&n.classList.add(u[r.textAlign.toLowerCase()]));"Clip"===r.clipMode||!r.clipMode&&"Clip"===this.parent.clipMode?n.classList.add("e-gridclip"):"EllipsisWithTooltip"!==r.clipMode&&(r.clipMode||"EllipsisWithTooltip"!==this.parent.clipMode||this.parent.allowTextWrap&&("Content"===this.parent.textWrapSettings.wrapMode||"Both"===this.parent.textWrapSettings.wrapMode))||"checkbox"!==r.type&&n.classList.add("e-ellipsistooltip")},n.prototype.buildAttributeFromCell=function(n,i,r){var f={},u=[];i.colSpan&&(f.colSpan=i.colSpan);i.rowSpan&&(f.rowSpan=i.rowSpan);i.isTemplate&&u.push("e-templatecell");i.isSelected&&(u.push.apply(u,["e-selectionbackground","e-active"]),r&&n.querySelector(".e-frame").classList.add("e-check"));i.isColumnSelected&&u.push.apply(u,["e-columnselection"]);i.cellType===e.Header?f[ft]=i.colIndex+1:t.isNullOrUndefined(i.index)||(f[ft]=i.index+1);i.visible||u.push("e-hide");f.class=u;ar(n,f)},n.prototype.getValue=function(n,t,i){return i.valueAccessor(n,t,i)},n}(),yh=function(){function n(){}return n.prototype.setOptions=function(n,t){for(var r=Object.keys(t),i=0;i<r.length;i++)re(n,ue[r[parseInt(i.toString(),10)]],t[r[parseInt(i.toString(),10)]])},n.prototype.setExpand=function(n,t){re(n,ue.expand,t)},n.prototype.setSort=function(n,t){re(n,ue.sort,t,"boolean"==typeof t)},n.prototype.setBusy=function(n,t){re(n,ue.busy,t);re(n,ue.invalid,null,!0)},n.prototype.setGrabbed=function(n,t,i){re(n,ue.grabbed,t,i)},n.prototype.setDropTarget=function(n,t){re(n,ue.dropeffect,"copy",!t)},n}();var ue={expand:"aria-expanded",role:"role",datarole:"data-role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"},dot=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),eb=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell",attrs:{tabindex:"-1",role:"columnheader"}}),t.ariaService=new yh,t.hTxtEle=t.parent.createElement("span",{className:"e-headertext"}),t.sortEle=t.parent.createElement("div",{className:"e-sortfilterdiv e-icons",attrs:{"aria-hidden":"true"}}),t.gui=t.parent.createElement("div"),t.chkAllBox=t.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":t.localizer.getConstant("SelectAllCheckbox")}}),t}return dot(i,n),i.prototype.getGui=function(){return this.gui.cloneNode()},i.prototype.render=function(n){var t=this.element.cloneNode(),i=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(n,t,i)},i.prototype.refresh=function(n,t){this.clean(t);var i=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(n,t,i)},i.prototype.clean=function(n){n.innerHTML=""},i.prototype.prepareHeader=function(n,i,r){var a,g,u=n.column,v={},f="",s=this.getGui(),y,p,h,w,tt,b,c,e,k,ft,o,l,et,d;if((t.attributes(s,{"data-mappinguid":u.uid,"class":"e-headercelldiv"}),t.isNullOrUndefined(u.headerValueAccessor)||(a=this.getValue(u.headerText,u)),this.parent.rowHeight&&this.parent.allowSorting&&u.allowSorting&&!t.isNullOrUndefined(u.field)&&i.classList.add("e-sort-icon"),"checkbox"!==u.type)?(y=u.headerText,t.isNullOrUndefined(a)||(y=a),p=this.hTxtEle.cloneNode(),p[u.getDomSetter()]=this.parent.sanitize(y),s.appendChild(p)):(u.editType="booleanedit",h=ri.createCheckBox(this.parent.createElement,!1,{checked:!1,label:" "}),this.chkAllBox.id="checkbox-"+u.uid,h.insertBefore(this.chkAllBox.cloneNode(),h.firstChild),this.parent.cssClass&&t.addClass([h],[this.parent.cssClass]),s.appendChild(h),s.classList.add("e-headerchkcelldiv")),this.buildAttributeFromCell(i,n),this.appendHtml(i,s),i.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&u.allowFiltering&&!t.isNullOrUndefined(u.field)&&(!this.parent.showColumnMenu||!u.showColumnMenu)){if(t.attributes(r,{"data-mappinguid":"e-flmenu-"+u.uid}),f=f.length?f+". "+this.localizer.getConstant("FilterDescription"):this.localizer.getConstant("FilterDescription"),i.classList.add("e-fltr-icon"),w=[],this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==w.length)for(tt=this.parent.getForeignKeyColumns(),b=0;b<this.parent.columns.length;b++)for(c=0;c<this.parent.filterSettings.columns.length;c++)if(this.parent.filterSettings.columns[parseInt(c.toString(),10)].field===u.field||tt.length&&u.foreignKeyValue===this.parent.filterSettings.columns[parseInt(c.toString(),10)].field){r.classList.add("e-filtered");w.push(u.field);break}i.appendChild(r.cloneNode())}if(n.className&&i.classList.add(n.className),u.customAttributes&&ar(i,u.customAttributes),this.parent.allowSorting&&u.allowSorting&&(v.sort="none",f=f.length?f+". "+this.localizer.getConstant("SortDescription"):this.localizer.getConstant("SortDescription")),(this.parent.allowGrouping&&u.allowGrouping||this.parent.allowReordering&&u.allowReordering)&&(v.grabbed=!1,f=f.length?f+". "+this.localizer.getConstant("GroupDescription"):this.localizer.getConstant("GroupDescription")),this.parent.showColumnMenu&&"checkbox"!==u.type&&!u.template&&(f=f.length?f+". "+this.localizer.getConstant("ColumnMenuDescription"):this.localizer.getConstant("ColumnMenuDescription")),i=this.extendPrepareHeader(u,i),e=this.parent,k=e.getColumnIndexByField(u.field),!t.isNullOrUndefined(u.headerTemplate)){var it=e.element.id+u.uid+"headerTemplate",rt="isStringTemplate",ut=u,ot=this.parent.isReact&&"string"!=typeof u.headerTemplate&&!(u.headerTemplate.prototype&&u.headerTemplate.prototype.CSPTemplate),st=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,ht=this.parent.printGridParent&&this.parent.printGridParent.isReact;ot||st||ht?(ft={index:k},i.firstElementChild.innerHTML="",u.getHeaderTemplate()(t.extend(ft,ut),e,"headerTemplate",it,this.parent[""+rt],null,i.firstElementChild),this.parent.renderTemplates()):(g=u.getHeaderTemplate()(t.extend({index:k},ut),e,"headerTemplate",it,this.parent[""+rt],void 0,void 0,this.parent.root),i.firstElementChild.innerHTML="",nt(i.firstElementChild,g))}return(this.ariaService.setOptions(i,v),t.isNullOrUndefined(u.headerTextAlign)&&t.isNullOrUndefined(u.textAlign))||(o=u.headerTextAlign||u.textAlign,"right"===o.toLowerCase()||"left"===o.toLowerCase()?i.classList.add("right"===o.toLowerCase()?"e-rightalign":"e-leftalign"):"center"===o.toLowerCase()?i.classList.add("e-centeralign"):"justify"===o.toLowerCase()&&i.classList.add("e-justifyalign")),("Clip"===u.clipMode||!u.clipMode&&"Clip"===this.parent.clipMode?i.classList.add("e-gridclip"):"EllipsisWithTooltip"!==u.clipMode&&(u.clipMode||"EllipsisWithTooltip"!==this.parent.clipMode)||e.allowTextWrap&&("Header"===e.textWrapSettings.wrapMode||"Both"===e.textWrapSettings.wrapMode)||"checkbox"!==u.type&&i.classList.add("e-ellipsistooltip"),f)&&(l=this.parent.createElement("span",{id:"headerTitle-"+u.uid,innerHTML:f}),l.style.display="none",i.appendChild(l),i.setAttribute("aria-describedby",l.id)),i.setAttribute("aria-rowspan",(t.isNullOrUndefined(n.rowSpan)?1:n.rowSpan).toString()),i.setAttribute("aria-colspan","1"),et=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,(this.parent.isReact&&this.parent.requireTemplateRef||et&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&!t.isNullOrUndefined(u.headerTemplate)?(d=this,d.parent.renderTemplates(function(){d.parent.trigger(pc,{cell:n,node:i})})):this.parent.trigger(pc,{cell:n,node:i}),this.parent.isFrozenGrid()&&ae(this.parent,u,i),i},i.prototype.getValue=function(n,t){return t.headerValueAccessor(n,t)},i.prototype.extendPrepareHeader=function(n,i){var u,f,e,r,o;if(this.parent.showColumnMenu&&n.showColumnMenu&&!t.isNullOrUndefined(n.field)){if(u=this.parent.createElement("div",{className:"e-icons e-columnmenu",attrs:{"aria-hidden":"true"}}),f=[],this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==f.length)for(e=0;e<this.parent.columns.length;e++)for(r=0;r<this.parent.filterSettings.columns.length;r++)if(this.parent.filterSettings.columns[parseInt(r.toString(),10)].field===n.field){u.classList.add("e-filtered");f.push(n.field);break}i.classList.add("e-fltr-icon");i.appendChild(u)}return this.parent.allowResizing&&(o=this.parent.createElement("div"),o.className=n.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",i.appendChild(o)),i},i.prototype.appendHtml=function(n,t){return n.appendChild(t),n},i}(fi),got=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ob=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{tabindex:"-1",role:"columnheader"}}),t}return got(i,n),i.prototype.render=function(n){var u=this.element.cloneNode(),o=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"data-mappinguid":n.column.uid}}),f=n.column,s,h;if((u.appendChild(o),t.isNullOrUndefined(f.headerTemplate)?this.appendHtml(o,this.parent.sanitize(f.headerText),f.getDomSetter()):nt(o,f.getHeaderTemplate()(f,this.parent,"headerTemplate",null,null,null,null,this.parent.root)),n.column.toolTip&&u.setAttribute("title",n.column.toolTip),"Clip"===f.clipMode||!f.clipMode&&"Clip"===this.parent.clipMode?u.classList.add("e-gridclip"):("EllipsisWithTooltip"===f.clipMode||!f.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&u.classList.add("e-ellipsistooltip"),t.isNullOrUndefined(n.column.textAlign))||(s={right:"e-rightalign",left:"e-leftalign",center:"e-centeralign",justify:"e-justifyalign"},s[n.column.textAlign.toLowerCase()]&&u.classList.add(s[n.column.textAlign.toLowerCase()])),(n.column.customAttributes&&ar(u,n.column.customAttributes),u.setAttribute("colspan",n.colSpan.toString()),u.setAttribute("aria-colspan",n.colSpan.toString()),u.setAttribute("aria-rowspan","1"),this.parent.allowResizing)&&(h=this.parent.createElement("div"),h.className=n.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",u.appendChild(h)),n.className&&u.classList.add(n.className),this.parent.trigger(pc,{cell:n,node:u}),"Left"===ef(f))if(u.classList.add("e-leftfreeze"),"Left"===f.border&&u.classList.add("e-freezeleftborder"),0===f.index)g(u,30*this.parent.getIndentCount(),this.parent.enableRtl,"Left");else{for(var r=this.parent.getColumns(),e=30*this.parent.getIndentCount(),i=0;i<r.length&&!(f.index<r[parseInt(i.toString(),10)].index);i++)r[parseInt(i.toString(),10)].visible&&(e+=parseFloat(r[parseInt(i.toString(),10)].width.toString()));g(u,e,this.parent.enableRtl,"Left")}else if("Right"===ef(f)){for(u.classList.add("e-rightfreeze"),r=this.parent.getColumns(),e="Right"===this.parent.getFrozenMode()&&this.parent.isRowDragable()?30:0,i=r.length-1;i>=0&&!(ec(f,r[parseInt(i.toString(),10)].uid)||f.index>r[parseInt(i.toString(),10)].index);i--)r[parseInt(i.toString(),10)].visible&&(e+=parseFloat(r[parseInt(i.toString(),10)].width.toString()));g(u,e,this.parent.enableRtl,"Right");"Right"===f.border&&u.classList.add("e-freezerightborder")}else if("Fixed"===ef(f)){for(u.classList.add("e-fixedfreeze"),r=this.parent.getColumns(),e=0,this.parent.getVisibleFrozenLeftCount()?e=30*this.parent.getIndentCount():"Right"===this.parent.getFrozenMode()&&(e=30*this.parent.groupSettings.columns.length),i=0;i<r.length;i++)f.index>r[parseInt(i.toString(),10)].index&&("Left"===r[parseInt(i.toString(),10)].freeze||r[parseInt(i.toString(),10)].isFrozen||"Fixed"===r[parseInt(i.toString(),10)].freeze)&&r[parseInt(i.toString(),10)].visible&&(e+=parseFloat(r[parseInt(i.toString(),10)].width.toString()));for(g(u,e-1,this.parent.enableRtl,"Left"),e="Right"===this.parent.getFrozenMode()&&this.parent.isRowDragable()?30:0,i=r.length-1;i>=0;i--)if(f.index<r[parseInt(i.toString(),10)].index){if(ec(f,r[parseInt(i.toString(),10)].uid)||f.index>r[parseInt(i.toString(),10)].index)break;"Right"!==r[parseInt(i.toString(),10)].freeze&&"Fixed"!==r[parseInt(i.toString(),10)].freeze||r[parseInt(i.toString(),10)].visible&&(e+=parseFloat(r[parseInt(i.toString(),10)].width.toString()))}g(u,e-1,this.parent.enableRtl,"Right")}else u.classList.add("e-unfreeze");return u},i}(fi),nst=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cv=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-indentcell"}),t}return nst(t,n),t.prototype.render=function(n){var t=this.element.cloneNode();return ar(t,n.attributes),t},t}(fi),eit=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),oit=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.cellUid=0,t.element=t.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:t.parent.element.id+"captioncell",tabindex:"-1"}}),t}return eit(i,n),i.prototype.render=function(n,i){var h,f,b;this.element.id=this.parent.element.id+"captioncell"+this.cellUid++;var l,a,o,u=this.element.cloneNode(),r=this.parent,v=n.column,k=v.getDomSetter?v.getDomSetter():"innerHTML";for(i.headerText=n.column.headerText,n.isForeignKey&&(a=this.format(n.column,n.column.valueAccessor("foreignKey",i,n.column))),h=n.isForeignKey?a:n.column.enableGroupByFormat?i.key:this.format(n.column,n.column.valueAccessor("key",i,n.column)),f=0;f<r.aggregates.length;f++)for(var d=function(n){var a,c,l,h,v;if(r.getVisibleColumns()[0].field===r.aggregates[parseInt(f.toString(),10)].columns[parseInt(n.toString(),10)].field&&r.aggregates[parseInt(f.toString(),10)].columns[parseInt(n.toString(),10)].groupCaptionTemplate)return a=r.aggregates[parseInt(f.toString(),10)].columns[parseInt(n.toString(),10)].groupCaptionTemplate,"string"==typeof a&&a.includes("$")?o=r.aggregates[parseInt(f.toString(),10)].columns[parseInt(n.toString(),10)].groupCaptionTemplate.split("$")[0]+i[r.getVisibleColumns()[0].field][r.aggregates[parseInt(f.toString(),10)].columns[parseInt(n.toString(),10)].type]+r.aggregates[parseInt(f.toString(),10)].columns[parseInt(n.toString(),10)].groupCaptionTemplate.split("}")[1]:(c=r.aggregates[parseInt(f.toString(),10)].columns[parseInt(n.toString(),10)],l=c.getTemplate(e.CaptionSummary),t.isNullOrUndefined(l)||(h=l.fn(i[c.columnName],s.parent,l.property,""),v=s.parent.printGridParent&&s.parent.printGridParent.isReact,(s.parent.isReact||v)&&"string"!=typeof c.groupCaptionTemplate?s.parent.renderTemplates(function(){h&&h.length&&(t.isNullOrUndefined(r.groupSettings.captionTemplate)?u.innerText+=" "+h[0].textContent:u.appendChild(h[0]))}):h&&h.length&&(o=t.isNullOrUndefined(r.groupSettings.captionTemplate)?h[0].textContent:h))),"break"},s=this,c=0;c<r.aggregates[parseInt(f.toString(),10)].columns.length&&"break"!==d(c);c++);if(t.isNullOrUndefined(r.groupSettings.captionTemplate))u[""+k]=r.groupSettings.enableLazyLoading?this.parent.sanitize(n.column.headerText)+": "+this.parent.sanitize(h)+(o?"   "+o:""):this.parent.sanitize(n.column.headerText)+": "+this.parent.sanitize(h)+" - "+i.count+" "+(i.count<2?this.localizer.getConstant("Item"):this.localizer.getConstant("Items"))+(o?"   "+o:"");else{var y=this.parent.isReact&&"string"!=typeof r.groupSettings.captionTemplate&&!(r.groupSettings.captionTemplate.prototype&&r.groupSettings.captionTemplate.prototype.CSPTemplate),p=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,w=this.parent.printGridParent&&this.parent.printGridParent.isReact;y||p||w?(b=r.element.id+"captionTemplate",i.groupKey=i.key,et(r.groupSettings.captionTemplate)(i,this.parent,"captionTemplate",b,null,null,u),this.parent.renderTemplates()):l=this.parent.isVue||r.parentDetails&&r.parentDetails.parentInstObj&&r.parentDetails.parentInstObj.isVue?et(r.groupSettings.captionTemplate)(i,this.parent,"captionTemplate",null,null,null,null,r.root):et(r.groupSettings.captionTemplate)(i);y||p||w||(nt(u,l),o&&o.length&&o[0].textContent&&u.appendChild(o[0]))}return u.setAttribute("colspan",n.colSpan.toString()),u.setAttribute("aria-label",u.innerHTML+this.localizer.getConstant("GroupCaption")),u.setAttribute("title",u.textContent),u},i}(fi),sit=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-groupcaption"}),t}return eit(t,n),t.prototype.render=function(n){var t=this.element.cloneNode();return t.innerHTML="&nbsp;",t.setAttribute("colspan",n.colSpan.toString()),t},t}(fi),tst=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ist=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return tst(t,n),t.prototype.render=function(n,t,i,r){var u=this.element.cloneNode();return u.setAttribute("data-mappingname",t.field),u.setAttribute("data-mappingvalue",t.key),u.setAttribute("aria-expanded",r?"true":"false"),u.setAttribute("tabindex","-1"),this.parent.infiniteScrollSettings&&this.parent.infiniteScrollSettings.enableCache&&!this.parent.groupSettings.enableLazyLoading?(n.cellType=e.Indent,u.className=r?"e-recordplusexpand e-disablepointer":"e-recordpluscollapse e-disablepointer"):(u.className=r?"e-recordplusexpand":"e-recordpluscollapse",u.appendChild(this.parent.createElement("a",{className:r?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow",attrs:{href:"#",title:r?this.localizer.getConstant("Expanded"):this.localizer.getConstant("Collapsed")}}))),u},t}(cv),rst=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ust=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-grouptopleftcell"}),t}return rst(t,n),t.prototype.render=function(n){var t=this.element.cloneNode();return t.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),n&&(n.rowSpan&&t.setAttribute("rowspan",n.rowSpan.toString()),0===n.rowSpan&&(t.style.display="none")),t},t}(fi),fst=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),est=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-detailheadercell"}),t}return fst(t,n),t.prototype.render=function(n){var t=this.element.cloneNode();return t.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),n&&(n.rowSpan&&t.setAttribute("rowspan",n.rowSpan.toString()),0===n.rowSpan&&(t.style.display="none")),t},t}(fi),ost=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sst=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",tabindex:"-1"}}),t}return ost(i,n),i.prototype.render=function(n,i,r){var u=this.element.cloneNode();return r&&!t.isNullOrUndefined(r.class)?(u.className="",u.className=r.class,u.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow",attrs:{href:"#",title:this.localizer.getConstant("Expanded")}}))):u.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonalright e-icon-grightarrow",attrs:{href:"#",title:this.localizer.getConstant("Collapsed")}})),n.isSelected&&u.classList.add("e-selectionbackground","e-active"),u},i}(fi),hst=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cst=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{tabindex:"-1",role:"gridcell"}}),t}return hst(t,n),t.prototype.render=function(n){var t=this.element.cloneNode();return t.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon",attrs:{"aria-hidden":"true"}})),n.isSelected&&(t.classList.add("e-selectionbackground"),t.classList.add("e-active")),(this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount())&&(t.classList.add("e-leftfreeze"),g(t,"Right"===this.parent.getFrozenMode()?0:30*this.parent.groupSettings.columns.length,this.parent.enableRtl,"Right"===this.parent.getFrozenMode()?"Right":"Left")),t},t}(fi),lst=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ast=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-rowdragheader"}),t}return lst(i,n),i.prototype.render=function(n){var i=this.element.cloneNode();return i.appendChild(t.createElement("div",{className:"e-emptycell"})),n&&(n.rowSpan&&i.setAttribute("rowspan",n.rowSpan.toString()),0===n.rowSpan&&(i.style.display="none")),(this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount())&&(i.classList.add("e-leftfreeze"),g(i,"Right"===this.parent.getFrozenMode()?0:30*this.parent.groupSettings.columns.length,this.parent.enableRtl,"Right"===this.parent.getFrozenMode()?"Right":"Left")),i},i}(fi),hit=function(){function n(n,t){this.emptyGrid=!1;this.counter=0;this.parent=n;this.locator=t;this.data=new fh(n,t);this.l10n=t.getService("localization");this.ariaService=this.locator.getService("ariaService");this.renderer=this.locator.getService("rendererFactory");this.addEventListener()}return n.prototype.render=function(){var n=this.parent;this.headerRenderer=this.renderer.getRenderer(ni.Header);this.contentRenderer=this.renderer.getRenderer(ni.Content);this.headerRenderer.renderPanel();this.contentRenderer.renderPanel();n.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1));this.parent.scrollModule.setWidth();this.parent.scrollModule.setHeight();"auto"!==this.parent.height&&this.parent.scrollModule.setPadding();this.refreshDataManager()},n.prototype.refresh=function(n){var r=this,i;void 0===n&&(n={requestType:"refresh"});i=this.parent;i.notify(n.requestType+"-begin",n);i.trigger(p,n,function(n){var h,c,f,o,s,e,u;(void 0===n&&(n={requestType:"refresh"}),n.cancel)?((i.notify(vs,n),"clearFilter"===n.action&&"Menu"===r.parent.filterSettings.type)&&(r.parent.filterSettings.columns[r.parent.filterModule.filterObjIndex]=r.parent.filterModule.prevFilterObject,h=r.parent.showColumnMenu&&r.parent.filterModule.column.showColumnMenu?".e-columnmenu":".e-icon-filter",c=r.parent.element.querySelector('[data-mappinguid="'+r.parent.filterModule.column.uid+'"]').parentElement.querySelector(h),t.isNullOrUndefined(r.parent.filterModule.prevFilterObject)||c.classList.add("e-filtered")),("clear-filter"!==n.action||"CheckBox"!==r.parent.filterSettings.type&&"Excel"!==r.parent.filterSettings.type||(r.parent.filterSettings.columns=r.parent.filterModule.checkboxPrevFilterObject),"grouping"===n.requestType)&&(f=i.groupSettings.columns.indexOf(n.columnName),-1!==f&&(i.setProperties({groupSettings:{Columns:i.groupSettings.columns.splice(f,1)}},!0),i.setProperties({sortSettings:{Columns:i.sortSettings.columns.splice(f,1)}},!0),o=i.getColumnByField(n.columnName),s=i.getColumnHeaderByField(o.field),o.visible=!t.isNullOrUndefined(s)&&!s.classList.contains("e-hide")))):((r.parent.notify(so,n),"virtualscroll"===n.requestType&&(r.parent.getDataModule().isRemote()||"result"in r.parent.dataSource)&&n.virtualInfo&&"down"===n.virtualInfo.direction&&(r.parent.contentModule.prevInfo=n.virtualInfo),r.parent.groupModule&&n.preventFocusOnGroup&&(r.parent.groupModule.preventFocusOnGroup=n.preventFocusOnGroup),!i.allowSelection||-1===["filter","clearFilter","clear-filter","add"].indexOf(n.action)&&-1===["searching","sorting","grouping","ungrouping","delete"].indexOf(n.requestType)||(i.selectionModule.rmtHdrChkbxClicked=!1,i.selectionModule.isPartialSelection&&(i.selectionModule.isHdrSelectAllClicked=!1)),i.allowPaging&&i.pageSettings.pageSizes&&i.pagerModule.pagerObj.isAllPage&&"add"===n.action&&"save"===n.requestType&&i.pagerModule.pagerObj.checkAll&&i.setProperties({pageSettings:{pageSize:i.pageSettings.pageSize+1}},!0),"delete"===n.requestType&&i.allowPaging)&&(e=n.data.length,u=i.pageSettings.totalRecordsCount-e,(!(i.getCurrentViewRecords().length-e)&&u&&(i.pageSettings.currentPage-1)*i.pageSettings.pageSize===u||u&&u<=e)&&(i.prevPageMoving=!0,i.setProperties({pageSettings:{totalRecordsCount:u,currentPage:Math.ceil(u/i.pageSettings.pageSize)}},!0),i.pagerModule.pagerObj.totalRecordsCount=u)),"reorder"===n.requestType&&r.parent.dataSource&&"result"in r.parent.dataSource||("paging"===n.requestType||"columnstate"===n.requestType||"reorder"===n.requestType)&&r.parent.groupSettings.enableLazyLoading&&r.parent.groupSettings.columns.length&&(r.parent.enableVirtualization?r.parent.lazyLoadRender:r.parent.contentModule).getGroupCache()[r.parent.pageSettings.currentPage]?r.contentRenderer.refreshContentRows(n):r.refreshDataManager(n))})},n.prototype.resetTemplates=function(){var n=this.parent,f=n.getColumns(),s,i,o,r,u,e;for(n.detailTemplate&&(s=n.element.id+"detailTemplate",t.blazorTemplates[""+s]=[],t.resetBlazorTemplate(s,"DetailTemplate")),n.groupSettings.captionTemplate&&t.resetBlazorTemplate(n.element.id+"captionTemplate","CaptionTemplate"),n.rowTemplate&&t.resetBlazorTemplate(n.element.id+"rowTemplate","RowTemplate"),n.toolbarTemplate&&t.resetBlazorTemplate(n.element.id+"toolbarTemplate","ToolbarTemplate"),n.pageSettings.template&&t.resetBlazorTemplate(n.element.id+"_template","pageSettings"),i=0;i<f.length;i++)f[parseInt(i.toString(),10)].template&&(t.blazorTemplates[n.element.id+f[parseInt(i.toString(),10)].uid]=[],t.resetBlazorTemplate(n.element.id+f[parseInt(i.toString(),10)].uid,"Template")),f[parseInt(i.toString(),10)].headerTemplate&&t.resetBlazorTemplate(n.element.id+f[parseInt(i.toString(),10)].uid+"headerTemplate","HeaderTemplate"),f[parseInt(i.toString(),10)].filterTemplate&&t.resetBlazorTemplate(n.element.id+f[parseInt(i.toString(),10)].uid+"filterTemplate","FilterTemplate");for(o="guid",r=0;r<n.aggregates.length;r++)for(u=0;u<n.aggregates[parseInt(r.toString(),10)].columns.length;u++)n.aggregates[parseInt(r.toString(),10)].columns[parseInt(u.toString(),10)].footerTemplate&&(e=n.element.id+n.aggregates[parseInt(r.toString(),10)].columns[parseInt(u.toString(),10)][""+o]+"footerTemplate",t.resetBlazorTemplate(e,"FooterTemplate")),n.aggregates[parseInt(r.toString(),10)].columns[parseInt(u.toString(),10)].groupFooterTemplate&&(e=n.element.id+n.aggregates[parseInt(r.toString(),10)].columns[parseInt(u.toString(),10)][""+o]+"groupFooterTemplate",t.resetBlazorTemplate(e,"GroupFooterTemplate")),n.aggregates[parseInt(r.toString(),10)].columns[parseInt(u.toString(),10)].groupCaptionTemplate&&(e=n.element.id+n.aggregates[parseInt(r.toString(),10)].columns[parseInt(u.toString(),10)][""+o]+"groupCaptionTemplate",t.resetBlazorTemplate(e,"GroupCaptionTemplate"))},n.prototype.refreshComplete=function(n){this.parent.trigger(s,n)},n.prototype.refreshDataManager=function(n){var r=this,i,t,e,o,c,s,f,h;void 0===n&&(n={});t=this.parent;e="Shimmer"===t.loadingIndicator.indicatorType&&"virtualscroll"!==n.requestType&&"infiniteScroll"!==n.requestType||("virtualscroll"===n.requestType||"infiniteScroll"===n.requestType)&&t.enableVirtualMaskRow;"virtualscroll"===n.requestType||n.isCaptionCollapse||e||this.parent.showSpinner();e&&t.showMaskRow("virtualscroll"===n.requestType?n.virtualInfo.sentinelInfo.axis:"infiniteScroll"===n.requestType?n.direction:void 0);this.parent.notify(ia,n);this.emptyGrid=!1;o=this.isNeedForeignAction();(this.ariaService.setBusy(this.parent.getContent().querySelector("."+lt),!0),o)&&(c=new u.Deferred,i=this.getFData(c,n));i?i=i.then(function(){var i=r.data.generateQuery().requiresCount(),t;return r.emptyGrid?(t=new u.Deferred,t.resolve({result:[],count:0}),t.promise):r.data.getData(n,i)}):(t.allowPaging&&!t.getDataModule().dataManager.dataSource.offline&&t.pageSettings&&t.pageSettings.pageSizes&&t.pagerModule&&t.pagerModule.pagerObj&&t.pagerModule.pagerObj.isAllPage&&(t.pagerModule.pagerObj.isAllPage=void 0),i=this.data.getData(n,this.data.generateQuery().requiresCount()));s=this.parent.getForeignKeyColumns();f=s.length;("ExcludeHidden"===this.parent.columnQueryMode&&f&&(f=s.filter(function(n){return!1!==n.visible}).length),f&&(!o||this.parent.searchSettings.key.length))&&(h=new u.Deferred,i=i.then(function(t){return r.parent.notify(as,{dataManager:i,result:t,promise:h,action:n}),h.promise}));this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(i=i.then(function(n){return r.validateGroupRecords(n)}));i.then(function(t){return r.dataManagerSuccess(t,n)}).catch(function(t){return r.dataManagerFailure(t,n)})},n.prototype.getFData=function(n,t){return this.parent.notify(as,{isComplex:!0,promise:n,action:t}),n.promise},n.prototype.isNeedForeignAction=function(){var n=this.parent;return!!(n.allowFiltering&&n.filterSettings.columns.length||!t.isNullOrUndefined(n.searchSettings.key)&&n.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},n.prototype.foreignKey=function(n){var t=this;return n.some(function(n){return!(!t.parent.filterSettings.columns.some(function(t){return n.uid===t.uid})&&!t.parent.searchSettings.key.length)})},n.prototype.sendBulkRequest=function(n){var i=this,t,r,u,f;n.requestType="batchsave";t=this.parent;t.allowPaging&&t.pageSettings.pageSizes&&t.pagerModule.pagerObj.isAllPage&&t.pagerModule.pagerObj.checkAll&&(r=n.changes.addedRecords.length,r&&t.setProperties({pageSettings:{pageSize:t.pageSettings.pageSize+r}},!0));t.allowPaging&&(n.changes.addedRecords.length||n.changes.deletedRecords.length||n.changes.changedRecords.length)&&t.pageSettings&&t.pageSettings.pageSizes&&t.pagerModule&&t.pagerModule.pagerObj&&!t.getDataModule().dataManager.dataSource.offline&&t.pagerModule.pagerObj.isAllPage&&(t.pagerModule.pagerObj.isAllPage=void 0);u=this.data.saveChanges(n.changes,this.parent.getPrimaryKeyFieldNames()[0],n.original);f=this.data.generateQuery().requiresCount();this.data.dataManager.dataSource.offline?this.refreshDataManager({requestType:"batchsave"}):u.then(function(){i.data.getData(n,f).then(function(t){return i.dmSuccess(t,n)}).catch(function(t){return i.dmFailure(t,n)})}).catch(function(t){return i.dmFailure(t,n)})},n.prototype.dmSuccess=function(n,t){this.dataManagerSuccess(n,t)},n.prototype.dmFailure=function(n,t){this.dataManagerFailure(n,t)},n.prototype.renderEmptyRow=function(){this.emptyRow(!0)},n.prototype.emptyRow=function(n){var i=this.parent,u=this.contentRenderer.getTable().querySelector(h),f,r,s,e,o;t.isNullOrUndefined(u)||t.remove(u);u=this.parent.createElement(h,{attrs:{role:"rowgroup"}});f=i.allowRowDragAndDrop&&t.isNullOrUndefined(i.rowDropSettings.targetID)?1:0;(i.detailTemplate||i.childGrid)&&++f;s=i.editSettings.showAddNewRow&&"Bottom"===i.editSettings.newRowPosition?"e-emptyrow e-show-added-row":"e-emptyrow";e=this.parent.createElement("tr",{className:s,attrs:{role:"row"}});i.emptyRecordTemplate?(o=i.element.id+"emptyRecordTemplate",r=this.parent.createElement("td",{attrs:{colspan:(i.getVisibleColumns().length+f+i.groupSettings.columns.length).toString()}}),i.isVue||i.parentDetails&&i.parentDetails.parentInstObj&&i.parentDetails.parentInstObj.isVue?r.appendChild(i.getEmptyRecordTemplate()(i.dataSource,i,"emptyRecordTemplate",o,void 0,void 0,void 0,this.parent.root)[1]):r.appendChild(i.getEmptyRecordTemplate()(i.dataSource,i,"emptyRecordTemplate",o,void 0,void 0,void 0,this.parent.root)[0]),i.isReact&&this.parent.renderTemplates()):r=this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(i.getVisibleColumns().length+f+(t.isNullOrUndefined(i.groupSettings.columns)?0:i.groupSettings.columns.length)).toString()}});i.isFrozenGrid()&&(r.classList.add("e-leftfreeze"),r.style.left="0px");i.frozenRows&&i.element.querySelector(".e-frozenrow-border")&&this.parent.element.querySelector(".e-frozenrow-border").classList.add("e-frozenrow-empty");e.appendChild(r);u.appendChild(e);this.contentRenderer.renderEmpty(u);n&&(this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.trigger(ti,{}),this.parent.notify(ai,{rows:[new cr({isDataRow:!0,cells:[new bi({isDataCell:!0,visible:!0})]})]}),i.editSettings.showAddNewRow&&(i.addRecord(),this.parent.notify(hr,{})))},n.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},n.prototype.updateColumnType=function(n){for(var e,u,r=this.parent.enableColumnVirtualization?this.parent.columns:this.parent.getColumns(),o="customFormat",f="equalTo",s=n&&n.items?n.items[0]:n,h=this.locator.getService("valueFormatter"),i=0,c=r.length;i<c;i++)u=d(r[parseInt(i.toString(),10)].field||"",s),t.isNullOrUndefined(r[parseInt(i.toString(),10)][""+o])||(r[parseInt(i.toString(),10)].format=r[parseInt(i.toString(),10)][""+o]),t.isNullOrUndefined(r[parseInt(i.toString(),10)].validationRules)||t.isNullOrUndefined(r[parseInt(i.toString(),10)].validationRules[""+f])||(r[parseInt(i.toString(),10)].validationRules[""+f][0]=this.parent.element.id+r[parseInt(i.toString(),10)].validationRules[""+f][0]),r[parseInt(i.toString(),10)].isForeignColumn()&&r[parseInt(i.toString(),10)].columnData&&(u=d(r[parseInt(i.toString(),10)].foreignKeyValue||"",r[parseInt(i.toString(),10)].columnData[0])),t.isNullOrUndefined(u)?r[parseInt(i.toString(),10)].type=r[parseInt(i.toString(),10)].type||null:(this.isColTypeDef=!0,r[parseInt(i.toString(),10)].type||(r[parseInt(i.toString(),10)].type=u.getDay?u.getHours()>0||u.getMinutes()>0||u.getSeconds()>0||u.getMilliseconds()>0?"datetime":"date":typeof u)),e=new wu,r[parseInt(i.toString(),10)].format&&(r[parseInt(i.toString(),10)].format.skeleton||r[parseInt(i.toString(),10)].format.format&&"string"==typeof r[parseInt(i.toString(),10)].format.format)&&(r[parseInt(i.toString(),10)].setFormatter(e.getFormatFunction(t.extend({},r[parseInt(i.toString(),10)].format))),r[parseInt(i.toString(),10)].setParser(e.getParserFunction(r[parseInt(i.toString(),10)].format))),"string"==typeof r[parseInt(i.toString(),10)].format?iy(this.locator,r[parseInt(i.toString(),10)]):r[parseInt(i.toString(),10)].format||"number"!==r[parseInt(i.toString(),10)].type||r[parseInt(i.toString(),10)].setParser(h.getParserFunction({format:"n2"})),"dateonly"!==r[parseInt(i.toString(),10)].type||r[parseInt(i.toString(),10)].format||(r[parseInt(i.toString(),10)].format="yMd",iy(this.locator,r[parseInt(i.toString(),10)]))},n.prototype.dataManagerSuccess=function(n,i){var u=this,r=this.parent,f,e;this.contentRenderer=this.renderer.getRenderer(ni.Content);this.headerRenderer=this.renderer.getRenderer(ni.Header);n.actionArgs=i;f=!(!r.childGrid&&!r.detailTemplate);e=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!r.groupSettings.enableLazyLoading&&("delete"===i.requestType&&!f||"save"===i.requestType&&"add"===this.parent.infiniteScrollModule.requestType&&!(r.sortSettings.columns.length||r.filterSettings.columns.length||this.parent.groupSettings.columns.length||r.searchSettings.key||f));r.trigger(es,n,function(f){var o,s;f.cancel||(f.result=t.isNullOrUndefined(f.result)?[]:f.result,o=Object.keys(f.result).length,u.parent.isDestroyed||(r.getColumns().length||o||r.columns.length&&r.columns[0]instanceof ht?!u.parent.isReact||t.isNullOrUndefined(i)||"infiniteScroll"===i.requestType&&!u.parent.infiniteScrollSettings.enableCache||i.isFrozen?u.extendDataManagerSuccess(n,i,o,f,e):(s=["columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"],"infiniteScroll"===i.requestType&&u.parent.infiniteScrollSettings.enableCache&&(s=["columnTemplate","commandsTemplate"]),vu(u.parent,s,function(){u.extendDataManagerSuccess(n,i,o,f,e)})):r.hideSpinner()))})},n.prototype.extendDataManagerSuccess=function(n,i,r,u,f){var e=this.parent,o;if(!this.isInfiniteEnd(i)||r){if(this.parent.isEdit=!1,this.parent.notify(bs,{}),this.parent.notify(gu,{}),i&&("infiniteScroll"!==i.requestType&&"delete"!==i.requestType&&"add"!==i.action||!e.enableInfiniteScrolling)&&this.parent.notify(rv,{type:"refreshCommandColumn"}),this.contentRenderer.prevCurrentView=!t.isNullOrUndefined(this.parent.currentViewData)&&this.parent.currentViewData.slice(),e.currentViewData=u.result,e.notify(ya,{args:i,data:u.result}),u.count&&!e.allowPaging&&(e.enableVirtualization||e.enableInfiniteScrolling)&&(e.totalDataRecordsCount=u.count),!r&&u.count&&e.allowPaging&&i&&"delete"!==i.requestType)return!this.parent.groupSettings.enableLazyLoading||"grouping"!==i.requestType&&"ungrouping"!==i.requestType||this.parent.notify(el,i),e.prevPageMoving=!0,e.pageSettings.totalRecordsCount=u.count,"paging"!==i.requestType&&(e.pageSettings.currentPage=Math.ceil(u.count/e.pageSettings.pageSize)),void e.dataBind();if((e.getColumns().length||!r)&&this.isLayoutRendered||b(e)||(e.removeMaskRow(),this.updatesOnInitialRender(u)),!this.isColTypeDef&&e.getCurrentViewRecords()&&(this.data.dataManager.dataSource.offline&&e.dataSource&&e.dataSource.length?this.updateColumnType(e.dataSource[0]):this.updateColumnType(e.getCurrentViewRecords()[0])),this.parent.isInitialLoad||!this.parent.groupSettings.disablePageWiseAggregates||this.parent.groupSettings.columns.length||(u.result=this.parent.dataSource instanceof Array?this.parent.dataSource:this.parent.currentViewData),!this.parent.isReact&&!this.parent.isVue||t.isNullOrUndefined(i)||"infiniteScroll"===i.requestType||i.isFrozen||vu(this.parent,["footerTemplate"]),this.parent.isAngular&&this.parent.allowGrouping&&this.parent.groupSettings.captionTemplate&&(t.isNullOrUndefined(i)||"infiniteScroll"!==i.requestType)&&this.parent.destroyTemplate(["groupSettings_captionTemplate"]),this.parent.notify(wi,t.extend({count:u.count,result:u.result,aggregates:u.aggregates,loadSummaryOnEmpty:!1},i)),(e.groupSettings.columns.length||i&&"ungrouping"===i.requestType)&&i&&"filtering"!==i.requestType&&this.headerRenderer.refreshUI(),r)b(e)&&(i.scrollTop={top:this.contentRenderer.content.scrollTop}),f?this.parent.notify(ds,{e:i,result:n.result,count:n.count,agg:n.aggregates}):this.parent.enableImmutableMode?this.contentRenderer.immutableModeRendering(i):this.contentRenderer.refreshContentRows(i);else{if(i&&i.isCaptionCollapse)return;if(!e.getColumns().length)return e.element.innerHTML="",void alert(this.l10n.getConstant("EmptyDataSourceError"));(this.contentRenderer.setRowElements([]),this.contentRenderer.setRowObjects([]),this.ariaService.setBusy(this.parent.getContent().querySelector("."+lt),!1),e.removeMaskRow(),this.renderEmptyRow(),e.enableColumnVirtualization&&!r&&this.parent.notify(k,{rows:e.getRowsObject(),args:{}}),i)&&(o=(i.requestType||"").toLowerCase()+"-complete",this.parent.notify(o,i),"batchsave"===i.requestType&&(i.cancel=!1,i.rows=[],i.isFrozen=!i.isFrozen,this.parent.trigger(s,i)));this.parent.autoFit&&this.parent.preventAdjustColumns();this.parent.hideSpinner()}this.parent.notify(kr,{});this.setRowCount(this.parent.getCurrentViewRecords().length);"query"in n&&(this.parent.getDataModule().isQueryInvokedFromData=!1)}else this.parent.notify(ds,{e:i,result:n.result,count:n.count,agg:n.aggregates})},n.prototype.dataManagerFailure=function(n,i){t.isNullOrUndefined(this.parent.contentModule)||(this.ariaService.setOptions(this.parent.getContent().querySelector("."+lt),{busy:!1,invalid:!0}),this.setRowCount(1));this.parent.trigger(ye,n&&n.error?n:{error:n});this.parent.hideSpinner();this.parent.removeMaskRow();"save"!==i.requestType&&"delete"!==i.requestType&&"bulk-save"!==i.name&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.log("actionfailure",{error:n}))},n.prototype.setRowCount=function(n){this.ariaService.setOptions(this.parent.element,{rowcount:n?n.toString():"1"})},n.prototype.isInfiniteEnd=function(n){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&"delete"===n.requestType},n.prototype.updatesOnInitialRender=function(n){this.isLayoutRendered=!0;var t=!1;this.parent.columns.length<1&&(this.buildColumns(n.result[0]),t=!0);se(this.parent.columns,null,this.parent);t&&this.parent.notify(ev,{});this.headerRenderer.renderTable();this.contentRenderer.renderTable();this.parent.isAutoGen=!0;this.parent.notify(du,{})},n.prototype.iterateComplexColumns=function(n,t,i){for(var u=Object.keys(n),r=0;r<u.length;r++)("object"!=typeof n[u[parseInt(r.toString(),10)]]||!n[u[parseInt(r.toString(),10)]]||n[u[parseInt(r.toString(),10)]]instanceof Date?[]:Object.keys(n[u[parseInt(r.toString(),10)]])).length?this.iterateComplexColumns(n[u[parseInt(r.toString(),10)]],t+(u[parseInt(r.toString(),10)]+"."),i):(i[this.counter]=t+u[parseInt(r.toString(),10)],this.counter++)},n.prototype.buildColumns=function(n){var r=[],u={};this.iterateComplexColumns(n,"",u);for(var f=Object.keys(u).filter(function(n){return"BlazId"!==u[""+n]}).map(function(n){return u[""+n]}),i=0,e=f.length;i<e;i++)r[parseInt(i.toString(),10)]={field:f[parseInt(i.toString(),10)]},this.parent.enableColumnVirtualization&&(r[parseInt(i.toString(),10)].width=t.isNullOrUndefined(r[parseInt(i.toString(),10)].width)?200:r[parseInt(i.toString(),10)].width);this.parent.setProperties({columns:r},!0)},n.prototype.instantiateRenderer=function(){this.renderer.addRenderer(ni.Header,new fb(this.parent,this.locator));this.renderer.addRenderer(ni.Content,new vh(this.parent,this.locator));var n=this.locator.getService("cellRendererFactory");n.addCellRenderer(e.Header,new eb(this.parent,this.locator));n.addCellRenderer(e.Data,new fi(this.parent,this.locator));n.addCellRenderer(e.StackedHeader,new ob(this.parent,this.locator));n.addCellRenderer(e.Indent,new cv(this.parent,this.locator));n.addCellRenderer(e.GroupCaption,new oit(this.parent,this.locator));n.addCellRenderer(e.GroupCaptionEmpty,new sit(this.parent,this.locator));n.addCellRenderer(e.Expand,new ist(this.parent,this.locator));n.addCellRenderer(e.HeaderIndent,new ust(this.parent,this.locator));n.addCellRenderer(e.StackedHeader,new ob(this.parent,this.locator));n.addCellRenderer(e.DetailHeader,new est(this.parent,this.locator));n.addCellRenderer(e.RowDragHIcon,new ast(this.parent,this.locator));n.addCellRenderer(e.DetailExpand,new sst(this.parent,this.locator));n.addCellRenderer(e.DetailFooterIntent,new cv(this.parent,this.locator));n.addCellRenderer(e.RowDragIcon,new cst(this.parent,this.locator))},n.prototype.addEventListener=function(){var n=this;this.parent.isDestroyed||(this.parent.on(or,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(ot,this.refresh,this),this.parent.on(yg,this.refreshComplete,this),this.parent.on(lp,this.sendBulkRequest,this),this.parent.on(dp,function(){n.emptyGrid=!0},this),this.parent.on(du,this.dynamicColumnChange,this))},n.prototype.validateGroupRecords=function(n){var e=this,o=n.result.length-1,i,t,r;if(o<0)return Promise.resolve(n);var s=n.result[0],h=n.result[parseInt(o.toString(),10)],c=[],l=function(n){for(var i=[s,h],t=0;t<i.length;t++)c.push(new u.Predicate("field","==",i[parseInt(t.toString(),10)].field).and(e.getPredicate("key","equal",i[parseInt(t.toString(),10)].key)));n.where(u.Predicate.or(c))},a=new u.Query;l(a);var y=new u.DataManager(n.result).executeLocal(a),f=this.data.generateQuery(!0),v=[];if(this.data.isRemote()){for(i=[s,h],t=0;t<i.length;t++)v.push(this.getPredicate(i[parseInt(t.toString(),10)].field,"equal",i[parseInt(t.toString(),10)].key));f.where(u.Predicate.or(v))}else l(f);return r=new u.Deferred,this.data.getData({},f).then(function(t){e.updateGroupInfo(y,t.result);r.resolve(n)}).catch(function(n){return r.reject(n)}),r.promise},n.prototype.getPredicate=function(n,t,i){return i instanceof Date?au({field:n,operator:t,value:i}):new u.Predicate(n,t,i)},n.prototype.updateGroupInfo=function(n,i){for(var e,a,p,w,v,h,o,k,s,d=new u.DataManager(i),f=n,r=0;r<f.length;r++)if(e=d.executeLocal((new u.Query).where(new u.Predicate("field","==",f[parseInt(r.toString(),10)].field).and(this.getPredicate("key","equal",f[parseInt(r.toString(),10)].key))))[0],!t.isNullOrUndefined(e))for(f[parseInt(r.toString(),10)].count=e.count,a=f[parseInt(r.toString(),10)].items,p=e.items,a.GroupGuid&&(f[parseInt(r.toString(),10)].items=this.updateGroupInfo(f[parseInt(r.toString(),10)].items,e.items)),w=this.parent.aggregates,v=0;v<w.length;v++)for(h=w[parseInt(v.toString(),10)],o=0;o<h.columns.length;o++)for(var c=h.columns[parseInt(o.toString(),10)],y=c.type instanceof Array?c.type:[c.type],l=0;l<y.length;l++){var b=c.field+" - "+y[parseInt(l.toString(),10)].toLowerCase(),g=a.level?p.records:e.items,nt=this.parent;"Custom"===y[parseInt(l.toString(),10)]?(k=a.level?p:e,s=c.customAggregate,"string"==typeof s&&(s=t.getValue(s,window)),f[parseInt(r.toString(),10)].aggregates[""+b]=s?s.call(nt,k,h.columns[parseInt(o.toString(),10)]):""):f[parseInt(r.toString(),10)].aggregates[""+b]=u.DataUtil.aggregates[y[parseInt(l.toString(),10)].toLowerCase()](g,h.columns[parseInt(o.toString(),10)].field)}return n},n}(),cit=function(){function n(){this.cellRenderMap={}}return n.prototype.addCellRenderer=function(n,i){n="string"==typeof n?n:t.getEnumValue(e,n);t.isNullOrUndefined(this.cellRenderMap[""+n])&&(this.cellRenderMap[""+n]=i)},n.prototype.getCellRenderer=function(n){if(n="string"==typeof n?n:t.getEnumValue(e,n),t.isNullOrUndefined(this.cellRenderMap[""+n]))throw"The cellRenderer "+n+" is not found";return this.cellRenderMap[""+n]},n}(),sb=function(){function n(n,t){this.sortedCols=[];this.sortPredicate=[];this.isCustomDialog=!1;this.parent=n;this.serviceLocator=t;this.addEventListener()}return n.prototype.addEventListener=function(){this.evtHandlers=[{event:gs,handler:this.closeCustomDialog},{event:dr,handler:this.refreshCustomFilterOkBtn},{event:pa,handler:this.renderResponsiveContextMenu},{event:pw,handler:this.renderCustomFilterDiv},{event:ww,handler:this.customExFilterClose},{event:yw,handler:this.refreshCustomFilterClearBtn}];yt(this.parent,this.evtHandlers,!0,this);this.onActionCompleteFn=this.editComplate.bind(this);this.parent.addEventListener(s,this.onActionCompleteFn)},n.prototype.customExFilterClose=function(){this.isCustomDlgRender=!1},n.prototype.renderCustomFilterDiv=function(){var n=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),i=n.querySelector(".e-dlg-custom-header"),r=n.querySelector(".e-dlg-closeicon-btn"),t;this.isCustomDlgRender=!0;this.parent.filterModule.filterModule.closeDialog();this.saveBtn.element.style.display="";this.refreshCustomFilterOkBtn({disabled:!1});this.backBtn.element.style.display="none";r.style.display="";i.innerHTML=this.parent.localeObj.getConstant("CustomFilter");t=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"});t.appendChild(this.customExcelFilterParent)},n.prototype.renderResponsiveContextMenu=function(n){var r,o;if(this.action===a.isFilter){var u=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),f=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),e=f.querySelector(".e-dlg-closeicon-btn"),i=f.querySelector(".e-dlg-custom-header");n.isOpen?(u.firstChild.style.display="none",u.appendChild(n.target),e.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",i.innerHTML=n.header,r=this.parent.createElement("button"),o=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"}),r.appendChild(o),this.backBtn=new ri.Button({cssClass:this.parent.cssClass?"e-res-back-btn "+this.parent.cssClass:"e-res-back-btn"}),this.backBtn.appendTo(r),i.parentElement.insertBefore(r,i)):this.backBtn&&!this.isCustomDlgRender&&(u.firstChild.style.display="",t.remove(this.backBtn.element),e.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),i.innerHTML=this.getHeaderTitle({action:a.isFilter},n.col))}},n.prototype.refreshCustomFilterClearBtn=function(n){this.filterClearBtn&&(this.isFiltered=n.isFiltered,this.filterClearBtn.element.style.display=n.isFiltered?"":"none")},n.prototype.refreshCustomFilterOkBtn=function(n){this.saveBtn&&(this.saveBtn.disabled=n.disabled);this.parent.columnChooserModule&&this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn&&(this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn.disabled=n.disabled)},n.prototype.columnMenuResponsiveContent=function(n,t,i){var r=this.parent.createElement("div",{className:"e-responsivecoldiv e-responsive"+n.toLowerCase()+"div"+(i?" e-disabled":"")}),u=this.parent.createElement("span",{className:"e-icons e-res"+n.toLowerCase()+"-icon e-btn-icon"}),f=this.parent.createElement("span",{innerHTML:t,className:"e-rescolumn-menu e-res-header-text"});r.appendChild(u);r.appendChild(f);this.customColumnDiv.appendChild(r)},n.prototype.renderResponsiveContent=function(n,i){var nt=this,r=this.parent,s=this.action===a.isColumnChooser,e,d,y,p,w;if(n||s)return this.filterParent=this.parent.createElement("div",{className:(s?"e-maincolumnchooserdiv ":"")+"e-mainfilterdiv e-default-filter",id:(s?"columchooser":n.uid)+"-main-filter"}),this.filterParent;if(this.customColumnDiv=r.createElement("div",{className:"columndiv columnmenudiv"}),this.customColumnDiv.style.width="100%",this.parent.showColumnMenu&&"Horizontal"===this.parent.rowRenderingMode&&this.action===a.isColMenu){if(this.columnMenuResponsiveContent("AutoFitAll",r.localeObj.getConstant("AutoFitAll")),this.columnMenuResponsiveContent("AutoFit",r.localeObj.getConstant("AutoFit")),i.allowGrouping&&r.allowGrouping&&(this.columnMenuResponsiveContent("Group",r.localeObj.getConstant("Group"),r.groupSettings.columns.indexOf(i.field)>=0),this.columnMenuResponsiveContent("UnGroup",r.localeObj.getConstant("Ungroup"),r.groupSettings.columns.indexOf(i.field)<0)),i.allowSorting&&r.allowSorting){for(var h="None",c=this.parent.sortSettings.columns,u=0;u<c.length;u++)if(c[parseInt(u.toString(),10)].field===i.field){h=c[parseInt(u.toString(),10)].direction;break}this.columnMenuResponsiveContent("ascending",r.localeObj.getConstant("SortAscending"),"Ascending"===h);this.columnMenuResponsiveContent("descending",r.localeObj.getConstant("SortDescending"),"Descending"===h)}r.showColumnChooser&&this.columnMenuResponsiveContent("Column",r.localeObj.getConstant("Columnchooser"));i.allowFiltering&&r.allowFiltering&&this.columnMenuResponsiveContent("Filter",r.localeObj.getConstant("FilterMenu"))}else{var f=r.getColumns(),tt=r.createElement("div",{className:"e-ressortbutton-parent"}),b=[],k=this.action===a.isSort,l=this.action===a.isFilter;if(l)for(u=0;u<r.filterSettings.columns.length;u++)b.push(r.filterSettings.columns[parseInt(u.toString(),10)].field);for(u=0;u<f.length;u++)if(!(!f[parseInt(u.toString(),10)].visible||!f[parseInt(u.toString(),10)].allowSorting&&k||!f[parseInt(u.toString(),10)].allowFiltering&&l)){if(e=r.createElement("div",{className:"e-responsivecoldiv"}),e.setAttribute("data-mappingname",f[parseInt(u.toString(),10)].field),e.setAttribute("data-mappinguid",f[parseInt(u.toString(),10)].uid),d=r.createElement("span",{innerHTML:f[parseInt(u.toString(),10)].headerText,className:"e-res-header-text"}),e.appendChild(d),this.customColumnDiv.appendChild(e),k){var v=this.getSortedFieldsAndDirections("field").indexOf(f[parseInt(u.toString(),10)].field),o=r.createElement("button",{id:r.element.id+f[parseInt(u.toString(),10)].field+"sortbutton"}),g=tt.cloneNode();g.appendChild(o);e.appendChild(g);new ri.Button({cssClass:this.parent.cssClass?"e-ressortbutton "+this.parent.cssClass:"e-ressortbutton"}).appendTo(o);y=void 0;t.isNullOrUndefined(this.parent.sortSettings.columns[parseInt(v.toString(),10)])||(y="Ascending"===this.parent.sortSettings.columns[parseInt(v.toString(),10)].direction?this.parent.localeObj.getConstant("AscendingText"):this.parent.localeObj.getConstant("DescendingText"));o.innerHTML=v>-1?y:this.parent.localeObj.getConstant("NoneText");o.onclick=function(n){nt.sortButtonClickHandler(n.target)}}l&&b.indexOf(f[parseInt(u.toString(),10)].field)>-1&&(p=r.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),w=r.createElement("span",{className:"e-icons e-res-icon e-filterset"}),w.setAttribute("data-coltype",f[parseInt(u.toString(),10)].type),p.appendChild(w),e.appendChild(p))}}return t.EventHandler.add(this.customColumnDiv,t.Browser.isDevice?"touchend":"click",this.customFilterColumnClickHandler,this),this.customColumnDiv},n.prototype.getSortedFieldsAndDirections=function(n){for(var i=[],t=0;t<this.parent.sortSettings.columns.length;t++)i.push(this.parent.sortSettings.columns[parseInt(t.toString(),10)][""+n]);return i},n.prototype.sortButtonClickHandler=function(n){var r;if(n){r=i(n,"e-responsivecoldiv").getAttribute("data-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(n));var u=n.textContent,t=u===this.parent.localeObj.getConstant("NoneText")?this.parent.localeObj.getConstant("AscendingText"):u===this.parent.localeObj.getConstant("AscendingText")?this.parent.localeObj.getConstant("DescendingText"):this.parent.localeObj.getConstant("NoneText"),f=t===this.parent.localeObj.getConstant("AscendingText")?"Ascending":t===this.parent.localeObj.getConstant("DescendingText")?"Descending":"None";n.innerHTML=t;this.setSortedCols(r,f)}},n.prototype.resetSortButtons=function(n){for(var i=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton")),t=0;t<i.length;t++)i[parseInt(t.toString(),10)]!==n&&(i[parseInt(t.toString(),10)].innerHTML=this.parent.localeObj.getConstant("NoneText"))},n.prototype.setSortedCols=function(n,t){var i=this.getCurrentSortedFields().indexOf(n);this.parent.allowMultiSorting&&i>-1&&(this.sortedCols.splice(i,1),this.sortPredicate.splice(i,1));this.isSortApplied=!0;"None"!==t&&(this.sortedCols.push(n),this.sortPredicate.push({field:n,direction:t}))},n.prototype.getCurrentSortedFields=function(){for(var t=[],n=0;n<this.sortedCols.length;n++)t.push(this.sortedCols[parseInt(n.toString(),10)]);return t},n.prototype.customFilterColumnClickHandler=function(n){var r=this.parent,t=n.target,u,e,o,f;i(t,"columnmenudiv")&&this.action===a.isColMenu&&!i(t,"e-disabled")&&(u=this.menuCol?this.menuCol:this.filteredCol,i(t,"e-responsiveautofitalldiv")?(r.autoFitColumns([]),this.closeCustomFilter()):i(t,"e-responsiveautofitdiv")?(r.autoFitColumns(u.field),this.closeCustomFilter()):i(t,"e-responsivegroupdiv")?(r.groupColumn(u.field),this.closeCustomFilter()):i(t,"e-responsiveungroupdiv")?(r.ungroupColumn(u.field),this.closeCustomFilter()):i(t,"e-responsiveascendingdiv")?(r.sortColumn(u.field,"Ascending"),this.closeCustomFilter()):i(t,"e-responsivedescendingdiv")?(r.sortColumn(u.field,"Descending"),this.closeCustomFilter()):i(t,"e-responsivecolumndiv")?(r.notify(ei,{action:5}),r.showResponsiveCustomColumnChooser()):i(t,"e-responsivefilterdiv")&&(r.notify(ei,{action:3}),this.isRowResponsive=!0,this.isCustomDialog=!1,r.filterModule&&r.filterModule.responsiveDialogRenderer.showResponsiveDialog(u)),n.preventDefault());this.action===a.isFilter&&"FilterBar"!==r.filterSettings.type&&(t.classList.contains("e-responsivecoldiv")||t.parentElement.classList.contains("e-responsivecoldiv")?((f=t.getAttribute("data-mappingname"))||(f=t.parentElement.getAttribute("data-mappingname")),f)&&(e=r.getColumnByField(f),this.isRowResponsive=!0,this.showResponsiveDialog(e)):(t.classList.contains("e-filterset")||t.parentElement.classList.contains("e-filtersetdiv"))&&(o=i(t,"e-responsivecoldiv"),o&&(f=o.getAttribute("data-mappingname"),"Menu"!==(e=r.getColumnByField(f)).filter.type&&(e.filter.type||"Menu"!==r.filterSettings.type)||(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(e),this.removeCustomDlgFilterEle(t))))},n.prototype.showResponsiveDialog=function(n,t){if(this.isCustomDialog&&this.action===a.isFilter&&!this.isRowResponsive||t&&this.action===a.isColMenu)this.menuCol=t,this.renderCustomFilterDialog(null,t);else{if(this.filteredCol=n,this.renderResponsiveDialog(n),this.parent.enableAdaptiveUI&&n&&(this.parent.filterModule.setFilterModel(n),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(n,void 0))),this.action===a.isColumnChooser&&this.parent.notify(tf,{action:"open"}),this.action===a.isSort){var i={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(ip,i),i.cancel)return}this.customResponsiveDlg.show(!0);this.customResponsiveDlg.element.style.maxHeight="100%";this.setTopToChildDialog(this.customResponsiveDlg.element);this.parent.enableAdaptiveUI&&this.parent.filterSettings&&("CheckBox"===this.parent.filterSettings.type||"Excel"===this.parent.filterSettings.type)&&this.parent.filterSettings.enableInfiniteScrolling&&"Shimmer"===this.parent.filterSettings.loadingIndicator&&("CheckBox"===this.parent.filterSettings.type?this.parent.filterModule.filterModule.checkBoxBase:this.parent.filterModule.filterModule.excelFilterBase).showMask()}},n.prototype.setTopToChildDialog=function(n){var t=n.querySelector(".e-dialog"),i;t&&(i=n.querySelector(".e-dlg-header-content").getBoundingClientRect().height,t.style.top=i+"px")},n.prototype.renderCustomFilterDialog=function(n,t){var f=this.parent,e=this.action===a.isColMenu,i,r,u;(this.action!==a.isFilter||"FilterBar"!==f.filterSettings.type)&&(i=e?"e-customcolumnmenudiv ":"",r=this.parent.createElement("div",{id:f.element.id+(e?"customcolumnmenu":"customfilter"),className:this.parent.cssClass?i+"e-customfilterdiv e-responsive-dialog "+this.parent.cssClass:i+"e-customfilterdiv e-responsive-dialog"}),this.parent.element.appendChild(r),this.customFilterDlg=this.getDialogOptions(n,!0,null,t),u={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"},this.parent.trigger(ip,u),u.cancel||(this.customFilterDlg.appendTo(r),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%"))},n.prototype.getDialogOptions=function(n,t,i,r){var u=new tt.Dialog({isModal:!0,showCloseIcon:!("columnchooser"===i&&this.parent.columnChooserSettings.headerTemplate&&!this.parent.enableColumnVirtualization),closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(n,r),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""}),f;return(u.isStringTemplate=!0,t)?(u.header=this.renderResponsiveHeader(n,void 0,!0),f=this.action===a.isColMenu?"e-customcolumnmenu ":"",u.cssClass=f+"e-customfilter"):(u.header=this.renderResponsiveHeader(n),u.cssClass="Vertical"===this.parent.rowRenderingMode&&this.action===a.isFilter?"e-res"+i+" e-row-responsive-filter":"e-res"+i),u},n.prototype.renderResponsiveDialog=function(n){var r=this.parent,t,i;(this.action!==a.isFilter||"FilterBar"!==r.filterSettings.type)&&(t=this.action===a.isFilter?"filter":"sort",t=this.action===a.isColumnChooser?"columnchooser":t,i=this.parent.createElement("div",{id:r.element.id+"responsive"+t,className:this.parent.cssClass?"e-res"+t+"div e-responsive-dialog "+this.parent.cssClass:"e-res"+t+"div e-responsive-dialog"}),this.parent.element.appendChild(i),this.customResponsiveDlg=this.getDialogOptions(n,!1,t),this.customResponsiveDlg.appendTo(i))},n.prototype.dialogCreated=function(){fk(this.parent)},n.prototype.dialogOpen=function(){var n,t,i;if(this.action===a.isSort&&this.parent.allowMultiSorting)for(n=0;n<this.parent.sortSettings.columns.length;n++)this.sortedCols.push(this.parent.sortSettings.columns[parseInt(n.toString(),10)].field),t=this.parent.sortSettings.columns[parseInt(n.toString(),10)].field,i=this.parent.sortSettings.columns[parseInt(n.toString(),10)].direction,this.sortPredicate.push({field:t,direction:i})},n.prototype.beforeDialogClose=function(n){if(this.isDialogClose=n.element&&!n.element.querySelector(".e-xl-customfilterdiv")&&n.element.classList.contains("e-resfilterdiv"),this.action===a.isFilter)n.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):n.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter(),"Horizontal"===this.parent.rowRenderingMode&&this.parent.showColumnMenu&&(this.parent.notify(ei,{action:4}),(i=document.querySelector(".e-resfilter"))&&t.remove(i));else if(this.action===a.isSort)this.closeCustomDialog();else if(this.action===a.isColMenu)this.closeCustomFilter(),(i=document.querySelector(".e-rescolummenu"))&&t.remove(i);else if(this.action===a.isColumnChooser){var i;this.parent.notify(tf,{action:"clear"});(i=document.querySelector(".e-rescolumnchooser"))&&t.remove(i);"Horizontal"===this.parent.rowRenderingMode&&this.parent.showColumnMenu&&this.parent.notify(ei,{action:4});this.isCustomDialog=!1;this.isDialogClose=!1}this.parent.off(nh,this.keyHandler)},n.prototype.sortColumn=function(){if(this.isSortApplied){this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(var n=0;n<this.sortPredicate.length;n++)this.parent.sortColumn(this.sortPredicate[parseInt(n.toString(),10)].field,this.sortPredicate[parseInt(n.toString(),10)].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting();this.closeCustomDialog()}else this.closeCustomDialog()},n.prototype.getHeaderTitle=function(n,t){var i,r=this.parent;return this.action===a.isEdit?i=r.localeObj.getConstant("EditFormTitle")+n.primaryKeyValue[0]:this.action===a.isAdd?i=r.localeObj.getConstant("AddFormTitle"):this.action===a.isFilter?i=t?t.headerText||t.field:r.localeObj.getConstant("FilterTitle"):this.action===a.isSort?i=r.localeObj.getConstant("Sort"):this.action===a.isColMenu?i=r.localeObj.getConstant("ColumnMenu"):this.action===a.isColumnChooser&&(i=r.localeObj.getConstant("ChooseColumns")),i},n.prototype.getDialogName=function(n){var t;return n===a.isAdd||n===a.isEdit?t="dialogEdit_wrapper_title":n===a.isFilter?t="responsive_filter_dialog_wrapper":n===a.isColumnChooser&&(t="responsive_column_chooser_dialog_wrapper"),t},n.prototype.getButtonText=function(n){var t;return n===a.isAdd||n===a.isEdit?t="Save":n!==a.isFilter&&this.action!==a.isSort&&n!==a.isColumnChooser&&this.action!==a.isColumnChooser||(t="OKButton"),t},n.prototype.renderResponsiveHeader=function(n,t,r){var f=this,u=this.parent,y,o,c,s,l,h,v,e,p;u.on(nh,this.keyHandler,this);return(y=u.element.id+this.getDialogName(this.action),this.parent.columnChooserSettings.headerTemplate&&!this.parent.enableColumnVirtualization&&this.getHeaderTitle(t,n)===u.localeObj.getConstant("ChooseColumns"))?this.parent.columnChooserModule.renderHeader():(o=u.createElement("div",{className:"e-res-custom-element"}),c=u.createElement("div",{className:"e-dlg-custom-header",id:y}),c.innerHTML=this.getHeaderTitle(t,n),o.appendChild(c),s=u.createElement("button"),r||(this.saveBtn=new ri.Button({cssClass:this.parent.cssClass?"e-primary e-flat e-res-apply-btn "+this.parent.cssClass:"e-primary e-flat e-res-apply-btn"}),s.innerHTML=u.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(s),s.onclick=function(){f.dialogHdrBtnClickHandler()}),l=this.action===a.isSort,h=this.action===a.isFilter,(h||l)&&(v=l?"sort":"filter",e=u.createElement("button"),(this.filterClearBtn=new ri.Button({cssClass:this.parent.cssClass?"e-primary e-flat e-res-"+v+"-clear-btn "+this.parent.cssClass:"e-primary e-flat e-res-"+v+"-clear-btn"}),h)?(p=u.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"}),e.appendChild(p)):e.innerHTML=u.localeObj.getConstant("Clear"),o.appendChild(e),this.filterClearBtn.appendTo(e),e.onclick=function(n){i(n.target,"e-customfilter")?(f.parent.filterModule.clearFiltering(),f.removeCustomDlgFilterEle()):h?f.filterClear():(f.resetSortButtons(),f.sortedCols=[],f.sortPredicate=[],f.isSortApplied=!0)},o.appendChild(e)),r||o.appendChild(s),o)},n.prototype.filterClear=function(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol);this.parent.filterModule.filterModule.closeResponsiveDialog()},n.prototype.removeCustomFilterElement=function(){var r=document.getElementById(this.parent.element.id+"customcolumnmenu"),n,i;r&&(t.remove(r),n=document.querySelector(".e-customfilter"),n&&t.remove(n));i=document.querySelector(".e-rescolumnchooser");i&&t.remove(i)},n.prototype.hideResponsiveColumnChooser=function(){var n=document.querySelector(".e-rescolumnchooser");n&&(t.remove(n),this.isCustomDialog=!1,this.isDialogClose=!1)},n.prototype.dialogHdrBtnClickHandler=function(){this.action===a.isEdit||this.action===a.isAdd?this.parent.endEdit():this.action===a.isFilter?(this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}),this.removeCustomFilterElement()):this.action===a.isSort?(this.sortColumn(),this.removeCustomFilterElement()):this.action===a.isColumnChooser&&(this.parent.notify(tf,{action:"confirm"}),this.removeCustomFilterElement(),this.isCustomDialog=!1,this.isDialogClose=!1)},n.prototype.closeCustomDialog=function(){if(this.isCustomDlgRender){var n=this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv");t.remove(n)}else this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog()},n.prototype.destroyCustomFilterDialog=function(){if(this.customResponsiveDlg){var n=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&n&&(this.customResponsiveDlg.destroy(),t.remove(n));this.closeCustomFilter();this.action===a.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}},n.prototype.closeCustomFilter=function(){if(!this.isDialogClose&&this.customFilterDlg){var n=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&n&&(this.customFilterDlg.destroy(),t.remove(n))}this.isCustomDialog=!1;this.isDialogClose=!1},n.prototype.removeCustomDlgFilterEle=function(n){if(n)n.parentElement.classList.contains("e-filtersetdiv")?t.remove(n.parentElement):t.remove(n);else for(var r=this.customColumnDiv.children,i=0;i<r.length;i++)(n=r[parseInt(i.toString(),10)].querySelector(".e-filtersetdiv"))&&(t.remove(n),i--)},n.prototype.keyHandler=function(n){13===n.keyCode&&(this.action===a.isFilter&&n.target.classList.contains("e-searchinput")||this.action===a.isEdit||this.action===a.isAdd)&&this.dialogHdrBtnClickHandler()},n.prototype.editComplate=function(n){"save"!==n.requestType&&"cancel"!==n.requestType||this.parent.off(nh,this.keyHandler)},n.prototype.removeEventListener=function(){this.customColumnDiv&&t.EventHandler.remove(this.customColumnDiv,t.Browser.isDevice?"touchend":"click",this.customFilterColumnClickHandler);yt(this.parent,this.evtHandlers,!0,this);this.parent.removeEventListener(s,this.onActionCompleteFn)},n}(),lit=function(){function n(){this.services={}}return n.prototype.register=function(n,i){t.isNullOrUndefined(this.services[""+n])&&(this.services[""+n]=i)},n.prototype.getService=function(n){if(t.isNullOrUndefined(this.services[""+n]))throw"The service "+n+" is not registered";return this.services[""+n]},n.prototype.registerAdaptiveService=function(n,t,i){t?(n.responsiveDialogRenderer=new sb(n.parent,n.serviceLocator),n.responsiveDialogRenderer.action=i):n.responsiveDialogRenderer&&(n.responsiveDialogRenderer.removeEventListener(),n.responsiveDialogRenderer=void 0)},n}(),vst=function(){function n(){this.rendererMap={}}return n.prototype.addRenderer=function(n,i){var r=t.getEnumValue(ni,n);t.isNullOrUndefined(this.rendererMap[""+r])&&(this.rendererMap[""+r]=i)},n.prototype.getRenderer=function(n){var i=t.getEnumValue(ni,n);if(t.isNullOrUndefined(this.rendererMap[""+i]))throw"The renderer "+i+" is not found";return this.rendererMap[""+i]},n}(),lv=function(){function n(n){this.parent=n}return n.prototype.setWidthToColumns=function(){var u,n=0,h=this.parent.getColumnIndexesInView(),f=!0,e,i,r;if(this.parent.allowGrouping)for(e=this.parent.groupSettings.columns.length;n<e;n++)this.parent.enableColumnVirtualization&&-1===h.indexOf(n)?f=!1:this.setColumnWidth(new ht({width:"30px"}),n);for((this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new ht({width:"30px"}),n),n++),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(this.setColumnWidth(new ht({width:"30px"}),n),n++),i=this.parent.getColumns(),r=0;r<i.length;r++)this.setColumnWidth(i[parseInt(r.toString(),10)],f&&this.parent.enableColumnVirtualization?void 0:r+n);if(this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&this.setColumnWidth(new ht({width:"30px"}),this.parent.groupSettings.columns.length+i.length),"auto"!==(u=this.getTableWidth(this.parent.getColumns()))){"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(u);var c=i.filter(function(n){return!t.isNullOrUndefined(n.maxWidth)}),o=this.parent.getHeaderTable(),s=this.parent.getContentTable();this.parent.allowResizing&&this.parent.element.getBoundingClientRect().width>u&&c.length===i.length&&o&&s&&t.addClass([o,s],["e-tableborder"])}},n.prototype.setMinwidthBycalculation=function(n){var c=this,f=0,i=this.parent.getColumns().filter(function(n){return c.parent.allowResizing?(t.isNullOrUndefined(n.width)||"auto"===n.width)&&t.isNullOrUndefined(n.maxWidth):t.isNullOrUndefined(n.width)||"auto"===n.width}),u,r,s;if(i.length){f=t.isNullOrUndefined(this.parent.width)||"auto"===this.parent.width||"string"!=typeof this.parent.width||-1!==this.parent.width.indexOf("%")?this.parent.element.getBoundingClientRect().width-n:parseInt(this.parent.width,10)-n;for(var e=0,o=0,h=i;o<h.length;o++)u=h[o],e+=t.isNullOrUndefined(u.minWidth)?0:"string"==typeof u.minWidth?parseInt(u.minWidth,10):u.minWidth;for(r=0;r<i.length;r++)0===n&&this.parent.allowResizing&&this.isWidthUndefined()&&r!==i.length-1&&this.setUndefinedColumnWidth(i),s=this.parent.getColumnIndexByField(i[parseInt(r.toString(),10)].field)+this.parent.getIndentCount(),0!==n&&f<e?this.setWidth(i[parseInt(r.toString(),10)].minWidth,s):0!==n&&f>e&&this.setWidth("",s,!0)}},n.prototype.setUndefinedColumnWidth=function(n){for(var t=0;t<n.length;t++)t!==n.length-1&&(n[parseInt(t.toString(),10)].width=200,this.setWidth(200,this.parent.getColumnIndexByField(n[parseInt(t.toString(),10)].field)))},n.prototype.setColumnWidth=function(n,i,r){var e;if(!(this.parent.getColumns().length<1)){var o=t.isNullOrUndefined(i)?this.parent.getNormalizedColumnIndex(n.uid):i,u=this.getWidth(n),f=this.getTableWidth(this.parent.getColumns());null!==u&&((this.setWidth(u,o),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&"auto"!==f&&this.setMinwidthBycalculation(f),this.parent.allowResizing&&("resize"===r||this.parent.getFrozenColumns()))&&(e=this.parent.getContentTable(),this.setWidthToTable(this.parent.getFrozenColumns()&&-1===e.style.width.indexOf("px")&&f<e.clientWidth)),this.parent.notify(be,{index:o,width:u,column:n,module:r}))}},n.prototype.setWidth=function(n,r,u){var f,c;this.parent.groupSettings.columns.length>r&&ey(this.parent)&&(!this.parent.resizeModule||!this.parent.resizeModule.resizeProcess)&&(n=(3e3/this.parent.element.offsetWidth).toFixed(1)+"%");var a=this.parent.getHeaderTable(),v=this.parent.getContentTable(),l=t.formatUnit(n),s=a.querySelector(hi).children[parseInt(r.toString(),10)];if(s&&!u?s.style.width=l:s&&u&&(s.style.width=""),f=v.querySelector(hi).children[parseInt(r.toString(),10)],f&&!u?f.style.width=l:f&&u&&(f.style.width=""),!this.parent.enableColumnVirtualization&&this.parent.isEdit){for(var e=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),h=[],o=0;o<e.length;o++)if(i(e[parseInt(o.toString(),10)],"e-grid").id===this.parent.element.id)for(c=0;c<e[parseInt(o.toString(),10)].querySelector("colgroup").children.length;c++)h.push(e[parseInt(o.toString(),10)].querySelector("colgroup").children[parseInt(c.toString(),10)]);e.length&&h.length&&h[parseInt(r.toString(),10)]&&(h[parseInt(r.toString(),10)].style.width=l)}this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&this.refreshFrozenScrollbar()},n.prototype.refreshFrozenScrollbar=function(){var i={cancel:!1},t;if(this.parent.notify(ltt,i),!i.cancel){var r=oi(),u=this.parent.element.querySelector(".e-movablescrollbar"),n=this.parent.getContent().firstElementChild.getBoundingClientRect().width;this.parent.enableColumnVirtualization&&(t=this.parent.getContent().querySelector(".e-virtualtrack"),t&&(n=t.scrollWidth));"auto"!==this.parent.height&&(n+=r);u.firstElementChild.style.width=n+"px"}},n.prototype.getSiblingsHeight=function(n){return this.getHeightFromDirection(n,"previous")+this.getHeightFromDirection(n,"next")},n.prototype.getHeightFromDirection=function(n,t){for(var i=n[t+"ElementSibling"],r=0,u=[st,fu,"e-groupdroparea","e-gridpager","e-toolbar","e-temp-toolbar"];i;)u.some(function(n){return i.classList.contains(n)})&&(r+=i.offsetHeight),i=i[t+"ElementSibling"];return r},n.prototype.isWidthUndefined=function(){var n=this.parent.getColumns().filter(function(n){return t.isNullOrUndefined(n.width)&&t.isNullOrUndefined(n.minWidth)}).length;return this.parent.getColumns().length===n},n.prototype.getWidth=function(n){if(this.parent.allowResizing&&t.isNullOrUndefined(n.width)&&(t.isNullOrUndefined(n.minWidth)&&t.isNullOrUndefined(n.maxWidth)&&!this.isWidthUndefined()?n.width=200:n.maxWidth&&(n.width=n.maxWidth)),!n.width)return null;var i=parseInt(n.width.toString(),10);return n.minWidth&&i<parseInt(n.minWidth.toString(),10)?n.minWidth:n.maxWidth&&i>parseInt(n.maxWidth.toString(),10)?n.maxWidth:n.width},n.prototype.getTableWidth=function(n,t){for(var i,r,f=0,e=!1,u=0,o=n;u<o.length;u++)i=o[u],!1!==i.visible&&(r=this.getWidth(i),"auto"!==i.width&&i.width||(this.parent.allowResizing&&!t?i.maxWidth||(e=!0):r=0),null!==r&&(f+=parseInt(r.toString(),10)));return e?"auto":f},n.prototype.setWidthToTable=function(n){var i=t.formatUnit(this.getTableWidth(this.parent.getColumns())),r;(this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new ht({width:"30px"}));i=this.isAutoResize()||"auto"===i||n?"100%":i;this.parent.getHeaderTable().style.width=i;this.parent.getContentTable().style.width=i;r=this.parent.element.querySelector(".e-table.e-inline-edit");r&&(r.style.width=i)},n.prototype.isAutoResize=function(){return this.parent.allowResizing&&"Auto"===this.parent.resizeSettings.mode},n}(),yst=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pst=function(){function n(n){this.currentInfo={};this.oneTime=!0;this.swap={};this.isInfiniteScroll=!1;this.virtualSelectionInfo={};this.forget=!1;this.skipFocus=!0;this.focusByClick=!1;this.firstHeaderCellClick=!1;this.prevIndexes={};this.refMatrix=this.refreshMatrix(!0);this.actions=["downArrow","upArrow"];this.isVirtualScroll=!1;this.groupedFrozenRow=0;this.parent=n;this.rowModelGen=new eu(this.parent);this.addEventListener()}return n.prototype.focusCheck=function(n){var t=n.target;this.focusByClick=!0;this.firstHeaderCellClick=!0;this.skipFocus=t.classList.contains("e-grid")},n.prototype.onFocus=function(n){if(!(this.parent.isDestroyed||t.Browser.isDevice||this.parent.enableVirtualization||this.parent.element.querySelector(".e-masked-table")||!this.parent.isInitialLoad&&n&&n.target===this.parent.element&&this.parent.element.querySelector(".e-spin-show"))){this.setActive(!this.parent.enableHeaderFocus&&0===this.parent.frozenRows);this.parent.enableHeaderFocus||this.parent.getCurrentViewRecords().length||"Batch"===this.parent.editSettings.mode&&("Batch"!==this.parent.editSettings.mode||!this.parent.editModule||this.parent.editModule.getBatchChanges()[lr].length)||this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new cr({isDataRow:!0})]}),this.getContent().selector,!1);var i=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator(),this.active);this.getContent().matrix.select(i[0],i[1]);!this.skipFocus||n&&n.target===this.parent.element||(this.focus(n),this.skipFocus=!1)}},n.prototype.passiveFocus=function(n){var u,r;this.parent.isDestroyed||(u=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)"),n.target!==u||!n.relatedTarget||i(n.relatedTarget,"e-grid")||this.firstHeaderCellClick||(r=[0,0],0===this.active.matrix.matrix[r[0]][r[1]]&&(r=fr(this.active.matrix.matrix,r,!0)),this.active.matrix.current=r,this.currentInfo.element=n.target,this.currentInfo.elementToFocus=n.target,this.currentInfo.element.querySelector(".e-checkselectall")?(this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),n)):t.addClass([this.currentInfo.element],["e-focused","e-focus"])),this.firstHeaderCellClick=!1,n.target&&n.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,t.addClass([this.currentInfo.element],["e-focused","e-focus"])))},n.prototype.onBlur=function(n){this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden");var r=!(!i(n.target,"e-gantt")||!n.target.classList.contains("e-rowcell")||t.isNullOrUndefined(n.target.nextElementSibling)||!n.target.nextElementSibling.classList.contains("e-rowcell"));(this.parent.isEdit||n&&(!n.relatedTarget||t.closest(n.relatedTarget,".e-grid")||t.closest(n.relatedTarget,".e-grid-popup"))&&(!this.parent.element.classList.contains("e-childgrid")||this.parent.element.matches(":focus-within")))&&(r||!t.isNullOrUndefined(n.relatedTarget)||parseInt(n.target.getAttribute("aria-colindex"),10)-1!=0||0!==parseInt(n.target.getAttribute("data-index"),10))&&(r||!t.isNullOrUndefined(n.relatedTarget)||t.closest(document.activeElement,".e-grid")||t.isNullOrUndefined(n.sourceCapabilities))||(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.setLastContentCellTabIndex(),this.setFirstFocusableTabIndex(),this.firstHeaderCellClick=!1)},n.prototype.setFirstFocusableTabIndex=function(){var n=this.parent,r,f,e,u,i;if(n.element.tabIndex=-1,n.allowGrouping&&n.groupSettings.showDropArea)r=n.groupModule,f=r.getFocusableGroupedItems(),f.length>0?(r.element.tabIndex=-1,f[0].tabIndex=0):r.element.tabIndex=0;else{if(n.toolbar||n.toolbarTemplate){if(e=n.toolbarModule.element,u=this.parent.toolbarModule.getFocusableToolbarItems(),u.length>0&&u[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input"))return e.tabIndex=-1,void(u[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").tabIndex=0);if(n.toolbarTemplate)return void(e.tabIndex=0)}n.getColumns().length&&(n.getHeaderContent().querySelector(".e-headercell:not(.e-hide)").tabIndex=0,this.setActive(!1),!t.isNullOrUndefined(this.active)&&(t.isNullOrUndefined(this.active.target)||!this.active.target.classList.contains("e-columnmenu")))&&(i=[0,0],0===this.active.matrix.matrix[i[0]][i[1]]&&(i=fr(this.active.matrix.matrix,i,!0)),this.active.matrix.current=i)}},n.prototype.setLastContentCellTabIndex=function(){var n=this.parent.getContentTable();n.rows[n.rows.length-1]&&(n.rows[n.rows.length-1].lastElementChild.tabIndex=0)},n.prototype.onClick=function(n,r,u){var f,o,e;if((!i(n.target,"e-filterbarcell")||!i(n.target,"e-multiselect")&&!n.target.classList.contains("e-input-group-icon"))&&(f=!t.isNullOrUndefined(t.closest(n.target,"."+it)),o=!t.isNullOrUndefined(t.closest(n.target,"."+st)),!(!(f=f&&o?!f:f)&&t.isNullOrUndefined(t.closest(n.target,"."+st))||n.target.classList.contains(lt)||n.target.classList.contains(ct)||!t.isNullOrUndefined(t.closest(n.target,".e-unboundcell"))&&!r)&&(this.setActive(f),e={cancel:!1,byKey:!1,byClick:!t.isNullOrUndefined(n.target),clickArgs:n},this.parent.notify(pf,e),!(e.cancel||t.closest(n.target,".e-inline-edit")&&!this.parent.editSettings.showAddNewRow&&this.parent.editSettings.showAddNewRow&&!this.parent.element.querySelector(".e-editedrow"))&&(this.setActive(f),this.getContent())))){if(!1===this.getContent().onClick(n,r))return;this.focus();this.currentInfo.element.classList.contains("e-rowcell")&&n.type&&"click"===n.type&&!u&&t.addClass([this.currentInfo.element],["e-focused","e-focus"]);u&&n&&n.target&&t.addClass([n.target],["e-focused","e-focus"])}},n.prototype.handleFilterNavigation=function(n,t,i){n.target===document.querySelector(t)&&"Tab"===n.key&&n.shiftKey?(n.preventDefault(),document.querySelector(i).focus()):n.target!==document.querySelector(i)||"Tab"!==n.key||n.shiftKey||document.activeElement!==document.querySelector(i)||(n.preventDefault(),document.querySelector(t).focus())},n.prototype.onKeyPress=function(n){var ot,s,f,d,st,ht,a,ct,g,lt,c,v,y,at,nt,tt,e,p,l,h,o,it,r,rt,u,ut,ft,w,b,k,et;if(this.content&&this.content.target&&(this.content.target=null),this.parent.allowPaging){if(ot=this.parent.pagerModule.pagerObj.element,s=this.parent.pagerModule.pagerObj.getFocusablePagerElements(ot,[]),this.parent.childGrid&&!i(n.target,"e-gridpager")&&this.allowToPaging(n)&&s.length&&(s[0].tabIndex=0),this.parent.pagerModule.pagerObj.checkPagerHasFocus()){if("shiftTab"===n.action&&s.length&&s[0]===n.target)return this.setActive(!0),f=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1],0===this.active.matrix.matrix[f[0]][f[1]]&&(f=fr(this.active.matrix.matrix,f,!1)),this.active.matrix.current="Batch"===this.parent.editSettings.mode?this.isValidBatchEditCell(f)?f:this.findBatchEditCell(f,!1):f,n.preventDefault(),void this.focus(n);if("tab"!==n.action||!this.parent.element.classList.contains("e-childgrid")||(this.parent.pageSettings.pageSizes||!s.length||s[s.length-1]!==n.target)&&this.parent.pagerModule.pagerObj.getDropDownPage()!==n.target)return void this.parent.pagerModule.pagerObj.changePagerFocus(n);d=i(this.parent.element,"e-detailcell");t.removeClass([this.parent.element],["e-focus"]);t.removeClass([d],["e-focused"]);d.tabIndex=-1}if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&(38===n.keyCode||n.shiftKey&&9===n.keyCode))return n.preventDefault(),void this.focus(n);if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&9===n.keyCode)return n.preventDefault(),void this.parent.pagerModule.pagerObj.setPagerFocus();this.parent.pagerModule.pagerObj.checkFirstPagerFocus()&&(st=this.getContent().matrix.rows,ht=this.getContent().matrix.columns,this.getContent().matrix.current=[st,ht])}if(("Excel"===this.parent.filterSettings.type&&this.handleFilterNavigation(n,".e-excelfilter .e-menu-item:not(.e-disabled)",".e-excelfilter .e-footer-content button:nth-child(2)"),"CheckBox"===this.parent.filterSettings.type)&&(a=this.parent.getColumnByUid(this.focusedColumnUid),ct=a&&a.filter&&a.filter.hideSearchbox?".e-chk-hidden":".e-searchinput.e-input",this.handleFilterNavigation(n,ct,".e-checkboxfilter .e-footer-content button:nth-child(2)")),"Menu"===this.parent.filterSettings.type&&this.handleFilterNavigation(n,".e-flmenu .e-input-group.e-popup-flmenu",".e-flmenu .e-footer-content button:nth-child(2)"),this.parent.showColumnChooser&&this.handleFilterNavigation(n,".e-ccdlg .e-ccsearch.e-cc.e-input",".e-ccdlg .e-footer-content button:nth-child(2)"),!this.skipOn(n)){if(n.target&&i(n.target,"e-gridcontent")&&(g=[].slice.call(this.parent.getContentTable().rows),lt=g[g.length-1].lastElementChild,n.target===lt&&(this.setActive(!0),this.setLastContentCellActive())),"shiftTab"===n.action&&n.target&&(n.target===this.parent.element||i(n.target,"e-toolbar")||i(n.target,"e-groupdroparea"))){if(n.target===this.parent.element)return void(this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(n));if(i(n.target,"e-groupdroparea"))return void(this.parent.element.classList.contains("e-childgrid")&&(n.preventDefault(),this.parent.element.focus()));if(i(n.target,"e-toolbar")){this.parent.allowGrouping&&this.parent.groupSettings.showDropArea?(c=(y=this.parent.groupModule).getFocusableGroupedItems(),n.preventDefault(),c.length>0?c[c.length-1].focus():y.element.focus()):this.parent.element.classList.contains("e-childgrid")&&(n.preventDefault(),this.parent.element.focus());return}}if(v=!1,"tab"===n.action&&n.target&&(n.target===this.parent.element||i(n.target,"e-toolbar")||i(n.target,"e-groupdroparea"))){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea&&(n.target===this.parent.element||n.target.classList.contains("e-groupdroparea"))){if((c=(y=this.parent.groupModule).getFocusableGroupedItems()).length>0)return n.preventDefault(),void c[0].focus();if(!n.target.classList.contains("e-groupdroparea"))return n.preventDefault(),void y.element.focus()}if((this.parent.toolbar||this.parent.toolbarTemplate)&&(n.target===this.parent.element||i(n.target,"e-groupdroparea")||n.target.classList.contains("e-toolbar"))){if(at=this.parent.toolbarModule.element,nt=this.parent.toolbarModule.getFocusableToolbarItems(),nt.length>0)return n.preventDefault(),void nt[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus();if(!n.target.classList.contains("e-toolbar")&&this.parent.toolbarTemplate)return n.preventDefault(),void at.focus()}(n.target===this.parent.element||i(n.target,"e-toolbar")||i(n.target,"e-groupdroparea"))&&(v=!0)}if(v&&(this.parent.allowGrouping&&!t.isNullOrUndefined(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length===this.parent.columns.length?this.setActive(!0):this.setActive(!1),this.active.matrix.current=[0,-1]),this.activeKey=n.action,tt={cancel:!1,byKey:!0,byClick:!1,keyArgs:n},this.parent.notify(pf,tt),!tt.cancel){if(e=this.getContent().matrix.current,p=this.active&&this.active.matrix.current?[this.active.matrix.current[0],this.active.matrix.current[1]]:void 0,this.currentInfo.outline=!0,l=this.getContent().jump(n.action,e),this.swap=l,l.swap&&("Batch"!==this.parent.editSettings.mode||"tab"!==n.action&&"shiftTab"!==n.action)&&(this.setActive(!l.toHeader),this.getContent().matrix.current=this.getContent().getNextCurrent(e,l,this.active,n.action),this.prevIndexes={}),this.setActiveByKey(n.action,this.getContent()),h=!this.content.lastIdxCell&&this.getContent().onKeyPress(n),n.target&&i(n.target,"e-gridheader")){if(!t.isNullOrUndefined(this.active)&&"tab"===n.action&&e.toString()===this.active.matrix.current.toString())if(o=fr(this.active.matrix.matrix,this.active.matrix.current,!0),f=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1],0===this.active.matrix.matrix[f[0]][f[1]]&&(f=fr(this.active.matrix.matrix,f,!1)),it=t.getValue(o[0]+".cells."+o[1],this.active.matrix.getRowsFromIndex(o[0],this.active)),it&&0===it.getBoundingClientRect().width&&this.active.matrix.matrix.length-1===o[0]&&(f=this.active.matrix.nextVisibleCellFocus(o[0],o[1],n.action,this.active.keyActions[n.action],this.active,this.active.matrix.current[1])),this.active.matrix.current.toString()===f.toString()&&this.content.matrix.matrix.length){if(h=!0,this.setActive(!0),r=[0,0],this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").setAttribute("aria-hidden","true"),0===this.active.matrix.matrix[r[0]][r[1]]&&(r=fr(this.active.matrix.matrix,[0,0],!0)),(w=t.getValue(r[0]+".cells."+r[1],this.active.matrix.getRowsFromIndex(r[0],this.active)))&&0===w.getBoundingClientRect().width&&(r=this.active.matrix.nextVisibleCellFocus(r[0],r[1],n.action,this.active.keyActions[n.action],this.active,this.active.matrix.current[1])),this.active.matrix.current="Batch"===this.parent.editSettings.mode?this.isValidBatchEditCell(r)?r:this.findBatchEditCell(r,!0):r,this.parent.enableVirtualization&&!this.parent.enableColumnVirtualization&&1!==this.parent.contentModule.prevInfo.blockIndexes[0])return n.preventDefault(),this.removeFocus(),rt=this.parent.contentModule,rt.firstCellFocus=!0,void(rt.content.scrollTop=0)}else this.active.matrix.current.toString()!==o.toString()&&(this.active.matrix.current=o);if(!t.isNullOrUndefined(this.active)&&"shiftTab"===n.action&&e.toString()===this.active.matrix.current.toString()){if(u=fr(this.active.matrix.matrix,this.active.matrix.current,!1),ut=t.getValue(u[0]+".cells."+u[1],this.active.matrix.getRowsFromIndex(u[0],this.active)),ut&&0===ut.getBoundingClientRect().width&&0===u[0]&&(u=this.active.matrix.nextVisibleCellFocus(u[0],u[1],n.action,this.active.keyActions[n.action],this.active,this.active.matrix.current[1])),u.toString()===this.active.matrix.current.toString())return void this.focusOutFromHeader(n);this.active.matrix.current.toString()===u.toString()||h||(h=!0,ft=t.getValue(u[0]+".cells."+u[1],this.active.matrix.getRowsFromIndex(u[0],this.active)),ft&&0===ft.getBoundingClientRect().width&&0===u[0]&&(u=this.active.matrix.nextVisibleCellFocus(u[0],u[1],n.action,this.active.keyActions[n.action],this.active,this.active.matrix.current[1])),this.active.matrix.current=u)}}if(n.target&&i(n.target,"e-gridcontent")&&(this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden"),"Batch"!==this.parent.editSettings.mode||"tab"!==n.action&&"shiftTab"!==n.action||(this.active.matrix.current=this.findBatchEditCell(p,"tab"===n.action),"tab"===n.action&&p.toString()===this.active.matrix.current.toString()&&(this.parent.editModule.editModule.addBatchRow=!0)),"shiftTab"===n.action&&e.toString()===this.active.matrix.current.toString())){if(this.parent.allowGrouping&&!t.isNullOrUndefined(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length===this.parent.columns.length)return void this.focusOutFromHeader(n);r=[0,0];0===this.active.matrix.matrix[r[0]][r[1]]&&(r=fr(this.active.matrix.matrix,[0,0],!0));(w=t.getValue(r[0]+".cells."+r[1],this.active.matrix.getRowsFromIndex(r[0],this.active)))&&0===w.getBoundingClientRect().width&&(r=this.active.matrix.nextVisibleCellFocus(r[0],r[1],n.action,this.active.keyActions[n.action],this.active,this.active.matrix.current[1]));h||r.toString()!==this.active.matrix.current.toString()&&("Batch"!==this.parent.editSettings.mode||p.toString()!==this.active.matrix.current.toString())||(h=!0,this.setActive(!1),this.setLastContentCellActive())}if(!1!==h)(this.header.action=n.action,this.header.currentTarget=null,this.header.focusType="key",n.target&&i(n.target,"e-fltrtemp")&&("tab"===n.action||"shiftTab"===n.action))&&(b=n.target,k=[].slice.call(t.closest(b,"th").querySelectorAll(".e-fltrtemp-focus")),k.length&&(et=k.indexOf(b),("tab"===n.action&&et<k.length-1||"shiftTab"===n.action&&et>0)&&(this.setActive(!1),this.active.matrix.current=e,this.active.currentTarget=b))),v&&i(this.active.getTable(),"e-gridheader")&&n.target&&n.target.id===this.parent.element.id+"_searchbar"&&(this.parent.searchModule.headerFocus=!0),n.preventDefault(),this.focus(n);else{if(this.clearIndicator(),"shiftTab"===n.action&&e.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1),this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.allowToPaging(n)&&e.toString()!==[0,0].toString()){if(n.preventDefault(),40===n.keyCode)return void this.parent.pagerModule.pagerObj.setPagerContainerFocus();if(9===n.keyCode)return void this.parent.pagerModule.pagerObj.setPagerFocus()}this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(n)}}}},n.prototype.isValidBatchEditCell=function(n){var i=this.active.getTable().rows[n[0]].cells[n[1]],r=t.closest(i,"tr"),f=parseInt(i.getAttribute("aria-colindex"),10)-1,u=this.parent.getColumns()[parseInt(f.toString(),10)];return!(1!==this.active.matrix.matrix[n[0]][n[1]]||r.classList.contains("e-row")&&(!r.classList.contains("e-insertedrow")&&u.isPrimaryKey||!u.allowEditing))},n.prototype.findBatchEditCell=function(n,i,r){for(var e,o,s=n,u=n,f=!1;!f;)e=u,u=fr(this.active.matrix.matrix,u,i),o=t.getValue(u[0]+".cells."+u[1],this.active.getTable().rows),o&&0===o.getBoundingClientRect().width&&(u=this.active.matrix.nextVisibleCellFocus(u[0],u[1],this.activeKey,this.active.keyActions[this.activeKey],this.active,this.active.matrix.current[1])),e.toString()===u.toString()||r&&e[0]!==u[0]?f=!0:this.isValidBatchEditCell(u)&&(s=u,f=!0);return s},n.prototype.setLastContentCellActive=function(){var n=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1],i;0===this.active.matrix.matrix[n[0]][n[1]]&&(n=fr(this.active.matrix.matrix,n,!1));i=t.getValue(n[0]+".cells."+n[1],this.active.matrix.getRowsFromIndex(n[0],this.active));i&&0===i.getBoundingClientRect().width&&(n=this.active.matrix.nextVisibleCellFocus(n[0],n[1],this.activeKey,this.active.keyActions[this.activeKey],this.active,this.active.matrix.current[1]));this.active.matrix.current=n},n.prototype.focusOutFromChildGrid=function(n){var c=i(this.parent.element,"e-table"),u=i(c,"e-grid").ej2_instances[0],h=i(this.parent.element,"e-detailcell"),l=i(this.parent.element,"e-detailrow").getAttribute("data-uid"),o=[].slice.call(u.getContentTable().rows),f=o.map(function(n){return n.getAttribute("data-uid")}).indexOf(l),r,s,e;if(!("tab"===n.action&&f>=o.length-1)){if(t.removeClass([this.parent.element],["e-focus"]),t.removeClass([h],["e-focused"]),h.tabIndex=-1,n.preventDefault(),u.focusModule.removeFocus(),"shiftTab"===n.action){for(s=o[f-1].cells,e=s.length-1;e>=0;e--)if(!(r=s[parseInt(e.toString(),10)]).classList.contains("e-hide")){u.focusModule.active.matrix.current=[f-1,e];break}}else r=o[f+1].cells[0],u.focusModule.active.matrix.current=[f+1,0];u.focusModule.currentInfo.element=r;u.focusModule.currentInfo.elementToFocus=r;t.addClass([r],["e-focused","e-focus"]);r.tabIndex=0;r.focus()}},n.prototype.focusOutFromHeader=function(n){var u,t,r,i;if(this.removeFocus(),this.parent.toolbar||this.parent.toolbarTemplate){if(u=this.parent.toolbarModule.element,t=this.parent.toolbarModule.getFocusableToolbarItems(),t.length>0)return n.preventDefault(),void t[t.length-1].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus();if(this.parent.toolbarTemplate)return n.preventDefault(),void u.focus()}if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)return r=this.parent.groupModule,i=r.getFocusableGroupedItems(),n.preventDefault(),void(i.length>0?i[i.length-1].focus():r.element.focus());this.parent.element.classList.contains("e-childgrid")&&(n.preventDefault(),this.parent.element.focus())},n.prototype.allowToPaging=function(n){return"Batch"!==this.parent.editSettings.mode||!this.parent.editSettings.allowAdding||40===n.keyCode},n.prototype.skipOn=function(n){var r=n.target,s,u,v,h,f,c,l,o;if(!r)return!1;if(!this.parent.isEdit&&r&&r.closest(".e-unboundcell")&&this.currentInfo.skipAction&&("shiftTab"===n.action&&this.commandColumnFocusElement(r.closest(".e-unboundcell"),!1)===r||"tab"===n.action&&this.commandColumnFocusElement(r.closest(".e-unboundcell"),!0)===r))return this.currentInfo.skipAction=!1;if(this.currentInfo.skipAction||["pageUp","pageDown","altDownArrow"].indexOf(n.action)>-1)return this.clearIndicator(),!0;if(this.parent.allowGrouping&&(s=this.parent.groupModule.getFocusableGroupedItems(),i(n.target,"e-groupheadercell")&&!(n.target===s[0]&&"shiftTab"===n.action||n.target===s[s.length-1]&&"tab"===n.action))||(this.parent.toolbar||this.parent.toolbarTemplate)&&(u=this.parent.toolbarModule.element.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)"),i(n.target,"e-toolbar-item")&&!(u.length>0&&(i(n.target,"e-toolbar-item")===u[0]&&"shiftTab"===n.action||i(n.target,"e-toolbar-item")===u[u.length-1]&&"tab"===n.action))))return!0;if(v=t.closest(r,"th")&&!t.closest(r,"th").tabIndex,n.target.classList.contains("e-filterbaroperator")&&(13===n.keyCode||27===n.keyCode)&&(a=t.closest(n.target,".e-filterbarcell")).querySelector("input").focus(),h=this.parent.editSettings.showAddNewRow&&null!==t.closest(document.activeElement,".e-addedrow"),(v&&null!==t.closest(document.activeElement,".e-filterbarcell")||h)&&this.removeFocus(),f=null!==t.closest(document.activeElement,".e-filterbarcell"),this.parent.enableHeaderFocus&&f&&(c=this.active.matrix,l=c.current,f=c.matrix[l[0]].lastIndexOf(1)!==l[1]),this.parent.isEdit&&("tab"===n.action||"shiftTab"===n.action)&&"Normal"===this.parent.editSettings.mode&&!this.parent.editSettings.showAddNewRow&&!t.isNullOrUndefined(i(r,"e-addedrow"))){var e=this.parent.editModule.formObj.element.querySelectorAll('input:not([type="hidden"],.e-numeric-hidden,.e-disabled), select:not([aria-hidden="true"]), button:not(.e-hide), textarea:not(.e-hide,.e-disabled,[disabled])'),a=r.classList.contains("e-ddl")?r.querySelector("input"):r,y="tab"===n.action&&a===e[e.length-1],p="shiftTab"===n.action&&a===e[0];(y||p)&&(n.preventDefault(),o=e[y?0:e.length-1],(o=o.parentElement.classList.contains("e-ddl")?o.parentElement:o).focus())}return"delete"===n.action||"Batch"!==this.parent.editSettings.mode&&(this.parent.isEdit&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&(!t.isNullOrUndefined(this.parent.element.querySelector(".e-editedrow"))||!t.isNullOrUndefined(i(r,"e-addedrow"))&&!t.isNullOrUndefined(t.closest(n.target,"input"))&&!t.isNullOrUndefined(document.querySelector(".e-popup-open"))||!t.isNullOrUndefined(i(r,"e-addedrow"))&&r&&!r.querySelector(".e-cancel-icon")&&!t.isNullOrUndefined(i(r,"e-unboundcell"))))||["insert","f2"].indexOf(n.action)>-1)||f&&this.parent.enableHeaderFocus||(f||h)&&"tab"!==n.action&&"shiftTab"!==n.action||null!==t.closest(document.activeElement,"#"+this.parent.element.id+"_searchbar")&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(n.action)>-1||null===t.closest(r,"."+it)&&null===t.closest(r,"."+st)&&!(n.target===this.parent.element||i(n.target,"e-toolbar")||i(n.target,"e-groupdroparea"))||"space"===n.action&&!r.classList.contains(rf)&&null===t.closest(r,"."+rf)&&null===t.closest(r,".e-headerchkcelldiv")||null!==t.closest(r,".e-filter-popup")},n.prototype.focusVirtualElement=function(n){var u=this,t,i,r;(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(t={virtualData:{},isAdd:!1,isCancel:!1},this.parent.notify(nf,t),i=this.actions.some(function(n){return n===u.activeKey}),r=!!this.parent.contentModule&&this.parent.contentModule.selectedRowIndex>-1,t.isAdd||Object.keys(t.virtualData).length||i||t.isCancel||r?(this.parent.notify(kw,{isCancel:!1}),t.isCancel=!1,(this.parent.enableVirtualization&&!this.parent.selectVirtualRowOnAdd&&(!n||n&&"ctrlHome"!==n.action&&"ctrlEnd"!==n.action)||!this.parent.enableVirtualization)&&(this.parent.contentModule.selectedRowIndex=-1),this.parent.selectVirtualRowOnAdd=!1,i&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",n)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus());this.isVirtualScroll=this.isInfiniteScroll=!1},n.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},n.prototype.getContent=function(){return this.active||this.content},n.prototype.setActive=function(n){this.active=n?this.content:this.header},n.prototype.setFocusedElement=function(n,r){var u=this;this.currentInfo.elementToFocus=n;setTimeout(function(){if(!t.isNullOrUndefined(u.currentInfo.elementToFocus)){var n=t.isNullOrUndefined(u.parent.element.querySelector(".e-flmenu"))?document.querySelector(".e-grid-popup .e-flmenu"):u.parent.element.querySelector(".e-flmenu");(u.parent.enableVirtualization||u.parent.enableInfiniteScrolling)&&t.isNullOrUndefined(n)?u.focusVirtualElement(r):(t.isNullOrUndefined(n)||i(document.activeElement,"e-flmenu-valuediv")!==n.querySelector(".e-flmenu-valuediv"))&&u.currentInfo.elementToFocus.focus()}},0)},n.prototype.focus=function(n){this.parent.notify(ow,n);this.removeFocus();this.addFocus(this.getContent().getFocusInfo(),n)},n.prototype.removeFocus=function(){if(this.currentInfo.element){if(this.parent.isReact&&!this.parent.isEdit&&this.currentInfo.element.classList.contains("e-rowcell")&&!this.currentInfo.element.parentElement&&(!this.parent.allowGrouping||t.isNullOrUndefined(this.parent.groupSettings.columns)||!this.parent.groupSettings.columns.length)&&this.parent.getRowByIndex(this.prevIndexes.rowIndex)){var n=this.parent.getCellFromIndex(this.prevIndexes.rowIndex,this.prevIndexes.cellIndex);this.currentInfo.element=n||this.currentInfo.element}t.removeClass([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]);this.currentInfo.element.tabIndex=-1}},n.prototype.addOutline=function(){var n=this.getContent().getFocusInfo();n.element&&(t.addClass([n.element],["e-focused"]),t.addClass([n.elementToFocus],["e-focus"]))},n.prototype.focusHeader=function(){this.setActive(!1);this.resetFocus()},n.prototype.focusContent=function(){this.setActive(!0);this.resetFocus()},n.prototype.resetFocus=function(){var n=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(n[0],n[1]);this.focus()},n.prototype.addFocus=function(n,i){var r;if((this.currentInfo=n,this.currentInfo.outline=n.outline&&(!t.isNullOrUndefined(i)||this.isVirtualScroll),this.isInfiniteScroll&&(this.currentInfo.outline=!0),n.element)&&(r=n.elementToFocus.classList.contains("e-focus"),!r)){this.currentInfo.outline&&t.addClass([n.element],["e-focused"]);t.addClass([n.elementToFocus],["e-focus"]);n.element.tabIndex=0;r||this.setFocusedElement(n.elementToFocus,i);this.parent.notify(ss,{element:n.elementToFocus,parent:n.element,indexes:this.getContent().matrix.current,byKey:!t.isNullOrUndefined(i),byClick:t.isNullOrUndefined(i),keyArgs:i,isJump:this.swap.swap,container:this.getContent().getInfo(i),outline:!t.isNullOrUndefined(i),swapInfo:this.swap});var u=this.getContent().matrix.current,e=u[0],f=u[1];this.prevIndexes={rowIndex:e,cellIndex:f};this.focusedColumnUid=this.parent.getColumnByIndex(f).uid;this.focusByClick=!1}},n.prototype.refreshMatrix=function(n){var i=this;return function(r){var h,c,w,b,k,d,g,l,e,nt,it,rt,o,s,a,y;n&&!i.content&&(i.content=new ait(i.parent));n||i.header||(i.header=new bst(i.parent));var u=n?i.content:i.header,f=i.parent.frozenRows,p=0;if(f&&"Batch"===i.parent.editSettings.mode&&(p=i.parent.getHeaderContent().querySelectorAll(".e-insertedrow").length+i.parent.getHeaderContent().querySelectorAll(".e-hiddenrow").length),!t.isNullOrUndefined(i.parent.groupSettings.columns)&&i.parent.groupSettings.columns.length&&f&&n){for(f=0,h=0;h<r.rows.length&&(f++,r.rows[parseInt(h.toString(),10)].index+1!==i.parent.frozenRows);h++);i.groupedFrozenRow=f}if(c=n?r.rows.slice(f+p):r.rows,w=n?r.rows.slice(0,f+p):r.rows,i.parent.isCollapseStateEnabled()&&n&&(c=c.filter(function(n){return!1!==n.visible})),b=!t.isNullOrUndefined(i.parent.rowTemplate),f&&("Batch"===i.parent.editSettings.mode&&n&&("batchDelete"===r.name||"batchAdd"===r.name||"batchCancel"===r.name||r.args&&"batchsave"===r.args.requestType)||r.args&&("delete"===r.args.requestType||"save"===r.args.requestType))&&(k=i.header.matrix.matrix,d=i.parent.headerModule.rows.length,k.splice(d,k.length-d)),g=u.matrix.generate(w,u.selector,b),u.matrix.generate(c,u.selector,b),l=i.parent.enableVirtualization||i.parent.enableInfiniteScrolling,i.parent.editSettings.showAddNewRow&&n&&i.header&&i.header.matrix&&(!l||l&&i.parent.isAddNewRow)&&(e=i.header.matrix.matrix,nt=i.parent.allowFiltering&&"FilterBar"===i.parent.filterSettings.type?2:1,u.matrix.rows=i.parent.frozenRows&&"Top"===i.parent.editSettings.newRowPosition?u.matrix.rows:++u.matrix.rows,"Top"===i.parent.editSettings.newRowPosition?(i.parent.frozenRows||l?g:u.matrix.matrix).unshift(i.refreshAddNewRowMatrix(e[e.length-nt])):u.matrix.matrix.push(i.refreshAddNewRowMatrix(e[e.length-nt])),i.parent.isAddNewRow=!1),(!i.parent.isFrozenGrid()||!r.args||"sorting"!==r.args.requestType&&"batchsave"!==r.args.requestType&&"paging"!==r.args.requestType||f&&"Batch"===i.parent.editSettings.mode&&n&&("batchDelete"===r.name||"batchAdd"===r.name||"batchCancel"===r.name||"batchsave"===r.args.requestType))&&u.generateRows(w,{matrix:g,handlerInstance:i.header}),!t.Browser.isDevice&&r&&r.args&&(i.focusByClick||"paging"!==r.args.requestType||i.parent.pagerModule.pagerObj.checkPagerHasFocus()||(i.skipFocus=!1,i.parent.element.focus()),"grouping"===r.args.requestType&&(i.skipFocus=!0)),r&&r.args&&"virtualscroll"===r.args.requestType){if(i.currentInfo.uid){if(rt=r.rows.some(function(n,t){return it=t,n.uid===i.currentInfo.uid}),rt&&(i.content.matrix.current[0]=it,i.content.matrix.current[1]=i.parent.getColumnIndexByUid(i.focusedColumnUid)||0,o=i.parent.getVisibleFrozenLeftCount(),s=i.parent.getVisibleFrozenRightCount(),!i.parent.enableColumnVirtualization||o&&s||!i.parent.isFrozenGrid()||"right"!==r.args.virtualInfo.direction||(i.content.matrix.current[1]=i.content.matrix.current[1]-(o+(s?s+1:0))),a=!(!i.parent.allowGrouping||!i.parent.groupSettings.columns.length),a&&(i.content.matrix.current[1]=i.prevIndexes.cellIndex,i.virtualSelectionInfo.isPending&&(i.content.matrix.current[0]="downArrow"===i.virtualSelectionInfo.direction?i.content.matrix.current[0]+1:i.content.matrix.current[0]-1)),y=i.getContent().getFocusInfo().elementToFocus)){var v=y.getBoundingClientRect(),ut=i.parent.element.getBoundingClientRect(),ft=0,tt=0;!i.parent.enableColumnVirtualization||o&&s||!i.parent.isFrozenGrid()||"right"!==r.args.virtualInfo.direction||(o?ft=i.parent.leftrightColumnWidth("left"):tt=i.parent.leftrightColumnWidth("right"));(v.top>=0&&v.left>=0&&v.right-ft-tt<=Math.min(ut.right,window.innerWidth||document.documentElement.clientWidth)+tt&&v.bottom<=Math.min(ut.bottom,window.innerHeight||document.documentElement.clientHeight)||a)&&(i.isVirtualScroll=!0,i.focus(a&&i.virtualSelectionInfo.isPending?i.virtualSelectionInfo.event:void 0))}}else r.args.focusElement&&r.args.focusElement.classList.contains("e-filtertext")&&(y=i.parent.element.querySelector("#"+r.args.focusElement.id))&&y.focus();i.virtualSelectionInfo={}}r&&r.args&&"infiniteScroll"===r.args.requestType&&(i.isInfiniteScroll=!0)}},n.prototype.refreshAddNewRowMatrix=function(n){for(var r=this.parent.getColumns(),i=this.parent.getIndentCount(),t=i;t<n.length-1;t++)n[parseInt(t.toString(),10)]=r[t-i]&&r[t-i].visible&&r[t-i].allowEditing?1:0;return n},n.prototype.addEventListener=function(){var n=this;this.parent.isDestroyed||(t.EventHandler.add(this.parent.element,"mousedown",this.focusCheck,this),t.EventHandler.add(this.parent.element,"touchstart",this.focusCheck,this),t.EventHandler.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(t){return n.passiveFocus(t)},!0),t.EventHandler.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:rt,handler:this.onKeyPress},{event:kt,handler:this.onClick},{event:k,handler:this.refMatrix},{event:gl,handler:this.refMatrix},{event:gr,handler:this.refMatrix},{event:hr,handler:this.showAddNewRowFocus},{event:bt,handler:this.refreshMatrix()},{event:eo,handler:this.restoreFocus},{event:uu,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"custom-filter-close",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:gc,handler:this.refMatrix},{event:yf,handler:this.refMatrix},{event:nl,handler:this.refMatrix},{event:fs,handler:this.refMatrix},{event:ai,handler:this.refMatrix},{event:ss,handler:this.internalCellFocus}],yt(this.parent,this.evtHandlers,!0,this))},n.prototype.showAddNewRowFocus=function(){var i,n,r,t;this.parent.editSettings.showAddNewRow&&(i="Top"===this.parent.editSettings.newRowPosition?0:this.content.matrix.matrix.length-1,n=this.parent.getIndentCount(),"Top"===this.parent.editSettings.newRowPosition&&(this.parent.frozenRows||this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)?(r=this.header.matrix.matrix.length-(this.groupedFrozenRow?this.groupedFrozenRow:this.parent.frozenRows),n=this.findNextCellFocus(this.header.matrix.matrix[r-1],n),this.header.matrix.current=[r-1,n],this.active=this.header):(n=this.findNextCellFocus(this.content.matrix.matrix[parseInt(i.toString(),10)],n),this.content.matrix.current=[i,n],this.active=this.content),t=this.parent.element.querySelector(".e-addedrow"),t&&t.querySelectorAll("tr")&&t.querySelector("tr").cells[parseInt(n.toString(),10)].querySelector("input")&&t.querySelector("tr").cells[parseInt(n.toString(),10)].querySelector("input").select())},n.prototype.findNextCellFocus=function(n,t){for(var i=t;i<n.length;i++)if(1===n[parseInt(i.toString(),10)])return i;return t},n.prototype.filterfocus=function(){"FilterBar"!==this.parent.filterSettings.type&&(this.removeFocus(),this.restoreFocus())},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(t.EventHandler.remove(this.parent.element,"mousedown",this.focusCheck),t.EventHandler.remove(this.parent.element,"touchstart",this.focusCheck),t.EventHandler.remove(this.parent.element,"focus",this.onFocus),t.EventHandler.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),yt(this.parent,this.evtHandlers,!1))},n.prototype.destroy=function(){this.removeEventListener()},n.prototype.restoreFocus=function(n){var i,r;if(!n||"sorting"!==n.requestType||!t.isNullOrUndefined(n.target)){if(i=this.parent.groupModule,this.parent.allowGrouping&&i&&(i.groupSortFocus||i.groupTextFocus))return i.groupSortFocus=!1,void(i.groupTextFocus=!1);this.firstHeaderCellClick=!0;this.addFocus(this.getContent().getFocusInfo());r=this.getContent().getFocusInfo();n&&["add","save","delete","cancel","batchsave","batchDelete","batchCancel"].indexOf(n.requestType)>-1&&r&&r.elementToFocus&&r.elementToFocus.matches(".e-rowcell.e-focus")&&t.addClass([r.elementToFocus],["e-focused","e-focus"])}},n.prototype.restoreFocusWithAction=function(n){var f,i,r,u;if(!(this.parent.enableInfiniteScrolling||this.parent.groupModule&&this.parent.groupModule.preventFocusOnGroup)){f=this.getContent().matrix;i=f.current;switch(n.requestType){case"grouping":case"ungrouping":i[1]=!i.length||this.parent.groupSettings.showGroupedColumn||t.isNullOrUndefined(f.matrix[i[0]])?"grouping"===n.requestType?i[1]+1:i[1]-1:f.matrix[i[0]].indexOf(1)}if(this.getContent().matrix.current=i,this.prevIndexes={rowIndex:i[0],cellIndex:i[1]},r=this.parent.groupModule,this.parent.allowGrouping&&r&&r.groupCancelFocus)return u=r.getFocusableGroupedItems(),u.length?u[0].parentElement.getAttribute("data-mappingname")===n.columnName?u[3].focus():u[0].focus():r.element.focus(),void(r.groupCancelFocus=!1);this.addFocus(this.getContent().getFocusInfo())}},n.prototype.clearIndicator=function(){this.currentInfo.element&&this.currentInfo.elementToFocus&&t.removeClass([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},n.prototype.getPrevIndexes=function(){var n=this.forget;return this.forget=!1,n||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},n.prototype.forgetPrevious=function(){this.forget=!0},n.prototype.setActiveByKey=function(n,t){var i,r,u;0!==this.parent.frozenRows&&(r={home:function(){return{toHeader:!i.isContent,toFrozen:!0}},end:function(){return{toHeader:!i.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:!1}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}},n in r&&(i=t.getInfo(),u=r[""+n](),this.setActive(!u.toHeader),this.getContent().matrix.current=t.matrix.current))},n.prototype.internalCellFocus=function(n){var t;n.byKey&&n.container.isContent&&("enter"===n.keyArgs.action&&n.parent.classList.contains("e-detailcell")||("tab"===n.keyArgs.action||"shiftTab"===n.keyArgs.action)&&n.parent.classList.contains("e-unboundcell"))&&(this.clearIndicator(),t=n.parent&&n.parent.closest(".e-unboundcell")&&"shiftTab"===n.keyArgs.action?this.commandColumnFocusElement(n.parent,!0):this.getContent().getFocusable(this.getFocusedElement()),this.setFocusedElement(t),this.currentInfo.skipAction=!0)},n.prototype.commandColumnFocusElement=function(n,t){var i=n.querySelectorAll("button:not(.e-hide)");return t?i[i.length-1]:i[0]},n}(),wst=function(){function n(){this.matrix=[];this.current=[]}return n.prototype.set=function(n,t,i){n=Math.max(0,Math.min(n,this.rows));t=Math.max(0,Math.min(t,this.columns));this.matrix[parseInt(n.toString(),10)]=this.matrix[parseInt(n.toString(),10)]||[];this.matrix[parseInt(n.toString(),10)][parseInt(t.toString(),10)]=i?1:0},n.prototype.get=function(n,i,r,u,f,e){var o=i,c,s,l,v,y,a,h;if(n+r[0]<0)return[n,i];if(n=Math.max(0,Math.min(n+r[0],this.rows)),c=!0,t.isNullOrUndefined(this.matrix[parseInt(n.toString(),10)]))return null;if(i=Math.max(0,Math.min(i+r[1],this.matrix[parseInt(n.toString(),10)].length-1)),o+r[1]>this.matrix[parseInt(n.toString(),10)].length-1&&f(n,i,u))return[n,o];if(s=this.first(this.matrix[parseInt(n.toString(),10)],i,r,!0,u),i=null===s?o:s,v=t.getValue(n+"."+i,this.matrix),(n!==this.rows||"downArrow"!==u&&"enter"!==u||(r[0]=-1),e)&&(y=this.getRowsFromIndex(n,e),l=t.getValue(n+".cells."+i,y)),l&&0===l.getBoundingClientRect().width&&(a=this.nextVisibleCellFocus(n,i,u,r,e,o),n=a[0],i=a[1]),null===s){for(h=0;h<this.rows;h++)if(this.matrix[parseInt(h.toString(),10)].some(function(n){return 1===n})){c=!1;break}if(c)return[n=this.current.length?this.current[0]:0,i]}return this.inValid(v)||!f(n,i,u)?this.get(n,o,r,u,f):[n,i]},n.prototype.getRowsFromIndex=function(n,t){return t.getTable().rows[parseInt(n.toString(),10)].classList.contains("e-addedrow")?t.getTable().rows[parseInt(n.toString(),10)].querySelector("table").rows:t.getTable().rows},n.prototype.nextVisibleCellFocus=function(n,i,r,u,f,e){var s=this.getRowsFromIndex(n,f),h=t.getValue(n+".cells."+i,s),o=f.matrix.matrix,a=o.length-1,c="tab"===r,l="shiftTab"===r;if("enter"===r||"shiftEnter"===r||"downArrow"===r||"upArrow"===r)return[n,i];for(;h&&0===h.getBoundingClientRect().width;){if(c&&n===a&&i===o[parseInt(n.toString(),10)].lastIndexOf(1)||l&&0===n&&i===o[parseInt(n.toString(),10)].indexOf(1))return[n,i=e];c?i===o[parseInt(n.toString(),10)].lastIndexOf(1)?(n++,i=o[parseInt(n.toString(),10)].indexOf(1),i=this.first(this.matrix[parseInt(n.toString(),10)],i,u,!0,r),s=this.getRowsFromIndex(n,f)):(i++,i=this.first(this.matrix[parseInt(n.toString(),10)],i,u,!0,r)):l?i===o[parseInt(n.toString(),10)].indexOf(1)?(n--,i=o[parseInt(n.toString(),10)].lastIndexOf(1),i=this.first(this.matrix[parseInt(n.toString(),10)],i,u,!0,r),s=this.getRowsFromIndex(n,f)):(i--,i=this.first(this.matrix[parseInt(n.toString(),10)],i,u,!0,r)):"rightArrow"===r||"shiftRight"===r?i===o[parseInt(n.toString(),10)].lastIndexOf(1)?i=e:(i++,i=this.first(this.matrix[parseInt(n.toString(),10)],i,u,!0,r)):"leftArrow"===r||"shiftLeft"===r?i===o[parseInt(n.toString(),10)].indexOf(1)?i=e:(i--,i=this.first(this.matrix[parseInt(n.toString(),10)],i,u,!0,r)):null===r&&(i++,i=this.first(this.matrix[parseInt(n.toString(),10)],i,u,!0,r));h=t.getValue(n+".cells."+i,s)}return[n,i]},n.prototype.first=function(n,t,i,r,u){return(t<0||t===n.length)&&this.inValid(n[parseInt(t.toString(),10)])&&"upArrow"!==u&&"downArrow"!==u||!n.some(function(n){return 1===n})?null:this.inValid(n[parseInt(t.toString(),10)])?this.first(n,-1!==["upArrow","downArrow","shiftUp","shiftDown","enter","shiftEnter"].indexOf(u)?r?0:++t:t+i[1],i,!1,u):t},n.prototype.select=function(n,t){n=Math.max(0,Math.min(n,this.rows));t=Math.max(0,Math.min(t,this.matrix[parseInt(n.toString(),10)].length-1));this.current=[n,t]},n.prototype.generate=function(n,t,i){var u,f,e,r;for(this.rows=n.length-1,this.matrix=[],u=0;u<n.length;u++){for(f=n[parseInt(u.toString(),10)].cells.filter(function(n){return!0!==n.isSpanned}),this.columns=Math.max(f.length-1,0|this.columns),e=0,r=0;r<f.length;r++)f[parseInt(r.toString(),10)].column&&f[parseInt(r.toString(),10)].column.columns?e=this.columnsCount(f[parseInt(r.toString(),10)].column.columns,e):e++,this.set(u,r,!1!==n[parseInt(u.toString(),10)].visible&&t(n[parseInt(u.toString(),10)],f[parseInt(r.toString(),10)],i));this.columns=Math.max(e-1,0|this.columns)}return this.matrix},n.prototype.columnsCount=function(n,t){for(var u=n,i=t,r=0;r<u.length;r++)u[parseInt(r.toString(),10)].columns?i=this.columnsCount(u[parseInt(r.toString(),10)].columns,i):i++;return i},n.prototype.inValid=function(n){return 0===n||void 0===n},n}(),ait=function(){function n(n){var t=this;this.matrix=new wst;this.lastIdxCell=!1;this.parent=n;this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]};this.indexesByKey=function(n){return{home:[t.matrix.current[0],-1,0,1],end:[t.matrix.current[0],t.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[t.matrix.rows,t.matrix.columns+1,0,-1]}[""+n]||null}}return n.prototype.getTable=function(){return this.parent.getContentTable()},n.prototype.onKeyPress=function(n){if(/(Mac)/i.test(navigator.platform)&&n.metaKey)if("home"===n.action)n.action="ctrlHome";else if("end"===n.action)n.action="ctrlEnd";else if(-1!==["downArrow","upArrow","leftArrow","rightArrow"].indexOf(n.action))return;var i=this.keyActions[n.action],t=this.getCurrentFromAction(n.action,i,n.action in this.keyActions,n);if(t){if((["tab","shiftTab"].indexOf(n.action)>-1&&this.matrix.current||[]).toString()===t.toString()||this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.matrix.current[0]===this.matrix.rows&&("Batch"===this.parent.editSettings.mode&&this.parent.editSettings.allowAdding&&40===n.keyCode||40===n.keyCode)){if(t.toString()===[this.matrix.rows,this.matrix.columns].toString()||t.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===t.toString()||this.parent.allowGrouping&&this.parent.infiniteScrollSettings.enableCache&&t.toString()===[0,1].toString())return!1;t=this.editNextRow(t[0],t[1],n.action)}this.matrix.select(t[0],t[1])}},n.prototype.editNextRow=function(n,t,i){var r=this.parent,e=r.editSettings.allowNextRowEdit&&(r.isEdit||r.isLastCellPrimaryKey),o=r.getColumnIndexByField(r.getVisibleColumns()[0].field),f=this.getTable().rows[parseInt(n.toString(),10)],u=r.editSettings.showAddNewRow&&f.classList.contains("e-addedrow")?f.querySelectorAll("td:not(.e-editcell)")[parseInt(t.toString(),10)]:f.cells[parseInt(t.toString(),10)];return"tab"===i&&e&&(n++,t=o+(this.getTable().rows[parseInt(n.toString(),10)].getElementsByClassName("e-indentcell").length+this.getTable().rows[parseInt(n.toString(),10)].getElementsByClassName("e-detailrowcollapse").length)),"shiftTab"===i&&e&&(n--,t=r.getColumnIndexByField(r.getVisibleColumns()[r.getVisibleColumns().length-1].field)),u.classList.contains(v)||u.classList.contains("e-headercell")||u.classList.contains("e-groupcaption")||u.classList.contains("e-filterbarcell")?[n,t]:this.editNextRow(n,t,i)},n.prototype.getCurrentFromAction=function(n,i,r,u){var s,c,f;if(void 0===i&&(i=[0,0]),!r&&!this.indexesByKey(n)||0===this.matrix.current.length)return null;if(!this.shouldFocusChange(u))return this.matrix.current;var h=this.indexesByKey(n)||this.matrix.current.concat(i),e=h[0],o=h[1],l=h[2],a=h[3];if(this.parent.allowGrouping&&!t.isNullOrUndefined(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&"enter"===n)for(s=e;s<this.matrix.matrix.length;s++){if(c=this.getTable().rows[s+1],c&&c.cells[parseInt(o.toString(),10)]&&c.cells[parseInt(o.toString(),10)].classList.contains("e-rowcell"))return[s+1,o];if(s===this.matrix.matrix.length-1)return[e,o]}return("ctrlEnd"===n||"end"===n)&&(f=[this.matrix.matrix.length-1,this.matrix.matrix[this.matrix.matrix.length-1].length-1],"end"===n&&(f=[e,this.matrix.matrix[parseInt(e.toString(),10)].length-1]),0===this.matrix.matrix[f[0]][f[1]]&&(f=fr(this.matrix.matrix,f,!1)),e=f[0],o=f[1]+1),this.matrix.get(e,o,[l,a],n,this.validator(),this)},n.prototype.checkRowCellFocus=function(n){return!n.classList.contains(v)||n.classList.contains("e-focused")},n.prototype.onClick=function(n,r){var u=n.target,f;if(this.target=u,u=(u=u.classList.contains(v)?u:t.closest(u,"td"))||t.closest(n.target,"td.e-detailrowcollapse")||t.closest(n.target,"td.e-detailrowexpand"),!(u=(u=t.closest(n.target,"td.e-detailcell")&&t.isNullOrUndefined(t.closest(t.closest(n.target,".e-grid"),"td.e-detailcell"))?null:u)&&t.closest(u,"table").classList.contains(yi)?u:null))return!1;f=u.parentElement.rowIndex;this.parent.editSettings.showAddNewRow&&i(u,"e-addedrow")&&(f=i(u,"e-addedrow").rowIndex);var s=[f,u.cellIndex],e=s[0],o=s[1],h=this.matrix.current,c=h[0],l=h[1],a=t.getValue(e+"."+o,this.matrix.matrix);if(this.matrix.inValid(a)||!r&&c===e&&l===o&&this.checkRowCellFocus(u)||!i(n.target,v)&&!i(n.target,"e-groupcaption")&&!i(n.target,"e-recordpluscollapse")&&!i(n.target,"e-recordplusexpand")&&!i(n.target,"e-detailrowcollapse")&&!i(n.target,"e-detailrowexpand")&&!i(n.target,"e-templatecell"))return!1;this.matrix.select(e,o)},n.prototype.getFocusInfo=function(){var n={},f=this.matrix.current,e=f[0],o=void 0===e?0:e,s=f[1],u=void 0===s?0:s,r;return this.matrix.current=[o,u],r=this.getTable().rows[parseInt(o.toString(),10)],n.element=t.isNullOrUndefined(r)?null:this.parent.editSettings.showAddNewRow&&r.classList.contains("e-addedrow")?r.querySelectorAll("td:not(.e-editcell)")[parseInt(u.toString(),10)]:r.cells[parseInt(u.toString(),10)],n.element?(n.elementToFocus=n.element.classList.contains("e-unboundcell")&&!(this.parent.editSettings.showAddNewRow&&n.element.classList.contains("e-unboundcell")&&i(n.element,"e-addedrow"))||n.element.classList.contains("e-detailcell")?n.element:this.getFocusable(n.element),n.elementToFocus=n.element.classList.contains("e-detailcell")&&n.element.querySelector(".e-childgrid")?n.element.querySelector(".e-childgrid"):n.elementToFocus,"Batch"===this.parent.editSettings.mode&&this.parent.isEdit&&"input"===n.elementToFocus.tagName.toLowerCase()&&n.elementToFocus.classList.contains("e-dropdownlist")&&(n.elementToFocus=n.elementToFocus.parentElement),n.outline=!0,n.uid=n.element.parentElement.getAttribute("data-uid"),n):n},n.prototype.getFocusable=function(n){var e='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',o=!t.isNullOrUndefined(t.closest(n,".e-templatecell")),u,r,f;if(this.parent.isEdit&&(e='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea'+(this.parent.editSettings.showAddNewRow&&i(n,"e-addedrow")?", button:not(.e-hide)":"")),u=[].slice.call(n.querySelectorAll(e)),n.classList.contains("e-fltrtemp")){if(r=[].slice.call(n.querySelectorAll(".e-fltrtemp-focus")),"click"===this.focusType&&this.target&&this.target.classList.contains("e-fltrtemp-focus"))return this.target;if("key"===this.focusType&&r.length&&("tab"===this.action||"shiftTab"===this.action))return f=r.indexOf(this.currentTarget),-1===f?r["tab"===this.action?0:r.length-1]:r["tab"===this.action?f+1:f-1]}return u.length?!(o&&u.length>1)||"Batch"===this.parent.editSettings.mode&&this.parent.isEdit&&this.target?u[0]:this.target?this.target:n:n},n.prototype.selector=function(n,i,r){var u=[e.Expand,e.GroupCaption,e.CaptionSummary,e.GroupSummary];return(n.isDataRow&&i.visible&&(i.isDataCell||i.isTemplate)||n.isDataRow&&i.cellType===e.DetailExpand&&t.isNullOrUndefined(i.visible)||!n.isDataRow&&u.indexOf(i.cellType)>-1&&!!(i.cellType!==e.GroupSummary&&i.cellType!==e.CaptionSummary||i.isDataCell&&i.visible)||i.column&&i.visible&&"checkbox"===i.column.type||i.cellType===e.CommandColumn||n.isDataRow&&r)&&!("delete"===n.edit&&n.isDirty)},n.prototype.nextRowFocusValidate=function(n){for(var i=n,t=n,r=this.matrix.rows;t<=r;t++){if(-1!==this.matrix.matrix[parseInt(n.toString(),10)].indexOf(1))return n;n+=1}return this.lastIdxCell=!0,i},n.prototype.previousRowFocusValidate=function(n){for(var t=n,i=n;i>=0;i--){if(-1!==this.matrix.matrix[parseInt(n.toString(),10)].indexOf(1))return n;if((n-=1)<0)return this.lastIdxCell=!0,t}return t},n.prototype.jump=function(n,r){var f,o,e,u;return this.lastIdxCell=!1,f=0!==this.parent.frozenRows&&"shiftEnter"===n,o=("upArrow"===n||f)&&0===r[0],this.matrix.matrix[r[0]]&&"tab"===n&&this.matrix.matrix.length&&r[1]===this.matrix.matrix[r[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==r[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1),"shiftTab"===n&&0!==r[0]&&this.matrix.matrix[r[0]].indexOf(1)===r[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[r[0]].length),e=!1,u=i(document.activeElement,"e-addedrow")&&this.parent.editSettings.showAddNewRow?i(document.activeElement,"e-addedrow"):document.activeElement.parentElement,(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&!t.isNullOrUndefined(u)&&u.classList.contains(y)&&(e=parseInt(u.getAttribute(c),10)-1>0),{swap:!e&&("upArrow"===n||f)&&0===r[0],toHeader:o}},n.prototype.getNextCurrent=function(n,t,i,r){void 0===n&&(n=[]);var u=[];return"rightArrow"!==r&&"tab"!==r||(u[0]=n[0],u[1]=-1),"downArrow"!==r&&"enter"!==r||(u[0]=-1,u[1]=n[1]),u},n.prototype.generateRows=function(n,t){var r,u=t.matrix,i=t.handlerInstance,f=i.matrix.matrix.length,e=this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type?f+1:f;i.matrix.matrix=i.matrix.matrix.slice(0,e);i.matrix.rows=e;(r=i.matrix.matrix).push.apply(r,u);i.matrix.rows+=u.length},n.prototype.getInfo=function(n){var t=this.getFocusInfo(),u=this.matrix.current,f=u[0],e=u[1],r=t.element.classList.contains(v),h=r||n&&"enter"!==n.action&&(t.element.classList.contains("e-detailrowcollapse")||t.element.classList.contains("e-detailrowexpand")),o=[Math.min(parseInt(t.element.parentElement.getAttribute(c),10)-1,f),Math.min(parseInt(t.element.getAttribute(ft),10)-1,e)],i=o[0],s=o[1];return this.parent.allowGrouping&&this.parent.groupSettings.enableLazyLoading&&r&&(i=this.parent.getDataRows().indexOf(t.element.parentElement)),this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&(i=f,s=e),this.parent.editSettings.showAddNewRow&&"Top"===this.parent.editSettings.newRowPosition&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&n&&"downArrow"===n.action&&i++,{isContent:!0,isDataCell:r,indexes:[i,s],isSelectable:h}},n.prototype.validator=function(){var n=this.getTable();return function(i,r,u){var f,e;if(!t.isNullOrUndefined(n.rows[parseInt(i.toString(),10)])){if(f=void 0,r=n.querySelector(".e-emptyrow")?0:r,e=0!==(f=n.rows[parseInt(i.toString(),10)].cells[0].classList.contains("e-editcell")?n.rows[parseInt(i.toString(),10)].cells[0].querySelectorAll("td")[parseInt(r.toString(),10)]:n.rows[parseInt(i.toString(),10)].cells[parseInt(r.toString(),10)]).getBoundingClientRect().width,"enter"===u||"shiftEnter"===u)return e&&f.classList.contains(v);if(("shiftUp"===u||"shiftDown"===u)&&f.classList.contains(v)||"shiftUp"!==u&&"shiftDown"!==u)return e}return!1}},n.prototype.shouldFocusChange=function(n){var r=this.matrix.current,u=r[0],f=void 0===u?-1:u,e=r[1],o=void 0===e?-1:e,i;return f<0||o<0?!0:(i=t.getValue(f+".cells."+o,this.getTable().rows),!i||"enter"!==n.action&&"shiftEnter"!==n.action||i.classList.contains(v)&&!i.classList.contains("e-unboundcell")||i.classList.contains("e-editedbatchcell")&&!i.classList.contains("e-detailcell"))},n.prototype.getGridSeletion=function(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection},n}(),bst=function(n){function r(t){return n.call(this,t)||this}return yst(r,n),r.prototype.getTable=function(){return this.parent.getHeaderTable()},r.prototype.onClick=function(n){var r,u;if(this.focusType="click",r=n.target,this.target=r,!(r=r.classList.contains("e-headercell")?r:t.closest(r,"th"))&&(0!==this.parent.frozenRows||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow)&&(r=n.target.classList.contains(v)?n.target:t.closest(n.target,"td")),n.target.classList.contains("e-columnheader")||n.target.querySelector(".e-stackedheadercell"))return!1;if(r){u=r.parentElement.rowIndex;this.parent.editSettings.showAddNewRow&&i(r,"e-addedrow")&&(u=i(r,"e-addedrow").rowIndex);var f=[u,r.cellIndex],e=f[0],o=f[1],s=t.getValue(e+"."+o,this.matrix.matrix);if(this.matrix.inValid(s))return!1;this.matrix.select(u,r.cellIndex)}},r.prototype.getFocusInfo=function(){var n={},r=this.matrix.current,u=r[0],o=void 0===u?0:u,f=r[1],e=void 0===f?0:f,i=this.getTable().rows[parseInt(o.toString(),10)];return n.element=t.isNullOrUndefined(i)?null:this.parent.editSettings.showAddNewRow&&i.classList.contains("e-addedrow")?i.querySelectorAll("td:not(.e-editcell)")[parseInt(e.toString(),10)]:i.cells[parseInt(e.toString(),10)],t.isNullOrUndefined(n.element)||(n.elementToFocus=this.getFocusable(n.element),n.outline=!n.element.classList.contains("e-filterbarcell")),n},r.prototype.selector=function(n,i){return i.visible&&(void 0!==i.column.field||i.isTemplate||!t.isNullOrUndefined(i.column.template)||!t.isNullOrUndefined(i.column.commands)||"checkbox"===i.column.type)||i.cellType===e.StackedHeader},r.prototype.jump=function(n,t){var r,i,u=0!==this.parent.frozenRows&&"enter"===n;return this.parent.enableHeaderFocus&&"tab"===n&&(i=this.matrix.matrix.length-1===t[0],(r=t[1]===this.matrix.matrix[t[0]].lastIndexOf(1))&&(this.matrix.current[0]=i?0:this.matrix.current[0]+1,this.matrix.current[1]=-1)),{swap:("downArrow"===n||u)&&t[0]===this.matrix.matrix.length-1||"tab"===n&&i&&r}},r.prototype.getNextCurrent=function(n,t,i,r){void 0===n&&(n=[]);var u=[];return("rightArrow"===r||"shiftRight"===r&&this.getGridSeletion()||"tab"===r)&&(u[0]=n[0],u[1]=-1),"upArrow"!==r&&"shiftEnter"!==r||(u[0]=this.matrix.matrix.length,u[1]=n[1]),u},r.prototype.generateRows=function(n){var u=this.matrix.matrix.length;if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type){this.matrix.rows=++this.matrix.rows;for(var i=n[0].cells,r=0,t=0;t<i.length;t++)i[parseInt(t.toString(),10)].column&&i[parseInt(t.toString(),10)].column.columns?r=this.checkFilterColumn(i[parseInt(t.toString(),10)].column.columns,u,r):(this.matrix.set(u,r,i[parseInt(t.toString(),10)].visible&&!1!==i[parseInt(t.toString(),10)].column.allowFiltering),r++)}},r.prototype.checkFilterColumn=function(n,t,i){for(var u=n,f=i,r=0;r<u.length;r++)u[parseInt(r.toString(),10)].columns?f=this.checkFilterColumn(u[parseInt(r.toString(),10)].columns,t,f):(this.matrix.set(t,f,u[parseInt(r.toString(),10)].visible&&!1!==u[parseInt(r.toString(),10)].allowFiltering),f++);return f},r.prototype.getInfo=function(i){return t.extend(n.prototype.getInfo.call(this,i),{isContent:!1,isHeader:!0})},r.prototype.validator=function(){return function(){return!0}},r.prototype.shouldFocusChange=function(n){var r=this.matrix.current,u=r[0],f=r[1],i;return u<0||f<0?!0:(i=t.getValue(u+".cells."+f,this.getTable().rows),!i||"enter"!==n.action&&"altDownArrow"!==n.action||!i.classList.contains("e-headercell"))},r.prototype.getHeaderType=function(){return"HeaderFocus"},r}(ait),vit=function(){function n(n,t){this.searchBox=n;this.serviceLocator=t;this.l10n=this.serviceLocator.getService("localization")}return n.prototype.searchFocus=function(n){if(n.target.parentElement.classList.add("e-input-focus"),n.target.classList.contains("e-input")&&n.target.classList.contains("e-search")&&n.target.value){var t=n.target.parentElement.querySelector(".e-sicon");t.classList.add("e-clear-icon");t.setAttribute("title",this.l10n.getConstant("Clear"));t.style.cursor="pointer"}},n.prototype.searchBlur=function(n){var i=n.relatedTarget?n.relatedTarget:null,r;(i&&i.classList.contains("e-sicon")?i.classList.contains("e-clear-icon")&&n.target.parentElement.classList.remove("e-input-focus"):n.target.parentElement.classList.remove("e-input-focus"),n.target.classList.contains("e-search")&&(i&&!i.classList.contains("e-sicon e-clear-icon")&&!i.classList.contains("e-sicon")||t.isNullOrUndefined(i)))&&(r=n.target.parentElement.querySelector(".e-sicon"),r.classList.remove("e-clear-icon"),r.removeAttribute("title"),r.style.cursor="default")},n.prototype.wireEvent=function(){this.searchBox&&(t.EventHandler.add(this.searchBox,"focus",this.searchFocus,this),t.EventHandler.add(this.searchBox,"blur",this.searchBlur,this))},n.prototype.unWireEvent=function(){this.searchBox&&(t.EventHandler.remove(this.searchBox,"focus",this.searchFocus),t.EventHandler.remove(this.searchBox,"blur",this.searchBlur))},n}(),kst=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fe=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},dst=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return kst(i,n),fe([t.Property(12)],i.prototype,"pageSize",void 0),fe([t.Property(8)],i.prototype,"pageCount",void 0),fe([t.Property(1)],i.prototype,"currentPage",void 0),fe([t.Property()],i.prototype,"totalRecordsCount",void 0),fe([t.Property(!1)],i.prototype,"enableQueryString",void 0),fe([t.Property(!1)],i.prototype,"pageSizes",void 0),fe([t.Property(null)],i.prototype,"template",void 0),i}(t.ChildProperty),gst=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ee=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},nht=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return gst(i,n),ee([t.Property("startsWith")],i.prototype,"operator",void 0),ee([t.Property(!1)],i.prototype,"ignoreAccent",void 0),ee([t.Property(null)],i.prototype,"headerTemplate",void 0),ee([t.Property(null)],i.prototype,"template",void 0),ee([t.Property(null)],i.prototype,"footerTemplate",void 0),ee([t.Property(!0)],i.prototype,"enableSearching",void 0),ee([t.Property(null)],i.prototype,"renderCustomColumnChooser",void 0),i}(t.ChildProperty),yit=function(){function n(n,t,i){this.selectedRowIndexes=[];this.selectedRowCellIndexes=[];this.selectedRecords=[];this.preventFocus=!1;this.selectedColumnsIndexes=[];this.checkBoxState=!1;this.isMultiShiftRequest=!1;this.isMultiCtrlRequest=!1;this.isMultiCtrlRequestCell=!1;this.enableSelectMultiTouch=!1;this.clearRowCheck=!1;this.selectRowCheck=!1;this.selectedRowState={};this.unSelectedRowState={};this.totalRecordsCount=0;this.chkAllCollec=[];this.isCheckedOnAdd=!1;this.persistSelectedData=[];this.virtualSelectedData=[];this.deSelectedData=[];this.isHdrSelectAllClicked=!1;this.needColumnSelection=!1;this.isCancelDeSelect=!1;this.isPreventCellSelect=!1;this.disableUI=!1;this.isPersisted=!1;this.cmdKeyPressed=!1;this.cellselected=!1;this.isMultiSelection=!1;this.isAddRowsToSelection=!1;this.initialRowSelection=!1;this.isPrevRowSelection=!1;this.isKeyAction=!1;this.isRowDragSelected=!1;this.isPartialSelection=!1;this.rmtHdrChkbxClicked=!1;this.isCheckboxReset=!1;this.isRowDeselect=!1;this.autoFillRLselection=!0;this.isFocusLastCell=!1;this.bottom="0 0 2px 0";this.top="2px 0 0 0";this.right_bottom="0 2px 2px 0";this.bottom_left="0 0 2px 2px";this.top_right="2px 2px 0 0";this.top_left="2px 0 0 2px";this.top_bottom="2px 0 2px 0";this.top_right_bottom="2px 2px 2px 0";this.top_bottom_left="2px 0 2px 2px";this.top_right_left="2px 2px 0 2px";this.right_bottom_left="0 2px 2px 2px";this.all_border="2px";this.parent=n;this.selectionSettings=t;this.factory=i.getService("rendererFactory");this.focus=i.getService("focus");this.addEventListener();this.wireEvents()}return n.prototype.initializeSelection=function(){this.parent.log("selection_key_missing");this.render()},n.prototype.onActionBegin=function(n,t){this.parent.trigger(t,this.fDataUpdate(n))},n.prototype.fDataUpdate=function(n){if(!(this.isMultiSelection||t.isNullOrUndefined(n.cellIndex)&&t.isNullOrUndefined(n.rowIndex))){var i=this.getRowObj(t.isNullOrUndefined(n.rowIndex)?t.isNullOrUndefined(n.cellIndex)?this.currentIndex:n.cellIndex.rowIndex:n.rowIndex);n.foreignKeyData=i.foreignKeyData}return n},n.prototype.onActionComplete=function(n,t){this.parent.trigger(t,this.fDataUpdate(n));this.isMultiSelection=!1},n.prototype.getModuleName=function(){return"selection"},n.prototype.destroy=function(){var n=this.parent.element;n&&(n.querySelector("."+st)||n.querySelector("."+it))&&(this.hidePopUp(),this.clearSelection(),this.destroyAutoFillElements(),this.removeEventListener(),this.unWireEvents(),t.EventHandler.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),t.EventHandler.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},n.prototype.isEditing=function(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.editSettings.showAddNewRow&&!this.parent.isPersistSelection},n.prototype.getCurrentBatchRecordChanges=function(){var t=this.parent,n,i;if("Batch"===t.editSettings.mode&&t.editModule){n=lo(this.parent.getCurrentViewRecords());n="Bottom"===t.editSettings.newRowPosition?n.concat(this.parent.editModule.getBatchChanges()[lr]):this.parent.editModule.getBatchChanges()[lr].concat(n);for(var u=this.parent.editModule.getBatchChanges()[ne],f=this.parent.getPrimaryKeyFieldNames()[0],r=0;r<u.length;r++)for(i=0;i<n.length;i++)if(u[parseInt(r.toString(),10)][""+f]===n[parseInt(i.toString(),10)][""+f]){n.splice(i,1);break}return n}return this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&!this.parent.isPersistSelection?t.getCurrentViewRecords().filter(function(n){return void 0===n.key}):t.getCurrentViewRecords()},n.prototype.selectRow=function(n,t){var f,o,s,e,h,c,l,a;if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection)this.addRowsToSelection([n]);else{var u=this.parent,i=u.getRowByIndex(n),r=i&&u.getRowObjectFromUID(i.getAttribute("data-uid"));if(!(this.isPartialSelection&&r&&r.isDataRow)||r.isSelectable){if(o=!1,u.enableVirtualization&&n>-1){if(s={selectedIndex:n,isAvailable:!0},this.parent.notify(uw,s),!i||!u.getRowObjectFromUID(i.getAttribute("data-uid")))return void(s.isAvailable&&!u.selectionSettings.persistSelection&&this.parent.getSelectedRecords().length>0&&this.clearRowSelection());f=u.getRowObjectFromUID(i.getAttribute("data-uid")).data}else f=this.getRowObj(n).data;if(this.isRowType()&&i&&!this.isEditing())if(h=i.hasAttribute("aria-selected"),(this.activeTarget(),t&&this.selectedRowIndexes.length)?(c="ResetOnRowClick"===this.selectionSettings.checkboxMode,l=!this.parent.isCheckBoxSelection&&"Multiple"===this.selectionSettings.type,t=!((c||l)&&(1!==this.selectedRowIndexes.length||!c&&!l)||this.isKeyAction&&this.parent.isCheckBoxSelection||-1===this.selectedRowIndexes.indexOf(n))):t=!1,this.isKeyAction=!1,a="cancel",t){if("ResetOnRowClick"!==this.selectionSettings.checkboxMode&&this.selectionSettings.persistSelection){if(this.rowDeselect(bc,[r.index],[r.data],[i],[r.foreignKeyData],this.actualTarget),this.isCancelDeSelect)return;this.parent.isCheckBoxSelection||(this.selectedRowIndexes=[],this.selectedRecords=[],this.isRowSelected=!1,this.selectRowIndex(-1));this.rowDeselect(pe,[r.index],[r.data],[i],[r.foreignKeyData],this.actualTarget,void 0,void 0,void 0)}this.rowSelectingCallBack(e,t,n,f,o,h,a)(e)}else e={data:f,rowIndex:n,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:i,previousRow:u.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},this.parent.trigger(wc,this.fDataUpdate(e),this.rowSelectingCallBack(e,t,n,f,o,h,a))}}},n.prototype.rowSelectingCallBack=function(n,i,r,u,f,e,o){var s=this;return function(n){t.isNullOrUndefined(n)||!0!==n[""+o]?(s.index=r,s.toggle=i,s.data=u,s.removed=f,e&&s.selectionSettings.persistSelection&&"ResetOnRowClick"!==s.selectionSettings.checkboxMode?(s.clearSelectedRow(r),s.selectRowCallBack()):!e&&s.selectionSettings.persistSelection&&s.parent.isCheckBoxSelection&&"ResetOnRowClick"!==s.selectionSettings.checkboxMode&&s.selectRowCallBack(),"ResetOnRowClick"===s.selectionSettings.checkboxMode&&(s.isCheckboxReset=!0,s.clearSelection()),(!s.selectionSettings.persistSelection||"ResetOnRowClick"===s.selectionSettings.checkboxMode||!s.parent.isCheckBoxSelection&&s.selectionSettings.persistSelection)&&(s.selectRowCheck=!0,s.clearRow())):s.disableInteracted()}},n.prototype.selectRowCallBack=function(){var t,i=this.parent,n=this.index,r=this.toggle,f=this.data,e=this.removed,u=i.getRowByIndex(n);r||e||(this.selectedRowIndexes.indexOf(n)<=-1&&this.updateRowSelection(u,n),this.selectRowIndex(n));r||(t={data:f,rowIndex:n,row:u,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked,rowIndexes:n},this.onActionComplete(t,lf));this.isInteracted=!1;this.updateRowProps(n)},n.prototype.selectRowsByRange=function(n,t){this.selectRows(this.getCollectionFromIndexes(n,t));this.selectRowIndex(t)},n.prototype.selectedDataUpdate=function(n,t,i,r,u){for(var o,e,f=0,s=r.length;f<s;f++)o=this.parent.getDataRows()[r[parseInt(f.toString(),10)]],this.parent.enableVirtualization&&(o=this.parent.getRowByIndex(r[parseInt(f.toString(),10)])),e=this.getRowObj(o),e&&e.isDataRow&&e.isSelectable?(n.push(e.data),i.push(o),t.push(e.foreignKeyData)):this.isPartialSelection&&u&&u.splice(u.indexOf(r[parseInt(f.toString(),10)]),1)},n.prototype.selectRows=function(n){var i=this,u=this.parent,r=n.slice(),f=this.isSingleSel()?n[n.length-1]:n[0],h;this.isMultiSelection=!0;var e=[],o=[],s=[];this.isRowType()&&!this.isEditing()&&(this.selectedDataUpdate(s,o,e,n,r),this.activeTarget(),h={cancel:!1,rowIndexes:r,row:e,rowIndex:f,target:this.actualTarget,prevRow:u.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:s,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:o},this.parent.trigger(wc,this.fDataUpdate(h),function(n){var l,c,a,s,y,h,v;if(t.isNullOrUndefined(n)||!0!==n.cancel){if(i.selectionSettings.persistSelection&&u.allowRowDragAndDrop&&i.isDragged||i.clearRow(),i.selectRowIndex(r.slice(-1)[0]),l=function(n,t){i.updateRowSelection(u.getRowByIndex(n),n,t);i.updateRowProps(f)},i.isSingleSel())l(f);else for(c=0,a=r;c<a.length;c++)l(a[c],!!u.enableVirtualization);if(i.checkVirtualCheckBox()&&!i.parent.isPersistSelection)if(r.length===i.totalRecordsCount)i.virtualSelectedData=i.virtualCheckBoxData().slice(),i.selectedRowIndexes=Object.keys(i.virtualSelectedData).map(function(n){return parseInt(n,10)}),i.setCheckAllState();else if(s=r.filter(function(n){return-1===i.selectedRowIndexes.indexOf(n)}),s.length>0){for(y=i.virtualCheckBoxData().slice(),h=0;h<s.length;h++)v=y[s[h]],t.isNullOrUndefined(v)||(i.virtualSelectedData.push(v),i.selectedRowIndexes.push(s[h]));i.setCheckAllState()}n={rowIndexes:r,row:e,rowIndex:f,target:i.actualTarget,prevRow:u.getRows()[i.prevRowIndex],previousRowIndex:i.prevRowIndex,data:i.getSelectedRecords(),isInteracted:i.isInteracted,isHeaderCheckboxClicked:i.isHeaderCheckboxClicked,foreignKeyData:o};i.isRowSelected&&i.onActionComplete(n,lf);i.isInteracted=!1}else i.disableInteracted()}))},n.prototype.addRowsToSelection=function(n){var e=this.parent,y=this.target,f,a,c,v;this.isMultiSelection=!0;var o=[],s=[],h=[],l=e.getSelectedRowIndexes().concat(n),u=this.isSingleSel()?e.getRowByIndex(n[n.length-1]):e.getRowByIndex(n[0]);if(this.isRowType()&&!this.isEditing()||this.selectionSettings.checkboxOnly)for(a=this.parent.getColumns().filter(function(n){return"checkbox"===n.type}),this.isMultiCtrlRequest&&!a.length&&this.selectedDataUpdate(h,s,o,l),c=0,v=n;c<v.length;c++){var r=v[c],i=this.getRowObj(r),p=this.selectedRowIndexes.indexOf(r)>-1;if(!(this.isPartialSelection&&i&&i.isDataRow)||i.isSelectable){if(this.selectRowIndex(r),p&&(a.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(bc,[r],[i.data],[u],[i.foreignKeyData],y),this.isCancelDeSelect)return;this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&this.virtualSelectedData.splice(this.virtualSelectedData.indexOf(i.data),1);this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(r),1);this.selectedRecords.splice(this.selectedRecords.indexOf(u),1);this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1);u.removeAttribute("aria-selected");this.addRemoveClassesForRow(u,!1,null,"e-selectionbackground","e-active");this.rowDeselect(pe,[r],[i.data],[u],[i.foreignKeyData],y,void 0,void 0,void 0);this.isInteracted=!1;this.isMultiSelection=!1;this.isAddRowsToSelection=!1;this.isHdrSelectAllClicked=!1}else{if(this.activeTarget(),f={cancel:!1,data:h.length?h:i.data,rowIndex:r,row:o.length?o:u,target:this.actualTarget,prevRow:e.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:s.length?s:i.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.parent.trigger(wc,this.fDataUpdate(f)),!t.isNullOrUndefined(f)&&!0===f.cancel)return void this.disableInteracted();this.isSingleSel()&&this.clearRow();this.updateRowSelection(u,r)}if(p||(f={data:h.length?h:i.data,rowIndex:r,row:o.length?o:u,target:this.actualTarget,prevRow:e.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:s.length?s:i.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.onActionComplete(f,lf)),this.isInteracted=!1,this.updateRowProps(r),this.isSingleSel())break}}},n.prototype.getCollectionFromIndexes=function(n,t){for(var i=[],u=n<=t?{i:n,max:t}:{i:t,max:n},r=u.i,f=u.max;r<=f;r++)i.push(r);return n>t&&i.reverse(),i},n.prototype.clearRow=function(){this.clearRowCheck=!0;this.clearRowSelection()},n.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&"Check"!==this.parent.checkAllRows||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},n.prototype.clearSelectedRow=function(n){if(this.toggle){var t=this.parent.getRowByIndex(n);this.disableUI||(t.removeAttribute("aria-selected"),this.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active"));this.removed=!0;this.updatePersistCollection(t,!1);this.updateCheckBoxes(t);this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(n),1);this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(n)),1)}},n.prototype.updateRowProps=function(n){this.prevRowIndex=n;this.isRowSelected=this.selectedRowIndexes.length&&!0},n.prototype.getPkValue=function(n,t){return n&&gi(n)?d(n,t):t[""+n]},n.prototype.updatePersistCollection=function(n,i){var f=this,r,u;if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!t.isNullOrUndefined(n)){if(this.parent.isPersistSelection||this.ensureCheckboxFieldSelection(),r=this.getRowObj(n),u=r.data?this.getPkValue(this.primaryKey,r.data):null,null===u)return;r.isSelected=i;i&&!this.isPartialSelection||this.isPartialSelection&&r.isSelectable&&r.isSelected?(this.selectedRowState[""+u]=i,delete this.unSelectedRowState[""+u],this.persistSelectedData.some(function(n){return f.getPkValue(f.primaryKey,n)===u})||this.persistSelectedData.push(r.data)):this.updatePersistDelete(u)}},n.prototype.updatePersistDelete=function(n,t){var i,r=this;delete this.selectedRowState[""+n];this.rmtHdrChkbxClicked&&(this.unSelectedRowState[""+n]=!0);this.persistSelectedData.some(function(t,u){return i=u,r.getPkValue(r.primaryKey,t)===n})&&(this.persistSelectedData.splice(i,1),t&&this.parent.partialSelectedRecords.splice(i,1))},n.prototype.updateCheckBoxes=function(n,i,r){if(!t.isNullOrUndefined(n)){var u=n.querySelector(".e-checkselect");t.isNullOrUndefined(u)||(yo(u.nextElementSibling,i),ur(u,i),(t.isNullOrUndefined(this.checkedTarget)||!t.isNullOrUndefined(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(r))}},n.prototype.updateRowSelection=function(n,t,i){var r,u;if(n&&(-1===this.selectedRowIndexes.indexOf(t)&&(this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&this.virtualSelectedData.push(this.parent.getRowObjectFromUID(n.getAttribute("data-uid")).data),this.selectedRowIndexes.push(t),this.selectedRecords.push(n)),n.setAttribute("aria-selected","true"),this.updatePersistCollection(n,!0),this.updateCheckBoxes(n,!0),this.addRemoveClassesForRow(n,!0,null,"e-selectionbackground","e-active"),!this.preventFocus||this.parent.isFocusFirstCell||this.isFocusLastCell)){if(r=this.focus.getPrevIndexes().cellIndex?n.cells[this.focus.getPrevIndexes().cellIndex]:n.querySelector(".e-selectionbackground:not(.e-hide, .e-detailrowcollapse, .e-detailrowexpand, .e-rowdragdrop)"),(this.parent.contextMenuModule&&2===this.mouseButton&&(r=this.parent.contextMenuModule.cell),this.parent.isFocusFirstCell||this.isFocusLastCell)&&(this.parent.isFocusFirstCell=!1,u=this.isFocusLastCell?"last-child":"first-child",r=n.querySelector(".e-selectionbackground.e-rowcell:not(.e-hide, .e-detailrowcollapse, .e-detailrowexpand, .e-rowdragdrop, .e-gridchkbox):"+u),this.isFocusLastCell=!1),!r||i)return;this.focus.onClick({target:r},!0,!(this.parent.contextMenuModule&&2===this.mouseButton))}},n.prototype.clearSelection=function(){var u,r,n;if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=lo(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!t.isNullOrUndefined(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){if(u=this.parent.element.querySelector(".e-gridpopup").querySelector("span"),u.classList.contains("e-rowselect")&&u.classList.remove("e-spanclicked"),this.parent.isPersistSelection)for(this.persistSelectedData=[],this.selectedRowState={},this.parent.partialSelectedRecords=[],this.parent.disableSelectedRecords=[],r=this.parent.getRowsObject(),n=0;n<r.length;n++)r[n].isDataRow&&(r[n].isSelectable?this.parent.partialSelectedRecords.push(r[n].data):this.parent.disableSelectedRecords.push(r[n].data));this.clearRowSelection();this.clearCellSelection();this.clearColumnSelection();this.prevRowIndex=void 0;this.prevCIdxs=void 0;this.prevECIdxs=void 0;this.enableSelectMultiTouch=!1;"ResetOnRowClick"===this.selectionSettings.checkboxMode&&this.target&&i(this.target,"e-rowcell")||(this.isInteracted=!1);this.checkSelectAllClicked=!1;this.isHdrSelectAllClicked=!1}},n.prototype.clearRowSelection=function(){var n=this,t,h,o,i;if(this.isRowSelected){var c=this.parent.getDataRows(),r=[],u=[],f=[],e=[],s=this.target;for(this.isRowDeselect=!0,t=0,h=this.selectedRowIndexes.length;t<h;t++)o=this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache?this.parent.getRowByIndex(this.selectedRowIndexes[parseInt(t.toString(),10)]):"Batch"===this.parent.editSettings.mode?this.parent.getRows()[this.selectedRowIndexes[parseInt(t.toString(),10)]]:this.parent.getDataRows()[this.selectedRowIndexes[parseInt(t.toString(),10)]],i=this.getRowObj(o),i&&(r.push(i.data),u.push(o),f.push(this.selectedRowIndexes[parseInt(t.toString(),10)]),e.push(i.foreignKeyData));this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&(this.isRowClicked=!!this.checkSelectAllClicked);this.rowDeselect(bc,f,r,u,e,s,null,function(){var o,t,i;if(n.isCancelDeSelect&&(n.isRowClicked||n.checkSelectAllClicked||n.isInteracted&&!n.parent.isPersistSelection)){if(n.parent.isPersistSelection)if("Intermediate"===n.getCheckAllStatus(n.parent.element.querySelector(".e-checkselectall"))||n.parent.isPersistSelection)for(o=0;o<n.selectedRecords.length;o++)n.updatePersistCollection(n.selectedRecords[parseInt(o.toString(),10)],!0);else n.parent.checkAllRows="Check",n.updatePersistSelectedData(!0);n.clearRowCheck&&(n.clearRowCallBack(),n.clearRowCheck=!1,n.selectRowCheck&&(n.selectRowCallBack(),n.selectRowCheck=!1))}else{for(t=[].slice.call(c.filter(function(n){return n.hasAttribute("aria-selected")})),i=0;i<t.length;i++)n.disableUI||(t[parseInt(i.toString(),10)].removeAttribute("aria-selected"),n.addRemoveClassesForRow(t[parseInt(i.toString(),10)],!1,!0,"e-selectionbackground","e-active")),n.isPrevRowSelection||n.updatePersistCollection(t[parseInt(i.toString(),10)],!1),n.updateCheckBoxes(t[parseInt(i.toString(),10)]);!(n.parent.enableVirtualization||n.parent.enableInfiniteScrolling&&n.parent.infiniteScrollSettings.enableCache)||!n.selectedRecords.length||t.length||n.parent.selectionSettings.persistSelection||n.disableUI||n.parent.isCheckBoxSelection||n.addRemoveClassesForRow(null,!1,!0);n.virtualSelectedData=[];n.selectedRowIndexes=[];n.selectedRecords=[];n.isRowSelected=!1;n.selectRowIndex(-1);n.isPrevRowSelection=!1;n.rowDeselect(pe,f,r,u,e,s,null,void 0,null);n.clearRowCheck&&(n.clearRowCallBack(),n.clearRowCheck=!1,n.selectRowCheck&&(n.selectRowCallBack(),n.selectRowCheck=!1))}},null);this.isRowDeselect=!1}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},n.prototype.rowDeselect=function(n,i,r,u,f,e,o,s){var c=this,a,h;if(this.selectionSettings.persistSelection&&(this.isRowClicked||!this.isRowDeselect||this.checkSelectAllClicked||this.focus.activeKey&&this.focus.currentInfo.element.classList.contains("e-gridchkbox")&&"space"===this.focus.activeKey)||!this.selectionSettings.persistSelection){a=1===i.length&&1===this.deSelectedData.length;h={rowIndex:i[0],data:this.selectionSettings.persistSelection&&"Uncheck"===this.parent.checkAllRows&&!a&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode?this.deSelectedData:r,foreignKeyData:f,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};"rowDeselected"===n&&delete h.cancel;var l="row",v="rowIndexes",y="data",p="foreignKeyData";h[""+l]=u;h.target=this.actualTarget;this.actualTarget&&!t.isNullOrUndefined(t.closest(this.actualTarget,"thead"))||i.length>1?(h.rowIndex=i[0],h[""+v]=i):1===i.length&&(h[""+y]=h[""+y][0],h[""+l]=h[""+l][0],h[""+p]=h[""+p][0],this.isAddRowsToSelection&&(h[""+v]=i));this.parent.trigger(n,h,function(n){c.isCancelDeSelect=n.cancel;c.isCancelDeSelect&&(c.isRowClicked||c.isInteracted||c.checkSelectAllClicked)||(c.updatePersistCollection(u[0],!1),c.updateCheckBoxes(u[0],void 0,i[0]));void 0!==s&&s()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&void 0!==s&&s()},n.prototype.getRowObj=function(n){return void 0===n&&(n=this.currentIndex),t.isNullOrUndefined(n)?{}:("number"==typeof n&&(n=this.parent.getRowByIndex(n)),n&&this.parent.getRowObjectFromUID(n.getAttribute("data-uid"))||{})},n.prototype.selectCell=function(n,i){var r,u,f,e;!this.isCellType()||this.isCellType()&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache)||(u=this.parent.getCellFromIndex(n.rowIndex,this.getColIndex(n.rowIndex,n.cellIndex)),this.currentIndex=n.rowIndex,f=this.getCurrentBatchRecordChanges()[this.currentIndex],this.isCellType()&&u&&!this.isEditing()&&(e=u.classList.contains("e-cellselectionbackground"),(i=i?!t.isUndefined(this.prevCIdxs)&&n.rowIndex===this.prevCIdxs.rowIndex&&n.cellIndex===this.prevCIdxs.cellIndex&&e:i)?this.successCallBack(r,i,n,u,f)(r):((r={data:f,cellIndex:n,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1}).currentCell=u,r.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(we,this.fDataUpdate(r),this.successCallBack(r,i,n,u,f)),this.cellselected=!0)))},n.prototype.successCallBack=function(n,i,r,u,f){var e=this;return function(n){var o="currentCell",s;(t.isNullOrUndefined(n)||!0!==n.cancel)&&(i||(n[""+o]=n[""+o]?n[""+o]:u),e.clearCell(),i||e.updateCellSelection(u,r.rowIndex,r.cellIndex),!i)&&(s={data:f,cellIndex:r,currentCell:u,selectedRowCellIndex:e.selectedRowCellIndexes,previousRowCell:e.prevECIdxs?e.getCellIndex(e.prevECIdxs.rowIndex,e.prevECIdxs.cellIndex):void 0},s.previousRowCellIndex=e.prevECIdxs,e.updateCellProps(r,r),e.onActionComplete(s,us))}},n.prototype.getCellIndex=function(n,t){return this.parent.getCellFromIndex(n,t)},n.prototype.selectCellsByRange=function(n,i){var r=this,c,l;if(this.isCellType()){var u,f,h,e=this.parent,o=this.parent.isSpan?hy(this.parent,n.rowIndex,n.cellIndex):e.getCellFromIndex(n.rowIndex,n.cellIndex),a=n,s=i=i||n;this.currentIndex=n.rowIndex;c=this.getCurrentBatchRecordChanges()[this.currentIndex];this.isSingleSel()||!this.isCellType()||this.isEditing()||(l={data:c,cellIndex:n,currentCell:o,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},l.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(we,this.fDataUpdate(l),function(l){var w,v,y,b,p;if(t.isNullOrUndefined(l)||!0!==l.cancel){for((r.clearCell(),n.rowIndex>i.rowIndex)&&(w=n,n=i,i=w),v=n.rowIndex;v<=i.rowIndex;v++){for(r.selectionSettings.cellSelectionMode.indexOf("Box")<0?(u=v===n.rowIndex?n.cellIndex:0,f=v===i.rowIndex?i.cellIndex:r.getLastColIndex(v)):(u=n.cellIndex,f=i.cellIndex),h=[],y=u<f?u:f,b=u>f?u:f;y<=b;y++)(o=r.parent.isSpan?hy(e,v,y):e.getCellFromIndex(v,y))&&(h.push(y),r.updateCellSelection(o),r.addAttribute(o));r.selectedRowCellIndexes.push({rowIndex:v,cellIndexes:h})}p={data:c,cellIndex:s,currentCell:e.getCellFromIndex(s.rowIndex,s.cellIndex),selectedRowCellIndex:r.selectedRowCellIndexes,previousRowCell:r.prevECIdxs?r.getCellIndex(r.prevECIdxs.rowIndex,r.prevECIdxs.cellIndex):void 0};p.previousRowCellIndex=r.prevECIdxs;r.isDragged||(r.onActionComplete(p,us),r.cellselected=!0);r.updateCellProps(a,s)}}))}},n.prototype.selectCells=function(n){var u,i,f,e,t,s,r,h,o;if(this.isCellType()&&(u=this.parent,i=u.getCellFromIndex(n[0].rowIndex,n[0].cellIndexes[0]),this.currentIndex=n[0].rowIndex,f=this.getCurrentBatchRecordChanges()[this.currentIndex],!this.isSingleSel()&&this.isCellType()&&!this.isEditing())){for(e={data:f,cellIndex:n[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},e.previousRowCellIndex=this.prevECIdxs,this.onActionBegin(e,we),t=0,s=n.length;t<s;t++)for(r=0,h=n[parseInt(t.toString(),10)].cellIndexes.length;r<h;r++)(i=u.getCellFromIndex(n[parseInt(t.toString(),10)].rowIndex,n[parseInt(t.toString(),10)].cellIndexes[parseInt(r.toString(),10)]))&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:n[parseInt(t.toString(),10)].rowIndex,cellIndex:n[parseInt(t.toString(),10)].cellIndexes[parseInt(r.toString(),10)]}));this.updateCellProps({rowIndex:n[0].rowIndex,cellIndex:n[0].cellIndexes[0]},{rowIndex:n[0].rowIndex,cellIndex:n[0].cellIndexes[0]});o={data:f,cellIndex:n[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};o.previousRowCellIndex=this.prevECIdxs;this.onActionComplete(o,us)}},n.prototype.addCellsToSelection=function(n){var r,s,u,e,h,y,f,p,a,o,w;if(!(!this.isCellType()||this.isCellType()&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache))&&(u=this.parent,this.currentIndex=n[0].rowIndex,e=this.getCurrentBatchRecordChanges()[this.currentIndex],!this.isSingleSel()&&this.isCellType()&&!this.isEditing())){this.hideAutoFill();h=u.getRowsObject()[n[0].rowIndex];u.groupSettings.columns.length>0&&(h=u.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));for(var c=[],v=0,b=n;v<b.length;v++){for(var i=b[v],l=0,k=this.selectedRowCellIndexes.length;l<k;l++)if(this.selectedRowCellIndexes[parseInt(l.toString(),10)].rowIndex===i.rowIndex){s=l;break}if(r=u.getCellFromIndex(i.rowIndex,this.getColIndex(i.rowIndex,i.cellIndex)),y=i.cellIndex,u.groupSettings.columns.length>0?c.push(h.cells[y+u.groupSettings.columns.length].foreignKeyData):c.push(h.cells[parseInt(y.toString(),10)].foreignKeyData),f={cancel:!1,data:e,cellIndex:n[0],isShiftPressed:this.isMultiShiftRequest,currentCell:r,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?u.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},p="previousRowCellIndex",f[""+p]=this.prevECIdxs,a=s>-1,a)o=this.selectedRowCellIndexes[parseInt(s.toString(),10)].cellIndexes,o.indexOf(i.cellIndex)>-1||"Both"===this.selectionSettings.mode&&r.classList.contains("e-gridchkbox")&&!r.getAttribute("aria-selected")?(this.cellDeselect(ky,[{rowIndex:i.rowIndex,cellIndexes:[i.cellIndex]}],e,[r],c),o.splice(o.indexOf(i.cellIndex),1),0===o.length&&this.selectedRowCellIndexes.splice(s,1),r.classList.remove("e-cellselectionbackground"),r.removeAttribute("aria-selected"),this.cellDeselect(dy,[{rowIndex:i.rowIndex,cellIndexes:[i.cellIndex]}],e,[r],c)):(a=!1,this.onActionBegin(f,we),this.addRowCellIndex({rowIndex:i.rowIndex,cellIndex:i.cellIndex}),this.updateCellSelection(r),this.addAttribute(r));else{if(this.onActionBegin(f,we),!t.isNullOrUndefined(f)&&!0===f.cancel)return;this.updateCellSelection(r,i.rowIndex,i.cellIndex)}a||(w={data:e,cellIndex:n[0],currentCell:r,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes},w[""+p]=this.prevECIdxs,this.onActionComplete(w,us),this.cellselected=!0);this.updateCellProps(i,i)}}},n.prototype.getColIndex=function(n,t){var r,i;if(this.parent.getColumnByIndex(t),r=ik(this.parent,0,n),r)for(i=0;i<r.length;i++)if(parseInt(r[parseInt(i.toString(),10)].getAttribute(ft),10)-1===t)return i;return-1},n.prototype.getLastColIndex=function(n){var t=this.parent.getDataRows()[parseInt(n.toString(),10)].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute(ft),10)-1},n.prototype.clearCell=function(){this.clearCellSelection()},n.prototype.cellDeselect=function(n,i,r,u,f){var e,s,o,h;if(u&&u.length>0)for(e=0,s=u;e<s.length;e++)o=s[e],o&&o.classList.contains(rf)&&this.updateCheckBoxes(t.closest(o,"tr"));h={cells:u,data:r,cellIndexes:i,foreignKeyData:f,cancel:!1};this.parent.trigger(n,h);this.isPreventCellSelect=h.cancel},n.prototype.updateCellSelection=function(n,i,r){t.isNullOrUndefined(i)||this.addRowCellIndex({rowIndex:i,cellIndex:r});n.classList.add("e-cellselectionbackground");n.classList.contains(rf)&&this.updateCheckBoxes(t.closest(n,"tr"),!0);this.addAttribute(n)},n.prototype.addAttribute=function(n){this.target=n;t.isNullOrUndefined(n)||(n.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:n},!0,!0))},n.prototype.updateCellProps=function(n,t){this.prevCIdxs=n;this.prevECIdxs=t;this.isCellSelected=this.selectedRowCellIndexes.length&&!0},n.prototype.addRowCellIndex=function(n){for(var r,i,t=0,u=this.selectedRowCellIndexes.length;t<u;t++)if(this.selectedRowCellIndexes[parseInt(t.toString(),10)].rowIndex===n.rowIndex){r=!0;i=t;break}r?this.selectedRowCellIndexes[parseInt(i.toString(),10)].cellIndexes.indexOf(n.cellIndex)<0&&this.selectedRowCellIndexes[parseInt(i.toString(),10)].cellIndexes.push(n.cellIndex):this.selectedRowCellIndexes.push({rowIndex:n.rowIndex,cellIndexes:[n.cellIndex]})},n.prototype.clearCellSelection=function(){var n,i;if(this.isCellSelected){var h=this.parent,u=this.getSelectedCellsElement(),t=this.selectedRowCellIndexes,f=[],e=[],o=[],c=this.getCurrentBatchRecordChanges();for(this.hideAutoFill(),n=0,i=t.length;n<i;n++){f.push(c[t[parseInt(n.toString(),10)].rowIndex]);for(var s=this.getRowObj(t[parseInt(n.toString(),10)].rowIndex),r=0,l=t[parseInt(n.toString(),10)].cellIndexes.length;r<l;r++)s.cells&&o.push(s.cells[t[parseInt(n.toString(),10)].cellIndexes[parseInt(r.toString(),10)]].foreignKeyData),e.push(h.getCellFromIndex(t[parseInt(n.toString(),10)].rowIndex,t[parseInt(n.toString(),10)].cellIndexes[parseInt(r.toString(),10)]))}if(this.cellDeselect(ky,t,f,e,o),!0===this.isPreventCellSelect)return;for(n=0,i=u.length;n<i;n++)u[parseInt(n.toString(),10)].classList.remove("e-cellselectionbackground"),u[parseInt(n.toString(),10)].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none");this.selectedRowCellIndexes=[];this.isCellSelected=!1;!this.isDragged&&this.cellselected&&this.cellDeselect(dy,t,f,e,o)}},n.prototype.getSelectedCellsElement=function(){for(var i=this.parent.getDataRows(),n=[],t=0,r=i.length;t<r;t++)n=n.concat([].slice.call(i[parseInt(t.toString(),10)].getElementsByClassName("e-cellselectionbackground")));return n},n.prototype.mouseMoveHandler=function(n){var h,a;n.preventDefault();this.stopTimer();var f,y=this.parent.element.getBoundingClientRect(),r=this.x,u=this.y,l=cu(n),e=l.x-y.left,o=l.y-y.top,s=t.closest(n.target,"tr");(this.isDragged=!0,this.isCellDrag||(s||(s=t.closest(document.elementFromPoint(this.parent.element.offsetLeft+2,n.clientY),"tr")),r>e&&(f=e,e=r,r=f),u>o&&(f=o,o=u,u=f),this.element.style.left=r+"px",this.element.style.top=u+"px",this.element.style.width=e-r+"px",this.element.style.height=o-u+"px"),!s||n.ctrlKey||n.shiftKey)||(h=parseInt(s.getAttribute(c),10)-1,this.isCellDrag?(a=i(n.target,v),a&&(this.startAFCell=this.startCell,this.endAFCell=i(n.target,v),h>-1&&this.selectLikeExcel(n,h,parseInt(a.getAttribute(ft),10)-1))):(this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,h),this.isRowDragSelected=!0));n.ctrlKey||n.shiftKey||this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||this.parent.enableColumnVirtualization||this.parent.groupSettings.columns.length||!this.isCellDrag||this.updateScrollPosition(n,l,this.parent.getContent())},n.prototype.updateScrollPosition=function(n,t,i){var r=this,u=i.getBoundingClientRect();u.left>=t.x-20-(this.parent.enableRtl&&"auto"!==this.parent.height?oi():0)?this.timer1=window.setInterval(function(){r.setScrollPosition(i.firstElementChild,r.parent.enableRtl?"right":"left",n)},200):u.left+i.clientWidth-20-(this.parent.enableRtl||"auto"===this.parent.height?0:oi())<t.x&&(this.timer1=window.setInterval(function(){r.setScrollPosition(i.firstElementChild,r.parent.enableRtl?"left":"right",n)},200));u.top>=t.y-.5*this.parent.getRowHeight()?this.timer2=window.setInterval(function(){r.setScrollPosition(i.firstElementChild,"up",n)},200):u.top+i.clientHeight-.5*this.parent.getRowHeight()-(i.firstElementChild.scrollWidth>i.firstElementChild.offsetWidth?oi():0)<=t.y&&(this.timer2=window.setInterval(function(){r.setScrollPosition(i.firstElementChild,"down",n)},200))},n.prototype.stopTimer=function(){this.timer1&&(window.clearInterval(this.timer1),this.timer1=null);this.timer2&&(window.clearInterval(this.timer2),this.timer2=null);this.preventFocus=!1},n.prototype.setScrollPosition=function(n,i,r){var u=-1,f=-1,e,h,o,s;switch((this.endAFCell||this.prevECIdxs)&&(u=this.endAFCell?parseInt(this.endAFCell.getAttribute("data-index"),10):this.prevECIdxs.rowIndex,f=this.endAFCell?parseInt(this.endAFCell.getAttribute("aria-colindex"),10)-1:this.prevECIdxs.cellIndex),i){case"up":if(r&&t.closest(r.target,".e-headercontent"))return;this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(1===this.selectedRowCellIndexes.length&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes.length>1&&this.startAFCell.getBoundingClientRect().top>0)&&(u=parseInt(this.startAFCell.getAttribute("data-index"),10));u-=1;this.parent.frozenRows&&(u+=this.parent.frozenRows+1);u<1?n.scrollTop=0:n.scrollTop-=this.parent.getRowByIndex(u).offsetHeight;break;case"down":this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(u=parseInt(this.startAFCell.getAttribute("data-index"),10));u<this.parent.getRows().length-1?(u+=1,this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(u,this.selectedRowCellIndexes[0].cellIndexes[0])),n.scrollTop+=this.parent.getRowByIndex(u).offsetHeight):n.scrollTop=n.scrollHeight;break;case"left":f>0&&u>-1&&(this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes[0].cellIndexes.length>0&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes[0].cellIndexes.length>1&&(!this.parent.enableRtl&&this.startAFCell.getBoundingClientRect().left>0||this.parent.enableRtl&&this.startAFCell.getBoundingClientRect().left<this.parent.element.offsetWidth))&&(f=parseInt(this.startAFCell.getAttribute("aria-colindex"),10)-1),e=this.findNextCell(n,i,f,u),f=e?parseInt(e.getAttribute("aria-colindex"),10)-1:-1,this.parent.enableRtl&&e?f<1?n.scrollLeft=n.scrollWidth:n.scrollLeft+=e.offsetWidth:e&&(f<1?n.scrollLeft=0:n.scrollLeft-=e.offsetWidth));break;case"right":this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(f=parseInt(this.startAFCell.getAttribute("aria-colindex"),10)-1);h=this.parent.getCellFromIndex(u,f);o=this.findNextCell(n,i,f,u);o&&this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(this.selectedRowCellIndexes[0].rowIndex,parseInt(o.getAttribute("aria-colindex"),10)-1));f=o?parseInt(o.getAttribute("aria-colindex"),10)-1:-1;this.parent.enableRtl&&o?f<this.parent.columns.length-1?n.scrollLeft-=h.offsetWidth:n.scrollLeft=-n.scrollWidth:o&&(f<this.parent.columns.length-1?n.scrollLeft+=h.offsetWidth:n.scrollLeft=n.scrollWidth);this.isAutoFillSel&&(f===this.parent.columns.length-1||-1===f)&&this.startAFCell&&this.endAFCell&&(this.positionAFBorders(),n.scrollLeft=this.parent.enableRtl?-n.scrollWidth:n.scrollWidth)}if(u>-1&&u<this.parent.getRows().length&&f>-1){if(s={target:this.parent.getCellFromIndex(u,f)},this.isAutoFillSel&&s.target.classList.contains("e-cellselectionbackground")&&("down"===i&&parseInt(s.target.getAttribute("data-index"),10)===this.parent.getRows().length-1||"right"===i&&parseInt(s.target.getAttribute("aria-colindex"),10)-1==this.parent.columns.length-1))return;this.endAFCell=s.target;this.preventFocus=!0;this.selectLikeExcel(s,u,f)}},n.prototype.findNextCell=function(n,t,i,r){var u=this.parent.getCellFromIndex(r,"left"===t?i-1:i+1),f,e;return u&&u.classList.contains("e-hide")?(f=u.closest("tr").querySelectorAll(".e-rowcell:not(.e-hide)"),e=Array.from(f).indexOf(u.nextElementSibling),e>0&&e<f.length-1?u=f[e+("left"===t?-1:1)]:(n.scrollLeft=0,null)):u},n.prototype.selectLikeExcel=function(n,t,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(n)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:i}),this.drawBorders())},n.prototype.setFrozenBorders=function(n,t,r){var u=t.style.borderWidth.toString().split(" "),e=[].slice.call(n.querySelectorAll(".e-cellselectionbackground."+["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"][""+r])).filter(function(n){return""===n.style.display}),o=[].slice.call(n.querySelectorAll(".e-cellselectionbackground.e-fixedfreeze")).filter(function(n){return""===n.style.display}),s=this.parent.enableRtl,w,h,c,l;if(e.length)for(var a=e[0].getAttribute("data-index"),v=e[0].getAttribute("aria-colindex"),y=e[e.length-1].getAttribute("data-index"),p=e[e.length-1].getAttribute("aria-colindex"),f=0;f<e.length;f++)e[parseInt(f.toString(),10)].getAttribute("data-index")===a&&(1===u.length||3===u.length&&2===parseInt(u[0],10)||4===u.length&&2===parseInt(u[0],10))&&e[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),e[parseInt(f.toString(),10)].getAttribute("aria-colindex")===v&&(1===u.length||3===u.length&&2===parseInt(u[1],10)||4===u.length&&(!s&&2===parseInt(u[3],10)||s&&2===parseInt(u[1],10)))&&e[parseInt(f.toString(),10)].classList.add(s?"e-xlsel-right-border":"e-xlsel-left-border"),e[parseInt(f.toString(),10)].getAttribute("data-index")===y&&(1===u.length||3===u.length&&2===parseInt(u[2],10)||4===u.length&&2===parseInt(u[2],10))&&e[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border"),e[parseInt(f.toString(),10)].getAttribute("aria-colindex")===p&&(1===u.length||3===u.length&&2===parseInt(u[1],10)||4===u.length&&!s&&2===parseInt(u[1],10)||s&&2===parseInt(u[3],10))&&e[parseInt(f.toString(),10)].classList.add(s?"e-xlsel-left-border":"e-xlsel-right-border");if(o.length)for(a=o[0].getAttribute("data-index"),v=(parseInt(o[0].getAttribute("aria-colindex"),10)-1).toString(),y=o[o.length-1].getAttribute("data-index"),p=(parseInt(o[o.length-1].getAttribute("aria-colindex"),10)-1).toString(),f=0;f<o.length;f++)w=o[parseInt(f.toString(),10)].getAttribute("data-index"),h=(parseInt(o[parseInt(f.toString(),10)].getAttribute("aria-colindex"),10)-1).toString(),w!==a||(this.parent.getHeaderContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")||!i(n,"e-content"))&&i(n,"e-content")||o[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),w!==y||(this.parent.getContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")||!i(n,"e-headercontent"))&&i(n,"e-headercontent")||o[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border"),c=o[parseInt(f.toString(),10)].parentElement.children[parseInt(h,10)-1],h!==v||c&&(!c||c.classList.contains("e-cellselectionbackground"))||o[parseInt(f.toString(),10)].classList.add(s?"e-xlsel-right-border":"e-xlsel-left-border"),l=o[parseInt(f.toString(),10)].parentElement.children[parseInt(h,10)+1],h!==p||l&&(!l||l.classList.contains("e-cellselectionbackground"))||o[parseInt(f.toString(),10)].classList.add(s?"e-xlsel-left-border":"e-xlsel-right-border")},n.prototype.refreshFrozenBorders=function(){this.bdrElement&&(this.setFrozenBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===ir&&this.setFrozenBorders(this.parent.getContentTable(),this.frcBdrElement,"5"),this.parent.frozenRows&&(this.setFrozenBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===ir&&this.setFrozenBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6")))},n.prototype.drawBorders=function(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders())):this.showHideBorders("none")},n.prototype.isLastCell=function(n){var t=[].slice.call(n.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]===n},n.prototype.isLastRow=function(n){var i=[].slice.call(t.closest(n,h).querySelectorAll(".e-row:not(.e-hiddenrow)"));return n.parentElement===i[i.length-1]},n.prototype.isFirstRow=function(n){var i=[].slice.call(t.closest(n,h).querySelectorAll(".e-row:not(.e-hiddenrow)"));return n.parentElement===i[0]},n.prototype.isFirstCell=function(n){return[].slice.call(n.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===n},n.prototype.setBorders=function(n,t,i){var f=[].slice.call(n.getElementsByClassName("e-cellselectionbackground")).filter(function(n){return""===n.style.display});if(f.length&&this.parent.isFrozenGrid()&&(f=[].slice.call(n.querySelectorAll(".e-cellselectionbackground."+["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"][""+i]+":not(.e-hide)")).filter(function(n){return""===n.style.display})),f.length){var s=this.parent.isFrozenGrid(),r=f[0],c=f[f.length-1],u=r.getBoundingClientRect(),e=c.getBoundingClientRect(),o=r.offsetParent.getBoundingClientRect();(r.offsetParent.classList.contains("e-content")||r.offsetParent.classList.contains("e-headercontent"))&&(o=r.offsetParent.querySelector("table").getBoundingClientRect());var l=s||!this.isLastRow(c)||"1"!==i&&"2"!==i&&"5"!==i?0:2,h=s&&("2"===i||"4"===i)&&this.isFirstCell(r)?1:0,a=("Right"!==this.parent.getFrozenMode()||"1"!==i&&"3"!==i)&&(this.parent.getFrozenMode()!==ir||"5"!==i&&"6"!==i)||!this.isFirstCell(r)?0:1;this.parent.enableRtl?(t.style.right=o.right-u.right-h+"px",t.style.width=u.right-e.left+h+1+"px"):(t.style.left=u.left-o.left-h-a+"px",t.style.width=e.right-u.left+h-a+1+"px");t.style.top=u.top-o.top-0+"px";t.style.height=e.top-u.top>0?e.top-o.top+e.height+(s?0:1)-(u.top-o.top)-l+0+"px":e.height+0-l+(s?0:1)+"px";this.selectDirection+=i}else t.style.display="none"},n.prototype.positionBorders=function(){this.updateStartEndCells();this.startCell&&this.bdrElement&&this.selectedRowCellIndexes.length&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getContentTable(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===ir&&this.setBorders(this.parent.getContentTable(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getHeaderTable(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===ir&&this.setBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))},n.prototype.applyBothFrozenBorders=function(n){var t=this.parent.enableRtl;switch(n.length){case 6:this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left;this.mcBdrElement.style.borderWidth=this.bottom;this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left;this.mhBdrElement.style.borderWidth=this.top;this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom;this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right;break;case 4:n.includes("1")&&n.includes("2")&&n.includes("3")&&n.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom);n.includes("2")&&n.includes("4")&&n.includes("5")&&n.includes("6")&&(this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left;this.mcBdrElement.style.borderWidth=this.top_bottom;this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom;this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom);break;case 2:n.includes("1")&&(this.mcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left));n.includes("2")&&(this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left));n.includes("3")&&(this.mhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left);n.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left);n.includes("5")&&(this.mcBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left));n.includes("6")&&(this.mhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border;this.mcBdrElement.style.borderWidth=this.all_border;this.frcBdrElement.style.borderWidth=this.all_border;this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border)}},n.prototype.applyBorders=function(n){var t=this.parent.enableRtl;if(this.parent.getFrozenMode()===ir)this.applyBothFrozenBorders(n);else switch(n.length){case 4:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 2:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=n.includes("2")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=n.includes("1")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=n.includes("1")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=n.includes("2")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=n.includes("2")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=n.includes("1")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=n.includes("1")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=n.includes("2")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border;this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border);this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border))}},n.prototype.createBorders=function(){var n,i,r,u,f,e;this.bdrElement||(n=t.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr"}),(n.style.cssText="width: 2px; border-width: 0;",this.bdrElement=this.parent.getContentTable().parentElement.appendChild(n),this.parent.isFrozenGrid())&&(i=t.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr"}),(i.style.cssText="height: 2px; border-width: 0;",this.mcBdrElement=this.parent.getContentTable().parentElement.appendChild(i),this.parent.getFrozenMode()===ir)&&(r=t.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr"}),r.style.cssText="height: 2px; border-width: 0;",this.frcBdrElement=this.parent.getContentTable().parentElement.appendChild(r))),this.parent.frozenRows&&(u=t.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr"}),u.style.height="2px",this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(u)),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(f=t.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr"}),(f.style.height="2px",this.mhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(f),this.parent.getFrozenMode()===ir)&&(e=t.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr"}),e.style.height="2px",this.frhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(e))))},n.prototype.showHideBorders=function(n,i){if(this.bdrElement){if(this.bdrElement.style.display=n,this.parent.isFrozenGrid()){var r=this.parent.getContentTable();t.removeClass(r.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border");t.removeClass(r.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border");t.removeClass(r.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border");t.removeClass(r.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border");i||(this.mcBdrElement.style.display=n);this.parent.getFrozenMode()===ir&&(this.frcBdrElement.style.display=n)}this.parent.frozenRows&&(r=this.parent.getHeaderTable(),t.removeClass(r.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),t.removeClass(r.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),t.removeClass(r.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),t.removeClass(r.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),this.fhBdrElement.style.display=n);this.parent.frozenRows&&this.parent.isFrozenGrid()&&(i||(this.mhBdrElement.style.display=n),this.parent.getFrozenMode()===ir&&(this.frhBdrElement.style.display=n))}},n.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders();this.positionAFBorders()},n.prototype.positionAFBorders=function(){var o,c,y,l,p,w;if(this.startCell&&this.bdrAFLeft){var t=this.startAFCell.getBoundingClientRect(),n=this.endAFCell.getBoundingClientRect(),b=n.top-t.top>0?1:0,h=n.top-t.top>=0&&(i(this.startAFCell,eh)||i(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,s=(i(this.startAFCell,eh)||i(this.startAFCell,ov))&&this.isFirstCell(this.startAFCell)?1:0,a=this.isLastRow(this.endAFCell)&&(i(this.endAFCell,eh)||i(this.endAFCell,"e-frozencontent"))?2:0,v=this.startAFCell.offsetParent.getBoundingClientRect(),r=this.parent.element.getBoundingClientRect(),k=this.startAFCell.offsetParent.parentElement.scrollTop,d=this.startAFCell.offsetParent.parentElement.scrollLeft,u=k-this.startAFCell.offsetTop,f=d-this.startAFCell.offsetLeft,e=this.parent.element.clientHeight-oi();this.parent.allowPaging&&(e-=this.parent.element.querySelector(".e-pager").offsetHeight);this.parent.aggregates.length&&(e-=this.parent.getFooterContent().offsetHeight);o=this.parent.element.clientWidth-("auto"!==this.parent.height?oi():0);u=u>0?Math.floor(u)-1:0;f=f>0?f:0;c=t.left-r.left;this.parent.enableRtl?(y=i(this.startAFCell,eh)||i(this.startAFCell,ov)?t.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-r.left:0,this.bdrAFLeft.style.right=r.right-n.right-2+n.width+"px",this.bdrAFLeft.style.width=o<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px",l=r.right-t.right-s+y-1,this.bdrAFRight.style.right=l>0?l+"px":"0px",this.bdrAFTop.style.left=n.left-r.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-s+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px","auto"!==this.parent.height&&oi()?(this.bdrAFTop.style.left=oi()+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-oi()+"px"):this.bdrAFTop.style.left="0px")):(this.bdrAFLeft.style.left=c-s+f-1+"px",this.bdrAFRight.style.left=n.left-r.left-2+n.width+"px",this.bdrAFRight.style.width=o<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=c+f-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-s+1+"px",o<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10))&&(p=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-o,this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-p+"px");(this.bdrAFLeft.style.top=t.top-r.top-h+u+"px",this.bdrAFLeft.style.height=n.top-t.top>0?n.top-v.top+n.height+1-(t.top-v.top)+h-a-u+"px":n.height+h-a-u+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-b-1+"px",this.bdrAFBottom.style.width=e<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,e<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10))&&(w=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-e,this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-w+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px")}},n.prototype.createAFBorders=function(){var n,i,r,u;this.bdrAFLeft||(n=t.createElement("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft"}),n.style.width="2px",this.bdrAFLeft=this.parent.element.appendChild(n),i=t.createElement("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright"}),i.style.width="2px",this.bdrAFRight=this.parent.element.appendChild(i),r=t.createElement("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom"}),r.style.height="2px",this.bdrAFBottom=this.parent.element.appendChild(r),u=t.createElement("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop"}),u.style.height="2px",this.bdrAFTop=this.parent.element.appendChild(u))},n.prototype.destroyAutoFillElements=function(){this.bdrAFLeft&&(this.bdrAFLeft.remove(),this.bdrAFRight.remove(),this.bdrAFBottom.remove(),this.bdrAFTop.remove(),this.bdrAFLeft=this.bdrAFRight=this.bdrAFBottom=this.bdrAFTop=null);this.autofill&&(this.autofill.remove(),this.autofill=null)},n.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},n.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},n.prototype.updateValue=function(n,t,i){var u=this.createBeforeAutoFill(n,t,i),r;u.cancel||(r=this.parent.getColumnByIndex(t),this.parent.editModule&&i&&("number"===r.type?this.parent.editModule.updateCell(n,r.field,parseFloat(u.value)):this.parent.editModule.updateCell(n,r.field,u.value)))},n.prototype.createBeforeAutoFill=function(n,t,i){var r={column:this.parent.getColumnByIndex(t),value:i.innerText};return this.parent.trigger(eg,r),r},n.prototype.getAutoFillCells=function(n){return[].slice.call(this.parent.getDataRows()[parseInt(n.toString(),10)].querySelectorAll(".e-cellselectionbackground"))},n.prototype.selectLikeAutoFill=function(n,t){var f=parseInt(i(this.startAFCell,y).getAttribute(c),10)-1,r=parseInt(this.startAFCell.getAttribute(ft),10)-1,o=parseInt(i(this.endAFCell,y).getAttribute(c),10)-1,s=parseInt(this.endAFCell.getAttribute(ft),10)-1,p=this.selectedRowCellIndexes.length-1,h=this.selectedRowCellIndexes[0].cellIndexes.length-1,d,u,a,b,k;switch(!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!i(n.target,v):this.startAFCell=this.parent.getCellFromIndex(f,r);this.endAFCell=this.parent.getCellFromIndex(f+p,r+h);this.drawAFBorders();break;case this.autoFillRLselection&&r+h<s&&s-r-h+1>o-f-p&&s-r-h+1>f-o:if(this.endAFCell=this.parent.getCellFromIndex(f+p,s),o=parseInt(i(this.endAFCell,y).getAttribute(c),10)-1,s=parseInt(this.endAFCell.getAttribute(ft),10)-1,t){for(d=parseInt(this.endCell.getAttribute(ft),10)-1,u=f;u<=o;u++)for(var w=this.getAutoFillCells(u,r),e=0,l=d+1;l<=s;l++)e>h&&(e=0),this.updateValue(u,l,w[parseInt(e.toString(),10)]),e++;this.selectCellsByRange({rowIndex:f,cellIndex:this.startCellIndex},{rowIndex:o,cellIndex:s})}else this.drawAFBorders();break;case this.autoFillRLselection&&r>s&&r-s+1>o-f-p&&r-s+1>f-o:if(this.startAFCell=this.parent.getCellFromIndex(f,s),this.endAFCell=this.endCell,t){for(u=f;u<=f+p;u++)for((w=this.getAutoFillCells(u,r)).reverse(),e=0,l=this.startCellIndex-1;l>=s;l--)e>h&&(e=0),this.updateValue(u,l,w[parseInt(e.toString(),10)]),e++;this.selectCellsByRange({rowIndex:f,cellIndex:s},{rowIndex:f+p,cellIndex:this.startCellIndex+h})}else this.drawAFBorders();break;case f>o:if(this.startAFCell=this.parent.getCellFromIndex(o,r),this.endAFCell=this.endCell,t){for(a=b=parseInt(this.endCell.parentElement.getAttribute(c),10)-1,u=f-1;u>=o;u--)for(a===this.startIndex-1&&(a=b),w=this.getAutoFillCells(a,r),e=0,a--,l=this.startCellIndex;l<=this.startCellIndex+h;l++)this.updateValue(u,l,w[parseInt(e.toString(),10)]),e++;this.selectCellsByRange({rowIndex:o,cellIndex:r+h},{rowIndex:f+p,cellIndex:r})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(o,r+h),t){for(b=parseInt(this.endCell.parentElement.getAttribute(c),10)-1,a=this.startIndex,u=b+1;u<=o;u++)for(a===b+1&&(a=this.startIndex),w=this.getAutoFillCells(a,r),a++,e=0,k=this.startCellIndex;k<=this.startCellIndex+h;k++)this.updateValue(u,k,w[parseInt(e.toString(),10)]),e++;this.selectCellsByRange({rowIndex:b-p,cellIndex:r},{rowIndex:o,cellIndex:r+h})}else this.drawAFBorders()}},n.prototype.mouseUpHandler=function(n){var r,u,f,e;this.stopTimer();document.body.classList.remove("e-disableuserselect");this.element&&!t.isNullOrUndefined(this.element.parentElement)&&t.remove(this.element);this.mUPTarget=this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?i(n.target,v):null;r=t.closest(n.target,".e-rowcell");this.isDragged&&!this.isAutoFillSel&&"Cell"===this.selectionSettings.mode&&r&&r.classList.contains(v)&&(u=parseInt(r.parentElement.getAttribute(c),10)-1,f=parseInt(r.getAttribute(ft),10)-1,this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:u,cellIndex:f}));(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel)&&(this.preventFocus=!0,e=i(n.target,v),this.endAFCell=e||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,t.isNullOrUndefined(this.endAFCell)||t.isNullOrUndefined(this.startAFCell)||(this.updateStartCellsIndex(),this.selectLikeAutoFill(n,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.parent.aggregates.length>0&&this.parent.notify(sr,{})),this.isAutoFillSel=!1,this.preventFocus=!1);t.EventHandler.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler);this.parent.frozenRows&&t.EventHandler.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler);t.EventHandler.remove(document,"mouseup",this.mouseUpHandler)},n.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},n.prototype.updateAutoFillPosition=function(){var n,r,u,f,c;if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var e=parseInt(this.target.getAttribute(ft),10)-1,l=parseInt(this.target.getAttribute("data-index"),10),a=this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,o=this.getAutoFillCells(a,e).filter(function(n){return""===n.style.display}),s=this.parent.getColumnByIndex(e),h=(s.getFreezeTableName(),l<this.parent.frozenRows),v=this.parent.getFrozenMode()===ir&&s.getFreezeTableName()===oh;t.select("#"+this.parent.element.id+"_autofill",i(this.target,yi))||(t.select("#"+this.parent.element.id+"_autofill",this.parent.element)&&t.select("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=t.createElement("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",(this.target.classList.contains("e-leftfreeze")||this.target.classList.contains("e-rightfreeze")||this.target.classList.contains("e-fixedfreeze"))&&this.autofill.classList.add("e-freeze-autofill"),h?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),v&&(h?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill)));n=o[o.length-1];n&&n.offsetParent&&(r=n.getBoundingClientRect(),u=n.offsetParent.getBoundingClientRect(),(n.offsetParent.classList.contains("e-content")||n.offsetParent.classList.contains("e-headercontent"))&&(u=n.offsetParent.querySelector("table").getBoundingClientRect()),f=this.isLastCell(n)?4:0,c=this.isLastRow(n)?3:0,this.parent.enableRtl?this.autofill.style.right=u.right-r.right+r.width-4-f+"px":this.autofill.style.left=r.left-u.left+r.width-4-f+"px",this.autofill.style.top=r.top-u.top+r.height-5-c+"px");this.autofill.style.display=""}else this.hideAutoFill()},n.prototype.mouseDownHandler=function(n){this.mouseButton=n.button;var f,r=n.target,u=this.parent,e=i(r,"e-grid");if(!(e&&e.id!==u.element.id||i(r,ct)&&!this.parent.frozenRows||i(r,"e-editedbatchcell")||i(r,ut))){if((n.shiftKey||n.ctrlKey)&&n.preventDefault(),i(r,v)&&!n.shiftKey&&!n.ctrlKey){if(u.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,f=!0;else if(u.allowRowDragAndDrop&&!u.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||t.closest(r,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);f=!0;this.element=this.parent.createElement("div",{className:"e-griddragarea"});u.getContent().appendChild(this.element)}f&&this.enableDrag(n,!0)}this.updateStartEndCells();(r.classList.contains("e-autofill")||r.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(n))}},n.prototype.updateStartEndCells=function(){var n=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=n[0];this.endCell=n[n.length-1];this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(c),10)-1,this.startCellIndex=parseInt(i(this.startCell,v).getAttribute(ft),10)-1)},n.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(c),10)-1,this.startCellIndex=parseInt(i(this.startCell,v).getAttribute(ft),10)-1)},n.prototype.enableDrag=function(n,r){var u=this.parent,o,f,e;r&&(o=t.closest(n.target,"tr"),this.startDIndex=parseInt(o.getAttribute(c),10)-1,this.startDCellIndex=parseInt(i(n.target,v).getAttribute(ft),10)-1);document.body.classList.add("e-disableuserselect");f=u.element.getBoundingClientRect();e=cu(n);this.x=e.x-f.left;this.y=e.y-f.top;t.EventHandler.add(u.getContent(),"mousemove",this.mouseMoveHandler,this);this.parent.frozenRows&&t.EventHandler.add(u.getHeaderContent(),"mousemove",this.mouseMoveHandler,this);t.EventHandler.add(document,"mouseup",this.mouseUpHandler,this)},n.prototype.clearSelAfterRefresh=function(n){var u=this.parent.enableInfiniteScrolling&&"infiniteScroll"===n.requestType,i,r,t,f;if("virtualscroll"===n.requestType||this.parent.isPersistSelection||u||this.clearSelection(),("virtualscroll"===n.requestType||u)&&this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){for(i=this.parent.getRowsObject().filter(function(n){return n.isSelectable}),r=[],this.selectedRowState={},this.persistSelectedData=[],t=0;t<i.length;t++)r.push(i[parseInt(t.toString(),10)].index),f=this.getPkValue(this.primaryKey,i[parseInt(t.toString(),10)].data),this.selectedRowState[""+f]=!0,this.persistSelectedData.push(i[parseInt(t.toString(),10)].data);this.selectedRowIndexes=r}},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:w,handler:this.enableAfterRender},{event:pt,handler:this.initializeSelection},{event:ag,handler:this.onActionComplete},{event:vg,handler:this.onActionComplete},{event:wt,handler:this.onPropertyChanged},{event:ss,handler:this.onCellFocused},{event:tw,handler:this.clearSelAfterRefresh},{event:ke,handler:this.columnPositionChanged},{event:k,handler:this.initialEnd},{event:hs,handler:this.rowsRemoved},{event:bt,handler:this.refreshHeader},{event:sl,handler:this.destroyAutoFillElements},{event:l,handler:this.destroy}],yt(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(p,this.actionBeginFunction),this.parent.addEventListener(s,this.actionCompleteFunction),this.addEventListener_checkbox())},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(t.EventHandler.remove(document,"mouseup",this.mouseUpHandler),t.EventHandler.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),t.EventHandler.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler),yt(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(p,this.actionBeginFunction),this.parent.removeEventListener(s,this.actionCompleteFunction),this.removeEventListener_checkbox(),this.parent.off(sl,this.destroyAutoFillElements))},n.prototype.wireEvents=function(){this.isMacOS=-1!==navigator.userAgent.indexOf("Mac OS");this.isMacOS?(t.EventHandler.add(this.parent.element,"keydown",this.keyDownHandler,this),t.EventHandler.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||t.EventHandler.add(this.parent.element,"keydown",this.keyDownHandler,this)},n.prototype.unWireEvents=function(){this.isMacOS?(t.EventHandler.remove(this.parent.element,"keydown",this.keyDownHandler),t.EventHandler.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||t.EventHandler.remove(this.parent.element,"keydown",this.keyDownHandler)},n.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},n.prototype.refreshHeader=function(){this.parent.getColumns().filter(function(n){return"checkbox"===n.type}).length&&!this.parent.getDataModule().isRemote()&&(this.gridCurrentRecord=this.getData());this.setCheckAllState()},n.prototype.rowsRemoved=function(n){for(var i,t=0;t<n.records.length;t++)i=this.getPkValue(this.primaryKey,n.records[parseInt(t.toString(),10)]),delete this.selectedRowState[""+i],--this.totalRecordsCount;this.setCheckAllState()},n.prototype.beforeFragAppend=function(n){"virtualscroll"===n.requestType||this.parent.isPersistSelection||this.clearSelection()},n.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},n.prototype.enableAfterRender=function(n){n.module===this.getModuleName()&&n.enable&&(this.render(),this.initPerisistSelection())},n.prototype.render=function(){t.EventHandler.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this);t.EventHandler.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},n.prototype.onPropertyChanged=function(n){if(n.module===this.getModuleName()){var i=this.parent;t.isNullOrUndefined(n.properties.type)||("Single"===this.selectionSettings.type?(i.element.removeAttribute("aria-multiselectable"),this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()):"Multiple"===this.selectionSettings.type&&i.element.setAttribute("aria-multiselectable","true"));t.isNullOrUndefined(n.properties.mode)&&t.isNullOrUndefined(n.properties.cellSelectionMode)||(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0);this.isPersisted=!0;this.checkBoxSelectionChanged();this.isPersisted=!1;this.parent.isCheckBoxSelection||this.initPerisistSelection();this.parent.getColumns().filter(function(n){return"checkbox"===n.type}).length&&(i.isCheckBoxSelection=!("ResetOnRowClick"===this.selectionSettings.checkboxMode));this.drawBorders()}},n.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},n.prototype.initialEnd=function(){this.selectedRowIndexes.length||(this.parent.off(k,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},n.prototype.checkBoxSelectionChanged=function(){var n=this.parent,i;n.off(k,this.checkBoxSelectionChanged);i=(n.enableColumnVirtualization?n.columns:n.getColumns()).filter(function(n){return"checkbox"===n.type});i.length>0&&(n.isCheckBoxSelection=!0,this.chkField=i[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,t.isNullOrUndefined(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(n.selectionSettings.type="Multiple",n.dataBind()):this.initPerisistSelection());n.isCheckBoxSelection||this.isPersisted||(this.chkField=null,this.initPerisistSelection())},n.prototype.initPerisistSelection=function(){var n=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(n.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(n.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(n.isPersistSelection=!1,this.selectedRowState={})},n.prototype.ensureCheckboxFieldSelection=function(){var n=this.parent;this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0];!n.enableVirtualization&&this.chkField&&(n.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!n.isPersistSelection)&&this.dataSuccess(!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result||this.parent.getDataModule().isRemote()?this.parent.getCurrentViewRecords():this.parent.renderModule.data.dataManager.dataSource.json)},n.prototype.dataSuccess=function(n){for(var u,r,i=0;i<n.length;i++)u=this.getPkValue(this.primaryKey,n[parseInt(i.toString(),10)]),r=n[parseInt(i.toString(),10)][this.chkField],t.isNullOrUndefined(this.selectedRowState[""+u])&&r&&"boolean"==typeof r&&(this.selectedRowState[""+u]=r,this.parent.isPersistSelection&&this.persistSelectedData.push(n[parseInt(i.toString(),10)]))},n.prototype.setRowSelection=function(n){var v,y,r,s,h,u,c,p,f,e,l,i,o,a;if(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)if(n){if(v=Object.keys(this.selectedRowState),y=Object.keys(this.unSelectedRowState),!this.isCheckboxReset)for(r=0,s=this.parent.groupSettings.columns.length&&this.parent.isPersistSelection?this.parent.currentViewData.records:this.parent.currentViewData;r<s.length;r++)(i=s[r],t.isNullOrUndefined(i[this.primaryKey]))||(h=i[this.primaryKey].toString(),-1===v.indexOf(h)&&-1===y.indexOf(h)&&(this.selectedRowState[i[this.primaryKey]]=!0))}else this.selectedRowState={},this.unSelectedRowState={},this.rmtHdrChkbxClicked=!1;else if(n)if(this.isPartialSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))for(u=0,c=this.parent.getRowsObject().filter(function(n){return n.isSelectable});u<c.length;u++)p=c[u],this.selectedRowState[this.getPkValue(this.primaryKey,p.data)]=!0;else if(f=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData(),this.parent.groupSettings.columns.length)for(e=0,l=this.isPartialSelection?f:f.records;e<l.length;e++)i=l[e],this.selectedRowState[this.getPkValue(this.primaryKey,i)]=!0;else for(o=0,a=f;o<a.length;o++)i=a[o],this.selectedRowState[this.getPkValue(this.primaryKey,i)]=!0;else this.selectedRowState={}},n.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},n.prototype.getAvailableSelectedData=function(n){var t=new u.DataManager(n).executeLocal(this.parent.getDataModule().generateQuery(!0));return this.parent.groupSettings.columns.length&&t&&t.records&&(t=t.records.slice()),t},n.prototype.refreshPersistSelection=function(){var n=this.parent.getRows(),f,i,r,u,e,o;if(this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),!t.isNullOrUndefined(n)&&n.length>0&&(this.parent.isPersistSelection||this.chkField)){for(f=[],i=0;i<n.length;i++){if(r=this.getRowObj(n[parseInt(i.toString(),10)]),u=r&&r.data?this.getPkValue(this.primaryKey,r.data):null,null===u)return;(!this.isPartialSelection||r.isSelectable)&&(e=void 0,o=n[parseInt(i.toString(),10)].querySelector(".e-checkselect"),this.selectedRowState[""+u]||"Check"===this.parent.checkAllRows&&this.selectedRowState[""+u]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(u)<0||"Uncheck"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(u)>0&&!this.parent.selectedRowIndex||"Intermediate"===this.parent.checkAllRows&&!t.isNullOrUndefined(this.chkField)&&r.data[this.chkField]?(f.push(parseInt(n[parseInt(i.toString(),10)].getAttribute(c),10)-1),e=!0):(e=!1,this.checkedTarget!==o&&this.parent.isCheckBoxSelection&&o&&yo(o.nextElementSibling,e)),this.updatePersistCollection(n[parseInt(i.toString(),10)],e))}this.isSingleSel()&&f.length>0?this.selectRow(f[0],!0):this.selectRows(f)}(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode)&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},n.prototype.actionBegin=function(n){var i,r,u;if("save"===n.requestType&&this.parent.isPersistSelection&&(i=this.parent.element.querySelector(".e-edit-checkselect"),!t.isNullOrUndefined(i)))if(r=t.closest(i,"."+ut),r){if("Dialog"===this.parent.editSettings.mode&&(r=this.parent.element.querySelector(".e-dlgeditrow")),u=this.getRowObj(r),!u)return;this.selectedRowState[this.getPkValue(this.primaryKey,u.data)]=u.isSelected=i.checked}else this.isCheckedOnAdd=i.checked;this.parent.isPersistSelection&&this.isPartialSelection&&"paging"===n.requestType&&(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.selectedRowIndexes=[])},n.prototype.actionComplete=function(n){var f,e,i,o,r,u;if("save"===n.requestType&&this.parent.isPersistSelection&&("add"===n.action&&(this.isCheckedOnAdd&&(f=this.parent.getRowObjectFromUID(this.parent.getRows()[n.selectedRow].getAttribute("data-uid")),this.selectedRowState[this.getPkValue(this.primaryKey,f.data)]=f.isSelected=this.isCheckedOnAdd),this.isHdrSelectAllClicked=!1,this.setCheckAllState()),this.refreshPersistSelection()),"delete"===n.requestType&&this.parent.isPersistSelection){for(e=n.data.slice(),i=0;i<e.length;i++)o=this.getPkValue(this.primaryKey,e[parseInt(i.toString(),10)]),t.isNullOrUndefined(o)||this.updatePersistDelete(o,this.isPartialSelection);this.isHdrSelectAllClicked=!1;this.setCheckAllState();this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}if("paging"===n.requestType){if(this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){for(r=this.parent.getRowsObject(),u=[],i=0;i<r.length;i++)r[parseInt(i.toString(),10)].isSelectable&&u.push(r[parseInt(i.toString(),10)].index);u.length&&this.selectRows(u)}this.prevRowIndex=void 0;this.prevCIdxs=void 0;this.prevECIdxs=void 0}},n.prototype.onDataBound=function(){if(this.parent.getColumns().filter(function(n){return"checkbox"===n.type}).length&&!this.parent.getDataModule().isRemote()&&(this.gridCurrentRecord=this.getData()),!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.selectedRecords.length&&(this.isPrevRowSelection=!0),((this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&this.rmtHdrChkbxClicked||this.isPartialSelection&&this.parent.isPersistSelection&&this.isHdrSelectAllClicked)&&("Intermediate"===this.parent.checkAllRows?this.setRowSelection(!0):"Uncheck"===this.parent.checkAllRows&&this.setRowSelection(!1)),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isPersistSelection&&this.refreshPersistSelection(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var r=this.parent.getRowsObject(),i=[],n=0;n<r.length;n++)r[parseInt(n.toString(),10)].isSelected&&i.push(n);i.length&&this.selectRows(i);this.initialRowSelection=!0}},n.prototype.updatePersistSelectedData=function(n){var f=this,r,e,o,u,i;if(this.parent.isPersistSelection){for(r=[],"Check"!==this.parent.checkAllRows||!(this.parent.searchSettings.key.length>0||this.parent.filterSettings.columns.length>0)||!this.persistSelectedData.length||this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result||this.isPartialSelection||(e=this.getAvailableSelectedData(this.persistSelectedData),o=new Set(e.map(function(n){return n[f.primaryKey]})),r=this.persistSelectedData.filter(function(n){return!o.has(n[f.primaryKey])})),u=this.parent.getRows(),i=0;i<u.length;i++)this.updatePersistCollection(u[parseInt(i.toString(),10)],n);if("Uncheck"===this.parent.checkAllRows)this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result?this.persistSelectedData:[];else if("Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result||this.isPartialSelection?this.persistSelectedData:this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice(),r.length>0))for(i=0;i<r.length;i++)this.persistSelectedData.push(r[parseInt(i.toString(),10)])}},n.prototype.checkSelectAllAction=function(n){var r=this.getRenderer(),u=this.parent.element.querySelector(".e-gridform"),i;(this.checkedTarget=this.getCheckAllBox(),n&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(n),this.selectRowsByRange(r.getVirtualRowIndex(0),r.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1)),this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&(this.virtualSelectedData=this.virtualCheckBoxData().slice(),this.selectedRowIndexes=Object.keys(this.virtualSelectedData).map(function(n){return parseInt(n,10)}))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(n),this.clearSelection()),this.chkAllCollec=[],t.isNullOrUndefined(u))||(i=u.querySelector(".e-edit-checkselect"),t.isNullOrUndefined(i)||yo(i.nextElementSibling,n))},n.prototype.checkSelectAll=function(n){var e=this,f=this.getCheckAllStatus(n),r="Check"===f,u,i;if(this.isHeaderCheckboxClicked=!0,this.rmtHdrChkbxClicked=(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&("Uncheck"===f||this.isCheckboxReset||"Intermediate"===f&&this.parent.isPersistSelection)?!0:!1,this.rmtHdrChkbxClicked&&this.isCheckboxReset&&(this.unSelectedRowState={}),this.isCheckboxReset=!1,"Intermediate"===f&&(this.chkField||this.parent.isPersistSelection||(r=this.getCurrentBatchRecordChanges().some(function(n){return e.getPkValue(e.primaryKey,n)in e.selectedRowState})),this.parent.isPersistSelection))if(this.parent.allowPaging&&this.isPartialSelection)for(u=this.parent.getRowsObject(),i=0;i<u.length;i++){if(u[i].isDataRow&&u[i].isSelectable&&!u[i].isSelected){r=!1;break}r=!0}else if(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)for(i=0;i<this.getCurrentBatchRecordChanges().length;i++)if(!t.isNullOrUndefined(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+i]))){if(!Object.keys(this.selectedRowState).includes(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+i]).toString())){r=!1;break}r=!0}this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount);this.checkSelectAllAction(!r);this.target=null;this.getCurrentBatchRecordChanges().length>0&&(this.setCheckAllState(),this.updateSelectedRowIndexes());this.triggerChkChangeEvent(n,!r)},n.prototype.getCheckAllStatus=function(n){var i,r;return t.isNullOrUndefined(n)?t.isNullOrUndefined(this.getCheckAllBox())||(i=this.getCheckAllBox().nextElementSibling.classList):i=n.nextElementSibling.classList,r="None",i instanceof DOMTokenList&&(i.contains("e-check")?r="Check":i.contains("e-uncheck")?r="Uncheck":i.contains("e-stop")&&(r="Intermediate")),r},n.prototype.checkSelect=function(n){var i=t.closest(this.checkedTarget,"."+v),u=this.parent,r,f;this.isMultiCtrlRequest=!0;r=0;(this.isHeaderCheckboxClicked=!1,b(u))?(f=i.parentElement.getAttribute("data-uid"),r=this.parent.enableVirtualization&&this.parent.groupSettings.columns.length?parseInt(i.parentElement.getAttribute(c),10)-1:u.getRows().map(function(n){return n.getAttribute("data-uid")}).indexOf(f)):r=parseInt(i.parentElement.getAttribute(c),10)-1;this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(ii).length>0&&"Top"===this.parent.editSettings.newRowPosition&&!this.parent.editSettings.showAddNewRow&&++r;this.rowCellSelectionHandler(r,parseInt(i.getAttribute(ft),10)-1);this.moveIntoUncheckCollection(t.closest(i,"."+y));this.setCheckAllState();this.isMultiCtrlRequest=!1;this.triggerChkChangeEvent(n,n.nextElementSibling.classList.contains("e-check"))},n.prototype.moveIntoUncheckCollection=function(n){if("Check"===this.parent.checkAllRows||"Uncheck"===this.parent.checkAllRows){var i=this.getRowObj(n),t=i&&i.data?this.getPkValue(this.primaryKey,i.data):null;if(!t)return;this.chkAllCollec.indexOf(t)<0?this.chkAllCollec.push(t):this.chkAllCollec.splice(this.chkAllCollec.indexOf(t),1)}},n.prototype.triggerChkChangeEvent=function(n,t){this.parent.trigger(rg,{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:n});this.parent.isEdit||(this.checkedTarget=null)},n.prototype.updateSelectedRowIndexes=function(){var i,u,n,f,r,e;if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.isPartialSelection&&!(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.selectionSettings.persistSelection&&"Uncheck"!==this.parent.checkAllRows)for(i=0,u=f=this.parent.getRowsObject().filter(function(n){return n.isSelectable});i<u.length;i++)n=u[i],this.selectedRowIndexes.push(n.index);if(this.parent.isCheckBoxSelection&&this.parent.enableVirtualization&&!this.isPartialSelection&&(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.parent.isPersistSelection&&"Check"===this.parent.checkAllRows&&(f=this.parent.getRowsObject().filter(function(n){return n.isSelectable})).length!==this.selectedRowIndexes.length)for(r=0,e=f;r<e.length;r++)n=e[r],this.selectedRowIndexes.indexOf(n.index)<=-1&&this.selectedRowIndexes.push(n.index)},n.prototype.updateSelectedRowIndex=function(n){var u,i,r,f;if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection)if("Check"===this.parent.checkAllRows)for(this.selectedRowIndexes=[],u=this.parent.groupSettings.columns.length?this.getData().records.length:this.getData().length,i=0;i<u;i++)this.selectedRowIndexes.push(i);else"Uncheck"===this.parent.checkAllRows?this.selectedRowIndexes=[]:(r=this.parent.getRowByIndex(n),n&&r&&"false"===r.getAttribute("aria-selected")&&(f=this.selectedRowIndexes.indexOf(n),this.selectedRowIndexes.splice(f,1)))},n.prototype.isAllSelected=function(n){var i,r,u;if(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)return this.getAvailableSelectedData(this.persistSelectedData).length===(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling?this.parent.totalDataRecordsCount:this.totalRecordsCount);if(this.isPartialSelection){if(this.parent.allowPaging&&!this.selectionSettings.persistSelection&&this.parent.pageSettings.pageSize<this.parent.pageSettings.totalRecordsCount){for(i=this.parent.partialSelectedRecords,r=0;r<i.length;r++)if(u=this.getPkValue(this.primaryKey,i[parseInt(r.toString(),10)]),!this.selectedRowState[""+u])return!1;return!0}return this.isSelectAllRowCount(n)}for(i=this.getData(),this.parent.groupSettings.columns.length&&i.records&&(i=i.records),r=0;r<i.length;r++)if(u=this.getPkValue(this.primaryKey,i[parseInt(r.toString(),10)]),!this.selectedRowState[""+u])return!1;return!0},n.prototype.someDataSelected=function(){var r,n,i,u;if((this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length))for(r=this.getAvailableSelectedData(this.persistSelectedData),n=0;n<r.length;n++)if(i=this.getPkValue(this.primaryKey,r[parseInt(n.toString(),10)]),this.selectedRowState[""+i])return!1;for(u=this.isPartialSelection?this.getAvailableSelectedData(this.parent.partialSelectedRecords):this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result?[]:this.getData(),n=0;n<u.length;n++)if(i=this.getPkValue(this.primaryKey,u[parseInt(n.toString(),10)]),this.selectedRowState[""+i])return!1;return!0},n.prototype.setCheckAllState=function(n,i){var e,u,f;if(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode){var s=!1,o=!1,r=Object.keys(this.selectedRowState).length;this.parent.element.classList.contains("e-treelistgrid")&&this.parent.isPersistSelection&&!this.parent.enableVirtualization&&!this.parent.getDataModule().isRemote()&&Array.isArray(this.parent.dataSource)&&r===this.parent.dataSource.length&&r>this.totalRecordsCount&&(r=this.totalRecordsCount);this.parent.isPersistSelection||(r=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length);!this.parent.isPersistSelection||(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&this.isPartialSelection||!this.parent.searchSettings.key.length&&!this.parent.filterSettings.columns.length||(o=!0,s=this.isAllSelected(r));e=this.getCheckAllBox();e&&(u=e.nextElementSibling,t.removeClass([u],["e-check","e-stop","e-uncheck"]),ur(e,!1),e.indeterminate=!1,f=this.parent.getDataModule().isRemote()?[]:this.gridCurrentRecord,this.parent.groupSettings.columns.length&&f.records&&(f=f.records),this.totalRecordsCount=this.checkVirtualCheckBox()?f.length:this.totalRecordsCount,s&&o&&(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result||f.length)||!o&&(r===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&(!(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)||this.parent.allowPaging)||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&this.isPartialSelection&&(this.isSelectAllRowCount(r)||this.isHdrSelectAllClicked&&!this.parent.isPersistSelection)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&(!(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&f.length&&r===f.length||(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection&&(r===this.parent.totalDataRecordsCount||(this.isSelectAllRowCount(r)||r===this.totalRecordsCount)&&!this.parent.isPersistSelection)||this.isPartialSelection&&(this.isHdrSelectAllClicked||this.isSelectAllRowCount(r)))||r===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&!this.parent.allowPaging&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling)?(t.addClass([u],["e-check"]),ur(e,!0),i&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):(!this.selectedRowIndexes.length&&(!this.parent.enableVirtualization||!this.persistSelectedData.length&&!o||o&&this.someDataSelected())||0===r&&0===this.getCurrentBatchRecordChanges().length)&&!this.parent.allowPaging||this.parent.allowPaging&&(0===r||r&&o&&this.someDataSelected())?(t.addClass([u],["e-uncheck"]),i&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck"):(t.addClass([u],["e-stop"]),this.parent.checkAllRows="Intermediate",e.indeterminate=!0),0===r&&0===this.getCurrentBatchRecordChanges().length?t.addClass([u.parentElement],["e-checkbox-disabled"]):t.removeClass([u.parentElement],["e-checkbox-disabled"]),this.isPartialSelection&&(0===this.parent.getRowsObject().filter(function(n){return n.isSelectable}).length&&u.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")?t.addClass([u.parentElement],["e-checkbox-disabled"]):t.removeClass([u.parentElement],["e-checkbox-disabled"])),!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling||this.parent.allowPaging||this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result||this.updateSelectedRowIndex(n))}},n.prototype.checkVirtualCheckBox=function(){return this.parent.enableVirtualization&&!(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.isCheckBoxSelection&&!this.isPartialSelection},n.prototype.virtualCheckBoxData=function(){var n=this.getData();return this.parent.groupSettings.columns.length&&n.records&&(n=n.records),n},n.prototype.isSelectAllRowCount=function(n){var i=0,r=this.parent.getRowsObject();if(this.parent.selectionSettings.persistSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))return(this.parent.getDataModule().isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result?this.parent.totalDataRecordsCount:this.getData()&&this.getData().length)===r.length&&(i=r.filter(function(n){return n.isSelectable}).length)&&n===i;if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var e=this.getAvailableSelectedData(this.parent.disableSelectedRecords).length,u=this.getAvailableSelectedData(this.parent.partialSelectedRecords).length,f=this.getAvailableSelectedData(this.persistSelectedData).length;return(i=e+u)===this.totalRecordsCount&&0!==f&&f===u}return(i=r.filter(function(n){return n.isSelectable}).length)&&n===i},n.prototype.keyDownHandler=function(n){("opera"===t.Browser.info.name&&17===n.keyCode||"mozilla"===t.Browser.info.name&&224===n.keyCode||("safari"===t.Browser.info.name||"chrome"===t.Browser.info.name)&&(91===n.keyCode||93===n.keyCode))&&(this.cmdKeyPressed=!0);var r=i(n.target,"e-headercell"),u=i(n.target,v);(r?r.children[0].classList.contains("e-headerchkcelldiv"):u&&u.classList.contains("e-gridchkbox"))&&!this.parent.allowKeyboard&&32===n.keyCode&&n.preventDefault()},n.prototype.keyUpHandler=function(n){("opera"===t.Browser.info.name&&17===n.keyCode||"mozilla"===t.Browser.info.name&&224===n.keyCode||("safari"===t.Browser.info.name||"chrome"===t.Browser.info.name)&&(91===n.keyCode||93===n.keyCode))&&(this.cmdKeyPressed=!1)},n.prototype.clickHandler=function(n){var r=n.target,u,o,f,e,s;this.actualTarget=r;this.isAutoFillSel||n.ctrlKey||n.shiftKey||(this.startAFCell=this.endAFCell=null);this.selectionSettings.persistSelection&&(this.deSelectedData=lo(this.persistSelectedData));(i(r,y)||i(r,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&r.classList.contains("e-headercell"))&&(this.isInteracted=!0);this.cmdKeyPressed=n.metaKey;this.isMultiCtrlRequest=n.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed;this.parent.allowKeyboard?this.isMultiShiftRequest=n.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1);this.isMultiCtrlRequestCell=this.isMultiCtrlRequest;this.popUpClickHandler(n);o=!1;this.preventFocus=!0;f=i(r,"e-checkbox-wrapper");(this.checkSelectAllClicked=!!(f&&f.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&i(r,y)),this.selectionSettings.persistSelection&&this.isPartialSelection&&i(r,"e-headerchkcelldiv")&&!r.querySelector(".e-checkbox-disabled")&&(this.isHdrSelectAllClicked=!0),f&&f.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(u=f.querySelector('input[type="checkbox"]'),o=!0),this.drawBorders(),this.updateAutoFillPosition(),r=i(r,v),this.parent.isReact&&r&&!r.parentElement&&r.classList.contains("e-rowcell")&&(r=this.parent.getCellFromIndex(parseInt(r.getAttribute("data-index"),10),parseInt(r.getAttribute("aria-colindex"),10)-1)),this.isRowDragSelected&&t.isNullOrUndefined(r)&&this.parent.allowRowDragAndDrop&&this.selectionSettings.persistSelection&&this.checkSelectAllClicked&&(this.isRowDragSelected=!1),(r&&r.parentElement.classList.contains(y)&&!this.parent.selectionSettings.checkboxOnly||o)&&!this.isRowDragSelected)?((this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=r,t.isNullOrUndefined(u))?(e=0,e=parseInt(r.parentElement.getAttribute(c),10)-1,this.parent.isPersistSelection&&!this.parent.editSettings.showAddNewRow&&this.parent.element.getElementsByClassName(ii).length>0&&++e,this.mUPTarget&&this.mUPTarget.isEqualNode(r)||this.rowCellSelectionHandler(e,parseInt(r.getAttribute(ft),10)-1),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(t.closest(r,"."+y)),this.setCheckAllState())):(this.checkedTarget=u,u.classList.contains("e-checkselectall")?this.checkSelectAll(u):this.checkSelect(u)),this.parent.isCheckBoxSelection||!t.Browser.isDevice||this.isSingleSel()||this.showPopup(n)):n.target.classList.contains("e-headercell")&&!n.target.classList.contains("e-stackedheadercell")&&(s=n.target.querySelector(".e-headercelldiv").getAttribute("data-mappinguid"),this.headerSelectionHandler(this.parent.getColumnIndexByUid(s)));this.isMultiCtrlRequest=!1;this.isMultiCtrlRequestCell=this.isMultiCtrlRequest;this.isMultiShiftRequest=!1;t.isNullOrUndefined(t.closest(n.target,".e-unboundcell"))&&(this.preventFocus=!1)},n.prototype.popUpClickHandler=function(n){var i=n.target;t.closest(i,".e-headercell")||n.target.classList.contains(v)||t.closest(i,".e-gridpopup")?i.classList.contains("e-rowselect")&&(i.classList.contains("e-spanclicked")?(i.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(i.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},n.prototype.showPopup=function(n){this.selectionSettings.enableSimpleMultiRowSelection||pb(this.parent.element.querySelector(".e-gridpopup"),n,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>1||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},n.prototype.rowCellSelectionHandler=function(n,i){var u,r,f;(this.isMultiCtrlRequest||this.isMultiShiftRequest)&&!this.isSingleSel()?this.isMultiShiftRequest?(u=t.closest(this.target,"."+v).classList.contains(rf),this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!u||this.parent.getColumns().some(function(n){return"checkbox"===n.type})&&"ResetOnRowClick"===this.selectionSettings.checkboxMode&&u?this.selectRowsByRange(t.isUndefined(this.prevRowIndex)?n:this.prevRowIndex,n):this.addRowsToSelection([n]),this.selectCellsByRange(t.isUndefined(this.prevCIdxs)?{rowIndex:n,cellIndex:i}:this.prevCIdxs,{rowIndex:n,cellIndex:i}),this.updateAutoFillPosition(),this.drawBorders()):((this.addRowsToSelection([n]),"Both"===this.selectionSettings.mode)?(r=this.parent.getColumns().find(function(n){return"checkbox"===n.type}),f=r&&r.index!==i,f&&!this.isMultiCtrlRequestCell?this.selectCell({rowIndex:n,cellIndex:i},this.selectionSettings.enableToggle):r&&!f||this.addCellsToSelection([{rowIndex:n,cellIndex:i}])):this.addCellsToSelection([{rowIndex:n,cellIndex:i}]),this.showHideBorders("none")):(this.isDragged||this.selectRow(n,this.selectionSettings.enableToggle),this.selectCell({rowIndex:n,cellIndex:i},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders());this.isDragged=!1},n.prototype.onCellFocused=function(n){var s,e,h,f,a,o;if(this.parent.frozenRows&&n.container.isHeader&&n.byKey&&("upArrow"===n.keyArgs.action?n.isJump=this.parent.allowFiltering?"INPUT"===n.element.tagName:"TH"===n.element.tagName:"downArrow"===n.keyArgs.action?(s=Number(n.element.parentElement.getAttribute(c))-1,n.isJump=0===s):"ctrlHome"===n.keyArgs.action&&(n.isJump=!0)),e=(n.container.isHeader&&n.isJump||n.container.isContent&&!n.container.isSelectable)&&!(n.byKey&&"space"===n.keyArgs.action)&&!(n.element.classList.contains("e-detailrowexpand")||n.element.classList.contains("e-detailrowcollapse")),h=n.container.isHeader&&"TD"!==n.element.tagName&&!t.closest(n.element,"."+v)&&!(n.byKey&&"space"===n.keyArgs.action),n.byKey&&!e){var l=n.container.isContent?n.container.indexes:n.indexes,i=l[0],u=l[1],r=this.focus.getPrevIndexes();if(((n.element.parentElement.querySelector(".e-rowcelldrag")||n.element.parentElement.querySelector(".e-dtdiagonalright")||n.element.parentElement.querySelector(".e-dtdiagonaldown"))&&(r.cellIndex=r.cellIndex-1),this.parent.frozenRows)&&(n.container.isHeader&&("TD"===n.element.tagName||t.closest(n.element,"."+v))?(f=this.parent.getHeaderTable().querySelector("thead").childElementCount,this.parent.editSettings.showAddNewRow&&"Top"===this.parent.editSettings.newRowPosition&&"upArrow"===n.keyArgs.action&&f++,i-=f,r.rowIndex=t.isNullOrUndefined(r.rowIndex)?null:r.rowIndex-f):(i+=this.parent.frozenRows,r.rowIndex=0!==r.rowIndex&&t.isNullOrUndefined(r.rowIndex)?null:r.rowIndex+this.parent.frozenRows)),this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(i=parseInt(n.element.parentElement.getAttribute("aria-rowindex"),10)-1),!(h||-1===["ctrlPlusA","escape"].indexOf(n.keyArgs.action)&&"space"!==n.keyArgs.action&&i===r.rowIndex&&u===r.cellIndex)||this.selectionSettings.allowColumnSelection){this.parent.enableVirtualization&&(i=parseInt(n.element.parentElement.getAttribute("aria-rowindex"),10)-1,!this.parent.enableColumnVirtualization&&!this.parent.groupSettings.columns.length&&this.parent.totalDataRecordsCount>=1&&("ctrlHome"===n.keyArgs.action?(i=0,this.parent.isFocusFirstCell=!0):"ctrlEnd"===n.keyArgs.action&&(i=this.parent.totalDataRecordsCount-1,this.isFocusLastCell=!0)));!this.parent.editSettings.showAddNewRow||"Top"!==this.parent.editSettings.newRowPosition||this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||"downArrow"!==n.keyArgs.action||i--;this.preventFocus=!0;a=this.getKeyColIndex(n);(this.needColumnSelection&&(u=a),this.parent.element.classList.contains("e-gridcell-read")&&("tab"===n.keyArgs.action||"shiftTab"===n.keyArgs.action||"rightArrow"===n.keyArgs.action||"leftArrow"===n.keyArgs.action))&&(o=this.target.getAttribute("aria-label"),o=this.target.innerHTML+" column header "+this.parent.getColumnByIndex(u).field,this.target.setAttribute("aria-label",o));switch(n.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=n.element;this.isKeyAction=!0;this.applyDownUpKey(i,u);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(i,u);break;case"shiftDown":case"shiftUp":this.shiftDownKey(i,u);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(i,u);break;case"home":case"end":u="end"===n.keyArgs.action?this.getLastColIndex(i):0;this.applyHomeEndKey(i,u);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(i,u);break;case"escape":this.clearSelection();this.parent.clipboardModule&&window.navigator.clipboard.writeText("");break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(n.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(i)}this.needColumnSelection=!1;this.preventFocus=!1;this.positionBorders();this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders());this.updateAutoFillPosition()}}else!e||this.parent.isCheckBoxSelection||this.selectionSettings.persistSelection&&(n.parent.classList.contains("e-recordplusexpand")||n.parent.classList.contains("e-recordpluscollapse")||n.parent.classList.contains("e-groupcaption"))||this.clearSelection()},n.prototype.getKeyColIndex=function(n){var f,r=null,e=n.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&i(n.element,"e-columnheader"))if(this.needColumnSelection=!!n.container.isHeader,e){if("rightArrow"===n.keyArgs.action||"leftArrow"===n.keyArgs.action)return r;f=e.getAttribute("data-mappinguid");var u=this.getstackedColumns(this.parent.getColumnByUid(f).columns),o=this.parent.getColumnIndexByUid(u[u.length-1].uid),s=this.parent.getColumnIndexByUid(u[0].uid);r=this.prevColIndex>=o?s:o}else t.isNullOrUndefined(n.element.querySelector(".e-headercelldiv"))||(r=this.parent.getColumnIndexByUid(n.element.querySelector(".e-headercelldiv").getAttribute("data-mappinguid")));return r},n.prototype.ctrlPlusA=function(){if(this.isRowType()&&!this.isSingleSel()){var n=this.parent.getRowsObject();this.selectRowsByRange(n[0].index,n[n.length-1].index)}this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},n.prototype.applySpaceSelection=function(n){n.classList.contains("e-checkselectall")?(this.checkedTarget=n,this.checkSelectAll(this.checkedTarget)):n.classList.contains("e-checkselect")&&(this.checkedTarget=n,this.checkSelect(this.checkedTarget))},n.prototype.applyDownUpKey=function(n,t){var i=this.parent;!this.parent.isCheckBoxSelection||"Check"!==this.parent.checkAllRows||this.selectionSettings.persistSelection||this.selectionSettings.checkboxOnly||(this.checkSelectAllAction(!1),this.checkedTarget=null);this.isRowType()&&!this.selectionSettings.checkboxOnly&&(this.parent.frozenRows,this.selectRow(n,!0),this.applyUpDown(i.selectedRowIndex));this.isCellType()&&this.selectCell({rowIndex:n,cellIndex:t},!0);this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(t)},n.prototype.applyUpDown=function(n){var r,t,i;n<0||(this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]),r=parseInt(this.target.getAttribute(ft),10)-1,t=this.contentRenderer.getRowByIndex(n),(t&&(this.target=t.getElementsByClassName(v)[parseInt(r.toString(),10)]),this.addAttribute(this.target),this.parent.element.classList.contains("e-gridcell-read"))&&(i=this.target.getAttribute("aria-label"),i=this.target.innerHTML,this.target.setAttribute("aria-label",i)))},n.prototype.applyRightLeftKey=function(n,t){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(t):this.isCellType()&&(this.selectCell({rowIndex:n,cellIndex:t},!0),this.addAttribute(this.target))},n.prototype.applyHomeEndKey=function(n,t){this.isCellType()?this.selectCell({rowIndex:n,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(n,t))},n.prototype.shiftDownKey=function(n,i){this.isMultiShiftRequest=!0;this.isRowType()&&!this.isSingleSel()&&(t.isUndefined(this.prevRowIndex)?this.isPartialSelection?this.selectRow(n,!0):this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,n),this.applyUpDown(n)));this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:n,cellIndex:i});this.isMultiShiftRequest=!1},n.prototype.applyShiftLeftRightKey=function(n,t){this.isMultiShiftRequest=!0;this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,t):this.selectCellsByRange(this.prevCIdxs,{rowIndex:n,cellIndex:t});this.isMultiShiftRequest=!1},n.prototype.getstackedColumns=function(n){for(var i=[],t=0,r=n.length;t<r;t++)n[parseInt(t.toString(),10)].columns?this.getstackedColumns(n[parseInt(t.toString(),10)].columns):i.push(n[parseInt(t.toString(),10)]);return i},n.prototype.applyCtrlHomeEndKey=function(n,t){this.isRowType()&&(this.selectRow(n,!0),this.parent.enableVirtualization||this.parent.enableColumnVirtualization||this.addAttribute(this.parent.getCellFromIndex(n,t)));this.isCellType()&&this.selectCell({rowIndex:n,cellIndex:t},!0)},n.prototype.addRemoveClassesForRow=function(n,t,i){for(var u=[],r=3;r<arguments.length;r++)u[r-3]=arguments[r];if(n){var f=[].slice.call(n.getElementsByClassName(v)),e=n.querySelector(".e-detailrowcollapse")||n.querySelector(".e-detailrowexpand"),o=n.querySelector(".e-rowdragdrop");e&&f.push(e);o&&f.push(o);ui.apply(void 0,[f,t].concat(u))}this.getRenderer().setSelection(n?n.getAttribute("data-uid"):null,t,i)},n.prototype.isRowType=function(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},n.prototype.isCellType=function(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},n.prototype.isSingleSel=function(){return"Single"===this.selectionSettings.type},n.prototype.getRenderer=function(){return t.isNullOrUndefined(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(ni.Content)),this.contentRenderer},n.prototype.getSelectedRecords=function(){var n=[];return n=!this.selectionSettings.persistSelection&&this.selectedRecords.length?this.parent.getRowsObject().filter(function(n){return n.isSelected}).map(function(n){return n.data}):this.persistSelectedData,this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&(n=this.virtualSelectedData),n},n.prototype.selectColumn=function(n){var i=this.parent,f,e,s;if(!t.isNullOrUndefined(i.getColumns()[parseInt(n.toString(),10)])){var u=i.getColumnByIndex(n),r=i.getColumnHeaderByUid(u.uid),o=r.classList.contains("e-columnselection");if(i.selectionSettings.allowColumnSelection){if(f=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(n)>-1,this.clearColDependency(),!this.selectionSettings.enableToggle||f||!o){if(e={columnIndex:n,headerCell:r,column:u,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest},this.onActionBegin(e,kc),e.cancel)return void this.disableInteracted();!f&&o&&i.selectionSettings.enableToggle&&n===this.prevColIndex||this.updateColSelection(r,n);s={columnIndex:n,headerCell:r,column:u,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(s,dc)}this.updateColProps(n)}}},n.prototype.selectColumnsByRange=function(n,i){var e=this.parent,u,f,r;if(!t.isNullOrUndefined(e.getColumns()[parseInt(n.toString(),10)])){if(u=[],"Single"===e.selectionSettings.type||t.isNullOrUndefined(i))u[0]=n;else for(f=n<i,r=n;f?r<=i:r>=i;f?r++:r--)u.push(r);this.selectColumns(u)}},n.prototype.selectColumns=function(n){var t=this.parent,r=this.getselectedCols(),u,i,f,e;if("Single"===t.selectionSettings.type&&(n=[n[0]]),t.selectionSettings.allowColumnSelection)if(this.clearColDependency(),u={columnIndex:n[0],headerCell:r,columnIndexes:n,column:t.getColumnByIndex(n[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest},this.onActionBegin(u,kc),u.cancel)this.disableInteracted();else{for(i=0,f=n.length;i<f;i++)this.updateColSelection(t.getColumnHeaderByUid(t.getColumnByIndex(n[parseInt(i.toString(),10)]).uid),n[parseInt(i.toString(),10)]);r=this.getselectedCols();e={columnIndex:n[0],headerCell:r,columnIndexes:n,column:t.getColumnByIndex(n[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(e,dc);this.updateColProps(n[0])}},n.prototype.selectColumnWithExisting=function(n){var i=this.parent,f,r,u,e;if(!t.isNullOrUndefined(i.getColumns()[parseInt(n.toString(),10)])&&(f=i.getColumnHeaderByUid(i.getColumnByIndex(n).uid),r=this.getselectedCols(),"Single"===i.selectionSettings.type&&this.clearColDependency(),i.selectionSettings.allowColumnSelection)){if(this.selectedColumnsIndexes.indexOf(n)>-1)this.clearColumnSelection(n);else{if(u={columnIndex:n,headerCell:r,columnIndexes:this.selectedColumnsIndexes,column:i.getColumnByIndex(n),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest},this.onActionBegin(u,kc),u.cancel)return void this.disableInteracted();this.updateColSelection(f,n);e={columnIndex:n,headerCell:r=this.getselectedCols(),column:i.getColumnByIndex(n),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(e,dc)}this.updateColProps(n)}},n.prototype.clearColumnSelection=function(n){var r;if(this.isColumnSelected){if(r=this.parent,!t.isNullOrUndefined(n)&&-1===this.selectedColumnsIndexes.indexOf(n))return;var f=t.isNullOrUndefined(n)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:n,e=r.getColumnByIndex(f),o=r.getColumnHeaderByUid(e.uid),s={columnIndex:f,headerCell:o,columnIndexes:this.selectedColumnsIndexes,column:e,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted};if(this.columnDeselect(s,od))return void this.disableInteracted();for(var h=t.isNullOrUndefined(n)?[].slice.call(r.getHeaderContent().getElementsByClassName("e-columnselection")):[o],c=this.getSelectedColumnCells(n),i=0,u=h.length;i<u;i++)ui([h[parseInt(i.toString(),10)]],!1,"e-columnselection");for(i=0,u=c.length;i<u;i++)ui([c[parseInt(i.toString(),10)]],!1,"e-columnselection");t.isNullOrUndefined(n)?(this.columnDeselect(s,sd),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(function(n){return n.isSelected=!1})):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(n),1),this.parent.getColumns()[parseInt(n.toString(),10)].isSelected=!1)}},n.prototype.getselectedCols=function(){var n,t=this.parent,i;if(this.selectedColumnsIndexes.length>1)for(n=[],i=0;i<this.selectedColumnsIndexes.length;i++)n.push(t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[parseInt(i.toString(),10)]).uid));else n=t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return n},n.prototype.getSelectedColumnCells=function(n){for(var u=this.parent,f=t.isNullOrUndefined(this.parent.rowTemplate)?u.getDataRows():u.getRows(),i=[],e=t.isNullOrUndefined(n)?".e-columnselection":'[aria-colindex="'+(n+1)+'"]',r=0,o=f.length;r<o;r++)i=i.concat([].slice.call(f[parseInt(r.toString(),10)].querySelectorAll(e)));return i},n.prototype.columnDeselect=function(n,t){return"columnDeselected"===t&&delete n.cancel,this.onActionComplete(n,t),n.cancel},n.prototype.updateColProps=function(n){this.prevColIndex=n;this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},n.prototype.clearColDependency=function(){this.clearColumnSelection();this.selectedColumnsIndexes=[]},n.prototype.updateColSelection=function(n,i){var u,r,o,e,f;if(!t.isNullOrUndefined(this.parent.getColumns()[parseInt(i.toString(),10)]))for(u=t.isNullOrUndefined(this.parent.rowTemplate)?this.parent.getDataRows():this.parent.getRows(),this.selectedColumnsIndexes.push(i),this.parent.getColumns()[parseInt(i.toString(),10)].isSelected=!0,i+=this.parent.getIndentCount(),ui([n],!0,"e-columnselection"),r=0,o=u.length;r<o;r++)if(u[parseInt(r.toString(),10)].classList.contains(y))if((u[parseInt(r.toString(),10)].classList.contains(ut)||u[parseInt(r.toString(),10)].classList.contains(ii))&&"Normal"===this.parent.editSettings.mode&&!t.isNullOrUndefined(u[parseInt(r.toString(),10)].querySelector("tr").childNodes[parseInt(i.toString(),10)]))ui([u[parseInt(r.toString(),10)].querySelector("tr").childNodes[parseInt(i.toString(),10)]],!0,"e-columnselection");else if(this.parent.isSpan&&this.parent.isFrozenGrid())for(e=u[parseInt(r.toString(),10)].querySelectorAll(".e-rowcell"),f=0;f<e.length;f++)e[parseInt(f.toString(),10)].getAttribute("aria-colindex")===n.getAttribute("aria-colindex")&&ui([e[parseInt(f.toString(),10)]],!0,"e-columnselection");else t.isNullOrUndefined(u[parseInt(r.toString(),10)].childNodes[parseInt(i.toString(),10)])||ui([u[parseInt(r.toString(),10)].childNodes[parseInt(i.toString(),10)]],!0,"e-columnselection")},n.prototype.headerSelectionHandler=function(n){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(n):this.isMultiShiftRequest?this.selectColumnsByRange(t.isUndefined(this.prevColIndex)?n:this.prevColIndex,n):this.selectColumnWithExisting(n)},n.prototype.addEventListener_checkbox=function(){var n=this;this.parent.on(wi,this.dataReady,this);this.onDataBoundFunction=this.onDataBound.bind(this);this.parent.addEventListener(ti,this.onDataBoundFunction);this.parent.on(tv,this.onDataBoundFunction);this.parent.on(k,this.checkBoxSelectionChanged,this);this.parent.on(va,this.initPerisistSelection,this);this.parent.on(ai,this.setCheckAllForEmptyGrid,this);this.actionCompleteFunc=this.actionCompleteHandler.bind(this);this.parent.addEventListener(s,this.actionCompleteFunc);this.parent.on(kt,this.clickHandler,this);this.resizeEndFn=function(){n.updateAutoFillPosition();n.drawBorders()};this.resizeEndFn.bind(this);this.parent.addEventListener(os,this.resizeEndFn)},n.prototype.removeEventListener_checkbox=function(){this.parent.off(wi,this.dataReady);this.parent.removeEventListener(ti,this.onDataBoundFunction);this.parent.removeEventListener(s,this.actionCompleteFunc);this.parent.off(tv,this.onDataBoundFunction);this.parent.off(ai,this.setCheckAllForEmptyGrid);this.parent.off(kt,this.clickHandler);this.parent.removeEventListener(os,this.resizeEndFn);this.parent.off(va,this.initPerisistSelection)},n.prototype.setCheckAllForEmptyGrid=function(){var i=this.getCheckAllBox(),n;i&&(this.parent.isCheckBoxSelection=!0,n=i.nextElementSibling,t.removeClass([n],["e-check","e-stop","e-uncheck"]),t.addClass([n.parentElement],["e-checkbox-disabled"]))},n.prototype.dataReady=function(n){this.isHeaderCheckboxClicked=!1;var t=this.parent.enableInfiniteScrolling&&"infiniteScroll"===n.requestType;"virtualscroll"===n.requestType||this.parent.isPersistSelection||t||(this.disableUI=!(this.parent.enableImmutableMode||"save"===n.requestType&&"add"===n.action),this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},n.prototype.actionCompleteHandler=function(n){"save"===n.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()},n.prototype.selectRowIndex=function(n){this.parent.isSelectedRowIndexUpdating=!0;this.parent.selectedRowIndex=t.isNullOrUndefined(this.parent.selectedRowIndex)||-1===this.parent.selectedRowIndex||!this.parent.enablePersistence?n:-1},n.prototype.disableInteracted=function(){this.isInteracted=!1},n.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},n}(),pit=function(){function n(n){this.headerFocus=!1;this.parent=n;this.addEventListener()}return n.prototype.hasNonNumericCharacters=function(n){for(var t,r=!1,i=0,u=n;i<u.length;i++){if(t=u[i],(t<"0"||t>"9")&&"."!==t)return!0;if("."===t){if(r)return!0;r=!0}}return!1},n.prototype.search=function(n){var i=this.parent,r;(n=t.isNullOrUndefined(n)?"":n,rr(i))?i.notify(si,{instance:this,handler:this.search,arg1:n}):n!==i.searchSettings.key?((this.headerFocus=!1,""===n||this.hasNonNumericCharacters(n))?i.searchSettings.key=n.toString():(r=n.split("."),i.searchSettings.key="."===n||-1===n.indexOf(".")||r[0].startsWith("0")&&r[0].length>1?n.toString():parseFloat(n).toString()),i.dataBind()):this.refreshSearch?i.refresh():this.headerFocus=!1},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(wt,this.onPropertyChanged,this),this.parent.on(ep,this.onSearchComplete,this),this.parent.on(l,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(s,this.actionCompleteFunc),this.parent.on(vs,this.cancelBeginEvent,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(wt,this.onPropertyChanged),this.parent.off(ep,this.onSearchComplete),this.parent.off(l,this.destroy),this.parent.removeEventListener(s,this.actionCompleteFunc),this.parent.off(vs,this.cancelBeginEvent))},n.prototype.destroy=function(){this.removeEventListener()},n.prototype.onPropertyChanged=function(n){n.module===this.getModuleName()&&(t.isNullOrUndefined(n.properties.key)?this.parent.notify(ot,{requestType:"searching",type:p}):this.parent.notify(ot,{requestType:"searching",type:p,searchString:this.parent.searchSettings.key}))},n.prototype.onSearchComplete=function(n){this.parent.trigger(s,t.extend(n,{searchString:this.parent.searchSettings.key,requestType:"searching",type:s}))},n.prototype.onActionComplete=function(n){this.refreshSearch&&"refresh"===n.requestType&&this.headerFocus&&(this.headerFocus=!1,this.parent.focusModule.focus(),t.addClass([this.parent.focusModule.currentInfo.element],["e-focused"]));this.refreshSearch="searching"!==n.requestType},n.prototype.cancelBeginEvent=function(n){"searching"===n.requestType&&this.parent.setProperties({searchSettings:{key:""}},!0)},n.prototype.getModuleName=function(){return"search"},n}(),tht=function(){function n(n){this.colName=[];this.isShowHide=!1;this.parent=n;this.addEventListener();this.widthService=new lv(n)}return n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:yf,handler:this.batchChanges},{event:ktt,handler:this.resetColumnState}],yt(this.parent,this.evtHandlers,!0,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||yt(this.parent,this.evtHandlers,!1)},n.prototype.batchChanges=function(){this.isShowHide&&(this.isShowHide=!1,this.setVisible(this.colName,this.changedCol),this.changedCol=this.colName=[])},n.prototype.show=function(n,t){var f=this.getToggleFields(n),i=this.getColumns(f,t),r,u;if(this.parent.notify(gu,{module:"edit"}),this.parent.enableVirtualization&&this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length)r=i.filter(function(n){return!n.visible}),r.forEach(function(n){return n.visible=!0}),r.length>0&&this.setVisible(r);else{for(u=0;u<i.length;u++)i[parseInt(u.toString(),10)].visible=!0;this.setVisible(i)}},n.prototype.hide=function(n,t){var f=this.getToggleFields(n),i=this.getColumns(f,t),r,u;if(this.parent.notify(gu,{module:"edit"}),this.parent.enableVirtualization&&this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length)r=i.filter(function(n){return n.visible}),r.forEach(function(n){return n.visible=!1}),r.length>0&&this.setVisible(r);else{for(u=0;u<i.length;u++)i[parseInt(u.toString(),10)].visible=!1;this.setVisible(i)}},n.prototype.getToggleFields=function(n){return"string"==typeof n?[n]:n},n.prototype.getColumns=function(n,t){var i=this;return uf(n,function(n){return uf(i.parent.columnModel,function(i){if(i[""+t]===n)return i})[0]})},n.prototype.batchActionPrevent=function(n,t){return void 0===t&&(t=[]),!rr(this.parent)||(this.colName=n,this.changedCol=t,this.parent.closeEdit(),!1)},n.prototype.resetColumnState=function(){if(this.isShowHide)for(var n=0;n<this.colName.length;n++)this.colName[parseInt(n.toString(),10)].visible=!this.colName[parseInt(n.toString(),10)].visible},n.prototype.setVisible=function(n,i){var r=this,u,f;(void 0===i&&(i=[]),this.isShowHide=!0,this.batchActionPrevent(n,i))&&(u={requestType:"columnstate",cancel:!1,columns:i=i.length>0?i:n},(this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&this.parent.groupModule.groupSettings.columns.length>0&&(this.parent.contentModule.visibleRows=[]),this.parent.trigger(p,u,function(f){var c=r.parent.getColumns(),e,o,h;if(n=t.isNullOrUndefined(n)?c:n,f.cancel)return r.parent.notify(la,{showHideArgs:f}),void(n.length>0&&(n[0].visible=!0));r.parent.notify(so,u);b(r.parent)&&r.parent.contentModule.emptyVcRows();e=r.parent.element.querySelector(".e-addedrow");r.parent.editSettings.showAddNewRow&&e&&(t.remove(e),(r.parent.enableVirtualization||r.parent.enableInfiniteScrolling)&&(r.parent.isAddNewRow=!0),r.parent.addNewRowFocus=!0,r.parent.isEdit=!1);r.parent.allowSelection&&r.parent.getSelectedRecords().length&&!r.parent.selectionSettings.persistSelection&&r.parent.clearSelection();r.parent.enableColumnVirtualization||(r.parent.isFrozenGrid()||r.parent.enableColumnSpan)&&n.length?r.parent.notify(rh,{isModeChg:!0}):r.parent.notify(br,n);o={requestType:"columnstate",columns:i};r.parent.trigger(s,o);h=!r.parent.element.querySelector(".e-addedrow");r.parent.editSettings.showAddNewRow&&h&&(r.parent.isEdit=!1,r.parent.addRecord(),r.parent.enableVirtualization||r.parent.enableInfiniteScrolling||r.parent.notify(hr,{}));"All"!==r.parent.columnQueryMode&&r.parent.refresh()}),this.parent.groupSettings.columns.length)||(this.parent.autoFit?this.parent.preventAdjustColumns():this.parent.allowResizing&&"Normal"===this.parent.resizeSettings.mode&&(f=-1===this.parent.getHeaderTable().style.width.indexOf("px"),this.widthService.setWidthToTable(f))))},n}(),hb=function(){function n(n){this.previousValues={top:0,left:0};this.oneTimeReady=!0;this.parent=n;this.widthService=new lv(n);this.addEventListener()}return n.prototype.getModuleName=function(){return"scroll"},n.prototype.setWidth=function(n){if(this.parent.element.style.width=t.formatUnit(this.parent.width),n&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element){var i=this.parent.toolbarModule.toolbar.element,u=i.querySelector(".e-toolbar-left"),f=i.querySelector(".e-toolbar-center"),e=i.querySelector(".e-toolbar-right"),o=i.querySelector(".e-toolbar-items"),s=u?u.clientWidth:0,h=f?f.clientWidth:0,c=e?e.clientWidth:0,l=o?o.clientWidth:0,r=i?i.clientWidth:0;(!this.parent.enableAdaptiveUI||s>r||h>r||c>r||l>r)&&this.parent.toolbarModule.toolbar.refreshOverflow()}},n.prototype.setHeight=function(){var u=0,f=this.parent.getContent().querySelector("."+lt),i=this.parent.height,e,r;this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&("auto"!==this.parent.height&&this.parent.height.toString().indexOf("%")<0&&(i=parseInt(i,10)-n.getScrollBarWidth()),e=this.parent.getContent().querySelector(".e-movablescrollbar"),this.parent.height.toString().indexOf("%")>0&&!t.isNullOrUndefined(e)&&(i="calc("+i+" - "+e.scrollHeight+"px)"));!this.parent.enableVirtualization&&this.parent.frozenRows&&"auto"!==this.parent.height&&"100%"!==this.parent.height?(r=this.parent.getHeaderContent().querySelector(h+":not(.e-masked-tbody)"),u=r?r.offsetHeight:0,r&&u?u-=r.getElementsByClassName(ii).length*this.parent.getRowHeight():!this.parent.isInitialLoad&&"Shimmer"===this.parent.loadingIndicator.indicatorType&&this.parent.getHeaderContent().querySelector(".e-masked-table")&&(i=parseInt(i,10)-this.parent.frozenRows*this.parent.getRowHeight()),f.style.height=t.formatUnit(parseInt(i,10)-u)):f.style.height=t.formatUnit(i);this.ensureOverflow(f);this.parent.isFrozenGrid()&&this.refresh()},n.prototype.setPadding=function(){var i=this.parent.getHeaderContent(),t=n.getScrollBarWidth()-this.getThreshold(),r=this.getCssProperties();i.querySelector("."+ct).style[r.border]=t>0?"1px":"0px";i.style[r.padding]=t>0?t+"px":"0px"},n.prototype.removePadding=function(n){var i=this.getCssProperties(n),r=this.parent.getHeaderContent().querySelector("."+ct),t;r.style[i.border]="";r.parentElement.style[i.padding]="";t=this.parent.getFooterContent();t&&t.classList.contains("e-footerpadding")&&t.classList.remove("e-footerpadding")},n.prototype.refresh=function(){var n,t;"100%"===this.parent.height&&(n=this.parent.getContent(),this.parent.element.style.height="100%",t=this.widthService.getSiblingsHeight(n),n.style.height="calc(100% - "+t+"px)")},n.prototype.getThreshold=function(){return"mozilla"===t.Browser.info.name?.5:1},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ai,this.wireEvents,this),this.parent.on(k,this.wireEvents,this),this.parent.on(w,this.onPropertyChanged,this),this.parent.on(wl,this.wireEvents,this),this.parent.on(bt,this.setScrollLeft,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ai,this.wireEvents),this.parent.off(k,this.wireEvents),this.parent.off(w,this.onPropertyChanged),this.parent.off(wl,this.wireEvents),this.parent.off(bt,this.setScrollLeft),this.unwireEvents())},n.prototype.unwireEvents=function(){this.parent.frozenRows&&this.header&&(t.EventHandler.remove(this.header,"touchstart pointerdown",this.setPageXY),t.EventHandler.remove(this.header,"touchmove pointermove",this.onTouchScroll));var n=this.parent.getContent()?this.parent.getContent().querySelector(".e-movablescrollbar"):null;this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&(n&&t.EventHandler.remove(n,"scroll",this.onCustomScrollbarScroll),this.content&&(t.EventHandler.remove(this.content,"scroll",this.onCustomScrollbarScroll),t.EventHandler.remove(this.content,"touchstart pointerdown",this.setPageXY),/macintosh|ipad/.test(t.Browser.userAgent.toLowerCase())&&t.Browser.isDevice||t.EventHandler.remove(this.content,"touchmove pointermove",this.onTouchScroll)),this.header&&(t.EventHandler.remove(this.header,"scroll",this.onCustomScrollbarScroll),t.EventHandler.remove(this.header,"touchstart pointerdown",this.setPageXY),t.EventHandler.remove(this.header,"touchmove pointermove",this.onTouchScroll)));this.content&&t.EventHandler.remove(this.content,"scroll",this.contentScrollHandler);this.header&&t.EventHandler.remove(this.header,"scroll",this.headerScrollHandler);this.contentScrollHandler=null;this.headerScrollHandler=null;this.parent.aggregates.length&&this.parent.getFooterContent()&&t.EventHandler.remove(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll)},n.prototype.setScrollLeft=function(){this.parent.getHeaderContent().querySelector("."+ct).scrollLeft=this.previousValues.left},n.prototype.onContentScroll=function(n){var i=this,r=n,u=r.classList.contains(ct);return function(n){var f,o,s,l,c,e,a,v;if(null!==i.content.querySelector(h)&&!i.parent.isPreventScrollEvent){if(f=n.target,i.parent.frozenRows&&(i.content.scrollTop>0&&i.parent.frozenRows?t.addClass([i.parent.element],"e-top-shadow"):t.removeClass([i.parent.element],"e-top-shadow")),i.parent.element.querySelectorAll(".e-leftfreeze,.e-fixedfreeze,.e-rightfreeze").length){if(o=i.parent.getContent().querySelectorAll('.e-freezeerror:not([style*="display: none"])'),s=i.parent.getContent().querySelectorAll('.e-fixederror:not([style*="display: none"])'),(i.parent.enableRtl?Math.abs(f.scrollLeft):f.scrollLeft)<=1||!i.parent.getVisibleFrozenLeftCount()?t.removeClass([i.parent.element],"e-left-shadow"):t.addClass([i.parent.element],"e-left-shadow"),l=i.parent.enableRtl?Math.abs(f.scrollLeft):f.scrollLeft,Math.round(l+f.clientWidth)>=f.scrollWidth-1&&i.parent.getVisibleFrozenRightCount()?t.removeClass([i.parent.element],"e-right-shadow"):t.addClass([i.parent.element],"e-right-shadow"),c=[].slice.call(i.parent.getContent().querySelectorAll(".e-row:not(.e-hiddenrow)")),(1===c.length&&o.length||i.parent.element.querySelector('.e-freeze-autofill:not([style*="display: none"])')||s.length)&&f.scrollLeft!==i.previousValues.left)return void(f.scrollLeft=i.previousValues.left);if(1!==c.length&&(o.length||s.length)&&f.scrollTop!==i.previousValues.top)return void(f.scrollTop=i.previousValues.top)}e=f.scrollLeft;(t.isNullOrUndefined(i.parent.infiniteScrollModule)||!i.parent.enableInfiniteScrolling||i.parent.isEdit&&(!i.parent.editSettings.showAddNewRow||i.parent.element.querySelector(".e-editedrow"))||i.parent.notify(ra,{target:n.target,isLeft:i.previousValues.left!==e}),i.parent.groupSettings.columns.length&&i.parent.groupSettings.enableLazyLoading)&&(a=i.previousValues.top<i.parent.getContent().firstElementChild.scrollTop,i.parent.notify(vw,{scrollDown:a}));i.parent.notify(hw,{});v=f.classList.contains("e-summarycontent");i.previousValues.left!==e?(i.parent.notify(ca,n),r.scrollLeft=e,v&&(i.header.scrollLeft=e),i.previousValues.left=e,i.parent.notify(hl,{left:e})):i.previousValues.top=u?f.scrollTop:i.previousValues.top}}},n.prototype.onCustomScrollbarScroll=function(n,t){var i=this,r=n,u=t;return function(n){if(null!==i.content.querySelector(h)){var t=n.target.scrollLeft;i.previousValues.left!==t&&(r.scrollLeft=t,u.scrollLeft=t,i.previousValues.left=t,i.parent.notify(hl,{left:t}),i.parent.isDestroyed)}}},n.prototype.onTouchScroll=function(n){var t=this,i=n;return function(n){if("mouse"!==n.pointerType){var e=t.parent.isFrozenGrid(),f=t.getPointXY(n),r=i.scrollLeft+(t.pageXY.x-f.x),u=t.parent.getHeaderContent().querySelector("."+ct),o=t.parent.getContent().querySelector("."+lt);t.previousValues.left===r||r<0||u.scrollWidth-u.clientWidth<r||(n.preventDefault(),u.scrollLeft=r,o.scrollLeft=r,e&&t.parent.enableColumnVirtualization&&(t.parent.getContent().querySelector(".e-movablescrollbar").scrollLeft=r),t.pageXY.x=f.x,t.previousValues.left=r)}}},n.prototype.setPageXY=function(){var n=this;return function(t){"mouse"!==t.pointerType&&(n.pageXY=n.getPointXY(t))}},n.prototype.getPointXY=function(n){var t={x:0,y:0};return n.touches&&n.touches.length?(t.x=n.touches[0].pageX,t.y=n.touches[0].pageY):(t.x=n.pageX,t.y=n.pageY),t},n.prototype.getScrollbleParent=function(n){if(null===n)return null;var i=t.isNullOrUndefined(n.tagName)?n.scrollingElement:n,r=document.defaultView.getComputedStyle(i,null).overflowY;return i.scrollHeight>i.clientHeight&&"hidden"!==r&&"visible"!==r||"HTML"===n.tagName||"BODY"===n.tagName?n:this.getScrollbleParent(n.parentNode)},n.prototype.addStickyListener=function(n){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement);n&&this.parentElement?(this.eventElement="HTML"===this.parentElement.tagName||"BODY"===this.parentElement.tagName?document:this.parentElement,t.EventHandler.add(this.eventElement,"scroll",this.makeStickyHeader,this)):this.eventElement&&(t.EventHandler.remove(this.eventElement,"scroll",this.makeStickyHeader),this.eventElement=null)},n.prototype.resizeFrozenRowBorder=function(){var t,i;this.parent.element.querySelector(".e-frozenrow-border")?t=this.parent.element.querySelector(".e-frozenrow-border"):(t=this.parent.createElement("div",{className:"e-frozenrow-border"}),this.parent.element.insertBefore(t,this.parent.element.querySelector(".e-gridcontent")));i="auto"!==this.parent.height?n.getScrollBarWidth():0;t.style.width=this.parent.element.offsetWidth-i-.5+"px"},n.prototype.wireEvents=function(){var n=this,u,i,r,f,e,o;this.oneTimeReady&&(u=this.parent.isFrozenGrid(),this.content=this.parent.getContent().querySelector("."+lt),this.header=this.parent.getHeaderContent().querySelector("."+ct),i=this.parent.getContent().querySelector(".e-movablescrollbar"),this.parent.frozenRows&&this.header&&this.content&&(t.EventHandler.add(this.header,"touchstart pointerdown",this.setPageXY(),this),t.EventHandler.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this)),u&&i&&this.parent.enableColumnVirtualization&&(t.EventHandler.add(i,"scroll",this.onCustomScrollbarScroll(this.content,this.header),this),t.EventHandler.add(this.content,"scroll",this.onCustomScrollbarScroll(i,this.header),this),t.EventHandler.add(this.header,"scroll",this.onCustomScrollbarScroll(i,this.content),this),t.EventHandler.add(this.header,"touchstart pointerdown",this.setPageXY(),this),t.EventHandler.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this),t.EventHandler.add(this.content,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(t.Browser.userAgent.toLowerCase())&&t.Browser.isDevice||t.EventHandler.add(this.content,"touchmove pointermove",this.onTouchScroll(this.header),this)),this.contentScrollHandler=this.onContentScroll(this.header),this.headerScrollHandler=this.onContentScroll(this.content),t.EventHandler.add(this.content,"scroll",this.contentScrollHandler,this),t.EventHandler.add(this.header,"scroll",this.headerScrollHandler,this),this.parent.aggregates.length&&t.EventHandler.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1);o=this.parent.getContentTable();ab(function(){r=n.header.scrollLeft;f=o.scrollHeight;e=n.parent.getContent().clientHeight},function(){var t={cancel:!1};n.parent.notify(ctt,t);f<e&&"auto"!==n.parent.height&&(n.setLastRowCell(),n.parent.notify(dtt,t));n.parent.frozenRows&&n.resizeFrozenRowBorder();n.parent.enableVirtualization||n.parent.enableInfiniteScrolling||t.cancel||(n.header.scrollLeft=n.previousValues.left,n.content.scrollLeft=n.previousValues.left,n.content.scrollTop=n.previousValues.top);n.parent.enableColumnVirtualization||(n.content.scrollLeft=r,n.parent.isFrozenGrid()&&(n.previousValues.left=r))});this.parent.isPreventScrollEvent=!1},n.prototype.setLastRowCell=function(){var n=this.parent.getContentTable();t.removeClass(n.querySelectorAll("td"),"e-lastrowcell");n.querySelector("tr:nth-last-child(2)")&&this.parent.editSettings.showAddNewRow&&"Bottom"===this.parent.editSettings.newRowPosition&&t.addClass(n.querySelector("tr:nth-last-child(2)").querySelectorAll("td"),"e-lastrowcell");t.addClass(n.querySelectorAll("tr:last-child td"),"e-lastrowcell");this.parent.isSpan&&t.addClass(n.querySelectorAll(".e-row-span-lastrowcell"),"e-lastrowcell")},n.prototype.getCssProperties=function(n){var i={},r=t.isNullOrUndefined(n)?this.parent.enableRtl:n;return i.border=r?"borderLeftWidth":"borderRightWidth",i.padding=r?"paddingLeft":"paddingRight",i},n.prototype.ensureOverflow=function(n){n.style.overflowY="auto"===this.parent.height?"auto":"scroll"},n.prototype.onPropertyChanged=function(n){n.module===this.getModuleName()&&(this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight(),this.setWidth(!t.isNullOrUndefined(n.properties.width)))},n.prototype.makeStickyHeader=function(){var n,f,c,a;if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()&&(n=this.parent.getContent().getClientRects()[0],n)){var v=window.devicePixelRatio,e=this.parent.getHeaderContent(),i=this.parent.element.querySelector(".e-toolbar"),r=this.parent.element.querySelector(".e-groupdroparea"),l=e.offsetHeight+(i?i.offsetHeight:0)+(r?r.offsetHeight:0),o=this.parentElement.getClientRects()[0].top,s=n.top-(o<0?0:o),h=n.left,u=document.body.querySelector("#"+this.parent.element.id+"_columnmenu");(1!==v&&(s=Math.ceil(s)),s<l&&n.bottom>0)?(e.classList.add("e-sticky"),f=0,r&&this.parent.groupSettings.showDropArea&&(this.setSticky(r,f,n.width,h,!0),f+=r.getClientRects()[0].height),i&&(this.setSticky(i,f,n.width,h,!0),f+=i.getClientRects()[0].height),this.setSticky(e,f,n.width,h,!0),t.isNullOrUndefined(u)||(u.style.position="fixed",u.style.top=l+"px")):e.classList.contains("e-sticky")&&(this.setSticky(e,null,null,null,!1),i&&this.setSticky(i,null,null,null,!1),r&&this.setSticky(r,null,null,null,!1),c=this.parent.element.querySelector(".e-ccdlg"),(c&&c.classList.remove("e-sticky"),t.isNullOrUndefined(u))||(u.style.position="absolute",a=n.top-o,u.style.top=a+"px"));this.parent.notify(wtt,{})}},n.prototype.setSticky=function(n,t,i,r,u){u?n.classList.add("e-sticky"):n.classList.remove("e-sticky");n.style.width=null!=i?i+"px":"";n.style.top=null!=t?t+"px":"";n.style.left=null!==r?parseInt(n.style.left,10)!==r?r+"px":n.style.left:""},n.prototype.destroy=function(){var i=this.parent.element,n;i&&(i.querySelector("."+st)||i.querySelector("."+it))&&(this.removeEventListener(),n=this.parent.getContent().querySelector("."+lt),t.EventHandler.remove(n,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),t.removeClass([this.parent.getHeaderContent().querySelector("."+ct)],ct),t.removeClass([n],lt),n.style.height="",this.parent.element.style.width="")},n.getScrollBarWidth=function(){return oi()},n}(),wit=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ou=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},iht=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.templateFn={},t}return wit(i,n),i.prototype.setFormatter=function(n){this.formatFn=n},i.prototype.getFormatter=function(){return this.formatFn},i.prototype.setTemplate=function(n){void 0===n&&(n={});void 0!==this.footerTemplate&&(this.templateFn[t.getEnumValue(e,e.Summary)]={fn:t.compile(this.footerTemplate,n),property:"footerTemplate"});void 0!==this.groupFooterTemplate&&(this.templateFn[t.getEnumValue(e,e.GroupSummary)]={fn:t.compile(this.groupFooterTemplate,n),property:"groupFooterTemplate"});void 0!==this.groupCaptionTemplate&&(this.templateFn[t.getEnumValue(e,e.CaptionSummary)]={fn:t.compile(this.groupCaptionTemplate,n),property:"groupCaptionTemplate"})},i.prototype.getTemplate=function(n){return this.templateFn[t.getEnumValue(e,n)]},i.prototype.setPropertiesSilent=function(n){this.setProperties(n,!0)},ou([t.Property()],i.prototype,"type",void 0),ou([t.Property()],i.prototype,"field",void 0),ou([t.Property()],i.prototype,"columnName",void 0),ou([t.Property()],i.prototype,"format",void 0),ou([t.Property()],i.prototype,"footerTemplate",void 0),ou([t.Property()],i.prototype,"groupFooterTemplate",void 0),ou([t.Property()],i.prototype,"groupCaptionTemplate",void 0),ou([t.Property()],i.prototype,"customAggregate",void 0),i}(t.ChildProperty),rht=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return wit(i,n),ou([t.Collection([],iht)],i.prototype,"columns",void 0),i}(t.ChildProperty),bit=function(){function n(n,t){this.copyContent="";this.isSelect=!1;this.parent=n;this.serviceLocator=t;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(k,this.initialEnd,this),this.parent.on(rt,this.keyDownHandler,this),this.parent.on(kt,this.clickHandler,this),this.parent.on(ai,this.initialEnd,this),t.EventHandler.add(this.parent.element,"keydown",this.pasteHandler,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(rt,this.keyDownHandler),this.parent.off(k,this.initialEnd),this.parent.off(kt,this.clickHandler),this.parent.off(ai,this.initialEnd),t.EventHandler.remove(this.parent.element,"keydown",this.pasteHandler))},n.prototype.clickHandler=function(n){var t=n.target;t=i(t,"e-rowcell")},n.prototype.pasteHandler=function(n){var u=this,i=this.parent,r=/(Mac)/i.test(navigator.platform),f=this.parent.getSelectedRowCellIndexes(),e,o,s;if(!i.isEdit&&67===n.keyCode&&r&&n.metaKey&&this.copy(),f.length&&86===n.keyCode&&(!r&&n.ctrlKey||r&&n.metaKey)&&!i.isEdit){if(e=t.closest(document.activeElement,"."+v),!this.clipBoardTextArea||!e||!i.editSettings.allowEditing||"Batch"!==i.editSettings.mode||"Cell"!==i.selectionSettings.mode||"Flow"===i.selectionSettings.cellSelectionMode)return;this.activeElement=document.activeElement;o=window.scrollX;s=window.scrollY;this.clipBoardTextArea.focus();setTimeout(function(){u.activeElement.focus();window.scrollTo(o,s);u.paste(u.clipBoardTextArea.value,f[0].rowIndex,f[0].cellIndexes[0])},r?100:10)}},n.prototype.paste=function(n,i,r){for(var c,s,v,f,y,l,o=this.parent,e=r,u=i,a=n.split("\n"),h=0;h<a.length;h++){if(l=a[parseInt(h.toString(),10)].split("\t"),e=r,h===a.length-1&&""===a[parseInt(h.toString(),10)]||t.isUndefined(o.getRowByIndex(u))){e++;break}for(c=0;c<l.length;c++){if(!o.getCellFromIndex(u,e)){e++;break}(y=(f=o.getColumnByIndex(e)).getParser()?f.getParser()(l[parseInt(c.toString(),10)]):l[parseInt(c.toString(),10)],f.allowEditing&&!f.isPrimaryKey)&&(s={column:f,data:y,rowIndex:u},this.parent.trigger(fg,s),u=s.rowIndex,s.cancel||o.editModule&&("number"===f.type?this.parent.editModule.updateCell(u,f.field,parseFloat(s.data)):o.editModule.updateCell(u,f.field,s.data)));e++}u++}o.selectionModule.selectCellsByRange({rowIndex:i,cellIndex:r},{rowIndex:u-1,cellIndex:e-1});v=this.parent.getCellFromIndex(u-1,e-1);v&&t.classList(v,["e-focus","e-focused"],[]);this.clipBoardTextArea.value=""},n.prototype.initialEnd=function(){this.l10n=this.serviceLocator.getService("localization");this.parent.off(k,this.initialEnd);this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("ClipBoard")}});this.clipBoardTextArea.style.opacity="0";this.parent.element.appendChild(this.clipBoardTextArea)},n.prototype.keyDownHandler=function(n){"ctrlPlusC"===n.action?this.copy():"ctrlShiftPlusH"===n.action&&this.copy(!0)},n.prototype.setCopyData=function(n){var r,g,o,e,s,u,l,a,h,v,y,f,p,w,nt,c;if(""===window.getSelection().toString()){if(this.clipBoardTextArea.value=this.copyContent="",r=this.parent.getDataRows(),this.parent.selectionSettings&&this.parent.selectionSettings.allowColumnSelection&&this.parent.selectionModule&&this.parent.selectionModule.selectedColumnsIndexes.length){if(n){for(var k=this.parent.selectionModule.selectedColumnsIndexes,d=[],i=0;i<k.length;i++)g=k[parseInt(i.toString(),10)],o=this.parent.getColumnHeaderByIndex(g),o&&!o.classList.contains("e-hide")&&d.push(o);this.getCopyData(d,!1,"\t",n);this.copyContent+="\n"}for(e=0;e<r.length;e++)s=[],e>0&&(this.copyContent+="\n"),s.push.apply(s,[].slice.call(r[parseInt(e.toString(),10)].querySelectorAll(".e-columnselection:not(.e-hide)"))),this.getCopyData(s,!1,"\t",n)}else if("Cell"!==this.parent.selectionSettings.mode){if(u=this.parent.getSelectedRowIndexes().sort(function(n,t){return n-t}),n){for(l=[],i=0;i<this.parent.getVisibleColumns().length;i++)l[parseInt(i.toString(),10)]=this.parent.getVisibleColumns()[parseInt(i.toString(),10)].headerText;this.getCopyData(l,!1,"\t",n);this.copyContent+="\n"}if((this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&u.length>r.length)for(u=[],i=0;i<r.length;i++)a=r[parseInt(i.toString(),10)],"true"===a.getAttribute("aria-selected")&&u.push(parseInt(a.getAttribute("data-rowindex"),10));for(i=0;i<u.length;i++)i>0&&(this.copyContent+="\n"),h=[],v=u[parseInt(i.toString(),10)],!b(this.parent)&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache||this.parent.groupSettings.columns.length&&this.parent.groupSettings.enableLazyLoading)&&(v=r.map(function(n){return n.getAttribute("data-rowindex")}).indexOf(u[parseInt(i.toString(),10)].toString())),y=r[parseInt(v.toString(),10)],t.isNullOrUndefined(y)||(h.push.apply(h,[].slice.call(y.querySelectorAll(".e-rowcell:not(.e-hide)"))),this.getCopyData(h,!1,"\t",n))}else if(this.parent.selectionModule&&this.parent.selectionModule.selectedRowCellIndexes.length)if(f=this.checkBoxSelection(),f.status){if(n){for(p=[],i=0;i<f.colIndexes.length;i++)w=this.parent.getColumnHeaderByIndex(f.colIndexes[parseInt(i.toString(),10)]),w.classList.contains("e-hide")||p.push(w);this.getCopyData(p,!1,"\t",n);this.copyContent+="\n"}for(i=0;i<f.rowIndexes.length;i++)i>0&&(this.copyContent+="\n"),nt=[].slice.call(r[f.rowIndexes[parseInt(i.toString(),10)]].querySelectorAll(".e-cellselectionbackground:not(.e-hide)")),this.getCopyData(nt,!1,"\t",n)}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,"\n",n);if(c={data:this.copyContent,cancel:!1},this.parent.trigger(ug,c),c.cancel)return;this.clipBoardTextArea.value=this.copyContent=c.data;t.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select();this.isSelect=!0}},n.prototype.getCopyData=function(n,t,i,r){for(var e,f="string"!=typeof n[0],u=0;u<n.length;u++)r&&t&&(e=parseInt(n[parseInt(u.toString(),10)].getAttribute(ft),10)-1,this.copyContent+=this.parent.getColumns()[parseInt(e.toString(),10)].headerText+"\n"),f?n[parseInt(u.toString(),10)].classList.contains("e-hide")||(this.copyContent+=n[parseInt(u.toString(),10)].innerText):this.copyContent+=n[parseInt(u.toString(),10)],u<n.length-1&&(this.copyContent+=i)},n.prototype.copy=function(n){document.queryCommandSupported("copy")&&this.clipBoardTextArea&&(this.setCopyData(n),document.execCommand("copy"),this.clipBoardTextArea.blur());this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},n.prototype.getModuleName=function(){return"clipboard"},n.prototype.destroy=function(){this.removeEventListener();this.clipBoardTextArea&&(t.remove(this.clipBoardTextArea),this.clipBoardTextArea=null)},n.prototype.checkBoxSelection=function(){var u=this.parent,f={status:!1};if("Cell"===u.selectionSettings.mode){for(var t=u.getSelectedRowCellIndexes(),i=void 0,r=[],n=void 0,n=0;n<t.length&&(t[parseInt(n.toString(),10)].cellIndexes.length&&r.push(t[parseInt(n.toString(),10)].rowIndex),!t[parseInt(n.toString(),10)].cellIndexes.length||(i||(i=JSON.stringify(t[parseInt(n.toString(),10)].cellIndexes.sort())),i===JSON.stringify(t[parseInt(n.toString(),10)].cellIndexes.sort())));n++);r.sort(function(n,t){return n-t});n===t.length&&(f={status:!0,rowIndexes:r,colIndexes:t[0].cellIndexes})}return f},n}(),su="https://ej2.syncfusion.com/documentation/grid",av="https://ej2.syncfusion.com/documentation/",hu="[EJ2Grid.Warning]",oe="[EJ2Grid.Error]",vv="[EJ2Grid.Info]",kit=function(){function n(n){this.parent=n;this.parent.on("initial-end",this.patchadaptor,this)}return n.prototype.getModuleName=function(){return"logger"},n.prototype.log=function(n,t){var u,i,r,f;for(n instanceof Array||(n=[n]),u=n,i=0;i<u.length;i++)r=dit[u[parseInt(i.toString(),10)]],f=r.check(t,this.parent),f.success&&console[r.logType](r.generateMessage(t,this.parent,f.options))},n.prototype.patchadaptor=function(){var n=this.parent.getDataModule().dataManager.adaptor,t=n.beforeSend;t&&(n.beforeSend=function(i,r,u){t.call(n,i,r,u)})},n.prototype.destroy=function(){this.parent.isDestroyed||this.parent.off("initial-end",this.patchadaptor)},n}(),dit={module_missing:{type:"module_missing",logType:"warn",check:function(n,t){var r=t.getInjectedModules().map(function(n){return n.prototype.getModuleName()}),i=t.requiredModules().map(function(n){return n.member}).filter(function(n){return-1===r.indexOf(n)});return{success:i.filter(function(n){return"resize"!==n}).length>0,options:i}},generateMessage:function(n,t,i){return i=i.filter(function(n){return"resize"!==n}).reduce(function(n,t){return n+"* "+t+"\n"},""),hu+": MODULES MISSING\nThe following modules are not injected:.\n"+i+"Refer to "+su+"/module.html for documentation on importing feature modules."}},promise_enabled:{type:"promise_enabled",logType:"error",check:function(){return{success:"undefined"==typeof Promise}},generateMessage:function(){return oe+": PROMISE UNDEFINED\nPromise object is not present in the global environment,please use polyfil to support Promise object in your environment.\nRefer to "+av+"/base/browser.html?#required-polyfills for more information."}},primary_column_missing:{type:"primary_column_missing",logType:"warn",check:function(n,t){return{success:t.enableColumnVirtualization?0===t.getPrimaryKeyFieldNames().length:0===t.getColumns().filter(function(n){return n.isPrimaryKey}).length}},generateMessage:function(){return hu+": PRIMARY KEY MISSING\nEditing is enabled but primary key column is not specified.\nRefer to "+su+"/api-column.html?#isprimarykey for documentation on providing primary key columns."}},selection_key_missing:{type:"selection_key_missing",logType:"warn",check:function(n,t){return{success:t.selectionSettings.persistSelection&&0===t.getColumns().filter(function(n){return n.isPrimaryKey}).length}},generateMessage:function(){return hu+": PRIMARY KEY MISSING\nselectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.\nRefer to "+su+"/api-column.html?#isprimarykey for documentation on providing primary key columns."}},actionfailure:{type:"actionfailure",logType:"error",check:function(){return{success:!0}},generateMessage:function(n,t){var i,r=uht(n,t),u=fht(n,t);return i=""!==u?u:""!==r?r:n.error,hu+": "+i}},locale_missing:{type:"locale_missing",logType:"warn",check:function(n,i){var r=u.DataUtil.getObject("locale."+i.locale+".grid",t.L10n);return{success:"en-US"!==i.locale&&t.isNullOrUndefined(r)}},generateMessage:function(n,t){return hu+": LOCALE CONFIG MISSING\nLocale configuration for '"+t.locale+"' is not provided.\nRefer to "+su+"/globalization-and-localization.html?#localization \n             for documentation on setting locale configuration."}},limitation:{type:"limitation",logType:"warn",check:function(n,i){var r;switch(n){case"freeze":r={success:!t.isUndefined(i.detailTemplate)||!t.isUndefined(i.childGrid),options:{name:"freeze"}};break;case"virtualization":r={success:!t.isUndefined(i.detailTemplate)||!t.isUndefined(i.childGrid),options:{name:"virtualization"}};break;default:r={success:!1}}return r},generateMessage:function(n,t,i){var r,u=i.name;switch(u){case"freeze":r="Frozen rows and columns do not support the following features:\n* Details Template\n* Hierarchy Grid\n";break;case"virtualization":r="Virtualization does not support the following features.\n* Details Template.\n* Hierarchy Grid.\n";break;default:r=""}return hu+": "+u.toUpperCase()+" LIMITATIONS\n"+r}},check_datasource_columns:{type:"check_datasource_columns",logType:"warn",check:function(n,i){return{success:!(i.columns.length||i.dataSource instanceof u.DataManager||!t.isNullOrUndefined(i.dataSource)&&i.dataSource.length)}},generateMessage:function(){return hu+": GRID CONFIG MISSING\ndataSource and columns are not provided in the grid. At least one of either must be provided for grid configuration.\nRefer to "+su+"/columns.html for documentation on configuring the grid data and columns."}},virtual_height:{type:"virtual_height",logType:"error",check:function(n,i){return{success:t.isNullOrUndefined(i.height)||"auto"===i.height}},generateMessage:function(){return oe+": GRID HEIGHT MISSING \nheight property is required to use virtualization.\nRefer to "+su+"/virtual.html for documentation on configuring the virtual grid."}},grid_remote_edit:{type:"grid_remote_edit",logType:"error",check:function(n){return{success:Array.isArray(n)||Array.isArray(n.result)}},generateMessage:function(){return oe+": RETRUN VALUE MISSING  \nRemote service returns invalid data. \nRefer to "+su+"/edit.html for documentation on configuring editing with remote data."}},grid_sort_comparer:{type:"grid_sort_comparer",logType:"warn",check:function(n,t){return{success:t.getDataModule().isRemote()}},generateMessage:function(){return hu+": SORT COMPARER NOT WORKING  \nSort comparer will not work with remote data.Refer to "+su+"/sorting/#custom-sort-comparer for documentation on using the sort comparer."}},resize_min_max:{type:"resize_min_max",logType:"info",check:function(n){return{success:n.column.minWidth&&n.column.minWidth>=n.width||n.column.maxWidth&&n.column.maxWidth<=n.width}},generateMessage:function(){return vv+": RESIZING COLUMN REACHED MIN OR MAX  \nThe column resizing width is at its min or max."}},action_disabled_column:{type:"action_disabled_column",logType:"info",check:function(n){var i;switch(n.moduleName){case"reorder":i=t.isNullOrUndefined(n.destColumn)?"reordering action is disabled for the "+n.column.headerText+" column":"reordering action is disabled for the "+(n.column.allowReordering?n.destColumn.headerText:n.column.headerText)+" column";break;case"group":i="grouping action is disabled for the "+n.columnName+" column.";break;case"filter":i="filtering action is disabled for the "+n.columnName+" column.";break;case"sort":i="sorting action is disabled for the "+n.columnName+" column."}return{success:!0,options:{fn:i}}},generateMessage:function(n,t,i){return vv+": ACTION DISABLED \n "+i.fn}},exporting_begin:{type:"exporting_begin",logType:"info",check:function(n){return{success:!0,options:{args:n}}},generateMessage:function(n,t,i){return vv+": EXPORTING INPROGRESS \n Grid "+i.args+"ing is in progress"}},exporting_complete:{type:"exporting_complete",logType:"info",check:function(n){return{success:!0,options:{args:n}}},generateMessage:function(n,t,i){return vv+": EXPORTING COMPLETED \n Grid "+i.args+"ing is complete"}},foreign_key_failure:{type:"foreign_key_failure",logType:"error",check:function(){return{success:!0}},generateMessage:function(){return oe+": FOREIGNKEY CONFIG \n  Grid foreign key column needs a valid data source/service.Refer to "+su+"/columns/#foreign-key-column for documentation on configuring foreign key columns."}},initial_action:{type:"initial_action",logType:"error",check:function(n){var t;switch(n.moduleName){case"group":t="The "+n.columnName+" column is not available in the grid's column model.Please provide a valid field name to group the column";break;case"filter":t="The "+n.columnName+" column is not available in the grid's column model.Please provide a valid field name to filter the column.";break;case"sort":t="The "+n.columnName+" column is not available in the grid's column model.Please provide a valid field name to sort the column."}return{success:!0,options:{fn:t}}},generateMessage:function(n,t,i){return oe+": INITIAL ACTION FAILURE \n "+i.fn}},frozen_rows_columns:{type:"frozen_rows_columns",logType:"error",check:function(n,t){return{success:t.getColumns().length<=t.frozenColumns||t.currentViewData.length&&t.frozenRows>=t.currentViewData.length}},generateMessage:function(n,t){return oe+": OUT OF RANGE ERROR-\n "+(t.getColumns().length<=t.frozenColumns?"FROZEN COLUMNS,":"")+(t.frozenRows>=t.currentViewData.length?"FROZEN ROWS":"")+" invalid"}},column_type_missing:{type:"column_type_missing",logType:"error",check:function(n){return{success:t.isNullOrUndefined(n.column.type),options:n.column.headerText}},generateMessage:function(n,t,i){return oe+": COLUMN TYPE MISSING-\n  "+i+" column type was invalid or not defined.Please go through below help link: "+av+"/grid/columns/#column-type"}},datasource_syntax_mismatch:{type:"datasource_syntax_mismatch",logType:"warn",check:function(n){return{success:n.dataState.dataSource&&!(n.dataState.dataSource instanceof u.DataManager||"result"in n.dataState.dataSource||n.dataState.dataSource instanceof Array)&&!t.isNullOrUndefined(n.dataState.dataStateChange)}},generateMessage:function(){return hu+": DATASOURCE SYNTAX WARNING\nDataSource should be in the form of {result: Object[], count: number}when dataStateChangeEvent used"}}},uht=function(n){var t=n.error;return t.indexOf&&0!==t.indexOf("Format options")?"":"INVALID FORMAT\nFor more information, refer to the following documentation links:\nNumber format: "+av+"/common/internationalization#supported-format-string\nDate format: "+av+"/common/internationalization#manipulating-datetime\nMessage: "+t},fht=function(n){var i=u.DataUtil.getObject("error.error",n),r;if(t.isNullOrUndefined(i))return"";r="";try{r=JSON.parse(i.responseText)}catch(n){r=""}return"XMLHTTPREQUEST FAILED\nUrl: "+i.responseURL+"\nStatus: "+i.status+" - "+i.statusText+"\n"+(""!==r?"Message: "+r:"")},ki=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cb=function(){return cb=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n},cb.apply(this,arguments)},r=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},git=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ki(i,n),r([t.Property()],i.prototype,"field",void 0),r([t.Property()],i.prototype,"direction",void 0),r([t.Property(!1)],i.prototype,"isFromGroup",void 0),i}(t.ChildProperty),nrt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ki(i,n),r([t.Collection([],git)],i.prototype,"columns",void 0),r([t.Property(!0)],i.prototype,"allowUnsort",void 0),i}(t.ChildProperty),trt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ki(i,n),r([t.Property()],i.prototype,"field",void 0),r([t.Property()],i.prototype,"operator",void 0),r([t.Property()],i.prototype,"value",void 0),r([t.Property()],i.prototype,"matchCase",void 0),r([t.Property(!1)],i.prototype,"ignoreAccent",void 0),r([t.Property()],i.prototype,"predicate",void 0),r([t.Property({})],i.prototype,"actualFilterValue",void 0),r([t.Property({})],i.prototype,"actualOperator",void 0),r([t.Property()],i.prototype,"type",void 0),r([t.Property()],i.prototype,"ejpredicate",void 0),r([t.Property()],i.prototype,"uid",void 0),r([t.Property()],i.prototype,"isForeignKey",void 0),r([t.Property()],i.prototype,"condition",void 0),i}(t.ChildProperty),irt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ki(i,n),r([t.Property(!1)],i.prototype,"enableCache",void 0),r([t.Property(3)],i.prototype,"maxBlocks",void 0),r([t.Property(3)],i.prototype,"initialBlocks",void 0),i}(t.ChildProperty),rrt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ki(i,n),r([t.Collection([],trt)],i.prototype,"columns",void 0),r([t.Property("FilterBar")],i.prototype,"type",void 0),r([t.Property("OnEnter")],i.prototype,"mode",void 0),r([t.Property(!0)],i.prototype,"showFilterBarStatus",void 0),r([t.Property(1500)],i.prototype,"immediateModeDelay",void 0),r([t.Property()],i.prototype,"operators",void 0),r([t.Property(!1)],i.prototype,"ignoreAccent",void 0),r([t.Property(!1)],i.prototype,"enableInfiniteScrolling",void 0),r([t.Property(50)],i.prototype,"itemsCount",void 0),r([t.Property("Shimmer")],i.prototype,"loadingIndicator",void 0),r([t.Property(!1)],i.prototype,"enableCaseSensitivity",void 0),r([t.Property(!1)],i.prototype,"showFilterBarOperator",void 0),i}(t.ChildProperty),urt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ki(i,n),r([t.Property("Row")],i.prototype,"mode",void 0),r([t.Property("Flow")],i.prototype,"cellSelectionMode",void 0),r([t.Property("Single")],i.prototype,"type",void 0),r([t.Property(!1)],i.prototype,"checkboxOnly",void 0),r([t.Property(!1)],i.prototype,"persistSelection",void 0),r([t.Property("Default")],i.prototype,"checkboxMode",void 0),r([t.Property(!1)],i.prototype,"enableSimpleMultiRowSelection",void 0),r([t.Property(!0)],i.prototype,"enableToggle",void 0),r([t.Property(!1)],i.prototype,"allowColumnSelection",void 0),i}(t.ChildProperty),frt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ki(i,n),r([t.Property([])],i.prototype,"fields",void 0),r([t.Property("")],i.prototype,"key",void 0),r([t.Property("contains")],i.prototype,"operator",void 0),r([t.Property(!0)],i.prototype,"ignoreCase",void 0),r([t.Property(!1)],i.prototype,"ignoreAccent",void 0),i}(t.ChildProperty),ert=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ki(i,n),r([t.Property()],i.prototype,"targetID",void 0),i}(t.ChildProperty),ort=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ki(i,n),r([t.Property("Both")],i.prototype,"wrapMode",void 0),i}(t.ChildProperty),srt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ki(i,n),r([t.Property("Normal")],i.prototype,"mode",void 0),i}(t.ChildProperty),hrt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ki(i,n),r([t.Property(!0)],i.prototype,"showDropArea",void 0),r([t.Property(!1)],i.prototype,"allowReordering",void 0),r([t.Property(!1)],i.prototype,"showToggleButton",void 0),r([t.Property(!1)],i.prototype,"showGroupedColumn",void 0),r([t.Property(!0)],i.prototype,"showUngroupButton",void 0),r([t.Property(!1)],i.prototype,"disablePageWiseAggregates",void 0),r([t.Property([])],i.prototype,"columns",void 0),r([t.Property()],i.prototype,"captionTemplate",void 0),r([t.Property(!1)],i.prototype,"enableLazyLoading",void 0),i}(t.ChildProperty),crt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ki(i,n),r([t.Property(!1)],i.prototype,"allowAdding",void 0),r([t.Property(!1)],i.prototype,"allowEditing",void 0),r([t.Property(!1)],i.prototype,"allowDeleting",void 0),r([t.Property("Normal")],i.prototype,"mode",void 0),r([t.Property(!0)],i.prototype,"allowEditOnDblClick",void 0),r([t.Property(!0)],i.prototype,"showConfirmDialog",void 0),r([t.Property(!1)],i.prototype,"showDeleteConfirmDialog",void 0),r([t.Property()],i.prototype,"template",void 0),r([t.Property()],i.prototype,"headerTemplate",void 0),r([t.Property()],i.prototype,"footerTemplate",void 0),r([t.Property("Top")],i.prototype,"newRowPosition",void 0),r([t.Property({})],i.prototype,"dialog",void 0),r([t.Property(!1)],i.prototype,"allowNextRowEdit",void 0),r([t.Property(!1)],i.prototype,"showAddNewRow",void 0),i}(t.ChildProperty),lrt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return ki(i,n),r([t.Property("Spinner")],i.prototype,"indicatorType",void 0),i}(t.ChildProperty),yv=function(n){function f(i,r){var u=n.call(this,i,r)||this;return u.isPreventScrollEvent=!1,u.inViewIndexes=[],u.keyA=!1,u.frozenRightCount=0,u.freezeColumnRefresh=!0,u.rightcount=0,u.frozenLeftCount=0,u.leftcount=0,u.tablesCount=1,u.movableCount=0,u.movablecount=0,u.fixedcount=0,u.fixedCount=0,u.visibleFrozenLeft=0,u.visibleFrozenFixed=0,u.isPreparedFrozenColumns=!1,u.visibleFrozenRight=0,u.visibleMovable=0,u.frozenLeftColumns=[],u.frozenRightColumns=[],u.movableColumns=[],u.fixedColumns=[],u.stackedLeft=[],u.stackedRight=[],u.stackedFixed=[],u.stackedMovable=[],u.stackedarrayLeft=[],u.stackedarrayRight=[],u.stackedarrayFixed=[],u.stackedarrayMovable=[],u.media={},u.autoFitColumnsResize=!1,u.tableIndex=0,u.componentRefresh=t.Component.prototype.refresh,u.isChangeDataSourceCall=!1,u.mergedColumns=!1,u.isVirtualAdaptive=!1,u.requireTemplateRef=!0,u.vRows=[],u.vcRows=[],u.vGroupOffsets={},u.rowUid=0,u.translateX=0,u.isManualRefresh=!1,u.isAutoFitColumns=!1,u.enableDeepCompare=!1,u.totalDataRecordsCount=0,u.disableSelectedRecords=[],u.partialSelectedRecords=[],u.isSpan=!1,u.islazyloadRequest=!1,u.isAddNewRow=!1,u.addNewRowFocus=!0,u.selectVirtualRowOnAdd=!1,u.lockcolPositionCount=0,u.prevPageMoving=!1,u.pageTemplateChange=!1,u.isAutoGen=!1,u.isAutoGenerateColumns=!1,u.pageRequireRefresh=!0,u.mediaBindInstance={},u.commandDelIndex=void 0,u.preventAutoFit=!1,u.asyncTimeOut=50,u.isExportGrid=!1,u.isWidgetsDestroyed=!1,u.enableLogger=!1,u.needsID=!0,e.Inject(yit),t.setValue("mergePersistData",u.mergePersistGridData,u),u}var e;return ki(f,n),e=f,f.prototype.getPersistData=function(){for(var s,n,f,e,h,i=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],c={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},r=0;r<i.length;r++)for(var l=this[i[parseInt(r.toString(),10)]],u=0,o=c[i[parseInt(r.toString(),10)]];u<o.length;u++)delete l[""+o[u]];return s=this.pageSettings.template,n=Object.assign({template:void 0},this.pageSettings),this.enableVirtualization&&this.enablePersistence&&this.contentModule&&this.contentModule.getPageFromTop&&!t.isNullOrUndefined(this.scrollPosition)&&!t.isNullOrUndefined(this.scrollPosition.top)&&(n.properties.currentPage=this.contentModule.getPageFromTop(this.scrollPosition.top,{block:1})),this.setProperties({pageSettings:n},!0),f=this.groupSettings.captionTemplate,e=f&&this.isAngular,e&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!t.isNullOrUndefined(this.pagerTemplate),h=this.addOnPersist(i),n.template=s,this.setProperties({pageSettings:n},!0),e&&(this.groupSettings.captionTemplate=f),h},f.prototype.requiredModules=function(){this.setFrozenCount();this.enableInfiniteAggrgate();var n=[];return this.isDestroyed||(this.allowFiltering&&n.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator],name:"Filter"}),this.allowExcelExport&&n.push({member:"ExcelExport",args:[this,this.serviceLocator],name:"ExcelExport"}),this.allowPdfExport&&n.push({member:"PdfExport",args:[this],name:"PdfExport"}),this.allowSorting&&n.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator],name:"Sort"}),this.allowPaging&&n.push({member:"pager",args:[this,this.pageSettings],name:"Page"}),this.allowSelection&&n.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator],name:"Selection"}),this.resizeCheck()&&n.push({member:"resize",args:[this],name:"Resize"}),this.allowReordering&&n.push({member:"reorder",args:[this],name:"Reorder"}),this.allowRowDragAndDrop&&n.push({member:"rowDragAndDrop",args:[this],name:"RowDD"}),this.allowGrouping&&n.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator],name:"Group"}),this.aggregates.length&&n.push({member:"aggregate",args:[this,this.serviceLocator],name:"Aggregate"}),this.isDetail()&&n.push({member:"detailRow",args:[this,this.serviceLocator],name:"DetailRow"}),(this.toolbar||this.toolbarTemplate)&&n.push({member:"toolbar",args:[this,this.serviceLocator],name:"Toolbar"}),(this.enableVirtualization||this.enableColumnVirtualization)&&n.push({member:"virtualscroll",args:[this,this.serviceLocator],name:"VirtualScroll"}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&n.push({member:"freeze",args:[this,this.serviceLocator],name:"Freeze"}),!t.isNullOrUndefined(this.columns)&&this.isCommandColumn(this.columns)&&n.push({member:"commandColumn",args:[this,this.serviceLocator],name:"CommandColumn"}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&n.push({member:"edit",args:[this,this.serviceLocator],name:"Edit"}),this.extendRequiredModules(n)),n},f.prototype.extendRequiredModules=function(n){this.enableInfiniteScrolling&&n.push({member:"infiniteScroll",args:[this,this.serviceLocator],name:"InfiniteScroll"});this.groupSettings.enableLazyLoading&&n.push({member:"lazyLoadGroup",args:[this,this.serviceLocator],name:"LazyLoadGroup"});this.contextMenuItems&&n.push({member:"contextMenu",args:[this,this.serviceLocator],name:"ContextMenu"});this.showColumnMenu&&n.push({member:"columnMenu",args:[this,this.serviceLocator],name:"ColumnMenu"});this.showColumnChooser&&n.push({member:"columnChooser",args:[this,this.serviceLocator],name:"ColumnChooser"});!t.isNullOrUndefined(this.columns)&&this.isForeignKeyEnabled(this.columns)&&n.push({member:"foreignKey",args:[this,this.serviceLocator],name:"ForeignKey"});this.enableLogger&&n.push({member:"logger",args:[this],name:"Logger"})},f.prototype.resizeCheck=function(){var r=!!this.getColumns().filter(function(n){return!0===n.autoFit}).length,n,i;return t.isNullOrUndefined(this.columnModel)||!this.columnModel.length||this.columnModel[0]instanceof ht||(this.columnModel=[]),n=!(!this.showColumnMenu||this.columnMenuItems&&!this.columnMenuItems.filter(function(n){return"AutoFit"===n||"AutoFitAll"===n}).length),i=!(!this.contextMenuItems||!this.contextMenuItems.filter(function(n){return"AutoFit"===n||"AutoFitAll"===n}).length),this.allowResizing||this.autoFitColumnsResize||r||n||i},f.prototype.preRender=function(){this.serviceLocator=new lit;this.initProperties();this.initializeServices()},f.prototype.initProperties=function(){this.isInitial=!0;this.sortedColumns=[];this.inViewIndexes=[];this.mediaCol=[];this.isInitialLoad=!1;this.allowServerDataBinding=!1;this.ignoreCollectionWatch=!0;this.mergeCells={};this.isEdit=!1;this.checkAllRows="None";this.isCheckBoxSelection=!1;this.isPersistSelection=!1;this.componentRefresh=t.Component.prototype.refresh;this.freezeColumnRefresh=!0;this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith",wildCard:"wildcard",isNull:"isnull",notNull:"notnull",like:"like"};this.defaultChartLocale={Chart:"Chart",BarChart:"Bar Chart",Bar:"Bar",StackingBar:"Stacked Bar",StackingBar100:"100% Stacked Bar",Pie:"Pie Chart",ColumnChart:"Column Chart",Column:"Column",StackingColumn:"Stacked Column",StackingColumn100:"100% Stacked Column",LineChart:"Line Chart",Line:"Line",StackingLine:"Stacked Line",StackingLine100:"100% Stacked Line",AreaChart:"Area Chart",Area:"Area",StackingArea:"Stacked Area",StackingArea100:"100% Stacked Area",Scatter:"Scatter Chart"};this.defaultLocale=cb({EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",ColumnMenu:"Column Menu",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",FilterTitle:"Filter",FilterIcon:"Filter",ClearButton:"Clear",StartsWith:"Starts With",NotStartsWith:"Does Not Start With",Like:"Like",EndsWith:"Ends With",NotEndsWith:"Does Not End With",Contains:"Contains",NotContains:"Does Not Contain",IsNull:"Null",NotNull:"Not Null",IsEmpty:"Empty",IsNotEmpty:"Not Empty",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",In:"In",NotIn:"Not In",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",GroupButton:"Group button",UnGroupAria:"ungroup button",GroupSeperator:"Separator for the grouped columns",UnGroupIcon:"ungroup the grouped column ",GroupedSortIcon:"sort the grouped column ",GroupedDrag:"Drag the grouped column",GroupCaption:" is groupcaption cell",CheckBoxLabel:"checkbox",SelectAllCheckbox:"Select all checkbox",SelectRow:"Select row",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",AddCurrentSelection:"Add current selection to filter",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",ToolbarMenuDialogARIA:"Toolbar menu dialog",FilterMenuDialogARIA:"Filter menu",ExcelFilterDialogARIA:"Excel filter",CheckBoxFilterDialogARIA:"Checkbox filter",DialogEditARIA:"Edit dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort",SortIcon:"Sort",FilterDescription:"Press Alt Down to open filter Menu",SortDescription:"Press Enter to sort",ColumnMenuDescription:"Press Alt Down to open Column Menu",GroupDescription:"Press Ctrl space to group",ColumnHeader:" column header ",TemplateCell:" is template cell",CommandColumnAria:"is Command column column header ",DialogEdit:"Dialog edit",ClipBoard:"clipboard",AscendingText:"Ascending",DescendingText:"Descending",NoneText:"None",Expanded:"Expanded",Collapsed:"Collapsed"},this.defaultChartLocale);this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert","delete":"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},f.prototype.render=function(){var f,e,n,i,r,u;if((this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),tt.createSpinner({target:this.element,cssClass:this.cssClass?this.cssClass:null},this.createElement),this.renderModule=new hit(this,this.serviceLocator),this.searchModule=new pit(this),this.scrollModule=new hb(this),this.notify(or,{}),this.pageSettings.enableQueryString)&&(f=new URL(window.location.href).searchParams.get("page"),!t.isNullOrUndefined(f)&&window.location.href.indexOf("?page=")>0&&(e=parseInt(f,10),this.setProperties({pageSettings:{currentPage:e}},!0),this.pageSettings.currentPage=e)),!0!==this.getDataModule().dataManager.dataSource.offline&&void 0!==this.getDataModule().dataManager.dataSource.url||!t.isNullOrUndefined(this.dataSource)&&this.dataSource.result||(this.isVirtualAdaptive=!0),this.aggregateModule&&this.aggregates.length)for(n=0;n<this.aggregates.length;n++)for(i=0;i<this.aggregates[parseInt(n.toString(),10)].columns.length;i++)r=this.aggregates[parseInt(n.toString(),10)].columns[parseInt(i.toString(),10)],r.types&&(r.type=r.types);this.isReact?(u={requireTemplateRef:this.requireTemplateRef},this.trigger(yc,u),u.requireTemplateRef||(this.requireTemplateRef=u.requireTemplateRef)):this.trigger(yc);se(this.columns,this.enableColumnVirtualization,this);this.enableColumnVirtualization&&this.isChangeDataSourceCall&&this.columnModel&&(this.columnModel=[],this.updateColumnModel(this.columns));this.isPreparedFrozenColumns=!0;this.enablePersistence&&this.notify(na,{});this.getMediaColumns();wh(this.columns);this.isFrozenGrid()&&!this.mergedColumns&&this.setInitialFrozenColumnIndex(this.columns);this.checkLockColumns(this.columns);this.getColumns();this.processModel();this.gridRender();this.wireEvents();this.addListener();this.updateDefaultCursor();this.updateStackedFilter();"Spinner"===this.loadingIndicator.indicatorType&&this.showSpinner();this.notify(pt,{});"Shimmer"===this.loadingIndicator.indicatorType&&this.refreshMaskRow();this.refreshing&&this.trigger("created")},f.prototype.setInitialFrozenColumnIndex=function(n){for(var t,i=0;i<n.length;i++)t=n[parseInt(i.toString(),10)],t[""+ub]=t.index,t.columns&&this.setInitialFrozenColumnIndex(t.columns)},f.prototype.showSpinner=function(){this.isExportGrid||tt.showSpinner(this.element)},f.prototype.hideSpinner=function(){this.isExportGrid||tt.hideSpinner(this.element)},f.prototype.showMaskRow=function(n,i){var o,s,r,l,a;if(!t.isNullOrUndefined(this.headerModule)&&!t.isNullOrUndefined(this.contentModule)){var h=this.getHeaderContent().firstChild,f=this.getContent().firstChild,e=this.getFooterContent();if(i){var u=i.querySelector(".e-checkboxlist"),v=Math.floor(u.getBoundingClientRect().height/this.getRowHeight()),y='<div class="e-ftrchk e-mask-ftrchk"><div class="e-checkbox-wrapper"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"<\/div><\/div>";for(u.innerHTML="",o=0;o<v;o++)u.innerHTML+=y,u.querySelector(".e-ftrchk.e-mask-ftrchk").style.width="100%",u.querySelector(".e-checkbox-wrapper").style.width="100%",s=[].slice.call(u.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)")),s[0].classList.add("e-mask-checkbox-filter-intent"),s[1].classList.add("e-mask-checkbox-filter-span-intent")}else{if((!this.enableRtl&&!this.getHeaderContent().style.paddingRight||this.enableRtl&&!this.getHeaderContent().style.paddingLeft)&&(f.style.overflowY="hidden"),!this.isInitialLoad&&!this.getColumns().length){var c=f.getBoundingClientRect().height,p=0===c?this.allowPaging?this.pageSettings.pageSize*this.getRowHeight():window.innerHeight:c,w=Math.ceil(p/this.getRowHeight());return"Vertical"!==this.rowRenderingMode&&(this.headerMaskTable=this.createEmptyMaskTable(h,1)),void(this.contentMaskTable=this.createEmptyMaskTable(f,w))}(this.maskRowContentScroll=!(!this.enableVirtualization&&!this.enableColumnVirtualization||!n),this.contentMaskTable)||(r=f,(this.enableVirtualization||this.enableColumnVirtualization)&&(r=r.querySelector(".e-virtualtable")),t.isNullOrUndefined(r.querySelector("tbody"))||(this.contentMaskTable=this.createMaskTable(r,this.getContentMaskColumns(),n)));(!this.headerMaskTable&&(this.isFrozenGrid()||this.enableColumnVirtualization&&"X"===n)&&(r=h,this.enableColumnVirtualization&&"X"===n&&(r=r.querySelector(".e-virtualtable")),this.headerMaskTable=this.createMaskTable(r,this.getContentMaskColumns(),n)),e&&e.querySelector(".e-summaryrow"))&&(l=e.firstChild,this.footerContentMaskTable||(a=l,this.footerContentMaskTable=this.createMaskTable(a)));this.enableVirtualization&&n||t.EventHandler.add(f,"scroll",this.translateMaskRow,this)}}},f.prototype.getContentMaskColumns=function(){return this.getColumns()},f.prototype.createEmptyMaskTable=function(n,t){var i=this.createElement("table",{className:"e-table e-masked-table"}),e=this.createElement("tbody",{className:"e-masked-tbody"}),r=this.createElement("tr",{className:"e-masked-row e-row"}),u,f;for(r.style.height=this.getRowHeight()+"px",u=this.createElement("td",{className:"e-masked-cell e-rowcell"}),u.innerHTML=this.getShimmerTemplate(),r.appendChild(u),f=0;f<t;f++)e.appendChild(r.cloneNode(!0));return i.appendChild(e),n.appendChild(i),i},f.prototype.createFrozenMaskRow=function(n,t){for(var i=0;i<n.length;i++)i<this.frozenLeftCount?(this.frozenLeftCount-1===i&&n[parseInt(i.toString(),10)].classList.add("e-freezeleftborder"),n[parseInt(i.toString(),10)].classList.add("e-leftfreeze"),n[parseInt(i.toString(),10)].setAttribute("aria-colindex",(i+1).toString()),n[parseInt(i.toString(),10)].style.left=t[parseInt(i.toString(),10)].valueX-this.translateX+"px"):n.length-this.frozenRightCount<=i&&t[parseInt(i.toString(),10)]&&(n.length-this.frozenRightCount===i&&n[parseInt(i.toString(),10)].classList.add("e-freezerightborder"),n[parseInt(i.toString(),10)].classList.add("e-rightfreeze"),n[parseInt(i.toString(),10)].setAttribute("aria-colindex",(i+1).toString()),n[parseInt(i.toString(),10)].style.right=this.translateX+t[parseInt(i.toString(),10)].valueX+"px")},f.prototype.createMaskTable=function(n,i,r){var l=n,d=!!t.closest(l,".e-gridheader"),ut=!!t.closest(l,".e-gridcontent"),at=!!t.closest(l,".e-gridfooter"),g=this.getContent().firstChild,vt=g.scrollHeight,h=l.querySelector("table"),e=h.cloneNode(),a,v,nt,o,u,c,k,lt,tt,ft,y,p,s,et,it,ot,rt,w,st;if(e.removeAttribute("role"),e.removeAttribute("id"),t.updateCSSText(e,"position: absolute; z-index: 5; width: "+h.getBoundingClientRect().width+"px;"),!d||this.enableColumnVirtualization&&"X"===r||(e.style.transform="translate(0px,"+h.querySelector("thead").getBoundingClientRect().height+"px)"),e.setAttribute("class","e-table e-masked-table"),a=h.querySelector("colgroup").cloneNode(!0),a.removeAttribute("id"),a.setAttribute("class","e-masked-colgroup"),e.appendChild(a),d&&this.enableColumnVirtualization&&"X"===r){v=this.createMaskRow(a,i);this.isFrozenGrid()&&(nt=[].slice.call(v.querySelectorAll(".e-rowcell")),this.createFrozenMaskRow(nt,i));var ht=h.querySelector("thead"),f=[].slice.call(ht.querySelectorAll("tr")),b=ht.cloneNode();for(b.removeAttribute("role"),b.setAttribute("class","e-masked-thead"),o=f.length,u=0;u<o;u++)b.appendChild(v.cloneNode(!0)),b.childNodes[parseInt(u.toString(),10)].style.height=f[parseInt(u.toString(),10)].getBoundingClientRect().height+"px";e.appendChild(b)}if(c=h.querySelector("tbody").cloneNode(),c.removeAttribute("role"),c.setAttribute("class","e-masked-tbody"),k=h.querySelector("tbody"),ut||d){if(lt=g,o=Math.ceil(lt.getBoundingClientRect().height/this.getRowHeight()),this.allowPaging&&this.pageSettings.pageSize!==this.currentViewData.length&&this.pagerModule.pagerObj.totalPages!==this.pageSettings.currentPage)for((tt=(v=this.createMaskRow(a,i)).cloneNode(!0)).classList.add("e-altrow"),u=0;u<this.pageSettings.pageSize-this.currentViewData.length;u++)c.appendChild(u%2==1?tt.cloneNode(!0):v.cloneNode(!0));if(k.querySelector(".e-emptyrow")||!k.childNodes.length||ut&&this.childGrid)for((tt=(v=this.createMaskRow(a,i)).cloneNode(!0)).classList.add("e-altrow"),u=0;u<o;u++)c.appendChild((u+1)%2==0?tt.cloneNode(!0):v.cloneNode(!0));else{if(ft='tr:not(.e-hide):not([style*="display:none"]):not([style*="display: none"])',this.isTreeGrid&&(ft='tr:not(.e-hide):not([style*="display:none"]):not([style*="display: none"]):not(.e-childrow-hidden)'),f=[].slice.call(k.querySelectorAll(ft)),y=k.querySelector(".e-addedrow, .e-editedrow"),p=void 0,y){if(p=f.indexOf(y),this.isFrozenGrid()&&this.enableColumnVirtualization)for(s=[].slice.call(f[p+1].querySelectorAll(".e-rowcell")),u=0;u<s.length;u++)u<this.frozenLeftCount?(s[parseInt(u.toString(),10)].classList.add("e-leftfreeze"),s[parseInt(u.toString(),10)].setAttribute("aria-colindex",(u+1).toString()),s[parseInt(u.toString(),10)].style.left=i[parseInt(u.toString(),10)].valueX-this.translateX+"px"):s.length-this.frozenRightCount<=u&&i[parseInt(u.toString(),10)]&&(s[parseInt(u.toString(),10)].classList.add("e-rightfreeze"),s[parseInt(u.toString(),10)].setAttribute("aria-colindex",(u+1).toString()),s[parseInt(u.toString(),10)].style.right=this.translateX+i[parseInt(u.toString(),10)].valueX+"px");y.classList.contains("e-addedrow")?f.splice(p,2):f.splice(p,1)}for(o=(this.enableVirtualization||this.enableColumnVirtualization)&&r?f.length:o<=f.length?o:f.length,u=0;u<o;u++)et=this.applyMaskRow(f[parseInt(u.toString(),10)].cloneNode(!0),f[parseInt(u.toString(),10)].getBoundingClientRect().height),this.enableColumnVirtualization&&"X"===r&&this.isFrozenGrid()&&(nt=[].slice.call(et.querySelectorAll(".e-masked-cell")),this.createFrozenMaskRow(nt,i)),c.appendChild(et);y&&y.classList.contains("e-editedrow")&&p<o&&(it=c.childNodes[parseInt(p.toString(),10)],it.style.height=this.getRowHeight()+"px",it.classList.add("e-row"),y.classList.contains("e-altrow")&&it.classList.add("e-altrow"))}}if(e.appendChild(c),at){for(ot=h.querySelector("tfoot"),rt=ot.cloneNode(),rt.setAttribute("class","e-masked-tfoot"),f=[].slice.call(ot.querySelectorAll("tr")),u=0;u<f.length;u++)rt.appendChild(this.applyMaskRow(f[parseInt(u.toString(),10)].cloneNode(!0),f[parseInt(u.toString(),10)].getBoundingClientRect().height));e.appendChild(rt)}return(d&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+ct).style.position="relative"),l.insertBefore(e,l.firstChild),!ut||this.enableVirtualization&&r)||(w=vt-e.getBoundingClientRect().height,w=w<0?0:w,st=g.scrollTop<=w?g.scrollTop:w,this.enableVirtualization&&(st-=uc(t.closest(l,".e-virtualtable")).height),e.style.transform="translate(0px,"+st+"px)"),e},f.prototype.applyMaskRow=function(n,i){var u=n,e,f,r,o;for(u.removeAttribute("role"),u.removeAttribute("aria-rowindex"),u.removeAttribute("data-uid"),u.classList.add("e-masked-row"),u.style.height=i+"px",e=[].slice.call(u.childNodes),f=0;f<e.length;f++)r=e[parseInt(f.toString(),10)],o=r.firstChild&&r.firstChild.classList&&r.firstChild.classList.contains("e-checkbox-wrapper"),r.removeAttribute("role"),r.removeAttribute("tabindex"),r.removeAttribute("aria-label"),this.enableColumnVirtualization&&r.classList.contains("e-fixedfreeze")&&(t.removeClass([r],["e-fixedfreeze","e-freezeleftborder","e-freezerightborder"]),t.addClass([r],["e-unfreeze"])),r.removeAttribute("aria-colindex"),r.removeAttribute("data-index"),r.removeAttribute("data-mappingname"),r.removeAttribute("data-mappingvalue"),r.removeAttribute("data-mappinguid"),r.removeAttribute("aria-expanded"),r.classList.add("e-masked-cell"),r.innerHTML=this.getShimmerTemplate(),r.classList.contains("e-recordplusexpand")||r.classList.contains("e-recordpluscollapse")?r.firstChild.classList.add("e-mask-group-intent"):r.classList.contains("e-gridchkbox")||o?r.firstChild.classList.add("e-mask-checkbox-intent"):r.classList.contains("e-rowdragdrop")?r.firstChild.classList.add("e-mask-drag-intent"):r.classList.contains("e-indentcell")&&(r.innerHTML="");return u},f.prototype.createMaskRow=function(n,t){var s=n,r=t,e=this.createElement("tr",{className:"e-masked-row e-row"}),f,u;"Vertical"!==this.rowRenderingMode&&(e.style.height=this.getRowHeight()+"px");for(var h=this.createElement("td",{className:"e-masked-cell e-rowcell"}),o=0,i=0;o<s.childNodes.length;o++)f=s.childNodes[parseInt(o.toString(),10)],u=h.cloneNode(),u.innerHTML=this.getShimmerTemplate(),f.classList.contains("e-group-intent")||f.classList.contains("e-detail-intent")||f.classList.contains("e-drag-intent")?f.classList.contains("e-group-intent")?u.firstChild.classList.add("e-mask-group-intent"):f.classList.contains("e-detail-intent")?u.firstChild.classList.add("e-mask-detail-intent"):f.classList.contains("e-drag-intent")&&u.firstChild.classList.add("e-mask-drag-intent"):("Vertical"===this.rowRenderingMode&&r[parseInt(i.toString(),10)]&&u.setAttribute("data-cell",r[parseInt(i.toString(),10)].headerText?r[parseInt(i.toString(),10)].headerText:r[parseInt(i.toString(),10)].field),"none"===f.style.display?u.classList.add("e-hide"):(u.style.textAlign=r[parseInt(i.toString(),10)]&&r[parseInt(i.toString(),10)].textAlign?r[parseInt(i.toString(),10)].textAlign.toLowerCase():this.enableRtl?"right":"left",r[parseInt(i.toString(),10)]&&("checkbox"===r[parseInt(i.toString(),10)].type||r[parseInt(i.toString(),10)].displayAsCheckBox)&&u.firstChild.classList.add("e-mask-checkbox-intent")),i++),e.appendChild(u);return e},f.prototype.getShimmerTemplate=function(){return this.maskRowContentScroll?'<span class="e-mask e-skeleton e-skeleton-text"><\/span>':'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"><\/span>'},f.prototype.addShimmerEffect=function(){this.maskRowContentScroll=!1;for(var t=[].slice.call(this.element.querySelectorAll(".e-mask:not(.e-shimmer-wave)")),n=0;n<t.length;n++)t[parseInt(n.toString(),10)]&&t[parseInt(n.toString(),10)].classList.add("e-shimmer-wave")},f.prototype.translateMaskRow=function(n){for(var r,i,e,u=n.target,o=u.querySelectorAll(".e-masked-table"),f=0;f<o.length;f++)r=o[parseInt(f.toString(),10)],r&&(i=u.scrollHeight-r.getBoundingClientRect().height,i=i<0?0:i,e=u.scrollTop<=i?u.scrollTop:i,this.enableVirtualization&&(e-=uc(t.closest(r,".e-virtualtable")).height),r.style.transform="translate(0px,"+e+"px)")},f.prototype.removeMaskRow=function(){var u,i,n,r;for(t.isNullOrUndefined(this.contentModule)||(u=this.getContent().firstChild,t.EventHandler.remove(u,"scroll",this.translateMaskRow)),this.headerMaskTable&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+ct).style.position=""),i=[this.headerMaskTable,this.contentMaskTable,this.footerContentMaskTable],n=0;n<i.length;n++)r=i[parseInt(n.toString(),10)],r&&t.remove(r);this.headerMaskTable=null;this.contentMaskTable=null;this.footerContentMaskTable=null},f.prototype.refreshMaskRow=function(){var t=this.getContent().firstChild,n;(this.isInitialLoad||this.getColumns().length)&&this.contentMaskTable&&t.querySelector(".e-masked-table")&&(n=t,this.enableVirtualization&&(n=n.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(n))},f.prototype.refreshMaskRowColgroupWidth=function(n){var f=n.querySelector("table:not(.e-masked-table)"),i=f.querySelector(hi).cloneNode(!0),r=n.querySelector(".e-masked-table"),u;for(i.removeAttribute("id"),i.setAttribute("class","e-masked-colgroup"),u=0;u<i.childNodes.length;u++)i.childNodes[parseInt(u.toString(),10)].removeAttribute("class");t.remove(r.querySelector(".e-masked-colgroup"));r.insertBefore(i,r.firstChild);r.style.width=f.getBoundingClientRect().width+"px"},f.prototype.updateStackedFilter=function(){this.allowFiltering&&"FilterBar"===this.filterSettings.type&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},f.prototype.getMediaColumns=function(){var i,n;if(!this.enableColumnVirtualization&&(i=this.getColumns(),this.getShowHideService=this.serviceLocator.getService("showHideService"),!t.isNullOrUndefined(i)))for(n=0;n<i.length;n++)!t.isNullOrUndefined(i[parseInt(n.toString(),10)].hideAtMedia)&&(t.isNullOrUndefined(i[parseInt(n.toString(),10)].visible)||i[parseInt(n.toString(),10)].visible)&&this.pushMediaColumn(i[parseInt(n.toString(),10)],n);this.updateFrozenColumnsWidth()},f.prototype.pushMediaColumn=function(n,t){this.mediaCol.push(n);this.media[n.uid]=window.matchMedia(n.hideAtMedia);this.mediaQueryUpdate(t,this.media[n.uid]);this.mediaBindInstance[parseInt(t.toString(),10)]=this.mediaQueryUpdate.bind(this,t);this.media[n.uid].addListener(this.mediaBindInstance[parseInt(t.toString(),10)])},f.prototype.updateMediaColumns=function(n){if(!this.enableColumnVirtualization){for(var i=this.getColumnIndexByUid(n.uid),t=0;t<this.mediaCol.length;t++)if(n.uid===this.mediaCol[parseInt(t.toString(),10)].uid)return void this.mediaCol.splice(t,1);this.pushMediaColumn(n,i)}},f.prototype.mediaQueryUpdate=function(n,t){var i=this.getColumns()[parseInt(n.toString(),10)];this.mediaCol.some(function(n){return n.uid===i.uid})&&(i.visible=t.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,i.visible?this.showHider.show(i.headerText,"headerText"):this.showHider.hide(i.headerText,"headerText")))},f.prototype.refreshMediaCol=function(){var n,i;this.isInitialLoad=!0;n=this.element.querySelector("."+fu);this.aggregates.length&&this.element.scrollHeight>parseInt(this.height.toString(),10)&&n&&t.addClass([n],["e-footerpadding"]);i=(this.enableColumnVirtualization?this.columns:this.getColumns()).filter(function(n){return"checkbox"===n.type});(0===i.length||i.length&&"ResetOnRowClick"===this.selectionSettings.checkboxMode)&&(this.isCheckBoxSelection=!1);"Vertical"===this.rowRenderingMode&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),t.removeClass([this.element],"e-gridhover"));this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh();this.isFrozenGrid()&&this.isAutoGenerateColumns&&(this.widthService.setWidthToColumns(),this.isAutoGenerateColumns=!1)},f.prototype.removeMediaListener=function(){for(var n=0;n<this.mediaCol.length;n++)this.media[this.mediaCol[parseInt(n.toString(),10)].uid].removeListener(this.mediaBindInstance[this.mediaCol[parseInt(n.toString(),10)].index])},f.prototype.eventInitializer=function(){},f.prototype.destroy=function(){var u=this.element,f,r,i;if(u){for(f=!(!u.querySelector("."+st)||!u.querySelector("."+it)),f&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(l,{}),this.destroyDependentModules(),this.isReact&&this.destroyTemplate(["template"]),this.isVue&&this.destroyTemplate(),f&&n.prototype.destroy.call(this),this.toolTipObj.destroy(),this.isReact&&!t.Browser.isIE&&(this.element.innerHTML=""),r=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],i=0;i<r.length;i++)this[r[parseInt(i.toString(),10)]]&&(this[r[parseInt(i.toString(),10)]]=null);this.element.innerHTML="";t.classList(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"])}},f.prototype.destroyDependentModules=function(){var n=this.element;n&&(n.querySelector("."+st)||n.querySelector("."+it))&&(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())},f.prototype.getModuleName=function(){return"grid"},f.prototype.enableBoxSelection=function(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):(this.element.classList.remove("e-afenabled"),this.notify(sl,{}))},f.prototype.setCSSClass=function(n){this.cssClass&&t.addClass([this.element],this.cssClass.split(" "));n&&t.removeClass([this.element],n.split(" "))},f.prototype.onPropertyChanged=function(n,i){var e,r=!1,o=!1,y=!1,p=null,u=null,h,s,c,l,b,a,f,v;if(!this.isDestroyed){for(this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close(),h=Object.keys(n),h.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),o=!0),s=0,c=h;s<c.length;s++){l=c[s];switch(l){case"allowPaging":this.notify(w,{module:"pager",enable:this.allowPaging});r=!0;"100%"===this.height&&this.scrollModule.refresh();break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1;this.notify(wt,{module:"pager",properties:n.pageSettings});break}if(this.pagerModule&&this.pagerModule.isCancel)return void(this.pagerModule.isCancel=!1);this.notify(wt,{module:"pager",properties:n.pageSettings});(t.isNullOrUndefined(n.pageSettings.currentPage)&&t.isNullOrUndefined(n.pageSettings.pageSize)&&t.isNullOrUndefined(n.pageSettings.totalRecordsCount)||!t.isNullOrUndefined(i.pageSettings)&&n.pageSettings.currentPage!==i.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageRequireRefresh&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(r=!0);this.pageRequireRefresh||(this.pageRequireRefresh=!0);this.pagerModule&&this.pagerModule.isCancel&&(this.pagerModule.isCancel=!1);break;case"allowSorting":this.notify(w,{module:"sort",enable:this.allowSorting});r=!0;e=!0;break;case"allowFiltering":this.updateStackedFilter();this.notify(w,{module:"filter",enable:this.allowFiltering});r=!0;"FilterBar"!==this.filterSettings.type||this.editSettings.showAddNewRow&&"FilterBar"===this.filterSettings.type?this.refreshHeader():"100%"===this.height&&this.scrollModule.refresh();break;case"height":case"width":this.notify(w,{module:"scroll",properties:{width:n.width,height:n.height}});this.allowPaging&&this.pagerModule.refresh();break;case"allowReordering":this.headerModule.refreshUI();e=!0;break;case"allowRowDragAndDrop":this.notify(w,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop});this.renderModule.refresh();this.headerModule.refreshUI();break;case"allowSelection":this.notify(w,{module:"selection",enable:this.allowSelection});this.renderModule.refresh();break;case"cssClass":this.setCSSClass(i.cssClass);break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=et(this.rowTemplate);r=!0;break;case"emptyRecordTemplate":this.emptyRecordTemplateFn=et(this.emptyRecordTemplate);r=!0;break;case"detailTemplate":this.detailTemplateFn=et(this.detailTemplate);r=!0;break;case"allowGrouping":this.notify(w,{module:"group",enable:this.allowGrouping});this.headerModule.refreshUI();r=!0;e=!0;"100%"===this.height&&this.scrollModule.refresh();break;case"enableInfiniteScrolling":case"childGrid":if(r=!0,u=(p=this.parentDetails?document.querySelector("#"+this.parentDetails.parentID):null)?p.ej2_instances[0]:null,this.childGrid&&u&&t.isNullOrUndefined(u.childGrid.childGrid))for(b=Object.assign({},u.childGrid,{childGrid:n.childGrid}),u.setProperties({childGrid:b},!0);!t.isNullOrUndefined(u.parentDetails);)a=document.querySelector("#"+u.parentDetails.parentID),f=a?a.ej2_instances[0]:null,f&&(v=Object.assign({},f.childGrid),v.childGrid=u.childGrid,f.setProperties({childGrid:v},!0)),u=f;this.headerModule.refreshUI();break;case"toolbar":this.notify(w,{module:"toolbar"});"100%"===this.height&&this.scrollModule.refresh();break;case"groupSettings":this.notify(wt,{module:"group",properties:n.groupSettings,oldProperties:i.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(r=!0);this.notify(w,{module:"aggregate",properties:n});"100%"===this.height&&this.scrollModule.refresh();break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"enableColumnVirtualization":case"currencyCode":case"locale":this.isFrozenGrid()&&this.log("frozen_rows_columns");y=!0;o=!0;this.addNewRowFocus=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(r=!0);this.getDataModule().isQueryInvokedFromData=!1;break;case"autoFit":this.autoFit?this.preventAdjustColumns():this.restoreAdjustColumns();break;default:this.extendedPropertyChange(l,n,o)}}e&&this.updateDefaultCursor();o?y||this.getFrozenColumns()||this.frozenRows||this.frozenLeftColumns.length||this.frozenRightColumns.length?this.freezeRefresh():this.refresh():r&&(this.notify(ot,{requestType:"refresh"}),r=!1,this.maintainSelection(n.selectedRowIndex))}},f.prototype.extendedPropertyChange=function(n,i,r){var o,h,e,s;switch(n){case"enableRtl":this.updateRTL();this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=i.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind());"auto"!==this.height&&(this.scrollModule.removePadding(!i.enableRtl),this.scrollModule.setPadding());this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=i.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind());this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=i.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind());this.showColumnMenu&&this.columnMenuModule&&!this.enableAdaptiveUI&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=i.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind());"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&this.refreshHeader();this.notify(pl,{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.resizeModule&&this.resizeModule.render();this.headerModule.refreshUI();this.updateResizeLines();break;case"rowHeight":this.rowHeight?t.addClass([this.element],"e-grid-min-height"):t.removeClass([this.element],"e-grid-min-height");this.renderModule.refresh();this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI();this.notify(w,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(w,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(w,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.toolbarModule&&this.toolbarModule.refreshToolbarItems();this.notify(w,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter();this.notify(wt,{module:"filter",properties:i.filterSettings});break;case"searchSettings":this.notify(wt,{module:"search",properties:i.searchSettings});break;case"sortSettings":this.notify(wt,{module:"sort"});break;case"selectionSettings":this.notify(wt,{module:"selection",properties:i.selectionSettings});break;case"editSettings":this.notify(wt,{module:"edit",properties:i.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap();this.notify(ru,{"case":"textwrap",isModeChg:"textWrapSettings"===n});this.refreshHeader();"100%"===this.height&&this.scrollModule.refresh();break;case"dataSource":if(o=this.getDataModule().getState(),this.allowPaging&&this.pageSettings.pageSizes&&!this.getDataModule().isRemote()&&(!o||!o.isPending)&&this.pagerModule.pagerObj.isAllPage&&(h=this.dataSource instanceof u.DataManager?this.dataSource.dataSource.json.length:"result"in this.dataSource?this.dataSource.count:this.dataSource.length,Array.isArray(this.pageSettings.pageSizes)&&this.pageSettings.pageSizes.indexOf("All")>-1||this.pageSettings.pageSizes||this.pageSettings.pageSize===h?(this.setProperties({pageSettings:{pageSize:h}},!0),this.pagerModule.pagerObj.setProperties({pageSize:h},!0)):this.pagerModule.pagerObj.isAllPage=!1),!this.allowSelection||!this.isPersistSelection||o&&o.isPending||this.clearSelection(),!t.isNullOrUndefined(this.dataSource)&&this.dataSource.result&&(this.isVirtualAdaptive=!1),Object.getPrototypeOf(i).deepWatch)for(var l=this.getPrimaryKeyFieldNames()[0],f=0,c=Object.keys(i.dataSource);f<c.length;f++)this.setRowData(t.getValue(l,this.dataSource[c[parseInt(f.toString(),10)]]),this.dataSource[c[parseInt(f.toString(),10)]]);else if(o.isPending){if(e=t.isNullOrUndefined(this.dataSource)?[]:this.dataSource.result,(s=o.group||[]).length&&!this.groupSettings.enableLazyLoading&&(!e.length||!e[0].field))for(f=0;f<s.length;f++)e=u.DataUtil.group(e,s[parseInt(f.toString(),10)],o.aggregates||[]);this.dataSource={result:e,count:this.dataSource.count,aggregates:this.dataSource.aggregates};this.getDataModule().setState({});o.resolver(this.dataSource)}else{if(!t.isNullOrUndefined(this.dataSource)&&this.dataSource.result&&this.dataSource.count&&this.groupSettings.columns.length){if(e=this.dataSource.result,(s=this.groupSettings.columns).length&&(!e.length||!e[0].field))for(f=0;f<s.length;f++)e=u.DataUtil.group(e,s[parseInt(f.toString(),10)]);this.dataSource={result:e,count:this.dataSource.count}}this.getDataModule().setState({isDataChanged:!1});this.notify(de,{});r||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(va,{}))}this.scrollRefresh();break;case"enableHover":(i.enableHover?t.addClass:t.removeClass)([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(i.selectedRowIndex);this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(vr,{});break;case"rowRenderingMode":this.enableVerticalRendering();this.notify(wa,{});this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(i.enableStickyHeader);break;case"allowPdfExport":case"allowExcelExport":this.toolbarModule&&this.toolbarModule.refreshToolbarItems();break;case"enableRowSpan":case"enableColumnSpan":this.refreshColumns()}},f.prototype.maintainSelection=function(n){var i=this,t;if(-1!==n){t=function(){i.selectRow(n);i.off(k,t)};this.on(k,t,this)}},f.prototype.setProperties=function(t,i){n.prototype.setProperties.call(this,t,i);t.filterSettings&&this.filterModule&&i&&this.filterModule.refreshFilter()},f.prototype.getTablesCount=function(){return this.tablesCount},f.prototype.updateDefaultCursor=function(){for(var r,t,i,u=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),f=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),e=this.getColumns(),n=0;n<u.length;n++)r=u[parseInt(n.toString(),10)],t=e[parseInt(n.toString(),10)],this.allowGrouping&&t.allowGrouping||this.allowReordering&&t.allowReordering||this.allowSorting&&t.allowSorting?r.classList.add("e-mousepointer"):r.classList.add("e-defaultcursor");for(i=0;i<f.length;i++)this.allowReordering&&f[parseInt(i.toString(),10)].classList.add("e-mousepointer")},f.prototype.updateColumnModel=function(n,i){for(var r=0,u=t.isNullOrUndefined(n)?0:n.length;r<u;r++)n[parseInt(r.toString(),10)].columns?this.updateColumnModel(n[parseInt(r.toString(),10)].columns,!0):this.columnModel.push(n[parseInt(r.toString(),10)]);!t.isNullOrUndefined(i)&&i||this.updateLockableColumns()},f.prototype.getFrozenLeftCount=function(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()},f.prototype.isFrozenGrid=function(){return 0!==this.getFrozenColumns()||0!==this.frozenLeftColumns.length||0!==this.frozenRightColumns.length||0!==this.fixedColumns.length},f.prototype.getFrozenMode=function(){return this.frozenName},f.prototype.updateLockableColumns=function(){for(var n=this.columnModel,i=0,r=0,u=this.getFrozenColumns(),t=0;t<n.length;t++)n[parseInt(t.toString(),10)].lockColumn&&(t<u?(n.splice(i,0,n.splice(t,1)[0]),i++):(n.splice(u+r,0,n.splice(t,1)[0]),r++))},f.prototype.checkLockColumns=function(n){for(var t=0;t<n.length;t++)n[parseInt(t.toString(),10)].columns?this.checkLockColumns(n[parseInt(t.toString(),10)].columns):n[parseInt(t.toString(),10)].lockColumn&&this.lockcolPositionCount++},f.prototype.leftrightColumnWidth=function(n){var i="left"===n?this.getFrozenLeftColumns():"right"===n?this.getFrozenRightColumns():[],t=0;return i.filter(function(n){n.visible&&(t+=parseInt(n.width.toString(),10))}),t},f.prototype.getColumns=function(n){var c=this,u=this.inViewIndexes.map(function(n){return n-c.groupSettings.columns.length}).filter(function(n){return n>-1}),f=u.length,i;(!this.enableColumnVirtualization||t.isNullOrUndefined(this.columnModel)||0===this.columnModel.length||n)&&(this.columnModel=[],this.updateColumnModel(this.columns));var r=0===f?this.columnModel:this.getVisibleColumns().slice(u[0],u[f-1]+1),e=[],o=[],h=[],s=this.enableColumnVirtualization&&this.isPreparedFrozenColumns&&0===f;for(s&&(this.frozenRightColumns=[],this.frozenLeftColumns=[]),i=0;i<r.length;i++)"Left"===r[parseInt(i.toString(),10)].freeze||r[parseInt(i.toString(),10)].isFrozen?(e.push(r[parseInt(i.toString(),10)]),s&&this.frozenLeftColumns.push(r[parseInt(i.toString(),10)])):"Right"===r[parseInt(i.toString(),10)].freeze?(o.push(r[parseInt(i.toString(),10)]),s&&this.frozenRightColumns.push(r[parseInt(i.toString(),10)])):h.push(r[parseInt(i.toString(),10)]);return this.enableColumnVirtualization&&this.isFrozenGrid()&&(this.frozenLeftColumns.length&&(e=this.frozenLeftColumns),this.frozenRightColumns.length&&(o=this.frozenRightColumns)),e.concat(h).concat(o)},f.prototype.getStackedHeaderColumnByHeaderText=function(n,t){for(var i,r=0;r<t.length;r++){if(i=t[parseInt(r.toString(),10)],i.field===n||i.headerText===n){this.stackedColumn=i;break}i.columns&&this.getStackedHeaderColumnByHeaderText(n,i.columns)}return this.stackedColumn},f.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},f.prototype.getQuery=function(){return this.query},f.prototype.getLocaleConstants=function(){return this.defaultLocale},f.prototype.setColumnIndexesInView=function(n){this.inViewIndexes=n},f.prototype.getVisibleColumns=function(){return this.getCurrentVisibleColumns()},f.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},f.prototype.setGridHeaderContent=function(n){this.headerModule.setPanel(n)},f.prototype.getContentTable=function(){return this.contentModule.getTable()},f.prototype.setGridContentTable=function(n){this.contentModule.setTable(n)},f.prototype.getContent=function(){return this.contentModule.getPanel()},f.prototype.setGridContent=function(n){this.contentModule.setPanel(n)},f.prototype.getHeaderTable=function(){return this.headerModule.getTable()},f.prototype.setGridHeaderTable=function(n){this.headerModule.setTable(n)},f.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName(fu)[0],this.footerElement},f.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName(fu)[0],this.footerElement.firstChild.firstChild},f.prototype.getPager=function(){return this.gridPager},f.prototype.setGridPager=function(n){this.gridPager=n},f.prototype.getRowByIndex=function(n){return this.enableVirtualization&&this.groupSettings.enableLazyLoading?this.lazyLoadRender.getRowByIndex(n):this.contentModule.getRowByIndex(n)},f.prototype.getMovableRowByIndex=function(n){return this.contentModule.getRowByIndex(n)},f.prototype.getFrozenRowByIndex=function(n){return this.contentModule.getRowByIndex(n)},f.prototype.getRows=function(){return this.contentModule.getRowElements()},f.prototype.getFrozenRightRowByIndex=function(n){return this.contentModule.getRowByIndex(n)},f.prototype.getRowInfo=function(n){var e=n,o={target:n},r,u,a,s,h,f;if(!t.isNullOrUndefined(n)&&t.isNullOrUndefined(i(e,"e-detailrowcollapse")&&t.isNullOrUndefined(i(e,"e-recordplusexpand")))){if(r=t.closest(e,"."+v),!r)return u=t.closest(e,"."+y),t.isNullOrUndefined(u)||u.classList.contains("e-addedrow")||(a=this.getRowObjectFromUID(u.getAttribute("data-uid")),s=parseInt(u.getAttribute(c),10)-1,o={row:u,rowData:a.data,rowIndex:s}),o;if(h=parseInt(r.getAttribute(ft),10)-1,f=t.closest(r,"."+y),!t.isNullOrUndefined(r)&&!isNaN(h)&&!t.isNullOrUndefined(f)){s=parseInt(f.getAttribute(c),10)-1;var b=this.contentModule.getRows(),k=h+this.getIndentCount(),l=b.filter(function(n){return n.uid===f.getAttribute("data-uid")}),p={},w=void 0;Object.keys(l).length&&(p=l[0].data,w=l[0].cells[parseInt(k.toString(),10)].column);o={cell:r,cellIndex:h,row:f,rowIndex:s,rowData:p,column:w,target:n}}}return o},f.prototype.getMovableRows=function(){return this.contentModule.getRowElements()},f.prototype.getFrozenRightRows=function(){return this.contentModule.getRowElements()},f.prototype.getDataRows=function(){return this.getAllDataRows()},f.prototype.getAllDataRows=function(n){var u,i,f,r;return t.isNullOrUndefined(this.getContentTable().querySelector(h))?[]:(u=this.getContentTable().querySelector(h),i=[].slice.call(u.children),(this.editSettings.showAddNewRow&&(i[0].classList.contains("e-addedrow")?i.shift():i[i.length-1].classList.contains("e-addedrow")&&i.pop()),this.frozenRows)&&(f=this.getHeaderTable().querySelector(h),r=[].slice.call(f.children),i=this.addMovableRows(r,i),this.editSettings.showAddNewRow&&r[0].classList.contains("e-addedrow")&&r.shift()),this.generateDataRows(i,n))},f.prototype.addMovableRows=function(n,t){for(var i=0,r=t.length;i<r;i++)n.push(t[parseInt(i.toString(),10)]);return n},f.prototype.generateDataRows=function(n,t){for(var r=[],i=0,u=n.length;i<u;i++)n[parseInt(i.toString(),10)].classList.contains(y)&&(!n[parseInt(i.toString(),10)].classList.contains("e-hiddenrow")||t)&&(this.isCollapseStateEnabled()?r[parseInt(n[parseInt(i.toString(),10)].getAttribute("aria-rowindex"),10)-1]=n[parseInt(i.toString(),10)]:r.push(n[parseInt(i.toString(),10)]));return r},f.prototype.getMovableDataRows=function(){return this.getAllMovableDataRows()},f.prototype.getAllMovableDataRows=function(n){return this.getAllDataRows(n)},f.prototype.getFrozenDataRows=function(){return this.getAllFrozenDataRows()},f.prototype.getAllFrozenDataRows=function(n){return this.getAllDataRows(n)},f.prototype.getFrozenRightDataRows=function(){return this.getAllFrozenRightDataRows()},f.prototype.getAllFrozenRightDataRows=function(n){return this.getAllDataRows(n)},f.prototype.setCellValue=function(n,i,r){var o="data",s="index",l=this.getPrimaryKeyFieldNames()[0],a=new fi(this,this.serviceLocator),f=this.getColumnIndexByField(i),v=this.getColumnByField(i),u=this.contentModule.getRows().filter(function(i){return t.getValue(l,i.data)===n})[0],h=u?this.element.querySelector("[data-uid="+u.uid+"]"):null,e,c;t.isNullOrUndefined(h)||("string"==typeof r&&(r=this.sanitize(r)),t.setValue(i,r,u[""+o]),e=this.enableVirtualization?h.children[parseInt(f.toString(),10)]:this.getCellFromIndex(u[""+s],f),t.isNullOrUndefined(e)||(this.groupSettings.columns.length&&(f+=this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&f++,this.isRowDragable()&&f++,c=u.cells[+f],a.refreshTD(e,c,u[""+o],{index:u[""+s]}),this.isReact&&(e=this.enableVirtualization?h.children[parseInt(f.toString(),10)]:this.getCellFromIndex(u[""+s],f)),this.aggregates.length>0&&(this.notify(sr,{}),this.groupSettings.columns.length>0&&this.notify(iu,{})),t.isNullOrUndefined(u)||t.isNullOrUndefined(u.changes)||(u.changes[""+i]=r),this.trigger(cf,{cell:e,column:v,data:u[""+o]}),this.isReact&&"0"===e.getAttribute("tabindex")&&e.classList.contains("e-focused")&&e.focus()))},f.prototype.refreshReactColumnTemplateByUid=function(n,t){var i=this;this.isReact&&this.clearTemplate(["columnTemplate"],void 0,function(){var n=!(!i.childGrid||!i.element.querySelectorAll(".e-childgrid").length),r=n?i.getContentTable().querySelectorAll(".e-row"):i.getDataRows();i.refreshReactTemplateTD(r,n);t&&i.renderTemplates()})},f.prototype.refreshReactTemplateTD=function(n,r,u){for(var f,c,o,s,y,p,l="cells",a=this.getIndentCount(),v=0,h=!1,e=0;e<n.length;e++){if(f=this.getRowObjectFromUID(n[parseInt(e.toString(),10)].getAttribute("data-uid")),r&&!f&&i(n[parseInt(e.toString(),10)],"e-childgrid")&&(c=i(n[parseInt(e.toString(),10)],"e-childgrid").ej2_instances[0],f=c.getRowObjectFromUID(n[parseInt(e.toString(),10)].getAttribute("data-uid")),v=c.getIndentCount(),h=!0),f&&f.isDataRow&&!t.isNullOrUndefined(f.index)&&!n[parseInt(e.toString(),10)].classList.contains("e-editedrow"))for(o=0;o<f[""+l].length;o++)s=f[""+l][parseInt(o.toString(),10)],s.isTemplate&&(y=new fi(this,this.serviceLocator),p=r?n[parseInt(e.toString(),10)].children[s.index+(h?v:a)]:this.getCellFromIndex(e,u?s.index:o-a),y.refreshTD(p,s,f.data,{index:f.index}));h=!1}},f.prototype.refreshGroupCaptionFooterTemplate=function(){for(var u,n,f,e=!(!this.childGrid||!this.element.querySelectorAll(".e-childgrid").length),r=this.getContentTable().querySelectorAll(".e-groupcaptionrow, .e-groupfooterrow"),t=0;t<r.length;t++)u=this,n=this.getRowObjectFromUID(r[parseInt(t.toString(),10)].getAttribute("data-uid")),(e&&!n&&i(r[parseInt(t.toString(),10)],"e-childgrid")&&(n=(u=i(r[parseInt(t.toString(),10)],"e-childgrid").ej2_instances[0]).getRowObjectFromUID(r[parseInt(t.toString(),10)].getAttribute("data-uid"))),n)&&(f={cells:n.cells.filter(function(n){return n.isDataCell}),data:n.data,dataUid:n.uid},u.notify(ol,f))},f.prototype.refreshReactHeaderTemplateByUid=function(n){if(this.isReact)for(var f=this.headerModule.rows,e=this.getNormalizedColumnIndex(n),o=function(u){var o=f[parseInt(u.toString(),10)].cells[parseInt(e.toString(),10)],a,v,s,h,c,l;o&&o.column.uid===n&&(a=new eb(r,r.serviceLocator),v=i(r.element.querySelectorAll("[data-mappinguid="+n+"]")[0],"e-templatecell"),a.refresh(o,v),s=r.sortSettings.columns,h=s.findIndex(function(n){return n.field===o.column.field}),-1!==h&&(c=r.getColumnHeaderByField(o.column.field),r.ariaService.setSort(c,s[parseInt(h.toString(),10)].direction.toLowerCase()),s.length>1&&c.querySelector(".e-headercelldiv").insertBefore(r.createElement("span",{className:"e-sortnumber",innerHTML:(h+1).toString()}),c.querySelector(".e-headertext")),l=c.querySelector(".e-sortfilterdiv"),"Ascending"===s[parseInt(h.toString(),10)].direction?t.classList(l,["e-ascending","e-icon-ascending"],[]):t.classList(l,["e-descending","e-icon-descending"],[])))},r=this,u=0;u<f.length;u++)o(u)},f.prototype.setRowData=function(n,i){var u=this.contentModule.getRows(),h=this.getPrimaryKeyFieldNames()[0],r,e,o,f,s;this.groupSettings.columns.length>0&&this.aggregates.length>0&&(u=u.filter(function(n){return n.isDataRow}));r=u.filter(function(i){return t.getValue(h,i.data)===n})[0];e=r?[].slice.call(this.element.querySelectorAll("[data-uid="+r.uid+"]")):void 0;!t.isNullOrUndefined(r)&&e.length&&((r.changes=i,this.frozenRows)?(o=this.getRowsObject()[r.index],this.setFrozenRowData(o,i)):(f=this.getRowElementByUID(r.uid),s=!(!f||!f.querySelector(".e-lastrowcell")),this.setFrozenRowData(r,i),s&&this.scrollModule.setLastRowCell()),this.aggregates.length>0&&(this.notify(sr,{}),this.groupSettings.columns.length>0&&this.notify(iu,{})))},f.prototype.setFrozenRowData=function(n,t){var i=new ci(this.serviceLocator,null,this);n.changes=t;gh(n,this.getForeignKeyColumns(),n.changes);i.refresh(n,this.getColumns(),!0)},f.prototype.getCellFromIndex=function(n,t){return rk(this,this.getColumnByIndex(t),n,t)},f.prototype.getMovableCellFromIndex=function(n,t){return this.getCellFromIndex(n,t)},f.prototype.getFrozenRightCellFromIndex=function(n,t){return this.getCellFromIndex(n,t)},f.prototype.getColumnHeaderByIndex=function(n){return this.getHeaderTable().getElementsByClassName("e-headercell")[parseInt(n.toString(),10)]},f.prototype.getMovableColumnHeaderByIndex=function(n){return this.getColumnHeaderByIndex(n)},f.prototype.getFrozenRightColumnHeaderByIndex=function(n){return this.getColumnHeaderByIndex(n)},f.prototype.getFrozenLeftColumnHeaderByIndex=function(n){return this.getColumnHeaderByIndex(n)},f.prototype.getRowObjectFromUID=function(n){var r=this.contentModule.getRows(),i=this.rowObject(r,n);return t.isNullOrUndefined(i)&&this.enableVirtualization&&this.groupSettings.columns.length>0?i=this.rowObject(this.vRows,n):i},f.prototype.rowObject=function(n,t){var i,r,u;if(n)for(i=0,r=n;i<r.length;i++)if(u=r[i],u.uid===t)return u;return null},f.prototype.getRowsObject=function(){return this.contentModule.getRows()},f.prototype.getMovableRowsObject=function(){return this.contentModule.getRows()},f.prototype.getFrozenRightRowsObject=function(){return this.contentModule.getRows()},f.prototype.getColumnHeaderByField=function(n){var t=this.getColumnByField(n);if(t)return this.getColumnHeaderByUid(t.uid)},f.prototype.getColumnHeaderByUid=function(n){var t=this.getHeaderContent().querySelector("[data-mappinguid="+n+"]");if(t)return t.parentElement},f.prototype.getColumnByIndex=function(n){var t;return this.getColumns().some(function(i,r){return t=i,r===n}),t},f.prototype.getColumnByField=function(n){return uf(this.getColumns(),function(t){if(t.field===n)return t})[0]},f.prototype.getColumnIndexByField=function(n){for(var i=this.getColumns(),t=0;t<i.length;t++)if(i[parseInt(t.toString(),10)].field===n)return t;return-1},f.prototype.getColumnByUid=function(n,t){return uf((t?this.columns:this.getColumns()).concat(this.getStackedColumns(this.columns)),function(t){if(t.uid===n)return t})[0]},f.prototype.getStackedColumns=function(n,t){var i,u,r;for(void 0===t&&(t=[]),i=0,u=n;i<u.length;i++)r=u[i],r.columns&&(t.push(r),this.getStackedColumns(r.columns,t));return t},f.prototype.getColumnIndexByUid=function(n){var i=uf(this.getColumns(),function(t,i){if(t.uid===n)return i})[0];return t.isNullOrUndefined(i)?-1:i},f.prototype.getUidByColumnField=function(n){return uf(this.getColumns(),function(t){if(t.field===n)return t.uid})[0]},f.prototype.getNormalizedColumnIndex=function(n){return this.getColumnIndexByUid(n)+this.getIndentCount()},f.prototype.getIndentCount=function(){var n=0;return this.allowGrouping&&(n+=this.groupSettings.columns.length),this.isDetail()&&n++,this.isRowDragable()&&t.isNullOrUndefined(this.rowDropSettings.targetID)&&n++,n},f.prototype.getColumnFieldNames=function(){for(var t,i=[],n=0,r=this.getColumns().length;n<r;n++)(t=this.getColumns()[parseInt(n.toString(),10)]).visible&&i.push(t.field);return i},f.prototype.getRowTemplate=function(){return this.rowTemplateFn},f.prototype.getEmptyRecordTemplate=function(){return this.emptyRecordTemplateFn},f.prototype.getDetailTemplate=function(){return this.detailTemplateFn},f.prototype.getEditTemplate=function(){return this.editTemplateFn},f.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},f.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},f.prototype.getColumnChooserTemplate=function(){return this.columnChooserTemplateFn},f.prototype.getColumnChooserHeaderTemplate=function(){return this.columnChooserHeaderTemplateFn},f.prototype.getColumnChooserFooterTemplate=function(){return this.columnChooserFooterTemplateFn},f.prototype.getPrimaryKeyFieldNames=function(){for(var t=[],n=0;n<this.columnModel.length;n++)this.columnModel[parseInt(n.toString(),10)].isPrimaryKey&&t.push(this.columnModel[parseInt(n.toString(),10)].field);return t},f.prototype.refresh=function(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())},f.prototype.refreshHeader=function(){this.headerModule.refreshUI()},f.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},f.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},f.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},f.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},f.prototype.getSelectedColumnsUid=function(){var t=this,n=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(function(i){return n.push(t.getColumns()[parseInt(i.toString(),10)].uid)}),n},f.prototype.getDataModule=function(){return this.renderModule.data},f.prototype.showColumns=function(n,t){t=t||"headerText";this.showHider.show(n,t)},f.prototype.hideColumns=function(n,t){t=t||"headerText";this.showHider.hide(n,t)},f.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)},f.prototype.getFrozenRightColumnsCount=function(){return this.frozenRightCount||this.rightcount},f.prototype.getFrozenLeftColumnsCount=function(){return this.frozenLeftCount||this.leftcount},f.prototype.getMovableColumnsCount=function(){return this.movableCount||this.movablecount},f.prototype.updateFrozenColumnsWidth=function(){if(this.isFrozenGrid()&&!this.enableColumnVirtualization)for(var n=this.getColumns(),o=!0,u=0,i=0,f=0,s=n.some(function(n){return("Left"===n.freeze||"Right"===n.freeze||"Fixed"===n.freeze||n.isFrozen)&&"auto"===n.width}),h=function(e){var h=n[parseInt(e.toString(),10)],c,l;(t.isNullOrUndefined(h.width)&&("Left"===h.freeze||"Right"===h.freeze||"Fixed"===h.freeze||h.isFrozen)&&(h.width=Math.max(200,h.minWidth?parseFloat(h.minWidth.toString()):0),!t.isNullOrUndefined(h.maxWidth)&&parseFloat(h.maxWidth.toString())<h.width&&(h.width=h.maxWidth)),"auto"===h.width&&s)&&(c=0,o&&(n.filter(function(n){if(n.visible&&("auto"===n.width&&u++,"auto"!==n.width)){var i=t.isNullOrUndefined(n.width)?Math.max(200,n.minWidth?parseFloat(n.minWidth.toString()):0):parseFloat(n.width.toString());c+=i}}),l=r.isPercentageWidthGrid()||"auto"===r.width?r.element.getBoundingClientRect().width:parseFloat(r.width.toString()),(i="auto"===r.height?l-c:l-c-oi())<0&&(i=0),f=parseFloat((i/u).toString()),n.filter(function(n){n.visible&&n.minWidth&&parseFloat(n.minWidth.toString())>f&&(i-=parseFloat(n.minWidth.toString()),u--)}),o=!1),h.width=h.minWidth&&parseFloat(h.minWidth.toString())>f?parseFloat(h.minWidth.toString()):i/u)},r=this,e=0;e<n.length;e++)h(e)},f.prototype.refreshSplitFrozenColumn=function(){this.splitFrozenCount(this.columns);this.updateFrozenColumnsWidth();this.isAutoGenerateColumns=!0},f.prototype.setFrozenCount=function(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0;this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0;this.frozenLeftColumns=[];this.frozenRightColumns=[];this.movableColumns=[];this.fixedColumns=[];this.splitFrozenCount(this.columns);this.leftcount=this.frozenLeftCount;this.rightcount=this.frozenRightCount;this.movablecount=this.movableCount;this.frozenName=this.frozenLeftCount&&!this.frozenRightCount?"Left":this.frozenRightCount&&!this.frozenLeftCount?"Right":this.frozenLeftCount&&this.frozenRightCount?"Left-Right":this.frozenColumns||this.frozenRows?"Left":void 0},f.prototype.getVisibleFrozenLeftCount=function(){return this.visibleFrozenLeft},f.prototype.getVisibleFrozenRightCount=function(){return this.visibleFrozenRight},f.prototype.getVisibleMovableCount=function(){return this.visibleMovable},f.prototype.getFrozenRightColumns=function(){return this.frozenRightColumns},f.prototype.getFrozenLeftColumns=function(){return this.frozenLeftColumns},f.prototype.getMovableColumns=function(){return this.movableColumns},f.prototype.splitStackedColumns=function(n){for(var t=0;t<n.length;t++)n[parseInt(t.toString(),10)].columns?this.splitStackedColumns(n[parseInt(t.toString(),10)].columns):"Left"===n[parseInt(t.toString(),10)].freeze||n[parseInt(t.toString(),10)].isFrozen?(!1!==n[parseInt(t.toString(),10)].visible&&this.visibleFrozenLeft++,this.leftcount++):"Right"===n[parseInt(t.toString(),10)].freeze?(!1!==n[parseInt(t.toString(),10)].visible&&this.visibleFrozenRight++,this.rightcount++):"Fixed"===n[parseInt(t.toString(),10)].freeze?(!1!==n[parseInt(t.toString(),10)].visible&&this.visibleFrozenFixed++,this.fixedcount++):(!1!==n[parseInt(t.toString(),10)].visible&&this.visibleMovable++,this.movablecount++)},f.prototype.pushStackedColumns=function(n,t,i,r,u){var f,e;for(i[parseInt(t.toString(),10)]={headerText:r.headerText},r.textAlign&&(i[parseInt(t.toString(),10)].textAlign=r.textAlign),r.customAttributes&&(i[parseInt(t.toString(),10)].customAttributes=r.customAttributes),f=0;f<n.length;f++)n[parseInt(f.toString(),10)].columns?(t+=1,this.pushStackedColumns(n[parseInt(f.toString(),10)].columns,t,i,n[parseInt(f.toString(),10)],u),t-=1):(e=i.slice().slice(0,t+1),"Left"===n[parseInt(f.toString(),10)].freeze||n[parseInt(f.toString(),10)].isFrozen?(this.stackedLeft.push(e),this.stackedarrayLeft.push(n[parseInt(f.toString(),10)])):"Right"===n[parseInt(f.toString(),10)].freeze?(this.stackedRight.push(e),this.stackedarrayRight.push(n[parseInt(f.toString(),10)])):"Fixed"===n[parseInt(f.toString(),10)].freeze?(this.stackedFixed.push(e),this.stackedarrayFixed.push(n[parseInt(f.toString(),10)])):(this.stackedMovable.push(e),this.stackedarrayMovable.push(n[parseInt(f.toString(),10)])))},f.prototype.pushallcol=function(n,t,i,r,u){var f,e;if(i.headerText===t.headerText)u?i.columns.push(r):(f={headerText:n.headerText,columns:[]},n.textAlign&&(f.textAlign=n.textAlign),n.customAttributes&&(f.customAttributes=n.customAttributes),i.columns.push(f));else if(i.columns&&i.columns.length)for(e=0;e<i.columns.length;e++)this.pushallcol(n,t,i.columns[parseInt(e.toString(),10)],r,u)},f.prototype.resetStackedColumns=function(n,t,i){for(var r,u,s,h,e={},o=[],f=1;f<=n.length;f++)for(r=n[f-1],u=0;u<r.length;u++)if(e.columns||1!==f?-1===o.indexOf(r[parseInt(u.toString(),10)])&&(this.pushallcol(r[parseInt(u.toString(),10)],r[u-1],e),o.push(r[parseInt(u.toString(),10)])):(e={headerText:r[parseInt(u.toString(),10)].headerText,textAlign:r[parseInt(u.toString(),10)].textAlign,customAttributes:r[parseInt(u.toString(),10)].customAttributes,columns:[]},o.push(r[parseInt(u.toString(),10)])),u===r.length-1)for(this.pushallcol(null,r[parseInt(u.toString(),10)],e,t[f-1],!0),s=0;s!==n.length-1&&f!==n.length;)h=r.map(function(n){return n.headerText}).join(", "),h===n[parseInt(f.toString(),10)].map(function(n){return n.headerText}).join(", ")&&(f++,this.pushallcol(null,r[parseInt(u.toString(),10)],e,t[f-1],!0)),s++;"Left"===i?this.frozenLeftColumns.push(e):"Right"===i?this.frozenRightColumns.push(e):this.movableColumns.push(e)},f.prototype.splitFrozenCount=function(n){var r,i;if((this.frozenColumns||this.changedProperties&&0===this.changedProperties.frozenColumns)&&(r=!this.enableColumnVirtualization||this.enableColumnVirtualization&&this.isPreparedFrozenColumns?this.enableColumnVirtualization&&this.columnModel&&this.columnModel.length?this.columnModel:this.getColumns():this.columns,!this.changedProperties||this.changedProperties&&!this.changedProperties.frozenColumns))for(i=0;i<r.length;i++)r[parseInt(i.toString(),10)].freeze=this.frozenColumns>i?"Left":"Right"===r[parseInt(i.toString(),10)].freeze||"Fixed"===r[parseInt(i.toString(),10)].freeze?r[parseInt(i.toString(),10)].freeze:void 0;for(i=0;i<(t.isNullOrUndefined(n)?0:n.length);i++)n[parseInt(i.toString(),10)].columns?(this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0,this.splitStackedColumns(n[parseInt(i.toString(),10)].columns),!this.leftcount||this.rightcount||this.movablecount||this.fixedcount?!this.rightcount||this.leftcount||this.movablecount||this.fixedcount?!this.movablecount||this.leftcount||this.rightcount||this.fixedcount?!this.fixedcount||this.leftcount||this.rightcount||this.movablecount?(this.frozenLeftCount+=this.leftcount,this.frozenRightCount+=this.rightcount,this.movableCount+=this.movablecount,this.fixedCount+=this.fixedcount,this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0,this.stackedLeft=[],this.stackedRight=[],this.stackedFixed=[],this.stackedMovable=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayFixed=[],this.stackedarrayMovable=[],this.pushStackedColumns(n[parseInt(i.toString(),10)].columns,0,[],n[parseInt(i.toString(),10)],{headerText:n[parseInt(i.toString(),10)].headerText,textAlign:n[parseInt(i.toString(),10)].textAlign,customAttributes:n[parseInt(i.toString(),10)].customAttributes,columns:[]}),this.stackedarrayLeft.length&&this.resetStackedColumns(this.stackedLeft,this.stackedarrayLeft,"Left"),this.stackedarrayRight.length&&this.resetStackedColumns(this.stackedRight,this.stackedarrayRight,"Right"),this.stackedarrayFixed.length&&this.resetStackedColumns(this.stackedFixed,this.stackedarrayFixed,"Fixed"),this.stackedarrayMovable.length&&this.resetStackedColumns(this.stackedMovable,this.stackedarrayMovable,"Movable"),this.stackedLeft=[],this.stackedRight=[],this.stackedMovable=[],this.stackedFixed=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayMovable=[],this.stackedarrayFixed=[]):(this.fixedCount+=this.fixedcount,this.fixedColumns.push(n[parseInt(i.toString(),10)]),this.movableCount+=this.movablecount,this.movableColumns.push(n[parseInt(i.toString(),10)])):(this.movableCount+=this.movablecount,this.movableColumns.push(n[parseInt(i.toString(),10)])):(this.frozenRightCount+=this.rightcount,this.frozenRightColumns.push(n[parseInt(i.toString(),10)])):(this.frozenLeftCount+=this.leftcount,this.frozenLeftColumns.push(n[parseInt(i.toString(),10)]))):"Right"===n[parseInt(i.toString(),10)].freeze?(!1!==n[parseInt(i.toString(),10)].visible&&this.visibleFrozenRight++,this.frozenRightColumns.push(n[parseInt(i.toString(),10)]),this.frozenRightCount++):"Left"===n[parseInt(i.toString(),10)].freeze||n[parseInt(i.toString(),10)].isFrozen?(!1!==n[parseInt(i.toString(),10)].visible&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(n[parseInt(i.toString(),10)]),this.frozenLeftCount++):"Fixed"===n[parseInt(i.toString(),10)].freeze?(this.fixedColumns.push(n[parseInt(i.toString(),10)]),this.fixedCount++,this.movableColumns.push(n[parseInt(i.toString(),10)]),this.movableCount++):(!1!==n[parseInt(i.toString(),10)].visible&&this.visibleMovable++,this.movableColumns.push(n[parseInt(i.toString(),10)]),this.movableCount++);this.frozenLeftColumns.length&&(r=this.frozenLeftColumns[this.frozenLeftColumns.length-1],this.removeBorder(this.frozenLeftColumns),this.frozenLeftBorderColumns(r instanceof ht?this.lastVisibleLeftCol(this.frozenLeftColumns):r));this.frozenRightColumns.length&&(r=this.frozenRightColumns[0],this.removeBorder(this.frozenRightColumns),this.frozenRightBorderColumns(r instanceof ht?this.firstVisibleRightCol(this.frozenRightColumns):r));(this.frozenLeftColumns.length||this.frozenRightColumns.length)&&this.freezeColumnRefresh&&(r=this.frozenLeftColumns.concat(this.movableColumns).concat(this.frozenRightColumns),this.setProperties({columns:r},!0),this.freezeColumnRefresh=!1)},f.prototype.removeBorder=function(n){for(var t=0;t<n.length;t++)n[parseInt(t.toString(),10)].columns&&n[parseInt(t.toString(),10)].columns.length?("Right"!==n[parseInt(t.toString(),10)].border&&"Left"!==n[parseInt(t.toString(),10)].border||(n[parseInt(t.toString(),10)].border=void 0),this.removeBorder(n[parseInt(t.toString(),10)].columns)):"Right"!==n[parseInt(t.toString(),10)].border&&"Left"!==n[parseInt(t.toString(),10)].border||(n[parseInt(t.toString(),10)].border=void 0)},f.prototype.isVisibleColumns=function(n,i){if(n.columns&&n.columns.length)for(var r=0;r<n.columns.length;r++)this.isVisibleColumns(n.columns[parseInt(r.toString(),10)],i),n.columns[parseInt(r.toString(),10)].visible&&t.isNullOrUndefined(n.columns[parseInt(r.toString(),10)].columns)&&(!t.isNullOrUndefined(n.columns[parseInt(r.toString(),10)].freeze)||n.columns[parseInt(r.toString(),10)].isFrozen)&&i.push("true");else n.visible&&(!t.isNullOrUndefined(n.freeze)||n.isFrozen)&&i.push("true")},f.prototype.lastVisibleLeftCol=function(n){for(var r,i,t=n.length-1;t>=0;t--)if(i=[],this.isVisibleColumns(n[parseInt(t.toString(),10)],i),n[parseInt(t.toString(),10)].visible&&-1!==i.indexOf("true")){r=n[parseInt(t.toString(),10)];break}return r},f.prototype.firstVisibleRightCol=function(n){for(var r,i,t=0;t<n.length;t++)if(i=[],this.isVisibleColumns(n[parseInt(t.toString(),10)],i),n[parseInt(t.toString(),10)].visible&&-1!==i.indexOf("true")){r=n[parseInt(t.toString(),10)];break}return r},f.prototype.frozenLeftBorderColumns=function(n){if(!t.isNullOrUndefined(n))if(n.columns&&n.columns.length){n.border="Left";var i=n.columns[n.columns.length-1];this.frozenLeftBorderColumns(i instanceof ht&&i.columns?this.lastVisibleLeftCol(n.columns):i)}else n.border="Left"},f.prototype.frozenRightBorderColumns=function(n){if(!t.isNullOrUndefined(n))if(n.columns&&n.columns.length){n.border="Right";var i=n.columns[0];this.frozenRightBorderColumns(i instanceof ht&&i.columns?this.firstVisibleRightCol(n.columns):i)}else n.border="Right"},f.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},f.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},f.prototype.getVisibleFrozenColumnsCount=function(){for(var i=0,t=this.columnModel,n=0;n<this.frozenColumns;n++)t[parseInt(n.toString(),10)].visible&&i++;if(this.frozenLeftCount||this.leftcount||this.frozenRightCount||this.rightcount)for(n=0;n<t.length;n++)t[parseInt(n.toString(),10)].visible&&("Left"===t[parseInt(n.toString(),10)].freeze||"Right"===t[parseInt(n.toString(),10)].freeze)&&i++;return i},f.prototype.getVisibleFrozenCount=function(n,t){if(!(this.frozenLeftCount||this.leftcount||this.frozenRightCount&&this.rightcount))for(var i=0,r=n.length;i<r;i++)n[parseInt(i.toString(),10)].columns?t=this.getVisibleFrozenCount(n[parseInt(i.toString(),10)].columns,t):n[parseInt(i.toString(),10)].isFrozen&&n[parseInt(i.toString(),10)].visible&&t++;return t},f.prototype.getFrozenCount=function(n,i,r){for(var u=0,f=t.isNullOrUndefined(n)?0:n.length;u<f;u++)n[parseInt(u.toString(),10)].columns?i=this.getFrozenCount(n[parseInt(u.toString(),10)].columns,i,r):(n[parseInt(u.toString(),10)].isFrozen&&r>this.frozenColumns-1&&i++,r++);return i},f.prototype.goToPage=function(n){this.pagerModule&&this.pagerModule.goToPage(n)},f.prototype.updateExternalMessage=function(n){this.pagerModule&&!this.pagerTemplate&&this.pagerModule.updateExternalMessage(n)},f.prototype.sortColumn=function(n,t,i){this.sortModule&&this.sortModule.sortColumn(n,t,i)},f.prototype.changeDataSource=function(n,i){this.isChangeDataSourceCall=!0;this.setProperties({sortSettings:{columns:[]}},!0);this.setProperties({filterSettings:{columns:[]}},!0);this.setProperties({searchSettings:{key:""}},!0);this.allowGrouping&&this.setProperties({groupSettings:{columns:[]}},!0);i&&i.length&&this.setProperties({columns:i},!0);n&&(t.isNullOrUndefined(i)&&this.setProperties({columns:[]},!0),this.setProperties({dataSource:n},!0));this.freezeRefresh();this.isChangeDataSourceCall=!1},f.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},f.prototype.removeSortColumn=function(n){this.sortModule&&this.sortModule.removeSortColumn(n)},f.prototype.clearGridActions=function(){this.setProperties({sortSettings:{columns:[]}},!0);this.setProperties({filterSettings:{columns:[]}},!0);this.setProperties({searchSettings:{key:""}},!0);this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()},f.prototype.filterByColumn=function(n,t,i,r,u,f,e,o){this.filterModule&&this.filterModule.filterByColumn(n,t,i,r,u,f,e,o)},f.prototype.clearFiltering=function(n){this.filterModule&&this.filterModule.clearFiltering(n)},f.prototype.removeFilteredColsByField=function(n,t){this.filterModule&&this.filterModule.removeFilteredColsByField(n,t)},f.prototype.selectRow=function(n,t){this.selectionModule&&this.selectionModule.selectRow(n,t)},f.prototype.selectRows=function(n){this.selectionModule&&this.selectionModule.selectRows(n)},f.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},f.prototype.selectCell=function(n,t){this.selectionModule&&this.selectionModule.selectCell(n,t)},f.prototype.selectCellsByRange=function(n,t){this.selectionModule.selectCellsByRange(n,t)},f.prototype.search=function(n){this.searchModule&&this.searchModule.search(n)},f.prototype.print=function(){this.printModule&&this.printModule.print()},f.prototype.deleteRecord=function(n,t){this.editModule&&this.editModule.deleteRecord(n,t)},f.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},f.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},f.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},f.prototype.addRecord=function(n,t){this.editModule&&this.editModule.addRecord(n,t)},f.prototype.deleteRow=function(n){this.editModule&&this.editModule.deleteRow(n)},f.prototype.editCell=function(n,t){this.editModule&&this.editModule.editCell(n,t)},f.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},f.prototype.updateCell=function(n,t,i){this.editModule&&this.editModule.updateCell(n,t,i)},f.prototype.updateRow=function(n,t){this.editModule&&this.editModule.updateRow(n,t)},f.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},f.prototype.enableToolbarItems=function(n,t){this.toolbarModule&&this.toolbarModule.enableItems(n,t)},f.prototype.copy=function(n){this.clipboardModule&&this.clipboardModule.copy(n)},f.prototype.recalcIndentWidth=function(){var r=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())&&!this.getHeaderTable().querySelector(".e-emptycell.e-indentRefreshed")&&this.getContentTable()){var n=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,u=[].slice.call(this.getHeaderTable().querySelector(hi).childNodes),f=[].slice.call(this.getContentTable().querySelector(hi).childNodes),e=n/30,t="Right"===this.getFrozenMode()?this.groupSettings.columns.length+this.getColumns().length:0,o=this.element.offsetWidth,i=function(n,t){if(ey(r)){var i=(t/o*100).toFixed(1)+"%";u[parseInt(n.toString(),10)].style.width=i;f[parseInt(n.toString(),10)].style.width=i}else u[parseInt(n.toString(),10)].style.width=t+"px",f[parseInt(n.toString(),10)].style.width=t+"px";r.notify(be,{index:n,width:t})};for(e>=1&&(n=30/e),n<1&&(n=1),(this.enableColumnVirtualization||this.isAutoGen||this.columns.length===this.groupSettings.columns.length)&&(n=30);t<this.groupSettings.columns.length;)i(t,n),t++;this.isDetail()&&(i(t,n),t++);this.isRowDragable()&&i(t,n);this.isAutoGen=!1;this.getHeaderTable().querySelector(".e-emptycell").classList.add("e-indentRefreshed")}},f.prototype.resetIndentWidth=function(){if(!this.isDestroyed){if(ey(this)&&(this.getHeaderTable().querySelector(".e-emptycell").classList.remove("e-indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth(),this.autoFit&&this.preventAdjustColumns()),("auto"===this.width||"string"==typeof this.width&&-1!==this.width.indexOf("%"))&&this.getColumns().filter(function(n){return(!n.width||"auto"===n.width)&&n.minWidth}).length>0){var n=this.widthService.getTableWidth(this.getColumns(),!0);this.widthService.setMinwidthBycalculation(n)}this.isFrozenGrid()&&this.enableColumnVirtualization&&this.widthService&&this.widthService.refreshFrozenScrollbar();this.allowTextWrap&&"Content"!==this.textWrapSettings.wrapMode&&this.notify(fo,{});this.frozenRows&&this.scrollModule&&this.scrollModule.resizeFrozenRowBorder();this.enableStickyHeader&&this.scrollModule.makeStickyHeader();this.enableAutoFill&&"Multiple"===this.selectionSettings.type&&"Cell"===this.selectionSettings.mode&&this.selectionModule.selectedRowCellIndexes.length&&(this.selectionModule.updateAutoFillPosition(),this.selectionModule.drawBorders())}},f.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},f.prototype.reorderColumns=function(n,t){this.reorderModule&&this.reorderModule.reorderColumns(n,t)},f.prototype.reorderColumnByModel=function(n,t){this.reorderModule&&this.reorderModule.reorderColumnByModel(n,t)},f.prototype.reorderColumnByIndex=function(n,t){this.reorderModule&&this.reorderModule.reorderColumnByIndex(n,t)},f.prototype.reorderColumnByTargetIndex=function(n,t){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(n,t)},f.prototype.reorderRows=function(n,t){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(n,t)},f.prototype.refreshDataSource=function(n){this.notify("refreshdataSource",n)},f.prototype.disableRowDD=function(n){var f=this.getHeaderTable(),o=this.getContentTable(),s=f.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),h=this.getRows(),e=n?"none":"",r,i,u;for(t.setStyleAttribute(f.querySelector(hi).childNodes[0],{display:e}),t.setStyleAttribute(o.querySelector(hi).childNodes[0],{display:e}),r=0;r<this.getRows().length;r++)i=h[parseInt(r.toString(),10)].firstElementChild,n?t.addClass([i],"e-hide"):t.removeClass([i],["e-hide"]);for(u=0;u<f.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;u++)i=s[parseInt(u.toString(),10)],n?t.addClass([i],"e-hide"):t.removeClass([i],["e-hide"])},f.prototype.autoFitColumns=function(n,i,r){var u=this.getInjectedModules().find(function(n){return"function"!=typeof n||t.isNullOrUndefined(n.prototype)?"Resize"===n.name:"resize"===n.prototype.getModuleName()});!this.resizeModule&&u&&(this.autoFitColumnsResize=!0,this.injectModules());this.resizeModule&&this.resizeModule.autoFitColumns(n,i,r)},f.prototype.preventAdjustColumns=function(){var o;if(!(this.enableAdaptiveUI&&"Vertical"===this.rowRenderingMode||this.allowResizing&&"Auto"===this.resizeSettings.mode)){for(var u=this.getColumns(),f=this.getHeaderTable(),i=0,n=0;n<u.length;n++)if(u[parseInt(n.toString(),10)].visible){if(this.groupSettings.columns.length&&this.groupSettings.columns.indexOf(u[parseInt(n.toString(),10)].field)>-1&&"none"===[].slice.call(f.querySelector("colgroup").querySelectorAll(":not(.e-group-intent):not(.e-detail-intent):not(.e-drag-intent)"))[parseInt(n.toString(),10)].style.display)continue;if(!u[parseInt(n.toString(),10)].width){i=0;break}i+=parseFloat(u[parseInt(n.toString(),10)].width.toString())}if(i){var e=this.isPercentageWidthGrid(),s=this.widthUnit(e),r=this.getContentTable();if(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable()){var h=this.defaultIndentWidth(e),c=h.toString()+s,l=[].slice.call(f.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),a=[].slice.call(r.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent"));for(n=0;n<l.length;n++)l[parseInt(n.toString(),10)].style.setProperty("width",c),a[parseInt(n.toString(),10)].style.setProperty("width",c),i+=h}(e&&i<100||!e&&i<r.parentElement.clientWidth)&&(t.isNullOrUndefined(r.querySelector(".e-emptyrow"))?t.addClass([f,r],["e-tableborder"]):(t.addClass([f],["e-tableborder"]),t.removeClass([r],["e-tableborder"])));o=i.toString()+s;f.style.setProperty("width",o);r.style.setProperty("width",o)}else this.restoreAdjustColumns()}},f.prototype.restoreAdjustColumns=function(){var n,i,r,u;this.enableAdaptiveUI&&"Vertical"===this.rowRenderingMode||this.allowResizing&&"Auto"===this.resizeSettings.mode||(n=this.getHeaderTable(),i=this.getContentTable(),(t.removeClass([n,i],["e-tableborder"]),n.style.removeProperty("width"),i.style.removeProperty("width"),this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())&&(r=this.isPercentageWidthGrid(),u=this.defaultIndentWidth(r).toString()+this.widthUnit(r),[].slice.call(n.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")).forEach(function(n){n.style.setProperty("width",u)}),n.querySelector(".e-emptycell").classList.remove("e-indentRefreshed"),this.recalcIndentWidth()))},f.prototype.widthUnit=function(n){return n?"%":"px"},f.prototype.defaultIndentWidth=function(n){return n?parseFloat((3e3/this.element.offsetWidth).toFixed(1)):30},f.prototype.isPercentageWidthGrid=function(){var n=this.getColumns().find(function(n){return!t.isNullOrUndefined(n.width)});return!!n&&n.width.toString().indexOf("%")>-1},f.prototype.createColumnchooser=function(n,t,i){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(n,t,i)},f.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new lv(this));this.serviceLocator.register("cellRendererFactory",new cit);this.serviceLocator.register("rendererFactory",new vst);this.serviceLocator.register("localization",this.localeObj=new t.L10n(this.getModuleName(),this.defaultLocale,this.locale));this.serviceLocator.register("valueFormatter",this.valueFormatterService=new wu(this.locale));this.serviceLocator.register("showHideService",this.showHider=new tht(this));this.serviceLocator.register("ariaService",this.ariaService=new yh);this.serviceLocator.register("focus",this.focusModule=new pst(this))},f.prototype.processModel=function(){var e,f,n=this.groupSettings.columns,i=this.sortSettings.columns,o;if(this.allowGrouping)for(var s=function(t){var o,u;for(e=!1,f=0,o=i.length;f<o;f++)if(i[parseInt(f.toString(),10)].field===n[parseInt(t.toString(),10)]){e=!0;break}(e?r.allowSorting?r.sortedColumns.push(i[parseInt(f.toString(),10)].field):i[parseInt(f.toString(),10)].direction="Ascending":i.push({field:n[parseInt(t.toString(),10)],direction:"Ascending",isFromGroup:!0}),r.groupSettings.showGroupedColumn)||(u=r.enableColumnVirtualization?r.columns.filter(function(i){return i.field===n[parseInt(t.toString(),10)]})[0]:r.getColumnByField(n[parseInt(t.toString(),10)]),u?u.visible=!1:r.log("initial_action",{moduleName:"group",columnName:n[parseInt(t.toString(),10)]}))},r=this,u=0,h=n.length;u<h;u++)s(u);if(!n.length)for(u=0;u<i.length;u++)this.sortedColumns.push(i[parseInt(u.toString(),10)].field);(this.rowTemplateFn=et(this.rowTemplate),this.emptyRecordTemplateFn=et(this.emptyRecordTemplate),this.detailTemplateFn=et(this.detailTemplate),this.editTemplateFn=et(this.editSettings.template),this.editHeaderTemplateFn=et(this.editSettings.headerTemplate),this.editFooterTemplateFn=et(this.editSettings.footerTemplate),this.columnChooserTemplateFn=et(this.columnChooserSettings.template),this.columnChooserHeaderTemplateFn=et(this.columnChooserSettings.headerTemplate),this.columnChooserFooterTemplateFn=et(this.columnChooserSettings.footerTemplate),t.isNullOrUndefined(this.parentDetails))||(o=t.isNullOrUndefined(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue,this.query.where(this.queryString,"equal",o,!0));this.initForeignColumn()},f.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify(yl,this.getForeignKeyColumns())},f.prototype.enableVerticalRendering=function(){"Vertical"===this.rowRenderingMode?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")},f.prototype.gridRender=function(){var i,n;this.updateRTL();"Vertical"===this.rowRenderingMode&&this.element.classList.add("e-row-responsive");this.enableHover&&this.element.classList.add("e-gridhover");(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||t.Browser.isSafari())&&this.element.classList.add("e-mac-safari");t.Browser.isDevice&&(this.element.classList.add("e-device"),"Desktop"===this.adaptiveUIMode&&(this.enableAdaptiveUI=!1));"Mobile"!==this.adaptiveUIMode||t.Browser.isDevice||"Vertical"===this.rowRenderingMode||(this.enableAdaptiveUI=!1);this.rowHeight&&this.element.classList.add("e-grid-min-height");this.cssClass&&(-1!==this.cssClass.indexOf(" ")?(i=this.element.classList).add.apply(i,this.cssClass.split(" ")):this.element.classList.add(this.cssClass));this.allowRowDragAndDrop&&this.rowDropSettings.targetID&&"mozilla"===t.Browser.info.name&&this.element.classList.add("e-disableuserselect");this.editSettings.showAddNewRow&&(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.editSettings.newRowPosition="Top");t.classList(this.element,["e-responsive","e-default"],[]);n=this.serviceLocator.getService("rendererFactory");this.headerModule=n.getRenderer(ni.Header);this.contentModule=n.getRenderer(ni.Content);this.printModule=new pv(this,this.scrollModule);this.clipboardModule=new bit(this,this.serviceLocator);this.renderModule.render();this.eventInitializer();this.createGridPopUpElement();this.widthService.setWidthToColumns();this.updateGridLines();this.applyTextWrap();this.createTooltip();this.enableBoxSelection()},f.prototype.dataReady=function(){this.scrollModule.setWidth();this.scrollModule.setHeight();"auto"!==this.height&&this.scrollModule.setPadding()},f.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},f.prototype.createGridPopUpElement=function(){var n=this.createElement("div",{className:"e-gridpopup"}),i;n.style.display="none";i=this.createElement("div",{className:lt,attrs:{tabIndex:"-1"}});t.append([i,this.createElement("div",{className:"e-uptail e-tail"})],n);i.appendChild(this.createElement("span"));t.append([i,this.createElement("div",{className:"e-downtail e-tail"})],n);this.element.appendChild(n)},f.prototype.updateGridLines=function(){switch(t.classList(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines")}this.updateResizeLines()},f.prototype.updateResizeLines=function(){this.allowResizing&&"Vertical"!==this.gridLines&&"Both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},f.prototype.applyTextWrap=function(){if(this.allowTextWrap){var n=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":nr(this.element,!1);nr(this.getContent(),!1);nr(n,!0);break;case"Content":nr(this.getContent(),!0);nr(this.element,!1);nr(n,!1);break;default:nr(this.element,!0);nr(this.getContent(),!1);nr(n,!1)}"Content"!==this.textWrapSettings.wrapMode&&this.notify(fo,{})}},f.prototype.removeTextWrap=function(){nr(this.element,!1);nr([].slice.call(this.element.getElementsByClassName("e-columnheader")),!1);nr(this.getContent(),!1);"Content"!==this.textWrapSettings.wrapMode&&this.notify(fo,{})},f.prototype.createTooltip=function(){this.toolTipObj=new tt.Tooltip({opensOn:"custom",content:"",cssClass:this.cssClass?this.cssClass:null},this.element)},f.prototype.freezeRefresh=function(){(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.pageSettings.currentPage=1);this.componentRefresh()},f.prototype.getTooltipStatus=function(n){var f=this.getHeaderTable(),e=this.enableAdaptiveUI&&"Vertical"===this.rowRenderingMode?"e-gridcontent":"e-gridheader",o=this.createTable(f,e,"header"),s=this.createTable(f,e,"content"),t=n.classList.contains("e-headercell")?o:s,i=n.classList.contains("e-headercell")?"th":"tr",r,u;return t.querySelector(i).className=n.className,r=t.querySelector(i),r.innerHTML="",Array.from(n.childNodes).forEach(function(n){r.appendChild(n.cloneNode(!0))}),u=t.querySelector(i).getBoundingClientRect().width,document.body.removeChild(o),document.body.removeChild(s),!!(u>n.getBoundingClientRect().width&&!n.classList.contains("e-editedbatchcell")||this.enableAdaptiveUI&&"Vertical"===this.rowRenderingMode&&u>.55*n.getBoundingClientRect().width-("auto"!==this.height?16:0))},f.prototype.mouseMoveHandler=function(n){var r,e,s;if(this.isEllipsisTooltip()&&(r=i(n.target,"e-ellipsistooltip"),"mouseout"!==n.type||this.prevElement===r&&r===i(n.relatedTarget,"e-ellipsistooltip")||(this.toolTipObj.close(),this.prevElement=null),e=n.target.tagName,r&&"mouseout"!==n.type&&(!t.Browser.isDevice||-1===["A","BUTTON","INPUT"].indexOf(e))&&this.getTooltipStatus(r))){var u=this.getColumns()[parseInt(r.getAttribute(ft),10)-1],o=u&&u.disableHtmlEncode?"innerText":"innerHTML",f=this.createElement("div");r.getElementsByClassName("e-headertext").length?(s=r.getElementsByClassName("e-headertext")[0],f[""+o]=this.sanitize(s.innerText),this.toolTipObj.content=f):(f[""+o]=this.sanitize(r.innerText),this.toolTipObj.content=f);this.enableHtmlSanitizer&&(this.toolTipObj.enableHtmlSanitizer=!0);u&&u.disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1);r!==this.prevElement&&this.toolTipObj.open(r);this.prevElement=r}},f.prototype.isEllipsisTooltip=function(){var t=this.getColumns(),n;if("EllipsisWithTooltip"===this.clipMode)return!0;for(n=0;n<t.length;n++)if("EllipsisWithTooltip"===t[parseInt(n.toString(),10)].clipMode)return!0;return!1},f.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},f.prototype.createTable=function(n,t,i){var r=this.createElement("div"),f,u;r.className=this.element.className;r.style.cssText="display: inline-block;visibility:hidden;position:absolute";f=this.createElement("div");f.className=t;u=this.createElement("table");u.className=n.className;u.style.cssText="table-layout: auto;width: auto";var o="header"===i?"th":"td",e=this.createElement("tr",{attrs:{role:"row"}}),s=this.createElement(o);return e.appendChild(s),u.appendChild(e),f.appendChild(u),r.appendChild(f),document.body.appendChild(r),r},f.prototype.onKeyPressed=function(n){"tab"!==n.action&&"shiftTab"!==n.action||this.toolTipObj.close()},f.prototype.wireEvents=function(){t.EventHandler.add(this.element,"click",this.mouseClickHandler,this);t.EventHandler.add(this.element,"touchend",this.mouseClickHandler,this);t.EventHandler.add(this.element,"focusout",this.focusOutHandler,this);t.EventHandler.add(this.element,"dblclick",this.dblClickHandler,this);t.EventHandler.add(this.element,"keydown",this.keyPressHandler,this);t.EventHandler.add(window,"resize",this.resetIndentWidth,this);this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex);this.keyboardModule=new t.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"});t.EventHandler.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this);t.EventHandler.add(this.element,"mouseover",this.mouseMoveHandler,this);t.EventHandler.add(this.element,"mouseout",this.mouseMoveHandler,this);t.EventHandler.add(this.getContent(),"touchstart",this.tapEvent,this);t.EventHandler.add(document.body,"keydown",this.keyDownHandler,this)},f.prototype.unwireEvents=function(){t.EventHandler.remove(this.element,"click",this.mouseClickHandler);t.EventHandler.remove(this.element,"touchend",this.mouseClickHandler);t.EventHandler.remove(this.element,"focusout",this.focusOutHandler);t.EventHandler.remove(this.element,"dblclick",this.dblClickHandler);t.EventHandler.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler);t.EventHandler.remove(this.element,"mouseover",this.mouseMoveHandler);t.EventHandler.remove(this.element,"mouseout",this.mouseMoveHandler);t.EventHandler.remove(this.element,"keydown",this.keyPressHandler);t.EventHandler.remove(this.getContent(),"touchstart",this.tapEvent);t.EventHandler.remove(document.body,"keydown",this.keyDownHandler);t.EventHandler.remove(window,"resize",this.resetIndentWidth)},f.prototype.addListener=function(){this.isDestroyed||(this.on(wi,this.dataReady,this),this.on(k,this.recalcIndentWidth,this),this.on(bt,this.recalcIndentWidth,this),this.on(rh,this.refreshFrozenPosition,this),this.on(ev,this.refreshSplitFrozenColumn,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(ti,this.dataBoundFunction),this.on(rt,this.onKeyPressed,this))},f.prototype.removeListener=function(){this.isDestroyed||(this.off(wi,this.dataReady),this.off(k,this.recalcIndentWidth),this.off(bt,this.recalcIndentWidth),this.on(rh,this.refreshFrozenPosition,this),this.on(ev,this.refreshSplitFrozenColumn,this),this.removeEventListener(ti,this.dataBoundFunction),this.off(rt,this.onKeyPressed))},f.prototype.getCurrentViewRecords=function(){return b(this)?t.isNullOrUndefined(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},f.prototype.mouseClickHandler=function(n){var u,f,r,e;this.isChildGrid(n)||i(n.target,"e-gridpopup")&&n.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(n)||(!this.allowRowDragAndDrop&&(i(n.target,it)||"TD"===n.target.tagName)||i(n.target,"e-headercell")&&i(n.target,"e-headercell").querySelector(".e-checkselectall")||!this.allowGrouping&&!this.allowReordering&&i(n.target,"e-gridheader"))&&n.touches||(i(n.target,"e-gridheader")&&this.allowRowDragAndDrop&&!i(n.target,"e-filterbarcell")&&n.target&&-1===["A","BUTTON","INPUT"].indexOf(n.target.tagName)&&n.preventDefault(),this.allowRowDragAndDrop&&i(n.target,"e-rowcell")&&!i(n.target,"e-rowdragdrop")&&n.touches)||(u=this.getRowInfo(n.target),u.cancel=!1,f=!1,r=t.closest(n.target,"tr"),r&&r.getAttribute("data-uid")&&(e=this.getRowObjectFromUID(r.getAttribute("data-uid")),f=!!e&&e.isDataRow),f&&this.trigger(gd,u),this.notify(kt,n))},f.prototype.checkEdit=function(n){var t=i(n.target,y),r="Batch"!==this.editSettings.mode&&this.isEdit&&t&&(t.classList.contains(ut)||t.classList.contains(ii)&&!this.editSettings.showAddNewRow);return!i(n.target,"e-unboundcelldiv")&&(r||i(n.target,v)&&i(n.target,v).classList.contains("e-editedbatchcell"))},f.prototype.dblClickHandler=function(n){var o=i(n.target,"e-grid"),u,r,f,e;t.isNullOrUndefined(o)||o.id!==this.element.id||t.closest(n.target,".e-unboundcelldiv")||(u=!1,r=t.closest(n.target,"tr"),r&&r.getAttribute("data-uid")&&(f=this.getRowObjectFromUID(r.getAttribute("data-uid")),u=!!f&&f.isDataRow),e=this.getRowInfo(n.target),e.target=n.target,u&&this.trigger(dd,e),this.notify(no,n))},f.prototype.focusOutHandler=function(n){var u,r,f;this.isChildGrid(n)||(i(n.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None"),u=this.element.querySelector(".e-cancel:not(.e-hide)"),u&&!u.parentElement.classList.contains("e-tbar-btn")&&u.classList.add("e-hide"),r=n.relatedTarget,f=r?r.getAttribute("aria-owns"):null,r&&(i(r,"e-grid")||(!t.isNullOrUndefined(f)&&f)===n.target.getAttribute("aria-owns"))||this.keyPress||!this.isEdit||t.Browser.isDevice||("Batch"!==this.editSettings.mode||(i(r,"e-ddl")||i(r,"e-ddt"))&&(i(r,"e-multi-select-list-wrapper")||i(r,"e-input-filter"))&&i(r,"e-input-group")||!i(r,"e-uploader")&&(r&&t.isNullOrUndefined(i(r,"e-input-group"))||i(n.target,"edit-custom-template"))||(this.editModule.saveCell(),this.notify(ys,{})),"Normal"!==this.editSettings.mode||this.isWidgetsDestroyed||this.editModule.editFormValidate()),this.editSettings.showAddNewRow&&(this.editModule.isShowAddedRowValidate=!1),this.keyPress=!1)},f.prototype.isChildGrid=function(n){var r=i(n.target,"e-grid");return!!(r&&r.id!==this.element.id||i(n.target,"e-unboundcelldiv")&&t.isNullOrUndefined(r))},f.prototype.mergePersistGridData=function(n){var f=this.getLocalData(),r,o,u,e,i;if(!t.isNullOrUndefined(f)&&""!==f||!t.isNullOrUndefined(n)){for(r=t.isNullOrUndefined(n)?JSON.parse(f):n,o=Object.keys(r),this.isProtectedOnChange=!0,u=0,e=o;u<e.length;u++)i=e[u],"object"!=typeof this[""+i]||t.isNullOrUndefined(this[""+i])?this[""+i]=r[""+i]:Array.isArray(this[""+i])&&"columns"===i?(this.setFrozenCount(),wh(this[""+i]),this.mergeColumns(r[""+i],this[""+i]),this.mergedColumns=!0,this[""+i]=r[""+i]):t.extend(this[""+i],r[""+i]);this.isProtectedOnChange=!1}},f.prototype.mergeColumns=function(n,i){for(var r=n,f=this.isFrozenGrid(),e=function(n){var u=i.filter(function(t){return f?t.index===r[parseInt(n.toString(),10)][""+ub]:t.index===r[parseInt(n.toString(),10)].index})[0];t.isNullOrUndefined(u)||(f&&((u=t.extend({},u,{},!0)).freeze=r[parseInt(n.toString(),10)].freeze),u.columns&&u.columns.length?(o.mergeColumns(r[parseInt(n.toString(),10)].columns,u.columns),r[parseInt(n.toString(),10)]=t.extend(u,r[parseInt(n.toString(),10)],{},!0)):r[parseInt(n.toString(),10)]=t.extend(u,r[parseInt(n.toString(),10)],{},!0))},o=this,u=0;u<r.length;u++)e(u)},f.prototype.isDetail=function(){return!t.isNullOrUndefined(this.detailTemplate)||!t.isNullOrUndefined(this.childGrid)},f.prototype.isCommandColumn=function(n){var t=this;return n.some(function(n){return n.columns?t.isCommandColumn(n.columns):!(!n.commands&&!n.commandsTemplate)})},f.prototype.isForeignKeyEnabled=function(n){var t=this;return n.some(function(n){return n.columns?t.isForeignKeyEnabled(n.columns):!(!n.dataSource||!n.foreignKeyValue)})},f.prototype.keyPressHandler=function(n){var r=t.extend(n,{cancel:!1});this.trigger("keyPressed",r);(!0===r.cancel||this.isEdit&&n&&i(n.target,"e-gridform")&&i(n.target,"e-ddl")&&"open"===n.action&&!0===n.altKey&&"ArrowDown"===n.code)&&n.stopImmediatePropagation()},f.prototype.keyDownHandler=function(n){if(n.altKey){if(74===n.keyCode&&(this.keyA?(this.notify(aa,{target:n.target,collapse:!1}),this.keyA=!1):(this.focusModule&&this.focusModule.currentInfo&&this.focusModule.currentInfo.element&&(t.removeClass([this.focusModule.currentInfo.element,this.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.focusModule.currentInfo.element.tabIndex=-1),this.element.classList.contains("e-childgrid")||this.element.focus())),87===n.keyCode){var i=this.focusModule;if(i){if(!this.currentViewData.length)return;0!==this.element.getBoundingClientRect().width&&i.focusContent();i.addOutline()}}65===n.keyCode&&(this.keyA=!0);72===n.keyCode&&this.keyA&&(this.notify(aa,{target:n.target,collapse:!0}),this.keyA=!1)}13===n.keyCode&&this.notify(nh,n)},f.prototype.keyActionHandler=function(n){this.isChildGrid(n)||this.editModule&&(this.editModule.alertDObj&&this.editModule.alertDObj.visible||this.editModule.dialogObj&&this.editModule.dialogObj.visible)||this.isEdit&&(!this.editSettings.showAddNewRow||this.editSettings.showAddNewRow&&this.element.querySelector(ut))&&"escape"!==n.action&&"enter"!==n.action&&"shiftEnter"!==n.action&&"tab"!==n.action&&"shiftTab"!==n.action||(this.keyPress=!0,this.allowKeyboard&&("ctrlPlusP"===n.action&&(n.preventDefault(),this.print()),this.notify(rt,n)))},f.prototype.setInjectedModules=function(n){this.injectedModules=n},f.prototype.updateColumnObject=function(){se(this.columns,this.enableColumnVirtualization,this);wh(this.columns);this.initForeignColumn();this.notify(du,{})},f.prototype.refreshFrozenPosition=function(n){n&&n.isModeChg?(this.refreshColumns(),this.notify(fv,{})):this.refreshColumns()},f.prototype.getForeignKeyColumns=function(){return(this.enableColumnVirtualization?this.columns:this.getColumns()).filter(function(n){return n.isForeignColumn()})},f.prototype.getRowHeight=function(n){return this.rowHeight?this.rowHeight:brt(this.element,n)},f.prototype.refreshColumns=function(){if(this.freezeColumnRefresh=!0,this.setFrozenCount(),this.updateFrozenColumnsWidth(),this.isFrozenGrid()&&(this.isPreventScrollEvent=!0),this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()&&this.enableColumnVirtualization){var n=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.getHeaderContent().querySelector("."+ct).scrollLeft=n;this.getContent().querySelector("."+lt).scrollLeft=n}},f.prototype.excelExport=function(n,t,i,r){if(this.exportGrids&&this.exportGrids.length){var u=this.exportGrids.slice();return this.exportMultipleExcelGrids(u,n,t,i,r)}return this.excelExportModule?this.excelExportModule.Map(this,n,t,i,!1,r):null},f.prototype.csvExport=function(n,t,i,r){return this.excelExportModule?this.excelExportModule.Map(this,n,t,i,!0,r):null},f.prototype.pdfExport=function(n,t,i,r){if(this.exportGrids&&this.exportGrids.length){var u=this.exportGrids.slice();return this.exportMultiplePdfGrids(u,n,t,i,r)}return this.pdfExportModule?this.pdfExportModule.Map(this,n,t,i,r):null},f.prototype.exportMultiplePdfGrids=function(n,t,i,r,u){var o=this,e,f;return 0!==n.length?(e=n.shift(),f=document.getElementById(e).ej2_instances[0],(f.pdfExportModule?f.pdfExportModule.Map(f,t,i,r,u):Promise.resolve()).then(function(r){return i=1!==n.length,o.exportMultiplePdfGrids(n,t,i,r,u)})):null},f.prototype.exportMultipleExcelGrids=function(n,t,i,r,u){var o=this,e,f;return 0!==n.length?(e=n.shift(),f=document.getElementById(e).ej2_instances[0],(f.excelExportModule?f.excelExportModule.Map(f,t,i,r,!1,u):null).then(function(r){return i=1!==n.length,o.exportMultipleExcelGrids(n,t,i,r,u)})):null},f.prototype.groupColumn=function(n){this.groupModule&&this.groupModule.groupColumn(n)},f.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},f.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},f.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},f.prototype.ungroupColumn=function(n){this.groupModule&&this.groupModule.ungroupColumn(n)},f.prototype.openColumnChooser=function(n,t){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(n,t)},f.prototype.scrollRefresh=function(){var n=this,t=function(){n.scrollModule.refresh();n.off(k,t)};this.on(k,t,this)},f.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},f.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},f.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},f.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},f.prototype.selectCells=function(n){this.selectionModule&&this.selectionModule.selectCells(n)},f.prototype.selectRowsByRange=function(n,t){this.selectionModule&&this.selectionModule.selectRowsByRange(n,t)},f.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},f.prototype.ensureModuleInjected=function(n){return this.getInjectedModules().indexOf(n)>=0},f.prototype.destroyTemplate=function(n,t,i){this.clearTemplate(n,t,i)},f.prototype.log=function(n,t){this.getInjectedModules().find(function(n){return"Logger"===n.name})||(e.Inject(kit),this.enableLogger=!0,this.injectModules());this.loggerModule&&this.loggerModule.log(n,t)},f.prototype.applyBiggerTheme=function(n){this.element.classList.contains("e-bigger")&&n.classList.add("e-bigger")},f.prototype.getPreviousRowData=function(){return this.getRowsObject()[this.getRows().length-1].data},f.prototype.hideScroll=function(){var n=this.getContent().querySelector("."+lt);n.scrollHeight<=n.clientHeight&&(this.scrollModule.removePadding(),n.style.overflowY="auto")},f.prototype.getRowIndexByPrimaryKey=function(n){var r=this.getPrimaryKeyFieldNames()[0],i,t,u;for(n="object"==typeof n?n[""+r]:n,i=this.getRowsObject(),t=0;t<i.length;t++)if(!i[parseInt(t.toString(),10)].isDetailRow&&!i[parseInt(t.toString(),10)].isCaptionRow&&(u=i[parseInt(t.toString(),10)].data[""+r],r.split(".").length>1&&(u=cy(r,i[parseInt(t.toString(),10)].data)),u===n))return i[parseInt(t.toString(),10)].index;return-1},f.prototype.grabColumnByFieldFromAllCols=function(n,t){var u,r,i;for(this.columnModel=[],this.updateColumnModel(this.columns),r=this.columnModel,i=0;i<r.length;i++)if(!t&&n===r[parseInt(i.toString(),10)].field||t&&r[parseInt(i.toString(),10)].isForeignColumn()&&n===r[parseInt(i.toString(),10)].foreignKeyValue){u=r[parseInt(i.toString(),10)];break}return u},f.prototype.grabColumnByUidFromAllCols=function(n){var r,i,t;for(this.columnModel=[],this.updateColumnModel(this.columns),i=this.columnModel,t=0;t<i.length;t++)n===i[parseInt(t.toString(),10)].uid&&(r=i[parseInt(t.toString(),10)]);return r},f.prototype.getFilteredRecords=function(){if(this.allowFiltering&&this.filterSettings.columns.length||this.searchSettings.key.length){var n=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof u.DataManager?this.renderModule.data.getData(this.dataSource,n):this.dataSource instanceof u.DataManager?this.dataSource.executeLocal(n):new u.DataManager(this.dataSource,n).executeLocal(n)}return[]},f.prototype.getUserAgent=function(){var n=t.Browser.userAgent.toLowerCase();return/iphone|ipod|ipad|macintosh/.test(n)},f.prototype.tapEvent=function(n){this.getUserAgent()&&(at.timer?(clearTimeout(at.timer),at.timer=null,this.dblClickHandler(n),this.notify(vl,n)):at.timer=setTimeout(function(){at.timer=null},300))},f.prototype.getRowUid=function(n){return""+n+this.rowUid++},f.prototype.getRowElementByUID=function(n){for(var i,r,u=[].slice.call(this.getContent().querySelector(h).children),t=0,f=this.frozenRows?[].slice.call(this.getHeaderContent().querySelector(h).children).concat(u):u;t<f.length;t++)if(i=f[t],i.getAttribute("data-uid")===n){r=i;break}return r},f.prototype.getHiddenColumns=function(){for(var t,i=[],n=0,r=this.columnModel;n<r.length;n++)t=r[n],!1===t.visible&&i.push(t);return i},f.prototype.calculatePageSizeByParentHeight=function(n){if(this.allowPaging&&(this.allowTextWrap&&"Header"===this.textWrapSettings.wrapMode||!this.allowTextWrap)){var t=0;if(-1!==n.indexOf("%")&&(n=parseInt(n,10)/100*this.element.clientHeight),n>this.getNoncontentHeight()+this.getRowHeight()&&(t=(n-this.getNoncontentHeight())/this.getRowHeight()),t>0)return Math.floor(t)}return 0},f.prototype.getNoncontentHeight=function(){var n=0,i;if(this.getHeaderContent()&&!t.isNullOrUndefined(this.getHeaderContent().clientHeight)&&(n+=this.getHeaderContent().clientHeight),this.toolbar&&!t.isNullOrUndefined(this.element.querySelector(".e-toolbar").clientHeight)&&(n+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!t.isNullOrUndefined(this.element.querySelector(".e-gridpager").clientHeight)&&(n+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!t.isNullOrUndefined(this.element.querySelector(".e-columnheader").clientHeight)&&(n+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!t.isNullOrUndefined(this.element.querySelector(".e-groupdroparea").clientHeight)&&(n+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!t.isNullOrUndefined(this.element.querySelector(".e-summaryrow").clientHeight))for(i=0;i<this.element.getElementsByClassName("e-summaryrow").length;i++)n+=this.element.getElementsByClassName("e-summaryrow")[parseInt(i.toString(),10)].clientHeight;return n},f.prototype.getSummaryValues=function(n,t){return u.DataUtil.aggregates[n.type.toLowerCase()](t,n.field)},f.prototype.serverExcelExport=function(n,t){this.isExcel=!0;this.exportGrid(n,t)},f.prototype.serverPdfExport=function(n,t){this.isExcel=!1;this.exportGrid(n,t)},f.prototype.serverCsvExport=function(n,t){this.isExcel=!0;this.exportGrid(n,t)},f.prototype.exportGrid=function(n,t){var o=this,s=this.getDataModule().generateQuery(!0),h=(new u.UrlAdaptor).processQuery(new u.DataManager({url:""}),s),f=JSON.parse(h.data),r=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"])),i,e;r.filterSettings.columns=f.where;r.searchSettings.fields=f.search&&f.search[0].fields||[];r.sortSettings.columns=f.sorted;r.columns=this.setHeaderText(r.columns,["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"]);i=this.createElement("form",{id:"ExportForm"});i.style.display="none";e=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});e.value=JSON.stringify(r);i.method="POST";i.action=n;i.appendChild(e);t&&t.headers&&Array.isArray(t.headers)&&t.headers.forEach(function(n){Object.keys(n).forEach(function(t){var r="string"==typeof n[""+t]?n[""+t]:JSON.stringify(n[""+t]),u=o.createElement("input",{attrs:{name:t,value:r,type:"hidden"}});i.appendChild(u)})});document.body.appendChild(i);i.submit();i.remove()},f.prototype.setHeaderText=function(n,i){for(var u,e,f,r=0;r<n.length;r++)for(u=this.getColumnByUid(n[parseInt(r.toString(),10)].uid),n[parseInt(r.toString(),10)].headerText=u.headerText,t.isNullOrUndefined(u.template)||(n[parseInt(r.toString(),10)].template="true"),n[parseInt(r.toString(),10)].format&&(n[parseInt(r.toString(),10)].format=eut(this.getFormat(n[parseInt(r.toString(),10)].format),n[parseInt(r.toString(),10)].type,!1,t.defaultCurrencyCode),"datetime"!==u.type&&"date"!==u.type&&"time"!==u.type||(n[parseInt(r.toString(),10)].format=n[parseInt(r.toString(),10)].format.toString().replace("AM/PM","tt"))),n[parseInt(r.toString(),10)].columns&&this.setHeaderText(n[parseInt(r.toString(),10)].columns,i),e=Object.keys(n[parseInt(r.toString(),10)]),f=0;f<e.length;f++)i.indexOf(e[parseInt(f.toString(),10)])<0&&delete n[parseInt(r.toString(),10)][e[parseInt(f.toString(),10)]];return n},f.prototype.getFormat=function(n){return"object"==typeof n?t.isNullOrUndefined(n.format)?n.skeleton:n.format:n},f.prototype.isCollapseStateEnabled=function(){return!1===this.isExpanded},f.prototype.updateRowValue=function(n,t){var i={requestType:"save",data:t};this.showSpinner();this.notify(to,i);this.refresh()},f.prototype.setForeignKeyData=function(){this.dataBind();var n=this.getDataModule().getForeignKeyDataState();n.isPending?(this.getDataModule().setForeignKeyDataState({}),n.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},f.prototype.resetFilterDlgPosition=function(n){var f=this.getColumnHeaderByField(n),u,t,i,r;f&&(u=f.querySelector(".e-filtermenudiv"),t=this.element.querySelector(".e-filter-popup"),u&&(i=this.element.getBoundingClientRect(),r=u.getBoundingClientRect(),t&&(t.style.left=t.offsetWidth+r.right>i.right?(r.right-t.offsetWidth-i.left).toString()+"px":(r.right-i.left).toString()+"px")))},f.prototype.renderTemplates=function(n){var r=this.parentDetails&&this.parentDetails.parentInstObj&&this.parentDetails.parentInstObj.isReact,i=this.printGridParent&&this.printGridParent.isReact,t;(r||i)&&this.portals?(t=i?this.printGridParent:this.parentDetails.parentInstObj,t.portals=t.portals.concat(this.portals),t.renderTemplates(n),this.portals=void 0):(this.notify("reactTemplateRender",this.portals),this.renderReactTemplates(n))},f.prototype.batchUpdate=function(n){this.processRowChanges(n)},f.prototype.batchAsyncUpdate=function(n){this.processBulkRowChanges(n)},f.prototype.processBulkRowChanges=function(n){var i=this;if(this.dataToBeUpdated)for(var r=[lr,gf,ne],u=this.getPrimaryKeyFieldNames()[0],t=0;t<r.length;t++)n[r[parseInt(t.toString(),10)]]&&fut(this,n,r[parseInt(t.toString(),10)],u);else this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},n),setTimeout(function(){i.processRowChanges(i.dataToBeUpdated);i.dataToBeUpdated=null},this.asyncTimeOut)},f.prototype.processRowChanges=function(n){var i=this,r=this.getPrimaryKeyFieldNames()[0],t;n=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},n);t=this.getDataModule().saveChanges(n,r,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?t.then(function(){i.setNewData()}):this.setNewData()},f.prototype.setNewData=function(){var n=this,t=JSON.parse(JSON.stringify(this.getCurrentViewRecords()));this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount()).then(function(i){n.bulkRefresh(i.result,t,i.count)})},f.prototype.deleteRowElement=function(n){var i=this.getRowElementByUID(n.uid);t.remove(i)},f.prototype.bulkRefresh=function(n,t,i){for(var o,s,h,e,c=this,f=this.getRowsObject(),u=this.getPrimaryKeyFieldNames()[0],l=function(t){n.filter(function(n){return n[""+u]===f[parseInt(t.toString(),10)].data[""+u]}).length||(a.deleteRowElement(f[parseInt(t.toString(),10)]),f.splice(t,1),t--);e=t},a=this,r=0;r<f.length;r++)l(r),r=e;for(o=function(i){var r;t.filter(function(t){t[""+u]===n[parseInt(i.toString(),10)][""+u]&&(t!==n[parseInt(i.toString(),10)]&&c.setRowData(n[parseInt(i.toString(),10)][""+u],n[parseInt(i.toString(),10)]),r=!0)});r||s.renderRowElement(n[parseInt(i.toString(),10)],i)},s=this,r=0;r<n.length;r++)o(r);this.currentViewData=n;h=[].slice.call(this.getContentTable().getElementsByClassName(y));wo(this,this.getRowsObject(),h);bo(this);this.allowPaging&&this.notify(wt,{module:"pager",properties:{totalRecordsCount:i}})},f.prototype.renderRowElement=function(n,t){var f=new ci(this.serviceLocator,null,this),u=new eu(this).generateRows([n]),e=f.render(u[0],this.getColumns()),i,r;this.addRowObject(u[0],t);i=this.getContentTable().querySelector(h);i.querySelector(".e-emptyrow")&&(r=i.querySelector(".e-emptyrow"),r.parentNode.removeChild(r),this.frozenRows&&this.element.querySelector(".e-frozenrow-empty")&&this.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty"));i=this.frozenRows&&t<this.frozenRows?this.getHeaderContent().querySelector(h):this.getContent().querySelector(h);(i=this.getContent().querySelector(h)).appendChild(e)},f.prototype.addRowObject=function(n,t){this.getRowsObject().splice(t,1,n)},f.prototype.updateVisibleExpandCollapseRows=function(){for(var t=this.getRowsObject(),n=0,i=t.length;n<i;n++)t[parseInt(n.toString(),10)].visible=(t[parseInt(n.toString(),10)].isDataRow||t[parseInt(n.toString(),10)].isAggregateRow)&&this.getRowElementByUID(t[parseInt(n.toString(),10)].uid)&&"none"===this.getRowElementByUID(t[parseInt(n.toString(),10)].uid).style.display?!1:!0},f.prototype.sanitize=function(n){return this.enableHtmlSanitizer?t.SanitizeHtmlHelper.sanitize(n):n},f.prototype.getHeight=function(n){return Number.isInteger(n)||-1===n.indexOf("%")?Number.isInteger(n)||"auto"===this.height?this.height:parseInt(n,10):parseInt(n,10)/100*this.element.clientHeight},f.prototype.getFrozenRightContent=function(){return this.contentModule.getPanel()},f.prototype.getFrozenRightHeader=function(){return this.headerModule.getPanel()},f.prototype.getMovableHeaderTbody=function(){return this.getHeaderContent().querySelector(h)},f.prototype.getMovableContentTbody=function(){return this.getContent().querySelector(h)},f.prototype.getFrozenHeaderTbody=function(){return this.getHeaderContent().querySelector(h)},f.prototype.getFrozenLeftContentTbody=function(){return this.getContent().querySelector(h)},f.prototype.getFrozenRightHeaderTbody=function(){return this.getHeaderContent().querySelector(h)},f.prototype.getFrozenRightContentTbody=function(){return this.getContent().querySelector(h)},f.prototype.showResponsiveCustomFilter=function(n){this.filterModule&&this.filterModule.showCustomFilter(n||"Vertical"===this.rowRenderingMode)},f.prototype.showResponsiveCustomSort=function(n){this.sortModule&&this.sortModule.showCustomSort(n||"Vertical"===this.rowRenderingMode)},f.prototype.showResponsiveCustomColumnChooser=function(n){this.columnChooserModule&&this.columnChooserModule.showCustomColumnChooser(n||"Vertical"===this.rowRenderingMode)},f.prototype.showAdaptiveFilterDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)},f.prototype.showAdaptiveSortDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)},f.prototype.getCurrentVisibleColumns=function(n){for(var i,r=[],t=0,u=n?this.getColumns():this.columnModel;t<u.length;t++)i=u[t],i.visible&&r.push(i);return r},f.prototype.enableInfiniteAggrgate=function(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&!this.groupSettings.enableLazyLoading&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)},r([t.Property([])],f.prototype,"currentViewData",void 0),r([t.Property()],f.prototype,"parentDetails",void 0),r([t.Property()],f.prototype,"showHider",void 0),r([t.Property([])],f.prototype,"columns",void 0),r([t.Property(!0)],f.prototype,"enableAltRow",void 0),r([t.Property(!0)],f.prototype,"enableHover",void 0),r([t.Property(!1)],f.prototype,"enableAutoFill",void 0),r([t.Property(!0)],f.prototype,"allowKeyboard",void 0),r([t.Property(!1)],f.prototype,"enableStickyHeader",void 0),r([t.Property(!1)],f.prototype,"enableHtmlSanitizer",void 0),r([t.Property(!1)],f.prototype,"allowTextWrap",void 0),r([t.Complex({},ort)],f.prototype,"textWrapSettings",void 0),r([t.Complex({},srt)],f.prototype,"resizeSettings",void 0),r([t.Property(!1)],f.prototype,"allowPaging",void 0),r([t.Complex({},dst)],f.prototype,"pageSettings",void 0),r([t.Complex({},lrt)],f.prototype,"loadingIndicator",void 0),r([t.Property(!0)],f.prototype,"enableVirtualMaskRow",void 0),r([t.Property(!1)],f.prototype,"enableVirtualization",void 0),r([t.Property(!1)],f.prototype,"enableColumnVirtualization",void 0),r([t.Property(!1)],f.prototype,"enableInfiniteScrolling",void 0),r([t.Complex({},frt)],f.prototype,"searchSettings",void 0),r([t.Property(!1)],f.prototype,"allowSorting",void 0),r([t.Property("Ellipsis")],f.prototype,"clipMode",void 0),r([t.Property(!0)],f.prototype,"allowMultiSorting",void 0),r([t.Property(!1)],f.prototype,"allowExcelExport",void 0),r([t.Property(!1)],f.prototype,"allowPdfExport",void 0),r([t.Complex({},nrt)],f.prototype,"sortSettings",void 0),r([t.Complex({},irt)],f.prototype,"infiniteScrollSettings",void 0),r([t.Property(!0)],f.prototype,"allowSelection",void 0),r([t.Property(-1)],f.prototype,"selectedRowIndex",void 0),r([t.Complex({},urt)],f.prototype,"selectionSettings",void 0),r([t.Property(!1)],f.prototype,"allowFiltering",void 0),r([t.Property("Horizontal")],f.prototype,"rowRenderingMode",void 0),r([t.Property(!1)],f.prototype,"enableAdaptiveUI",void 0),r([t.Property("Both")],f.prototype,"adaptiveUIMode",void 0),r([t.Property(!1)],f.prototype,"allowReordering",void 0),r([t.Property(!1)],f.prototype,"enableRowSpan",void 0),r([t.Property(!1)],f.prototype,"enableColumnSpan",void 0),r([t.Property(!1)],f.prototype,"allowResizing",void 0),r([t.Property(!1)],f.prototype,"allowRowDragAndDrop",void 0),r([t.Complex({},ert)],f.prototype,"rowDropSettings",void 0),r([t.Complex({},rrt)],f.prototype,"filterSettings",void 0),r([t.Property(!1)],f.prototype,"allowGrouping",void 0),r([t.Property(!1)],f.prototype,"enableImmutableMode",void 0),r([t.Property(!1)],f.prototype,"showColumnMenu",void 0),r([t.Property(!1)],f.prototype,"autoFit",void 0),r([t.Complex({},hrt)],f.prototype,"groupSettings",void 0),r([t.Complex({},crt)],f.prototype,"editSettings",void 0),r([t.Collection([],rht)],f.prototype,"aggregates",void 0),r([t.Property(!1)],f.prototype,"showColumnChooser",void 0),r([t.Complex({},nht)],f.prototype,"columnChooserSettings",void 0),r([t.Property(!1)],f.prototype,"enableHeaderFocus",void 0),r([t.Property("auto")],f.prototype,"height",void 0),r([t.Property("auto")],f.prototype,"width",void 0),r([t.Property("Default")],f.prototype,"gridLines",void 0),r([t.Property()],f.prototype,"rowTemplate",void 0),r([t.Property()],f.prototype,"emptyRecordTemplate",void 0),r([t.Property()],f.prototype,"detailTemplate",void 0),r([t.Property()],f.prototype,"childGrid",void 0),r([t.Property()],f.prototype,"queryString",void 0),r([t.Property("AllPages")],f.prototype,"printMode",void 0),r([t.Property("Expanded")],f.prototype,"hierarchyPrintMode",void 0),r([t.Property([])],f.prototype,"dataSource",void 0),r([t.Property(null)],f.prototype,"rowHeight",void 0),r([t.Property()],f.prototype,"query",void 0),r([t.Property("USD")],f.prototype,"currencyCode",void 0),r([t.Property()],f.prototype,"exportGrids",void 0),r([t.Property()],f.prototype,"toolbar",void 0),r([t.Property()],f.prototype,"contextMenuItems",void 0),r([t.Property()],f.prototype,"columnMenuItems",void 0),r([t.Property()],f.prototype,"toolbarTemplate",void 0),r([t.Property()],f.prototype,"pagerTemplate",void 0),r([t.Property(0)],f.prototype,"frozenRows",void 0),r([t.Property(0)],f.prototype,"frozenColumns",void 0),r([t.Property("")],f.prototype,"cssClass",void 0),r([t.Property("All")],f.prototype,"columnQueryMode",void 0),r([t.Property({})],f.prototype,"currentAction",void 0),r([t.Property("")],f.prototype,"ej2StatePersistenceVersion",void 0),r([t.Event()],f.prototype,"created",void 0),r([t.Event()],f.prototype,"destroyed",void 0),r([t.Event()],f.prototype,"load",void 0),r([t.Event()],f.prototype,"rowDataBound",void 0),r([t.Event()],f.prototype,"queryCellInfo",void 0),r([t.Event()],f.prototype,"headerCellInfo",void 0),r([t.Event()],f.prototype,"actionBegin",void 0),r([t.Event()],f.prototype,"actionComplete",void 0),r([t.Event()],f.prototype,"actionFailure",void 0),r([t.Event()],f.prototype,"dataBound",void 0),r([t.Event()],f.prototype,"recordDoubleClick",void 0),r([t.Event()],f.prototype,"recordClick",void 0),r([t.Event()],f.prototype,"rowSelecting",void 0),r([t.Event()],f.prototype,"rowSelected",void 0),r([t.Event()],f.prototype,"rowDeselecting",void 0),r([t.Event()],f.prototype,"rowDeselected",void 0),r([t.Event()],f.prototype,"cellSelecting",void 0),r([t.Event()],f.prototype,"cellSelected",void 0),r([t.Event()],f.prototype,"cellDeselecting",void 0),r([t.Event()],f.prototype,"cellDeselected",void 0),r([t.Event()],f.prototype,"columnSelecting",void 0),r([t.Event()],f.prototype,"columnSelected",void 0),r([t.Event()],f.prototype,"columnDeselecting",void 0),r([t.Event()],f.prototype,"columnDeselected",void 0),r([t.Event()],f.prototype,"columnDragStart",void 0),r([t.Event()],f.prototype,"columnDrag",void 0),r([t.Event()],f.prototype,"columnDrop",void 0),r([t.Event()],f.prototype,"printComplete",void 0),r([t.Event()],f.prototype,"beforePrint",void 0),r([t.Event()],f.prototype,"pdfQueryCellInfo",void 0),r([t.Event()],f.prototype,"pdfHeaderQueryCellInfo",void 0),r([t.Event()],f.prototype,"pdfAggregateQueryCellInfo",void 0),r([t.Event()],f.prototype,"excelAggregateQueryCellInfo",void 0),r([t.Event()],f.prototype,"exportDetailDataBound",void 0),r([t.Event()],f.prototype,"exportDetailTemplate",void 0),r([t.Event()],f.prototype,"excelQueryCellInfo",void 0),r([t.Event()],f.prototype,"excelHeaderQueryCellInfo",void 0),r([t.Event()],f.prototype,"beforeExcelExport",void 0),r([t.Event()],f.prototype,"excelExportComplete",void 0),r([t.Event()],f.prototype,"beforePdfExport",void 0),r([t.Event()],f.prototype,"pdfExportComplete",void 0),r([t.Event()],f.prototype,"rowDragStartHelper",void 0),r([t.Event()],f.prototype,"detailDataBound",void 0),r([t.Event()],f.prototype,"rowDragStart",void 0),r([t.Event()],f.prototype,"rowDrag",void 0),r([t.Event()],f.prototype,"rowDrop",void 0),r([t.Event()],f.prototype,"toolbarClick",void 0),r([t.Event()],f.prototype,"beforeOpenColumnChooser",void 0),r([t.Event()],f.prototype,"beforeOpenAdaptiveDialog",void 0),r([t.Event()],f.prototype,"batchAdd",void 0),r([t.Event()],f.prototype,"batchDelete",void 0),r([t.Event()],f.prototype,"batchCancel",void 0),r([t.Event()],f.prototype,"beforeBatchAdd",void 0),r([t.Event()],f.prototype,"beforeBatchDelete",void 0),r([t.Event()],f.prototype,"beforeBatchSave",void 0),r([t.Event()],f.prototype,"beginEdit",void 0),r([t.Event()],f.prototype,"commandClick",void 0),r([t.Event()],f.prototype,"cellEdit",void 0),r([t.Event()],f.prototype,"cellSave",void 0),r([t.Event()],f.prototype,"cellSaved",void 0),r([t.Event()],f.prototype,"resizeStart",void 0),r([t.Event()],f.prototype,"resizing",void 0),r([t.Event()],f.prototype,"resizeStop",void 0),r([t.Event()],f.prototype,"keyPressed",void 0),r([t.Event()],f.prototype,"beforeDataBound",void 0),r([t.Event()],f.prototype,"contextMenuOpen",void 0),r([t.Event()],f.prototype,"contextMenuClick",void 0),r([t.Event()],f.prototype,"contextMenuClose",void 0),r([t.Event()],f.prototype,"columnMenuOpen",void 0),r([t.Event()],f.prototype,"columnMenuClick",void 0),r([t.Event()],f.prototype,"columnMenuClose",void 0),r([t.Event()],f.prototype,"checkBoxChange",void 0),r([t.Event()],f.prototype,"beforeCopy",void 0),r([t.Event()],f.prototype,"beforePaste",void 0),r([t.Event()],f.prototype,"beforeAutoFill",void 0),r([t.Event()],f.prototype,"columnDataStateChange",void 0),r([t.Event()],f.prototype,"dataStateChange",void 0),r([t.Event()],f.prototype,"dataSourceChanged",void 0),r([t.Event()],f.prototype,"exportGroupCaption",void 0),r([t.Event()],f.prototype,"lazyLoadGroupExpand",void 0),r([t.Event()],f.prototype,"lazyLoadGroupCollapse",void 0),r([t.Event()],f.prototype,"beforeDetailTemplateDetach",void 0),r([t.Event()],f.prototype,"beforeCustomFilterOpen",void 0),e=r([t.NotifyPropertyChanges],f)}(t.Component);pv=function(){function n(n,t){this.isAsyncPrint=!1;this.defered=new u.Deferred;this.parent=n;this.parent.isDestroyed||(this.parent.on(k,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(p,this.actionBeginFunction),this.parent.on(ai,this.onEmpty.bind(this)),this.parent.on(kl,this.hierarchyPrint,this),this.scrollModule=t)}return n.prototype.isContentReady=function(){var n=this;return!this.isPrintGrid()||"None"!==this.parent.hierarchyPrintMode&&this.parent.childGrid?function(){n.defered.promise.then(function(){n.contentReady()});n.isPrintGrid()&&n.hierarchyPrint()}:this.contentReady},n.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var n=window.printGridObj;n&&!n.element.querySelector("[aria-busy=true")&&n.printModule.defered.resolve()},n.prototype.print=function(){this.renderPrintGrid()},n.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},n.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},n.prototype.renderPrintGrid=function(){var i=this.parent,u=t.createElement("div",{id:this.parent.element.id+"_print",className:i.element.className+" e-print-grid"}),n,r,f,e;for(u.classList.remove("e-gridhover"),document.body.appendChild(u),n=new yv(tc(i,i.hierarchyPrintMode)),r=0;r<n.columns.length;r++)n.columns[parseInt(r.toString(),10)]=t.extend({},n.columns[parseInt(r.toString(),10)]),!i.getFrozenColumns()&&i.isFrozenGrid()&&(n.columns[parseInt(r.toString(),10)].freeze=void 0);this.parent.isAngular&&(n.viewContainerRef=this.parent.viewContainerRef);n.load=function(){};n.query=i.getQuery().clone();window.printGridObj=n;n.isPrinting=!0;f=n.getInjectedModules();e=i.getInjectedModules();f&&f.length===e.length||n.setInjectedModules(e);i.notify(hn,{element:u,printgrid:n});this.parent.log("exporting_begin",this.getModuleName());n.registeredTemplate=this.parent.registeredTemplate;n.isVue=this.parent.isVue;this.parent.isVue&&(n.vueInstance=this.parent.vueInstance);n.printGridParent=i;n.appendTo(u);i.isVue3||(n.trigger=i.trigger)},n.prototype.contentReady=function(){var r=this,n,i;if(this.isPrintGrid()){if(n=this.parent,this.isAsyncPrint)return void this.printGrid();if(i={requestType:"print",element:n.element,selectedRows:n.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:n.hierarchyPrintMode},this.isAsyncPrint||n.trigger(gy,i),i.cancel)return void t.detach(n.element);this.isAsyncPrint||(this.parent.printGridParent&&this.parent.printGridParent.isReact?this.parent.printGridParent.renderTemplates(function(){r.printGrid()}):this.printGrid())}},n.prototype.printGrid=function(){var n=this.parent,i,r,f,c;if("auto"!==n.height){var e=this.scrollModule.getCssProperties(),o=n.element.querySelector("."+lt),s=n.element.querySelector("."+st);o.style.height="auto";o.style.overflowY="auto";s.style[e.padding]="";s.firstElementChild.style[e.border]=""}for(n.allowGrouping&&(n.groupSettings.columns.length?this.removeColGroup(n):n.element.querySelector(".e-groupdroparea").style.display="none"),i=0,r=[].slice.call(n.element.getElementsByClassName(lt));i<r.length;i++)(f=r[i]).style.overflowX="hidden";for(var l=[].slice.call(n.element.getElementsByClassName("e-spin-show")),u=0,h=[].slice.call(l);u<h.length;u++)f=h[u],t.classList(f,["e-spin-hide"],["e-spin-show"]);this.printGridElement(n);n.isPrinting=!1;delete window.printGridObj;c={element:n.element};n.trigger(np,c);n.destroy();this.parent.log("exporting_complete",this.getModuleName())},n.prototype.printGridElement=function(n){t.classList(n.element,["e-print-grid-layout"],["e-print-grid"]);n.isPrinting&&t.detach(n.element);this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no");t.isNullOrUndefined(this.printWind)||(this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=t.print(n.element,this.printWind))},n.prototype.removeColGroup=function(n){var i=n.groupSettings.columns.length,r=n.element,e="#"+n.element.id;if(i){for(var u=t.selectAll(".e-groupcaption",r),o=n.groupSettings.enableLazyLoading?(parseInt(u[0].getAttribute("colspan"),10)-(n.groupSettings.columns.length-1)).toString():u[i-1].getAttribute("colspan"),f=0;f<u.length;f++)u[parseInt(f.toString(),10)].setAttribute("colspan",o);var s=t.selectAll("colgroup"+e+"colgroup",r),h=t.selectAll(".e-content colgroup",r),c=t.selectAll(".e-summarycontent colgroup",r);this.hideColGroup(s,i);this.hideColGroup(h,i);this.hideColGroup(c,i)}},n.prototype.hideColGroup=function(n,t){for(var r,i=0;i<n.length;i++)for(r=0;r<t;r++)n[parseInt(i.toString(),10)].children[parseInt(r.toString(),10)].style.display="none"},n.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},n.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(k,this.contentReady.bind(this)),this.parent.removeEventListener(p,this.actionBeginFunction),this.parent.off(ai,this.onEmpty.bind(this)),this.parent.off(kl,this.hierarchyPrint))},n.prototype.getModuleName=function(){return"print"},n.printGridProp=["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound","enableHtmlSanitizer"].concat([gy,np,yc]),n}();di=0;prt=0;ny=null;!function(n){n.timer=null}(at||(at={}));const pr=ejdashboard.inputs;tu=function(){function n(n){this.searchInputArgs=null;this.isExecuteLocal=!1;this.queryFilteredColumn=[];this.existingPredicate={};this.foreignKeyQuery=new u.Query;this.filterState=!0;this.values={};this.renderEmpty=!1;this.isCheckboxFilterTemplate=!1;this.infiniteRenderMod=!1;this.infiniteInitialLoad=!1;this.infiniteSearchValChange=!1;this.infinitePermenantLocalData=[];this.infiniteQueryExecutionPending=!1;this.infiniteSkipCnt=0;this.infiniteScrollAppendDiff=0;this.prevInfiniteScrollDirection="";this.infiniteLoadedElem=[];this.infiniteDataCount=0;this.infiniteLocalSelectAll=!0;this.localInfiniteSelectAllClicked=!1;this.localInfiniteSelectionInteracted=!1;this.infiniteManualSelectMaintainPred=[];this.parent=n;this.id=this.parent.element.id;this.valueFormatter=new wu(this.parent.locale);this.cBoxTrue=ri.createCheckBox(this.parent.createElement,!1,{checked:!0,label:" "});this.cBoxFalse=ri.createCheckBox(this.parent.createElement,!1,{checked:!1,label:" "});this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild);this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild);this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck");this.parent.enableRtl&&t.addClass([this.cBoxTrue,this.cBoxFalse],["e-rtl"]);this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?t.addClass([this.cBoxTrue,this.cBoxFalse],this.parent.cssClass.split(" ")):t.addClass([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass]))}return n.prototype.destroy=function(){this.closeDialog()},n.prototype.wireEvents=function(){t.EventHandler.add(this.dlg,"click",this.clickHandler,this);t.EventHandler.add(this.dlg,"keyup",this.keyupHandler,this);this.searchHandler=t.debounce(this.searchBoxKeyUp,200);var n=this.dialogObj.element.querySelector(".e-searchinput");n&&(t.EventHandler.add(n,"keyup",this.searchHandler,this),t.EventHandler.add(n,"input",this.searchHandler,this))},n.prototype.unWireEvents=function(){t.EventHandler.remove(this.dlg,"click",this.clickHandler);t.EventHandler.remove(this.dlg,"keyup",this.keyupHandler);var n=this.dialogObj.element.querySelector(".e-searchinput");n&&(t.EventHandler.remove(n,"keyup",this.searchHandler),t.EventHandler.remove(n,"input",this.searchHandler))},n.prototype.foreignKeyFilter=function(n,t,i){var r=this,u={},f=[],e=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(e.where(i)).then(function(i){r.options.column.columnData=i.result;r.parent.notify(bf,{predicate:u,column:r.options.column});n.ejpredicate=u.predicate.predicates;for(var o=u.predicate.predicates,e=0;e<o.length;e++)f.push({field:o[parseInt(e.toString(),10)].field,predicate:"or",matchCase:o[parseInt(e.toString(),10)].ignoreCase,ignoreAccent:o[parseInt(e.toString(),10)].ignoreAccent,operator:o[parseInt(e.toString(),10)].operator,value:o[parseInt(e.toString(),10)].value,type:r.options.type});n.filterCollection=f.length?f:t.filter(function(n){return n.field=r.options.field});r.options.handler(n)})},n.prototype.searchBoxClick=function(n){var t=n.target;t.classList.contains("e-searchclear")&&(this.sInput.value=t.classList.contains("e-chkcancel-icon")?"":this.sInput.value,this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:n}):this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},n.prototype.searchBoxKeyUp=function(n){t.isNullOrUndefined(this.sInput)||!t.isNullOrUndefined(n)&&("ArrowUp"===n.key||"ArrowDown"===n.key||"Tab"===n.key||"Tab"===n.key&&n.shiftKey)||(t.isNullOrUndefined(this.parent.loadingIndicator)||"Shimmer"!==this.parent.loadingIndicator.indicatorType||this.parent.showMaskRow(void 0,this.dialogObj.element),this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:n}):this.refreshCheckboxes(),this.updateSearchIcon())},n.prototype.updateSearchIcon=function(){this.sInput.value.length?(t.classList(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]),t.isNullOrUndefined(document.body.querySelector(".e-chkcancel-icon"))||document.body.querySelector(".e-chkcancel-icon").setAttribute("title",this.localeObj.getConstant("Clear"))):(t.classList(this.sIcon,["e-search-icon"],["e-chkcancel-icon"]),t.isNullOrUndefined(document.body.querySelector(".e-searchclear.e-search-icon"))||document.body.querySelector(".e-searchclear.e-search-icon").setAttribute("title",this.localeObj.getConstant("Search")))},n.prototype.getLocalizedLabel=function(n){return this.localeObj.getConstant(n)},n.prototype.updateDataSource=function(){var n=this.options.dataSource,t,i;if(!(n instanceof u.DataManager))for(t=0;t<n.length;t++)"object"!=typeof n&&(i={},i[this.options.field]=n[parseInt(t.toString(),10)],n[parseInt(t.toString(),10)]=i)},n.prototype.updateModel=function(n){this.options=n;this.existingPredicate=n.actualPredicate||{};this.options.dataSource=n.dataSource;this.options.dataManager=n.dataManager?n.dataManager:n.dataSource;this.updateDataSource();this.options.type=n.type;this.options.format=n.format||"";this.options.ignoreAccent=n.ignoreAccent||!1;this.options.filteredColumns=n.filteredColumns||this.parent.filterSettings.columns;this.options.query=n.query||new u.Query;this.options.allowCaseSensitive=n.allowCaseSensitive||!1;this.options.uid=n.column.uid;this.options.disableHtmlEncode=n.column.disableHtmlEncode||!1;this.values={};this.localeObj=n.localeObj;this.isFiltered=n.filteredColumns.length;this.infiniteRenderMod=!(!this.parent.filterSettings||!this.parent.filterSettings.enableInfiniteScrolling);this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]},n.prototype.getAndSetChkElem=function(n){return this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{"data-uid":this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),n.hideSearchbox||(this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox),this.searchInputArgs={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search"),cssClass:this.parent.cssClass}},pr.Input.createInput(this.searchInputArgs,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)),this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},n.prototype.showDialog=function(n){var r={requestType:up,columnName:this.options.field,columnType:this.options.type,cancel:!1},u;if(r.filterModel=this,this.parent.notify(ta,r),r.cancel)n.cancel=r.cancel;else{if(this.dialogObj=new tt.Dialog({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!t.isNullOrUndefined(i(n.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""}),this.dialogObj.isStringTemplate=!0,this.renderResponsiveFilter(n),u=this.parent.filterSettings&&"CheckBox"===this.parent.filterSettings.type?this.getLocalizedLabel("CheckBoxFilterDialogARIA"):this.getLocalizedLabel("ExcelFilterDialogARIA"),this.dlg.setAttribute("aria-label",u),n.isResponsiveFilter?document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv").appendChild(this.dlg):this.parent.element.appendChild(this.dlg),this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=n.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.parent&&this.parent.filterSettings&&("CheckBox"===this.parent.filterSettings.type||this.options.column&&this.options.column.filter&&"CheckBox"===this.options.column.filter.type)&&this.parent.getContent().firstElementChild.offsetHeight<this.dialogObj.element.offsetHeight&&!i(this.parent.element,"e-gantt-dialog")&&ko(this.parent,this.dialogObj),this.dialogObj.element.querySelector(".e-dlg-content").appendChild(this.sBox),this.wireEvents(),this.parent.enableAdaptiveUI){if(this.infiniteRenderMod&&this.parent.filterSettings&&"Shimmer"===this.parent.filterSettings.loadingIndicator)return void this.getAllData();this.infiniteRenderMod&&(this.cBox.style.marginTop=ns(this.cBox)+"px")}else t.isNullOrUndefined(this.parent.loadingIndicator)||"Shimmer"!==this.parent.loadingIndicator.indicatorType||this.infiniteRenderMod||this.parent.showMaskRow(void 0,this.dialogObj.element),this.infiniteRenderMod&&this.parent.filterSettings&&"Shimmer"===this.parent.filterSettings.loadingIndicator&&this.showMask();this.infiniteRenderMod&&this.parent.filterSettings&&"Shimmer"===this.parent.filterSettings.loadingIndicator||(tt.createSpinner({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),tt.showSpinner(this.spinner));this.getAllData()}},n.prototype.renderResponsiveFilter=function(n){n.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")},n.prototype.dialogCreated=function(n){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":t.Browser.isDevice?this.dialogObj.position={X:"center",Y:"center"}:bb(this.options.target,this.dialogObj,this.parent);this.options.column.showColumnMenu&&this.parent.notify(io,n)},n.prototype.openDialog=function(n){this.updateModel(n);this.getAndSetChkElem(n);this.showDialog(n)},n.prototype.closeDialog=function(){var r,i,n;(this.infiniteRenderMod&&this.infinitePermenantLocalData.length&&!this.options.isRemote&&(this.options.dataSource.dataSource.json=this.infinitePermenantLocalData),this.dialogObj&&!this.dialogObj.isDestroyed)&&(this.isBlanks=!1,r=this.options.columns.filter(function(n){return n.getFilterItemTemplate()}),i=this.parent.registeredTemplate,(r.length&&!t.isNullOrUndefined(i)&&i.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&vu(this.parent,["filterItemTemplate"]),this.parent.notify(vi,{field:this.options.field}),this.unWireEvents(),this.searchInputArgs&&this.searchInputArgs.element&&this.searchInputArgs.element.parentElement&&(pr.Input.destroy(this.searchInputArgs),t.remove(this.searchInputArgs.element)),this.searchInputArgs=null,this.sInput=null,this.parent.isReact&&this.options.column.filter&&"string"!=typeof this.options.column.filter.itemTemplate&&("CheckBox"===this.options.column.filter.type||"Excel"===this.options.column.filter.type)&&(this.dialogObj.element.querySelector(".e-dlg-content").innerHTML=""),this.dialogObj.destroy(),"escape"===this.dialogObj.dlgClosedBy&&(this.parent.isColumnMenuFilterClosing=!0),this.dlg&&this.dlg.parentElement)&&(t.remove(this.dlg),n=document.getElementById(this.parent.element.id+"_e-popup"),t.isNullOrUndefined(n)||(t.remove(n),n=null)),this.dlg=null,this.parent.notify(gs,{}))},n.prototype.clearFilter=function(n){var t={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(ro,t);t.cancel||this.options.handler({action:"clear-filter",field:n?n.field:this.options.field})},n.prototype.btnClick=function(n){if(this.filterState){if("input"===n.target.tagName.toLowerCase()&&n.target.classList.contains("e-searchinput")||13===n.keyCode)this.isCheckboxFilterTemplate||this.fltrBtnHandler();else{var i=n.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===i?this.isCheckboxFilterTemplate||this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===i&&this.clearFilter()}this.closeDialog()}else n.target&&n.target.firstChild&&n.target.firstChild.textContent.toLowerCase()===this.getLocalizedLabel("CancelButton").toLowerCase()?this.closeDialog():"input"!==n.target.tagName.toLowerCase()&&(this.clearFilter(),this.closeDialog());this.options.column.showColumnMenu&&this.parent.notify(oo,{});t.isNullOrUndefined(this.parent.focusModule)||this.parent.focusModule.filterfocus()},n.prototype.fltrBtnHandler=function(){var a=this,n,l,e,w,h;this.infiniteRenderMod&&(this.cBox.innerHTML="",nt(this.cBox,this.infiniteLoadedElem.slice()));var u,r=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)")),c=r,o="equal",v=this.dialogObj.element.querySelector(".e-dropdownlist");v&&(this.options.operator=o=v.ej2_instances[0].value);this.isMenuNotEqual="notequal"===this.options.operator;this.options.hideSearchbox||(u=this.searchBox.querySelector(".e-searchinput"));var y,p,b=this.options.allowCaseSensitive,f={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:o,type:this.options.type,matchCase:b,ignoreAccent:this.options.ignoreAccent},s=this.itemsCnt!==r.length&&this.itemsCnt-r.length<r.length;if(s&&u&&""===u.value&&(o=this.isMenuNotEqual?"equal":"notequal",r=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),f.predicate=this.isMenuNotEqual?"or":"and",f.operator=o),n=[],r.length!==this.itemsCnt||u&&u.value&&""!==u.value||this.infiniteRenderMod){if(this.infiniteRenderMod)this.infiniteRenderMod&&(!this.infiniteSearchPred||this.infiniteSearchPred&&!this.infiniteSearchPred.isComplex)?this.infiniteFltrBtnHandler(n):this.infiniteSearchPred.isComplex&&(n=this.complexQueryPredicate(r,f,s));else{if(n=this.complexQueryPredicate(r,f,s),t.isNullOrUndefined(n))return;n=this.filterPreventColumns?this.filterPreventColumns:n}if(("date"===this.options.type||"dateonly"===this.options.type||"datetime"===this.options.type)&&c.length&&(p=c.length-1,y=this.values[i(c[parseInt(p.toString(),10)],"e-ftrchk").getAttribute("data-uid")],t.isNullOrUndefined(y)&&s&&n.push({field:f.field,matchCase:f.matchCase,operator:"equal",predicate:"or",value:null})),l=this.infiniteRenderMod?this.sBox.querySelector(".e-add-current"):this.cBox.querySelector(".e-add-current"),l&&l.classList.contains("e-check")){if(e=this.existingPredicate[this.options.field],!e)return;for(w=function(t){n.some(function(n){return n.value===e[parseInt(t.toString(),10)].value})||n.push(e[parseInt(t.toString(),10)])},h=0;h<e.length;h++)w(h)}this.infiniteRenderMod?n.length?this.initiateFilter(n):this.sBox.querySelector(".e-selectall").classList.contains("e-check")&&!n.length&&this.options.filteredColumns.some(function(n){return a.options.field===n.field})&&this.clearFilter():this.initiateFilter(n)}else this.options.filteredColumns.some(function(n){return a.options.field===n.field})&&this.clearFilter()},n.prototype.complexQueryPredicate=function(r,u,f){for(var e,s,c,o=[],h=0;h<r.length;h++)e=this.values[i(r[parseInt(h.toString(),10)],"e-ftrchk").getAttribute("data-uid")],s=t.extend({},{value:e},u),e&&!e.toString().length&&(s.operator=f?"notequal":"equal"),""===e||t.isNullOrUndefined(e)?o=o.concat(n.generateNullValuePredicates(u)):o.push(s);return c=this.filterPreventColumns&&this.filterPreventColumns.length?this.filterPreventColumns[0]:s,c&&!this.notifyFilterPrevEvent(c)?(this.filterPreventColumns=o,null):o},n.prototype.infiniteFltrBtnHandler=function(i){var f,r,u,e;if(this.infiniteManualSelectMaintainPred.length)for(r=0;r<this.infiniteManualSelectMaintainPred.length;r++)u=this.infiniteManualSelectMaintainPred[r],""==(f=u.value+"")||t.isNullOrUndefined(f)?(e={predicate:u.predicate,field:u.field,type:u.type,uid:u.uid,operator:u.operator,matchCase:u.matchCase,ignoreAccent:u.ignoreAccent},i.push.apply(i,n.generateNullValuePredicates(e))):i.push(this.infiniteManualSelectMaintainPred[r]),this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[r]);if(!this.localInfiniteSelectAllClicked&&""===this.sInput.value&&(this.options.parentCurrentViewDataCount||!i.length))for(r=0;r<this.infiniteUnloadParentExistPred.length;r++)i.unshift(this.infiniteUnloadParentExistPred[r]),this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][r]);""===this.sInput.value||this.localInfiniteSelectAllClicked&&!this.infiniteLocalSelectAll||(this.infiniteSearchPred.predicate="or",i.unshift(this.infiniteSearchPred),this.notifyFilterPrevEvent(this.infiniteSearchPred))},n.prototype.notifyFilterPrevEvent=function(n){var t={instance:this,handler:this.fltrBtnHandler,arg1:n.field,arg2:n.predicate,arg3:n.operator,arg4:n.matchCase,arg5:n.ignoreAccent,arg6:n.value,cancel:!1};return this.parent.notify(ro,t),!t.cancel},n.generateNullValuePredicates=function(n){var t=[];return"string"===n.type&&t.push({field:n.field,ignoreAccent:n.ignoreAccent,matchCase:n.matchCase,operator:n.operator,predicate:n.predicate,value:""}),t.push({field:n.field,matchCase:n.matchCase,operator:n.operator,predicate:n.predicate,value:null}),t.push({field:n.field,matchCase:n.matchCase,operator:n.operator,predicate:n.predicate,value:void 0}),t},n.prototype.initiateFilter=function(n){var f,r=n[0],i,e;if(!t.isNullOrUndefined(r)){for(f=r.ejpredicate?r.ejpredicate:new u.Predicate(r.field,r.operator,r.value,!r.matchCase,r.ignoreAccent),i=1;i<n.length;i++)f=void 0!==n[parseInt(i.toString(),10)].ejpredicate?f[n[parseInt(i.toString(),10)].predicate](n[parseInt(i.toString(),10)].ejpredicate):f[n[parseInt(i.toString(),10)].predicate](n[parseInt(i.toString(),10)].field,n[parseInt(i.toString(),10)].operator,n[parseInt(i.toString(),10)].value,!n[parseInt(i.toString(),10)].matchCase,n[parseInt(i.toString(),10)].ignoreAccent);e={action:"filtering",filterCollection:n,field:this.options.field,ejpredicate:u.Predicate.or(f)};this.options.handler(e)}},n.prototype.isForeignColumn=function(n){return!!n.isForeignColumn&&n.isForeignColumn()},n.prototype.refreshCheckboxes=function(){var i=this,o=this.sInput.value,e=this.options.column,f=this.isForeignColumn(e)?this.foreignKeyQuery.clone():this.options.query.clone(),h=this.options.query.clone(),c=f.queries.filter(function(n){return n&&"onWhere"===n.fn})[0],g,d,l;f.queries=[];h.queries=[];var r="string"!==this.options.type&&parseFloat(o)?parseFloat(o):o,y=this.options.isRemote?"string"===this.options.type?"contains":"equal":this.options.type?"contains":"equal",w=!0,b=this.options.ignoreAccent,a=this.isForeignColumn(e)?e.foreignKeyValue:e.field;r=""===r||void 0===r?void 0:r;var s,k=[],nt={field:a,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:w,ignoreAccent:b},v=this.options.dataManager.adaptor.getModuleName;("boolean"===this.options.type&&(void 0!==r&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(r.toLowerCase())?r="true":void 0!==r&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(r.toLowerCase())&&(r="false"),void 0!==r&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(r.toLowerCase())&&v?(v(),r=!0):void 0!==r&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(r.toLowerCase())&&v&&(v(),r=!1),y="equal"),("date"===this.options.type||"datetime"===this.options.type||"dateonly"===this.options.type)&&this.options.format)&&(g=new t.Internationalization,d="string"==typeof this.options.format?this.options.format:this.options.format.format,r=d&&g.parseDate(o,{format:d})||new Date(o),"dateonly"===this.options.type&&(r=r.getFullYear()+"-"+lu(r.getMonth()+1)+"-"+lu(r.getDate())));this.infiniteSearchValChange=!0;this.infiniteLoadedElem=[];this.infiniteLocalSelectAll=!0;this.localInfiniteSelectAllClicked=!1;this.localInfiniteSelectionInteracted=!1;this.infiniteSkipCnt=0;this.infiniteDataCount=0;this.infiniteManualSelectMaintainPred=[];this.infiniteUnloadParentExistPred=""===this.sInput.value?this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]:[];this.isForeignColumn(e)||this.addDistinct(f);l={requestType:og,filterModel:this,columnName:a,column:e,operator:y,matchCase:w,ignoreAccent:b,filterChoiceCount:null,query:f,value:r,cancel:!1};this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(l.filterChoiceCount=this.parent.filterSettings.itemsCount);this.parent.trigger(p,l,function(v){var g,p,d;v.cancel||((v.operator=v.operator,s=new u.Predicate(a,v.operator,l.value,v.matchCase,v.ignoreAccent),"date"===i.options.type||"datetime"===i.options.type||"dateonly"===i.options.type)&&(g={field:a,operator:y="equal",value:r,matchCase:w,ignoreAccent:b},t.isNullOrUndefined(r)||(s=au(g,i.options.type))),o&&"string"==typeof o&&i.isBlanks&&i.getLocalizedLabel("Blanks").toLowerCase().indexOf(o.toLowerCase())>=0?(k=k.concat(n.generateNullValuePredicates(nt)),p=n.generatePredicate(k),p.predicates.push(s),s=p,f.where(p)):o.length?(s=t.isNullOrUndefined(c)?s:s.and(c.e),f.where(s)):t.isNullOrUndefined(c)||(s=c.e,f.where(c.e)),i.infiniteSearchPred=s,v.filterChoiceCount=t.isNullOrUndefined(v.filterChoiceCount)?1e3:v.filterChoiceCount,i.infiniteRenderMod&&i.parent.filterSettings.itemsCount!==v.filterChoiceCount&&(i.parent.filterSettings.itemsCount=l.filterChoiceCount),d={},tt.showSpinner(i.spinner),i.renderEmpty=!1,i.isForeignColumn(e)&&o.length?("result"in e.dataSource?new u.DataManager(e.dataSource.result):e.dataSource).executeQuery(f).then(function(n){var r=i.options.column.columnData;i.options.column.columnData=n.result;i.parent.notify(bf,{predicate:d,column:e});d.predicate.predicates.length?h.where(d.predicate):i.renderEmpty=!0;i.options.column.columnData=r;i.infiniteRenderMod?(i.infiniteInitialLoad=!!t.isNullOrUndefined(i.fullData),i.makeInfiniteScrollRequest(h),h.requiresCount()):h.take(v.filterChoiceCount);i.search(v,h)}):(i.infiniteRenderMod&&i.parent.filterSettings.itemsCount?(i.infiniteInitialLoad=!!t.isNullOrUndefined(i.fullData),i.makeInfiniteScrollRequest(f),f.requiresCount()):f.take(v.filterChoiceCount),i.search(v,f)))})},n.prototype.search=function(n,t){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(n,t):this.processSearch(t)},n.prototype.getPredicateFromCols=function(t,i){for(var f,e,h=n.getPredicate(t,i),r=[],o={},c=void 0!==this.parent.getForeignKeyColumns,a=c?this.parent.getForeignKeyColumns():[],s=0,l=Object.keys(h);s<l.length;s++)f=l[s],e=void 0,c&&!this.parent.getColumnByField(f)&&(e=po(f,a)),e?(this.parent.notify(bf,{predicate:o,column:e}),o.predicate.predicates.length&&r.push(u.Predicate.or(o.predicate.predicates))):r.push(h[""+f]);return r.length&&u.Predicate.and(r)},n.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new u.Query},n.prototype.getAllData=function(){var n=this,i,u,r;this.customQuery=!1;i=this.getQuery();u=this.options.dataManager.adaptor.getModuleName;!t.isNullOrUndefined(this.parent.getDataModule)&&u&&"ODataV4Adaptor"===u()||i.requiresCount();this.addDistinct(i);r={requestType:il,query:i,filterChoiceCount:null};r.filterModel=this;this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(r.filterChoiceCount=this.parent.filterSettings.itemsCount);this.parent.trigger(p,r,function(r){r.filterChoiceCount=t.isNullOrUndefined(r.filterChoiceCount)?1e3:r.filterChoiceCount;n.infiniteRenderMod&&n.parent.filterSettings.itemsCount!==r.filterChoiceCount&&(n.parent.filterSettings.itemsCount=r.filterChoiceCount);n.infiniteRenderMod||i.take(r.filterChoiceCount);r.query.distincts.length&&!n.infiniteRenderMod||(n.customQuery=!0,n.queryGenerate(i));n.infiniteRenderMod&&(n.infiniteInitialLoad=!!t.isNullOrUndefined(n.fullData),n.makeInfiniteScrollRequest(i));n.parent.dataSource&&"result"in n.parent.dataSource?n.filterEvent(r,i):n.processDataOperation(i,!0)})},n.prototype.addDistinct=function(n){var c=this,i=u.DataUtil.distinct(this.options.filteredColumns,"field"),f,e,r,o,s,h,t;if(i.indexOf(this.options.column.field)<=-1&&(i=i.concat(this.options.column.field)),f=this.options.dataManager.adaptor.getModuleName,f&&"ODataV4Adaptor"===f()&&this.parent&&this.parent.query instanceof u.Query)for(e=this.parent.query,r=0;r<e.queries.length;r++)o=e.queries[parseInt(r.toString(),10)],"onWhere"===o.fn&&(this.getPredicateFields(o.e),this.queryFilteredColumn.map(function(n){-1===i.indexOf(n)&&i.push(n)}),this.queryFilteredColumn=[]);return(this.infiniteRenderMod||n.distinct(i),this.infiniteRenderMod&&!this.options.isRemote&&""===this.sInput.value)?(this.options.dataSource=this.options.dataSource instanceof u.DataManager?this.options.dataSource:new u.DataManager(this.options.dataSource),this.infinitePermenantLocalData=this.options.dataSource.dataSource.json.slice(),s=new u.Query,this.queryGenerate(s),h=new u.DataManager(this.options.dataSource.dataSource).executeLocal(s),this.options.dataSource=new u.DataManager(u.DataUtil.distinct(h,this.options.column.field,!0)),this.isForeignColumn(this.options.column)&&(this.options.column.dataSource=this.options.column.dataSource instanceof u.DataManager?this.options.column.dataSource:new u.DataManager(this.options.column.dataSource),this.options.dataSource.dataSource.json=this.options.dataSource.dataSource.json.map(function(n,t){return Object.assign({},n,c.options.column.dataSource.dataSource.json[t])}))):this.infiniteRenderMod&&this.options.isRemote&&(n.select(this.options.column.field),n.sortBy(this.options.column.field,"ascending"),t=this.options.dataManager.adaptor.getModuleName,t&&t()&&("ODataV4Adaptor"===t()||"WebApiAdaptor"===t()||"CustomDataAdaptor"===t()||"GraphQLAdaptor"===t()||"ODataAdaptor"===t())&&n.distinct(i)),n},n.prototype.getPredicateFields=function(n){var t=this;n.isComplex&&n.predicates?n.predicates.forEach(function(n){Array.isArray(n)?n.forEach(function(n){return t.getPredicateFields(n)}):t.getPredicateFields(n)}):n.field&&!n.isComplex&&this.queryFilteredColumn.indexOf(n.field)<=-1&&(this.queryFilteredColumn=this.queryFilteredColumn.concat(u.DataUtil.distinct([n.field],"field")))},n.prototype.filterEvent=function(n,t){var i=this,r=fc(n,t);this.parent.trigger(kf,r.state);this.addInfiniteScrollEvent(t);r.deffered.promise.then(function(n){i.infiniteDataCount=i.infiniteRenderMod&&!i.infiniteDataCount?n.count:i.infiniteDataCount;var t=i.infiniteRenderMod?n.result:n;i.dataSuccess(t)})},n.prototype.addInfiniteScrollEvent=function(n){this.infiniteRenderMod&&(this.infiniteQuery=n.clone(),this.infiniteInitialLoad?(this.cBox.classList.add("e-checkbox-infinitescroll"),t.EventHandler.add(this.cBox,"scroll",this.infiniteScrollHandler,this),t.EventHandler.add(this.cBox,"mouseup",this.infiniteScrollMouseKeyUpHandler,this),t.EventHandler.add(this.cBox,"mousedown",this.infiniteScrollMouseKeyDownHandler,this)):this.infiniteSearchValChange&&(this.cBox.innerHTML=""))},n.prototype.infiniteScrollMouseKeyDownHandler=function(){t.EventHandler.remove(this.cBox,"scroll",this.infiniteScrollHandler)},n.prototype.infiniteScrollMouseKeyUpHandler=function(n){var r=this,i;t.EventHandler.add(this.cBox,"scroll",this.infiniteScrollHandler,this);i=this.cBox;i.children.length>1&&(i.scrollTop>=i.scrollHeight-i.offsetHeight||i.scrollTop<=0)&&this.infiniteScrollHandler();at.timer=setTimeout(function(){r.clickHandler(n);at.timer=null},0)},n.prototype.getShimmerTemplate=function(){return'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"><\/span>'},n.prototype.showMask=function(){var f,r=5,n=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxMaskList",className:"e-checkboxlist e-fields e-infinite-list e-masklist"}),t,c,s,h,u;if(n.style.zIndex="10",t=this.cBox,this.removeMask(),t){var i=getComputedStyle(t),e=ns(t),o=t.children.length?parseInt(i.height,10):Math.floor(parseInt(i.height.split("px")[0],10))-5;this.parent.enableAdaptiveUI&&this.infiniteRenderMod&&(n.style.height=o-e+"px",this.dlg.querySelector(".e-dlg-content").style.overflow="hidden");c=!this.isExcel||t.children.length||this.dlg.classList.contains("e-excelfilter")?getComputedStyle(this.dlg.querySelector(".e-dlg-content")).backgroundColor:"";n.style.cssText="width: "+i.width+"; min-height: "+i.minHeight+"; height: "+o+"px; margin: "+i.margin+"; border-style: "+i.borderStyle+"; border-width: "+i.borderWidth+"; border-color: "+i.borderColor+"; position: absolute; background-color: "+c+";";r=Math.floor(o/e);r=t.children.length>r?t.children.length:r;f=e+"px"}for(s='<div class="e-ftrchk e-mask-ftrchk"><div class="e-checkbox-wrapper"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"<\/div><\/div>",n.innerHTML="",t.children.length||(this.spinner.insertAdjacentHTML("beforebegin",s),this.spinner.parentElement.querySelector(".e-ftrchk.e-mask-ftrchk").style.cssText="width: 100%; height: "+f+";",this.spinner.parentElement.querySelector(".e-checkbox-wrapper").style.width="100%",(u=[].slice.call(this.spinner.parentElement.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)")))[0].classList.add("e-mask-checkbox-filter-intent"),u[1].classList.add("e-mask-checkbox-filter-span-intent")),this.spinner.insertBefore(n,this.cBox),h=0;r&&h<r;h++)n.innerHTML+=s,n.lastElementChild.style.cssText="width: 100%; height: "+f+";",n.lastElementChild.querySelector(".e-checkbox-wrapper").style.width="100%",(u=[].slice.call(n.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)")))[0].classList.add("e-mask-checkbox-filter-intent"),u[1].classList.add("e-mask-checkbox-filter-span-intent");this.cBox&&(n.scrollTop=this.cBox.scrollTop)},n.prototype.removeMask=function(){var i=this.dialogObj.element.querySelectorAll(".e-mask-ftrchk"),n;if(i.length)for(n=0;n<i.length;n++)t.remove(i[n]);this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist")&&t.remove(this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist"))},n.prototype.infiniteScrollHandler=function(){var n=this.cBox;n.scrollTop>=n.scrollHeight-n.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length<=this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===3*this.parent.filterSettings.itemsCount&&(!this.infiniteDataCount||this.infiniteDataCount>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)?(this.makeInfiniteScrollRequest(),this.prevInfiniteScrollDirection="down"):n.scrollTop>=n.scrollHeight-n.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===3*this.parent.filterSettings.itemsCount?(yu([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt+="down"===this.prevInfiniteScrollDirection?this.parent.filterSettings.itemsCount:3*this.parent.filterSettings.itemsCount,nt(this.cBox,this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.parent.filterSettings.itemsCount+this.infiniteSkipCnt)),this.prevInfiniteScrollDirection="down"):0===n.scrollTop&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.infiniteLoadedElem.length>3*this.parent.filterSettings.itemsCount&&this.cBox.children.length===3*this.parent.filterSettings.itemsCount?(yu([].slice.call(this.cBox.children).splice(2*this.parent.filterSettings.itemsCount,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt-="up"===this.prevInfiniteScrollDirection?this.parent.filterSettings.itemsCount:3*this.parent.filterSettings.itemsCount,oc([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)),this.cBox),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up"):0===n.scrollTop&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.cBox.children.length<3*this.parent.filterSettings.itemsCount&&(yu([].slice.call(this.cBox.children).splice(2*this.parent.filterSettings.itemsCount,this.infiniteDataCount%this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt=(Math.floor(this.infiniteDataCount/this.parent.filterSettings.itemsCount)-3)*this.parent.filterSettings.itemsCount,oc([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)),this.cBox),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up")},n.prototype.makeInfiniteScrollRequest=function(n){var r=this,t,u,i;if(!this.infiniteInitialLoad&&this.parent.filterSettings&&"Shimmer"===this.parent.filterSettings.loadingIndicator?setTimeout(function(){r.infiniteQueryExecutionPending&&r.showMask()},500):this.infiniteInitialLoad||(tt.createSpinner({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),tt.showSpinner(this.spinner)),this.infiniteQuery&&this.infiniteQuery.queries&&this.infiniteQuery.queries.length)for(t=0;t<this.infiniteQuery.queries.length;t++)"onTake"!==this.infiniteQuery.queries[t].fn&&"onSkip"!==this.infiniteQuery.queries[t].fn||(this.infiniteQuery.queries.splice(t,1),t--);u=!!n;(n=n||this.infiniteQuery,this.infiniteInitialLoad||this.infiniteSearchValChange?this.infiniteSkipCnt=0:this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount,n.skip(this.infiniteSkipCnt),this.infiniteInitialLoad||this.infiniteSearchValChange?(n.take(3*this.parent.filterSettings.itemsCount),this.infiniteSkipCnt+=2*this.parent.filterSettings.itemsCount):n.take(this.parent.filterSettings.itemsCount),u)||(this.parent.dataSource&&"result"in this.parent.dataSource?(i={requestType:il,query:n,filterChoiceCount:null,filterModel:this},this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(i.filterChoiceCount=this.parent.filterSettings.itemsCount),this.filterEvent(i,n)):(this.processDataOperation(n),this.infiniteQueryExecutionPending=!0))},n.prototype.processDataOperation=function(n,t){var f=this,i,r,e,o;this.options.dataSource=this.options.dataSource instanceof u.DataManager?this.options.dataSource:new u.DataManager(this.options.dataSource);i=[];r=[];this.isForeignColumn(this.options.column)&&t&&(e="result"in this.options.column.dataSource?new u.DataManager(this.options.column.dataSource.result):this.options.column.dataSource,this.foreignKeyQuery.params=n.params,i.push(e.executeQuery(this.foreignKeyQuery)),r.push(function(n){return f.foreignKeyData=n}));(this.addInfiniteScrollEvent(n),this.infiniteRenderMod&&this.infiniteInitialLoad&&!this.options.isRemote)?(o=this.isForeignColumn(this.options.column)?this.options.foreignKeyValue:this.options.column.field,this.options.dataSource.executeQuery((new u.Query).sortBy(o,u.DataUtil.fnAscending)).then(function(t){f.options.dataSource.dataSource.json=t.result;f.executeQueryOperations(n,i,r)})):this.executeQueryOperations(n,i,r)},n.prototype.executeQueryOperations=function(n,t,i){var r=this,u;t.push(this.options.dataSource.executeQuery(n));i.push(this.dataSuccess.bind(this));u=0;Promise.all(t).then(function(n){r.infiniteQueryExecutionPending=!r.infiniteRenderMod&&r.infiniteQueryExecutionPending;for(var t=0;t<n.length;t++)r.infiniteDataCount=r.infiniteRenderMod&&!r.infiniteDataCount?n[t].count:r.infiniteDataCount,i[u++](n[parseInt(t.toString(),10)].result)}).catch(function(){r.infiniteRenderMod&&r.parent.filterSettings&&"Shimmer"===r.parent.filterSettings.loadingIndicator&&r.parent.showMaskRow(void 0,r.dialogObj.element)})},n.prototype.dataSuccess=function(t){var i,r,e,o,s,f;!this.infiniteInitialLoad&&this.infiniteDataCount&&(this.infiniteSkipCnt>=this.infiniteDataCount&&!this.infiniteSearchValChange||0===t.length)||(this.fullData=t,i={dataSource:this.fullData,executeQuery:!0,field:this.options.field},(this.parent.notify(rtt,i),i.executeQuery)&&(r=new u.Query,this.customQuery||(this.isExecuteLocal=!0,this.queryGenerate(r),this.isExecuteLocal=!1),e=new u.DataManager(i.dataSource).executeLocal(r),o=this.options.column,this.filteredData=n.getDistinct(e,this.options.field,o,this.foreignKeyData,this).records||[]),s=i.executeQuery?this.filteredData:i.dataSource,this.processDataSource(null,!0,s,i),(this.infiniteRenderMod&&this.infiniteInitialLoad||!this.infiniteRenderMod)&&(this.sInput?this.sInput.focus():this.dlg.querySelector(".e-chk-hidden")&&this.dlg.querySelector(".e-ftrchk")&&(this.dlg.querySelector(".e-chk-hidden").focus(),this.dlg.querySelector(".e-ftrchk").classList.add("e-chkfocus"))),(this.infiniteInitialLoad||this.infiniteSearchValChange)&&(this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1),f={requestType:rp,columnName:this.options.field,columnType:this.options.type},f.filterModel=this,this.parent.notify(df,f),this.isCheckboxFilterTemplate&&tt.hideSpinner(this.spinner))},n.prototype.queryGenerate=function(n){var e,i,s,f,r,u,o;if(this.parent.searchSettings&&this.parent.searchSettings.key.length&&(e=this.options.dataManager.adaptor.getModuleName,!t.isNullOrUndefined(this.parent.getDataModule)&&e&&"ODataV4Adaptor"===e()?this.parent.getDataModule().searchQuery(n):(i=this.parent.searchSettings,s=i.fields.length?i.fields:this.options.columns.map(function(n){return n.field}),n.search(i.key,s,i.operator,i.ignoreCase,i.ignoreAccent))),this.options.filteredColumns.length){for(f=[],r=0;r<this.options.filteredColumns.length;r++)u=this.options.filteredColumns[parseInt(r.toString(),10)],this.options.uid?(u.uid=u.uid||this.parent.getColumnByField(u.field).uid,u.uid!==this.options.uid&&f.push(this.options.filteredColumns[parseInt(r.toString(),10)])):u.field!==this.options.field&&f.push(this.options.filteredColumns[parseInt(r.toString(),10)]);o=this.getPredicateFromCols(f,this.isExecuteLocal);o&&n.where(o)}},n.prototype.processDataSource=function(n,t,i,r){tt.showSpinner(this.spinner);this.isExecuteLocal=!0;this.updateResult();this.isExecuteLocal=!1;var u={dataSource:this.fullData,isCheckboxFilterTemplate:!1,column:this.options.column,element:this.cBox,type:this.options.type,format:this.options.type,btnObj:this.options.isResponsiveFilter?null:this.dialogObj.btnObj[0],searchBox:this.searchBox};this.parent.notify(btt,u);this.isCheckboxFilterTemplate=u.isCheckboxFilterTemplate;this.isCheckboxFilterTemplate?this.infiniteRenderMod&&this.parent.filterSettings&&"Shimmer"===this.parent.filterSettings.loadingIndicator&&this.removeMask():this.createFilterItems(i,t,r)},n.prototype.processSearch=function(n){this.processDataOperation(n)},n.prototype.updateResult=function(){var i,n,t,r,f;for(this.result={},i=this.infiniteRenderMod&&this.existingPredicate[this.options.field]?this.getPredicateFromCols(this.existingPredicate[this.options.field],this.isExecuteLocal):this.getPredicateFromCols(this.options.filteredColumns,this.isExecuteLocal),n=new u.Query,i&&n.where(i),this.parent.notify(ptt,{query:n}),t=0,r=new u.DataManager(this.fullData).executeLocal(n);t<r.length;t++)f=r[t],this.result[d(this.options.field,f)]=!0},n.prototype.clickHandler=function(n){var l,f,r,e,s,h,c;if(t.isNullOrUndefined(at.timer)||clearTimeout(at.timer),f=n.target,t.isNullOrUndefined(this.parent.loadingIndicator)||"Shimmer"!==this.parent.loadingIndicator.indicatorType||!i(f,"e-mask-ftrchk")){if(r=i(f,"e-checkbox-wrapper"),i(f,"e-searchbox")&&this.searchBoxClick(n),r&&!this.isCheckboxFilterTemplate){if(e=r.querySelector(".e-selectall"),e)this.updateAllCBoxes(!e.classList.contains("e-check"));else if(ce(r.parentElement),this.infiniteRenderMod&&!r.parentElement.querySelector(".e-add-current")){this.localInfiniteSelectionInteracted=!0;var a=this.options.allowCaseSensitive,o=r.parentElement.querySelector(".e-frame").previousSibling,v=o.checked?"equal":"notequal",y=o.checked?"or":"and",p={field:this.options.field,predicate:y,uid:this.options.uid,operator:v,type:this.options.type,matchCase:a,ignoreAccent:this.options.ignoreAccent},w=this.values[i(o,"e-ftrchk").getAttribute("data-uid")];(this.updateInfiniteManualSelectPred(p,w),this.infiniteRenderMod&&!this.options.isRemote&&this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length)&&(s=this.getPredicateFromCols((l=this.options.filteredColumns).concat.apply(l,this.infiniteManualSelectMaintainPred),!0),h=new u.Query,s&&h.where(s),c=new u.DataManager(this.infinitePermenantLocalData).executeLocal(h),this.options.parentTotalDataCount!==c.length&&(this.options.parentTotalDataCount=c.length),!this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length&&(this.infiniteUnloadParentExistPred=[]));!this.infiniteUnloadParentExistPred.length||this.options.parentTotalDataCount!==this.infiniteDataCount&&this.options.parentTotalDataCount||(this.infiniteUnloadParentExistPred=[])}this.updateIndeterminatenBtn();r.querySelector(".e-chk-hidden").focus()}this.setFocus(i(r,"e-ftrchk"))}},n.prototype.updateInfiniteManualSelectPred=function(n,i){for(var u,r=0;r<this.infiniteManualSelectMaintainPred.length;r++)if(u=this.infiniteManualSelectMaintainPred[r],u.value+""==i+""&&("equal"===u.operator||"notequal"===u.operator)){this.infiniteManualSelectMaintainPred.splice(r,1);break}("or"!==n.predicate||this.localInfiniteSelectAllClicked&&this.infiniteLocalSelectAll)&&("and"!==n.predicate||this.localInfiniteSelectAllClicked&&!this.infiniteLocalSelectAll)||(this.infiniteManualSelectMaintainPred.push(t.extend({},{value:i},n)),"or"===n.predicate?this.options.parentTotalDataCount++:this.options.parentTotalDataCount--)},n.prototype.focusNextOrPrev=function(n,t){var f="ArrowUp"===n.key?t.indexOf(document.activeElement)-1:t.indexOf(document.activeElement)+1,r=t[(f+t.length)%t.length],u;r&&(r.focus(),u=r.classList.contains("e-chk-hidden")?i(r,"e-ftrchk"):r,this.setFocus(u))},n.prototype.keyupHandler=function(n){if("Tab"!==n.key&&("ArrowUp"!==n.key&&"ArrowDown"!==n.key||n.altKey)||this.setFocus(i(n.target,"e-ftrchk")),("ArrowUp"===n.key||"ArrowDown"===n.key)&&!n.altKey&&this.parent.filterSettings&&"CheckBox"===this.parent.filterSettings.type){n.preventDefault();var t=Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"])'));this.focusNextOrPrev(n,t)}},n.prototype.setFocus=function(n){var t=this.dlg.querySelector(".e-chkfocus");t&&t.classList.remove("e-chkfocus");n&&n!==t&&n.classList.add("e-chkfocus")},n.prototype.updateAllCBoxes=function(n){var t,i,r;for(this.infiniteRenderMod&&(this.localInfiniteSelectAllClicked=!0,this.infiniteLocalSelectAll=n,this.infiniteUnloadParentExistPred=[],this.infiniteManualSelectMaintainPred=[]),t=0,i=this.infiniteRenderMod?this.infiniteLoadedElem.map(function(n){return n.querySelector(".e-frame")}):[].slice.call(this.cBox.querySelectorAll(".e-frame:not(.e-add-current)"));t<i.length;t++)r=i[t],yo(r,n),ur(r.previousSibling,n)},n.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())},n.prototype.createCheckbox=function(n,i,r){var f=i?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0),u,e,o,s,h;return ur(f.querySelector("input"),i),u=f.querySelector(".e-label"),e=ic({},r,{column:this.options.column,parent:this.parent}),u[this.options.disableHtmlEncode?"textContent":"innerHTML"]=!t.isNullOrUndefined(n)&&n.toString().length?this.parent.enableHtmlSanitizer?t.SanitizeHtmlHelper.sanitize(n):n:this.getLocalizedLabel("Blanks"),o=pi("cbox"),(u.setAttribute("id",o+"cboxLabel"),f.querySelector("input").setAttribute("aria-labelledby",u.id),u.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),"boolean"==typeof n&&(u.innerHTML=!0===n?this.getLocalizedLabel("FilterTrue"):this.getLocalizedLabel("FilterFalse")),t.addClass([u],["e-checkboxfiltertext"]),this.options.template&&r[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&r[this.options.column.field]!==this.getLocalizedLabel("AddCurrentSelection"))&&(u.innerHTML="",s=this.parent.isReact&&this.options.column.filter&&"string"!=typeof this.options.column.filter.itemTemplate&&!(this.options.column.filter.itemTemplate.prototype&&this.options.column.filter.itemTemplate.prototype.CSPTemplate),h=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,s||h?(this.options.template(e,this.parent,"filterItemTemplate",null,null,null,u),this.parent.renderTemplates()):nt(u,this.options.template(e,this.parent,"filterItemTemplate",null,null,null,null,this.parent.root))),f},n.prototype.updateIndeterminatenBtn=function(){var i,r=this.infiniteRenderMod?this.infiniteLoadedElem.length:this.cBox.children.length-1,f=[],o=!1,e=this.infiniteRenderMod?this.sBox.querySelector(".e-selectall"):this.cBox.querySelector(".e-selectall"),n=this.infiniteRenderMod?this.infiniteLoadedElem.filter(function(n){return n.querySelector(".e-check")}).length:this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)").length,u;this.cBox.querySelector(".e-add-current")&&(r-=1);this.options.isResponsiveFilter||((i=this.dialogObj.btnObj[0]).disabled=!1);u=e.previousSibling;ur(u,!1);u.indeterminate=!1;!this.infiniteRenderMod||""!==this.sInput.value||this.options.parentCurrentViewDataCount||this.localInfiniteSelectionInteracted||this.localInfiniteSelectAllClicked&&(this.infiniteLocalSelectAll||n)||r===n&&r!==n?this.infiniteRenderMod&&this.infiniteLoadedElem.length<this.infiniteDataCount&&this.infiniteUnloadParentExistPred.length&&(!n||r===n)&&this.infiniteLocalSelectAll&&(n?r+=this.infiniteUnloadParentExistPred.length:n+=this.infiniteUnloadParentExistPred.length):n=0;r===n?(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),f=["e-check"],ur(u,!0)):n?(f=["e-stop"],u.indeterminate=!0):(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!1,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),f=["e-uncheck"],o=!0,i&&(i.disabled=!0));i&&(this.filterState=!i.disabled,i.dataBind());t.removeClass([e],["e-check","e-stop","e-uncheck"]);t.addClass([e],f);this.parent.notify(dr,{disabled:o})},n.prototype.createFilterItems=function(n,i,r){var st,ht,ct,o,c=this.parent.createElement("div"),y=!1,l,p,f,it,rt,ut,w,b,lt,k,a,s,at,vt,ft,d,h,et,yt,pt,e,g,v,wt,ot;for(this.options.isResponsiveFilter||(o=this.dialogObj.btnObj[0]),l=-1,p="ejValue",r.executeQuery||(p=r.field),f=0;f<n.length;f++)it=t.getValue(p,n[parseInt(f.toString(),10)]),(""===it||t.isNullOrUndefined(it))&&(l+=1);if(this.infiniteRenderMod||(this.itemsCnt=-1!==l?n.length-l:n.length),this.infiniteRenderMod&&this.parent.filterSettings&&"Shimmer"===this.parent.filterSettings.loadingIndicator&&this.removeMask(),n.length&&!this.renderEmpty){for(rt=this.getLocalizedLabel("SelectAll"),ut=this.cBox.querySelector(".e-checkfltrnmdiv"),ut&&ut.classList.remove("e-checkfltrnmdiv"),w=this.createCheckbox(rt,!1,((st={})[this.options.field]=rt,st)),this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?t.addClass([w],this.parent.cssClass.split(" ")):t.addClass([w],[this.parent.cssClass])),this.infiniteInitialLoad||!this.infiniteRenderMod?((e=dh(pi("cbox"),w,"e-ftrchk")).querySelector(".e-frame").classList.add("e-selectall"),this.infiniteRenderMod?(e.classList.add("e-infinitescroll"),this.parent.enableAdaptiveUI&&(this.spinner.style.height=this.spinner.offsetHeight-ns(this.cBox)+"px"),this.sBox.insertBefore(e,this.spinner)):c.appendChild(e)):this.sBox.querySelector(".e-ftrchk .e-selectall")&&(this.sBox.querySelector(".e-ftrchk .e-selectall").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-selectall").parentElement.classList.remove("e-checkbox-disabled")),b=new u.Predicate("field","equal",this.options.field),this.options.foreignKeyValue&&(b=b.or("field","equal",this.options.foreignKeyValue)),lt=new u.DataManager(this.options.filteredColumns).executeLocal((new u.Query).where(b)).length,this.sInput&&this.sInput.value?(k=this.createCheckbox(this.getLocalizedLabel("AddCurrentSelection"),!1,((ht={})[this.options.field]=this.getLocalizedLabel("AddCurrentSelection"),ht)),(this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?t.addClass([k],this.parent.cssClass.split(" ")):t.addClass([k],[this.parent.cssClass])),(!this.infiniteRenderMod||t.isNullOrUndefined(this.sBox.children[2])||this.sBox.children[2].innerText===this.getLocalizedLabel("AddCurrentSelection"))&&this.infiniteRenderMod)?this.sBox.querySelector(".e-ftrchk .e-add-current")&&(this.sBox.querySelector(".e-ftrchk .e-add-current").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-add-current").parentElement.classList.remove("e-checkbox-disabled")):(a=dh(pi("cbox"),k,"e-ftrchk"),(a.querySelector(".e-frame").classList.add("e-add-current"),this.infiniteRenderMod)?(a.classList.add("e-infinitescroll"),this.sBox.insertBefore(a,this.spinner),s=this.spinner.querySelector(".e-checkboxlist"),at=Math.ceil(a.getBoundingClientRect().height),s.style.height=parseInt(getComputedStyle(s).height.split("px")[0],10)-at+"px",s.style.minHeight=s.style.height):c.appendChild(a))):this.infiniteRenderMod&&!t.isNullOrUndefined(this.sBox.children[2])&&this.sBox.children[2].innerText===this.getLocalizedLabel("AddCurrentSelection")&&(s=this.spinner.querySelector(".e-checkboxlist"),vt=Math.ceil(this.sBox.children[2].getBoundingClientRect().height),s.style.height=parseInt(getComputedStyle(s).height.split("px")[0],10)+vt+"px",s.style.minHeight=s.style.height,t.remove(this.sBox.children[2])),ft=void 0,f=0;f<n.length;f++){if(d=pi("cbox"),this.values[""+d]=t.getValue(p,n[parseInt(f.toString(),10)]),h=t.getValue(this.options.field,n[parseInt(f.toString(),10)]),this.options.formatFn&&(h=this.valueFormatter.toView(h,this.options.formatFn)),et={value:h,column:this.options.column,data:n[parseInt(f.toString(),10)]},this.parent.notify(gn,et),""===(h=et.value)||t.isNullOrUndefined(h)){if(ft)continue;ft=!0}this.infiniteRenderMod&&this.updateInfiniteUnLoadedCheckboxExistPred(h,this.infiniteUnloadParentExistPred);yt=this.localInfiniteSelectAllClicked?this.createCheckbox(h,this.infiniteLocalSelectAll,t.getValue("dataObj",n[f])):this.createCheckbox(h,this.getCheckedState(lt,this.values[""+d]),t.getValue("dataObj",n[f]));c.appendChild(dh(d,yt,"e-ftrchk"));this.infiniteRenderMod&&(c.lastChild.style.height=ns(this.cBox)+"px")}pt=this.cBox.scrollTop;!this.infiniteRenderMod||this.infiniteSearchValChange?this.cBox.innerHTML="":this.infiniteRenderMod&&this.cBox.children.length&&yu([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount));this.infiniteRenderMod&&((ct=this.infiniteLoadedElem).push.apply(ct,[].slice.call(c.children)),this.itemsCnt=-1!==l?this.infiniteLoadedElem.length-l:this.infiniteLoadedElem.length);this.infiniteUnloadParentExistPred.length&&(this.infiniteLoadedElem.length>=this.infiniteDataCount||!this.options.parentCurrentViewDataCount||this.options.parentTotalDataCount===this.infiniteDataCount&&this.options.parentCurrentViewDataCount)&&(this.infiniteUnloadParentExistPred=[]);nt(this.cBox,[].slice.call(c.children));this.infiniteRenderMod&&!this.infiniteScrollAppendDiff&&(this.infiniteScrollAppendDiff=Math.round(pt-this.cBox.scrollTop));this.updateIndeterminatenBtn();this.infiniteRenderMod?y=!(!o||!o.disabled):(o&&(o.disabled=!1),y=!1)}else(c.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.infiniteRenderMod)&&((e=this.sBox.querySelector(".e-ftrchk .e-selectall"))&&(g=e.parentElement.parentElement,e.classList.contains("e-check")?ce(g):e.classList.contains("e-stop")&&(ce(g),e.classList.remove("e-stop"),ce(g)),e.previousSibling.disabled=!0,e.parentElement.classList.add("e-checkbox-disabled")),v=this.sBox.querySelector(".e-ftrchk .e-add-current"),v&&(wt=v.parentElement.parentElement,v.classList.contains("e-check")&&ce(wt),v.previousSibling.disabled=!0,v.parentElement.classList.add("e-checkbox-disabled"))),this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),nt(this.cBox.children[0],[].slice.call(c.children)),o&&(o.disabled=!0),y=!0,this.filterState=!y;o&&n.length&&(this.filterState=!o.disabled,o.dataBind());ot={requestType:il,dataSource:this.renderEmpty?[]:n};ot.filterModel=this;this.parent.notify(df,ot);this.parent.notify(dr,{disabled:y});this.infiniteRenderMod&&this.infiniteInitialLoad&&(this.cBox.style.marginTop="0px");tt.hideSpinner(this.spinner)},n.prototype.updateInfiniteUnLoadedCheckboxExistPred=function(n,i){for(var o,r=0;r<i.length;r++){var u=i[r],e=u.value instanceof Date?this.valueFormatter.toView(u.value,this.options.formatFn):u.value,f=this.options.column;f.isForeignColumn()&&(o=nu(f,{},e,this.foreignKeyData)[0],n=t.getValue(f.foreignKeyField,o));n!==e||"equal"!==u.operator&&"notequal"!==u.operator||(this.infiniteManualSelectMaintainPred.push(i[r]),i.splice(r,1),r--)}},n.prototype.getCheckedState=function(n,t){if(this.isFiltered&&n){var i=!(!this.sInput||!this.sInput.value)||this.result[""+t];return this.infiniteRenderMod?i:"notequal"===this.options.operator?!i:i}return!0},n.getDistinct=function(n,i,r,f,e){for(var c,l,s,a,o,h=n.length,v=[],y={},p=!(!r||!r.isForeignColumn)&&r.isForeignColumn();h--;)(o=n[parseInt(h.toString(),10)],r&&"dateonly"===r.type&&"string"==typeof o[""+i]&&o[""+i])&&(c=o[""+i].split(/[^0-9.]/),o[""+i]=new Date(parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10))),l="string"!=typeof(o=d(i,o))||t.isNullOrUndefined(e)||t.isNullOrUndefined(e.parent)||t.isNullOrUndefined(e.parent.filterSettings)||t.isNullOrUndefined(e.parent.filterSettings.enableCaseSensitivity)?o:o.toLowerCase(),l in y||(s={},(s.ejValue=o,y[""+l]=!0,p)&&(a=nu(r,{},o,f)[0],t.setValue(gp,a,n[parseInt(h.toString(),10)]),o=t.getValue(r.foreignKeyValue,a)),t.setValue(i,t.isNullOrUndefined(o)?null:o,s),t.setValue("dataObj",n[parseInt(h.toString(),10)],s),v.push(s));return u.DataUtil.group(u.DataUtil.sort(v,i,u.DataUtil.fnAscending),"ejValue")},n.getPredicate=function(t,i){for(var f=u.DataUtil.distinct(t,"field",!0)||[],e=[],o={},r=0;r<f.length;r++)0!==(e=new u.DataManager(t).executeLocal((new u.Query).where("field","equal",f[parseInt(r.toString(),10)].field))).length&&(o[f[parseInt(r.toString(),10)].field]=n.generatePredicate(e,i));return o},n.generatePredicate=function(i,r){var o,s=i?i.length:0,e=n.updateDateFilter(i[0]),f;for(e.ignoreAccent=!t.isNullOrUndefined(e.ignoreAccent)&&e.ignoreAccent,o="date"===e.type||"datetime"===e.type||"dateonly"===e.type?au(e,e.type,r):e.ejpredicate?e.ejpredicate:new u.Predicate(e.field,e.operator,e.value,!n.getCaseValue(e),e.ignoreAccent),f=1;f<s;f++)i[parseInt(f.toString(),10)]=n.updateDateFilter(i[parseInt(f.toString(),10)]),s>2&&f>1&&("or"===i[f].predicate&&"or"===i[f-1].predicate||"and"===i[f].predicate&&"and"===i[f-1].predicate)?"date"===i[f].type||"datetime"===i[f].type||"dateonly"===i[f].type?o.predicates.push(au(i[parseInt(f.toString(),10)],i[f].type,r)):o.predicates.push(new u.Predicate(i[f].field,i[parseInt(f.toString(),10)].operator,i[parseInt(f.toString(),10)].value,!n.getCaseValue(i[parseInt(f.toString(),10)]),i[parseInt(f.toString(),10)].ignoreAccent)):o="date"===i[f].type||"datetime"===i[f].type||"dateonly"===i[f].type?"and"===i[parseInt(f.toString(),10)].predicate&&"equal"===i[parseInt(f.toString(),10)].operator?o.or(au(i[parseInt(f.toString(),10)],i[parseInt(f.toString(),10)].type,r),i[parseInt(f.toString(),10)].type,i[parseInt(f.toString(),10)].ignoreAccent):o[i[parseInt(f.toString(),10)].predicate](au(i[parseInt(f.toString(),10)],i[parseInt(f.toString(),10)].type,r),i[parseInt(f.toString(),10)].type,i[parseInt(f.toString(),10)].ignoreAccent):i[parseInt(f.toString(),10)].ejpredicate?o[i[parseInt(f.toString(),10)].predicate](i[parseInt(f.toString(),10)].ejpredicate):o[i[parseInt(f.toString(),10)].predicate](i[parseInt(f.toString(),10)].field,i[parseInt(f.toString(),10)].operator,i[parseInt(f.toString(),10)].value,!n.getCaseValue(i[parseInt(f.toString(),10)]),i[parseInt(f.toString(),10)].ignoreAccent);return o||null},n.getCaseValue=function(n){return t.isNullOrUndefined(n.matchCase)?!("string"===n.type||t.isNullOrUndefined(n.type)&&"string"==typeof n.value):n.matchCase},n.updateDateFilter=function(n){return("date"===n.type||"datetime"===n.type||"dateonly"===n.type||n.value instanceof Date)&&(n.type=n.type||"date"),n},n}();const gt=ejdashboard.dropdowns,pu=ejdashboard.calendars,ve=ejdashboard.navigations;var cht=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cut=function(n){function r(t,i){var r=n.call(this,t)||this;return r.childRefs=[],r.eventHandlers={},r.isDevice=!1,r.focusedMenuItem=null,r.customFilterOperators=i,r.isExcel=!0,r}return cht(r,n),r.prototype.getCMenuDS=function(n,t){var i={number:["Equal","NotEqual","","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","Between","","CustomFilter"],string:["Equal","NotEqual","","StartsWith","EndsWith","","Contains","NotContains","","CustomFilter"]},u,r;for(i.date=i.number,i.datetime=i.number,i.dateonly=i.number,u=[],r=0;r<i[""+n].length;r++)i[""+n][parseInt(r.toString(),10)].length?t?u.push({text:this.getLocalizedLabel(i[""+n][parseInt(r.toString(),10)])+"...",iconCss:"e-icons e-icon-check "+(t===i[""+n][parseInt(r.toString(),10)].toLowerCase()?"":"e-emptyicon")}):u.push({text:this.getLocalizedLabel(i[""+n][parseInt(r.toString(),10)])+"..."}):u.push({separator:!0});return u},r.prototype.destroy=function(){if(this.dlg&&(this.unwireExEvents(),n.prototype.closeDialog.call(this)),!this.isDevice&&this.menuObj){var t=this.menuObj.element.querySelector("li.e-focused");t&&i(t,"e-excel-menu")||this.destroyCMenu()}this.dlgObj&&!this.dlgObj.isDestroyed&&this.removeDialog()},r.prototype.createMenu=function(n,t,i,r){var u,f,s;if(this.menu=this.parent.createElement("div",{className:"e-contextmenu-wrapper"}),this.parent.enableRtl?this.menu.classList.add("e-rtl"):this.menu.classList.remove("e-rtl"),this.parent.cssClass&&this.menu.classList.add(this.parent.cssClass),u=this.parent.createElement("ul"),f=t?"e-excl-filter-icon e-filtered":"e-excl-filter-icon",this.parent.allowSorting&&"grid"===this.parent.getModuleName()&&!this.options.isResponsiveFilter){var e=this.parent.getColumnHeaderByUid(r.uid).getAttribute("aria-sort"),o=this.parent.getColumnByField(r.field).allowSorting,h=o&&"ascending"!==e?"e-excel-ascending":"e-disabled e-excel-ascending",c=o&&"descending"!==e?"e-excel-descending":"e-disabled e-excel-descending",l="string"===n?this.getLocalizedLabel("SortAtoZ"):"datetime"===n||"date"===n?this.getLocalizedLabel("SortByOldest"):this.getLocalizedLabel("SortSmallestToLargest"),a="string"===n?this.getLocalizedLabel("SortZtoA"):"datetime"===n||"date"===n?this.getLocalizedLabel("SortByNewest"):this.getLocalizedLabel("SortLargestToSmallest");u.appendChild(this.createMenuElem(l,h,"e-sortascending"));u.appendChild(this.createMenuElem(a,c,"e-sortdescending"));s=this.parent.createElement("li",{className:"e-separator e-menu-item e-excel-separator"});u.appendChild(s)}this.options.isResponsiveFilter||u.appendChild(this.createMenuElem(this.getLocalizedLabel("ClearFilter"),t?"":"e-disabled",f));"boolean"!==n&&u.appendChild(this.createMenuElem(this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",dateonly:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"}[""+n]),"e-submenu",i&&this.ensureTextFilter()?"e-icon-check":f+" e-emptyicon",!0));this.menu.appendChild(u);this.parent.notify(kn,{element:this.menu});this.parent.notify(yw,{isFiltered:t})},r.prototype.createMenuElem=function(n,t,i,r){var u=this.parent.createElement("li",{className:t+" e-menu-item"});return u.innerHTML=n,u.tabIndex=u.classList.contains("e-disabled")?-1:0,u.insertBefore(this.parent.createElement("span",{className:"e-menu-icon e-icons "+i,attrs:{"aria-hidden":"true"}}),u.firstChild),r&&u.appendChild(this.parent.createElement("span",{className:"e-icons e-caret"})),u},r.prototype.wireExEvents=function(){t.Browser.isDevice||t.EventHandler.add(this.dlg,"mouseover",this.hoverHandler,this);t.EventHandler.add(this.dlg,"click",this.clickExHandler,this);t.EventHandler.add(this.dlg,"keyup",this.keyUp,this);t.EventHandler.add(this.dlg,"keydown",this.keyDown,this)},r.prototype.unwireExEvents=function(){t.Browser.isDevice||t.EventHandler.remove(this.dlg,"mouseover",this.hoverHandler);t.EventHandler.remove(this.dlg,"click",this.clickExHandler);t.EventHandler.remove(this.dlg,"keyup",this.keyUp);t.EventHandler.remove(this.dlg,"keydown",this.keyDown)},r.prototype.clickExHandler=function(n){var r=i(n.target,"e-menu-item");r&&(this.getLocalizedLabel("ClearFilter")===r.innerText.trim()?(this.clearFilter(),this.closeDialog()):(this.options.isResponsiveFilter||t.Browser.isDevice)&&this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"}[this.options.type])===r.innerText.trim()&&this.hoverHandler(n))},r.prototype.focusNextOrPrevElement=function(n,t,r){var o="ArrowUp"===n.key||"Tab"===n.key&&n.shiftKey?t.indexOf(document.activeElement)-1:t.indexOf(document.activeElement)+1,u=t[(o+t.length)%t.length],f,e;u&&(u.focus(),f=u.classList.contains("e-chk-hidden")?"e-chkfocus":r,e=u.classList.contains("e-chk-hidden")?i(u,"e-ftrchk"):i(u,"e-menu-item"),this.excelSetFocus(e,f))},r.prototype.keyUp=function(n){var t,r,u;"Tab"===n.key&&n.shiftKey||"Tab"===n.key?(t=n.target.classList.contains("e-chk-hidden")?"e-chkfocus":"e-menufocus",r=n.target.classList.contains("e-menu-item")?i(n.target,"e-menu-item"):i(n.target,"e-ftrchk"),this.excelSetFocus(r,t)):"ArrowUp"!==n.key&&"ArrowDown"!==n.key||n.altKey?("Enter"===n.key||"ArrowRight"===n.code)&&n.target.classList.contains("e-menu-item")&&(n.preventDefault(),n.target.click(),n.target.classList.contains("e-submenu")&&(this.hoverHandler(n),this.menuObj.element.querySelector(".e-menu-item").focus(),this.excelSetFocus(i(this.menuObj.element.querySelector(".e-menu-item"),"e-menu-item"),"e-focused"),this.focusedMenuItem=this.menuObj.element.querySelector(".e-menu-item"))):(n.preventDefault(),u=Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"]), .e-menu-item:not(.e-disabled):not(.e-separator)')),this.focusNextOrPrevElement(n,u,"e-menufocus"))},r.prototype.keyDown=function(n){"ArrowUp"!==n.key&&"ArrowDown"!==n.key||n.preventDefault()},r.prototype.excelSetFocus=function(n,t){var r=this.cmenu.querySelector("."+t),i=this.menu.querySelector("."+t);r&&r.classList.remove(t);i&&i.classList.contains("e-menufocus")&&i.classList.remove(t);n&&n.classList.add(t)},r.prototype.destroyCMenu=function(){this.isCMenuOpen=!1;this.menuObj&&!this.menuObj.isDestroyed&&(this.menuObj.destroy(),t.EventHandler.remove(this.menuObj.element,"keydown",this.contextKeyDownHandler),t.remove(this.cmenu),this.parent.notify(pa,{target:null,header:"",isOpen:!1,col:this.options.column}))},r.prototype.hoverHandler=function(n){var e,o,a,s,r,h,v,c;if(!this.options.isResponsiveFilter||"mouseover"!==n.type){var f,y=n.target.querySelector(".e-contextmenu"),u=i(n.target,"e-menu-item"),l=this.menu.querySelector(".e-focused");(l&&l.classList.remove("e-focused"),u&&(u.classList.add("e-focused"),f=u.classList.contains("e-submenu")),y)||(f||(e=this.menu.querySelector(".e-submenu"),t.isNullOrUndefined(e)||e.classList.remove("e-selected"),this.destroyCMenu()),o=this.ensureTextFilter(),!this.isCMenuOpen&&f&&(u.classList.add("e-selected"),this.isCMenuOpen=!0,a={items:this.getCMenuDS(this.options.type,o?o.replace(/\s/g,""):void 0),select:this.selectHandler.bind(this),onClose:this.destroyCMenu.bind(this),enableRtl:this.parent.enableRtl,animationSettings:{effect:t.Browser.isDevice?"ZoomIn":"None"},beforeClose:this.preventClose.bind(this),cssClass:this.options.isResponsiveFilter&&this.parent.cssClass?"e-res-contextmenu-wrapper "+this.parent.cssClass:this.options.isResponsiveFilter?"e-res-contextmenu-wrapper":this.parent.cssClass?this.parent.cssClass:""},this.parent.element.appendChild(this.cmenu),this.menuObj=new ve.ContextMenu(a,this.cmenu),t.EventHandler.add(this.menuObj.element,"keydown",this.contextKeyDownHandler,this),s=this.menu.querySelector(".e-submenu").getBoundingClientRect(),r={top:0,left:0},this.options.isResponsiveFilter?(h=document.querySelector(".e-responsive-dialog > .e-dlg-header-content").offsetHeight+4,this.menuObj.element.style.height="calc(100% - "+h+"px)",this.menuObj.open(h,0,document.body),v=this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"}[this.options.type]),this.parent.notify(pa,{target:this.menuObj.element.parentElement,header:v,isOpen:!0})):(t.Browser.isDevice?(this.isDevice=!0,c=this.getContextBounds(),r.top=(window.innerHeight-c.height)/2,r.left=(window.innerWidth-c.width)/2,this.closeDialog(),this.isDevice=!1):(r.top=t.Browser.isIE?window.pageYOffset+s.top:window.scrollY+s.top,r.left=this.getCMenuYPosition(this.dlg)),this.menuObj.open(r.top,r.left,n.target)),le(this.parent.element,this.menuObj.element.parentElement)))}},r.prototype.contextKeyDownHandler=function(n){if("Tab"===n.key&&n.shiftKey||"Tab"===n.key){n.preventDefault();var t=Array.from(this.menuObj.element.querySelectorAll('[tabindex]:not([tabindex="-1"]), .e-menu-item:not(.e-disabled):not(.e-separator)'));this.focusNextOrPrevElement(n,t,"e-focused")}else"ArrowLeft"!==n.key&&"Escape"!==n.key||(n.preventDefault(),this.menuObj.close(),this.focusedMenuItem=null,document.querySelector(".e-submenu.e-menu-item").classList.remove("e-selected"),document.querySelector(".e-submenu.e-menu-item").focus())},r.prototype.ensureTextFilter=function(){var t,n=this.existingPredicate[this.options.field];return n&&2===n.length?t="greaterthanorequal"===n[0].operator&&"lessthanorequal"===n[1].operator?"between":"customfilter":n&&1===n.length&&(this.optrData=this.customFilterOperators[this.options.type+"Operator"],t=n[0].operator),t},r.prototype.preventClose=function(n){if(this.options&&this.options.isResponsiveFilter&&n.event){var t=n.event.target,i=t.classList&&(t.classList.contains("e-resfilterback")||t.classList.contains("e-res-back-btn")||t.classList.contains("e-menu-item"));n.cancel=!i}else n.event instanceof MouseEvent&&n.event.target&&n.event.target.classList&&n.event.target.classList.contains("e-submenu")&&(n.cancel=!0)},r.prototype.getContextBounds=function(){return this.menuObj.element.style.display="block",this.menuObj.element.getBoundingClientRect()},r.prototype.getCMenuYPosition=function(n){var r=this.getContextBounds().width,i=n.getBoundingClientRect(),u=this.parent.element.getBoundingClientRect(),f=i.left-r-u.left,e=i.right+r-u.right,t=n.offsetWidth-n.clientWidth;return t=t?t+1:0,(this.parent.enableRtl?f:e)<1?i.right+1-t:i.left-r-1+t},r.prototype.openDialog=function(n){var u=this,r;(this.updateModel(n),this.getAndSetChkElem(n),this.showDialog(n),n.cancel)||(this.dialogObj.dataBind(),r=this.existingPredicate[n.field]&&this.existingPredicate[n.field].length||this.options.filteredColumns.filter(function(n){return u.options.field===n.field}).length,this.createMenu(n.type,r>0,1===r||2===r,n),this.dlg.insertBefore(this.menu,this.dlg.firstChild),this.dlg.classList.add("e-excelfilter"),this.parent&&!t.isNullOrUndefined(this.parent.getContent)&&this.parent.getContent()&&this.parent.getContent().firstElementChild.offsetHeight<this.dlg.offsetHeight&&!i(this.parent.element,"e-gantt-dialog")&&ko(this.parent,this.dialogObj),this.parent.enableRtl&&this.dlg.classList.add("e-rtl"),this.dlg.classList.remove("e-checkboxfilter"),this.cmenu=this.parent.createElement("ul",{className:"e-excel-menu"}),this.dlg.querySelectorAll(".e-menu-item").forEach(function(n){n.scrollWidth>n.clientWidth&&n.setAttribute("title",n.textContent)}),n.column.showColumnMenu&&this.parent.notify(io,{}),this.wireExEvents())},r.prototype.closeDialog=function(){this.destroy()},r.prototype.selectHandler=function(n){n.item&&(this.parent.notify(pw,{}),this.menuItem=n.item,this.closeDialog(),this.renderDialogue(n))},r.prototype.renderDialogue=function(n){var i=this,e=n?n.element:void 0,r=this.options.field,u=!t.isNullOrUndefined(r)&&gi(r),f=!t.isNullOrUndefined(r)&&vt(r),o=this.parent.createElement("div",{className:"e-xlfl-maindiv",id:u?f+"-xlflmenu":r+"-xlflmenu"});this.dlgDiv=this.parent.createElement("div",{className:"e-xlflmenu",id:u?f+"-xlfldlg":r+"-xlfldlg"});this.options.isResponsiveFilter?document.querySelector(".e-resfilter > .e-dlg-content > .e-xl-customfilterdiv").appendChild(this.dlgDiv):this.parent.element.appendChild(this.dlgDiv);this.dlgObj=new tt.Dialog({header:this.getLocalizedLabel("CustomFilter"),isModal:!0,overlayClick:this.removeDialog.bind(this),showCloseIcon:!0,locale:this.parent.locale,closeOnEscape:!0,target:document.body,visible:!1,enableRtl:this.parent.enableRtl,open:function(){for(var r,u,e,f=[].slice.call(i.dlgObj.element.querySelectorAll("table.e-xlfl-table tr.e-xlfl-fields")),n=0;n<f.length;n++)r=f[n].children[1].querySelector(".e-control"),u=f[n].querySelector(".e-dropdownlist.e-control").ej2_instances[0],"isempty"===u.value||"isnotempty"===u.value||"isnull"===u.value||"isnotnull"===u.value?r.ej2_instances[0].enabled=!1:r&&!t.isNullOrUndefined(r.getAttribute("disabled"))&&(r.ej2_instances[0].enabled=!0);if(e=i.dlgObj.element.querySelector("table.e-xlfl-table>tr"),i.options.column.filterTemplate){var o=gi(i.options.column.field)?vt(i.options.column.field):i.options.column.field,s=i.parent.isReact&&"string"!=typeof i.options.column.filterTemplate&&!(i.options.column.filterTemplate.prototype&&i.options.column.filterTemplate.prototype.CSPTemplate),h=i.parent.parentDetails&&i.parent.parentDetails.parentInstObj&&i.parent.parentDetails.parentInstObj.isReact;s||h?i.parent.renderTemplates(function(){e.querySelector("#"+o+"-xlfl-frstvalue").focus()}):e.querySelector("#"+o+"-xlfl-frstvalue").focus()}},close:this.removeDialog.bind(this),created:this.createdDialog.bind(this,e,r),buttons:[{click:this.filterBtnClick.bind(this,r),buttonModel:{content:this.getLocalizedLabel("OKButton"),isPrimary:!0,cssClass:this.parent.cssClass?"e-xlfl-okbtn "+this.parent.cssClass:"e-xlfl-okbtn"}},{click:this.removeDialog.bind(this),buttonModel:{content:this.getLocalizedLabel("CancelButton"),cssClass:this.parent.cssClass?"e-xlfl-cancelbtn "+this.parent.cssClass:"e-xlfl-cancelbtn"}}],content:o,width:430,animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""});this.dlgObj.isStringTemplate=!0;this.renderResponsiveDialog();this.dlgDiv.setAttribute("aria-label",this.getLocalizedLabel("CustomFilterDialogARIA"));this.childRefs.unshift(this.dlgObj);this.dlgObj.appendTo(this.dlgDiv)},r.prototype.renderResponsiveDialog=function(){if(this.options.isResponsiveFilter){var n=document.querySelector(".e-row-responsive-filter");n&&n.classList.remove("e-row-responsive-filter");this.dlgObj.buttons=[{}];this.dlgObj.header=void 0;this.dlgObj.position={X:"",Y:""};this.dlgObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-xl-customfilterdiv");this.dlgObj.width="100%";this.dlgObj.isModal=!1;this.dlgObj.showCloseIcon=!1}},r.prototype.removeDialog=function(){this.parent.notify(ww,{});(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&vu(this.parent,["filterTemplate"]);this.removeObjects(this.childRefs);t.remove(this.dlgDiv);this.parent.notify(gs,{})},r.prototype.createdDialog=function(n,i){var u,r;if((this.renderCustomFilter(n,i),this.dlgObj.element.style.left="0px",this.options.isResponsiveFilter)?(u=document.querySelector(".e-responsive-dialog > .e-dlg-header-content").offsetHeight+4,this.dlgObj.element.style.top=u+"px"):this.dlgObj.element.style.top="0px",!this.options.isResponsiveFilter&&t.Browser.isDevice&&window.innerWidth<440&&(this.dlgObj.element.style.width="90%"),this.parent.notify(bn,{column:i,dialog:this.dialogObj}),r={column:i,dialogInstance:this.dialogObj,cancel:!1,target:n},this.parent.trigger(wn,r),r.cancel)return(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&vu(this.parent,["filterTemplate"]),this.removeObjects(this.childRefs),void t.remove(this.dlgDiv);this.dlgObj.show();le(this.parent.element,this.dlgObj.element.parentElement)},r.prototype.renderCustomFilter=function(n,t){var i=this.dlgObj.element.querySelector(".e-xlfl-maindiv"),u=this.parent.createElement("div",{innerHTML:this.getLocalizedLabel("ShowRowsWhere"),className:"e-xlfl-dlgfields"}),r;i.appendChild(u);r=this.parent.createElement("div",{innerHTML:this.options.displayName,className:"e-xlfl-fieldset"});i.appendChild(r);this.renderFilterUI(t,i)},r.prototype.filterBtnClick=function(n){var r,f=!t.isNullOrUndefined(n)&&gi(n),e=!t.isNullOrUndefined(n)&&vt(n),i=f?e:n,o=this.dlgDiv.querySelector("#"+i+"-xlfl-frstvalue").ej2_instances[0],s=this.dlgDiv.querySelector("#"+i+"-xlfl-frstoptr").ej2_instances[0],h=this.dlgDiv.querySelector("#"+i+"-xlfl-secndvalue").ej2_instances[0],c=this.dlgDiv.querySelector("#"+i+"-xlfl-secndoptr").ej2_instances[0],u;"string"===this.options.type&&(r=this.dlgDiv.querySelector("#"+i+"-xlflmtcase").ej2_instances[0].checked);u=this.dlgDiv.querySelector("#"+i+"e-xlfl-frstpredicate").ej2_instances[0].checked?"and":"or";this.filterByColumn(this.options.field,s.value,o.value,u,r,this.options.ignoreAccent,c.value,h.value);this.removeDialog()},r.prototype.filterByColumn=function(n,i,r,f,e,o,s,h){var c,y=this.parent.getColumnByField?this.parent.getColumnByField(n):this.options.column,v=this.isForeignColumn(y)?y.foreignKeyValue:n,l=[],a={instance:this,handler:this.filterByColumn,arg1:n,arg2:i,arg3:r,arg4:f,arg5:e,arg6:o,arg7:s,arg8:h,cancel:!1},p;(this.parent.notify(ro,a),a.cancel)||(l.push({field:v,predicate:f,matchCase:e,ignoreAccent:o,operator:i,value:a.arg3,type:this.options.type}),c=new u.Predicate(v,i.toLowerCase(),a.arg3,!e,o),t.isNullOrUndefined(s)||(l.push({field:v,predicate:f,matchCase:e,ignoreAccent:o,operator:s,value:a.arg8,type:this.options.type}),c=c[""+f](v,s.toLowerCase(),h,!e,o)),p={action:"filtering",filterCollection:l,field:this.options.field,ejpredicate:c,actualPredicate:l},this.isForeignColumn(y)?this.foreignKeyFilter(p,l,c):this.options.handler(p))},r.prototype.renderOperatorUI=function(n,i,r,u,f){var c=this.parent.createElement("tr",{className:"e-xlfl-fields",attrs:{role:"row"}}),l,y,a,o,h,p,s,w;i.appendChild(c);l=this.parent.createElement("td",{className:"e-xlfl-optr"});c.appendChild(l);var v=this.parent.createElement("div",{className:"e-xlfl-optrdiv"}),b=!t.isNullOrUndefined(n)&&gi(n),k=!t.isNullOrUndefined(n)&&vt(n),e=this.parent.createElement("input",{id:b?k+r:n+r});return v.appendChild(e),l.appendChild(v),y=this.options.type+"Operator",a=this.customFilterOperators[""+y],this.optrData=a,o=this.dropSelectedVal(this.options.column,u,f),h="",this.menuItem&&((h=this.menuItem.text.slice(0,-3))!==this.getLocalizedLabel("CustomFilter")&&(o=f?h:void 0),h===this.getLocalizedLabel("Between")&&(o=this.getLocalizedLabel(f?"GreaterThanOrEqual":"LessThanOrEqual"))),p=this.options.column,s=new gt.DropDownList(ff({dataSource:a,fields:{text:"text",value:"value"},text:o,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:null},p.filter.params)),this.childRefs.unshift(s),w={open:this.dropDownOpen.bind(this),change:this.dropDownValueChange.bind(this)},ok(e.id,[dt,te],w,this),s.addEventListener(dt,this.eventHandlers[e.id][dt]),s.addEventListener(te,this.eventHandlers[e.id][te]),s.appendTo(e),{fieldElement:c,operator:this.getSelectedValue(o)}},r.prototype.removeHandlersFromComponent=function(n){n.element.classList.contains("e-dropdownlist")?sk(n,[dt,te],this):n.element.classList.contains("e-autocomplete")&&sk(n,[s,ie],this)},r.prototype.dropDownOpen=function(n){n.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},r.prototype.dropDownValueChange=function(n){n.element.id.includes("-xlfl-frstoptr")?this.firstOperator=n.value.toString():this.secondOperator=n.value.toString();var r=n.element.closest(".e-xlfl-fields").children[1].querySelector(".e-control"),i=n.element.ej2_instances[0];"isempty"===i.value||"isnotempty"===i.value||"isnull"===i.value||"isnotnull"===i.value?r.ej2_instances[0].enabled=!1:t.isNullOrUndefined(r.getAttribute("disabled"))||(r.ej2_instances[0].enabled=!0)},r.prototype.getFilterUIInfo=function(){return{firstOperator:this.firstOperator,secondOperator:this.secondOperator,field:this.options.field}},r.prototype.getSelectedValue=function(n){var i=new u.DataManager(this.optrData).executeLocal((new u.Query).where("text","equal",n));return t.isNullOrUndefined(i[0])?"":i[0].value},r.prototype.dropSelectedVal=function(n,t,i){var r;return r=t&&t.length>0?2===t.length?i?t[0].operator:t[1].operator:i?t[0].operator:void 0:i&&"string"===n.type&&!n.filter.operator?"startswith":i?n.filter.operator||"equal":void 0,this.getSelectedText(r)},r.prototype.getSelectedText=function(n){var i=new u.DataManager(this.optrData).executeLocal((new u.Query).where("value","equal",n));return t.isNullOrUndefined(i[0])?"":i[0].text},r.prototype.renderFilterUI=function(n,t){var r=this.existingPredicate[""+n],u=this.parent.createElement("table",{className:"e-xlfl-table",attrs:{role:"grid"}}),f,i,e;t.appendChild(u);f=this.parent.createElement(hi);f.innerHTML='<col style="width: 50%"><\/col><col style="width: 50%"><\/col>';u.appendChild(f);i=this.renderOperatorUI(n,u,"-xlfl-frstoptr",r,!0);this.firstOperator=i.operator;this.renderFlValueUI(n,i,"-xlfl-frstvalue",r,!0);e=this.parent.createElement("tr",{className:"e-xlfl-predicate",attrs:{role:"row"}});u.appendChild(e);this.renderRadioButton(n,e,r);i=this.renderOperatorUI(n,u,"-xlfl-secndoptr",r,!1);this.secondOperator=i.operator;this.renderFlValueUI(n,i,"-xlfl-secndvalue",r,!1)},r.prototype.renderRadioButton=function(n,i,r){var o=this.parent.createElement("td",{className:"e-xlfl-radio",attrs:{colSpan:"2"}}),e,u,f;i.appendChild(o);e=this.parent.createElement("div",{className:"e-xlfl-radiodiv"});e.style.display="inline-block";var s=!t.isNullOrUndefined(n)&&gi(n),h=!t.isNullOrUndefined(n)&&vt(n),c=this.parent.createElement("input",{id:s?h+"e-xlfl-frstpredicate":n+"e-xlfl-frstpredicate",attrs:{type:"radio"}}),l=this.parent.createElement("input",{id:s?h+"e-xlfl-secndpredicate":n+"e-xlfl-secndpredicate",attrs:{type:"radio"}});e.appendChild(c);e.appendChild(l);o.appendChild(e);"string"===this.options.type&&this.renderMatchCase(n,i,o,"-xlflmtcase",r);u=new ri.RadioButton({label:this.getLocalizedLabel("AND"),name:"default",checked:!0,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:""});this.childRefs.unshift(u);f=new ri.RadioButton({label:this.getLocalizedLabel("OR"),name:"default",enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:""});this.childRefs.unshift(f);"and"===(r&&2===r.length?r[1].predicate:"and")?(u.checked=!0,f.checked=!1):(f.checked=!0,u.checked=!1);u.appendTo(c);f.appendTo(l);u.element.nextElementSibling.classList.add("e-xlfl-radio-and");f.element.nextElementSibling.classList.add("e-xlfl-radio-or")},r.prototype.removeObjects=function(n){for(var t,i=0,r=n;i<r.length;i++)t=r[i],t&&!t.isDestroyed&&(this.removeHandlersFromComponent(t),t.destroy())},r.prototype.renderFlValueUI=function(n,i,r,u,f){var h=this.parent.createElement("td",{className:"e-xlfl-value"}),o,v,k,y,s,c;i.fieldElement.appendChild(h);var l=!t.isNullOrUndefined(n)&&gi(n),a=!t.isNullOrUndefined(n)&&vt(n),e=this.parent.createElement("div",{className:"e-xlfl-valuediv"}),d=this.options.filteredColumns.some(function(t){return n===t.field}),g=this.options.filteredColumns.filter(function(t){return t.field===n});if(this.options.column.filterTemplate){o={};v=this.options.column;d&&r&&(o=this.getExcelFilterData(r,o,v,u,g));var p=this.parent.isReact&&"string"!=typeof this.options.column.filterTemplate&&!(this.options.column.filterTemplate.prototype&&this.options.column.filterTemplate.prototype.CSPTemplate),w=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,b=this.parent.element.id+v.uid+"filterTemplate";p||w?this.options.column.getFilterTemplate()(o,this.parent,"filterTemplate",b,null,null,e):(k=this.options.column.getFilterTemplate()(o,this.parent,"filterTemplate",b,null,null,null,this.parent.root),nt(e,k));p||w?this.parent.renderTemplates(function(){e.querySelector("input").id=l?a+r:n+r;h.appendChild(e)}):((this.parent.isAngular?e.children[0]:e.querySelector("input")).id=l?a+r:n+r,h.appendChild(e))}else y=this.parent.createElement("input",{id:l?a+r:n+r}),e.appendChild(y),h.appendChild(e),s=void 0,c=void 0,u&&u.length>0&&(s=(c=2===u.length?f?u[0]:u[1]:f?u[0]:void 0)&&c.operator===i.operator?c.value:void 0,t.isNullOrUndefined(s)&&(s=void 0)),{string:this.renderAutoComplete.bind(this),number:this.renderNumericTextBox.bind(this),date:this.renderDate.bind(this),dateonly:this.renderDate.bind(this),datetime:this.renderDateTime.bind(this)}[this.options.type](this.options,n,y,s,this.parent.enableRtl)},r.prototype.getExcelFilterData=function(n,t,i,r,u){var e="-xlfl-frstvalue"===n?0:1,f;return("-xlfl-frstvalue"===n||u.length>1)&&(t={column:r instanceof Array?r[parseInt(e.toString(),10)]:r},f=this.options.column.columnData&&u.length>1?1===this.options.column.columnData.length?0:1:e,t[this.options.field]=i.foreignKeyValue?this.options.column.columnData[parseInt(f.toString(),10)][i.foreignKeyValue]:u[parseInt(f.toString(),10)].value,this.options.foreignKeyValue&&(t[this.options.foreignKeyValue]=this.options.column.columnData[parseInt(f.toString(),10)][i.foreignKeyValue])),t},r.prototype.renderMatchCase=function(n,i,r,u,f){var e=this.parent.createElement("div",{className:"e-xlfl-matchcasediv"}),h,o;e.style.display="inline-block";var c=!t.isNullOrUndefined(n)&&gi(n),l=!t.isNullOrUndefined(n)&&vt(n),s=this.parent.createElement("input",{id:c?l+u:n+u,attrs:{type:"checkbox"}});e.appendChild(s);r.appendChild(e);h=!!(f&&f.length>0)&&(f&&2===f.length?f[1].matchCase:f[0].matchCase);o=new ri.CheckBox({label:this.getLocalizedLabel("MatchCase"),enableRtl:this.parent.enableRtl,checked:h,cssClass:this.parent.cssClass?this.parent.cssClass:""});this.childRefs.unshift(o);o.appendTo(s)},r.prototype.renderDate=function(n,t,i,r,u){var e=nc(n.format,n.type)||n.format,f=new pu.DatePicker(ff({format:e,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:u,value:new Date(r),locale:this.parent.locale},n.column.filter.params));this.childRefs.unshift(f);f.appendTo(i)},r.prototype.renderDateTime=function(n,t,i,r,u){var e=nc(n.format,n.type),f=new pu.DateTimePicker(ff({format:e,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:u,value:new Date(r),locale:this.parent.locale},n.column.filter.params));this.childRefs.unshift(f);f.appendTo(i)},r.prototype.completeAction=function(n){n.result=krt(n.result)},r.prototype.renderNumericTextBox=function(n,t,i,r,u){var f=new pr.NumericTextBox(ff({format:n.format,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:u,value:r,locale:this.parent.locale,cssClass:this.parent.cssClass?this.parent.cssClass:null},n.column.filter.params));this.childRefs.unshift(f);f.appendTo(i)},r.prototype.renderAutoComplete=function(n,t,i,r,f){var h=this.options.column,l=this.isForeignColumn(h),o=l?h.dataSource:n.dataSource,v={value:l?h.foreignKeyValue:t},e=new gt.AutoComplete(ff({dataSource:o instanceof u.DataManager?o:new u.DataManager(o),fields:v,query:this.getQuery(),sortOrder:"Ascending",locale:this.parent.locale,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",autofill:!0,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:f,text:r},h.filter.params)),c,a;o&&"result"in o&&(c=fc({requestType:"stringfilterrequest"},this.getQuery()),this.parent.trigger(kf,c.state),c.deffered.promise.then(function(n){e.dataSource=new u.DataManager(n)}));this.childRefs.unshift(e);a={actionComplete:this.acActionComplete(e,t),focus:this.acFocus(e,t,n,i)};ok(i.id,[s,ie],a,this);e.addEventListener(ie,this.eventHandlers[i.id][ie]);e.addEventListener(s,this.eventHandlers[i.id][s]);e.appendTo(i)},r.prototype.acActionComplete=function(n,i){return function(r){var u=!t.isNullOrUndefined(i)&&gi(i);r.result=r.result.filter(function(t,i,r){return r.map(function(t){return u?cy(n.fields.value,t):t[n.fields.value]}).indexOf(u?cy(n.fields.value,t):t[n.fields.value])===i})}},r.prototype.acFocus=function(n,i,r,u){var f=this;return function(){var o=!t.isNullOrUndefined(i)&&gi(i),s=!t.isNullOrUndefined(i)&&vt(i),e=o?s:i;n.filterType=f.dlgDiv.querySelector("#"+e+(u.id===e+"-xlfl-frstvalue"?"-xlfl-frstoptr":"-xlfl-secndoptr")).ej2_instances[0].value;n.ignoreCase="string"!==r.type||!f.dlgDiv.querySelector("#"+e+"-xlflmtcase").ej2_instances[0].checked;n.filterType=t.isNullOrUndefined(n.filterType)?"equal":n.filterType}},r}(tu),is=function(){function n(n,t,i,r){this.contentRefresh=!0;this.isModelChanged=!0;this.aria=new yh;this.currentTarget=null;this.parent=n;this.sortSettings=t;this.sortedColumns=i;this.serviceLocator=r;this.focus=r.getService("focus");this.addEventListener();this.setFullScreenDialog()}return n.prototype.updateModel=function(){var f,r={field:this.columnName,direction:this.direction},n=this.parent.groupSettings.columns,e=!1,u;if(this.isMultiSort)(f=this.getSortedColsIndexByField(this.columnName))>-1&&this.sortSettings.columns.splice(f,1),this.sortSettings.columns.push(r),this.sortSettings.columns=this.sortSettings.columns;else if(n.length){for(var t=[],i=0,o=n.length;i<o;i++)(f=this.getSortedColsIndexByField(n[parseInt(i.toString(),10)],t),this.columnName===n[parseInt(i.toString(),10)])?(e=!0,t.push(r)):(u=this.getSortColumnFromField(n[parseInt(i.toString(),10)]),t.push({field:u.field,direction:u.direction,isFromGroup:u.isFromGroup}));e||t.push(r);this.sortSettings.columns=t}else this.sortSettings.columns=[r];this.parent.dataBind();this.lastSortedCol=this.columnName},n.prototype.onActionComplete=function(n){var i=this.isRemove?{requestType:"sorting",type:s}:{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:s};this.isRemove=!1;this.parent.trigger(s,t.extend(n,i))},n.prototype.sortColumn=function(n,t,i){var r=this.parent;!1===this.parent.getColumnByField(n).allowSorting||this.parent.isContextMenuOpen()?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:n}):(r.allowMultiSorting||(i=r.allowMultiSorting),this.isActionPrevent()?r.notify(si,{instance:this,handler:this.sortColumn,arg1:n,arg2:t,arg3:i}):(this.backupSettings(),this.columnName=n,this.direction=t,this.isMultiSort=i,this.removeSortIcons(),this.updateSortedCols(n,i),this.updateModel()))},n.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,a.isSort)},n.prototype.backupSettings=function(){this.lastSortedCols=lo(this.sortSettings.columns);this.lastCols=this.sortedColumns},n.prototype.restoreSettings=function(){this.isModelChanged=!1;this.isMultiSort=!0;this.parent.setProperties({sortSettings:{columns:this.lastSortedCols}},!0);this.sortedColumns=this.lastCols;this.isModelChanged=!0},n.prototype.updateSortedCols=function(n,t){if(!t)if(this.parent.allowGrouping)for(var i=0,r=this.sortedColumns.length;i<r;i++)this.parent.groupSettings.columns.indexOf(this.sortedColumns[parseInt(i.toString(),10)])<0&&(this.sortedColumns.splice(i,1),r--,i--);else this.sortedColumns.splice(0,this.sortedColumns.length);this.sortedColumns.indexOf(n)<0&&this.sortedColumns.push(n)},n.prototype.onPropertyChanged=function(n){if(n.module===this.getModuleName()){if(this.contentRefresh){var t=this.sortSettings.columns.length?{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:p,target:this.currentTarget,cancel:!1}:{requestType:"sorting",type:p,cancel:!1,target:this.currentTarget};this.parent.notify(ot,t)}this.refreshSortSettings();this.removeSortIcons();this.addSortIcons()}},n.prototype.refreshSortSettings=function(){this.sortedColumns.length=0;for(var t=this.sortSettings.columns,n=0;n<t.length;n++)t[parseInt(n.toString(),10)].isFromGroup||this.sortedColumns.push(t[parseInt(n.toString(),10)].field)},n.prototype.clearSorting=function(){var t=bv(this.sortSettings.columns),n,i;if(this.isActionPrevent())this.parent.notify(si,{instance:this,handler:this.clearSorting});else for(n=0,i=t.length;n<i;n++)this.removeSortColumn(t[parseInt(n.toString(),10)].field)},n.prototype.isActionPrevent=function(){return rr(this.parent)},n.prototype.removeSortColumn=function(n){var r=this.parent,t=this.sortSettings.columns;if(!(0===t.length&&this.sortedColumns.indexOf(n)<0))if(this.isActionPrevent())this.parent.notify(si,{instance:this,handler:this.removeSortColumn,arg1:n});else{this.backupSettings();this.removeSortIcons();for(var u={requestType:"sorting",type:p,target:this.currentTarget},i=0,f=t.length;i<f;i++)if(t[parseInt(i.toString(),10)].field===n){if(r.allowGrouping&&r.groupSettings.columns.indexOf(t[parseInt(i.toString(),10)].field)>-1)continue;this.sortedColumns.splice(this.sortedColumns.indexOf(t[parseInt(i.toString(),10)].field),1);t.splice(i,1);this.isRemove=!0;this.isModelChanged&&this.parent.notify(ot,u);break}u.cancel||this.addSortIcons()}},n.prototype.getSortedColsIndexByField=function(n,t){for(var r=t||this.sortSettings.columns,i=0,u=r.length;i<u;i++)if(r[parseInt(i.toString(),10)].field===n)return i;return-1},n.prototype.getModuleName=function(){return"sort"},n.prototype.initialEnd=function(){var r,n,i,t;if(this.parent.off(k,this.initialEnd),this.parent.getColumns().length&&this.sortSettings.columns.length){for(r=this.parent,this.contentRefresh=!1,this.isMultiSort=this.sortSettings.columns.length>1,n=0,i=r.sortSettings.columns.slice();n<i.length;n++)t=i[n],this.sortedColumns.indexOf(t.field)>-1&&this.sortColumn(t.field,t.direction,!0);this.isMultiSort=!1;this.contentRefresh=!0}},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:vr,handler:this.setFullScreenDialog},{event:ei,handler:this.renderResponsiveChangeAction},{event:k,handler:this.initialEnd},{event:fl,handler:this.onActionComplete},{event:wt,handler:this.onPropertyChanged},{event:kt,handler:this.clickHandler},{event:bt,handler:this.refreshSortIcons},{event:rt,handler:this.keyPressed},{event:vs,handler:this.cancelBeginEvent},{event:l,handler:this.destroy}],yt(this.parent,this.evtHandlers,!0,this),t.EventHandler.add(document.body,"click",this.excelFilterSortAction,this),t.EventHandler.add(document.body,"touchend",this.excelFilterSortAction,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(yt(this.parent,this.evtHandlers,!1),t.EventHandler.remove(document.body,"click",this.excelFilterSortAction),t.EventHandler.remove(document.body,"touchend",this.excelFilterSortAction))},n.prototype.excelFilterSortAction=function(n){var t=i(n.target,"e-grid-popup"),r=this.parent.element.id+"_e-popup";t&&t.id===r&&i(n.target,"e-excelfilter")&&this.excelFilterSortActionHandler(n)},n.prototype.destroy=function(){this.isModelChanged=!1;var n=this.parent.element;n&&(n.querySelector("."+st)||n.querySelector("."+it))&&(this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-sortdirect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none"),this.parent.refreshing||!this.parent.isDestroyed&&this.parent.allowSorting||this.clearSorting(),this.isModelChanged=!0,this.removeEventListener())},n.prototype.cancelBeginEvent=function(n){"sorting"===n.requestType&&(this.restoreSettings(),this.refreshSortIcons(),this.isMultiSort=!0)},n.prototype.clickHandler=function(n){var f=this.parent,r,u;this.currentTarget=null;this.popUpClickHandler(n);r=t.closest(n.target,".e-headercell");!r||n.target.classList.contains("e-grptogglebtn")||r.classList.contains("e-resized")||n.target.classList.contains("e-rhandler")||n.target.classList.contains("e-columnmenu")||n.target.classList.contains("e-filtermenudiv")||i(n.target,"e-stackedheadercell")||f.allowSelection&&f.selectionSettings.allowColumnSelection&&n.target.classList.contains("e-headercell")||(u=this.parent.getColumnByUid(r.querySelector(".e-headercelldiv").getAttribute("data-mappinguid")),"checkbox"!==u.type&&(this.initiateSort(r,n,u),t.Browser.isDevice&&this.showPopUp(n)));r&&r.classList.remove("e-resized");this.excelFilterSortActionHandler(n)},n.prototype.excelFilterSortActionHandler=function(n){if(i(n.target,"e-excel-ascending")||i(n.target,"e-excel-descending")){var r=t.closest(n.target,".e-filter-popup").getAttribute("data-uid"),u=t.isNullOrUndefined(i(n.target,"e-excel-descending"))?"Ascending":"Descending";this.sortColumn(this.parent.getColumnByUid(r).field,u,!1)}},n.prototype.keyPressed=function(n){var u=n.target,i,r;if(!this.parent.isEdit&&("enter"===n.action||"ctrlEnter"===n.action||"shiftEnter"===n.action)&&t.closest(u,".e-headercell")){if(i=this.focus.getFocusedElement(),t.isNullOrUndefined(i)||!i.classList.contains("e-headercell")||!i.querySelector(".e-headercelldiv"))return;r=this.parent.getColumnByUid(i.querySelector(".e-headercelldiv").getAttribute("data-mappinguid"));this.initiateSort(i,n,r)}},n.prototype.initiateSort=function(n,t,i){var f=this.parent,r=i.field,u;this.currentTarget=t.target;u=n.getElementsByClassName("e-ascending").length?"Descending":"Ascending";this.isMultiSort=t.ctrlKey||this.enableSortMultiTouch||-1!==navigator.userAgent.indexOf("Mac OS")&&t.metaKey;t.shiftKey||this.sortSettings.allowUnsort&&n.getElementsByClassName("e-descending").length&&!(f.groupSettings.columns.indexOf(r)>-1)?this.removeSortColumn(r):this.sortColumn(r,u,this.isMultiSort)},n.prototype.showPopUp=function(n){var i=t.closest(n.target,".e-headercell");this.parent.allowMultiSorting&&(!t.isNullOrUndefined(i)||this.parent.isContextMenuOpen())&&pb(this.parent.element.querySelector(".e-gridpopup"),n,"e-sortdirect e-icons e-icon-sortdirect"+(this.sortedColumns.length>1?" e-spanclicked":""))},n.prototype.popUpClickHandler=function(n){var i=n.target;t.closest(i,".e-headercell")||n.target.classList.contains(v)||t.closest(i,".e-gridpopup")?i.classList.contains("e-sortdirect")&&(i.classList.contains("e-spanclicked")?(i.classList.remove("e-spanclicked"),this.enableSortMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(i.classList.add("e-spanclicked"),this.enableSortMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},n.prototype.addSortIcons=function(){for(var i,u,f=this.parent,r=this.sortSettings.columns,e=this.parent.getColumns().map(function(n){return n.field}),n=0,o=r.length;n<o;n++)i=f.getColumnHeaderByField(r[parseInt(n.toString(),10)].field),-1===e.indexOf(r[parseInt(n.toString(),10)].field)||t.isNullOrUndefined(i)||(this.aria.setSort(i,r[parseInt(n.toString(),10)].direction.toLowerCase()),r.length>1&&i.querySelector(".e-headercelldiv").insertBefore(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(n+1).toString()}),i.querySelector(".e-headertext")),u=i.querySelector(".e-sortfilterdiv"),"Ascending"===r[parseInt(n.toString(),10)].direction?t.classList(u,["e-ascending","e-icon-ascending"],[]):t.classList(u,["e-descending","e-icon-descending"],[]))},n.prototype.removeSortIcons=function(n){for(var i,f=this.parent,u=this.sortSettings.columns,e=this.parent.getColumns().map(function(n){return n.field}),r=n||0,o=t.isNullOrUndefined(n)?u.length:n+1;r<o;r++)i=f.getColumnHeaderByField(u[parseInt(r.toString(),10)].field),t.isNullOrUndefined(i)||f.allowGrouping&&f.groupSettings.columns.indexOf(u[parseInt(r.toString(),10)].field)>-1&&!i.querySelector(".e-sortfilterdiv")||-1!==e.indexOf(u[parseInt(r.toString(),10)].field)&&(this.aria.setSort(i,"none"),t.classList(i.querySelector(".e-sortfilterdiv"),[],["e-descending","e-icon-descending","e-ascending","e-icon-ascending"]),i.querySelector(".e-sortnumber")&&i.querySelector(".e-headercelldiv").removeChild(i.querySelector(".e-sortnumber")))},n.prototype.getSortColumnFromField=function(n){for(var t=0,i=this.sortSettings.columns.length;t<i;t++)if(this.sortSettings.columns[parseInt(t.toString(),10)].field===n)return this.sortSettings.columns[parseInt(t.toString(),10)];return!1},n.prototype.updateAriaAttr=function(){for(var n,r,u=this.parent.getColumns().map(function(n){return n.field}),t=0,i=this.sortedColumns;t<i.length;t++)n=i[t],-1!==u.indexOf(n)&&(r=this.parent.getColumnHeaderByField(n),this.aria.setSort(r,this.getSortColumnFromField(n).direction))},n.prototype.refreshSortIcons=function(){this.removeSortIcons();this.isMultiSort=!0;this.removeSortIcons();this.addSortIcons();this.isMultiSort=!1;this.updateAriaAttr()},n.prototype.renderResponsiveChangeAction=function(n){this.responsiveDialogRenderer.action=n.action},n.prototype.showCustomSort=function(n){this.responsiveDialogRenderer.isCustomDialog=n;this.responsiveDialogRenderer.showResponsiveDialog()},n}(),lut=function(){function n(n){this.pagerModule=n}return n.prototype.render=function(){this.pagerElement=this.pagerModule.element;this.renderNumericContainer();this.refreshNumericLinks();this.wireEvents()},n.prototype.refresh=function(){this.pagerModule.updateTotalPages();this.links.length&&this.updateLinksHtml();this.refreshAriaAttrLabel();this.updateStyles()},n.prototype.refreshNumericLinks=function(){var r,n=this.pagerModule,u=n.element.querySelector(".e-numericcontainer"),f=document.createDocumentFragment(),i;for(u.innerHTML="",i=1;i<=n.pageCount;i++)r=t.createElement("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{tabindex:"-1","aria-label":n.getLocalizedLabel("Page")+i+n.getLocalizedLabel("Of")+n.totalPages+n.getLocalizedLabel("Pages"),href:"#"}}),n.currentPage===i&&(t.classList(r,["e-currentitem","e-active"],["e-pager-default"]),r.setAttribute("aria-current","page")),f.appendChild(r);u.appendChild(f);this.links=[].slice.call(u.childNodes)},n.prototype.wireEvents=function(){t.EventHandler.add(this.pagerElement,"click",this.clickHandler,this);t.EventHandler.add(this.pagerElement,"auxclick",this.auxiliaryClickHandler,this)},n.prototype.unwireEvents=function(){t.EventHandler.remove(this.pagerModule.element,"click",this.clickHandler);t.EventHandler.remove(this.pagerModule.element,"auxclick",this.auxiliaryClickHandler)},n.prototype.destroy=function(){this.unwireEvents()},n.prototype.refreshAriaAttrLabel=function(){for(var t=this.pagerModule,i=t.element.querySelector(".e-numericcontainer").querySelectorAll("a"),n=0;n<i.length;n++)i[parseInt(n.toString(),10)].hasAttribute("aria-label")&&i[parseInt(n.toString(),10)].hasAttribute("data-index")&&i[parseInt(n.toString(),10)].setAttribute("aria-label",t.getLocalizedLabel("Page")+i[parseInt(n.toString(),10)].getAttribute("data-index")+t.getLocalizedLabel("Of")+t.totalPages+t.getLocalizedLabel("Pages"))},n.prototype.renderNumericContainer=function(){this.element=t.createElement("div",{className:"e-pagercontainer",attrs:{role:"navigation"}});this.renderFirstNPrev(this.element);this.renderPrevPagerSet(this.element);this.element.appendChild(t.createElement("div",{className:"e-numericcontainer"}));this.renderNextPagerSet(this.element);this.renderNextNLast(this.element);this.pagerModule.element.appendChild(this.element)},n.prototype.renderFirstNPrev=function(n){this.first=t.createElement("div",{className:"e-first e-icons e-icon-first",attrs:{title:this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1",role:"button"}});this.prev=t.createElement("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1",role:"button"}});t.append([this.first,this.prev],n)},n.prototype.renderPrevPagerSet=function(n){var i=t.createElement("div");this.PP=t.createElement("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",href:"#"}});i.appendChild(this.PP);n.appendChild(i)},n.prototype.renderNextPagerSet=function(n){var i=t.createElement("div");this.NP=t.createElement("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",href:"#"}});i.appendChild(this.NP);n.appendChild(i)},n.prototype.renderNextNLast=function(n){this.next=t.createElement("div",{className:"e-next e-icons e-icon-next",attrs:{title:this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1",role:"button"}});this.last=t.createElement("div",{className:"e-last e-icons e-icon-last",attrs:{title:this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1",role:"button"}});t.append([this.next,this.last],n)},n.prototype.clickHandler=function(n){var i=this.pagerModule;return this.target=n.target,this.target.classList.contains("e-numericitem")&&n.preventDefault(),i.previousPageNo=i.currentPage,this.target.classList.contains("e-disable")||t.isNullOrUndefined(this.target.getAttribute("data-index"))||(i.currentPage=parseInt(this.target.getAttribute("data-index"),10),this.pagerModule.isInteracted=!0,i.dataBind()),!1},n.prototype.auxiliaryClickHandler=function(n){this.target=n.target;this.target.classList.contains("e-numericitem")&&1===n.button&&n.preventDefault()},n.prototype.updateLinksHtml=function(){var e,c,f,n=this.pagerModule,r=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),i,u,b,h,k;for(n.currentPage=1===n.totalPages?1:n.currentPage,n.currentPage>n.totalPages&&n.totalPages&&(n.currentPage=n.totalPages),e=parseInt((n.currentPage/n.pageCount).toString(),10),n.currentPage%n.pageCount==0&&e>0&&(e-=1),i=0;i<n.pageCount;i++){if(n.isPagerResized){var d=this.pagerElement.querySelector(".e-focus"),l=this.target?this.target:d||null,o=!1,a=!1,v=!1,s=!1,y=!1,p=!1,w=!1;if(l)if(u=l.classList,u.contains("e-icons"))switch(!0){case u.contains("e-prev"):o=!0;break;case u.contains("e-next"):a=!0;break;case u.contains("e-first"):v=!0;break;case u.contains("e-last"):s=!0}else if(u.contains("e-numericitem"))switch(!0){case u.contains("e-np"):p=!0;break;case u.contains("e-pp"):w=!0;break;default:y=u.contains("e-numericitem")}c=s||"End"===this.pagerModule.keyAction;r=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');b=Array.from(r).some(function(t){return parseInt(t.getAttribute("data-index"),10)===n.currentPage});f=v||"Home"===this.pagerModule.keyAction?1+i:s||"End"===this.pagerModule.keyAction?e*n.pageCount+1+i:a||"ArrowRight"===this.pagerModule.keyAction||o||"ArrowLeft"===this.pagerModule.keyAction?b?parseInt(r[0].getAttribute("data-index"),10)+i:o||"ArrowLeft"===this.pagerModule.keyAction?parseInt(this.PP.getAttribute("data-index"),10)+i:n.currentPage+i:p||w?n.currentPage+i:y?parseInt(r[0].getAttribute("data-index"),10)+i:e*n.pageCount+1+i}else f=e*n.pageCount+1+i;f<=n.totalPages?(this.links[parseInt(i.toString(),10)].classList.remove("e-hide"),this.links[parseInt(i.toString(),10)].style.display="",this.links[parseInt(i.toString(),10)].setAttribute("data-index",f.toString()),this.links[parseInt(i.toString(),10)].innerHTML=n.customText?n.customText+f:f.toString(),n.currentPage!==f?this.links[parseInt(i.toString(),10)].classList.add("e-pager-default"):this.links[parseInt(i.toString(),10)].classList.remove("e-pager-default")):(this.links[parseInt(i.toString(),10)].innerHTML=n.customText?n.customText+f:f.toString(),this.links[parseInt(i.toString(),10)].style.display="none");t.classList(this.links[parseInt(i.toString(),10)],[],["e-currentitem","e-active"]);this.links[parseInt(i.toString(),10)].removeAttribute("aria-current")}t.attributes(this.first,{"data-index":"1",title:this.pagerModule.getLocalizedLabel("firstPageTooltip")});t.attributes(this.pagerElement.querySelector(".e-mfirst"),{"data-index":"1",title:this.pagerModule.getLocalizedLabel("firstPageTooltip")});t.attributes(this.last,{"data-index":n.totalPages.toString(),title:this.pagerModule.getLocalizedLabel("lastPageTooltip")});t.attributes(this.pagerElement.querySelector(".e-mlast"),{"data-index":n.totalPages.toString(),title:this.pagerModule.getLocalizedLabel("lastPageTooltip")});t.attributes(this.prev,{"data-index":(n.currentPage-1).toString(),title:this.pagerModule.getLocalizedLabel("previousPageTooltip")});t.attributes(this.pagerElement.querySelector(".e-mprev"),{"data-index":(n.currentPage-1).toString(),title:this.pagerModule.getLocalizedLabel("previousPageTooltip")});t.attributes(this.next,{"data-index":(n.currentPage+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPageTooltip")});t.attributes(this.pagerElement.querySelector(".e-mnext"),{"data-index":(n.currentPage+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPageTooltip")});h=this.pagerModule.isPagerResized&&r.length?c?parseInt(r[0].getAttribute("data-index"),10)-n.avgNumItems:parseInt(r[0].getAttribute("data-index"),10)-r.length:parseInt(this.links[0].getAttribute("data-index"),10)-n.pageCount;t.attributes(this.PP,{"data-index":h<1?"1":h.toString(),title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip")});k=this.pagerModule.isPagerResized&&r.length?parseInt(r[r.length-1].getAttribute("data-index"),10):parseInt(this.links[this.links.length-1].getAttribute("data-index"),10);t.attributes(this.NP,{"data-index":(k+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip")});this.target=void 0},n.prototype.updateStyles=function(){var r=this,i,n;(this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length)&&(i=this.links.findIndex(function(n){return n.getAttribute("data-index")===r.pagerModule.currentPage.toString()}),n=this.pagerModule.isPagerResized&&-1!==i?i:(this.pagerModule.currentPage-1)%this.pagerModule.pageCount,this.links[parseInt(n.toString(),10)]&&(t.classList(this.links[parseInt(n.toString(),10)],["e-currentitem","e-active"],[]),this.links[parseInt(n.toString(),10)].setAttribute("aria-current","page")))},n.prototype.updateFirstNPrevStyles=function(){var n=["e-firstpage","e-pager-default"],i=["e-firstpagedisabled","e-disable"],r=["e-prevpage","e-pager-default"],u=["e-prevpagedisabled","e-disable"];this.pagerModule.totalPages>0&&this.pagerModule.currentPage>1?(t.classList(this.prev,r,u),t.classList(this.first,n,i),t.classList(this.pagerElement.querySelector(".e-mfirst"),n,i),t.classList(this.pagerElement.querySelector(".e-mprev"),r,u)):(t.classList(this.prev,u,r),t.classList(this.first,i,n),t.classList(this.pagerElement.querySelector(".e-mprev"),u,r),t.classList(this.pagerElement.querySelector(".e-mfirst"),i,n))},n.prototype.updatePrevPagerSetStyles=function(){this.pagerModule.currentPage>this.pagerModule.pageCount||this.pagerModule.isPagerResized&&this.links.findIndex(function(n){return 1===parseInt(n.getAttribute("data-index"),10)})?t.classList(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):t.classList(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])},n.prototype.updateNextPagerSetStyles=function(){var n=this.pagerModule,i=this.links[0].innerHTML.replace(n.customText,""),r=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');!i.length||!this.links.length||parseInt(i,10)+n.pageCount>n.totalPages||n.isPagerResized&&Array.from(r).some(function(t){return parseInt(t.getAttribute("data-index"),10)===n.totalPages})?t.classList(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):t.classList(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])},n.prototype.updateNextNLastStyles=function(){var n=["e-lastpage","e-pager-default"],i=["e-lastpagedisabled","e-disable"],r=["e-nextpage","e-pager-default"],u=["e-nextpagedisabled","e-disable"],f=this.pagerModule;f.currentPage===f.totalPages||0===f.totalRecordsCount?(t.classList(this.last,i,n),t.classList(this.next,u,r),t.classList(this.pagerElement.querySelector(".e-mlast"),i,n),t.classList(this.pagerElement.querySelector(".e-mnext"),u,r)):(t.classList(this.last,n,i),t.classList(this.next,r,u),t.classList(this.pagerElement.querySelector(".e-mlast"),n,i),t.classList(this.pagerElement.querySelector(".e-mnext"),r,u))},n}(),aut=function(){function n(n){this.pagerModule=n}return n.prototype.render=function(){var n=t.createElement("div",{className:"e-parentmsgbar"});this.pageNoMsgElem=t.createElement("span",{className:"e-pagenomsg"});this.pageNoMsgElem.style.textAlign="right";this.pageCountMsgElem=t.createElement("span",{className:"e-pagecountmsg"});this.pageCountMsgElem.style.textAlign="right";t.append([this.pageNoMsgElem,this.pageCountMsgElem],n);this.pagerModule.element.appendChild(n);this.refresh()},n.prototype.refresh=function(){var n=this.pagerModule;this.pageNoMsgElem.textContent=this.format(n.getLocalizedLabel("currentPageInfo"),[0===n.totalRecordsCount?0:n.currentPage,n.totalPages||0,n.totalRecordsCount||0])+" ";this.pageCountMsgElem.textContent=this.format(n.getLocalizedLabel(n.totalRecordsCount<=1?"totalItemInfo":"totalItemsInfo"),[n.totalRecordsCount||0,n.totalRecordsCount?n.pageSize*(n.currentPage-1)+1:0,n.pageSize*n.currentPage>n.totalRecordsCount?n.totalRecordsCount:n.pageSize*n.currentPage]);this.pageNoMsgElem.parentElement.classList.remove("e-hide")},n.prototype.hideMessage=function(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none");this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")},n.prototype.showMessage=function(){this.pageNoMsgElem||this.render();this.pageNoMsgElem.style.display="";this.pageCountMsgElem.style.display=""},n.prototype.destroy=function(){},n.prototype.format=function(n,t){for(var r,u=RegExp,i=0;i<t.length;i++)r=new u("\\{"+i+"\\}","gm"),n=this.isValidLocale(this.pagerModule.locale)?n.replace(r,t[parseInt(i.toString(),10)].toLocaleString(this.pagerModule.locale)):n.replace(r,t[parseInt(i.toString(),10)].toString());return n},n.prototype.isValidLocale=function(n){try{return new Intl.NumberFormat(n),!0}catch(n){return!1}},n}(),lht=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),li=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},ck=function(n){function r(t,i,r){var u=n.call(this,t,i)||this;return u.hasParent=!1,u.checkAll=!0,u.pageRefresh="pager-refresh",u.firstPagerFocus=!1,u.isCancel=!1,u.isInteracted=!1,u.parent=r,u}return lht(r,n),r.prototype.requiredModules=function(){var n=[];return this.enableExternalMessage&&n.push({member:"externalMessage",args:[this],name:"ExternalMessage"}),this.checkpagesizes()&&n.push({member:"pagerdropdown",args:[this],name:"PagerDropDown"}),n},r.prototype.preRender=function(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",totalItemInfo:"({0} item)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager items",previousPagerTooltip:"Go to previous pager items",pagerDropDown:"Items per page",pagerAllDropDown:"Items",CurrentPageInfo:"{0} of {1} pages",TotalItemsInfo:"({0} items)",FirstPageTooltip:"Go to first page",LastPageTooltip:"Go to last page",NextPageTooltip:"Go to next page",PreviousPageTooltip:"Go to previous page",NextPagerTooltip:"Go to next pager items",PreviousPagerTooltip:"Go to previous pager items",PagerDropDown:"Items per page",PagerAllDropDown:"Items",All:"All",Container:"Pager Container",Information:"Pager Information",ExternalMsg:"Pager external message",Page:"Page ",Of:" of ",Pages:" Pages"};this.containerModule=new lut(this);this.pagerMessageModule=new aut(this)},r.prototype.render=function(){var n,i;(this.element.setAttribute("data-role","pager"),this.element.setAttribute("tabindex","-1"),this.initLocalization(),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&this.element.classList.add("e-mac-safari"),this.cssClass&&(-1!==this.cssClass.indexOf(" ")?t.addClass([this.element],this.cssClass.split(" ")):t.addClass([this.element],[this.cssClass])),this.hasParent||this.element.setAttribute("tabindex","0"),this.enableQueryString)&&(n=new URL(window.location.href).searchParams.get("page"),!t.isNullOrUndefined(n)&&window.location.href.indexOf("?page=")>0&&(i=parseInt(n,10),this.hasParent&&this.parent.setProperties({pageSettings:{currentPage:i}},!0),this.currentPage=i));this.template?this.isReactTemplate()?(this.on(this.pageRefresh,this.pagerTemplate,this),this.notify(this.pageRefresh,{})):this.pagerTemplate():(this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount}));this.wireEvents();this.addListener()},r.prototype.getPersistData=function(){return this.addOnPersist(["currentPage","pageSize"])},r.prototype.destroy=function(){this.isDestroyed||(this.isReactTemplate()&&(this.off(this.pageRefresh,this.pagerTemplate),this.hasParent||this.destroyTemplate(["pagerTemplate"])),this.removeListener(),this.unwireEvents(),n.prototype.destroy.call(this),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.isReactTemplate()||(this.element.innerHTML=""))},r.prototype.destroyTemplate=function(n,t){this.clearTemplate(n,t)},r.prototype.getModuleName=function(){return"pager"},r.prototype.onPropertyChanged=function(n,t){if(!this.isDestroyed)if(n.pageSize!==this.getLocalizedLabel("All")||t.pageSize!==this.totalRecordsCount){n.pageCount!==t.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(var i=0,r=Object.keys(n);i<r.length;i++)switch(r[i]){case"currentPage":this.checkGoToPage(n.currentPage,t.currentPage)&&this.currentPageChanged(n,t);break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&(t.pageSize!==n.pageSize&&(this.currentPage=1),this.pagerdropdownModule.setDropDownValue("value",this.pageSize));n.pageSize!==t.pageSize?(this.pageSize=n.pageSize,this.currentPageChanged(n,t),this.isCancel&&this.hasParent&&this.parent.setProperties({pageSettings:{pageSize:t.pageSize}},!0)):this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render());this.refresh();break;case"template":this.templateFn=this.compile(this.template);this.refresh();break;case"locale":this.initLocalization();this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage()}this.resizePager()}else this.pageSize=this.totalRecordsCount},r.prototype.wireEvents=function(){this.hasParent||(t.EventHandler.add(this.element,"keydown",this.keyPressHandler,this),t.EventHandler.add(document.body,"keydown",this.keyDownHandler,this));t.EventHandler.add(this.element,"focusin",this.onFocusIn,this);t.EventHandler.add(this.element,"focusout",this.onFocusOut,this);t.EventHandler.add(window,"resize",this.resizePager,this);t.EventHandler.add(window,"load",this.resizePager,this)},r.prototype.unwireEvents=function(){this.hasParent||(t.EventHandler.remove(this.element,"keydown",this.keyPressHandler),t.EventHandler.remove(document.body,"keydown",this.keyDownHandler));t.EventHandler.remove(this.element,"focusin",this.onFocusIn);t.EventHandler.remove(this.element,"focusout",this.onFocusOut);t.EventHandler.remove(window,"resize",this.resizePager);t.EventHandler.remove(window,"load",this.resizePager)},r.prototype.onFocusIn=function(n){var f=this.getFocusedTabindexElement(),i,r,u;if(t.isNullOrUndefined(f)){if(i=n.target,r=this.getDropDownPage(),this.hasParent||(this.element.tabIndex=-1),i===this.element&&!this.hasParent)return u=this.getFocusablePagerElements(this.element,[]),void this.addFocus(u[0],!0);if(i===this.element)return void(this.element.tabIndex=0);i===r||i.classList.contains("e-disable")||this.addFocus(i,!0)}},r.prototype.onFocusOut=function(){var i=this.getFocusedElement(),n=this.getDropDownPage();t.isNullOrUndefined(i)||this.removeFocus(i,!0);this.pageSizes&&n&&n.classList.contains("e-input-focus")&&this.removeFocus(n,!0);this.setTabIndexForFocusLastElement();this.hasParent||(this.element.tabIndex=0);this.hasParent&&(this.element.tabIndex=-1)},r.prototype.keyDownHandler=function(n){if(n.altKey&&74===n.keyCode){var t=this.getFocusablePagerElements(this.element,[]);t.length>0&&t[0].focus()}},r.prototype.keyPressHandler=function(n){var i=t.extend(n,{cancel:!1});this.notify(rt,i);!0===i.cancel&&n.stopImmediatePropagation()},r.prototype.addListener=function(){this.isDestroyed||this.hasParent||this.on(rt,this.onKeyPress,this)},r.prototype.removeListener=function(){this.isDestroyed||this.hasParent||this.off(rt,this.onKeyPress)},r.prototype.onKeyPress=function(n){this.hasParent||(this.checkPagerHasFocus()?this.changePagerFocus(n):(n.preventDefault(),this.setPagerFocus()))},r.prototype.checkPagerHasFocus=function(){return!!this.getFocusedTabindexElement()},r.prototype.setPagerContainerFocus=function(){this.element.focus()},r.prototype.setPagerFocus=function(){var n=this.getFocusablePagerElements(this.element,[]);n.length>0&&n[0].focus()},r.prototype.setPagerFocusForActiveElement=function(){var n=this.getActiveElement();n&&n.focus()},r.prototype.setTabIndexForFocusLastElement=function(){var n=this.getFocusablePagerElements(this.element,[]),i=this.getDropDownPage();this.pageSizes&&i&&!t.isNullOrUndefined(i.offsetParent)?i.tabIndex=0:n.length>0&&(n[n.length-1].tabIndex=0)},r.prototype.changePagerFocus=function(n){this.keyAction=n.key;n.shiftKey&&9===n.keyCode?this.changeFocusByShiftTab(n):9===n.keyCode?this.changeFocusByTab(n):13===n.keyCode||32===n.keyCode?this.navigateToPageByEnterOrSpace(n):37!==n.keyCode&&39!==n.keyCode&&35!==n.keyCode&&36!==n.keyCode||this.navigateToPageByKey(n);this.keyAction=""},r.prototype.getFocusedTabindexElement=function(){for(var r,n,i=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])'),t=0;t<i.length;t++)if(n=i[parseInt(t.toString(),10)],n&&(n.classList.contains("e-focused")||n.classList.contains("e-input-focus"))){r=n;break}return r},r.prototype.changeFocusByTab=function(n){var u=this.getFocusedTabindexElement(),t=this.getFocusablePagerElements(this.element,[]),f=this.getDropDownPage(),i,r;if(t.length>0)if(this.pageSizes&&f&&u===t[t.length-1])f.tabIndex=0;else for(i=0;i<t.length;i++)if(u===t[parseInt(i.toString(),10)]){r=i+1;r<t.length&&(n.preventDefault(),t[parseInt(r.toString(),10)].focus());break}},r.prototype.changeFocusByShiftTab=function(n){var o=this.getFocusedTabindexElement(),t=this.getFocusablePagerElements(this.element,[]),r=this.getDropDownPage(),i,u,f,e;if(this.pageSizes&&r&&r.classList.contains("e-input-focus"))r.tabIndex=-1,this.addFocus(t[t.length-1],!0);else if(t.length>0)for(i=0;i<t.length;i++)if(o===t[parseInt(i.toString(),10)]){u=i-1;u>=0?(n.preventDefault(),t[parseInt(u.toString(),10)].focus()):this.hasParent&&(f=this.parent.getRows(),e=f[f.length-1].lastChild,n.preventDefault(),e.focus(),this.firstPagerFocus=!0);break}},r.prototype.checkFirstPagerFocus=function(){return!!this.firstPagerFocus&&(this.firstPagerFocus=!1,!0)},r.prototype.navigateToPageByEnterOrSpace=function(){var t=this.getFocusedElement();if(t){this.goToPage(parseInt(t.getAttribute("data-index"),10));var r=this.getActiveElement(),n=this.getClass(t),i=this.getElementByClass(n);"e-first"!==n&&"e-prev"!==n&&"e-next"!==n&&"e-last"!==n&&"e-pp"!==n&&"e-np"!==n||!i||i.classList.contains("e-disable")?this.checkFocusInAdaptiveMode(t)?this.changeFocusInAdaptiveMode(t):r&&r.focus():i.focus()}},r.prototype.navigateToPageByKey=function(n){var f=37===n.keyCode?".e-prev":39===n.keyCode?".e-next":35===n.keyCode?".e-last":36===n.keyCode?".e-first":"",i=this.element.querySelector(f),u=this.getFocusedElement(),r;t.isNullOrUndefined(i)||!i.hasAttribute("data-index")||isNaN(parseInt(i.getAttribute("data-index"),10))||(this.goToPage(parseInt(i.getAttribute("data-index"),10)),r=this.getActiveElement(),this.checkFocusInAdaptiveMode(u)?this.changeFocusInAdaptiveMode(u):r&&r.focus())},r.prototype.checkFocusInAdaptiveMode=function(n){var t=this.getClass(n);return"e-mfirst"===t||"e-mprev"===t||"e-mnext"===t||"e-mlast"===t},r.prototype.changeFocusInAdaptiveMode=function(n){var t=this.getClass(n),i=this.getElementByClass(t);i&&i.classList.contains("e-disable")&&("e-mnext"===t||"e-mlast"===t?this.element.querySelector(".e-mprev").focus():this.setPagerFocus())},r.prototype.removeTabindexLastElements=function(){var t=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])'),n,i;if(t.length>1)for(n=1;n<t.length;n++)i=t[parseInt(n.toString(),10)],i&&(i.tabIndex=-1)},r.prototype.getActiveElement=function(){return this.element.querySelector(".e-active")},r.prototype.getDropDownPage=function(){var n,t=this.element.querySelector(".e-pagerdropdown");return t&&(n=t.children[0]),n},r.prototype.getFocusedElement=function(){return this.element.querySelector(".e-focused")},r.prototype.getClass=function(n){for(var r,i=["e-mfirst","e-mprev","e-first","e-prev","e-pp","e-np","e-next","e-last","e-mnext","e-mlast"],t=0;t<i.length;t++)if(n&&n.classList.contains(i[parseInt(t.toString(),10)]))return i[parseInt(t.toString(),10)];return r},r.prototype.getElementByClass=function(n){return this.element.querySelector("."+n)},r.prototype.getFocusablePagerElements=function(n,i){for(var r,o,e=n.children,u=i,f=0;f<e.length;f++)r=e[parseInt(f.toString(),10)],r.children.length>0&&!r.classList.contains("e-pagesizes")?u=this.getFocusablePagerElements(r,u):(o=e[parseInt(f.toString(),10)],!o.hasAttribute("tabindex")||r.classList.contains("e-disable")||"none"===r.style.display||t.isNullOrUndefined(r.offsetParent)||u.push(o));return u},r.prototype.addFocus=function(n,i){t.isNullOrUndefined(n)||(i&&t.addClass([n],["e-focused","e-focus"]),n.tabIndex=0)},r.prototype.removeFocus=function(n,i){i&&t.removeClass([n],["e-focused","e-focus"]);n.tabIndex=-1},r.prototype.getLocalizedLabel=function(n){return this.localeObj.getConstant(n)},r.prototype.goToPage=function(n){this.checkGoToPage(n)&&(this.currentPage=n,this.isInteracted=!1,this.dataBind())},r.prototype.setPageSize=function(n){this.pageSize=n;this.dataBind()},r.prototype.checkpagesizes=function(){return!(!0!==this.pageSizes&&!this.pageSizes.length)},r.prototype.checkGoToPage=function(n,i){return n!==this.currentPage&&(this.previousPageNo=this.currentPage),t.isNullOrUndefined(i)||(this.previousPageNo=i),this.previousPageNo!==n&&n>=1&&n<=this.totalPages},r.prototype.currentPageChanged=function(n,t){if(this.enableQueryString&&this.updateQueryString(this.currentPage),n.currentPage!==t.currentPage||n.pageSize!==t.pageSize){var i={currentPage:this.currentPage,newProp:n,oldProp:t,cancel:!1,isInteracted:this.isInteracted};this.trigger("click",i);i.cancel?(this.isCancel=!0,t&&t.pageSize&&(this.setProperties({pageSize:t.pageSize},!0),this.pagerdropdownModule&&(this.pagerdropdownModule.setDropDownValue("value",t.pageSize),this.pagerdropdownModule.dropDownListObject.text=t.pageSize+""))):(this.isCancel=!1,this.refresh())}},r.prototype.pagerTemplate=function(){var t,n,i;this.isReactTemplate()&&this.hasParent||(this.element.classList.add("e-pagertemplate"),this.compile(this.template),n={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages},i=this.element.parentElement.id+"_template",this.isReactTemplate()&&!this.isVue?(this.getPagerTemplate()(n,this,"pagerTemplate",i,null,null,this.element),this.renderReactTemplates()):(t=this.isVue?this.getPagerTemplate()(n,this,"pagerTemplate",null,null,null,null,this.root):this.getPagerTemplate()(n),nt(this.element,t)))},r.prototype.updateTotalPages=function(){this.totalPages=this.isAllPage?1:this.totalRecordsCount%this.pageSize==0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1},r.prototype.getPagerTemplate=function(){return this.templateFn},r.prototype.compile=function(n){if(n)try{this.templateFn="function"==typeof n?t.compile(n):document.querySelectorAll(n).length?t.compile(document.querySelector(n).innerHTML.trim()):t.compile(n)}catch(i){this.templateFn=t.compile(n)}},r.prototype.refresh=function(){if(this.template)this.isReactTemplate()?(this.updateTotalPages(),this.notify(this.pageRefresh,{})):(this.parent&&this.parent.isAngular?this.parent.destroyTemplate(["pagerTemplate"]):this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate());else{this.updateRTL();var n=this.getFocusedTabindexElement();this.containerModule.refresh();this.removeTabindexLastElements();n&&n.classList.contains("e-disable")&&(this.checkFocusInAdaptiveMode(n)?this.changeFocusInAdaptiveMode(n):this.setPagerFocusForActiveElement());this.enablePagerMessage&&this.pagerMessageModule.refresh();this.pagerdropdownModule&&this.pagerdropdownModule.refresh();this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh();this.setTabIndexForFocusLastElement();this.resizePager()}},r.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},r.prototype.initLocalization=function(){this.localeObj=new t.L10n(this.getModuleName(),this.defaultConstants,this.locale)},r.prototype.updateQueryString=function(n){var t=this.getUpdatedURL(window.location.href,"page",n.toString());window.history.pushState({path:t},"",t);this.isReact&&window.dispatchEvent(new PopStateEvent("popstate"))},r.prototype.getUpdatedURL=function(n,t,i){var u=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i"),r;return n.match(u)?n.replace(u,"$1"+t+"="+i+"$2"):(r="",-1!==n.indexOf("#")&&(r=n.replace(/.*#/,"#"),n=n.replace(/#.*/,"")),n+(-1!==n.indexOf("?")?"&":"?")+t+"="+i+r)},r.prototype.renderFirstPrevDivForDevice=function(){this.element.appendChild(t.createElement("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}}));this.element.appendChild(t.createElement("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))},r.prototype.renderNextLastDivForDevice=function(){this.element.appendChild(t.createElement("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}}));this.element.appendChild(t.createElement("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))},r.prototype.addAriaLabel=function(){var r=[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"],n,i;if(!t.Browser.isDevice)for(n=0;n<r.length;n++)i=this.element.querySelector(r[parseInt(n.toString(),10)]),i.setAttribute("aria-label",i.getAttribute("title"))},r.prototype.isReactTemplate=function(){return(this.isReact||this.isVue)&&this.template&&"string"!=typeof this.template&&!(this.template.prototype&&this.template.prototype.CSPTemplate)},r.prototype.calculateActualWidth=function(){for(var i,t=this.element.querySelectorAll(".e-mfirst, .e-mprev, .e-icon-first, .e-icon-prev, .e-pp:not(.e-disable), .e-numericitem:not(.e-hide), .e-numericitem.e-active.e-hide, .e-np:not(.e-disable), .e-icon-next, .e-icon-last, .e-parentmsgbar, .e-mnext, .e-mlast, .e-pagerdropdown, .e-pagerconstant"),r=0,n=0;n<t.length;n++)"none"!==getComputedStyle(t[parseInt(n.toString(),10)]).display&&(r+=t[parseInt(n.toString(),10)].offsetWidth+parseFloat(getComputedStyle(t[parseInt(n.toString(),10)]).marginLeft)+parseFloat(getComputedStyle(t[parseInt(n.toString(),10)]).marginRight));return i=this.element.querySelector(".e-pagercontainer"),r+(parseFloat(getComputedStyle(i).marginLeft)+parseFloat(getComputedStyle(i).marginRight))},r.prototype.resizePager=function(){var k=this,st=this.element.classList.contains("e-pager")?getComputedStyle(this.element).getPropertyValue("border-style").includes("solid"):null,tt,r,a,o,s,h,it,v,y,p,b,rt,ut;if(!this.template&&st){var f=this.element.querySelector(".e-pagercontainer"),c=this.calculateActualWidth(),e=this.element.clientWidth-parseFloat(getComputedStyle(this.element).paddingLeft)-parseFloat(getComputedStyle(this.element).paddingRight)-parseFloat(getComputedStyle(this.element).marginLeft)-parseFloat(getComputedStyle(this.element).marginRight),n=f.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),l=f.querySelectorAll('.e-numericitem.e-hide:not([style*="display: none"])'),ht=n.length,ft=t.isNullOrUndefined(i(this.element,"e-bigger"))?5:10,d=f.querySelector(".e-np"),g=f.querySelector(".e-pp"),u=this.element.querySelectorAll('.e-parentmsgbar:not(.e-hide):not([style*="display: none"]), .e-pagesizes:not(.e-hide):not([style*="display: none"])'),nt=0;for(u.length&&(u.forEach(function(n){nt+=n.offsetWidth}),this.averageDetailWidth=nt/u.length),tt=0,r=0;r<n.length;r++)tt+=n[parseInt(r.toString(),10)].offsetWidth+parseFloat(getComputedStyle(n[parseInt(r.toString(),10)]).marginLeft)+parseFloat(getComputedStyle(n[parseInt(r.toString(),10)]).marginRight);if(a=tt/n.length,e>0&&c>=e-(a||0)){for(this.isPagerResized=!0,this.currentPage!==this.totalPages&&t.classList(d,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]),c=this.calculateActualWidth(),o=Math.abs(c-e),s=Math.ceil(o/a),s=0===s?1:s>n.length?n.length-1:s,r=1;r<=s;r++)h=ht-parseInt(r.toString(),10),n=f.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),1===this.currentPage||parseInt(n[Math.abs(h)].getAttribute("data-index"),10)!==this.currentPage&&parseInt(n[n.length-1].getAttribute("data-index"),10)!==this.currentPage||(h=0,t.classList(g,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])),n[Math.abs(h)]&&!n[Math.abs(h)].classList.contains("e-currentitem")&&n[Math.abs(h)].classList.add("e-hide");if((n=f.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)')).length<=1&&u.length&&window.innerWidth>=768&&(it=this.calculateActualWidth(),it>e-ft))for(v=Math.floor((e-(it-nt))/this.averageDetailWidth),v=u.length-v,r=0;r<(v>u.length?u.length:v);r++)u[parseInt(r.toString(),10)].classList.add("e-hide")}else if(c<e&&l.length&&(o=Math.abs(e-c),y=this.element.querySelectorAll(".e-parentmsgbar.e-hide, .e-pagesizes.e-hide"),y.length&&o>this.averageDetailWidth+this.averageDetailWidth/4&&y[y.length-1].classList.remove("e-hide"),o>2*a&&!y.length&&window.innerWidth>=768)){p=Math.floor(o/(a+ft));p=p>l.length?l.length:p-1;var et=Array.from(l).filter(function(n){return parseInt(n.getAttribute("data-index"),10)<k.currentPage}).sort(function(n,t){return parseInt(t.getAttribute("data-index"),10)-parseInt(n.getAttribute("data-index"),10)}),ot=Array.from(l).filter(function(n){return parseInt(n.getAttribute("data-index"),10)>k.currentPage}),w=et.length&&et||ot.length&&ot;for(r=1;r<=p;r++)b=w&&w[Math.abs(1-r)],b&&(b.classList.remove("e-hide"),b===w[w.length-1]&&(w=null))}(n=f.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)')).length&&(parseInt(n[n.length-1].getAttribute("data-index"),10)===this.totalPages&&t.classList(d,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]),1===parseInt(n[0].getAttribute("data-index"),10)&&t.classList(g,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]),rt=Array.from(n).some(function(n){return parseInt(n.getAttribute("data-index"),10)===k.totalPages}),ut=parseInt(n[0].getAttribute("data-index"),10)-(rt&&!t.isNullOrUndefined(this.avgNumItems)?this.avgNumItems:n.length),g.setAttribute("data-index",ut<1?"1":ut.toString()),d.setAttribute("data-index",(parseInt(n[n.length-1].getAttribute("data-index"),10)+1).toString()),this.avgNumItems=rt?this.avgNumItems:n.length);this.element.offsetWidth<769&&"none"!==window.getComputedStyle(this.element.querySelector(".e-mfirst")).getPropertyValue("display")&&this.pageSizes?(this.element.querySelector(".e-pagesizes").classList.remove("e-hide"),this.element.querySelector(".e-parentmsgbar").classList.remove("e-hide"),this.element.classList.add("e-adaptive"),this.element.querySelector(".e-pagenomsg").innerHTML=this.element.offsetWidth<481?this.currentPage+" / "+this.totalPages:this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"),[0===this.totalRecordsCount?0:this.currentPage,this.totalPages||0,this.totalRecordsCount||0])+" "):(this.element.classList.remove("e-adaptive"),this.element.querySelector(".e-pagenomsg").innerHTML=this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"),[0===this.totalRecordsCount?0:this.currentPage,this.totalPages||0,this.totalRecordsCount||0])+" ")}},li([t.Property(!1)],r.prototype,"enableQueryString",void 0),li([t.Property(!1)],r.prototype,"enableExternalMessage",void 0),li([t.Property(!0)],r.prototype,"enablePagerMessage",void 0),li([t.Property(12)],r.prototype,"pageSize",void 0),li([t.Property(10)],r.prototype,"pageCount",void 0),li([t.Property(1)],r.prototype,"currentPage",void 0),li([t.Property()],r.prototype,"totalRecordsCount",void 0),li([t.Property()],r.prototype,"externalMessage",void 0),li([t.Property(!1)],r.prototype,"pageSizes",void 0),li([t.Property()],r.prototype,"template",void 0),li([t.Property("")],r.prototype,"customText",void 0),li([t.Event()],r.prototype,"click",void 0),li([t.Property("")],r.prototype,"cssClass",void 0),li([t.Event()],r.prototype,"dropDownChanged",void 0),li([t.Event()],r.prototype,"created",void 0),li([t.NotifyPropertyChanges],r)}(t.Component),vut=function(){function n(n){this.pagerModule=n}return n.prototype.getModuleName=function(){return"pagerdropdown"},n.prototype.render=function(){var n=this.pagerModule;this.pagerDropDownDiv=t.createElement("div",{className:"e-pagesizes"});var u=t.createElement("div",{className:"e-pagerdropdown"}),f=t.createElement("div",{className:"e-pagerconstant"}),e=t.createElement("input",{attrs:{type:"text",tabindex:"-1"}});this.pagerCons=t.createElement("span",{className:"e-constant",innerHTML:this.pagerModule.getLocalizedLabel("pagerDropDown")});u.appendChild(e);f.appendChild(this.pagerCons);this.pagerDropDownDiv.appendChild(u);this.pagerDropDownDiv.appendChild(f);this.pagerModule.element.appendChild(this.pagerDropDownDiv);var i=this.pagerModule.pageSizes,o=i.length?this.convertValue(i):[this.pagerModule.getLocalizedLabel("All"),"5","10","12","20"],r=this.pagerModule.pageSize;this.dropDownListObject=new gt.DropDownList({dataSource:o,value:r.toString(),change:this.onChange.bind(this),placeholder:this.pagerModule.getLocalizedLabel("pagerDropDown"),cssClass:this.pagerModule.cssClass?"e-alldrop "+this.pagerModule.cssClass:"e-alldrop"});this.dropDownListObject.appendTo(e);i.length&&(this.dropDownListObject.element.value=this.pagerModule.pageSize.toString());n.pageSize=r;n.dataBind();n.trigger("dropDownChanged",{pageSize:r});this.addEventListener()},n.prototype.onChange=function(n){this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?(this.pagerModule.pageSize=this.pagerModule.totalRecordsCount,this.pagerModule.isAllPage=!0,this.refresh(),n.value=this.pagerModule.pageSize,document.getElementsByClassName("e-popup-open e-alldrop").length&&(document.getElementsByClassName("e-popup-open e-alldrop")[0].style.display="none")):(this.pagerModule.pageSize=parseInt(this.dropDownListObject.value,10),this.pagerModule.isAllPage=!1,this.pagerCons.innerHTML!==this.pagerModule.getLocalizedLabel("pagerDropDown")&&this.refresh());this.pagerModule.dataBind();this.pagerModule.isCancel||this.pagerModule.trigger("dropDownChanged",{pageSize:this.pagerModule.isAllPage||void 0===this.pagerModule.isAllPage&&this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?this.pagerModule.totalRecordsCount:parseInt(this.dropDownListObject.value,10)})},n.prototype.refresh=function(){this.pagerCons&&(this.isPageSizeAll(this.pagerModule.pageSize)?(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel("pagerAllDropDown"),this.pagerCons.parentElement.classList.add("e-page-all")):(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel("pagerDropDown"),this.pagerCons.parentElement.classList.remove("e-page-all")),this.pagerDropDownDiv.classList.remove("e-hide"))},n.prototype.beforeValueChange=function(n){if("number"==typeof n.newProp.value){var t=n.newProp.value.toString();n.newProp.value=t}},n.prototype.convertValue=function(n){for(var t=n,i=0;i<t.length;i++)t[parseInt(i.toString(),10)]=parseInt(t[parseInt(i.toString(),10)],10)?t[parseInt(i.toString(),10)].toString():""!==this.pagerModule.getLocalizedLabel(t[parseInt(i.toString(),10)])?this.pagerModule.getLocalizedLabel(t[parseInt(i.toString(),10)]):t[parseInt(i.toString(),10)];return t},n.prototype.isPageSizeAll=function(n){return("string"==typeof n&&n!==this.pagerModule.getLocalizedLabel("All")?parseInt(n,10):n)===this.pagerModule.totalRecordsCount||n===this.pagerModule.getLocalizedLabel("All")},n.prototype.setDropDownValue=function(n,t){if(this.dropDownListObject){var i=this.pagerModule.isAllPage;this.pagerModule.isAllPage=this.isPageSizeAll(t);this.pagerModule.isAllPage&&"object"==typeof this.pagerModule.pageSizes&&-1===this.pagerModule.pageSizes.indexOf("All")&&(this.pagerModule.isAllPage=!1);this.pagerModule.checkAll=!(!i||!this.pagerModule.isAllPage);this.dropDownListObject[""+n]=this.pagerModule.isAllPage?this.pagerModule.getLocalizedLabel("All"):t}},n.prototype.addEventListener=function(){this.dropDownListObject.on("beforeValueChange",this.beforeValueChange,this)},n.prototype.removeEventListener=function(){this.dropDownListObject.off("beforeValueChange",this.beforeValueChange)},n.prototype.destroy=function(){this.dropDownListObject&&!this.dropDownListObject.isDestroyed&&(this.removeEventListener(),this.dropDownListObject.destroy(),this.pagerDropDownDiv&&this.pagerDropDownDiv.parentNode&&t.remove(this.pagerDropDownDiv))},n}(),yut=function(){function n(n){this.pagerModule=n}return n.prototype.getModuleName=function(){return"externalMessage"},n.prototype.render=function(){this.element=t.createElement("div",{className:"e-pagerexternalmsg",attrs:{"aria-label":this.pagerModule.getLocalizedLabel("ExternalMsg")}});this.pagerModule.element.appendChild(this.element);this.refresh()},n.prototype.refresh=function(){this.pagerModule.externalMessage&&this.pagerModule.externalMessage.toString().length?(this.showMessage(),this.element.innerHTML=this.pagerModule.externalMessage):this.hideMessage()},n.prototype.hideMessage=function(){t.isNullOrUndefined(this.element)||(this.element.style.display="none")},n.prototype.showMessage=function(){this.element.style.display=""},n.prototype.destroy=function(){this.element&&this.element.parentElement&&t.remove(this.element)},n}(),hc=function(){function n(n,t){this.isInitialRender=!0;this.isCancel=!1;ck.Inject(yut,vut);this.parent=n;this.pageSettings=t;this.addEventListener()}return n.prototype.getModuleName=function(){return"pager"},n.prototype.render=function(){var n=this.parent,i;this.pagerDestroy();t.isNullOrUndefined(this.parent.pagerTemplate)||(this.pageSettings.template=this.parent.pagerTemplate,this.parent.pageTemplateChange=!0);this.element=this.parent.createElement("div",{className:"e-gridpager"});i=ff({},t.extend({},ao(this.pageSettings)),{click:this.clickHandler.bind(this),dropDownChanged:this.onSelect.bind(this),enableRtl:n.enableRtl,locale:n.locale,created:this.addAriaAttr.bind(this)},["parentObj","propName"]);i.cssClass=this.parent.cssClass?this.parent.cssClass:"";this.pagerObj=new ck(i,void 0,this.parent);this.pagerObj.root=n.root?n.root:n;this.pagerObj.hasParent=!0;this.pagerObj.on(bw,this.renderReactPagerTemplate,this);this.pagerObj.allowServerDataBinding=!1},n.prototype.onSelect=function(n){this.pageSettings.pageSize=n.pageSize;this.isInitialLoad||(this.pageSettings.currentPage=1)},n.prototype.addAriaAttr=function(){var t;if(!this.pageSettings.template){this.parent.getContentTable()&&this.element.setAttribute("aria-controls",this.parent.getContentTable().id);for(var i=this.parent.createElement("div",{className:"e-numericcontainer"}),e=this.element.querySelector(".e-pagercontainer"),r=document.createDocumentFragment(),u=this.element.querySelector(".e-numericcontainer"),f=u.querySelectorAll("a"),n=0;n<f.length;n++)t=this.parent.createElement("div"),t.appendChild(f[parseInt(n.toString(),10)]),r.appendChild(t);i.appendChild(r);e.replaceChild(i,u)}},n.prototype.dataReady=function(n){this.updateModel(n)},n.prototype.refresh=function(){this.pagerObj.refresh()},n.prototype.goToPage=function(n){this.pagerObj.goToPage(n)},n.prototype.setPageSize=function(n){this.pagerObj.setPageSize(n)},n.prototype.updateModel=function(n){this.parent.pageSettings.totalRecordsCount=n.count;var t="add"===n.action&&"save"===n.requestType||"batchsave"===n.requestType;this.pagerObj.isAllPage&&!t&&(this.parent.pageSettings.pageSize=this.parent.pageSettings.totalRecordsCount);t&&this.pagerObj.isAllPage&&n.count===this.pageSettings.pageSize&&this.pagerObj.setProperties({pageSize:n.count},!0);this.parent.dataBind()},n.prototype.onActionComplete=function(n){this.parent.trigger(s,t.extend(n,{currentPage:this.parent.pageSettings.currentPage,requestType:"paging",type:s}))},n.prototype.onPropertyChanged=function(n){var i;if(n.module===this.getModuleName()){for(var r=n.properties,t=0,u=Object.keys(r);t<u.length;t++)i=u[t],this.pagerObj[""+i]=r[""+i];this.pagerObj.dataBind()}},n.prototype.clickHandler=function(n){var i=this.parent,r,u;if(this.isForceCancel||rr(i)&&!i.prevPageMoving&&!this.isCancel)return this.isForceCancel?this.isForceCancel=!1:(t.isNullOrUndefined(n.newProp)||t.isNullOrUndefined(n.newProp.pageSize)?n.currentPage&&(i.notify(si,{instance:this,handler:this.goToPage,arg1:n.currentPage}),this.pagerObj.currentPage=i.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:i.pageSettings.currentPage):(i.notify(si,{instance:this,handler:this.setPageSize,arg1:n.newProp.pageSize}),this.pagerObj.setProperties({pageSize:n.oldProp.pageSize},!0),this.parent.setProperties({pageSettings:{pageSize:n.oldProp.pageSize}},!0),this.pagerObj.setProperties({currentPage:i.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:i.pageSettings.currentPage},!0)),this.isForceCancel=!0,this.pagerObj.dataBind()),void(n.cancel=!0);if(i.pageSettings.pageSize=this.pagerObj.pageSize,i.prevPageMoving=!1,r=this.pageSettings.currentPage,u={cancel:!1,requestType:"paging",previousPage:r,currentPage:n.currentPage,pageSize:i.pageSettings.pageSize,type:p},this.isCancel||(this.pageSettings.currentPage=n.currentPage,this.parent.notify(ot,u),i.pageRequireRefresh=!1),u.cancel)return n.cancel=!0,this.parent.setProperties({pageSettings:{currentPage:r}},!0),this.pagerObj.setProperties({currentPage:r},!0),void(this.isCancel=!0);this.isCancel=!1;this.parent.requestTypeAction="paging"},n.prototype.keyPressHandler=function(n){if(n.action in put){n.preventDefault();var t=this.element.querySelector(put[n.action]);t.classList.contains("e-nextprevitemdisabled")||t.click()}},n.prototype.updateExternalMessage=function(n){this.pagerObj.enableExternalMessage||(this.pagerObj.enableExternalMessage=!0,this.pagerObj.dataBind());this.pagerObj.externalMessage=n;this.pagerObj.dataBind()},n.prototype.appendToElement=function(){this.isInitialLoad=!0;this.parent.element.appendChild(this.element);this.parent.setGridPager(this.element);this.pagerObj.isReact=this.parent.isReact;this.pagerObj.isVue=this.parent.isVue||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isVue;this.pagerObj.appendTo(this.element);this.isInitialLoad=!1},n.prototype.enableAfterRender=function(n){n.module===this.getModuleName()&&n.enable&&(this.render(),this.appendToElement(),this.isReactTemplate()&&(this.pagerObj.updateTotalPages(),this.created()))},n.prototype.addEventListener=function(){this.handlers={load:this.render,end:this.appendToElement,ready:this.dataReady,complete:this.onActionComplete,updateLayout:this.enableAfterRender,inboundChange:this.onPropertyChanged,keyPress:this.keyPressHandler,created:this.created};this.parent.isDestroyed||((this.parent.isReact||this.parent.isVue)&&this.parent.addEventListener(sh,this.handlers.created.bind(this)),this.evtHandlers=[{event:or,handler:this.handlers.load},{event:pt,handler:this.handlers.end},{event:wi,handler:this.handlers.ready},{event:lg,handler:this.handlers.complete},{event:w,handler:this.handlers.updateLayout},{event:wt,handler:this.handlers.inboundChange},{event:rt,handler:this.handlers.keyPress},{event:l,handler:this.destroy}],yt(this.parent,this.evtHandlers,!0,this))},n.prototype.created=function(){this.isInitialRender&&this.isReactTemplate()&&(this.isInitialRender=!1,this.renderReactPagerTemplate())},n.prototype.isReactTemplate=function(){return(this.parent.isReact||this.parent.isVue)&&this.pagerObj.template&&"string"!=typeof this.pagerObj.template},n.prototype.renderReactPagerTemplate=function(){var t;if(!this.isInitialRender&&this.isReactTemplate()){t=void 0;this.parent.destroyTemplate(["pagerTemplate"]);this.element.classList.add("e-pagertemplate");this.pagerObj.compile(this.pagerObj.template);var n=this.parent.pageSettings,i={currentPage:n.currentPage,pageSize:n.pageSize,pageCount:n.pageCount,totalRecordsCount:n.totalRecordsCount,totalPages:this.pagerObj.totalPages},r=this.parent.id+"_pagertemplate";this.parent.isReact?(this.pagerObj.templateFn(i,this.parent,"pagerTemplate",r,null,null,this.pagerObj.element),this.parent.renderTemplates()):(t=this.pagerObj.templateFn(i,this.parent,"pagerTemplate"),nt(this.pagerObj.element,t))}},n.prototype.removeEventListener=function(){this.parent.isDestroyed||((this.parent.isReact||this.parent.isVue)&&this.parent.removeEventListener(sh,this.handlers.created),this.parent.off(bw,this.renderReactPagerTemplate),yt(this.parent,this.evtHandlers,!1))},n.prototype.destroy=function(){this.removeEventListener();this.isReactTemplate()&&this.parent.destroyTemplate(["pagerTemplate"]);this.pagerObj.destroy()},n.prototype.pagerDestroy=function(){this.pagerObj&&!this.pagerObj.isDestroyed&&(this.pagerObj.destroy(),t.remove(this.element))},n}(),put={pageUp:".e-prev",pageDown:".e-next",ctrlAltPageDown:".e-last",ctrlAltPageUp:".e-first",altPageUp:".e-pp",altPageDown:".e-np"},aht=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wut=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-filterbarcell",attrs:{role:"columnheader"}}),t}return aht(i,n),i.prototype.getGui=function(){return this.parent.createElement("div")},i.prototype.render=function(n,i){var u,y=this.parent.element.querySelector(".e-filterbar"),f=this.element.cloneNode(),e=this.getGui(),r=n.column,s,o,h,l,a,c;if(y.appendChild(f),f.setAttribute("data-mappinguid",r.uid),r.filterTemplate)if(s={},i&&(s[r.field]=i[r.field]),s.column=r,r.visible){"FilterBar"===this.parent.filterSettings.type&&f.classList.add("e-fltrtemp");var p=this.parent.isReact&&"string"!=typeof r.filterTemplate&&!(r.filterTemplate.prototype&&r.filterTemplate.prototype.CSPTemplate),w=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,v=this.parent.element.id+r.uid+"filterTemplate";p||w?(r.getFilterTemplate()(s,this.parent,"filterTemplate",v,null,null,f),this.parent.renderTemplates()):nt(f,r.getFilterTemplate()(s,this.parent,"filterTemplate",v,null,null,null,this.parent.root))}else f.classList.add("e-hide");else"checkbox"!==r.type?((t.isNullOrUndefined(r.allowFiltering)||r.allowFiltering)&&!t.isNullOrUndefined(r.filterBarTemplate)?(f.classList.add("e-fltrtemp"),t.attributes(e,{"class":"e-fltrtempdiv"}),t.isNullOrUndefined(r.filterBarTemplate.create))?(u=this.parent.createElement("input",{id:r.field+"_filterBarcell",className:"e-filterUi_input e-filtertext e-fltrTemp",attrs:{type:"search",title:r.headerText}}),e.appendChild(u)):(o={column:r,node:Element},h=r.filterBarTemplate.create,("string"==typeof h&&(h=t.getValue(h,window)),"string"==typeof(u=h(o)))&&(l=this.parent.createElement("div"),l.innerHTML=u,u=l.firstChild),t.attributes(e,{"class":"e-filterUi_input e-filtertext e-fltrTemp",title:r.headerText,id:r.field+"_filterBarcell"}),e.appendChild(u)):(t.attributes(e,{"class":"e-filterdiv e-fltrinputdiv"}),u=this.parent.createElement("input",{id:r.field+"_filterBarcell",className:"e-filtertext",attrs:{type:"search",title:r.headerText+n.attributes.title,value:i[n.column.field]?i[n.column.field]:""}}),e.appendChild(u),o={element:u,floatLabelType:"Never",properties:{enableRtl:this.parent.enableRtl,showClearButton:!0,cssClass:this.parent.cssClass}},this.parent.filterModule.inputList.push(o),pr.Input.createInput(o,this.parent.createElement)),(!1===r.allowFiltering||""===r.field||t.isNullOrUndefined(r.field))&&(u.setAttribute("disabled","true"),u.classList.add("e-disable")),a=e.querySelector(".e-clear-icon"),(a&&a.setAttribute("title",this.parent.localeObj.getConstant("ClearButton")),r.visible||f.classList.add("e-hide"),this.appendHtml(f,e),this.parent.filterSettings.showFilterBarOperator&&"FilterBar"===this.parent.filterSettings.type&&!this.parent.isPrinting&&t.isNullOrUndefined(r.filterTemplate)&&t.isNullOrUndefined(r.filterBarTemplate)&&this.operatorIconRender(e,r,n),(t.isNullOrUndefined(r.allowFiltering)||r.allowFiltering)&&!t.isNullOrUndefined(r.filterBarTemplate))&&(c=r.filterBarTemplate.write,o={element:u,column:r},"string"==typeof c&&(c=t.getValue(c,window)),c.call(this,o))):r.visible||f.classList.add("e-hide");return this.parent.isFrozenGrid()&&ae(this.parent,r,f),f},i.prototype.appendHtml=function(n,t){return n.appendChild(t),n},i.prototype.operatorIconRender=function(n,i,r){var f,u=this.parent,c=this.parent.createElement("input",{className:" e-filterbaroperator e-icons e-icon-filter",id:r.column.uid}),e,o,s,h;if(n.querySelector("span").appendChild(c),i.filter&&i.filter.operator)f=i.filter.operator;else if(u.filterSettings.columns.length)for(e=0,o=u.filterSettings.columns;e<o.length;e++){if(s=o[parseInt(e.toString(),10)],s.field===i.field){f=s.operator;break}f="equal"}else f="equal";t.isNullOrUndefined(u.filterModule.operators[i.field])||(f=u.filterModule.operators[i.field]);this.dropOptr=new gt.DropDownList({fields:{text:"text",value:"value"},popupHeight:"auto",value:f,width:"0px",enabled:i.allowFiltering,popupWidth:"auto",enableRtl:this.parent.enableRtl,change:this.internalEvent.bind(this),beforeOpen:function(){var r=u.filterModule.customOperators,n;for(this.dataSource=r[u.getColumnByUid(this.element.id).type+"Operator"],n=0;n<this.dataSource.length;n++)i.filter&&i.filter.operator&&t.isNullOrUndefined(u.filterModule.operators[i.field])&&this.dataSource[parseInt(n.toString(),10)].value===i.filter.operator&&(this.value=i.filter.operator)},cssClass:this.parent.cssClass?"e-popup-flbar "+this.parent.cssClass:"e-popup-flbar"});this.dropOptr.appendTo(c);h=t.closest(this.dropOptr.element,"span");h.classList.add("e-filterbardropdown");h.removeAttribute("tabindex")},i.prototype.internalEvent=function(n){var t=this.parent,i=t.getColumnByUid(n.element.getAttribute("id")),r,u;n.column=i;t.filterModule.operators[i.field]=n.value;r=n.value;t.filterModule&&t.filterModule.filterSettings.showFilterBarOperator&&(u=document.getElementById(i.field+"_filterBarcell"),"isempty"===r||"isnotempty"===r||"isnotnull"===r||"isnull"===r?(u.setAttribute("readOnly","true"),t.filterModule.filterByColumn(i.field,r,null,t.filterModule.predicate,t.filterModule.filterSettings.enableCaseSensitivity,t.filterModule.ignoreAccent,i.isForeignColumn())):u&&u.readOnly&&(u.removeAttribute("readOnly"),t.filterModule.removeFilteredColsByField(i.field)));t.notify(ttt,n)},i}(fi),but=function(){function n(n,t,i,r){this.ddOpen=this.dropDownOpen.bind(this);this.parent=n;this.serviceLocator=i;this.filterSettings=r;this.customFilterOperators=t;this.parent&&(this.parent.on(vi,this.destroyDropDownList,this),this.parent.on(l,this.destroyDropDownList,this))}return n.prototype.renderOperatorUI=function(n,i,r,u,f){var e=this,o,h;this.dialogObj=u;o=r.type+"Operator";this.optrData=this.customOptr=t.isNullOrUndefined(f)?t.isNullOrUndefined(this.parent.filterSettings.operators)||t.isNullOrUndefined(this.parent.filterSettings.operators[""+o])?this.customFilterOperators[""+o]:this.parent.filterSettings.operators[""+o]:f;var c=this.customOptr,l=this.dropSelectedVal(r,o),s=this.parent.createElement("div",{className:"e-flm_optrdiv"});n.appendChild(s);h=this.parent.createElement("input",{id:r.uid+"-floptr"});s.appendChild(h);this.dropOptr=new gt.DropDownList({dataSource:c,fields:{text:"text",value:"value"},cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",enableRtl:this.parent.enableRtl,text:l,change:function(){var n=document.querySelector(".e-flmenu-valuediv").querySelector("input");"isempty"===e.dropOptr.value||"isnotempty"===e.dropOptr.value||"isnotnull"===e.dropOptr.value||"isnull"===e.dropOptr.value?t.isNullOrUndefined(n.ej2_instances)?n.setAttribute("disabled","true"):n.ej2_instances[0].enabled=!1:t.isNullOrUndefined(n.getAttribute("disabled"))||(t.isNullOrUndefined(n.ej2_instances)?n.removeAttribute("disabled"):n.ej2_instances[0].enabled=!0);vo(e.dropOptr.value,r.uid,r,r.type,u,e.dropOptr.previousValue)}});this.dropOptr.addEventListener(dt,this.ddOpen);this.dropOptr.appendTo("#"+r.uid+"-floptr")},n.prototype.renderResponsiveDropDownList=function(n){n.popup.element.style.width="100%"},n.prototype.dropDownOpen=function(n){n.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString();this.parent.enableAdaptiveUI&&this.renderResponsiveDropDownList(n)},n.prototype.dropSelectedVal=function(n){for(var f,o,h,r,i="",e=0,s=this.parent.filterSettings.columns;e<s.length;e++)f=s[e],(n.field===f.field||n.isForeignColumn()&&n.foreignKeyValue===f.field)&&(o=new u.DataManager(this.optrData).executeLocal((new u.Query).where("value","equal",f.operator)),i=t.isNullOrUndefined(o[0])?"":o[0].text);if(""===i)if(n.filter.operator)for(h=Object.keys(this.optrData).length,r=0;r<h;r++)this.optrData[parseInt(r.toString(),10)].value===n.filter.operator&&(i=this.optrData[parseInt(r.toString(),10)].text);else i=this.optrData[0].text;return i},n.prototype.getFlOperator=function(){return this.dropOptr.value},n.prototype.destroyDropDownList=function(){this.dropOptr.isDestroyed||(this.dropOptr.removeEventListener(dt,this.ddOpen),this.dropOptr.destroy(),this.parent.off(vi,this.destroyDropDownList),this.parent.off(l,this.destroyDropDownList))},n}();gt.MultiSelect.Inject(gt.CheckBoxSelection);lk=function(){function n(n,t,i){this.parent=n;this.serLocator=t;this.filterSettings=i;this.parent&&(this.parent.on(vi,this.destroy,this),this.parent.on(l,this.destroy,this))}return n.prototype.create=function(n){this.instance=this.parent.createElement("input",{className:"e-flmenu-input",id:"strui-"+n.column.uid});n.target.appendChild(this.instance);this.multiSelectCheckBoxInstance=this.parent.createElement("input",{className:"multiselect-input",id:"multiselectstrui-"+n.column.uid});n.target.appendChild(this.multiSelectCheckBoxInstance);this.dialogObj=n.dialogObj;this.processDataOperation(n);this.createMultiSelectDropDown(n);vo(n.getOptrInstance.dropOptr.value,n.column.uid,n.column,n.column.type,n.dialogObj,n.getOptrInstance.dropOptr.previousValue)},n.prototype.processDataOperation=function(n){var t=this;n.column.isForeignColumn()?this.parent.getDataModule().dataManager.executeQuery(this.parent.getDataModule().generateQuery(!0)).then(function(i){t.getAutoCompleteOptions(n,i);vo(n.getOptrInstance.dropOptr.value,n.column.uid,n.column,n.column.type,n.dialogObj,n.getOptrInstance.dropOptr.previousValue)}):this.getAutoCompleteOptions(n)},n.prototype.getAutoCompleteOptions=function(n,i){var a,f=n.column.isForeignColumn(),l;if(f){for(var c=tu.getDistinct(i.result,n.column.field).records||[],o=void 0,h=0;h<c.length;h++)o=o?o.or(n.column.field,"contains",c[parseInt(h.toString(),10)][n.column.field],this.parent.filterSettings.enableCaseSensitivity,this.parent.filterSettings.ignoreAccent):new u.Predicate(n.column.field,"contains",c[parseInt(h.toString(),10)][n.column.field],this.parent.filterSettings.enableCaseSensitivity,this.parent.filterSettings.ignoreAccent);(a=(new u.Query).where(o)).params=this.parent.query.params}var e=f?n.column.dataSource:this.parent.dataSource,v={value:f?n.column.foreignKeyValue:n.column.field},r=new gt.AutoComplete(t.extend({dataSource:e instanceof u.DataManager?e:new u.DataManager(e),fields:v,locale:this.parent.locale,enableRtl:this.parent.enableRtl,query:f?a:this.parent.getDataModule().generateQuery(!0,!0),sortOrder:"Ascending",cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",autofill:!0,placeholder:n.localizeText.getConstant("EnterValue"),actionBegin:function(){if(this.query.queries.length&&"onWhere"===this.query.queries[0].fn&&this.query.queries[0].e&&this.query.queries[0].e.predicates){for(var n=0;n<this.query.queries[0].e.predicates.length;n++)this.properties.fields.value===this.query.queries[0].e.predicates[""+n].field&&(this.query.queries[0].e.predicates.splice(n,1),n-=1);this.query.queries[0].e.predicates.length||this.query.queries.splice(0,1)}}},n.column.filter.params));(this.acFocus=this.focus(r,n),this.acComplete=this.actionComplete(r),this.acOpen=this.openPopup.bind(this),r.addEventListener(ie,this.acFocus),r.addEventListener(dt,this.acOpen),r.addEventListener(s,this.acComplete),e&&"result"in e)&&(l=fc({requestType:"stringfilterrequest"},this.parent.getQuery?this.parent.getQuery().clone():new u.Query),this.parent.trigger(kf,l.state),l.deffered.promise.then(function(n){r.dataSource=new u.DataManager(n)}));this.actObj=r;this.actObj.appendTo(this.instance);f&&this.parent.filterModule.filterModule.afterRenderFilterUI()},n.prototype.write=function(n){var i=this.parent.filterModule.filterModule.getOperatorDropdown(),r=this.getAutoCompleteInstance(n.column.uid),u=this.getMultiSelectInstance(n.column.uid);"in"===i.value||"notin"===i.value?u.value=Array.isArray(n.filteredValue)?n.filteredValue:[]:""===n.filteredValue||t.isNullOrUndefined(n.filteredValue)||Array.isArray(n.filteredValue)||(r.value=n.filteredValue)},n.prototype.read=function(n,i,r,u){var f,e;"in"===r||"notin"===r?(f=this.getMultiSelectInstance(i.uid).value,u.filterByColumn(i.field,r,f,"and",this.parent.filterSettings.enableCaseSensitivity)):(e=this.getAutoCompleteInstance(i.uid),f=e.value,t.Browser.isDevice&&(e.hidePopup(),e.focusOut()),(t.isNullOrUndefined(f)||""===f)&&(f=null),u.filterByColumn(i.field,r,f,"and",this.parent.filterSettings.enableCaseSensitivity))},n.prototype.getAutoCompleteInstance=function(n){return document.querySelector("#strui-"+n).ej2_instances[0]},n.prototype.getMultiSelectInstance=function(n){return document.querySelector("#multiselectstrui-"+n).ej2_instances[0]},n.prototype.createMultiSelectDropDown=function(n){var f=n.column.isForeignColumn(),r=f?n.column.dataSource:this.parent.dataSource,i=f?n.column.foreignKeyValue:n.column.field;this.multiSelectObj=new gt.MultiSelect(t.extend({dataSource:r instanceof u.DataManager?r:new u.DataManager(r),fields:{text:i,value:i},mode:"CheckBox",showDropDownIcon:!0,popupHeight:"300px",showSelectAll:!0,query:(new u.Query).select(i),cssClass:this.parent.cssClass?"e-multiselect-flmenu "+this.parent.cssClass:"e-multiselect-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl},n.column.filter.params));this.dialogObj=n.dialogObj;this.dropdownOpen=this.openPopup.bind(this);this.dropdownComplete=this.actionCompleteMultiCheckBox(i);this.multiSelectObj.addEventListener(dt,this.dropdownOpen);this.multiSelectObj.addEventListener(s,this.dropdownComplete);this.multiSelectObj.appendTo(this.multiSelectCheckBoxInstance)},n.prototype.openPopup=function(n){ry(n,this.dialogObj)},n.prototype.focus=function(n,t){return function(){n.filterType=t.getOptrInstance.getFlOperator()}},n.prototype.actionComplete=function(n){return function(i){i.result=i.result.filter(function(i,r,u){return u.map(function(i){return t.getValue(n.fields.value,i)}).indexOf(t.getValue(n.fields.value,i))===r})}},n.prototype.actionCompleteMultiCheckBox=function(n){return function(t){t.result=u.DataUtil.distinct(t.result,n,!0)}},n.prototype.destroy=function(){this.parent.off(vi,this.destroy);this.parent.off(l,this.destroy);this.actObj&&!this.actObj.isDestroyed&&(this.actObj.removeEventListener(ie,this.acFocus),this.actObj.removeEventListener(dt,this.acOpen),this.actObj.removeEventListener(s,this.acComplete),this.actObj.destroy());this.multiSelectObj&&!this.multiSelectObj.isDestroyed&&(this.multiSelectObj.removeEventListener(dt,this.dropdownOpen),this.multiSelectObj.removeEventListener(s,this.dropdownComplete),this.multiSelectObj.destroy())},n}();gt.MultiSelect.Inject(gt.CheckBoxSelection);ak=function(){function n(n,t,i){this.filterSettings=i;this.parent=n;this.serviceLocator=t;this.parent&&(this.parent.on(vi,this.destroy,this),this.parent.on(l,this.destroy,this))}return n.prototype.keyEventHandler=function(n){if(13===n.keyCode||9===n.keyCode){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0);this.dispatchEvent(t)}},n.prototype.create=function(n){this.numericInstance=this.parent.createElement("input",{className:"e-flmenu-input",id:"numberui-"+n.column.uid});this.multiSelectCheckBoxInstance=this.parent.createElement("input",{className:"multiselect-input",id:"multiselectnumberui-"+n.column.uid});n.target.appendChild(this.numericInstance);n.target.appendChild(this.multiSelectCheckBoxInstance);this.createNumericTextBox(n);this.createMultiSelectDropDown(n);vo(n.getOptrInstance.dropOptr.value,n.column.uid,n.column,n.column.type,n.dialogObj,n.getOptrInstance.dropOptr.previousValue)},n.prototype.write=function(n){var t=this.parent.filterModule.filterModule.getOperatorDropdown(),i=this.getNumericInstance(n.column.uid),r=this.getMultiSelectInstance(n.column.uid);"in"===t.value||"notin"===t.value?r.value=Array.isArray(n.filteredValue)?n.filteredValue:[]:(i.element.addEventListener("keydown",this.keyEventHandler),Array.isArray(n.filteredValue)||(i.value=n.filteredValue))},n.prototype.read=function(n,t,i,r){if("in"===i||"notin"===i){var u=this.getMultiSelectInstance(t.uid).value;r.filterByColumn(t.field,i,u,"and",!0)}else u=this.getNumericInstance(t.uid).value,r.filterByColumn(t.field,i,u,"and",!0)},n.prototype.createNumericTextBox=function(n){this.numericTxtObj=new pr.NumericTextBox(t.extend({format:"string"==typeof n.column.format||t.isUndefined(n.column.format)?n.column.format:n.column.format.format,locale:this.parent.locale,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:n.localizeText.getConstant("EnterValue"),enableRtl:this.parent.enableRtl},n.column.filter.params));this.numericTxtObj.appendTo(this.numericInstance)},n.prototype.createMultiSelectDropDown=function(n){var f=n.column.isForeignColumn(),r=f?n.column.dataSource:this.parent.dataSource,i=f?n.column.foreignKeyValue:n.column.field;this.multiSelectObj=new gt.MultiSelect(t.extend({dataSource:r instanceof u.DataManager?r:new u.DataManager(r),fields:{text:i,value:i},mode:"CheckBox",showDropDownIcon:!0,popupHeight:"300px",showSelectAll:!0,query:(new u.Query).select(i),cssClass:this.parent.cssClass?"e-multiselect-flmenu "+this.parent.cssClass:"e-multiselect-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl},n.column.filter.params));this.dialogObj=n.dialogObj;this.dropdownOpen=this.openPopup.bind(this);this.dropdownComplete=this.actionComplete(i);this.multiSelectObj.addEventListener(dt,this.dropdownOpen);this.multiSelectObj.addEventListener(s,this.dropdownComplete);this.multiSelectObj.appendTo(this.multiSelectCheckBoxInstance)},n.prototype.getNumericInstance=function(n){return document.querySelector("#numberui-"+n).ej2_instances[0]},n.prototype.getMultiSelectInstance=function(n){return document.querySelector("#multiselectnumberui-"+n).ej2_instances[0]},n.prototype.openPopup=function(n){ry(n,this.dialogObj)},n.prototype.actionComplete=function(n){return function(t){t.result=u.DataUtil.distinct(t.result,n,!0)}},n.prototype.destroy=function(){this.parent.off(vi,this.destroy);this.parent.off(l,this.destroy);this.numericTxtObj&&!this.numericTxtObj.isDestroyed&&this.numericTxtObj.destroy();this.multiSelectObj&&!this.multiSelectObj.isDestroyed&&(this.multiSelectObj.removeEventListener(dt,this.dropdownOpen),this.multiSelectObj.removeEventListener(s,this.dropdownComplete),this.multiSelectObj.destroy())},n}();gt.MultiSelect.Inject(gt.CheckBoxSelection);var kut=function(){function n(n,t,i){this.parent=n;this.serviceLocator=t;this.filterSettings=i;this.parent&&(this.parent.on(vi,this.destroy,this),this.parent.on(l,this.destroy,this))}return n.prototype.create=function(n){this.elem=this.parent.createElement("input",{className:"e-flmenu-input",id:"bool-ui-"+n.column.uid});n.target.appendChild(this.elem);this.multiSelectElement=this.parent.createElement("input",{className:"multiselect-input",id:"multiselectbool-ui-"+n.column.uid});n.target.appendChild(this.multiSelectElement);this.createDropDownList(n);this.createMultiSelectDropDown(n);vo(n.getOptrInstance.dropOptr.value,n.column.uid,n.column,n.column.type,n.dialogObj,n.getOptrInstance.dropOptr.previousValue)},n.prototype.write=function(n){var i=this.parent.filterModule.filterModule.getOperatorDropdown(),r=this.getBooleanInstance(n.column.uid),u=this.getMultiSelectInstance(n.column.uid);"in"===i.value||"notin"===i.value?u.value=Array.isArray(n.filteredValue)?n.filteredValue:[]:t.isNullOrUndefined(n.filteredValue)||Array.isArray(n.filteredValue)||(r.value=n.filteredValue)},n.prototype.read=function(n,t,i,r){if("in"===i||"notin"===i){var u=this.getMultiSelectInstance(t.uid).value;r.filterByColumn(t.field,i,u,"and",!0)}else u=this.getBooleanInstance(t.uid).value,r.filterByColumn(t.field,i,u,"and",!1)},n.prototype.createDropDownList=function(n){var r=this,o=n.column.isForeignColumn(),i=o?n.column.dataSource:this.parent.dataSource,f=o?n.column.foreignKeyValue:n.column.field,e;(this.dialogObj=n.dialogObj,this.dropInstance=new gt.DropDownList(t.extend({dataSource:i instanceof u.DataManager?i:new u.DataManager(i),query:(new u.Query).select(f),fields:{text:f,value:f},placeholder:n.localizeText.getConstant("SelectValue"),cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl},n.column.filter.params)),this.dropdownOpen=this.openPopup.bind(this),this.dropdownComplete=this.actionComplete(f),this.dropInstance.addEventListener(dt,this.dropdownOpen),this.dropInstance.addEventListener(s,this.dropdownComplete),i&&"result"in i)&&(e=fc({requestType:"booleanfilterrequest"},this.parent.getQuery?this.parent.getQuery().clone():new u.Query),this.parent.trigger(kf,e.state),e.deffered.promise.then(function(t){var i,f,e;for(r.dropInstance.dataSource=new u.DataManager(t),r.dropInstance.dataBind(),i=0,f=r.parent.filterSettings.columns;i<f.length;i++)e=f[i],n.column.uid===e.uid&&(r.dropInstance.value=e.value)}));this.dropInstance.appendTo(this.elem)},n.prototype.createMultiSelectDropDown=function(n){var f=n.column.isForeignColumn(),r=f?n.column.dataSource:this.parent.dataSource,i=f?n.column.foreignKeyValue:n.column.field;this.multiSelectCheckBoxInstance=new gt.MultiSelect(t.extend({dataSource:r instanceof u.DataManager?r:new u.DataManager(r),fields:{text:i,value:i},mode:"CheckBox",showDropDownIcon:!0,popupHeight:"300px",showSelectAll:!0,query:(new u.Query).select(i),cssClass:this.parent.cssClass?"e-multiselect-flmenu "+this.parent.cssClass:"e-multiselect-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl},n.column.filter.params));this.dialogObj=n.dialogObj;this.multiSelectDropdownOpen=this.openPopup.bind(this);this.multiSelectDropdownComplete=this.actionComplete(i);this.multiSelectCheckBoxInstance.addEventListener(dt,this.multiSelectDropdownOpen);this.multiSelectCheckBoxInstance.addEventListener(s,this.multiSelectDropdownComplete);this.multiSelectCheckBoxInstance.appendTo(this.multiSelectElement)},n.prototype.getBooleanInstance=function(n){return document.querySelector("#bool-ui-"+n).ej2_instances[0]},n.prototype.getMultiSelectInstance=function(n){return document.querySelector("#multiselectbool-ui-"+n).ej2_instances[0]},n.prototype.openPopup=function(n){ry(n,this.dialogObj)},n.prototype.actionComplete=function(n){return function(t){t.result=u.DataUtil.distinct(t.result,n,!0)}},n.prototype.destroy=function(){this.parent.off(vi,this.destroy);this.parent.off(l,this.destroy);this.dropInstance&&!this.dropInstance.isDestroyed&&(this.dropInstance.removeEventListener(dt,this.dropdownOpen),this.dropInstance.removeEventListener(s,this.dropdownComplete),this.dropInstance.destroy());this.multiSelectCheckBoxInstance&&!this.multiSelectCheckBoxInstance.isDestroyed&&(this.multiSelectCheckBoxInstance.removeEventListener(dt,this.multiSelectDropdownOpen),this.multiSelectCheckBoxInstance.removeEventListener(s,this.multiSelectDropdownComplete),this.multiSelectCheckBoxInstance.destroy())},n}(),yy=function(){function n(n,t,i){this.dpOpen=this.openPopup.bind(this);this.parent=n;this.locator=t;this.fltrSettings=i;this.parent&&(this.parent.on(vi,this.destroy,this),this.parent.on(l,this.destroy,this))}return n.prototype.create=function(n){var i=nc(n.column.format,n.column.type);this.dialogObj=n.dialogObj;this.inputElem=this.parent.createElement("input",{className:"e-flmenu-input",id:"dateui-"+n.column.uid});n.target.appendChild(this.inputElem);"date"===n.column.type||"dateonly"===n.column.type?this.datePickerObj=new pu.DatePicker(t.extend({format:i,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:n.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl},n.column.filter.params)):"datetime"===n.column.type&&(this.datePickerObj=new pu.DateTimePicker(t.extend({format:i,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:n.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl},n.column.filter.params)));this.datePickerObj.addEventListener(dt,this.dpOpen);this.datePickerObj.appendTo(this.inputElem)},n.prototype.write=function(n){document.querySelector("#dateui-"+n.column.uid).ej2_instances[0].value=t.isNullOrUndefined(n.filteredValue)?null:new Date(n.filteredValue)},n.prototype.read=function(n,i,r,u){var f=document.querySelector("#dateui-"+i.uid).ej2_instances[0].value;f=t.isNullOrUndefined(f)?null:f;u.filterByColumn(i.field,r,f,"and",!0)},n.prototype.openPopup=function(n){n.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},n.prototype.destroy=function(){this.parent.off(vi,this.destroy);this.parent.off(l,this.destroy);t.isNullOrUndefined(this.datePickerObj)||this.datePickerObj.isDestroyed||(this.datePickerObj.removeEventListener(dt,this.dpOpen),this.datePickerObj.destroy())},n}(),vht=function(){function n(n,t,i,r,u){this.isDialogOpen=!1;this.maxHeight="350px";this.isMenuCheck=!1;this.colTypes={string:lk,number:ak,date:yy,dateonly:yy,boolean:kut,datetime:yy};this.parent=n;this.filterSettings=t;this.serviceLocator=i;this.customFilterOperators=r;this.filterObj=u;this.flMuiObj=new but(this.parent,this.customFilterOperators,this.serviceLocator);this.l10n=this.serviceLocator.getService("localization");this.menuFilterBase=new tu(n)}return n.prototype.clearCustomFilter=function(n){this.clearBtnClick(n)},n.prototype.applyCustomFilter=function(n){this.filterBtnClick(n.col)},n.prototype.openDialog=function(n){this.options=n;this.col=this.parent.getColumnByField(n.field);(t.isNullOrUndefined(this.col.filter)||t.isNullOrUndefined(this.col.filter.type)||"Menu"===this.col.filter.type)&&this.renderDlgContent(n.target,this.col)},n.prototype.closeDialog=function(n){var o=this,u,e,i,r,f;if(this.dlgObj){if(u=document.getElementById(this.dlgObj.element.id),this.dlgObj&&!this.dlgObj.isDestroyed&&u){if(e={cancel:!1,column:this.col,target:n,element:u},e.cancel)return void(this.parent.isColumnMenuFilterClosing=!1);this.parent.notify(vi,e);this.isDialogOpen=!1;this.isMenuCheck&&(this.menuFilterBase.unWireEvents(),this.parent.off(df,this.actionComplete),this.isMenuCheck=!1);i=this.col;t.isNullOrUndefined(i.filter)||t.isNullOrUndefined(i.filter.ui)||t.isNullOrUndefined(i.filter.ui.destroy)||(r=i.filter.ui.destroy,"string"==typeof r&&(r=t.getValue(r,window)),r());((this.parent.isReact||this.parent.isVue)&&this.col.filterTemplate&&this.col.filterTemplate instanceof Function?this.parent.clearTemplate(["filterTemplate"],void 0,function(){o.dlgObj.destroy()}):(this.dlgObj.destroy(),t.remove(u)),this.parent.showColumnChooser)||(f=document.getElementById(this.parent.element.id+"_e-popup"),t.isNullOrUndefined(f)||(t.remove(f),f=null));t.isNullOrUndefined(this.dlgObj.storeActiveElement)||this.dlgObj.storeActiveElement.focus()}this.parent.notify(gs,{})}},n.prototype.renderDlgContent=function(n,r){var u={requestType:up,columnName:r.field,columnType:r.type},f;u.filterModel=this;this.parent.trigger(p,u);f=this.parent.createElement("div",{className:"e-flmenu-maindiv",id:r.uid+"-flmenu"});this.dlgDiv=this.parent.createElement("div",{className:"e-flmenu",id:r.uid+"-flmdlg"});this.dlgDiv.setAttribute("aria-label",this.l10n.getConstant("FilterMenuDialogARIA"));this.parent.enableAdaptiveUI?document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv").appendChild(this.dlgDiv):this.parent.element.appendChild(this.dlgDiv);this.dlgObj=new tt.Dialog({showCloseIcon:!1,closeOnEscape:!1,locale:this.parent.locale,visible:!1,enableRtl:this.parent.enableRtl,created:this.dialogCreated.bind(this,n,r),position:this.parent.element.classList.contains("e-device")?{X:"center",Y:"center"}:{X:"",Y:""},target:this.parent.element.classList.contains("e-device")?document.body:this.parent.element,buttons:[{click:this.filterBtnClick.bind(this,r),buttonModel:{content:this.l10n.getConstant("FilterButton"),isPrimary:!0,cssClass:this.parent.cssClass?"e-flmenu-okbtn "+this.parent.cssClass:"e-flmenu-okbtn"}},{click:this.clearBtnClick.bind(this,r),buttonModel:{content:this.l10n.getConstant("ClearButton"),cssClass:this.parent.cssClass?"e-flmenu-cancelbtn "+this.parent.cssClass:"e-flmenu-cancelbtn"}}],content:f,width:!t.isNullOrUndefined(i(n,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:250,animationSettings:{effect:"None"},cssClass:this.parent.cssClass?"e-filter-popup "+this.parent.cssClass:"e-filter-popup"});this.dlgObj.isStringTemplate=!0;this.renderResponsiveDialog();this.dlgObj.appendTo(this.dlgDiv)},n.prototype.renderResponsiveDialog=function(){this.parent.enableAdaptiveUI&&(this.dlgObj.position={X:"",Y:""},this.dlgObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dlgObj.width="100%",this.dlgObj.isModal=!1,this.dlgObj.buttons=[{}])},n.prototype.dialogCreated=function(n,i){!t.Browser.isDevice&&n?bb(n,this.dlgObj,this.parent):this.options.isResponsiveFilter||(this.dlgObj.position={X:"center",Y:"center"});this.currentDialogCreatedColumn=i;this.renderFilterUI(n,i);i.isForeignColumn()&&(t.isNullOrUndefined(i.filter)||t.isNullOrUndefined(i.filter.ui)||t.isNullOrUndefined(i.filter.ui.create))||this.afterRenderFilterUI();var r=this.parent.isReact&&"string"!=typeof i.filterTemplate,u=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;t.isNullOrUndefined(i.filterTemplate)||r||u?t.isNullOrUndefined(this.dlgDiv.querySelector(".e-flmenu-input"))||(this.dlgDiv.querySelector(".e-flmenu-input").focus(),this.dlgDiv.querySelector(".e-flmenu-input").parentElement.classList.add("e-input-focus")):(this.dlgDiv.querySelector(".e-flmenu-valuediv").firstElementChild.focus(),this.dlgDiv.querySelector(".e-flmenu-valuediv").firstElementChild.classList.add("e-input-focus"))},n.prototype.afterRenderFilterUI=function(){var r=this.currentDialogCreatedColumn,u,n,f;r.showColumnMenu&&this.parent.notify(io,{});this.parent.enableAdaptiveUI?(this.dlgObj.element.style.left="0px",this.dlgObj.element.style.maxHeight="none"):this.dlgObj.element.style.maxHeight=this.maxHeight;this.dlgObj.show();this.parent.getContent().firstElementChild.offsetHeight<this.dlgObj.element.offsetHeight&&!i(this.parent.element,"e-gantt-dialog")&&ko(this.parent,this.dlgObj);u=this.dlgObj.element.querySelector(".e-flm_optrdiv").querySelector("input");n=this.dlgObj.element.querySelector(".e-flmenu-valuediv").querySelector("input");"Empty"===u.value||"Not Empty"===u.value||"Null"===u.value||"Not Null"===u.value?t.isNullOrUndefined(n.ej2_instances)?n.setAttribute("disabled","true"):n.ej2_instances[0].enabled=!1:t.isNullOrUndefined(n&&n.getAttribute("disabled"))||(t.isNullOrUndefined(n.ej2_instances)?n.removeAttribute("disabled"):n.ej2_instances[0].enabled=!0);r.filterTemplate||this.writeMethod(r,this.dlgObj.element.querySelector("#"+r.uid+"-flmenu"));f={requestType:rp,columnName:r.field,columnType:r.type};f.filterModel=this;this.isDialogOpen=!0;this.isMenuCheck||this.parent.trigger(s,f)},n.prototype.renderFilterUI=function(n,t){var i=this.dlgObj.element.querySelector(".e-flmenu-maindiv");this.parent.log("column_type_missing",{column:t});this.renderOperatorUI(i,n,t);this.renderFlValueUI(i,n,t)},n.prototype.renderOperatorUI=function(n,t,i){this.flMuiObj.renderOperatorUI(n,t,i,this.dlgObj,this.filterObj.menuOperator)},n.prototype.renderFlValueUI=function(n,i,r){var f=this.parent.createElement("div",{className:"e-flmenu-valuediv"}),o=this.filterObj,s,u,e;if(n.appendChild(f),s=new this.colTypes[r.type](this.parent,this.serviceLocator,this.parent.filterSettings),r.filterTemplate){u={};u[r.field]=u.value=o.values[r.field];r.foreignKeyValue&&(u[r.foreignKeyValue]=o.values[r.field],u[r.field]=void 0);u.column=r;var c=this.parent.isReact&&"string"!=typeof r.filterTemplate&&!(r.filterTemplate.prototype&&r.filterTemplate.prototype.CSPTemplate),l=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,h=this.parent.element.id+r.uid+"filterTemplate";c||l?(r.getFilterTemplate()(u,this.parent,"filterTemplate",h,null,null,f),this.parent.renderTemplates()):nt(f,r.getFilterTemplate()(u,this.parent,"filterTemplate",h,null,null,null,this.parent.root));this.isMenuCheck&&(this.menuFilterBase.cBox=this.dlgObj.element.querySelector(".e-checkboxlist.e-fields"),this.menuFilterBase.wireEvents(),this.parent.on(df,this.actionComplete,this),this.menuFilterBase.getAllData())}else t.isNullOrUndefined(r.filter)||t.isNullOrUndefined(r.filter.ui)||t.isNullOrUndefined(r.filter.ui.create)?s.create({column:r,target:f,getOptrInstance:this.flMuiObj,localizeText:this.l10n,dialogObj:this.dlgObj}):(e=r.filter.ui.create,"string"==typeof e&&(e=t.getValue(e,window)),e({column:r,target:f,getOptrInstance:this.flMuiObj,dialogObj:this.dlgObj}))},n.prototype.writeMethod=function(n,i){for(var e,r,u,o=i.querySelector(".e-flmenu-valinput"),h=new this.colTypes[n.type](this.parent,this.serviceLocator,this.parent.filterSettings),f=0,s=this.filterSettings.columns;f<s.length;f++)e=s[f],n.uid===e.uid&&(u=e.value);t.isNullOrUndefined(n.filter)||t.isNullOrUndefined(n.filter.ui)||t.isNullOrUndefined(n.filter.ui.write)?h.write({column:n,target:o,parent:this.parent,filteredValue:u}):(r=n.filter.ui.write,"string"==typeof r&&(r=t.getValue(r,window)),r({column:n,target:o,parent:this.parent,filteredValue:u}))},n.prototype.filterBtnClick=function(n){var o=this.dlgObj.element.querySelector(".e-flmenu-valuediv input"),e=this.flMuiObj.getFlOperator(),s=new this.colTypes[n.type](this.parent,this.serviceLocator,this.parent.filterSettings),i,u,r,f;n.filterTemplate?(i=this.dlgDiv.querySelector(".e-flmenu-valuediv"),u=void 0,i.children[0].value?u=i.children[0].value:t.isNullOrUndefined(i.children[0].ej2_instances)?(r=i.querySelector(".e-control"),t.isNullOrUndefined(r)||(u="boolean"===n.type?r.checked:t.isNullOrUndefined(r.ej2_instances)?r.value:r.ej2_instances[0].value)):u=(this.parent.isAngular?i.children[0]:i.querySelector("input")).ej2_instances[0].value,this.filterObj.filterByColumn(n.field,e,u)):t.isNullOrUndefined(n.filter)||t.isNullOrUndefined(n.filter.ui)||t.isNullOrUndefined(n.filter.ui.read)?s.read(o,n,e,this.filterObj):(f=n.filter.ui.read,"string"==typeof f&&(f=t.getValue(f,window)),f({element:o,column:n,operator:e,fltrObj:this.filterObj}));this.closeDialog();this.parent.showColumnMenu&&this.parent.notify(oo,{})},n.prototype.closeResponsiveDialog=function(){this.closeDialog()},n.prototype.clearBtnClick=function(n){this.filterObj.removeFilteredColsByField(n.field);this.closeDialog();this.parent.showColumnMenu&&this.parent.notify(oo,{})},n.prototype.destroy=function(){this.closeDialog()},n.prototype.getFilterUIInfo=function(){return{field:this.col.field,operator:this.flMuiObj.getFlOperator()}},n.prototype.getOperatorDropdown=function(){return this.flMuiObj.dropOptr},n.prototype.renderCheckBoxMenu=function(){return this.isMenuCheck=!0,this.menuFilterBase.updateModel(this.options),this.menuFilterBase.getAndSetChkElem(this.options),this.dlgObj.buttons=[{click:this.menuFilterBase.btnClick.bind(this.menuFilterBase),buttonModel:{content:this.menuFilterBase.getLocalizedLabel("FilterButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.menuFilterBase.btnClick.bind(this.menuFilterBase),buttonModel:{cssClass:"e-flat",content:this.menuFilterBase.getLocalizedLabel("ClearButton")}}],this.menuFilterBase.dialogObj=this.dlgObj,this.menuFilterBase.dlg=this.dlgObj.element,this.menuFilterBase.dlg.classList.add("e-menucheckbox"),this.menuFilterBase.dlg.classList.remove("e-checkboxfilter"),this.maxHeight="800px",this.menuFilterBase.sBox.innerHTML},n.prototype.actionComplete=function(n){this.isMenuCheck&&this.parent.trigger(s,n)},n}(),vk=function(){function n(n){this.parent=n;this.isresetFocus=!0;this.checkBoxBase=new tu(n);this.addEventListener()}return n.prototype.destroy=function(){this.removeEventListener();this.checkBoxBase.closeDialog()},n.prototype.openDialog=function(n){this.checkBoxBase.openDialog(n);this.parent.log("column_type_missing",{column:n.column})},n.prototype.closeDialog=function(){this.destroy();this.isresetFocus&&this.parent.notify(uu,{})},n.prototype.closeResponsiveDialog=function(){this.checkBoxBase.closeDialog()},n.prototype.getModuleName=function(){return"checkboxFilter"},n.prototype.actionBegin=function(n){this.parent.trigger(p,n)},n.prototype.actionComplete=function(n){this.parent.trigger(s,n)},n.prototype.actionPrevent=function(n){rr(this.parent)&&(this.parent.notify(si,n),n.cancel=!0)},n.prototype.clearCustomFilter=function(n){this.checkBoxBase.clearFilter(n)},n.prototype.applyCustomFilter=function(){this.checkBoxBase.fltrBtnHandler();this.checkBoxBase.closeDialog()},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ta,this.actionBegin,this),this.parent.on(df,this.actionComplete,this),this.parent.on(ro,this.actionPrevent,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ta,this.actionBegin),this.parent.off(df,this.actionComplete),this.parent.off(ro,this.actionPrevent))},n}(),yht=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dut=function(n){function t(t,i,r,u){var f=n.call(this,t,i,r)||this;return f.parent=t,f.isresetFocus=!0,f.excelFilterBase=new cut(t,u),f}return yht(t,n),t.prototype.destroy=function(){this.excelFilterBase.closeDialog()},t.prototype.openDialog=function(n){this.excelFilterBase.openDialog(n)},t.prototype.closeDialog=function(){this.excelFilterBase.closeDialog();this.isresetFocus&&this.parent.notify(uu,{})},t.prototype.clearCustomFilter=function(n){this.excelFilterBase.clearFilter(n)},t.prototype.closeResponsiveDialog=function(n){n?this.excelFilterBase.removeDialog():this.closeDialog()},t.prototype.applyCustomFilter=function(n){n.isCustomFilter?this.excelFilterBase.filterBtnClick(n.col.field):(this.excelFilterBase.fltrBtnHandler(),this.excelFilterBase.closeDialog())},t.prototype.filterByColumn=function(n,t,i,r,u,f,e,o){this.excelFilterBase.filterByColumn(n,t,i,r,u,f,e,o)},t.prototype.getFilterUIInfo=function(){return this.excelFilterBase.getFilterUIInfo()},t.prototype.getModuleName=function(){return"excelFilter"},t}(vk),py=function(){function n(n,t,i){this.predicate="and";this.contentRefresh=!0;this.filterByMethod=!0;this.refresh=!0;this.values={};this.operators={};this.cellText={};this.nextFlMenuOpen="";this.type={Menu:vht,CheckBox:vk,Excel:dut};this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith",wildCard:"wildcard",isNull:"isnull",notNull:"notnull",like:"like"};this.fltrDlgDetails={field:"",isOpen:!1};this.skipNumberInput=["="," ","!"];this.skipStringInput=[">","<","="];this.actualPredicate={};this.inputList=[];this.parent=n;this.filterSettings=t;this.serviceLocator=i;this.addEventListener();this.setFullScreenDialog()}return n.prototype.render=function(n){var f,c,r,l,o,s,i,a,h;if(!u.DataUtil.getObject("args.isFrozen",n)&&(f=this.parent,this.l10n=this.serviceLocator.getService("localization"),this.getLocalizedCustomOperators(),"FilterBar"===this.parent.filterSettings.type&&f.columns.length)){if(c=this.parent.element.querySelector(".e-filterbar"),c&&t.remove(c),r=new ci(this.serviceLocator,e.Filter,f),this.serviceLocator.getService("cellRendererFactory").addCellRenderer(e.Filter,new wut(this.parent,this.serviceLocator)),this.valueFormatter=this.serviceLocator.getService("valueFormatter"),r.element=this.parent.createElement("tr",{className:"e-filterbar",attrs:{role:"row"}}),l=this.generateRow(),l.data=this.values,this.parent.getHeaderContent().querySelector("thead:not(.e-masked-thead)").appendChild(r.element),o=this.parent.element.querySelector(".e-rowdragheader"),this.element=r.render(l,f.getColumns(),null,null,r.element),this.element.querySelectorAll(".e-leftfreeze").length&&(this.element.querySelectorAll(".e-indentcell").length||this.element.querySelectorAll(".e-grouptopleftcell").length))for(s=this.element.querySelectorAll(".e-indentcell, .e-grouptopleftcell"),i=0;i<s.length;i++)s[parseInt(i.toString(),10)].classList.add("e-leftfreeze"),g(s[parseInt(i.toString(),10)],30*i,this.parent.enableRtl,"Left");of(this.element);a=this.element.querySelector(".e-detailheadercell");a&&(a.className="e-filterbarcell e-mastercell");o&&(o.className=o.classList.contains("e-leftfreeze")?"e-dragheadercell e-mastercell e-leftfreeze":"e-filterbarcell e-mastercell");h=[].slice.call(this.element.getElementsByClassName("e-grouptopleftcell"));h.length&&h[h.length-1].classList.add("e-lastgrouptopleftcell");this.wireEvents();this.parent.notify(ru,{"case":"filter"})}},n.prototype.showCustomFilter=function(n){this.responsiveDialogRenderer.isCustomDialog=n;this.responsiveDialogRenderer.showResponsiveDialog(this.column)},n.prototype.renderResponsiveChangeAction=function(n){this.responsiveDialogRenderer.action=n.action},n.prototype.setFilterModel=function(n){var t=n.filter.type||this.parent.filterSettings.type;this.filterModule=new this.type[""+t](this.parent,this.parent.filterSettings,this.serviceLocator,this.customOperators,this)},n.prototype.destroy=function(){var r=this.parent.element,i,n,u;if(r&&(r.querySelector("."+st)||r.querySelector("."+it))){if(this.filterModule&&this.filterModule.destroy(),this.parent.refreshing||!this.parent.isDestroyed&&this.parent.allowFiltering||(this.filterSettings.columns=[]),this.updateFilterMsg(),this.removeEventListener(),this.unWireEvents(),"FilterBar"===this.filterSettings.type&&!this.parent.isDestroyed){if(this.filterSettings.showFilterBarOperator)for(i=[].slice.call(this.element.getElementsByClassName("e-filterbaroperator")),n=0;n<i.length;n++)i[parseInt(n.toString(),10)].ej2_instances[0]&&i[parseInt(n.toString(),10)].ej2_instances[0].destroy();this.parent.getColumns().map(function(n){if(n.filterBarTemplate&&!t.isNullOrUndefined(n.filterBarTemplate.destroy)){var i=n.filterBarTemplate.destroy;"string"==typeof i&&(i=t.getValue(i,window));i()}})}if(this.element){if(this.element.parentElement){for(n=0;n<this.inputList.length;n++)pr.Input.destroy(this.inputList[parseInt(n.toString(),10)],this.inputList[parseInt(n.toString(),10)].element.nextElementSibling),t.remove(this.inputList[parseInt(n.toString(),10)].element);this.inputList=[];t.remove(this.element);this.element=null}u=this.parent.getHeaderContent().querySelector(".e-filterbar");u&&t.remove(u)}}},n.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,a.isFilter)},n.prototype.generateRow=function(){var n=new cr({});return n.cells=this.generateCells(),n},n.prototype.generateCells=function(){var n=[],i,u,t,r,f;if(this.parent.allowGrouping)for(i=0,u=this.parent.groupSettings.columns.length;i<u;i++)n.push(this.generateCell({},e.HeaderIndent));for((this.parent.detailTemplate||this.parent.childGrid)&&n.push(this.generateCell({},e.DetailHeader)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&n.push(this.generateCell({},e.RowDragHIcon)),t=0,r=this.parent.getColumns();t<r.length;t++)f=r[t],n.push(this.generateCell(f));return this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&n.push(this.generateCell({},e.RowDragHIcon)),n},n.prototype.generateCell=function(n,t){var i={visible:n.visible,isDataCell:!1,rowId:"",column:n,cellType:t||e.Filter,attributes:{title:this.l10n.getConstant("FilterbarTitle")}};return new bi(i)},n.prototype.updateModel=function(){var n=this.column.isForeignColumn()||this.parent.enableColumnVirtualization?this.parent.getColumnByUid(this.column.uid,!0):this.parent.getColumnByField(this.fieldName),i,e,s;this.filterObjIndex=this.getFilteredColsIndexByField(n);this.prevFilterObject=this.filterSettings.columns[this.filterObjIndex];for(var r=Array.isArray(this.value)&&this.value.length?this.value:[this.value],f=this.parent.dataSource.adaptor&&this.parent.dataSource.adaptor.getModuleName?this.parent.dataSource.adaptor.getModuleName():void 0,o=0,h=r.length;o<h;o++)i=n.isForeignColumn()?n.foreignKeyValue:this.fieldName,e="notequal"===this.operator,"in"===this.operator||"notin"===this.operator?(!this.parent.getDataModule().isRemote()||"date"!==n.type&&"dateonly"!==n.type&&"datetime"!==n.type||(r=u.DataUtil.parse.arrayReplacer(r)),this.currentFilterObject={field:i,uid:n.uid,isForeignKey:n.isForeignColumn(),operator:this.operator,value:r,predicate:this.predicate,matchCase:this.matchCase,ignoreAccent:this.ignoreAccent,actualFilterValue:{},actualOperator:{}},h=0):this.currentFilterObject={field:i,uid:n.uid,isForeignKey:n.isForeignColumn(),operator:this.operator,value:r[parseInt(o.toString(),10)],predicate:this.predicate,matchCase:this.matchCase,ignoreAccent:this.ignoreAccent,actualFilterValue:{},actualOperator:{}},s=this.getFilteredColsIndexByField(n),s>-1&&(!Array.isArray(this.value)||Array.isArray(this.value)&&("in"===this.operator||"notin"===this.operator))?this.filterSettings.columns[parseInt(s.toString(),10)]=this.currentFilterObject:this.filterSettings.columns.push(this.currentFilterObject),this.column.isForeignColumn()||!this.prevFilterObject||!t.isNullOrUndefined(this.prevFilterObject.value)&&""!==this.prevFilterObject.value||"equal"!==this.prevFilterObject.operator&&"notequal"!==this.prevFilterObject.operator||"ODataAdaptor"===f||"ODataV4Adaptor"===f||this.handleExistingFilterCleanup(i),this.column.isForeignColumn()||!t.isNullOrUndefined(this.value)||"equal"!==this.operator&&"notequal"!==this.operator||"ODataAdaptor"===f||"ODataV4Adaptor"===f||(this.handleExistingFilterCleanup(i),"string"===n.type&&this.filterSettings.columns.push({field:i,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:e?"and":"or",value:""}),this.filterSettings.columns.push({field:i,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:e?"and":"or",value:void 0}),this.filterSettings.columns.push({field:i,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:e?"and":"or",value:null}));this.filterSettings.columns=this.filterSettings.columns;this.parent.dataBind()},n.prototype.handleExistingFilterCleanup=function(n){for(var i=0;i<this.filterSettings.columns.length;i++)this.filterSettings.columns[""+i].field===n&&("equal"===this.filterSettings.columns[""+i].operator||"notequal"===this.filterSettings.columns[""+i].operator)&&t.isNullOrUndefined(this.filterSettings.columns[""+i].value)&&(this.filterSettings.columns.splice(i,1),i-=1)},n.prototype.getFilteredColsIndexByField=function(n){for(var i=this.filterSettings.columns,t=0,r=i.length;t<r;t++)if(i[parseInt(t.toString(),10)].uid===n.uid||n.isForeignColumn()&&this.parent.getColumnByUid(n.uid).field===n.foreignKeyValue)return t;return-1},n.prototype.onActionComplete=function(n){var i=this.isRemove?{requestType:"filtering",type:s}:{currentFilterObject:this.currentFilterObject,currentFilteringColumn:t.isNullOrUndefined(this.column)?void 0:this.column.field,columns:this.filterSettings.columns,requestType:"filtering",type:s};this.parent.trigger(s,t.extend(n,i));this.isRemove=!1},n.prototype.wireEvents=function(){t.EventHandler.add(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate,this)},n.prototype.unWireEvents=function(){t.EventHandler.remove(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate)},n.prototype.enableAfterRender=function(n){n.module===this.getModuleName()&&n.enable&&(this.parent.getHeaderTable().classList.add("e-sortfilter"),this.render())},n.prototype.refreshFilterValue=function(){t.isNullOrUndefined(this.parent.modelObserver.boundedEvents)||this.parent.removeEventListener(es,this.refreshFilterValueFn);"FilterBar"!==this.filterSettings.type&&"Excel"!==this.filterSettings.type||!this.filterSettings.columns.length||this.parent.getCurrentViewRecords().length||this.initialEnd()},n.prototype.initialEnd=function(){var r,t,i,n;if(this.parent.off(k,this.initialEnd),this.parent.getColumns().length&&this.filterSettings.columns.length){for(r=this.parent,this.contentRefresh=!1,this.initialLoad=!0,t=0,i=r.filterSettings.columns;t<i.length;t++)n=i[t],this.filterByColumn(n.field,n.operator,n.value,n.predicate,n.matchCase,n.ignoreAccent,n.actualFilterValue,n.actualOperator,n.isForeignKey);this.initialLoad=!1;this.updateFilterMsg();this.contentRefresh=!0}},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(vr,this.setFullScreenDialog,this),this.parent.on(w,this.enableAfterRender,this),this.parent.on(fp,this.onActionComplete,this),this.parent.on(wt,this.onPropertyChanged,this),this.parent.on(rt,this.keyUpHandler,this),this.parent.on(ke,this.columnPositionChanged,this),this.parent.on(bt,this.render,this),this.parent.on(k,this.initialEnd,this),this.parent.on(vi,this.filterMenuClose,this),this.parent.on(ei,this.renderResponsiveChangeAction,this),this.docClickHandler=this.clickHandler.bind(this),t.EventHandler.add(document,"click",this.docClickHandler,this),t.EventHandler.add(this.parent.element,"mousedown",this.refreshClearIcon,this),this.parent.on(ls,this.columnMenuFilter,this),this.parent.on(kt,this.filterIconClickHandler,this),this.parent.on("persist-data-changed",this.initialEnd,this),this.parent.on(ca,this.clickHandler,this),this.parent.on(l,this.destroy,this),this.refreshFilterValueFn=this.refreshFilterValue.bind(this),this.parent.addEventListener(es,this.refreshFilterValueFn))},n.prototype.removeEventListener=function(){t.EventHandler.remove(document,"click",this.docClickHandler);t.EventHandler.remove(this.parent.element,"mousedown",this.refreshClearIcon);this.parent.isDestroyed||(this.parent.off(vr,this.setFullScreenDialog),this.parent.off(w,this.enableAfterRender),this.parent.off(fp,this.onActionComplete),this.parent.off(wt,this.onPropertyChanged),this.parent.off(rt,this.keyUpHandler),this.parent.off(ke,this.columnPositionChanged),this.parent.off(bt,this.render),this.parent.off(ls,this.columnMenuFilter),this.parent.off(vi,this.filterMenuClose),this.parent.off(ei,this.renderResponsiveChangeAction),this.parent.off(kt,this.filterIconClickHandler),this.parent.off(ca,this.clickHandler),this.parent.off(l,this.destroy))},n.prototype.refreshClearIcon=function(n){if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type&&n.target.closest("th")&&n.target.closest("th").classList.contains("e-filterbarcell")&&n.target.classList.contains("e-clear-icon")){var t=n.target.previousElementSibling;pr.Input.setValue(null,t,"Never",!0);"Immediate"===this.filterSettings.mode&&this.removeFilteredColsByField(t.id.slice(0,-14))}},n.prototype.filterMenuClose=function(){this.fltrDlgDetails.isOpen=!1},n.prototype.filterByColumn=function(n,i,r,u,f,e,o,s,h){var c,v=this,l=this.parent,a;if("string"==typeof r&&(r=this.parent.sanitize(r)),this.column=l.grabColumnByFieldFromAllCols(n,h),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&t.isNullOrUndefined(this.column.filterBarTemplate)&&t.isNullOrUndefined(this.column.filterTemplate)&&(i=this.getOperatorName(n)),"like"===i&&r&&-1===r.indexOf("%")&&(r="%"+r+"%"),this.column)if("FilterBar"===this.filterSettings.type&&(c=l.getHeaderContent().querySelector("[id='"+this.column.field+"_filterBarcell']")),t.isNullOrUndefined(this.column.allowFiltering)||this.column.allowFiltering)if(rr(l))l.notify(si,{instance:this,handler:this.filterByColumn,arg1:n,arg2:i,arg3:r,arg4:u,arg5:f,arg6:e,arg7:o,arg8:s});else{if(this.predicate=u||(Array.isArray(r)?"or":"and"),this.value=r,this.matchCase=f||!1,this.ignoreAccent=this.ignoreAccent=t.isNullOrUndefined(e)?this.parent.filterSettings.ignoreAccent:e,this.fieldName=n,this.operator=i,""===(r=t.isNullOrUndefined(r)?r:r.toString())&&(r=null),"number"!==this.column.type&&"date"!==this.column.type||(this.matchCase=!0),c&&"FilterBar"===this.filterSettings.type){if(r&&r.length<1||!this.filterByMethod&&this.checkForSkipInput(this.column,r))return this.filterStatusMsg=r&&r.length<1?"":this.l10n.getConstant("InvalidFilterMessage"),void this.updateFilterMsg();c.value!==r&&(c.value=r)}t.isNullOrUndefined(this.column.format)?this.values[this.column.field]=r:(this.applyColumnFormat(r),this.initialLoad&&"FilterBar"===this.filterSettings.type&&(c.value=this.values[this.column.field]));a={field:this.fieldName,predicate:u,matchCase:f,ignoreAccent:e,operator:this.operator,value:this.value,type:this.column.type};this.parent.filterSettings.columns.filter(function(n){return n.field===v.fieldName}).length>1&&!t.isNullOrUndefined(this.actualPredicate[this.fieldName])?this.actualPredicate[this.fieldName].push(a):this.actualPredicate[this.fieldName]=[a];this.checkAlreadyColFiltered(this.column.field)||this.updateModel()}else this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:this.column.headerText})},n.prototype.applyColumnFormat=function(n){var t=this,i="date"===this.column.type||"datetime"===this.column.type||"dateonly"===this.column.type?new Date(n):parseFloat(n);this.values[this.column.field]=("date"===this.column.type||"datetime"===this.column.type||"dateonly"===this.column.type)&&n&&Array.isArray(this.value)&&n.split(",").length>1?n.split(",").map(function(n){return""===n&&(n=null),t.setFormatForFlColumn(new Date(n),t.column)}):this.setFormatForFlColumn(i,this.column)},n.prototype.skipUid=function(n){for(var i,r=!0,u=Object.keys(n),t=0;t<u.length;t++)i=Object.keys(n[u[parseInt(t.toString(),10)]]),1===i.length&&"uid"===i[0]&&(r=!1);return r},n.prototype.onPropertyChanged=function(n){var i,r,u,f;if(n.module===this.getModuleName())for(i=0,r=Object.keys(n.properties);i<r.length;i++){u=r[i];switch(u){case"columns":if(f={currentFilterObject:this.currentFilterObject,currentFilteringColumn:this.column?this.column.field:void 0,action:"filter",columns:this.filterSettings.columns,requestType:"filtering",type:p,cancel:!1},this.contentRefresh&&this.skipUid(n.properties.columns)){if(this.parent.notify(ot,f),f.cancel){if("CheckBox"===this.filterSettings.type||"Excel"===this.filterSettings.type){this.filterSettings.columns=this.actualData.length<=1?this.checkboxPrevFilterObject:this.checkboxFilterObject;this.actualPredicate[this.column.field]=this.filterSettings.columns;var o=this.parent.getColumnByField(this.column.field),s=this.parent.showColumnMenu&&o.showColumnMenu?".e-columnmenu":".e-icon-filter",e=this.parent.getColumnHeaderByField(this.column.field).querySelector(s);0===this.checkboxPrevFilterObject.length?e.classList.remove("e-filtered"):e.classList.add("e-filtered")}else t.isNullOrUndefined(this.prevFilterObject)?this.filterSettings.columns.splice(this.filterSettings.columns.length-1,1):this.filterSettings.columns[this.filterObjIndex]=this.prevFilterObject;return}this.updateFilterIcon();this.refreshFilterSettings();this.updateFilterMsg();this.updateFilter()}break;case"showFilterBarStatus":n.properties[""+u]?this.updateFilterMsg():this.parent.allowPaging&&this.parent.updateExternalMessage("");break;case"showFilterBarOperator":case"type":this.parent.refreshHeader();this.refreshFilterSettings();"100%"===this.parent.height&&this.parent.scrollModule.refresh()}}},n.prototype.refreshFilterSettings=function(){var n,r,f,u,i;if("FilterBar"===this.filterSettings.type){for(n=0;n<this.filterSettings.columns.length;n++)this.column=this.parent.grabColumnByUidFromAllCols(this.filterSettings.columns[parseInt(n.toString(),10)].uid),r=this.filterSettings.columns[parseInt(n.toString(),10)].value,(r=!t.isNullOrUndefined(r)&&r.toString(),t.isNullOrUndefined(this.column.format))?(f=this.filterSettings.columns[parseInt(n.toString(),10)].field,this.values[""+f]=this.filterSettings.columns[parseInt(n.toString(),10)].value):this.applyColumnFormat(r),(i=this.getFilterBarElement(this.column.field))&&(i.value=""===this.cellText[this.filterSettings.columns[parseInt(n.toString(),10)].field]||t.isNullOrUndefined(this.cellText[this.filterSettings.columns[parseInt(n.toString(),10)].field])?this.filterSettings.columns[parseInt(n.toString(),10)].value:this.cellText[this.column.field]),i&&this.filterSettings.showFilterBarOperator&&["isnull","isnotnull","isempty","isnotempty"].indexOf(this.filterSettings.columns[parseInt(n.toString(),10)].operator)>-1&&(i.value=this.l10n.getConstant({isnull:"IsNull",isnotnull:"NotNull",isnotempty:"IsNotEmpty",isempty:"IsEmpty"}[this.filterSettings.columns[parseInt(n.toString(),10)].operator]));if(0===this.filterSettings.columns.length)for(u=this.parent.getColumns(),n=0;n<u.length;n++)(i=this.getFilterBarElement(u[parseInt(n.toString(),10)].field))&&""!==i.value&&(i.value="",delete this.values[u[parseInt(n.toString(),10)].field])}},n.prototype.updateFilterIcon=function(){if(0===this.filterSettings.columns.length&&this.parent.element.querySelector(".e-filtered"))for(var t=[].slice.call(this.parent.element.getElementsByClassName("e-filtered")),n=0,i=t.length;n<i;n++)t[parseInt(n.toString(),10)].classList.remove("e-filtered")},n.prototype.getFilterBarElement=function(n){var i,r="[id='"+n+"_filterBarcell']";return r&&!t.isNullOrUndefined(this.element)&&(i=this.element.querySelector(r)),i},n.prototype.refreshFilter=function(){this.refreshFilterSettings();this.updateFilterMsg()},n.prototype.clearFiltering=function(n){var s=this,r=bv(this.filterSettings.columns),i,e,u,f,o;if(!t.isNullOrUndefined(n))return this.refresh=!1,n.forEach(function(n){s.removeFilteredColsByField(n,!1)}),this.parent.setProperties({filterSettings:{columns:this.filterSettings.columns}},!0),this.parent.renderModule.refresh(),void(this.refresh=!0);if(rr(this.parent))this.parent.notify(si,{instance:this,handler:this.clearFiltering});else{for(i=0;i<r.length;i++)r[parseInt(i.toString(),10)].uid=r[parseInt(i.toString(),10)].uid||this.parent.getColumnByField(r[parseInt(i.toString(),10)].field).uid;for(e=r.map(function(n){return n.uid}),u=e.filter(function(n,t){return e.indexOf(n)===t}),this.refresh=!1,i=0,f=u.length;i<f;i++)this.removeFilteredColsByField(this.parent.getColumnByUid(u[parseInt(i.toString(),10)]).field,!1);if(this.refresh=!0,u.length&&this.parent.renderModule.refresh(),0===this.parent.filterSettings.columns.length&&this.parent.element.querySelector(".e-filtered"))for(o=[].slice.call(this.parent.element.getElementsByClassName("e-filtered")),i=0,f=o.length;i<f;i++)o[0].classList.remove("e-filtered");this.isRemove=!0;this.filterStatusMsg="";this.updateFilterMsg()}},n.prototype.checkAlreadyColFiltered=function(n){for(var t,i=0,r=this.filterSettings.columns;i<r.length;i++){if(t=r[i],t.field===n&&"Menu"===this.parent.filterSettings.type&&("date"===t.type||"datetime"===t.type))return this.checkDateColumnValue(t.value,this.value)&&t.operator===this.operator&&t.predicate===this.predicate;if(t.field===n&&t.value===this.value&&t.operator===this.operator&&t.predicate===this.predicate)return!0}return!1},n.prototype.checkDateColumnValue=function(n,i){return!(!t.isNullOrUndefined(n)||!t.isNullOrUndefined(i))||n instanceof Date&&i instanceof Date&&n.getTime()===i.getTime()},n.prototype.columnMenuFilter=function(n){this.column=n.col;var i=t.closest(n.target,"#"+n.id);n.isClose&&!i?this.filterModule.closeDialog():i&&this.filterDialogOpen(this.column,n.target)},n.prototype.filterDialogOpen=function(n,t,i,r){this.filterModule&&(this.filterModule.isresetFocus=!1,this.filterModule.closeDialog());this.setFilterModel(n);this.filterModule.openDialog(this.createOptions(n,t,i,r))},n.prototype.createOptions=function(n,i,r,u){var f=this.parent,e=n.filter.dataSource||f.dataSource&&"result"in f.dataSource?f.dataSource:f.getDataModule().dataManager,o=n.filter.type||this.parent.filterSettings.type;return{type:n.type,field:n.field,displayName:n.headerText,dataSource:e,format:n.format,height:800,columns:f.getColumns(),filteredColumns:f.filterSettings.columns,target:i,dataManager:f.getDataModule().dataManager,formatFn:n.getFormatter(),ignoreAccent:f.filterSettings.ignoreAccent,parserFn:n.getParser(),query:f.query,template:n.getFilterItemTemplate(),hideSearchbox:!t.isNullOrUndefined(n.filter.hideSearchbox)&&n.filter.hideSearchbox,handler:this.filterHandler.bind(this),localizedStrings:f.getLocaleConstants(),position:{X:r,Y:u},column:n,foreignKeyValue:n.foreignKeyValue,actualPredicate:this.actualPredicate,localeObj:f.localeObj,isRemote:f.getDataModule().isRemote(),allowCaseSensitive:this.filterSettings.enableCaseSensitivity,isResponsiveFilter:this.parent.enableAdaptiveUI,operator:this.actualPredicate[n.field]&&"Menu"===o?this.actualPredicate[n.field][0].operator:"equal",parentTotalDataCount:f.getDataModule().isRemote()&&f.allowPaging?f.pagerModule.pagerObj.totalRecordsCount:f.getDataModule().isRemote()?f.totalDataRecordsCount:f.getFilteredRecords().length,parentCurrentViewDataCount:f.currentViewData.length,parentFilteredLocalRecords:f.getDataModule().isRemote()?[]:f.getFilteredRecords()}},n.prototype.removeFilteredColsByField=function(n,i){var s,u=this.filterSettings.columns,h,f,e,c;if(rr(this.parent))h={instance:this,handler:this.removeFilteredColsByField,arg1:n,arg2:i},this.parent.notify(si,h);else{f=u.map(function(n){return n.uid});e=f.filter(function(n,t){return f.indexOf(n)===t});t.isNullOrUndefined(this.column)||(c=this.column.isForeignColumn()?this.parent.getColumnByUid(this.column.uid):this.parent.getColumnByField(n),this.filterObjIndex=this.getFilteredColsIndexByField(c),this.prevFilterObject=this.filterSettings.columns[this.filterObjIndex]);for(var l=function(t){var o,f,h,c,l,a;if(u[parseInt(t.toString(),10)].uid=u[parseInt(t.toString(),10)].uid||r.parent.getColumnByField(u[parseInt(t.toString(),10)].field).uid,o=u.length,f=r.parent.grabColumnByUidFromAllCols(e[parseInt(t.toString(),10)]),f.field===n||f.field===f.foreignKeyValue&&f.isForeignColumn()){for(h=r.filterSettings.columns.filter(function(n){return n.uid===f.uid})[0],"FilterBar"!==r.filterSettings.type||i||(c="[id='"+f.field+"_filterBarcell']",(s=r.parent.getHeaderContent().querySelector(c))&&(s.value="",delete r.values[""+n]));o--;)u[parseInt(o.toString(),10)].uid===f.uid&&u.splice(o,1);return l=r.parent.getColumnHeaderByField(f.field),("FilterBar"!==r.filterSettings.type||r.parent.showColumnMenu)&&(a=r.parent.showColumnMenu&&f.showColumnMenu?".e-columnmenu":".e-icon-filter",l.querySelector(a).classList.remove("e-filtered")),r.isRemove=!0,r.actualPredicate[""+n]&&delete r.actualPredicate[""+n],r.values[""+n]&&delete r.values[""+n],r.refresh&&r.parent.notify(ot,{requestType:"filtering",type:p,currentFilterObject:h,currentFilterColumn:f,action:"clearFilter"}),"break"}},r=this,o=0,a=e.length;o<a&&"break"!==l(o);o++);this.updateFilterMsg()}},n.prototype.getModuleName=function(){return"filter"},n.prototype.keyUpHandlerImmediate=function(n){13!==n.keyCode&&this.keyUpHandler(n)},n.prototype.keyUpHandler=function(n){var r=this.parent,u=n.target,o,e,f,s;if(u&&t.matches(u,".e-filterbar input")){if(o=t.closest(u,"th.e-filterbarcell"),this.column=r.getColumnByUid(o.getAttribute("data-mappinguid")),!this.column)return;"altDownArrow"===n.action&&this.parent.filterSettings.showFilterBarOperator&&(e=t.closest(u,"span").querySelector(".e-filterbaroperator"),e.ej2_instances[0].showPopup(),e.focus());"Immediate"!==this.filterSettings.mode&&(13!==n.keyCode||n.target.classList.contains("e-filterbaroperator"))||9===n.keyCode||this.column.filterTemplate||(this.value=u.value.trim(),this.processFilter(n))}"altDownArrow"!==n.action||"FilterBar"===this.filterSettings.type||i(n.target,"e-toolbar")||!t.isNullOrUndefined(this.parent.element.querySelector(".e-filter-popup"))||this.parent.enableAdaptiveUI||(f=r.focusModule.currentInfo.element,f&&f.classList.contains("e-headercell")&&!f.classList.contains("e-stackedheadercell")&&(s=r.getColumnByUid(f.firstElementChild.getAttribute("data-mappinguid")),this.openMenuByField(s.field),this.parent.focusModule.clearIndicator()));"escape"===n.action&&"Menu"===this.filterSettings.type&&this.filterModule&&(this.parent.showColumnMenu&&this.filterModule.isDialogOpen&&(this.parent.isColumnMenuFilterClosing=!0),this.filterModule.closeDialog(),r.notify(uu,{}),this.parent.showColumnMenu||r.notify(uu,{}))},n.prototype.updateCrossIcon=function(n){n.value.length&&n.nextElementSibling.classList.remove("e-hide")},n.prototype.updateFilterMsg=function(){var i,f;if("FilterBar"===this.filterSettings.type){var u=this.parent,e=void 0,r=this.filterSettings.columns,n=void 0;if(!this.filterSettings.showFilterBarStatus)return;if(r.length>0&&this.filterStatusMsg!==this.l10n.getConstant("InvalidFilterMessage"))for(this.filterStatusMsg="",i=0;i<r.length;i++)(n=u.grabColumnByUidFromAllCols(r[parseInt(i.toString(),10)].uid)||u.grabColumnByFieldFromAllCols(r[parseInt(i.toString(),10)].field,r[parseInt(i.toString(),10)].isForeignKey),i&&(this.filterStatusMsg+=" && "),t.isNullOrUndefined(n.format))?this.filterStatusMsg+=n.headerText+": "+this.values[n.field]:(f="date"===n.type||"datetime"===n.type||"dateonly"===n.type?this.valueFormatter.fromView(this.values[n.field],n.getParser(),"dateonly"===n.type?"date":n.type):this.values[n.field],e="date"!==n.type&&"datetime"!==n.type&&"dateonly"!==n.type?this.serviceLocator.getService("valueFormatter").toView(f,n.getParser()).toString():this.setFormatForFlColumn(f,n),this.filterStatusMsg+=n.headerText+": "+e);u.allowPaging&&(u.updateExternalMessage(this.filterStatusMsg),"100%"===this.parent.height&&this.parent.scrollModule.refresh());this.filterStatusMsg=""}},n.prototype.setFormatForFlColumn=function(n,i){var r=this.serviceLocator.getService("valueFormatter").toView(n,i.getFormatter());return t.isNullOrUndefined(r)?r:r.toString()},n.prototype.checkForSkipInput=function(n,t){var r,i,f,e;if("number"===n.type)(u.DataUtil.operatorSymbols[""+t]||this.skipNumberInput.indexOf(t)>-1)&&(r=!0);else if("string"===n.type)for(i=0,f=t;i<f.length;i++)e=f[i],this.skipStringInput.indexOf(e)>-1&&(r=!0);return r},n.prototype.processFilter=function(n){this.stopTimer();this.startTimer(n)},n.prototype.startTimer=function(n){var t=this;this.timer=window.setInterval(function(){t.onTimerTick()},13===n.keyCode?0:this.filterSettings.immediateModeDelay)},n.prototype.stopTimer=function(){window.clearInterval(this.timer)},n.prototype.onTimerTick=function(){var r,u="[id='"+this.column.field+"_filterBarcell']",n=this.element.querySelector(u),i;(n||(n=this.parent.getHeaderContent().querySelector(u)),this.cellText[this.column.field]=n.value,this.stopTimer(),t.isNullOrUndefined(this.column.filterBarTemplate))?r=JSON.parse(JSON.stringify(n.value)):(i=this.column.filterBarTemplate.read,"string"==typeof i&&(i=t.getValue(i,window)),t.isNullOrUndefined(i)||(this.value=i.call(this,n)));t.isNullOrUndefined(this.value)||""===this.value?this.removeFilteredColsByField(this.column.field):(this.validateFilterValue(this.value),this.filterByMethod=!1,this.filterByColumn(this.column.field,this.operator,this.value,this.predicate,this.filterSettings.enableCaseSensitivity,this.ignoreAccent,this.column.isForeignColumn()),this.filterByMethod=!0,n.value=r,this.updateFilterMsg())},n.prototype.validateFilterValue=function(n){var u,r,i;switch(this.matchCase=this.filterSettings.enableCaseSensitivity,this.column.type){case"number":for(this.operator=this.column.filter.operator?this.column.filter.operator:this.filterOperators.equal,u=[">","<","=","!"],i=0;i<n.length;i++)if(u.indexOf(n[parseInt(i.toString(),10)])>-1){r=i;break}this.getOperator(n.substring(r));0!==r&&(this.value=n.substring(0,r));""!==this.value&&n.length>=1&&(this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type));isNaN(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage"));break;case"date":case"datetime":this.operator=this.filterOperators.equal;""===this.value||this.value instanceof Date||(this.getOperator(n),this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type),t.isNullOrUndefined(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")));break;case"string":this.matchCase=!1;this.operator=this.column.filter.operator?this.column.filter.operator:-1!==n.indexOf("*")||-1!==n.indexOf("?")||-1!==n.indexOf("%3f")?this.filterOperators.wildCard:-1!==n.indexOf("%")?this.filterOperators.like:this.filterOperators.startsWith;break;case"boolean":"true"===n.toLowerCase()||"1"===n?this.value=!0:"false"===n.toLowerCase()||"0"===n?this.value=!1:n.length&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage"));this.operator=this.filterOperators.equal;break;default:this.operator=this.column.filter.operator?this.column.filter.operator:this.filterOperators.equal}},n.prototype.getOperator=function(n){var r=n.charAt(0),f=n.slice(0,2),i=t.extend({"=":this.filterOperators.equal,"!":this.filterOperators.notEqual},u.DataUtil.operatorSymbols);(i.hasOwnProperty(r)||i.hasOwnProperty(f))&&(this.operator=i[""+r],this.value=n.substring(1),this.operator||(this.operator=i[""+f],this.value=n.substring(2)));this.operator!==this.filterOperators.lessThan&&this.operator!==this.filterOperators.greaterThan||"="===this.value.charAt(0)&&(this.operator=this.operator+"orequal",this.value=this.value.substring(1))},n.prototype.columnPositionChanged=function(){this.parent.filterSettings.type},n.prototype.getLocalizedCustomOperators=function(){var n=[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterthan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",text:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnull",text:this.l10n.getConstant("IsNull")},{value:"isnotnull",text:this.l10n.getConstant("NotNull")}];this.customOperators={stringOperator:[{value:"startswith",text:this.l10n.getConstant("StartsWith")},{value:"endswith",text:this.l10n.getConstant("EndsWith")},{value:"contains",text:this.l10n.getConstant("Contains")},{value:"equal",text:this.l10n.getConstant("Equal")},{value:"isempty",text:this.l10n.getConstant("IsEmpty")},{value:"doesnotstartwith",text:this.l10n.getConstant("NotStartsWith")},{value:"doesnotendwith",text:this.l10n.getConstant("NotEndsWith")},{value:"doesnotcontain",text:this.l10n.getConstant("NotContains")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnotempty",text:this.l10n.getConstant("IsNotEmpty")},{value:"like",text:this.l10n.getConstant("Like")}],numberOperator:n,dateOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterthan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",text:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnull",text:this.l10n.getConstant("IsNull")},{value:"isnotnull",text:this.l10n.getConstant("NotNull")}],datetimeOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterthan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",text:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnull",text:this.l10n.getConstant("IsNull")},{value:"isnotnull",text:this.l10n.getConstant("NotNull")}],dateonlyOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterthan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",text:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnull",text:this.l10n.getConstant("IsNull")},{value:"isnotnull",text:this.l10n.getConstant("NotNull")}],booleanOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"notequal",text:this.l10n.getConstant("NotEqual")}]};"Menu"===this.filterSettings.type&&(this.customOperators.stringOperator.push({value:"in",text:this.l10n.getConstant("In")},{value:"notin",text:this.l10n.getConstant("NotIn")}),this.customOperators.booleanOperator.push({value:"in",text:this.l10n.getConstant("In")},{value:"notin",text:this.l10n.getConstant("NotIn")}),this.customOperators.numberOperator.push({value:"in",text:this.l10n.getConstant("In")},{value:"notin",text:this.l10n.getConstant("NotIn")}))},n.prototype.openMenuByField=function(n){var t=this.parent,f,i,r,u;t.enableAdaptiveUI?this.showCustomFilter(!1):(f=t.getColumnByField(n),i=t.getColumnHeaderByField(n).querySelector(".e-filtermenudiv"),i&&(r=t.element.getBoundingClientRect(),u=i.getBoundingClientRect(),this.filterDialogOpen(f,i,u.right-r.left,u.bottom-r.top)))},n.prototype.filterIconClickHandler=function(n){var r=n.target,t;if(r.classList.contains("e-filtermenudiv")&&("Menu"===this.parent.filterSettings.type||"CheckBox"===this.parent.filterSettings.type||"Excel"===this.parent.filterSettings.type)){if(t=this.parent.getColumnByUid(i(r,"e-headercell").firstElementChild.getAttribute("data-mappinguid")),this.column=t,this.fltrDlgDetails.field===t.field&&this.fltrDlgDetails.isOpen)return;this.filterModule&&this.filterModule.closeDialog();this.fltrDlgDetails={field:t.field,isOpen:!0};this.openMenuByField(t.field)}},n.prototype.clickHandler=function(n){var f,e;if("FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&(i(n.target,"e-filterbarcell")&&n.target.classList.contains("e-input-group-icon")&&(f=t.closest(n.target,"div").querySelector(".e-filterbaroperator"),f?f.focus():n.target.focus()),n.target.classList.contains("e-list-item")&&(e=document.querySelector(".e-popup-open").getAttribute("id").replace("_popup",""),-1!==e.indexOf("grid-column")&&t.closest(document.getElementById(e),"div").querySelector(".e-filtertext").focus())),"Immediate"===this.filterSettings.mode||"Menu"===this.parent.filterSettings.type||"CheckBox"===this.parent.filterSettings.type||"Excel"===this.parent.filterSettings.type){var r=n.target,l=r.classList.contains("e-day"),h=i(this.parent.element,"e-dialog"),c=!1,o=i(r,"e-popup"),s=document.getElementById(this.parent.element.id+"_e-popup"),u=this.parent.element.classList.contains("e-device")?document.querySelector(".e-filter-popup"):s&&s.querySelector(".e-filter-popup")?s.querySelector(".e-filter-popup"):this.parent.element.querySelector(".e-filter-popup");if(h&&o&&(c=h.id===o.id),this.filterModule&&u&&(i(r,"e-excel-ascending")||i(r,"e-excel-descending"))&&this.filterModule.closeDialog(r),i(r,"e-filter-popup")||r.classList.contains("e-filtermenudiv"))return;!this.filterModule||i(r,"e-date-overflow")||i(r,"e-popup-wrapper")||t.closest(r,".e-filter-item.e-menu-item")||l||i(r,"e-search-wrapper")&&!u||(c&&!i(r,"e-filter-popup")&&!i(r,"e-popup-flmenu")||!o&&u)&&(this.filterModule.isresetFocus=i(r,"e-grid")&&i(r,"e-grid").id===this.parent.element.id&&!(i(r,"e-search-wrapper")&&u),this.filterModule.closeDialog(r))}},n.prototype.filterHandler=function(n){var e,o,i,r,t;for(this.actualPredicate[n.field]=n.actualPredicate,this.actualData=Object.keys(this.actualPredicate),e=new u.DataManager(this.filterSettings.columns),o=(new u.Query).where("field",this.filterOperators.equal,n.field),this.checkboxFilterObject=e.dataSource.json,this.checkboxPrevFilterObject=e.executeLocal(o),i=0;i<this.checkboxPrevFilterObject.length;i++){for(r=-1,t=0;t<this.filterSettings.columns.length;t++)if(this.checkboxPrevFilterObject[parseInt(i.toString(),10)].field===this.filterSettings.columns[parseInt(t.toString(),10)].field){r=t;break}-1!==r&&this.filterSettings.columns.splice(r,1)}this.values[n.field]&&delete this.values[n.field];var s=this.parent.getColumnByField(n.field),h=this.parent.showColumnMenu&&s.showColumnMenu?".e-columnmenu":".e-icon-filter",f=this.parent.getColumnHeaderByField(n.field).querySelector(h);"filtering"===n.action?(this.filterSettings.columns=this.filterSettings.columns.concat(n.filterCollection),this.filterSettings.columns.length&&f&&f.classList.add("e-filtered")):(f&&f.classList.remove("e-filtered"),n.requestType="filtering",this.parent.renderModule.refresh(n));this.parent.dataBind()},n.prototype.updateFilter=function(){var t=this.filterSettings.columns,n,i;for(this.actualPredicate={},n=0;n<t.length;n++)this.column=this.parent.getColumnByField(t[parseInt(n.toString(),10)].field)||po(t[parseInt(n.toString(),10)].field,this.parent.getForeignKeyColumns()),i=t[parseInt(n.toString(),10)].field,this.parent.getColumnByField(t[parseInt(n.toString(),10)].field)||(i=po(t[parseInt(n.toString(),10)].field,this.parent.getForeignKeyColumns()).field),this.refreshFilterIcon(i,t[parseInt(n.toString(),10)].operator,t[parseInt(n.toString(),10)].value,t[parseInt(n.toString(),10)].type,t[parseInt(n.toString(),10)].predicate,t[parseInt(n.toString(),10)].matchCase,t[parseInt(n.toString(),10)].ignoreAccent,t[parseInt(n.toString(),10)].uid)},n.prototype.refreshFilterIcon=function(n,t,i,r,u,f,e,o){var s={field:n,predicate:u,matchCase:f,ignoreAccent:e,operator:t,value:i,type:r},h;this.actualPredicate[""+n]?this.actualPredicate[""+n].push(s):this.actualPredicate[""+n]=[s];h=o?this.parent.grabColumnByUidFromAllCols(o).field:n;this.addFilteredClass(h)},n.prototype.addFilteredClass=function(n){var t,i=this.parent.getColumnByField(n);this.parent.showColumnMenu&&i.showColumnMenu?t=this.parent.getColumnHeaderByField(n).querySelector(".e-columnmenu"):i&&(t=this.parent.getColumnHeaderByField(n).querySelector(".e-icon-filter"));t&&t.classList.add("e-filtered")},n.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},n.prototype.getOperatorName=function(n){return document.getElementById(this.parent.getColumnByField(n).uid).ej2_instances[0].value},n.prototype.renderCheckboxOnFilterMenu=function(){return this.filterModule.renderCheckBoxMenu()},n}(),er={root:"e-rhandler",suppress:"e-rsuppress",icon:"e-ricon",helper:"e-rhelper",header:"th.e-headercell",cursor:"e-rcursor"},wy=function(){function n(n){this.tapped=!1;this.isDblClk=!0;this.resizeProcess=!1;this.isCancelAutoFit=!1;this.parent=n;this.parent.isDestroyed||(this.widthService=new lv(n),this.addEventListener())}return n.prototype.autoFitColumns=function(n,i,r){var u=this,f=null==n||n.length<=0?this.parent.getColumns().map(function(n){return n.autoFit=!0,n.field}):"string"==typeof n?[n]:n;this.parent.isAutoFitColumns=!0;t.isNullOrUndefined(n)||"object"!=typeof n||0===n.length?"string"==typeof n&&""!==n.trim()&&(this.parent.getColumnByField(n).autoFit=!0):n.forEach(function(n){u.parent.getColumnByField(n)&&(u.parent.getColumnByField(n).autoFit=!0)});this.parent.enableAdaptiveUI&&this.parent.element.classList.add("e-grid-autofit");this.findColumn(f,i,r)},n.prototype.autoFit=function(){var u=this.parent.getColumns(),r=0,i=u.filter(function(n){return t.isNullOrUndefined(n.maxWidth)||r++,!0===n.autoFit}).map(function(n){return n.field||n.headerText}),n;i.length>0&&!this.parent.preventAutoFit&&this.autoFitColumns(i);n=this.parent.getContentTable();this.parent.allowResizing&&r&&("Auto"===this.parent.resizeSettings.mode||"Normal"===this.parent.resizeSettings.mode&&!this.parent.autoFit&&0===i.length)?this.widthService.setWidthToTable(-1===n.style.width.indexOf("px")):this.parent.autoFit&&"Auto"===this.parent.resizeSettings.mode&&this.widthService.setWidthToTable();-1!==n.style.width.indexOf("px")&&n.getBoundingClientRect().width<n.parentElement.clientWidth&&t.addClass([this.parent.getHeaderTable(),n],["e-tableborder"])},n.prototype.getCellElementsByColumnIndex=function(n){return this.parent.frozenRows?[].slice.call(this.parent.getHeaderTable().querySelectorAll("td.e-rowcell:nth-child("+(n+1)+"):not(.e-groupcaption):not(.e-detailcell)")).concat([].slice.call(this.parent.getContentTable().querySelectorAll("td.e-rowcell:nth-child("+(n+1)+"):not(.e-groupcaption):not(.e-detailcell)"))):[].slice.call(this.parent.getContentTable().querySelectorAll("td.e-rowcell:nth-child("+(n+1)+"):not(.e-groupcaption):not(.e-detailcell)"))},n.prototype.resizeColumn=function(n,i,r,u,f){var s,p,o=this.parent,w=0,c=o.getHeaderTable(),h=o.getContentTable(),ct=it,lt=fu,b=0,g=r||this.parent.getUidByColumnField(n),nt=this.parent.getNormalizedColumnIndex(g),at=c.querySelector('[data-mappinguid="'+g+'"]').parentElement.cloneNode(!0),tt=this.getCellElementsByColumnIndex(nt),rt=this.parent.getColumnIndexByField(n),a,e,k,y,l,st;if(t.isNullOrUndefined(o.getFooterContent())||(s=o.getFooterContentTable()),s&&(p=s.querySelectorAll("td:nth-child("+(nt+1)+"):not(.e-groupcaption)")),a=[].slice.call(c.querySelector("tr").getElementsByClassName("e-grouptopleftcell")),a.length>0)for(e=0;e<a.length;e++)b+=a[parseInt(e.toString(),10)].offsetWidth;k=h.querySelector(".e-detailrowcollapse")||h.querySelector(".e-detailrowexpand");(this.parent.detailTemplate||this.parent.childGrid)&&k&&(b+=k.offsetWidth);var vt=[at],ut=[],d=[];if(s)for(e=0;e<p.length;e++)d[parseInt(e.toString(),10)]=p[parseInt(e.toString(),10)].cloneNode(!0);for(e=0;e<tt.length;e++)ut[parseInt(e.toString(),10)]=tt[parseInt(e.toString(),10)].cloneNode(!0);var yt=this.createTable(c,vt,"e-gridheader"),ft=null,et=null;o.getCurrentViewRecords().length&&(et=this.createTable(h,ut,ct,u,f));d.length&&(ft=this.createTable(s,d,lt));var v=o.getColumns()[parseInt(rt.toString(),10)],pt=v.width=t.formatUnit(Math.max(yt,et,ft)),ot=v.maxWidth&&parseFloat(v.maxWidth.toString());if(parseInt(pt,10)>ot&&(v.width=ot),this.widthService.setColumnWidth(o.getColumns()[parseInt(rt.toString(),10)]),!1===o.getColumns().some(function(n){return(n.visible||o.groupSettings.columns.length)&&(null===n.width||void 0===n.width||n.width.length<=0)}))for(y=o.getColumns(),e=0;e<y.length;e++)y[parseInt(e.toString(),10)].visible&&(w+=parseFloat(y[parseInt(e.toString(),10)].width));l=w+b;w>0&&((this.parent.detailTemplate||this.parent.childGrid)&&this.widthService.setColumnWidth(new ht({width:"30px"})),"Auto"===this.parent.resizeSettings.mode&&(l="100%"),c.style.width=t.formatUnit(l),h.style.width=t.formatUnit(l),t.isNullOrUndefined(s)||(s.style.width=t.formatUnit(l)));o.isFrozenGrid()&&o.enableColumnVirtualization&&this.widthService.refreshFrozenScrollbar();st=c.offsetWidth;h.parentElement.scrollWidth>st?(t.isNullOrUndefined(h.querySelector(".e-emptyrow"))?t.addClass([c,h],["e-tableborder"]):(t.addClass([c],["e-tableborder"]),t.removeClass([h],["e-tableborder"])),t.removeClass([o.element],["e-left-shadow","e-right-shadow"])):(t.removeClass([c,h],["e-tableborder"]),o.getVisibleFrozenRightCount()&&t.addClass([o.element],"e-right-shadow"));t.isNullOrUndefined(s)||s.classList.add("e-tableborder")},n.prototype.destroy=function(){var n=this.parent.element;n&&(n.querySelector("."+st)||n.querySelector("."+it))&&(this.widthService=null,this.unwireEvents(),this.removeEventListener())},n.prototype.getModuleName=function(){return"resize"},n.prototype.findColumn=function(n,i,r){for(var u=0;u<n.length;u++){var e=n[parseInt(u.toString(),10)],f=this.parent.getColumnIndexByField(e),o=this.parent.getColumns()[parseInt(f.toString(),10)];f>-1&&!t.isNullOrUndefined(o)&&!0===o.visible&&this.resizeColumn(e,f,null,i,r)}this.parent.allowTextWrap&&this.parent.notify(ru,{"case":"refreshHeight",isModeChg:!0});this.parent.isFrozenGrid()&&this.refreshResizefrzCols(!0,!0)},n.prototype.createTable=function(n,t,i,r,u){var e,c,o,f,l,s,h,a;for(void 0===r&&(r=1),void 0===u&&(u=t.length),r>u&&(r^=u,r^=u^=r),e=this.parent.createElement("div"),c=this.parent.enableAdaptiveUI?" e-bigger":"",e.className=this.parent.element.className+c,e.style.cssText="display: inline-block;visibility:hidden;position:absolute",o=this.parent.createElement("div"),o.className=i,f=this.parent.createElement("table",{attrs:{role:"grid"}}),f.className=n.className,f.classList.add("e-resizetable"),f.style.cssText="table-layout: auto;width: auto",l=this.parent.createElement("tr"),s=r<=0?1:r;s<=(u>t.length?t.length:u);s++)h=l.cloneNode(),h.className=n.querySelector("tr").className,h.appendChild(t[parseInt((s-1).toString(),10)]),f.appendChild(h);return o.appendChild(f),e.appendChild(o),document.body.appendChild(e),a=f.getBoundingClientRect().width,document.body.removeChild(e),Math.ceil(a)},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(bt,this.refreshHeight,this),this.parent.on(fv,this.refreshResizePosition,this),this.parent.on(pt,this.wireEvents,this),this.parent.on(k,this.autoFit,this),this.parent.on(fo,this.refreshHeight,this),this.parent.on(l,this.destroy,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(bt,this.refreshHeight),this.parent.off(fv,this.refreshResizePosition),this.parent.off(pt,this.wireEvents),this.parent.off(fo,this.refreshHeight),this.parent.off(l,this.destroy))},n.prototype.render=function(){this.unwireEvents();this.wireEvents();this.setHandlerHeight()},n.prototype.refreshHeight=function(){if(this.parent.getHeaderTable()){for(var t=this.getResizeHandlers(),n=0;n<t.length;n++)t[parseInt(n.toString(),10)].parentElement.offsetHeight>0&&(t[parseInt(n.toString(),10)].style.height="100%");this.setHandlerHeight()}},n.prototype.wireEvents=function(){t.EventHandler.add(this.parent.getHeaderContent(),t.Browser.touchStartEvent,this.touchResizeStart,this);t.EventHandler.add(this.parent.getHeaderContent(),no,this.callAutoFit,this)},n.prototype.unwireEvents=function(){t.EventHandler.remove(this.parent.getHeaderContent(),t.Browser.touchStartEvent,this.touchResizeStart);t.EventHandler.remove(this.parent.getHeaderContent(),no,this.callAutoFit)},n.prototype.getResizeHandlers=function(){return[].slice.call(this.parent.getHeaderTable().getElementsByClassName(er.root))},n.prototype.setHandlerHeight=function(){for(var t=[].slice.call(this.parent.getHeaderTable().getElementsByClassName(er.suppress)),n=0;n<t.length;n++)t[parseInt(n.toString(),10)].style.height="100%"},n.prototype.callAutoFit=function(n){var i,r;if(t.Browser.isDevice&&"function"==typeof n.preventDefault&&this.isDblClk&&n.preventDefault(),n.target.classList.contains("e-rhandler")&&!this.isCancelAutoFit){if(i=this.getTargetColumn(n),i.columns)return;(this.resizeColumn(i.field,this.parent.getNormalizedColumnIndex(i.uid),i.uid),this.parent.isFrozenGrid()&&this.refreshResizefrzCols(!0,!0),this.isDblClk&&"mousedown"===n.type)&&(r={e:n,column:i},this.parent.trigger(os,r));t.closest(n.target,er.header).classList.add("e-resized")}},n.prototype.touchResizeStart=function(n){if(!at.timer)return at.timer=setTimeout(function(){at.timer=null},300),this.resizeStart(n);clearTimeout(at.timer);at.timer=null;this.callAutoFit(n)},n.prototype.resizeStart=function(n){var u=this,e,i,f,o,r;if(n.target.classList.contains("e-rhandler")&&(this.isCancelAutoFit=!1,e={e:n,column:this.getTargetColumn(n)},this.parent.trigger(tg,e,function(n){if(n.cancel||u.parent.isEdit)return u.cancelResizeAction(),void(u.isCancelAutoFit=!0)}),!this.isCancelAutoFit)){if(!this.helper){if(0===this.getScrollBarWidth()){for(this.resizeProcess=!0,i=0,f=this.refreshColumnWidth();i<f.length;i++)o=f[i],this.widthService.setColumnWidth(o);if(this.parent.allowGrouping)for(r=0;r<this.parent.groupSettings.columns.length;r++)this.widthService.setColumnWidth(new ht({width:"30px"}),r);this.parent.isRowDragable()&&this.widthService.setColumnWidth(new ht({width:"30px"}));this.widthService.setWidthToTable();this.resizeProcess=!1}this.refreshStackedColumnWidth();this.element=n.target;this.parentElementWidth=this.parent.element.getBoundingClientRect().width;this.appendHelper();this.column=this.getTargetColumn(n);this.pageX=this.getPointX(n);this.minMove=this.column.getFreezeTableName()===oh?this.parent.enableRtl?(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(t.isNullOrUndefined(this.column.width)?"":this.column.width.toString()):parseFloat(t.isNullOrUndefined(this.column.width)?"":this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.parent.enableRtl?parseFloat(this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(t.isNullOrUndefined(this.column.width)?"":this.column.width.toString());this.minMove+=this.pageX}t.EventHandler.add(document,t.Browser.touchEndEvent,this.resizeEnd,this);t.EventHandler.add(this.parent.element,t.Browser.touchMoveEvent,this.resizing,this);t.Browser.isDevice&&!this.helper.classList.contains(er.icon)?(this.helper.classList.add(er.icon),t.EventHandler.add(document,t.Browser.touchStartEvent,this.removeHelper,this),t.EventHandler.add(this.helper,t.Browser.touchStartEvent,this.resizeStart,this)):this.updateCursor("add")}},n.prototype.cancelResizeAction=function(n){n&&(t.EventHandler.remove(this.parent.element,t.Browser.touchMoveEvent,this.resizing),t.EventHandler.remove(document,t.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove"));t.Browser.isDevice&&!t.isNullOrUndefined(this.helper)&&(t.EventHandler.remove(document,t.Browser.touchStartEvent,this.removeHelper),t.EventHandler.remove(this.helper,t.Browser.touchStartEvent,this.resizeStart));t.isNullOrUndefined(this.helper)||t.detach(this.helper);this.refresh()},n.prototype.getWidth=function(n,t,i){return t&&n<t?t:i&&n>i?i:n},n.prototype.updateResizeEleHeight=function(){for(var t=[].slice.call(this.parent.getHeaderContent().getElementsByClassName("e-rhandler")),n=0;n<t.length;n++)t[parseInt(n.toString(),10)].style.height=this.element.parentElement.offsetHeight+"px"},n.prototype.getColData=function(n,i){return{width:parseFloat(t.isNullOrUndefined(this.widthService.getWidth(n))||"auto"===this.widthService.getWidth(n)?"0":this.widthService.getWidth(n).toString())+i,minWidth:n.minWidth?parseFloat(n.minWidth.toString()):null,maxWidth:n.maxWidth?parseFloat(n.maxWidth.toString()):null}},n.prototype.refreshResizeFixedCols=function(n){for(var u,f,c,l,r,t,o,i=this.parent.getColumns(),s=this.parent.enableColumnVirtualization?this.parent.translateX:0,h=[].slice.call(this.parent.getHeaderContent().querySelector("tbody").querySelectorAll(".e-fixedfreeze")).concat([].slice.call(this.parent.getContent().querySelectorAll(".e-fixedfreeze"))),e=0;e<h.length;e++){if(u=h[parseInt(e.toString(),10)],f=void 0,u.classList.contains("e-summarycell")?(c=u.getAttribute("data-mappinguid"),f=this.parent.getColumnByUid(c)):(l=parseInt(u.getAttribute("aria-colindex"),10)-1,f=i[parseInt(l.toString(),10)]),r=0,"Left"===n){for(this.parent.getVisibleFrozenLeftCount()?r=30*this.parent.getIndentCount():"Right"===this.parent.getFrozenMode()&&(r=30*this.parent.groupSettings.columns.length),t=0;t<i.length;t++)if(f.index>i[parseInt(t.toString(),10)].index){if(f.uid===i[parseInt(t.toString(),10)].uid)break;("Left"===i[parseInt(t.toString(),10)].freeze||i[parseInt(t.toString(),10)].isFrozen||"Fixed"===i[parseInt(t.toString(),10)].freeze)&&i[parseInt(t.toString(),10)].visible&&(r+=parseFloat(i[parseInt(t.toString(),10)].width.toString()))}g(u,(0===r?r:r-1)-s,this.parent.enableRtl,"Left")}if("Right"===n){for(r="Right"===this.parent.getFrozenMode()&&this.parent.isRowDragable()?30:0,t=i.length-1;t>=0&&f.uid!==i[parseInt(t.toString(),10)].uid;t--)"Right"!==i[parseInt(t.toString(),10)].freeze&&"Fixed"!==i[parseInt(t.toString(),10)].freeze||i[parseInt(t.toString(),10)].visible&&(r+=parseFloat(i[parseInt(t.toString(),10)].width.toString()));o=0;u.colSpan>1&&(o=this.calculateColspanWidth(i,u,f.index));g(u,r-o+s,this.parent.enableRtl,"Right")}}},n.prototype.calculateColspanWidth=function(n,t,i){for(var u=0,r=i+1;r<i+t.colSpan;r++)u+=parseInt(n[parseInt(r.toString(),10)].width.toString(),10);return u},n.prototype.refreshResizePosition=function(){this.refreshResizefrzCols(!0)},n.prototype.refreshResizefrzCols=function(n,t){var s=this,h=this.parent.enableColumnVirtualization?this.parent.translateX:0,e,u,i,o,r;if(n||"Left"===this.column.freeze||this.column.isFrozen||this.column.columns&&"Left"===ef(this.column)){for(e=30*this.parent.getIndentCount(),u=this.parent.getColumns().filter(function(n){return"Left"===n.freeze||n.isFrozen}),n&&!t||this.frzHdrRefresh("Left"),i=0;i<u.length;i++)(n||u[parseInt(i.toString(),10)].index>this.column.index)&&((this.parent.frozenRows?[].slice.call(this.parent.getHeaderContent().querySelectorAll('td[aria-colindex="'+(i+1)+'"]')).concat([].slice.call(this.parent.getContent().querySelectorAll('td[aria-colindex="'+(i+1)+'"]'))):[].slice.call(this.parent.getContent().querySelectorAll('td[aria-colindex="'+(i+1)+'"]'))).filter(function(n){g(n,e-h,s.parent.enableRtl,"Left")}),this.parent.enableColumnVirtualization&&(u[parseInt(i.toString(),10)].valueX=e)),u[parseInt(i.toString(),10)].visible&&(e+=parseFloat(u[parseInt(i.toString(),10)].width.toString()));this.refreshResizeFixedCols("Left")}if(n||"Right"===this.column.freeze||this.column.columns&&"Right"===ef(this.column)){o="Right"===this.parent.getFrozenMode()&&this.parent.isRowDragable()?30:0;r=this.parent.getColumns();n&&!t||this.frzHdrRefresh("Right");var c=r.filter(function(n){return"Right"===n.freeze}),l=function(n){(f.parent.frozenRows?[].slice.call(f.parent.getHeaderContent().querySelectorAll('td[aria-colindex="'+(n+1)+'"]')).concat([].slice.call(f.parent.getContent().querySelectorAll('td[aria-colindex="'+(n+1)+'"]'))):[].slice.call(f.parent.getContent().querySelectorAll('td[aria-colindex="'+(n+1)+'"]'))).filter(function(t){var i=0;t.colSpan>1&&(i=s.calculateColspanWidth(r,t,r[parseInt(n.toString(),10)].index));g(t,o-i+h,s.parent.enableRtl,"Right")});f.parent.enableColumnVirtualization&&(r[parseInt(n.toString(),10)].valueX=o);r[parseInt(n.toString(),10)].visible&&(o+=parseFloat(r[parseInt(n.toString(),10)].width.toString()))},f=this;for(i=r.length-1;i>=r.length-c.length;i--)l(i);this.refreshResizeFixedCols("Right")}this.column&&("Fixed"===this.column.freeze||this.column.columns&&"Fixed"===ef(this.column))&&(this.refreshResizeFixedCols("Left"),this.refreshResizeFixedCols("Right"),this.frzHdrRefresh("Left"),this.frzHdrRefresh("Right"));this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&this.parent.getContent().querySelector(".e-groupcaptionrow")&&this.refreshGroupCaptionRow()},n.prototype.refreshGroupCaptionRow=function(){for(var i,t=[].slice.call(this.parent.getContent().querySelectorAll(".e-groupcaptionrow")),n=0;n<t.length;n++)i=t[parseInt(n.toString(),10)],i.querySelector(".e-summarycell")&&gb(i,this.parent)},n.prototype.frzHdrRefresh=function(n){var o=this,r=this.parent.enableColumnVirtualization?this.parent.translateX:0,e,u,h,i;if("Left"===n)for(e=[].slice.call(this.parent.getHeaderContent().querySelector("thead").querySelectorAll("tr")),u=0;u<e.length;u++)for(var s=[].slice.call(e[parseInt(u.toString(),10)].querySelectorAll(".e-leftfreeze,.e-fixedfreeze")),c=function(n){var c=s[parseInt(n.toString(),10)],h,l;if(c.classList.contains("e-rowdragheader")||c.classList.contains("e-dragheadercell")||c.classList.contains("e-grouptopleftcell"))return"continue";var e=t.getParticularCol(c),u=t.parent.getColumns(),i=0,f=[];if(t.parent.aggregates.length&&t.parent.getFooterContent()&&(t.parent.getContent().querySelectorAll(".e-summaryrow").length&&[].slice.call(t.parent.getContent().querySelectorAll(".e-summaryrow")).filter(function(n){f.push(n.querySelector('[data-mappinguid="'+e.uid+'"]'))}),f=f.concat([].slice.call(t.parent.getFooterContent().querySelectorAll('[data-mappinguid="'+e.uid+'"]')))),c.classList.contains("e-fixedfreeze")){for(t.parent.getVisibleFrozenLeftCount()?i=30*t.parent.getIndentCount():"Right"===t.parent.getFrozenMode()&&(i=30*t.parent.groupSettings.columns.length),h=0;h<u.length;h++)if(e.index>u[parseInt(h.toString(),10)].index){if(e.uid===u[parseInt(h.toString(),10)].uid)break;("Left"===u[parseInt(h.toString(),10)].freeze||u[parseInt(h.toString(),10)].isFrozen||"Fixed"===u[parseInt(h.toString(),10)].freeze)&&u[parseInt(h.toString(),10)].visible&&(i+=parseInt(u[parseInt(h.toString(),10)].width.toString(),10))}f&&f.length&&f.filter(function(n){g(n,i-r,o.parent.enableRtl,"Left")});g(c,(0===i?i:i-1)-r,t.parent.enableRtl,"Left")}else{if(i=30*t.parent.getIndentCount(),0===e.index)f&&f.length&&f.filter(function(n){g(n,i-r,o.parent.enableRtl,"Left")}),g(c,i-r,t.parent.enableRtl,"Left"),t.parent.enableColumnVirtualization&&(e.valueX=i);else{for(l=0;l<u.length&&!(e.index<u[parseInt(l.toString(),10)].index||e.uid===u[parseInt(l.toString(),10)].uid);l++)u[parseInt(l.toString(),10)].visible&&(i+=parseInt(u[parseInt(l.toString(),10)].width.toString(),10));f&&f.length&&f.filter(function(n){g(n,i-r,o.parent.enableRtl,"Left")});g(c,i-r,t.parent.enableRtl,"Left");t.parent.enableColumnVirtualization&&(e.valueX=i)}ae(t.parent,e,c)}},t=this,f=0;f<s.length;f++)c(f);if("Right"===n)for(e=[].slice.call(this.parent.getHeaderContent().querySelector("thead").querySelectorAll("tr")),u=0;u<e.length;u++)for(s=[].slice.call(e[parseInt(u.toString(),10)].querySelectorAll(".e-rightfreeze, .e-fixedfreeze")),h=function(n){var l=s[parseInt(n.toString(),10)],u=i.getParticularCol(l),t=i.parent.getColumns(),e=0,c=[],f,h;if(i.parent.aggregates.length&&i.parent.getFooterContent()&&(i.parent.getContent().querySelectorAll(".e-summaryrow").length&&[].slice.call(i.parent.getContent().querySelectorAll(".e-summaryrow")).filter(function(n){c.push(n.querySelector('[data-mappinguid="'+u.uid+'"]'))}),c=c.concat([].slice.call(i.parent.getFooterContent().querySelectorAll('[data-mappinguid="'+u.uid+'"]')))),l.classList.contains("e-fixedfreeze")){for(e="Right"===i.parent.getFrozenMode()&&i.parent.isRowDragable()?30:0,f=t.length-1;f>=0;f--)if(u.index<t[parseInt(f.toString(),10)].index){if(u.columns&&ec(u,t[parseInt(f.toString(),10)].uid)||u.index>t[parseInt(f.toString(),10)].index)break;"Right"!==t[parseInt(f.toString(),10)].freeze&&"Fixed"!==t[parseInt(f.toString(),10)].freeze||t[parseInt(f.toString(),10)].visible&&(e+=parseFloat(t[parseInt(f.toString(),10)].width.toString()))}c.length&&c.filter(function(n){g(n,e+r,o.parent.enableRtl,"Right")});g(l,e+r,i.parent.enableRtl,"Right")}else{for(e="Right"===i.parent.getFrozenMode()&&i.parent.isRowDragable()?30:0,h=t.length-1;h>=0&&!(u.columns&&ec(u,t[parseInt(h.toString(),10)].uid)||u.index>t[parseInt(h.toString(),10)].index||u.uid===t[parseInt(h.toString(),10)].uid);h--)t[parseInt(h.toString(),10)].visible&&(e+=parseInt(t[parseInt(h.toString(),10)].width.toString(),10));c.length&&c.filter(function(n){g(n,e+r,o.parent.enableRtl,"Right")});g(l,e+r,i.parent.enableRtl,"Right");i.parent.enableColumnVirtualization&&(u.valueX=e)}},i=this,f=s.length-1;f>=0;f--)h(f)},n.prototype.getParticularCol=function(n){var t=n.classList.contains("e-filterbarcell")?n.getAttribute("data-mappinguid"):n.querySelector("[data-mappinguid]").getAttribute("data-mappinguid");return this.parent.getColumnByUid(t)},n.prototype.resizing=function(n){var k=this,l,o,a,s,f,v,p,w,h,c,y,b;if(t.Browser.isDevice&&"function"==typeof n.preventDefault&&n.preventDefault(),!t.isNullOrUndefined(this.column)){l=0;t.isNullOrUndefined(this.column)&&(l=i(this.element,"th").offsetWidth);this.parent.allowTextWrap&&(this.updateResizeEleHeight(),this.setHelperHeight());var r=this.getPointX(n),u=this.parent.enableRtl?-(r-this.pageX):r-this.pageX,d=parseFloat(this.column.width.toString()),e=this.getColData(this.column,u);if(e.width||(e.width=t.closest(this.element,"th").offsetWidth),o=this.getWidth(e.width,e.minWidth,e.maxWidth),this.parent.log("resize_min_max",{column:this.column,width:o}),(!this.parent.enableRtl&&this.minMove>=r||this.parent.enableRtl&&this.minMove<=r)&&(o=this.column.minWidth?parseFloat(this.column.minWidth.toString()):10,this.pageX=r=this.minMove),o!==parseFloat(t.isNullOrUndefined(this.column.width)||"auto"===this.column.width?l.toString():this.column.width.toString())){if(this.pageX=r,this.column.width=t.formatUnit(o),a={e:n,column:this.column},this.parent.trigger(ig,a),a.cancel)return void this.cancelResizeAction(!0);for(s=[this.column],f=[this.column],this.column.columns&&(s=this.getSubColumns(this.column,[]),s=this.calulateColumnsWidth(s,!1,u),f=this.calulateColumnsWidth(s,!0,u)),v=0,p=this.parent.getColumns().filter(function(n){return n.visible&&(v+=parseInt(n.width.toString(),10)),n.visible&&(n.maxWidth||n.minWidth)}),"Auto"===this.parent.resizeSettings.mode&&p.length&&v<this.parentElementWidth&&(w=this.parent.getColumns().filter(function(n){return n.visible&&n.uid!==k.column.uid}),h=this.distributeColWidth(w,u,0),Math.round(h.usedWidth)!==Math.abs(u)&&(f[0].width=d+h.usedWidth*Math.sign(u)),f=f.concat(h.columns)),this.resizeProcess=!0,c=0,y=f;c<y.length;c++)b=y[c],this.widthService.setColumnWidth(b,null,"resize");this.resizeProcess=!1;this.updateHelper()}this.parent.isFrozenGrid()&&this.refreshResizefrzCols();this.isDblClk=!1}},n.prototype.distributeColWidth=function(n,t,i){for(var r,u,o,l,a=t/n.length,s=Math.abs(a),h=[],f=[],e=0,c=0,v=n;c<v.length;c++)r=v[c],u=parseFloat(r.width.toString())-a,r.minWidth&&u<parseInt(r.minWidth.toString(),10)?(e+=o=parseFloat((parseInt(r.minWidth.toString(),10)-u).toFixed(3)),i+=s-o,r.width=r.minWidth,h.push(r)):r.maxWidth&&u>parseInt(r.maxWidth.toString(),10)?(e+=o=parseFloat((u-parseInt(r.maxWidth.toString(),10)).toFixed(3)),i+=s-o,r.width=r.maxWidth,h.push(r)):(i+=s,r.width=u,f.push(r));return l=e&&f.length?this.distributeColWidth(f,e*Math.sign(t),i):{columns:f,usedWidth:i},{columns:h.concat(l.columns),usedWidth:l.usedWidth}},n.prototype.calulateColumnsWidth=function(n,i,r){for(var f,e,h=[],o=0,c=n;o<c.length;o++){for(var u=c[o],l=0,s=0;s<n.length;s++)l+=parseFloat(n[parseInt(s.toString(),10)].width.toString());f=this.getColData(u,parseFloat(u.width)*r/l);e=this.getWidth(f.width,f.minWidth,f.maxWidth);e!==parseFloat(u.width.toString())&&(i&&(u.width=t.formatUnit(e<1?1:e)),h.push(u))}return h},n.prototype.getSubColumns=function(n,t){for(var i,r=0,u=n.columns;r<u.length;r++)i=u[r],!1!==i.visible&&i.allowResizing&&(i.columns?this.getSubColumns(i,t):t.push(i));return t},n.prototype.resizeEnd=function(n){var i,o,f,e,r,u,s;this.helper&&!this.parent.isDestroyed&&(i=this.parent,i.isFrozenGrid()&&this.refreshResizePosition(),t.EventHandler.remove(this.parent.element,t.Browser.touchMoveEvent,this.resizing),t.EventHandler.remove(document,t.Browser.touchEndEvent,this.resizeEnd),t.Browser.isDevice&&(t.EventHandler.remove(document,t.Browser.touchStartEvent,this.removeHelper),t.EventHandler.remove(this.helper,t.Browser.touchStartEvent,this.resizeStart)),this.updateCursor("remove"),t.detach(this.helper),o={e:n,column:this.column},f=this.parent.getContent().querySelector("."+lt),f.scrollHeight>f.clientHeight&&(this.parent.scrollModule.setPadding(),f.style.overflowY="scroll"),at.timer&&this.isDblClk||(this.parent.trigger(os,o),t.closest(this.element,".e-headercell").classList.add("e-resized")),this.isFrozenColResized=!1,this.parent.allowTextWrap&&(this.updateResizeEleHeight(),this.parent.notify(wl,{"case":"textwrap"})),r=i.getHeaderTable(),u=i.getContentTable(),t.isNullOrUndefined(i.getFooterContent())||(e=i.getFooterContentTable()),s=r.offsetWidth,i.getContent().scrollWidth>s?(t.isNullOrUndefined(u.querySelector(".e-emptyrow"))?t.addClass([r,u],["e-tableborder"]):(t.addClass([r],["e-tableborder"]),t.removeClass([u],["e-tableborder"])),t.removeClass([i.element],["e-left-shadow","e-right-shadow"])):(t.removeClass([r,u],["e-tableborder"]),i.getVisibleFrozenRightCount()&&t.addClass([i.element],"e-right-shadow")),t.isNullOrUndefined(e)||e.classList.add("e-tableborder"),this.refresh(),this.doubleTapEvent(n),this.isDblClk=!0)},n.prototype.getPointX=function(n){return n.touches&&n.touches.length?n.touches[0].pageX:n.pageX},n.prototype.refreshColumnWidth=function(){for(var n,u=this.parent.getColumns(),t=0,f=[].slice.apply(this.parent.getHeaderContent().querySelectorAll("th.e-headercell"));t<f.length;t++)for(var i=f[t],r=0,e=u;r<e.length;r++)if(n=e[r],i.querySelector("[data-mappinguid]")&&i.querySelector("[data-mappinguid]").getAttribute("data-mappinguid")===n.uid&&n.visible){n.width=i.getBoundingClientRect().width;break}return u},n.prototype.refreshStackedColumnWidth=function(){for(var i,n=0,t=this.parent.getStackedColumns(this.parent.columns);n<t.length;n++)i=t[n],i.width=this.getStackedWidth(i,0)},n.prototype.getStackedWidth=function(n,t){for(var i,r=0,u=n.columns;r<u.length;r++)i=u[r],!1!==i.visible&&(i.columns?t=this.getStackedWidth(i,t):t+=parseFloat(i.width.toString()));return t},n.prototype.getTargetColumn=function(n){var i=t.closest(n.target,er.header),r=(i=i.querySelector(".e-headercelldiv")||i.querySelector(".e-stackedheadercelldiv")).getAttribute("data-mappinguid");return this.parent.getColumnByUid(r)},n.prototype.updateCursor=function(n){var r=[].slice.call(this.parent.getHeaderContent().querySelectorAll("th")),t,i;for(r.push(this.parent.element),t=0,i=r;t<i.length;t++)i[t].classList[""+n](er.cursor)},n.prototype.refresh=function(){this.column=null;this.pageX=null;this.element=null;this.helper=null},n.prototype.appendHelper=function(){this.helper=this.parent.createElement("div",{className:er.helper});this.parent.element.appendChild(this.helper);this.setHelperHeight()},n.prototype.setHelperHeight=function(){for(var i,f=this.parent.getContent().offsetHeight-this.getScrollBarWidth(),r=t.closest(this.element,er.header),u=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr")),n=u.indexOf(r.parentElement);n<u.length&&n>-1;n++)f+=u[parseInt(n.toString(),10)].offsetHeight;i=this.calcPos(r);i.left+=this.parent.enableRtl?-1:r.offsetWidth-2;this.helper.style.cssText="height: "+f+"px; top: "+i.top+"px; left:"+Math.floor(i.left)+"px;";this.parent.enableVirtualization&&this.helper.classList.add("e-virtual-rhandler")},n.prototype.getScrollBarWidth=function(n){var t=this.parent.getContent().firstChild;return t.scrollHeight>t.clientHeight&&n||t.scrollWidth>t.clientWidth?oi():0},n.prototype.removeHelper=function(n){var i=n.target.classList;i.contains(er.root)||i.contains(er.icon)||!this.helper||(t.EventHandler.remove(document,t.Browser.touchStartEvent,this.removeHelper),t.EventHandler.remove(this.helper,t.Browser.touchStartEvent,this.resizeStart),t.detach(this.helper),this.refresh())},n.prototype.updateHelper=function(){var n,i=t.closest(this.element,er.header);(n=Math.floor(this.calcPos(i).left+(this.parent.enableRtl?-1:i.offsetWidth-2)))>this.parentElementWidth&&(n=this.parentElementWidth-2);this.helper.style.left=n+"px"},n.prototype.calcPos=function(n){for(var r={top:0,left:0},f=n.getBoundingClientRect(),u=n.ownerDocument,t=i(n,"e-grid")||u.documentElement;t&&(t===u.body||t===u.documentElement)&&"static"===t.style.position;)t=t.parentNode;return t&&t!==n&&1===t.nodeType&&(r=t.getBoundingClientRect()),{top:f.top-r.top,left:f.left-r.left}},n.prototype.doubleTapEvent=function(n){var t=this;this.getUserAgent()&&this.isDblClk&&(this.tapped?(clearTimeout(this.tapped),this.callAutoFit(n),this.tapped=null):this.tapped=setTimeout(function(){t.tapped=null},300))},n.prototype.getUserAgent=function(){var n=t.Browser.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(n)},n.prototype.timeoutHandler=function(){this.tapped=null},n}(),pht=function(){function n(n){this.idx=0;this.parent=n;this.parent.isDestroyed||(this.parent.on(wf,this.headerDrop,this),this.parent.on(w,this.enableAfterRender,this),this.parent.on(op,this.onActionComplete,this),this.parent.on(ku,this.drag,this),this.parent.on(af,this.dragStart,this),this.parent.on(ll,this.dragStop,this),this.parent.on(wf,this.headerDrop,this),this.parent.on(bt,this.createReorderElement,this),this.parent.on(rt,this.keyPressHandler,this),this.parent.on(l,this.destroy,this))}return n.prototype.chkDropPosition=function(n,i){var r=this.parent.getColumnByUid(i.firstElementChild.getAttribute("data-mappinguid")),u=!r||!r.lockColumn;return(n.parentElement.isEqualNode(i.parentElement)||this.parent.enableColumnVirtualization||this.parent.isFrozenGrid()&&Array.prototype.indexOf.call(t.closest(n,"thead").children,n.parentElement)===Array.prototype.indexOf.call(t.closest(i,"thead").children,i.parentElement))&&this.targetParentContainerIndex(n,i)>-1&&u},n.prototype.chkDropAllCols=function(n,t){for(var i,r=this.getHeaderCells();!i&&r.length>0;)i=n!==r.pop()&&this.targetParentContainerIndex(n,t)>-1;return i},n.prototype.findColParent=function(n,t,i){for(var u,r=0,f=t.length;r<f;r++){if(n===t[parseInt(r.toString(),10)])return!0;if(t[parseInt(r.toString(),10)].columns){if(u=i.length,i.push(t[parseInt(r.toString(),10)]),this.findColParent(n,t[parseInt(r.toString(),10)].columns,i))return!0;i.splice(u,i.length-u)}}return!1},n.prototype.getColumnsModel=function(n,i){for(var u=[],f=[],r=0,e=n.length;r<e;r++)t.isNullOrUndefined(n[parseInt(r.toString(),10)])||((n[parseInt(r.toString(),10)].visible||i)&&u.push(n[parseInt(r.toString(),10)]),n[parseInt(r.toString(),10)].columns&&(f=f.concat(n[parseInt(r.toString(),10)].columns)));return f.length&&(u=u.concat(this.getColumnsModel(f))),u},n.prototype.headerDrop=function(n){var c=this.parent,y=(this.element.querySelector(".e-headercelldiv")||this.element.querySelector(".e-stackedheadercelldiv")).getAttribute("data-mappinguid"),r=c.getColumnByUid(y),i,f,u,s,h,a,v;if(t.closest(n.target,"th")&&(t.isNullOrUndefined(r)||r.allowReordering&&!r.lockColumn)){if(i=t.closest(n.target,".e-headercell"),f=(i.querySelector(".e-headercelldiv")||i.querySelector(".e-stackedheadercelldiv")).getAttribute("data-mappinguid"),!t.isNullOrUndefined(f)&&(u=c.getColumnByUid(f),t.isNullOrUndefined(u)||!u.allowReordering||u.lockColumn))return void this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),column:r,destColumn:u});if(i&&this.chkDropPosition(this.element,i)&&this.chkDropAllCols(this.element,i))if(this.parent.enableColumnVirtualization){var e=this.parent.columns,p=this.element.querySelector(".e-headercelldiv").getAttribute("data-mappinguid"),w=this.parent.columns.filter(function(n){return n.uid===p}),o=null,b=w[0],l=i.querySelector(".e-headercelldiv").getAttribute("data-mappinguid");e.some(function(n,t){return n.uid===l&&(o=t,n.uid===l)});t.isNullOrUndefined(o)||this.moveColumns(o,b)}else s=this.targetParentContainerIndex(this.element,i),h=this.element.firstElementChild.getAttribute("data-mappinguid"),(this.destElement=i,this.parent.notify(ftt,{ele:i}),h)?this.moveColumns(s,this.parent.getColumnByUid(h)):(a=this.getHeaderCells(),v=wv(this.element,a),e=this.getColumnsModel(this.parent.columns),this.moveColumns(s,e[parseInt(v.toString(),10)]))}else this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),column:r})},n.prototype.isActionPrevent=function(n){return rr(n)},n.prototype.moveColumns=function(n,t,i,r){var e=this.parent,u,h,c,l,a;if(this.isActionPrevent(e))e.notify(si,{instance:this,handler:this.moveColumns,arg1:n,arg2:t});else{var s=this.getColParent(t,this.parent.columns),f=s?s.columns:this.parent.columns,o=bh(t,f);if((s||this.parent.lockcolPositionCount)&&!i&&!this.parent.enableColumnVirtualization){for(u=0;u<f.length;u++)if(f[parseInt(u.toString(),10)].field===t.field){o=u;break}if(h=this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute("data-mappinguid")),h){for(u=0;u<f.length;u++)if(f[parseInt(u.toString(),10)].field===h.field){n=u;break}}else for(u=0;u<f.length;u++)f[parseInt(u.toString(),10)].headerText===this.destElement.innerText.trim()&&(n=u)}if(e.allowReordering&&o!==n&&-1!==o&&-1!==n&&(f.splice(n,0,f.splice(o,1)[0]),c={column:t,destIndex:n,columns:f,parent:s,cancel:!1},e.notify(utt,c),!c.cancel)){if(this.parent.isFrozenGrid())if(this.parent.frozenColumns)for(u=0;u<f.length;u++)"Left"===f[parseInt(u.toString(),10)].freeze&&(f[parseInt(u.toString(),10)].freeze=void 0);else s&&s.columns||(t.freeze=this.parent.getFrozenLeftCount()>n?"Left":f.length-this.parent.getFrozenRightColumnsCount()<=n?"Right":"Fixed"===t.freeze?"Fixed":void 0);if(!1!==r&&(l={type:p,requestType:"reorder",fromIndex:n,toIndex:o,toColumnUid:t.uid,cancel:!1},e.notify(ot,l),l.cancel))return void f.splice(o,0,f.splice(n,1)[0]);(e.getColumns(!0),e.preventAutoFit=!0,e.notify(ke,{fromIndex:n,toIndex:o}),this.parent.isFrozenGrid())&&(a=this.parent.columns,this.idx=0,this.refreshColumnIndex(a),this.parent.notify(rh,{}))}}},n.prototype.refreshColumnIndex=function(n){for(var t=0;t<n.length;t++)n[parseInt(t.toString(),10)].index=this.idx,this.idx++,n[parseInt(t.toString(),10)].columns&&n[parseInt(t.toString(),10)].columns.length&&this.refreshColumnIndex(n[parseInt(t.toString(),10)].columns)},n.prototype.targetParentContainerIndex=function(n,t){var i=this.parent.columns,r=this.getHeaderCells(),o=this.parent.getStackedColumns(i),u=[],f,e;return o.length&&(u=this.getAllStackedheaderParentColumns(r)),f=o.length&&u.length?this.getColumnsModel(u):this.getColumnsModel(i,!0),e=this.getColParent(f[wv(n,r)],i),i=e?e.columns:i,bh(f[wv(t,r)],i)},n.prototype.getAllStackedheaderParentColumns=function(n){for(var i=[],t=0;t<n.length;t++)n[parseInt(t.toString(),10)].classList.contains("e-hide")?(n.splice(t,1),t--):n[parseInt(t.toString(),10)].closest("thead").firstChild===n[parseInt(t.toString(),10)].parentElement&&i.push(this.parent.getColumnByUid(n[parseInt(t.toString(),10)].firstElementChild.getAttribute("data-mappinguid")));return i},n.prototype.getHeaderCells=function(){return[].slice.call(this.parent.element.getElementsByClassName("e-headercell"))},n.prototype.getColParent=function(n,t){var i=[];return this.findColParent(n,t,i),i[i.length-1]},n.prototype.reorderSingleColumn=function(n,i){var r=this.parent.enableColumnVirtualization?this.parent.columns.filter(function(t){return t.field===n})[0]:this.parent.getColumnByField(n),u=this.parent.enableColumnVirtualization?this.parent.columns.filter(function(n){return n.field===i})[0]:this.parent.getColumnByField(i);if((t.isNullOrUndefined(r)||r.allowReordering&&!r.lockColumn)&&(t.isNullOrUndefined(u)||u.allowReordering&&!u.lockColumn)){var f=u,e=this.getColParent(f,this.parent.columns),o=bh(f,e?e.columns:this.parent.columns);o>-1&&this.moveColumns(o,r,!0)}else this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),column:r,destColumn:u})},n.prototype.reorderMultipleColumns=function(n,i){var e=this.parent.getColumnIndexByField(i),o=this.parent.getColumnByField(i),r,u,s,f;if(!(e<0)&&(t.isNullOrUndefined(o)||o.allowReordering&&!o.lockColumn)){for(r=0;r<n.length;r++)if(u=this.parent.getColumnByField(n[parseInt(r.toString(),10)]),!t.isNullOrUndefined(u)&&(!u.allowReordering||u.lockColumn))return;for(r=0;r<n.length;r++)u=this.parent.getColumnByIndex(e),s=this.getColParent(u,this.parent.columns),f=bh(u,s?s.columns:this.parent.columns),f>-1&&this.moveColumns(f,this.parent.getColumnByField(n[parseInt(r.toString(),10)]),!0,!0),this.parent.getColumnIndexByField(n[r+1])>=f&&e++}},n.prototype.moveTargetColumn=function(n,t){t>-1&&this.moveColumns(t,n,!0)},n.prototype.reorderSingleColumnByTarget=function(n,t){this.moveTargetColumn(this.parent.getColumnByField(n),t)},n.prototype.reorderMultipleColumnByTarget=function(n,t){for(var i=0;i<n.length;i++)this.reorderSingleColumnByTarget(n[parseInt(i.toString(),10)],t)},n.prototype.reorderColumns=function(n,t){"string"==typeof n?(this.reorderSingleColumn(n,t),this.fromCol=n):(this.reorderMultipleColumns(n,t),this.fromCol=n[0])},n.prototype.reorderColumnByModel=function(n,i){if(!t.isNullOrUndefined(n)&&!t.isNullOrUndefined(i)&&n instanceof ht&&i instanceof ht){if(!n.allowReordering||n.lockColumn||!i.allowReordering||i.lockColumn)return void this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),column:n,destColumn:i});var r=this.targetParentContainerIndex(this.parent.getColumnHeaderByUid(n.uid),this.parent.getColumnHeaderByUid(i.uid));this.moveTargetColumn(n,r)}},n.prototype.reorderColumnByIndex=function(n,t){this.moveTargetColumn(this.parent.getColumnByIndex(n),t)},n.prototype.reorderColumnByTargetIndex=function(n,t){"string"==typeof n?this.reorderSingleColumnByTarget(n,t):this.reorderMultipleColumnByTarget(n,t)},n.prototype.enableAfterRender=function(n){n.module===this.getModuleName()&&n.enable&&this.createReorderElement()},n.prototype.createReorderElement=function(n){var t,i,r;n&&n.args&&n.args.isXaxis&&this.setDisplay("none");t=this.parent.element.querySelector("."+ct);i=this.parent.createElement("div",{className:"e-icons e-icon-reorderuparrow e-reorderuparrow"});i.style.display="none";this.upArrow=i;t.appendChild(this.upArrow);r=this.parent.createElement("div",{className:"e-icons e-icon-reorderdownarrow e-reorderdownarrow"});r.style.display="none";this.downArrow=r;t.appendChild(this.downArrow)},n.prototype.onActionComplete=function(n){this.parent.preventAutoFit=!1;this.parent.trigger(s,t.extend(n,{type:s}));var i=this.fromCol&&this.parent.getColumnHeaderByField(this.fromCol);i&&this.parent.focusModule.onClick({target:i},!0)},n.prototype.destroy=function(){var n=this.parent.element;!this.parent.isDestroyed&&n&&(n.querySelector("."+st)||n.querySelector("."+it))&&(this.upArrow.parentNode&&t.remove(this.upArrow),this.downArrow.parentNode&&t.remove(this.downArrow),this.parent.off(wf,this.headerDrop),this.parent.off(w,this.enableAfterRender),this.parent.off(op,this.onActionComplete),this.parent.off(ku,this.drag),this.parent.off(af,this.dragStart),this.parent.off(ll,this.dragStop),this.parent.off(bt,this.createReorderElement),this.parent.off(rt,this.keyPressHandler),this.parent.off(l,this.destroy))},n.prototype.keyPressHandler=function(n){var i=this.parent,t;switch(/(Mac)/i.test(navigator.platform)&&n.metaKey&&("leftArrow"===n.action?n.action="ctrlLeftArrow":"rightArrow"===n.action&&(n.action="ctrlRightArrow")),n.action){case"ctrlLeftArrow":case"ctrlRightArrow":if(t=i.focusModule.currentInfo.element,t&&t.classList.contains("e-headercell")){var r=i.getColumnByUid(t.firstElementChild.getAttribute("data-mappinguid")),u=i.getVisibleColumns(),e=u.indexOf(r),f="ctrlLeftArrow"===n.action?u[e-1]:u[e+1];f&&f.field&&r.field&&this.reorderColumns(r.field,f.field)}}},n.prototype.drag=function(n){var r=this.parent,u=n.target,f=t.closest(u,".e-headercell:not(.e-stackedHeaderCell)"),e=r.element.querySelector(".e-cloneproperties"),s=r.getContent().firstElementChild,h=this.x>cu(n.event).x+s.scrollLeft,o;(t.removeClass([].slice.call(r.getHeaderTable().getElementsByClassName("e-reorderindicate")),["e-reorderindicate"]),this.setDisplay("none"),this.stopTimer(),t.classList(e,["e-defaultcur"],["e-notallowedcur"]),this.updateScrollPostion(n.event),f&&!f.isEqualNode(this.element))?(o=(u=f).querySelector(".e-headercelldiv, .e-stackedheadercelldiv").getAttribute("data-mappinguid"),this.chkDropPosition(this.element,u)&&this.chkDropAllCols(this.element,u)&&r.getColumnByUid(o).allowReordering&&n.column.allowReordering?(this.updateArrowPosition(u,h),t.classList(u,["e-allowDrop","e-reorderindicate"],[])):r.allowGrouping&&i(n.target,"e-groupdroparea")||t.classList(e,["e-notallowedcur"],["e-defaultcur"])):f&&f.isEqualNode(this.element)&&!(r.allowGrouping&&n.column.allowGrouping||n.column.allowReordering)?t.classList(e,["e-notallowedcur"],["e-defaultcur"]):f||r.allowGrouping&&i(n.target,"e-groupdroparea")||t.classList(e,["e-notallowedcur"],["e-defaultcur"]);n.column.allowReordering&&!n.column.lockColumn&&r.trigger(ku,{target:u,draggableType:"headercell",column:n.column})},n.prototype.updateScrollPostion=function(n){var i=this,t=cu(n).x,r=this.parent.element.getBoundingClientRect(),u=r.right,f=r.left,e=this.parent.getContent().firstElementChild;t>f&&t<f+35?this.timer=window.setInterval(function(){i.setScrollLeft(e,!0)},50):t<u&&t>u-35&&(this.timer=window.setInterval(function(){i.setScrollLeft(e,!1)},50))},n.prototype.setScrollLeft=function(n,t){var i=n.scrollLeft;n.scrollLeft=n.scrollLeft+(t?-5:5);i!==n.scrollLeft&&this.setDisplay("none")},n.prototype.stopTimer=function(){window.clearInterval(this.timer)},n.prototype.updateArrowPosition=function(n,t){var i=n.getBoundingClientRect(),r=this.parent.element.getBoundingClientRect(),u;t&&i.left<r.left||!t&&i.right>r.right||(u=this.parent.getHeaderContent().classList.contains("e-sticky"),this.upArrow.style.top=u?i.top+i.height+"px":i.top+i.height-r.top+"px",this.downArrow.style.top=u?i.top-7+"px":i.top-r.top-7+"px",this.upArrow.style.left=this.downArrow.style.left=u?(t?i.left:i.right)-4+"px":(t?i.left:i.right)-r.left-4+"px",this.setDisplay(""))},n.prototype.dragStart=function(n){var r=this.parent,t=n.target,u;(this.element=t.classList.contains("e-headercell")?t:i(t,"e-headercell"),n.column.allowReordering&&!n.column.lockColumn)&&(u=r.getContent().firstElementChild,this.x=cu(n.event).x+u.scrollLeft,r.trigger(af,{target:t,draggableType:"headercell",column:n.column}))},n.prototype.dragStop=function(n){var i=this.parent;this.setDisplay("none");this.stopTimer();n.cancel||i.trigger(vf,{target:n.target,draggableType:"headercell",column:n.column});t.removeClass([].slice.call(i.getHeaderTable().getElementsByClassName("e-reorderindicate")),["e-reorderindicate"])},n.prototype.setDisplay=function(n){this.upArrow.style.display=n;this.downArrow.style.display=n},n.prototype.getModuleName=function(){return"reorder"},n}(),wht=function(){function n(n){var r=this;this.selectedRows=[];this.isOverflowBorder=!0;this.selectedRowColls=[];this.isRefresh=!0;this.isReplaceDragEle=!0;this.istargetGrid=!1;this.helper=function(){var n=r.parent,u=r.draggable.currentStateTarget,f,s,l,o,e,a,y,p,v;if(t.isNullOrUndefined(u)||!n.rowDropSettings.targetID||t.isNullOrUndefined(u.classList)||u.classList.contains("e-rowcell")||(u=i(u,"e-rowcell")),f=r.parent.createElement("div",{className:"e-cloneproperties e-draganddrop e-grid e-dragclone"}),f.style.height="auto",s=r.parent.createElement("table",{attrs:{role:"grid"}}),l=r.parent.createElement(h,{attrs:{role:"rowgroup"}}),document.getElementsByClassName("e-griddragarea").length||n.rowDropSettings.targetID&&(!t.isNullOrUndefined(u)&&!u.classList.contains("e-selectionbackground")&&"Single"!==n.selectionSettings.type||!i(u,"e-rowcell"))||!n.rowDropSettings.targetID&&!i(u,"e-rowdragdrop"))return!1;if(n.rowDropSettings.targetID&&"Row"===n.selectionSettings.mode&&"Single"===n.selectionSettings.type&&n.selectRow(parseInt(r.draggable.currentStateTarget.parentElement.getAttribute(c),10)-1),r.startedRow=t.closest(u,"tr").cloneNode(!0),r.parent.isFrozenGrid())for(o=[].slice.call(r.startedRow.querySelectorAll(".e-rowcell")),e=0;e<o.length;e++)t.removeClass([o[parseInt(e.toString(),10)]],["e-leftfreeze","e-freezeleftborder","e-fixedfreeze","e-freezerightborder","e-rightfreeze","e-unfreeze"]),o[parseInt(e.toString(),10)].removeAttribute("style");return(r.processArgs(u),a={selectedRow:r.rows,dragelement:u,cloneElement:f,cancel:!1,data:r.rowData},y=n.getSelectedRows(),n.trigger(hd,a),a.cancel)?!1:((kv(r.startedRow,".e-indentcell"),kv(r.startedRow,".e-detailrowcollapse"),kv(r.startedRow,".e-detailrowexpand"),n.enableInfiniteScrolling&&n.infiniteScrollSettings.enableCache||r.removeCell(r.startedRow,rf),r.startedRow.querySelectorAll(".e-active").forEach(function(n){return n.classList.remove("e-active")}),l.appendChild(r.startedRow),n.getSelectedRowIndexes().length>1&&r.startedRow.hasAttribute("aria-selected"))&&(p=r.parent.createElement("span",{className:"e-dropitemscount",innerHTML:""+y.length}),f.appendChild(p)),v=t.closest(u,"tr").querySelector(".e-icon-rowdragicon"),v&&v.classList.add("e-dragstartrow"),s.appendChild(l),f.appendChild(s),n.element.appendChild(f),f)};this.dragStart=function(n){var i=r.parent,e,l,a,s,u;if((i.enableVirtualization||i.infiniteScrollSettings.enableCache)&&i.allowGrouping&&i.groupSettings.columns.length&&!t.isNullOrUndefined(n.target.closest("tr")))for(var o=n.dragElement.querySelectorAll("tr"),h=n.target.closest("tr").querySelectorAll(".e-indentcell"),f=0;f<o.length;f++)for(e=0;e<h.length;e++)l=h[parseInt(e.toString(),10)].cloneNode(!0),o[parseInt(f.toString(),10)].insertBefore(l,o[parseInt(f.toString(),10)].firstElementChild);(i.element.classList.contains("e-childgrid")&&(r.getParentGrid(i.element).appendChild(n.dragElement),i.element.appendChild(i.createElement("div",{className:"e-drag-ref"}))),document.body.classList.add("e-prevent-select"),document.getElementsByClassName("e-griddragarea").length)||(a=n.target,s=r.parent.element.querySelector(".e-dropitemscount"),r.parent.getSelectedRecords().length>1&&s&&(s.style.left=r.parent.element.querySelector(".e-cloneproperties table").offsetWidth-5+"px"),r.processArgs(a),i.trigger(cd,{rows:r.rows,target:n.target,draggableType:"rows",fromIndex:parseInt(r.rows[0].getAttribute(c),10)-1,data:r.rowData[0]&&Object.keys(r.rowData[0]).length>0?r.rowData:r.currentViewData()}),r.dragStartData=r.rowData,u=document.getElementById(i.rowDropSettings.targetID),i.rowDropSettings.targetID&&u&&u.ej2_instances&&"grid"===u.ej2_instances[0].getModuleName()&&u.ej2_instances[0].getContent().classList.add("e-allowRowDrop"))};this.drag=function(n){var o=r.parent,k,e,u,f,y,p,w,s,h,a,l,v,b;(r.isDropGrid=r.parent,r.istargetGrid=!1,r.parent.rowDropSettings.targetID)&&(k=document.getElementById(o.rowDropSettings.targetID),r.isDropGrid=k.ej2_instances[0],i(n.target,"e-grid")&&(r.istargetGrid=r.parent.rowDropSettings.targetID===i(n.target,"e-grid").id));e=r.parent.element.querySelector(".e-cloneproperties");o.element.classList.contains("e-childgrid")&&(e=r.getParentGrid(o.element).querySelector(".e-cloneproperties"));u=r.getElementFromPosition(e,n.event);t.classList(e,["e-defaultcur"],["e-notallowedcur","e-movecur","e-grabcur"]);r.isOverflowBorder=!0;r.hoverState=o.enableHover;f=i(u,"e-grid")?t.closest(n.target,"tr"):null;n.target&&(r.processArgs(u),o.enableVirtualization&&t.isNullOrUndefined(r.rows[0])&&t.classList(e,["e-notallowedcur"],["e-movecur"]),y={rows:r.rows,target:u,draggableType:"rows",data:r.rowData,originalEvent:n,cancel:!1},(o.trigger(ld,y),r.stopTimer(),y.cancel)||((o.element.classList.add("e-rowdrag"),r.dragTarget=f&&(i(u,"e-grid").id===e.parentElement.id||i(u,"e-grid").id)?r.isDropGrid.element.querySelector(".e-emptyrow")?0:parseInt(f.getAttribute("aria-rowindex"),10)-1:parseInt(r.startedRow.getAttribute("aria-rowindex"),10)-1,o.rowDropSettings.targetID)?(p=document.querySelector(".e-drag-ref"),!i(u,"e-grid")||p&&i(p.parentElement,"e-grid").id===i(u,"e-grid").id||i(e.parentElement,"e-grid").id===i(u,"e-grid").id?t.classList(e,["e-notallowedcur"],["e-defaultcur"]):t.classList(e,["e-grabcur"],["e-notallowedcur"])):(w=i(u,"e-grid"),w&&w.id===e.parentElement.id&&i(u,"e-row")&&!i(u,"e-addedrow")?t.classList(e,["e-movecur"],["e-defaultcur"]):t.classList(e,["e-notallowedcur"],["e-movecur"])),i(r.isDropGrid.element,"e-grid")&&(r.isDropGrid.groupSettings.columns.length&&!r.isDropGrid.groupSettings.columns.length||r.isDropGrid.element.querySelector(".e-emptyrow")||((i(u,"e-grid")&&i(u,"e-grid").id===r.isDropGrid.element.id&&r.updateScrollPostion(n.event),(r.isOverflowBorder||r.parent.frozenRows>r.dragTarget)&&(parseInt(r.startedRow.getAttribute(c),10)-1!==r.dragTarget||r.istargetGrid)||r.istargetGrid&&f&&r.isDropGrid.getRowByIndex(r.isDropGrid.getCurrentViewRecords().length-1).getAttribute("data-uid")===f.getAttribute("data-uid"))?r.moveDragRows(n,r.startedRow,f):(s=void 0,r.parent.enableVirtualization?s=f&&parseInt(f.getAttribute(c),10)-1==r.parent.renderModule.data.dataManager.dataSource.json.length-1:(h=r.parent.enableInfiniteScrolling&&r.parent.infiniteScrollSettings.enableCache&&!r.parent.groupSettings.enableLazyLoading?r.parent.pageSettings.currentPage*r.parent.pageSettings.pageSize-1:r.parent.getCurrentViewRecords().length-1,a=r.parent.getRowByIndex(h),s=f&&a&&a.getAttribute("data-uid")===f.getAttribute("data-uid")&&a.getAttribute("data-uid")!==r.startedRow.getAttribute("data-uid"),r.isNewRowAdded()&&"Bottom"===r.parent.editSettings.newRowPosition&&(s=!1)),s&&!r.parent.rowDropSettings.targetID&&(l=r.parent.createElement("div",{className:"e-lastrow-dragborder"}),v=r.parent.getContent(),l.style.width=r.parent.element.offsetWidth-r.getScrollWidth()+"px",r.parent.enableVirtualization&&(l.style.zIndex="1"),v.getElementsByClassName("e-lastrow-dragborder").length||o.allowGrouping&&o.groupSettings.columns.length&&!t.isNullOrUndefined(f.nextSibling)||(v.classList.add("e-grid-relative"),v.appendChild(l),l.style.bottom=r.getScrollWidth()+"px")),r.removeBorder(f))),u&&u.classList.contains(lt)&&!r.isDropGrid.element.querySelector(".e-emptyrow")&&r.istargetGrid&&(r.removeBorder(f),h=r.isDropGrid.getCurrentViewRecords().length-1,(b=r.parent.allowGrouping&&r.parent.groupSettings.columns&&r.parent.groupSettings.columns.length?[].slice.call(r.isDropGrid.getRowByIndex(h).querySelectorAll(".e-rowcell:not(.e-hide),.e-rowdragdrop:not(.e-hide),.e-detailrowcollapse:not(.e-hide)")):[].slice.call(r.isDropGrid.getRowByIndex(h).querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))).length>0&&(r.parent.allowGrouping&&r.parent.groupSettings.columns&&r.parent.groupSettings.columns.length?r.groupRowDDIndicator(b,!0):ui(b,!0,"e-dragborder"))))))};this.dragStop=function(n){r.parent.isCheckBoxSelection&&r.parent.enableInfiniteScrolling&&window.getSelection().removeAllRanges();document.body.classList.remove("e-prevent-select");rr(r.parent)?r.parent.notify(si,{instance:r,handler:r.processDragStop,arg1:n}):r.processDragStop(n)};this.processDragStop=function(n){var u=r.parent,e,f,o,h,s;r.parent.isDestroyed||(e=r.getElementFromPosition(n.helper,n.event),f=e&&!e.classList.contains("e-dlg-overlay")?e:n.target,u.element.classList.remove("e-rowdrag"),o=document.getElementById(u.rowDropSettings.targetID),(u.rowDropSettings.targetID&&o&&o.ej2_instances&&"grid"===o.ej2_instances[0].getModuleName()&&o.ej2_instances[0].getContent().classList.remove("e-allowRowDrop"),i(r.isDropGrid.element,"e-grid"))&&(r.stopTimer(),r.isDropGrid.enableHover=r.hoverState,r.isDropGrid.getContent().classList.remove("e-grid-relative"),r.removeBorder(e),h=r.isDropGrid.element.querySelector(".e-dragstartrow"),h&&h.classList.remove("e-dragstartrow")),(r.processArgs(f),u.enableVirtualization&&t.isNullOrUndefined(r.rows[0]))||(s={target:f,draggableType:"rows",cancel:!1,fromIndex:parseInt(r.rows[0].getAttribute(c),10)-1,dropIndex:r.dragTarget,rows:r.rows,data:Object.keys(r.dragStartData[0]).length>0?r.dragStartData:r.currentViewData()},u.trigger(ad,s,function(){if(!(i(f,y)||i(f,"e-emptyrow")||i(f,it))||s.cancel)return r.dragTarget=null,void t.remove(n.helper);r.isRefresh=!1;var e=r.parent.getSelectedRowIndexes();u.isRowDragable()&&(!r.parent.rowDropSettings.targetID&&r.startedRow.querySelector("td.e-selectionbackground")&&e.length>1&&e.length!==r.parent.getCurrentViewRecords().length?r.reorderRows(e,s.dropIndex):r.reorderRows([parseInt(r.startedRow.getAttribute(c),10)-1],r.dragTarget),r.dragTarget=null,u.rowDropSettings.targetID||(n.helper.classList.contains("e-cloneproperties")&&document.querySelector("."+n.helper.classList[0])&&t.remove(n.helper),!u.enableVirtualization||u.sortSettings.columns.length||u.filterSettings.columns.length||r.parent.allowGrouping&&u.groupSettings.columns.length?r.rowOrder(s):(u.refresh(),u.contentModule.vgenerator.startIndex=null)),r.parent.getContentTable().scrollHeight<r.parent.getContent().clientHeight&&r.parent.scrollModule.setLastRowCell());r.isRefresh=!0})))};this.removeCell=function(n,t){return[].slice.call(n.querySelectorAll("td")).filter(function(i){i.classList.contains(t)&&n.deleteCell(i.cellIndex)})};this.parent=n;this.parent.isDestroyed||(this.parent.on(pt,this.initializeDrag,this),this.parent.on(vf,this.columnDrop,this),this.parent.on(sp,this.onActionComplete,this),this.onDataBoundFn=this.onDataBound.bind(this),this.parent.addEventListener(ti,this.onDataBoundFn),this.parent.on(w,this.enableAfterRender,this),this.parent.on(l,this.destroy,this))}return n.prototype.getParentGrid=function(n){for(var t=n,i=!1;!i;)t.ej2_instances[0].parentDetails&&(t=document.getElementById(t.ej2_instances[0].parentDetails.parentID)),t.classList.contains("e-childgrid")||(i=!0);return t},n.prototype.isNewRowAdded=function(){return this.parent.editSettings&&this.parent.editSettings.showAddNewRow&&!(this.parent.enableInfiniteScrolling||this.parent.enableVirtualization)},n.prototype.groupRowDDIndicator=function(n,t){ui([n[0]],t,"e-dragleft");ui(n,t,"e-dragtop","e-dragbottom");ui([n[n.length-1]],t,"e-dragright")},n.prototype.refreshRow=function(n,i,r){for(var o,c,l,f,u=this.parent,p=u.getContentTable().querySelector(h),w=u.getHeaderTable().querySelector(h),e=0,s=n.rows.length;e<s;e++)if(o=n.rows[parseInt(e.toString(),10)],(u.enableVirtualization&&u.allowGrouping&&u.groupSettings.columns.length||u.enableInfiniteScrolling&&u.infiniteScrollSettings.enableCache)&&1===n.rows.length&&(c=u.getRowElementByUID(o.getAttribute("data-uid")),t.isNullOrUndefined(c)||t.remove(c)),l=o.querySelector(".e-dragstartrow"),l&&l.classList.remove("e-dragstartrow"),i.insertBefore(o,r),u.allowGrouping&&u.groupSettings.columns.length){var b=o.getAttribute("data-uid"),k=n.target.parentElement.getAttribute("data-uid"),a=u.getRowObjectFromUID(b),v=u.getRowObjectFromUID(k);a.parentUid!==v.parentUid&&u.groupModule.groupReorderHandler(a,v)}if(f=[].slice.call(u.editSettings.showAddNewRow?i.querySelectorAll(".e-row:not(.e-addedrow)"):i.getElementsByClassName(y)),u.allowGrouping&&u.groupSettings.columns.length?u.groupSettings.enableLazyLoading||u.enableInfiniteScrolling&&u.infiniteScrollSettings.enableCache&&f.length>3*u.pageSettings.pageSize?u.refresh():(sy(this.parent,n,f),u.enableVirtualization||u.enableInfiniteScrolling&&u.infiniteScrollSettings.enableCache?oy(u):wo(this.parent,u.getRowsObject().filter(function(n){return n.isDataRow}),f),this.parent.notify(gr,{rows:u.enableVirtualization?this.parent.vRows:this.parent.getRowsObject()})):u.enableInfiniteScrolling&&u.infiniteScrollSettings.enableCache&&!u.groupSettings.columns.length?f.length>3*u.pageSettings.pageSize?u.refresh():(sy(this.parent,n,f),oy(u)):this.refreshData(f),this.parent.frozenRows)for(e=0,s=f.length;e<s;e++)e<this.parent.frozenRows?w.appendChild(f[parseInt(e.toString(),10)]):p.appendChild(f[parseInt(e.toString(),10)])},n.prototype.updateFrozenRowreOrder=function(n){var t=this.parent,f=t.getContentTable().querySelector(h),e=t.getHeaderTable().querySelector(h),r=[].slice.call(e.getElementsByClassName(y)).concat([].slice.call(f.getElementsByClassName(y))),u=t.createElement(h,{attrs:{role:"rowgroup"}});t.selectionSettings.persistSelection||0!==Object.keys(t.selectionModule.selectedRowState).length?this.parent.clearRowSelection():this.parent.clearSelection();for(var o=this.refreshRowTarget(n),i=0,s=r.length;i<s;i++)u.appendChild(r[parseInt(i.toString(),10)]);this.refreshRow(n,u,o)},n.prototype.refreshRowTarget=function(n){var t=this.parent,i=parseInt(n.target.parentElement.getAttribute(c),10)-1,r;return t.enableVirtualization&&t.allowGrouping&&t.groupSettings.columns.length&&(i=this.parent.getDataRows().indexOf(n.target.parentElement)),(n.fromIndex<n.dropIndex||n.fromIndex===n.dropIndex)&&(!t.allowGrouping||!t.groupSettings.columns.length)&&(i+=1),r=t.getRowByIndex(i),i===t.getRows().length&&this.isNewRowAdded()&&"Bottom"===this.parent.editSettings.newRowPosition&&(r=this.parent.element.querySelector(".e-row.e-addedrow")),t.allowGrouping&&t.groupSettings.columns.length&&-1!==i&&n.fromIndex<n.dropIndex&&r?r.nextSibling:r},n.prototype.updateFrozenColumnreOrder=function(n){var t=this.parent,r=t.getContentTable().querySelector(h),i;t.selectionSettings.persistSelection||0!==Object.keys(t.selectionModule.selectedRowState).length?this.parent.clearRowSelection():this.parent.clearSelection();i=this.refreshRowTarget(n);this.refreshRow(n,r,i)},n.prototype.refreshData=function(n){for(var u,s,f={},e={},i=this.parent.getRowsObject(),o=this.parent.getCurrentViewRecords(),t=0,r=n.length;t<r;t++)u=parseInt(n[parseInt(t.toString(),10)].getAttribute(c),10)-1,f[parseInt(t.toString(),10)]=i[parseInt(u.toString(),10)],e[parseInt(t.toString(),10)]=o[parseInt(u.toString(),10)];for(s=this.parent.getRows(),t=0,r=n.length;t<r;t++)s[parseInt(t.toString(),10)]=n[parseInt(t.toString(),10)],i[parseInt(t.toString(),10)]=f[parseInt(t.toString(),10)],o[parseInt(t.toString(),10)]=e[parseInt(t.toString(),10)];wo(this.parent,i,n)},n.prototype.rowOrder=function(n){var e,r,t,u,f;if(n.dropIndex!==n.fromIndex&&!isNaN(n.dropIndex)&&!i(n.target,"e-groupcaption")){if(this.parent.isDetail())for(this.parent.detailCollapseAll(),e=[].slice.call(this.parent.getContentTable().querySelector(h).children),r=this.parent.getRowsObject(),e.filter(function(n){n.classList.contains("e-detailrow")&&n.remove()}),t=0,u=r.length;t<u&&r[parseInt(t.toString(),10)];t++)r[parseInt(t.toString(),10)].isDetailRow&&(this.parent.getRowsObject().splice(t,1),t--);if((n.target.classList.contains("e-rowcelldrag")||n.target.classList.contains("e-dtdiagonalright")||n.target.classList.contains("e-dtdiagonaldown"))&&(n.target=n.target.parentElement),!n.target.classList.contains("e-rowcell")&&i(n.target,"e-rowcell")&&(n.target=i(n.target,"e-rowcell")),this.parent.frozenRows?this.updateFrozenRowreOrder(n):this.updateFrozenColumnreOrder(n),(!this.parent.allowGrouping||!this.parent.groupSettings.columns.length)&&this.selectedRowColls.length>0){if(this.parent.selectRows(this.selectedRowColls),f=[],this.parent.filterSettings.columns.length||this.parent.sortSettings.columns.length){for(t=0,u=n.rows.length;t<u;t++)f.push(parseInt(n.rows[parseInt(t.toString(),10)].getAttribute(c),10)-1);this.selectedRowColls=f}this.selectedRowColls=[]}else this.selectedRowColls=[]}},n.prototype.currentViewData=function(){for(var t=this.parent.getSelectedRowIndexes(),i=[],r=parseInt(this.startedRow.getAttribute(c),10)-1,n=0,u=t.length;n<u;n++)i[parseInt(n.toString(),10)]=this.parent.currentViewData[t[parseInt(n.toString(),10)]];return this.parent.rowDropSettings.targetID||0!==t.length||(i[0]=this.parent.currentViewData[parseInt(r.toString(),10)]),i},n.prototype.reorderRows=function(n,t){for(var r,o,s=this.parent.getSelectedRowIndexes(),c=[],h=[],u=this.parent.getDataModule().isRemote()?this.parent.getCurrentViewRecords():this.parent.renderModule.data.dataManager.dataSource.json,f=this.parent.allowPaging?this.parent.pageSettings.currentPage*this.parent.pageSettings.pageSize-this.parent.pageSettings.pageSize:0,a=t+f,l=n[0]+f,i=0,e=n.length;i<e;i++)h[parseInt(i.toString(),10)]=u[n[parseInt(i.toString(),10)]+f];for(i=0,e=s.length;i<e;i++)c[parseInt(i.toString(),10)]=u[s[parseInt(i.toString(),10)]+f];for(i=0,e=h.length;i<e;i++){if(0!==i){for(r=0,o=u.length;r<o;r++)if(JSON.stringify(u[parseInt(r.toString(),10)])===JSON.stringify(h[parseInt(i.toString(),10)])){l=r;break}for(r=0,o=u.length;r<o;r++)if(JSON.stringify(u[parseInt(r.toString(),10)])===JSON.stringify(h[i-1])){l>r&&(a=r+1);break}}this.reorderRow(l-f,a-f)}for(this.isRefresh&&this.parent.notify(ot,{type:p,requestType:"rowdraganddrop"}),i=0,e=c.length;i<e;i++)for(r=0,o=u.length;r<o;r++)if(JSON.stringify(u[parseInt(r.toString(),10)])===JSON.stringify(c[parseInt(i.toString(),10)])){s[parseInt(i.toString(),10)]=r-f;break}this.selectedRowColls=s},n.prototype.stopTimer=function(){window.clearInterval(this.timer)},n.prototype.onActionComplete=function(n){this.parent.trigger(s,t.extend(n,{type:s,requestType:"rowdraganddrop"}))},n.prototype.initializeDrag=function(){var n=this.parent;this.draggable=new t.Draggable(n.element,{dragTarget:".e-rowcelldrag, .e-rowdragdrop, .e-rowcell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,isReplaceDragEle:this.isReplaceDragEle,isPreventSelect:!1,isPreventScroll:!0})},n.prototype.updateScrollPostion=function(n){var t=this,i=cu(n).y,r=this.isDropGrid.getContent().getBoundingClientRect(),o=this.isDropGrid.getRowHeight()-15,u=this.isDropGrid.getContent().firstElementChild,s=this.parent.enableVirtualization?20:0,f,e;r.top>=i?(f=-this.isDropGrid.getRowHeight(),this.isOverflowBorder=!1,this.timer=window.setInterval(function(){t.setScrollDown(u,f)},200)):r.top+this.isDropGrid.getContent().clientHeight-o-33-s<=i&&(e=this.isDropGrid.getRowHeight(),this.isOverflowBorder=!1,this.timer=window.setInterval(function(){t.setScrollDown(u,e)},200))},n.prototype.setScrollDown=function(n,t){n.scrollTop=n.scrollTop+t},n.prototype.moveDragRows=function(n,r,u){var o=this.parent.element.querySelector(".e-cloneproperties"),f,e;this.parent.element.classList.contains("e-childgrid")&&(o=this.getParentGrid(this.parent.element).querySelector(".e-cloneproperties"));f=t.closest(n.target,"tr");i(f,"e-grid")&&(!this.parent.rowDropSettings.targetID&&i(o.parentElement,"e-grid").id===i(f,"e-grid").id||this.istargetGrid)&&(e=f,f||(e=r),this.setBorder(e,n.event,r,u))},n.prototype.setBorder=function(n,r,u,f){var l=this.parent.element,a,e,o,s,h;this.istargetGrid&&(l=this.isDropGrid.element);a=this.parent.element.querySelector(".e-cloneproperties");(this.parent.allowGrouping&&this.parent.groupSettings.columns.length?this.removeBorder(n):(this.removeFirstRowBorder(n),this.removeLastRowBorder(n)),i(n,"e-grid")&&n.classList.contains(y)&&(!this.parent.rowDropSettings.targetID&&i(a.parentElement,"e-grid").id===i(n,"e-grid").id||this.istargetGrid))&&(this.parent.allowGrouping&&this.parent.groupSettings.columns&&this.parent.groupSettings.columns.length?t.removeClass(l.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"),["e-dragtop","e-dragright","e-dragbottom","e-dragleft"]):t.removeClass(l.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"),["e-dragborder"]),e=[],o=parseInt(f.getAttribute(c),10)-1,!f||0!==o||this.isNewRowAdded()&&"Top"===this.parent.editSettings.newRowPosition?this.parent.rowDropSettings.targetID&&f?(n=this.isDropGrid.getRowByIndex(o-1),e=[].slice.call(n.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))):f&&parseInt(u.getAttribute(c),10)-1>o?(this.parent.enableVirtualization&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&(o=this.parent.getDataRows().indexOf(f)),this.parent.allowGrouping&&this.parent.groupSettings.columns.length?(n=f,e=[].slice.call(n.querySelectorAll(".e-groupcaption,.e-summarycell,.e-rowcell:not(.e-hide),.e-rowdragdrop:not(.e-hide),\n                        .e-detailrowcollapse:not(.e-hide)"))):(n=0===o&&this.isNewRowAdded()&&"Top"===this.parent.editSettings.newRowPosition?this.parent.element.querySelector(".e-row.e-addedrow tr"):this.parent.getRowByIndex(o-1),e=[].slice.call(n.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse,.e-dragindentcell")))):e=[].slice.call(n.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse")):this.parent.allowGrouping&&this.parent.groupSettings.columns.length?(n=f,e=[].slice.call(n.querySelectorAll(".e-groupcaption,.e-summarycell,.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))):(s=this.parent.createElement("div",{className:"e-firstrow-dragborder"}),h=this.isDropGrid.getHeaderContent(),h.classList.add("e-grid-relative"),s.style.width=l.offsetWidth-this.getScrollWidth()+"px",h.getElementsByClassName("e-firstrow-dragborder").length||(this.parent.frozenRows?(this.parent.isFrozenGrid()&&(s.style.width=this.parent.getContent().firstElementChild.scrollWidth+"px"),h.querySelector("thead").appendChild(s),s.style.position="relative"):h.appendChild(s))),e.length>0&&(this.parent.allowGrouping&&this.parent.groupSettings.columns&&this.parent.groupSettings.columns.length?this.groupRowDDIndicator(e,!0):ui(e,!0,"e-dragborder")))},n.prototype.getScrollWidth=function(){var n=this.parent.getContent().firstElementChild;return n.scrollWidth>n.offsetWidth?hb.getScrollBarWidth():0},n.prototype.removeFirstRowBorder=function(n){if(this.isDropGrid.element.getElementsByClassName("e-firstrow-dragborder").length>0&&n&&(0!==n.rowIndex||n.classList.contains("e-columnheader")))t.remove(this.isDropGrid.element.getElementsByClassName("e-firstrow-dragborder")[0]);else{var i=this.parent.element.querySelector(".e-row.e-addedrow tr");i&&i.querySelector(".e-dragborder")&&ui([].slice.call(i.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse,.e-dragindentcell")),!1,"e-dragborder")}},n.prototype.removeLastRowBorder=function(n){var i,u,r;this.parent.enableVirtualization?i=n&&parseInt(n.getAttribute(c),10)-1!=this.parent.renderModule.data.dataManager.dataSource.json.length-1:(u=this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&!this.parent.groupSettings.enableLazyLoading?this.parent.pageSettings.currentPage*this.parent.pageSettings.pageSize-1:this.parent.getCurrentViewRecords().length-1,r=this.parent.getRowByIndex(u),i=n&&r&&r.getAttribute("data-uid")!==n.getAttribute("data-uid"));this.parent.element.getElementsByClassName("e-lastrow-dragborder").length>0&&n&&i&&t.remove(this.parent.element.getElementsByClassName("e-lastrow-dragborder")[0])},n.prototype.removeBorder=function(n){if(this.removeFirstRowBorder(n),this.parent.rowDropSettings.targetID||this.removeLastRowBorder(n),n=this.parent.allowGrouping&&this.parent.groupSettings.columns.length?[].slice.call(this.isDropGrid.getContentTable().querySelectorAll("tr")).filter(function(n){return n.querySelector("td.e-dragtop.e-dragbottom")})[0]:this.isDropGrid.getRows().filter(function(n){return n.querySelector("td.e-dragborder")})[0]){var t=this.parent.allowGrouping&&this.parent.groupSettings.columns.length?[].slice.call(n.querySelectorAll(".e-dragtop.e-dragbottom")):[].slice.call(n.getElementsByClassName("e-dragborder"));this.parent.allowGrouping&&this.parent.groupSettings.columns&&this.parent.groupSettings.columns.length?this.groupRowDDIndicator(t,!1):ui(t,!1,"e-dragborder")}},n.prototype.getElementFromPosition=function(n,t){var i=cu(t),r;return n.style.display="none",r=document.elementFromPoint(i.x,i.y),n.style.display="",r},n.prototype.onDataBound=function(){this.selectedRowColls.length>0&&(this.parent.enableVirtualization||this.parent.allowRowDragAndDrop)&&(this.parent.selectRows(this.selectedRowColls),this.selectedRowColls=[])},n.prototype.getTargetIdx=function(n){return n?parseInt(n.getAttribute(c),10)-1:0},n.prototype.singleRowDrop=function(n){var i=t.closest(n.target,"tr"),r=n.droppedElement.parentElement.ej2_instances[0],u=i?i.rowIndex:r.currentViewData.length-1;this.reorderRow(this.startedRowIndex,u)},n.prototype.columnDrop=function(n){var r=this.parent,s,e,l,a,v,h,w;if("grouping"!==n.droppedElement.getAttribute("action")&&(i(n.target,y)||i(n.target,"e-emptyrow")||i(n.target,it))){var b=t.closest(n.target,"tr"),f=void 0,o=document.querySelector(".e-drag-ref");if("true"!==n.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&(n.droppedElement.parentElement.id===r.element.id||o&&o.parentElement.id===r.element.id)||"true"===n.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&n.droppedElement.parentElement.id!==r.element.id)return;if(n.droppedElement.parentElement.id!==r.element.id)o?(f=o.parentElement.ej2_instances[0],t.remove(o)):f=n.droppedElement.parentElement.ej2_instances[0];else if(this.isSingleRowDragDrop||"true"===n.droppedElement.querySelector("tr").getAttribute("single-dragrow"))return void this.singleRowDrop(n);if(f.element.id!==r.element.id&&f.rowDropSettings.targetID!==r.element.id)return;for(s=f.getSelectedRecords(),e=this.getTargetIdx(b),n.target&&n.target.classList.contains("e-content")&&r.getCurrentViewRecords().length&&(l=r.getContentTable().querySelector("tr:last-child"),l&&(e=parseInt(l.getAttribute(c),10))),isNaN(e)&&(e=0),r.allowPaging&&(e=e+r.pageSettings.currentPage*r.pageSettings.pageSize-r.pageSettings.pageSize),r.notify(cl,{toIndex:e,records:s}),r.notify(ot,{type:p,requestType:"rowdraganddrop"}),a=f.getSelectedRowIndexes(),v=f.allowPaging?f.pageSettings.currentPage*f.pageSettings.pageSize-f.pageSettings.pageSize:0,this.selectedRows=[],h=0,w=s.length;h<w;h++)this.selectedRows.push(v+a[parseInt(h.toString(),10)]);f.notify(hs,{indexes:this.selectedRows,records:s});f.dataSource instanceof u.DataManager&&f.dataSource.dataSource.offline&&f.notify(ot,{type:p,requestType:"rowdraganddrop"})}},n.prototype.reorderRow=function(n,t){var i=this.parent,r;i.groupSettings.columns.length||(r=i.allowPaging?i.pageSettings.currentPage*i.pageSettings.pageSize-i.pageSettings.pageSize:0,t+=r,this.selectedRows=i.getSelectedRowIndexes(),i.notify(rw,{fromIndex:n+r,toIndex:t}))},n.prototype.enableAfterRender=function(n){n.module===this.getModuleName()&&n.enable&&this.initializeDrag()},n.prototype.destroy=function(){var n=this.parent.element;!this.parent.isDestroyed&&n&&(n.querySelector("."+st)||n.querySelector("."+it))&&(this.draggable.destroy(),this.parent.off(pt,this.initializeDrag),this.parent.off(vf,this.columnDrop),this.parent.off(sp,this.onActionComplete),this.parent.removeEventListener(ti,this.onDataBoundFn),this.parent.off(w,this.enableAfterRender),this.parent.off(l,this.destroy))},n.prototype.getModuleName=function(){return"rowDragAndDrop"},n.prototype.processArgs=function(){var n=this.parent,t=parseInt(this.startedRow.getAttribute(c),10)-1;n.getSelectedRecords().length>0&&!1===this.startedRow.cells[0].classList.contains("e-selectionbackground")||0===n.getSelectedRecords().length?(this.rows=n.enableInfiniteScrolling&&n.infiniteScrollSettings.enableCache?[this.startedRow]:[n.getRowByIndex(t)],this.rowData=[n.getRowInfo(this.startedRow.querySelector("."+v)).rowData],(n.enableVirtualization||n.enableInfiniteScrolling&&n.infiniteScrollSettings.enableCache)&&n.allowGrouping&&n.groupSettings.columns.length&&n.getSelectedRows().length&&(this.rows=n.getSelectedRows(),this.rowData=Array.from(this.rows,function(t){return n.getRowObjectFromUID(t.getAttribute("data-uid")).data}))):(this.rows=n.getSelectedRows(),this.rowData=Array.from(this.rows,function(t){return n.getRowObjectFromUID(t.getAttribute("data-uid")).data}))},n}(),sf=function(){function n(n,r,u,f){var e=this;this.sortRequired=!0;this.groupSortFocus=!1;this.groupTextFocus=!1;this.groupCancelFocus=!1;this.preventFocusOnGroup=!1;this.isAppliedGroup=!1;this.isAppliedUnGroup=!1;this.isAppliedCaptionRowBorder=!1;this.reorderingColumns=[];this.visualElement=t.createElement("div",{className:"e-cloneproperties e-dragclone e-gdclone",attrs:{action:"grouping"}});this.helper=function(n){var f=e.parent,u=n.sender.target,r=u.classList.contains("e-groupheadercell")?u:i(u,"e-groupheadercell");return!(!r||!u.classList.contains("e-drag")&&e.groupSettings.allowReordering)&&(e.column=f.getColumnByField(r.firstElementChild.getAttribute("data-mappingname")),e.visualElement.textContent=r.textContent,t.updateCSSText(e.visualElement,"width: "+(r.offsetWidth+2)+"px;\n            height: "+(r.offsetHeight+2)+"px; line-height: 23px;"),e.visualElement.setAttribute("data-mappinguid",e.column.uid),f.element.appendChild(e.visualElement),e.visualElement)};this.dragStart=function(){e.parent.element.classList.add("e-ungroupdrag")};this.drag=function(n){e.groupSettings.allowReordering&&e.animateDropper(n);var r=n.target,u=e.parent.element.querySelector(".e-cloneproperties");e.parent.trigger(ku,{target:r,draggableType:"headercell",column:e.column});e.groupSettings.allowReordering||(t.classList(u,["e-defaultcur"],["e-notallowedcur"]),i(r,it)||i(r,"e-headercell")||t.classList(u,["e-notallowedcur"],["e-defaultcur"]))};this.dragStop=function(n){var r,u;e.parent.element.classList.remove("e-ungroupdrag");r=!(i(n.target,it)||i(n.target,"e-gridheader"));e.groupSettings.allowReordering&&r?(t.remove(n.helper),i(n.target,"e-groupdroparea"))?e.rearrangeGroup():i(n.target,"e-grid")||(u=e.parent.getColumnByUid(n.helper.getAttribute("data-mappinguid")).field,-1!==e.groupSettings.columns.indexOf(u)&&e.ungroupColumn(u)):r&&t.remove(n.helper)};this.animateDropper=function(n){var a=e.parent.element.querySelector(".e-cloneproperties").getAttribute("data-mappinguid"),r=e.parent.getColumnByUid(a).field,h=i(n.target,"e-groupdroparea"),u=i(n.target,"e-group-animator"),v=[].slice.call(e.element.getElementsByClassName("e-groupheadercell")).map(function(n){return n.querySelector("div").getAttribute("data-mappingname")}),t=JSON.parse(JSON.stringify(v)),c,f,o,l,s;if(u||h)for(u?(c=u.querySelector("div[data-mappingname]").getAttribute("data-mappingname"),f=+u.getAttribute("data-index"),c!==r&&(o=t.indexOf(r),-1!==o&&t.splice(o,1),l=-1!==f&&o===f,t.splice(f+(l?1:0),0,r))):h&&-1===t.indexOf(r)&&t.push(r),e.element.innerHTML="",t.length&&!e.element.classList.contains("e-grouped")&&e.element.classList.add("e-grouped"),e.reorderingColumns=t,s=0;s<t.length;s++)e.addColToGroupDrop(t[parseInt(s.toString(),10)]);else e.addLabel(),e.removeColFromGroupDrop(r)};this.drop=function(n){var u=e.parent,r=u.getColumnByUid(n.droppedElement.getAttribute("data-mappinguid"));e.element.classList.remove("e-hover");t.remove(n.droppedElement);e.aria.setDropTarget(e.parent.element.querySelector(".e-groupdroparea"),!1);e.aria.setGrabbed(e.parent.getHeaderTable().querySelector("[aria-grabbed=true]"),!1);t.isNullOrUndefined(r)||!1===r.allowGrouping||i(u.getColumnHeaderByUid(r.uid),"e-grid").getAttribute("id")!==u.element.getAttribute("id")?e.parent.log("action_disabled_column",{moduleName:e.getModuleName(),columnName:r?r.headerText:void 0}):e.groupColumn(r.field)};this.contentRefresh=!0;this.aria=new yh;this.parent=n;this.groupSettings=r;this.serviceLocator=f;this.sortedColumns=u;this.focus=f.getService("focus");this.addEventListener();this.groupGenerator=new ah(this.parent)}return n.prototype.addLabel=function(){if(!this.element.getElementsByClassName("e-group-animator").length){var n=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=n;this.element.classList.remove("e-grouped")}},n.prototype.rearrangeGroup=function(){this.sortRequired=!1;this.updateModel()},n.prototype.columnDrag=function(n){this.groupSettings.allowReordering&&n.column.allowGrouping&&this.animateDropper(n);var r=this.parent.element.querySelector(".e-cloneproperties");this.parent.allowReordering||t.classList(r,["e-defaultcur"],["e-notallowedcur"]);n.column.allowGrouping&&(i(n.target,"e-groupdroparea")||i(n.target,"e-headercell")&&i(n.target,"e-headercell").isEqualNode(this.parent.getColumnHeaderByField(n.column.field)))||this.parent.allowReordering&&i(n.target,"e-headercell")||t.classList(r,["e-notallowedcur"],["e-defaultcur"]);n.target.classList.contains("e-groupdroparea")?this.element.classList.add("e-hover"):this.element.classList.remove("e-hover")},n.prototype.columnDragStart=function(n){var t,r;n.target.classList.contains("e-stackedheadercell")||(t=this.parent.element.querySelector(".e-groupdroparea"),this.aria.setDropTarget(t,n.column.allowGrouping),r=n.target.classList.contains("e-headercell")?n.target:i(n.target,"e-headercell"),this.aria.setGrabbed(r,!0,!n.column.allowGrouping))},n.prototype.columnDrop=function(n){var u=this.parent,r;if("grouping"===n.droppedElement.getAttribute("action")){if(r=u.getColumnByUid(n.droppedElement.getAttribute("data-mappinguid")),t.isNullOrUndefined(r)||!1===r.allowGrouping||i(u.getColumnHeaderByUid(r.uid),"e-grid").getAttribute("id")!==u.element.getAttribute("id"))return;this.ungroupColumn(r.field)}},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(w,this.enableAfterRender,this),this.parent.on(el,this.onActionComplete,this),this.parent.on(hp,this.onActionComplete,this),this.parent.on(wt,this.onPropertyChanged,this),this.parent.on(kt,this.clickHandler,this),this.parent.on(ku,this.columnDrag,this),this.parent.on(af,this.columnDragStart,this),this.parent.on(wf,this.columnDrop,this),this.parent.on(vf,this.columnDrop,this),this.parent.on(bt,this.refreshSortIcons,this),this.parent.on(fl,this.refreshSortIcons,this),this.parent.on(rt,this.keyPressHandler,this),this.parent.on(k,this.initialEnd,this),this.parent.on(ai,this.initialEnd,this),this.parent.on(pt,this.render,this),this.parent.on(iu,this.onGroupAggregates,this),this.parent.on(l,this.destroy,this),this.parent.on("group-expand-collapse",this.updateExpand,this),this.parent.on("persist-data-changed",this.initialEnd,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(pt,this.render),this.parent.off(w,this.enableAfterRender),this.parent.off(el,this.onActionComplete),this.parent.off(hp,this.onActionComplete),this.parent.off(wt,this.onPropertyChanged),this.parent.off(kt,this.clickHandler),this.parent.off(ku,this.columnDrag),this.parent.off(af,this.columnDragStart),this.parent.off(vf,this.columnDrop),this.parent.off(wf,this.columnDrop),this.parent.off(bt,this.refreshSortIcons),this.parent.off(fl,this.refreshSortIcons),this.parent.off(rt,this.keyPressHandler),this.parent.off(iu,this.onGroupAggregates),this.parent.off(l,this.destroy),this.parent.off("group-expand-collapse",this.updateExpand))},n.prototype.initialEnd=function(){var r=this.parent,n,t,i;if(this.parent.off(k,this.initialEnd),this.parent.off(ai,this.initialEnd),this.parent.getColumns().length&&this.groupSettings.columns.length){for(this.contentRefresh=!1,n=0,t=r.groupSettings.columns;n<t.length;n++)i=t[n],this.preventFocusOnGroup=!0,this.groupColumn(i),this.preventFocusOnGroup=!1;this.contentRefresh=!0}},n.prototype.keyPressHandler=function(n){var f=this.parent,e,r,p,s,c,a,u,v,l,o;if(n.target&&i(n.target,"e-groupheadercell")&&("tab"===n.action||"shiftTab"===n.action)){if(e=this.getFocusableGroupedItems(),"tab"===n.action&&n.target===e[e.length-1]||"shiftTab"===n.action&&n.target===e[0])return;for(r=0;r<e.length;r++)if(n.target===e[parseInt(r.toString(),10)])return n.preventDefault(),p="tab"===n.action?r+1:r-1,void e[parseInt(p.toString(),10)].focus()}if(/(Mac)/i.test(navigator.platform)&&n.metaKey&&("downArrow"===n.action?n.action="ctrlDownArrow":"upArrow"===n.action&&(n.action="ctrlUpArrow")),("ctrlSpace"===n.action||this.groupSettings.columns.length&&-1!==["altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","enter"].indexOf(n.action))&&(!this.parent.groupSettings.enableLazyLoading||!this.groupSettings.columns.length||"ctrlUpArrow"!==n.action&&"ctrlDownArrow"!==n.action))switch(n.action){case"altDownArrow":case"altUpArrow":if(s=f.allowSelection?f.getSelectedRowIndexes():[],s.length){for(n.preventDefault(),c=f.getContentTable().querySelector(h).children,a=void 0,r=f.getDataRows()[s[s.length-1]].rowIndex;r>=0;r--)if(!c[parseInt(r.toString(),10)].classList.contains(y)&&!c[parseInt(r.toString(),10)].classList.contains("e-detailrow")){a=c[parseInt(r.toString(),10)];break}this.expandCollapseRows(a.querySelector("altUpArrow"===n.action?".e-recordplusexpand":".e-recordpluscollapse"))}break;case"ctrlDownArrow":n.preventDefault();this.expandAll();break;case"ctrlUpArrow":n.preventDefault();this.collapseAll();break;case"enter":if(n.target.classList.contains("e-groupsort")){this.groupSortFocus=!0;n.preventDefault();this.applySortFromTarget(n.target);break}if(n.target.classList.contains("e-ungroupbutton")){this.groupCancelFocus=!0;n.preventDefault();this.unGroupFromTarget(n.target);break}if(this.parent.isEdit||null!==t.closest(n.target,"#"+this.parent.element.id+"_searchbar")||i(n.target,"e-pager")||i(n.target,"e-toolbar"))return;if(u=this.focus.getFocusedElement(),u&&(u.classList.contains("e-icon-grightarrow")||u.classList.contains("e-icon-gdownarrow"))&&(u=u.parentElement),v=u&&u.parentElement?u.parentElement.querySelector('[class^="e-record"]'):null,!v)break;u.children.length&&(u.children[0].classList.contains("e-icon-grightarrow")||u.children[0].classList.contains("e-icon-gdownarrow"))&&(n.preventDefault(),this.expandCollapseRows(v));break;case"ctrlSpace":l=f.focusModule.currentInfo.element;l&&l.classList.contains("e-headercell")&&(n.preventDefault(),o=f.getColumnByUid(l.firstElementChild.getAttribute("data-mappinguid")),o.field&&f.groupSettings.columns.indexOf(o.field)<0?this.groupColumn(o.field):this.ungroupColumn(o.field))}},n.prototype.getFocusableGroupedItems=function(){var i=[],t,n;if(this.groupSettings.columns.length)for(t=this.element.querySelectorAll(".e-groupheadercell"),n=0;n<t.length;n++)i.push(t[parseInt(n.toString(),10)].querySelector(".e-grouptext")),i.push(t[parseInt(n.toString(),10)].querySelector(".e-groupsort")),i.push(t[parseInt(n.toString(),10)].querySelector(".e-ungroupbutton"));return i},n.prototype.wireEvent=function(){t.EventHandler.add(this.element,"focusin",this.onFocusIn,this);t.EventHandler.add(this.element,"focusout",this.onFocusOut,this);t.EventHandler.add(this.parent.element,"auxclick",this.auxilaryclickHandler,this)},n.prototype.unWireEvent=function(){t.EventHandler.remove(this.element,"focusin",this.onFocusIn);t.EventHandler.remove(this.element,"focusout",this.onFocusOut);t.EventHandler.remove(this.parent.element,"auxclick",this.auxilaryclickHandler)},n.prototype.onFocusIn=function(n){this.parent.focusModule.currentInfo&&this.parent.focusModule.currentInfo.element&&(t.removeClass([this.parent.focusModule.currentInfo.element,this.parent.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.parent.focusModule.currentInfo.element.tabIndex=-1);this.addOrRemoveFocus(n)},n.prototype.onFocusOut=function(n){this.addOrRemoveFocus(n)},n.prototype.addOrRemoveFocus=function(n){if(n.target.classList.contains("e-groupdroparea")||n.target.classList.contains("e-grouptext")||n.target.classList.contains("e-groupsort")||n.target.classList.contains("e-ungroupbutton")){var i=n.target.classList.contains("e-grouptext")?n.target.parentElement.parentElement:n.target;"focusin"===n.type?(this.parent.focusModule.currentInfo.element=n.target,this.parent.focusModule.currentInfo.elementToFocus=n.target,t.addClass([i],["e-focused","e-focus"]),n.target.tabIndex=0):(t.removeClass([i],["e-focused","e-focus"]),n.target.tabIndex=-1)}},n.prototype.clickHandler=function(n){n.target.classList.contains("e-grouptext")&&(this.groupTextFocus=!0);n.target.classList.contains("e-groupsort")&&(this.groupSortFocus=!0);n.target.classList.contains("e-ungroupbutton")&&(this.groupCancelFocus=!0);(n.target.classList.contains("e-icon-grightarrow")||n.target.classList.contains("e-icon-gdownarrow"))&&n.preventDefault();var t=i(n.target,"e-recordplusexpand")||i(n.target,"e-recordpluscollapse");t&&(t.children[0].classList.contains("e-icon-gdownarrow")||t.children[0].classList.contains("e-icon-grightarrow"))&&this.expandCollapseRows(n.target);this.applySortFromTarget(n.target);this.unGroupFromTarget(n.target);this.toogleGroupFromHeader(n.target)},n.prototype.auxilaryclickHandler=function(n){(n.target.classList.contains("e-icon-grightarrow")||n.target.classList.contains("e-icon-gdownarrow")&&1===n.button)&&n.preventDefault()},n.prototype.unGroupFromTarget=function(n){n.classList.contains("e-ungroupbutton")&&this.ungroupColumn(n.parentElement.getAttribute("data-mappingname"))},n.prototype.toogleGroupFromHeader=function(n){this.groupSettings.showToggleButton&&(n.classList.contains("e-grptogglebtn")?n.classList.contains("e-toggleungroup")?this.ungroupColumn(this.parent.getColumnByUid(n.parentElement.getAttribute("data-mappinguid")).field):this.groupColumn(this.parent.getColumnByUid(n.parentElement.getAttribute("data-mappinguid")).field):n.classList.contains("e-toggleungroup")&&this.ungroupColumn(n.parentElement.getAttribute("data-mappingname")))},n.prototype.applySortFromTarget=function(n){var i=this.parent,u=t.closest(n,".e-groupheadercell"),r;i.allowSorting&&u&&!n.classList.contains("e-ungroupbutton")&&!n.classList.contains("e-toggleungroup")&&(r=u.firstElementChild.getAttribute("data-mappingname"),i.getColumnHeaderByField(r).getElementsByClassName("e-ascending").length?i.sortColumn(r,"Descending",!0):i.sortColumn(r,"Ascending",!0))},n.prototype.expandCollapseRows=function(n){var o=i(n,"e-recordplusexpand")||i(n,"e-recordpluscollapse"),f,c;if(o){f=[].slice.call(this.parent.getContentTable().querySelector(h).children);this.parent.editSettings.showAddNewRow&&(f[0].classList.contains("e-addedrow")?f.shift():f[f.length-1].classList.contains("e-addedrow")&&f.pop());var l=void 0,y=void 0,p=void 0,s=this.parent,g=o.parentElement.getElementsByClassName("e-indentcell").length,w=o.parentElement.getAttribute("data-uid"),a=s.getRowObjectFromUID(w),v=!1;if(o.classList.contains("e-recordpluscollapse")?(t.addClass([o],"e-recordplusexpand"),t.removeClass([o],"e-recordpluscollapse"),o.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",o.firstElementChild.setAttribute("title",this.l10n.getConstant("Expanded")),v=!0,a.isExpand=!0,b(s)&&this.updateVirtualRows(s,n,v,p,y),this.parent.groupSettings.enableLazyLoading&&((this.parent.filterSettings.columns.length||this.parent.sortSettings.columns.length||this.parent.searchSettings.key.length)&&0===this.parent.getContent().firstElementChild.scrollTop&&(this.parent.contentModule.isTop=!0),(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).captionExpand(o.parentElement))):(l=!0,a.isExpand=!1,t.removeClass([o],"e-recordplusexpand"),t.addClass([o],"e-recordpluscollapse"),o.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",o.firstElementChild.setAttribute("title",this.l10n.getConstant("Collapsed")),b(s)&&this.updateVirtualRows(s,n,!l,p,y),this.parent.groupSettings.enableLazyLoading&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).captionCollapse(o.parentElement)),this.aria.setExpand(o,v),!b(s)&&!this.parent.groupSettings.enableLazyLoading){for(var u=s.getRowsObject(),k=u.indexOf(a),d={},e=s.enableInfiniteScrolling&&s.infiniteScrollSettings&&s.infiniteScrollSettings.enableCache&&u.length!==f.length?Array.from(f).indexOf(o.parentElement):void 0,r=k;r<u.length&&!(r>k&&u[parseInt(r.toString(),10)].indent===g);r++){if(u[parseInt(r.toString(),10)].isDetailRow)c=u[r-1].isExpand&&u[r-1].visible,e&&e>0&&e<f.length?f[parseInt(e.toString(),10)].style.display=c?"":"none":t.isNullOrUndefined(e)&&(f[parseInt(r.toString(),10)].style.display=c?"":"none");else if(!1===d[u[parseInt(r.toString(),10)].parentUid])u[parseInt(r.toString(),10)].visible=!1,e&&e>0&&e<f.length?f[parseInt(e.toString(),10)].style.display="none":t.isNullOrUndefined(e)&&(f[parseInt(r.toString(),10)].style.display="none");else{if(!(u[parseInt(r.toString(),10)].isDataRow||u[parseInt(r.toString(),10)].isCaptionRow||u[parseInt(r.toString(),10)].isDetailRow||u[parseInt(r.toString(),10)].isAggregateRow)&&(c=u[parseInt(r.toString(),10)].cells.some(function(n){return n.isDataCell&&n.visible}))===u[parseInt(r.toString(),10)].visible)continue;u[parseInt(r.toString(),10)].visible=!0;e&&e>0&&e<f.length?(f[parseInt(e.toString(),10)].style.display="",f[parseInt(e.toString(),10)].classList.remove("e-hide")):t.isNullOrUndefined(e)&&(f[parseInt(r.toString(),10)].style.display="",f[parseInt(r.toString(),10)].classList.remove("e-hide"))}u[parseInt(r.toString(),10)].isCaptionRow&&(d[u[parseInt(r.toString(),10)].uid]=u[parseInt(r.toString(),10)].isExpand&&u[parseInt(r.toString(),10)].visible);t.isNullOrUndefined(e)||e++}this.lastCaptionRowBorder();this.parent.notify(gr,{rows:this.parent.getRowsObject()})}this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading||this.parent.notify(nv,{isCollapse:l,parentUid:w})}},n.prototype.lastCaptionRowBorder=function(){var r=this.parent.getContentTable(),e=this.parent.getContent().clientHeight,i,f;if((!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling||this.parent.groupSettings.enableLazyLoading)&&(r.scrollHeight<e||this.isAppliedCaptionRowBorder)){if(this.isAppliedCaptionRowBorder||r.querySelector(".e-lastrowcell")){for(var o=r.querySelectorAll(".e-lastrowcell"),n=0,u=o.length;n<u;n++)t.removeClass([o[parseInt(n.toString(),10)]],"e-lastrowcell");this.isAppliedCaptionRowBorder=!1}if(i=this.parent.getContentTable().querySelector(h).children,f=i[i.length-1],"none"===f.style.display||f.classList.contains("e-groupcaptionrow")){for(n=i.length-1,u=0;n>u;n--)if("none"!==i[parseInt(n.toString(),10)].style.display&&i[parseInt(n.toString(),10)].classList.contains("e-groupcaptionrow")&&i[parseInt(n.toString(),10)].querySelector(".e-recordpluscollapse")){t.addClass(i[parseInt(n.toString(),10)].childNodes,"e-lastrowcell");this.isAppliedCaptionRowBorder=!0;break}}else r.scrollHeight<e&&(t.addClass(r.querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.isAppliedCaptionRowBorder=!0)}},n.prototype.updateVirtualRows=function(n,t,i,r){var f=n.getRowObjectFromUID(t.closest("tr").getAttribute("data-uid")),u;f.isExpand=i;vrt(n);this.parent.notify(ba,{});r=n.getDataModule().generateQuery(!1);u={requestType:"virtualscroll",rowObject:f};n.contentModule&&(u.virtualInfo=n.contentModule.prevInfo);n.getDataModule().getData(u,r.requiresCount()).then(function(t){return n.renderModule.dataManagerSuccess(t,u)})},n.prototype.expandCollapse=function(n){if(this.parent.groupSettings.columns.length){n||this.parent.notify(ha,n);for(var i,r=this.parent.getContentTable().querySelector(h).children,u=this.parent.getRowsObject(),t=0,f=r.length;t<f;t++)r[parseInt(t.toString(),10)].querySelectorAll(".e-recordplusexpand, .e-recordpluscollapse").length?((i=r[parseInt(t.toString(),10)].querySelector(n?".e-recordpluscollapse":".e-recordplusexpand"))&&(n?(i.className="e-recordplusexpand",i.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",i.setAttribute("aria-expanded","true"),i.firstElementChild.setAttribute("title",this.l10n.getConstant("Expanded"))):(i.className="e-recordpluscollapse",i.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",i.setAttribute("aria-expanded","false"),i.firstElementChild.setAttribute("title",this.l10n.getConstant("Collapsed")))),r[parseInt(t.toString(),10)].firstElementChild.classList.contains("e-recordplusexpand")||r[parseInt(t.toString(),10)].firstElementChild.classList.contains("e-recordpluscollapse")||(r[parseInt(t.toString(),10)].style.display=n?"":"none")):r[parseInt(t.toString(),10)].style.display=n?"":"none",u[parseInt(t.toString(),10)].isCaptionRow&&(u[parseInt(t.toString(),10)].isExpand=!!n);this.parent.updateVisibleExpandCollapseRows();this.lastCaptionRowBorder();this.parent.notify(gr,{rows:this.parent.getRowsObject()})}},n.prototype.expandAll=function(){this.expandCollapse(!0)},n.prototype.collapseAll=function(){this.expandCollapse(!1)},n.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization");this.renderGroupDropArea();this.initDragAndDrop();this.refreshToggleBtn();this.wireEvent()},n.prototype.renderGroupDropArea=function(){var n=this.parent.element.querySelector(".e-groupdroparea");n&&t.remove(n);this.element=this.parent.createElement("div",{className:"e-groupdroparea",attrs:{tabindex:"-1"}});this.groupSettings.allowReordering&&this.element.classList.add("e-group-animate");this.updateGroupDropArea();this.parent.element.insertBefore(this.element,this.parent.element.firstChild);this.groupSettings.showDropArea&&"Vertical"!==this.parent.rowRenderingMode||(this.element.style.display="none")},n.prototype.updateGroupDropArea=function(n){if(this.groupSettings.showDropArea&&!this.groupSettings.columns.length){var t=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=t;this.element.classList.remove("e-grouped")}else(this.element.innerHTML!==this.l10n.getConstant("GroupDropArea")||1!==this.groupSettings.columns.length&&(this.isAppliedGroup||this.isAppliedUnGroup))&&!n||(this.element.innerHTML=""),this.element.classList.add("e-grouped")},n.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop();this.initializeGHeaderDrag()},n.prototype.initializeGHeaderDrag=function(){new t.Draggable(this.element,{dragTarget:this.groupSettings.allowReordering?".e-drag":".e-groupheadercell",distance:this.groupSettings.allowReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop})},n.prototype.initializeGHeaderDrop=function(){new t.Droppable(this.element,{accept:".e-dragclone",drop:this.drop})},n.prototype.groupColumn=function(n){var i=this.parent,r=i.getColumnByField(n);t.isNullOrUndefined(r)||!1===r.allowGrouping||this.contentRefresh&&this.groupSettings.columns.indexOf(n)>-1?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:r.headerText}):rr(i)?i.notify(si,{instance:this,handler:this.groupColumn,arg1:n}):(r.visible=i.groupSettings.showGroupedColumn,this.colName=n,this.isAppliedGroup=!0,this.contentRefresh?this.updateModel():this.addColToGroupDrop(n),this.updateGroupDropArea(),this.isAppliedGroup=!1)},n.prototype.ungroupColumn=function(n){var i=this.parent,f=this.parent.enableColumnVirtualization?this.parent.columns.filter(function(t){return t.field===n})[0]:i.getColumnByField(n),r,u,e;if(!(t.isNullOrUndefined(f)||!1===f.allowGrouping||this.groupSettings.columns.indexOf(n)<0))if(rr(i))i.notify(si,{instance:this,handler:this.ungroupColumn,arg1:n});else{if(f.visible=!0,this.colName=f.field,r=JSON.parse(JSON.stringify(this.groupSettings.columns)),r.splice(r.indexOf(this.colName),1),this.sortedColumns.indexOf(n)<0)for(u=0,e=i.sortSettings.columns.length;u<e;u++)if(n===i.sortSettings.columns[parseInt(u.toString(),10)].field){i.sortSettings.columns.splice(u,1);break}this.groupSettings.allowReordering&&(this.reorderingColumns=r);this.groupSettings.columns=r;i.allowGrouping&&(this.isAppliedUnGroup=!0,this.parent.dataBind())}},n.prototype.updateModel=function(){var n=JSON.parse(JSON.stringify(this.groupSettings.columns));n=this.reorderingColumns.length?JSON.parse(JSON.stringify(this.reorderingColumns)):n;this.sortRequired&&(-1===n.indexOf(this.colName)&&n.push(this.colName),this.groupAddSortingQuery(this.colName));this.sortRequired=!0;this.parent.groupSettings.columns=n;this.parent.dataBind()},n.prototype.onActionComplete=function(n){"grouping"===n.requestType?this.addColToGroupDrop(this.colName):this.removeColFromGroupDrop(this.colName);this.groupSettings.showDropArea&&"100%"===this.parent.height&&this.parent.scrollModule.refresh();var i=this.groupSettings.columns.indexOf(this.colName)>-1?{columnName:this.colName,requestType:"grouping",type:s}:{requestType:"ungrouping",type:s};this.parent.trigger(s,t.extend(n,i));this.colName=null},n.prototype.groupAddSortingQuery=function(n){for(var t=0;t<this.parent.sortSettings.columns.length&&this.parent.sortSettings.columns[parseInt(t.toString(),10)].field!==n;)t++;this.parent.sortSettings.columns.length===t?this.parent.sortSettings.columns.push({field:n,direction:"Ascending",isFromGroup:!0}):this.parent.allowSorting||(this.parent.sortSettings.columns[parseInt(t.toString(),10)].direction="Ascending")},n.prototype.createElement=function(n){var h=this.parent,f="Ascending",e=this.parent.createElement("div",{className:"e-grid-icon e-group-animator"}),u=this.parent.createElement("div",{className:"e-grid-icon e-groupheadercell"}),i=this.parent.createElement("div",{attrs:{"data-mappingname":n}}),r,o,s;return gi(n)&&i.setAttribute("ej-complexname",vt(n)),r=this.parent.getColumnByField(n),o=h.getColumnHeaderByUid(r.uid),this.groupSettings.allowReordering&&i.appendChild(this.parent.createElement("span",{className:"e-drag e-icons e-icon-drag",innerHTML:"&nbsp;",attrs:{title:"Drag",tabindex:"-1","aria-label":this.l10n.getConstant("GroupedDrag"),role:"button"}})),i.appendChild(this.parent.createElement("span",{className:"e-grouptext",innerHTML:r.headerText,attrs:{tabindex:"-1"}})),this.groupSettings.showToggleButton&&i.appendChild(this.parent.createElement("span",{className:"e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("UnGroupAria")}})),o.querySelectorAll(".e-ascending,.e-descending").length&&(f=o.querySelector(".e-ascending")?"Ascending":"Descending"),i.appendChild(this.parent.createElement("span",{className:"e-groupsort e-icons e-"+f.toLowerCase()+" e-icon-"+f.toLowerCase(),innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupedSortIcon")+r.headerText,role:"button"}})),s=this.parent.createElement("span",{className:"e-ungroupbutton e-icons e-icon-hide",innerHTML:"&nbsp;",attrs:{title:this.l10n.getConstant("UnGroup"),tabindex:"-1","aria-label":this.l10n.getConstant("UnGroupIcon")+r.headerText,role:"button"}}),t.updateCSSText(s,this.groupSettings.showUngroupButton?"":"display: none;"),i.appendChild(s),u.appendChild(i),this.groupSettings.allowReordering&&(e.appendChild(u),e.appendChild(this.createSeparator()),u=e),u},n.prototype.addColToGroupDrop=function(n){var o=gi(n)?this.parent.element.querySelector(".e-groupdroparea div[ej-complexname="+kh(vt(n))+"]"):this.parent.element.querySelector(".e-groupdroparea div[data-mappingname="+kh(n)+"]"),f,u,e,i,r;this.groupSettings.allowReordering&&o||(f=this.parent.getColumnByField(n),t.isNullOrUndefined(f)||(u=this.createElement(n),this.groupSettings.allowReordering&&(e=this.element.getElementsByClassName("e-group-animator").length,u.setAttribute("data-index",e.toString())),this.element.appendChild(u),i=this.parent.focusModule,i.setActive(!0),r=[0,0],0===i.active.matrix.matrix[r[0]][r[1]]&&(r=fr(i.active.matrix.matrix,r,!0)),i.active.matrix.current=r,this.parent.editSettings.showAddNewRow?this.parent.notify(hr,{}):this.parent.isInitialLoad&&!this.preventFocusOnGroup&&i.focus()))},n.prototype.createSeparator=function(){var n=this.parent.createElement("span",{className:"e-nextgroup e-icons e-icon-next",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupSeperator"),role:"button"}});return t.updateCSSText(n,this.groupSettings.showUngroupButton?"":"display: none;"),n},n.prototype.refreshToggleBtn=function(n){var u;if(this.groupSettings.showToggleButton)for(var r=[].slice.call(this.parent.getHeaderTable().getElementsByClassName("e-headercelldiv")),i=0,f=r.length;i<f;i++)r[parseInt(i.toString(),10)].classList.contains("e-emptycell")||r[parseInt(i.toString(),10)].classList.contains("e-headerchkcelldiv")||(u=this.parent.getColumnByUid(r[parseInt(i.toString(),10)].getAttribute("data-mappinguid")),this.parent.showColumnMenu&&(!this.parent.showColumnMenu||u.showColumnMenu)||(r[parseInt(i.toString(),10)].getElementsByClassName("e-grptogglebtn").length&&t.remove(r[parseInt(i.toString(),10)].querySelectorAll(".e-grptogglebtn")[0]),n||r[parseInt(i.toString(),10)].appendChild(this.parent.createElement("span",{className:"e-grptogglebtn e-icons "+(this.groupSettings.columns.indexOf(u.field)>-1?"e-toggleungroup e-icon-ungroup":"e-togglegroup e-icon-group"),attrs:{tabindex:"-1","aria-label":t.isNullOrUndefined(this.l10n)?this.parent.localeObj.getConstant("GroupButton"):this.l10n.getConstant("GroupButton")}}))))},n.prototype.removeColFromGroupDrop=function(n){var r,u;t.isNullOrUndefined(this.getGHeaderCell(n))||(r=this.getGHeaderCell(n),this.groupSettings.allowReordering?(u=i(r,"e-group-animator"),t.remove(u)):t.remove(r),this.updateGroupDropArea(),this.parent.editSettings.showAddNewRow&&this.parent.notify(hr,{}));this.isAppliedUnGroup=!1},n.prototype.onPropertyChanged=function(n){var u,o,r,f,i,t,e;if(n.module===this.getModuleName())for(u=0,o=Object.keys(n.properties);u<o.length;u++){r=o[u];switch(r){case"columns":if(f=void 0,this.contentRefresh){if(this.isAppliedUnGroup)f={columnName:this.colName,requestType:"ungrouping",type:p};else{if(!this.isAppliedGroup){for(this.updateGroupDropArea(!0),i=0;i<this.parent.sortSettings.columns.length;i++)this.parent.sortSettings.columns[parseInt(i.toString(),10)].isFromGroup&&(this.parent.sortSettings.columns.splice(i,1),i--);for(t=0;t<this.groupSettings.columns.length;t++)this.colName=this.groupSettings.columns[parseInt(t.toString(),10)],this.parent.getColumnByField(this.colName).visible=this.parent.groupSettings.showGroupedColumn,this.groupAddSortingQuery(this.colName),t<this.groupSettings.columns.length-1&&this.addColToGroupDrop(this.groupSettings.columns[parseInt(t.toString(),10)])}f={columnName:this.colName,requestType:n.properties[""+r].length?"grouping":"ungrouping",type:p,preventFocusOnGroup:!1}}if(!this.groupSettings.showGroupedColumn)for(e=n.oldProperties[""+r],t=0;t<e.length;t++)-1===n.properties[""+r].indexOf(e[parseInt(t.toString(),10)])&&(this.parent.getColumnByField(e[parseInt(t.toString(),10)]).visible=!0);this.parent.notify(ot,f)}break;case"showDropArea":this.updateGroupDropArea();this.groupSettings.showDropArea?(this.element.style.display="",this.parent.headerModule.refreshUI()):this.element.style.display="none";"100%"===this.parent.height&&this.parent.scrollModule.refresh();break;case"showGroupedColumn":this.updateGroupedColumn(this.groupSettings.showGroupedColumn);this.parent.notify(ot,{requestType:"refresh"});break;case"showUngroupButton":this.updateButtonVisibility(this.groupSettings.showUngroupButton,"e-ungroupbutton");break;case"showToggleButton":this.updateButtonVisibility(this.groupSettings.showToggleButton,"e-togglegroupbutton ");this.parent.refreshHeader();break;case"enableLazyLoading":this.parent.freezeRefresh()}}},n.prototype.updateGroupedColumn=function(n){for(var t=0;t<this.groupSettings.columns.length;t++)this.parent.getColumnByField(this.groupSettings.columns[parseInt(t.toString(),10)]).visible=n},n.prototype.updateButtonVisibility=function(n,t){for(var r=[].slice.call(this.element.getElementsByClassName(t)),i=0;i<r.length;i++)r[parseInt(i.toString(),10)].style.display=n?"":"none"},n.prototype.enableAfterRender=function(n){n.module===this.getModuleName()&&n.enable&&this.render()},n.prototype.destroy=function(){var n=this.parent.element;n&&(n.querySelector("."+st)||n.querySelector("."+it))&&(!this.parent.isDestroyed&&this.parent.allowGrouping||this.parent.refreshing||this.clearGrouping(),this.unWireEvent(),this.removeEventListener(),this.refreshToggleBtn(!0),this.element.parentNode&&t.remove(this.element))},n.prototype.clearGrouping=function(){var i=JSON.parse(JSON.stringify(this.groupSettings.columns)),n,t;for(this.contentRefresh=!1,n=0,t=i.length;n<t;n++)n===t-1&&(this.contentRefresh=!0),this.ungroupColumn(i[parseInt(n.toString(),10)]);this.contentRefresh=!0},n.prototype.getModuleName=function(){return"group"},n.prototype.refreshSortIcons=function(){var r,u=this.parent,i=u.sortSettings.columns,e=this.parent.getColumns().map(function(n){return n.field}),n,f;for(this.refreshToggleBtn(),n=0,f=i.length;n<f;n++)-1!==e.indexOf(i[parseInt(n.toString(),10)].field)&&(r=u.getColumnHeaderByField(i[parseInt(n.toString(),10)].field),!u.allowSorting&&(this.sortedColumns.indexOf(i[parseInt(n.toString(),10)].field)>-1||this.groupSettings.columns.indexOf(i[parseInt(n.toString(),10)].field)>-1)?(t.classList(r.querySelector(".e-sortfilterdiv"),["e-ascending","e-icon-ascending"],[]),i.length>1&&r.querySelector(".e-headercelldiv").appendChild(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(n+1).toString()}))):this.getGHeaderCell(i[parseInt(n.toString(),10)].field)&&this.getGHeaderCell(i[parseInt(n.toString(),10)].field).getElementsByClassName("e-groupsort").length&&("Ascending"===i[parseInt(n.toString(),10)].direction?t.classList(this.getGHeaderCell(i[parseInt(n.toString(),10)].field).querySelector(".e-groupsort"),["e-ascending","e-icon-ascending"],["e-descending","e-icon-descending"]):t.classList(this.getGHeaderCell(i[parseInt(n.toString(),10)].field).querySelector(".e-groupsort"),["e-descending","e-icon-descending"],["e-ascending","e-icon-ascending"])))},n.prototype.getGHeaderCell=function(n){return this.element&&this.element.querySelector('[data-mappingname="'+n+'"]')?this.element.querySelector('[data-mappingname="'+n+'"]').parentElement:null},n.prototype.onGroupAggregates=function(n){var t,i,f;if(this.parent.groupSettings.enableLazyLoading)"Batch"!==this.parent.editSettings.mode&&this.updateLazyLoadGroupAggregates(n);else{var e=this.iterateGroupAggregates(n),o=this.groupGenerator.generateRows(e,{}),r=this.parent.getRowsObject().filter(function(n){return!n.isDataRow}),u=o.filter(function(n){return!n.isDataRow});for((this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate(["groupFooterTemplate","groupCaptionTemplate","footerTemplate"]),t=0;t<u.length;t++)i=u[parseInt(t.toString(),10)],f={cells:i.cells.filter(function(n){return n.isDataCell}),data:i.data,dataUid:r[parseInt(t.toString(),10)]?r[parseInt(t.toString(),10)].uid:""},this.parent.notify(ol,f)}},n.prototype.updateLazyLoadGroupAggregates=function(n,t){var e=this,o=this.getGroupAggregateTemplates(!0),s=this.getGroupAggregateTemplates(!1);if(o.length||s.length)for(var i=this.parent,u=i.getDataModule().isRemote(),h=n[0],y=n.row,r=i.groupSettings.columns,a=i.contentModule,c=a.getGroupCache()[i.pageSettings.currentPage],f=t||[],p=function(t){var g=r[parseInt(t.toString(),10)],w=h[""+g],l=v.getGroupCaptionRowObject(y,r.length-t),b,k,p;if(u&&f.length)0!==t&&(b=r[t-1],k=h[""+b],f=f.find(function(n){return n.key===k}).items),v.updateLazyLoadGroupAggregatesRow(f,w,l,c,o,s);else{if(p=i.renderModule.data.generateQuery(),0!==t){var nt=c.filter(function(n){return n.isCaptionRow&&n.parentUid===l.parentUid}),tt=nt.indexOf(l),d=i.groupSettings.columns.slice(0,t).reverse(),it=d.map(function(n){return h[""+n]}),rt=vy(ay(d,it,a)),ut={level:t,skip:tt,take:1,where:rt};p.lazyLoad.push({key:"onDemandGroupInfo",value:ut})}if(i.renderModule.data.getData({},p).then(function(i){u?e.updateLazyLoadGroupAggregates(n,i.result):e.updateLazyLoadGroupAggregatesRow(i.result,w,l,c,o,s);(t===r.length-1||u)&&e.destroyRefreshGroupCaptionFooterTemplate()}).catch(function(n){return i.renderModule.dataManagerFailure(n,{requestType:"grouping"})}),u)return"break"}},v=this,l=0;l<r.length&&"break"!==p(l);l++);},n.prototype.destroyRefreshGroupCaptionFooterTemplate=function(){var n=this.parent;(n.isAngular||n.isReact||n.isVue)&&n.destroyTemplate(["groupCaptionTemplate","groupFooterTemplate"]);n.refreshGroupCaptionFooterTemplate();n.removeMaskRow();n.hideSpinner()},n.prototype.updateLazyLoadGroupAggregatesRow=function(n,t,i,r,u,f){var e=n.find(function(n){return n.key===t}),o;(u.length&&this.updateLazyLoadGroupAggregatesCell(e,i,u),f.length)&&(o=r.find(function(n){return n.isAggregateRow&&n.parentUid===i.uid}),this.updateLazyLoadGroupAggregatesCell(e,o,f))},n.prototype.updateLazyLoadGroupAggregatesCell=function(n,t,i){var s=t.data,u=n.aggregates,f;for(t.isCaptionRow&&(s.aggregates=u),f=0;f<i.length;f++){var r=i[parseInt(f.toString(),10)],e=r.field+" - "+r.type,o=s[r.field];o[""+e]=u[""+e];o[hut(r.type)]=u[""+e];o[r.type]&&(o[r.type]=u[""+e])}},n.prototype.getGroupCaptionRowObject=function(n,t){for(var r=this.parent,f=n.getAttribute("data-uid"),i=r.getRowObjectFromUID(f),u=0;u<t;u++)i=r.getRowObjectFromUID(i.parentUid);return i},n.prototype.getGroupAggregateTemplates=function(n){for(var i,t,e,u=[],f=this.parent.aggregates,r=0;r<f.length;r++)for(i=f[parseInt(r.toString(),10)],t=0;t<i.columns.length;t++)(n&&i.columns[parseInt(t.toString(),10)].groupCaptionTemplate||!n&&i.columns[parseInt(t.toString(),10)].groupFooterTemplate)&&(e={type:i.columns[parseInt(t.toString(),10)].type.toString().toLowerCase(),field:i.columns[parseInt(t.toString(),10)].field},u.push(e));return u},n.prototype.groupedRowReorder=function(n,i){var r=this.parent.getRowElementByUID(n.uid),u=this.parent.getRowElementByUID(i.uid),f={rows:[r],target:u,fromIndex:n.index,dropIndex:i.index},e;t.isNullOrUndefined(n)||t.isNullOrUndefined(i)||n.parentUid===i.parentUid||(u?("none"===u.style.display&&(r.style.display="none"),f.fromIndex>f.dropIndex?this.parent.getContentTable().querySelector(h).insertBefore(r,u):this.parent.getContentTable().querySelector(h).insertBefore(r,u.nextSibling)):t.remove(r),this.groupReorderHandler(n,i),e=[].slice.call(this.parent.getContentTable().getElementsByClassName(y)),sy(this.parent,f,e,i),this.parent.enableVirtualization?oy(this.parent):wo(this.parent,this.parent.getRowsObject().filter(function(n){return n.isDataRow}),e),this.parent.notify(gr,{rows:this.parent.getRowsObject()}))},n.prototype.groupReorderHandler=function(n,i){for(var e,r,o=this.parent,a=n.data,k=i.data,w=o.groupModule.getGroupAggregateTemplates(!1),d=o.getRowObjectFromUID(i.parentUid),g=o.getRowObjectFromUID(n.parentUid),u=[d],f=[g],v=o.groupSettings.columns,s=0;s<v.length;s++)a[v[parseInt(s.toString(),10)]]=k[v[parseInt(s.toString(),10)]],s>0&&(u.push(o.getRowObjectFromUID(u[s-1].parentUid)),f.push(o.getRowObjectFromUID(f[s-1].parentUid)));n.parentUid=i.parentUid;n.visible=i.visible;n.parentGid=i.parentGid;n.changes!==a&&(n.changes=a);var h=this.iterateGroupAggregates([{dragRowObjects:f,dropRowObjects:u}]),c=h.filter(function(n){return n.key===f[f.length-1].data.key||n.key instanceof Date&&n.key.toString()===f[f.length-1].data.key.toString()}),l=h.filter(function(n){return n.key===u[u.length-1].data.key||n.key instanceof Date&&n.key.toString()===u[u.length-1].data.key.toString()});for(h=[],t.isNullOrUndefined(c[0])||h.push(c[0]),t.isNullOrUndefined(l[0])||h.push(l[0]),e=o.currentViewData,r=0;r<e.length;r++)t.isNullOrUndefined(c[0])&&e[parseInt(r.toString(),10)].key===f[f.length-1].data.key||t.isNullOrUndefined(l[0])&&e[parseInt(r.toString(),10)].key===u[u.length-1].data.key?(e.splice(r,1),r--):t.isNullOrUndefined(c[0])||e[parseInt(r.toString(),10)].key!==c[0].key?t.isNullOrUndefined(l[0])||e[parseInt(r.toString(),10)].key!==l[0].key||(e[parseInt(r.toString(),10)]=l[0]):e[parseInt(r.toString(),10)]=c[0];var b=this.groupGenerator.generateRows(h,{}),y=[],p=[];for(r=0;r<f.length;r++)y.push.apply(y,this.getGroupParentFooterAggregateRowObject(f[parseInt(r.toString(),10)].uid));for(r=0;r<u.length;r++)p.push.apply(p,this.getGroupParentFooterAggregateRowObject(u[parseInt(r.toString(),10)].uid));f.push.apply(f,y);u.push.apply(u,p);this.updatedRowObjChange(f,b,w,!0);this.updatedRowObjChange(u,b,w);this.groupReorderRefreshHandler(f);this.groupReorderRefreshHandler(u)},n.prototype.updatedRowObjChange=function(n,i,r,u){var o=this.parent,s=o.getRowsObject(),w={},h=[],a,f,g,y,d,c,l,nt,p,tt;for(o.enableVirtualization&&(w=o.contentModule.vgenerator.cache,h=o.vcRows),a=0;a<n.length;a++){for(var b=!1,e=n[parseInt(a.toString(),10)],v=0;v<i.length;v++){if(f=i[parseInt(v.toString(),10)],!(t.isNullOrUndefined(f)||t.isNullOrUndefined(e.data.key)||t.isNullOrUndefined(f.data.key))&&(e.data.key===f.data.key||e.data.key instanceof Date&&e.data.key.toString()===f.data.key.toString())){if(g=!0,y=n[parseInt((a+1).toString(),10)],u&&y&&!y.isAggregateRow){var rt=y.data.key.toString(),it=y.data.field,k=f.data.items.records?f.data.items.records:f.data.items;k&&k.length&&k[0][""+it]&&k[0][""+it].toString()!==rt&&(g=!1)}if(!g&&u)continue;-1!==(c=s.indexOf(e))&&(s[parseInt(c.toString(),10)].data=f.data,s[parseInt(c.toString(),10)].gSummary=f.gSummary);o.enableVirtualization&&-1!==(l=h.indexOf(e))&&(h[parseInt(l.toString(),10)].data=f.data,h[parseInt(l.toString(),10)].gSummary=f.gSummary);e.data=f.data;e.gSummary=["gSummary"];i.splice(v,1);v--;b=!0;break}if(e.isAggregateRow&&f.isAggregateRow){for(d=0;d<r.length;d++)if(this.evaluateGroupAggregateValueChange(e,f,r[parseInt(d.toString(),10)])){-1!==(c=s.indexOf(e))&&(s[parseInt(c.toString(),10)].data=f.data,s[parseInt(c.toString(),10)].gSummary=f.gSummary);o.enableVirtualization&&-1!==(l=h.indexOf(e))&&(h[parseInt(l.toString(),10)].data=f.data,h[parseInt(l.toString(),10)].gSummary=f.gSummary);e.data=f.data;e.gSummary=f.gSummary;b=!0;break}if(b)break}}if(!b){if(nt=o.getRowElementByUID(e.uid),t.isNullOrUndefined(nt)||t.remove(nt),s.splice(s.indexOf(e),1),o.enableVirtualization)for(h.splice(h.indexOf(e),1),p=1;p<=Object.keys(w).length;p++)tt=w[parseInt(p.toString(),10)].indexOf(e),-1!==tt&&w[parseInt(p.toString(),10)].splice([parseInt(tt.toString(),10)],1);o.enableInfiniteScrolling&&o.infiniteScrollSettings.enableCache&&o.infiniteScrollModule.resetInfiniteCache(s)}}},n.prototype.groupReorderRefreshHandler=function(n){for(var r,i=this.parent,f=new ci(i.serviceLocator,null,i),e=i.getColumns(),u=0;u<n.length;u++)r=n[parseInt(u.toString(),10)],t.isNullOrUndefined(r.uid)||t.isNullOrUndefined(i.getRowElementByUID(r.uid))||f.refresh(r,e,!1)},n.prototype.getGroupParentFooterAggregateRowObject=function(n){for(var t,r=this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&this.parent.groupSettings.columns.length?this.parent.contentModule.rows:this.parent.getRowsObject(),u=[],i=0;i<r.length;i++)t=r[parseInt(i.toString(),10)],t.parentUid===n&&t.isAggregateRow&&u.push(t);return u},n.prototype.evaluateGroupAggregateValueChange=function(n,t,i){var r=!1;return n.data[i.field].field===t.data[i.field].field&&n.data[i.field].key===t.data[i.field].key&&n.data[i.field].hasOwnProperty(i.field+" - "+i.type)&&t.data[i.field].hasOwnProperty(i.field+" - "+i.type)&&(r=!0),r},n.prototype.gettingVirtualData=function(n,i,r){for(var u=[],e=function(f){var e,h,s;if(-1===i.indexOf(n[parseInt(f.toString(),10)].data)&&u.push(n[parseInt(f.toString(),10)].data),n[parseInt(f.toString(),10)].data.field===o.parent.groupSettings.columns[0])for(e=n[parseInt(f.toString(),10)].data.items,t.isNullOrUndefined(e.records)||(e=e.records),h=function(n){r&&-1===i.findIndex(function(t){return t[r.toString()]===e[parseInt(n.toString(),10)][r.toString()]})&&u.push(e[parseInt(n.toString(),10)])},s=0;s<e.length;s++)h(s)},o=this,f=0;f<n.length;f++)e(f);return u},n.prototype.iterateGroupAggregates=function(n){var ft=this,et=n instanceof Array?n:[],yt=this.parent.getRowsObject(),i=this.parent.getCurrentViewRecords().slice(),y=this.parent.getPrimaryKeyFieldNames()[0],f=n&&n.length?n[0]&&n[0].dragRowObjects:null,e=n&&n.length?n[0]&&n[0].dropRowObjects:null,h=null,c=null,d,l,p,w,g,r,ot,b,a,it,k,s,v,rt,ut,vt;if(this.parent.enableVirtualization&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&(!t.isNullOrUndefined(f)||!t.isNullOrUndefined(e))&&(f&&i.push.apply(i,this.gettingVirtualData(f,i,y)),e&&i.push.apply(i,this.gettingVirtualData(e,i,y))),d=this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&n.length&&this.parent.groupSettings.columns.length&&!t.isNullOrUndefined(f)&&!t.isNullOrUndefined(e),d&&(i=[],h=e[e.length-1].data.key,c=f[f.length-1].data.key,this.parent.getRowsObject().map(function(n){var t=n.data[ft.parent.groupSettings.columns[0]];n.isDataRow&&(t===h||t===c||t instanceof Date&&(t.toString()===h.toString()||t.toString()===c.toString()))&&i.push(n.data)})),l=[],p=yt.map(function(n){return"delete"===n.edit&&l.push(n.data),n.changes instanceof Object?n.changes:n.data}),p=0===et.length?p:et,w=i.map(function(n){var t,i=u.DataUtil.getObject(y,n);return p.some(function(n){return t=n,i===u.DataUtil.getObject(y,n)})?t:n}),g=n,(!g.type||"cancel"!==g.type)&&l.length>0)for(r=0;r<l.length;r++)ot=w.indexOf(l[parseInt(r.toString(),10)]),w.splice(ot,1);for(var o,st,ht=[],ct=this.parent.aggregates,nt=0;nt<ct.length;nt++)for(b=ct[parseInt(nt.toString(),10)],a=0;a<b.columns.length;a++)for(var lt={},tt=0,at=b.columns[parseInt(a.toString(),10)].type.toString().split(",").map(function(n){return n.trim()});tt<at.length;tt++)lt={type:at[tt].toLowerCase(),field:b.columns[parseInt(a.toString(),10)].field},ht.push(lt);for(it=this.parent.groupSettings.columns,k=0;k<it.length;k++)st=o||w,o=u.DataUtil.group(st,it[parseInt(k.toString(),10)],ht,null,null);if(d&&(s=this.parent.currentViewData[this.parent.currentViewData.length-1].key,s instanceof Date&&(s.toString()===h.toString()||s.toString()===c.toString())||s===h||s===c)){for(v=[],r=0;r<o.length;r++)v.push(o[parseInt(r.toString(),10)]);rt=[];ut=this.parent.getDataModule().generateQuery(!0);!function(n){for(var t=0;t<v.length;t++)rt.push(new u.Predicate("field","==",v[parseInt(t.toString(),10)].field).and(ft.parent.renderModule.getPredicate("key","equal",v[parseInt(t.toString(),10)].key)));n.where(u.Predicate.or(rt))}(ut);vt=this.parent.getDataModule().dataManager.executeLocal(ut);this.parent.renderModule.updateGroupInfo(o,vt)}return o},n.prototype.updateExpand=function(n){for(var r,o,f,e=n.uid,s=n.isExpand,i=this.parent.getRowsObject(),u=0;u<i.length;u++)if(r=i[parseInt(u.toString(),10)],r.uid===e||t.isNullOrUndefined(e))for(r.isExpand=s,o=function(n){var u=i[parseInt(n.toString(),10)],f=void 0;if(u.parentUid!==r.uid&&(f=i.filter(function(n){return n.uid===u.parentUid})[0]),u.parentUid===r.uid?u.visible=r.isExpand:t.isNullOrUndefined(f)||u.parentUid!==f.uid||(f.isExpand&&!0===f.visible?u.visible=!0:f.isExpand&&!1===f.visible&&(u.visible=!1)),t.isNullOrUndefined(e))return"break"},f=u+1;f<i.length&&"break"!==o(f);f++);this.parent.notify(k,{rows:i,args:{isFrozen:!1,rows:i}})},n}(),bht=function(){function n(n,t){this.aria=new yh;this.childRefs=[];this.parent=n;this.serviceLocator=t;this.focus=t.getService("focus");this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.isDestroyed||(t.EventHandler.add(this.parent.element,"auxclick",this.auxilaryclickHandler,this),this.parent.on(kt,this.clickHandler,this),this.parent.on(l,this.destroy,this),this.parent.on(rt,this.keyPressHandler,this),this.parent.on(dl,this.expand,this),this.parent.on(br,this.refreshColSpan,this),this.parent.on(l,this.destroyChildGrids,this),this.parent.on(ga,this.destroyChildGrids,this),this.parent.on(l,this.detachDetailTemplate,this),this.parent.on(uh,this.detachDetailTemplate,this))},n.prototype.clickHandler=function(n){(n.target.classList.contains("e-icon-grightarrow")||n.target.classList.contains("e-icon-gdownarrow"))&&!this.parent.allowGrouping&&n.preventDefault();this.toogleExpandcollapse(t.closest(n.target,"td"))},n.prototype.auxilaryclickHandler=function(n){(n.target.classList.contains("e-icon-grightarrow")||n.target.classList.contains("e-icon-gdownarrow"))&&!this.parent.allowGrouping&&1===n.button&&n.preventDefault()},n.prototype.toogleExpandcollapse=function(n){var p,v,o,y,a,vt,w,b,yt,ut,ft,et,ot,st,g,tt,it,ht,pt;this.l10n=this.serviceLocator.getService("localization");var r,i=this.parent,rt=this.parent.getContentTable(),wt=this.parent.getCurrentViewRecords().length-1,ct=n&&n.classList.contains("e-detailrowcollapse");if(!(!n||!n.classList.contains("e-detailrowcollapse")&&!n.classList.contains("e-detailrowexpand")||n&&n.classList.contains("e-masked-cell"))){var u=n.parentElement,bt=u.getAttribute("data-uid"),f=i.getRowObjectFromUID(bt);if(!t.isNullOrUndefined(f)){if(p=!1,v=this.parent.getContentTable().querySelector(h).children[u.rowIndex+1],n.classList.contains("e-detailrowcollapse")){if(o=f.data,this.isDetailRow(v))v.style.display="",i.notify(fw,{data:o,childGrid:i.childGrid,detailElement:n,isExpanded:ct}),p=!0;else if(i.getDetailTemplate()||i.childGrid){var lt=pi("grid-row"),s=this.parent.createElement("tr",{className:"e-detailrow",attrs:{"data-uid":lt,role:"row"}}),l=this.parent.createElement("th",{className:"e-detailcell",attrs:{scope:"col",role:"columnheader"}}),at=this.parent.getVisibleColumns().length;for(this.parent.allowRowDragAndDrop&&at++,l.setAttribute("colspan",at.toString()),y=new cr({isDataRow:!0,isExpand:!0,uid:lt,isDetailRow:!0,cells:[new bi({cellType:e.Indent}),new bi({isDataCell:!0,visible:!0})]}),y.parentUid=f.uid,a=0,vt=i.groupSettings.columns.length;a<vt;a++)s.appendChild(this.parent.createElement("td",{className:"e-indentcell"})),y.cells.unshift(new bi({cellType:e.Indent}));if(s.appendChild(this.parent.createElement("th",{className:"e-detailindentcell",attrs:{scope:"col"}})),s.appendChild(l),u.parentNode.insertBefore(s,u.nextSibling),w=void 0,b=void 0,i.detailTemplate?(w=this.parent.isReact&&"string"!=typeof i.detailTemplate&&!(i.detailTemplate.prototype&&i.detailTemplate.prototype.CSPTemplate),b=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,yt=this.parent.printGridParent&&this.parent.printGridParent.isReact,ut=i.element.id+"detailTemplate",w||b||yt?(i.getDetailTemplate()(o,i,"detailTemplate",ut,null,null,l),this.parent.renderTemplates(function(){i.trigger(fs,{detailElement:l,data:o,childGrid:r})})):nt(l,i.getDetailTemplate()(o,i,"detailTemplate",ut,void 0,void 0,void 0,this.parent.root))):((r=new yv(this.getGridModel(i,f,i.printMode))).height=i.enableInfiniteScrolling&&"auto"===r.height?300:r.height,r.root=i.root?i.root:i,this.childRefs.push(r),r.query&&(r.query=r.query.clone()),r.parentDetails={parentID:i.element.id,parentPrimaryKeys:i.getPrimaryKeyFieldNames(),parentKeyField:i.childGrid.queryString,parentKeyFieldValue:i.childGrid.queryString&&gi(i.childGrid.queryString)?d(i.childGrid.queryString,o):o[i.childGrid.queryString],parentRowData:o},i.isReact||i.isVue?r.parentDetails.parentInstObj=i:i.parentDetails&&i.parentDetails.parentInstObj&&(i.parentDetails.parentInstObj.isReact||i.parentDetails.parentInstObj.isVue)&&(r.parentDetails.parentInstObj=i.parentDetails.parentInstObj),i.printGridParent&&i.printGridParent.isReact&&(r.printGridParent=i.printGridParent),r.isLegacyTemplate=i.isReact||i.isLegacyTemplate,i.isPrinting&&(r.isPrinting=!0,r.on(k,this.promiseResolve(r),this),r.on(ai,this.promiseResolve(r),this)),f.childGrid=r,ft=r.getInjectedModules(),et=i.getInjectedModules(),ft&&ft.length===et.length||r.setInjectedModules(et),ot=this.parent.createElement("div",{id:"child"+wrt(u,"e-grid").length+"_grid"+u.rowIndex+pi(""),className:"e-childgrid"}),l.appendChild(ot),r.appendTo(ot)),s.appendChild(l),u.nextSibling?u.parentNode.insertBefore(s,u.nextSibling):u.parentNode.appendChild(s),st=i.getRows(),g=i.getRowsObject(),st.splice(st.indexOf(u)+1,0,s),i.enableInfiniteScrolling&&i.infiniteScrollSettings.enableCache){for(tt=i.contentModule.infiniteCache,it=Object.keys(tt),a=0;a<it.length;a++)if(ht=tt[parseInt(it[parseInt(a.toString(),10)],10)].indexOf(f),-1!==ht){tt[parseInt(it[parseInt(a.toString(),10)],10)].splice(ht+1,0,y);break}}else g.splice(g.indexOf(f)+1,0,y);w&&b||i.trigger(fs,{detailElement:l,data:o,childGrid:r});i.notify(fs,{rows:g})}(t.classList(n,["e-detailrowexpand"],["e-detailrowcollapse"]),t.classList(n.firstElementChild,["e-dtdiagonaldown","e-icon-gdownarrow"],["e-dtdiagonalright","e-icon-grightarrow"]),f.isExpand=!0,n.classList.contains("e-lastrowcell")&&this.parent.getContent().clientHeight>rt.scrollHeight)&&(t.removeClass(n.parentElement.querySelectorAll("td"),"e-lastrowcell"),pt=rt.querySelector(h).getElementsByClassName("e-detailrow").length-1,t.addClass(rt.querySelector(h).getElementsByClassName("e-detailrow")[parseInt(pt.toString(),10)].childNodes,["e-lastrowcell"]),this.lastrowcell=!0);this.aria.setExpand(n,!0);n.firstElementChild.setAttribute("title",this.l10n.getConstant("Expanded"))}else this.isDetailRow(v)&&(v.style.display="none",i.notify(fw,{data:f.data,childGrid:i.childGrid,detailElement:n,isExpanded:ct})),t.classList(n,["e-detailrowcollapse"],["e-detailrowexpand"]),t.classList(n.firstElementChild,["e-dtdiagonalright","e-icon-grightarrow"],["e-dtdiagonaldown","e-icon-gdownarrow"]),parseInt(u.getAttribute(c),10)-1===wt&&this.lastrowcell&&(t.addClass(n.parentElement.querySelectorAll("td"),"e-lastrowcell"),this.lastrowcell=!1),f.isExpand=!1,p=!0,this.aria.setExpand(n,!1),n.firstElementChild.setAttribute("title",this.l10n.getConstant("Collapsed"));(!t.isNullOrUndefined(i.detailTemplate)||i.childGrid&&p)&&(i.updateVisibleExpandCollapseRows(),i.notify(gr,{rows:i.getRowsObject()}));this.parent.allowTextWrap&&"auto"===this.parent.height&&(this.parent.getContentTable().scrollHeight>this.parent.getContent().clientHeight?this.parent.scrollModule.setPadding():this.parent.scrollModule.removePadding())}}},n.prototype.getGridModel=function(n,i,r){var u;return n.isPrinting&&i.isExpand&&n.expandedRows&&n.expandedRows[i.index]&&n.expandedRows[i.index].gridModel?(n.expandedRows[i.index].gridModel.hierarchyPrintMode=n.childGrid.hierarchyPrintMode,u=t.extend({},n.expandedRows[i.index].gridModel,n.childGrid,!0)):(n.isPrinting&&n.childGrid.allowPaging&&(n.childGrid.allowPaging="CurrentPage"===r),u=t.extend({},{},n.childGrid,!0)),u},n.prototype.promiseResolve=function(n){var t=this;return function(){n.off(k,t.promiseResolve);n.off(ai,t.promiseResolve);n.notify(kl,{})}},n.prototype.isDetailRow=function(n){return n&&n.classList.contains("e-detailrow")},n.prototype.destroy=function(){var n=this.parent.element;!this.parent.isDestroyed&&n&&(n.querySelector("."+st)||n.querySelector("."+it))&&(t.EventHandler.remove(this.parent.element,"auxclick",this.auxilaryclickHandler),this.parent.off(kt,this.clickHandler),this.parent.off(l,this.destroy),this.parent.off(rt,this.keyPressHandler),this.parent.off(dl,this.expand),this.parent.off(br,this.refreshColSpan),this.parent.off(l,this.destroyChildGrids),this.parent.off(ga,this.destroyChildGrids),this.parent.off(l,this.detachDetailTemplate),this.parent.off(uh,this.detachDetailTemplate))},n.prototype.getTDfromIndex=function(n,i){var r=t.isNullOrUndefined(n)?void 0:this.parent.getDataRows()[parseInt(n.toString(),10)];return r&&r.querySelector(i)?r.querySelector(i):null},n.prototype.expand=function(n){isNaN(n)||(n=this.getTDfromIndex(n,".e-detailrowcollapse"));n&&n.classList.contains("e-detailrowcollapse")&&this.toogleExpandcollapse(n)},n.prototype.collapse=function(n){isNaN(n)||(n=this.getTDfromIndex(n,".e-detailrowexpand"));n&&n.classList.contains("e-detailrowexpand")&&this.toogleExpandcollapse(n)},n.prototype.expandAll=function(){this.expandCollapse(!0);this.parent.trigger(s,{requestType:"expandAllComplete",type:s,moduleObj:this})},n.prototype.collapseAll=function(){this.expandCollapse(!1);this.parent.trigger(s,{requestType:"collapseAllComplete",type:s,moduleObj:this})},n.prototype.expandCollapse=function(n){for(var t,r=this.parent.getDataRows(),i=0,u=r.length;i<u;i++)t=r[parseInt(i.toString(),10)].querySelector(".e-detailrowcollapse, .e-detailrowexpand"),n?this.expand(t):this.collapse(t)},n.prototype.keyPressHandler=function(n){var r=this.parent,i,u,t;switch(/(Mac)/i.test(navigator.platform)&&n.metaKey&&("downArrow"===n.action?n.action="ctrlDownArrow":"upArrow"===n.action&&(n.action="ctrlUpArrow")),n.action){case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"altUpArrow":case"altDownArrow":i=r.allowSelection?r.getSelectedRowIndexes():[];i.length&&(u=r.getDataRows()[i[i.length-1]].querySelector(".e-detailrowcollapse, .e-detailrowexpand"),"altDownArrow"===n.action?this.expand(u):this.collapse(u));break;case"enter":if(this.parent.isEdit)return;if(t=this.focus.getFocusedElement(),t&&(t.classList.contains("e-icon-grightarrow")||t.classList.contains("e-icon-gdownarrow"))&&(t=t.parentElement),t&&!t.classList.contains("e-detailrowcollapse")&&!t.classList.contains("e-detailrowexpand"))break;this.toogleExpandcollapse(t)}},n.prototype.refreshColSpan=function(){for(var t=this.parent.contentModule.getTable().querySelectorAll("tr.e-detailrow"),i=this.parent.getVisibleColumns().length,n=0;n<t.length;n++)t[parseInt(n.toString(),10)].querySelector(".e-detailcell").setAttribute("colspan",i+"")},n.prototype.destroyChildGrids=function(n){var i=this.parent,e,s,o;if(i.enableInfiniteScrolling&&(i.childGrid||i.detailTemplate)&&"infiniteScroll"===n.requestType&&i.infiniteScrollSettings.enableCache){var h="down"===n.direction?n.currentPage-i.infiniteScrollSettings.initialBlocks:n.currentPage+i.infiniteScrollSettings.initialBlocks,u=i.contentModule.infiniteCache[parseInt(h.toString(),10)],r=u.filter(function(n){return n.isDetailRow&&n.parentUid});if(i.childGrid)for(var c=function(n){var o=i.getContentTable().querySelector('[data-uid="'+r[parseInt(n.toString(),10)].uid+'"]'),s=o.querySelector(".e-childgrid"),e=f.childRefs.findIndex(function(n){return n.element.id===s.id}),t;f.childRefs[parseInt(e.toString(),10)].isDestroyed||(f.childRefs[parseInt(e.toString(),10)].destroy(),f.childRefs.splice(e,1));t=u.indexOf(r[parseInt(n.toString(),10)]);u.splice(t,1);u[t-1].childGrid=null;u[t-1].isExpand=!1;o.remove()},f=this,t=0;t<r.length;t++)c(t);if(i.detailTemplate&&r.length){for(e=[],s=function(n){e.push({detailRow:i.getContentTable().querySelector('[data-uid="'+r[parseInt(n.toString(),10)].uid+'"]'),detailRowObject:r[parseInt(n.toString(),10)],parentRowObject:u.find(function(t){return r[parseInt(n.toString(),10)].parentUid===t.uid})})},t=0;t<r.length;t++)s(t);this.parent.trigger(tb,e,function(){for(var f,t,n=0;n<r.length;n++)f=i.getContentTable().querySelector('[data-uid="'+r[parseInt(n.toString(),10)].uid+'"]'),t=u.indexOf(r[parseInt(n.toString(),10)]),u.splice(t,1),u[t-1].isExpand=!1,f.remove()})}}else{for(o=this.parent.getRowsObject(),t=0;t<o.length;t++)o[parseInt(t.toString(),10)].childGrid=null;for(t=0;t<this.childRefs.length;t++)this.childRefs[parseInt(t.toString(),10)].isDestroyed||this.childRefs[parseInt(t.toString(),10)].destroy();this.childRefs=[]}},n.prototype.detachDetailTemplate=function(){var n=this.parent,i,t,r;n.detailTemplate&&(i=n.getRowsObject(),t=i.filter(function(n){return n.isDetailRow&&n.parentUid}),t.length&&(r=[],t.map(function(t){r.push({detailRow:n.getContentTable().querySelector('[data-uid="'+t.uid+'"]'),detailRowObject:t,parentRowObject:i.find(function(n){return t.parentUid===n.uid})})}),n.trigger(tb,r,function(){t.map(function(t){n.getContentTable().querySelector('[data-uid="'+t.uid+'"]').remove()})})))},n.prototype.getModuleName=function(){return"detailRow"},n}(),kht=function(){function n(n,t){this.predefinedItems={};this.isSearched=!1;this.items=["Add","Edit","Update","Delete","Cancel","Print","Search","ColumnChooser","PdfExport","ExcelExport","CsvExport","WordExport"];this.isRightToolbarMenu=!1;this.parent=n;this.gridID=n.element.id;this.serviceLocator=t;this.addEventListener()}return n.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization");for(var r=this.parent.enableAdaptiveUI,o=["Edit","Delete","Update","Cancel"],u=0,f=["Add","Edit","Update","Delete","Cancel","Print","PdfExport","ExcelExport","WordExport","CsvExport"];u<f.length;u++){var n=f[u],i=n.toLowerCase(),e=i[0].toUpperCase()+i.slice(1);this.predefinedItems[""+n]={id:this.gridID+"_"+i,prefixIcon:"e-"+i,text:this.l10n.getConstant(e),tooltipText:this.l10n.getConstant(e)};r&&(this.predefinedItems[""+n].text="",this.predefinedItems[""+n].visible=-1===o.indexOf(n))}this.predefinedItems.Search={id:this.gridID+"_search",tooltipText:this.l10n.getConstant("Search"),align:"Right",cssClass:"e-search-wrapper",type:"Input"};this.isRightToolbarMenu=!1;this.parent.enableAdaptiveUI&&this.isResponsiveToolbarMenuItems(!0)&&("Horizontal"===this.parent.rowRenderingMode||"Vertical"===this.parent.rowRenderingMode&&!this.parent.allowFiltering&&!this.parent.allowSorting)&&(this.isRightToolbarMenu=!0);r&&this.isResponsiveToolbarMenuItems(!1)?this.predefinedItems.responsiveToolbarItems={id:this.gridID+"_responsivetoolbaritems",cssClass:"e-responsive-toolbar-items e-menu-toolbar",suffixIcon:"e-responsivetoolbaritems-btn",align:this.isRightToolbarMenu?"Left":"Right"}:this.predefinedItems.ColumnChooser={id:this.gridID+"_columnchooser",cssClass:"e-cc e-ccdiv e-cc-toolbar",suffixIcon:"e-columnchooser-btn",text:r?"":this.l10n.getConstant("Columnchooser"),tooltipText:this.l10n.getConstant("Columnchooser"),align:"Right"};"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&(this.predefinedItems.responsiveFilter={id:this.gridID+"_responsivefilter",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resfilter-icon",tooltipText:this.l10n.getConstant("FilterIcon")}),this.parent.allowSorting&&(this.predefinedItems.responsiveSort={id:this.gridID+"_responsivesort",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-ressort-icon",tooltipText:this.l10n.getConstant("SortIcon")}));this.parent.enableAdaptiveUI&&this.parent.toolbar&&this.parent.toolbar.some(function(n){return"object"==typeof n&&"Search"===n.text||"Search"===n})&&(this.predefinedItems.responsiveBack={id:this.gridID+"_responsiveback",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resback-icon",visible:!1});this.createToolbar();this.parent.enableAdaptiveUI&&(t.isNullOrUndefined(this.responsiveToolbarMenu)&&this.renderResponsiveToolbarpopup(),this.toolbar.element&&this.toolbar.refreshOverflow())},n.prototype.isResponsiveToolbarMenuItems=function(n){for(var i=n?["Add","Edit","Delete","Search"]:["Print","ColumnChooser","PdfExport","ExcelExport","CsvExport"],r=this.parent.toolbar||[],t=0;t<i.length;t++)if(r.indexOf(i[parseInt(t.toString(),10)])>=0)return!n;return!!n},n.prototype.getToolbar=function(){return this.toolbar.element},n.prototype.destroy=function(){this.toolbar&&!this.toolbar.isDestroyed&&(this.responsiveToolbarMenu&&this.responsiveToolbarMenu.destroy(),this.toolbar.off("render-react-toolbar-template",this.addReactToolbarPortals),this.unWireEvent(),this.removeEventListener(),this.toolbar.created=null,this.toolbar.clicked=null,this.toolbar.element?this.toolbar.destroy():(this.parent.destroyTemplate(["toolbarTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),this.parent.isAngular&&(this.toolbar.viewContainerRef=null,this.toolbar.registeredTemplate=null),this.element.parentNode&&(t.remove(this.element),this.toolbar=null))},n.prototype.bindSearchEvents=function(){this.searchElement=t.select("#"+this.gridID+"_searchbar",this.element);this.wireEvent();this.refreshToolbarItems();this.parent.searchSettings&&this.updateSearchBox()},n.prototype.toolbarCreated=function(n){if(this.element.querySelector(".e-search-wrapper")){if(!this.parent.enableAdaptiveUI||n){var t=this.parent.cssClass?"e-input-group e-search "+this.parent.cssClass:"e-input-group e-search";this.element.querySelector(".e-search-wrapper").innerHTML='<div class="'+t+'" role="search">                    <input id="'+this.gridID+'_searchbar" class="e-input e-search" name="input" type="search"                     placeholder= "'+this.l10n.getConstant("Search")+'"/>                    <span id="'+this.gridID+'_clearbutton" class="e-input-group-icon e-icons e-sicon"                     tabindex="-1" aria-label= "clear" role= "button" ><\/span>                    <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" role= "search"><\/span>                     <\/div>'}else this.element.querySelector(".e-search-wrapper").innerHTML='<span id="'+this.gridID+'_clearbutton" class="e-input-group-icon e-icons e-sicon"                     tabindex="-1" role= "button" aria-label= "clear" ><\/span>                    <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" role= "button" title="'+this.l10n.getConstant("Search")+'"><\/span>                     <\/div>';this.element.querySelector("#"+this.gridID+"_clearbutton").style.cursor="default"}this.element.querySelector(".e-responsive-toolbar-items")&&(this.element.querySelector(".e-responsive-toolbar-items").innerHTML='<button id="'+this.gridID+'_responsivetoolbaritems" class="e-tbar-btn e-control e-btn e-lib e-icon-btn"                     type="button" data-ripple="true" tabindex="-1" data-tabindex="-1" aria-label="responsivetoolbaritems"                      aria-disabled="false" ><span class="e-btn-icon e-responsivetoolbaritems-btn e-icons"><\/span>',this.element.querySelector("#"+this.gridID+"_responsivetoolbaritems").style.width="auto");this.bindSearchEvents()},n.prototype.createToolbar=function(){var s=this.getItems(),n,i;if(this.toolbar=new ve.Toolbar({items:s,clicked:this.toolbarClickHandler.bind(this),enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,created:this.toolbarCreated.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""}),this.toolbar.isReact=this.parent.isReact,this.toolbar.on("render-react-toolbar-template",this.addReactToolbarPortals,this),this.toolbar.isStringTemplate=!0,n="viewContainerRef",this.parent[""+n]&&(this.toolbar.registeredTemplate={},this.toolbar[""+n]=this.parent[""+n]),this.element=this.parent.createElement("div",{id:this.gridID+"_toolbarItems"}),this.parent.enableAdaptiveUI&&this.element.classList.add("e-res-toolbar"),this.parent.toolbarTemplate){if(i=this.parent.isVue||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isVue,"string"==typeof this.parent.toolbarTemplate&&(!i||document.querySelectorAll(this.parent.toolbarTemplate).length)&&document.querySelector(this.parent.toolbarTemplate)&&"script"!==document.querySelector(this.parent.toolbarTemplate).tagName.toLowerCase())this.toolbar.appendTo(this.parent.toolbarTemplate),this.element=this.toolbar.element;else{var h=this.parent.isReact&&"string"!=typeof this.parent.toolbarTemplate&&!(this.parent.toolbarTemplate.prototype&&this.parent.toolbarTemplate.prototype.CSPTemplate),c=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,l=this.parent.element.id+"toolbarTemplate";h||c?(et(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate",l,null,null,this.element),this.parent.renderTemplates()):nt(this.element,et(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate",null,null,null,null,this.parent.root))}this.element.classList.add("e-temp-toolbar")}else this.toolbar.appendTo(this.element);this.parent.element.insertBefore(this.element,this.parent.getHeaderContent());var r=this.element.querySelector(".e-toolbar-left"),u=this.element.querySelector(".e-toolbar-center"),f=this.element.querySelector(".e-toolbar-right"),e=this.element.querySelector(".e-toolbar-items"),o=this.element,a=r?r.clientWidth:0,v=u?u.clientWidth:0,y=f?f.clientWidth:0,p=e?e.clientWidth:0,t=o?o.clientWidth:0;(a>t||v>t||y>t||p>t)&&this.toolbar.refreshOverflow()},n.prototype.addReactToolbarPortals=function(n){this.parent.isReact&&n&&(this.parent.portals=this.parent.portals.concat(n),this.parent.renderTemplates())},n.prototype.renderResponsiveSearch=function(n){if(n){this.toolbarCreated(!0);this.refreshResponsiveToolbarItems(bu.isSearch);this.searchElement=t.select("#"+this.gridID+"_searchbar",this.element);var r=i(this.searchElement,"e-toolbar-right");r&&r.classList.add("e-responsive-right");this.parent.searchSettings&&this.updateSearchBox()}else this.refreshResponsiveToolbarItems(bu.isInitial);this.toolbar.element&&this.toolbar.element.querySelector(".e-hscroll")&&this.toolbar.refreshOverflow();n&&(this.searchBoxObj.searchFocus({target:this.searchElement}),this.searchElement.focus())},n.prototype.refreshResponsiveToolbarItems=function(n){var s,f,h,r,t;if(n===bu.isInitial){for(var u=this.parent.element.id,e=[u+"_edit",u+"_delete"],a=this.parent.getSelectedRowIndexes(),c=[u+"_responsiveback",u+"_update",u+"_cancel"],o=0,l=this.toolbar.items;o<l.length;o++)(r=(t=l[o]).template&&t.template.length?i(this.toolbar.element.querySelector("#"+t.id),"e-template").children[0]:this.toolbar.element.querySelector("#"+t.id))&&(e.indexOf(t.id)>-1?a.length?r.parentElement.classList.remove("e-hidden"):r.parentElement.classList.add("e-hidden"):-1===c.indexOf(t.id)||c.indexOf(t.id)>0&&this.parent.isEdit?r.parentElement.classList.remove("e-hidden"):r.parentElement.classList.add("e-hidden"));this.searchElement&&(s=i(this.searchElement,"e-toolbar-right"),s&&s.classList.remove("e-responsive-right"),this.toolbarCreated(!1),this.unWireEvent(),this.searchElement=void 0)}if(n===bu.isSearch)for(e=[this.parent.element.id+"_responsiveback",this.parent.element.id+"_search"],f=0,h=this.toolbar.items;f<h.length;f++)t=h[f],(r=this.toolbar.element.querySelector("#"+t.id))&&(e.indexOf(t.id)>-1?r.parentElement.classList.remove("e-hidden"):r.parentElement.classList.add("e-hidden"))},n.prototype.refreshToolbarItems=function(){var n=this.parent,r=[],i=[],u=n.editSettings,f=n.currentViewData&&n.currentViewData.length||"Batch"===n.editSettings.mode&&!t.isNullOrUndefined(n.editModule)&&n.editModule.getBatchChanges()[lr].length,e=u.showAddNewRow&&!n.element.querySelector(".e-editedrow");u.allowAdding?r.push(this.gridID+"_add"):i.push(this.gridID+"_add");u.allowEditing&&f?r.push(this.gridID+"_edit"):i.push(this.gridID+"_edit");u.allowDeleting&&f?r.push(this.gridID+"_delete"):i.push(this.gridID+"_delete");n.allowPdfExport&&f?r.push(this.gridID+"_pdfexport"):i.push(this.gridID+"_pdfexport");n.allowExcelExport&&f?(r.push(this.gridID+"_excelexport"),r.push(this.gridID+"_csvexport")):(i.push(this.gridID+"_excelexport"),i.push(this.gridID+"_csvexport"));n.showColumnChooser?r.push(this.gridID+"_columnchooser"):i.push(this.gridID+"_columnchooser");"Batch"===n.editSettings.mode?n.element.getElementsByClassName("e-updatedtd").length&&(u.allowAdding||u.allowEditing)?(r.push(this.gridID+"_update"),r.push(this.gridID+"_cancel")):(i.push(this.gridID+"_update"),i.push(this.gridID+"_cancel")):(n.isEdit||u.showAddNewRow)&&(u.allowAdding||u.allowEditing)?(r=e?[this.gridID+"_update",this.gridID+"_cancel",this.gridID+"_edit",this.gridID+"_delete"]:[this.gridID+"_update",this.gridID+"_cancel"],i=e?[this.gridID+"_add"]:[this.gridID+"_add",this.gridID+"_edit",this.gridID+"_delete"]):(i.push(this.gridID+"_update"),i.push(this.gridID+"_cancel"));this.enableItems(r,!0);this.enableItems(i,!1)},n.prototype.getItems=function(){var t=[],u=this.parent.toolbar||[],i,r,n;if("string"==typeof this.parent.toolbar)return[];for("Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&t.push(this.getItemObject("responsiveFilter")),this.parent.allowSorting&&t.push(this.getItemObject("responsiveSort"))),i=0,r=u;i<r.length;i++)if(n=r[i],!this.parent.enableAdaptiveUI||-1===["Print","ColumnChooser","PdfExport","ExcelExport","CsvExport"].indexOf(n))switch(this.parent.enableAdaptiveUI&&("object"==typeof n&&"Search"===n.text||"Search"===n)&&t.push(this.getItemObject("responsiveBack")),typeof n){case"number":t.push(this.getItemObject(this.items[n]));break;case"string":t.push(this.getItemObject(n));break;default:t.push(this.getItem(n))}return this.parent.enableAdaptiveUI&&this.isResponsiveToolbarMenuItems(!1)&&t.push(this.getItemObject("responsiveToolbarItems")),t},n.prototype.getItem=function(n){var i=this.predefinedItems[n.text];return i?t.extend(i,i,n):n},n.prototype.getItemObject=function(n){return this.predefinedItems[""+n]||{text:n,id:this.gridID+"_"+n}},n.prototype.enableItems=function(n,i){for(var e,f,r=0,u=n;r<u.length;r++)e=u[r],f=t.select("#"+e,this.element),f&&this.toolbar.enableItems(f.closest(".e-toolbar-item"),i)},n.prototype.toolbarClickHandler=function(n){var i=this,u=this.parent,r=this.gridID,f=n.originalEvent,e;this.parent.enableAdaptiveUI&&n.item.id===r+"_responsivetoolbaritems"?this.openResponsiveToolbarMenuPopup(f,n.item.id):(t.extend(n,{cancel:!1}),e=n,u.trigger(tp,e,function(n){if(n.originalEvent=n.originalEvent?n.originalEvent:f,!n.cancel)switch(!t.isNullOrUndefined(n.item)&&n.item.id){case r+"_print":u.print();break;case r+"_edit":u.startEdit();break;case r+"_update":u.endEdit();break;case r+"_cancel":u.closeEdit();break;case r+"_add":u.addRecord();break;case r+"_delete":u.deleteRecord();break;case r+"_search":n.originalEvent.target.id===r+"_searchbutton"&&i.searchElement?i.search():!u.enableAdaptiveUI||i.searchElement||!n.originalEvent.target.classList.contains("e-search-wrapper")&&n.originalEvent.target.id!==r+"_searchbutton"?n.originalEvent.target.classList.contains("e-clear-icon")&&n.originalEvent.target.id===r+"_clearbutton"&&i.searchElement&&(i.searchElement.value="",i.searchElement&&(i.sIcon=i.searchElement.parentElement.querySelector(".e-sicon"),i.sIcon.classList.remove("e-clear-icon"),i.sIcon.removeAttribute("title"),i.sIcon.style.cursor="default"),(i.isSearched||i.parent.searchSettings.key.length)&&(i.parent.search(i.searchElement.value),i.isSearched=!1)):i.renderResponsiveSearch(!0);break;case r+"_columnchooser":if(i.parent.enableAdaptiveUI)u.showResponsiveCustomColumnChooser();else{var e=i.parent.element.querySelector(".e-ccdiv"),o=e.getBoundingClientRect().top,s=e.getBoundingClientRect().left,h=n.originalEvent.target;o=e.getBoundingClientRect().top+e.offsetTop;u.createColumnchooser(s,o,h)}break;case r+"_responsivefilter":u.notify(ei,{action:3});u.showResponsiveCustomFilter();break;case r+"_responsivesort":u.notify(ei,{action:2});u.showResponsiveCustomSort();break;case r+"_responsiveback":i.renderResponsiveSearch(!1);i.toolbar.refreshOverflow()}}))},n.prototype.openResponsiveToolbarMenuPopup=function(n,i){var r={top:0,left:0},f,u,e;this.toolbarMenuElement.style.cssText="display:block;visibility:hidden";u=this.toolbarMenuElement.getBoundingClientRect();e=this.parent.element.getBoundingClientRect();this.toolbarMenuElement.style.cssText="display:none;visibility:visible";f=t.isNullOrUndefined(n)?this.parent.element.querySelector("#"+i):n.target;this.parent.enableRtl?(r=tt.calculatePosition(f,"left","bottom"),this.isRightToolbarMenu&&(r.left-=u.width)):(r=tt.calculatePosition(f,"right","bottom"),this.isRightToolbarMenu||(r.left-=u.width),r.left+u.width+1>=e.right&&(r.left-=35));this.responsiveToolbarMenu.open(r.top,r.left);n&&n.preventDefault&&n.preventDefault();le(this.parent.element,this.responsiveToolbarMenu.element.parentElement)},n.prototype.getMenuItems=function(){for(var n,i=[],t=0,r=this.parent.toolbar||[];t<r.length;t++)n=r[t],"string"!=typeof n||"ColumnChooser"!==n&&"PdfExport"!==n&&"ExcelExport"!==n&&"CsvExport"!==n&&"Print"!==n||i.push({text:this.getLocaleText(n),id:this.gridID+"_"+n.toLowerCase(),iconCss:"e-btn-icon e-"+n.toLowerCase()+" e-icons"});return i},n.prototype.getLocaleText=function(n){var t;return"ColumnChooser"===n?t=this.l10n.getConstant("Columnchooser"):"PdfExport"===n?t=this.l10n.getConstant("Pdfexport"):"ExcelExport"===n?t=this.l10n.getConstant("Excelexport"):"CsvExport"===n?t=this.l10n.getConstant("Csvexport"):"Print"===n&&(t=this.l10n.getConstant("Print")),t},n.prototype.renderResponsiveToolbarpopup=function(){this.l10n=this.serviceLocator.getService("localization");this.toolbarMenuElement=this.parent.createElement("ul",{id:this.gridID+"__toolbaritemsmenu",className:"e-responsivetoolbar-menu"});this.element.setAttribute("aria-label",this.l10n.getConstant("ToolbarMenuDialogARIA"));this.parent.element.appendChild(this.toolbarMenuElement);this.responsiveToolbarMenu=new ve.ContextMenu({cssClass:this.parent.cssClass?"e-grid-toolbarmenu e-bigger "+this.parent.cssClass:"e-grid-toolbarmenu e-bigger",enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,beforeOpen:this.beforeOpenResponsiveToolbarMenuItem.bind(this),items:this.getMenuItems(),select:this.ResponsiveToolbarMenuItemClick.bind(this)});this.responsiveToolbarMenu.appendTo(this.toolbarMenuElement)},n.prototype.ResponsiveToolbarMenuItemClick=function(n){var r=this,i=this.parent,f=n.element,u;n.item.id=f.id;u={cancel:!1,name:"clicked",item:n.item,originalEvent:n.event};i.trigger(tp,u,function(n){if(!n.cancel)switch(!t.isNullOrUndefined(n.item)&&n.item.id){case r.gridID+"_columnchooser":i.notify(ei,{action:5});i.showResponsiveCustomColumnChooser();break;case r.gridID+"_print":i.print()}})},n.prototype.beforeOpenResponsiveToolbarMenuItem=function(){var i=this,r=this.parent.toolbar||[],u=[{key:"PdfExport",enabled:this.parent.allowPdfExport},{key:"ExcelExport",enabled:this.parent.allowExcelExport},{key:"CsvExport",enabled:this.parent.allowExcelExport},{key:"ColumnChooser",enabled:this.parent.showColumnChooser}],n=[],t=[];u.forEach(function(u){if(-1!==r.indexOf(u.key)){var f=i.getLocaleText(u.key);u.enabled?n.push(f):t.push(f)}});this.responsiveToolbarMenu.enableItems(n,!0);this.responsiveToolbarMenu.enableItems(t,!1)},n.prototype.modelChanged=function(n){"edit"===n.module&&this.refreshToolbarItems()},n.prototype.onPropertyChanged=function(n){n.module===this.getModuleName()&&this.parent.toolbar&&(this.element&&t.remove(this.element),this.render())},n.prototype.keyUpHandler=function(n){13===n.keyCode&&(this.parent.searchModule.refreshSearch=!1,this.search());this.searchElement&&(this.sIcon=this.searchElement.parentElement.querySelector(".e-sicon"),this.searchElement.value.length&&!t.isNullOrUndefined(this.sIcon)?(this.sIcon.classList.add("e-clear-icon"),this.sIcon.setAttribute("title",this.l10n.getConstant("Clear")),this.sIcon.style.cursor="pointer"):(this.sIcon.classList.remove("e-clear-icon"),this.sIcon.removeAttribute("title"),this.sIcon.style.cursor="default"))},n.prototype.search=function(){this.isSearched=!0;this.parent.search(this.searchElement.value)},n.prototype.updateSearchBox=function(){this.searchElement&&(this.searchElement.value=this.parent.searchSettings.key)},n.prototype.wireEvent=function(){this.searchElement&&(this.searchBoxObj=new vit(this.searchElement,this.serviceLocator),t.EventHandler.add(this.searchElement,"keyup",this.keyUpHandler,this),this.searchBoxObj.wireEvent());t.EventHandler.add(this.element,"focusin",this.onFocusIn,this);t.EventHandler.add(this.element,"focusout",this.onFocusOut,this)},n.prototype.unWireEvent=function(){this.searchElement&&(t.EventHandler.remove(this.searchElement,"keyup",this.keyUpHandler),this.searchBoxObj.unWireEvent());t.EventHandler.remove(this.element,"focusin",this.onFocusIn);t.EventHandler.remove(this.element,"focusout",this.onFocusOut)},n.prototype.onFocusIn=function(n){var i=this.parent.focusModule.currentInfo;i&&i.element&&(t.removeClass([i.element,i.elementToFocus],["e-focused","e-focus"]),i.element.tabIndex=-1);n.target.tabIndex=0},n.prototype.onFocusOut=function(n){n.target.tabIndex=-1;n.target&&n.target.id===this.parent.element.id+"_searchbar"&&(!n.relatedTarget||n.relatedTarget.id!==this.parent.element.id+"_clearbutton"&&n.relatedTarget.id!==this.parent.element.id+"_searchbutton")&&(this.parent.searchModule.refreshSearch=!1,this.search())},n.prototype.setFocusToolbarItem=function(n){var t=n.querySelector(".e-btn,.e-input,.e-toolbar-item-focus");!t&&this.parent.enableAdaptiveUI&&!this.searchElement&&n.classList.contains("e-search-wrapper")&&(t=n.querySelector("#"+this.gridID+"_searchbutton"));t.focus()},n.prototype.getFocusableToolbarItems=function(){for(var i=[].slice.call(this.element.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)")),r=[],n=0;n<i.length;n++)t.isNullOrUndefined(i[parseInt(n.toString(),10)].querySelector(".e-btn,.e-input,.e-toolbar-item-focus"))||r.push(i[parseInt(n.toString(),10)]);return r},n.prototype.keyPressedHandler=function(n){var u,t,r,f;if(n.target&&i(n.target,"e-toolbar-item")){if(u=i(n.target,"e-toolbar-item"),t=this.getFocusableToolbarItems(),"tab"===n.action||"shiftTab"===n.action){if("tab"===n.action&&u===t[t.length-1]||"shiftTab"===n.action&&u===t[0])return;for(r=0;r<t.length;r++)if(u===t[parseInt(r.toString(),10)])return n.preventDefault(),f="tab"===n.action?r+1:r-1,void this.setFocusToolbarItem(t[parseInt(f.toString(),10)])}"enter"===n.action&&this.parent.enableAdaptiveUI&&!this.searchElement&&n.target.id===this.gridID+"_searchbutton"&&this.renderResponsiveSearch(!0)}},n.prototype.reRenderToolbar=function(){this.element&&t.remove(this.element);this.render()},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:vr,handler:this.reRenderToolbar},{event:pt,handler:this.render},{event:w,handler:this.onPropertyChanged},{event:wt,handler:this.updateSearchBox.bind(this)},{event:ot,handler:this.refreshToolbarItems},{event:kr,handler:this.refreshToolbarItems},{event:wt,handler:this.modelChanged},{event:ti,handler:this.refreshToolbarItems},{event:kt,handler:this.removeResponsiveSearch},{event:wa,handler:this.reRenderToolbar},{event:l,handler:this.destroy},{event:rt,handler:this.keyPressedHandler}],yt(this.parent,this.evtHandlers,!0,this),this.rowSelectedFunction=this.rowSelected.bind(this),this.rowDeSelectedFunction=this.rowSelected.bind(this),this.parent.addEventListener(lf,this.rowSelectedFunction),this.parent.addEventListener(pe,this.rowDeSelectedFunction))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(yt(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(lf,this.rowSelectedFunction),this.parent.removeEventListener(pe,this.rowDeSelectedFunction))},n.prototype.removeResponsiveSearch=function(n){var t=n.target,r=t.classList.contains("e-search-icon")||t.classList.contains("e-search-wrapper");this.parent.enableAdaptiveUI&&!r&&this.searchElement&&!i(n.target,"e-res-toolbar")&&this.renderResponsiveSearch(!1)},n.prototype.rowSelected=function(){this.parent.enableAdaptiveUI&&this.toolbar.element&&(this.refreshResponsiveToolbarItems(bu.isInitial),this.toolbar.refreshOverflow())},n.prototype.getModuleName=function(){return"toolbar"},n}(),dht=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ght=function(n){function i(t,i){var r=n.call(this,t,i)||this;return r.aggregates={},r.parent=t,r.locator=i,r.modelGenerator=new ch(r.parent),r.addEventListener(),r}return dht(i,n),i.prototype.renderPanel=function(){var n=this.parent.createElement("div",{className:fu}),t=this.parent.createElement("div",{className:"e-summarycontent"});n.appendChild(t);this.setPanel(n);this.parent.allowPaging&&null!=this.parent.getPager()?this.parent.element.insertBefore(n,this.parent.getPager()):this.parent.element.appendChild(n)},i.prototype.renderTable=function(){var n=this.createContentTable("_footer_table").querySelector("."+yi),t=this.parent.createElement("tfoot");n.appendChild(t);this.setTable(n)},i.prototype.renderSummaryContent=function(n,i,r,u){var l=this.parent.dataSource instanceof Array?!this.parent.getDataModule().isRemote()&&this.parent.parentDetails?this.getData():this.parent.dataSource:this.parent.currentViewData,a=this.modelGenerator.getData(),w=t.isNullOrUndefined(r)?this.modelGenerator.getColumns():this.modelGenerator.getColumns(r),b=t.isNullOrUndefined(r)?this.modelGenerator.generateRows(l,n||this.aggregates):this.modelGenerator.generateRows(l,n||this.aggregates,r,u),h=document.createDocumentFragment(),v=new ci(this.locator,null,this.parent),o,y,c,f,s,e,p;for(v.element=this.parent.createElement("TR",{className:"e-summaryrow",attrs:{role:"row"}}),o=0,y=a.length;o<y;o++)if(c=b[parseInt(o.toString(),10)],c){if(f=v.render(c,w),f.querySelectorAll(".e-leftfreeze").length&&f.querySelectorAll(".e-indentcell").length)for(s=f.querySelectorAll(".e-indentcell"),e=0;e<s.length;e++)s[parseInt(e.toString(),10)].classList.add("e-leftfreeze"),g(s[parseInt(e.toString(),10)],30*e,this.parent.enableRtl,"Left");this.parent.isFrozenGrid()&&f.querySelectorAll(".e-summarycell").length&&t.removeClass([].slice.call(f.querySelectorAll(".e-summarycell")),["e-freezeleftborder","e-freezerightborder"]);h.appendChild(f)}p=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;(this.parent.isReact||p)&&a.length&&this.parent.isInitialLoad?this.parent.renderTemplates(function(){i.tFoot.innerHTML="";i.tFoot.appendChild(h)}):i.tFoot.appendChild(h);this.aggregates=t.isNullOrUndefined(n)?this.aggregates:n},i.prototype.refresh=function(n){var i=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;(this.parent.isReact||i)&&this.parent.isInitialLoad||(this.getTable().tFoot.innerHTML="");this.renderSummaryContent(n,this.getTable(),void 0,void 0);t.isNullOrUndefined(n)&&this.parent.isAutoFitColumns&&this.parent.autoFitColumns();this.onScroll()},i.prototype.refreshCol=function(){var n=this.parent.enableColumnVirtualization?this.parent.headerModule.getColGroup():this.parent.element.querySelector("."+st).querySelector(hi).cloneNode(!0);this.getTable().replaceChild(n,this.getColGroup());this.setColGroup(n)},i.prototype.onWidthChange=function(n){this.getColFromIndex(n.index).style.width=t.formatUnit(n.width);this.parent.allowResizing&&"resize"===n.module&&this.updateFooterTableWidth(this.getTable())},i.prototype.onScroll=function(n){void 0===n&&(n={left:this.parent.getContent().firstChild.scrollLeft});this.getTable().parentElement.scrollLeft=n.left},i.prototype.getColFromIndex=function(n){return this.getColGroup().children[parseInt(n.toString(),10)]},i.prototype.columnVisibilityChanged=function(){this.refresh()},i.prototype.addEventListener=function(){this.evtHandlers=[{event:ul,handler:this.refreshCol},{event:be,handler:this.onWidthChange},{event:hl,handler:this.onScroll},{event:br,handler:this.columnVisibilityChanged},{event:sr,handler:this.refreshFooterRenderer}];yt(this.parent,this.evtHandlers,!0,this)},i.prototype.removeEventListener=function(){yt(this.parent,this.evtHandlers,!1)},i.prototype.updateFooterTableWidth=function(n){var t=this.parent.getHeaderTable();t&&n&&(n.style.width=t.style.width)},i.prototype.refreshFooterRenderer=function(n){var t=this.onAggregates(n);this.refresh(t)},i.prototype.getIndexByKey=function(n,t){for(var r=this.parent.getPrimaryKeyFieldNames()[0],i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)][""+r]===n[""+r])return i;return-1},i.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},i.prototype.onAggregates=function(n){var i,v,d,y,o,s,c,l,p,w;n=n instanceof Array?n:[];var f,b=this.parent.getPrimaryKeyFieldNames()[0],e=[],h=!1,r={},k="dataSource",a=!1;if(this.parent.renderModule.data.isRemote()||!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result||!(this.parent.allowFiltering&&this.parent.filterSettings.columns.length||this.parent.searchSettings.key.length)||(a=!0),f=!t.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result?this.parent.getCurrentViewRecords():this.parent.dataSource instanceof Array?a?this.parent.getFilteredRecords():this.parent.dataSource:this.parent.dataSource[""+k].json.length?a?this.parent.getFilteredRecords():this.parent.dataSource[""+k].json:this.parent.getCurrentViewRecords(),this.parent.parentDetails&&!this.parent.getDataModule().isRemote()&&(f=this.getData()),this.parent.editModule&&(r=this.parent.editModule.getBatchChanges()),Object.keys(r).length){for(i=0;i<f.length;i++)h=!1,r[gf].length&&this.getIndexByKey(f[parseInt(i.toString(),10)],r[gf])>-1&&(h=!0,e.push(r[gf][this.getIndexByKey(f[parseInt(i.toString(),10)],r[gf])])),r[ne].length&&this.getIndexByKey(f[parseInt(i.toString(),10)],r[ne])>-1?h=!0:h||e.push(f[parseInt(i.toString(),10)]);if(r[lr].length)for(i=0;i<r[lr].length;i++)e.push(r[lr][parseInt(i.toString(),10)])}else e=n.length?(c=lo(f)).map(function(t){var i,r=u.DataUtil.getObject(b,t);return n.some(function(n){return i=n,r===u.DataUtil.getObject(b,n)})?i:t}):f;for(v=n,v.type&&"cancel"===v.type&&(e=f),y={},o=this.parent.aggregates,i=0;i<o.length;i++)for(s=0;s<o[parseInt(i.toString(),10)].columns.length;s++)for(c=[],c=e,l=0,p=o[parseInt(i.toString(),10)].columns[parseInt(s.toString(),10)].type.toString().split(",").map(function(n){return n.trim()});l<p.length;l++)w=p[l],d=wb(w,c,o[parseInt(i.toString(),10)].columns[parseInt(s.toString(),10)],this.parent),y[o[parseInt(i.toString(),10)].columns[parseInt(s.toString(),10)].field+" - "+w.toLowerCase()]=d;return{result:e,count:e.length,aggregates:y}},i}(vh),nct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tct=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-summarycell",attrs:{tabindex:"-1",role:"gridcell"}}),t}return nct(i,n),i.prototype.getValue=function(n,i,r){var u=t.isNullOrUndefined(r.type)?r.columnName:r.field+" - "+("string"==typeof r.type?r.type.toLowerCase():"");return i[r.columnName]?i[r.columnName][""+u]:""},i.prototype.evaluate=function(n,i,r){var u=i.column,f,e,s,o;if(this.parent.on(ol,this.refreshWithAggregate(n,i),this),!(u.footerTemplate||u.groupFooterTemplate||u.groupCaptionTemplate))return"Vertical"===this.parent.rowRenderingMode&&(n.style.display="none"),!0;"Vertical"===this.parent.rowRenderingMode&&n.classList.add("e-lastsummarycell");f=u.getTemplate(i.cellType);e=this.parent.getColumnByField(r[u.columnName].field);!t.isNullOrUndefined(e)&&(r[u.columnName].headerText=e.headerText,e.isForeignColumn())&&(s=e.columnData.filter(function(n){return n[e.foreignKeyField]===r[u.columnName].key})[0],s&&(r[u.columnName].foreignKey=s[e.foreignKeyValue]));var h=u.footerTemplate?"string"!=typeof u.footerTemplate&&!(u.footerTemplate.prototype&&u.footerTemplate.prototype.CSPTemplate):u.groupFooterTemplate?"string"!=typeof u.groupFooterTemplate&&!(u.groupFooterTemplate.prototype&&u.groupFooterTemplate.prototype.CSPTemplate):!(!u.groupCaptionTemplate||"string"==typeof u.groupCaptionTemplate||u.groupCaptionTemplate.prototype&&u.groupCaptionTemplate.prototype.CSPTemplate),c=this.parent.isReact&&h,l=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact&&h,a=this.parent.printGridParent&&this.parent.printGridParent.isReact;return c||l||a?(o=r[u.columnName],"groupCaptionTemplate"!==f.property&&"groupFooterTemplate"!==f.property||(o.groupKey=o.key),f.fn(o,this.parent,f.property,"",null,null,n),this.parent.isInitialLoad||this.parent.renderTemplates()):nt(n,f.fn(r[u.columnName],this.parent,f.property,"",null,null,null,this.parent.root)),!1},i.prototype.refreshWithAggregate=function(n,i){var r=this,u=i;return function(i){var o=u,f=o.column.columnName?o.column.columnName:null,e=t.isNullOrUndefined(f)?null:i.cells.filter(function(n){return n.column.columnName===f})[0];n.parentElement&&n.parentElement.getAttribute("data-uid")===i.dataUid&&f&&e&&f===e.column.columnName&&r.refreshTD(n,e,i.data)}},i}(fi),ict=function(){function n(n,t){this.parent=n;this.locator=t;this.addEventListener()}return n.prototype.getModuleName=function(){return"aggregate"},n.prototype.initiateRender=function(){for(var i,r,u=this,o=this.locator.getService("cellRendererFactory"),s=new tct(this.parent,this.locator),f=[e.Summary,e.CaptionSummary,e.GroupSummary],n=0;n<f.length;n++)o.addCellRenderer(f[parseInt(n.toString(),10)],s);this.footerRenderer=new ght(this.parent,this.locator);this.footerRenderer.renderPanel();this.footerRenderer.renderTable();i=this.footerRenderer.getPanel();this.parent.element.scrollHeight>=this.parent.getHeight(this.parent.height)&&i&&t.addClass([i],["e-footerpadding"]);this.locator.register("footerRenderer",this.footerRenderer);r=function(){u.prepareSummaryInfo();u.parent.off(wi,r)};this.parent.on(wi,r,this);this.parent.on(wi,this.footerRenderer.refresh,this.footerRenderer)},n.prototype.prepareSummaryInfo=function(){var n=this;gut(this.parent.aggregates,function(i){var r=t.getValue("customFormat",i),u,f;(t.isNullOrUndefined(r)||i.setPropertiesSilent({format:r}),"object"==typeof i.format)?(u=new wu,i.setFormatter(u.getFormatFunction(t.extend({},i.format)))):"string"==typeof i.format&&(f=n.locator.getService("valueFormatter"),i.setFormatter(f.getFormatFunction({format:i.format})));i.setPropertiesSilent({columnName:i.columnName||i.field})})},n.prototype.onPropertyChanged=function(n){if(n.module===this.getModuleName()){t.isNullOrUndefined(this.footerRenderer)&&this.initiateRender();this.prepareSummaryInfo();this.footerRenderer.refresh();var i=new lh(this.parent);0===new co(this.parent).getData().length&&i.isEmpty()||this.parent.notify(ot,{})}},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(pt,this.initiateRender,this),this.parent.on(w,this.onPropertyChanged,this),this.parent.on(cp,this.refresh,this),this.parent.on(l,this.destroy,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.footerRenderer.removeEventListener(),this.parent.off(pt,this.initiateRender),this.parent.off(wi,this.footerRenderer.refresh),this.parent.off(w,this.onPropertyChanged),this.parent.off(cp,this.refresh),this.parent.off(l,this.destroy),this.parent.element.querySelector("."+fu)&&t.remove(this.parent.element.querySelector("."+fu)))},n.prototype.destroy=function(){this.removeEventListener()},n.prototype.refresh=function(n,t){var i=n instanceof Array?n:[n];this.parent.notify(sr,i);t&&(i.row=t);this.parent.groupSettings.columns.length>0&&this.parent.notify(iu,i)},n}();var nft=function(){function n(n,t,i){var r=this;this.fromWheel=!1;this.touchMove=!1;this.options={};this.sentinelInfo={up:{check:function(n,t){var i=n.top-r.containerRect.top,u=r.containerRect.bottom>n.bottom?r.containerRect.bottom-n.bottom:0;return t.entered=i>=0,i+r.options.pageHeight/2>=0||u>0&&n.bottom>0},axis:"Y"},down:{check:function(n,t){var i=n.bottom;return t.entered=n.bottom<=r.containerRect.bottom,i-r.containerRect.top-r.options.pageHeight/2<=r.options.pageHeight/2},axis:"Y"},right:{check:function(n,t){var i=n.right;return t.entered=i<r.containerRect.right,i-r.containerRect.width<=r.containerRect.right},axis:"X"},left:{check:function(n,t){var i=n.left;return t.entered=i>0,i+r.containerRect.width>=r.containerRect.left},axis:"X"}};this.element=n;this.options=t;this.movableEle=i}return n.prototype.observe=function(n,i){var r=this;this.containerRect=this.options.container.getBoundingClientRect();t.EventHandler.add(this.options.container,"wheel",function(){return r.fromWheel=!0},this);t.EventHandler.add(this.options.container,"scroll",this.virtualScrollHandler(n,i),this)},n.prototype.check=function(n){var t=this.sentinelInfo[""+n];return t.check(this.element.getBoundingClientRect(),t)},n.prototype.virtualScrollHandler=function(n,i){var r=this,u="chrome"===t.Browser.info.name?200:100,f=t.debounce(n,u),e=t.debounce(n,50);return this.options.prevTop=this.options.prevLeft=0,function(n){var s=n.target.scrollTop,o=n.target.scrollLeft,t=r.options.prevTop<s?"down":"up",u,h,c;t=r.options.prevLeft===o?t:r.options.prevLeft<o?"right":"left";r.options.prevTop=s;r.options.prevLeft=o;u=r.sentinelInfo[""+t];-1!==r.options.axes.indexOf(u.axis)&&(r.containerRect=r.options.container.getBoundingClientRect(),h=r.check(t),(u.entered&&i(r.element,u,t,{top:s,left:o},r.fromWheel,h),h)&&(c=f,"X"===u.axis&&(c=e),c({direction:t,sentinel:u,offset:{top:s,left:o},focusElement:document.activeElement})),r.fromWheel=!1)}},n.prototype.setPageHeight=function(n){this.options.pageHeight=n},n}(),yk=function(){function n(n){this.cOffsets={};this.cache={};this.rowCache={};this.data={};this.groups={};this.currentInfo={};this.prevInfo={};this.parent=n;this.model=this.parent.pageSettings;this.rowModelGenerator=this.parent.allowGrouping?new ah(this.parent):new eu(this.parent)}return n.prototype.columnInfiniteRows=function(n,t){var i=[],f,u,r;return"virtualscroll"===t.requestType?(f=this.parent.getRowsObject(),(i.push.apply(i,this.rowModelGenerator.refreshRows(f)),this.parent.infiniteScrollSettings.enableCache)&&(u=this.parent.frozenRows&&1===this.parent.pageSettings.currentPage?0:tr(this.parent.getContentTable().querySelector(".e-row:not(.e-addedrow)")),r=i.slice(u,u+3*this.parent.pageSettings.pageSize),this.parent.frozenRows&&1!==this.parent.pageSettings.currentPage&&(r=i.slice(0,this.parent.frozenRows).concat(r)),i=r)):i.push.apply(i,this.rowModelGenerator.generateRows(n,t)),i},n.prototype.generateRows=function(n,i){var y=this,c,u,v,o,h;if(this.parent.enableColumnVirtualization&&this.parent.enableInfiniteScrolling)return this.columnInfiniteRows(n,i);c=!1;u=i.virtualInfo=i.virtualInfo||("sorting"===i.requestType||"delete"===i.requestType)&&sc(this.parent)&&this.prevInfo||this.getData();this.prevInfo=u;var l=u.sentinelInfo&&"X"===u.sentinelInfo.axis,p=l||!u.loadNext||u.loadSelf?u.page:u.nextInfo.page,f=[],s=this.getBlockIndexes(p),a=[];if((this.currentInfo.blockIndexes&&(s=u.blockIndexes=i.virtualInfo.blockIndexes=this.includePrevPage?this.currentInfo.blockIndexes.slice(1):this.currentInfo.blockIndexes.slice(0,this.currentInfo.blockIndexes.length-1),c=!0),this.checkAndResetCache(i.requestType),b(this.parent)&&this.parent.vcRows.length)&&(v=this.parent.vcRows.filter(function(n){return n.isDataRow}),this.parent.isManualRefresh&&v.length===n.records.length||!this.parent.isManualRefresh))return f=this.parent.vcRows;if(this.parent.enableColumnVirtualization)for(o=0;o<u.blockIndexes.length;o++)this.isBlockAvailable(u.blockIndexes[parseInt(o.toString(),10)])&&(this.cache[u.blockIndexes[parseInt(o.toString(),10)]]=this.rowModelGenerator.refreshRows(this.cache[u.blockIndexes[parseInt(o.toString(),10)]]));var e=u.blockIndexes,w=function(o){var y,h,p,tt,nt,it,v;if(!r.isBlockAvailable(e[parseInt(o.toString(),10)]))if(y=t.isNullOrUndefined(r.startIndex)||isNaN(r.startIndex)?r.getStartIndex(e[parseInt(o.toString(),10)],n):r.startIndex,y=!b(r.parent)||r.parent.vcRows.length||"sorting"!==i.requestType&&"delete"!==i.requestType?y:0,h=r.rowModelGenerator.generateRows(n,{virtualInfo:u,startIndex:y}),b(r.parent)&&!r.parent.vcRows.length&&(r.recordsCount=n.records.length,r.parent.vRows=h,r.parent.vcRows=h,r.parent.notify(ba,{})),p=void 0,b(r.parent))r.getGroupVirtualRecordsByIndex(h);else if(c)r.setBlockForManualRefresh(r.cache,s,h);else if(("sorting"===i.requestType||"delete"===i.requestType||r.parent.isTreeGrid&&r.parent.getDataModule().isRemote()&&"refresh"===i.requestType)&&sc(r.parent))for(var rt=hk(u.blockIndexes),ut=0,w=0;w<rt.length;w++){var k=r.getBlockIndexes(rt[parseInt(w.toString(),10)]),d=r.model.pageSize*w,g=d+r.model.pageSize;r.parent.allowGrouping&&r.parent.groupSettings.columns.length&&(tt=h.filter(function(n){return n.isDataRow}).slice(d,g),d=ut,g=h.indexOf(tt[tt.length-1])+1);nt=h.slice(d,g);it=~~Math.max(nt.length,r.model.pageSize)/2;r.isBlockAvailable(k[0])||(r.cache[k[0]]=nt.slice(0,it));r.isBlockAvailable(k[1])||(r.cache[k[1]]=nt.slice(it));ut=g}else p=~~Math.max(h.length,r.model.pageSize)/2,r.isBlockAvailable(s[0])||(r.cache[s[0]]=h.slice(0,p)),r.isBlockAvailable(s[1])||(r.cache[s[1]]=h.slice(p));(r.parent.groupSettings.columns.length&&!l&&r.cache[e[parseInt(o.toString(),10)]]&&!r.parent.groupSettings.enableLazyLoading&&(r.cache[e[parseInt(o.toString(),10)]]=r.updateGroupRow(r.cache[e[parseInt(o.toString(),10)]],e[parseInt(o.toString(),10)])),i.renderMovableContent||i.renderFrozenRightContent||!r.cache[e[parseInt(o.toString(),10)]])||(f.push.apply(f,r.cache[e[parseInt(o.toString(),10)]]),v=[],r.parent.enableVirtualization&&r.parent.groupSettings.columns.length&&f.forEach(function(n){v.includes(n)||v.push(n)}),f=v.length?v:f);r.isBlockAvailable(e[parseInt(o.toString(),10)])&&a.push(e[parseInt(o.toString(),10)])},r=this;for(o=0;o<e.length;o++)w(o);return b(this.parent)&&this.parent.vcRows.length&&"sorting"===i.requestType&&0!==i.scrollTop.top?f=this.parent.vcRows:(u.blockIndexes=a,h="records",this.parent.allowGrouping&&this.parent.groupSettings.columns.length?this.parent.currentViewData[""+h]=f.map(function(n){return n.data}):this.parent.currentViewData=f.map(function(n){return n.data}),"grouping"===i.requestType&&(this.parent.currentViewData[""+h]=this.parent.currentViewData[""+h].filter(function(n,t){return y.parent.currentViewData[""+h].indexOf(n)===t})),b(this.parent)&&this.parent.vcRows.length&&["save","delete"].some(function(n){return i.requestType===n})?f=this.parent.vcRows:f)},n.prototype.setBlockForManualRefresh=function(n,t,i){var r=this.model.pageSize/2;this.includePrevPage?(n[t[0]-1]=i.slice(0,r),n[t[0]]=i.slice(r,2*r),n[t[1]]=i.slice(2*r,3*r),n[t[2]]=i.slice(3*r,4*r)):(n[t[0]]=i.slice(0,r),n[t[1]]=i.slice(r,2*r),n[t[2]]=i.slice(2*r,3*r),n[t[2]+1]=i.slice(3*r,4*r))},n.prototype.getBlockIndexes=function(n){return[n+(n-1),2*n]},n.prototype.getPage=function(n){return n%2==0?n/2:(n+1)/2},n.prototype.isBlockAvailable=function(n){return n in this.cache},n.prototype.getData=function(){return{page:this.model.currentPage,blockIndexes:this.getBlockIndexes(this.model.currentPage),direction:"down",columnIndexes:this.parent.getColumnIndexesInView()}},n.prototype.getStartIndex=function(n,t,i){void 0===i&&(i=!0);var u=n%2==0,r=(this.getPage(n)-1)*this.model.pageSize;return i||!u?r:r+~~(this.model.pageSize/2)},n.prototype.getColumnIndexes=function(n){var v=this,r,h,a;void 0===n&&(n=this.parent.getHeaderContent().querySelector("."+ct));var c=[],i=0|n.scrollLeft,u=Object.keys(this.cOffsets),f=n.getBoundingClientRect().width;i=Math.min(this.cOffsets[u.length-1]-f,i);var e=t.Browser.isDevice?2*f:f/2,l=i+f+(0===i?e:0),s=0,o=i-e;if(this.parent.isFrozenGrid()){if(s=this.parent.leftrightColumnWidth("left"),o>0)for(r=this.parent.getVisibleFrozenLeftCount()-1;r>=0;r--)if(o<=this.cOffsets[parseInt(r.toString(),10)]){s-=this.cOffsets[parseInt(r.toString(),10)];break}this.parent.getFrozenMode()===ir&&(h=this.parent.getVisibleFrozenRightCount(),u.splice(u.length-1-h,h))}return a=this.parent.getVisibleFrozenLeftCount(),u.some(function(n){var i=Number(n),t=v.cOffsets[""+n];return(o<0&&i<a||o+s<=t&&l+e>=t)&&c.push(i),l+e<t}),c},n.prototype.checkAndResetCache=function(n){var t=["paging","refresh","sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"].some(function(t){return n===t});return t&&(this.cache={},this.data={},this.groups={}),t},n.prototype.refreshColOffsets=function(){var u=this,f=0,t,n;this.cOffsets={};for(var e=this.parent.groupSettings.columns.length,r=this.parent.getVisibleColumns(),o=r.length,s=function(n){return n.visible&&(u.parent.groupSettings.showGroupedColumn?n.visible:u.parent.groupSettings.columns.indexOf(n.field)<0)},h=this.parent.groupSettings.columns,i=0;i<h.length;i++)this.cOffsets[parseInt(i.toString(),10)]=30+(0|this.cOffsets[i-1]);for(t=Array.apply(null,Array(o)).map(function(){return f++}),n=0;n<t.length;n++)t[parseInt(n.toString(),10)]=t[parseInt(n.toString(),10)]+e,this.cOffsets[t[parseInt(n.toString(),10)]]=(0|this.cOffsets[t[parseInt(n.toString(),10)]-1])+(s(r[parseInt(n.toString(),10)])?parseInt(r[parseInt(n.toString(),10)].width,10):0)},n.prototype.updateGroupRow=function(n,t){for(var f=n[0],r=[],u=Object.keys(this.cache),i=0;i<u.length;i++)Number(u[parseInt(i.toString(),10)])<t&&(r=r.concat(this.cache[u[parseInt(i.toString(),10)]]));return f&&f.isDataRow||t%2==0?n:this.iterateGroup(n,r)},n.prototype.iterateGroup=function(n,t){var i=n[0],r=0;return i&&i.isDataRow||n.some(function(n){return t.some(function(t,i){var u=t&&void 0!==t.data.field&&t.data.field===n.data.field&&t.data.key===n.data.key;return u&&(r=i),u})})&&(n.shift(),n=this.iterateGroup(n,t.slice(r))),n},n.prototype.getRows=function(){for(var n=[],i=Object.keys(this.cache),t=0;t<i.length;t++)n=n.concat(this.cache[i[parseInt(t.toString(),10)]]);return n},n.prototype.generateCells=function(n){for(var i=[],r=this.parent.columnModel,t=0;t<r.length;t++)i.push(this.rowModelGenerator.generateCell(r[parseInt(t.toString(),10)],null,null,null,null,n));return i},n.prototype.getGroupVirtualRecordsByIndex=function(n){var e=this.parent.contentModule.getGroupedTotalBlocks(),f=this.parent.contentModule.getBlockSize(),r,t,u,i;if(0===Object.keys(this.cache).length)for(r=0,t=1;t<=e;t++){for(u=0,this.cache[parseInt(t.toString(),10)]=[],i=(t-1)*f+r;i<n.length&&u!==f;i++)this.cache[parseInt(t.toString(),10)].push(n[parseInt(i.toString(),10)]),n[parseInt(i.toString(),10)].isDataRow&&u++,r++;r-=u}},n}(),tft=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ift=function(n){function r(t,i){var r=n.call(this,t,i)||this;return r.prevHeight=0,r.startIndex=0,r.preStartIndex=0,r.preventEvent=!1,r.actions=["filtering","searching","grouping","ungrouping"],r.offsets={},r.tmpOffsets={},r.virtualEle=new pk,r.offsetKeys=[],r.isFocused=!1,r.isSelection=!1,r.isBottom=!1,r.isBottomNotify=!1,r.diff=0,r.heightChange=!1,r.isTop=!1,r.empty=void 0,r.isCancel=!1,r.requestTypes=["beginEdit","cancel","delete","add","save","sorting"],r.isNormaledit="Normal"===r.parent.editSettings.mode,r.virtualData={},r.virtualInfiniteData={},r.emptyRowData={},r.isContextMenuOpen=!1,r.isSelectionScroll=!1,r.validationCheck=!1,r.firstCellFocus=!1,r.prevPage=0,r.prevCurrentInfo={},r.locator=i,r.eventListener("on"),r.widthServices=i.getService("widthService"),r.parent.on(br,r.setVisible,r),r.vgenerator=r.generator,r}return tft(r,n),r.prototype.renderTable=function(){this.header=this.locator.getService("rendererFactory").getRenderer(ni.Header);n.prototype.renderTable.call(this);this.virtualEle.table=this.getTable();this.virtualEle.content=this.content=this.getPanel().querySelector("."+lt);this.virtualEle.renderWrapper(this.parent.height);this.virtualEle.renderPlaceHolder();!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization||(this.virtualEle.wrapper.style.position="absolute");var t=this.parent.dataSource instanceof u.DataManager&&!this.parent.dataSource.dataSource.offline,i={container:this.content,pageHeight:2*this.getBlockHeight(),debounceEvent:t,axes:this.parent.enableColumnVirtualization?["X","Y"]:["Y"]};this.observer=new nft(this.virtualEle.wrapper,i)},r.prototype.renderEmpty=function(n){this.getTable().appendChild(n);this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(h).innerHTML="");this.virtualEle.adjustTable(0,0)},r.prototype.getReorderedFrozenRows=function(n){var t=n.virtualInfo.blockIndexes,i=n.virtualInfo.columnIndexes,r=n.virtualInfo.page;n.virtualInfo.blockIndexes=[1,2];n.virtualInfo.page=1;n.virtualInfo.columnIndexes=[];var u=this.parent.getCurrentViewRecords().length,f=this.parent.renderModule.data.dataManager.dataSource.json.slice(0,u),e=this.vgenerator.generateRows(f,n);return n.virtualInfo.blockIndexes=t,n.virtualInfo.columnIndexes=i,n.virtualInfo.page=r,e.splice(0,this.parent.frozenRows)},r.prototype.scrollListener=function(n){if((this.parent.enableVirtualization||!this.parent.enableColumnVirtualization||"up"!==n.direction&&"down"!==n.direction)&&!this.isBottomNotify)if(this.scrollAfterEdit(),this.parent.enablePersistence&&(this.parent.scrollPosition=n.offset),this.preventEvent||this.parent.isDestroyed)this.preventEvent=!1;else{if(this.isFocused=t.isNullOrUndefined(document.activeElement)?!1:this.content===t.closest(document.activeElement,"."+lt)||this.content===document.activeElement,this.parent.islazyloadRequest&&"down"===n.direction)return this.parent.removeMaskRow(),void(this.parent.islazyloadRequest=!1);var r=n.sentinel,i=this.currentInfo=this.getInfoFromView(n.direction,r,n.offset);if(b(this.parent))return i.blockIndexes&&this.prevInfo.blockIndexes.toString()===i.blockIndexes.toString()?void this.parent.removeMaskRow():(i.event="refresh-virtual-block",t.isNullOrUndefined(i.offsets)||(i.offsets.top=this.content.scrollTop),this.parent.pageSettings.currentPage=i.page,this.parent.enableVirtualMaskRow&&(this.parent.showMaskRow(r.axis),this.parent.addShimmerEffect()),this.parent.editSettings.showAddNewRow&&this.parent.closeEdit(),void this.parent.notify(i.event,{requestType:"virtualscroll",virtualInfo:i,focusElement:n.focusElement}));if(this.prevInfo&&("Y"===r.axis&&this.prevInfo.blockIndexes.toString()===i.blockIndexes.toString()||"X"===r.axis&&this.prevInfo.columnIndexes.toString()===i.columnIndexes.toString()||this.parent.isFrozenGrid()&&"X"===r.axis&&this.parent.getVisibleFrozenLeftCount()>=i.columnIndexes[0]&&this.prevInfo.columnIndexes.toString().includes(i.columnIndexes.toString())))return this.parent.removeMaskRow(),t.Browser.isIE&&this.parent.hideSpinner(),this.requestType="virtualscroll"===this.requestType?this.empty:this.requestType,"Y"===r.axis&&this.restoreEdit(),void(this.parent.groupSettings.enableLazyLoading&&1===this.prevInfo.blockIndexes[0]&&1===i.blockIndexes[0]&&"up"===n.direction&&this.virtualEle.adjustTable(0,i.offsets.top<this.offsets[1]?0:this.getBlockHeight()));if(this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization?i.columnIndexes:[]),!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization||(this.parent.pageSettings.currentPage=i.loadNext&&!i.loadSelf?i.nextInfo.page:i.page),this.requestType="virtualscroll",this.parent.enableVirtualMaskRow&&(this.parent.showMaskRow(r.axis),this.parent.addShimmerEffect()),this.parent.islazyloadRequest=!1,this.parent.editSettings.showAddNewRow&&this.parent.closeEdit(),this.parent.notify(tf,{action:"clear"}),this.parent.isInitialLoad||!this.parent.enablePersistence){if(this.prevPage===this.parent.pageSettings.currentPage&&i.event===ot)return void(this.currentInfo=this.prevCurrentInfo);i.event===ot&&(this.prevPage=this.parent.pageSettings.currentPage,this.prevCurrentInfo=this.currentInfo);this.isBottomNotify=this.isBottom&&i.event===ot;this.parent.notify(i.event,{requestType:"virtualscroll",virtualInfo:i,focusElement:n.focusElement})}this.parent.enableColumnVirtualization&&!this.parent.getContentTable().querySelector("tr.e-row")&&(this.parent.removeMaskRow(),this.appendContent(void 0,void 0,{requestType:"virtualscroll",virtualInfo:i,focusElement:n.focusElement}),this.prevInfo=i)}},r.prototype.block=function(n){return this.vgenerator.isBlockAvailable(n)},r.prototype.getInfoFromView=function(n,t,i){var c=!1,o=[],r={direction:n,sentinelInfo:t,offsets:i,startIndex:this.preStartIndex,endIndex:this.preEndIndex},u,l,f,e;if(r.page=this.getPageFromTop(i.top,r),r.blockIndexes=o=this.vgenerator.getBlockIndexes(r.page),r.loadSelf=!this.vgenerator.isBlockAvailable(o[r.block]),u=this.ensureBlocks(r),"upArrow"===this.activeKey&&r.blockIndexes.toString()!==u.toString()&&(l=u[u.length-1],-1===r.blockIndexes.indexOf(l)&&(c=!0)),(!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization||(r.blockIndexes=u),r.loadNext=!u.filter(function(n){return-1===o.indexOf(n)}).every(this.block.bind(this)),r.event=r.loadNext||r.loadSelf?ot:ge,r.nextInfo=r.loadNext?{page:Math.max(1,r.page+("down"===n?1:-1))}:{},c&&(r.blockIndexes=[r.blockIndexes[0]-1,r.blockIndexes[0],r.blockIndexes[0]+1]),"downArrow"===this.activeKey&&!isNaN(this.rowIndex))&&(f=Math.ceil(this.rowIndex/this.getBlockSize()),1!==f&&(r.blockIndexes[1]!==f||r.blockIndexes.length<3)&&(r.blockIndexes=[f-1,f,f+1],r.loadNext))){for(var a=this.vgenerator.getBlockIndexes(r.nextInfo.page),s=!1,h=0;h<r.blockIndexes.length;h++){for(e=0;e<a.length;e++)if(r.blockIndexes[parseInt(h.toString(),10)]===a[parseInt(e.toString(),10)]){s=!0;break}if(s)break}s||(r.loadNext=!1,r.nextInfo={},r.event=ge)}return r.columnIndexes="X"===t.axis?this.vgenerator.getColumnIndexes():this.parent.getColumnIndexesInView(),this.parent.enableColumnVirtualization&&"X"===t.axis&&(r.event=ge),r},r.prototype.ensureBlocks=function(n){var r,u=this,i=n.blockIndexes[n.block],o=i,f=Math.max,t="down"===n.direction?[f(i,1),++i,++i]:[f(i-1,1),i,i+1],e;return this.prevInfo=this.prevInfo||this.vgenerator.getData(),t=t.filter(function(n,i){return t.indexOf(n)===i}),e=!1,sc(this.parent)&&"up"===n.direction&&((n.page+1===this.prevInfo.page||n.page===this.prevInfo.page)&&(1===n.block||0===n.block&&1===n.page)||n.page===this.prevInfo.page&&2===t.length)&&this.vgenerator.isBlockAvailable(n.blockIndexes[1]+1)&&(e=n.page+1===this.prevInfo.page&&1===n.block,t=[f((i+=1)-1,1),i,i+1]),this.prevInfo.blockIndexes.toString()===t.toString()||((n.loadSelf&&!e||"down"===n.direction&&this.isEndBlock(o))&&(t=this.vgenerator.getBlockIndexes(n.page)),t.some(function(n,t){var i=n===(b(u.parent)?u.getGroupedTotalBlocks():u.getTotalBlocks());return i&&(r=t),i}),void 0!==r&&(t=t.slice(0,r+1),0===n.block&&1===t.length&&this.vgenerator.isBlockAvailable(t[0]-1)&&(t=[t[0]-1,t[0]]))),t},r.prototype.appendContent=function(n,i,r){var e=this,u=r.virtualInfo.sentinelInfo&&"Y"===r.virtualInfo.sentinelInfo.axis&&this.currentInfo.page&&this.currentInfo.page!==r.virtualInfo.page?this.currentInfo:r.virtualInfo,y,l,p,f,nt,w,k,tt,it,v,ut;this.prevInfo=this.prevInfo||r.virtualInfo;var s,g=u.columnIndexes[0]-1,a=this.getColumnOffset(g),c=u.blockIndexes;if(this.parent.groupSettings.columns.length&&this.refreshOffsets(),"100%"===this.parent.height&&(this.parent.element.style.height="100%"),y=this.parent.height.toString().indexOf("%")<0?this.content.getBoundingClientRect().height:this.parent.element.getBoundingClientRect().height,!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization&&(y=0),l=0,this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&(p=0,this.parent.getColumns().filter(function(n){n.visible&&(l+=parseInt(n.width.toString(),10),"Left"===n.freeze&&(p+=parseInt(n.width.toString(),10)))}),f=u.columnIndexes,s=this.getColumnOffset(f[f.length-1])-this.getColumnOffset(f[0]-1)+"",g>this.parent.getVisibleFrozenLeftCount()&&(a-=p),this.resetStickyLeftPos(a,i)),this.requestTypes.some(function(n){return n===e.requestType})||(nt=this.getTranslateY(this.content.scrollTop,y,u),this.parent.groupSettings.enableLazyLoading&&u&&this.prevInfo&&1===this.prevInfo.blockIndexes[0]&&1===u.blockIndexes[0]&&"up"===u.direction?this.virtualEle.adjustTable(0,this.content.scrollTop<this.offsets[1]?0:this.getBlockHeight()):this.virtualEle.adjustTable(a,nt)),this.parent.enableColumnVirtualization&&this.header.virtualEle.adjustTable(a,0),this.parent.enableColumnVirtualization&&(f=u.columnIndexes,s=this.getColumnOffset(f[f.length-1])-this.getColumnOffset(f[0]-1)+"",this.parent.isFrozenGrid()&&(s=l.toString(),this.parent.allowResizing&&(this.parent.getHeaderTable().style.width=l+"px",this.parent.getContentTable().style.width=l+"Px")),this.header.virtualEle.setWrapperWidth(s)),this.virtualEle.setWrapperWidth(s,t.Browser.isIE||"edge"===t.Browser.info.name),!(this.parent.enableColumnVirtualization&&t.isNullOrUndefined(n)&&t.isNullOrUndefined(i))){if(t.isNullOrUndefined(n)||t.isNullOrUndefined(n.parentNode)||t.remove(n),w=this.parent.element.querySelector("."+lt).querySelector(h),w&&(t.remove(w),n=null),this.parent.isReact&&!t.isNullOrUndefined(this.parent.rowTemplate)?n=i:(n=this.parent.createElement(h,{attrs:{role:"rowgroup"}})).appendChild(i),this.parent.frozenRows&&"virtualscroll"===r.requestType&&(1===this.parent.pageSettings.currentPage||this.isInfiniteColumnvirtualization()))for(k=0;k<this.parent.frozenRows;k++)n.children[0].remove();if((this.getTable().appendChild(n),this.requestType="virtualscroll"===this.requestType?this.empty:this.requestType,this.parent.enableVirtualization||!this.parent.enableColumnVirtualization||"right"!==u.direction&&"left"!==u.direction||(this.content.scrollTop=this.currentInfo.offsets.top,this.content.scrollLeft=this.currentInfo.offsets.left),this.parent.groupSettings.columns.length)&&(b(this.parent)||"up"!==u.direction||(tt=this.offsets[this.getTotalBlocks()]-this.prevHeight,it=this.content.scrollTop,this.content.scrollTop=it+tt),this.setVirtualHeight(),this.parent.groupSettings.enableLazyLoading||this.observer.setPageHeight(this.getOffset(c[c.length-1])-this.getOffset(c[0]-1))),this.parent.groupSettings.enableLazyLoading||0!==this.parent.groupSettings.columns.length||"ungrouping"!==r.requestType||this.observer.setPageHeight(2*this.getBlockHeight()),this.prevInfo=u,this.isFocused&&"downArrow"!==this.activeKey&&"upArrow"!==this.activeKey&&this.content.focus(),v=Math.ceil(this.getTotalBlocks()/2),this.isBottom&&(this.isBottom=!1,this.isBottomNotify=!1,this.parent.getContent().firstElementChild.scrollTop=this.offsets[this.offsetKeys.length-1]),this.parent.pageSettings.currentPage+1!==v&&this.parent.pageSettings.currentPage!==v||2!==c.length||"delete"!==r.requestType||(this.parent.getContent().firstElementChild.scrollTop=this.offsets[this.offsetKeys.length-1]),this.parent.pageSettings.currentPage===v&&1===c.length&&(this.isBottom=!0,setTimeout(function(){var n=e.parent.getContent().firstElementChild,t;n.scrollTop=e.offsets[e.offsetKeys.length-2];t={direction:"up",sentinel:e.observer.sentinelInfo.up,offset:{top:n.scrollTop,left:n.scrollLeft},focusElement:e.parent.element};e.scrollListener(t)},0)),this.isTop&&(this.parent.getContent().firstElementChild.scrollTop=0,this.isTop=!1),"virtualscroll"===r.requestType&&"X"===r.virtualInfo.sentinelInfo.axis&&this.parent.notify(du,{}),this.focusCell(r),this.firstCellFocus){this.firstCellFocus=!1;var d=this.parent.focusModule,rt=d.active.matrix.current,o=this.parent.getContentTable().rows[rt[0]].cells[rt[1]];d.currentInfo.element=o;d.currentInfo.elementToFocus=o;o.classList.add("e-focus");o.classList.add("e-focused");o.tabIndex=0;o.focus()}(this.restoreEdit(r),this.restoreAdd(),this.ensureSelectedRowPosition(),this.validationScrollLeft(),this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&this.widthServices.refreshFrozenScrollbar(),this.initialRowTop)||(ut=this.parent.element.getBoundingClientRect().top,this.parent.getRowByIndex(0)&&(this.initialRowTop=this.parent.getRowByIndex(0).getBoundingClientRect().top-ut))}},r.prototype.validationScrollLeft=function(){if(this.validationCheck)if(this.validationCol){var n=this.vgenerator.cOffsets[this.validationCol.index-this.parent.getVisibleFrozenColumns()-1];this.validationCol=null;this.content.scrollLeft=n}else this.validationCheck=!1,this.parent.editModule.editFormValidate()},r.prototype.ensureSelectedRowPosition=function(){if(!this.isSelection&&this.isSelectionScroll&&!t.isNullOrUndefined(this.selectRowIndex)){this.isSelectionScroll=!1;var n=this.parent.getRowByIndex(this.selectRowIndex);n&&!this.isRowInView(n)&&this.rowSelected({rowIndex:this.selectRowIndex,row:n},!0)}},r.prototype.focusCell=function(){if("upArrow"===this.activeKey||"downArrow"===this.activeKey){var n=this.parent.getRowByIndex(this.rowIndex);n.cells[this.cellIndex].focus({preventScroll:!0});this.parent.selectionSettings.checkboxOnly||this.parent.selectRow(parseInt(n.getAttribute(c),10)-1);this.activeKey=this.empty}},r.prototype.restoreEdit=function(n){var r,f;if(this.isNormaledit){if(this.parent.editSettings.allowEditing&&this.parent.editModule&&!t.isNullOrUndefined(this.editedRowIndex)){var i=this.getRowByIndex(this.editedRowIndex),e=this.content,u=Object.keys(this.virtualData),o=n&&n.virtualInfo&&"X"===n.virtualInfo.sentinelInfo.axis;u.length&&i&&!e.querySelector("."+ut)&&-1===["sorting","filtering","grouping","refresh","searching","ungrouping","reorder"].indexOf(n.requestType)&&(r=i.getBoundingClientRect().top-this.parent.element.getBoundingClientRect().top,(o||r<this.content.offsetHeight&&r>this.parent.getRowHeight())&&(this.parent.isEdit=!1,this.parent.editModule.startEdit(i)));i&&this.content.querySelector("."+ut)&&!u.length&&(f=!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization?this.enableCacheOnInfiniteColumnVirtual()?this.virtualInfiniteData:t.extend({},this.parent.getCurrentViewRecords()[this.editedRowIndex]):t.extend({},this.getRowObjectByIndex(this.editedRowIndex)),this.virtualData=this.getVirtualEditedData(f))}this.restoreAdd()}},r.prototype.getVirtualEditedData=function(n){var i=[].slice.call(this.parent.element.getElementsByClassName("e-gridform")),t;if(!(this.parent.editModule&&this.parent.editModule.formObj&&this.parent.editModule.formObj.isDestroyed))for(t=0;t<i.length;t++)n=this.parent.editModule.getCurrentEditedData(i[parseInt(t.toString(),10)],n);return n},r.prototype.restoreAdd=function(){var i=!this.parent.element.querySelector("."+ii),n,t;this.isNormaledit&&this.isAdd&&i&&(n="Top"===this.parent.editSettings.newRowPosition&&this.content.scrollTop<this.parent.getRowHeight(),t="Bottom"===this.parent.editSettings.newRowPosition&&this.parent.pageSettings.currentPage===this.maxPage,(n||t)&&(this.parent.isEdit=!1,this.parent.addRecord()))},r.prototype.onDataReady=function(n){t.isNullOrUndefined(n.count)||(this.count=n.count,this.maxPage=Math.ceil((this.parent.groupSettings.columns.length&&this.parent.vcRows.length?this.parent.vcRows.length:n.count)/this.parent.pageSettings.pageSize));this.vgenerator.checkAndResetCache(n.requestType);["refresh","filtering","searching","grouping","ungrouping","reorder",void 0].some(function(t){return n.requestType===t})&&this.refreshOffsets();this.setVirtualHeight();this.resetScrollPosition(n.requestType)},r.prototype.setVirtualHeight=function(){var f=this.parent.enableColumnVirtualization?this.getColumnOffset(this.parent.getVisibleColumns().length+this.parent.groupSettings.columns.length-1)+"px":"100%",n=this.offsets[b(this.parent)&&0!==this.count?this.getGroupedTotalBlocks():this.getTotalBlocks()];!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization&&(n=0);var e=b(this.parent)&&0!==this.count?this.getGroupedTotalBlocks():this.getTotalBlocks(),i=Math.ceil(e/2),r=Math.round(this.virtualEle.placeholder.getBoundingClientRect().bottom),u=Math.round(this.virtualEle.wrapper.getBoundingClientRect().bottom);(this.currentInfo.page===i||this.currentInfo.page+1===i)&&"down"===this.currentInfo.direction&&r>u&&!this.diff&&(this.diff=r-u);this.diff&&this.currentInfo.page===i&&r>u&&(!this.isAdd||"Bottom"!==this.parent.editSettings.newRowPosition)?(n-=this.diff,this.heightChange=!0):"virtualscroll"===this.requestType&&this.diff&&this.heightChange&&(n-=this.diff,this.heightChange=!1);this.virtualEle.setVirtualHeight(n,f);this.virtualEle&&this.virtualEle.wrapper&&(this.virtualEle.wrapper.style.minHeight=!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization?"":t.isNullOrUndefined(n)?"0px":t.formatUnit(this.parent.height));this.parent.enableColumnVirtualization&&this.header.virtualEle.setVirtualHeight(1,f)},r.prototype.getPageFromTop=function(n,t){var i=this,u=b(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks(),r=0;return this.offsetKeys.some(function(f){var e=Number(f),o=n<=i.offsets[""+f]||e===u&&n>i.offsets[""+f];return o&&(i.offsetKeys.length%2!=0&&e.toString()===i.offsetKeys[i.offsetKeys.length-2]&&n<=i.offsets[i.offsetKeys.length-1]&&(e+=1),t.block=e%2==0?1:0,r=Math.max(1,Math.min(i.vgenerator.getPage(e),i.maxPage))),o}),r},r.prototype.getTranslateY=function(n,t,i,r){void 0===i&&((i={page:this.getPageFromTop(n,{})}).blockIndexes=this.vgenerator.getBlockIndexes(i.page));var f=(i.blockIndexes[0]||1)-1,e=this.getOffset(f),h=this.getOffset(i.blockIndexes[i.blockIndexes.length-1]);r&&(i=this.prevInfo);var u=e>n?this.getOffset(f-1):h<n+t?this.getOffset(f+1):e,o=this.offsets[i.blockIndexes[i.blockIndexes.length-1]]-this.tmpOffsets[i.blockIndexes[0]],s=b(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks();return u+o>this.offsets[parseInt(s.toString(),10)]&&(u-=u+o-this.offsets[parseInt(s.toString(),10)]),1===i.page&&0===i.block&&"up"===i.direction&&(u=0),!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization&&(u=0),u},r.prototype.getOffset=function(n){return Math.min(0|this.offsets[parseInt(n.toString(),10)],0|this.offsets[this.maxBlock])},r.prototype.onEntered=function(){var n=this;return function(i,r,u,f,e,o){var c,y,a,p,v,w;if(("down"!==u&&"up"!==u||n.parent.enableVirtualization||!n.parent.enableColumnVirtualization)&&(!t.Browser.isIE||e||!o||n.preventEvent||n.parent.enableVirtualMaskRow||n.parent.showSpinner(),n.prevInfo=n.prevInfo||n.vgenerator.getData(),c=n.getInfoFromView(u,r,f),!(n.parent.isFrozenGrid()&&"X"===r.axis&&n.parent.getVisibleFrozenLeftCount()>=c.columnIndexes[0]&&n.prevInfo&&n.prevInfo.columnIndexes.toString().includes(c.columnIndexes.toString())))){if(n.parent.enableVirtualMaskRow&&!n.preventEvent){var b=parseInt(n.offsetKeys[0],10),k=parseInt(n.offsetKeys[n.offsetKeys.length-1],10),h=n.currentInfo.blockIndexes,d=n.prevInfo&&"X"===r.axis&&n.prevInfo.columnIndexes.toString()===c.columnIndexes.toString()||"down"===u&&n.parent.allowGrouping&&n.parent.groupSettings.columns.length&&(n.parent.allowFiltering&&n.parent.filterSettings.columns.length||n.parent.searchSettings.key.length)&&n.offsetKeys.length<=2;h&&h[0]===b&&"up"===u||h&&h[h.length-1]===k&&"down"===u||d||setTimeout(function(){n.parent.showMaskRow(r.axis)},0)}var l="X"===r.axis,g=n.prevInfo.offsets?n.prevInfo.offsets.top:null,nt=n.content.getBoundingClientRect().height,s=n.getColumnOffset(l?n.vgenerator.getColumnIndexes()[0]-1:n.prevInfo.columnIndexes[0]-1);n.parent.isFrozenGrid()&&n.parent.enableColumnVirtualization&&n.currentInfo&&n.currentInfo.columnIndexes&&(y=n.currentInfo.columnIndexes[0]-1,a=0,n.parent.getColumns().filter(function(n){n.visible&&"Left"===n.freeze&&(a+=parseInt(n.width.toString(),10))}),y>n.parent.getVisibleFrozenLeftCount()&&(s-=a));l&&(p=Object.keys(n.vgenerator.cOffsets).length-n.prevInfo.columnIndexes.length,v=n.vgenerator.cOffsets[p-1],s=s>v?v:s);!n.parent.enableVirtualization&&n.parent.enableColumnVirtualization?n.virtualEle.adjustTable(s,0):(w=n.getTranslateY(f.top,nt,l&&g===f.top?n.prevInfo:void 0,!0),n.virtualEle.adjustTable(s,Math.min(w,n.offsets[n.maxBlock])));n.parent.enableColumnVirtualization&&(n.header.virtualEle.adjustTable(s,0),n.parent.isFrozenGrid()&&n.resetStickyLeftPos(s))}}},r.prototype.dataBound=function(){this.parent.notify(ett,{});this.isSelection&&"upArrow"!==this.activeKey&&"downArrow"!==this.activeKey?this.parent.selectRow(this.selectedRowIndex):(this.activeKey=this.empty,this.requestType=this.empty)},r.prototype.resetStickyLeftPos=function(n,i){var o=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-leftfreeze,.e-rightfreeze,.e-fixedfreeze")).concat([].slice.call((i||this.parent.getContent()).querySelectorAll(".e-leftfreeze,.e-rightfreeze,.e-fixedfreeze"))),s=0,h=0,f,r,u,e,c;if(this.parent.getHeaderContent().querySelectorAll(".e-fixedfreeze").length&&(s=this.parent.leftrightColumnWidth("left"),h=this.parent.leftrightColumnWidth("right")),o.length)for(f=0;f<o.length;f++)r=o[parseInt(f.toString(),10)],u=void 0,r.classList.contains("e-rowcell")?t.isNullOrUndefined(r.getAttribute("aria-colindex"))&&r.querySelector("[data-mappinguid]")?(e=r.querySelector("[data-mappinguid]").getAttribute("data-mappinguid"),u=this.parent.getColumnByUid(e)):(c=parseInt(r.getAttribute("aria-colindex"),10)-1,u=this.parent.getColumnByIndex(parseInt(c.toString(),10))):(r.classList.contains("e-headercell")||r.classList.contains("e-filterbarcell"))&&(e=r.classList.contains("e-filterbarcell")?r.getAttribute("data-mappinguid"):r.querySelector("[data-mappinguid]").getAttribute("data-mappinguid"),u=this.parent.getColumnByUid(e)),t.isNullOrUndefined(u)||("Left"===u.freeze?r.style.left=u.valueX-n+"px":"Right"===u.freeze?r.style.right=u.valueX+n+"px":"Fixed"===u.freeze&&(r.style.left=s-n+"px",r.style.right=h+n+"px"));this.parent.translateX=n},r.prototype.rowSelected=function(n,t){var u,f;if((this.isSelection||t)&&!this.isLastBlockRow(n.rowIndex)){var i=uc(this.content.firstElementChild),o=this.parent.element.getBoundingClientRect().top,s=n.row.getBoundingClientRect().top-o,e=this.content.getBoundingClientRect().height,h=e<s,c=h?s-e:this.initialRowTop-s,r=h?i.height-c:i.height+c;this.virtualEle.adjustTable(i.width,r);u=this.virtualEle.wrapper.getBoundingClientRect();f=this.content.getBoundingClientRect();u.top>f.top&&this.virtualEle.adjustTable(i.width,r-(u.top-f.top));this.content.querySelector("tbody").lastElementChild.getBoundingClientRect().top-o<e?(r+=e-(n.row.getBoundingClientRect().top-o),this.virtualEle.adjustTable(i.width,r-this.parent.getRowHeight()/2)):f.bottom>u.bottom&&this.virtualEle.adjustTable(i.width,r+(f.bottom-u.bottom));this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&this.resetStickyLeftPos(i.width)}this.isSelection=!1},r.prototype.isLastBlockRow=function(n){var t=this.parent.getContent().firstElementChild,i=Math.floor(t.offsetHeight/this.parent.getRowHeight())-1;return n>=this.maxPage*this.parent.pageSettings.pageSize-i},r.prototype.refreshMaxPage=function(){this.parent.groupSettings.columns.length&&this.parent.vcRows.length&&(this.maxPage=Math.ceil(this.parent.vcRows.length/this.parent.pageSettings.pageSize))},r.prototype.setVirtualPageQuery=function(n){var i=[],r,u,f;if(this.prevInfo&&this.prevInfo.blockIndexes&&(i=hk(this.prevInfo.blockIndexes)),("sorting"===this.requestType||"delete"===this.requestType)&&i.length&&sc(this.parent))return n.query.skip(this.parent.pageSettings.pageSize*(i[0]-1)),n.query.take(this.parent.pageSettings.pageSize*i.length),void(n.skipPage=!0);r=this.parent.getContent().querySelector(".e-row");("virtualscroll"===this.requestType&&this.vgenerator.currentInfo.blockIndexes&&(this.vgenerator.currentInfo={}),r&&this.parent.isManualRefresh&&this.currentInfo.blockIndexes&&(3===this.currentInfo.blockIndexes.length||i.length>1))&&(this.vgenerator.startIndex=parseInt(r.getAttribute("aria-rowindex"),10)-1,this.vgenerator.currentInfo=t.extend({},this.currentInfo),this.vgenerator.currentInfo.blockIndexes=this.currentInfo.blockIndexes.slice(),(this.vgenerator.includePrevPage=this.currentInfo.blockIndexes[0]%2==0)?(this.vgenerator.startIndex=this.vgenerator.startIndex-this.getBlockSize(),this.vgenerator.currentInfo.blockIndexes.unshift(this.currentInfo.blockIndexes[0]-1)):this.vgenerator.currentInfo.blockIndexes.push(this.currentInfo.blockIndexes[this.currentInfo.blockIndexes.length-1]+1),u=(this.vgenerator.currentInfo.blockIndexes[0]-1)*this.getBlockSize(),f=this.vgenerator.currentInfo.blockIndexes.length*this.getBlockSize(),n.query.skip(u),n.query.take(f),n.skipPage=!0)},r.prototype.eventListener=function(n){var t=this,r,i,u;for(this.parent[""+n](wi,this.onDataReady,this),this.parent.addEventListener(ti,this.dataBound.bind(this)),this.parent.addEventListener(p,this.actionBegin.bind(this)),this.parent.addEventListener(s,this.actionComplete.bind(this)),this.parent.addEventListener(lf,this.rowSelected.bind(this)),this.parent[""+n](ge,this.refreshContentRows,this),this.parent[""+n](uv,this.refreshVirtualLazyLoadCache,this),this.parent[""+n](uw,this.selectVirtualRow,this),this.parent[""+n](ow,this.virtualCellFocus,this),this.parent[""+n](ps,this.editActionBegin,this),this.parent[""+n](ks,this.addActionBegin,this),this.parent[""+n](hw,this.restoreEdit,this),this.parent[""+n](uo,this.editSuccess,this),this.parent[""+n](ws,this.refreshCache,this),this.parent[""+n](bs,this.resetIsedit,this),this.parent[""+n](nf,this.getVirtualData,this),this.parent[""+n](sw,this.editCancel,this),this.parent[""+n](ba,this.refreshMaxPage,this),this.parent[""+n](th,this.setVirtualPageQuery,this),this.parent[""+n](ka,this.selectRowOnContextOpen,this),this.parent[""+n](kw,this.resetVirtualFocus,this),this.parent[""+n](dw,this.refreshCells,this),this.parent[""+n](gw,this.scrollToEdit,this),r=this.actions,i=0;i<r.length;i++)this.parent[""+n](r[parseInt(i.toString(),10)]+"-begin",this.onActionBegin,this);u=function(){var n,i;t.observer.observe(function(n){return t.scrollListener(n)},t.onEntered());n=t.parent;n.enablePersistence&&n.scrollPosition&&(n.scrollPosition.top>0&&(t.content.scrollTop=n.scrollPosition.top,i={direction:"down",sentinel:t.observer.sentinelInfo.down,offset:n.scrollPosition,focusElement:n.element},t.scrollListener(i)),n.enableColumnVirtualization&&(t.content.scrollLeft=n.scrollPosition.left));t.parent.off(k,u)};this.parent.on(k,u,this)},r.prototype.refreshVirtualLazyLoadCache=function(n){var s,u,f,e=this.currentInfo.blockIndexes,i,o,r;for(t.isNullOrUndefined(this.currentInfo.blockIndexes)&&(e=[1,2]),i=0;i<e.length;i++)for(o=this.vgenerator.cache[e[parseInt(i.toString(),10)]],r=0;r<o.length;r++)if(o[parseInt(r.toString(),10)].uid===n.uid){s=e[parseInt(i.toString(),10)];u=r;f=o;break}n.count?this.vgenerator.cache[parseInt(s.toString(),10)].splice(u+1,n.count):n.rows&&n.rows.length&&(this.vgenerator.cache[parseInt(s.toString(),10)]=[].slice.call(f.slice(0,u+1)).concat([].slice.call(n.rows)).concat([].slice.call(f.slice(u+1,f.length))));this.refreshOffsets()},r.prototype.scrollToEdit=function(n){var r=!0,e,u,o,f,i;(this.validationCheck=!0,this.isAdd&&this.content.scrollTop>0)&&(r=!1,e=Object.keys(this.offsets),this.content.scrollTop="Top"===this.parent.editSettings.newRowPosition?0:this.offsets[e.length-1]);u=this.parent.getRowByIndex(this.editedRowIndex);u||t.isNullOrUndefined(this.editedRowIndex)||u&&this.isRowInView(u)||(o=this.parent.getRowHeight(),f=this.editedRowIndex*o,t.isNullOrUndefined(f)||(r=!1,this.content.scrollTop=f));n&&r&&(i=this.vgenerator.cOffsets[n.index-this.parent.getVisibleFrozenColumns()-1],this.parent.enableColumnVirtualization||(i=this.parent.getHeaderContent().querySelector('.e-headercelldiv[data-mappinguid="'+n.uid+'"]').parentElement.offsetLeft),this.parent.enableColumnVirtualization&&this.parent.getVisibleFrozenLeftCount()&&(i-=this.parent.leftrightColumnWidth("left")),this.content.scrollLeft=this.parent.enableRtl?-Math.abs(i):i);n&&!r&&(this.validationCol=n)},r.prototype.refreshCells=function(n){n.cells=this.vgenerator.generateCells(n.foreignKeyData)},r.prototype.resetVirtualFocus=function(n){this.isCancel=n.isCancel},r.prototype.getVirtualData=function(n){if(this.isNormaledit){var i=this.parent.element.querySelector('.e-griderror:not([style*="display: none"])'),t=Object.keys(this.virtualData);if(n.isScroll=0!==t.length&&this.currentInfo.sentinelInfo&&"X"===this.currentInfo.sentinelInfo.axis,i)return;this.virtualData=t.length?this.virtualData:n.virtualData;this.getVirtualEditedData(this.virtualData);n.virtualData=this.virtualData;n.isAdd=this.isAdd||this.parent.editSettings.showAddNewRow;n.isCancel=this.isCancel}},r.prototype.selectRowOnContextOpen=function(n){this.isContextMenuOpen=n.isOpen},r.prototype.editCancel=function(n){var i=fy(this.parent,n.data);t.isNullOrUndefined(i)||(n.data=this.parent.getCurrentViewRecords()[parseInt(i.toString(),10)])},r.prototype.editSuccess=function(n){this.isNormaledit&&(!this.isAdd&&n.data&&this.updateCurrentViewData(n.data),this.isAdd=!1)},r.prototype.updateCurrentViewData=function(n){var i=fy(this.parent,n);t.isNullOrUndefined(i)||(this.parent.getCurrentViewRecords()[parseInt(i.toString(),10)]=n)},r.prototype.actionBegin=function(n){"virtualscroll"!==n.requestType&&(this.requestType=n.requestType);n.cancel||this.parent.notify(htt,n)},r.prototype.virtualCellFocus=function(n){var r=document.activeElement,u,a;if(r.classList.contains(v)||!(r instanceof HTMLInputElement)&&t.isNullOrUndefined(r.closest(".e-templatecell"))||(r=r.closest(".e-rowcell")),this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&r&&(r.classList.contains(v)||!t.isNullOrUndefined(i(r,tit)))&&n&&("shiftEnter"===n.action||"upArrow"===n.action||"downArrow"===n.action)){var f,s=(f=this.parent.getContent().firstElementChild).getBoundingClientRect(),e=t.closest(r,"tr"),o="downArrow"===n.action?e.nextElementSibling:e.previousElementSibling,h=t.isNullOrUndefined(o)?void 0:o.getBoundingClientRect();t.isNullOrUndefined(o)||"downArrow"===n.action&&h.bottom>s.bottom||("upArrow"===n.action||"shiftEnter"===n.action)&&h.top<s.top?(this.activeKey=n.action,this.parent.focusModule.virtualSelectionInfo={isPending:t.isNullOrUndefined(o),direction:n.action,event:n},a=t.isNullOrUndefined(o)?this.parent.getRowHeight():"downArrow"===n.action?h.bottom-s.bottom:s.top-h.top,f.scrollTop="downArrow"===n.action?f.scrollTop+a:f.scrollTop-a):this.activeKey=this.empty}else if(r&&r.classList.contains(v)&&n&&("upArrow"===n.action||"downArrow"===n.action||"shiftEnter"===n.action)&&(u=parseInt(r.parentElement.getAttribute(c),10)-1,n&&("upArrow"===n.action||"shiftEnter"===n.action||"downArrow"===n.action))){f=this.parent.getContent().firstElementChild;"downArrow"===n.action?u+=1:u-=1;this.rowIndex=u;this.cellIndex=parseInt(r.getAttribute(ft),10)-1;e=this.parent.getRowByIndex(u);var y=this.parent.pageSettings.currentPage,p=Math.floor(f.offsetHeight/this.parent.getRowHeight())-1,l=!1;t.isNullOrUndefined(e)&&(l=!0,("downArrow"===n.action&&y===this.maxPage-1||("upArrow"===n.action||"shiftEnter"===n.action)&&1===y)&&(l=!1));l||tut(e,this.parent)&&"downArrow"===n.action||iut(e,2*this.parent.getRowHeight())&&("upArrow"===n.action||"shiftEnter"===n.action)?(this.activeKey=n.action,f.scrollTop="downArrow"===n.action?(u-p)*this.parent.getRowHeight():u*this.parent.getRowHeight()):this.activeKey=this.empty;this.parent.selectionSettings.checkboxOnly||this.parent.selectRow(u)}},r.prototype.editActionBegin=function(n){this.editedRowIndex=n.index;var r=!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization?t.extend({},this.parent.getCurrentViewRecords()[n.index]):t.extend({},this.getRowObjectByIndex(n.index)),i=Object.keys(this.virtualData);n.data=i.length&&!this.parent.editSettings.showAddNewRow?this.virtualData:this.isInfiniteColumnvirtualization()?n.data:r;this.enableCacheOnInfiniteColumnVirtual()&&(this.virtualInfiniteData=n.data);n.isScroll=0!==i.length&&this.currentInfo.sentinelInfo&&"X"===this.currentInfo.sentinelInfo.axis},r.prototype.getEditedRowObject=function(){for(var i,t=this.parent.vcRows,n=0;n<t.length;n++)t[parseInt(n.toString(),10)].index===this.editedRowIndex&&(i=t[parseInt(n.toString(),10)]);return i},r.prototype.refreshCache=function(n){var t,r,i;this.isInfiniteColumnvirtualization()||(t=Math.ceil((this.editedRowIndex+1)/this.getBlockSize()),this.parent.allowPaging&&this.parent.enableColumnVirtualization&&(t=Math.ceil((this.editedRowIndex+1+(this.parent.pageSettings.currentPage-1)*this.parent.pageSettings.pageSize)/this.getBlockSize())),r=this.parent.allowPaging&&this.parent.enableColumnVirtualization?this.editedRowIndex%this.getBlockSize():this.editedRowIndex-(t-1)*this.getBlockSize(),this.parent.groupSettings.columns.length?(i=this.getEditedRowObject(),i&&(i.data=n.data)):this.vgenerator.cache[parseInt(t.toString(),10)][parseInt(r.toString(),10)].data=n.data)},r.prototype.actionComplete=function(n){if(this.parent.enableVirtualization||this.parent.enableColumnVirtualization){var t=["delete","save","cancel"];t.some(function(t){return t===n.requestType})&&(this.refreshOffsets(),this.refreshVirtualElement());this.isNormaledit&&(["sorting","filtering","grouping","refresh","searching","ungrouping","reorder"].some(function(t){return t===n.requestType})||t.some(function(t){return t===n.requestType}))&&(this.isCancel=!0,this.isAdd&&this.parent.editSettings&&"Bottom"===this.parent.editSettings.newRowPosition&&(this.virtualEle.placeholder.style.height=parseInt(this.virtualEle.placeholder.style.height.toString(),10)-this.diff+"px"),this.isAdd=this.parent.editSettings.showAddNewRow,this.editedRowIndex=this.empty,this.virtualData={},this.virtualInfiniteData={},this.parent.editModule&&(this.parent.editModule.editModule.previousData=void 0));this.parent.enableColumnVirtualization&&"filterAfterOpen"===n.requestType&&this.currentInfo.columnIndexes&&this.currentInfo.columnIndexes[0]>0&&this.parent.resetFilterDlgPosition(n.columnName)}},r.prototype.resetIsedit=function(){this.parent.enableVirtualization&&this.isNormaledit&&(this.parent.editSettings.allowEditing&&Object.keys(this.virtualData).length||this.parent.editSettings.allowAdding&&this.isAdd)&&(this.parent.isEdit=!0)},r.prototype.scrollAfterEdit=function(){var n,i,r,u;this.parent.editModule&&this.parent.editSettings.allowEditing&&this.isNormaledit&&this.parent.element.querySelector(".e-gridform")&&(n=this.parent.element.querySelector("."+ut),i=this.parent.element.querySelector("."+ii),(n||i)&&(r=n?t.extend({},this.getRowObjectByIndex(this.editedRowIndex)):t.extend({},this.emptyRowData),u=Object.keys(this.virtualData),this.virtualData=u.length?this.getVirtualEditedData(this.virtualData):this.getVirtualEditedData(r)))},r.prototype.createEmptyRowdata=function(){var n=this;this.parent.columnModel.filter(function(t){n.emptyRowData[t.field]=n.empty})},r.prototype.addActionBegin=function(n){if(this.isNormaledit){Object.keys(this.emptyRowData).length||this.createEmptyRowdata();this.isAdd=!0;var t=this.parent.pageSettings.currentPage;!this.parent.frozenRows&&this.content.scrollTop>0&&"Top"===this.parent.editSettings.newRowPosition&&(this.isAdd=!0,this.onActionBegin(),n.startEdit=!1,this.content.scrollTop=0);t<this.maxPage-1&&"Bottom"===this.parent.editSettings.newRowPosition&&(this.isAdd=!0,this.parent.setProperties({pageSettings:{currentPage:this.maxPage-1}},!0),n.startEdit=!1,this.content.scrollTop=this.offsets[this.offsetKeys.length])}},r.prototype.getRowObjectByIndex=function(n){return this.getRowCollection(n,!0)},r.prototype.getBlockSize=function(){return this.parent.pageSettings.pageSize>>1},r.prototype.getBlockHeight=function(){return this.getBlockSize()*this.parent.getRowHeight()},r.prototype.isEndBlock=function(n){var t=b(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks();return n>=t||n===t-1},r.prototype.isOddPageSize=function(){return this.parent.pageSettings.pageSize%2!=0},r.prototype.getOddBlockSize=function(){return this.isOddPageSize()?this.parent.pageSettings.pageSize/2:this.getBlockSize()},r.prototype.getGroupedTotalBlocks=function(){var n=this.parent.vcRows;return Math.floor(n.length/this.getOddBlockSize()<1?1:n.length/this.getOddBlockSize())},r.prototype.getTotalBlocks=function(){return Math.ceil(this.count/this.getOddBlockSize())},r.prototype.getColumnOffset=function(n){return 0|this.vgenerator.cOffsets[parseInt(n.toString(),10)]},r.prototype.getModelGenerator=function(){return new yk(this.parent)},r.prototype.resetScrollPosition=function(n){this.actions.some(function(t){return t===n})&&(this.preventEvent=0!==this.content.scrollTop,this.content.scrollTop=0);"virtualscroll"!==n&&(this.isAdd=!1)},r.prototype.onActionBegin=function(){this.parent.setProperties({pageSettings:{currentPage:1}},!0)},r.prototype.getRows=function(){return this.isInfiniteColumnvirtualization()?this.getInfiniteRows():this.vgenerator.getRows()},r.prototype.getRowByIndex=function(n){var i,r;if(b(this.parent))if(!t.isNullOrUndefined(n)&&this.parent.enableVirtualization&&this.parent.groupSettings.columns.length)for(r=0;r<this.parent.getDataRows().length;r++)parseInt(this.parent.getDataRows()[parseInt(r.toString(),10)].getAttribute(c),10)-1===n&&(i=this.parent.getDataRows()[parseInt(r.toString(),10)]);else i=t.isNullOrUndefined(n)?void 0:this.parent.getDataRows()[parseInt(n.toString(),10)];else!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization?i=t.isNullOrUndefined(n)?void 0:this.enableCacheOnInfiniteColumnVirtual()?this.parent.getDataRows().find(function(t){return parseInt(t.getAttribute(c),10)-1===n}):this.parent.getDataRows()[parseInt(n.toString(),10)]:this.prevInfo&&(i=this.getRowCollection(n,!1));return i},r.prototype.getMovableVirtualRowByIndex=function(n){return this.getRowCollection(n,!1)},r.prototype.getFrozenRightVirtualRowByIndex=function(n){return this.getRowCollection(n,!1)},r.prototype.getRowCollection=function(n,i){var r=(this.prevInfo.blockIndexes[0]-1)*this.getBlockSize(),u,f,e;return this.parent.pageSettings.pageSize%2!=0&&(r+=Math.floor(r/this.getBlockSize()/2)),u=this.parent.getDataRows(),f=i?this.parent.getCurrentViewRecords():u,i&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&(r=parseInt(this.parent.getRows()[0].getAttribute(c),10)-1,f=f.filter(function(n){return t.isNullOrUndefined(n.items)})),!i&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&u.length&&(r=parseInt(u[0].getAttribute(c),10)-1),e=f[n-r],this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(e=i?n<=this.parent.frozenRows?this.parent.getRowsObject()[parseInt(n.toString(),10)].data:e:n<=this.parent.frozenRows?u[parseInt(n.toString(),10)]:u[n-r+this.parent.frozenRows]),e},r.prototype.getVirtualRowIndex=function(n){var u,f,r,i;if(t.isNullOrUndefined(this.prevInfo))return n;if(u=this.prevInfo.blockIndexes,f=(u[0]-1)*this.getBlockSize(),this.parent.enableVirtualization&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length)for(r=this.vgenerator.cache[u[0]],i=0;i<r.length;i++)if(r[""+i].isDataRow){f=r[""+i].index;break}return f+n},r.prototype.refreshOffsets=function(){var f=this.parent,s=0,e=this.getBlockSize(),r=this.getOddBlockSize(),i=b(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks(),t,n;for(this.prevHeight=this.offsets[parseInt(i.toString(),10)],this.maxBlock=i%2==0?i-2:i-1,this.offsets={},t=Array.apply(null,Array(i)).map(function(){return++s}),n=0;n<t.length;n++){var h=(this.vgenerator.cache[t[parseInt(n.toString(),10)]]||[]).length,u=b(this.parent)?this.isOddPageSize()?Math.ceil(f.vcRows.length%r):f.vcRows.length%e:this.isOddPageSize()?Math.ceil(this.count%r):this.count%e,o=!b(this.parent)&&t[parseInt(n.toString(),10)]in this.vgenerator.cache?h*this.parent.getRowHeight():u&&t[parseInt(n.toString(),10)]===i?u*this.parent.getRowHeight():this.getBlockHeight();!this.isOddPageSize()||t[parseInt(n.toString(),10)]in this.vgenerator.cache||u&&t[parseInt(n.toString(),10)]===i||(o=(t[parseInt(n.toString(),10)]%2!=0?Math.floor(r):Math.ceil(r))*this.parent.getRowHeight());this.offsets[t[parseInt(n.toString(),10)]]=(0|this.offsets[t[parseInt(n.toString(),10)]-1])+o;this.tmpOffsets[t[parseInt(n.toString(),10)]]=0|this.offsets[t[parseInt(n.toString(),10)]-1]}this.offsetKeys=Object.keys(this.offsets);b(this.parent)&&(this.parent.vGroupOffsets=this.offsets);this.parent.enableColumnVirtualization&&this.vgenerator.refreshColOffsets()},r.prototype.refreshVirtualElement=function(){this.vgenerator.refreshColOffsets();this.setVirtualHeight()},r.prototype.setVisible=function(n){var u,f=this.parent,e=[],r,s;(e=this.getRows()).some(function(n){return n.isDataRow&&(u=n),n.isDataRow});r=!0;!f.groupSettings.columns.length&&u&&(r=!1);for(var l=f.getDataRows(),h=0,a=n.length;h<a;h++){var i=n[parseInt(h.toString(),10)],o=f.getNormalizedColumnIndex(i.uid),c=!0===i.visible?"":"none",v=this.getColGroup().children;(-1!==o&&u&&o<u.cells.length&&t.setStyleAttribute(v[parseInt(o.toString(),10)],{display:c}),r)||(s=void 0,i.width&&(s=i.visible?this.virtualEle.wrapper.offsetWidth+parseInt(i.width.toString(),10):this.virtualEle.wrapper.offsetWidth-parseInt(i.width.toString(),10)),s>f.width?(this.setDisplayNone(l,o,c,e),this.parent.enableColumnVirtualization&&this.virtualEle.setWrapperWidth(s+""),this.refreshVirtualElement()):r=!0);!this.parent.invokedFromMedia&&i.hideAtMedia&&this.parent.updateMediaColumns(i);this.parent.invokedFromMedia=!1}!r||this.parent.enableVirtualization&&this.parent.groupSettings&&this.parent.groupSettings.columns.length&&this.parent.groupSettings.enableLazyLoading?this.parent.notify(gl,{rows:e,args:{isFrozen:!1,rows:e}}):this.refreshContentRows({requestType:"refresh"})},r.prototype.selectVirtualRow=function(n){var h=this,c=b(this.parent)?this.vgenerator.recordsCount:this.count,u,f,i,r,e,o,s;(n.isAvailable=n.selectedIndex<c,!n.isAvailable||this.isContextMenuOpen||"upArrow"===this.activeKey||"downArrow"===this.activeKey||this.isSelection||this.requestTypes.some(function(n){return n===h.requestType})||this.parent.selectionModule.isInteracted)||(u=this.parent.getRowByIndex(n.selectedIndex),f=this.parent.getRowHeight(),u&&this.isRowInView(u)||(this.isSelection=!0,this.selectedRowIndex=n.selectedIndex,i=n.selectedIndex*f,b(this.parent)?(r=this.parent.vcRows.findIndex(function(t){return t.index===n.selectedIndex}),i=-1!==r?r*f:void 0,this.isSelection=-1!==r&&this.isSelection):this.parent.groupSettings.columns.length&&this.parent.getDataModule().isRemote()&&(e=Math.ceil((n.selectedIndex+1)/this.parent.pageSettings.pageSize),o=this.vgenerator.getBlockIndexes(e),i=this.offsets[o[0]]),t.isNullOrUndefined(i)||(s=this.content.scrollTop<i?"down":"up",this.selectRowIndex=n.selectedIndex,this.content.scrollTop=i,this.isSelectionScroll=this.observer.check(s))));this.requestType=this.empty},r.prototype.isRowInView=function(n){var t=n.getBoundingClientRect().top,i=n.getBoundingClientRect().bottom;return t>=this.content.getBoundingClientRect().top&&i<=this.content.getBoundingClientRect().bottom},r}(vh),rft=function(n){function i(t,i){var r=n.call(this,t,i)||this;return r.virtualEle=new pk,r.isMovable=!1,r.gen=new yk(r.parent),r.parent.on(br,r.setVisible,r),r.parent.on(ge,function(n){return"X"===n.virtualInfo.sentinelInfo.axis?r.refreshUI():null},r),r}return tft(i,n),i.prototype.renderTable=function(){this.gen.refreshColOffsets();this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector("."+ct)));n.prototype.renderTable.call(this);this.virtualEle.table=this.getTable();this.virtualEle.content=this.getPanel().querySelector("."+ct);this.virtualEle.content.style.position="relative";this.virtualEle.renderWrapper();this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||!this.parent.enableColumnVirtualization?this.virtualEle.renderPlaceHolder("absolute"):this.virtualEle.renderPlaceHolder()},i.prototype.appendContent=function(n){this.virtualEle.wrapper.appendChild(n)},i.prototype.refreshUI=function(){this.gen.refreshColOffsets();this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector("."+ct)));n.prototype.refreshUI.call(this)},i.prototype.setVisible=function(n){for(var i,s,h,u,o,f,r=this.parent,e=0,c=n.length;e<c;e++)i=n[parseInt(e.toString(),10)],o=r.getNormalizedColumnIndex(i.uid),u=i.visible?"":"none",s=this.getColGroup().children,(r.getColumnByField(i.field)&&t.setStyleAttribute(s[parseInt(o.toString(),10)],{display:u}),r.enableColumnVirtualization&&!r.groupSettings.columns.length)?(h=i.visible?this.virtualEle.wrapper.offsetWidth+parseInt(i.width.toString(),10):this.virtualEle.wrapper.offsetWidth-parseInt(i.width.toString(),10))>r.width?(this.setDisplayNone(i,u),this.virtualEle.setWrapperWidth(h+""),this.gen.refreshColOffsets()):f=!0:f=!0,f&&this.refreshUI()},i.prototype.setDisplayNone=function(n,i){for(var r,e=this.getTable(),u=0,f=[].slice.apply(e.querySelectorAll("th.e-headercell"));u<f.length;u++)if(r=f[u],r.querySelector("[data-mappinguid]")&&r.querySelector("[data-mappinguid]").getAttribute("data-mappinguid")===n.uid){t.setStyleAttribute(r,{display:i});""===i&&t.removeClass([r],"e-hide");break}},i}(fb),pk=function(){function n(){}return n.prototype.renderWrapper=function(n){this.wrapper=t.createElement("div",{className:"e-virtualtable"});this.wrapper.style.minHeight=t.formatUnit(n);this.wrapper.appendChild(this.table);this.content.appendChild(this.wrapper)},n.prototype.renderPlaceHolder=function(n){void 0===n&&(n="relative");this.placeholder=t.createElement("div",{className:"e-virtualtrack"});this.placeholder.style.position=n;this.content.appendChild(this.placeholder)},n.prototype.renderFrozenWrapper=function(n){this.wrapper=t.createElement("div",{className:"e-virtualtable"});this.wrapper.style.cssText="min-height:"+t.formatUnit(n)+"; display: flex;";this.content.appendChild(this.wrapper)},n.prototype.renderFrozenPlaceHolder=function(){this.placeholder=t.createElement("div",{className:"e-virtualtrack"});this.content.appendChild(this.placeholder)},n.prototype.adjustTable=function(n,t){this.wrapper.style.transform="translate("+n+"px, "+t+"px)"},n.prototype.setWrapperWidth=function(n,t){!n||-1!==n.indexOf("%")||this.content.getBoundingClientRect().width<parseInt(n,10)||(n=void 0,t=!0);this.wrapper.style.width=n?n+"px":t?"100%":""},n.prototype.setVirtualHeight=function(n,i){this.placeholder.style.height=t.isNullOrUndefined(n)?"0px":n+"px";!i||-1!==i.indexOf("%")||this.content.getBoundingClientRect().width<parseInt(i,10)||(i="100%");this.placeholder.style.width=i},n.prototype.setFreezeWrapperWidth=function(n,t,i){n.style.width=t?t+"px":i?"100%":""},n}(),rct=function(){function n(n,t){this.parent=n;this.locator=t;this.addEventListener()}return n.prototype.getModuleName=function(){return"virtualscroll"},n.prototype.instantiateRenderer=function(){this.parent.log(["limitation","virtual_height"],"virtualization");var n=this.locator.getService("rendererFactory");this.parent.enableColumnVirtualization&&n.addRenderer(ni.Header,new rft(this.parent,this.locator));n.addRenderer(ni.Content,new ift(this.parent,this.locator));!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization||this.ensurePageSize()},n.prototype.ensurePageSize=function(){var i=this.parent.getRowHeight(),r=this.parent.height.toString().indexOf("%")<0?this.parent.height:this.parent.element.getBoundingClientRect().height,n,t;this.blockSize=~~(parseFloat(r.toString())/i);n=2*this.blockSize;t=this.parent.pageSettings.pageSize;this.parent.setProperties({pageSettings:{pageSize:t<n?n:t}},!0)},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(or,this.instantiateRenderer,this),this.parent.on(be,this.refreshVirtualElement,this),this.parent.on(ih,this.createVirtualValidationForm,this),this.parent.on(da,this.virtualEditFormValidation,this),this.parent.on(l,this.destroy,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(or,this.instantiateRenderer),this.parent.off(be,this.refreshVirtualElement),this.parent.off(ih,this.createVirtualValidationForm),this.parent.off(da,this.virtualEditFormValidation),this.parent.off(l,this.destroy))},n.prototype.getCurrentEditedData=function(n){var i={virtualData:t.extend({},{},n,!0),isAdd:!1,isScroll:!1,endEdit:!0};return this.parent.notify(nf,i),i.virtualData},n.prototype.createVirtualValidationForm=function(n){var i=this.parent,u,e,f;if(i.enableVirtualization&&"Normal"===i.editSettings.mode){var r=i.columns,s=new ci(this.locator,null,this.parent),o=t.extend({},{},i.getRowObjectFromUID(n.uid),!0);for(i.notify(dw,o),u=n.argsCreator(this.getCurrentEditedData(n.prevData),{},!1),u.isCustomFormValidation=!0,u.row=s.render(o,r),n.renderer.update(u),e={},f=0;f<r.length;f++)r[parseInt(f.toString(),10)].visible&&r[parseInt(f.toString(),10)].validationRules&&uk(r[parseInt(f.toString(),10)],0,e,{},{},r.length,!0);u.form.classList.add("e-virtual-validation");i.editModule.virtualFormObj=i.editModule.createFormObj(u.form,e)}},n.prototype.virtualEditFormValidation=function(n){var i=this.parent,r=i.element.querySelector('.e-griderror:not([style*="display: none"])'),u,o,f;if(i.editModule.virtualFormObj)if(r&&"none"!==r.style.display){var s=r.getBoundingClientRect(),e=i.element.querySelectorAll(".e-gridform"),h=e[0],c=i.getContent().getBoundingClientRect().left;(e.length>1&&(h=e[1]),s.left<c||s.right>i.element.offsetWidth)&&(u=h.querySelector('.e-tooltip-wrap:not([style*="display: none"])'),this.scrollToEdit(u,{editIdx:n.editIdx,addIdx:n.addIdx},!0))}else if(i.editModule.virtualFormObj&&(!r||"none"===r.style.display)){for(o=i.editModule.virtualFormObj.element.querySelectorAll('.e-tooltip-wrap:not([style*="display: none"])'),f=0;f<o.length;f++)t.remove(o[parseInt(f.toString(),10)]);this.setEditedDataToValidationForm(i.editModule.virtualFormObj.element,this.getCurrentEditedData(n.prevData));n.isValid=i.editModule.virtualFormObj.validate();n.isValid||(u=i.editModule.virtualFormObj.element.querySelector('.e-tooltip-wrap:not([style*="display: none"])'),this.scrollToEdit(u,{editIdx:n.editIdx,addIdx:n.addIdx}))}},n.prototype.scrollToEdit=function(n,i,r){var e=this.parent,f,u;if(n){var o=e.columnModel,h=ty(n.id).split("_")[0],s=e.getColumnByField(h),c=this.parent.getContent().firstElementChild.scrollTop,l=e.getRowByIndex(i.editIdx);if(!t.isNullOrUndefined(i.addIdx)&&c>0||!t.isNullOrUndefined(i.editIdx)&&!l||r||!s){for(f=void 0,u=0;u<o.length&&!s;u++)if(o[parseInt(u.toString(),10)].field===h){f=o[parseInt(u.toString(),10)];break}r&&(f=s);this.parent.notify(gw,f)}}},n.prototype.setEditedDataToValidationForm=function(n,i){for(var e,r,f=[].slice.call(n.getElementsByClassName("e-field")),u=0,o=f.length;u<o;u++)e=out(this.parent,f[parseInt(u.toString(),10)].getAttribute("data-mappinguid")),e.field&&(r=t.getValue(e.field,i),r=t.isNullOrUndefined(r)?"":r,f[parseInt(u.toString(),10)].value=r)},n.prototype.refreshVirtualElement=function(n){this.parent.enableColumnVirtualization&&"resize"===n.module&&this.locator.getService("rendererFactory").getRenderer(ni.Content).refreshVirtualElement()},n.prototype.destroy=function(){this.removeEventListener()},n}(),wk=function(){function n(n){this.parent=n}return n.prototype.addNew=function(n,t){var i,r;(this.isEdit=!1,i=(this.parent.frozenRows||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow)&&"Top"===this.parent.editSettings.newRowPosition?this.parent.getHeaderTable().querySelector(h):this.parent.getContentTable().querySelector(h),t.row=this.parent.createElement("tr",{className:"e-row e-addedrow"}),this.parent.getContentTable().querySelector(".e-emptyrow")&&!this.parent.editSettings.showAddNewRow)&&(r=this.parent.getContentTable().querySelector(".e-emptyrow"),r.parentNode.removeChild(r),this.parent.frozenRows&&this.parent.element.querySelector(".e-frozenrow-empty")&&this.parent.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty"));"Top"===this.parent.editSettings.newRowPosition?i.insertBefore(t.row,i.firstChild):i.appendChild(t.row);t.row.appendChild(this.getEditElement(n,!1,void 0,t,!0));this.parent.editModule.checkLastRow(t.row,t)},n.prototype.update=function(n,t){this.isEdit=!0;var i=[].slice.call(t.row.querySelectorAll("td.e-rowcell"));t.row.innerHTML="";t.row.appendChild(this.getEditElement(n,!0,i,t,!0));t.row.classList.add(ut);this.parent.editModule.checkLastRow(t.row,t)},n.prototype.getEditElement=function(n,i,r,u,f){var s=this.parent,g=0,rt=t.isNullOrUndefined(s.detailTemplate)&&t.isNullOrUndefined(s.childGrid)?0:1,a,y,b,nt,l,c,p,w,tt,k,d,e,o,it;if(s.allowGrouping&&(g=s.groupSettings.columns.length),a=this.parent.createElement("td",{className:"e-editcell e-normaledit",attrs:{colspan:(s.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length+this.parent.getIndentCount()).toString()}}),y=u.form=this.parent.createElement("form",{id:s.element.id+"EditForm",className:"e-gridform"}),this.parent.editSettings.template)return this.appendChildren(y,u.rowData,f),a.appendChild(y),a;for(b=this.parent.createElement("table",{className:"e-table e-inline-edit",attrs:{cellspacing:"0.25",role:"grid"}}),b.appendChild(s.getContentTable().querySelector(hi).cloneNode(!0)),nt=this.parent.createElement(h,{attrs:{role:"rowgroup"}}),l=this.parent.createElement("tr"),this.parent.rowHeight&&(l.style.height=this.parent.rowHeight+"px"),c=0,rt&&l.insertBefore(this.parent.createElement("td",{className:"e-detailrowcollapse"}),l.firstChild),s.isRowDragable()&&l.appendChild(this.parent.createElement("td",{className:"e-dragindentcell"}));c<g;)l.appendChild(this.parent.createElement("td",{className:"e-indentcell"})),c++;for(w=0,c=0,tt=!0,k=u.isCustomFormValidation?this.parent.columnModel:s.getColumns();i&&w<r.length&&c<k.length||c<k.length;)d=i&&r[parseInt(w.toString(),10)]?r[parseInt(w.toString(),10)].getAttribute("colspan"):null,e=k[parseInt(c.toString(),10)],p=n[e.uid].value,p=t.isNullOrUndefined(p)?"":p,o=this.parent.createElement("td",{className:v,attrs:{colspan:d||""}}),(o.style.cssText=e.textAlign?"text-align: "+e.textAlign+";":"",e.visible?(o.appendChild(n[e.uid]),"Vertical"===this.parent.rowRenderingMode&&(ar(o,{"data-cell":e.headerText}),0===c&&o.classList.add("e-responsive-editcell")),"booleanedit"===e.editType?o.classList.add("e-boolcell"):(e.commands||e.commandsTemplate)&&t.addClass([o],"e-unboundcell"),this.parent.enableRtl||"Vertical"!==s.gridLines&&"Both"!==s.gridLines||!g||!tt||(o.classList.add("e-grid-group-first-cell"),tt=!1)):o.classList.add("e-hide"),this.parent.isFrozenGrid())&&((ae(this.parent,e,o),this.parent.isSpan)&&(it=o.getAttribute("colspan")?parseInt(o.getAttribute("colspan"),10):1,tk(this.parent,e,o,it)),this.parent.enableColumnVirtualization&&("Left"!==e.freeze||t.isNullOrUndefined(e.valueX)?"Right"!==e.freeze||t.isNullOrUndefined(e.valueX)?"Fixed"===e.freeze&&(o.style.left=this.parent.leftrightColumnWidth("left")-this.parent.translateX+"px",o.style.right=this.parent.leftrightColumnWidth("right")+this.parent.translateX+"px"):o.style.right=e.valueX+this.parent.translateX+"px":o.style.left=e.valueX-this.parent.translateX+"px")),o.setAttribute("aria-label",p+this.parent.localeObj.getConstant("ColumnHeader")+e.headerText),l.appendChild(o),c=d?c+parseInt(d,10):c+1,w++;return of(l),nt.appendChild(l),b.appendChild(nt),y.appendChild(b),a.appendChild(y),a},n.prototype.removeEventListener=function(){},n.prototype.appendChildren=function(n,i,r){var u=t.extend({},i,{isAdd:!this.isEdit,isFrozen:r},!0),f=this.parent.element.id+"editSettingsTemplate";!this.parent.isReact||"string"==typeof this.parent.editSettings.template||this.parent.editSettings.template.prototype&&this.parent.editSettings.template.prototype.CSPTemplate?nt(n,this.parent.getEditTemplate()(u,this.parent,"editSettingsTemplate",f,null,null,null,this.parent.root)):(this.parent.getEditTemplate()(u,this.parent,"editSettingsTemplate",f,null,null,n),this.parent.renderTemplates())},n}(),uft=function(){function n(n){this.parent=n}return n.prototype.update=function(n,i){if(this.parent.isReact&&i.columnObject&&i.columnObject.template){var u=i.cell.parentElement,r=i.cell.cloneNode(!0);u.insertBefore(r,i.cell);r.focus();i.cell.remove();i.cell=r}i.cell.setAttribute("aria-label",i.cell.innerHTML+this.parent.localeObj.getConstant("ColumnHeader")+i.columnObject.field);i.cell.innerHTML="";i.cell.appendChild(this.getEditElement(n,i));i.cell.classList.add("e-editedbatchcell");t.classList(i.row,[ut,"e-batchrow"],[])},n.prototype.getEditElement=function(n,t){var r=this.parent,i=this.parent.createElement("form",{id:r.element.id+"EditForm",className:"e-gridform"});return i.appendChild(n[t.columnObject.uid]),"booleanedit"===t.columnObject.editType&&t.cell.classList.add("e-boolcell"),t.columnObject.editType||t.cell.classList.add("e-inputbox"),i},n}(),fft=function(){function n(n,t){this.parent=n;this.serviceLocator=t;this.parent.isDestroyed||(this.parent.on(cs,this.destroy,this),this.parent.on(l,this.destroy,this))}return n.prototype.setLocaleObj=function(){this.l10n=this.serviceLocator.getService("localization")},n.prototype.addNew=function(n,t){this.isEdit=!1;this.createDialog(n,t)},n.prototype.update=function(n,t){this.isEdit=!0;this.createDialog(n,t)},n.prototype.createDialogHeader=function(n){var r=this,u=this.parent,i;return this.parent.enableAdaptiveUI?(i=new sb(this.parent,this.serviceLocator),i.action=this.isEdit?a.isEdit:a.isAdd,i.renderResponsiveHeader(void 0,n)):u.editSettings.headerTemplate?t.initializeCSPTemplate(function(){return r.getDialogEditTemplateElement("HeaderTemplate",n).outerHTML}):this.isEdit?this.l10n.getConstant("EditFormTitle")+n.primaryKeyValue[0]:this.l10n.getConstant("AddFormTitle")},n.prototype.createDialog=function(n,i){var u=this,r=this.parent;this.dialog=this.parent.createElement("div",{id:r.element.id+"_dialogEdit_wrapper"});this.dialog.style.width="auto";r.enableAdaptiveUI&&this.dialog.classList.add("e-responsive-dialog");r.element.appendChild(this.dialog);this.setLocaleObj();this.dialog.setAttribute("aria-label",this.l10n.getConstant("DialogEdit"));this.dialogObj=new tt.Dialog(t.extend({header:this.createDialogHeader(i),isModal:!0,visible:!0,cssClass:this.parent.cssClass?"e-edit-dialog "+this.parent.cssClass:"e-edit-dialog",content:this.getEditElement(n,i),showCloseIcon:!0,allowDragging:!0,close:this.dialogClose.bind(this),created:this.dialogCreated.bind(this),closeOnEscape:!0,width:r.editSettings.template?"auto":"330px",target:i.target?i.target:document.body,animationSettings:{effect:"None"},footerTemplate:r.editSettings.footerTemplate?t.initializeCSPTemplate(function(){return u.getDialogEditTemplateElement("FooterTemplate",i).outerHTML}):null,buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.l10n.getConstant("SaveButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}]},r.editSettings.dialog&&r.editSettings.dialog.params||{}));i.dialog=this.dialogObj;this.dialogObj.isStringTemplate=!0;this.renderResponsiveDialog();this.dialogObj.appendTo(this.dialog);le(this.parent.element,this.dialogObj.element.parentElement);r.enableAdaptiveUI&&this.dialogObj.show(!0)},n.prototype.dialogCreated=function(){fk(this.parent)},n.prototype.renderResponsiveDialog=function(){var n=this;this.parent.enableAdaptiveUI&&(this.parent.adaptiveDlgTarget&&(this.dialogObj.target=this.parent.adaptiveDlgTarget),this.dialogObj.buttons=[{}],this.dialogObj.showCloseIcon=!0,this.dialogObj.visible=!1,this.dialogObj.width="100%",this.dialogObj.open=function(){n.dialogObj.element.style.maxHeight="100%"})},n.prototype.btnClick=function(n){this.l10n.getConstant("CancelButton").toLowerCase()===n.target.innerText.trim().toLowerCase()?this.dialogClose():this.parent.endEdit()},n.prototype.dialogClose=function(){this.parent.closeEdit()},n.prototype.destroy=function(){for(var r,u,i=["template","headerTemplate","footerTemplate"],n=0;n<i.length;n++)this.parent.editSettings[i[parseInt(n.toString(),10)]]&&(r=i[parseInt(n.toString(),10)].charAt(0).toUpperCase()+i[parseInt(n.toString(),10)].slice(1),u=this.parent.element.id+"editSettings"+r,t.updateBlazorTemplate(u,r,this.parent.editSettings));this.parent.notify(al,{});this.parent.isEdit=!1;this.parent.notify(kr,{});this.dialog&&!this.dialogObj.isDestroyed&&(this.dialogObj.destroy(),t.remove(this.dialog))},n.prototype.getDialogEditTemplateElement=function(n,i){var r=this.parent.createElement("div",{className:"e-dialog"+n}),f=t.extend({},i.rowData,{isAdd:!this.isEdit},!0),u=this.parent.element.id+"editSettings"+n;return nt(r,("HeaderTemplate"===n?this.parent.getEditHeaderTemplate():this.parent.getEditFooterTemplate())(f,this.parent,"editSettings"+n,u)),t.updateBlazorTemplate(u,n,this.parent.editSettings),r},n.prototype.getEditElement=function(n,i){var a=this,s=this.parent,e=this.parent.createElement("div",{className:this.isEdit?ut:"e-insertedrow"}),f=i.form=this.parent.createElement("form",{id:s.element.id+"EditForm",className:"e-gridform"}),l,o;if(this.parent.editSettings.template){var c=this.parent.element.id+"editSettingsTemplate",y=t.extend({},i.rowData,{isAdd:!this.isEdit},!0),b=this.parent.isReact&&"string"!=typeof this.parent.editSettings.template&&!(this.parent.editSettings.template.prototype&&this.parent.editSettings.template.prototype.CSPTemplate),k=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;return b||k?(this.parent.getEditTemplate()(y,this.parent,"editSettingsTemplate",c,null,null,f),this.parent.renderTemplates()):nt(f,this.parent.getEditTemplate()(y,this.parent,"editSettingsTemplate",c,null,null,null,s.root)),t.updateBlazorTemplate(c,"Template",this.parent.editSettings,!0,function(){for(var t=a.parent.getColumns(),n=0;n<t.length;n++)t[parseInt(n.toString(),10)].validationRules&&(a.parent.editModule.formObj.rules[t[parseInt(n.toString(),10)].field]=t[parseInt(n.toString(),10)].validationRules)}),e.appendChild(f),e}for(var p=this.parent.createElement("table",{className:yi,attrs:{cellspacing:"6px",role:"grid"}}),w=this.parent.createElement(h,{attrs:{role:"rowgroup"}}),u=s.getColumns(),r=0;r<u.length;r++)this.parent.editModule.checkColumnIsGrouped(u[parseInt(r.toString(),10)])||u[parseInt(r.toString(),10)].commands||u[parseInt(r.toString(),10)].commandsTemplate||"checkbox"===u[parseInt(r.toString(),10)].type||(l=this.parent.createElement("tr",{attrs:{role:"row"}}),o=this.parent.createElement("td",{className:v}),o.style.cssText="text-align: "+(this.parent.enableRtl?"right":"left")+"; width: 190px;",n[u[parseInt(r.toString(),10)].uid].classList.remove("e-input"),o.appendChild(n[u[parseInt(r.toString(),10)].uid]),l.appendChild(o),w.appendChild(l));return p.appendChild(w),f.appendChild(p),e.appendChild(f),e},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(cs,this.destroy),this.parent.off(l,this.destroy))},n}(),eft=function(){function n(n,t){this.editType={Inline:wk,Normal:wk,Batch:uft,Dialog:fft};this.parent=n;this.serviceLocator=t;this.renderer=new this.editType[this.parent.editSettings.mode](n,t);this.focus=t.getService("focus")}return n.prototype.addNew=function(n){this.renderer.addNew(this.getEditElements(n),n);this.convertWidget(n)},n.prototype.update=function(n){this.renderer.update(this.getEditElements(n),n);n.isCustomFormValidation||(this.parent.notify(vn,n),this.convertWidget(n))},n.prototype.convertWidget=function(n){for(var r,e,v,h,o,c,u,f=this.parent,l="Dialog"===f.editSettings.mode?t.select("#"+f.element.id+"_dialogEdit_wrapper .e-gridform",document):f.editSettings.showAddNewRow&&f.element.querySelector(".e-editedrow")?f.element.querySelector(".e-editedrow").getElementsByClassName("e-gridform")[0]:f.element.getElementsByClassName("e-gridform")[0],s=0,a="Batch"!==f.editSettings.mode?f.getColumns():[f.getColumnByField(n.columnName)];s<a.length;s++)r=a[s],!this.parent.editSettings.template||t.isNullOrUndefined(r.field)?this.parent.editModule.checkColumnIsGrouped(r)||r.commands||(r.valueAccessor(r.field,n.rowData,r),u=l.querySelector("[data-mappinguid="+r.uid+"]"),e=r.edit.write,t.isNullOrUndefined(u)||("string"==typeof e?(e=d(e,window))({rowData:n.rowData,element:u,column:r,requestType:n.requestType,row:n.row,foreignKeyData:r.isForeignColumn()&&d(r.field,n.foreignKeyData)}):r.edit.write({rowData:n.rowData,element:u,column:r,requestType:n.requestType,row:n.row,foreignKeyData:r.isForeignColumn()&&d(r.field,n.foreignKeyData)}),c||!t.isNullOrUndefined(u.getAttribute("disabled"))||i(u,"e-checkbox-disabled"))||(v=!t.isNullOrUndefined(r.edit)&&!t.isNullOrUndefined(r.edit.params)&&r.edit.params.multiline,"hidden"===u.getAttribute("type")&&v&&u.parentElement&&u.parentElement.classList.contains("e-multi-line-input")?(h=u.parentElement.querySelector("textarea"),h&&this.focusElement(h,n.type)):this.focusElement(u,n.type),c=!0)):(o=t.extend({},n),o.element=l.querySelector("[name="+vt(r.field)+"]"),"string"==typeof r.edit.write?d(r.edit.write,window)(o):r.edit.write(o))},n.prototype.focusElement=function(n){var r=this.parent.element.querySelector(".e-edit-checkselect"),f,u;if(!t.isNullOrUndefined(r)&&r.nextElementSibling&&r.nextElementSibling.classList.add("e-focus"),"Batch"===this.parent.editSettings.mode)this.focus.onClick({target:t.closest(n,"td")},!0);else f=!this.parent.enableVirtualization&&!this.parent.enableColumnVirtualization||"Normal"!==this.parent.editSettings.mode,u=n.classList.contains("e-dropdownlist")?n.parentElement:n,(f||(this.parent.enableVirtualization||this.parent.enableColumnVirtualization)&&"Bottom"===this.parent.editSettings.newRowPosition&&i(n,ii))&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&!i(n,ii)||this.parent.addNewRowFocus)?(u.focus(),this.parent.enableVirtualization&&this.parent.contentModule&&this.parent.contentModule.content&&(this.parent.contentModule.content.scrollTop+=this.parent.getRowHeight())):u.focus({preventScroll:!0});n.classList.contains("e-defaultcell")&&n.setSelectionRange(n.value.length,n.value.length)},n.prototype.getEditElements=function(n){var u=this.parent,h={},l="Batch"!==u.editSettings.mode?u.getColumns():[u.getColumnByField(n.columnName)],f,y,i,o,s,g,v;if(n.isCustomFormValidation&&(l=this.parent.columnModel),this.parent.editSettings.template)return{};for(f=0,y=l.length;f<y;f++)if(i=l[parseInt(f.toString(),10)],i.commands||i.commandsTemplate){var tt=this.serviceLocator.getService("cellRendererFactory"),it=new eu(this.parent),rt=tt.getCellRenderer(e.CommandColumn),ut=it.generateRows(n.rowData)[0].cells.filter(function(n){return n.rowID}),p=rt.render(ut[parseInt(f.toString(),10)],n.rowData,{"data-index":n.row?(parseInt(n.row.getAttribute(c),10)-1).toString():0},this.parent.enableVirtualization);(s=p.firstElementChild).setAttribute("textAlign",p.getAttribute("textAlign"));h[i.uid]=s}else{"dateonly"===i.type&&n.rowData[i.field]instanceof Date&&(o=n.rowData[i.field],n.rowData[i.field]=o.getFullYear()+"-"+lu(o.getMonth()+1)+"-"+lu(o.getDate()));var ft=i.valueAccessor(i.field,n.rowData,i),w={column:i,value:ft,type:n.requestType,data:n.rowData},a=i.edit.create,r=void 0;if(i.editTemplate){r=this.parent.createElement("span",{attrs:{"data-mappinguid":i.uid}});var b=this.parent.element.id+i.uid+"editTemplate",k=ic({},n.rowData,{column:i}),et=this.parent.isReact&&"string"!=typeof i.editTemplate&&!(i.editTemplate.prototype&&i.editTemplate.prototype.CSPTemplate),ot=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;et||ot?(i.getEditTemplate()(t.extend({index:n.rowIndex},k),this.parent,"editTemplate",b,null,null,r),this.parent.renderTemplates()):nt(r,i.getEditTemplate()(t.extend({index:n.rowIndex},k),this.parent,"editTemplate",b,null,null,null,u.root))}else"string"==typeof(r="string"==typeof a?(a=d(a,window))(w):i.edit.create(w))&&((s=this.parent.createElement("div")).innerHTML=r,r=s.firstChild),g="input"!==r.tagName&&r.querySelectorAll("input").length,v=vt(i.field),t.attributes(g?r.querySelector("input"):r,{name:v,"data-mappinguid":i.uid,id:u.element.id+v}),t.classList(r,["e-input","e-field"],[]),"Right"===i.textAlign&&r.classList.add("e-ralign"),((i.isPrimaryKey||i.isIdentity)&&"beginEdit"===n.requestType||i.isIdentity&&"add"===n.requestType)&&r.setAttribute("disabled","");h[i.uid]=r}return h},n.prototype.destroy=function(){this.renderer.removeEventListener()},n}(),wr=function(){function n(n){this.parent=n}return n.prototype.create=function(n){return go(this.parent,n.column,"e-field",{type:"text"})},n.prototype.read=function(n){return n.ej2_instances[0].value},n.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.removeEventHandler&&this.removeEventHandler(),this.obj.destroy(),this.obj.element.remove())},n}(),uct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),oft=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.activeClasses=["e-selectionbackground","e-active"],t}return uct(i,n),i.prototype.create=function(n){var t="e-field e-boolcell";return"checkbox"===n.column.type&&(t="e-field e-boolcell e-edit-checkselect"),this.removeEventHandler=this.removeEventListener,go(this.parent,n.column,t,{type:"checkbox",value:n.value})},i.prototype.read=function(n){return n.checked},i.prototype.write=function(n){var u,i,r;(t.isNullOrUndefined(n.row)||(u=n.row.querySelector(".e-edit-checkselect")),d(n.column.field,n.rowData)&&(i=JSON.parse(d(n.column.field,n.rowData).toString().toLowerCase())),t.isNullOrUndefined(u)||"checkbox"!==n.column.type)||((this.editType=this.parent.editSettings.mode,this.editRow=n.row,"add"!==n.requestType)&&(r=this.parent.getRowObjectFromUID(n.row.getAttribute("data-uid")),i=!!r&&r.isSelected),ui.apply(void 0,[[].slice.call(n.row.getElementsByClassName(v)),i].concat(this.activeClasses)));this.obj=new ri.CheckBox(t.extend({label:"Dialog"!==this.parent.editSettings.mode?" ":n.column.headerText,checked:i,disabled:!yr(n.column,n.requestType,n.element),enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:""},n.column.edit.params));this.addEventListener();this.obj.appendTo(n.element)},i.prototype.addEventListener=function(){this.cbChange=this.checkBoxChange.bind(this);this.obj.addEventListener(te,this.cbChange)},i.prototype.removeEventListener=function(){this.obj.isDestroyed||this.obj.removeEventListener(te,this.cbChange)},i.prototype.checkBoxChange=function(n){if(this.editRow&&"Dialog"!==this.editType){var t=!1;n.checked?(t=!0,this.editRow.setAttribute("aria-selected",t.toString())):this.editRow.removeAttribute("aria-selected");ui.apply(void 0,[[].slice.call(this.editRow.getElementsByClassName(v)),t].concat(this.activeClasses))}},i}(wr),fct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sft=function(n){function r(t){var i=n.call(this)||this;return i.parent=t,i.flag=!1,i.removeEventHandler=i.removeEventListener,i}return fct(r,n),r.prototype.write=function(n){var o="Dialog"!==this.parent.editSettings.mode,s,e,f,r;if(this.column=n.column,s=new u.Predicate(n.column.field,"notequal",null,!0,!1),e={},n.column.edit.params)for(f=Object.keys(n.column.edit.params),r=0;r<f.length;r++)e[f[parseInt(r.toString(),10)]]="query"===f[parseInt(r.toString(),10)]?n.column.edit.params[f[parseInt(r.toString(),10)]].clone():n.column.edit.params[f[parseInt(r.toString(),10)]];this.obj=new gt.DropDownList(t.extend({dataSource:this.parent.dataSource instanceof u.DataManager?this.parent.dataSource:new u.DataManager(this.parent.dataSource),query:(new u.Query).where(s).select(n.column.field),enabled:yr(n.column,n.requestType,n.element)&&he(i(n.element,"e-rowcell"),this.parent),fields:{value:n.column.field},value:d(n.column.field,n.rowData),enableRtl:this.parent.enableRtl,placeholder:o?"":n.column.headerText,popupHeight:"200px",floatLabelType:o?"Never":"Always",sortOrder:"Ascending",cssClass:this.parent.cssClass?this.parent.cssClass:null,close:this.dropDownClose.bind(this)},e));this.parent.enableVirtualization&&(this.obj.dataSource=e.dataSource?e.dataSource:n.column.isForeignColumn()?[n.foreignKeyData[0]]:[n.rowData]);this.addEventListener();this.obj.query.params=this.parent.query.params;this.obj.appendTo(n.element);n.element.setAttribute("name",vt(n.column.field))},r.prototype.dropDownClose=function(n){n.event&&("escape"===n.event.action?this.parent.editModule.editCellDialogClose=!0:this.parent.isEdit&&"Batch"===this.parent.editSettings.mode&&"enter"===n.event.action&&n.event.stopPropagation())},r.prototype.addEventListener=function(){this.ddCreated=this.dropdownCreated.bind(this);this.ddOpen=this.dropDownOpen.bind(this);this.ddBeforeOpen=this.dropdownBeforeOpen.bind(this);this.ddComplete=this.ddActionComplete.bind(this);this.obj.addEventListener(sh,this.ddCreated);this.obj.addEventListener(dt,this.ddOpen);this.obj.addEventListener(rb,this.ddBeforeOpen);this.obj.addEventListener(s,this.ddComplete)},r.prototype.removeEventListener=function(){this.obj.isDestroyed||(this.obj.removeEventListener(sh,this.ddCreated),this.obj.removeEventListener(dt,this.ddOpen),this.obj.removeEventListener(rb,this.ddBeforeOpen),this.obj.removeEventListener(s,this.ddComplete))},r.prototype.dropdownCreated=function(){this.flag=!0},r.prototype.dropdownBeforeOpen=function(){this.parent.enableVirtualization&&(this.obj.dataSource=this.column.edit.params&&this.column.edit.params.dataSource?this.column.edit.params.dataSource:this.column.isForeignColumn()?this.column.dataSource instanceof u.DataManager?this.column.dataSource:new u.DataManager(this.column.dataSource):this.parent.dataSource instanceof u.DataManager?this.parent.dataSource:new u.DataManager(this.parent.dataSource))},r.prototype.ddActionComplete=function(n){n.result=u.DataUtil.distinct(n.result,this.obj.fields.value,!0);!this.flag||!this.column.dataSource||this.column.edit.params&&this.column.edit.params.ddEditedData||("result"in this.column.dataSource?this.column.dataSource.result=n.result:this.column.dataSource instanceof u.DataManager&&(this.column.dataSource.dataSource.json=n.result));this.flag=!1},r.prototype.dropDownOpen=function(n){var r=i(this.obj.element,"e-dialog"),u;"Dialog"!==this.parent.editSettings.mode||t.isNullOrUndefined(r)||(u=t.select("#"+r.id,document).ej2_instances[0],n.popup.element.style.zIndex=(u.zIndex+1).toString())},r}(wr),hft=function(){function n(n){this.parent=n}return n.prototype.keyEventHandler=function(n){if(13===n.keyCode||9===n.keyCode){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0);this.dispatchEvent(t)}},n.prototype.create=function(n){return this.instances=new t.Internationalization(this.parent.locale),go(this.parent,n.column,"e-field",{})},n.prototype.read=function(){return this.obj.value},n.prototype.write=function(n){var r=n.column,u="Dialog"!==this.parent.editSettings.mode;this.obj=new pr.NumericTextBox(t.extend({value:parseFloat(d(n.column.field,n.rowData)),enableRtl:this.parent.enableRtl,placeholder:u?"":n.column.headerText,enabled:yr(n.column,n.requestType,n.element)&&he(i(n.element,"e-rowcell"),this.parent),floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",locale:this.parent.locale,cssClass:this.parent.cssClass?this.parent.cssClass:null},r.edit.params));n.element.setAttribute("name",vt(n.column.field));this.obj.appendTo(n.element);this.obj.element.addEventListener("keydown",this.keyEventHandler)},n.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy(),this.obj.element.remove())},n}(),ect=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cft=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return ect(r,n),r.prototype.create=function(n){var r={type:"text",value:t.isNullOrUndefined(n.value)?"":n.value},i=go(this.parent,n.column,"e-field e-input e-defaultcell",r);return n.column.textAlign&&(i.style.textAlign=n.column.textAlign),i},r.prototype.read=function(n){return"hidden"!==n.type||t.isNullOrUndefined(n.ej2_instances[0])||t.isNullOrUndefined(n.ej2_instances[0].textarea)?n.value:n.ej2_instances[0].value},r.prototype.write=function(n){var f,r=n.column,o="Dialog"!==this.parent.editSettings.mode,u={element:n.element,floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",enableRtl:this.parent.enableRtl,enabled:yr(n.column,n.requestType,n.element)&&he(i(n.element,"e-rowcell"),this.parent),placeholder:o?"":n.column.headerText,cssClass:this.parent.cssClass?this.parent.cssClass:""},e;t.isNullOrUndefined(r.edit)||t.isNullOrUndefined(r.edit.params)||!r.edit.params.multiline||(e=r.valueAccessor(r.field,n.rowData,r),u.value=e,f=u.element.getAttribute("data-mappinguid"),u.element.removeAttribute("data-mappinguid"),u.element.setAttribute("e-mappinguid",f));this.obj=new pr.TextBox(t.extend(u,r.edit.params));this.obj.appendTo(n.element);t.isNullOrUndefined(f)||(this.obj.element.removeAttribute("e-mappinguid"),this.obj.element.setAttribute("data-mappinguid",f));"Batch"===this.parent.editSettings.mode&&this.obj.element.addEventListener("keydown",this.keyEventHandler)},r.prototype.keyEventHandler=function(n){if("Enter"===n.key||"Tab"===n.key){var t=new Event("change",{bubbles:!1,cancelable:!0});this.dispatchEvent(t)}},r.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy(),this.obj.element.remove())},r}(wr),bk=function(){function n(n,t,i){this.args={};this.currentVirtualData={};this.parent=n;this.renderer=i;this.serviceLocator=t;this.addEventListener()}return n.prototype.clickHandler=function(n){var r=n.target,u=this.parent;u.editSettings.showAddNewRow&&t.isNullOrUndefined(u.element.querySelector("."+ut))||(i(r,it)&&i(i(r,it),"e-grid").id===u.element.id||u.frozenRows&&i(r,ct)&&!i(r,"e-columnheader"))&&!i(r,"e-unboundcelldiv")&&(this.rowIndex=i(r,v)?parseInt(r.parentElement.getAttribute(c),10)-1:-1,u.isEdit&&u.editModule.endEdit())},n.prototype.dblClickHandler=function(n){i(n.target,v)&&this.parent.editSettings.allowEditOnDblClick&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&!i(n.target,"e-addedrow"))&&this.parent.editModule.startEdit(i(n.target,y))},n.prototype.editComplete=function(n){this.parent.isEdit=!!this.parent.editSettings.showAddNewRow;var i="action";switch(n.requestType){case"save":(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)&&this.parent.isPersistSelection||"edit"===n[""+i]||this.parent.editSettings.showAddNewRow&&(!this.parent.editSettings.showAddNewRow||"add"===n[""+i])||(this.parent.allowPaging&&n.index>0&&(n.index=this.parent.pageSettings.currentPage===Math.floor(n.index/this.parent.pageSettings.pageSize)+1?n.index%this.parent.pageSettings.pageSize:-1),this.parent.enableVirtualization&&n.index>0&&(this.parent.selectVirtualRowOnAdd=!0),this.parent.isTreeGrid&&this.parent.enableVirtualization&&(this.parent.sortSettings&&this.parent.sortSettings.columns.length||this.parent.filterSettings&&this.parent.filterSettings.columns.length||this.parent.searchSettings&&this.parent.searchSettings.key.length)||this.parent.selectRow(n.index));this.parent.trigger(s,t.extend(n,{requestType:"save",type:s}));this.parent.notify(eo,{requestType:"save",action:n[""+i]});break;case"delete":this.parent.trigger(s,t.extend(n,{requestType:"delete",type:s}));this.parent.isCheckBoxSelection||this.parent.enableInfiniteScrolling&&(this.parent.childGrid||this.parent.detailTemplate)||this.parent.selectRow(this.editRowIndex);this.parent.notify(eo,{requestType:"delete",action:n[""+i]})}},n.prototype.getEditArgs=function(n,t,i){for(var r=this.parent.getPrimaryKeyFieldNames(),f=[],u=0;u<r.length;u++)f.push(d(r[parseInt(u.toString(),10)],n));return{primaryKey:r,primaryKeyValue:f,requestType:"beginEdit",rowData:n,rowIndex:this.rowIndex,type:"edit",cancel:!1,foreignKeyData:t&&t.foreignKeyData,target:void 0,isScroll:i}},n.prototype.startEdit=function(n){var h=this,i=this.parent,f,r,e,o,s,u;(this.rowIndex=this.editRowIndex=parseInt(n.getAttribute(c),10)-1,i.enableVirtualization||i.enableColumnVirtualization||i.enableInfiniteScrolling)&&(f='.e-row[aria-rowindex="'+(this.rowIndex+1)+'"]',!this.parent.element.querySelector(f))||(r={data:void 0,index:this.rowIndex,isScroll:!1},(this.parent.notify(ps,r),b(i))?(e=i.getRowObjectFromUID(n.getAttribute("data-uid")),this.previousData=e.data):this.parent.enableVirtualization||this.parent.enableColumnVirtualization||this.parent.enableInfiniteScrolling&&(!this.previousData||this.parent.infiniteScrollSettings.enableCache)?this.previousData=r.data:this.parent.enableVirtualization||(this.previousData=t.extend({},{},this.parent.getForeignKeyColumns().length||this.parent.allowGrouping&&this.parent.groupSettings.columns.length?this.parent.getRowObjectFromUID(n.getAttribute("data-uid")).data:i.getCurrentViewRecords()[this.rowIndex],!0)),o=t.extend({},{},r.data||this.previousData,!0),this.uid=n.getAttribute("data-uid"),s=i.getRowObjectFromUID(this.uid),u=this.getEditArgs(o,s,r.isScroll),u.row=n,u.isScroll?this.inlineEditHandler(u,n):(this.parent.notify(ih,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),i.trigger(wd,u,function(t){t.type="actionBegin";i.trigger(p,t,function(t){t.cancel||h.inlineEditHandler(t,n)})})))},n.prototype.disabledShowAddRow=function(n,r){var o=this.parent.element.querySelector(".e-addedrow"),h=[].slice.call(o?o.querySelectorAll(".e-input"):[]),e,f;if(o&&o.querySelector(".e-unboundcell"))for(e=[].slice.call(o.querySelector(".e-unboundcell").querySelectorAll(".e-btn")),f=0;f<e.length;f++)n?(e[parseInt(f.toString(),10)].classList.remove("e-disabled"),e[parseInt(f.toString(),10)].removeAttribute("disabled")):(e[parseInt(f.toString(),10)].classList.add("e-disabled"),e[parseInt(f.toString(),10)].setAttribute("disabled","disabled"));if(h.length)for(f=0;f<h.length;f++){var u=h[parseInt(f.toString(),10)],l=u.getAttribute("data-mappinguid"),s=this.parent.getColumnByUid(l),c=i(u,"e-rowcell").querySelector(".e-error");c&&c.classList.remove("e-error");u.ej2_instances?(r&&t.isNullOrUndefined(s.defaultValue)&&("checkbox"===u.type?(u.ej2_instances[0].checked=!1,u.checked=!1):(u.ej2_instances[0].value=null,u.value=null)),"checkbox"!==u.type||t.isNullOrUndefined(n)?t.isNullOrUndefined(n)||(u.ej2_instances[0].enabled=!(!n||!s.allowEditing)):u.ej2_instances[0].disabled=!n||!s.allowEditing):(r&&u.value&&u.value.length&&t.isNullOrUndefined(s.defaultValue)&&(u.value=null),t.isNullOrUndefined(n)||(n?s.allowEditing&&(u.classList.remove("e-disabled"),u.removeAttribute("disabled")):(u.classList.add("e-disabled"),u.setAttribute("disabled","disabled"))))}},n.prototype.inlineEditHandler=function(n,t){var i=this.parent;i.isEdit=!0;n.row=n.row?n.row:t;"Dialog"!==i.editSettings.mode&&i.clearSelection();"Dialog"===i.editSettings.mode&&i.selectionModule&&(i.selectionModule.preventFocus=!0,n.row.classList.add("e-dlgeditrow"));this.renderer.update(n);this.uid=t.getAttribute("data-uid");i.editModule.applyFormValidation();i.editSettings.showAddNewRow&&!t.classList.contains("e-addedrow")&&this.disabledShowAddRow(!1,!0);n.type="actionComplete";i.trigger(s,n);i.editSettings.template&&i.editModule.applyFormValidation(void 0,n.form.ej2_instances[0].rules);this.args=n;this.parent.allowTextWrap&&this.parent.notify(ru,{"case":"textwrap"})},n.prototype.updateRow=function(n,t){var e=this,i=this.parent,u,r,f;this.editRowIndex=n;u=i.getRowByIndex(n);u&&(r={requestType:"save",action:"edit",type:p,data:t,cancel:!1,previousData:i.getCurrentViewRecords()[parseInt(n.toString(),10)],row:u},(i.showSpinner(),i.enableInfiniteScrolling)&&(this.uid=r.row.getAttribute("data-uid"),f=parseInt(r.row.getAttribute("aria-rowindex"),10)-1,this.parent.notify(iv,{index:f})),i.notify(to,r),r.promise?r.promise.then(function(){return i.refresh()}).catch(function(n){return e.edFail(n)}):i.enableInfiniteScrolling||(i.refresh(),i.enableVirtualization&&(i.contentModule.vgenerator.startIndex=null)))},n.prototype.editFormValidate=function(){var n=this.parent,i=n.editModule.editFormValidate(),t={prevData:this.previousData,isValid:!0,editIdx:this.editRowIndex,addIdx:this.addedRowIndex};return n.notify(da,t),i&&t.isValid},n.prototype.endEdit=function(){var r=this,n=this.parent,e;if(this.parent.isEdit&&this.editFormValidate()){var u=t.extend({},{},this.previousData,!0),i=t.extend(this.args,{requestType:"save",type:p,data:u,cancel:!1,previousData:this.previousData,selectedRow:n.selectedRowIndex,foreignKeyData:{}}),o="Dialog"===n.editSettings.mode,s=t.select("#"+n.element.id+"_dialogEdit_wrapper",document),h=o?s.querySelector(".e-gridform"):n.editSettings.showAddNewRow&&n.element.querySelector("."+ut)?n.element.querySelector("."+ut).getElementsByClassName("e-gridform")[0]:n.element.getElementsByClassName("e-gridform")[0],f={virtualData:t.extend({},{},this.previousData,!0),isAdd:!1,isScroll:!1,endEdit:!0};if(this.parent.notify(nf,f),(this.parent.enableVirtualization||this.parent.enableColumnVirtualization||this.parent.enableInfiniteScrolling)&&"Normal"===this.parent.editSettings.mode&&Object.keys(f.virtualData).length?this.parent.isEdit&&(this.currentVirtualData=u=i.data=f.virtualData):u=n.editModule.getCurrentEditedData(h,u),e=[].slice.call(n.element.getElementsByClassName(ut)).length,f.isAdd||!Object.keys(this.currentVirtualData).length||e||(e=1),o?s.getElementsByClassName(ut).length:e)i.action="edit",n.trigger(p,i,function(t){t.cancel||("Spinner"===r.parent.loadingIndicator.indicatorType&&n.showSpinner(),"Shimmer"===r.parent.loadingIndicator.indicatorType&&r.parent.showMaskRow(),n.editSettings.showAddNewRow&&r.disabledShowAddRow(!0),n.notify(to,t))});else{if(i.action="add",i.selectedRow=0,i.index=this.addedRowIndex,n.notify(uo,{}),n.notify(ot,i),this.addedRowIndex=null,i.cancel)return;this.parent.editSettings.showAddNewRow&&(this.parent.notify(hr,{}),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.disabledShowAddRow(!0,!0))}}},n.prototype.destroyElements=function(){var n=this.parent;(!n.editSettings.showAddNewRow||n.editSettings.showAddNewRow&&n.element.querySelector(".e-editedrow"))&&(n.editModule.destroyWidgets(),n.editModule.destroyForm());this.parent.notify(cs,{})},n.prototype.editHandler=function(n){var t=this;n.promise?n.promise.then(function(i){return t.edSucc(i,n)}).catch(function(n){return t.edFail(n)}):this.editSuccess(n.data,n);this.parent.editSettings.showAddNewRow&&this.parent.editModule.applyFormValidation()},n.prototype.edSucc=function(n,t){this.editSuccess(n,t)},n.prototype.edFail=function(n){this.editFailure(n)},n.prototype.updateCurrentViewData=function(n){this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||(this.parent.getCurrentViewRecords()[this.editRowIndex]=n)},n.prototype.requestSuccess=function(n){this.parent.editModule.formObj&&!this.parent.editModule.formObj.isDestroyed&&(this.destroyElements(),this.stopEditStatus(),"Dialog"===this.parent.editSettings.mode&&"add"!==n.action&&this.parent.selectionModule&&this.parent.element.querySelector(".e-dlgeditrow").classList.remove("e-dlgeditrow"))},n.prototype.editSuccess=function(n,i){var u;if(t.isNullOrUndefined(n)||n instanceof Array||(i.data=t.extend({},t.extend({},i.rowData,i.data),n)),this.requestSuccess(i),this.parent.trigger(es,i),i.type=s,this.parent.isEdit=!!this.parent.editSettings.showAddNewRow,this.refreshRow(i.data),this.parent.notify(uo,i),this.parent.editModule.checkLastRow(i.row),this.parent.editModule.isLastRow=!1,this.updateCurrentViewData(i.data),this.blazorTemplate(),this.editRowIndex=null,this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&this.parent.groupSettings.showGroupedColumn){for(var o=i.row,f=this.parent.getRowsObject(),h=o.getAttribute("data-uid"),r=this.parent.getRowObjectFromUID(h),c=function(n){var u=l;f=f.filter(function(f){var s=f.isDataRow&&f!==r&&!t.isNullOrUndefined(f.data);if(s){for(var e=u.parent.groupSettings.columns[parseInt(n.toString(),10)].split("."),h=f.data[e[0]],c=i.data[e[0]],o=1;o<e.length;o++)h=h[e[o]],c=c[e[o]];return s&&h===c}return s})},l=this,e=0;e<this.parent.groupSettings.columns.length;e++)c(e);u=f[0];t.isNullOrUndefined(r)||t.isNullOrUndefined(u)||r.parentUid===u.parentUid?this.parent.aggregates.length&&this.parent.aggregateModule.refresh(i.data,this.parent.groupSettings.enableLazyLoading?i.row:void 0):this.parent.groupModule.groupedRowReorder(r,u)}else this.parent.aggregates.length&&this.parent.aggregateModule.refresh(i.data,this.parent.groupSettings.enableLazyLoading?i.row:void 0);this.parent.trigger(s,i);(!this.parent.isCheckBoxSelection&&"Multiple"!==this.parent.selectionSettings.type||!this.parent.isPersistSelection&&!this.parent.selectionSettings.checkboxOnly)&&"Dialog"!==this.parent.editSettings.mode&&this.parent.selectRow(this.rowIndex>-1?this.rowIndex:this.editRowIndex);this.parent.notify(eo,{requestType:i.requestType,action:i.action});this.parent.aggregates.length&&this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&(this.parent.groupModule.getGroupAggregateTemplates(!0).length||this.parent.groupModule.getGroupAggregateTemplates(!1).length)||(this.parent.removeMaskRow(),this.parent.hideSpinner())},n.prototype.closeForm=function(){!this.cloneRow&&this.parent.isEdit&&this.stopEditStatus();this.cloneRow&&(this.cloneRow.remove(),this.cloneRow=null,this.originalRow.classList.remove("e-hiddenrow"))},n.prototype.blazorTemplate=function(){var r=this.parent.getColumns(),i,n;for(this.parent.editSettings.template&&"Normal"===this.parent.editSettings.mode&&t.updateBlazorTemplate(this.parent.element.id+"editSettingsTemplate","Template",this.parent.editSettings),i=0;i<r.length;i++)n=r[parseInt(i.toString(),10)],n.template&&t.updateBlazorTemplate(this.parent.element.id+n.uid,"Template",n,!1),n.editTemplate&&t.updateBlazorTemplate(this.parent.element.id+n.uid+"editTemplate","EditTemplate",n)},n.prototype.editFailure=function(n){n.cancel||(this.parent.removeMaskRow(),this.parent.trigger(ye,{error:n}),this.parent.hideSpinner(),this.parent.log("actionfailure",{error:n}))},n.prototype.needRefresh=function(){var n=!0,t=this.parent.element.querySelector(".e-gridform");return!this.parent.enableVirtualization&&!this.parent.infiniteScrollSettings.enableCache||"Normal"!==this.parent.editSettings.mode||t||(n=!1),n},n.prototype.refreshRow=function(n){var s=new ci(this.serviceLocator,null,this.parent),r=this.parent.getRowObjectFromUID(this.uid),f,u,o;if(r)for(r.changes=n,this.parent.notify(ws,{data:n}),gh(r,this.parent.getForeignKeyColumns(),r.changes),this.needRefresh()&&s.refresh(r,this.parent.getColumns(),!0),f=[].slice.call(this.parent.element.querySelectorAll('[aria-rowindex="'+(r.index+1)+'"]')),u=0;u<f.length;u++)if(of(f[parseInt(u.toString(),10)]),this.parent.enableColumnVirtualization&&f[parseInt(u.toString(),10)].querySelectorAll(".e-leftfreeze,.e-rightfreeze,.e-fixedfreeze").length)for(var e=this.parent.getColumns(),i=[].slice.call(f[parseInt(u.toString(),10)].querySelectorAll(".e-leftfreeze,.e-rightfreeze.e-fixedfreeze")),t=0;t<i.length;t++)i[parseInt(t.toString(),10)].classList.contains("e-leftfreeze")?i[parseInt(t.toString(),10)].style.left=e[parseInt(t.toString(),10)].valueX-this.parent.translateX+"px":i[parseInt(t.toString(),10)].classList.contains("e-rightfreeze")?(o=parseInt(i[parseInt(t.toString(),10)].getAttribute("aria-colindex"),10)-1,i[parseInt(t.toString(),10)].style.right=e[parseInt(o.toString(),10)].valueX+this.parent.translateX+"px"):(i[parseInt(t.toString(),10)].style.left=this.parent.leftrightColumnWidth("left")-this.parent.translateX+"px",i[parseInt(t.toString(),10)].style.right=this.parent.leftrightColumnWidth("right")+this.parent.translateX+"px")},n.prototype.closeEdit=function(){var i=this,n,r;!this.parent.isEdit||this.parent.editSettings.showAddNewRow&&this.parent.element.querySelector(".e-addedrow")&&t.isNullOrUndefined(this.parent.element.querySelector("."+ut))?this.parent.editSettings.showAddNewRow&&(this.disabledShowAddRow(!0,!0),this.parent.notify(hr,{})):(n=this.parent,r=t.extend(this.args,{requestType:"cancel",type:p,cancel:!1,data:this.previousData,selectedRow:n.selectedRowIndex}),n.notify(sw,r),this.blazorTemplate(),n.trigger(p,r,function(t){if(!t.cancel){i.parent.notify(so,r);"Dialog"===i.parent.editSettings.mode&&i.parent.notify(cs,{});t.type=s;i.parent.editSettings.showAddNewRow||(n.isEdit=!1);"Dialog"!==n.editSettings.mode&&i.refreshRow(t.data);i.stopEditStatus();n.isEdit=!1;n.editSettings.showAddNewRow&&(i.disabledShowAddRow(!0),n.editModule.applyFormValidation(),n.isEdit=!0);var u=n.groupSettings.enableLazyLoading&&n.groupSettings.columns.length&&!n.getContentTable().querySelector("tr.e-emptyrow");n.getContentTable().querySelector("tr.e-emptyrow")||n.getContentTable().querySelector("tr.e-row")||u||n.renderModule.emptyRow();"Dialog"!==n.editSettings.mode&&n.selectRow(i.rowIndex);n.trigger(s,t)}}))},n.prototype.addRecord=function(n,i){var h=this,o=this.parent,f,s,r,e;if(this.addedRowIndex=i=t.isNullOrUndefined(i)?0:i,n)o.notify(ot,{requestType:"save",type:p,data:n,selectedRow:0,action:"add",index:i});else if(!o.isEdit){for(this.previousData={},this.uid="",f=o.getColumns(),s={virtualData:{},isScroll:!1},o.editSettings.showAddNewRow||this.parent.notify(nf,s),r=0;r<f.length;r++)s.isScroll||f[parseInt(r.toString(),10)].field&&("string"===f[parseInt(r.toString(),10)].type&&(f[parseInt(r.toString(),10)].defaultValue=this.parent.sanitize(f[parseInt(r.toString(),10)].defaultValue)),u.DataUtil.setValue(f[parseInt(r.toString(),10)].field,f[parseInt(r.toString(),10)].defaultValue,this.previousData));e={cancel:!1,foreignKeyData:{},requestType:"add",data:this.previousData,type:p,index:i,rowData:this.previousData,target:void 0,isScroll:s.isScroll};(this.parent.enableVirtualization||this.parent.enableColumnVirtualization||this.parent.infiniteScrollSettings.enableCache)&&Object.keys(s.virtualData).length&&(e.data=e.rowData=s.virtualData);e.isScroll?this.inlineAddHandler(e):(this.parent.notify(ih,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),o.editSettings.showAddNewRow?this.inlineAddHandler(e):o.trigger(p,e,function(n){n.cancel||h.inlineAddHandler(n)}))}},n.prototype.inlineAddHandler=function(n){var t=this.parent;t.isEdit=!0;"Dialog"!==t.editSettings.mode&&t.clearSelection();this.renderer.addNew(n);t.editModule.applyFormValidation();n.type=s;n.row=t.element.querySelector("."+ii);t.editSettings.showAddNewRow||t.trigger(s,n);t.editSettings.template&&t.editModule.applyFormValidation(void 0,n.form.ej2_instances[0].rules);this.args=n},n.prototype.deleteRecord=function(n,i){var f,e,o,r,u;if(this.editRowIndex=this.parent.selectedRowIndex,i)for(i=i instanceof Array?i:[i],f=this.parent,e=Object.keys(i).length,n=n||this.parent.getPrimaryKeyFieldNames()[0],o=function(t){var r,u,e=f.currentViewData.some(function(r){return u=r,i[parseInt(t.toString(),10)]===d(n,r)||i[parseInt(t.toString(),10)]===r});i[parseInt(t.toString(),10)]=e?u:i[parseInt(t.toString(),10)][""+n]?i[parseInt(t.toString(),10)]:((r={})[n]=i[parseInt(t.toString(),10)],r)},r=0;r<e;r++)o(r);u={requestType:"delete",type:p,foreignKeyData:{},data:i||this.parent.getSelectedRecords(),tr:this.parent.getSelectedRows(),cancel:!1};t.isNullOrUndefined(this.parent.commandDelIndex)||(u.data[0]=this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute("data-uid")).data);this.parent.notify(ot,u)},n.prototype.stopEditStatus=function(){for(var i=this.parent,r=[].slice.call(i.editSettings.showAddNewRow?[]:i.element.getElementsByClassName(ii)),u=[].slice.call(i.element.getElementsByClassName(ut)),n=0;n<r.length;n++)t.remove(r[parseInt(n.toString(),10)]);for(n=0;n<u.length;n++)u[parseInt(n.toString(),10)].classList.remove(ut)},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:yp,handler:this.editHandler},{event:vl,handler:this.dblClickHandler},{event:kt,handler:this.clickHandler},{event:bl,handler:this.requestSuccess},{event:no,handler:this.dblClickHandler},{event:vp,handler:this.editComplete},{event:ap,handler:this.editComplete},{event:wa,handler:this.closeEdit},{event:ytt,handler:this.closeForm}],yt(this.parent,this.evtHandlers,!0,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||yt(this.parent,this.evtHandlers,!1)},n.prototype.destroy=function(){this.removeEventListener();this.renderer.destroy()},n}(),oct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kk=function(n){function t(t,i,r){var u=n.call(this,t,i)||this;return u.parent=t,u.serviceLocator=i,u.renderer=r,u}return oct(t,n),t.prototype.closeEdit=function(){n.prototype.closeEdit.call(this)},t.prototype.addRecord=function(t,i){n.prototype.addRecord.call(this,t,i)},t.prototype.endEdit=function(){n.prototype.endEdit.call(this)},t.prototype.updateRow=function(t,i){n.prototype.updateRow.call(this,t,i)},t.prototype.deleteRecord=function(t,i){n.prototype.deleteRecord.call(this,t,i)},t.prototype.startEdit=function(t){n.prototype.startEdit.call(this,t)},t}(bk),lft=function(){function n(n,t,i){this.cellDetails={};this.originalCell={};this.cloneCell={};this.editNext=!1;this.preventSaveCell=!1;this.initialRender=!0;this.validationColObj=[];this.addBatchRow=!1;this.prevEditedBatchCell=!1;this.parent=n;this.serviceLocator=t;this.renderer=i;this.focus=t.getService("focus");this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:kt,handler:this.clickHandler},{event:no,handler:this.dblClickHandler},{event:pf,handler:this.onBeforeCellFocused},{event:ss,handler:this.onCellFocused},{event:vl,handler:this.dblClickHandler},{event:rt,handler:this.keyDownHandler},{event:ys,handler:this.editNextValCell},{event:l,handler:this.destroy}],yt(this.parent,this.evtHandlers,!0,this),t.EventHandler.add(this.parent.element,"mousedown",this.mouseDownHandler,this),this.dataBoundFunction=this.dataBound.bind(this),this.batchCancelFunction=this.batchCancel.bind(this),this.parent.addEventListener(ti,this.dataBoundFunction),this.parent.addEventListener(yf,this.batchCancelFunction))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(yt(this.parent,this.evtHandlers,!1),t.EventHandler.remove(this.parent.element,"mousedown",this.mouseDownHandler),this.parent.removeEventListener(ti,this.dataBoundFunction),this.parent.removeEventListener(yf,this.batchCancelFunction))},n.prototype.batchCancel=function(){this.parent.focusModule.restoreFocus({requestType:"batchCancel"})},n.prototype.dataBound=function(){this.parent.notify(kr,{})},n.prototype.destroy=function(){this.removeEventListener()},n.prototype.mouseDownHandler=function(n){this.mouseDownElement=t.isNullOrUndefined(this.parent.element.querySelector(".e-gridform"))?void 0:n.target},n.prototype.clickHandler=function(n){i(n.target,this.parent.element.id+"_add",!0)||((this.parent.isEdit&&t.closest(this.form,"td")!==t.closest(n.target,"td")&&t.isNullOrUndefined(this.mouseDownElement)||this.mouseDownElement===n.target)&&(this.saveCell(),this.editNextValCell()),i(n.target,v)&&!this.parent.isEdit&&this.setCellIdx(n.target))},n.prototype.dblClickHandler=function(n){var r=i(n.target,v),e=i(n.target,y),u=e&&parseInt(e.getAttribute(c),10)-1,f=r&&parseInt(r.getAttribute(ft),10)-1;t.isNullOrUndefined(r)||t.isNullOrUndefined(u)||isNaN(f)||r.parentElement.classList.contains(ut)||!this.parent.getColumns()[parseInt(f.toString(),10)].allowEditing||this.editCell(u,this.parent.getColumns()[parseInt(f.toString(),10)].field,this.isAddRow(u))},n.prototype.onBeforeCellFocused=function(n){this.parent.isEdit&&this.validateFormObj()&&(n.byClick||["tab","shiftTab","enter","shiftEnter"].indexOf(n.keyArgs.action)>-1)&&(n.cancel=!0,n.byClick?n.clickArgs.preventDefault():n.keyArgs.preventDefault())},n.prototype.onCellFocused=function(n){var o=!(n.container.isContent&&n.container.isDataCell||this.parent.frozenRows&&n.container.isHeader),u,c,f,e;if(this.parent.focusModule.active&&(this.prevEditedBatchCell=this.parent.focusModule.active.matrix.current.toString()===this.prevEditedBatchCellMatrix().toString(),this.crtRowIndex=[].slice.call(this.parent.focusModule.active.getTable().rows).indexOf(t.closest(n.element,"tr"))),n.byKey&&!o){var s=n.container.indexes,r=s[0],i=s[1],h=n.element.getAttribute("aria-colindex")?parseInt(n.element.getAttribute("aria-colindex"),10)-1:i;if(h!==i&&(i=h),this.parent.frozenRows&&n.container.isContent&&(r+=(this.parent.getContent().querySelector(".e-hiddenrow")?0:this.parent.frozenRows)+this.parent.getHeaderContent().querySelectorAll(".e-insertedrow").length),u=this.parent.isEdit,!this.parent.element.getElementsByClassName("e-popup-open").length)switch(u=u&&!this.validateFormObj(),n.keyArgs.action){case"tab":case"shiftTab":c=this.parent.isRowDragable()&&this.parent.isDetail()?2:this.parent.isRowDragable()||this.parent.isDetail()?1:0;f=this.parent.getColumns()[i-c];f&&!this.parent.isEdit&&this.editCell(r,f.field);(u||this.parent.isLastCellPrimaryKey)&&this.editCellFromIndex(r,i);break;case"enter":case"shiftEnter":n.keyArgs.preventDefault();e={cancel:!1,keyArgs:n.keyArgs};this.parent.notify("beforeFocusCellEdit",e);!e.cancel&&u&&this.editCell(r,this.cellDetails.column.field);break;case"f2":this.editCellFromIndex(r,i);this.focus.focus()}}else this.parent.isEdit&&o&&this.saveCell()},n.prototype.isAddRow=function(n){return this.parent.getDataRows()[parseInt(n.toString(),10)].classList.contains("e-insertedrow")},n.prototype.editCellFromIndex=function(n,t){this.cellDetails.rowIndex=n;this.cellDetails.cellIndex=t;this.editCell(n,this.parent.getColumns()[parseInt(t.toString(),10)].field,this.isAddRow(n))},n.prototype.closeEdit=function(){var n=this.parent,i=this.parent.getRowsObject(),f={cancel:!1,batchChanges:this.getBatchChanges()},r,t,e,o,u;if(n.notify(yn,f),!f.cancel){for(n.isEdit&&this.saveCell(!0),this.isAdded=!1,r=[],n.selectionModule&&(r=n.selectionModule.selectedRowIndexes),n.clearSelection(),t=0;t<i.length;t++)o=i[parseInt(t.toString(),10)].isDirty,(e=this.removeBatchElementChanges(i[parseInt(t.toString(),10)],o))&&i.splice(t,1),e&&t--;n.getContentTable().querySelector("tr.e-row")||n.renderModule.renderEmptyRow();u=this.parent.getRowsObject();n.notify(yf,{rows:this.parent.getRowsObject().length?this.parent.getRowsObject():[new cr({isDataRow:!0,cells:[new bi({isDataCell:!0,visible:!0})]})]});n.isCheckBoxSelection&&(n.selectionSettings.checkboxOnly||n.selectionSettings.persistSelection)?n.selectRows(r):n.selectRow(this.cellDetails.rowIndex);this.refreshRowIdx();n.notify(kr,{});this.parent.notify(gu,{});u={requestType:"batchCancel",rows:this.parent.getRowsObject()};n.trigger(yf,u)}},n.prototype.removeBatchElementChanges=function(n,i){var f=this.parent,o=new ci(this.serviceLocator,null,this.parent),e=!1,r,u;return i&&(n.isDirty=i,r=f.getRowElementByUID(n.uid),r&&(r.classList.contains("e-insertedrow")?(t.remove(r),e=!0):(gh(n,this.parent.getForeignKeyColumns(),n.data),delete n.changes,delete n.edit,n.isDirty=!1,t.classList(r,[],["e-hiddenrow","e-updatedtd"]),o.refresh(n,f.getColumns(),!1)),this.parent.aggregates.length>0)&&(u=[],u.type="cancel",this.parent.notify(sr,u),this.parent.groupSettings.columns.length>0&&this.parent.notify(iu,u))),e},n.prototype.deleteRecord=function(n,t){this.saveCell();this.validateFormObj()&&this.saveCell(!0);this.isAdded=!1;this.bulkDelete(n,t);this.parent.aggregates.length>0&&(this.parent.isReact||this.parent.isVue||this.parent.notify(sr,{}),this.parent.groupSettings.columns.length>0&&this.parent.notify(iu,{}),(this.parent.isReact||this.parent.isVue)&&this.parent.notify(sr,{}))},n.prototype.addRecord=function(n){this.bulkAddRow(n)},n.prototype.endEdit=function(){this.parent.isEdit&&this.validateFormObj()||this.batchSave()},n.prototype.validateFormObj=function(){return this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate()},n.prototype.batchSave=function(){var n=this.parent,u="deletedRecords",r,i,f,e;n.isCheckBoxSelection&&(r=n.element.querySelector(".e-checkselectall").parentElement,r.classList.contains("e-checkbox-disabled")&&n.pageSettings.totalRecordsCount>n.currentViewData.length&&t.removeClass([r],["e-checkbox-disabled"]));(this.saveCell(),n.isEdit||this.editNextValCell()||n.isEdit)||(i=this.getBatchChanges(),"Multiple"===this.parent.selectionSettings.type&&i[""+u].length&&this.parent.selectionSettings.persistSelection&&(i[""+u]=this.removeSelectedData,this.removeSelectedData=[]),f={changedRecords:this.parent.getRowsObject().filter(function(n){return n.isDirty&&-1===["add","delete"].indexOf(n.edit)}).map(function(n){return n.data})},e={batchChanges:i,cancel:!1},n.trigger(pd,e,function(t){t.cancel||(n.showSpinner(),n.notify(lp,{changes:i,original:f}))}))},n.prototype.getBatchChanges=function(){for(var n,t={addedRecords:[],deletedRecords:[],changedRecords:[]},i=0,r=this.parent.getRowsObject();i<r.length;i++)if(n=r[i],n.isDirty)switch(n.edit){case"add":t.addedRecords.push(n.changes);break;case"delete":t.deletedRecords.push(n.data);break;default:t.changedRecords.push(n.changes)}return t},n.prototype.removeRowObjectFromUID=function(n){for(var i=this.parent.getRowsObject(),t=0,r=i.length;t<r&&i[parseInt(t.toString(),10)].uid!==n;t++);i.splice(t,1)},n.prototype.addRowObject=function(n){var t=this.parent,r="Top"===t.editSettings.newRowPosition,i=n.clone();r?t.getRowsObject().unshift(i):t.getRowsObject().push(i)},n.prototype.bulkDelete=function(n,i){var f=this;this.removeSelectedData=[];var r=this.parent,e=r.selectedRowIndex,u=r.getSelectedRows(),o={primaryKey:this.parent.getPrimaryKeyFieldNames(),rowIndex:e,rowData:i||r.getSelectedRecords(),cancel:!1};o.row=i?r.editModule.deleteRowUid?r.getRowElementByUID(r.editModule.deleteRowUid):r.getRows()[r.getCurrentViewRecords().indexOf(i)]:u;o.row&&r.trigger(yd,o,function(n){var s,l,o,a,v;if(!n.cancel){if(f.removeSelectedData=r.getSelectedRecords(),r.clearSelection(),n.row=n.row?n.row:i?r.getRows()[parseInt(e.toString(),10)]:u,1===u.length||i)Array.isArray(n.row)&&(n.row=n.row[0]),s=n.row.getAttribute("data-uid"),(s=i&&f.parent.editModule.deleteRowUid?s=f.parent.editModule.deleteRowUid:s,n.row.classList.contains("e-insertedrow"))?(f.removeRowObjectFromUID(s),t.remove(n.row)):(l=r.getRowObjectFromUID(s),l.isDirty=!0,l.edit="delete",t.classList(n.row,["e-hiddenrow","e-updatedtd"],[]),r.frozenRows&&e<r.frozenRows&&r.getDataRows().length>=r.frozenRows&&r.getHeaderTable().querySelector(h).appendChild(r.getRowByIndex(r.frozenRows-1))),delete n.row;else{for(i&&(e=parseInt(n.row.getAttribute(c),10)-1),o=0;o<u.length;o++)a=u[parseInt(o.toString(),10)].getAttribute("data-uid"),u[parseInt(o.toString(),10)].classList.contains("e-insertedrow")?(f.removeRowObjectFromUID(a),t.remove(u[parseInt(o.toString(),10)])):(t.classList(u[parseInt(o.toString(),10)],["e-hiddenrow","e-updatedtd"],[]),v=r.getRowObjectFromUID(a),v.isDirty=!0,v.edit="delete",r.frozenRows&&e<r.frozenRows&&r.getDataRows().length>=r.frozenRows&&r.getHeaderTable().querySelector(h).appendChild(r.getRowByIndex(r.frozenRows-1)));delete n.row}f.refreshRowIdx();i&&(r.editModule.deleteRowUid=void 0);r.isCheckBoxSelection||r.selectRow(e);r.trigger(nl,n);r.notify(nl,{rows:f.parent.getRowsObject()});r.focusModule.restoreFocus({requestType:"batchDelete"});r.notify(kr,{});r.getContentTable().querySelector("tr.e-row")||r.renderModule.renderEmptyRow()}})},n.prototype.refreshRowIdx=function(){for(var r=this.parent,t=r.getAllDataRows(!0),u=r.getRowsObject().filter(function(n){return!n.isDetailRow}),n=0,i=0,f=t.length;n<f;n++)t[parseInt(n.toString(),10)].classList.contains(y)&&!t[parseInt(n.toString(),10)].classList.contains("e-hiddenrow")?(t[parseInt(n.toString(),10)].setAttribute(c,(i+1).toString()),u[parseInt(n.toString(),10)].index=i,i++):(t[parseInt(n.toString(),10)].removeAttribute(c),u[parseInt(n.toString(),10)].index=-1)},n.prototype.bulkAddRow=function(n){var r=this,i=this.parent,f,u,o,s;if(i.editSettings.allowAdding){if(i.isEdit&&(this.saveCell(),this.parent.notify(ys,{})),!this.validateFormObj()){if(this.initialRender){for(f=i.getVisibleColumns(),u=0;u<f.length;u++)f[parseInt(u.toString(),10)].validationRules&&f[parseInt(u.toString(),10)].validationRules.required&&(o={field:f[parseInt(u.toString(),10)].field.slice(),cellIdx:u},this.validationColObj.push(o));this.initialRender=!1}this.parent.element.classList.add("e-editing");s={defaultData:n||this.getDefaultData(),primaryKey:i.getPrimaryKeyFieldNames(),cancel:!1};i.trigger(vd,s,function(u){var a,s,y,w,p,b;if(!u.cancel){r.isAdded=!0;i.clearSelection();var l,c,k=new ci(r.serviceLocator,null,r.parent),o=new eu(r.parent).generateRows([u.defaultData]),f=k.render(o[0],i.getColumns());for(of(f),a=0;a<r.parent.groupSettings.columns.length;a++)f.insertBefore(r.parent.createElement("td",{className:"e-indentcell"}),f.firstChild),o[0].cells.unshift(new bi({cellType:e.Indent}));s=i.getContentTable().querySelector(h);(f.classList.add("e-insertedrow"),s.querySelector(".e-emptyrow"))&&(y=s.querySelector(".e-emptyrow"),y.parentNode.removeChild(y),i.frozenRows&&i.element.querySelector(".e-frozenrow-empty")&&i.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty"));s=i.frozenRows&&"Top"===i.editSettings.newRowPosition?i.getHeaderTable().querySelector(h):i.getContentTable().querySelector(h);"Top"===r.parent.editSettings.newRowPosition?s.insertBefore(f,s.firstChild):s.appendChild(f);t.addClass([].slice.call(f.getElementsByClassName(v)),["e-updatedtd"]);o[0].isDirty=!0;o[0].changes=t.extend({},{},o[0].data,!0);o[0].edit="add";r.addRowObject(o[0]);r.refreshRowIdx();r.focus.forgetPrevious();i.notify(gc,{rows:r.parent.getRowsObject()});w=r.getBatchChanges();p=r.getBottomIndex();"Top"===r.parent.editSettings.newRowPosition?i.selectRow(0):i.selectRow(p);n||(c=r.findNextEditableCell(0,!0),l=i.getColumns()[parseInt(c.toString(),10)],"Top"===r.parent.editSettings.newRowPosition?r.editCell(0,l.field,!0):r.editCell(p,l.field,!0));r.parent.aggregates.length>0&&(n||w[lr].length)&&r.parent.notify(sr,{});b={defaultData:u.defaultData,row:f,columnObject:l,columnIndex:c,primaryKey:u.primaryKey,cell:t.isNullOrUndefined(c)?void 0:f.cells[parseInt(c.toString(),10)]};i.trigger(gc,b)}})}}else i.isEdit&&this.saveCell()},n.prototype.findNextEditableCell=function(n,i,r){for(var e,f=this.parent.getColumns(),o=f.length,u=n;u<o;u++)if(e=!!r&&t.isNullOrUndefined(f[parseInt(u.toString(),10)].validationRules),i&&(!f[parseInt(u.toString(),10)].template||f[parseInt(u.toString(),10)].field)&&f[parseInt(u.toString(),10)].allowEditing&&f[parseInt(u.toString(),10)].visible&&(!f[parseInt(u.toString(),10)].isIdentity||!f[parseInt(u.toString(),10)].isPrimaryKey)&&!e)return u;return-1},n.prototype.getDefaultData=function(){for(var n,r={},f={number:0,string:null,boolean:!1,date:null,datetime:null,dateonly:null},i=0,u=this.parent.columnModel;i<u.length;i++)n=u[i],n.field&&t.setValue(n.field,Object.keys(n).indexOf("defaultValue")>=0?n.defaultValue:f[n.type],r);return r},n.prototype.setCellIdx=function(n){var t=0;this.parent.allowGrouping&&(t=this.parent.groupSettings.columns.length);this.cellDetails.cellIndex=n.cellIndex-t;this.cellDetails.rowIndex=parseInt(n.getAttribute("data-index"),10)},n.prototype.editCell=function(n,t,i){var r=this.parent,e=r.getColumnByField(t),u,o,f;this.index=n;this.field=t;this.isAdd=i;u=r.getDataRows();u=u.filter(function(n){return"none"!==n.style.display&&!n.classList.contains("e-childrow-hidden")});o=parseInt(u[u.length-1].getAttribute("aria-rowindex"),10)-1;f=r.isEdit&&!(this.cellDetails.column.field===t&&this.cellDetails.rowIndex===n&&o!==n&&this.prevEditedBatchCell);r.editSettings.allowEditing&&(!f&&(e.allowEditing||!e.allowEditing&&r.focusModule.active&&r.focusModule.active.getTable().rows[this.crtRowIndex]&&r.focusModule.active.getTable().rows[this.crtRowIndex].classList.contains("e-insertedrow"))?this.editCellExtend(n,t,i):f&&(this.editNext=!0,this.saveCell()))},n.prototype.editCellExtend=function(n,i,r){var e=this,f=this.parent,u=f.getColumnByField(i),l=f.getPrimaryKeyFieldNames(),s,o;if(!f.isEdit)if(s=t.extend({},{},this.getDataByIndex(n),!0),o=f.getDataRows()[parseInt(n.toString(),10)],s=t.extend({},{},this.getDataByIndex(n),!0),l[0]===u.field&&!o.classList.contains("e-insertedrow")||u.columns||u.isPrimaryKey&&u.isIdentity||u.commands)this.parent.isLastCellPrimaryKey=!0;else{this.parent.isLastCellPrimaryKey=!1;this.parent.element.classList.add("e-editing");var a=f.getRowObjectFromUID(o.getAttribute("data-uid")),c=[].slice.apply(o.cells),h={columnName:u.field,isForeignKey:!t.isNullOrUndefined(u.foreignKeyValue),primaryKey:l,rowData:s,validationRules:t.extend({},u.validationRules?u.validationRules:{}),value:d(u.field,s),type:r?"add":"edit",cancel:!1,foreignKeyData:a&&a.foreignKeyData};h.cell=c[this.getColIndex(c,this.getCellIdx(u.uid))];h.row=o;h.columnObject=u;h.cell&&f.trigger(bd,h,function(i){if(!i.cancel){i.cell=i.cell?i.cell:c[e.getColIndex(c,e.getCellIdx(u.uid))];i.row=i.row?i.row:o;i.columnObject=i.columnObject?i.columnObject:u;e.cellDetails={rowData:s,column:u,value:i.value,isForeignKey:i.isForeignKey,rowIndex:n,cellIndex:parseInt(i.cell.getAttribute(ft),10)-1,foreignKeyData:i.foreignKeyData};i.cell.classList.contains("e-updatedtd")&&(e.isColored=!0,i.cell.classList.remove("e-updatedtd"));f.isEdit=!0;var r=!t.isNullOrUndefined(i.row.querySelector(".e-selectionbackground"));f.clearSelection();f.isCheckBoxSelection&&f.isPersistSelection||!r&&f.selectionSettings.checkboxOnly||f.selectRow(e.cellDetails.rowIndex,!0);e.renderer.update(i);e.parent.notify(pn,i);e.form=t.select("#"+f.element.id+"EditForm",f.element);f.editModule.applyFormValidation([u]);e.parent.element.querySelector(".e-gridpopup").style.display="none"}})}},n.prototype.updateCell=function(n,t,i){var f=this.parent,u=f.getColumnByField(t),h=f.getColumnIndexByField(t),l=f.getRowByIndex(n).classList.contains("e-insertedrow")&&f.getRowByIndex(n).classList.contains("e-batchrow"),e,r,o,s,c;if(u&&(!u.isPrimaryKey||l)&&u.allowEditing){if(e=this.parent.isSpan?hy(f,n,h):rk(this.parent,0,n,h),this.parent.isSpan&&!e)return;r=f.getRowObjectFromUID(e.parentElement.getAttribute("data-uid"));(f.isEdit||!r.changes&&(!(i instanceof Date)&&r.data[""+t]!==i||i instanceof Date&&new Date(r.data[""+t]).toString()!==new Date(i).toString())||r.changes&&(!(i instanceof Date)&&r.changes[""+t]!==i||i instanceof Date&&new Date(r.changes[""+t]).toString()!==new Date(i).toString()))&&(this.refreshTD(e,u,r,i),o=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,(this.parent.isReact&&this.parent.requireTemplateRef||o&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&u.template?(s=this,c=this.newReactTd,s.parent.renderTemplates(function(){s.parent.trigger(cf,{cell:c||e,column:u,data:r.changes})})):(this.parent.isReact||o)&&u.template?(this.parent.renderTemplates(),this.parent.trigger(cf,{cell:this.newReactTd||e,column:u,data:r.changes})):this.parent.trigger(cf,{cell:this.newReactTd||e,column:u,data:r.changes}))}},n.prototype.setChanges=function(n,i,r){if(n.changes||(n.changes=t.extend({},{},n.data,!0)),t.isNullOrUndefined(i)||("string"==typeof r&&(r=this.parent.sanitize(r)),u.DataUtil.setValue(i,r,n.changes)),n.data[""+i]!==r){var f=this.parent.getColumnByField(i).type;"date"===f||"datetime"===f?new Date(n.data[""+i]).toString()!==new Date(r).toString()&&(n.isDirty=!0):n.isDirty=!0}},n.prototype.updateRow=function(n,t){for(var u,i=0,r=Object.keys(t);i<r.length;i++)u=r[i],this.updateCell(n,u,t[""+u])},n.prototype.getCellIdx=function(n){var i=this.parent.getColumnIndexByUid(n)+this.parent.groupSettings.columns.length;return t.isNullOrUndefined(this.parent.detailTemplate)&&t.isNullOrUndefined(this.parent.childGrid)||i++,this.parent.isRowDragable()&&i++,i},n.prototype.refreshTD=function(n,i,r,u){var s=new fi(this.parent,this.serviceLocator),f,e,o;u="number"!==i.type||t.isNullOrUndefined(u)?u:parseFloat(u);r&&(this.setChanges(r,i.field,u),gh(r,this.parent.getForeignKeyColumns(),r.changes));o=r?r.cells:void 0;this.parent.isReact&&(f=n.parentElement,e=n.cellIndex);r&&s.refreshTD(n,o[this.getCellIdx(i.uid)-0],r.changes,{index:this.getCellIdx(i.uid)});this.parent.isReact?(this.newReactTd=f.cells[parseInt(e.toString(),10)],f.cells[parseInt(e.toString(),10)].classList.add("e-updatedtd")):n.classList.add("e-updatedtd");n.classList.add("e-updatedtd");this.parent.notify(kr,{})},n.prototype.getColIndex=function(n,i){var u=0,r;for(this.parent.allowGrouping&&this.parent.groupSettings.columns&&(u=this.parent.groupSettings.columns.length),t.isNullOrUndefined(this.parent.detailTemplate)&&t.isNullOrUndefined(this.parent.childGrid)||u++,this.parent.isRowDragable()&&u++,r=0;r<n.length;r++)if(parseInt(n[parseInt(r.toString(),10)].getAttribute(ft),10)-1==i-u)return r;return-1},n.prototype.editNextValCell=function(){var n=this.parent,u=n.element.querySelectorAll(".e-insertedrow"),e=1===u.length,o,t,s,i,f,r;if(e&&this.isAdded&&!n.isEdit){for(o=this.getBottomIndex(),t=this.cellDetails.cellIndex;t<n.getColumns().length;t++){if(n.isEdit)return;s=this.findNextEditableCell(this.cellDetails.cellIndex+1,!0,!0);i=n.getColumns()[parseInt(s.toString(),10)];i&&("Bottom"===this.parent.editSettings.newRowPosition?this.editCell(o,i.field,!0):(f={index:0,column:i},this.parent.notify(att,f),this.editCell(f.index,i.field,!0)),this.saveCell())}n.isEdit||(this.isAdded=!1)}else if(!e&&this.isAdded&&!n.isEdit){for(t=0;t<u.length&&!n.isEdit;t++)for(r=0;r<this.validationColObj.length&&!n.isEdit;r++)""===u[parseInt(t.toString(),10)].querySelectorAll("td:not(.e-hide, .e-rowdragdrop, .e-detailrowcollapse, .e-detailrowexpand, .e-indentcell)")[this.validationColObj[parseInt(r.toString(),10)].cellIdx].innerHTML&&(this.editCell(parseInt(u[parseInt(t.toString(),10)].getAttribute("aria-rowindex"),10)-1,this.validationColObj[parseInt(r.toString(),10)].field),this.validateFormObj()&&this.saveCell());n.isEdit||(this.isAdded=!1)}},n.prototype.escapeCellEdit=function(){var n=this.generateCellArgs();n.value=n.previousValue;!n.value&&this.cellDetails.column.validationRules||this.successCallBack(n,n.cell.parentElement,n.column,!0)(n)},n.prototype.generateCellArgs=function(){var o=this.parent,n,u,i,e,f,r;return this.parent.element.classList.remove("e-editing"),n=this.cellDetails.column,u={},u[n.field]=d(n.field,this.cellDetails.rowData),i=o.editModule.getCurrentEditedData(this.form,u),e=t.extend({},i),i=t.extend({},i,this.cellDetails.rowData),f=d(n.field,e),t.isNullOrUndefined(n.field)||t.isUndefined(f)||t.setValue(n.field,f,i),r={columnName:n.field,value:d(n.field,i),rowData:this.cellDetails.rowData,column:n,previousValue:this.cellDetails.value,isForeignKey:this.cellDetails.isForeignKey,cancel:!1},r.cell=this.form.parentElement,r.columnObject=n,r},n.prototype.saveCell=function(n){var i;if(!this.preventSaveCell&&this.form&&(i=this.parent,n||i.isEdit&&!this.validateFormObj())){this.preventSaveCell=!0;var t=this.generateCellArgs(),r=t.cell.parentElement,u=t.column;t.cell.removeAttribute("aria-label");n?this.successCallBack(t,r,u)(t):(i.trigger(kd,t,this.successCallBack(t,r,u)),i.notify(an,{formObj:this.form}))}},n.prototype.successCallBack=function(n,i,r,u){var f=this;return function(n){var e=f.parent,s,h,c,o;if(n.cell=n.cell?n.cell:f.form.parentElement,n.columnObject=n.columnObject?n.columnObject:r,n.cancel){if(f.preventSaveCell=!1,f.editNext){if(f.editNext=!1,f.cellDetails.rowIndex===f.index&&f.cellDetails.column.field===f.field)return;f.editCellExtend(f.index,f.field,f.isAdd)}}else{if(e.editModule.destroyWidgets([r]),e.isEdit=!1,e.editModule.destroyForm(),f.parent.notify(gu,{}),s=e.getRowObjectFromUID(i.getAttribute("data-uid")),(f.refreshTD(n.cell,r,s,n.value),f.parent.isReact&&(n.cell=f.newReactTd),t.removeClass([i],[ut,"e-batchrow"]),t.removeClass([n.cell],["e-editedbatchcell","e-boolcell"]),(!t.isNullOrUndefined(n.value)&&n.value.toString()===(t.isNullOrUndefined(f.cellDetails.value)?"":f.cellDetails.value).toString()&&!f.isColored||t.isNullOrUndefined(n.value)&&t.isNullOrUndefined(s.data[r.field])&&t.isNullOrUndefined(f.cellDetails.value)&&!n.cell.parentElement.classList.contains("e-insertedrow"))&&n.cell.classList.remove("e-updatedtd"),t.isNullOrUndefined(u))&&(h=e.isReact&&r.template&&"string"!=typeof r.template,c=e.parentDetails&&e.parentDetails.parentInstObj&&e.parentDetails.parentInstObj.isReact,h||c?e.requireTemplateRef?e.renderTemplates(function(){e.trigger(tl,n)}):(e.renderTemplates(),e.trigger(tl,n)):e.trigger(tl,n)),e.notify(kr,{}),f.isColored=!1,f.parent.aggregates.length>0&&(f.parent.isReact||f.parent.isVue||f.parent.notify(sr,{}),f.parent.groupSettings.columns.length>0&&!f.isAddRow(f.cellDetails.rowIndex)&&f.parent.notify(iu,{}),(f.parent.isReact||f.parent.isVue)&&f.parent.notify(sr,{})),f.preventSaveCell=!1,f.editNext){if(f.editNext=!1,f.cellDetails.rowIndex===f.index&&f.cellDetails.column.field===f.field&&f.prevEditedBatchCell)return;o=e.getColumnByField(f.field);o&&(o.allowEditing||!o.allowEditing&&e.focusModule.active&&e.focusModule.active.getTable().rows[f.crtRowIndex]&&e.focusModule.active.getTable().rows[f.crtRowIndex].classList.contains("e-insertedrow"))&&f.editCellExtend(f.index,f.field,f.isAdd)}u&&e.notify(uu,{})}}},n.prototype.prevEditedBatchCellMatrix=function(){var i=[],n=this.parent.focusModule.active.getTable().querySelector(".e-editedbatchcell"),t;return n&&(t=n.parentElement,i=[[].slice.call(this.parent.focusModule.active.getTable().rows).indexOf(t),[].slice.call(t.cells).indexOf(n)]),i},n.prototype.getDataByIndex=function(n){var t=this.parent.getRowObjectFromUID(this.parent.getDataRows()[parseInt(n.toString(),10)].getAttribute("data-uid"));return t.changes?t.changes:t.data},n.prototype.keyDownHandler=function(n){var t,f,e;if(this.addBatchRow||("tab"===n.action||"shiftTab"===n.action)&&this.parent.isEdit){var r=this.parent,o=this.getBottomIndex(),u=i(n.target,v);(this.addBatchRow||u&&!this.parent.isReact)&&(t=void 0,(u&&(t=u.querySelector(".e-field")),this.addBatchRow||t)&&(f=this.parent.getVisibleColumns(),e="tab"===n.action?f.length-1:0,(this.addBatchRow||f[parseInt(e.toString(),10)].field===t.getAttribute("id").slice(this.parent.element.id.length))&&(this.cellDetails.rowIndex===o&&"tab"===n.action?("Top"===r.editSettings.newRowPosition?(r.editSettings.newRowPosition="Bottom",this.addRecord(),r.editSettings.newRowPosition="Top"):this.addRecord(),this.addBatchRow=!1):this.saveCell())))}},n.prototype.addCancelWhilePaging=function(){this.validateFormObj()&&(this.parent.notify(al,{}),this.parent.isEdit=!1,this.editNext=!1,this.mouseDownElement=void 0,this.isColored=!1)},n.prototype.getBottomIndex=function(){var n=this.getBatchChanges();return this.parent.getCurrentViewRecords().length+n[lr].length-n[ne].length-1},n}(),sct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),aft=function(n){function t(t,i,r){var u=n.call(this,t,i)||this;return u.parent=t,u.serviceLocator=i,u.renderer=r,u}return sct(t,n),t.prototype.closeEdit=function(){n.prototype.closeEdit.call(this)},t.prototype.addRecord=function(t,i){n.prototype.addRecord.call(this,t,i)},t.prototype.endEdit=function(){n.prototype.endEdit.call(this)},t.prototype.updateRow=function(t,i){n.prototype.updateRow.call(this,t,i)},t.prototype.deleteRecord=function(t,i){n.prototype.deleteRecord.call(this,t,i)},t.prototype.startEdit=function(t){n.prototype.startEdit.call(this,t)},t}(bk),hct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dk=function(n){function i(t){var i=n.call(this,t)||this;return i.isMaskModuleInjected=!0,i}return hct(i,n),i.prototype.write=function(n){this.edit=this.parent.editModule;"datepickeredit"===n.column.editType&&(this.obj=new pu.DatePicker(t.extend(vft(n,this.parent.editSettings.mode,this.parent.enableRtl,this.parent.cssClass,this),n.column.edit.params)),this.isMaskModuleInjected&&(pu.DatePicker.Inject(pu.MaskedDateTime),this.isMaskModuleInjected=!1));"datetimepickeredit"===n.column.editType&&(this.obj=new pu.DateTimePicker(t.extend(vft(n,this.parent.editSettings.mode,this.parent.enableRtl,this.parent.cssClass,this),n.column.edit.params)));this.obj.appendTo(n.element)},i}(wr);var lct=function(){function n(n){this.parent=n}return n.prototype.read=function(n,t){return t},n.prototype.write=function(){},n.prototype.destroy=function(){},n}(),act=function(){function n(n,t){this.isShowAddedRowValidate=!1;this.editType={Inline:kk,Normal:kk,Batch:lft,Dialog:aft};this.fieldname="";this.data={};this.editCellDialogClose=!1;this.parent=n;this.serviceLocator=t;this.l10n=this.serviceLocator.getService("localization");this.addEventListener();this.updateEditObj();this.createAlertDlg();this.createConfirmDlg()}return n.prototype.updateColTypeObj=function(){for(var r=this.parent.columnModel,i=0;i<r.length;i++)r[parseInt(i.toString(),10)].edit=this.parent.editSettings.template||r[parseInt(i.toString(),10)].editTemplate?t.extend(new n.editCellType.templateedit(this.parent),r[parseInt(i.toString(),10)].edit||{}):t.extend(new n.editCellType[r[parseInt(i.toString(),10)].editType&&n.editCellType[r[parseInt(i.toString(),10)].editType]?r[parseInt(i.toString(),10)].editType:"defaultedit"](this.parent,this.serviceLocator),r[parseInt(i.toString(),10)].edit||{});this.parent.log("primary_column_missing")},n.prototype.getModuleName=function(){return"edit"},n.prototype.onPropertyChanged=function(n){if(n.module===this.getModuleName())for(var t=this.parent,i=0,r=Object.keys(n.properties);i<r.length;i++)switch(r[i]){case"allowAdding":case"allowDeleting":case"allowEditing":(t.editSettings.allowAdding||t.editSettings.allowEditing||t.editSettings.allowDeleting)&&this.initialEnd();break;case"mode":this.updateEditObj();t.isEdit=!!t.editSettings.showAddNewRow;t.refresh()}},n.prototype.updateEditObj=function(){this.editModule&&this.editModule.destroy();this.renderer=new eft(this.parent,this.serviceLocator);this.editModule=new this.editType[this.parent.editSettings.mode](this.parent,this.serviceLocator,this.renderer)},n.prototype.initialEnd=function(){this.updateColTypeObj()},n.prototype.startEdit=function(n){var i=this.parent,f,e,r,u;if(i.editSettings.allowEditing&&(!i.isEdit||i.editSettings.showAddNewRow&&(!i.editSettings.showAddNewRow||t.isNullOrUndefined(i.element.querySelector("."+ut))))&&"Batch"!==i.editSettings.mode){if(this.parent.element.classList.add("e-editing"),!i.getSelectedRows().length||t.isNullOrUndefined(this.parent.getRowByIndex(parseInt(this.parent.getSelectedRows()[0].getAttribute("aria-rowindex"),10)-1))){if(!n)return void this.showDialog("EditOperationAlert",this.alertDObj)}else n||(this.parent.isTreeGrid&&this.parent.allowPaging&&i.selectionModule.selectedRowIndexes.length?(f=i.selectionModule.selectedRowIndexes[0],n=i.getRowByIndex(f)):n=i.getSelectedRows()[0]);this.parent.enableVirtualization&&"Normal"===this.parent.editSettings.mode&&(e=parseInt(n.getAttribute("aria-rowindex"),10)-1,n=this.parent.getRowByIndex(e));r=i.getContent().querySelector("tr:last-child");u=i.getHeaderContent().querySelector("tbody");i.frozenRows&&t.isNullOrUndefined(r)&&u&&u.querySelector("tr:last-child")?this.isLastRow=n.rowIndex===parseInt(i.getHeaderContent().querySelector("tbody").querySelector("tr:last-child").getAttribute("aria-rowindex"),10)-1:r&&(this.isLastRow=n.rowIndex===r.rowIndex);"none"!==n.style.display&&(this.editModule.startEdit(n),this.refreshToolbar(),i.element.querySelector(".e-gridpopup").style.display="none",this.parent.notify("start-edit",{}),i.editSettings.showAddNewRow&&this.destroyToolTip())}},n.prototype.checkLastRow=function(n,i){var r=this.isLastRow;"auto"!==this.parent.height&&"Bottom"===this.parent.editSettings.newRowPosition&&i&&"add"===i.requestType&&this.parent.getContent().firstElementChild.offsetHeight>this.parent.getContentTable().scrollHeight?t.addClass([].slice.call(n.getElementsByClassName(v)),"e-lastrowadded"):r&&n&&n.classList&&t.addClass([].slice.call(n.getElementsByClassName(v)),"e-lastrowcell")},n.prototype.closeEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&this.parent.element.getElementsByClassName("e-updatedtd").length?this.showDialog("CancelEdit",this.dialogObj):(this.parent.element.classList.remove("e-editing"),this.editModule.closeEdit(),this.refreshToolbar(),this.parent.notify(eo,{requestType:"cancel"}),this.parent.editSettings.showAddNewRow&&this.destroyToolTip())},n.prototype.refreshToolbar=function(){this.parent.notify(kr,{})},n.prototype.addRecord=function(n,t){if(this.parent.editSettings.allowAdding){var i={startEdit:!0};n||this.parent.notify(ks,i);i.startEdit&&(this.parent.element.classList.add("e-editing"),this.editModule.addRecord(n,t),this.refreshToolbar(),this.parent.notify("start-add",{}))}},n.prototype.deleteRecord=function(n,i){var r=this.parent;if(r.editSettings.allowDeleting){if(i||r.getSelectedRecords().length||!t.isNullOrUndefined(r.commandDelIndex))return r.editSettings.showDeleteConfirmDialog?(this.fieldname=n,this.data=i,void this.showDialog("ConfirmDelete",this.dialogObj)):void this.editModule.deleteRecord(n,i);this.showDialog("DeleteOperationAlert",this.alertDObj)}},n.prototype.deleteRow=function(n){this.deleteRowUid=n.getAttribute("data-uid");var i=this.parent.getRowObjectFromUID(this.deleteRowUid);t.isNullOrUndefined(i)||this.deleteRecord(null,i.data)},n.prototype.endEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&(t.isNullOrUndefined(this.formObj)||this.formObj.validate())&&(this.parent.editModule.saveCell(),this.parent.notify(ys,{}),t.isNullOrUndefined(this.formObj)||this.formObj.validate())?this.showDialog("BatchSaveConfirm",this.dialogObj):this.endEditing()},n.prototype.updateCell=function(n,t,i){this.editModule.updateCell(n,t,i)},n.prototype.updateRow=function(n,t){this.editModule.updateRow(n,t)},n.prototype.batchCancel=function(){this.closeEdit()},n.prototype.batchSave=function(){this.endEdit()},n.prototype.editCell=function(n,t){this.editModule.editCell(n,t)},n.prototype.editFormValidate=function(){return!this.formObj||this.formObj.validate()},n.prototype.getBatchChanges=function(){return this.editModule.getBatchChanges?this.editModule.getBatchChanges():{}},n.prototype.getCurrentEditCellData=function(){var n=this.getCurrentEditedData(this.formObj.element,{});return n[Object.keys(n)[0]]},n.prototype.saveCell=function(){this.editModule.saveCell()},n.prototype.endEditing=function(){this.parent.editSettings.showAddNewRow||this.parent.element.classList.remove("e-editing");this.editModule.endEdit();this.isShowAddedRowValidate=!1;this.refreshToolbar()},n.prototype.showDialog=function(n,t){t.content="<div>"+this.l10n.getConstant(n)+"<\/div>";t.dataBind();t.show();this.parent.enableRtl&&t.refresh()},n.prototype.getValueFromType=function(n,t){var i=t;switch(n.type){case"number":i=isNaN(parseFloat(t))?null:parseFloat(t);break;case"boolean":"booleanedit"!==n.editType&&(i=t===this.l10n.getConstant("True")||!0===t);break;case"date":case"datetime":"datepickeredit"!==n.editType&&"datetimepickeredit"!==n.editType&&t&&t.length?i=new Date(t):""===t&&(i=null);break;case"dateonly":i=t&&(t=new Date(t))?t.getFullYear()+"-"+lu(t.getMonth()+1)+"-"+lu(t.getDate()):null}return i},n.prototype.destroyToolTip=function(){for(var r,n=0,i=[].slice.call(this.parent.element.getElementsByClassName("e-griderror"));n<i.length;n++)r=i[n],t.remove(r);this.parent.getContent().firstElementChild.style.position="relative";this.parent.isFrozenGrid()&&(this.parent.element.querySelector(".e-gridheader")&&(this.parent.element.querySelector(".e-gridheader").style.position=""),this.parent.element.querySelector(".e-gridcontent").style.position="")},n.prototype.createConfirmDlg=function(){this.dialogObj=this.dlgWidget([{click:this.dlgOk.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.dlgCancel.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}],"EditConfirm")},n.prototype.createAlertDlg=function(){this.alertDObj=this.dlgWidget([{click:this.alertClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",isPrimary:!0}}],"EditAlert")},n.prototype.alertClick=function(){this.alertDObj.hide()},n.prototype.dlgWidget=function(n,t){var u=this.parent.createElement("div",{id:this.parent.element.id+t}),r,i;return this.parent.element.appendChild(u),r={showCloseIcon:!1,isModal:!0,visible:!1,closeOnEscape:!0,target:this.parent.element,width:"320px",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""},r.buttons=n,i=new tt.Dialog(r),i.isStringTemplate=!0,i.appendTo(u),i},n.prototype.dlgCancel=function(){this.parent.pagerModule&&(this.parent.pagerModule.isForceCancel=!1);this.parent.focusModule.clearIndicator();this.dialogObj.hide();this.parent.focusModule.restoreFocus({requestType:"cancel"});this.parent.notify("cancelcnfrmDlg",{})},n.prototype.dlgOk=function(){switch(this.dialogObj.element.querySelector(".e-dlg-content").firstElementChild.innerText){case this.l10n.getConstant("ConfirmDelete"):this.editModule.deleteRecord(this.fieldname,this.data);this.parent.editSettings.showDeleteConfirmDialog&&!this.parent.allowSelection&&(this.parent.commandDelIndex=void 0);break;case this.l10n.getConstant("CancelEdit"):this.editModule.closeEdit();break;case this.l10n.getConstant("BatchSaveConfirm"):this.endEditing();break;case this.l10n.getConstant("BatchSaveLostChanges"):"Batch"===this.parent.editSettings.mode&&this.editModule.addCancelWhilePaging();this.parent.pagerModule&&(this.parent.pagerModule.isForceCancel=!1);this.executeAction()}this.dlgCancel()},n.prototype.destroyEditComponents=function(){this.parent.isEdit&&(this.destroyWidgets(),this.destroyForm());this.destroy()},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.eventDetails=[{event:wt,handler:this.onPropertyChanged},{event:pt,handler:this.initialEnd},{event:rt,handler:this.keyPressHandler},{event:du,handler:this.updateColTypeObj},{event:gu,handler:this.destroyToolTip},{event:si,handler:this.preventBatch},{event:al,handler:this.destroyForm},{event:l,handler:this.destroyEditComponents}],yt(this.parent,this.eventDetails,!0,this),this.actionBeginFunction=this.onActionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.on(so,this.actionBeginFunction),this.parent.addEventListener(s,this.actionCompleteFunction))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(yt(this.parent,this.eventDetails,!1),this.parent.removeEventListener(s,this.actionCompleteFunction),this.parent.off(so,this.actionBeginFunction))},n.prototype.actionComplete=function(n){["add","beginEdit","save","delete","cancel","filterAfterOpen","filterchoicerequest"].indexOf(n.requestType)<0&&(this.parent.isEdit=!!this.parent.editSettings.showAddNewRow);"batchsave"===n.requestType&&this.parent.focusModule.restoreFocus({requestType:"save"});this.refreshToolbar()},n.prototype.getCurrentEditedData=function(n,r){var a=this.parent,e,f,c,h,v,y,l;if(a.editSettings.template){for(e=[].slice.call(n.elements),f=0;f<e.length;f++)if((e[parseInt(f.toString(),10)].hasAttribute("name")&&"e-multi-hidden"!==e[parseInt(f.toString(),10)].className||e[parseInt(f.toString(),10)].classList.contains("e-multiselect"))&&("hidden"!==e[parseInt(f.toString(),10)].type||!i(e[parseInt(f.toString(),10)],"e-switch-wrapper")&&!i(e[parseInt(f.toString(),10)],"e-checkbox-wrapper"))){var b=e[parseInt(f.toString(),10)].hasAttribute("name")?ty(e[parseInt(f.toString(),10)].getAttribute("name")):ty(e[parseInt(f.toString(),10)].getAttribute("id")),s=a.getColumnByField(b)||{field:b,type:e[parseInt(f.toString(),10)].getAttribute("type")},o=void 0;"checkbox"===s.type||"boolean"===s.type?o=e[parseInt(f.toString(),10)].checked:e[parseInt(f.toString(),10)].value?(o=e[parseInt(f.toString(),10)].value,e[parseInt(f.toString(),10)].ej2_instances&&e[parseInt(f.toString(),10)].ej2_instances.length&&!t.isNullOrUndefined(e[parseInt(f.toString(),10)].ej2_instances[0].value)&&(e[parseInt(f.toString(),10)].blur(),o=e[parseInt(f.toString(),10)].ej2_instances[0].value)):e[parseInt(f.toString(),10)].ej2_instances&&(o=e[parseInt(f.toString(),10)].ej2_instances[0].value);s.edit&&"string"==typeof s.edit.read?o=t.getValue(s.edit.read,window)(e[parseInt(f.toString(),10)],o):s.edit&&s.edit.read&&(o=s.edit.read(e[parseInt(f.toString(),10)],o));o=a.editModule.getValueFromType(s,o);"radio"===e[parseInt(f.toString(),10)].type?e[parseInt(f.toString(),10)].checked&&u.DataUtil.setValue(s.field,o,r):("string"==typeof o&&this.parent.sanitize(o),u.DataUtil.setValue(s.field,o,r))}return r}for(c=a.columnModel.filter(function(n){return n.editTemplate}),h=0;h<c.length;h++)if(n[vt(c[parseInt(h.toString(),10)].field)])for(v=[].slice.call(n[vt(c[parseInt(h.toString(),10)].field)]).filter(function(n){return"input"===n.tagName.toLowerCase()}),y=(v=v.length?v:[n[vt(c[parseInt(h.toString(),10)].field)]]).filter(function(n){return!t.isNullOrUndefined(n.ej2_instances)}),0===y.length&&(y=v.filter(function(n){return n.hasAttribute("name")})),f=0;f<y.length;f++)o=this.getValue(c[parseInt(h.toString(),10)],y[parseInt(f.toString(),10)],r),"string"===c[parseInt(h.toString(),10)].type&&(o=this.parent.sanitize(o)),u.DataUtil.setValue(c[parseInt(h.toString(),10)].field,o,r);for(var w=[].slice.call(n.getElementsByClassName("e-field")),p=0,k=w.length;p<k;p++)l=a.getColumnByUid(w[parseInt(p.toString(),10)].getAttribute("data-mappinguid")),l&&l.field&&(o=this.getValue(l,w[parseInt(p.toString(),10)],r),"string"!==l.type||l.isForeignColumn()&&"string"!=typeof o||(o=this.parent.sanitize(o)),u.DataUtil.setValue(l.field,o,r));return r},n.prototype.getValue=function(n,i,r){var u=i.ej2_instances?i.ej2_instances[0].value:i.value,e=this.parent,f=n.edit.read;return"checkbox"!==n.type&&"boolean"!==n.type||(u=i.checked),"string"==typeof f?(f=t.getValue(f,window),u=e.editModule.getValueFromType(n,f(i,u))):u=e.editModule.getValueFromType(n,n.edit.read(i,u)),t.isNullOrUndefined(r[n.field])&&""===u&&(u=r[n.field]),u},n.prototype.onActionBegin=function(n){var r,u;if(("columnstate"===n.requestType||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&"sorting"===n.requestType)&&this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode)this.closeEdit();else{if(r=this.parent.element.querySelector("."+ut),u=this.parent.element.querySelector("."+ii),r&&this.parent.frozenRows&&"virtualscroll"===n.requestType&&parseInt(i(r,y).getAttribute(c),10)-1<this.parent.frozenRows)return;var f=-1===["filterAfterOpen","filterBeforeOpen","filterchoicerequest","filterSearchBegin","save","infiniteScroll","virtualscroll"].indexOf(n.requestType),e=!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&!t.isNullOrUndefined(this.parent.element.querySelector(".e-editedrow")),o=(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.formObj&&e&&!this.formObj.isDestroyed&&(r||u||"cancel"===n.requestType)&&f;(!this.parent.enableVirtualization&&e&&"Batch"!==this.parent.editSettings.mode&&this.formObj&&!this.formObj.isDestroyed&&f&&!n.cancel||o)&&(this.destroyWidgets(),this.destroyForm())}},n.prototype.destroyWidgets=function(n){var v=this.parent,f,c,i,e,o,l,s,h,a,u,r;if((v.isWidgetsDestroyed=!0,v.editSettings.template)&&(f=ly(this.parent),(f=f.isReact?f:this.parent).destroyTemplate(["editSettingsTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),"Dialog"===this.parent.editSettings.mode&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length)for(n=[],c=this.parent.getColumns(),i=0;i<c.length;i++)e=c[parseInt(i.toString(),10)],(e.visible||this.parent.groupSettings.columns.indexOf(e.field)>-1)&&n.push(e);else n=n||this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization);for(n.some(function(n){return!t.isNullOrUndefined(n.editTemplate)})&&(this.parent.destroyTemplate(["editTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),o=0,l=n;o<l.length;o++)s=l[o],h=s.edit.destroy,s.edit.destroy&&("string"==typeof h?(h=t.getValue(h,window))():s.edit.destroy());for(a=[].slice.call(this.formObj.element.elements),i=0;i<a.length;i++)u=a[parseInt(i.toString(),10)],u.hasAttribute("name")&&(r=t.isNullOrUndefined(u.parentElement)?null:u.parentElement.classList.contains("e-ddl")?u.parentElement.querySelector("input"):u,r&&r.ej2_instances&&r.ej2_instances.length&&!r.ej2_instances[0].isDestroyed&&(r.ej2_instances[0].destroy(),r.remove()))},n.prototype.destroyForm=function(){this.destroyToolTip();for(var i=[this.formObj,this.virtualFormObj],r=this.parent.columnModel.filter(function(n){return n.editTemplate}),n=0;n<i.length;n++)i[parseInt(n.toString(),10)]&&i[parseInt(n.toString(),10)].element&&!i[parseInt(n.toString(),10)].isDestroyed&&(i[parseInt(n.toString(),10)].destroy(),!ly(this.parent).isReact||"Dialog"!==this.parent.editSettings.mode||t.isNullOrUndefined(this.parent.editSettings.template)&&!r.length||i[parseInt(n.toString(),10)].element.remove());this.destroyToolTip()},n.prototype.destroy=function(){var i=this.parent.element,r,n;i&&(r=!(!i.querySelector("."+st)||!i.querySelector("."+it)),r&&this.destroyForm(),this.removeEventListener(),n=this.dialogObj.element,n.childElementCount>0&&(this.dialogObj.destroy(),t.remove(n)),(n=this.alertDObj.element).childElementCount>0&&(this.alertDObj.destroy(),t.remove(n)),r&&this.editModule&&this.editModule.destroy())},n.prototype.keyPressHandler=function(n){switch(/(Mac)/i.test(navigator.platform)&&n.metaKey&&"ctrlEnter"===n.action&&(n.action="insert"),n.action){case"insert":this.addRecord();break;case"delete":"INPUT"===n.target.tagName&&!n.target.classList.contains("e-checkselect")||document.querySelector(".e-popup-open.e-edit-dialog")||this.deleteRecord();break;case"f2":this.startEdit();break;case"enter":!i(n.target,"e-unboundcelldiv")&&"Batch"!==this.parent.editSettings.mode&&(i(n.target,it)||(this.parent.frozenRows||this.parent.editSettings.showAddNewRow&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))&&i(n.target,ct))&&(!document.getElementsByClassName("e-popup-open").length||document.querySelectorAll(".e-popup-open .e-editcell").length&&!document.querySelectorAll(".e-popup-open:not(.e-dialog)").length)&&(n.preventDefault(),this.parent.isEdit&&(this.parent.isFocusFirstCell=!0),this.endEdit());break;case"escape":this.parent.isEdit&&!this.editCellDialogClose&&("Batch"===this.parent.editSettings.mode?this.editModule.escapeCellEdit():this.curretRowFocus(n));this.editCellDialogClose&&(this.editCellDialogClose=!1);break;case"tab":case"shiftTab":this.curretRowFocus(n)}},n.prototype.curretRowFocus=function(n){var r,e,h,f,o,c,y,u,s,l,a,v;if(this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode&&(this.parent.isWidgetsDestroyed=!1,r=i(n.target,"e-editedrow")||i(n.target,"e-addedrow"),r)){if(e=[].slice.call(r.querySelectorAll(".e-input:not(.e-disabled)")),h=[].slice.call(r.querySelectorAll(".e-unboundcell")),h&&h.length)for(f=0;f<h.length;f++)e=e.concat([].slice.call(h[parseInt(f.toString(),10)].querySelectorAll(".e-btn:not(.e-hide)")));if(o=i(n.target,"e-rowcell"),o=o&&o.classList.contains("e-unboundcell")?n.target:o,c=i(e[e.length-1],"e-rowcell"),(o===(c=c&&c.classList.contains("e-unboundcell")?e[e.length-1]:c)&&"tab"===n.action||"escape"===n.action||o===i(e[0],"e-rowcell")&&"shiftTab"===n.action&&!this.parent.editSettings.showAddNewRow)&&(y=r.getAttribute("data-uid"),u=(this.parent.allowGrouping?t.isNullOrUndefined(this.parent.getContent())?[]:[].slice.call(this.parent.getContent().querySelectorAll("tr")):this.parent.getRows()).map(function(n){return n.getAttribute("data-uid")}).indexOf(y),this.parent.frozenRows&&(i(r,"e-gridheader")?u=r.rowIndex:i(r,"e-gridcontent")&&(u-=this.parent.frozenRows)),r.classList.contains("e-addedrow")&&(u=0),"escape"===n.action?(this.parent.isFocusFirstCell=!0,this.closeEdit()):(this.isShowAddedRowValidate=!0,this.parent.selectionModule.preventFocus=!1,this.parent.isFocusFirstCell=!0,this.endEdit(),this.isShowAddedRowValidate=!1),this.parent.focusModule.active&&(!this.parent.editSettings.showAddNewRow||r.classList.contains("e-editedrow")||this.parent.editSettings.showAddNewRow&&r.classList.contains("e-addedrow")&&t.isNullOrUndefined(this.parent.element.querySelector('.e-griderror:not([style*="display: none"])'))))){if(s=0,l=this.parent.focusModule.active.matrix,l&&l.matrix.length&&l.matrix[parseInt(u.toString(),10)])for(a=l.matrix[parseInt(u.toString(),10)],f=0;f<a.length;f++)if(a[parseInt(f.toString(),10)]>0){s=f;break}v=t.getValue(u+".cells."+s,this.parent.focusModule.active.matrix.getRowsFromIndex(u,this.parent.focusModule.active));v&&0===v.getBoundingClientRect().width&&(s=this.parent.focusModule.active.matrix.nextVisibleCellFocus(u,s,n.action,this.parent.focusModule.active.keyActions[n.action],this.parent.focusModule.active,this.parent.focusModule.active.matrix.current[1])[1]);this.parent.focusModule.active.matrix.current=[u,s]}this.parent.editSettings.showAddNewRow&&"tab"===n.action&&i(n.target,"e-addedrow")&&(this.isShowAddedRowValidate=!0)}},n.prototype.preventBatch=function(n){this.preventObj=n;this.showDialog("BatchSaveLostChanges",this.dialogObj)},n.prototype.executeAction=function(){this.preventObj.handler.call(this.preventObj.instance,this.preventObj.arg1,this.preventObj.arg2,this.preventObj.arg3,this.preventObj.arg4,this.preventObj.arg5,this.preventObj.arg6,this.preventObj.arg7,this.preventObj.arg8)},n.prototype.applyFormValidation=function(n,i){var r=this.parent,s="Dialog"!==this.parent.editSettings.mode?r.editSettings.showAddNewRow&&r.element.querySelector("."+ut)?r.element.querySelector("."+ut).getElementsByClassName("e-gridform")[parseInt(0..toString(),10)]:r.element.getElementsByClassName("e-gridform")[parseInt(0..toString(),10)]:t.select("#"+r.element.id+"_dialogEdit_wrapper .e-gridform",document),f={},e={},o={},u;for(n=n||r.getColumns(),u=0;u<n.length;u++)(n[parseInt(u.toString(),10)].visible||"Dialog"===r.editSettings.mode&&(-1!==r.groupSettings.columns.indexOf(n[parseInt(u.toString(),10)].field)||"Dialog"!==r.editSettings.mode))&&n[parseInt(u.toString(),10)].validationRules&&t.isNullOrUndefined(i)&&uk(n[parseInt(u.toString(),10)],1,f,e,o,n.length);f=t.extend(f,e,o);this.parent.editModule.formObj=this.createFormObj(s,i||f)},n.prototype.createFormObj=function(n,r){var u=this;return new pr.FormValidator(n,{rules:r,locale:this.parent.locale,validationComplete:function(n){u.validationComplete(n)},customPlacement:function(n,r){var f=n.getAttribute("data-mappinguid"),e={column:u.parent.getColumnByUid(f),error:r,inputElement:n,value:n.value};(!(event&&event.relatedTarget&&event.relatedTarget.classList.contains("e-cancelbutton"))&&!u.parent.editSettings.showAddNewRow||u.parent.editSettings.showAddNewRow&&event&&event.target&&(i(event.target,u.parent.element.id+"_update",!0)||i(event.target,"e-grid-menu")&&(event.target.classList.contains("e-save")||event.target.querySelector(".e-save"))||u.isShowAddedRowValidate||i(event.target,"e-unboundcell")&&i(event.target,"e-update")||"enter"===event.action&&(i(event.target,"e-content")||i(event.target,"e-addedrow")))||u.parent.editSettings.showAddNewRow&&!t.isNullOrUndefined(u.parent.element.querySelector("."+ut)))&&u.valErrorPlacement(n,r);u.isShowAddedRowValidate=!1;u.parent.notify(dn,e)}})},n.prototype.valErrorPlacement=function(n,t){if(this.parent.isEdit){var i=t.getAttribute("for"),r=this.getElemTable(n).querySelector("#"+kh(i)+"_Error");r?r.querySelector(".e-tip-content").innerHTML=t.outerHTML:this.createTooltip(n,t,i,"")}},n.prototype.getElemTable=function(n){var u,r,i=this.parent;return"Dialog"!==i.editSettings.mode?(u=i.frozenRows&&t.closest(n,"."+y)&&i.frozenRows>(parseInt(t.closest(n,"."+y).getAttribute(c),10)-1||0),r=this.parent.isFrozenGrid()?i.element:u||i.editSettings.showAddNewRow&&(i.enableVirtualization||i.enableInfiniteScrolling)?i.getHeaderTable():i.getContentTable()):r=t.select("#"+i.element.id+"_dialogEdit_wrapper",document),r},n.prototype.resetElemPosition=function(n,t){var f=i(t.element,v),r,u,e;f&&(r=f.getBoundingClientRect().right,u=n.getBoundingClientRect().right,u>r&&(e=u-r,n.style.left=n.offsetLeft-e+"px"))},n.prototype.validationComplete=function(n){var t,r;this.parent.isEdit&&(t=this.getElemTable(n.element).querySelector("#"+kh(n.inputName)+"_Error"),this.parent.editSettings.showAddNewRow&&!t&&n.element&&(r=i(n.element,"e-rowcell").querySelector(".e-error"),r&&r.classList.remove("e-error")),t&&("failure"===n.status?(t.style.display="",this.resetElemPosition(t,n)):t.style.display="none"))},n.prototype.createTooltip=function(n,r,u,f){var ft=this.formObj.element,et=i(n,"e-virtual-validation"),wt,ht,it,w,ut,at,vt,bt,kt,dt,gt,ni,ti;et&&(ft=this.virtualFormObj.element);var ot,g,s=this.parent.getContent().firstElementChild,yt=s.scrollHeight>s.clientHeight||s.scrollWidth>s.clientWidth,b="Dialog"!==this.parent.editSettings.mode,a=t.closest(n,"."+v),nt=t.closest(n,"."+y),st=!1,pt=!1,p=this.parent.editSettings.showAddNewRow&&!t.isNullOrUndefined(i(n,ii))&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling),k=Math.round(this.parent.getContent().clientHeight/this.parent.getRowHeight())-1,l=[].slice.call(this.parent.getContent().getElementsByClassName(y));("Batch"===this.parent.editSettings.mode&&(l=[].slice.call(this.parent.getContent().querySelectorAll(".e-row:not(.e-hiddenrow)")),k>1&&l.length>k&&parseInt(l[l.length-1].getAttribute(c),10)-1==parseInt(nt.getAttribute(c),10)-1&&(pt=!0)),b)&&((this.parent.frozenRows||p)&&(wt=this.parent.editSettings.showAddNewRow?".e-row:not(.e-hiddenrow.e-addedrow)":".e-row:not(.e-hiddenrow)",ht=[].slice.call(this.parent.getHeaderTable().querySelector(h).querySelectorAll(wt)),st=(ot=ht.length>(parseInt(nt.getAttribute(c),10)-1||0))&&parseInt(nt.getAttribute(c),10)-1==ht.length-1,it=[].slice.call(this.parent.getHeaderTable().querySelector(h).querySelectorAll(".e-row:not(.e-hiddenrow)")),1===it.length&&(it[0].classList.contains("e-addedrow")||it[0].classList.contains("e-insertedrow"))&&(st=!0)),(st||k>1&&l.length>k&&("Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType||a.classList.contains("e-lastrowcell")&&!nt.classList.contains(ii))||pt)&&(g=!0));var ct=b?ot?this.parent.getHeaderTable():this.parent.getContentTable():t.select("#"+this.parent.element.id+"_dialogEdit_wrapper .e-dlg-content",document),rt=ct.getBoundingClientRect(),lt=b?this.parent.element.getBoundingClientRect().left:rt.left,d=t.closest(n,"td"),o=d?d.getBoundingClientRect():n.parentElement.getBoundingClientRect(),e=this.parent.createElement("div",{className:"e-tooltip-wrap e-lib e-control e-popup e-griderror",id:u+"_Error"}),ri="display:"+f+";top:"+((ot?o.top+o.height:o.bottom-rt.top)+ct.scrollTop+9)+"px;left:"+(o.left-lt+ct.scrollLeft+o.width/2)+"px;max-width:"+o.width+"px;text-align:center;";t.updateCSSText(e,ri);this.parent.cssClass&&e.classList.add(this.parent.cssClass);b&&rt.left<lt&&(e.style.left=parseInt(e.style.left,10)-rt.left+lt+"px");at=this.parent.createElement("div",{className:"e-tip-content"});(at.appendChild(r),g?((w=this.parent.createElement("div",{className:"e-arrow-tip e-tip-bottom"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),w.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom"}))):((w=this.parent.createElement("div",{className:"e-arrow-tip e-tip-top"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),w.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-top"}))),e.appendChild(at),e.appendChild(w),et||!this.parent.frozenRows&&!p||"Dialog"===this.parent.editSettings.mode?et?this.virtualFormObj.element.appendChild(e):"Dialog"!==this.parent.editSettings.mode&&this.parent.isFrozenGrid()?a.classList.contains("e-unfreeze")?(t.addClass([e],"e-unfreeze"),this.formObj.element.appendChild(e)):((ut=t.closest(a,".e-gridheader")?this.parent.element.querySelector(".e-gridheader"):1===l.length?this.parent.element.querySelector(".e-gridcontent").querySelector(".e-content"):this.parent.element.querySelector(".e-gridcontent")).appendChild(e),ut.style.position="relative"):this.formObj.element.appendChild(e):(("Normal"===this.parent.editSettings.mode?t.closest(n,".e-editcell"):t.closest(n,"."+yi)).style.position="relative",e.style.position="absolute",("Batch"===this.parent.editSettings.mode||t.closest(n,"."+gtt)||t.closest(n,"."+nit)||this.parent.frozenRows||p)&&(this.parent.isFrozenGrid()?a.classList.contains("e-unfreeze")?(t.addClass([e],"e-unfreeze"),ft.appendChild(e)):((ut=t.closest(a,".e-gridheader")?this.parent.element.querySelector(".e-gridheader"):1===l.length?this.parent.element.querySelector(".e-gridcontent").querySelector(".e-content"):this.parent.element.querySelector(".e-gridcontent")).appendChild(e),ut.style.position="relative"):ft.appendChild(e))),t.isNullOrUndefined(a)||(a.classList.contains("e-fixedfreeze")?e.classList.add("e-fixederror"):(a.classList.contains("e-leftfreeze")||a.classList.contains("e-rightfreeze"))&&e.classList.add("e-freezeerror")),!g&&b&&s.getBoundingClientRect().bottom<o.bottom+o.height)&&(vt=this.parent.getContent().querySelector(".e-content"),0===this.parent.currentViewData.length&&0===vt.scrollTop?vt.scrollTop=e.offsetHeight+w.scrollHeight:s.scrollTop=s.scrollTop+e.offsetHeight+w.scrollHeight);bt=parseInt(document.defaultView.getComputedStyle(e,null).getPropertyValue("font-size"),10);(e.style.left=(this.parent.frozenRows||p)&&"Dialog"!==this.parent.editSettings.mode?d.offsetLeft+(d.offsetWidth/2-e.offsetWidth/2)+"px":parseInt(e.style.left,10)-e.offsetWidth/2+"px",e.getBoundingClientRect().width<o.width&&e.querySelector("label").getBoundingClientRect().height/(1.2*bt)>=2&&(e.style.width=e.style.maxWidth),b&&!yt&&!this.parent.allowPaging||this.parent.frozenRows||p)&&(kt=tt.calculateRelativeBasedPosition(d,e),e.style.top=kt.top+o.height+9+"px");g&&(!yt||"auto"===this.parent.height||this.parent.frozenRows&&p||this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||e.classList.contains("e-freezeerror")&&e.classList.contains("e-fixederror")?e.style.bottom=o.height+9+"px":(dt=s.scrollWidth>s.offsetWidth?oi():0,gt=-1===this.parent.height.toString().indexOf("%")?parseInt(this.parent.height,10):s.offsetHeight,e.style.bottom=gt-s.querySelector("table").offsetHeight-dt+o.height+9+"px"),l.length<k&&"Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType&&(ni=(this.parent.frozenRows?(p?this.parent.frozenRows+1:this.parent.frozenRows)+(l.length-1):l.length-1)*this.parent.getRowHeight(),ti=this.parent.getContent().clientHeight-ni,e.style.bottom=ti+9+"px"),e.style.top=null)},n.prototype.checkColumnIsGrouped=function(n){return!(n.visible||this.parent.groupSettings.columns.indexOf(n.field)>-1)},n.AddEditors=function(i){n.editCellType=t.extend(n.editCellType,i)},n.editCellType={dropdownedit:sft,numericedit:hft,datepickeredit:dk,datetimepickeredit:dk,booleanedit:oft,defaultedit:cft,templateedit:lct},n}(),gk=function(){return gk=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n},gk.apply(this,arguments)},vct=function(){function n(n,i){this.filterColumns=[];this.showColumn=[];this.hideColumn=[];this.changedColumns=[];this.unchangedColumns=[];this.infiniteLoadedElement=[];this.isDlgOpen=!1;this.isColumnChooserOpen=!1;this.initialOpenDlg=!0;this.stateChangeColumns=[];this.changedStateColumns=[];this.isInitialOpen=!1;this.isCustomizeOpenCC=!1;this.searchOperator="startswith";this.sortDirection="None";this.selectedColumnModels=[];this.selectedColumns=[];this.itemsCount=50;this.infiniteSkipCount=0;this.infiniteColumns=[];this.infiniteInitialLoad=!1;this.prevInfiniteScrollDirection="";this.prevShowedCols=[];this.hideDialogFunction=this.hideDialog.bind(this);this.infiniteRenderMode=!1;this.parent=n;this.serviceLocator=i;this.infiniteRenderMode=!!this.parent.enableColumnVirtualization;this.addEventListener();this.cBoxTrue=ri.createCheckBox(this.parent.createElement,!1,{checked:!0,label:" "});this.cBoxFalse=ri.createCheckBox(this.parent.createElement,!1,{checked:!1,label:" "});this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden e-cc e-cc-chbox",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild);this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden e-cc e-cc-chbox",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild);this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck");this.parent.enableRtl&&t.addClass([this.cBoxTrue,this.cBoxFalse],["e-rtl"]);this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?t.addClass([this.cBoxTrue,this.cBoxFalse],this.parent.cssClass.split(" ")):t.addClass([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass]));this.parent.enableAdaptiveUI&&this.setFullScreenDialog()}return n.prototype.destroy=function(){var n=this,r=this.parent.element,i;(r.querySelector("."+it)||r.querySelector("."+st))&&r&&(this.removeEventListener(),this.unWireEvents(),this.infiniteLoadedElement=null,this.infiniteDiv=null,!t.isNullOrUndefined(this.dlgObj)&&this.dlgObj.element&&!this.dlgObj.isDestroyed)&&(this.parent.isReact&&this.parent.columnChooserSettings.template?at.timer?(clearTimeout(at.timer),at.timer=null):at.timer=setTimeout(function(){t.isNullOrUndefined(n.dlgObj)||!n.dlgObj.element||n.dlgObj.isDestroyed||n.dlgObj.destroy()},0):this.dlgObj.destroy(),i=document.getElementById(this.parent.element.id+"_e-popup"),t.isNullOrUndefined(i)||(t.remove(i),i=null))},n.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,a.isColumnChooser);this.parent.enableAdaptiveUI&&(this.parent.on(tf,this.renderResponsiveColumnChooserDiv,this),this.parent.on(ei,this.renderResponsiveChangeAction,this))},n.prototype.rtlUpdate=function(){t.isNullOrUndefined(this.innerDiv)||(this.parent.enableRtl?t.addClass([].slice.call(this.innerDiv.getElementsByClassName("e-checkbox-wrapper")),["e-rtl"]):t.removeClass([].slice.call(this.innerDiv.getElementsByClassName("e-checkbox-wrapper")),["e-rtl"]))},n.prototype.addEventListener=function(){this.parent.isDestroyed||(t.EventHandler.add(document,"click",this.clickHandler,this),this.parent.on(w,this.enableAfterRenderEle,this),this.parent.on(pt,this.render,this),this.parent.addEventListener(ti,this.hideDialogFunction),this.parent.on(l,this.destroy,this),this.parent.on(pl,this.rtlUpdate,this),this.parent.on(la,this.onResetColumns,this),this.parent.on(vr,this.setFullScreenDialog,this),this.parent.enableAdaptiveUI&&this.parent.on(ei,this.renderResponsiveChangeAction,this),(this.infiniteRenderMode||this.parent.enableAdaptiveUI)&&this.parent.on(tf,this.renderResponsiveColumnChooserDiv,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(t.EventHandler.remove(document,"click",this.clickHandler),this.parent.off(pt,this.render),this.parent.off(l,this.destroy),this.parent.off(w,this.enableAfterRenderEle),this.parent.off(pl,this.rtlUpdate),this.parent.off(la,this.onResetColumns),this.parent.removeEventListener(ti,this.hideDialogFunction),this.parent.off(vr,this.setFullScreenDialog),this.infiniteDiv&&(t.EventHandler.remove(this.infiniteDiv,"scroll",this.infiniteScrollHandler),t.EventHandler.remove(this.infiniteDiv,"mouseup",this.infiniteScrollMouseKeyUpHandler),t.EventHandler.remove(this.infiniteDiv,"mousedown",this.infiniteScrollMouseKeyDownHandler)),this.parent.enableAdaptiveUI&&(this.parent.off(vr,this.setFullScreenDialog),this.parent.off(ei,this.renderResponsiveChangeAction)),(this.infiniteRenderMode||this.parent.enableAdaptiveUI)&&this.parent.off(tf,this.renderResponsiveColumnChooserDiv))},n.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization");this.parent.enableAdaptiveUI||this.renderDlgContent();this.getShowHideService=this.serviceLocator.getService("showHideService")},n.prototype.clickHandler=function(n){var i=n.target;if(!this.isCustomizeOpenCC){if(t.isNullOrUndefined(t.closest(i,".e-cc-toolbar"))&&t.isNullOrUndefined(t.closest(i,".e-cc")))t.isNullOrUndefined(this.dlgObj)||!this.dlgObj.visible||i.classList.contains("e-toolbar-items")||(this.dlgObj.hide(),this.clearActions(),this.refreshCheckboxState(),this.isDlgOpen=!1);else if(i.classList.contains("e-columnchooser-btn")||i.classList.contains("e-cc-toolbar")){if(this.initialOpenDlg&&this.dlgObj.visible||!this.isDlgOpen)return void(this.isDlgOpen=!0)}else i.classList.contains("e-cc-cancel")&&(i.parentElement.querySelector(".e-ccsearch").value="",this.columnChooserSearch("",!1),this.removeCancelIcon(),this.refreshCheckboxButton());(this.parent.detailTemplate||this.parent.childGrid)&&(this.targetdlg=n.target)}this.isCustomizeOpenCC&&n.target.classList.contains("e-cc-cancel")&&this.refreshCheckboxState();this.parent.enableAdaptiveUI?this.parent.enableRtl&&t.addClass([this.cBoxTrue,this.cBoxFalse],["e-rtl"]):this.rtlUpdate()},n.prototype.hideDialog=function(){!t.isNullOrUndefined(this.dlgObj)&&this.dlgObj.visible&&(this.parent.enableAdaptiveUI?this.responsiveDialogRenderer.hideResponsiveColumnChooser():(this.dlgObj.hide(),this.isDlgOpen=!1))},n.prototype.renderColumnChooser=function(n,i,r){var f,e;if(this.dlgObj.visible||!this.parent.detailTemplate&&!this.parent.childGrid||this.hideOpenedDialog(),this.dlgObj.visible)this.hideDialog(),this.addcancelIcon(),this.clearActions(),this.refreshCheckboxState();else{if(f=this.beforeOpenColumnChooserEvent(),f.cancel)return;this.infiniteRenderMode||!this.selectedColumns.length||"None"!==this.sortDirection||this.parent.columnChooserSettings.template||this.setOrderedColumns();f.columns=null;r&&(this.targetdlg=r);this.infiniteRenderMode&&this.dlgObj.show();this.refreshCheckboxState();this.dlgObj.dataBind();this.dlgObj.element.style.maxHeight="430px";e=this.dlgObj.element.style.display;this.parent.columnChooserSettings.enableSearching||(this.dlgObj.element.querySelector(".e-dlg-content").style.margin="0px");this.dlgObj.element.style.display="block";var s=this.parent.getHeaderContent().classList.contains("e-sticky"),o=t.closest(r,".e-toolbar-item"),u=void 0;document.getElementById(this.parent.element.id+"_e-popup")&&document.getElementById(this.parent.element.id+"_e-popup").querySelector(".e-ccdlg")&&this.parent.element.appendChild(this.dlgObj.element);s?(u=o.getBoundingClientRect(),this.dlgObj.element.classList.add("e-sticky")):(this.dlgObj.element.classList.remove("e-sticky"),u=tt.calculateRelativeBasedPosition(o,this.dlgObj.element));this.dlgObj.element.style.display=e;this.dlgObj.element.style.top=u.top+t.closest(r,".e-cc-toolbar").getBoundingClientRect().height+"px";t.isNullOrUndefined(t.closest(r,".e-bigger"))||(this.dlgObj.width=258);t.Browser.isDevice?(this.dlgObj.position={X:"center",Y:"center"},this.dlgObj.refreshPosition(),this.dlgObj.open=this.mOpenDlg.bind(this)):this.dlgObj.element.style.left=this.parent.enableRtl?r.offsetLeft+"px":u.left-250+t.closest(r,".e-cc-toolbar").clientWidth+2+"px";this.removeCancelIcon();this.infiniteRenderMode||this.dlgObj.show();this.parent.getContent().firstElementChild.offsetHeight<this.dlgObj.element.offsetHeight&&!this.parent.element.classList.contains("e-drillthrough-grid")&&(ko(this.parent,this.dlgObj),this.dlgObj.element.querySelector(".e-ccsearch")&&this.dlgObj.element.querySelector(".e-ccsearch").select());this.parent.notify(ln,{dialog:this.dlgObj})}this.rtlUpdate()},n.prototype.openColumnChooser=function(n,i){if(this.isCustomizeOpenCC=!0,this.parent.enableAdaptiveUI){if(!this.isColumnChooserOpen)return void this.parent.showResponsiveCustomColumnChooser();this.isColumnChooserOpen=!1;this.renderDlgContent()}if(this.dlgObj.visible)this.hideDialog();else{var r=this.beforeOpenColumnChooserEvent();r.cancel||(this.infiniteRenderMode||!this.selectedColumns.length||"None"!==this.sortDirection||this.parent.columnChooserSettings.template||this.setOrderedColumns(),r.columns=null,this.infiniteRenderMode&&this.dlgObj.show(),this.isInitialOpen?this.refreshCheckboxState():(this.dlgObj.content=this.renderChooserList(),this.parent.columnChooserSettings.template||this.updateIntermediateBtn()),this.dlgObj.dataBind(),this.infiniteRenderMode&&this.refreshCheckboxState(),this.dlgObj.position={X:"center",Y:"center"},t.isNullOrUndefined(n)?(this.parent.enableAdaptiveUI&&(this.dlgObj.position={X:"",Y:""}),this.dlgObj.refreshPosition()):(this.dlgObj.element.style.top="",this.dlgObj.element.style.left="",this.dlgObj.element.style.top=i+"px",this.dlgObj.element.style.left=n+"px"),this.parent.columnChooserSettings.enableSearching||(this.dlgObj.element.querySelector(".e-dlg-content").style.margin="0px"),this.dlgObj.beforeOpen=this.customDialogOpen.bind(this),this.infiniteRenderMode||this.dlgObj.show(),this.parent.getContent().firstElementChild.offsetHeight<this.dlgObj.element.offsetHeight&&!this.parent.element.classList.contains("e-drillthrough-grid")&&ko(this.parent,this.dlgObj),this.isInitialOpen=!0,this.dlgObj.beforeClose=this.customDialogClose.bind(this))}},n.prototype.enableAfterRenderEle=function(n){n.module===this.getModuleName()&&n.enable&&this.render()},n.prototype.keyUpHandler=function(n){"Escape"===n.key&&this.resetColumnState();n&&n.target&&!t.isNullOrUndefined(t.closest(n.target,".e-grid-popup"))&&this.parent.trigger("keyPressed",n);this.setFocus(i(n.target,"e-cclist"))},n.prototype.setFocus=function(n){var t=this.dlgDiv.querySelector(".e-colfocus");t&&t.classList.remove("e-colfocus");n&&n.classList.add("e-colfocus")},n.prototype.customDialogOpen=function(){var n=this.dlgObj.content.querySelector("input.e-ccsearch");t.EventHandler.add(n,"keyup",this.columnChooserManualSearch,this)},n.prototype.customDialogClose=function(){var n=this.dlgObj.content.querySelector("input.e-ccsearch");t.EventHandler.remove(n,"keyup",this.columnChooserManualSearch)},n.prototype.getColumns=function(){return(this.infiniteRenderMode?this.infiniteColumns:this.parent.getColumns()).filter(function(n){return"checkbox"!==n.type&&!0===n.showInColumnChooser||"checkbox"===n.type&&void 0!==n.field})},n.prototype.setOrderedColumns=function(){var n,t;for(this.selectedColumnModels=[],n=0;n<this.selectedColumns.length;n++)t=this.parent.getColumnByField(this.selectedColumns[parseInt(n.toString(),10)]),t.showInColumnChooser&&this.selectedColumnModels.push(t)},n.prototype.renderDlgContent=function(){var n=this.parent.enableAdaptiveUI,t;(this.dlgDiv=this.parent.createElement("div",{className:"e-ccdlg e-cc",id:this.parent.element.id+"_ccdlg"}),n||this.parent.element.appendChild(this.dlgDiv),this.dlgObj=new tt.Dialog({header:this.parent.enableAdaptiveUI?null:this.renderHeader(),showCloseIcon:!1,closeOnEscape:!1,locale:this.parent.locale,visible:!1,enableRtl:this.parent.enableRtl,target:document.getElementById(this.parent.element.id),content:this.renderChooserList(),width:250,cssClass:this.parent.cssClass?"e-cc "+this.parent.cssClass:"e-cc",animationSettings:{effect:"None"},footerTemplate:this.parent.enableAdaptiveUI?null:this.renderFooter()}),n||!this.infiniteRenderMode&&this.parent.columnChooserSettings.footerTemplate||(this.dlgObj.buttons=[{click:this.confirmDlgBtnClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),isPrimary:!0,cssClass:this.parent.cssClass?"e-cc e-cc_okbtn "+this.parent.cssClass:"e-cc e-cc_okbtn"}},{click:this.clearBtnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat e-cc e-cc-cnbtn "+this.parent.cssClass:"e-flat e-cc e-cc-cnbtn",content:this.l10n.getConstant("CancelButton")}}]),this.dlgObj.isStringTemplate=!0,this.dlgObj.appendTo(this.dlgDiv),n)&&(t=document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv"),t&&t.appendChild(this.dlgDiv),this.dlgObj.open=this.mOpenDlg.bind(this),this.dlgObj.target=document.querySelector(".e-rescolumnchooser > .e-dlg-content > .e-mainfilterdiv"));this.wireEvents()},n.prototype.renderHeader=function(){if(this.parent.columnChooserSettings.headerTemplate&&!this.infiniteRenderMode){var n=this.parent.createElement("div",{className:"e-columnChooserHeaderTemplate"}),t=this.parent.element.id+"columnChooserHeaderTemplate";return this.parent.isReact?(this.parent.getColumnChooserHeaderTemplate()(null,this.parent,"columnChooserHeaderTemplate",t,null,null,n),this.parent.renderTemplates()):nt(n,this.parent.getColumnChooserHeaderTemplate()(null,this.parent,"columnChooserHeaderTemplate",t)),n}return this.l10n.getConstant("ChooseColumns")},n.prototype.renderFooter=function(){if(this.parent.columnChooserSettings.footerTemplate&&!this.infiniteRenderMode){var n=this.parent.createElement("div",{className:"e-columnChooserFooterTemplate"}),t=this.parent.element.id+"columnChooserFooterTemplate";return this.parent.isReact?(this.parent.getColumnChooserFooterTemplate()(null,this.parent,"columnChooserFooterTemplate",t,null,null,n),this.parent.renderTemplates()):nt(n,this.parent.getColumnChooserFooterTemplate()(null,this.parent,"columnChooserFooterTemplate",t)),n}return null},n.prototype.renderChooserList=function(){var r,t,u,f,l,e;this.mainDiv=this.parent.createElement("div",{className:"e-main-div e-cc"});var i=this.parent.createElement("div",{className:"e-cc-searchdiv e-cc e-input-group"}),o=this.parent.createElement("input",{className:"e-ccsearch e-cc e-input",attrs:{placeholder:this.l10n.getConstant("Search"),cssClass:this.parent.cssClass}}),a=this.parent.createElement("span",{className:"e-ccsearch-icon e-icons e-cc e-input-group-icon",attrs:{title:this.l10n.getConstant("Search")}}),s=this.parent.createElement("div",{className:"e-cc-contentdiv"});this.innerDiv=this.parent.createElement("div",{className:"e-innerdiv e-cc"});i.appendChild(o);i.appendChild(a);this.searchBoxObj=new vit(o,this.serviceLocator);var n=this.getColumns(),h=[],c=[];if(n.forEach(function(n){n.visible?h.push(n.headerText):c.push(n.headerText)}),this.infiniteRenderMode&&!this.isInitialOpen)for(n=this.parent.columns,r=0;r<n.length;r++)n[parseInt(r.toString(),10)].showInColumnChooser&&this.infiniteColumns.push(n[parseInt(r.toString(),10)]);return this.parent.columnChooserSettings.template&&!this.infiniteRenderMode?(t=this.parent.createElement("div",{className:"e-columnChooserTemplate"}),t.style.cssText=this.parent.enableAdaptiveUI?"height: 90%; min-height: 160px; overflow-y: auto;":"height: 196px; overflow-y: auto;",u=this.parent.element.id+"columnChooserTemplate",f={columns:n,hideColumns:c,showColumns:h},this.parent.isReact?(this.parent.getColumnChooserTemplate()(f,this.parent,"columnChooserTemplate",u,null,null,t),this.parent.renderTemplates()):nt(t,this.parent.getColumnChooserTemplate()(f,this.parent,"columnChooserTemplate",u,null,null,null,this.parent.root)),this.parent.columnChooserSettings.renderCustomColumnChooser&&("function"==typeof this.parent.columnChooserSettings.renderCustomColumnChooser?this.parent.columnChooserSettings.renderCustomColumnChooser(t,n):"string"==typeof this.parent.columnChooserSettings.renderCustomColumnChooser&&(this.parent.columnChooserSettings.renderCustomColumnChooser=d(this.parent.columnChooserSettings.renderCustomColumnChooser,window),this.parent.columnChooserSettings.renderCustomColumnChooser(t,n))),this.mainDiv.appendChild(i),this.mainDiv.appendChild(t)):(l=this.refreshCheckboxList(n),(this.innerDiv.appendChild(l),s.appendChild(this.innerDiv),this.parent.enableAdaptiveUI)?(e=this.parent.createElement("div",{className:"e-cc-searchBox"}),e.appendChild(i),this.mainDiv.appendChild(e)):this.mainDiv.appendChild(i),this.mainDiv.appendChild(s)),this.parent.columnChooserSettings.enableSearching||(i.style.display="none"),this.mainDiv},n.prototype.confirmDlgBtnClick=function(n){var i={requestType:"columnVisibilityUpdate",columns:this.getColumns(),cancel:!1},r,u,f;(this.parent.trigger(p,i),i.cancel)||(this.stateChangeColumns=[],this.changedStateColumns=[],r=this.infiniteRenderMode?this.infiniteColumns:this.parent.getColumns(),this.changedColumns=this.changedColumns.length>0?this.changedColumns:this.unchangedColumns,this.changedColumnState(this.changedColumns),u=this.infiniteRenderMode?this.infiniteLoadedElement.filter(function(n){return n.querySelector(".e-uncheck")}).length:this.ulElement&&this.ulElement.querySelector(".e-uncheck")&&this.ulElement.querySelectorAll(".e-uncheck:not(.e-selectall)").length,t.isNullOrUndefined(n)||(u<r.length&&(this.changeColumnVisibility({visibleColumns:this.showColumn,hiddenColumns:this.hideColumn},"uid"),0===this.parent.getCurrentViewRecords().length&&this.parent.element.querySelector(".e-emptyrow").querySelector("td").setAttribute("colSpan",this.parent.getVisibleColumns().length.toString())),this.parent.enableAdaptiveUI&&this.parent.scrollModule&&this.parent.scrollModule.refresh(),this.parent.editSettings.showAddNewRow&&this.parent.notify(hr,{})),f={requestType:"columnVisibilityUpdate",columns:this.getColumns(),cancel:!1},this.parent.trigger(s,f))},n.prototype.changeColumnVisibility=function(n,t){if("uid"!==(t=t||"headerText")&&(n.visibleColumns||n.hiddenColumns)){this.stateChangeColumns=[];this.changedStateColumns=[];var i=this.getColumns();n.hiddenColumns=i.filter(function(i){return-1!==n.hiddenColumns.indexOf(i[t])}).map(function(n){return n.uid});n.visibleColumns=i.filter(function(i){return-1!==n.visibleColumns.indexOf(i[t])}).map(function(n){return n.uid})}n.hiddenColumns.length&&this.columnStateChange(n.hiddenColumns,!1);n.visibleColumns.length&&this.columnStateChange(n.visibleColumns,!0);this.getShowHideService.setVisible(this.stateChangeColumns,this.changedStateColumns);this.clearActions();this.parent.notify(gu,{module:"edit"})},n.prototype.onResetColumns=function(n){"columnstate"!==n.requestType||this.resetColumnState()},n.prototype.renderResponsiveColumnChooserDiv=function(n){"open"===n.action?(this.isColumnChooserOpen=!0,this.openColumnChooser()):"clear"===n.action?this.clearBtnClick():"confirm"===n.action&&this.confirmDlgBtnClick(!0)},n.prototype.resetColumnState=function(){if(this.showColumn=[],this.hideColumn=[],this.changedColumns=[],this.filterColumns=[],this.searchValue="",this.selectedColumnModels=[],this.selectedColumns=[],this.sortDirection="",this.infiniteRenderMode){var n=this.dlgDiv.querySelector(".e-cclist.e-cc-selectall.e-colfocus");n&&n.classList.remove("e-colfocus")}this.hideDialog()},n.prototype.changedColumnState=function(n){for(var i,r,t=0;t<n.length;t++)i=n[parseInt(t.toString(),10)],r=this.parent.getColumnByUid(i,this.infiniteRenderMode),this.changedStateColumns.push(r)},n.prototype.columnStateChange=function(n,t){for(var u,i,r=0;r<n.length;r++)u=n[parseInt(r.toString(),10)],i=this.parent.getColumnByUid(u,this.infiniteRenderMode),i&&("checkbox"!==i.type&&(i.visible=t),this.stateChangeColumns.push(i))},n.prototype.clearActions=function(){this.resetColumnState();this.addcancelIcon()},n.prototype.clearBtnClick=function(){var n={requestType:"columnChooserClose",cancel:!1};this.parent.trigger(p,n);n.cancel||(this.clearActions(),this.parent.notify(ntt,{dialog:this.dlgObj}),this.parent.trigger(s,{requestType:"columnChooserClose",cancel:!1}))},n.prototype.checkstatecolumn=function(n,t,i){void 0===i&&(i=!1);var r=this.parent.getColumnByUid(t,this.infiniteRenderMode);n?(-1!==this.hideColumn.indexOf(t)&&this.hideColumn.splice(this.hideColumn.indexOf(t),1),-1!==this.showColumn.indexOf(t)||r&&r.visible||this.showColumn.push(t)):(-1!==this.showColumn.indexOf(t)&&this.showColumn.splice(this.showColumn.indexOf(t),1),-1===this.hideColumn.indexOf(t)&&r&&r.visible&&this.hideColumn.push(t));i?n?this.unchangedColumns.push(t):this.changedColumns.push(t):-1!==this.changedColumns.indexOf(t)?this.changedColumns.splice(this.changedColumns.indexOf(t),1):this.changedColumns.push(t)},n.prototype.columnChooserSearch=function(n,i){var e,y,r,c,l,a,tt;if(!i||(e={requestType:"columnChooserSearch",columns:this.getColumns(),cancel:!1},this.parent.trigger(p,e),!e.cancel)){var f,v=!1,o=this.dlgDiv.querySelector(".e-footer-content"),h=this.ulElement&&this.ulElement.querySelector(".e-check")&&this.ulElement.querySelectorAll(".e-check:not(.e-selectall)").length;if((this.infiniteRenderMode&&(h=this.infiniteLoadedElement.filter(function(n){return n.querySelector(".e-check")}).length),this.isInitialOpen=!0,o&&o.querySelector(".e-btn")&&(f=o.querySelector(".e-btn").ej2_instances[0]),""===n)?(this.removeCancelIcon(),this.filterColumns=this.selectedColumnModels.length?this.selectedColumnModels:this.getColumns(),v=!0):(y=this.selectedColumnModels.length?this.selectedColumnModels:this.getColumns(),this.filterColumns=new u.DataManager(y).executeLocal((new u.Query).where("headerText",this.searchOperator,n,!0,this.parent.columnChooserSettings.ignoreAccent))),0!==this.selectedColumnModels.length||"None"===this.sortDirection||this.parent.columnChooserSettings.template||(this.filterColumns=this.sortColumnChooser(this.filterColumns,this.sortDirection)),this.infiniteRenderMode&&this.updateIfiniteSelectAll(),this.parent.columnChooserSettings.template&&!this.infiniteRenderMode){r=void 0;c=this.parent.isReact;c?(vu(this.parent,["columnChooserTemplate"]),r=this.mainDiv.querySelector(".e-columnChooserTemplate")):(this.mainDiv.querySelector(".e-columnChooserTemplate").remove(),(r=this.parent.createElement("div",{className:"e-columnChooserTemplate"})).style.cssText=this.parent.enableAdaptiveUI?"height: 90%; min-height: 160px; overflow-y: auto;":"height: 196px; overflow-y: auto;");var w=this.parent.element.id+"columnChooserTemplate",b=this.filterColumns,it=n,k=[],g=[];b.forEach(function(n){n.visible?k.push(n.headerText):g.push(n.headerText)});l={columns:b,hideColumns:g,showColumns:k,searchValue:it};c?(this.parent.getColumnChooserTemplate()(l,this.parent,"columnChooserTemplate",w,null,null,r),this.parent.renderTemplates()):nt(r,this.parent.getColumnChooserTemplate()(l,this.parent,"columnChooserTemplate",w,null,null,null,this.parent.root));this.parent.columnChooserSettings.renderCustomColumnChooser&&("function"==typeof this.parent.columnChooserSettings.renderCustomColumnChooser?this.parent.columnChooserSettings.renderCustomColumnChooser(r,this.filterColumns):"string"==typeof this.parent.columnChooserSettings.renderCustomColumnChooser&&(this.parent.columnChooserSettings.renderCustomColumnChooser=d(this.parent.columnChooserSettings.renderCustomColumnChooser,window),this.parent.columnChooserSettings.renderCustomColumnChooser(r,this.filterColumns)));this.mainDiv.appendChild(r)}else this.filterColumns.length?(this.innerDiv.innerHTML=" ",this.innerDiv.classList.remove("e-ccnmdiv"),this.infiniteInitialLoad=!0,this.infiniteLoadedElement=[],this.innerDiv.appendChild(this.refreshCheckboxList(this.filterColumns)),this.infiniteRenderMode&&(this.mainDiv.querySelector(".e-ccheck .e-selectall").parentElement.classList.remove("e-checkbox-disabled"),this.updateIntermediateBtn()),v?(f&&h&&(f.disabled=!1),h&&this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(dr,{disabled:!1})):(this.addcancelIcon(),this.refreshCheckboxButton())):(a=this.parent.createElement("span",{className:"e-cc e-nmatch"}),a.innerHTML=this.l10n.getConstant("Matchs"),this.innerDiv.innerHTML=" ",this.infiniteRenderMode&&(t.removeClass([this.mainDiv.querySelector(".e-frame.e-selectall")],["e-check","e-stop","e-uncheck"]),this.mainDiv.querySelector(".e-ccheck .e-selectall").parentElement.classList.add("e-checkbox-disabled")),this.innerDiv.appendChild(a),this.innerDiv.classList.add("e-ccnmdiv"),f&&(f.disabled=!0),this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(dr,{disabled:!0}));(this.flag=!0,this.stopTimer(),i)&&(tt={requestType:"columnChooserSearch",columns:this.getColumns(),cancel:!1},this.parent.trigger(s,tt))}},n.prototype.sortColumnChooser=function(n,t){return"Ascending"===t?n.slice().sort(function(n,t){return n.field.toLowerCase()<t.field.toLowerCase()?-1:1}):"Descending"===t?n.slice().sort(function(n,t){return n.field.toLowerCase()>t.field.toLowerCase()?-1:1}):n},n.prototype.updateIfiniteSelectAll=function(){this.changedColumns=[];this.hideColumn=[];this.showColumn=[];for(var t=this.infiniteLoadedElement.filter(function(n){return n.querySelector(".e-uncheck")}),n=0;n<t.length;n++)this.checkState(t[parseInt(n.toString(),10)].querySelector(".e-frame"),!0)},n.prototype.wireEvents=function(){t.EventHandler.add(this.dlgObj.element,"click",this.checkBoxClickHandler,this);t.EventHandler.add(this.searchBoxObj.searchBox,"keyup",this.columnChooserManualSearch,this);t.EventHandler.add(this.dlgObj.element,"keyup",this.keyUpHandler,this);this.searchBoxObj.wireEvent()},n.prototype.unWireEvents=function(){this.parent.isDestroyed||(this.dlgObj&&this.dlgObj.element&&(t.EventHandler.remove(this.dlgObj.element,"click",this.checkBoxClickHandler),t.EventHandler.remove(this.dlgObj.element,"keyup",this.keyUpHandler)),this.searchBoxObj&&(t.EventHandler.remove(this.searchBoxObj.searchBox,"keyup",this.columnChooserManualSearch),this.searchBoxObj.unWireEvent()))},n.prototype.checkBoxClickHandler=function(n){var u,t,o,e,f,r,s;if((!this.parent.columnChooserSettings.template||this.infiniteRenderMode)&&(t=i(n.target,"e-checkbox-wrapper"),o=this.infiniteRenderMode?this.infiniteColumns:this.parent.getColumns(),t)){if(t.querySelector(".e-selectall")?this.updateSelectAll(!t.querySelector(".e-check")):ce(t.parentElement),t.querySelector(".e-chk-hidden").focus(),t.querySelector(".e-check")?u=!0:t.querySelector(".e-uncheck")&&(u=!1),this.infiniteRenderMode||this.updateIntermediateBtn(),e=i(t,"e-ccheck").getAttribute("data-uid"),f=this.searchValue&&this.searchValue.length||this.selectedColumnModels.length?this.filterColumns:o,e===this.parent.element.id+"-selectAll")for(this.changedColumns=[],this.unchangedColumns=[],r=0;r<f.length;r++)f[parseInt(r.toString(),10)].showInColumnChooser&&this.checkstatecolumn(u,f[parseInt(r.toString(),10)].uid,!0);else this.checkstatecolumn(u,e);s=!!(this.infiniteRenderMode&&t.querySelector(".e-selectall")&&t.querySelector(".e-uncheck"));this.parent.columnChooserSettings.footerTemplate||this.refreshCheckboxButton(s);this.setFocus(i(n.target,"e-cclist"));this.infiniteRenderMode&&this.updateIntermediateBtn()}},n.prototype.updateIntermediateBtn=function(){var s=this.infiniteRenderMode?this.infiniteLoadedElement.length:this.ulElement.children.length-1,i=[],e=0,o=0,n,r,u,f;(this.searchValue&&this.searchValue.length||"None"!==this.sortDirection?this.filterColumns:this.infiniteColumns).filter(function(n){!1===n.visible?e++:o++});r=(this.infiniteRenderMode&&this.mainDiv.querySelector(".e-cc-selectall")?this.mainDiv.querySelector(".e-cc-selectall"):this.ulElement.children[0]).querySelector(".e-frame");u=this.infiniteRenderMode?this.infiniteLoadedElement.filter(function(n){return n.querySelector(".e-check")}).length:this.ulElement.querySelectorAll(".e-check:not(.e-selectall)").length;this.parent.enableAdaptiveUI||this.parent.columnChooserSettings.footerTemplate?this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(dr,{disabled:!1}):(n=this.dlgObj.btnObj[0]).disabled=!1;f=r.parentElement.querySelector("input");s===u&&(!this.infiniteRenderMode||this.infiniteRenderMode&&e===this.showColumn.length)?(i=["e-check"],ur(f,!0)):u||this.infiniteRenderMode&&!u&&o!==this.hideColumn.length?(i=["e-stop"],f.indeterminate=!0):(i=["e-uncheck"],ur(f,!1),n&&!this.parent.enableAdaptiveUI?n.disabled=!0:this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(dr,{disabled:!0}));n&&!this.parent.enableAdaptiveUI&&n.dataBind();t.removeClass([r],["e-check","e-stop","e-uncheck"]);t.addClass([r],i)},n.prototype.updateSelectAll=function(n){var i=[].slice.call(this.ulElement.getElementsByClassName("e-frame")),r,u,t,f;for(this.infiniteRenderMode&&(i=[],this.infiniteLoadedElement.map(function(n){return i.push(n.querySelector(".e-frame"))}),i.unshift(this.mainDiv.querySelector(".e-cc-selectall").querySelector(".e-frame"))),r=0,u=i;r<u.length;r++)t=u[r],yo(t,n),f=t.parentElement.querySelector("input"),t.classList.contains("e-check")?ur(f,!0):t.classList.contains("e-uncheck")&&ur(f,!1)},n.prototype.refreshCheckboxButton=function(n){for(var r,e,o,f,h,l,u=this.parent.getVisibleColumns(),t=0;t<u.length;t++)r=u[parseInt(t.toString(),10)].uid,-1===this.prevShowedCols.indexOf(r)&&"checkbox"!==u[parseInt(t.toString(),10)].type&&this.prevShowedCols.push(r);for(t=0;t<this.hideColumn.length;t++)e=this.prevShowedCols.indexOf(this.hideColumn[parseInt(t.toString(),10)]),-1!==e&&this.prevShowedCols.splice(e,1);f=0!==this.showColumn.length?1:this.prevShowedCols.length;this.infiniteRenderMode&&(f=this.infiniteLoadedElement.filter(function(n){return n.querySelector(".e-uncheck")}).length);this.parent.enableAdaptiveUI?this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(dr,{disabled:!1}):(o=this.dlgDiv.querySelector(".e-footer-content").querySelector(".e-btn").ej2_instances[0]).disabled=!1;for(var s=[],c=[].slice.call(document.getElementsByClassName("e-cc-chbox")),a=(t=0,c.length);t<a;t++)h=c[parseInt(t.toString(),10)],this.infiniteRenderMode&&h.classList.contains("e-selectall")||(r=i(h,"e-ccheck").getAttribute("data-uid"),s.push(r));l=this.showColumn.filter(function(n){return-1!==s.indexOf(n)});(this.infiniteRenderMode&&(n||s.length===f)||!this.infiniteRenderMode&&0===f&&0===l.length)&&(this.parent.enableAdaptiveUI?this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(dr,{disabled:!0}):o.disabled=!0);this.parent.enableAdaptiveUI||o.dataBind()},n.prototype.refreshCheckboxList=function(n){var u,r,i;return this.ulElement=this.parent.createElement("ul",{className:"e-ccul-ele e-cc"}),u=this.l10n.getConstant("SelectAll"),r=this.parent.createElement("li",{className:"e-cclist e-cc e-cc-selectall"}),t.updateCSSText(r,this.infiniteRenderMode?"list-style: None;":""),i=this.createCheckBox(u,!1,this.parent.element.id+"-selectAll"),n.length&&(i.querySelector(".e-checkbox-wrapper").firstElementChild.classList.add("e-selectall"),i.querySelector(".e-frame").classList.add("e-selectall"),this.checkState(i.querySelector(".e-icons"),!0),r.appendChild(i),this.infiniteRenderMode?this.mainDiv.querySelector(".e-cc-contentdiv")&&!this.mainDiv.querySelector(".e-cc-selectall")&&(this.infiniteDiv=this.mainDiv.querySelector(".e-cc-contentdiv"),this.mainDiv.insertBefore(r,this.infiniteDiv),this.infiniteDiv.classList.add("e-checkbox-infinitescroll"),t.EventHandler.add(this.infiniteDiv,"scroll",this.infiniteScrollHandler,this),t.EventHandler.add(this.infiniteDiv,"mouseup",this.infiniteScrollMouseKeyUpHandler,this),t.EventHandler.add(this.infiniteDiv,"mousedown",this.infiniteScrollMouseKeyDownHandler,this)):this.ulElement.appendChild(r)),this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?t.addClass([i],this.parent.cssClass.split(" ")):t.addClass([i],[this.parent.cssClass])),this.infiniteRenderMode&&n.length>3*this.itemsCount&&(this.infiniteSkipCount=2*this.itemsCount),this.renderCheckbox(n.slice(0,this.infiniteRenderMode?3*this.itemsCount:n.length)),this.ulElement},n.prototype.infiniteScrollMouseKeyDownHandler=function(){t.EventHandler.remove(this.infiniteDiv,"scroll",this.infiniteScrollHandler)},n.prototype.infiniteScrollMouseKeyUpHandler=function(n){var r=this,i;t.EventHandler.add(this.infiniteDiv,"scroll",this.infiniteScrollHandler,this);i=this.infiniteDiv;this.ulElement.children.length>1&&(i.scrollTop>=i.scrollHeight-i.offsetHeight||i.scrollTop<=0)&&this.infiniteScrollHandler();at.timer=setTimeout(function(){r.clickHandler(n);at.timer=null},0)},n.prototype.infiniteScrollHandler=function(){var n=this.infiniteDiv,t=this.searchValue&&this.searchValue.length||"None"!==this.sortDirection?this.filterColumns:this.infiniteColumns,i,r;n.scrollTop>=n.scrollHeight-n.offsetHeight&&this.infiniteLoadedElement.length<=this.infiniteSkipCount+this.itemsCount&&this.ulElement.children.length===3*this.itemsCount&&(!t.length||t.length>this.infiniteSkipCount+this.itemsCount)?(i=t.length-(this.infiniteSkipCount+this.itemsCount),r=0,i<this.itemsCount&&(r=i),yu([].slice.call(this.ulElement.children).splice(0,this.itemsCount)),this.infiniteInitialLoad=!0,this.infiniteSkipCount+=this.itemsCount,this.renderCheckbox(t.slice(this.infiniteSkipCount,this.infiniteSkipCount+(r+this.itemsCount))),this.prevInfiniteScrollDirection="down"):n.scrollTop>=n.scrollHeight-n.offsetHeight&&this.infiniteLoadedElement.length>this.infiniteSkipCount+this.itemsCount&&this.ulElement.children.length===3*this.itemsCount?(yu([].slice.call(this.ulElement.children).splice(0,this.itemsCount)),this.infiniteSkipCount+="down"===this.prevInfiniteScrollDirection?this.itemsCount:3*this.itemsCount,nt(this.ulElement,this.infiniteLoadedElement.slice(this.infiniteSkipCount,this.itemsCount+this.infiniteSkipCount)),this.prevInfiniteScrollDirection="down"):0===n.scrollTop&&!this.infiniteInitialLoad&&this.infiniteSkipCount&&this.infiniteLoadedElement.length&&this.infiniteLoadedElement.length>3*this.itemsCount&&this.ulElement.children.length===3*this.itemsCount?(yu([].slice.call(this.ulElement.children).splice(2*this.itemsCount,this.itemsCount)),this.infiniteSkipCount-="up"===this.prevInfiniteScrollDirection?this.itemsCount:3*this.itemsCount,oc([].slice.call(this.infiniteLoadedElement.slice(this.infiniteSkipCount,this.infiniteSkipCount+this.itemsCount)),this.ulElement),this.prevInfiniteScrollDirection="up",this.infiniteDiv.scrollTop=this.infiniteScrollAppendDiff):0===n.scrollTop&&!this.infiniteInitialLoad&&this.infiniteSkipCount&&this.infiniteSkipCount>2*this.itemsCount&&this.infiniteLoadedElement.length&&this.ulElement.children.length<3*this.itemsCount&&(yu([].slice.call(this.ulElement.children).splice(2*this.itemsCount,t.length%this.itemsCount)),this.infiniteSkipCount=(Math.floor(t.length/this.itemsCount)-3)*this.itemsCount,oc([].slice.call(this.infiniteLoadedElement.slice(this.infiniteSkipCount,this.infiniteSkipCount+this.itemsCount)),this.ulElement),this.infiniteDiv.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up")},n.prototype.refreshCheckboxState=function(){var u,n,f,e;if(this.parent.columnChooserSettings.enableSearching||this.selectedColumnModels.length||"None"!==this.sortDirection){this.dlgObj.element.querySelector(".e-cc.e-input").value="";this.columnChooserSearch("",!1);for(var o=this.parent,r=this.dlgObj.element.querySelectorAll(".e-cc-chbox:not(.e-selectall)"),t=0,s=r.length;t<s;t++)n=r[parseInt(t.toString(),10)],u=this.parent.childGrid||this.parent.detailTemplate?i(this.dlgObj.element.querySelectorAll(".e-cc-chbox:not(.e-selectall)")[parseInt(t.toString(),10)],"e-ccheck").getAttribute("data-uid"):i(n,"e-ccheck").getAttribute("data-uid"),f=o.getColumnByUid(u,this.infiniteRenderMode),e=[].slice.call(n.parentElement.getElementsByClassName("e-uncheck")),f.visible&&!e.length?(n.checked=!0,this.checkState(n.parentElement.querySelector(".e-icons"),!0)):(n.checked=!1,this.checkState(n.parentElement.querySelector(".e-icons"),!1))}},n.prototype.checkState=function(n,i){i?t.classList(n,["e-check"],["e-uncheck"]):t.classList(n,["e-uncheck"],["e-check"])},n.prototype.createCheckBox=function(n,t,i){var r=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0),u,f;return this.parent.enableAdaptiveUI||!this.parent.enableRtl||r.classList.contains("e-rtl")||r.classList.add("e-rtl"),u=r.querySelector(".e-label"),f=r.querySelector("input"),ur(f,t),u.setAttribute("id",i+"label"),u.innerHTML=n,f.setAttribute("aria-labelledby",u.id),dh(i,r,"e-ccheck")},n.prototype.renderCheckbox=function(n){for(var i,r,o,u=this.parent.createElement("div"),s=this.ulElement.offsetHeight,f=0;f<n.length;f++)if(i=n[parseInt(f.toString(),10)],i.showInColumnChooser){r=this.parent.createElement("li",{className:"e-cclist e-cc",id:"e-ccli_"+i.uid});r.style.listStyle="none";var h=-1!==this.hideColumn.indexOf(i.uid),c=-1!==this.showColumn.indexOf(i.uid),e=this.createCheckBox(i.headerText,i.visible&&!h||c,i.uid);r.appendChild(e);this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?t.addClass([e],this.parent.cssClass.split(" ")):t.addClass([e],[this.parent.cssClass]));this.infiniteRenderMode&&this.infiniteDiv&&(r.style.height=ns(this.infiniteDiv,!0)+"px");u.appendChild(r)}this.infiniteRenderMode&&this.infiniteInitialLoad&&((o=this.infiniteLoadedElement).push.apply(o,[].slice.call(u.children)),this.infiniteInitialLoad=!1);nt(this.ulElement,[].slice.call(u.children));this.infiniteRenderMode&&!this.infiniteScrollAppendDiff&&(this.infiniteScrollAppendDiff=this.ulElement.offsetHeight-s);this.isInitialOpen&&this.updateIntermediateBtn()},n.prototype.columnChooserManualSearch=function(n){this.addcancelIcon();this.searchValue=n.target.value;this.stopTimer();this.startTimer(n)},n.prototype.startTimer=function(n){var t=this,i=t.flag||13===n.keyCode?0:500;this.timer=window.setInterval(function(){t.columnChooserSearch(t.searchValue,!0)},i)},n.prototype.stopTimer=function(){window.clearInterval(this.timer)},n.prototype.addcancelIcon=function(){this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon")&&(this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon").classList.add("e-cc-cancel"),this.dlgDiv.querySelector(".e-cc-cancel").setAttribute("title",this.l10n.getConstant("Clear")))},n.prototype.removeCancelIcon=function(){this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon")&&(this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon").classList.remove("e-cc-cancel"),this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon").setAttribute("title",this.l10n.getConstant("Search")))},n.prototype.mOpenDlg=function(){t.Browser.isDevice&&(this.dlgObj.element.querySelector(".e-cc-searchdiv")&&this.dlgObj.element.querySelector(".e-cc-searchdiv").classList.remove("e-input-focus"),this.dlgObj.element.querySelectorAll(".e-cc-chbox")[0]&&this.dlgObj.element.querySelectorAll(".e-cc-chbox")[0].focus());this.parent.enableAdaptiveUI&&this.dlgObj.element.querySelector(".e-cc-searchdiv")&&this.dlgObj.element.querySelector(".e-cc-searchdiv").classList.add("e-input-focus")},n.prototype.getModuleName=function(){return"columnChooser"},n.prototype.hideOpenedDialog=function(){for(var t=[].slice.call(document.getElementsByClassName("e-ccdlg")).filter(function(n){return n.classList.contains("e-popup-open")}),n=0,i=t.length;n<i;n++)(this.parent.element.id+"_ccdlg"!==t[parseInt(n.toString(),10)].id||t[parseInt(n.toString(),10)].classList.contains("e-dialog"))&&t[parseInt(n.toString(),10)].ej2_instances[0].hide()},n.prototype.beforeOpenColumnChooserEvent=function(){var n=gk({requestType:"beforeOpenColumnChooser",element:this.parent.element,columns:this.getColumns(),cancel:!1,searchOperator:this.parent.columnChooserSettings.operator,sortDirection:"None"},this.parent.enableColumnVirtualization?{}:{selectedColumns:[]});return this.parent.trigger(ng,n),this.searchOperator=n.searchOperator,this.sortDirection=n.sortDirection,this.parent.enableColumnVirtualization||(this.selectedColumns=n.selectedColumns),n},n.prototype.renderResponsiveChangeAction=function(n){this.responsiveDialogRenderer.action=n.action},n.prototype.showCustomColumnChooser=function(n){this.responsiveDialogRenderer.isCustomDialog=n;this.responsiveDialogRenderer.showResponsiveDialog()},n}();const yft=ejdashboard.excelexport;var hf=function(){function n(n,t){this.hideColumnInclude=!1;this.foreignKeyData={};this.parent=n;!n.parentDetails&&t&&(this.foreignKeyData=t)}return n.getQuery=function(n,t){var i=t.generateQuery(!0).requiresCount();return t.isRemote()&&(n.groupSettings.enableLazyLoading&&n.groupSettings.columns.length?i.lazyLoad=[]:i.take(n.pageSettings.totalRecordsCount)),i},n.prototype.getFData=function(n,t){return nu(t,{},n,this.foreignKeyData[t.field])[0]},n.prototype.getGridRowModel=function(n,t,i,r){var f,o,e,u,s;if(void 0===r&&(r=0),f=[],o=t.length,o){for(e=0;e<o;e++,r++)u={isExpand:!1},u.data=t[parseInt(e.toString(),10)],u.index=r,(i.childGrid||i.detailTemplate)&&("All"===i.hierarchyPrintMode?u.isExpand=!0:"Expanded"===i.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[parseInt(r.toString(),10)]&&(u.isExpand=i.expandedRows[parseInt(r.toString(),10)].isExpand)),s=new cr(u),s.cells=this.generateCells(n,i),f.push(s);this.processColumns(f)}return f},n.prototype.generateCells=function(n,t){var r=[],o,u,i,f,s;if(t.childGridLevel)for(o=t.childGridLevel,u=0;o>u;u++)r.push(this.generateCell({},e.Indent));for(i=0,f=n;i<f.length;i++)s=f[i],r.push(this.generateCell(s,e.Data));return r},n.prototype.getColumnData=function(n){var r,o=this,f=[],t=n.getForeignKeyColumns(),i,e;if(t.length){for(i=0;i<t.length;i++)e="result"in t[parseInt(i.toString(),10)].dataSource?new u.DataManager(t[parseInt(i.toString(),10)].dataSource.result):t[parseInt(i.toString(),10)].dataSource,f.push(e.executeQuery(new u.Query));r=Promise.all(f).then(function(n){for(var i=0;i<t.length;i++)o.foreignKeyData[t[parseInt(i.toString(),10)].field]=n[parseInt(i.toString(),10)].result})}return r},n.prototype.getHeaders=function(n,t){this.hideColumnInclude=!!t;this.colDepth=rc(n);for(var i=[],r=0;r<this.colDepth;r++)i[parseInt(r.toString(),10)]=new cr({}),i[parseInt(r.toString(),10)].cells=[];return i=this.processColumns(i),{rows:i=this.processHeaderCells(i,n),columns:this.generateActualColumns(n)}},n.prototype.getConvertedWidth=function(n){var t=parseFloat(n);return-1!==n.indexOf("%")?this.parent.element.getBoundingClientRect().width*t/100:t},n.prototype.generateActualColumns=function(n,t){var r,u,i;for(void 0===t&&(t=[]),r=0,u=n;r<u.length;r++)i=u[r],i.commands||(i.columns?(i.visible||this.hideColumnInclude)&&0!==this.getCellCount(i,0)&&this.generateActualColumns(i.columns,t):(i.visible||this.hideColumnInclude)&&t.push(i));return t},n.prototype.processHeaderCells=function(n,t){for(var r=t,i=0;i<r.length;i++)r[parseInt(i.toString(),10)].commands||(n=this.appendGridCells(r[parseInt(i.toString(),10)],n,0));return n},n.prototype.appendGridCells=function(n,t,i){var u;if(n.columns||!1===n.visible&&!this.hideColumnInclude||n.commands){if(n.columns){u=this.getCellCount(n,0);u&&t[parseInt(i.toString(),10)].cells.push(new bi({cellType:e.StackedHeader,column:n,colSpan:u}));for(var f=void 0,r=0,o=n.columns.length;r<o;r++)n.columns[parseInt(r.toString(),10)].visible&&!f&&(f=!0),t=this.appendGridCells(n.columns[parseInt(r.toString(),10)],t,i+1)}}else t[parseInt(i.toString(),10)].cells.push(this.generateCell(n,e.Header,this.colDepth-i,i));return t},n.prototype.generateCell=function(n,t,i,r){var u={visible:n.visible,isDataCell:t===e.Data,column:n,cellType:t,rowSpan:i,index:r};return(!u.rowSpan||u.rowSpan<2)&&delete u.rowSpan,new bi(u)},n.prototype.processColumns=function(n){var t=this.parent,u=[],i,f,r,o;for(t.enableColumnVirtualization&&(u=t.getColumnIndexesInView()),i=0,f=n.length;i<f;i++)if(t.allowGrouping)for(r=0,o=t.groupSettings.columns.length-1;r<o;r++)t.enableColumnVirtualization&&-1===u.indexOf(r)||n[parseInt(i.toString(),10)].cells.splice(0,0,this.generateCell({},e.HeaderIndent));return n},n.prototype.getCellCount=function(n,t){if(n.columns)for(var i=0;i<n.columns.length;i++)t=this.getCellCount(n.columns[parseInt(i.toString(),10)],t);else(n.visible||this.hideColumnInclude)&&t++;return t},n.prototype.checkAndExport=function(n,t){Object.keys(n).some(function(t){return!n[""+t]})||t()},n.prototype.failureHandler=function(n,t,i){var r=this;return function(){n[t.id]=!0;r.checkAndExport(n,i)}},n.prototype.createChildGrid=function(n,i,r,u){var f=new yv(this.parent.detailRowModule.getGridModel(n,i,r)),e,o;return n.isPrinting=!1,f.parentDetails={parentID:n.element.id,parentPrimaryKeys:n.getPrimaryKeyFieldNames(),parentKeyField:n.childGrid.queryString,parentKeyFieldValue:t.getValue(f.queryString,i.data),parentRowData:i.data},e=pi("child-grid"),o=t.createElement("div",{id:e}),o.style.display="none",document.body.appendChild(o),f.id=e,u[""+e]=!1,f.isExportGrid=!0,{childGrid:f,element:o}},n.prototype.getGridExportColumns=function(n){for(var r=[],t=0,i=n;t<i.length;t++)"checkbox"!==i[parseInt(t.toString(),10)].type&&r.push(i[parseInt(t.toString(),10)]);return r},n.prototype.getForeignKeyData=function(){return this.foreignKeyData},n}(),nd=function(){function n(n){this.valueFormatter=new wu(n);this.internationalization=new t.Internationalization(n)}return n.prototype.returnFormattedValue=function(n,i){return!t.isNullOrUndefined(n.value)&&n.value?this.valueFormatter.getFormatFunction(i)(n.value):""},n.prototype.formatCellValue=function(n){var r,i,u;return(n.isForeignKey&&(n.value=t.getValue(n.column.foreignKeyValue,nu(n.column,{},n.value)[0])),"number"===n.column.type&&void 0!==n.column.format&&""!==n.column.format)?("string"==typeof n.column.format&&(n.column.format={format:n.column.format}),n.value||0===n.value?this.internationalization.getNumberFormat(n.column.format)(n.value):""):"boolean"===n.column.type&&""!==n.value?n.value?"true":"false":"date"!==n.column.type&&"dateonly"!==n.column.type&&"datetime"!==n.column.type&&"time"!==n.column.type||void 0===n.column.format?(t.isNullOrUndefined(n.column.type)||t.isNullOrUndefined(n.value))&&t.isNullOrUndefined(n.value)?"":n.value.toString():("string"==typeof n.value&&(n.value=new Date(n.value)),"string"==typeof n.column.format)?(i=n.column.format,r="date"===n.column.type||"dateonly"===n.column.type?{type:"date",skeleton:i}:"time"===n.column.type?{type:"time",skeleton:i}:{type:"dateTime",skeleton:i},this.returnFormattedValue(n,r)):n.column.format instanceof Object&&void 0===n.column.format.type?n.value.toString():(u="date"===n.column.type||"dateonly"===n.column.type?{type:n.column.format.type,format:n.column.format.format,skeleton:n.column.format.skeleton}:"time"===n.column.type?{type:"time",format:n.column.format.format,skeleton:n.column.format.skeleton}:{type:"dateTime",format:n.column.format.format,skeleton:n.column.format.skeleton},this.returnFormattedValue(n,u))},n}(),td=function(){function n(n,t){this.book={};this.workSheet=[];this.rows=[];this.columns=[];this.styles=[];this.rowLength=1;this.expType="AppendToSheet";this.includeHiddenColumn=!1;this.isCsvExport=!1;this.isChild=!1;this.isElementIdChanged=!1;this.gridPool={};this.sheet={};this.grpFooterTemplates=[];this.footerTemplates=[];this.aggIndex=0;this.totalAggregates=0;this.parent=n;this.helper=new hf(n);this.locator=t;this.l10n=this.locator.getService("localization")}return n.prototype.getModuleName=function(){return"ExcelExport"},n.prototype.init=function(n){null!==n.element&&""===n.element.id&&(n.element.id=(new Date).toISOString(),this.isElementIdChanged=!0);this.parent=n;this.parent.isDestroyed||(this.isExporting=void 0,this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.footer=void 0,this.expType="AppendToSheet",this.includeHiddenColumn=!1,this.exportValueFormatter=new nd(n.locale),n.id=pi("main-grid"),this.gridPool[n.id]=!1)},n.prototype.Map=function(n,i,r,u,f,e){var s=n,h="isCsv",o;return this.gridPool={},(n.childGrid||n.detailTemplate)&&(t.isNullOrUndefined(i)||"None"!==i.hierarchyExportMode)&&(n.expandedRows=tc(n).expandedRows),o={requestType:"beforeExcelExport",gridObject:s,cancel:!1,isMultipleExport:r,workbook:u,isCsv:f,isBlob:e,isChild:this.isChild,grpFooterTemplates:this.grpFooterTemplates},s.trigger(pg,o),o.cancel?new Promise(function(n){return n()}):(this.parent.log("exporting_begin",this.getModuleName()),this.data=new fh(s),this.isExporting=!0,this.isBlob=o.isBlob,this.isChild=o.isChild,this.grpFooterTemplates=o.grpFooterTemplates,this.isCsvExport=!!o[""+h]&&o[""+h],ph(i)&&vb(i,s),this.processRecords(s,i,o.isMultipleExport,o.workbook))},n.prototype.exportingSuccess=function(n){this.isExporting=!1;this.parent.trigger(wg,this.isBlob?{promise:this.blobPromise}:{gridInstance:this.parent});this.parent.log("exporting_complete",this.getModuleName());n(this.book)},n.prototype.processRecords=function(n,i,r,f){var e=this,o,h,s;return t.isNullOrUndefined(i)||t.isNullOrUndefined(i.dataSource)?t.isNullOrUndefined(i)||"CurrentPage"!==i.exportType||this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&!this.parent.getDataModule().isRemote()?(o=[],h=hf.getQuery(n,this.data),this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&!this.parent.getDataModule().isRemote()&&(t.isNullOrUndefined(i)&&(i={hierarchyExportMode:"All"}),i.hierarchyExportMode="None"===i.hierarchyExportMode?"None":"All","All"===i.hierarchyExportMode&&(h.lazyLoad=[])),o.push(this.data.getData({},h)),o.push(this.helper.getColumnData(n)),new Promise(function(t,u){Promise.all(o).then(function(u){e.init(n);e.processInnerRecords(n,i,r,f,u[0]).then(function(){e.exportingSuccess(t)})}).catch(function(n){u(e.book);e.parent.trigger(ye,n)})})):new Promise(function(t){e.init(n);e.processInnerRecords(n,i,r,f,e.parent.getCurrentViewRecords());e.exportingSuccess(t)}):(i.dataSource=i.dataSource instanceof u.DataManager?i.dataSource:new u.DataManager(i.dataSource),s=i.query?i.query:new u.Query,(t.isNullOrUndefined(s.isCountRequired)||n.aggregates)&&(s.isCountRequired=!0),new Promise(function(t){i.dataSource.executeQuery(s).then(function(u){e.init(n);e.processInnerRecords(n,i,r,f,u).then(function(){e.exportingSuccess(t)})})}))},n.prototype.processInnerRecords=function(n,i,r,u,f){var e=this;this.groupedColLength=n.groupSettings.columns.length;var h,c=5,s=[],l=rc(n.columns),o=!t.isNullOrUndefined(i);return o&&!t.isNullOrUndefined(i.multipleExport)&&(this.expType=t.isNullOrUndefined(i.multipleExport.type)?"AppendToSheet":i.multipleExport.type,t.isNullOrUndefined(i.multipleExport.blankRows)||(c=i.multipleExport.blankRows)),t.isNullOrUndefined(u)?(this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.sheet.images=[]):"NewSheet"===this.expType?(this.workSheet=u.worksheets,this.rows=[],this.columns=[],this.sheet.images=[],this.styles=u.styles):(this.workSheet=[],this.rows=u.worksheets[0].rows,this.columns=u.worksheets[0].columns,this.styles=u.styles,this.sheet.images=u.worksheets[0].images,this.rowLength=this.rows[this.rows.length-1].index+c,this.rowLength++),o&&(t.isNullOrUndefined(r)?(t.isNullOrUndefined(i.header)||this.processExcelHeader(JSON.parse(JSON.stringify(i.header))),t.isNullOrUndefined(i.footer)||(this.footer=JSON.parse(JSON.stringify(i.footer)))):(t.isNullOrUndefined(i.header)||!r&&"NewSheet"!==this.expType||this.processExcelHeader(JSON.parse(JSON.stringify(i.header))),t.isNullOrUndefined(i.footer)||"AppendToSheet"===this.expType&&r||(this.footer=JSON.parse(JSON.stringify(i.footer))))),this.includeHiddenColumn=!!o&&i.includeHiddenColumn,new Promise(function(t){n.childGridLevel=0;s=e.processGridExport(n,i,f);e.globalResolve=t;e.gridPool[n.id]=!0;e.helper.checkAndExport(e.gridPool,e.globalResolve)}).then(function(){var c=[],a,v,f;return(e.organiseRows(s,s[0].index,c),e.rows=e.rows.concat(c),t.isNullOrUndefined(e.footer)||("AppendToSheet"===e.expType&&!r||"NewSheet"===e.expType)&&e.processExcelFooter(e.footer),e.columns.length>0&&(e.sheet.columns=e.columns),e.sheet.rows=e.rows,e.sheet.enableRtl=e.parent.enableRtl,e.parent.allowFiltering&&n.getVisibleColumns().length&&o&&i.enableFilter)&&(a=i.header?i.header.headerRows||i.header.rows.length:0,v={row:l+a,column:e.groupedColLength?e.groupedColLength+1:e.sheet.columns[0].index,lastRow:e.sheet.rows.length,lastColumn:e.sheet.columns.length},e.sheet.autoFilters=v),(e.workSheet.push(e.sheet),e.book.worksheets=e.workSheet,e.book.styles=e.styles,n.notify("finalPageSetup",e.book),r)||(e.isCsvExport?(o&&!t.isNullOrUndefined(i.separator)&&","!==i.separator&&(h=i.separator),f=new yft.Workbook(e.book,"csv",n.locale,t.defaultCurrencyCode,h),e.isBlob?e.blobPromise=f.saveAsBlob("text/csv"):o&&i.fileName?f.save(i.fileName):f.save("Export.csv")):(f=new yft.Workbook(e.book,"xlsx",n.locale,t.defaultCurrencyCode),e.isBlob?e.blobPromise=f.saveAsBlob("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"):o&&i.fileName?f.save(i.fileName):f.save("Export.xlsx")),e.isElementIdChanged&&(n.element.id=""),delete n.expandedRows),u})},n.prototype.organiseRows=function(n,t,i){var u,r,f;if(!n.length)return t;for(u=0;u<n.length;u++)r=n[parseInt(u.toString(),10)],f=r.childRows,f?(r.index=t++,delete r.childRows,i.push(r),t=this.organiseRows(f,t,i)):(r.index=t++,i.push(r));return t},n.prototype.processGridExport=function(n,i,r){var u=[];t.isNullOrUndefined(i)||t.isNullOrUndefined(i.theme)||(this.theme=i.theme);(n.childGrid||n.detailTemplate)&&!t.isNullOrUndefined(i)&&(n.hierarchyPrintMode=i.hierarchyExportMode||"Expanded");var f=new hf(n,this.helper.getForeignKeyData()),o=ph(i)?se(i.columns,n.enableColumnVirtualization):f.getGridExportColumns(n.columns),e=f.getHeaders(o,this.includeHiddenColumn),s=n.groupSettings.columns.length?n.groupSettings.columns.length-1:0;return u=this.processHeaderContent(n,e,s,u),u=!t.isNullOrUndefined(i)&&Object.keys(i).length&&t.isNullOrUndefined(i.dataSource)?"CurrentPage"!==i.exportType||n.groupSettings.enableLazyLoading&&!n.getDataModule().isRemote()?this.processRecordContent(n,r,e,i,void 0,u,f):this.processRecordContent(n,r,e,i,n.currentViewData,u,f):this.processRecordContent(n,r,e,i,void 0,u,f),n.notify(cn,{excelRows:u,type:"excel"}),this.capTemplate=void 0,this.footerTemplates=[],this.grpFooterTemplates=[],this.aggIndex=0,this.totalAggregates=0,u},n.prototype.processRecordContent=function(n,i,r,u,f,e,o){var s,h;return(s=!t.isNullOrUndefined(f)&&f.length?f:i.result,t.isNullOrUndefined(s.level)?this.processRecordRows(n,s,r,0,0,u,e,o):this.processGroupedRows(n,s,r,s.level,0,u,e,o),t.isNullOrUndefined(i.aggregates))||(t.isNullOrUndefined(f)||this.parent.groupSettings.enableLazyLoading?(h=i.result.GroupGuid?i.result.records:i.result,this.processAggregates(n,h,e)):this.processAggregates(n,i.result,e,f)),e},n.prototype.processGroupedRows=function(n,i,r,u,f,e,o,s){for(var y,b,l,it,et,v,d,ht,w=0,g=i;w<g.length;w++){var h=g[w],a=[],c={};c.index=1+u-1;var nt=n.getColumnByField(h.field),ct={value:h.key,column:nt,style:void 0,isForeignKey:nt.isForeignColumn()},ut=n.getColumnByField(h.field).headerText+": "+(nt.enableGroupByFormat?h.key:this.exportValueFormatter.formatCellValue(ct))+" - ";if(ut+=h.count>1?h.count+" items":h.count+" item",y={captionText:ut,type:this.isCsvExport?"CSV":"Excel",data:h},this.parent.trigger(rl,y),c.value=y.captionText,c.style=this.getCaptionThemeStyle(this.theme),t.isNullOrUndefined(y.style)||(c.style=this.mergeOptions(c.style,y.style)),b=new lh(n).generateRows(h),this.fillAggregates(n,b,i.level+i.childLevels-1,o,this.rowLength),a.push(c),o[o.length-1].cells.length>0){for(var k=i.level+i.childLevels+b[0].cells.length,p=0,tt=0,ft=o[o.length-1].cells;tt<ft.length;tt++)l=ft[tt],l.index<k&&(k=l.index),l.index>p&&(p=l.index),a[a.length-1].index!==l.index&&a.push(l);for(k-c.index>1&&(c.colSpan=k-c.index),it=Object.keys(b[0].data),et=it?it.length:0;p<r.columns.length-et+u+i.childLevels;)v={},v.index=p+1,v.style=this.getCaptionThemeStyle(this.theme),d={type:this.isCsvExport?"CSV":"Excel",data:h},this.parent.trigger(rl,d),t.isNullOrUndefined(d.style)||(v.style=this.mergeOptions(v.style,d.style)),a.push(v),p++}else{for(var ot=0,rt=0,st=r.columns;rt<st.length;rt++)st[rt].visible&&ot++;c.colSpan=i.childLevels+ot}(o[o.length-1].cells=a,this.rowLength++,this.groupedColLength<8&&u>1)&&(ht={outlineLevel:u-1,isCollapsed:!0},o[o.length-1].grouping=ht);!t.isNullOrUndefined(i.childLevels)&&i.childLevels>0?(this.processGroupedRows(n,h.items,r,h.items.level,f,e,o,s),this.processAggregates(n,h,o,void 0,u-1+i.childLevels,!0)):(f=this.processRecordRows(n,h.items,r,u-1,f,e,o,s),this.processAggregates(n,h,o,void 0,u-1,!0))}},n.prototype.processRecordRows=function(n,i,r,u,f,o,s,h){for(var l,ut,g,nt,ct,p,ft,k,b=1,tt=[],at=r.columns,it=0,et=h.getGridRowModel(at,i,n,f);it<et.length;it++){l=et[it];tt=[];f++;b=1;for(var d=void 0,rt=0,vt=l.cells.length;rt<vt;rt++)if(ut=l.cells[parseInt(rt.toString(),10)],ut.cellType===e.Data){var a=ut.column,ot=a.field,st=t.isNullOrUndefined(ot)?"":a.valueAccessor(ot,l.data,a),y=t.isNullOrUndefined(st)?"":st;if("dateonly"===a.type&&"string"==typeof y&&y&&(g=y.split(/[^0-9.]/),y=new Date(parseInt(g[0],10),parseInt(g[1],10)-1,parseInt(g[2],10))),nt=void 0,a.isForeignColumn&&a.isForeignColumn()&&(nt=h.getFData(y,a),y=t.getValue(a.foreignKeyValue,nt)),!t.isNullOrUndefined(y)){var v={},ht=b+u+n.childGridLevel,c={data:l.data,column:a,foreignKeyData:nt,value:y,style:void 0,colSpan:1,cell:v};(n.trigger(bg,c),t.isNullOrUndefined(c.image)||t.isNullOrUndefined(c.image.base64)||(d=this.setImage(c,ht),c.image.height&&""!==c.value&&(d+=30)),t.isNullOrUndefined(c.hyperLink)||(c.cell.hyperlink={target:c.hyperLink.target},c.value=c.hyperLink.displayText||c.value),(v=c.cell).index=ht,v.value=c.value,""===c.data&&n.childGridLevel&&1===b)&&(c={style:{hAlign:"left"}},v.colSpan=n.getVisibleColumns().length,v.value=this.l10n.getConstant("EmptyRecord"));(c.colSpan>1&&(v.colSpan=c.colSpan),t.isNullOrUndefined(c.style))?v.style={name:n.element.id+"column"+(b+u)}:(ct=this.getColumnStyle(n,b+u),v.style=this.mergeOptions(this.styles[parseInt(ct.toString(),10)],c.style));tt.push(v)}b++}if(p={index:this.rowLength++,cells:tt},t.isNullOrUndefined(d)||(p.height=d),this.groupedColLength&&this.groupedColLength<8&&u+1>0?(p.grouping={outlineLevel:u+1,isCollapsed:!0},s.push(p)):s.push(p),(l.isExpand||this.isChild)&&(!t.isNullOrUndefined(n.childGrid)||!t.isNullOrUndefined(n.detailTemplate)))if(t.isNullOrUndefined(n.childGrid))k={parentRow:l,row:p,value:{},action:"excelexport",gridInstance:n},this.parent.trigger(bp,k),p.childRows=this.processDetailTemplate(k);else{n.isPrinting=!0;var yt=!t.isNullOrUndefined(o)&&o.exportType?o.exportType:"AllPages",lt=this.helper.createChildGrid(n,l,yt,this.gridPool),w=lt.childGrid,pt=lt.element;w.actionFailure=h.failureHandler(this.gridPool,w,this.globalResolve);w.childGridLevel=n.childGridLevel+1;ft=t.extend(o,{columns:null,dataSource:null,query:null});k={childGrid:w,row:l,exportProperties:ft};this.parent.trigger(wp,k);w.beforeDataBound=this.childGridCell(p,w,ft,l);w.appendTo(pt)}n.notify(iw,{rowObj:l,type:"excel",excelRows:s})}return f},n.prototype.processDetailTemplate=function(n){var r,o,u=this,f=[],h,s,i,e;if(n.value.columnHeader||n.value.rows){if(h=function(n,i){var f={},e;return(t.isNullOrUndefined(n.index)&&(n.index=o,o++),f.index=n.index+2,t.isNullOrUndefined(n.value)||(f.value=n.value),t.isNullOrUndefined(n.colSpan)||(f.colSpan=n.colSpan),t.isNullOrUndefined(n.rowSpan)||(f.rowSpan=n.rowSpan),f.style=i?u.getHeaderThemeStyle(u.theme):u.getRecordThemeStyle(u.theme),t.isNullOrUndefined(n.style))||(e={fontColor:n.style.fontColor,fontName:n.style.fontName,fontSize:n.style.fontSize,hAlign:n.style.excelHAlign,vAlign:n.style.excelVAlign,rotation:n.style.excelRotation,bold:n.style.bold,indent:n.style.indent,italic:n.style.italic,underline:n.style.underline,backColor:n.style.backColor,wrapText:n.style.wrapText,borders:n.style.excelBorders,numberFormat:n.style.excelNumberFormat,type:n.style.excelType,strikeThrough:n.style.strikeThrough},f.style=u.mergeOptions(e,f.style)),t.isNullOrUndefined(n.image)||t.isNullOrUndefined(n.image.base64)||(n.rowSpan>1?u.setImage(n,f.index):(r=u.setImage(n,f.index),n.image.height&&""!==n.value&&(r+=30))),t.isNullOrUndefined(n.hyperLink)||(f.hyperlink={target:n.hyperLink.target},f.value=n.hyperLink.displayText),f},s=function(n,i){var c=[],e,l,a,s;for(o=0,e=0;e<n.cells.length;e++)l=n.cells[parseInt(e.toString(),10)],a=h(l,i),c.push(a);s={index:u.rowLength++,cells:c};t.isNullOrUndefined(r)||(s.height=r,r=null);f.push(s)},n.value.columnHeader)for(i=0;i<n.value.columnHeader.length;i++)s(n.value.columnHeader[parseInt(i.toString(),10)],!0);if(n.value.rows)for(i=0;i<n.value.rows.length;i++)s(n.value.rows[parseInt(i.toString(),10)])}else n.value.image?(r=this.setImage(n.value,2),e={index:this.rowLength++,cells:[{index:2,style:this.getRecordThemeStyle(this.theme)}]},t.isNullOrUndefined(r)||(e.height=r,r=null),f.push(e)):n.value.text?(e={index:this.rowLength++,cells:[{index:2,value:n.value.text,style:this.getRecordThemeStyle(this.theme)}]},f.push(e)):n.value.hyperLink&&(e={index:this.rowLength++,cells:[{index:2,hyperlink:{target:n.value.hyperLink.target},value:n.value.hyperLink.displayText,style:this.getRecordThemeStyle(this.theme)}]},f.push(e));for(i=0;i<f.length;i++)f[parseInt(i.toString(),10)].grouping={outlineLevel:1,isCollapsed:!n.parentRow.isExpand,isHidden:!n.parentRow.isExpand};return f},n.prototype.setImage=function(n,i){t.isNullOrUndefined(this.sheet.images)&&(this.sheet.images=[]);var r={image:n.image.base64,row:this.rowLength,column:i,lastRow:this.rowLength,lastColumn:i};return n.image.width&&n.image.height&&(r.width=n.image.width,r.height=n.image.height),this.sheet.images.push(r),this.columns[i-1].width=n.image.width||this.columns[i-1].width,n.image.height||50},n.prototype.childGridCell=function(n,i,r,u){var f=this;return function(e){i.beforeDataBound=null;e.cancel=!0;0===e.result.length&&(e.result=[""]);n.childRows=f.processGridExport(i,r,e);for(var h=f.parent.groupSettings.columns.length,s=n.childRows,o=0;o<s.length;o++)s[parseInt(o.toString(),10)].grouping={outlineLevel:h+i.childGridLevel,isCollapsed:!u.isExpand,isHidden:!u.isExpand};return i.destroy(),t.detach(i.element),f.gridPool[i.id]=!0,f.helper.checkAndExport(f.gridPool,f.globalResolve),n}},n.prototype.processAggregates=function(n,i,r,u,f,e){var l=new ch(n),s=l.getColumns(),o,h,c;return s=s.filter(function(n){return t.isNullOrUndefined(n.commands)&&"checkbox"!==n.type}),n.aggregates.length&&this.parent!==n&&n.aggregateModule.prepareSummaryInfo(),(o=t.isNullOrUndefined(u)?i:u,void 0===f&&(f=0),n.groupSettings.columns.length>0&&e)?(h=new co(n).generateRows(o,{level:o.level}),h.length>0&&(r=this.fillAggregates(n,h,f,r))):(f=n.groupSettings.columns.length>0&&!e?n.groupSettings.columns.length:f,c=l.generateRows(o,i.aggregates,null,null,s),c.length>0&&!e&&(f=n.groupSettings.columns.length?f-1:f,r=this.fillAggregates(n,c,f,r))),r},n.prototype.fillAggregates=function(n,i,r,u,f){for(var a,g,v,y,p,nt,ft,l=0,w=i;l<w.length;l++){for(var s=w[l],c=[],tt=!0,b=0,k=0,it=s.cells;k<it.length;k++){var o=it[k],h={},d={};if(t.isNullOrUndefined(o.attributes["data-index"])||(d=this.parent.getColumnByIndex(o.attributes["data-index"])),o.cellType!==e.DetailFooterIntent&&"checkbox"!==d.type&&!d.commands&&(o.visible||this.includeHiddenColumn))if(b++,o.isDataCell){tt=!1;var rt=!t.isNullOrUndefined(o.column.footerTemplate),ut=!t.isNullOrUndefined(o.column.groupFooterTemplate),et=!t.isNullOrUndefined(o.column.groupCaptionTemplate);if(h.index=b+r+n.childGridLevel,rt)h.value=this.getAggreateValue(n,e.Summary,o.column.footerTemplate,o,s);else if(ut)h.value=this.getAggreateValue(n,e.GroupSummary,o.column.groupFooterTemplate,o,s);else if(et)h.value=this.getAggreateValue(n,e.CaptionSummary,o.column.groupCaptionTemplate,o,s);else for(a=0,g=Object.keys(s.data[o.column.field]);a<g.length;a++)g[a]===o.column.type&&(t.isNullOrUndefined(s.data[o.column.field].Sum)?t.isNullOrUndefined(s.data[o.column.field].Average)?t.isNullOrUndefined(s.data[o.column.field].Max)?t.isNullOrUndefined(s.data[o.column.field].Min)?t.isNullOrUndefined(s.data[o.column.field].Count)?t.isNullOrUndefined(s.data[o.column.field].TrueCount)?t.isNullOrUndefined(s.data[o.column.field].FalseCount)?t.isNullOrUndefined(s.data[o.column.field].Custom)||(h.value=s.data[o.column.field].Custom):h.value=s.data[o.column.field][o.column.field+" - falsecount"]:h.value=s.data[o.column.field][o.column.field+" - truecount"]:h.value=s.data[o.column.field][o.column.field+" - count"]:h.value=s.data[o.column.field][o.column.field+" - min"]:h.value=s.data[o.column.field][o.column.field+" - max"]:h.value=s.data[o.column.field][o.column.field+" - average"]:h.value=s.data[o.column.field][o.column.field+" - sum"]);h.style=this.getCaptionThemeStyle(this.theme);this.aggregateStyle(o.column,h.style,o.column.field);v=null!=o.attributes.class?o.attributes.class.toString():"";v&&(h.style.hAlign=v.indexOf("e-rightalign")>-1?"right":v.indexOf("e-centeralign")>-1?"center":"left");y={row:s,type:rt?"Footer":ut?"GroupFooter":"GroupCaption",style:h,cell:o};this.parent.trigger(lw,y);c.push(h)}else void 0===f&&(h.index=b+r+n.childGridLevel,h.style=this.getCaptionThemeStyle(this.theme),y={row:s,type:t.isNullOrUndefined(o.column.footerTemplate)?t.isNullOrUndefined(o.column.groupFooterTemplate)?"GroupCaption":"GroupFooter":"Footer",style:h,cell:o},this.parent.trigger(lw,y),c.push(h))}t.isNullOrUndefined(f)?(p={},nt="grouping",this.groupedColLength<8&&this.groupedColLength>0&&(!n.groupSettings.enableLazyLoading||!t.isNullOrUndefined(u[u.length-1][""+nt]))?(ft={outlineLevel:u[u.length-1][""+nt].outlineLevel,isCollapsed:!0},p={index:this.rowLength++,cells:c,grouping:ft}):p={index:this.rowLength++,cells:c},tt||u.push(p)):u.push({index:f,cells:c})}return u},n.prototype.aggregateStyle=function(n,i,r){var f=this.parent.getColumnByField(r),u;"object"==typeof n.format?(u=n.format,i.numberFormat=t.isNullOrUndefined(u.format)?u.skeleton:u.format,t.isNullOrUndefined(u.type)||(i.type=u.type.toLowerCase())):i.numberFormat=n.format;!t.isNullOrUndefined(f)&&t.isNullOrUndefined(i.type)&&(i.type=f.type.toLowerCase())},n.prototype.getAggreateValue=function(n,i,r,u,f){var o,h={},s;return h[t.getEnumValue(e,u.cellType)]=t.compile(r),s=f.data[u.column.field?u.column.field:u.column.columnName],(this.parent.isReact||this.parent.isVue||this.parent.isVue3||this.parent.isAngular)&&"string"!=typeof u.column.footerTemplate&&"string"!=typeof u.column.groupFooterTemplate&&"string"!=typeof u.column.groupCaptionTemplate?(o=s[u.column.type],t.isNullOrUndefined(o)?"":o):(o=h[t.getEnumValue(e,u.cellType)](s,this.parent),this.parent.isVue3&&!t.isNullOrUndefined(o[1])?o[1].textContent:t.isNullOrUndefined(o[0])?"":o[0].textContent)},n.prototype.mergeOptions=function(n,t){for(var u={},r=Object.keys(n),i=0;i<r.length;i++)"name"!==r[parseInt(i.toString(),10)]&&(u[r[parseInt(i.toString(),10)]]=n[r[parseInt(i.toString(),10)]]);for(r=Object.keys(t),i=0;i<r.length;i++)"name"!==r[parseInt(i.toString(),10)]&&(u[r[parseInt(i.toString(),10)]]=t[r[parseInt(i.toString(),10)]]);return u},n.prototype.getColumnStyle=function(n,t){for(var r=0,i=0,u=this.styles;i<u.length;i++){if(u[i].name===n.element.id+"column"+t)return r;r++}},n.prototype.headerRotation=function(n){var t=n.style.rotation;t<=90&&t>=0?n.style.hAlign="Left":(t>90&&t<=180||(t=180),n.style.hAlign="Right");n.style.rotation=t},n.prototype.processHeaderContent=function(n,i,r,u){var nt,a=i.rows,rt=i.columns,v=[],b,y,l,p,c,w,s,g,tt,it;if(r>0)for(b=0;b!==r;)this.columns.push({index:b+1,width:30}),b++;for(y=0;y<rt.length;y++)this.parseStyles(n,rt[parseInt(y.toString(),10)],this.getRecordThemeStyle(this.theme),r+y+1);for(l=0;l<a.length;l++){for(var h=1+r,ut=[],k=0;k<a[parseInt(l.toString(),10)].cells.length;k++){var d={},o={},f=a[parseInt(l.toString(),10)].cells[parseInt(k.toString(),10)];if(!f.isSpanned&&f.cellType!==e.HeaderIndent&&f.cellType!==e.DetailHeader){for(p={contains:!0,index:1};p.contains;)if(h=(p=this.getIndex(v,1,h)).index,!p.contains){o.index=p.index+n.childGridLevel;break}if(!t.isNullOrUndefined(f.rowSpan)&&1!==f.rowSpan)for(o.rowSpan=f.rowSpan,c=1;c<f.rowSpan+1;c++)w={rowIndex:0,columnIndex:0,colSpan:0},w.rowIndex=c,w.columnIndex=h,w.colSpan=f.colSpan||1,v.push(w);if(t.isNullOrUndefined(f.colSpan)||1===f.colSpan||(o.colSpan=f.colSpan,h=h+o.colSpan-1),o.value=f.column.headerText,d=this.getHeaderThemeStyle(this.theme),t.isNullOrUndefined(f.column.textAlign)||(d.hAlign=f.column.textAlign.toLowerCase()),t.isNullOrUndefined(f.column.headerTextAlign)||(d.hAlign=f.column.headerTextAlign.toLowerCase()),s={cell:o,gridCell:f,style:d},n.trigger(kg,s),f.cellType===e.Header&&o.colSpan>1){for(h=h+o.colSpan-1,g=1;g<o.colSpan;g++)tt=k+g,tt<a[parseInt(l.toString(),10)].cells.length&&(a[parseInt(l.toString(),10)].cells[parseInt(tt.toString(),10)].isSpanned=!0);for(c=0;c<v.length;c++)v[parseInt(c.toString(),10)].columnIndex===o.index&&(v[parseInt(c.toString(),10)].colSpan=o.colSpan)}s.style.rotation&&this.headerRotation(s);t.isNullOrUndefined(s.image)||t.isNullOrUndefined(s.image.base64)||(nt=this.setImage(s,h));t.isNullOrUndefined(s.hyperLink)||(s.cell.hyperlink={target:s.hyperLink.target},o.value=s.hyperLink.displayText||o.value);o.style=s.style;ut.push(o);h++}}it={index:this.rowLength++,cells:ut};t.isNullOrUndefined(nt)||(it.height=nt);u.push(it)}return u},n.prototype.getHeaderThemeStyle=function(n){var i={fontSize:12,borders:{color:"#E0E0E0"},bold:!0};return t.isNullOrUndefined(n)||t.isNullOrUndefined(n.header)||(i=this.updateThemeStyle(n.header,i)),i},n.prototype.updateThemeStyle=function(n,i){return t.extend(i,n)},n.prototype.getCaptionThemeStyle=function(n){var i={fontSize:13,backColor:"#F6F6F6"};return t.isNullOrUndefined(n)||t.isNullOrUndefined(n.caption)||(i=this.updateThemeStyle(n.caption,i)),i},n.prototype.getRecordThemeStyle=function(n){var i={fontSize:13,borders:{color:"#E0E0E0"}};return t.isNullOrUndefined(n)||t.isNullOrUndefined(n.record)||(i=this.updateThemeStyle(n.record,i)),i},n.prototype.processExcelHeader=function(n){var u,i,r;if(!t.isNullOrUndefined(n.rows)&&("NewSheet"===this.expType||1===this.rowLength))for(this.rowLength=void 0===n.headerRows?n.rows.length:n.headerRows,u=this.rowLength<n.rows.length?this.rowLength:n.rows.length,this.rowLength++,i=0;i<u;i++)r=n.rows[parseInt(i.toString(),10)],(null===r.index||t.isNullOrUndefined(r.index))&&(r.index=i+1),this.updatedCellIndex(r)},n.prototype.updatedCellIndex=function(n){for(var r,u=n.cells.length,i=0;i<u;i++)r=n.cells[parseInt(i.toString(),10)],(null===r.index||t.isNullOrUndefined(r.index))&&(r.index=i+1);this.rows.push(n)},n.prototype.processExcelFooter=function(n){var r,u,i;if(!t.isNullOrUndefined(n.rows))for(r=void 0,void 0===n.footerRows?this.rowLength+=n.rows.length:n.footerRows>n.rows.length?(this.rowLength+=n.footerRows-n.rows.length,r=n.rows.length):r=n.footerRows,u=0;u<r;u++)i=n.rows[parseInt(u.toString(),10)],null===i.index||void 0===i.index?i.index=this.rowLength++:i.index+=this.rowLength,this.updatedCellIndex(i)},n.prototype.getIndex=function(n,t,i){for(var u,r=0,f=n;r<f.length;r++)if(u=f[r],u.rowIndex===t&&u.columnIndex===i)return{contains:!0,index:i+=u.colSpan||1};return{contains:!1,index:i}},n.prototype.parseStyles=function(n,i,r,u){if(!t.isNullOrUndefined(i.format))if("object"==typeof i.format){var f=i.format;r.numberFormat=t.isNullOrUndefined(f.format)?f.skeleton:f.format;t.isNullOrUndefined(f.type)||(r.type="dateonly"===f.type?"date":f.type.toLowerCase())}else r.numberFormat=i.format,r.type="dateonly"===i.type?"date":i.type;t.isNullOrUndefined(i.textAlign)||(r.hAlign=i.textAlign.toLowerCase());Object.keys(r).length>0&&(r.name=n.element.id+"column"+u,this.styles.push(r));n.childGridLevel||(t.isNullOrUndefined(i.width)||"auto"===i.width?this.columns.push({index:u+n.childGridLevel,width:null}):this.columns.push({index:u+n.childGridLevel,width:"number"==typeof i.width?i.width:this.helper.getConvertedWidth(i.width)}))},n.prototype.destroy=function(){},n}();const f=ejdashboard.pdfexport;var id=function(){function n(n){this.hideColumnInclude=!1;this.currentViewData=!1;this.customDataSource=!1;this.isGrouping=!1;this.headerOnPages=[];this.drawPosition={xPosition:0,yPosition:0};this.parent=n;this.helper=new hf(n);this.gridPool={}}return n.prototype.getModuleName=function(){return"PdfExport"},n.prototype.init=function(n){this.exportValueFormatter=new nd(n.locale);this.pdfDocument=void 0;this.hideColumnInclude=!1;this.currentViewData=!1;this.parent=n;this.isGrouping=!1;this.isExporting=!0;n.id=pi("main-grid");this.gridPool[n.id]=!1;this.pdfPageSettings=new f.PdfPageSettings},n.prototype.exportWithData=function(n,i,r,u,e,o,s){var h=this;this.init(n);this.pdfDocument=t.isNullOrUndefined(i)?new f.PdfDocument:i;this.processExport(n,u,e,o).then(function(){h.isExporting=!1;n.trigger(kp,h.isBlob?{promise:h.blobPromise}:{gridInstance:h.parent});h.parent.log("exporting_complete",h.getModuleName());r(h.pdfDocument)}).catch(function(n){s(h.pdfDocument);h.parent.trigger(ye,n)})},n.prototype.Map=function(n,i,r,e,o){var s=this,c,h,l,a;return(this.data=new fh(this.parent),this.isBlob=o,this.gridPool={},c=i&&i.query?i.query:new u.Query,(n.childGrid||n.detailTemplate)&&(t.isNullOrUndefined(i)||"None"!==i.hierarchyExportMode)&&(n.expandedRows=tc(n).expandedRows),h={requestType:"beforePdfExport",cancel:!1,headerPageNumbers:[],gridDrawPosition:{xPosition:0,yPosition:0},generateQuery:!1},h.gridObject=n,n.trigger(dg,h),!0===h.cancel)?new Promise(function(n){return n()}):(ph(i)&&vb(i,n),h.generateQuery&&(c=hf.getQuery(n,this.data)),this.headerOnPages=h.headerPageNumbers,this.drawPosition=h.gridDrawPosition,this.parent.log("exporting_begin",this.getModuleName()),t.isNullOrUndefined(i)||t.isNullOrUndefined(i.dataSource))?t.isNullOrUndefined(i)||"CurrentPage"!==i.exportType||this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&!this.parent.getDataModule().isRemote()?(l=[],a=hf.getQuery(n,this.data),this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&!this.parent.getDataModule().isRemote()&&(t.isNullOrUndefined(i)&&(i={hierarchyExportMode:"All"}),i.hierarchyExportMode="None"===i.hierarchyExportMode?"None":"All","All"===i.hierarchyExportMode&&(a.lazyLoad=[])),l.push(this.data.getData({},a)),l.push(this.helper.getColumnData(n)),new Promise(function(u,o){Promise.all(l).then(function(h){s.init(n);s.pdfDocument=t.isNullOrUndefined(e)?new f.PdfDocument:e.document;s.processExport(n,h[0],i,r,e).then(function(t){s.isExporting=!1;n.trigger(kp,s.isBlob?{promise:s.blobPromise}:{gridInstance:s.parent});s.parent.log("exporting_complete",s.getModuleName());i&&i.multipleExport&&"AppendToPage"===i.multipleExport.type?u(t):u(s.pdfDocument)}).catch(function(n){o(s.pdfDocument);s.parent.trigger(ye,n)})})})):new Promise(function(t,u){s.exportWithData(n,e,t,s.parent.getCurrentViewRecords(),i,r,u)}):(i.dataSource=i.dataSource instanceof u.DataManager?i.dataSource:new u.DataManager(i.dataSource),(t.isNullOrUndefined(c.isCountRequired)||n.aggregates)&&(c.isCountRequired=!0),new Promise(function(t,u){i.dataSource.executeQuery(c).then(function(f){s.exportWithData(n,e,t,f,i,r,u)})}))},n.prototype.processExport=function(n,i,r,u,e){var h,o=this,c=e&&r&&r.multipleExport&&"AppendToPage"===r.multipleExport.type?null:this.pdfDocument.sections.add(),s;return this.processSectionExportProperties(c,r),s=e&&r&&r.multipleExport&&"AppendToPage"===r.multipleExport.type?e.result.page:c.pages.add(),new Promise(function(t){h=o.processGridExport(n,i,r);o.globalResolve=t;o.gridPool[n.id]=!0;o.helper.checkAndExport(o.gridPool,o.globalResolve)}).then(function(){var i,l,a=o.drawPosition.xPosition,c;return(e&&r&&r.multipleExport&&"AppendToPage"===r.multipleExport.type?(i=e.result.bounds.y+e.result.bounds.height,r.multipleExport.blankSpace&&(i=e.result.bounds.y+e.result.bounds.height+r.multipleExport.blankSpace)):i=o.drawPosition.yPosition,u)?(c=new f.PdfGridLayoutFormat,c.layout=f.PdfLayoutType.Paginate,c.break=f.PdfLayoutBreakType.FitPage,c.paginateBounds=new f.RectangleF(0,0,s.getClientSize().width,s.getClientSize().height),l=h.draw(s,a,i,c)):l=h.draw(s,a,i),o.drawHeader(r),u||(o.isBlob?o.blobPromise=o.pdfDocument.save():!t.isNullOrUndefined(r)&&r.fileName?o.pdfDocument.save(r.fileName):o.pdfDocument.save("Export.pdf"),o.pdfDocument.destroy(),delete n.expandedRows),r&&r.multipleExport&&"AppendToPage"===r.multipleExport.type?{document:o.pdfDocument,result:l}:o.pdfDocument})},n.prototype.processSectionExportProperties=function(n,i){return t.isNullOrUndefined(n)||t.isNullOrUndefined(i)||t.isNullOrUndefined(i.pageOrientation)&&t.isNullOrUndefined(i.pageSize)||(this.pdfPageSettings.orientation="Landscape"===i.pageOrientation?f.PdfPageOrientation.Landscape:f.PdfPageOrientation.Portrait,this.pdfPageSettings.size=this.getPageSize(i.pageSize),n.setPageSettings(this.pdfPageSettings)),n},n.prototype.processGridExport=function(n,i,r){var p=!0,l,u,k,h,a;t.isNullOrUndefined(r)||(this.gridTheme=r.theme,p=!!t.isNullOrUndefined(r.allowHorizontalOverflow)||r.allowHorizontalOverflow);var c=new hf(n,this.helper.getForeignKeyData()),o=this.processExportProperties(r,i.result),v=ph(r)?se(r.columns,n.enableColumnVirtualization):c.getGridExportColumns(n.columns);v=v.filter(function(n){return t.isNullOrUndefined(n.commands)});l=!1;n.groupSettings.columns.length&&(l=!0);(n.childGrid||n.detailTemplate)&&!t.isNullOrUndefined(r)&&(n.hierarchyPrintMode=r.hierarchyExportMode||"Expanded");var e=new f.PdfGrid,w=this.getHeaderThemeStyle(),s=w.border,d=w.font,g=w.brush,b=c.getHeaders(v,this.hideColumnInclude),y=b.columns;return e=this.processGridHeaders(n.groupSettings.columns.length,e,b.rows,y,s,d,g,n,p,v),this.setColumnProperties(y,e,c,n,p),u=this.getSummaryCaptionThemeStyle(),!t.isNullOrUndefined(o)&&o.length?(l?(t.isNullOrUndefined(u.border)||(s=u.border),this.processGroupedRecords(e,o,y,n,s,0,u.font,u.brush,u.backgroundBrush,i,r,c,0)):this.processRecord(s,y,n,o,e,0,r,c,0),t.isNullOrUndefined(i.aggregates))||(h=new ch(n),a=h.getColumns(),a=a.filter(function(n){return t.isNullOrUndefined(n.commands)&&"checkbox"!==n.type}),n.aggregates.length&&this.parent!==n&&n.aggregateModule.prepareSummaryInfo(),k=this.customDataSource?h.generateRows(o,i.aggregates,null,null,a):this.currentViewData?h.generateRows(this.parent.getCurrentViewRecords(),i.aggregates):l?h.generateRows(o.records,i.aggregates):h.generateRows(i.result,i.aggregates,null,null,a),this.processAggregates(k,e,s,u.font,u.brush,u.backgroundBrush,!1,null,null,null,!l)):e.rows.addRow().style.setBorder(s),e},n.prototype.getSummaryCaptionThemeStyle=function(){var n,u,i;if(t.isNullOrUndefined(this.gridTheme)||t.isNullOrUndefined(this.gridTheme.caption))return{font:new f.PdfStandardFont(f.PdfFontFamily.Helvetica,9.75),brush:new f.PdfSolidBrush(new f.PdfColor(0,0,0)),backgroundBrush:new f.PdfSolidBrush(new f.PdfColor(246,246,246))};var e=t.isNullOrUndefined(this.gridTheme.caption.fontSize)?9.75:this.gridTheme.caption.fontSize,o=t.isNullOrUndefined(this.gridTheme.caption.fontName)?f.PdfFontFamily.Helvetica:this.getFontFamily(this.gridTheme.caption.fontName),s=this.getFontStyle(this.gridTheme.caption),r=new f.PdfColor(0,0,0);return t.isNullOrUndefined(this.gridTheme.caption.fontColor)||(n=this.hexToRgb(this.gridTheme.caption.fontColor),r=new f.PdfColor(n.r,n.g,n.b)),u=this.gridTheme.caption.border?this.getBorderStyle(this.gridTheme.caption.border):null,i=new f.PdfStandardFont(o,e,s),t.isNullOrUndefined(this.gridTheme.caption.font)||(i=this.gridTheme.caption.font),{font:i,brush:new f.PdfSolidBrush(r),backgroundBrush:new f.PdfSolidBrush(new f.PdfColor(246,246,246)),border:u}},n.prototype.getGridPdfFont=function(n){var r="fontFamily",u="fontSize",e="fontStyle",o="isTrueType",i=0,v,w,d;if(n.header&&n.header.font){var s=n.header.font[""+r],l=n.header.font[""+u],a=n.header.font[""+e];(i=t.isNullOrUndefined(f.PdfFontStyle[""+a])?0:f.PdfFontStyle[""+a],n.header.font[""+o])?n.header.font=new f.PdfTrueTypeFont(s,l,i):(v=t.isNullOrUndefined(s)?f.PdfFontFamily.Helvetica:this.getFontFamily(s),n.header.font=new f.PdfStandardFont(v,l,i))}if(n.caption&&n.caption.font){var h=n.caption.font[""+r],y=n.caption.font[""+u],p=n.caption.font[""+e];(i=t.isNullOrUndefined(f.PdfFontStyle[""+p])?0:f.PdfFontStyle[""+p],n.caption.font[""+o])?n.caption.font=new f.PdfTrueTypeFont(h,y,i):(w=t.isNullOrUndefined(h)?f.PdfFontFamily.Helvetica:this.getFontFamily(h),n.caption.font=new f.PdfStandardFont(w,y,i))}if(n.record&&n.record.font){var c=n.record.font[""+r],b=n.record.font[""+u],k=n.record.font[""+e];(i=t.isNullOrUndefined(f.PdfFontStyle[""+k])?0:f.PdfFontStyle[""+k],n.record.font[""+o])?n.record.font=new f.PdfTrueTypeFont(c,b,i):(d=t.isNullOrUndefined(c)?f.PdfFontFamily.Helvetica:this.getFontFamily(c),n.record.font=new f.PdfStandardFont(d,b,i))}},n.prototype.getHeaderThemeStyle=function(){var r=new f.PdfBorders,n,i;if(t.isNullOrUndefined(this.gridTheme)||t.isNullOrUndefined(this.gridTheme.header))return r.all=new f.PdfPen(new f.PdfColor(234,234,234)),{border:r,font:new f.PdfStandardFont(f.PdfFontFamily.Helvetica,10.5),brush:new f.PdfSolidBrush(new f.PdfColor(102,102,102))};var e=t.isNullOrUndefined(this.gridTheme.header.fontName)?f.PdfFontFamily.Helvetica:this.getFontFamily(this.gridTheme.header.fontName),o=this.getFontStyle(this.gridTheme.header),s=t.isNullOrUndefined(this.gridTheme.header.fontSize)?10.5:this.gridTheme.header.fontSize,u=new f.PdfColor;return t.isNullOrUndefined(this.gridTheme.header.fontColor)||(n=this.hexToRgb(this.gridTheme.header.fontColor),u=new f.PdfColor(n.r,n.g,n.b)),i=new f.PdfStandardFont(e,s,o),t.isNullOrUndefined(this.gridTheme.header.font)||(i=this.gridTheme.header.font),{border:this.getBorderStyle(this.gridTheme.header.border),font:i,brush:new f.PdfSolidBrush(u)}},n.prototype.processGroupedRecords=function(n,i,r,u,e,o,s,h,c,l,a,v,y){for(var w=this,p=o,g=function(o){var b=n.rows.addRow(),d=u.getColumnByField(o.field),g={value:o.key,column:d,style:void 0,isForeignKey:d.isForeignColumn()},nt={captionText:u.getColumnByField(o.field).headerText+": "+(d.enableGroupByFormat?o.key:k.exportValueFormatter.formatCellValue(g))+" - "+o.count+(i.count>1?" items":" item"),type:"PDF",data:o,style:void 0};k.parent.trigger(rl,nt,function(k){var d,g;b.cells.getCell(p).value=k.captionText;b.cells.getCell(p).style.stringFormat=new f.PdfStringFormat(f.PdfTextAlignment.Left);b.style.setBorder(e);b.style.setFont(s);b.style.setTextBrush(h);b.style.setBackgroundBrush(c);t.isNullOrUndefined(k.style)||w.processCellStyle(b.cells.getCell(p),k);g=new lh(u);d=t.isNullOrUndefined(o.items.records)?g.generateRows(o.items,o):g.generateRows(o.items.records,o);t.isNullOrUndefined(d)||0!==d.length||(b.cells.getCell(p+1).columnSpan=n.columns.count-(p+1));!t.isNullOrUndefined(i.childLevels)&&i.childLevels>0?(w.processAggregates(d,n,e,s,h,c,!0,b,p,null,null,u),w.processGroupedRecords(n,o.items,r,u,e,p+1,s,h,c,l,a,v,y),y=w.rowIndex,d=new co(u).generateRows(o.items.records,o),w.processAggregates(d,n,e,s,h,c,!1)):(w.processAggregates(d,n,e,s,h,c,!0,b,p,null,null,u),y=w.processRecord(e,r,u,o.items,n,p+1,a,v,y),d=new co(u).generateRows(o.items,o),w.processAggregates(d,n,e,s,h,c,!1,null,null,!0,null,u))})},k=this,b=0,d=i;b<d.length;b++)g(d[b])},n.prototype.processGridHeaders=function(n,i,r,u,o,s,h,c,l,a){for(var b,k,v=this,d=u.length+n,g=rc(a),nt=a,p=0,y=[],w=0;w<r.length;w++)y[parseInt(w.toString(),10)]=0;return c.groupSettings.columns.length&&(p=c.groupSettings.columns.length-1,d-=1),i.columns.add(d),i.style.cellPadding=new f.PdfPaddings(5.76,5.76,.5,.5),i.headers.add(r.length),b=function(n,u,l,a,p){var b=i.headers.getHeader(n),w=b.cells.getCell(u),g=r[parseInt(n.toString(),10)].cells[c.groupSettings.columns.length?u:y[parseInt(n.toString(),10)]],k;y[parseInt(n.toString(),10)]=y[parseInt(n.toString(),10)]+1;t.isNullOrUndefined(l.headerTextAlign)||(w.style.stringFormat=v.getHorizontalAlignment(l.headerTextAlign));a>0&&(w.rowSpan=a,w.style.stringFormat=v.getVerticalAlignment("Bottom",w.style.stringFormat,l.textAlign));p>0&&(w.columnSpan=p);b.style.setBorder(o);b.style.setFont(s);b.style.setTextBrush(h);w.value=l.headerText;t.isNullOrUndefined(g)||g.cellType!==e.HeaderIndent&&g.cellType!==e.DetailHeader||(w.value="",w.width=20);k={cell:w,gridCell:g,style:w.style};v.parent.trigger(nn,k);var d=k,nt=k.style.borders,tt=k.style.font,it=k.style.textBrush;t.isNullOrUndefined(nt)||b.style.setBorder(nt);t.isNullOrUndefined(tt)||b.style.setFont(tt);t.isNullOrUndefined(it)||b.style.setTextBrush(it);t.isNullOrUndefined(d.style.verticalAlignment)||(w.style.stringFormat=v.getVerticalAlignment(d.style.verticalAlignment,w.style.stringFormat));t.isNullOrUndefined(d.image)||(w.value=new f.PdfBitmap(d.image.base64));t.isNullOrUndefined(d.hyperLink)||(w.value=v.setHyperLink(d))},k=function(n,t,i,r,u,f){for(var o,s=0,e=0;e<n.length;e++)(f&&(r=s=s+i+(0===e?0:-1),i=0),f||n[parseInt(e.toString(),10)].visible||(r-=1),n[parseInt(e.toString(),10)].columns&&n[parseInt(e.toString(),10)].columns.length)?(o=k(n[parseInt(e.toString(),10)].columns,t-1,0,e+r,u+1,!1),b(u,e+r+p,n[parseInt(e.toString(),10)],0,o),i+=o,r=r+o-1):(n[parseInt(e.toString(),10)].visible||v.hideColumnInclude)&&(i++,b(u,e+r+p,n[parseInt(e.toString(),10)],t,0));return i},k(nt,g,0,0,0,!0),i.columns.count>=6&&l&&(i.style.allowHorizontalOverflow=!0),i},n.prototype.processExportProperties=function(n,i){var r;if(t.isNullOrUndefined(n))this.currentViewData=!1,this.customDataSource=!1;else{if(t.isNullOrUndefined(n.theme)||(this.gridTheme=n.theme),r=this.pdfPageSettings.size,this.drawHeader(n),!t.isNullOrUndefined(n.footer)){var u=n.footer,e=new f.PointF(0,r.width-80-.75*u.fromBottom),o=new f.SizeF(r.width-80,.75*u.height),s=new f.RectangleF(e,o);this.pdfDocument.template.bottom=this.drawPageTemplate(new f.PdfPageTemplateElement(s),u)}t.isNullOrUndefined(n.includeHiddenColumn)||this.isGrouping||(this.hideColumnInclude=n.includeHiddenColumn);t.isNullOrUndefined(n.dataSource)?t.isNullOrUndefined(n.exportType)?(this.currentViewData=!1,this.customDataSource=!1):"CurrentPage"===n.exportType?(i=this.parent.groupSettings&&this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&!this.parent.getDataModule().isRemote()?i:this.parent.currentViewData,this.currentViewData=!0,this.customDataSource=!1):(this.currentViewData=!1,this.customDataSource=!1):(this.customDataSource=!0,this.currentViewData=!1)}return i},n.prototype.drawHeader=function(n){var r=this,o=this.pdfPageSettings.size,e;if(!t.isNullOrUndefined(n)&&!t.isNullOrUndefined(n.header)){var i=n.header,s=new f.PointF(0,i.fromTop),h=new f.SizeF(o.width-80,.75*i.height),u=new f.RectangleF(s,h);this.headerOnPages.length?(e=this.drawPageTemplate(new f.PdfPageTemplateElement(u),i),this.headerOnPages.filter(function(n){n-1>=0&&n-1<=r.pdfDocument.pages.count-1&&r.pdfDocument.pages.getPageByIndex(n-1).graphics.drawPdfTemplate(e.template,new f.PointF(0,0))})):this.pdfDocument.template.top=this.drawPageTemplate(new f.PdfPageTemplateElement(u),i)}},n.prototype.drawPageTemplate=function(n,t){for(var i,r=0,u=t.contents;r<u.length;r++){i=u[r];switch(this.processContentValidation(i),i.type){case"Text":if(""===i.value||void 0===i.value||null===i.value||"string"!=typeof i.value)throw new Error("please enter the valid input value in text content...");this.drawText(n,i);break;case"PageNumber":this.drawPageNumber(n,i);break;case"Image":if(void 0===i.src||null===i.src||""===i.src)throw new Error("please enter the valid base64 string in image content...");this.drawImage(n,i);break;case"Line":this.drawLine(n,i);break;default:throw new Error("Please set valid content type...");}}return n},n.prototype.processContentValidation=function(n){if(void 0===n.type||null===n.type)throw new Error("please set valid content type...");if("Line"===n.type){if(void 0===n.points||null===n.points)throw new Error("please enter valid points in "+n.type+" content...");if(void 0===n.points.x1||null===n.points.x1||"number"!=typeof n.points.x1)throw new Error("please enter valid x1 co-ordinate in "+n.type+" points...");if(void 0===n.points.y1||null===n.points.y1||"number"!=typeof n.points.y1)throw new Error("please enter valid y1 co-ordinate in "+n.type+" points...");if(void 0===n.points.x2||null===n.points.x2||"number"!=typeof n.points.x2)throw new Error("please enter valid x2 co-ordinate in "+n.type+" points...");if(void 0===n.points.y2||null===n.points.y2||"number"!=typeof n.points.y2)throw new Error("please enter valid y2 co-ordinate in "+n.type+" points...");}else{if(void 0===n.position||null===n.position)throw new Error("please enter valid position in "+n.type+" content...");if(void 0===n.position.x||null===n.position.x||"number"!=typeof n.position.x)throw new Error("please enter valid x co-ordinate in "+n.type+" position...");if(void 0===n.position.y||null===n.position.y||"number"!=typeof n.position.y)throw new Error("please enter valid y co-ordinate in "+n.type+" position...");}},n.prototype.drawText=function(n,i){var h=this.getFont(i),u=this.getBrushFromContent(i),e=null,o,r;t.isNullOrUndefined(i.style.textPenColor)||(o=this.hexToRgb(i.style.textPenColor),e=new f.PdfPen(new f.PdfColor(o.r,o.g,o.b)));null==u&&null==e&&(u=new f.PdfSolidBrush(new f.PdfColor(0,0,0)));var c=i.value.toString(),l=.75*i.position.x,a=.75*i.position.y,s=new f.PdfStringFormat;t.isNullOrUndefined(i.style.stringFormat)||(s.alignment=i.style.stringFormat.alignment);r=this.setContentFormat(i,s);null===r||t.isNullOrUndefined(r.format)||t.isNullOrUndefined(r.size)?n.graphics.drawString(c,h,e,u,l,a,s):n.graphics.drawString(c,h,e,u,l,a,r.size.width,r.size.height,r.format)},n.prototype.drawPageNumber=function(n,i){var e=this.getFont(i),o=null,a,u,r,l,s,h,v;t.isNullOrUndefined(i.style.textBrushColor)?o=new f.PdfSolidBrush(new f.PdfColor(0,0,0)):(a=this.hexToRgb(i.style.textBrushColor),o=new f.PdfSolidBrush(new f.PdfColor(a.r,a.g,a.b)));l=new f.PdfPageNumberField(e,o);(l.numberStyle=this.getPageNumberStyle(i.pageNumberType),t.isNullOrUndefined(i.format))?(r="{0}",u=new f.PdfCompositeField(e,o,r,l)):(s="$total",h="$current",-1!==i.format.indexOf(s)&&-1!==i.format.indexOf(h)?((v=new f.PdfPageCountField(e)).numberStyle=this.getPageNumberStyle(i.pageNumberType),r=i.format.indexOf(s)>i.format.indexOf(h)?(r=i.format.replace(h,"0")).replace(s,"1"):(r=i.format.replace(h,"1")).replace(s,"0"),u=new f.PdfCompositeField(e,o,r,l,v)):-1!==i.format.indexOf(h)&&-1===i.format.indexOf(s)?(r=i.format.replace(h,"0"),u=new f.PdfCompositeField(e,o,r,l)):(v=new f.PdfPageCountField(e),r=i.format.replace(s,"0"),u=new f.PdfCompositeField(e,o,r,v)));var y=.75*i.position.x,p=.75*i.position.y,c=this.setContentFormat(i,u.stringFormat);null===c||t.isNullOrUndefined(c.format)||t.isNullOrUndefined(c.size)||(u.stringFormat=c.format,u.bounds=new f.RectangleF(y,p,c.size.width,c.size.height));u.draw(n.graphics,y,p)},n.prototype.drawImage=function(n,i){var r=.75*i.position.x,u=.75*i.position.y,e=t.isNullOrUndefined(i.size)?void 0:.75*i.size.width,s=t.isNullOrUndefined(i.size)?void 0:.75*i.size.height,o=new f.PdfBitmap(i.src);t.isNullOrUndefined(e)?n.graphics.drawImage(o,r,u):n.graphics.drawImage(o,r,u,e,s)},n.prototype.drawLine=function(n,i){var u=.75*i.points.x1,f=.75*i.points.y1,e=.75*i.points.x2,o=.75*i.points.y2,r=this.getPenFromContent(i);t.isNullOrUndefined(i.style)||null===i.style||(t.isNullOrUndefined(i.style.penSize)||null===i.style.penSize||"number"!=typeof i.style.penSize||(r.width=.75*i.style.penSize),r.dashStyle=this.getDashStyle(i.style.dashStyle));n.graphics.drawLine(r,u,f,e,o)},n.prototype.processAggregates=function(n,i,r,u,f,o,s,h,c,l,a,v){for(var ft,y,p,b,ot,st,it,rt=0,ut=n;rt<ut.length;rt++){var d=ut[rt],g=-1,k=0,tt=!0,w=[],lt=a?0:1,nt=void 0;for(t.isNullOrUndefined(h)&&((nt=i.rows.addRow()).style.setBorder(r),nt.style.setFont(u),nt.style.setTextBrush(f),nt.style.setBackgroundBrush(o)),ft=this.parent.allowRowDragAndDrop&&t.isNullOrUndefined(this.parent.rowDropSettings.targetID),y=0;y<i.columns.count+lt;y++)if(p=d.cells[parseInt(k.toString(),10)],p.cellType!==e.DetailFooterIntent)if(ft&&p.cellType===e.Indent)ft=!1,y--,k++;else{if(!this.hideColumnInclude){for(;void 0===p.visible;)p.cellType!==e.DetailFooterIntent&&(t.isNullOrUndefined(h)||t.isNullOrUndefined(h.cells.getCell(y).value)?w.push(""):(w.push(h.cells.getCell(y).value),tt=!1,s||(y+=1)),y+=1,k+=1,p=d.cells[parseInt(k.toString(),10)]);for(;!t.isNullOrUndefined(p.visible)&&!p.visible;)k+=1,p=d.cells[parseInt(k.toString(),10)]}if(p.isDataCell){var et={},ht=!t.isNullOrUndefined(p.column.footerTemplate),ct=!t.isNullOrUndefined(p.column.groupFooterTemplate),at=!t.isNullOrUndefined(p.column.groupCaptionTemplate);ht||at||ct?(et=(it=this.getTemplateFunction(et,y,g,p)).templateFunction,g=it.leastCaptionSummaryIndex,b=void 0,ot=d.data[p.column.field?p.column.field:p.column.columnName],(this.parent.isReact||this.parent.isVue||this.parent.isVue3||this.parent.isAngular)&&"string"!=typeof p.column.footerTemplate&&"string"!=typeof p.column.groupFooterTemplate&&"string"!=typeof p.column.groupCaptionTemplate?(b=ot[p.column.type],b=t.isNullOrUndefined(b)?"":b):(b=et[t.getEnumValue(e,p.cellType)](ot,this.parent),b=this.parent.isVue3&&!t.isNullOrUndefined(b[1])?b[1].textContent:t.isNullOrUndefined(b[0])?"":b[0].textContent),tt=!1,st={row:d,type:ht?"Footer":ct?"GroupFooter":"GroupCaption",style:t.isNullOrUndefined(h)?nt.cells:h.cells,cell:p,value:b},this.parent.trigger(itt,st),w.push(st.value)):(it=this.getSummaryWithoutTemplate(d.data[p.column.field]),t.isNullOrUndefined(it)||w.push(it))}else w.push("");tt&&""!==w[parseInt(y.toString(),10)]&&!t.isNullOrUndefined(w[parseInt(y.toString(),10)])&&null!==w[parseInt(y.toString(),10)]&&(tt=!1);k+=1}else y--,k++;if(!a)if(s)for(y=v.groupSettings.columns.length;y<w.length-1;y++)w[parseInt(y.toString(),10)]=w[y+1],w[y+1]=w[y+2]?w[y+2]:"";else w.splice(0,1);if(!tt)if(s)for(y=0;y<i.columns.count;y++)h.cells.getCell(y).value=w[parseInt(y.toString(),10)].toString(),y===c&&-1!==g&&1!==g?h.cells.getCell(y).columnSpan=g-1-c:y===c&&-1===g&&(h.cells.getCell(y).columnSpan=i.columns.count-c);else for(y=0;y<i.columns.count;y++)nt.cells.getCell(y).value=w[parseInt(y.toString(),10)].toString()}},n.prototype.getTemplateFunction=function(n,i,r,u){return t.isNullOrUndefined(u.column.footerTemplate)||u.cellType!==e.Summary?t.isNullOrUndefined(u.column.groupCaptionTemplate)?n[t.getEnumValue(e,e.GroupSummary)]=t.compile(u.column.groupFooterTemplate):(-1===r&&(r=i),n[t.getEnumValue(e,e.CaptionSummary)]=t.compile(u.column.groupCaptionTemplate)):n[t.getEnumValue(e,e.Summary)]=t.compile(u.column.footerTemplate),{templateFunction:n,leastCaptionSummaryIndex:r}},n.prototype.getSummaryWithoutTemplate=function(n){return t.isNullOrUndefined(n.Sum)?t.isNullOrUndefined(n.Average)?t.isNullOrUndefined(n.Max)?t.isNullOrUndefined(n.Min)?t.isNullOrUndefined(n.Count)?t.isNullOrUndefined(n.TrueCount)?t.isNullOrUndefined(n.FalseCount)?t.isNullOrUndefined(n.Custom)?void 0:n.Custom:n.FalseCount:n.TrueCount:n.Count:n.Min:n.Max:n.Average:n.Sum},n.prototype.setColumnProperties=function(n,i,r,u,f){for(var o=u.groupSettings.columns.length?u.groupSettings.columns.length-1:0,e=0;e<o;e++)i.columns.getColumn(e).width=20;for(e=0;e<n.length;e++)t.isNullOrUndefined(n[parseInt(e.toString(),10)].textAlign)||(i.columns.getColumn(e+o).format=this.getHorizontalAlignment(n[parseInt(e.toString(),10)].textAlign)),i.style.allowHorizontalOverflow&&!t.isNullOrUndefined(n[parseInt(e.toString(),10)].width)&&f&&(i.columns.getColumn(e+o).width="number"==typeof n[parseInt(e.toString(),10)].width?.75*n[parseInt(e.toString(),10)].width:.75*r.getConvertedWidth(n[parseInt(e.toString(),10)].width))},n.prototype.setRecordThemeStyle=function(n,i){var u,r,o;if(t.isNullOrUndefined(this.gridTheme)||t.isNullOrUndefined(this.gridTheme.record))n.style.setTextBrush(new f.PdfSolidBrush(new f.PdfColor(0,0,0)));else{var s=t.isNullOrUndefined(this.gridTheme.record.fontName)?f.PdfFontFamily.Helvetica:this.getFontFamily(this.gridTheme.record.fontName),h=t.isNullOrUndefined(this.gridTheme.record.fontSize)?9.75:this.gridTheme.record.fontSize,c=this.getFontStyle(this.gridTheme.record),e=new f.PdfStandardFont(s,h,c);t.isNullOrUndefined(this.gridTheme.record.font)||(e=this.gridTheme.record.font);n.style.setFont(e);u=new f.PdfColor;t.isNullOrUndefined(this.gridTheme.record.fontColor)||(r=this.hexToRgb(this.gridTheme.record.fontColor),u=new f.PdfColor(r.r,r.g,r.b));n.style.setTextBrush(new f.PdfSolidBrush(u))}return o=this.gridTheme&&this.gridTheme.record&&this.gridTheme.record.border?this.getBorderStyle(this.gridTheme.record.border):i,n.style.setBorder(o),n},n.prototype.processRecord=function(n,i,r,u,o,s,h,c,l){for(var y,it,g,v,nt,ut,ft,a,k=0,tt=c.getGridRowModel(i,u,r,l);k<tt.length;k++){y=tt[k];l++;this.rowIndex=l;for(var d=this.setRecordThemeStyle(o.rows.addRow(),n),ct=y.cells.length,p=0;p<ct;p++)if(it=y.cells[parseInt(p.toString(),10)],it.cellType===e.Data){var w=it.column,et=w.field,ot=t.isNullOrUndefined(et)?"":w.valueAccessor(et,y.data,w),rt=t.isNullOrUndefined(ot)?"":ot,st=void 0;if(w.isForeignColumn&&w.isForeignColumn()&&(st=c.getFData(rt,w),rt=t.getValue(w.foreignKeyValue,st)),(a={data:y.data,value:rt,column:w,style:void 0,colSpan:1,cell:v=d.cells.getCell(p)}).value="boolean"===a.column.type&&"string"==typeof a.value?a.value:this.exportValueFormatter.formatCellValue(a),this.parent.trigger(gg,a),t.isNullOrUndefined(a.image)||(a.value=new f.PdfBitmap(a.image.base64),a.value.height=a.image.height||a.value.height,a.value.width=a.image.width||a.value.width),v.value=a.value,t.isNullOrUndefined(a.hyperLink)||(v.value=this.setHyperLink(a)),t.isNullOrUndefined(a.style)||this.processCellStyle(v,a),a.colSpan>1){for(p+1+a.colSpan>d.cells.count&&(a.colSpan=d.cells.count-(p+1)),v.columnSpan=a.colSpan,g=1;g<v.columnSpan;g++)d.cells.getCell(p+g).value="";p+=a.colSpan-1}}if(y.isExpand)if(nt=this.setRecordThemeStyle(o.rows.addRow(),n),ut=this.parent.childGrid||this.parent.detailTemplate?0:s,(v=nt.cells.getCell(ut)).columnSpan=nt.cells.count-ut,v.style.cellPadding=new f.PdfPaddings(10,10,10,10),this.parent.childGrid){r.isPrinting=!0;var lt=!t.isNullOrUndefined(h)&&h.exportType?h.exportType:"AllPages",ht=this.helper.createChildGrid(r,y,lt,this.gridPool),b=ht.childGrid,at=ht.element;b.actionFailure=c.failureHandler(this.gridPool,b,this.globalResolve);ft=t.extend(h,{columns:null,dataSource:null,query:null});a={childGrid:b,row:y,cell:v,exportProperties:ft};this.parent.trigger(wp,a);b.beforeDataBound=this.childGridCell(v,b,ft);b.appendTo(at)}else this.parent.detailTemplate&&(a={parentRow:y,row:nt,value:{},action:"pdfexport",gridInstance:r},this.parent.trigger(bp,a),v.value=this.processDetailTemplate(a));this.parent.notify(iw,{type:"pdf",rowObj:y})}return l},n.prototype.processDetailTemplate=function(n){var s=this,r,l,u,o;if(n.value.columnHeader||n.value.rows){var i=new f.PdfGrid,e=this.getHeaderThemeStyle(),h=e.border,a=e.font,v=e.brush,c=function(n,i,r){var o,u,e,c;for(r&&(i.style.setBorder(h),i.style.setFont(a),i.style.setTextBrush(v)),o=0;o<n.cells.length;o++)u=n.cells[parseInt(o.toString(),10)],e=i.cells.getCell(u.index?u.index:o),(u.rowSpan>0&&(e.rowSpan=u.rowSpan),u.colSpan>0&&(e.columnSpan=u.colSpan),e.value=u.value,t.isNullOrUndefined(u.image)||(e.value=new f.PdfBitmap(u.image.base64),e.value.height=u.image.height,e.value.width=u.image.width),t.isNullOrUndefined(u.hyperLink)||(e.value=s.setHyperLink(u)),t.isNullOrUndefined(u.style))||(c={style:{backgroundColor:u.style.backColor,textAlignment:u.style.pdfTextAlignment,verticalAlignment:u.style.pdfVerticalAlignment,textBrushColor:u.style.fontColor,textPenColor:u.style.pdfTextPenColor,fontFamily:u.style.pdfFontFamily,fontSize:u.style.fontSize,bold:u.style.bold,italic:u.style.italic,underline:u.style.underline,strikeout:u.style.strikeThrough,border:u.style.pdfBorder,paragraphIndent:u.style.pdfParagraphIndent,cellPadding:u.style.pdfCellPadding}},s.processCellStyle(e,c))};if(n.value.columnCount?i.columns.add(n.value.columnCount):n.value.columnHeader&&n.value.columnHeader.length?i.columns.add(n.value.columnHeader[0].cells.length):n.value.rows&&n.value.rows.length&&i.columns.add(n.value.rows[0].cells.length),n.value.columnHeader)for(i.headers.add(n.value.columnHeader.length),r=0;r<n.value.columnHeader.length;r++)l=i.headers.getHeader(parseInt(r.toString(),10)),c(n.value.columnHeader[parseInt(r.toString(),10)],l,!0);if(n.value.rows)for(u=0,o=n.value.rows;u<o.length;u++)c(o[u],this.setRecordThemeStyle(i.rows.addRow(),h),!1);return i}return n.value.image?new f.PdfBitmap(n.value.image.base64):n.value.text?n.value.text:n.value.hyperLink?this.setHyperLink(n.value):""},n.prototype.setHyperLink=function(n){var t=new f.PdfTextWebLink;return t.url=n.hyperLink.target,t.text=n.hyperLink.displayText||n.hyperLink.target,t.font=new f.PdfStandardFont(f.PdfFontFamily.Helvetica,9.75),t.brush=new f.PdfSolidBrush(new f.PdfColor(51,102,187)),t},n.prototype.childGridCell=function(n,i,r){var u=this;return function(f){return i.beforeDataBound=null,f.cancel=!0,n.value=u.processGridExport(i,f,r),i.destroy(),t.detach(i.element),u.gridPool[i.id]=!0,u.helper.checkAndExport(u.gridPool,u.globalResolve),n}},n.prototype.processCellStyle=function(n,i){var r,u,e,o,h;if(t.isNullOrUndefined(i.style.backgroundColor)||(r=this.hexToRgb(i.style.backgroundColor),n.style.backgroundBrush=new f.PdfSolidBrush(new f.PdfColor(r.r,r.g,r.b))),(t.isNullOrUndefined(i.style.textAlignment)||(n.style.stringFormat=this.getHorizontalAlignment(i.style.textAlignment)),t.isNullOrUndefined(i.style.cellPadding)||(n.style.cellPadding=i.style.cellPadding),t.isNullOrUndefined(i.style.verticalAlignment)||(n.style.stringFormat=this.getVerticalAlignment(i.style.verticalAlignment,n.style.stringFormat)),t.isNullOrUndefined(i.style.textBrushColor))||(u=this.hexToRgb(i.style.textBrushColor),n.style.textBrush=new f.PdfSolidBrush(new f.PdfColor(u.r,u.g,u.b))),t.isNullOrUndefined(i.style.textPenColor)||(e=this.hexToRgb(i.style.textPenColor),n.style.textPen=new f.PdfPen(new f.PdfColor(e.r,e.g,e.b))),t.isNullOrUndefined(i.style.fontFamily)&&t.isNullOrUndefined(i.style.fontSize)&&t.isNullOrUndefined(i.style.bold)&&t.isNullOrUndefined(i.style.italic)&&t.isNullOrUndefined(i.style.underline)&&t.isNullOrUndefined(i.style.strikeout)||(n.style.font=this.getFont(i)),!t.isNullOrUndefined(i.style.border)){var c=new f.PdfBorders,s=i.style.border.width,a=t.isNullOrUndefined(s)||"number"!=typeof s?void 0:.75*s,l=new f.PdfColor(196,196,196);t.isNullOrUndefined(i.style.border.color)||(o=this.hexToRgb(i.style.border.color),l=new f.PdfColor(o.r,o.g,o.b));h=new f.PdfPen(l,a);t.isNullOrUndefined(i.style.border.dashStyle)||(h.dashStyle=this.getDashStyle(i.style.border.dashStyle));c.all=h;n.style.borders=c}t.isNullOrUndefined(i.style.paragraphIndent)||(n.style.stringFormat=new f.PdfStringFormat,n.style.stringFormat.paragraphIndent=i.style.paragraphIndent)},n.prototype.getHorizontalAlignment=function(n,t){switch(void 0===t&&(t=new f.PdfStringFormat),n){case"Right":t.alignment=f.PdfTextAlignment.Right;break;case"Center":t.alignment=f.PdfTextAlignment.Center;break;case"Justify":t.alignment=f.PdfTextAlignment.Justify;break;case"Left":t.alignment=f.PdfTextAlignment.Left}return t},n.prototype.getVerticalAlignment=function(n,t,i){switch(void 0===t&&(t=new f.PdfStringFormat,t=this.getHorizontalAlignment(i,t)),n){case"Bottom":t.lineAlignment=f.PdfVerticalAlignment.Bottom;break;case"Middle":t.lineAlignment=f.PdfVerticalAlignment.Middle;break;case"Top":t.lineAlignment=f.PdfVerticalAlignment.Top}return t},n.prototype.getFontFamily=function(n){switch(n){case"TimesRoman":return 2;case"Courier":return 1;case"Symbol":return 3;case"ZapfDingbats":return 4;default:return 0}},n.prototype.getFont=function(n){if(n.font)return n.font;var r=t.isNullOrUndefined(n.style.fontSize)?9.75:.75*n.style.fontSize,u=t.isNullOrUndefined(n.style.fontFamily)?f.PdfFontFamily.TimesRoman:this.getFontFamily(n.style.fontFamily),i=f.PdfFontStyle.Regular;return!t.isNullOrUndefined(n.style.bold)&&n.style.bold&&(i|=f.PdfFontStyle.Bold),!t.isNullOrUndefined(n.style.italic)&&n.style.italic&&(i|=f.PdfFontStyle.Italic),!t.isNullOrUndefined(n.style.underline)&&n.style.underline&&(i|=f.PdfFontStyle.Underline),!t.isNullOrUndefined(n.style.strikeout)&&n.style.strikeout&&(i|=f.PdfFontStyle.Strikeout),new f.PdfStandardFont(u,r,i)},n.prototype.getPageNumberStyle=function(n){switch(n){case"LowerLatin":return 2;case"LowerRoman":return 3;case"UpperLatin":return 4;case"UpperRoman":return 5;default:return 1}},n.prototype.setContentFormat=function(n,i){if(!t.isNullOrUndefined(n.size)){var r=.75*n.size.width,u=.75*n.size.height;if(i=new f.PdfStringFormat(f.PdfTextAlignment.Left,f.PdfVerticalAlignment.Middle),!t.isNullOrUndefined(n.style.hAlign))switch(n.style.hAlign){case"Right":i.alignment=f.PdfTextAlignment.Right;break;case"Center":i.alignment=f.PdfTextAlignment.Center;break;case"Justify":i.alignment=f.PdfTextAlignment.Justify;break;default:i.alignment=f.PdfTextAlignment.Left}return t.isNullOrUndefined(n.style.vAlign)||(i=this.getVerticalAlignment(n.style.vAlign,i)),{format:i,size:new f.SizeF(r,u)}}return null},n.prototype.getPageSize=function(n){switch(n){case"Letter":return new f.SizeF(612,792);case"Note":return new f.SizeF(540,720);case"Legal":return new f.SizeF(612,1008);case"A0":return new f.SizeF(2380,3368);case"A1":return new f.SizeF(1684,2380);case"A2":return new f.SizeF(1190,1684);case"A3":return new f.SizeF(842,1190);case"A5":return new f.SizeF(421,595);case"A6":return new f.SizeF(297,421);case"A7":return new f.SizeF(210,297);case"A8":return new f.SizeF(148,210);case"A9":return new f.SizeF(105,148);case"B0":return new f.SizeF(2836,4008);case"B1":return new f.SizeF(2004,2836);case"B2":return new f.SizeF(1418,2004);case"B3":return new f.SizeF(1002,1418);case"B4":return new f.SizeF(709,1002);case"B5":return new f.SizeF(501,709);case"Archa":return new f.SizeF(648,864);case"Archb":return new f.SizeF(864,1296);case"Archc":return new f.SizeF(1296,1728);case"Archd":return new f.SizeF(1728,2592);case"Arche":return new f.SizeF(2592,3456);case"Flsa":return new f.SizeF(612,936);case"HalfLetter":return new f.SizeF(396,612);case"Letter11x17":return new f.SizeF(792,1224);case"Ledger":return new f.SizeF(1224,792);default:return new f.SizeF(595,842)}},n.prototype.getDashStyle=function(n){switch(n){case"Dash":return 1;case"Dot":return 2;case"DashDot":return 3;case"DashDotDot":return 4;default:return 0}},n.prototype.getPenFromContent=function(n){var r=new f.PdfPen(new f.PdfColor(0,0,0)),i;return t.isNullOrUndefined(n.style)||null===n.style||t.isNullOrUndefined(n.style.penColor)||(i=this.hexToRgb(n.style.penColor),r=new f.PdfPen(new f.PdfColor(i.r,i.g,i.b))),r},n.prototype.getBrushFromContent=function(n){var r=null,i;return t.isNullOrUndefined(n.style.textBrushColor)||(i=this.hexToRgb(n.style.textBrushColor),r=new f.PdfSolidBrush(new f.PdfColor(i.r,i.g,i.b))),r},n.prototype.hexToRgb=function(n){if(null===n||""===n||7!==n.length)throw new Error("please set valid hex value for color...");n=n.substring(1);var t=parseInt(n,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},n.prototype.getFontStyle=function(n){var i=f.PdfFontStyle.Regular;return!t.isNullOrUndefined(n)&&n.bold&&(i|=f.PdfFontStyle.Bold),!t.isNullOrUndefined(n)&&n.italic&&(i|=f.PdfFontStyle.Italic),!t.isNullOrUndefined(n)&&n.underline&&(i|=f.PdfFontStyle.Underline),!t.isNullOrUndefined(n)&&n.strikeout&&(i|=f.PdfFontStyle.Strikeout),i},n.prototype.getBorderStyle=function(n){var r=new f.PdfBorders,i,e;if(t.isNullOrUndefined(n))r.all=new f.PdfPen(new f.PdfColor(234,234,234));else{var u=n.width,s=t.isNullOrUndefined(u)||"number"!=typeof u?void 0:.75*u,o=new f.PdfColor(196,196,196);t.isNullOrUndefined(n.color)||(i=this.hexToRgb(n.color),o=new f.PdfColor(i.r,i.g,i.b));e=new f.PdfPen(o,s);t.isNullOrUndefined(n.dashStyle)||(e.dashStyle=this.getDashStyle(n.dashStyle));r.all=e}return r},n.prototype.destroy=function(){},n}(),yct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pft=function(n){function r(t,i){var r=n.call(this,t,i)||this;return r.buttonElement=r.parent.createElement("button",{}),r.unbounDiv=r.parent.createElement("div",{className:"e-unboundcelldiv"}),r.childRefs=[],r.element=r.parent.createElement("TD",{className:"e-rowcell e-unboundcell",attrs:{tabindex:"-1",role:"gridcell"}}),r.parent.on(l,r.destroyButtons,r),r.parent.on(rv,r.destroyButtons,r),r}return yct(r,n),r.prototype.destroyButtons=function(n){for(var r,t=0;t<this.childRefs.length;t++)!this.childRefs[parseInt(t.toString(),10)]||this.childRefs[parseInt(t.toString(),10)].isDestroyed||this.parent.editSettings.showAddNewRow&&this.parent.enableVirtualization&&i(this.childRefs[parseInt(t.toString(),10)].element,"e-addedrow")||(this.childRefs[parseInt(t.toString(),10)].destroy(),this.childRefs[parseInt(t.toString(),10)].element&&(this.childRefs[parseInt(t.toString(),10)].element.innerHTML=""));if(this.childRefs=[],"refreshCommandColumn"===n.type){if(r=this.parent.element.querySelectorAll(".e-gridcontent .e-unboundcell"),r.length){for(t=0;t<r.length;t++)!r[parseInt(t.toString(),10)]||this.parent.editSettings.showAddNewRow&&this.parent.enableVirtualization&&i(r[parseInt(t.toString(),10)],"e-addedrow")||(r[parseInt(t.toString(),10)].querySelector(".e-unboundcelldiv")&&(r[parseInt(t.toString(),10)].querySelector(".e-unboundcelldiv").innerHTML=""),r[parseInt(t.toString(),10)].innerHTML="");r=null}}else this.parent.off(l,this.destroyButtons),this.parent.off(rv,this.destroyButtons)},r.prototype.render=function(n,i,r,u){var f=this.element.cloneNode(),h,e,o,s;if(f.appendChild(this.unbounDiv.cloneNode()),f.setAttribute("aria-label",this.localizer.getConstant("CommandColumnAria")+n.column.headerText),n.column.commandsTemplate)!this.parent.isReact||"string"==typeof n.column.commandsTemplate||n.column.commandsTemplate.prototype&&n.column.commandsTemplate.prototype.CSPTemplate?nt(f.firstElementChild,n.column.getColumnTemplate()(i,this.parent,"commandsTemplate",null,null,null,null,this.parent.root)):(h=this.parent+"commandsTemplate",n.column.getColumnTemplate()(i,this.parent,"commandsTemplate",h,null,null,f.firstElementChild),this.parent.renderTemplates());else for(e=0,o=n.commands;e<o.length;e++)s=o[e],f=this.renderButton(f,s,r["data-index"],s.uid);return this.setAttributes(f,n,r),!this.parent.enableVirtualization&&this.parent.isEdit&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&!this.parent.element.querySelector(".e-editedrow"))||u&&this.parent.enableVirtualization?(t.addClass([].slice.call(f.getElementsByClassName("e-edit-delete")),"e-hide"),t.removeClass([].slice.call(f.getElementsByClassName("e-save-cancel")),"e-hide")):(t.addClass([].slice.call(f.getElementsByClassName("e-save-cancel")),"e-hide"),t.removeClass([].slice.call(f.getElementsByClassName("e-edit-delete")),"e-hide")),this.parent.isFrozenGrid()&&ae(this.parent,n.column,f),f},r.prototype.renderButton=function(n,i,r,u){var f=this.buttonElement.cloneNode(),e;t.attributes(f,{id:this.parent.element.id+(i.type||"")+"_"+r+"_"+u,type:"button",title:t.isNullOrUndefined(i.title)?i.buttonOption.content||this.localizer.getConstant(i.type)||i.type:i.title,"data-uid":u});f.onclick=i.buttonOption.click;i.buttonOption.cssClass=this.parent.cssClass?i.buttonOption.cssClass+" "+this.parent.cssClass:i.buttonOption.cssClass;e=new ri.Button(i.buttonOption,f);switch(this.childRefs.push(e),e.commandType=i.type,n.firstElementChild.appendChild(e.element),i.type){case"Edit":case"Delete":t.addClass([f],["e-edit-delete","e-"+i.type.toLowerCase()+"button"]);break;case"Cancel":case"Save":t.addClass([f],["e-save-cancel","e-"+i.type.toLowerCase()+"button"])}return n},r}(fi),pct=function(){function n(n,t){this.parent=n;this.locator=t;this.initiateRender();this.addEventListener()}return n.prototype.initiateRender=function(){this.locator.getService("cellRendererFactory").addCellRenderer(e.CommandColumn,new pft(this.parent,this.locator))},n.prototype.commandClickHandler=function(n){var i=this.parent,r=t.closest(n.target,"button"),u,f,a,o,b;if(r&&t.closest(n.target,".e-unboundcell")){for(var s,v=r.ej2_instances[0],h=v.commandType,p=r.getAttribute("data-uid"),w=i.getRowObjectFromUID(t.closest(r,"."+y).getAttribute("data-uid")),l=this.parent.columnModel,e=0;e<l.length;e++)if(l[parseInt(e.toString(),10)].commands)for(u=l[parseInt(e.toString(),10)].commands,f=0;f<u.length;f++)a="type",u[parseInt(f.toString(),10)].uid===p&&u[parseInt(f.toString(),10)][""+a]===h?s=u[parseInt(f.toString(),10)]:(o=[].slice.call(t.closest(r,".e-unboundcell").querySelectorAll("button")).findIndex(function(n){return n===r}),o<u.length&&u[parseInt(o.toString(),10)][""+a]===h&&String(u[parseInt(f.toString(),10)].uid)===p&&(s=u[parseInt(o.toString(),10)]));b={cancel:!1,target:r,commandColumn:s,rowData:t.isNullOrUndefined(w)?void 0:w.data};this.parent.trigger(sg,b,function(n){if(!v.disabled&&i.editModule&&!n.cancel)switch(h){case"Edit":i.editModule.endEdit();i.editModule.startEdit(t.closest(r,"tr"));break;case"Cancel":i.isFocusFirstCell=!0;i.editModule.closeEdit();break;case"Save":i.isFocusFirstCell=!0;i.editModule.endEdit();break;case"Delete":"Batch"!==i.editSettings.mode&&i.editModule.endEdit();i.commandDelIndex=parseInt(t.closest(r,"tr").getAttribute(c),10)-1;i.clearSelection();i.selectRow(i.commandDelIndex,!1);i.isFocusFirstCell=!0;i.editModule.deleteRecord();i.editSettings.showDeleteConfirmDialog&&!i.allowSelection||(i.commandDelIndex=void 0)}})}},n.prototype.getModuleName=function(){return"commandColumn"},n.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(kt,this.commandClickHandler),this.parent.off(rt,this.keyPressHandler),this.parent.off(pt,this.load),this.parent.off(l,this.destroy))},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(kt,this.commandClickHandler,this),this.parent.on(rt,this.keyPressHandler,this),this.parent.on(pt,this.load,this),this.parent.on(l,this.destroy,this))},n.prototype.keyPressHandler=function(n){("enter"===n.action||"space"===n.action)&&t.closest(n.target,".e-unboundcelldiv")&&(this.commandClickHandler(n),n.preventDefault())},n.prototype.load=function(){for(var r,i,t=this.parent.columnModel,n=0;n<t.length;n++)if(t[parseInt(n.toString(),10)].commands)for(r=t[parseInt(n.toString(),10)].commands,i=0;i<r.length;i++)r[parseInt(i.toString(),10)].uid=pi("gridcommand")},n}(),o={header:"."+st,content:"."+it,edit:".e-inline-edit",batchEdit:".e-editedbatchcell",editIcon:"e-edit",pager:".e-gridpager","delete":"e-delete",save:"e-save",cancel:"e-cancel",copy:"e-copy",pdf:"e-pdfexport",group:"e-icon-group",ungroup:"e-icon-ungroup",csv:"e-csvexport",excel:"e-excelexport",fPage:"e-icon-first",nPage:"e-icon-next",lPage:"e-icon-last",pPage:"e-icon-prev",ascending:"e-icon-ascending",descending:"e-icon-descending",groupHeader:"e-groupdroparea",touchPop:"e-gridpopup",autofit:"e-icon-autofit",autofitall:"e-icon-autofitall",chart:"e-grid-chart-icon",barChart:"e-grid-bar-chart-icon",bar:"e-grid-bar-icon",stackingBar:"e-grid-stacking-bar-icon",stackingBar100:"e-grid-stacking-bar-100-icon",pie:"e-grid-pie-icon",columnChart:"e-grid-column-chart-icon",column:"e-grid-column-icon",stackingColumn:"e-grid-stacking-column-icon",stackingColumn100:"e-grid-stacking-column-100-icon",lineChart:"e-grid-line-chart-icon",line:"e-grid-line-icon",stackingLine:"e-grid-stacking-line-icon",stackingLine100:"e-grid-stacking-line-100-icon",areaChart:"e-grid-area-chart-icon",area:"e-grid-area-icon",stackingArea:"e-grid-stacking-area-icon",stackingArea100:"e-grid-stacking-area-100-icon",scatter:"e-grid-scatter-icon"},wct=function(){function n(n,t){this.defaultItems={};this.disableItems=[];this.hiddenItems=[];this.barChartList=["Bar","StackingBar","StackingBar100"];this.pieChartList=["Pie"];this.columnChartList=["Column","StackingColumn","StackingColumn100"];this.lineChartList=["Line","StackingLine","StackingLine100"];this.areaChartList=["Area","StackingArea","StackingArea100"];this.scatterChartList=["Scatter"];this.chartList=this.barChartList.concat(this.pieChartList,this.columnChartList,this.lineChartList,this.areaChartList,this.scatterChartList);this.localeText=this.setLocaleKey();this.parent=n;this.gridID=n.element.id;this.serviceLocator=t;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(w,this.enableAfterRenderMenu,this),this.parent.on(or,this.render,this),this.parent.on(l,this.destroy,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(or,this.render),this.parent.off(w,this.enableAfterRenderMenu),this.parent.off(l,this.destroy),t.EventHandler.remove(this.element,"keydown",this.keyDownHandler.bind(this)))},n.prototype.keyDownHandler=function(n){"Tab"!==n.code&&9!==n.which||this.contextMenu.close();"Escape"===n.code&&(this.contextMenu.close(),this.parent.notify(uu,{}))},n.prototype.render=function(){this.parent.element.classList.add("e-noselect");this.l10n=this.serviceLocator.getService("localization");this.element=this.parent.createElement("ul",{id:this.gridID+"_cmenu"});t.EventHandler.add(this.element,"keydown",this.keyDownHandler.bind(this));this.parent.element.appendChild(this.element);var n="#"+this.gridID;this.contextMenu=new ve.ContextMenu({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:n,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),onClose:this.contextMenuOnClose.bind(this),beforeClose:this.contextMenuBeforeClose.bind(this),cssClass:this.parent.cssClass?"e-grid-menu "+this.parent.cssClass:"e-grid-menu"});this.contextMenu.appendTo(this.element)},n.prototype.enableAfterRenderMenu=function(n){n.module===this.getModuleName()&&n.enable&&(this.contextMenu&&(this.contextMenu.destroy(),t.remove(this.element),this.parent.element.classList.remove("e-noselect")),this.render())},n.prototype.getMenuItems=function(){for(var n,l,a,v,y,p,w,r,u,i=[],f=[],t=[],e=[],o=[],s=[],h=[],c=0,b=this.parent.contextMenuItems;c<b.length;c++)n=b[c],"string"==typeof n&&-1!==this.getDefaultItems().indexOf(n)?-1!==this.barChartList.indexOf(n)?e.push(this.buildDefaultItems(n)):-1!==this.pieChartList.indexOf(n)?r=this.buildDefaultItems(n):-1!==this.columnChartList.indexOf(n)?o.push(this.buildDefaultItems(n)):-1!==this.lineChartList.indexOf(n)?s.push(this.buildDefaultItems(n)):-1!==this.areaChartList.indexOf(n)?h.push(this.buildDefaultItems(n)):-1!==this.scatterChartList.indexOf(n)?u=this.buildDefaultItems(n):-1!==n.toLocaleLowerCase().indexOf("export")?f.push(this.buildDefaultItems(n)):i.push(this.buildDefaultItems(n)):"string"!=typeof n&&i.push(n);return s.length>0&&(l=this.buildDefaultItems("LineChart"),l.items=s,t.push(l)),h.length>0&&(a=this.buildDefaultItems("AreaChart"),a.items=h,t.push(a)),o.length>0&&(v=this.buildDefaultItems("ColumnChart"),v.items=o,t.push(v)),e.length>0&&(y=this.buildDefaultItems("BarChart"),y.items=e,t.push(y)),(u&&t.push(u),r&&t.push(r),t.length>0)&&(p=this.buildDefaultItems("Chart"),p.items=t,i.push(p)),f.length>0&&(w=this.buildDefaultItems("export"),w.items=f,i.push(w)),i},n.prototype.getLastPage=function(){var n=Math.floor(this.parent.pageSettings.totalRecordsCount/this.parent.pageSettings.pageSize);return this.parent.pageSettings.totalRecordsCount%this.parent.pageSettings.pageSize&&(n+=1),n},n.prototype.contextMenuOpen=function(){this.isOpen=!0},n.prototype.contextMenuItemClick=function(n){var t=this.getKeyFromId(n.item.id);switch(t){case"AutoFitAll":this.parent.autoFitColumns([]);break;case"AutoFit":this.parent.autoFitColumns(this.targetColumn.field);break;case"Group":this.parent.groupColumn(this.targetColumn.field);break;case"Ungroup":this.parent.ungroupColumn(this.targetColumn.field);break;case"Edit":this.parent.editModule&&("Batch"===this.parent.editSettings.mode?this.row&&this.cell&&!isNaN(parseInt(this.cell.getAttribute(ft),10)-1)&&this.parent.editModule.editCell(parseInt(this.row.getAttribute(c),10)-1,this.parent.getColumns()[parseInt(this.cell.getAttribute(ft),10)-1].field):(this.parent.editModule.endEdit(),this.parent.editModule.startEdit(this.row)));break;case"Delete":this.parent.editModule&&("Batch"!==this.parent.editSettings.mode&&this.parent.editModule.endEdit(),1===this.parent.getSelectedRecords().length?(this.parent.isCheckBoxSelection||(this.parent.isFocusFirstCell=!0),this.parent.editModule.deleteRow(this.row)):this.parent.deleteRecord());break;case"Save":this.parent.editModule&&(this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode&&(this.parent.isFocusFirstCell=!0),this.parent.editModule.endEdit());break;case"Cancel":this.parent.editModule&&(this.parent.isEdit&&(this.parent.isFocusFirstCell=!0),this.parent.editModule.closeEdit());break;case"Copy":this.parent.copy();break;case"PdfExport":this.parent.pdfExport();break;case"ExcelExport":this.parent.excelExport();break;case"CsvExport":this.parent.csvExport();break;case"SortAscending":this.isOpen=!1;this.parent.sortColumn(this.targetColumn.field,"Ascending");break;case"SortDescending":this.isOpen=!1;this.parent.sortColumn(this.targetColumn.field,"Descending");break;case"FirstPage":this.parent.goToPage(1);break;case"PrevPage":this.parent.goToPage(this.parent.pageSettings.currentPage-1);break;case"LastPage":this.parent.goToPage(this.getLastPage());break;case"NextPage":this.parent.goToPage(this.parent.pageSettings.currentPage+1);break;case"Bar":case"StackingBar":case"StackingBar100":case"Pie":case"Column":case"StackingColumn":case"StackingColumn100":case"Line":case"StackingLine":case"StackingLine100":case"Area":case"StackingArea":case"StackingArea100":case"Scatter":n.records=this.parent.getSelectedRecords();n.gridInstance=this.parent;n.chartType=t}n.column=this.targetColumn;n.rowInfo=this.targetRowdata;this.parent.trigger(tn,n)},n.prototype.contextMenuOnClose=function(n){n.items.length>0&&n.items[0].parentObj instanceof ve.ContextMenu&&this.updateItemStatus();this.parent.notify(ka,{isOpen:!1})},n.prototype.getLocaleText=function(n){return this.l10n.getConstant(this.localeText[""+n])},n.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems);this.contextMenu.enableItems(this.disableItems);this.hiddenItems=[];this.disableItems=[];this.isOpen=!1},n.prototype.contextMenuBeforeOpen=function(n){var h=t.closest(n.event.target,".e-grid");if(n.event&&h&&h!==this.parent.element)n.cancel=!0;else if(n.event&&(t.closest(n.event.target,"."+o.groupHeader)||t.closest(n.event.target,"."+o.touchPop)||t.closest(n.event.target,".e-summarycell")||t.closest(n.event.target,".e-groupcaption")||t.closest(n.event.target,".e-filterbarcell"))||this.parent.editSettings.showAddNewRow&&t.closest(n.event.target,".e-addedrow")&&this.parent.element.querySelector(".e-editedrow"))n.cancel=!0;else{this.targetColumn=this.getColumn(n.event);i(n.event.target,"e-grid")&&(this.targetRowdata=this.parent.getRowInfo(n.event.target));t.isNullOrUndefined(n.parentItem)&&this.targetColumn&&this.targetRowdata.cell&&(this.parent.notify(ka,{isOpen:!0}),this.selectRow(n.event,!this.targetRowdata.cell.classList.contains("e-selectionbackground")||"Multiple"!==this.parent.selectionSettings.type));for(var f=[],e=[],s=0,c=n.items;s<c.length;s++){var r=c[s],u=this.getKeyFromId(r.id),l=this.defaultItems[""+u];if(-1!==this.getDefaultItems().indexOf(u))if(this.ensureDisabledStatus(u)&&this.disableItems.push(r.text),n.event&&(this.ensureTarget(n.event.target,o.edit)||this.ensureTarget(n.event.target,o.batchEdit)))"Save"!==u&&"Cancel"!==u&&this.hiddenItems.push(r.text);else{if(this.parent.editModule&&"Batch"===this.parent.editSettings.mode&&(t.closest(n.event.target,".e-gridform")||this.parent.editModule.getBatchChanges()[gf].length||this.parent.editModule.getBatchChanges()[lr].length||this.parent.editModule.getBatchChanges()[ne].length)&&("Save"===u||"Cancel"===u))continue;t.isNullOrUndefined(n.parentItem)&&n.event&&!t.isNullOrUndefined(l)&&!this.ensureTarget(n.event.target,l.target)&&this.hiddenItems.push(r.text)}else r.target&&n.event&&!this.ensureTarget(n.event.target,r.target)?r.separator?f.push(r.id):this.hiddenItems.push(r.text):this.ensureTarget(n.event.target,r.target)&&r.separator&&e.push(r.id)}e.length>0&&this.contextMenu.showItems(e,!0);this.contextMenu.enableItems(this.disableItems,!1);this.contextMenu.hideItems(this.hiddenItems);f.length>0&&this.contextMenu.hideItems(f,!0);this.eventArgs=n.event;n.column=this.targetColumn;n.rowInfo=this.targetRowdata;this.parent.trigger(rn,n);(n.cancel||this.hiddenItems.length===n.items.length&&!n.parentItem)&&(this.updateItemStatus(),n.cancel=!0)}le(this.parent.element,this.contextMenu.element.parentElement)},n.prototype.contextMenuBeforeClose=function(n){n.column=this.targetColumn;n.rowInfo=this.targetRowdata;this.parent.trigger(un,n)},n.prototype.ensureTarget=function(n,r){var u;return(u=!this.ensureFrozenHeader(n)||r!==o.header&&r!==o.content?r===o.content||r===o.header?i(t.closest(n,"."+yi),r.substr(1,r.length)):t.closest(n,r):t.closest(n,r===o.header?"thead":h))&&i(u,"e-grid")===this.parent.element},n.prototype.ensureFrozenHeader=function(n){return!(!this.parent.frozenRows||!t.closest(n,o.header))},n.prototype.ensureDisabledStatus=function(n){var t=!1,r,i;switch(n){case"AutoFitAll":case"AutoFit":t=!(this.parent.ensureModuleInjected(wy)&&!this.parent.isEdit)||this.targetColumn&&!this.targetColumn.field&&"AutoFit"===n;break;case"Group":(!this.parent.allowGrouping||this.parent.ensureModuleInjected(sf)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)>=0||this.targetColumn&&!this.targetColumn.field)&&(t=!0);break;case"Ungroup":(!this.parent.allowGrouping||!this.parent.ensureModuleInjected(sf)||this.parent.ensureModuleInjected(sf)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)<0)&&(t=!0);break;case"Edit":case"Delete":case"Save":case"Cancel":this.parent.editModule&&0!==this.parent.getDataRows().length||(t=!0);break;case"Copy":(0===this.parent.getSelectedRowIndexes().length&&0===this.parent.getSelectedRowCellIndexes().length||0===this.parent.getCurrentViewRecords().length)&&(t=!0);break;case"export":this.parent.allowExcelExport&&this.parent.ensureModuleInjected(td)||this.parent.allowPdfExport&&this.parent.ensureModuleInjected(id)||(t=!0);break;case"PdfExport":this.parent.allowPdfExport&&this.parent.ensureModuleInjected(id)||(t=!0);break;case"ExcelExport":case"CsvExport":this.parent.allowExcelExport&&this.parent.ensureModuleInjected(td)||(t=!0);break;case"SortAscending":case"SortDescending":if(this.parent.allowSorting&&this.parent.ensureModuleInjected(is)&&(!this.targetColumn||this.targetColumn.field)){if(this.parent.ensureModuleInjected(is)&&this.parent.sortSettings.columns.length>0&&this.targetColumn)for(r=this.parent.sortSettings.columns,i=0;i<r.length;i++)r[parseInt(i.toString(),10)].field===this.targetColumn.field&&r[parseInt(i.toString(),10)].direction.toLowerCase()===n.toLowerCase().replace("sort","").toLocaleLowerCase()&&(t=!0)}else t=!0;break;case"FirstPage":case"PrevPage":this.parent.allowPaging&&this.parent.ensureModuleInjected(hc)&&0!==this.parent.getCurrentViewRecords().length&&(!this.parent.ensureModuleInjected(hc)||1!==this.parent.pageSettings.currentPage)||(t=!0);break;case"LastPage":case"NextPage":this.parent.allowPaging&&this.parent.ensureModuleInjected(hc)&&0!==this.parent.getCurrentViewRecords().length&&(!this.parent.ensureModuleInjected(hc)||this.parent.pageSettings.currentPage!==this.getLastPage())||(t=!0);break;case"Chart":t=!this.parent.getSelectedRecords().length}return t},n.prototype.getContextMenu=function(){return this.element},n.prototype.destroy=function(){var n=this.parent.element;n&&(n.querySelector("."+st)||n.querySelector("."+it))&&(this.contextMenu&&(this.contextMenu.select=null,this.contextMenu.beforeOpen=null,this.contextMenu.onOpen=null,this.contextMenu.onClose=null),this.removeEventListener(),this.contextMenu.destroy(),this.element.parentNode&&t.remove(this.element),this.parent.element.classList.remove("e-noselect"))},n.prototype.getModuleName=function(){return"contextMenu"},n.prototype.generateID=function(n){return this.gridID+"_cmenu_"+n},n.prototype.getKeyFromId=function(n){return n.replace(this.gridID+"_cmenu_","")},n.prototype.buildDefaultItems=function(n){var t;switch(n){case"AutoFitAll":t={target:o.header,iconCss:o.autofitall};break;case"AutoFit":t={target:o.header,iconCss:o.autofit};break;case"Group":t={target:o.header,iconCss:o.group};break;case"Ungroup":t={target:o.header,iconCss:o.ungroup};break;case"Edit":t={target:o.content,iconCss:o.editIcon};break;case"Delete":t={target:o.content,iconCss:o.delete};break;case"Save":t={target:o.edit,iconCss:o.save};break;case"Cancel":t={target:o.edit,iconCss:o.cancel};break;case"Copy":t={target:o.content,iconCss:o.copy};break;case"export":t={target:o.content};break;case"PdfExport":t={target:o.content,iconCss:o.pdf};break;case"ExcelExport":t={target:o.content,iconCss:o.excel};break;case"CsvExport":t={target:o.content,iconCss:o.csv};break;case"SortAscending":t={target:o.header,iconCss:o.ascending};break;case"SortDescending":t={target:o.header,iconCss:o.descending};break;case"FirstPage":t={target:o.pager,iconCss:o.fPage};break;case"PrevPage":t={target:o.pager,iconCss:o.pPage};break;case"LastPage":t={target:o.pager,iconCss:o.lPage};break;case"NextPage":t={target:o.pager,iconCss:o.nPage};break;case"Chart":t={target:o.content,iconCss:o.chart};break;case"BarChart":t={target:o.content,iconCss:o.barChart};break;case"Bar":t={target:o.content,iconCss:o.bar};break;case"StackingBar":t={target:o.content,iconCss:o.stackingBar};break;case"StackingBar100":t={target:o.content,iconCss:o.stackingBar100};break;case"Pie":t={target:o.content,iconCss:o.pie};break;case"ColumnChart":t={target:o.content,iconCss:o.columnChart};break;case"Column":t={target:o.content,iconCss:o.column};break;case"StackingColumn":t={target:o.content,iconCss:o.stackingColumn};break;case"StackingColumn100":t={target:o.content,iconCss:o.stackingColumn100};break;case"LineChart":t={target:o.content,iconCss:o.lineChart};break;case"Line":t={target:o.content,iconCss:o.line};break;case"StackingLine":t={target:o.content,iconCss:o.stackingLine};break;case"StackingLine100":t={target:o.content,iconCss:o.stackingLine100};break;case"AreaChart":t={target:o.content,iconCss:o.areaChart};break;case"Area":t={target:o.content,iconCss:o.area};break;case"StackingArea":t={target:o.content,iconCss:o.stackingArea};break;case"StackingArea100":t={target:o.content,iconCss:o.stackingArea100};break;case"Scatter":t={target:o.content,iconCss:o.scatter}}return this.defaultItems[""+n]={text:this.getLocaleText(n),id:this.generateID(n),target:t.target,iconCss:t.iconCss?"e-icons "+t.iconCss:""},this.defaultItems[""+n]},n.prototype.getDefaultItems=function(){return["AutoFitAll","AutoFit","Group","Ungroup","Edit","Delete","Save","Cancel","Copy","export","PdfExport","ExcelExport","CsvExport","SortAscending","SortDescending","FirstPage","PrevPage","LastPage","NextPage","Chart","BarChart","ColumnChart","LineChart","AreaChart"].concat(this.chartList)},n.prototype.setLocaleKey=function(){return{AutoFitAll:"autoFitAll",AutoFit:"autoFit",Copy:"Copy",Group:"Group",Ungroup:"Ungroup",Edit:"EditRecord",Delete:"DeleteRecord",Save:"Save",Cancel:"CancelButton",PdfExport:"Pdfexport",ExcelExport:"Excelexport",CsvExport:"Csvexport","export":"Export",SortAscending:"SortAscending",SortDescending:"SortDescending",FirstPage:"FirstPage",LastPage:"LastPage",PrevPage:"PreviousPage",NextPage:"NextPage",Chart:"Chart",BarChart:"BarChart",Bar:"Bar",StackingBar:"StackingBar",StackingBar100:"StackingBar100",Pie:"Pie",ColumnChart:"ColumnChart",Column:"Column",StackingColumn:"StackingColumn",StackingColumn100:"StackingColumn100",LineChart:"LineChart",Line:"Line",StackingLine:"StackingLine",StackingLine100:"StackingLine100",AreaChart:"AreaChart",Area:"Area",StackingArea:"StackingArea",StackingArea100:"StackingArea100",Scatter:"Scatter"}},n.prototype.getColumn=function(n){var i=t.closest(n.target,"th.e-headercell"),r;return i?(r=i.querySelector(".e-headercelldiv, .e-stackedheadercelldiv").getAttribute("data-mappinguid"),this.parent.getColumnByUid(r)):this.parent.getRowInfo(n.target).column||null},n.prototype.selectRow=function(n,r){this.cell=n.target;this.row=t.closest(n.target,"tr.e-row")||this.row;this.row&&r&&!i(n.target,"e-gridpager")&&this.parent.selectRow(parseInt(this.row.getAttribute(c),10)-1)},n}(),bct=function(){function n(n,t){this.parent=n;this.locator=t;this.addEventListener()}return n.prototype.getModuleName=function(){return"freeze"},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(or,this.instantiateRenderer,this),this.parent.on(l,this.destroy,this))},n.prototype.instantiateRenderer=function(){this.parent.log("limitation",this.getModuleName())},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(or,this.instantiateRenderer),this.parent.off(l,this.destroy))},n.prototype.destroy=function(){this.removeEventListener()},n}(),kct=function(){function n(n,t){this.defaultItems={};this.localeText=this.setLocaleKey();this.disableItems=[];this.hiddenItems=[];this.isOpen=!1;this.GROUP="e-icon-group";this.UNGROUP="e-icon-ungroup";this.ASCENDING="e-icon-ascending";this.DESCENDING="e-icon-descending";this.ROOT="e-columnmenu";this.FILTER="e-icon-filter";this.POP="e-filter-popup";this.WRAP="e-col-menu";this.COL_POP="e-colmenu-popup";this.CHOOSER="_chooser_";this.AUTOFIT="e-icon-autofit";this.AUTOFITALL="e-icon-autofitall";this.COLUMNCHOOSER="e-icon-columnchooser";this.parent=n;this.gridID=n.element.id;this.serviceLocator=t;this.addEventListener();this.parent.enableAdaptiveUI&&this.setFullScreenDialog()}return n.prototype.wireEvents=function(){if(!this.parent.enableAdaptiveUI)for(var i=this.getColumnMenuHandlers(),n=0;n<i.length;n++)t.EventHandler.add(i[parseInt(n.toString(),10)],"mousedown",this.columnMenuHandlerDown,this)},n.prototype.unwireEvents=function(){if(!this.parent.enableAdaptiveUI)for(var i=this.getColumnMenuHandlers(),n=0;n<i.length;n++)t.EventHandler.remove(i[parseInt(n.toString(),10)],"mousedown",this.columnMenuHandlerDown)},n.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,a.isColMenu)},n.prototype.destroy=function(){var n=this.parent.element;(n.querySelector("."+it)||n.querySelector("."+st))&&n&&(this.columnMenu&&this.columnMenu.destroy(),this.removeEventListener(),this.unwireFilterEvents(),this.unwireEvents(),!this.parent.enableAdaptiveUI&&this.element.parentNode&&t.remove(this.element))},n.prototype.columnMenuHandlerClick=function(n){if(n.target.classList.contains("e-columnmenu"))if(this.parent.enableAdaptiveUI){this.headerCell=this.getHeaderCell(n);var t=this.getColumn();this.responsiveDialogRenderer.isCustomDialog=!0;this.parent.notify(ei,{action:4});this.parent.notify(ls,{col:t,target:n.target,isClose:null,id:null});this.responsiveDialogRenderer.showResponsiveDialog(null,t)}else this.columnMenu.items=this.getItems(),this.columnMenu.dataBind(),this.isOpen&&this.headerCell!==this.getHeaderCell(n)||document.querySelector(".e-grid-menu .e-menu-parent.e-ul")?(this.columnMenu.close(),this.openColumnMenu(n)):this.isOpen?this.columnMenu.close():this.openColumnMenu(n)},n.prototype.openColumnMenuByField=function(n){this.openColumnMenu({target:this.parent.getColumnHeaderByField(n).querySelector(".e-columnmenu")})},n.prototype.afterFilterColumnMenuClose=function(){this.columnMenu&&(this.columnMenu.items=this.getItems(),this.columnMenu.dataBind(),this.columnMenu.close())},n.prototype.openColumnMenu=function(n){var f=this.parent.getContent().getClientRects()[0],r=this.parent.getHeaderContent(),i=r.getBoundingClientRect(),t={top:0,left:0},u,e;this.element.style.cssText="display:block;visibility:hidden";u=this.element.getBoundingClientRect();e=this.parent.element.getBoundingClientRect();this.element.style.cssText="display:none;visibility:visible";this.headerCell=this.getHeaderCell(n);this.parent.enableRtl?t=this.parent.enableStickyHeader?tt.calculatePosition(this.headerCell,"left","bottom",!0):tt.calculatePosition(this.headerCell,"left","bottom"):((t=this.parent.enableStickyHeader?tt.calculatePosition(this.headerCell,"right","bottom",!0):tt.calculatePosition(this.headerCell,"right","bottom")).left-=u.width,r.classList.contains("e-sticky")?(t.top=this.parent.element.offsetTop+i.top+i.height,i.top+i.height>f.top&&(t.top+=i.top+i.height-f.top)):this.parent.enableStickyHeader&&(t.top=this.parent.element.offsetTop+r.offsetTop+i.height),t.left+u.width+1>=e.right&&(t.left-=35));this.columnMenu.open(t.top,t.left);n.preventDefault&&n.preventDefault();le(this.parent.element,this.columnMenu.element.parentElement)},n.prototype.columnMenuHandlerDown=function(){this.isOpen=!("none"===this.element.style.display||""===this.element.style.display)},n.prototype.getColumnMenuHandlers=function(){return[].slice.call(this.parent.getHeaderTable().getElementsByClassName(this.ROOT))},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(bt,this.wireEvents,this),this.parent.on(w,this.enableAfterRenderMenu,this),this.parent.on(pt,this.render,this),this.isFilterItemAdded()&&this.parent.on(io,this.filterPosition,this),this.parent.on(vr,this.setFullScreenDialog,this),this.parent.on(ei,this.renderResponsiveChangeAction,this),this.parent.on(kt,this.columnMenuHandlerClick,this),this.parent.on(oo,this.afterFilterColumnMenuClose,this),this.parent.on(rt,this.keyPressHandler,this),this.parent.on(l,this.destroy,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(bt,this.unwireEvents),this.parent.off(w,this.enableAfterRenderMenu),this.parent.off(pt,this.render),this.isFilterItemAdded()&&this.parent.off(io,this.filterPosition),this.parent.off(vr,this.setFullScreenDialog),this.parent.off(ei,this.renderResponsiveChangeAction),this.parent.off(kt,this.columnMenuHandlerClick),this.parent.on(oo,this.afterFilterColumnMenuClose),this.parent.off(rt,this.keyPressHandler),this.parent.off(l,this.destroy))},n.prototype.keyPressHandler=function(n){var i=this.parent,t,r;"altDownArrow"!==n.action||this.parent.enableAdaptiveUI||(t=i.focusModule.currentInfo.element,t&&t.classList.contains("e-headercell")&&(r=i.getColumnByUid(t.firstElementChild.getAttribute("data-mappinguid")),this.openColumnMenuByField(r.field)))},n.prototype.enableAfterRenderMenu=function(n){n.module===this.getModuleName()&&n.enable&&(this.columnMenu&&(this.columnMenu.destroy(),t.remove(this.element)),this.parent.enableAdaptiveUI||this.render())},n.prototype.render=function(){this.parent.enableAdaptiveUI||(this.l10n=this.serviceLocator.getService("localization"),this.element=this.parent.createElement("ul",{id:this.gridID+"_columnmenu",className:"e-colmenu"}),this.element.setAttribute("aria-label",this.l10n.getConstant("ColumnMenuDialogARIA")),this.parent.element.appendChild(this.element),this.columnMenu=new ve.ContextMenu({cssClass:this.parent.cssClass?"e-grid-menu e-grid-column-menu "+this.parent.cssClass:"e-grid-menu e-grid-column-menu",enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,items:this.getItems(),select:this.columnMenuItemClick.bind(this),beforeOpen:this.columnMenuBeforeOpen.bind(this),onOpen:this.columnMenuOnOpen.bind(this),onClose:this.columnMenuOnClose.bind(this),beforeItemRender:this.beforeMenuItemRender.bind(this),beforeClose:this.columnMenuBeforeClose.bind(this)}),this.element&&i(this.element,"e-popup")&&this.element.classList.add(this.COL_POP),this.columnMenu.appendTo(this.element),this.wireFilterEvents())},n.prototype.wireFilterEvents=function(){!t.Browser.isDevice&&this.isFilterItemAdded()&&t.EventHandler.add(this.element,"mouseover",this.appendFilter,this)},n.prototype.unwireFilterEvents=function(){t.Browser.isDevice||!this.isFilterItemAdded()||this.parent.enableAdaptiveUI||t.EventHandler.remove(this.element,"mouseover",this.appendFilter)},n.prototype.beforeMenuItemRender=function(n){var i;if(this.isChooserItem(n.item)){var r=this.getKeyFromId(n.item.id,this.CHOOSER),u=this.parent.columnModel.filter(function(n){return n.field===r}),t=ri.createCheckBox(this.parent.createElement,!1,{label:n.item.text,checked:u[0].visible});this.parent.enableRtl&&t.classList.add("e-rtl");this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?(i=t.classList).add.apply(i,this.parent.cssClass.split(" ")):t.classList.add(this.parent.cssClass));n.element.innerHTML="";n.element.appendChild(t)}else n.item.id&&"Filter"===this.getKeyFromId(n.item.id)&&(n.element.appendChild(this.parent.createElement("span",{className:"e-icons e-caret"})),n.element.className+="e-filter-item e-menu-caret-icon")},n.prototype.columnMenuBeforeClose=function(n){if(n.column=this.targetColumn,this.parent.trigger(on,n),n.event&&n.event.target instanceof Document&&"scroll"===n.event.type)this.parent.enableStickyHeader||(n.cancel=!0);else{var r=n.event?t.closest(n.event.target,".e-menu-item"):null;!t.isNullOrUndefined(n.parentItem)&&"ColumnChooser"===this.getKeyFromId(n.parentItem.id)&&r&&this.isChooserItem(r)?n.cancel=!n.event||"Escape"!==n.event.code:n.event&&(t.closest(n.event.target,"."+this.POP)||n.event.currentTarget&&n.event.currentTarget.activeElement&&i(n.event.currentTarget.activeElement,"e-filter-popup")||i(n.event.target,"e-popup")&&i(n.event.target,"e-colmenu-popup")||i(n.event.target,"e-multiselect-flmenu")||i(n.event.target,"e-popup-wrapper"))&&!t.Browser.isDevice||n.event&&n.event.target&&n.event.target.classList.contains("e-filter-item")&&"Enter"===n.event.key?n.cancel=!0:this.parent.isColumnMenuFilterClosing&&(this.parent.isColumnMenuFilterClosing=!1,n.cancel=!0)}},n.prototype.isChooserItem=function(n){return n.id&&n.id.indexOf("_colmenu_")>=0&&-1===this.getKeyFromId(n.id,this.CHOOSER).indexOf("_colmenu_")},n.prototype.columnMenuBeforeOpen=function(n){var t,r;for(n.column=this.targetColumn=this.getColumn(),this.parent.trigger(en,n),t=0,r=n.items;t<r.length;t++){var i=r[t],u=this.getKeyFromId(i.id),f=this.defaultItems[""+u];-1!==this.getDefaultItems().indexOf(u)&&this.ensureDisabledStatus(u)&&!f.hide&&this.disableItems.push(i.text);i.hide&&this.hiddenItems.push(i.text)}this.columnMenu.enableItems(this.disableItems,!1);this.columnMenu.hideItems(this.hiddenItems)},n.prototype.columnMenuOnOpen=function(n){"e-menu-parent e-ul "===n.element.className&&(n.element.offsetHeight>window.innerHeight||this.parent.element.offsetHeight>window.innerHeight)&&(n.element.style.maxHeight=.8*window.innerHeight+"px",n.element.style.overflowY="auto",this.parent.enableStickyHeader&&(n.element.style.position="fixed"))},n.prototype.ensureDisabledStatus=function(n){var t=!1,r,i;switch(n){case"Group":(!this.parent.allowGrouping||this.parent.ensureModuleInjected(sf)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)>=0||this.targetColumn&&!this.targetColumn.allowGrouping)&&(t=!0);break;case"AutoFitAll":case"AutoFit":t=!this.parent.ensureModuleInjected(wy);break;case"Ungroup":(!this.parent.ensureModuleInjected(sf)||this.parent.ensureModuleInjected(sf)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)<0)&&(t=!0);break;case"SortDescending":case"SortAscending":if(this.parent.allowSorting&&this.parent.ensureModuleInjected(is)&&this.parent.sortSettings.columns.length>0&&this.targetColumn&&this.targetColumn.allowSorting)for(r=this.parent.sortSettings.columns,i=0;i<r.length;i++)r[parseInt(i.toString(),10)].field===this.targetColumn.field&&r[parseInt(i.toString(),10)].direction.toLocaleLowerCase()===n.toLocaleLowerCase().replace("sort","")&&(t=!0);else this.parent.allowSorting&&this.parent.ensureModuleInjected(is)&&(!this.parent.allowSorting||!this.targetColumn||this.targetColumn.allowSorting)||(t=!0);break;case"Filter":this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&this.parent.ensureModuleInjected(py)&&this.targetColumn&&this.targetColumn.allowFiltering?t=!1:this.parent.ensureModuleInjected(py)&&this.parent.allowFiltering&&this.targetColumn&&(!this.targetColumn.allowFiltering||"FilterBar"===this.parent.filterSettings.type)&&(t=!0)}return t},n.prototype.columnMenuItemClick=function(n){switch(this.isChooserItem(n.item)?"ColumnChooser":this.getKeyFromId(n.item.id)){case"AutoFit":this.parent.autoFitColumns(this.targetColumn.field);break;case"AutoFitAll":this.parent.autoFitColumns([]);break;case"Ungroup":this.parent.ungroupColumn(this.targetColumn.field);break;case"Group":this.parent.groupColumn(this.targetColumn.field);break;case"SortAscending":this.parent.sortColumn(this.targetColumn.field,"Ascending");break;case"SortDescending":this.parent.sortColumn(this.targetColumn.field,"Descending");break;case"ColumnChooser":var i=this.getKeyFromId(n.item.id,this.CHOOSER),t=n.element.querySelector(".e-checkbox-wrapper .e-frame");t&&t.classList.contains("e-check")?(t.classList.remove("e-check"),this.parent.hideColumns(i,"field")):t&&(this.parent.showColumns(i,"field"),t.classList.add("e-check"));break;case"Filter":this.getFilter(n.element,n.item.id)}n.column=this.targetColumn;this.parent.trigger(fn,n)},n.prototype.columnMenuOnClose=function(n){n.items.length>0&&n.items[0].parentObj instanceof ve.ContextMenu&&(this.columnMenu.enableItems(this.disableItems,!1),this.disableItems=[],this.columnMenu.showItems(this.hiddenItems),this.hiddenItems=[],this.isFilterPopupOpen()&&this.getFilter(n.element,n.element.id,!0));t.isNullOrUndefined(n.parentItem)||"ColumnChooser"!==this.getKeyFromId(n.parentItem.id)?this.parent.notify(uu,{}):this.columnMenu.element.querySelector(".e-selected")&&this.columnMenu.element.querySelector(".e-selected").focus()},n.prototype.getDefaultItems=function(){return["AutoFitAll","AutoFit","SortAscending","SortDescending","Group","Ungroup","ColumnChooser","Filter"]},n.prototype.getItems=function(){for(var n,r,t=[],i=0,u=this.parent.columnMenuItems?this.parent.columnMenuItems:this.getDefault();i<u.length;i++)n=u[i],"string"==typeof n?"ColumnChooser"===n?(r=this.getDefaultItem(n),r.items=this.createChooserItems(),t.push(r)):t.push(this.getDefaultItem(n)):t.push(n);return t},n.prototype.getDefaultItem=function(n){var t={};switch(n){case"SortAscending":t={iconCss:this.ASCENDING};break;case"SortDescending":t={iconCss:this.DESCENDING};break;case"Group":t={iconCss:this.GROUP};break;case"Ungroup":t={iconCss:this.UNGROUP};break;case"Filter":t={iconCss:this.FILTER};break;case"ColumnChooser":t={iconCss:this.COLUMNCHOOSER};break;case"AutoFit":t={iconCss:this.AUTOFIT};break;case"AutoFitAll":t={iconCss:this.AUTOFITALL}}return this.defaultItems[""+n]={text:this.getLocaleText(n),id:this.generateID(n),iconCss:t.iconCss?"e-icons "+t.iconCss:null},this.defaultItems[""+n]},n.prototype.getLocaleText=function(n){return this.l10n.getConstant(this.localeText[""+n])},n.prototype.generateID=function(n,t){return this.gridID+"_colmenu_"+(t?t+n:n)},n.prototype.getKeyFromId=function(n,t){return n.indexOf("_colmenu_")>0&&n.replace(this.gridID+"_colmenu_"+(t||""),"")},n.prototype.getColumnMenu=function(){return this.element},n.prototype.getModuleName=function(){return"columnMenu"},n.prototype.setLocaleKey=function(){return{AutoFitAll:"autoFitAll",AutoFit:"autoFit",Group:"Group",Ungroup:"Ungroup",SortAscending:"SortAscending",SortDescending:"SortDescending",ColumnChooser:"Columnchooser",Filter:"FilterMenu"}},n.prototype.getHeaderCell=function(n){return t.closest(n.target,"th.e-headercell")},n.prototype.getColumn=function(){if(this.headerCell){var n=this.headerCell.querySelector(".e-headercelldiv").getAttribute("data-mappinguid");return this.parent.getColumnByUid(n)}return null},n.prototype.createChooserItems=function(){for(var n,i=[],t=0,r=this.parent.columnModel;t<r.length;t++)n=r[t],n.showInColumnChooser&&n.field&&i.push({id:this.generateID(n.field,this.CHOOSER),text:n.headerText?n.headerText:n.field});return i},n.prototype.appendFilter=function(n){var r="Filter",i;this.defaultItems[""+r]&&(i=this.defaultItems[""+r].id,t.closest(n.target,"#"+i)&&!this.isFilterPopupOpen()?this.getFilter(n.target,i):!t.closest(n.target,"#"+i)&&this.isFilterPopupOpen()&&this.getFilter(n.target,i,!0))},n.prototype.getFilter=function(n,i,r){var u=this.getFilterPop(),f;u?(u.style.display=!t.Browser.isDevice&&r?"none":"block","none"!==u.style.display)&&("Menu"===this.parent.filterSettings.type?u.querySelector(".e-flmenu-input")?u.querySelector(".e-flmenu-input").focus():u.querySelector(".e-flmenu-valuediv")&&(f=u.querySelector(".e-flmenu-valuediv").firstElementChild,t.isNullOrUndefined(f)||f.focus()):"CheckBox"!==this.parent.filterSettings.type&&"Excel"!==this.parent.filterSettings.type||u.querySelector(".e-searchinput")&&u.querySelector(".e-searchinput").focus()):this.parent.notify(ls,{col:this.targetColumn,target:n,isClose:r,id:i})},n.prototype.setPosition=function(n,t){var i=this.parent.element.getBoundingClientRect(),u=n.getBoundingClientRect(),f=u.left-i.left,r=u.top-i.top;i.height<r?r=r-t.offsetHeight+u.height:i.height<r+t.offsetHeight&&(r=i.height-t.offsetHeight);window.innerHeight<t.offsetHeight+r+i.top&&(r=window.innerHeight-t.offsetHeight-i.top);r+i.top<0&&(r=0);this.parent.enableStickyHeader&&i.top<=0&&(r=u.top-i.top);f+=this.parent.enableRtl?-t.offsetWidth:u.width;i.width<=f+t.offsetWidth?(f-=u.width+t.offsetWidth,u.left<t.offsetWidth&&(f=u.left+t.offsetWidth/2)):f<0&&(f+=t.offsetWidth+u.width);t.style.top=r+"px";t.style.left=f+"px"},n.prototype.filterPosition=function(){var n=this.getFilterPop(),r,i;this.parent.enableAdaptiveUI||(n.classList.add(this.WRAP),t.Browser.isDevice)||(r=n.style.display,n.style.cssText+="display:block;visibility:hidden",i=this.element.querySelector("."+this.FILTER),i&&(this.setPosition(i.parentElement,n),n.style.cssText+="display:"+r+";visibility:visible"))},n.prototype.getDefault=function(){var n=[];return this.parent.ensureModuleInjected(wy)&&(n.push("AutoFitAll"),n.push("AutoFit")),this.parent.allowGrouping&&this.parent.ensureModuleInjected(sf)&&(n.push("Group"),n.push("Ungroup")),this.parent.allowSorting&&this.parent.ensureModuleInjected(is)&&(n.push("SortAscending"),n.push("SortDescending")),n.push("ColumnChooser"),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&this.parent.ensureModuleInjected(py)&&n.push("Filter"),n},n.prototype.isFilterPopupOpen=function(){var n=this.getFilterPop();return n&&"none"!==n.style.display},n.prototype.getFilterPop=function(){var n,i,r;return!t.isNullOrUndefined(this.targetColumn)&&"Menu"===this.parent.filterSettings.type&&t.Browser.isDevice?document.getElementById(this.targetColumn.uid+"-flmdlg"):(n=this.parent.element.querySelector("."+this.POP),n||(i=document.getElementById(this.parent.element.id+"_e-popup"),n=i?i.querySelector("."+this.POP):null),!n&&this.parent.element.classList.contains("e-treelistgrid")&&(r=t.closest(this.parent.element,".e-gantt"),n=r?r.querySelector("."+this.POP):null),n)},n.prototype.isFilterItemAdded=function(){return this.parent.columnMenuItems&&this.parent.columnMenuItems.indexOf("Filter")>=0||!this.parent.columnMenuItems},n.prototype.renderResponsiveChangeAction=function(n){this.responsiveDialogRenderer.action=n.action},n}(),dct=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gct=function(n){function i(t,i){var r=n.call(this,t,i)||this;return r.parent=t,r.serviceLocator=i,r.initEvent(),r}return dct(i,n),i.prototype.initEvent=function(){this.parent.isDestroyed||(this.parent.on(yl,this.initForeignKeyColumns,this),this.parent.on(as,this.getForeignKeyData,this),this.parent.on(bf,this.generateQueryFormData,this))},i.prototype.initForeignKeyColumns=function(n){for(var i=0;i<n.length;i++)n[parseInt(i.toString(),10)].dataSource=n[parseInt(i.toString(),10)].dataSource instanceof u.DataManager?n[parseInt(i.toString(),10)].dataSource:t.isNullOrUndefined(n[parseInt(i.toString(),10)].dataSource)?new u.DataManager:"result"in n[parseInt(i.toString(),10)].dataSource?n[parseInt(i.toString(),10)].dataSource:new u.DataManager(n[parseInt(i.toString(),10)].dataSource)},i.prototype.eventfPromise=function(n,i,r,f){var o=this.getStateEventArgument(i),s=new u.Deferred,h=new u.Deferred,e;return o.action=n.action,e=this.parent.getDataModule(),!t.isNullOrUndefined(n.action)&&n.action.requestType&&!1!==e.foreignKeyDataState.isDataChanged?(e.setForeignKeyDataState({isPending:!0,resolver:h.resolve}),h.promise.then(function(){s.resolve(f.dataSource)}),o.setColumnData=this.parent.setForeignKeyData.bind(this.parent),this.parent.trigger(sn,o)):(e.setForeignKeyDataState({}),s.resolve(r)),s},i.prototype.getForeignKeyData=function(n){var o=this,i=n.column?[n.column]:this.parent.getForeignKeyColumns();"ExcludeHidden"===this.parent.columnQueryMode&&(i=i.filter(function(n){return!1!==n.visible}));for(var e=[],s=function(t){var o=void 0,f=n.isComplex?r.genarateColumnQuery(i[parseInt(t.toString(),10)]):r.genarateQuery(i[parseInt(t.toString(),10)],n.result.result,!1,!0),u;f.params=r.parent.query.params;u=i[parseInt(t.toString(),10)].dataSource;o=u&&"result"in u?r.eventfPromise(n,f,u,i[parseInt(t.toString(),10)]).promise:!u.ready||u.dataSource.offline?u.executeQuery(f):u.ready.then(function(){return u.executeQuery(f)});e.push(o)},r=this,f=0;f<i.length;f++)s(f);Promise.all(e).then(function(r){for(var f=0;f<r.length;f++)i[parseInt(f.toString(),10)].columnData=r[parseInt(f.toString(),10)].result,"dropdownedit"===i[parseInt(f.toString(),10)].editType&&"result"in i[parseInt(f.toString(),10)].dataSource&&(i[parseInt(f.toString(),10)].edit.params=t.extend(i[parseInt(f.toString(),10)].edit.params,{dataSource:r[parseInt(f.toString(),10)].result,query:new u.Query,fields:{value:i[parseInt(f.toString(),10)].foreignKeyField||i[parseInt(f.toString(),10)].field,text:i[parseInt(f.toString(),10)].foreignKeyValue}}));n.promise.resolve(n.result)}).catch(function(t){var i=t;return i.error||(i={error:i}),o.parent.log(["actionfailure","foreign_key_failure"],i),n.promise&&n.promise.reject&&n.promise.reject(t),t})},i.prototype.generateQueryFormData=function(n){n.predicate.predicate=this.genarateQuery(n.column,n.column.columnData,!0)},i.prototype.genarateQuery=function(n,t,i,r){var h=this.parent,e=[],c=new u.Query,s=i?n.foreignKeyField:n.field,o,f;if(h.allowPaging||h.enableVirtualization||i)for(t=new u.DataManager(h.allowGrouping&&h.groupSettings.columns.length&&!i?t.records:t).executeLocal((new u.Query).select(s)),o=u.DataUtil.distinct(t,s,!1),s=i?n.field:n.foreignKeyField,f=0;f<o.length;f++)o[parseInt(f.toString(),10)]&&o[parseInt(f.toString(),10)].getDay?e.push(au({field:s,operator:"equal",value:o[parseInt(f.toString(),10)],matchCase:!1})):e.push(new u.Predicate(s,"equal",o[parseInt(f.toString(),10)],!1));return r?e.length?c.where(u.Predicate.or(e)):c:e.length?u.Predicate.or(e):{predicates:[]}},i.prototype.genarateColumnQuery=function(n){var r=this.parent,t=new u.Query,f=this.isFiltered(n),i;return(f.isTrue&&(t=this.filterQuery(t,f.column,!0)),r.searchSettings.key.length)&&(i=r.searchSettings,n.dataSource instanceof u.DataManager&&n.dataSource.adaptor.getModuleName&&"ODataV4Adaptor"===n.dataSource.adaptor.getModuleName()?t=this.searchQuery(t,n,!0):t.search(i.key,n.foreignKeyValue,i.operator,i.ignoreCase)),t},i.prototype.isFiltered=function(n){var t=this.parent.filterSettings.columns.filter(function(t){return t.field===n.foreignKeyValue&&t.uid===n.uid});return{column:t,isTrue:!!t.length}},i.prototype.getModuleName=function(){return"foreignKey"},i.prototype.destroy=function(){this.destroyEvent()},i.prototype.destroyEvent=function(){this.parent.isDestroyed||(this.parent.off(yl,this.initForeignKeyColumns),this.parent.off(as,this.getForeignKeyData),this.parent.off(bf,this.generateQueryFormData))},i}(fh),nlt=function(){function n(n,t){this.infiniteCache={};this.infiniteCurrentViewData={};this.isDownScroll=!1;this.isUpScroll=!1;this.isScroll=!0;this.enableContinuousScroll=!1;this.initialRender=!0;this.isRemove=!1;this.isInitialCollapse=!1;this.prevScrollTop=0;this.actions=["filtering","searching","grouping","ungrouping","reorder","sorting","refresh"];this.keys=[sv,ho,hv,hh];this.rowTop=0;this.virtualInfiniteData={};this.isCancel=!1;this.emptyRowData={};this.isNormaledit=!1;this.isInfiniteScroll=!1;this.isLastPage=!1;this.isInitialRender=!0;this.isFocusScroll=!1;this.isGroupCollapse=!1;this.infiniteDetailDestroy=!1;this.parent=n;this.serviceLocator=t;this.isNormaledit="Normal"===this.parent.editSettings.mode;this.addEventListener();this.widthService=t.getService("widthService");this.rowModelGenerator=new eu(this.parent)}return n.prototype.getModuleName=function(){return"infiniteScroll"},n.prototype.addEventListener=function(){this.parent.on(wi,this.onDataReady,this);this.parent.on(de,this.dataSourceModified,this);this.parent.on(ua,this.infinitePageQuery,this);this.parent.on(ra,this.infiniteScrollHandler,this);this.parent.on(pf,this.infiniteCellFocus,this);this.parent.on(ea,this.appendInfiniteRows,this);this.parent.on(oa,this.removeInfiniteCacheRows,this);this.parent.on(ia,this.resetInfiniteBlocks,this);this.parent.on(sa,this.setCache,this);this.parent.on(ha,this.ensureIntialCollapse,this);this.parent.on(rt,this.infiniteCellFocus,this);this.parent.on(fa,this.setDisplayNone,this);this.parent.on(ps,this.editActionBegin,this);this.parent.on(nf,this.getVirtualInfiniteData,this);this.parent.on(bs,this.resetInfiniteEdit,this);this.parent.on(uo,this.infiniteEditSuccess,this);this.parent.on(ws,this.refreshInfiniteCache,this);this.parent.on(iv,this.refreshInfiniteEditrowindex,this);this.parent.on(ds,this.infiniteEditHandler,this);this.parent.on(ks,this.infiniteAddActionBegin,this);this.parent.on(ot,this.modelChanged,this);this.parent.on(ya,this.refreshInfiniteCurrentViewData,this);this.parent.on(l,this.destroy,this);this.parent.on(k,this.selectNewRow,this);this.parent.on(nv,this.captionActionComplete,this);this.parent.on(th,this.setGroupCollapsePageQuery,this);this.parent.on(nb,this.onActionComplete,this);this.actionBeginFunction=this.actionBegin.bind(this);this.actionCompleteFunction=this.actionComplete.bind(this);this.dataBoundFunction=this.dataBound.bind(this);this.parent.addEventListener(p,this.actionBeginFunction);this.parent.addEventListener(s,this.actionCompleteFunction);this.parent.addEventListener(ti,this.dataBoundFunction)},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(wi,this.onDataReady),this.parent.off(de,this.dataSourceModified),this.parent.off(ua,this.infinitePageQuery),this.parent.off(ra,this.infiniteScrollHandler),this.parent.off(pf,this.infiniteCellFocus),this.parent.off(ea,this.appendInfiniteRows),this.parent.off(oa,this.removeInfiniteCacheRows),this.parent.off(ia,this.resetInfiniteBlocks),this.parent.off(sa,this.setCache),this.parent.off(ha,this.ensureIntialCollapse),this.parent.off(rt,this.infiniteCellFocus),this.parent.off(fa,this.setDisplayNone),this.parent.off(ps,this.editActionBegin),this.parent.off(nf,this.getVirtualInfiniteData),this.parent.off(bs,this.resetInfiniteEdit),this.parent.off(uo,this.infiniteEditSuccess),this.parent.off(ws,this.refreshInfiniteCache),this.parent.on(iv,this.refreshInfiniteEditrowindex),this.parent.off(ds,this.infiniteEditHandler),this.parent.off(ks,this.infiniteAddActionBegin),this.parent.off(ot,this.modelChanged),this.parent.off(ya,this.refreshInfiniteCurrentViewData),this.parent.off(l,this.destroy),this.parent.off(k,this.selectNewRow),this.parent.off(nv,this.captionActionComplete),this.parent.off(th,this.setGroupCollapsePageQuery),this.parent.off(nb,this.onActionComplete),this.parent.removeEventListener(p,this.actionBeginFunction),this.parent.removeEventListener(s,this.actionCompleteFunction),this.parent.removeEventListener(ti,this.dataBoundFunction))},n.prototype.dataBound=function(){"collapse"===this.groupCaptionAction?(this.groupCaptionAction="refresh",this.makeGroupCollapseRequest()):"refresh"===this.groupCaptionAction&&(this.parent.hideSpinner(),this.groupCaptionAction=this.empty)},n.prototype.setGroupCollapsePageQuery=function(n){var i=this.parent;if(!i.infiniteScrollSettings.enableCache&&this.isGroupCollapse)if(n.skipPage=!0,this.isGroupCollapse=!1,"collapse"===this.groupCaptionAction){for(var s=i.getRowObjectFromUID(this.parentCapUid),r=i.getRowsObject(),h=0,t=r.length-1;t>=0&&r[parseInt(t.toString(),10)].indent!==s.indent;t--)r[parseInt(t.toString(),10)].isDataRow&&h++;var c=ts(r.indexOf(s),r),u=ay(c.fields,c.keys,this),e=vy(u);for(u=e[e.length-1],t=e.length-2;t>=0;t--)u=u.and(e[parseInt(t.toString(),10)]);n.query.where(u);n.query.skip(h);this.parentCapUid=this.empty}else{var l=i.getRows(),o=i.pageSettings.pageSize,f=tr(l[l.length-1])+1,a=f-f%o+o-f;f%o==0&&(a=0);n.query.skip(f);n.query.take(i.infiniteScrollSettings.initialBlocks*i.pageSettings.pageSize+a)}},n.prototype.captionActionComplete=function(n){var t=this.parent,i,r,u;!t.infiniteScrollSettings.enableCache&&n.isCollapse&&(i=t.getContent().firstElementChild.getBoundingClientRect(),r=t.contentModule.getTable().getBoundingClientRect(),Math.round(r.bottom-t.getRowHeight())<=Math.round(i.bottom)&&(this.parentCapUid=n.parentUid,this.groupCaptionAction="collapse",t.showSpinner(),u=t.getRowObjectFromUID(n.parentUid),this.getCaptionChildCount(u)?this.makeGroupCollapseRequest(n.parentUid):(this.groupCaptionAction="refresh",this.makeGroupCollapseRequest())))},n.prototype.makeGroupCollapseRequest=function(n){var t=this.parent,o=[].slice.call(t.getContentTable().querySelectorAll("tr")),i=t.groupSettings.enableLazyLoading?o:t.getRows(),r=t.groupSettings.enableLazyLoading?t.contentModule.visibleRows.length-1:tr(i[i.length-1]),u=this.parent.pageSettings.currentPage,f=Math.ceil(r/this.parent.pageSettings.pageSize)+1,e;u>=this.maxPage||f>this.maxPage?t.hideSpinner():(this.parent.pageSettings.currentPage=f,e={requestType:"infiniteScroll",currentPage:this.parent.pageSettings.currentPage,prevPage:u,startIndex:r+1,direction:"down",isCaptionCollapse:!0,parentUid:n},this.isGroupCollapse=!0,this.parent.notify("model-changed",e))},n.prototype.getCaptionChildCount=function(n){for(var t=this.parent.getRowsObject(),r=!1,i=t.indexOf(n);i<t.length&&(!(t[parseInt(i.toString(),10)].indent===n.indent||t[parseInt(i.toString(),10)].indent<n.indent)||t[parseInt(i.toString(),10)].data.key===n.data.key);i++)if(t[parseInt(i.toString(),10)].isCaptionRow&&!this.childCheck(t,t[parseInt(i.toString(),10)],i)){r=!0;break}return r},n.prototype.childCheck=function(n,t,i){for(var u=0,r=i+1;r<n.length&&n[parseInt(r.toString(),10)].indent!==t.indent;r++)n[parseInt(r.toString(),10)].indent===t.indent+1&&n[parseInt(r.toString(),10)].parentUid===t.uid&&u++;return t.data.count===u},n.prototype.updateCurrentViewData=function(){var n=this.parent,u;if(!n.groupSettings.columns.length){u=Object.keys(this.infiniteCurrentViewData);n.currentViewData=[];for(var t=n.pageSettings.currentPage,f=n.infiniteScrollSettings.enableCache,i=n.infiniteScrollSettings.maxBlocks,e=f&&(t>i||this.isUpScroll&&t>1),o=e?this.isUpScroll?t:t-i+1:1,s=e?o+i-1:f?i:u.length,r=o;r<=s;r++)this.infiniteCurrentViewData[parseInt(r.toString(),10)]&&(n.currentViewData=n.currentViewData.concat(this.infiniteCurrentViewData[parseInt(r.toString(),10)]))}},n.prototype.refreshInfiniteCurrentViewData=function(n){var i=this.parent,r=i.enableInfiniteScrolling&&(i.childGrid||i.detailTemplate)&&("add"===n.args.action&&"save"===n.args.requestType||"delete"===n.args.requestType),f,h,e,t;"add"!==n.args.action||"save"!==n.args.requestType||r||(this.parent.pageSettings.currentPage=Math.ceil(n.args.index/this.parent.pageSettings.pageSize)?Math.ceil(n.args.index/this.parent.pageSettings.pageSize):1);var c=this.parent.pageSettings.currentPage,l=this.parent.pageSettings.pageSize,o=this.parent.infiniteScrollSettings.initialBlocks,u=Object.keys(this.infiniteCurrentViewData),s=this.parent.infiniteScrollSettings.enableCache;if(!this.parent.groupSettings.columns.length)if(f="save"===n.args.requestType&&!(this.parent.sortSettings.columns.length||this.parent.filterSettings.columns.length||this.parent.groupSettings.columns.length||this.parent.searchSettings.key),h="delete"===n.args.requestType,s||!f&&!h||r)o>1&&n.data.length===o*l?(r&&(this.infiniteCurrentViewData={},this.firstBlock=1),this.setInitialCache(n.data.slice(),{},s&&"delete"===n.args.requestType,!0)):this.infiniteCurrentViewData[parseInt(c.toString(),10)]=n.data.slice();else if(f){for(e=0,t=1;t<=u.length;t++)if(e+=this.infiniteCurrentViewData[parseInt(t.toString(),10)].length-1,n.args.index<=e){this.resetCurrentViewData(t);this.infiniteCurrentViewData[parseInt(t.toString(),10)].splice(n.args.index,0,n.args.data);break}}else this.infiniteCurrentViewData[u[u.length-1]].push(n.data[0])},n.prototype.resetCurrentViewData=function(n){for(var r,i=Object.keys(this.infiniteCurrentViewData),t=n;t<=i.length;t++)r=this.infiniteCurrentViewData[parseInt(t.toString(),10)][this.infiniteCurrentViewData[parseInt(t.toString(),10)].length-1],this.infiniteCurrentViewData[t+1]&&this.infiniteCurrentViewData[t+1].splice(0,0,r),this.infiniteCurrentViewData[parseInt(t.toString(),10)].pop()},n.prototype.modelChanged=function(n){var t=this.parent.getRows(),i;("save"===n.requestType&&n.index&&n.data&&(this.addRowIndex=n.index),t&&t.length&&"infiniteScroll"!==n.requestType&&("delete"===n.requestType||"add"===this.requestType))&&((this.firstIndex=tr(t[0]),this.firstBlock=Math.ceil((this.firstIndex+1)/this.parent.pageSettings.pageSize),this.lastIndex=tr(t[t.length-1]),"delete"===n.requestType)?(i=this.parent.getRowsObject(),n.startIndex=this.parent.infiniteScrollSettings.enableCache?(this.firstBlock-1)*this.parent.pageSettings.pageSize:i[i.length-1].index):n.startIndex=this.firstIndex,this.parent.infiniteScrollSettings.enableCache||this.parent.pageSettings.currentPage!==this.maxPage||"delete"!==n.requestType||(this.isLastPage=!0,this.lastIndex=this.lastIndex-1))},n.prototype.infiniteAddActionBegin=function(n){this.isNormaledit&&(this.isAdd=!0,this.parent.infiniteScrollSettings.enableCache&&(Object.keys(this.emptyRowData).length||this.createEmptyRowdata(),this.parent.pageSettings.currentPage>1&&(n.startEdit=!1,this.resetInfiniteBlocks({},!0),this.makeRequest({currentPage:1}))))},n.prototype.infiniteEditHandler=function(n){if(!this.parent.infiniteScrollSettings.enableCache&&("delete"===n.e.requestType||"save"===n.e.requestType&&"add"===this.requestType)){var i=this.parent.getRows(),r=this.parent.getRowsObject();this.ensureRowAvailability(r,n.result[0])&&(!i.length||this.addRowIndex&&this.addRowIndex>=i.length||this.resetRowIndex(r,n.e,i,"add"===this.requestType,!0),this.isLastPage?(this.isLastPage=!1,this.parent.pageSettings.currentPage=this.maxPage,this.parent.selectionModule.index<this.parent.frozenRows&&(t.remove(i[this.parent.frozenRows-1]),this.createRow([r[this.parent.frozenRows-1]],n,!1,!0),bo(this.parent))):this.createRow(r,n));this.parent.hideSpinner();this.parent.notify(tv,{});"delete"===this.requestType?this.parent.notify(vp,n.e):this.parent.notify(ap,n.e)}this.parent.notify(ru,{"case":"refreshHeight"})},n.prototype.createRow=function(n,i,r,u,f){var e=u?n:this.generateRows(i.result,i.e),l=new ci(this.serviceLocator,null,this.parent),o,c,s,a,v;if(this.parent.removeMaskRow(),!("save"===i.e.requestType&&i.e.index&&i.e.data&&(e[0].index=this.addRowIndex,this.addRowIndex=null,e[0].index>=n.length))){if(o=this.parent.getContent().querySelector(h),this.parent.frozenRows&&(o=u&&"add"!==this.requestType||!u&&"add"===this.requestType?this.parent.getHeaderContent().querySelector(h):o),c={rows:n,cancel:!1,args:i,isMovable:r,isFrozenRows:u,isFrozenRight:u,row:e},this.parent.notify(vtt,c),!c.cancel)for(s=e.length-1;s>=0;s--)"delete"===this.requestType?o.appendChild(l.render(e[parseInt(s.toString(),10)],this.parent.getColumns())):o.insertBefore(l.render(e[parseInt(s.toString(),10)],this.parent.getColumns()),o.rows[i.e.index]);!u&&this.parent.frozenRows&&(this.parent.selectionModule.index<this.parent.frozenRows||"add"===this.requestType)&&(a=this.parent.getRows(),v=(r||f)&&"add"===this.requestType?this.parent.frozenRows:this.parent.frozenRows-1,t.remove(a[parseInt(v.toString(),10)]),this.createRow([n[this.parent.frozenRows-1]],i,!1,!0,!1));this.parent.infiniteScrollSettings.enableCache||u||(bo(this.parent),this.parent.contentModule.visibleRows="add"===this.requestType?e.concat(n):n.concat(e))}},n.prototype.ensureRowAvailability=function(n,t){var u=!0,r,i;if(this.parent.frozenRows&&!this.parent.infiniteScrollSettings.enableCache&&this.parent.sortSettings.columns&&"add"===this.requestType)for(r=this.parent.getPrimaryKeyFieldNames()[0],i=0;i<n.length;i++)if(n[parseInt(i.toString(),10)].data[""+r]===t[""+r]){u=!1;break}return u},n.prototype.generateRows=function(n,t){return this.rowModelGenerator.generateRows(n,t)},n.prototype.resetRowIndex=function(n,i,r,u,f){var e=this,o=this.parent.getPrimaryKeyFieldNames()[0],h=!(r.length%this.parent.pageSettings.pageSize),s;u?h&&(f&&!this.parent.groupSettings.columns.length&&this.swapCurrentViewData(1,!0),t.remove(r[n.length-1]),r.splice(n.length-1,1),n.splice(n.length-1,1)):n.filter(function(u,s){var c,h,l;u.data[""+o]===i.data[0][""+o]&&(f&&!e.parent.groupSettings.columns.length&&(c=Math.ceil((s+1)/e.parent.pageSettings.pageSize),e.resetInfiniteCurrentViewData(c,s)),n.splice(s,1),h=e.parent.getRowElementByUID(u.uid),h&&(l=r.indexOf(h),t.remove(h),r.splice(l,1)))});s=u?this.addRowIndex?this.addRowIndex+1:1:0;wo(this.parent,n,r,s,this.addRowIndex?this.addRowIndex:0)},n.prototype.resetInfiniteCurrentViewData=function(n,t){t-=(n-1)*this.parent.pageSettings.pageSize;this.infiniteCurrentViewData[parseInt(n.toString(),10)].splice(t,1);this.swapCurrentViewData(n,!1)},n.prototype.swapCurrentViewData=function(n,t){for(var r=Object.keys(this.infiniteCurrentViewData),u=t?r.length+1:r.length,i=n;i<u;i++)if(this.infiniteCurrentViewData[i+1]){var e=t?i:i+1,o=t?this.infiniteCurrentViewData[parseInt(i.toString(),10)].length-1:0,f=this.infiniteCurrentViewData[parseInt(e.toString(),10)].splice(o,1);t?(this.infiniteCurrentViewData[i+1]=f.concat(this.infiniteCurrentViewData[i+1]),i+1===u-1&&this.infiniteCurrentViewData[i+1].splice(this.infiniteCurrentViewData[i+1].length-1,1)):this.infiniteCurrentViewData[parseInt(i.toString(),10)].push(f[0])}this.updateCurrentViewData()},n.prototype.setDisplayNone=function(n){if(this.parent.infiniteScrollSettings.enableCache){for(var i=Object.keys(this.infiniteCache),t=1;t<=i.length;t++)this.infiniteCache[parseInt(t.toString(),10)].filter(function(t){t.cells[n.index].visible=""===n.visible});this.resetContentModuleCache(this.infiniteCache)}},n.prototype.refreshInfiniteCache=function(n){this.getEditedRowObject().data=n.data},n.prototype.refreshInfiniteCacheRowVisibleLength=function(n,i){var e=n[parseInt(i.toString(),10)];if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache){for(var r=0,u=0,f=0,o=0;o<e.length;o++)e[parseInt(o.toString(),10)].visible||t.isNullOrUndefined(e[parseInt(o.toString(),10)].visible)?u++:f++;return f>u?(r=f-u)>u&&(r=u):(r=u-f)>f&&(r=f),0===r&&(r=1),r}return e.length},n.prototype.refreshInfiniteEditrowindex=function(n){this.editRowIndex=n.index},n.prototype.getEditedRowObject=function(){for(var i,t=this.parent.getRowsObject(),n=0;n<t.length;n++)t[parseInt(n.toString(),10)].index===this.editRowIndex&&(i=t[parseInt(n.toString(),10)]);return i},n.prototype.infiniteEditSuccess=function(n){this.isNormaledit&&(!this.isAdd&&n.data&&this.updateCurrentViewRecords(n.data),this.isAdd=this.parent.editSettings.showAddNewRow)},n.prototype.updateCurrentViewRecords=function(n){var i=fy(this.parent,n);t.isNullOrUndefined(i)||(this.parent.getCurrentViewRecords()[parseInt(i.toString(),10)]=n)},n.prototype.actionBegin=function(n){"add"===n.requestType||"delete"===n.requestType?this.requestType=n.requestType:"add"===n.action&&"save"===n.requestType&&(this.requestType=n.action);(this.parent.isFrozenGrid()&&!n.cancel&&"searching"===n.requestType||"sorting"===n.requestType||"filtering"===n.requestType)&&(this.isInitialRender=!0)},n.prototype.actionComplete=function(n){"delete"!==n.requestType&&"save"!==n.requestType&&"cancel"!==n.requestType||(this.requestType=this.empty,this.isCancel="cancel"===n.requestType||"save"===n.requestType,this.isAdd=this.isEdit=this.parent.editSettings.showAddNewRow,this.isNormaledit&&(this.editRowIndex=this.empty,this.virtualInfiniteData={},this.parent.editModule.previousVirtualData={}))},n.prototype.onActionComplete=function(n){var i={type:s};this.parent.trigger(s,t.extend(n,i))},n.prototype.resetInfiniteEdit=function(){this.parent.enableInfiniteScrolling&&this.isNormaledit&&(this.parent.editSettings.allowEditing&&this.isEdit||this.parent.editSettings.allowAdding&&this.isAdd)&&(this.parent.isEdit=!0)},n.prototype.getVirtualInfiniteData=function(n){this.getVirtualInfiniteEditedData();n.virtualData=this.parent.enableColumnVirtualization&&!this.parent.infiniteScrollSettings.enableCache?n.virtualData:this.virtualInfiniteData;n.isAdd=this.isAdd;n.isCancel=this.isCancel},n.prototype.editActionBegin=function(n){this.isEdit=!0;this.editRowIndex=n.index;var i=t.extend({},this.getEditedRowObject().data);n.data=Object.keys(this.virtualInfiniteData).length?this.virtualInfiniteData:i},n.prototype.dataSourceModified=function(){this.resetInfiniteBlocks({requestType:this.empty},!0)},n.prototype.onDataReady=function(n){t.isNullOrUndefined(n.count)||"infiniteScroll"===n.requestType||(this.maxPage=Math.ceil(n.count/this.parent.pageSettings.pageSize))},n.prototype.ensureIntialCollapse=function(n){this.isInitialCollapse=!n},n.prototype.infiniteScrollHandler=function(n){var r,a,e,p,b;if(!this.infiniteDetailDestroy){this.restoreInfiniteEdit();this.restoreInfiniteAdd();var i=n.target,k=i.classList.contains(lt),s=!(!this.parent.childGrid&&!this.parent.detailTemplate);if(k&&this.parent.enableInfiniteScrolling&&!n.isLeft){if(r=this.parent.getContent().firstElementChild,a=[].slice.call(this.parent.getContentTable().querySelectorAll("tr")),this.prevScrollTop=r.scrollTop,e=s?this.parent.getRows().filter(function(n){return!n.classList.contains("e-detailrow")}):this.parent.groupSettings.enableLazyLoading?a:this.parent.getRows(),!e.length)return;var d=tr(e[e.length-1])+1,v=this.parent.pageSettings.currentPage,u=void 0,h=i.scrollHeight-i.scrollTop,g=Math.round(i.scrollHeight-i.scrollTop),o=h<i.clientHeight?Math.ceil(h):Math.floor(h),f=i.clientHeight;if(o>f?o-=1:f>o&&(f-=1),p=o===f||g===f,!t.isNullOrUndefined(this.groupCaptionAction))return;if(this.isScroll&&p&&(this.parent.pageSettings.currentPage<=this.maxPage-1||this.enableContinuousScroll)){this.parent.infiniteScrollSettings.enableCache&&(this.isUpScroll=!1,this.isDownScroll=!0);var w=s?this.getGridRows().filter(function(n){return n.classList.contains("e-row")&&!n.classList.contains("e-addedrow")}):[].slice.call(r.querySelectorAll(".e-row:not(.e-addedrow)")),c=w[w.length-1],l=this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length?this.parent.contentModule.visibleRows.length-1:tr(c);this.parent.pageSettings.currentPage=Math.ceil(l/this.parent.pageSettings.pageSize)+1;u={requestType:"infiniteScroll",currentPage:this.parent.pageSettings.currentPage,prevPage:v,startIndex:d,direction:"down"};this.makeRequest(u)}this.isScroll&&this.parent.infiniteScrollSettings.enableCache&&0===i.scrollTop&&1!==this.parent.pageSettings.currentPage&&(this.parent.infiniteScrollSettings.enableCache&&(this.isDownScroll=!1,this.isUpScroll=!0),l=tr((c=s?this.getGridRows().filter(function(n){return n.classList.contains(y)}):[].slice.call(r.getElementsByClassName(y)))[this.parent.pageSettings.pageSize-1]),b=tr(c[0])-this.parent.pageSettings.pageSize,this.parent.pageSettings.currentPage=Math.ceil(l/this.parent.pageSettings.pageSize)-1,this.parent.pageSettings.currentPage&&(u={requestType:"infiniteScroll",currentPage:this.parent.pageSettings.currentPage,prevPage:v,startIndex:b,direction:"up"},this.makeRequest(u)));this.parent.infiniteScrollSettings.enableCache&&!this.isScroll&&t.isNullOrUndefined(u)&&(this.isDownScroll||this.isUpScroll)&&(r.scrollTop=this.top)}}},n.prototype.makeRequest=function(n){var i=this,r;this.parent.pageSettings.currentPage!==n.prevPage&&(r=this.parent.infiniteScrollSettings.initialBlocks,r<this.maxPage&&this.parent.pageSettings.currentPage<=this.maxPage?(this.isInfiniteScroll=!0,t.isNullOrUndefined(this.infiniteCache[n.currentPage])?setTimeout(function(){i.getVirtualInfiniteEditedData();i.parent.notify("model-changed",n)},100):setTimeout(function(){i.getVirtualInfiniteEditedData();i.parent.notify(cw,n)},100)):this.parent.pageSettings.currentPage=this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&r>=this.maxPage?1:this.maxPage)},n.prototype.infinitePageQuery=function(n){this.initialRender||("add"===this.requestType||"delete"===this.requestType)&&(this.parent.childGrid||this.parent.detailTemplate)?(this.initialRender=!1,this.intialPageQuery(n)):"delete"===this.requestType||"add"===this.requestType?this.isInfiniteScroll||this.parent.groupSettings.enableLazyLoading?this.parent.groupSettings.enableLazyLoading&&!this.parent.infiniteScrollSettings.enableCache?this.parent.infiniteScrollSettings.initialBlocks<this.parent.pageSettings.currentPage?n.page(1,this.parent.pageSettings.pageSize*this.parent.pageSettings.currentPage):n.page(1,this.parent.pageSettings.pageSize*this.parent.infiniteScrollSettings.initialBlocks):n.page(this.parent.pageSettings.currentPage,this.parent.pageSettings.pageSize):this.editPageQuery(n):n.page(this.parent.pageSettings.currentPage,this.parent.pageSettings.pageSize)},n.prototype.editPageQuery=function(n){var i=this.parent.infiniteScrollSettings.initialBlocks,r;this.parent.infiniteScrollSettings.enableCache?(this.infiniteCache={},this.infiniteCurrentViewData={},n.skip(this.firstIndex),n.take(i*this.parent.pageSettings.pageSize)):("Dialog"===this.parent.editSettings.mode&&this.parent.clearSelection(),r="delete"===this.requestType?this.lastIndex:this.addRowIndex?this.addRowIndex:this.firstIndex,n.skip(r),t.isNullOrUndefined(this.parent.getDataModule().dataManager.dataSource.url)||""===this.parent.getDataModule().dataManager.dataSource.url||"delete"!==this.requestType&&"add"!==this.requestType?n.take(1):n.take(i*this.parent.pageSettings.pageSize))},n.prototype.intialPageQuery=function(n){this.parent.infiniteScrollSettings.enableCache&&this.parent.infiniteScrollSettings.initialBlocks>this.parent.infiniteScrollSettings.maxBlocks&&(this.parent.infiniteScrollSettings.initialBlocks=this.parent.infiniteScrollSettings.maxBlocks);var t=this.parent.pageSettings.pageSize*this.parent.infiniteScrollSettings.initialBlocks;n.page(1,t)},n.prototype.scrollToLastFocusedCell=function(n){var i=this.parent,f=this.lastFocusInfo.rowIdx+(n.keyArgs.action===ho?-1:1),y=this.lastFocusInfo.cellIdx,c=i.getRowByIndex(f),l,r,a,u,e,h;if(!c){l=new ci(this.serviceLocator,null,this.parent);r=Math.floor(f/this.parent.pageSettings.pageSize)+1;i.pageSettings.currentPage=r;a=i.getColumns();t.remove(i.getContent().querySelector("tbody"));i.getContent().querySelector("table").appendChild(i.createElement("tbody",{attrs:{role:"rowgroup"}}));for(var o=[],s=1===r||this.maxPage===r?0:-1,v=0;v<i.infiniteScrollSettings.maxBlocks;this.maxPage===r?s--:s++,v++)if(u=this.infiniteCache[r+s],u)for(o=o.concat(u),e=0;e<u.length;e++)i.getContent().querySelector("tbody").appendChild(l.render(u[parseInt(e.toString(),10)],a));i.notify(k,{rows:o,args:{}});bo(i)}h=(c=i.getRowByIndex(f)).cells[parseInt(y.toString(),10)];i.focusModule.isInfiniteScroll=!0;i.focusModule.onClick({target:h},!0);i.selectRow(f);h.focus();this.isFocusScroll=!1;n.cancel=!0},n.prototype.setLastCellFocusInfo=function(n){var t=n.byClick&&n.clickArgs.target||n.byKey&&n.keyArgs.target||(!this.isFocusScroll&&n).target,i,r;t&&t.classList.contains("e-rowcell")&&(i=parseInt(t.getAttribute("aria-colindex"),10)-1,r=parseInt(t.parentElement.getAttribute("aria-rowindex"),10)-1,this.lastFocusInfo={rowIdx:r,cellIdx:i})},n.prototype.infiniteCellFocus=function(n){var u=this.parent,e=u.infiniteScrollSettings.enableCache,f,t,i,r;if(n.byKey){if(e&&this.isFocusScroll)return void this.scrollToLastFocusedCell(n);f=document.activeElement;t=tr(f.parentElement);this.cellIndex=parseInt(f.getAttribute(ft),10)-1;var o=u.getContent().firstElementChild,h=this.maxPage*u.pageSettings.pageSize-1,c=Math.floor(o.offsetHeight/this.parent.getRowHeight()),s=o.getBoundingClientRect();isNaN(t)||(n.keyArgs.action===sv||n.keyArgs.action===hv?(this.rowIndex=t+=1,i=(r=u.getRowByIndex(t))&&r.getBoundingClientRect(),e&&(t=f.parentElement.rowIndex+1),this.isFocusScroll||!r&&t<h||i&&i.bottom>=s.bottom?(this.isFocusScroll||(this.pressedKey=n.keyArgs.action),this.isFocusScroll=!1,o.scrollTop=(t-c+1)*this.parent.getRowHeight()):!e&&r&&i&&(i.bottom>=s.bottom||i.top<s.top)&&r.cells[this.cellIndex].scrollIntoView()):(n.keyArgs.action===ho||n.keyArgs.action===hh)&&(this.rowIndex=t-=1,i=(r=u.getRowByIndex(t))&&r.getBoundingClientRect(),e&&(t=f.parentElement.rowIndex-1),(!r||i.top<=s.top)&&(this.pressedKey=n.keyArgs.action,o.scrollTop=t*this.parent.getRowHeight())))}else"PageDown"!==n.key&&"PageUp"!==n.key||(this.pressedKey=n.key);this.setLastCellFocusInfo(n)},n.prototype.createEmptyRowdata=function(){var n=this;this.parent.getColumns().filter(function(t){n.emptyRowData[t.field]=n.empty})},n.prototype.getVirtualInfiniteEditedData=function(){var r=this.parent.element.querySelector("."+ut),f=this.parent.element.querySelector("."+ii),e=this.parent.element.querySelector(".e-gridform"),u,i,n;if(this.parent.infiniteScrollSettings.enableCache&&(r||f))for(u=r?t.extend({},this.getEditedRowObject().data):t.extend({},this.emptyRowData),this.virtualInfiniteData=this.parent.editModule.getCurrentEditedData(e,u),i=this.parent.getHiddenColumns(),n=0;n<i.length;n++)i[parseInt(n.toString(),10)].defaultValue&&(this.virtualInfiniteData[i[parseInt(n.toString(),10)].field]=i[parseInt(n.toString(),10)].defaultValue)},n.prototype.restoreInfiniteEdit=function(){var r=this.parent.getContent().firstElementChild,u=!this.parent.frozenRows||this.editRowIndex>=this.parent.frozenRows,n,i;this.isNormaledit&&this.parent.infiniteScrollSettings.enableCache&&u&&this.parent.editSettings.allowEditing&&!t.isNullOrUndefined(this.editRowIndex)&&(n=this.parent.getRowByIndex(this.editRowIndex),Object.keys(this.virtualInfiniteData).length&&n&&!this.parent.getContent().querySelector("."+ut)&&(i=n.getBoundingClientRect().top,i<r.offsetHeight&&i>this.parent.getRowHeight()&&(this.parent.isEdit=!1,this.parent.editModule.startEdit(n))))},n.prototype.restoreInfiniteAdd=function(){var n=this.parent.getContent().firstElementChild;this.parent.getCurrentViewRecords().length&&this.parent.getRowByIndex(0)&&this.isNormaledit&&this.parent.infiniteScrollSettings.enableCache&&this.isAdd&&!n.querySelector("."+ii)&&n.scrollTop<this.parent.getRowHeight()&&(this.parent.isEdit=!1,this.parent.addRecord())},n.prototype.appendInfiniteRows=function(n){var i=this.parent,r=this.parent.getContent().firstElementChild,t=this.parent.enableInfiniteScrolling&&"infiniteScroll"===n.args.requestType,u,f;(i.enableInfiniteScrolling&&(i.childGrid||i.detailTemplate)&&("add"===n.args.action&&"save"===n.args.requestType||"delete"===n.args.requestType)&&(r.scrollTop=0,i.pageSettings.currentPage=1),(this.parent.isAngular||this.parent.isReact||this.parent.isVue||this.parent.isVue3)&&t&&!n.args.isFrozen&&this.parent.infiniteScrollSettings.enableCache)&&(u=!(!this.parent.childGrid||!this.parent.element.querySelectorAll(".e-childgrid").length),f=this.parent.getDataRows(),this.parent.refreshReactTemplateTD(f,u));(!t||n.args.isFrozen)&&t||(t&&"up"===n.args.direction?n.tbody.insertBefore(n.frag,n.tbody.firstElementChild):n.tbody.appendChild(n.frag));this.parent.contentModule.getTable().appendChild(n.tbody);this.updateCurrentViewData();this.isInitialRender&&!n.args.isFrozen&&(this.isInitialRender=!1,this.parent.scrollModule.setHeight());n.args.isFrozen||(this.rowTop=this.rowTop?this.rowTop:this.parent.getRows()[0].getBoundingClientRect().top,t&&(this.parent.infiniteScrollSettings.enableCache&&this.isRemove&&(r.scrollTop=this.top),bo(this.parent)),this.restoreInfiniteAdd(),this.isScroll=!0);this.isInfiniteScroll=!1;this.infiniteDetailDestroy=!1},n.prototype.selectNewRow=function(){var e=this,n=this.parent,u=n.getRowByIndex(this.rowIndex),t=n.infiniteScrollSettings.enableCache,r;if(u&&this.keys.some(function(n){return n===e.pressedKey})){var f=n.getContent().firstElementChild,o=n.getRowHeight(),i=u.cells[this.cellIndex];(this.pressedKey===sv||this.pressedKey===hv||t&&(this.pressedKey===ho||this.pressedKey===hh))&&(t||this.pressedKey===ho||this.pressedKey===hh||(f.scrollTop=f.scrollTop+o),n.focusModule.isInfiniteScroll=!0,n.focusModule.onClick({target:i},!0),n.selectRow(this.rowIndex))}else this.lastFocusInfo&&(this.pressedKey===uit||this.pressedKey===rit)&&(r=t?0:this.lastFocusInfo.rowIdx,n.getRowByIndex(r)&&(i=n.getCellFromIndex(r,this.lastFocusInfo.cellIdx))&&(this.isFocusScroll=!0,t?i.focus({preventScroll:!0}):(n.focusModule.isInfiniteScroll=!0,n.focusModule.onClick({target:i},!0))));this.pressedKey=void 0},n.prototype.removeInfiniteCacheRows=function(n){var f=this.parent.enableInfiniteScrolling&&"infiniteScroll"===n.args.requestType,t,i,r,u;!n.args.isFrozen&&f&&this.parent.infiniteScrollSettings.enableCache&&this.isRemove&&(t=!(!this.parent.childGrid&&!this.parent.detailTemplate),i=t?this.getGridRows().filter(function(n){return n.classList.contains(y)}):[].slice.call(this.parent.getContentTable().getElementsByClassName(y)),"down"===n.args.direction&&(this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&(r=t?this.getGridRows().filter(function(n){return!n.classList.contains("e-detailrow")}):[].slice.call(this.parent.getContentTable().querySelectorAll("tr")),this.removeCaptionRows(r,n.args)),u=this.parent.element.querySelector("."+ii)?0:1,this.removeTopRows(i,this.parent.pageSettings.pageSize-u)),"up"===n.args.direction&&(this.parent.allowGrouping&&this.parent.groupSettings.columns.length?(r=t?this.getGridRows().filter(function(n){return!n.classList.contains("e-detailrow")}):[].slice.call(this.parent.getContentTable().querySelectorAll("tr")),this.removeCaptionRows(r,n.args)):this.removeBottomRows(i,i.length-1,n.args)),this.isScroll=!1,this.top=this.calculateScrollTop(n.args))},n.prototype.calculateScrollTop=function(n){var i=0,h=this.parent.getContent().firstElementChild,u,f,e,o;if("down"===n.direction){this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&!this.isInitialCollapse&&(i=this.captionRowHeight());u=[].slice.call(this.parent.getContent().firstElementChild.querySelectorAll("tr:not(.e-row)"));f=0;this.isInitialCollapse&&!t.isNullOrUndefined(u)&&(f=Math.round((u.length-1)/this.parent.groupSettings.columns.length));for(var c=f||this.parent.pageSettings.pageSize*(this.parent.infiniteScrollSettings.maxBlocks-1),s=0,r=0;s<h.clientHeight;)s=++r*this.parent.getRowHeight();i+=(c-(r-=1))*this.parent.getRowHeight()}if("up"===n.direction)if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&!this.isInitialCollapse)i=this.refreshInfiniteCacheRowVisibleLength(this.infiniteCache,this.parent.pageSettings.currentPage)*this.parent.getRowHeight();else if(this.isInitialCollapse){for(e=this.infiniteCache[this.parent.pageSettings.currentPage],o=0,r=0;r<e.length;r++)e[parseInt(r.toString(),10)].isCaptionRow&&o++;i+=Math.round(o/this.parent.groupSettings.columns.length)*this.parent.getRowHeight()}else i+=this.parent.pageSettings.pageSize*this.parent.getRowHeight()+oi();return i},n.prototype.captionRowHeight=function(){return[].slice.call(this.parent.getContent().querySelectorAll("tr:not(.e-row)")).length*this.parent.getRowHeight()},n.prototype.removeTopRows=function(n,i){for(var r=0;r<=i;r++)this.parent.frozenRows&&this.parent.pageSettings.currentPage===this.parent.infiniteScrollSettings.maxBlocks+1&&r>i-this.parent.frozenRows||t.remove(n[parseInt(r.toString(),10)])},n.prototype.removeBottomRows=function(n,i,r){var u=0,e=this.parent.pageSettings.pageSize,f;for(this.infiniteCache[r.prevPage].length<e&&(u=this.parent.pageSettings.pageSize-this.infiniteCache[r.prevPage].length),f=i;u<e;f--)u++,t.remove(n[parseInt(f.toString(),10)])},n.prototype.removeCaptionRows=function(n,i){var f=!(!this.parent.childGrid&&!this.parent.detailTemplate),u=f?this.getGridRows().filter(function(n){return n.classList.contains(y)}):[].slice.call(this.parent.getContent().getElementsByClassName(y));if("down"===i.direction)for(var s=tr(u[this.parent.pageSettings.pageSize-1])-1,e=0,r=0;e<s;r++)n[parseInt(r.toString(),10)].classList.contains(y)?e=tr(n[parseInt(r.toString(),10)]):t.remove(n[parseInt(r.toString(),10)]);if("up"===i.direction){var h=tr(u[u.length-1]),c=Math.ceil(h/this.parent.pageSettings.pageSize),o=0;for(r=this.parent.pageSettings.currentPage+1;r<c;r++)o+=f?this.infiniteCache[parseInt(r.toString(),10)].filter(function(n){return!n.isDetailRow}).length:this.infiniteCache[parseInt(r.toString(),10)].length;for(r=o;r<n.length;r++)t.remove(n[parseInt(r.toString(),10)])}},n.prototype.getGridRows=function(){return[].slice.call(this.parent.getContentTable().rows)},n.prototype.resetInfiniteBlocks=function(n,i){var u=this.parent.enableInfiniteScrolling&&"infiniteScroll"!==n.requestType,r;!this.initialRender&&!t.isNullOrUndefined(this.parent.infiniteScrollModule)&&u&&(this.actions.some(function(t){return t===n.requestType})||i||"save"===n.requestType&&(this.parent.sortSettings.columns.length||this.parent.filterSettings.columns.length||this.parent.groupSettings.columns.length||this.parent.searchSettings.key))&&(r=this.parent.getContent().firstElementChild,this.parent.notify(uh,{}),this.initialRender=!0,r.scrollTop=0,this.parent.pageSettings.currentPage=1,this.infiniteCache={},this.infiniteCurrentViewData={},this.resetContentModuleCache({}),this.isRemove=!1,this.top=0,this.isInitialCollapse=!1,this.parent.contentModule.isRemove=this.isRemove,this.parent.contentModule.isAddRows=this.isRemove,this.parent.contentModule.visibleRows=[],this.parent.contentModule.visibleFrozenRows=[])},n.prototype.setCache=function(n){if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache){var i=this.parent,r=(i.childGrid||i.detailTemplate)&&("add"===n.args.action&&"save"===n.args.requestType||"delete"===n.args.requestType),u="infiniteScroll"!==n.args.requestType&&("delete"===this.requestType||"add"===this.requestType),f=this.parent.pageSettings.currentPage;Object.keys(this.infiniteCache).length&&!u||(r&&(this.infiniteCache={}),this.setInitialCache(n.modelData,n.args,u));t.isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage])&&!r&&(this.infiniteCache[this.parent.pageSettings.currentPage]=n.modelData,this.resetContentModuleCache(this.infiniteCache));n.isInfiniteScroll&&!this.isRemove&&(this.isRemove=(f-1)%this.parent.infiniteScrollSettings.maxBlocks==0,this.parent.contentModule.isRemove=this.isRemove)}},n.prototype.setInitialCache=function(n,i,r,u){for(var o,s,f=r?t.isNullOrUndefined(this.firstBlock)?1:this.firstBlock:1,e=1;e<=this.parent.infiniteScrollSettings.initialBlocks;e++)o=(e-1)*this.parent.pageSettings.pageSize,s=e*this.parent.pageSettings.pageSize,this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&!u?this.setInitialGroupCache(n,f,o,s):u?this.infiniteCurrentViewData[parseInt(f.toString(),10)]=n.slice(o,s):(this.infiniteCache[parseInt(f.toString(),10)]=n.slice(o,s),this.resetContentModuleCache(this.infiniteCache)),f++},n.prototype.setInitialGroupCache=function(n,t,i,r){for(var f,e=[],o=0,u=1;u<=Object.keys(this.infiniteCache).length;u++)o+=this.infiniteCache[parseInt(u.toString(),10)].length;for(f=i,u=o;u<n.length&&f<r&&((n[parseInt(u.toString(),10)].index<r||n[parseInt(u.toString(),10)].isCaptionRow)&&(f=n[parseInt(u.toString(),10)].isCaptionRow?f:n[parseInt(u.toString(),10)].index,e.push(n[parseInt(u.toString(),10)])),!(n[parseInt(u.toString(),10)].index>=r||n[parseInt(u.toString(),10)].index===r-1));u++);this.infiniteCache[parseInt(t.toString(),10)]=e;this.resetContentModuleCache(this.infiniteCache)},n.prototype.resetContentModuleCache=function(n){this.parent.contentModule.infiniteCache=n},n.prototype.resetInfiniteCache=function(n){var u=Object.keys(this.infiniteCache).length,t,i,r;for(this.infiniteCache={},t=1;t<=u;t++)i=(t-1)*this.parent.pageSettings.pageSize,r=t*this.parent.pageSettings.pageSize,this.parent.allowGrouping&&this.parent.groupSettings.columns.length?this.setInitialGroupCache(n,t,i,r):(this.infiniteCache[parseInt(t.toString(),10)]=n.slice(i,r),this.resetContentModuleCache(this.infiniteCache))},n.prototype.destroy=function(){this.removeEventListener()},n}(),tlt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rd=function(n){function r(t,i){var r=n.call(this,t,i)||this;return r.childCount=0,r.scrollData=[],r.isFirstChildRow=!1,r.isScrollDown=!1,r.isScrollUp=!1,r.groupCache={},r.cacheRowsObj={},r.startIndexes={},r.captionCounts={},r.rowsByUid={},r.objIdxByUid={},r.initialGroupCaptions={},r.requestType=["paging","columnstate","reorder","cancel","save","beginEdit","add","delete","filterBeforeOpen","filterchoicerequest","infiniteScroll","virtualscroll","columnVisibilityUpdate"],r.scrollTopCache=void 0,r.refRowsObj={},r.cacheMode=!1,r.cacheBlockSize=5,r.ignoreAccent=!!r.parent.allowFiltering&&r.parent.filterSettings.ignoreAccent,r.allowCaseSensitive=!1,r.lazyLoadQuery=[],r.locator=i,r.groupGenerator=new ah(r.parent),r.summaryModelGen=new co(r.parent),r.captionModelGen=new lh(r.parent),r.rowRenderer=new ci(r.locator,null,r.parent),r.eventListener(),r}return tlt(r,n),r.prototype.eventListener=function(){this.parent.addEventListener(p,this.actionBegin.bind(this));this.parent.addEventListener(s,this.actionComplete.bind(this));this.parent.on(pt,this.setLazyLoadPageSize,this);this.parent.on(aw,this.setCache,this);this.parent.on(vw,this.scrollHandler,this);this.parent.on(br,this.setVisible,this);this.parent.on(aa,this.collapseShortcut,this)},r.prototype.captionExpand=function(n){var r=this,h=this.parent.pageSettings.currentPage,u=this.groupCache[parseInt(h.toString(),10)],c=n.getAttribute("data-uid"),t,o,e,l;this.refreshCaches();(!this.scrollTopCache||this.parent.scrollModule.content.scrollTop>this.scrollTopCache)&&!this.parent.enableVirtualization&&(this.scrollTopCache=this.parent.scrollModule.content.scrollTop);t=this.getRowObjectIndexByUid(c);o=!!u[t+1]&&u[parseInt(t.toString(),10)].indent<u[t+1].indent;this.parent.enableVirtualization&&(o=!!this.cacheRowsObj[""+c]);for(var s=u[parseInt(t.toString(),10)],i=ts(t,u),f=0;f<i.fields.length;f++)e=this.parent.getColumnByField(i.fields[parseInt(f.toString(),10)]),e.enableGroupByFormat&&(i.keys[parseInt(f.toString(),10)]=this.locator.getService("valueFormatter").fromView(i.keys[parseInt(f.toString(),10)],e.getParser(),"dateonly"===e.type?"date":e.type));l={captionRowElement:n,groupInfo:s,enableCaching:!0,cancel:!1};this.parent.trigger(hg,l,function(t){t.cancel||(t.keys=i.keys,t.fields=i.fields,t.rowIndex=n.rowIndex,t.makeRequest=!t.enableCaching||!o,!t.enableCaching&&o&&r.clearCache([c]),t.skip=0,t.take=r.pageSize,s.isExpand=!0,r.rowsByUid[parseInt(h.toString(),10)][s.uid]&&(r.rowsByUid[parseInt(h.toString(),10)][s.uid].isExpand=!0),r.captionRowExpand(t))})},r.prototype.captionCollapse=function(n){var i=this,e=this.groupCache[this.parent.pageSettings.currentPage],o=n.rowIndex,u=n.getAttribute("data-uid"),r,f;this.refreshCaches();r=this.getRowObjectIndexByUid(u);f={captionRowElement:n,groupInfo:e[parseInt(r.toString(),10)],cancel:!1};this.parent.trigger(cg,f,function(n){var f,e;if(!n.cancel){for(n.isExpand=!1,f=0;f<i.lazyLoadQuery.length;f++)e=i.lazyLoadQuery[parseInt(f.toString(),10)][0],n.groupInfo.data.key===e.value&&i.lazyLoadQuery.splice(f,1);i.removeRows(r,o,u);(i.parent.enableInfiniteScrolling||i.parent.enableVirtualization)&&(i.groupCache[i.parent.pageSettings.currentPage]=t.extend([],i.refRowsObj[i.parent.pageSettings.currentPage]),i.refreshRowObjects([],r))}})},r.prototype.setLazyLoadPageSize=function(){var n=this.parent.getContent().firstElementChild,t=Math.floor(n.offsetHeight/this.parent.getRowHeight())-1;this.pageSize=this.pageSize?this.pageSize:3*t;this.blockSize=Math.ceil(this.pageSize/2)},r.prototype.clearLazyGroupCache=function(){this.clearCache()},r.prototype.clearCache=function(n){var t,e,o,r,u,s,i,f,h,c;if(n=n||this.getInitialCaptionIndexes(),t=this.groupCache[this.parent.pageSettings.currentPage],n.length)for(e=0;e<n.length;e++)if(o=this.getRowObjectIndexByUid(n[parseInt(e.toString(),10)]),r=t[parseInt(o.toString(),10)],r){if(this.captionCounts[this.parent.pageSettings.currentPage][r.uid])for(u=o+1;u<t.length;u++){if(t[parseInt(u.toString(),10)].indent===r.indent||t[parseInt(u.toString(),10)].indent<r.indent){delete this.captionCounts[this.parent.pageSettings.currentPage][r.uid];break}t[parseInt(u.toString(),10)].isCaptionRow&&delete this.captionCounts[this.parent.pageSettings.currentPage][t[parseInt(u.toString(),10)].uid]}if(r.isExpand){if(s=this.parent.getRowElementByUID(r.uid),!s)return;this.parent.groupModule.expandCollapseRows(s.querySelector(".e-recordplusexpand"))}i=this.getNextChilds(o);i.length&&(f=[],i[i.length-1].isCaptionRow&&(f=this.getChildRowsByParentIndex(t.indexOf(i[i.length-1]),!1,!1,null,!0,!0)),h=t.indexOf(i[0]),c=f.length?t.indexOf(f[f.length-1]):t.indexOf(i[i.length-1]),t.splice(h,c-(h-1)),this.refreshCaches())}},r.prototype.refreshCaches=function(){var t=this.parent.pageSettings.currentPage,i=this.groupCache[parseInt(t.toString(),10)],n;for(this.parent.enableInfiniteScrolling?(this.rowsByUid[parseInt(t.toString(),10)]=[],this.objIdxByUid[parseInt(t.toString(),10)]=[]):(this.rowsByUid={},this.objIdxByUid={}),n=0;n<i.length;n++)this.maintainRows(i[parseInt(n.toString(),10)],n)},r.prototype.getInitialCaptionIndexes=function(){for(var t=this.parent.pageSettings.currentPage,i=[],n=0;n<this.initialGroupCaptions[parseInt(t.toString(),10)].length;n++)i.push(this.initialGroupCaptions[parseInt(t.toString(),10)][parseInt(n.toString(),10)].uid);return i},r.prototype.getRowObjectIndexByUid=function(n){return this.objIdxByUid[this.parent.pageSettings.currentPage][""+n]},r.prototype.collapseShortcut=function(n){var r,u,f,t;if(this.parent.groupSettings.columns.length&&n.target&&i(n.target,lt)&&"TR"===n.target.parentElement.tagName){if(!n.collapse&&i(n.target,y))return;r=n.target.parentElement.getAttribute("data-uid");n.collapse?(u=this.getRowByUid(r),(t=this.getRowByUid(u.parentUid)).isCaptionRow&&t.isExpand&&(f=this.getRowElementByUid(u.parentUid),this.parent.groupModule.expandCollapseRows(f.cells[u.indent-1]))):(t=this.getRowByUid(r)).isCaptionRow&&!t.isExpand&&(f=this.getRowElementByUid(r),this.parent.groupModule.expandCollapseRows(f.cells[t.indent]))}},r.prototype.getRowByUid=function(n){return this.rowsByUid[this.parent.pageSettings.currentPage][""+n]},r.prototype.actionBegin=function(n){var u,r,i,t,f,e;if(!n.cancel){if(this.requestType.some(function(t){return t===n.requestType})||(this.groupCache={},this.resetRowMaintenance(),this.parent.enableVirtualization&&(this.parent.contentModule.currentInfo={})),"reorder"===n.requestType&&this.parent.groupSettings.columns.length)for(u=Object.keys(this.groupCache),r=0;r<u.length;r++)for(i=this.groupCache[u[parseInt(r.toString(),10)]],t=0;t<i.length;t++)(i[parseInt(t.toString(),10)].isCaptionRow&&!this.captionModelGen.isEmpty()&&this.changeCaptionRow(i[parseInt(t.toString(),10)],null,u[parseInt(r.toString(),10)]),i[parseInt(t.toString(),10)].isDataRow)&&(f=n.fromIndex+i[parseInt(t.toString(),10)].indent,e=n.toIndex+i[parseInt(t.toString(),10)].indent,this.moveCells(i[parseInt(t.toString(),10)].cells,f,e));("delete"===n.requestType||"add"===n.action&&"save"===n.requestType)&&(this.groupCache={},this.resetRowMaintenance(),this.parent.enableVirtualization&&(this.parent.contentModule.currentInfo={}))}},r.prototype.actionComplete=function(n){n.cancel||"columnstate"===n.requestType||"beginEdit"===n.requestType||"delete"===n.requestType||"save"===n.requestType||"reorder"===n.requestType||"infiniteScroll"===n.requestType||this.scrollReset()},r.prototype.resetRowMaintenance=function(){this.startIndexes={};this.captionCounts={};this.rowsByUid={};this.objIdxByUid={};this.initialGroupCaptions={}},r.prototype.moveCells=function(n,t,i){if(t>=n.length)for(var r=t-n.length;1+r--;)n.push(void 0);n.splice(t,0,n.splice(i,1)[0])},r.prototype.removeRows=function(n,i,r){var l,e=this.parent.pageSettings.currentPage,f=this.groupCache[parseInt(e.toString(),10)],o=[].slice.call(this.parent.getContent().querySelectorAll("tr")),s=0,h,a,c,u;for(this.parent.aggregates.length&&(h=this.getAggregateByCaptionIndex(n),l=h.length?h[h.length-1].uid:void 0),c=f[parseInt(n.toString(),10)].indent,this.addClass(this.getNextChilds(parseInt(n.toString(),10))),f[parseInt(n.toString(),10)].isExpand=!1,this.rowsByUid[parseInt(e.toString(),10)][f[parseInt(n.toString(),10)].uid]&&(this.rowsByUid[parseInt(e.toString(),10)][f[parseInt(n.toString(),10)].uid].isExpand=!1),u=n+1;u<f.length;u++){if(f[parseInt(u.toString(),10)].indent===c||f[parseInt(u.toString(),10)].indent<c){a=f[parseInt(u.toString(),10)].uid;break}f[parseInt(u.toString(),10)].isCaptionRow&&f[parseInt(u.toString(),10)].isExpand&&this.addClass(this.getNextChilds(u))}for(u=i+1;u<o.length&&o[parseInt(u.toString(),10)].getAttribute("data-uid")!==a;u++){if(o[parseInt(u.toString(),10)].getAttribute("data-uid")===l){t.remove(o[parseInt(u.toString(),10)]);break}t.remove(o[parseInt(u.toString(),10)]);this.refRowsObj[parseInt(e.toString(),10)].splice(i+1,1);s+=1}this.parent.enableVirtualization&&(this.cacheRowsObj[""+r]=this.groupCache[parseInt(e.toString(),10)].slice(n+1,n+1+s),this.groupCache[parseInt(e.toString(),10)].splice(n+1,s),this.parent.notify(uv,{rows:[],uid:f[parseInt(n.toString(),10)].uid,count:s}),this.parent.contentModule.setVirtualHeight(),this.parent.islazyloadRequest=!1);this.parent.scrollModule.content.scrollTop>this.scrollTopCache&&!this.parent.enableVirtualization&&(this.parent.scrollModule.content.scrollTop=this.scrollTopCache);this.parent.getContentTable().scrollHeight<this.parent.getContent().clientHeight&&"auto"!==this.parent.height&&this.parent.scrollModule.setLastRowCell();this.parent.notify(gr,{rows:this.refRowsObj[parseInt(e.toString(),10)]})},r.prototype.addClass=function(n){var t=n[this.blockSize];t&&(t.lazyLoadCssClass="e-lazyload-middle-down")},r.prototype.getNextChilds=function(n,t){for(var u=this.groupCache[this.parent.pageSettings.currentPage],r=t||u,f=u[parseInt(n.toString(),10)].indent+1,e=[],i=t?0:n+1;i<r.length&&!(r[parseInt(i.toString(),10)].indent<f);i++)r[parseInt(i.toString(),10)].indent===f&&e.push(r[parseInt(i.toString(),10)]);return e},r.prototype.lazyLoadHandler=function(n){var i,s,c,l;this.setStartIndexes();var h=this.parent.getContent().querySelectorAll("tr")[n.index],o=h.getAttribute("data-uid"),r=this.getRowObjectIndexByUid(o),u=this.groupCache[this.parent.pageSettings.currentPage][parseInt(r.toString(),10)],t=n.isRowExist?n.isScroll?this.scrollData:this.parent.enableVirtualization?this.cacheRowsObj[""+o]:this.getChildRowsByParentIndex(r,!0,!0,null,!0):[];if(this.scrollData=[],!n.isRowExist)if(this.setRowIndexes(r,u),this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][parseInt(r.toString(),10)],n.count),-1!==Object.keys(n.data).indexOf("GroupGuid"))for(i=0;i<n.data.length;i++)s=this.groupGenerator.generateCaptionRow(n.data[parseInt(i.toString(),10)],n.level,u.parentGid,void 0,0,u.uid),t.push(s),this.parent.aggregates.length&&(t=t.concat(this.summaryModelGen.generateRows(n.data[parseInt(i.toString(),10)],{level:n.level+1,parentUid:s.uid})));else this.groupGenerator.index=this.getStartIndex(r,n.isScroll),t=this.groupGenerator.generateDataRows(n.data,n.level,u.parentGid,0,u.uid);var a=n.isScroll?this.rowIndex:n.index,f=this.getNextChilds(r,t),e=!!n.up||this.hasLastChildRow(n.isScroll,n.count,f.length);for(n.isRowExist||e||(f[this.blockSize].lazyLoadCssClass="e-lazyload-middle-down"),e||(f[f.length-1].lazyLoadCssClass="e-not-lazyload-end"),c=n.isScroll||n.isRowExist?[]:this.getAggregateByCaptionIndex(r),(n.up||(!n.isRowExist||this.parent.enableVirtualization&&n.isRowExist&&this.cacheRowsObj[""+o])&&this.refreshRowObjects(t,n.isScroll?this.rowObjectIndex:r),this.parent.enableVirtualization)&&(l=n.isScroll?this.groupCache[this.parent.pageSettings.currentPage][this.rowIndex].uid:u.uid,this.parent.notify(uv,{rows:t,uid:l}),this.parent.contentModule.setVirtualHeight(),this.parent.contentModule.isTop=!1),this.render(a,t,e,c),this.isFirstChildRow&&!n.up&&(this.parent.getContent().firstElementChild.scrollTop=t.length*this.parent.getRowHeight()),this.isFirstChildRow=!1,this.rowIndex=void 0,this.rowObjectIndex=void 0,this.childCount=0,i=0;i<t.length;i++)this.refRowsObj[this.parent.pageSettings.currentPage].splice(r+i+1,0,t[parseInt(i.toString(),10)]);e&&h.querySelector(".e-lastrowcell")&&this.parent.groupModule.lastCaptionRowBorder();this.parent.notify(gr,{rows:this.refRowsObj[this.parent.pageSettings.currentPage]});this.parent.enableVirtualMaskRow&&this.parent.removeMaskRow()},r.prototype.setRowIndexes=function(n,t){this.captionCounts[this.parent.pageSettings.currentPage]||(this.captionCounts[this.parent.pageSettings.currentPage]={});t.isCaptionRow&&(this.captionCounts[this.parent.pageSettings.currentPage][t.uid]=t.data.count)},r.prototype.getStartIndex=function(n,t){var u=this.parent.pageSettings.currentPage,i=this.groupCache[parseInt(u.toString(),10)],r;if(t)return i[this.rowObjectIndex].index+1;var f=0,e=0,o=this.getRowByUid(i[parseInt(n.toString(),10)].parentUid);if(o&&(e=this.prevCaptionCount(o)),i[parseInt(n.toString(),10)].indent>0)for(r=n-1;r>=0&&!(i[parseInt(r.toString(),10)].indent<i[parseInt(n.toString(),10)].indent);r--)i[parseInt(r.toString(),10)].isCaptionRow&&i[parseInt(r.toString(),10)].indent===i[parseInt(n.toString(),10)].indent&&(f+=i[parseInt(r.toString(),10)].data.count);return f+e+this.startIndexes[parseInt(u.toString(),10)][i[parseInt(n.toString(),10)].parentGid]},r.prototype.prevCaptionCount=function(n){for(var u,f=this.parent.pageSettings.currentPage,i=this.groupCache[parseInt(f.toString(),10)],r=0,t=i.indexOf(n)-1;t>=0&&0!==i[parseInt(t.toString(),10)].indent&&!(i[parseInt(t.toString(),10)].indent<n.indent);t--)i[parseInt(t.toString(),10)].isCaptionRow&&i[parseInt(t.toString(),10)].indent===n.indent&&(r+=this.captionCounts[parseInt(f.toString(),10)][i[parseInt(t.toString(),10)].uid]||i[parseInt(t.toString(),10)].data.count);return u=this.getRowByUid(n.parentUid),u&&(r+=this.prevCaptionCount(u)),r},r.prototype.setStartIndexes=function(){var i=this.groupCache[this.parent.pageSettings.currentPage];if(!this.startIndexes[this.parent.pageSettings.currentPage]){for(var n=[],r=void 0,t=0;t<i.length;t++)i[parseInt(t.toString(),10)].isCaptionRow&&(n.length?n.push(i[parseInt(r.toString(),10)].data.count+n[n.length-1]):n.push(0),r=t);this.startIndexes[this.parent.pageSettings.currentPage]=n}},r.prototype.hasLastChildRow=function(n,t,i){return n?t===this.childCount+i:t===i},r.prototype.refreshCaptionRowCount=function(n,t){n.data.count=t},r.prototype.render=function(n,t,i,r){var f=this.parent.getContent().querySelectorAll("tr")[parseInt(n.toString(),10)],e=this.parent.getContent().firstElementChild,o=this.parent.getRowHeight(),u;if(f&&r.length)for(u=r.length-1;u>=0;u--)f.insertAdjacentElement("afterend",this.rowRenderer.render(r[parseInt(u.toString(),10)],this.parent.getColumns()));if(f&&t.length)for(u=t.length-1;u>=0;u--)this.confirmRowRendering(t[parseInt(u.toString(),10)])&&(f.insertAdjacentElement("afterend",this.rowRenderer.render(t[parseInt(u.toString(),10)],this.parent.getColumns())),this.isScrollDown&&(e.scrollTop=e.scrollTop-o),this.isScrollUp&&(e.scrollTop=e.scrollTop+o));this.isScrollDown=!1;this.isScrollUp=!1},r.prototype.maintainRows=function(n,t){var i=this.parent.pageSettings.currentPage;this.rowsByUid[parseInt(i.toString(),10)]||(this.rowsByUid[parseInt(i.toString(),10)]={},this.objIdxByUid[parseInt(i.toString(),10)]={});n.uid&&(this.rowsByUid[parseInt(i.toString(),10)][n.uid]=n);this.objIdxByUid[parseInt(i.toString(),10)][n.uid]=t},r.prototype.confirmRowRendering=function(n){var r=!0,i;return!t.isNullOrUndefined(n.indent)||n.isDataRow||n.isCaptionRow||(i=this.getRowByUid(n.parentUid),i.isCaptionRow&&!i.isExpand&&(r=!1)),r},r.prototype.refreshRowObjects=function(n,i){var s=this.parent.pageSettings.currentPage,f=this.groupCache[parseInt(s.toString(),10)],e;this.rowsByUid[parseInt(s.toString(),10)]={};this.objIdxByUid[parseInt(s.toString(),10)]={};for(var o=[],u=0,r=0;r<f.length;r++)if(r===i)for(this.maintainRows(f[parseInt(r.toString(),10)],u),o.push(f[parseInt(r.toString(),10)]),u++,e=0;e<n.length;e++)this.maintainRows(n[parseInt(e.toString(),10)],u),o.push(n[parseInt(e.toString(),10)]),u++;else this.maintainRows(f[parseInt(r.toString(),10)],u),o.push(f[parseInt(r.toString(),10)]),u++;this.groupCache[this.parent.pageSettings.currentPage]=t.extend([],o);this.updateCurrentViewData()},r.prototype.getAggregateByCaptionIndex=function(n){for(var i=this.groupCache[this.parent.pageSettings.currentPage],u=i[parseInt(n.toString(),10)],e=u.indent,o=u.uid,f=[],r=n+1;r<i.length&&i[parseInt(r.toString(),10)].indent!==e;r++)t.isNullOrUndefined(i[parseInt(r.toString(),10)].indent)&&i[parseInt(r.toString(),10)].parentUid===o&&f.push(i[parseInt(r.toString(),10)]);return f},r.prototype.getChildRowsByParentIndex=function(n,i,r,u,f,e){var s=u||this.groupCache[this.parent.pageSettings.currentPage],h=s[parseInt(n.toString(),10)],l=[];if(!h.isCaptionRow||h.isCaptionRow&&!h.isExpand&&!e)return[];f&&this.parent.aggregates.length&&(l=this.getAggregateByCaptionIndex(n));for(var v=h.indent,y=h.uid,c=[],a=0,o=n+1;o<s.length;o++){if(s[parseInt(o.toString(),10)].parentUid===y){if(t.isNullOrUndefined(s[parseInt(o.toString(),10)].indent))continue;if(a++,c.push(s[parseInt(o.toString(),10)]),i&&s[parseInt(o.toString(),10)].isCaptionRow&&(c=c.concat(this.getChildRowsByParentIndex(o,i,r,u,f))),r&&a===this.pageSize)break}if(s[parseInt(o.toString(),10)].indent===v)break}return c.concat(l)},r.prototype.initialGroupRows=function(n){var i=[],r=this.groupCache[this.parent.pageSettings.currentPage],t;if(n)return this.getRenderedRowsObject();for(t=0;t<r.length;t++)0===r[parseInt(t.toString(),10)].indent&&(i.push(r[parseInt(t.toString(),10)]),i=i.concat(this.getChildRowsByParentIndex(t,!0,!0,r,!0)));return i},r.prototype.getRenderedRowsObject=function(){for(var t=[],i=[].slice.call(this.parent.getContent().querySelectorAll("tr")),n=0;n<i.length;n++)t.push(this.getRowByUid(i[parseInt(n.toString(),10)].getAttribute("data-uid")));return t},r.prototype.getCacheRowsOnDownScroll=function(n){for(var u=[],i=this.groupCache[this.parent.pageSettings.currentPage],r=n,f=0;f<this.pageSize&&i[parseInt(r.toString(),10)]&&!(i[parseInt(r.toString(),10)].indent<i[parseInt(n.toString(),10)].indent);f++)i[parseInt(r.toString(),10)].indent===i[parseInt(n.toString(),10)].indent&&(u.push(i[parseInt(r.toString(),10)]),i[parseInt(r.toString(),10)].isCaptionRow&&i[parseInt(r.toString(),10)].isExpand&&(u=u.concat(this.getChildRowsByParentIndex(r,!0,!0,null,!0)))),(i[parseInt(r.toString(),10)].indent>i[parseInt(n.toString(),10)].indent||t.isNullOrUndefined(i[parseInt(r.toString(),10)].indent))&&f--,r++;return u},r.prototype.getCacheRowsOnUpScroll=function(n,t,i){for(var f=[],r=this.groupCache[this.parent.pageSettings.currentPage],e=!1,u=0;u<r.length&&(!e||r[parseInt(u.toString(),10)]&&!(r[parseInt(u.toString(),10)].indent<r[parseInt(i.toString(),10)].indent)&&r[parseInt(u.toString(),10)].uid!==t);u++)e||r[parseInt(u.toString(),10)].uid!==n||(e=!0),e&&r[parseInt(u.toString(),10)].indent===r[parseInt(i.toString(),10)].indent&&(f.push(r[parseInt(u.toString(),10)]),r[parseInt(u.toString(),10)].isCaptionRow&&r[parseInt(u.toString(),10)].isExpand&&(f=f.concat(this.getChildRowsByParentIndex(u,!0,!0,null,!0))));return f},r.prototype.scrollHandler=function(n){var i,o,l;if(!this.parent.isDestroyed&&!this.childCount){var t,r,s=[].slice.call(this.parent.getContent().getElementsByClassName("e-lazyload-middle-down")),h=[].slice.call(this.parent.getContent().getElementsByClassName("e-lazyload-middle-up")),u=[].slice.call(this.parent.getContent().getElementsByClassName("e-not-lazyload-end")),e=!1,c=!1,f=!1;if(n.scrollDown&&s.length&&(t=(r=this.findRowElements(s)).tr,e=r.entered),!n.scrollDown&&u)for(i=0;i<u.length;i++)if(o=u[parseInt(i.toString(),10)].getBoundingClientRect().top,l=this.parent.getContent().scrollHeight,o>0&&o<l){t=u[parseInt(i.toString(),10)];f=!0;this.rowIndex=t.rowIndex;break}n.scrollDown||!h.length||f||(t=(r=this.findRowElements(h)).tr,c=r.entered);t&&!t.classList.contains("e-masked-row")&&(e&&n.scrollDown&&e&&t&&this.scrollDownHandler(t),!n.scrollDown&&f&&t&&this.scrollUpEndRowHandler(t),this.cacheMode&&!n.scrollDown&&!f&&c&&t&&this.scrollUpHandler(t))}},r.prototype.scrollUpEndRowHandler=function(n){var v=this.parent.pageSettings.currentPage,i=this.groupCache[parseInt(v.toString(),10)],l=n.getAttribute("data-uid"),t=this.rowObjectIndex=this.getRowObjectIndexByUid(l),y=t,r=i[parseInt(t.toString(),10)],u=this.getRowByUid(r.parentUid),e=this.getRowObjectIndexByUid(u.uid),p=this.parent.getContent().querySelector("tr[data-uid="+u.uid+"]").rowIndex,w=this.getChildRowsByParentIndex(e).indexOf(r),a=Math.ceil(w/this.pageSize),f,o,s,h,c;1!==a&&((this.childCount=a*this.pageSize,t=this.getCurrentBlockEndIndex(r,t),this.childCount<u.data.count)?(n.classList.remove("e-not-lazyload-end"),r.lazyLoadCssClass="",f=!!i[t+1]&&r.indent===i[t+1].indent,this.scrollData=f?this.getCacheRowsOnDownScroll(t+1):[],o=ts(e,i),s={rowIndex:p,makeRequest:!f,groupInfo:u,fields:o.fields,keys:o.keys,skip:this.childCount,take:this.pageSize,isScroll:!0},this.cacheMode&&this.childCount>=this.pageSize*this.cacheBlockSize&&(h=this.getChildRowsByParentIndex(e),c=Math.ceil(h.indexOf(i[parseInt(y.toString(),10)])/this.pageSize)-(this.cacheBlockSize-1),this.removeBlock(l,f,c,h),s.cachedRowIndex=c*this.pageSize),this.captionRowExpand(s)):this.childCount=0)},r.prototype.scrollDownHandler=function(n){var k=this.parent.pageSettings.currentPage,r=this.groupCache[parseInt(k.toString(),10)],w=n.getAttribute("data-uid"),i=this.getRowObjectIndexByUid(w),d=i,s=r[parseInt(i.toString(),10)],u=this.getRowByUid(s.parentUid),h=this.getRowObjectIndexByUid(u.uid),g=this.getRowElementByUid(u.uid).rowIndex,o=this.getChildRowsByParentIndex(h),b,c,f,l,e,a,v,y,p;if(0!==o.length&&(b=o.indexOf(s),c=Math.ceil(b/this.pageSize),this.childCount=c*this.pageSize,!t.isNullOrUndefined(o[this.childCount-1])))if(this.parent.enableVirtualization&&(this.parent.islazyloadRequest=!0),i=this.rowObjectIndex=this.getRowObjectIndexByUid(o[this.childCount-1].uid),f=r[parseInt(i.toString(),10)],l=this.getRowElementByUid(f.uid),this.rowIndex=l.rowIndex,i=this.getCurrentBlockEndIndex(f,i),this.childCount===u.data.count&&(this.parent.islazyloadRequest=!1),this.childCount<u.data.count){if(e=!!r[i+1]&&s.indent===r[i+1].indent,e&&!t.isNullOrUndefined(this.getRowElementByUid(r[i+1].uid)))return this.parent.islazyloadRequest=!1,void(this.childCount=0);(c>1||!this.cacheMode)&&(n.classList.remove("e-lazyload-middle-down"),l.classList.remove("e-not-lazyload-end"),f.lazyLoadCssClass="");this.scrollData=e?this.getCacheRowsOnDownScroll(this.rowObjectIndex+1):[];a=ts(h,r);v={rowIndex:g,makeRequest:!e,groupInfo:u,fields:a.fields,keys:a.keys,skip:this.childCount,take:this.pageSize,isScroll:!0};this.cacheMode&&this.childCount-this.pageSize>=this.pageSize*this.cacheBlockSize&&(this.isScrollDown=!0,y=this.getChildRowsByParentIndex(h),p=Math.ceil(y.indexOf(r[parseInt(d.toString(),10)])/this.pageSize)-1-(this.cacheBlockSize-1)+1,this.removeBlock(w,e,p,y,f),v.cachedRowIndex=p*this.pageSize);this.captionRowExpand(v)}else this.childCount=0,this.parent.islazyloadRequest=!1},r.prototype.getCurrentBlockEndIndex=function(n,t){var o=this.parent.pageSettings.currentPage,i=this.groupCache[parseInt(o.toString(),10)],f,e,u,r;if(n.isCaptionRow)for(n.isExpand&&(f=this.getChildRowsByParentIndex(t,!0).length,this.rowIndex=this.rowIndex+f),e=this.getAggregateByCaptionIndex(t),this.rowObjectIndex=this.rowObjectIndex+e.length,u=t,r=u+1;r<i.length;r++){if(i[parseInt(r.toString(),10)].indent===i[parseInt(t.toString(),10)].indent||i[parseInt(r.toString(),10)].indent<i[parseInt(t.toString(),10)].indent){t=u;break}u++}return t},r.prototype.removeBlock=function(n,t,i,r,u){var s=this.parent.pageSettings.currentPage,h=this.groupCache[parseInt(s.toString(),10)],o=r[(i+1)*this.pageSize-1-this.blockSize].uid,e=r[i*this.pageSize-this.pageSize].uid,f=r[i*this.pageSize].uid,c=this.getRowObjectIndexByUid(o);h[parseInt(c.toString(),10)].lazyLoadCssClass="e-lazyload-middle-up";this.getRowElementByUid(o).classList.add("e-lazyload-middle-up");u&&(this.getRowElementByUid(f).classList.add("e-not-lazyload-first"),this.getRowByUid(f).lazyLoadCssClass="e-not-lazyload-first",this.getRowByUid(e).lazyLoadCssClass="");t?this.removeTopRows(u?u.uid:n,e,f):(this.uid1=e,this.uid2=f,this.uid3=u?u.uid:n)},r.prototype.scrollUpHandler=function(n){var p=this.parent.pageSettings.currentPage,e=this.groupCache[parseInt(p.toString(),10)],w=n.getAttribute("data-uid"),rt=this.getRowByUid(w),b=this.rowObjectIndex=this.getRowObjectIndexByUid(w),i=this.getRowByUid(rt.parentUid),ut=this.rowIndex=this.getRowObjectIndexByUid(i.uid),ft=this.parent.getRowElementByUID(i.uid).rowIndex,r=this.getChildRowsByParentIndex(ut),h=r.indexOf(e[parseInt(b.toString(),10)]),k=Math.floor(h/this.pageSize),u=this.blockSize,c,o,f,v,y,it;if(2*this.blockSize>this.pageSize&&(u=2*this.blockSize-this.pageSize,u=this.blockSize-u),c=r[h-(u-1)-this.pageSize].uid,o=r[h-(u-1)].uid,this.scrollData=this.getCacheRowsOnUpScroll(c,o,b-(u-1)),this.isFirstChildRow=k>1,this.isFirstChildRow&&(this.scrollData[0].lazyLoadCssClass="e-not-lazyload-first"),this.getRowByUid(o).lazyLoadCssClass="",this.getRowElementByUid(o).classList.remove("e-not-lazyload-first"),f=k+this.cacheBlockSize,r.length!==i.data.count&&f*this.pageSize>r.length)return this.isFirstChildRow=!1,this.scrollData[0].lazyLoadCssClass="",void this.getRowElementByUid(o).classList.add("e-not-lazyload-first");var s=f*this.pageSize>i.data.count?i.data.count:f*this.pageSize,d=f*this.pageSize>i.data.count?this.pageSize-(this.pageSize*f-i.data.count):this.pageSize,l=this.getChildRowsByParentIndex(e.indexOf(r[s-1]),!0,!1,null,!0),g=l.length?l[l.length-1].uid:r[s-1].uid,nt=r[s-d].uid,a=r[s-d-1].uid,tt=this.objIdxByUid[parseInt(p.toString(),10)][""+nt]-u;if("e-lazyload-middle-down"===e[parseInt(tt.toString(),10)].lazyLoadCssClass&&(v=this.getRowElementByUid(e[parseInt(tt.toString(),10)].uid),v&&v.classList.add("e-lazyload-middle-down")),this.getRowByUid(g).lazyLoadCssClass="",this.getRowByUid(a).lazyLoadCssClass="e-not-lazyload-end",this.getRowElementByUid(a).classList.add("e-not-lazyload-end"),this.removeBottomRows(g,nt,a),this.rowIndex=n.rowIndex-u,n.classList.length>1?n.classList.remove("e-lazyload-middle-up"):n.removeAttribute("class"),!t.isNullOrUndefined(this.getRowElementByUid(c)))return this.childCount=0,void(this.scrollData=[]);y=ts(this.getRowObjectIndexByUid(i.uid),e);it={rowIndex:ft,makeRequest:!1,groupInfo:i,fields:y.fields,keys:y.keys,skip:this.childCount,take:this.pageSize,isScroll:!0,scrollUp:!0};this.isScrollUp=!0;this.captionRowExpand(it)},r.prototype.findRowElements=function(n){for(var f,r,i,u=!1,t=0;t<n.length;t++)if(r=n[parseInt(t.toString(),10)].rowIndex,this.parent.enableVirtualization&&(i=this.parent.contentModule.currentInfo,i&&i.blockIndexes&&i.blockIndexes[0]>1&&(r+=this.parent.contentModule.offsets[i.blockIndexes[0]-1]/this.parent.getRowHeight())),rut(r,this.parent)){u=!0;this.rowIndex=r;f=n[parseInt(t.toString(),10)];break}return{entered:u,tr:f}},r.prototype.getRowElementByUid=function(n){return this.parent.getContent().querySelector("tr[data-uid="+n+"]")},r.prototype.removeTopRows=function(n,i,r){for(var e,f=[].slice.call(this.parent.getContent().querySelectorAll("tr")),o=!1,u=0;u<f.length;u++){if(f[parseInt(u.toString(),10)].getAttribute("data-uid")===r){e=this.parent.getContent().querySelector("tr[data-uid="+n+"]");e&&(this.rowIndex=e.rowIndex);break}f[parseInt(u.toString(),10)].getAttribute("data-uid")===i&&(o=!0);o&&t.remove(f[parseInt(u.toString(),10)])}},r.prototype.removeBottomRows=function(n,i){for(var u=[].slice.call(this.parent.getContent().querySelectorAll("tr")),f=!1,r=0;r<u.length&&(u[parseInt(r.toString(),10)].getAttribute("data-uid")===i&&(f=!0),!f||(t.remove(u[parseInt(r.toString(),10)]),u[parseInt(r.toString(),10)].getAttribute("data-uid")!==n));r++);},r.prototype.setCache=function(n){var u=this.parent.pageSettings.currentPage,r,i;if(this.parent.enableVirtualization&&(this.parent.lazyLoadRender=this),this.parent.enableInfiniteScrolling&&"infiniteScroll"===n.args.requestType&&n.args.prevPage!==n.args.currentPage)for(this.groupCache[parseInt(u.toString(),10)]=this.initialGroupCaptions[parseInt(u.toString(),10)]=this.groupCache[n.args.prevPage].concat(t.extend([],n.data)),r=Object.keys(this.groupCache),i=0;i<r.length;i++)n.args.currentPage!==parseInt(r[parseInt(i.toString(),10)],10)&&(delete this.groupCache[""+r[parseInt(i.toString(),10)]],delete this.initialGroupCaptions[""+r[parseInt(i.toString(),10)]]);else this.groupCache[parseInt(u.toString(),10)]=this.initialGroupCaptions[parseInt(u.toString(),10)]=t.extend([],n.data)},r.prototype.captionRowExpand=function(n){var t=this,f=n.groupInfo,r=this.parent.groupSettings.columns.indexOf(f.data.field)+1,e=vy(ay(n.fields,n.keys,this)),u={level:r,skip:n.skip,take:n.take,where:e},i;(n.lazyLoadQuery=u,n.requestType="onDemandGroupInfo",n.makeRequest)?(i=this.parent.renderModule.data.generateQuery(!0),i.isCountRequired||(i.isCountRequired=!0),i.lazyLoad.push({key:"onDemandGroupInfo",value:u}),this.lazyLoadQuery.push(u.where),n.isScroll&&this.parent.enableVirtualMaskRow?this.parent.showMaskRow():this.parent.showSpinner(),this.parent.renderModule.data.getData(n,i).then(function(i){t.parent.enableVirtualization&&(t.parent.islazyloadRequest=!0);t.parent.hideSpinner();t.parent.removeMaskRow();0!==i.result.length&&(t.cacheMode&&t.uid1&&t.uid2&&(t.removeTopRows(t.uid3,t.uid1,t.uid2),t.uid1=t.uid2=t.uid3=void 0),t.lazyLoadHandler({data:i.result,count:i.count,level:r,index:n.rowIndex,isRowExist:!1,isScroll:n.isScroll,up:!1,rowIndex:n.cachedRowIndex}))}).catch(function(n){return t.parent.renderModule.dataManagerFailure(n,{requestType:"grouping"})})):this.lazyLoadHandler({data:null,count:n.groupInfo.data.count,level:r,index:n.rowIndex,isRowExist:!0,isScroll:n.isScroll,up:n.scrollUp,rowIndex:n.cachedRowIndex})},r.prototype.scrollReset=function(n){this.parent.getContent().firstElementChild.scrollTop=n?this.parent.getContent().firstElementChild.scrollTop+n:0},r.prototype.updateCurrentViewData=function(){var n=[];this.getRows().filter(function(t){t.isDataRow&&(n[t.index]=t.data)});this.parent.currentViewData=n.length?n:this.parent.currentViewData},r.prototype.getGroupCache=function(){return this.groupCache},r.prototype.getRows=function(){return this.groupCache[this.parent.pageSettings.currentPage]||[]},r.prototype.getRowElements=function(){return[].slice.call(this.parent.getContent().getElementsByClassName(y))},r.prototype.getRowByIndex=function(n){for(var f,u,r=[].slice.call(this.parent.getContent().getElementsByClassName(y)),i=0;!t.isNullOrUndefined(n)&&i<r.length;i++)if(u=parseInt(r[parseInt(i.toString(),10)].getAttribute(c),10),u&&u-1===n){f=r[parseInt(i.toString(),10)];break}return f},r.prototype.setVisible=function(n){var f,h=this.parent,e,r;for(this.getRows().some(function(n){return n.isDataRow&&(f=n),n.isDataRow}),e=this.getRows().filter(function(n){return!n.isDetailRow}),r=0;r<n.length;r++){var i=n[parseInt(r.toString(),10)],u=this.parent.getNormalizedColumnIndex(i.uid),c=this.parent.getColumnIndexByUid(i.uid),o=!0===i.visible?"":"none",s=this.getColGroup();-1!==u&&f&&u<f.cells.length&&!t.isNullOrUndefined(s)&&t.setStyleAttribute(s.childNodes[parseInt(u.toString(),10)],{display:o});this.setDisplayNone(h.getDataRows(),c,o,e,u);!this.parent.invokedFromMedia&&i.hideAtMedia&&this.parent.updateMediaColumns(i);this.parent.invokedFromMedia=!1}},r.prototype.setDisplayNone=function(n,i,r,u,f){var p,w,l,s,a,c,v,y,h,e;if(this.parent.groupSettings.columns.length){if(p=!1,this.parent.enableVirtualization&&this.parent.groupSettings.enableLazyLoading&&this.parent.contentModule.vgenerator){for(var b=this.parent.contentModule.vgenerator.cache,k=Object.keys(b),d=this.parent.getVisibleColumns().length,o=0;o<k.length;o++)for(w=b[k[parseInt(o.toString(),10)]],l=0;l<w.length;l++)s=w[parseInt(l.toString(),10)],s.isCaptionRow&&(s.cells[s.indent+1].colSpan=this.parent.enableColumnVirtualization?1:d+this.parent.groupSettings.columns.length+(this.parent.detailTemplate||this.parent.childGrid?1:0)-s.indent+(d?-1:0)),s.isDataRow&&(s.cells[parseInt(f.toString(),10)].visible=""===r);p=!0}for(a=Object.keys(this.groupCache),c=0;c<a.length;c++)if(v=this.rowsByUid[a[parseInt(c.toString(),10)]],!t.isNullOrUndefined(v))for(y=Object.keys(v),o=0;o<y.length;o++)h=this.parent.getContent().querySelector("tr[data-uid="+y[parseInt(o.toString(),10)]+"]"),e=v[y[parseInt(o.toString(),10)]],e.isCaptionRow&&(this.captionModelGen.isEmpty()?(p||(e.cells[e.indent+1].colSpan=""===r?e.cells[e.indent+1].colSpan+1:e.cells[e.indent+1].colSpan-1),h&&(h.cells[e.indent+1].colSpan=e.cells[e.indent+1].colSpan)):this.changeCaptionRow(e,h,a[parseInt(c.toString(),10)])),e.isDataRow&&(this.showAndHideCells(h,i,r,!1),e.cells[parseInt(f.toString(),10)].visible=""===r),e.isCaptionRow||e.isDataRow||!t.isNullOrUndefined(e.indent)||(e.cells[parseInt(f.toString(),10)].visible=""===r,e.visible=e.cells.some(function(n){return n.isDataCell&&n.visible}),this.showAndHideCells(h,i,r,!0,e))}else ek(n,i,r,u)},r.prototype.changeCaptionRow=function(n,t,i){var u=n,f=n.data,r=this.groupGenerator.generateCaptionRow(f,u.indent,u.parentGid,void 0,u.tIndex,u.parentUid);r.uid=n.uid;r.isExpand=n.isExpand;r.lazyLoadCssClass=n.lazyLoadCssClass;this.rowsByUid[parseInt(i.toString(),10)][n.uid]=r;this.groupCache[parseInt(i.toString(),10)][this.objIdxByUid[parseInt(i.toString(),10)][n.uid]]=r;t&&this.parent.getContentTable().querySelector(h).replaceChild(this.rowRenderer.render(r,this.parent.getColumns()),t)},r.prototype.showAndHideCells=function(n,i,r,u,f){if(n){var e=u?"td.e-summarycell":"td.e-rowcell";t.setStyleAttribute(n.querySelectorAll(e)[parseInt(i.toString(),10)],{display:r});n.querySelectorAll(e)[parseInt(i.toString(),10)].classList.contains("e-hide")&&t.removeClass([n.querySelectorAll(e)[parseInt(i.toString(),10)]],["e-hide"]);u&&(f.visible&&n.classList.contains("e-hide")?t.removeClass([n],["e-hide"]):f.visible||t.addClass([n],["e-hide"]))}},r}(vh),ilt=function(){function n(n,t){this.parent=n;this.serviceLocator=t;this.addEventListener()}return n.prototype.getModuleName=function(){return"lazyLoadGroup"},n.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(or,this.instantiateRenderer,this),this.parent.on(l,this.destroy,this))},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(or,this.instantiateRenderer),this.parent.off(l,this.destroy))},n.prototype.instantiateRenderer=function(){"auto"===this.parent.height&&(this.parent.height=this.parent.pageSettings.pageSize*this.parent.getRowHeight());var n=this.serviceLocator.getService("rendererFactory");this.parent.groupSettings.enableLazyLoading&&n.addRenderer(ni.Content,new rd(this.parent,this.serviceLocator));this.parent.enableVirtualization&&(this.parent.lazyLoadRender=new rd(this.parent,this.serviceLocator))},n.prototype.destroy=function(){this.removeEventListener()},n}(),rlt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ult=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return rlt(i,n),i.prototype.write=function(n){this.column=n.column;var i="Dialog"!==this.parent.editSettings.mode;this.object=new gt.AutoComplete(t.extend({dataSource:this.parent.dataSource instanceof u.DataManager?this.parent.dataSource:new u.DataManager(this.parent.dataSource),query:(new u.Query).select(n.column.field),enabled:yr(n.column,n.requestType,n.element),fields:{value:n.column.field},value:d(n.column.field,n.rowData),actionComplete:this.selectedValues.bind(this),placeholder:i?"":n.column.headerText,floatLabelType:i?"Never":"Always"},n.column.edit.params));this.object.appendTo(n.element);n.element.setAttribute("name",vt(n.column.field))},i.prototype.selectedValues=function(n){n.result=u.DataUtil.distinct(n.result,this.object.fields.value,!0);this.column.dataSource&&(this.column.dataSource.dataSource.json=n.result)},i}(wr),flt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),elt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return flt(i,n),i.prototype.write=function(n){this.column=n.column;var i="Dialog"!==this.parent.editSettings.mode;this.obj=new gt.ComboBox(t.extend({dataSource:this.parent.dataSource instanceof u.DataManager?this.parent.dataSource:new u.DataManager(this.parent.dataSource),query:(new u.Query).select(n.column.field),fields:{value:n.column.field},value:d(n.column.field,n.rowData),enableRtl:this.parent.enableRtl,actionComplete:this.finalValue.bind(this),placeholder:i?"":n.column.headerText,floatLabelType:i?"Never":"Always",enabled:yr(n.column,n.requestType,n.element),cssClass:this.parent.cssClass?this.parent.cssClass:null},n.column.edit.params));this.obj.appendTo(n.element)},i.prototype.finalValue=function(n){n.result=u.DataUtil.distinct(n.result,this.obj.fields.value,!0);this.column.dataSource&&(this.column.dataSource.dataSource.json=n.result)},i}(wr),olt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),slt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return olt(i,n),i.prototype.write=function(n){this.column=n.column;var i="Dialog"!==this.parent.editSettings.mode;this.obj=new gt.MultiSelect(t.extend({fields:{text:n.column.field,value:n.column.field},value:t.getValue(n.column.field,n.rowData),enableRtl:this.parent.enableRtl,placeholder:i?"":n.column.headerText,popupHeight:"200px",floatLabelType:i?"Never":"Always",cssClass:this.parent.cssClass?this.parent.cssClass:null},n.column.edit.params));this.obj.appendTo(n.element);n.element.setAttribute("name",vt(n.column.field))},i}(wr),hlt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),clt=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return hlt(r,n),r.prototype.write=function(n){var u="Dialog"!==this.parent.editSettings.mode,r=d(n.column.field,n.rowData);r=r?new Date(r):null;this.obj=new pu.TimePicker(t.extend({floatLabelType:u?"Never":"Always",value:r,placeholder:u?"":n.column.headerText,enableRtl:this.parent.enableRtl,enabled:yr(n.column,n.requestType,n.element)&&he(i(n.element,"e-rowcell"),this.parent),cssClass:this.parent.cssClass?this.parent.cssClass:null},n.column.edit.params));this.obj.appendTo(n.element)},r}(wr),llt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),alt=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.activeClasses=["e-selectionbackground","e-active"],t}return llt(i,n),i.prototype.create=function(n){var t="e-field e-boolcell";return"checkbox"===n.column.type&&(t="e-field e-boolcell e-edit-checkselect"),go(this.parent,n.column,t,{type:"checkbox",value:n.value})},i.prototype.read=function(n){return n.checked},i.prototype.write=function(n){var f=!t.isNullOrUndefined(n.row)&&n.row.querySelector(".e-edit-checkselect"),u=d(n.column.field,n.rowData),i=u&&JSON.parse(u.toString().toLowerCase()),r;t.isNullOrUndefined(f)||((this.editType=this.parent.editSettings.mode,this.editRow=n.row,"add"!==n.requestType)&&(r=this.parent.getRowObjectFromUID(n.row.getAttribute("data-uid")),i=!!r&&r.isSelected),ui.apply(void 0,[[].slice.call(n.row.getElementsByClassName(v)),i].concat(this.activeClasses)));this.obj=new ri.Switch(t.extend({label:"Dialog"!==this.parent.editSettings.mode?" ":n.column.headerText,checked:i,disabled:!yr(n.column,n.requestType,n.element),enableRtl:this.parent.enableRtl,change:this.switchModeChange.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""},n.column.edit.params));this.obj.appendTo(n.element)},i.prototype.switchModeChange=function(n){if(this.editRow&&"Dialog"!==this.editType){var t=!1;n.checked?(t=!0,this.editRow.setAttribute("aria-selected",t.toString())):this.editRow.removeAttribute("aria-selected");ui.apply(void 0,[[].slice.call(this.editRow.getElementsByClassName(v)),t].concat(this.activeClasses))}},i}(wr),vlt=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ylt=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return vlt(r,n),r.prototype.write=function(n){this.column=n.column;var r="Dialog"!==this.parent.editSettings.mode;this.obj=new pr.MaskedTextBox(t.extend({fields:{value:n.column.field},value:d(n.column.field,n.rowData),floatLabelType:r?"Never":"Always",mask:"000-000-0000",enabled:yr(n.column,n.requestType,n.element)&&he(i(n.element,"e-rowcell"),this.parent),cssClass:this.parent.cssClass?this.parent.cssClass:null},n.column.edit.params));this.obj.appendTo(n.element)},r}(wr),ud={};lc.C(ud,cc);wft={grids:ud=lc.C(window.ejdashboard?window.ejdashboard.grids:{},ud)};window.ejdashboard=lc.C(window.ejdashboard||{},wft)})()})();(()=>{function t(r){var f=n[r],u;return void 0!==f?f.exports:(u=n[r]={exports:{}},i[r](u,u.exports,t),u.exports)}var i={864:(n,t)=>{t.C=function(n,t,i,r){var u=n||{},e=arguments.length;r&&(e-=1);for(var s=function(n){if(!o[n])return"continue";var t=o[n];Object.keys(t).forEach(function(n){var f,e=u[n],i=t[n];r&&(isObject(i)||Array.isArray(i))?isObject(i)?(f=e||{},u[n]=i({},f,i,r)):(f=e||[],u[n]=i([],f,i,r)):u[n]=i})},o=arguments,f=1;f<e;f++)s(f);return u}}},n={};(()=>{var ho,ba,ka,so,ov;ho=t(864);const n=ejdashboard.base,nt=ejdashboard.data,e=ejdashboard.pdfexport;var co="e-pivotfieldlist",fi="e-rtl",ar="e-device",s="e-icons",h="e-disable",gr="e-hide",nu="e-dropdown-icon",lo="e-pivotfieldlist-container",st="e-toggle-field-list",ao="e-static",lh="e-draggable",ht="e-field-list",ah="e-field-list-tree-outer-div",vh="e-field-list-tree-outer-div-searchMode",yh="e-search-mode",ph="e-pivot-parent",wh="e-pivot-child",vo="e-field-list-footer",ou="e-left-axis-fields",yo="e-right-axis-fields",tu="e-all-fields-axis",ei="e-axis-content",te="e-draggable-prompt",rr="e-pvt-btn-div",w="e-pivot-button",ct="e-content",ie="e-pvt-btn-content",rf="e-sort",re="e-member-sort",su="e-descend",ii="e-btn-filter",ue="e-pv-filter",uf="e-pv-filtered",ur="e-remove",ff="e-drag",fe="e-disable-drag",vt="e-drop-indicator",kt="e-drop-hover",ee="e-member-editor-outer-container",hu="e-member-editor-container",po="e-drillthrough-body-header",wo="e-drillthrough-body-header-common",bo="e-drillthrough-body-header-value",bh="e-frame",ef="e-check",ko="e-stop",wt="e-ok-btn",cu="e-cancel-btn",kh="e-pivot-error-dialog",oi="e-droppable",lu="e-rows",vr="e-columns",si="e-values",yr="e-filters",hi="e-grouping-bar",go="e-group-all-fields",ki="e-group-rows",pr="e-group-columns",di="e-group-values",iu="e-group-filters",au="e-drag-restrict",vu="e-list-selected",dh="e-title-header",ru="e-text-content",yu="e-field-list-btn",of="e-calculated-field-btn",oe="e-small",se="e-round",sf="e-add-icon",gh="e-flat",ri="e-list-text",uu="e-selected-node",nc="e-selected-option-icon",tc="e-selected-level-icon",ic="e-between-text-div",rc="e-filter-input-div-2",ns="e-value-options",uc="e-filter-operator",fc="e-filter-sort",ec="e-sort-ascend-icon",oc="e-sort-descend-icon",fr="e-active",er="e-collapse",wr="e-expand",b="e-table",pu="e-columnsheader",gi="e-rowsheader",ci="e-headercell",wu="e-cellvalue",ts="e-tooltipheader",is="e-tooltipcontent",hf="e-nextspan",rs="e-lastspan",sc="e-editor-search-container",hc="e-editor-search",us="e-select-all",fs="e-pivot-calc-check",he="e-pivot-calc-input",es="e-custom-format-input",os="e-olap-calc-hierarchy-list-div",ss="e-pivot-calc-format-type-div",hs="e-olap-calc-member-type-div",cs="e-member-options",or="e-format",bu="e-pivot-formula",cc="e-pivot-treeview",lc="e-pivot-treeview-outer",ac="e-treeContainer",vc="e-pivot-ok-button",yc="e-pivot-button-div",fu="e-axis",ls="e-axis-filter",yt="e-grid",ku="e-pivotview",pc="e-pivot-all-field-title",p="e-disabled",ui="e-menu-hide",cf="e-member-prompt",g="e-edit",ft="e-edited",wc="e-info",as="e-empty-field",bc="e-format-condition-button",vs="e-format-table",du="e-visible-hide",kc="e-format-color-picker",li="e-virtualtrack",dt="e-movablescrolldiv",nr="e-content-virtualtable",ys="e-movablescroll",ai="e-headercontent",ot="e-cellselectionbackground",tt="e-selectionbackground",sr="e-checkbox-wrapper",rt="e-headercontent",dc="e-field-list-back-icon",ce="e-rowcell",it="e-active",ps="e-spanclicked",ws="e-rowselect",lf="e-gridheader",at="e-gridcontent",bt="e-remove-report",gu="e-pivot-toolbar",bs="e-toolbar-grid",ks="e-toolbar-chart",lt="e-pivotchart",le="e-group-chart-rows",af="e-group-chart-columns",vf="e-group-chart-values",yf="e-group-chart-values-drodown-div",pf="e-group-chart-columns-dropdown-div",wf="e-chart-grouping-bar",br="e-pivot-grouping-bar",bf="e-pivotchart-inner",tr="e-group-pivot-rows",gc="e-pivot-pager",nl="e-node-limit",vi="e-leftfreeze",gt="e-pivot-content-loader",hr="e-hide-loader",tl="e-icon-collapsible",il="e-icon-expandable",ae="e-pivotview-autofit",rl="e-group-row",r=function(){function t(){}return t.getType=function(n){var t=new Date(n);return"boolean"==typeof n?"boolean":isNaN(Number(n))?t instanceof Date&&!isNaN(t.valueOf())?t&&t.getDay()&&(t.getHours()>0||t.getMinutes()>0||t.getSeconds()>0||t.getMilliseconds()>0)?"datetime":"date":typeof n:"number"},t.resetTime=function(n){return n.setHours(0,0,0,0),n},t.getClonedData=function(n){var f=[],t,r;if(n)for(t=0,r=n;t<r.length;t++){for(var e=r[t],u=Object.keys(e),i=0,o={};i<u.length;)o[u[i]]=e[u[i]],i++;f.push(o)}return f},t.getClonedCSVData=function(n){return n.map(function(n){return n.slice()})},t.getDefinedObj=function(n){var t=0,r={},i;if(null!=n)for(i=Object.keys(n);t<i.length;)null!==n[i[t]]&&void 0!==n[i[t]]&&(r[i[t]]=n[i[t]]),t++;else r=n;return r},t.inArray=function(n,t){if(t)for(var i=0,r=t.length;i<r;i++)if(t[i]===n)return i;return-1},t.setPivotProperties=function(n,t){n.allowServerDataBinding=!1;n.pivotGridModule&&(n.pivotGridModule.allowServerDataBinding=!1);n.setProperties(t,!0);n.allowServerDataBinding=!0;n.pivotGridModule&&(n.pivotGridModule.allowServerDataBinding=!0)},t.getClonedDataSourceSettings=function(t){return this.getDefinedObj({type:t.type,catalog:t.catalog,cube:t.cube,providerType:t.providerType,url:t.url,localeIdentifier:t.localeIdentifier,excludeFields:n.isNullOrUndefined(t.excludeFields)?[]:t.excludeFields.slice(),expandAll:t.expandAll,allowLabelFilter:t.allowLabelFilter,allowValueFilter:t.allowValueFilter,allowMemberFilter:t.allowMemberFilter,enableSorting:!!t.enableSorting,rows:this.cloneFieldSettings(t.rows),columns:this.cloneFieldSettings(t.columns),filters:this.cloneFieldSettings(t.filters),values:this.cloneFieldSettings(t.values),filterSettings:this.cloneFilterSettings(t.filterSettings),sortSettings:this.cloneSortSettings(t.sortSettings),drilledMembers:this.cloneDrillMemberSettings(t.drilledMembers),valueSortSettings:this.CloneValueSortObject(t.valueSortSettings),valueAxis:t.valueAxis,valueIndex:t.valueIndex,grandTotalsPosition:t.grandTotalsPosition,formatSettings:this.cloneFormatSettings(t.formatSettings),calculatedFieldSettings:this.cloneCalculatedFieldSettings(t.calculatedFieldSettings),fieldMapping:this.cloneFieldSettings(t.fieldMapping),showSubTotals:t.showSubTotals,showRowSubTotals:t.showRowSubTotals,showColumnSubTotals:t.showColumnSubTotals,subTotalsPosition:t.subTotalsPosition,showGrandTotals:t.showGrandTotals,showRowGrandTotals:t.showRowGrandTotals,showColumnGrandTotals:t.showColumnGrandTotals,showHeaderWhenEmpty:t.showHeaderWhenEmpty,alwaysShowValueHeader:t.alwaysShowValueHeader,conditionalFormatSettings:this.cloneConditionalFormattingSettings(t.conditionalFormatSettings),emptyCellsTextContent:t.emptyCellsTextContent,groupSettings:this.cloneGroupSettings(t.groupSettings),showAggregationOnValueField:t.showAggregationOnValueField,authentication:this.CloneAuthenticationObject(t.authentication)})},t.getClonedFieldList=function(n,t){for(var i,u=Object.keys(n),f={},r=0,e=u.length;r<e;r++)i=n[u[r]],n[u[r]]&&(f[u[r]]={type:i.type,caption:i.caption,id:i.id,isSelected:i.isSelected,sort:i.sort,filterType:i.filterType,index:i.index,filter:t?[]:i.filter,isCustomField:i.isCustomField,showRemoveIcon:i.showRemoveIcon,showFilterIcon:i.showFilterIcon,showSortIcon:i.showSortIcon,showNoDataItems:i.showNoDataItems,isCalculatedField:i.isCalculatedField,showEditIcon:i.showEditIcon,showValueTypeIcon:i.showValueTypeIcon,allowDragAndDrop:i.allowDragAndDrop,showSubTotals:i.showSubTotals,expandAll:i.expandAll,pid:i.pid,aggregateType:i.aggregateType,baseField:i.baseField,baseItem:i.baseItem,dateMember:t?[]:this.cloneDateMembers(i.dateMember),members:t?{}:this.cloneFormatMembers(i.members),formatString:i.formatString,format:i.format,formula:i.formula,isExcelFilter:i.isExcelFilter,membersOrder:i.membersOrder?i.membersOrder.slice():i.membersOrder,isAlphanumeric:i.isAlphanumeric,tag:i.tag,expanded:i.expanded,spriteCssClass:i.spriteCssClass,name:i.name,defaultHierarchy:i.defaultHierarchy,hasAllMember:i.hasAllMember,allMember:i.allMember,isChecked:i.isChecked,filterMembers:this.cloneFieldMembers(i.filterMembers),childMembers:t?[]:this.cloneFieldMembers(i.childMembers),searchMembers:t?[]:this.cloneFieldMembers(i.searchMembers),htmlAttributes:this.getDefinedObj(i.htmlAttributes),currrentMembers:t?{}:this.cloneFormatMembers(i.currrentMembers),isHierarchy:i.isHierarchy,isNamedSets:i.isNamedSets,actualFilter:i.actualFilter?i.actualFilter.slice():i.actualFilter,levels:t?[]:this.cloneFieldMembers(i.levels),levelCount:i.levelCount,fieldType:i.fieldType,memberType:i.memberType,parentHierarchy:i.parentHierarchy});return f},t.cloneDateMembers=function(n){var i;if(n){for(var r=[],t=0,u=n;t<u.length;t++)i=u[t],r.push({formattedText:i.formattedText,actualText:i.actualText});return r}return n},t.cloneFormatMembers=function(n){var t;if(n){for(var r=Object.keys(n),u={},i=0,f=r.length;i<f;i++)t=n[r[i]],u[r[i]]={index:t.index?t.index.slice():t.index,isDrilled:t.isDrilled,ordinal:t.ordinal};return u}return n},t.cloneFieldMembers=function(n){var t;if(n){for(var r=[],i=0,u=n;i<u.length;i++)t=u[i],r.push({caption:t.caption,hasChildren:t.hasChildren,id:t.id,isSelected:t.isSelected,name:t.name,tag:t.tag,htmlAttributes:this.getDefinedObj(t.htmlAttributes),type:t.type,spriteCssClass:t.spriteCssClass,pid:t.pid,isChecked:t.isChecked});return r}return n},t.updateDataSourceSettings=function(t,i){t&&this.setPivotProperties(t,{dataSourceSettings:this.getDefinedObj({type:i.type,catalog:i.catalog,cube:i.cube,providerType:i.providerType,url:i.url,localeIdentifier:i.localeIdentifier,excludeFields:n.isNullOrUndefined(i.excludeFields)?[]:i.excludeFields,expandAll:i.expandAll,allowLabelFilter:i.allowLabelFilter,allowValueFilter:i.allowValueFilter,allowMemberFilter:i.allowMemberFilter,enableSorting:!!i.enableSorting,rows:i.rows,columns:i.columns,filters:i.filters,values:i.values,filterSettings:i.filterSettings,sortSettings:i.sortSettings,drilledMembers:i.drilledMembers,valueSortSettings:i.valueSortSettings,valueAxis:i.valueAxis,grandTotalsPosition:i.grandTotalsPosition,formatSettings:i.formatSettings,calculatedFieldSettings:i.calculatedFieldSettings,fieldMapping:i.fieldMapping,showSubTotals:i.showSubTotals,showRowSubTotals:i.showRowSubTotals,showColumnSubTotals:i.showColumnSubTotals,subTotalsPosition:i.subTotalsPosition,showGrandTotals:i.showGrandTotals,showRowGrandTotals:i.showRowGrandTotals,showColumnGrandTotals:i.showColumnGrandTotals,showHeaderWhenEmpty:i.showHeaderWhenEmpty,alwaysShowValueHeader:i.alwaysShowValueHeader,conditionalFormatSettings:i.conditionalFormatSettings,emptyCellsTextContent:i.emptyCellsTextContent,groupSettings:i.groupSettings,showAggregationOnValueField:i.showAggregationOnValueField,authentication:this.CloneAuthenticationObject(i.authentication)})})},t.cloneFieldSettings=function(n){var t;if(n){for(var r=[],i=0,u=n;i<u.length;i++)t=u[i],r.push(this.getDefinedObj({name:t.name,caption:t.caption,axis:t.axis,baseField:t.baseField,baseItem:t.baseItem,isCalculatedField:t.isCalculatedField,isNamedSet:t.isNamedSet,showNoDataItems:t.showNoDataItems,showSubTotals:t.showSubTotals,type:t.type,dataType:t.dataType,showFilterIcon:t.showFilterIcon,showSortIcon:t.showSortIcon,showRemoveIcon:t.showRemoveIcon,showValueTypeIcon:t.showValueTypeIcon,showEditIcon:t.showEditIcon,allowDragAndDrop:t.allowDragAndDrop,expandAll:t.expandAll,groupName:t.groupName}));return r}return n},t.cloneOlapFieldSettings=function(n){var t;if(n){for(var r=[],i=0,u=n;i<u.length;i++)t=u[i],r.push(this.getDefinedObj({caption:t.caption,hasChildren:t.hasChildren,id:t.id,isSelected:t.isSelected,name:t.name,spriteCssClass:t.spriteCssClass,tag:t.tag,type:t.type,pid:t.pid,expanded:t.expanded,defaultHierarchy:t.defaultHierarchy,hasAllMember:t.hasAllMember,allMember:t.allMember,isChecked:t.isChecked,filterMembers:t.filterMembers,formula:t.formula,childMembers:t.childMembers,searchMembers:t.searchMembers,htmlAttributes:this.getDefinedObj(t.htmlAttributes),currrentMembers:t.currrentMembers,isHierarchy:t.isHierarchy,isNamedSets:t.isNamedSets,formatString:t.formatString,actualFilter:t.actualFilter,levels:t.levels,levelCount:t.levelCount,memberType:t.memberType,fieldType:t.fieldType,parentHierarchy:t.parentHierarchy}));return r}return n},t.cloneFilterSettings=function(n){var t;if(n){for(var r=[],i=0,u=n;i<u.length;i++)t=u[i],r.push(this.getDefinedObj({name:t.name,type:t.type,condition:t.condition,items:t.items?t.items.slice():t.items,levelCount:t.levelCount,measure:t.measure,selectedField:t.selectedField,showDateFilter:t.showDateFilter,showLabelFilter:t.showLabelFilter,showNumberFilter:t.showNumberFilter,value1:t.value1,value2:t.value2}));return r}return n},t.cloneSortSettings=function(n){var t;if(n){for(var r=[],i=0,u=n;i<u.length;i++)t=u[i],r.push(this.getDefinedObj({name:t.name,order:t.order,membersOrder:t.membersOrder?t.membersOrder.slice():t.membersOrder}));return r}return n},t.getFormattedHeader=function(n,i){var r=t.frameHeaderWithKeys(n),u,f;return r.valueSort&&r.valueSort.axis&&(u=r.valueSort.axis,f=this.isDateField(u,i),r.formattedText=f||!i.formatFields[u]||!0===n.isSum?r.formattedText:i.getFormattedValue(r.actualText,u).formattedText),r},t.getFormattedMembers=function(n,t,i,r,u){var s=this.isDateField(t,i),f;if(s||i.groupingFields[t]){for(var e={},h=Object.keys(n),c=i.fieldList[t].dateMember,o=0,l=h.length;o<l;o++)f=n[h[o]],s&&(r||u)?e[f.caption]=f:e[c[f.ordinal-1].actualText]=f;return e}return n},t.isDateField=function(n,t){return t.formatFields[n]&&["date","dateTime","time"].indexOf(t.formatFields[n].type)>-1},t.formatChartHeaders=function(t,i,r,u){for(var o,e=[],f=0,s=t.length;f<s;f++)o=r?i.parent.dataSourceSettings.columns.length>0&&!n.isNullOrUndefined(i.parent.dataSourceSettings.columns[f])?i.parent.dataSourceSettings.columns[f].name:void 0:i.parent.dataSourceSettings.rows.length>0&&!n.isNullOrUndefined(i.parent.dataSourceSettings.rows[f])?i.parent.dataSourceSettings.rows[f].name:void 0,n.isNullOrUndefined(o)?u&&u.isGrandSum?e.push(i.parent.localeObj.getConstant("grandTotal")):e.push(t[f]):i.engineModule.formatFields[o]&&["date","dateTime","time"].indexOf(i.engineModule.formatFields[o].type)>-1?e.push(t[f]):e.push(i.engineModule.getFormattedValue(t[f],o).formattedText);return e.join(" - ")},t.cloneDrillMemberSettings=function(n){var t;if(n){for(var r=[],i=0,u=n;i<u.length;i++)t=u[i],r.push(this.getDefinedObj({name:t.name,delimiter:t.delimiter,items:t.items?t.items.slice():t.items}));return r}return n},t.cloneFormatSettings=function(n){var t;if(n){for(var r=[],i=0,u=n;i<u.length;i++)t=u[i],r.push(this.getDefinedObj({name:t.name,calendar:t.calendar,currency:t.currency,format:t.format,maximumFractionDigits:t.maximumFractionDigits,maximumSignificantDigits:t.maximumSignificantDigits,minimumFractionDigits:t.minimumFractionDigits,minimumIntegerDigits:t.minimumIntegerDigits,minimumSignificantDigits:t.minimumSignificantDigits,skeleton:t.skeleton,type:t.type,useGrouping:t.useGrouping}));return r}return n},t.CloneValueSortObject=function(n){return n?{columnIndex:n.columnIndex,headerDelimiter:n.headerDelimiter,headerText:n.headerText,measure:n.measure,sortOrder:n.sortOrder,columnHeaderText:n.columnHeaderText,rowHeaderText:n.rowHeaderText,rowSortOrder:n.rowSortOrder,columnSortOrder:n.columnSortOrder}:n},t.CloneAuthenticationObject=function(n){return n?{userName:n.userName,password:n.password}:n},t.cloneCalculatedFieldSettings=function(n){var t;if(n){for(var r=[],i=0,u=n;i<u.length;i++)t=u[i],r.push(this.getDefinedObj({name:t.name,formatString:t.formatString,formula:t.formula,hierarchyUniqueName:t.hierarchyUniqueName}));return r}return n},t.cloneConditionalFormattingSettings=function(n){var t;if(n){for(var r=[],i=0,u=n;i<u.length;i++)t=u[i],r.push(this.getDefinedObj({applyGrandTotals:t.applyGrandTotals,conditions:t.conditions,label:t.label,measure:t.measure,style:t.style?{backgroundColor:t.style.backgroundColor,color:t.style.color,fontFamily:t.style.fontFamily,fontSize:t.style.fontSize}:t.style,value1:t.value1,value2:t.value2}));return r}return n},t.cloneGroupSettings=function(n){var t;if(n){for(var r=[],i=0,u=n;i<u.length;i++)t=u[i],r.push(this.getDefinedObj({name:t.name,caption:t.caption,customGroups:this.cloneCustomGroups(t.customGroups),endingAt:t.endingAt,startingAt:t.startingAt,groupInterval:t.groupInterval,rangeInterval:t.rangeInterval,type:t.type}));return r}return n},t.cloneCustomGroups=function(n){var t;if(n){for(var r=[],i=0,u=n;i<u.length;i++)t=u[i],r.push(this.getDefinedObj({groupName:t.groupName,items:t.items?t.items.slice():t.items}));return r}return n},t.getFilterItemByName=function(n,t){var i=new nt.DataManager({json:t}).executeLocal((new nt.Query).where("name","equal",n));if(i&&i.length>0)return i[i.length-1]},t.getFieldByName=function(n,t){return new nt.DataManager({json:t}).executeLocal((new nt.Query).where("name","equal",n))[0]},t.getFieldInfo=function(n,t,i){var f,o,r;if(!i)for(var e=[this.cloneFieldSettings(t.dataSourceSettings.rows),this.cloneFieldSettings(t.dataSourceSettings.columns),this.cloneFieldSettings(t.dataSourceSettings.values),this.cloneFieldSettings(t.dataSourceSettings.filters)],u=0,s=e.length;u<s;u++)for(f=0,o=e[u]?e[u].length:0;f<o;f++)if(e[u][f]&&e[u][f].name===n)return{fieldName:n,fieldItem:e[u][f],axis:0===u?"rows":1===u?"columns":2===u?"values":"filters",position:f};return r="olap"===t.dataType?t.olapEngineModule.fieldList[n]:t.engineModule.fieldList[n],{fieldName:n,fieldItem:r?{name:n,caption:r.caption,baseField:r.baseField,baseItem:r.baseItem,isCalculatedField:r.isCalculatedField,isNamedSet:r.isNamedSets,showNoDataItems:r.showNoDataItems,showSubTotals:r.showSubTotals,type:r.aggregateType,showFilterIcon:r.showFilterIcon,showSortIcon:r.showSortIcon,showRemoveIcon:r.showRemoveIcon,showValueTypeIcon:r.showValueTypeIcon,showEditIcon:r.showEditIcon,allowDragAndDrop:r.allowDragAndDrop,expandAll:r.expandAll}:void 0,axis:"fieldlist",position:-1}},t.isButtonIconRefesh=function(t,i,r){var l=!1,v,u,y,e,p,s,c;try{if("dataSourceSettings"===t&&i.dataSourceSettings&&r.dataSourceSettings){var o=["notAvail","notAvail","notAvail","notAvail"],a=Object.keys(i.dataSourceSettings),f=Object.keys(r.dataSourceSettings);if(a&&f&&f.length>0&&a.length===f.length)for(v=["rows","columns","values","filters"],u=0;u<f.length;u++){if(y=f[u]in i.dataSourceSettings&&!n.isNullOrUndefined(i.dataSourceSettings[f[u]])?Object.keys(i.dataSourceSettings[f[u]]):[],e=f[u]in r.dataSourceSettings&&!n.isNullOrUndefined(r.dataSourceSettings[f[u]])?Object.keys(r.dataSourceSettings[f[u]]):[],-1!==v.indexOf(f[u])&&-1!==v.indexOf(a[u])&&y&&e&&e.length>0&&y.length===e.length)for(p=["showFilterIcon","showSortIcon","showRemoveIcon","showValueTypeIcon","showEditIcon","allowDragAndDrop","expandAll"],s=0;s<e.length;s++){for(var tt=Object.keys(i.dataSourceSettings[f[u]][e[s]]),d=Object.keys(r.dataSourceSettings[f[u]][e[s]]),h=0;h<d.length;h++){if(-1===p.indexOf(d[h])||-1===p.indexOf(tt[h])){o[u]="break";break}o[u]="update"}if("break"===o[u])break}else o[u]="break";if("break"===o[u])break}for(var w=0,b=0,g=0,k=0,nt=o;k<nt.length;k++)c=nt[k],"break"===c&&w++,"notAvail"===c&&b++,"update"===c&&g++;l=!(w>0||4===b)&&0===w&&b<4&&g>0}}catch(t){l=!1}return l},t.frameContent=function(n,t,i,r){var s=[],e=r,f;if(e.dataSourceSettings.values.length>0&&!e.engineModule.isEmptyData&&(e.enableValueSorting||!e.engineModule.isEngineUpdated))for(var o=0,h="value"===t?i:0,c="value"===t?n.length:i,u=h;u<c;u++)if(n[u]){for(s[o="header"===t?u:o]={},f=0;f<n[u].length;f++)n[u][f]&&(s[o][f]=n[u][f]);o++}return s},t.getLocalizedObject=function(n){var t={};return t.Null=n.localeObj.getConstant("null"),t.Years=n.localeObj.getConstant("Years"),t.Quarters=n.localeObj.getConstant("Quarters"),t.Months=n.localeObj.getConstant("Months"),t.Days=n.localeObj.getConstant("Days"),t.Hours=n.localeObj.getConstant("Hours"),t.Minutes=n.localeObj.getConstant("Minutes"),t.Seconds=n.localeObj.getConstant("Seconds"),t.QuarterYear=n.localeObj.getConstant("QuarterYear"),t.Of=n.localeObj.getConstant("of"),t.Qtr=n.localeObj.getConstant("qtr"),t.Undefined=n.localeObj.getConstant("undefined"),t.GroupOutOfRange=n.localeObj.getConstant("groupOutOfRange"),t.Group=n.localeObj.getConstant("group"),t},t.generateUUID=function(){var n=(new Date).getTime(),t=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var r=16*Math.random();return n>0?(r=(n+r)%16|0,n=Math.floor(n/16)):(r=(t+r)%16|0,t=Math.floor(t/16)),("x"===i?r:3&r|8).toString(16)})},t.applyCustomSort=function(n,t,i,r,u){var l,h=[],o,a,f,c,e,s;for((h=n.IsOrderChanged?n.members:"Ascending"===n.sortOrder||"None"===n.sortOrder||void 0===n.sortOrder?[].concat(n.members):[].concat(n.members).reverse()).length>t.length&&(h=h.filter(function(n){return t.some(function(t){var r=u?t.formattedText:"string"===i||"number"===i?t.actualText:t.dateText;return typeof n==typeof r&&r===n})})),o=[],a=void 0===i||"string"===i||"number"===i,t.length>0&&"Grand Total"===t[0].actualText&&(l=t[0],t.shift()),f=0,c=0;f<t.length;f++){if(e=t[f],s=u?e.formattedText:a?e.actualText:!0===i?e.actualText.toString():e.dateText,h[c]===s){if(t.splice(c++,0,e),t.splice(++f,1),!(c<h.length)){r||o.splice(--c,0,s);break}f=-1}f>=0&&!r&&(o[f]=s)}if(!r){for(f=o.length;f<t.length;f++)e=t[f],s=u?e.formattedText:a?e.actualText:!0===i?e.actualText.toString():e.dateText,o[f]=s;"Grand Total"===o[o.length-1]&&o.pop();n.members=o}return l&&t.splice(0,0,l),t},t.applyHeadersSort=function(n,t,i,r){return r?n=n.sort(function(n,i){var r=n.actualText,u=i.actualText;return"Grand Total"===r||"Grand Total"===u?0:"Out of Range"===r?1:"Out of Range"===u?-1:isNaN(parseFloat(r))||isNaN(parseFloat(u))?"Ascending"===t?r.localeCompare(u,void 0,{numeric:!0,sensitivity:"base"}):u.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"}):"Ascending"===t?parseFloat(r)-parseFloat(u):parseFloat(u)-parseFloat(r)}):"datetime"===i||"date"===i||"time"===i?n="Ascending"===t?n.sort(function(n,t){return"Out of Range"===n.dateText?1:"Out of Range"===t.dateText?-1:n.dateText>t.dateText?1:n.dateText<t.dateText?-1:0}):"Descending"===t?n.sort(function(n,t){return"Out of Range"===n.dateText?1:"Out of Range"===t.dateText?-1:n.dateText<t.dateText?1:n.dateText>t.dateText?-1:0}):n:!0===i?n="Ascending"===t?n.sort(function(n,t){return"Grand Total"===n.actualText||"Grand Total"===t.actualText?0:"Out of Range"===n.actualText?1:"Out of Range"===t.actualText?-1:Number(n.actualText.toString().match(/\d+/))>Number(t.actualText.toString().match(/\d+/))?1:Number(t.actualText.toString().match(/\d+/))>Number(n.actualText.toString().match(/\d+/))?-1:0}):"Descending"===t?n.sort(function(n,t){return"Grand Total"===n.actualText||"Grand Total"===t.actualText?0:"Out of Range"===n.actualText?-1:"Out of Range"===t.actualText||Number(n.actualText.toString().match(/\d+/))<Number(t.actualText.toString().match(/\d+/))?1:Number(t.actualText.toString().match(/\d+/))<Number(n.actualText.toString().match(/\d+/))?-1:0}):n:"string"===i?n.sort(function(n,i){return"Ascending"===t?"Grand Total"===String(n.actualText)||"Grand Total"===String(i.actualText)?0:String(n.actualText).localeCompare(String(i.actualText),void 0,{sensitivity:"base"}):"Grand Total"===String(n.actualText)||"Grand Total"===String(i.actualText)?0:String(i.actualText).localeCompare(String(n.actualText),void 0,{sensitivity:"base"})}):n="Ascending"===t?n.sort(function(n,t){return"Grand Total"===n.actualText||"Grand Total"===t.actualText?0:n.actualText>t.actualText?1:t.actualText>n.actualText?-1:0}):"Descending"===t?n.sort(function(n,t){return"Grand Total"===n.actualText||"Grand Total"===t.actualText?0:n.actualText<t.actualText?1:t.actualText<n.actualText?-1:0}):n,n},t.renderOlapEngine=function(n,t){try{n.olapEngineModule.renderEngine(n.dataSourceSettings,t||n.frameCustomProperties(n.olapEngineModule.fieldListData,n.olapEngineModule.fieldList),n.onHeadersSort?n.getHeaderSortInfo.bind(n):void 0,n.beforeServiceInvoke?n.getBeforeServiceInvoke.bind(n):void 0,n.afterServiceInvoke?n.getAfterServiceInvoke.bind(n):void 0);n.setProperties({dataSourceSettings:{valueIndex:n.olapEngineModule.measureIndex}},!0)}catch(t){n.actionObj.actionName="engineFormation";n.olapEngineModule.errorInfo?(n.actionFailureMethod(n.olapEngineModule.errorInfo),n.olapEngineModule.errorInfo=void 0):n.actionFailureMethod(t)}},t.frameHeaderWithKeys=function(n){for(var i=Object.keys(n),t=0,r={};t<i.length;)r[i[t]]=n[i[t]],t++;return r},t.getPageSize=function(n){switch(n){case"Letter":return new e.SizeF(612,792);case"Note":return new e.SizeF(540,720);case"Legal":return new e.SizeF(612,1008);case"A0":return new e.SizeF(2380,3368);case"A1":return new e.SizeF(1684,2380);case"A2":return new e.SizeF(1190,1684);case"A3":return new e.SizeF(842,1190);case"A5":return new e.SizeF(421,595);case"A6":return new e.SizeF(297,421);case"A7":return new e.SizeF(210,297);case"A8":return new e.SizeF(148,210);case"A9":return new e.SizeF(105,148);case"B0":return new e.SizeF(2836,4008);case"B1":return new e.SizeF(2004,2836);case"B2":return new e.SizeF(1418,2004);case"B3":return new e.SizeF(1002,1418);case"B4":return new e.SizeF(709,1002);case"B5":return new e.SizeF(501,709);case"Archa":return new e.SizeF(648,864);case"Archb":return new e.SizeF(864,1296);case"Archc":return new e.SizeF(1296,1728);case"Archd":return new e.SizeF(1728,2592);case"Arche":return new e.SizeF(2592,3456);case"Flsa":return new e.SizeF(612,936);case"HalfLetter":return new e.SizeF(396,612);case"Letter11x17":return new e.SizeF(792,1224);case"Ledger":return new e.SizeF(1224,792);default:return new e.SizeF(595,842)}},t.getSortedValue=function(n,t){return n.sort(function(n,i){return"Descending"===t?(i.value||"grand sum"===i.header.type?i.value:0)-(n.value||"grand sum"===n.header.type?n.value:0):(n.value||"grand sum"===n.header.type?n.value:0)-(i.value||"grand sum"===i.header.type?i.value:0)}),n.map(function(n){return n.header})},t.toggleFieldListIconVisibility=function(t){t.showFieldList&&n.select("#"+t.element.id+"_PivotFieldList",t.element)&&(t.toolbar&&-1!==t.toolbar.indexOf("FieldList")?n.select("#"+t.element.id+"_PivotFieldList",t.element).style.display="none":(n.select("#"+t.element.id+"_PivotFieldList",t.element).style.top=t.element.querySelector("."+gu).offsetHeight.toString()+"px",n.select("#"+t.element.id+"_PivotFieldList",t.element).style.position="relative"));t.toolbar&&-1!==t.toolbar.indexOf("FieldList")&&t.showToolbar&&t.element.querySelector("."+st)&&(t.element.querySelector("."+st).style.display="none")},t.isMemberDrilled=function(n,t,i){for(var s,o,r,u=!1,f=0;f<i.length;f++)for(s=i[f].items,o=0;o<s.length&&!u;o++)for(var e=s[o].split(i[f].delimiter),c=n.formattedText.split(" "),l=[],h=0;h<c.length;h++)if(l.push(c[h]),l.join(" ")===e[e.length-1])for(r=0;r<t.length&&e[r];r++){if(e[r]!==t[r]||e[0]!==t[0]){u=!1;break}u=!0}return u},t}(),ds=function(){return ds=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n},ds.apply(this,arguments)},ul=function(){function t(){this.aggregatedValueMatrix=[];this.valueContent=[];this.formatFields={};this.groupingFieldsInfo={};this.dateFormatFunction={};this.calculatedFields={};this.calculatedFormulas={};this.valueAxis=0;this.saveDataHeaders={};this.columnCount=0;this.rowCount=0;this.columnPageCount=0;this.rowPageCount=0;this.colFirstLvl=0;this.rowFirstLvl=0;this.rowStartPos=0;this.colStartPos=0;this.enableValueSorting=!1;this.headerCollection={rowHeaders:[],columnHeaders:[],rowHeadersCount:0,columnHeadersCount:0};this.lastMember={};this.rMembers=[];this.cMembers=[];this.groupingFields={};this.isLastHeaderHasMeasures=!0;this.measureIndex=-1;this.isPagingOrVirtualizationEnabled=!1;this.rowMaxLevel=0;this.valueMatrix=[];this.memberCnt=-1;this.pageInLimit=!1;this.endPos=0;this.removeCount=0;this.colHdrBufferCalculated=!1;this.colValuesLength=1;this.rowValuesLength=1;this.slicedHeaders=[];this.fieldFilterMem={};this.filterPosObj={};this.selectedHeaders={selectedHeader:[],values:[]};this.rowGrandTotal=null;this.columnGrandTotal=null;this.removeRowGrandTotal=!1;this.removeColumnGrandTotal=!1;this.isValueHasAdvancedAggregate=!1;this.rawIndexObject={};this.reformAxisCount=0;this.isEditing=!1;this.valueAxisFields={};this.data=[];this.actualData=[];this.groupRawIndex={};this.fieldKeys={};this.allowDataCompression=!1;this.dataSourceSettings={};this.frameHeaderObjectsCollection=!1;this.headerObjectsCollection={};this.columnKeys={};this.fieldDrillCollection={};this.formatRegex=/^(?:[ncpae])(?:([0-9]|1[0-9]|20))?$/i;this.measureNames={};this.enablePaging=!1;this.enableVirtualization=!1;this.enableHtmlSanitizer=!1;this.enableOptimizedRendering=!1;this.groupedDataType={};this.tabularPivotValues=[];this.sortMembers={};this.viewportPageCount=3}return t.prototype.clearProperties=function(n){this.isPagingOrVirtualizationEnabled||n||(this.columnKeys={},this.headerCollection={rowHeaders:[],columnHeaders:[],rowHeadersCount:0,columnHeadersCount:0});this.enableValueSorting&&(this.valueContent=[]);this.saveDataHeaders=this.allowValueFilter?this.saveDataHeaders:{};this.rMembers=[];this.cMembers=[];this.lastMember={};this.slicedHeaders=[];this.fieldFilterMem={};this.filterPosObj={};this.selectedHeaders={selectedHeader:[],values:[]};this.rowGrandTotal=null;this.columnGrandTotal=null;this.rawIndexObject={};this.dataSourceSettings.valueIndex>-1&&(this.valueAxisFields={});this.headerObjectsCollection={};this.fieldDrillCollection={};this.sortMembers={}},t.prototype.renderEngine=function(t,i,u,f){var e,o,a,h,c,l,s;if(this.getValueCellInfo=u,this.getHeaderSortInfo=f,this.customProperties=i,this.fieldList)for(e=0,o=t.formatSettings;e<o.length;e++)!this.formatFields[o[e].name]&&this.fieldList[o[e].name]&&(this.fieldList[o[e].name].members={},this.fieldList[o[e].name].formattedMembers={},this.fieldList[o[e].name].dateMember=[]);if(this.formatFields={},this.dateFormatFunction={},this.calculatedFields={},this.calculatedFormulas={},this.valueAxis=0,this.saveDataHeaders={},this.columnCount=0,this.rowCount=0,this.columnPageCount=0,this.rowPageCount=0,this.colFirstLvl=0,this.rowFirstLvl=0,this.rowStartPos=0,this.colStartPos=0,this.dataSourceSettings.excludeFields=n.isNullOrUndefined(t.excludeFields)?[]:t.excludeFields,this.enableValueSorting=!1,this.headerCollection={rowHeaders:[],columnHeaders:[],rowHeadersCount:0,columnHeadersCount:0},this.aggregatedValueMatrix=[],this.rMembers=[],this.cMembers=[],this.memberCnt=-1,this.pageInLimit=!1,this.endPos=0,this.removeCount=0,this.colHdrBufferCalculated=!1,this.colValuesLength=1,this.rowValuesLength=1,this.slicedHeaders=[],this.fieldFilterMem={},this.filterPosObj={},this.selectedHeaders={selectedHeader:[],values:[]},this.rowGrandTotal=null,this.columnGrandTotal=null,this.removeRowGrandTotal=!1,this.removeColumnGrandTotal=!1,this.isValueHasAdvancedAggregate=!1,this.rawIndexObject={},this.isLastHeaderHasMeasures=!0,this.isEditing=!1,this.globalize=i&&i.globalize?i.globalize:new n.Internationalization,this.currencyCode=i&&i.currenyCode?i.currenyCode:void 0,this.localeObj=i?i.localeObj:void 0,this.fieldsType=i?i.fieldsType:{},this.clonedReport=i?i.clonedReport&&i.clonedReport.properties?i.clonedReport.properties:i.clonedReport:{},this.enablePaging=i.enablePaging,this.enableVirtualization=i.enableVirtualization,this.enableOptimizedRendering=i.enableOptimizedRendering,this.enableHtmlSanitizer=i.enableHtmlSanitizer,this.isPagingOrVirtualizationEnabled=this.enablePaging||this.enableVirtualization,this.enableSort=t.enableSorting,this.dataSourceSettings.alwaysShowValueHeader=t.alwaysShowValueHeader,this.dataSourceSettings.showHeaderWhenEmpty=!!n.isNullOrUndefined(t.showHeaderWhenEmpty)||t.showHeaderWhenEmpty,this.dataSourceSettings.showSubTotals=!!n.isNullOrUndefined(t.showSubTotals)||t.showSubTotals,this.dataSourceSettings.showRowSubTotals=!!n.isNullOrUndefined(t.showRowSubTotals)||t.showRowSubTotals,this.dataSourceSettings.showColumnSubTotals=!!n.isNullOrUndefined(t.showColumnSubTotals)||t.showColumnSubTotals,this.dataSourceSettings.showGrandTotals=!!n.isNullOrUndefined(t.showGrandTotals)||t.showGrandTotals,this.dataSourceSettings.grandTotalsPosition=n.isNullOrUndefined(t.grandTotalsPosition)?"Bottom":t.grandTotalsPosition,this.dataSourceSettings.showRowGrandTotals=!!n.isNullOrUndefined(t.showRowGrandTotals)||t.showRowGrandTotals,this.dataSourceSettings.showColumnGrandTotals=!!n.isNullOrUndefined(t.showColumnGrandTotals)||t.showColumnGrandTotals,this.showSubTotalsAtTop=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&"Top"===t.subTotalsPosition,this.showSubTotalsAtBottom=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals&&"Bottom"===t.subTotalsPosition||i.isTabularLayout,this.allowValueFilter=t.allowValueFilter,this.isValueFilterEnabled=!1,this.enableValueSorting=!!i&&i.enableValueSorting,this.isDrillThrough=!!i&&!!i.isDrillThrough&&i.isDrillThrough,this.valueContent=[],this.dataSourceSettings=r.getClonedDataSourceSettings(t),t.dataSource instanceof nt.DataManager||("CSV"===t.type?(this.data=t.dataSource.map(function(n){return n.slice()}),this.fieldList&&this.data.shift()):this.data=t.dataSource),this.data&&this.data[0]){if(!this.fieldList)for(this.fields="CSV"===t.type?this.data.shift():Object.keys(this.data[0]),this.fieldKeys={},e=0;e<this.fields.length;e++)this.fieldKeys[this.fields[e]]="CSV"===t.type?e:this.fields[e];for(i&&i.pageSettings&&i.allowDataCompression&&(this.actualData=this.data,this.data=this.getGroupedRawData(t)),this.dataSourceSettings.rows=t.rows?t.rows:[],this.dataSourceSettings.columns=t.columns?t.columns:[],this.dataSourceSettings.filters=t.filters?t.filters:[],this.dataSourceSettings.values=t.values?t.values:[],this.dataSourceSettings.formatSettings=t.formatSettings?t.formatSettings:[],this.dataSourceSettings.groupSettings=t.groupSettings?t.groupSettings:[],this.dataSourceSettings.calculatedFieldSettings=t.calculatedFieldSettings?t.calculatedFieldSettings:[],this.enableSort=void 0===t.enableSorting||t.enableSorting,this.dataSourceSettings.fieldMapping=t.fieldMapping?t.fieldMapping:[],this.valueAxisFields={},h=0,c=this.dataSourceSettings.values;h<c.length;h++)l=c[h],this.valueAxisFields[l.name]=l;for(a=this.getGroupData(this.data),this.validateFilters(t),this.isExpandAll=!(!this.isValueFiltersAvail||!t.allowValueFilter)||t.expandAll,this.drilledMembers=t.drilledMembers?this.isValueFiltersAvail&&t.allowValueFilter?[]:t.drilledMembers:[],this.isMultiMeasures=this.dataSourceSettings.values.length>1,this.valueAxis="row"===t.valueAxis?1:0,this.measureIndex=n.isNullOrUndefined(t.valueIndex)?-1:t.valueIndex,this.emptyCellTextContent=t.emptyCellsTextContent?t.emptyCellsTextContent:"",this.rowValuesLength=1===this.valueAxis?this.dataSourceSettings.values.length:1,this.colValuesLength=0===this.valueAxis?this.dataSourceSettings.values.length:1,this.valueSortSettings=t.valueSortSettings||{rowSortOrder:"None",rowHeaderText:"",columnSortOrder:"None",columnHeaderText:"",headerDelimiter:".",columnIndex:void 0,rowIndex:void 0},this.valueSortData=[],this.pageSettings=i?i.pageSettings?i.pageSettings:this.pageSettings:void 0,this.allowDataCompression=i&&i.allowDataCompression,this.savedFieldList=i?i.savedFieldList:void 0,this.getFieldList(a,this.enableSort,t.allowValueFilter),this.removeIrrelevantFields(Object.keys(this.fieldList)),this.fillFieldMembers(),this.updateSortSettings(t.sortSettings,this.enableSort),this.filterMembers=[],s=this.dataSourceSettings.columns.length-1,this.columnKeys={};s>-1;)this.columnKeys[this.dataSourceSettings.columns[s].name]=this.dataSourceSettings.columns[s],s--;this.updateFilterMembers(t);this.generateGridData(t)}},t.prototype.removeIrrelevantFields=function(t){var i={},r,u,f;for(i[0]=this.dataSourceSettings.rows,i[1]=this.dataSourceSettings.columns,i[2]=this.dataSourceSettings.values,i[3]=this.dataSourceSettings.filters,r=0;r<4;){if(i[r])for(u=0;u<i[r].length;u++)f=i[r][u].name,this.dataSourceSettings.excludeFields.indexOf(f)>-1||!n.isNullOrUndefined(t)&&-1===t.indexOf(f)?(i[r].splice(u,1),u--):2===r&&(this.measureNames[f]=i[r][u].caption?i[r][u].caption:f,this.measureNames[i[r][u].caption?i[r][u].caption:f]=f);r++}this.isMultiMeasures=this.dataSourceSettings.values.length>1;this.measureIndex=-1===this.measureIndex?this.valueAxis?i[0].length:i[1].length:this.measureIndex},t.prototype.updateDataSourceSettings=function(t,i){i&&(this.emptyCellTextContent=t.emptyCellsTextContent?t.emptyCellsTextContent:"",this.valueAxis="row"===t.valueAxis?1:0,this.rowValuesLength=1===this.valueAxis?this.dataSourceSettings.values.length:1,this.colValuesLength=0===this.valueAxis?this.dataSourceSettings.values.length:1,this.measureIndex=n.isNullOrUndefined(t.valueIndex)?-1:t.valueIndex,this.enableSort=t.enableSorting,this.dataSourceSettings.alwaysShowValueHeader=t.alwaysShowValueHeader,this.dataSourceSettings.showHeaderWhenEmpty=!!n.isNullOrUndefined(t.showHeaderWhenEmpty)||t.showHeaderWhenEmpty,this.dataSourceSettings.showSubTotals=!!n.isNullOrUndefined(t.showSubTotals)||t.showSubTotals,this.dataSourceSettings.showRowSubTotals=!!n.isNullOrUndefined(t.showRowSubTotals)||t.showRowSubTotals,this.dataSourceSettings.showColumnSubTotals=!!n.isNullOrUndefined(t.showColumnSubTotals)||t.showColumnSubTotals,this.dataSourceSettings.showGrandTotals=!!n.isNullOrUndefined(t.showGrandTotals)||t.showGrandTotals,this.dataSourceSettings.grandTotalsPosition=n.isNullOrUndefined(t.grandTotalsPosition)?"Bottom":t.grandTotalsPosition,this.dataSourceSettings.showRowGrandTotals=!!n.isNullOrUndefined(t.showRowGrandTotals)||t.showRowGrandTotals,this.dataSourceSettings.showColumnGrandTotals=!!n.isNullOrUndefined(t.showColumnGrandTotals)||t.showColumnGrandTotals,this.showSubTotalsAtTop=this.dataSourceSettings.showSubTotals&&"Top"===t.subTotalsPosition&&t.showColumnSubTotals,this.showSubTotalsAtBottom=!!this.customProperties.isTabularLayout||this.dataSourceSettings.showSubTotals&&"Bottom"===t.subTotalsPosition&&t.showRowSubTotals,this.allowValueFilter=t.allowValueFilter,this.dataSourceSettings.formatSettings=t.formatSettings?t.formatSettings:[],this.dataSourceSettings.groupSettings=t.groupSettings?t.groupSettings:[],this.dataSourceSettings.calculatedFieldSettings=t.calculatedFieldSettings?t.calculatedFieldSettings:[],this.enableSort=void 0===t.enableSorting||t.enableSorting,this.dataSourceSettings.fieldMapping=t.fieldMapping?t.fieldMapping:[],this.dataSourceSettings.values=t.values?t.values:[],this.dataSourceSettings.rows=t.rows?t.rows:[],this.dataSourceSettings.columns=t.columns?t.columns:[],this.dataSourceSettings.filters=t.filters?t.filters:[],this.dataSourceSettings.filterSettings=t.filterSettings?t.filterSettings:[],this.dataSourceSettings.sortSettings=t.sortSettings?t.sortSettings:[],this.dataSourceSettings.conditionalFormatSettings=t.conditionalFormatSettings?t.conditionalFormatSettings:[],this.dataSourceSettings.valueSortSettings=t.valueSortSettings?t.valueSortSettings:{},this.removeIrrelevantFields(Object.keys(this.fieldList)))},t.prototype.getGroupedRawData=function(t){var a,y,k,o,b,f,v,h;for(this.data=[],a=0,y=this.actualData;a<y.length;a++)k=y[a],this.data[this.data.length]=r.frameHeaderWithKeys(k);var c=t.values.filter(function(n){return"Count"===n.type||"DistinctCount"===n.type}).map(function(n){return n.name}),it=c.length>0,d=this.data,g=t.rows.concat(t.columns.concat(t.filters)).map(function(n){return n.name}),p={},nt=[];this.groupRawIndex={};for(var tt={},w=0,l=0;l<d.length;l++){if(o=d[l],b=[],it)for(f=0;f<c.length;f++)o[this.fieldKeys[c[f]]]=n.isNullOrUndefined(o[this.fieldKeys[c[f]]])?o[this.fieldKeys[c[f]]]:1;for(v=0;v<g.length;v++)b.push(o[this.fieldKeys[g[v]]]);if(h=b.join("-"),p[h]){for(f=0;f<t.values.length;f++){var i=t.values[f].name,s=o[this.fieldKeys[i]],u=p[h],e=t.values[f].type;n.isNullOrUndefined(s)||("number"==typeof s&&"DistinctCount"!==e||(e="Count"),n.isNullOrUndefined(u[i])?u[i]="Product"===e?1:"Min"===e||"Max"===e?void 0:0:"number"!=typeof u[i]&&(u[i]=1),"Count"===e?u[i]+=1:"Min"===e?n.isNullOrUndefined(u[i])||(u[i]=u[i]>s?s:u[i]):"Max"===e?n.isNullOrUndefined(u[i])||(u[i]=u[i]<s?s:u[i]):"Product"===e?u[i]*=s:u[i]+=s)}this.isDrillThrough&&this.groupRawIndex[tt[h]].push(l)}else p[h]=o,nt.push(o),this.isDrillThrough&&(this.groupRawIndex[w]=[l],tt[h]=w,w++)}return nt},t.prototype.getGroupData=function(t){for(var o,f=this,u=t[0],h=function(e,o){var c=o[e],s=c.name,yt=c.caption,k,ci,nr,a,nt,ut,lr,li,ii,vr,kt,yr,vi,p,ft,ht,l,ct,pi,ui,g,br,lt,kr,fi,ei,dr,gr,pt,v,oi,et,tt,it,wt,nu,rt,ot,si,fr,bi,ki,er,di,or,dt,tu,hi,iu,gt,ti,sr,bt,gi;if(!(i.fields.indexOf(s)>-1))return e<o.length-1?"continue":{value:u};if(k={},ci=void 0,"Date"===c.type&&i.groupingFields[s]||"Custom"===c.type&&i.groupingFields[s])return{value:u};if("Number"===c.type){if("number"!==r.getType(u[s])&&i.groupingFields[s])return{value:u};c.rangeInterval&&t.sort(function(n,t){return Number(n[f.fieldKeys[s]])>Number(t[f.fieldKeys[s]])?1:Number(t[f.fieldKeys[s]])>Number(n[f.fieldKeys[s]])?-1:0})}for(nr=t.length;nr--;){if(a=t[nr],a[i.fieldKeys[s]]&&"Date"===c.type){if(nt=new Date(a[i.fieldKeys[s]].toString()),!n.isNullOrUndefined(nt)&&c.groupInterval.length>0)for(ut=0,lr=c.groupInterval.length;ut<lr;ut++){var at=c.groupInterval[ut],st=i.getRange(c,nt.getTime()),ni=r.resetTime(new Date);switch(at){case"Years":k[h=ut===c.groupInterval.length-1?s:s+"_date_group_years"]=at;i.fieldKeys[h]="CSV"===i.dataSourceSettings.type?i.fieldKeys[h]?i.fieldKeys[h]:i.fields.length:h;-1===i.fields.indexOf(h)&&i.fields.push(h);a[i.fieldKeys[h]]=st?void 0:new Date(ni.setFullYear(nt.getFullYear())).toString();break;case"Quarters":k[h=ut===c.groupInterval.length-1?s:s+"_date_group_quarters"]=at;li=Math.ceil((nt.getMonth()+1)/3);i.fieldKeys[h]="CSV"===i.dataSourceSettings.type?i.fieldKeys[h]?i.fieldKeys[h]:i.fields.length:h;-1===i.fields.indexOf(h)&&i.fields.push(h);a[i.fieldKeys[h]]=st?void 0:(i.localeObj?i.localeObj.getConstant("qtr"):"Qtr")+li.toString();break;case"QuarterYear":k[h=ut===c.groupInterval.length-1?s:s+"_date_group_quarterYear"]=at;li=Math.ceil((nt.getMonth()+1)/3);i.fieldKeys[h]="CSV"===i.dataSourceSettings.type?i.fieldKeys[h]?i.fieldKeys[h]:i.fields.length:h;-1===i.fields.indexOf(h)&&i.fields.push(h);a[i.fieldKeys[h]]=st?void 0:(i.localeObj?i.localeObj.getConstant("qtr"):"Qtr")+li.toString()+" "+(i.localeObj?i.localeObj.getConstant("of"):"of")+" "+nt.getFullYear().toString();break;case"Months":k[h=ut===c.groupInterval.length-1?s:s+"_date_group_months"]=at;i.fieldKeys[h]="CSV"===i.dataSourceSettings.type?i.fieldKeys[h]?i.fieldKeys[h]:i.fields.length:h;-1===i.fields.indexOf(h)&&i.fields.push(h);a[i.fieldKeys[h]]=st?void 0:new Date(ni.setMonth(nt.getMonth(),1)).toString();break;case"Days":k[h=ut===c.groupInterval.length-1?s:s+"_date_group_days"]=at;i.fieldKeys[h]="CSV"===i.dataSourceSettings.type?i.fieldKeys[h]?i.fieldKeys[h]:i.fields.length:h;-1===i.fields.indexOf(h)&&i.fields.push(h);a[i.fieldKeys[h]]=st?void 0:new Date(ni.setMonth(nt.getMonth(),nt.getDate())).toString();break;case"Hours":k[h=ut===c.groupInterval.length-1?s:s+"_date_group_hours"]=at;i.fieldKeys[h]="CSV"===i.dataSourceSettings.type?i.fieldKeys[h]?i.fieldKeys[h]:i.fields.length:h;-1===i.fields.indexOf(h)&&i.fields.push(h);a[i.fieldKeys[h]]=st?void 0:new Date(ni.setHours(nt.getHours())).toString();break;case"Minutes":k[h=ut===c.groupInterval.length-1?s:s+"_date_group_minutes"]=at;i.fieldKeys[h]="CSV"===i.dataSourceSettings.type?i.fieldKeys[h]?i.fieldKeys[h]:i.fields.length:h;-1===i.fields.indexOf(h)&&i.fields.push(h);a[i.fieldKeys[h]]=st?void 0:new Date(ni.setMinutes(nt.getMinutes())).toString();break;case"Seconds":k[h=ut===c.groupInterval.length-1?s:s+"_date_group_seconds"]=at;i.fieldKeys[h]="CSV"===i.dataSourceSettings.type?i.fieldKeys[h]?i.fieldKeys[h]:i.fields.length:h;-1===i.fields.indexOf(h)&&i.fields.push(h);a[i.fieldKeys[h]]=st?void 0:new Date(ni.setSeconds(nt.getSeconds())).toString()}}}else if(isNaN(Number(a[i.fieldKeys[s]]))||"Number"!==c.type){if(a[i.fieldKeys[s]]&&"Custom"===c.type&&c.customGroups&&c.customGroups.length>0){var h=s+"_custom_group",ar=c.customGroups,ai=void 0;for(i.groupingFieldsInfo[s]=s,i.groupingFieldsInfo[h]=s,ii=0,vr=ar.length;ii<vr;ii++)kt=ar[ii],kt.items&&kt.items.length>1&&(ci=h,i.fieldKeys[h]="CSV"===i.dataSourceSettings.type?i.fieldKeys[h]?i.fieldKeys[h]:i.fields.length:h,-1===i.fields.indexOf(h)&&i.fields.push(h),yr=-1!==r.inArray(a[i.fieldKeys[s]].toString(),kt.items),a[i.fieldKeys[h]]=yr?kt.groupName&&""!==kt.groupName?kt.groupName:i.localeObj.getConstant("group")+" "+ii:ai&&ai!==a[i.fieldKeys[s]].toString()?ai:a[i.fieldKeys[s]].toString(),ai=a[i.fieldKeys[h]])}}else st=i.getRange(c,Number(a[i.fieldKeys[s]])),a[i.fieldKeys[s]]=st?void 0:a[i.fieldKeys[s]];for(var ri=[],tr=0,pr=bi=Object.keys(a);tr<pr.length;tr++)vi=pr[tr],ri.push(!!a[vi]);u=-1===ri.indexOf(!1)&&bi.length===Object.keys(t[0]).length?a:u}if("Date"===c.type){for(var vt=!1,yi=[i.dataSourceSettings.rows,i.dataSourceSettings.columns,i.dataSourceSettings.values,i.dataSourceSettings.filters],d=Object.keys(k),w=Object.keys(d).length,y=void 0,ir=0,wr=yi;ir<wr.length;ir++)if(p=wr[ir],!vt&&p){for(ft=p.length,ht=0;ht<ft;){if(p[ht].name===s){for(vt=!0,l=p[ht],p.splice(ht,1),gt=(gt=i.dataSourceSettings.rows).concat(i.dataSourceSettings.columns,i.dataSourceSettings.values,i.dataSourceSettings.filters);w--;)ct=l.caption?l.caption:l.name,i.clonedReport&&(pi=i.clonedReport.rows,pi=pi.concat(i.clonedReport.columns,i.clonedReport.values,i.clonedReport.filters),ui=r.getFieldByName(d[w],pi),ui&&(ct=ui.caption?ui.caption:ui.name)),r.getFieldByName(d[w],gt)?i.groupingFieldsInfo[d[w]]=s:(y=k[d[w]],ct=-1!==ct.indexOf(" (")&&-1!==ct.indexOf(")")?ct.slice(ct.indexOf("(")+1,ct.length-1):ct,g={name:d[w],caption:(i.localeObj?i.localeObj.getConstant(y):y)+" ("+ct+")",type:"Count",showNoDataItems:l.showNoDataItems,baseField:l.baseField,baseItem:l.baseItem,showFilterIcon:l.showFilterIcon,showSortIcon:l.showSortIcon,showEditIcon:l.showEditIcon,showRemoveIcon:l.showRemoveIcon,showSubTotals:l.showValueTypeIcon,allowDragAndDrop:l.allowDragAndDrop,expandAll:l.expandAll,groupName:l.groupName},p.splice(ht,0,g),i.groupingFieldsInfo[g.name]=s);break}p[ht].name.indexOf(s)>-1&&(br=k[p[ht].name],lt=p.filter(function(n){return n.name===s})[0],n.isNullOrUndefined(lt)||(kr=lt.caption?-1!==lt.caption.indexOf(" (")&&-1!==lt.caption.indexOf(")")?lt.caption.slice(lt.caption.indexOf("(")+1,lt.caption.length-1):lt.caption:s,p[ht].caption=(i.localeObj?i.localeObj.getConstant(br):lt)+" ("+kr+")"));ht++}if(vt)break}for(w=Object.keys(d).length,fi=(dt=i.getMappingField(s,i.clonedReport?i.clonedReport.fieldMapping:i.dataSourceSettings.fieldMapping)).caption?dt.caption:s;w--;){for(y=k[d[w]],ei=0,dr=i.dataSourceSettings.formatSettings.length;ei<dr;ei++)if(i.dataSourceSettings.formatSettings[ei].name===d[w]){i.dataSourceSettings.formatSettings.splice(ei,1);break}"Quarters"!==y&&"QuarterYear"!==y&&(gr={name:d[w],type:["Years","Months","Days"].indexOf(y)>-1?"date":"time",format:"Years"===y?"yyyy":"Months"===y?"MMM":"Days"===y?"d-MMM":"Hours"===y?"hh a":"Minutes"===y?":mm":"Seconds"===y?":ss":void 0},i.dataSourceSettings.formatSettings.push(gr));vt||(pt=i.getMappingField(d[w],i.dataSourceSettings.fieldMapping),d[w]!==s&&n.isNullOrUndefined(pt.name)?(g={name:d[w],caption:(i.localeObj?i.localeObj.getConstant(y):y)+" ("+fi+")"},i.dataSourceSettings.fieldMapping.push(g),i.groupingFieldsInfo[g.name]=s):d[w]!==s&&(pt.caption=(i.localeObj?i.localeObj.getConstant(y):y)+" ("+fi+")",i.groupingFieldsInfo[pt.name]=s))}vt||(pt=i.getMappingField(s,i.dataSourceSettings.fieldMapping),y=k[s],d[w]!==s&&n.isNullOrUndefined(pt.name)?(g={name:s,caption:(i.localeObj?i.localeObj.getConstant(y):y)+" ("+fi+")"},i.dataSourceSettings.fieldMapping.push(g),i.groupingFieldsInfo[g.name]=s):(pt.caption=(i.localeObj?i.localeObj.getConstant(y):y)+" ("+fi+")",i.groupingFieldsInfo[pt.name]=s))}else if("Number"===c.type&&c.rangeInterval){var wi=void 0,rr=[],uu=[],ur=t.length;for(ft=0,i.groupingFields[s]=s,v=[];ft<ur;)oi=Number(t[ft][s]),uu.push(oi),isNaN(oi)||-1!==rr.indexOf(oi)||rr.push(oi),ft++;for(ur=t.length,ft=0;ft<ur;){if(et=t[ft],et&&!isNaN(Number(et[s]))){wi=("string"==typeof c.endingAt?parseInt(c.endingAt,10):c.endingAt)||Math.max.apply(Math,rr);tt=Number.isInteger(c.rangeInterval)?0:i.countDecimalPlaces(c.rangeInterval);it=void 0;switch(tt){case 10:it=1e-10;break;case 9:it=1e-9;break;case 8:it=1e-8;break;case 7:it=1e-7;break;case 6:it=1e-6;break;case 5:it=1e-5;break;case 4:it=.0001;break;case 3:it=.001;break;case 2:it=.01;break;case 1:it=.1;break;default:it=1}if(wt=Number.isInteger(c.rangeInterval)?Math.floor(Number(et[s])):Number(et[s].toFixed(tt)),nu=Number.isInteger(c.rangeInterval)?Math.floor(Number(wt+(c.rangeInterval-1))):Number((wt+c.rangeInterval).toFixed(tt)),wt>=v[0]&&wt<=v[v.length-1])rt=v[0],ot=Number.isInteger(c.rangeInterval)?Math.floor(v[v.length-1]):Number(v[v.length-1].toFixed(tt)),i.processGrouping(et,s,rt,ot,wi,c.rangeInterval,tt),n.isNullOrUndefined(i.groupedDataType[s])&&(i.groupedDataType[s]="string");else if(0===v.length){for(si=wt;si<=nu;si=Number((si+it).toFixed(tt)))v.push(si);rt=v[0];ot=Number.isInteger(c.rangeInterval)?Math.floor(v[v.length-1]):Number(v[v.length-1].toFixed(tt));i.processGrouping(et,s,rt,ot,wi,c.rangeInterval,tt);n.isNullOrUndefined(i.groupedDataType[s])&&(i.groupedDataType[s]="string")}else for(rt=Number.isInteger(c.rangeInterval)?Math.floor(v[v.length-1])+1:Number(v[v.length-1].toFixed(tt)),ot=Number.isInteger(c.rangeInterval)?Math.floor(rt+(c.rangeInterval-1)):Number((rt+c.rangeInterval).toFixed(tt)),fr=!0,v.splice(0,v.length);fr;)wt>=rt&&wt<=ot&&(i.processGrouping(et,s,rt,ot,wi,c.rangeInterval,tt),n.isNullOrUndefined(i.groupedDataType[s])&&(i.groupedDataType[s]="string"),v.push(rt),v.push(ot),fr=!1),rt=Number.isInteger(c.rangeInterval)?ot+1:ot,ot=Number.isInteger(c.rangeInterval)?Math.floor(rt+(c.rangeInterval-1)):Number((rt+c.rangeInterval).toFixed(tt));for(ri=[],ki=0,er=bi=Object.keys(et);ki<er.length;ki++)vi=er[ki],ri.push(!!et[vi]);u=-1===ri.indexOf(!1)&&bi.length===Object.keys(t[0]).length?et:u}ft++}for(di=0,or=yi=[i.dataSourceSettings.rows,i.dataSourceSettings.columns,i.dataSourceSettings.values,i.dataSourceSettings.filters];di<or.length;di++)tu=or[di],(dt=r.getFieldByName(s,tu))&&((dt=dt.properties?dt.properties:dt).type="Count");for(hi=0,iu=i.dataSourceSettings.formatSettings.length;hi<iu;hi++)if(i.dataSourceSettings.formatSettings[hi].name===s){i.dataSourceSettings.formatSettings.splice(hi,1);break}}else if("Custom"===c.type&&ci){ti=ci;vt=!1;yi=[i.dataSourceSettings.rows,i.dataSourceSettings.columns,i.dataSourceSettings.values,i.dataSourceSettings.filters];gt=(gt=i.dataSourceSettings.rows).concat(i.dataSourceSettings.columns,i.dataSourceSettings.values,i.dataSourceSettings.filters);sr=[];yt&&""!==yt||(sr=ti.match(/_custom_group/g));for(var hr=r.getFieldByName(s.replace(/_custom_group/g,""),gt),b=r.getFieldByName(ti,gt),cr=0,ru=yi;cr<ru.length;cr++)if(p=ru[cr],!vt&&p){for(ft=p.length,bt=0;bt<ft;){if(p[bt].name===c.name&&!b){vt=!0;l=p[bt];g={name:ti,caption:yt&&""!==yt?yt:(hr.caption?hr.caption:hr.name)+(sr.length+1),type:"Count",showNoDataItems:l.showNoDataItems,baseField:l.baseField,baseItem:l.baseItem,showSubTotals:l.showValueTypeIcon,allowDragAndDrop:l.allowDragAndDrop,showFilterIcon:l.showFilterIcon,showSortIcon:l.showSortIcon,showRemoveIcon:l.showRemoveIcon,showEditIcon:l.showEditIcon,expandAll:l.expandAll,groupName:l.groupName};p.splice(bt,0,g);i.groupingFieldsInfo[g.name]=s;i.groupingFieldsInfo[s]=s;break}if(p[bt].name===ti&&b){g={name:b.name,caption:yt&&""!==yt?yt:b.caption,type:b.type,showNoDataItems:b.showNoDataItems,baseField:b.baseField,baseItem:b.baseItem,showRemoveIcon:b.showRemoveIcon,showSubTotals:b.showValueTypeIcon,allowDragAndDrop:b.allowDragAndDrop,showFilterIcon:b.showFilterIcon,showSortIcon:b.showSortIcon,showEditIcon:b.showEditIcon,expandAll:b.expandAll,groupName:b.groupName};p.splice(bt,1,g);i.groupingFieldsInfo[g.name]=s;i.groupingFieldsInfo[s]=s;break}bt++}if(vt)break}gi=r.getFieldByName(s,r.cloneFormatSettings(i.dataSourceSettings.formatSettings));gi&&(gi.name=ti,i.dataSourceSettings.formatSettings.push(gi));i.groupingFields[s]=s}i.groupingFields=n.extend(i.groupingFields,k)},i=this,e=0,s=this.dataSourceSettings.groupSettings;e<s.length;e++)if(o=h(e,s),"object"==typeof o)return o.value;return u},t.prototype.countDecimalPlaces=function(n){var t=n.toString();return t.includes(".")?t.split(".")[1].length:0},t.prototype.processGrouping=function(n,t,i,r,u,f,e){Number.isInteger(n[t])||!Number.isInteger(n[t])&&(Number(n[t])<r||u<=Number(n[t]))?n[t]=this.getNumberGroupHeaders(i,r,u):!Number.isInteger(n[t])&&Number(n[t])>=r&&(n[t]=this.getNumberGroupHeaders(Number((i+f).toFixed(e)),Number((r+f).toFixed(e)),u))},t.prototype.getNumberGroupHeaders=function(n,t,i){return n===t?n.toString():i>=n&&i<=t?i===n?n.toString():n.toString()+"-"+i.toString():n.toString()+"-"+t.toString()},t.prototype.getRange=function(n,t){var i,r,u;if("Date"===n.type){var f=new Date(t),e="string"==typeof n.startingAt?new Date(n.startingAt):n.startingAt,o="string"==typeof n.endingAt?new Date(n.endingAt):n.endingAt;i=!!(e&&f.getTime()<e.getTime()||o&&f.getTime()>o.getTime())}else r="string"==typeof n.startingAt?parseFloat(n.startingAt):n.startingAt,u="string"==typeof n.endingAt?parseFloat(n.endingAt):n.endingAt,i=!isNaN(r)&&t<r||!isNaN(u)&&t>u;return i},t.prototype.getPercentFormat=function(t,i){var r=n.isNullOrUndefined(t[i])||n.isNullOrUndefined(this.formatFields[i].format)?void 0:this.formatFields[i].format.toLowerCase().match(/p[0-9]/);return n.isNullOrUndefined(r)?2:Number(this.formatFields[i].format.replace(/[^0-9]/g,""))},t.prototype.getFormattedFields=function(n){this.formatFields=this.setFormattedFields(n.formatSettings)},t.prototype.setFormattedFields=function(n){for(var t=n.length,i={};t--;)i[n[t].name]=n[t],n[t].type&&(this.dateFormatFunction[n[t].name]={exactFormat:this.globalize.getDateFormat(n[t]),fullFormat:this.globalize.getDateFormat({format:"yyyy/MM/dd/HH/mm/ss",type:n[t].type})});return i},t.prototype.getFieldList=function(t,i,u){for(var o,v,l,a,h,y,e,f,w,s,p=this,c=this.dataSourceSettings.excludeFields.length-1;c>-1;)v=this.fields.indexOf(this.dataSourceSettings.excludeFields[c]),-1!==v&&this.fields.splice(v,1),this.fieldList&&delete this.fieldList[this.dataSourceSettings.excludeFields[c]],c--;if(l=this.fields,a=n.extend([],this.dataSourceSettings.rows,null,!0),a=a.concat(this.dataSourceSettings.columns,this.dataSourceSettings.values,this.dataSourceSettings.filters),this.getFormattedFields(this.dataSourceSettings),this.getCalculatedField(l),h=(l=this.fields).length,y=["string","number","datetime","date","boolean"],this.savedFieldList)for(this.fieldList=this.savedFieldList;h--;)e=l[h],f=this.getMappingField(e,this.dataSourceSettings.fieldMapping),this.fieldList[e]?(this.fieldList[e].isSelected=!1,this.fieldList[e].index=h,this.fieldList[e].filter=[],this.fieldList[e].sort=i?"Ascending":"None",this.fieldList[e].isExcelFilter=!1,this.fieldList[e].filterType="",this.fieldList[e].showFilterIcon=!f||!("showFilterIcon"in f)||f.showFilterIcon,this.fieldList[e].showRemoveIcon=!f||!("showRemoveIcon"in f)||f.showRemoveIcon,this.fieldList[e].showSortIcon=!f||!("showSortIcon"in f)||f.showSortIcon,this.fieldList[e].showEditIcon=!f||!("showEditIcon"in f)||f.showEditIcon,this.fieldList[e].showValueTypeIcon=!f||!("showValueTypeIcon"in f)||f.showValueTypeIcon,this.fieldList[e].allowDragAndDrop=!f||!("allowDragAndDrop"in f)||f.allowDragAndDrop,this.fieldList[e].isCalculatedField=!(!f||!("isCalculatedField"in f))&&f.isCalculatedField,this.fieldList[e].showNoDataItems=!(!f||!("showNoDataItems"in f))&&f.showNoDataItems,this.fieldList[e].showSubTotals=!f||!("showSubTotals"in f)||f.showSubTotals,this.fieldList[e].expandAll=!(!f||!("expandAll"in f))&&f.expandAll,this.fieldList[e].pid=f&&"groupName"in f&&f.groupName?f.groupName:this.groupingFieldsInfo[e]?this.groupingFieldsInfo[e]:void 0,this.isValueFiltersAvail&&u&&(this.fieldList[e].dateMember=[],this.fieldList[e].members={},this.fieldList[e].isMembersFilled=!1),this.updateMembersOrder(e)):(o=n.isNullOrUndefined(this.groupedDataType[e])?f&&"dataType"in f&&f.dataType&&y.indexOf(f.dataType.toLowerCase())>-1?f.dataType.toLowerCase():o:this.groupedDataType[e],this.fieldList[e]={caption:f&&"caption"in f&&f.caption?f.caption:e,id:e,type:-1!==e.indexOf("_custom_group")||-1!==e.indexOf("_date_group")?"string":void 0===o||"undefined"===o?"number":o,isSelected:!1,sort:i?"Ascending":"None",filterType:"",index:h,filter:[],isCustomField:-1!==e.indexOf("_custom_group")||-1!==e.indexOf("_date_group"),showRemoveIcon:!f||!("showRemoveIcon"in f)||f.showRemoveIcon,showFilterIcon:!f||!("showFilterIcon"in f)||f.showFilterIcon,showSortIcon:!f||!("showSortIcon"in f)||f.showSortIcon,showNoDataItems:!(!f||!("showNoDataItems"in f))&&f.showNoDataItems,isCalculatedField:!(!f||!("isCalculatedField"in f))&&f.isCalculatedField,showEditIcon:!f||!("showEditIcon"in f)||f.showEditIcon,showValueTypeIcon:!f||!("showValueTypeIcon"in f)||f.showValueTypeIcon,allowDragAndDrop:!f||!("allowDragAndDrop"in f)||f.allowDragAndDrop,showSubTotals:!f||!("showSubTotals"in f)||f.showSubTotals,expandAll:!(!f||!("expandAll"in f))&&f.expandAll,pid:f&&"groupName"in f&&f.groupName?f.groupName:this.groupingFieldsInfo[e]?this.groupingFieldsInfo[e]:void 0,aggregateType:f&&"type"in f?this.getFieldType(f):"number"===(-1!==e.indexOf("_custom_group")||-1!==e.indexOf("_date_group")?"string":void 0===o||"undefined"===o?"number":o)?"Sum":"Count",baseField:f&&"baseField"in f?f.baseField:void 0,baseItem:f&&"baseItem"in f?f.baseItem:void 0},this.updateMembersOrder(e));else for(this.fieldList={},w=function(){var f=l[h],u=s.getMappingField(f,s.dataSourceSettings.fieldMapping);void 0!==(o=n.isNullOrUndefined(s.groupedDataType[f])?u&&"dataType"in u&&u.dataType&&y.indexOf(u.dataType.toLowerCase())>-1?u.dataType.toLowerCase():r.getType(t[s.fieldKeys[f]]):s.groupedDataType[f])&&"undefined"!==o||(s.dataSourceSettings.groupSettings.length>0?s.dataSourceSettings.groupSettings.forEach(function(n){o=p.fieldKeys[f]===n.name&&"number"===n.type.toLocaleLowerCase()?"string":"number"}):o="number");s.fieldList[f]={id:f,pid:u&&"groupName"in u&&u.groupName?u.groupName:s.groupingFieldsInfo[f]?s.groupingFieldsInfo[f]:void 0,caption:u&&"caption"in u&&u.caption?u.caption:f,type:-1!==f.indexOf("_custom_group")||-1!==f.indexOf("_date_group")?"string":o,filterType:"",index:h,filter:[],sort:i?"Ascending":"None",isSelected:!1,isCustomField:-1!==f.indexOf("_custom_group")||-1!==f.indexOf("_date_group"),showFilterIcon:!u||!("showFilterIcon"in u)||u.showFilterIcon,showRemoveIcon:!u||!("showRemoveIcon"in u)||u.showRemoveIcon,showSortIcon:!u||!("showSortIcon"in u)||u.showSortIcon,showEditIcon:!u||!("showEditIcon"in u)||u.showEditIcon,showValueTypeIcon:!u||!("showValueTypeIcon"in u)||u.showValueTypeIcon,allowDragAndDrop:!u||!("allowDragAndDrop"in u)||u.allowDragAndDrop,showSubTotals:!u||!("showSubTotals"in u)||u.showSubTotals,showNoDataItems:!(!u||!("showNoDataItems"in u))&&u.showNoDataItems,isCalculatedField:!(!u||!("isCalculatedField"in u))&&u.isCalculatedField,expandAll:!(!u||!("expandAll"in u))&&u.expandAll,aggregateType:u&&"type"in u?s.getFieldType(u):"number"===(-1!==f.indexOf("_custom_group")||-1!==f.indexOf("_date_group")?"string":void 0===o||"undefined"===o?"number":o)?"Sum":"Count",baseField:u&&"baseField"in u?u.baseField:void 0,baseItem:u&&"baseItem"in u?u.baseItem:void 0};s.updateMembersOrder(f)},s=this;h--;)w();this.groupedDataType={};this.updateTreeViewData(a)},t.prototype.getFieldType=function(t){return n.isNullOrUndefined(t.dataType)||"number"===t.dataType||"DistinctCount"===t.type||"Count"===t.type||(t.type="Count"),t.type},t.prototype.updateMembersOrder=function(n){for(var i,t=0,r=this.dataSourceSettings.sortSettings;t<r.length;t++)if(i=r[t],n===i.name&&i.membersOrder){this.fieldList[n].membersOrder=i.membersOrder;break}},t.prototype.getMappingField=function(n,t){var r={},i,u;if(t&&t.length>0)for(i=0,u=t.length;i<u;i++)if(t[i].name===n){r=t[i];break}return r},t.prototype.updateFieldList=function(n){for(var t=this.fields,i=t.length;i--;)this.fieldList[t[i]].isExcelFilter=n[t[i]].isExcelFilter},t.prototype.updateTreeViewData=function(t){for(var r,e,o,f=this,i=t.length,u=this.dataSourceSettings.calculatedFieldSettings.length;i--;)this.fieldList[t[i].name]&&(r=this.fieldList[t[i].name],r.type=t[i].dataType?t[i].dataType.toLowerCase():r.type,r.caption=t[i].caption?t[i].caption:t[i].name,r.isSelected=!0,r.showNoDataItems=t[i].showNoDataItems,r.aggregateType=this.getFieldType(t[i]),r.baseField=t[i].baseField,r.baseItem=t[i].baseItem,r.allowDragAndDrop=t[i].allowDragAndDrop,r.showFilterIcon=t[i].showFilterIcon,r.showSortIcon=t[i].showSortIcon,r.showRemoveIcon=t[i].showRemoveIcon,r.showValueTypeIcon=t[i].showValueTypeIcon,r.showEditIcon=t[i].showEditIcon,r.showSubTotals=t[i].showSubTotals,r.expandAll=t[i].expandAll);for(;u--;)this.fieldList[this.dataSourceSettings.calculatedFieldSettings[u].name]&&(this.fieldList[this.dataSourceSettings.calculatedFieldSettings[u].name].aggregateType="CalculatedField",this.fieldList[this.dataSourceSettings.calculatedFieldSettings[u].name].isCalculatedField=!0,this.fieldList[this.dataSourceSettings.calculatedFieldSettings[u].name].formula=this.dataSourceSettings.calculatedFieldSettings[u].formula);e=this.dataSourceSettings.groupSettings.filter(function(n){return!t.some(function(t){return n.name===t.name})});o=["_date_group_years","_date_group_quarters","_date_group_quarterYear","_date_group_months","_date_group_days","_date_group_hours","_date_group_minutes","_date_group_seconds"];e.forEach(function(t){var i=t.name,r=t.type.toLowerCase();Object.keys(f.fieldList).forEach(function(u){"date"!==r||n.isNullOrUndefined(t.caption)||!o.some(function(n){return u===""+i+n})&&u!==i?("custom"!==r||n.isNullOrUndefined(t.caption)||u!==i+"_custom_group")&&("number"!==r||n.isNullOrUndefined(t.caption)||u!==i)||(f.fieldList[u].caption=t.caption):f.fieldList[u].caption=f.fieldList[u].caption.replace(t.name,t.caption)})})},t.prototype.getCalculatedField=function(t){for(var r,u=0,f=this.dataSourceSettings.calculatedFieldSettings;u<f.length;u++)r=f[u],this.calculatedFields[r.name]=n.extend({},r,null,!0),this.calculatedFields[r.name].actualFormula=r.formula;for(var o=Object.keys(this.calculatedFields),s=function(n){var r=i.calculatedFields[o[n]],f=r.properties,a=(f?f.formula:r.formula).trim(),s=a.replace(/"/g,""),l;r.formula=s.indexOf("^")>-1?i.powerFunction(s):s;-1===r.formula.indexOf("Math.min(")&&r.formula.indexOf("min(")>-1&&(r.formula=r.formula.replace(/min\(/g,"Math.min("));-1===r.formula.indexOf("Math.max(")&&r.formula.indexOf("max(")>-1&&(r.formula=r.formula.replace(/max\(/g,"Math.max("));-1===r.formula.indexOf("Math.abs(")&&r.formula.indexOf("abs(")>-1&&(r.formula=r.formula.replace(/abs\(/g,"Math.abs("));r.name=f?f.name:r.name;"CSV"===i.dataSourceSettings.type?-1===t.indexOf(r.name)&&t.push(r.name):(t=t.filter(function(n){return n!==r.name})).push(r.name);for(var v=a.split('"'),h=0,p=v.length;h<p;h++){var e=v[h].trim(),u=e.split(/[ .:;?!~,`"&|()<>{}[\]\r\n/\\]+/),y=e.match(/^([^()]+)\((.*)\)$/),c="DistinctCount"===u[0]?"DistinctCount":"PopulationStDev"===u[0]?"PopulationStDev":"SampleStDev"===u[0]?"SampleStDev":"PopulationVar"===u[0]?"PopulationVar":"SampleVar"===u[0]?"SampleVar":u[0];-1!==["Sum","Count","Min","Max","Avg","Product","DistinctCount","PopulationStDev","SampleStDev","PopulationVar","SampleVar","Median"].indexOf(c)&&(l=-1===t.indexOf(u[1])&&y[2]?t.indexOf(y[2]):t.indexOf(u[1]),i.calculatedFormulas[r.name]?i.calculatedFormulas[r.name].push({index:l,type:c,formula:e}):i.calculatedFormulas[r.name]=[{index:l,type:c,formula:e}])}},i=this,e=0,h=o.length;e<h;e++)s(e);this.fields=t},t.prototype.validateFilters=function(t){var e,i,r,u,h;for(this.isValueFiltersAvail=!1,e=t.filterSettings?t.filterSettings:[],i=n.extend([],this.dataSourceSettings.rows,null,!0),i=i.concat(this.dataSourceSettings.columns),r=0,u=e;r<u.length;r++){for(var o=u[r],f=0,s=i;f<s.length;f++)if(h=s[f],o.name===h.name&&"Value"===o.type){this.isValueFiltersAvail=!0;break}if(this.isValueFiltersAvail)break}},t.prototype.validateValueFields=function(){var n,t,i;for(this.isValueHasAdvancedAggregate=!1,n=0,t=this.dataSourceSettings.values;n<t.length;n++)if(i=t[n],-1!==["DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentRowTotal","PercentageOfParentColumnTotal","PercentageOfParentTotal","RunningTotals"].indexOf(i.type)){this.isValueHasAdvancedAggregate=!0;break}},t.prototype.fetchFieldMembers=function(n){var t=this.fieldList[n].index;this.generateMembers(t,new Set)},t.prototype.generateMembers=function(t,i){var w=this.data.length,b=this.fields,e=this.fieldList,f=b[t],s,l,h,u,c,y,p;if(e[f].members&&!this.allowDataCompression||(e[f].members={},this.allowDataCompression&&(e[f].isMembersFilled=!1)),e[f].dateMember&&!this.allowDataCompression||(e[f].dateMember=[]),s=e[f].members,l=e[f].dateMember,(e[f].isSelected||i.has(t))&&!e[f].isMembersFilled){for(var k=Object.keys(s).length>0,a=0,d=e[f].expandAll,v=r.isDateField(f,this),o=0;o<w;o++)h=this.data[o][this.fieldKeys[f]],u=h,(u=this.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(u):u,k)||(c=v?this.getFormattedValue(u,f):{formattedText:null===u?this.localeObj?this.localeObj.getConstant("null"):String(u):void 0===u?this.localeObj?f in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(u):u.toString(),actualText:null===u?this.localeObj?this.localeObj.getConstant("null"):String(u):void 0===u?this.localeObj?f in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(u):u},Object.prototype.hasOwnProperty.call(s,u)?s[u].index.push(o):(a++,s[u]={index:[o],ordinal:a,isDrilled:this.isExpandAll||d,caption:c.formattedText},l.push({formattedText:c.formattedText,actualText:v?c.dateText:c.actualText}))),y=n.isNullOrUndefined(h)?h:"number"===e[f].type?isNaN(Number(h))?void 0:Number(h):1,p={ordinal:s[u].ordinal,member:y},this.valueMatrix[o]||(this.valueMatrix[o]=[]),this.valueMatrix[o][t]=p;e[f].isMembersFilled=!0}},t.prototype.fillFieldMembers=function(){var o=this.fields,f=this.fieldList,s=o.length,r,n,u,t,e,i;if(this.data.length-this.valueMatrix.length<0&&(this.valueMatrix=this.valueMatrix.slice(0,this.data.length)),r=new Set,this.calculatedFormulas&&Object.keys(this.calculatedFormulas).length>0)for(n in this.calculatedFormulas)if(f[n]&&f[n].isSelected)for(u=this.calculatedFormulas[n],t=0;t<u.length;t++)e=u[t],r.add(e.index);for(i=0;i<s;i++)this.generateMembers(i,r)},t.prototype.generateValueMatrix=function(){for(var i,u,f,t,e=this.fields,r=this.data.length,o=e.length,s=this.fieldList;r--;)for(i=o;i--;)u=e[i],f=s[u],f.isMembersFilled&&(t=this.data[r][this.fieldKeys[u]],this.valueMatrix[r][i].member=n.isNullOrUndefined(t)?t:"number"===f.type?isNaN(Number(t))?void 0:Number(t):1)},t.prototype.updateSortSettings=function(n,t){for(var i=0,r=n?n.length:0;i<r&&t;i++)this.fieldList[n[i].name]&&(this.fieldList[n[i].name].sort=n[i].order)},t.prototype.updateFilterMembers=function(n){var u=this.filterMembers,i={},f=this.getFilters(n,i),e=this.valueMatrix.length,r,t;if(f)for(r=i.include.index,t=0;t<r.length;t++)void 0!==i.exclude&&void 0!==i.exclude.indexObject[r[t]]||u.push(r[t]);else for(t=0;t<e;t++)void 0!==i.exclude&&void 0!==i.exclude.indexObject[t]||u.push(t)},t.prototype.getFilters=function(n,t){for(var i,u=n.filterSettings?n.filterSettings:[],f=!1,e=[],r=0,o=u.length;r<o;r++)i=u[r].properties?u[r].properties:u[r],this.fieldList[i.name]&&this.fieldList[i.name].isSelected&&this.isValidFilterField(i,n.allowMemberFilter,n.allowLabelFilter)&&(this.applyLabelFilter(i),i&&(e=i.items),i.type&&"Include"===i.type?(this.frameFilterList(e,i.name,t,"include",i.showLabelFilter,f),f=!0):this.frameFilterList(e,i.name,t,"exclude",i.showLabelFilter),i.showLabelFilter&&(i.items=[],i.type=i.showDateFilter?"Date":i.showNumberFilter?"Number":"Label"));return f},t.prototype.isValidFilterField=function(t,i,r){var o=t.name,u=!1,s=n.extend([],this.dataSourceSettings.rows,null,!0),f,h,e,c;if(s=s.concat(this.dataSourceSettings.columns),this.fieldList[o].isSelected&&i&&["Include","Exclude"].indexOf(t.type)>=0){for(u=!0,f=0,h=this.dataSourceSettings.values;f<h.length;f++)if(o===h[f].name){u=!1;break}}else if(r)for(e=0,c=s;e<c.length;e++)if(o===c[e].name&&["Label","Date","Number"].indexOf(t.type)>=0){u=!0;break}return u},t.prototype.applyLabelFilter=function(n){var t,u,f,i,r;if(["Label","Date","Number"].indexOf(n.type)>=0){if(t=Object.keys(this.fieldList[n.name].members),n.showLabelFilter=!0,"Label"===n.type)n.items=this.getLabelFilterMembers(t,n.condition,n.value1,n.value2);else if("Date"===n.type)n.showDateFilter=!0,u="string"==typeof n.value1?new Date(n.value1):n.value1,f="string"==typeof n.value2?new Date(n.value2):n.value2,n.items=this.getDateFilterMembers(t,n.name,n.condition,u,f);else for(n.showNumberFilter=!0,n.items=[],i=0,r=t;i<r.length;i++){var e=r[i],o=this.getParsedValue(n.name,n.value1),s=this.getParsedValue(n.name,n.value2),h=this.getParsedValue(n.name,e);this.validateFilterValue(h,n.condition,o,s)&&n.items.push(e)}n.type=n.condition?["DoesNotBeginWith","DoesNotContains","DoesNotEndsWith","DoesNotEquals","NotBetween"].indexOf(n.condition)>-1&&!n.showNumberFilter?"Exclude":"Include":"Exclude"}else n.showLabelFilter=!1},t.prototype.getLabelFilterMembers=function(n,t,i,r){for(var u,f,e=[],o=0,s=n;o<s.length;o++)if(u=s[o],f=u.toLowerCase(),i.toString())switch(t){case"Equals":case"DoesNotEquals":default:f===i.toLowerCase()&&e.push(u);break;case"BeginWith":case"DoesNotBeginWith":0===f.indexOf(i.toLowerCase())&&e.push(u);break;case"EndsWith":case"DoesNotEndsWith":null!==f.match(i.toLowerCase()+"$")&&e.push(u);break;case"Contains":case"DoesNotContains":f.indexOf(i.toLowerCase())>-1&&e.push(u);break;case"GreaterThan":f>i.toLowerCase()&&e.push(u);break;case"GreaterThanOrEqualTo":f>=i.toLowerCase()&&e.push(u);break;case"LessThan":f<i.toLowerCase()&&e.push(u);break;case"LessThanOrEqualTo":f<=i.toLowerCase()&&e.push(u);break;case"Between":case"NotBetween":f>=i.toLowerCase()&&f<=r.toLowerCase()&&e.push(u)}return e},t.prototype.getDateFilterMembers=function(n,t,i,r,u){for(var f,e,o=[],s=0,h=n;s<h.length;s++)if(f=h[s],e=new Date(f),r)switch(i){case"Equals":case"DoesNotEquals":default:this.getFormattedValue(e.toString(),t).formattedText===this.getFormattedValue(r.toString(),t).formattedText&&o.push(this.getFormattedValue(f,t).formattedText);break;case"After":e.getTime()>r.getTime()&&o.push(this.getFormattedValue(f,t).formattedText);break;case"AfterOrEqualTo":e.getTime()>=r.getTime()&&o.push(this.getFormattedValue(f,t).formattedText);break;case"Before":e.getTime()<r.getTime()&&o.push(this.getFormattedValue(f,t).formattedText);break;case"BeforeOrEqualTo":e.getTime()<=r.getTime()&&o.push(this.getFormattedValue(f,t).formattedText);break;case"Between":case"NotBetween":e.getTime()>=r.getTime()&&e.getTime()<=u.getTime()&&o.push(this.getFormattedValue(f,t).formattedText)}return o},t.prototype.validateFilterValue=function(n,t,i,r){var u=!1;if("number"==typeof i)switch(t){case"Equals":n===i&&(u=!0);break;case"DoesNotEquals":default:n!==i&&(u=!0);break;case"GreaterThan":n>i&&(u=!0);break;case"GreaterThanOrEqualTo":n>=i&&(u=!0);break;case"LessThan":n<i&&(u=!0);break;case"LessThanOrEqualTo":n<=i&&(u=!0);break;case"Between":n>=i&&n<=r&&(u=!0);break;case"NotBetween":n>=i&&n<=r||(u=!0)}return u},t.prototype.frameFilterList=function(n,t,i,r,u,f){i[r]||(i[r]={indexObject:{},index:[]});this.updateFilter(n,t,i,r,u,f)},t.prototype.updateFilter=function(t,i,u,f,e,o){var c=0,v=this.fieldList[i],h,s,l,a;v.filter=t;v.filterType=f;v.isExcelFilter=e;var b=i in this.groupingFields,y=r.getFormattedMembers(v.members,i,this,e,b),k=o,p={},w={};for(p[f]={indexObject:{},index:[]},this.fieldFilterMem[i]={memberObj:{}};!n.isNullOrUndefined(t[c]);){if(y[t[c]])if(h=y[t[c]].index,"include"===f)for(s=0,l=h.length;s<l;s++)k&&void 0===u[f].indexObject[h[s]]||(p[f].indexObject[h[s]]=h[s],p[f].index.push(h[s]));else{for(s=0,l=h.length;s<l;s++)void 0===u[f].indexObject[h[s]]&&(u[f].indexObject[h[s]]=h[s],u[f].index.push(h[s]));this.fieldFilterMem[i].memberObj[t[c]]=t[c]}c++}if("include"===f){for(u[f]=p[f],s=0;s<t.length;s++)y[t[s]]&&(w[t[s]]=t[s]);for(a=Object.keys(y),s=0,l=a.length;s<l;s++)void 0===w[a[s]]&&(this.fieldFilterMem[i].memberObj[a[s]]=a[s])}},t.prototype.applyValueFiltering=function(t,i,r,u,f,e,o){this.isValueFiltered=!1;var s=n.extend({},"row"===o&&this.rowGrandTotal?this.rowGrandTotal:"column"===o&&this.columnGrandTotal?this.columnGrandTotal:"Top"!==this.dataSourceSettings.grandTotalsPosition?r[r.length-1]:r[0],null,!0);return this.getFilteredData(r,u,f,e,i,t.name,s,o),this.isValueFiltered&&(("row"===o&&null===this.rowGrandTotal||"column"===o&&null===this.columnGrandTotal)&&e.push(s),r=e),r},t.prototype.getFilteredData=function(t,i,r,u,f,e,o,s){for(var v,w,b,k,y=t.length,h=0;h<y;h++)if(r[e])if(t[h].level===f){this.isValueFiltered=!0;this.fieldList[e].isExcelFilter=!0;var l=0,c=r[e].measure,p=this.fieldList[c].index,a=this.fieldList[c].aggregateType;this.rawIndexObject={};l="row"===s?this.getAggregateValue(t[h].index,i.indexObject,p,a,!1):this.getAggregateValue(i.index,t[h].indexObject,p,a,!1);v={fieldName:c,row:t[h],column:i,value:l,cellSets:this.getValueCellInfo?this.getCellSet(this.rawIndexObject):[],rowCellType:t[h].hasChild&&t[h].isDrilled?"subTotal":"grand sum"===t[h].type?"grandTotal":"value",columnCellType:i.hasChild&&i.isDrilled?"subTotal":"grand sum"===i.type?"grandTotal":"value",aggregateType:a,skipFormatting:!1};this.getValueCellInfo&&this.getValueCellInfo(v);l=v.value;this.rawIndexObject={};w=this.getParsedValue(c,r[e].value1);b=this.getParsedValue(c,r[e].value2);this.validateFilterValue(l,r[e].condition,w,b)||"grand sum"===t[h].type?"grand sum"!==t[h].type&&(u.push(n.extend({},t[h],null,!0)),u[u.length-1].isLevelFiltered=!0):(k=this.removefilteredData(t[h],this.valueFilteredData)||t[h],this.validateFilteredParentData(k,this.valueFilteredData,o,0,f,s))}else t[h].hasChild&&t[h].members.length>0&&"grand sum"!==t[h].type&&(u.push(n.extend({},t[h],null,!0)),u[u.length-1].members=[],u[u.length-1].isLevelFiltered=!0,this.getFilteredData(t[h].members,i,r,u[u.length-1].members,f,e,o,s))},t.prototype.getParsedValue=function(t,i){var u=i?i.toString():"",r;return this.formatFields[t]&&i?(r=n.extend({},this.formatFields[t],null,!0),delete r.name,this.globalize.parseNumber(u,r)):this.globalize.parseNumber(u,{format:"N"})},t.prototype.removefilteredData=function(t,i){for(var f,u=n.extend([],i,null,!0),r=0;r<u.length;r++){if(t.isLevelFiltered&&t.axis===u[r].axis&&t.valueSort.levelName===u[r].valueSort.levelName&&t.actualText===u[r].actualText&&t.axis===u[r].axis&&t.level===u[r].level&&t.ordinal===u[r].ordinal){f=u[r];i.splice(r,1);break}i[r].hasChild&&i[r].members.length>0&&this.removefilteredData(t,i[r].members)}return f},t.prototype.validateFilteredParentData=function(n,t,i,r,u,f){var h,v,e,c,y,o,l,w,a,b;if(t.length>0){for(h=0,v=t;h<v.length;h++)if(e=v[h],e.level===r){if("row"===f)for(c=0,y=s=n.index;c<y.length;c++)o=y[c],i.index.indexOf(o)>=0&&i.index.splice(i.index.indexOf(o),1),n.valueSort.levelName.toString().indexOf(e.valueSort.levelName.toString())>=0&&e.level!==u&&e.index.indexOf(o)>=0&&e.index.splice(e.index.indexOf(o),1);else for(var s=n.indexObject,p=0,k=Object.keys(s);p<k.length;p++)o=k[p],Object.prototype.hasOwnProperty.call(s,o)&&(delete i.indexObject[o],n.valueSort.levelName.toString().indexOf(e.valueSort.levelName.toString())>=0&&e.level!==u&&delete e.indexObject[o]);e&&e.members.length>0&&e.members[0].level===r+1&&e.members[0].level!==u&&this.validateFilteredParentData(n,e.members,i,r+1,u,f)}}else if("row"===f)for(l=0,w=s=n.index;l<w.length;l++)o=w[l],i.index.indexOf(o)>=0&&i.index.splice(i.index.indexOf(o),1);else for(s=n.indexObject,a=0,b=Object.keys(s);a<b.length;a++)o=b[a],Object.prototype.hasOwnProperty.call(s,o)&&delete i.indexObject[o]},t.prototype.updateFramedHeaders=function(t,i,r,u,f){for(var e,o=0,s=t;o<s.length;o++)e=s[o],this.isHeaderAvail=!1,(this.validateFilteredHeaders(e,r,f)||"grand sum"===e.type)&&("row"===f?this.rowCount+=this.rowValuesLength:this.columnCount+=this.customProperties.isTabularLayout?this.rowMaxLevel+this.colValuesLength:this.colValuesLength,u.push(n.extend({},e,null,!0)),u[u.length-1].members=[],e.hasChild&&e.isDrilled&&e.members.length>0&&this.updateFramedHeaders(e.members,i,r,u[u.length-1].members,f));return this.filterFramedHeaders},t.prototype.validateFilteredHeaders=function(n,t,i){for(var r,u=0,f=t;u<f.length;u++)if(r=f[u],!this.isHeaderAvail){if(n.actualText===r.actualText&&n.level===r.level&&n.valueSort.levelName===r.valueSort.levelName)return"row"===i?r.index.length>0?(this.isHeaderAvail=!0,n.index=r.index,!0):(this.isHeaderAvail=!1,n.index=r.index,!1):Object.keys(r.indexObject).length>0?(this.isHeaderAvail=!0,n.indexObject=r.indexObject,!0):(this.isHeaderAvail=!1,n.indexObject=r.indexObject,!1);r.hasChild&&r.members.length>0&&"grand sum"!==r.type&&this.validateFilteredHeaders(n,r.members,i)}return this.isHeaderAvail},t.prototype.isEmptyDataAvail=function(n,t){this.isEmptyData=!1;n.length>0&&"grand sum"===n[n.length-1].type&&0===n[n.length-1].index.length&&(this.isEmptyData=!0);t.length>0&&"grand sum"===t[t.length-1].type&&0===Object.keys(t[t.length-1].indexObject).length&&(this.isEmptyData=!0);0!==n.length&&0!==t.length||(this.isEmptyData=!0)},t.prototype.updateGridData=function(n){var t,r,i;for(this.updateDataSourceSettings(n,!0),this.data=n.dataSource,this.allowDataCompression&&(this.actualData=this.data,this.data=this.getGroupedRawData(n)),t=0,r=this.fields;t<r.length;t++)i=r[t],this.fieldList[i].members={},this.fieldList[i].dateMember=[],this.fieldList[i].isMembersFilled=!1;this.fillFieldMembers();this.filterMembers=[];this.cMembers=[];this.rMembers=[];this.updateFilterMembers(n);this.isEditing=!0;this.isDrillThrough=!0;this.generateGridData(n);this.isEditing=!1},t.prototype.generateGridData=function(t,i,u,f,e){var w,h,a,v,ot,nt,st,y,p,b,vt,yt;void 0===i&&(i=!1);void 0===e&&(e=!1);n.isNullOrUndefined(f)&&this.customProperties.isTabularLayout&&(this.rowMaxLevel=0);this.updateDataSourceSettings(t,i);var o=t.columns?t.columns:[],g=this.data,s=t.rows?t.rows:[],ht=t.filterSettings,k=t.values?t.values:[];if(this.removeCount=0,this.isExpandAll=t.expandAll,this.drilledMembers=t.drilledMembers?t.drilledMembers:[],this.isEmptyData=!1,w=[],s[0]&&s[0].showNoDataItems||o[0]&&o[0].showNoDataItems)for(h=0;h<this.valueMatrix.length;h++)w.push(h);for(h=0;h<this.filterMembers.length;h++)this.filterPosObj[this.filterMembers[h]]=this.filterMembers[h];this.valueSortSettings.columnIndex=void 0;this.validateValueFields();this.frameDrillObject();this.isValueFilterEnabled&&!this.isEditing||f||(this.isLastHeaderHasMeasures=!0,this.columnCount=0,this.rowCount=0,this.cMembers=[],this.rMembers=[],0!==s.length&&0!==k.length&&(this.rMembers=this.getIndexedHeaders(s,g,this.customProperties.isTabularLayout?this.rowMaxLevel:0,s[0].showNoDataItems?w:this.filterMembers,"row","",this.allowValueFilter)),0!==o.length&&0!==k.length&&(this.cMembers=this.getIndexedHeaders(o,g,0,o[0].showNoDataItems?w:this.filterMembers,"column","",this.allowValueFilter)),this.insertAllMembersCommon(),this.saveDataHeaders=this.isValueFiltersAvail&&t.allowValueFilter?{rowHeaders:n.extend([],this.rMembers,null,!0),columnHeaders:n.extend([],this.cMembers,null,!0)}:{});this.customProperties.isTabularLayout&&(this.showSubTotalsAtBottom=!0);this.pivotValues=[];this.headerContent=[];this.valueContent=[];this.valueFilteredData=[];this.filterFramedHeaders=[];var ct=[],it=[],c=[],l=[],rt=[],lt=this.dataSourceSettings.values.length;if(this.isValueFiltersAvail&&t.allowValueFilter&&!f){if(this.valueFilteredData=[],a=this.saveDataHeaders.rowHeaders?this.saveDataHeaders.rowHeaders:[],v=this.saveDataHeaders.columnHeaders?this.saveDataHeaders.columnHeaders:[],ht.length>0){for(var ut={},ft={},et=0,at=k;et<at.length;et++)ot=at[et],ft[ot.name]=ot;for(nt=0,st=ht;nt<st.length;nt++)if(y=st[nt],a=c.length>0?c:a,v=l.length>0?l:v,this.valueFilteredData=[],p=y.properties?y.properties:y,"Value"===p.type&&this.fieldList[y.name]&&this.fieldList[y.name].isSelected){ut[y.name]=y;p.items=[];for(var tt=!1,pt=s.length,wt=o.length,d=0;d<pt;d++)if(p.name===s[d].name&&ft[p.measure]&&!tt){tt=!0;c=this.applyValueFiltering(s[d],d,a,this.columnGrandTotal?this.columnGrandTotal:"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals?v[0]:v[v.length-1],ut,this.valueFilteredData,"row");break}for(b=0;b<wt;b++)if(p.name===o[b].name&&ft[p.measure]&&!tt){tt=!0;l=this.applyValueFiltering(o[b],b,v,this.rowGrandTotal?this.rowGrandTotal:"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals?a[0]:a[a.length-1],ut,this.valueFilteredData,"column");break}}}c=c.length>0?c:a;l=l.length>0?l:v;this.isEmptyDataAvail(c,l);vt=r.getClonedFieldList(this.fieldList);yt=this.data[0];this.getFieldList(yt,this.enableSort,t.allowValueFilter);this.fillFieldMembers();this.updateSortSettings(t.sortSettings,this.enableSort);this.filterMembers=[];this.updateFilterMembers(t);this.isLastHeaderHasMeasures=!0;this.rMembers=0!==s.length?this.getIndexedHeaders(s,g,0,s[0].showNoDataItems?w:this.filterMembers,"row",""):[];this.cMembers=0!==o.length?this.getIndexedHeaders(o,g,0,o[0].showNoDataItems?w:this.filterMembers,"column",""):[];this.insertAllMembersCommon();this.updateFieldList(vt);this.rowCount=0;this.columnCount=0;this.rMembers=this.updateFramedHeaders(this.rMembers,this.rMembers,c,this.filterFramedHeaders,"row");this.filterFramedHeaders=[];this.cMembers=this.updateFramedHeaders(this.cMembers,this.cMembers,l,this.filterFramedHeaders,"column");this.isValueFilterEnabled=!0}f||this.applyValueSorting();this.isPagingOrVirtualizationEnabled&&(f?(this.rMembers=f.rowHeaders,this.cMembers=f.columnHeaders,this.rowCount=f.rowHeadersCount,this.columnCount=f.columnHeadersCount):(this.headerCollection.rowHeaders=this.rMembers,this.headerCollection.columnHeaders=this.cMembers,this.headerCollection.rowHeadersCount=this.rowCount,this.headerCollection.columnHeadersCount=this.columnCount),this.calculatePagingValues());!this.valueAxis&&this.isLastHeaderHasMeasures&&this.getAggregatedHeaders(s,o,this.rMembers,this.cMembers,k);this.getHeaderData(s,o,k,rt,this.cMembers,it,this.pivotValues,0,this.valueAxis?1:lt);this.insertSubTotals();this.getTableData(rt.length>0?rt:this.rMembers,ct,it,0,this.pivotValues,lt,0,this.rowGrandTotal?this.rowGrandTotal:this.rMembers[this.rMembers.length-1],this.columnGrandTotal?this.columnGrandTotal:this.cMembers[this.cMembers.length-1]);this.applyAdvancedAggregate(ct,it,this.pivotValues);this.customProperties.isTabularLayout&&(this.pivotValues=this.getTabularPivotValues(i,!1,e),this.setRowSpan());this.isEngineUpdated=!0;this.isEmptyDataAvail(this.rMembers,this.cMembers);this.clearProperties(u)},t.prototype.updateHeaders=function(t,i){t=n.isNullOrUndefined(t)?!((!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showRowGrandTotals)&&this.dataSourceSettings.rows.length>0):t;(this.pageSettings&&this.removeRowGrandTotal||!t&&!this.rowGrandTotal)&&"grand sum"===this.rMembers[this.rMembers.length-1].type&&(this.rMembers=this.rMembers.slice(0,this.rMembers.length-1));i=n.isNullOrUndefined(i)?!((!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showColumnGrandTotals)&&this.dataSourceSettings.columns.length>0):i;(this.pageSettings&&this.removeColumnGrandTotal||!i&&!this.columnGrandTotal)&&"grand sum"===this.cMembers[this.cMembers.length-1].type&&(this.cMembers=this.cMembers.slice(0,this.cMembers.length-1))},t.prototype.updatePivotValues=function(n){var u=!((!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showRowGrandTotals)&&this.dataSourceSettings.rows.length>0),f=!((!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showColumnGrandTotals)&&this.dataSourceSettings.columns.length>0),t,i,r;if((n&&this.updateHeaders(u,f),(this.pageSettings&&this.removeRowGrandTotal||!u&&!this.rowGrandTotal)&&this.valueContent.length>0)&&(t=1,this.valueAxis&&this.dataSourceSettings.values.length>0&&(t=1+this.dataSourceSettings.values.length),this.pivotValues[this.pivotValues.length-t]&&"grand sum"===this.pivotValues[this.pivotValues.length-t][0].type&&(this.pivotValues=this.pivotValues.slice(0,this.pivotValues.length-t),this.valueContent=this.valueContent.slice(0,this.valueContent.length-t))),(this.pageSettings&&this.removeColumnGrandTotal||!f&&!this.columnGrandTotal)&&this.headerContent.length>0&&(t=this.dataSourceSettings.values.length,this.valueAxis&&this.dataSourceSettings.values.length>0&&(t=1),this.pivotValues[0][this.pivotValues[0].length-t]&&"grand sum"===this.pivotValues[0][this.pivotValues[0].length-t].type))for(i=0;i<this.pivotValues.length;i++)if(this.pivotValues[i]&&(this.pivotValues[i]=this.pivotValues[i].slice(0,this.pivotValues[i].length-t)),this.headerContent[i])for(r=this.pivotValues[i].length;r<this.pivotValues[i].length+t;r++)delete this.headerContent[i][r];this.removeRowGrandTotal=this.removeColumnGrandTotal=!1},t.prototype.onDrill=function(n){this.enableVirtualization||this.enablePaging||!this.customProperties.isTabularLayout||(this.rowMaxLevel=0);this.frameDrillObject(n);var t=this.getHeadersInfo(n.fieldName,n.axis);this.performDrillOperation(t.headers,n,t.fields,t.position,0);this.customProperties.isTabularLayout&&"up"===n.action&&"row"===t.axis&&(this.rowMaxLevel=this.getMaxLevel(t.headers));this.headerCollection.rowHeadersCount=this.rowCount;this.headerCollection.columnHeadersCount=this.columnCount;"row"===t.axis?this.headerCollection.rowHeaders=t.headers:this.headerCollection.columnHeaders=t.headers;this.updateEngine()},t.prototype.getMaxLevel=function(n){return function n(t,i){for(var f,e,r=i,u=0,o=t;u<o.length;u++)f=o[u],f.members.length>0&&(e=n(f.members,i+1),e>r&&(r=e));return r}(n,0)},t.prototype.onSort=function(n,t){t&&this.updateDataSourceSettings(t,!0);var i=this.getHeadersInfo(n.name,"");this.fieldList[n.name].sort=n.order;this.performSortOperation(i.headers,n,i,0);this.updateEngine()},t.prototype.onFilter=function(n,t){var i,o,h,f,c,r;this.updateDataSourceSettings(t,!0);i=this.getHeadersInfo(n.name,"");this.isLastHeaderHasMeasures=!!(this.valueAxis&&"row"===i.axis||!this.valueAxis&&"column"===i.axis)||this.isLastHeaderHasMeasures;"Include"===n.type&&n.items.length===this.fieldList[n.name].dateMember.length?(this.fieldList[n.name].filter=[],this.fieldList[n.name].filterType=""):(this.fieldList[n.name].filter=n.items,this.fieldList[n.name].filterType=n.type);for(var l={},e=0,a=this.filterMembers;e<a.length;e++)o=a[e],l[o]=o;this.filterMembers=[];this.fieldFilterMem={};this.updateFilterMembers(t);for(var u=this.filterMembers.filter(function(n){return void 0===l[n]}),y={},s=0,v=n.items;s<v.length;s++)h=v[s],y[h]=h;if(f=this.dataSourceSettings.rows[0]&&this.dataSourceSettings.rows[0].showNoDataItems||this.dataSourceSettings.columns[0]&&this.dataSourceSettings.columns[0].showNoDataItems,f&&this.columnKeys[n.name]?f=!(!this.dataSourceSettings.columns[0]||!this.dataSourceSettings.columns[0].showNoDataItems):f&&"row"===i.axis&&(f=!(!this.dataSourceSettings.rows[0]||!this.dataSourceSettings.rows[0].showNoDataItems)),f){for(c=[],this.filterPosObj={},r=0;r<u.length;r++)this.filterPosObj[u[r]]=u[r];for(r=0;r<this.valueMatrix.length;r++)c.push(r);u=c}this.performFilterCommonUpdate(n,i,u);"column"===i.axis?(i=this.getHeadersInfo("","row"),this.performFilterCommonUpdate(n,i,u)):(i=this.getHeadersInfo("","column"),this.performFilterCommonUpdate(n,i,u));this.frameHeaderObjectsCollection=!1;this.headerObjectsCollection={};this.updateEngine()},t.prototype.onAggregation=function(n,t){t&&this.updateDataSourceSettings(t,!0);this.fieldList[n.name].aggregateType=n.type;this.rMembers=this.headerCollection.rowHeaders;this.cMembers=this.headerCollection.columnHeaders;this.allowDataCompression&&(this.data=this.getGroupedRawData(this.dataSourceSettings),this.generateValueMatrix());this.updateEngine()},t.prototype.onCalcOperation=function(n,t){this.dataSourceSettings.calculatedFieldSettings=t.calculatedFieldSettings?t.calculatedFieldSettings:[];this.dataSourceSettings.values=t.values?t.values:[];this.rMembers=this.headerCollection.rowHeaders;this.cMembers=this.headerCollection.columnHeaders;this.getCalculatedField(this.fields);this.fieldList[n.name]?this.fieldList[n.name].formula=n.formula:(this.fieldList[n.name]={id:n.name,caption:n.name,type:"number",aggregateType:"CalculatedField",filterType:"",index:this.fields.length-1,filter:[],sort:this.enableSort?"Ascending":"None",isSelected:!0,isExcelFilter:!1,formula:n.formula},1===this.valueAxis?this.headerCollection.rowHeadersCount=this.rowCount=this.rowCount/(this.dataSourceSettings.values.length-1)*this.dataSourceSettings.values.length:this.headerCollection.columnHeadersCount=this.columnCount=this.columnCount/(this.dataSourceSettings.values.length-1)*this.dataSourceSettings.values.length);this.getFormattedFields(t);this.fillFieldMembers();this.updateEngine()},t.prototype.performDrillOperation=function(n,t,i,r,u){for(var o,e,s,f=0;f<n.length;){if(r===u){if(o=n[f].valueSort.levelName.split(this.valueSortSettings.headerDelimiter),t.memberName===o.join(t.delimiter?t.delimiter:"**")){"down"===t.action?(n[f].isDrilled=!0,n[f].members=this.getIndexedHeaders(i,this.data,r+1,n[f].index,t.axis,t.memberName.split(t.delimiter?t.delimiter:"**").join(this.valueSortSettings.headerDelimiter)),e=void 0,"row"===t.axis?(e=this.applyValueSorting(n[f].members,this.cMembers),n[f].members=e.rMembers,this.customProperties.isTabularLayout||(this.rowCount+=this.showSubTotalsAtBottom?1:0)):(s=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&i[r].showSubTotals,this.columnCount-=s?0:this.colValuesLength,e=this.applyValueSorting(this.rMembers,n[f].members),n[f].members=e.cMembers)):(n[f].isDrilled=!1,this.updateHeadersCount(n[f].members,t.axis,r,i,"minus",!0),n[f].members=[],"row"!==t.axis||this.customProperties.isTabularLayout||(this.rowCount-=this.showSubTotalsAtBottom?1:0));break}}else n[f].members.length>0&&(n[f].members=this.performDrillOperation(n[f].members,t,i,r,u+1));f++}return n},t.prototype.performSortOperation=function(n,t,i,r){for(var u=0;u<n.length;){if(i.position===r){n=this.getSortedHeaders(n,t.order.toString());break}n[u].members.length>0&&(n[u].members=this.performSortOperation(n[u].members,t,i,r+1));u++}return n},t.prototype.performFilterDeletion=function(n,t,i,r,u){for(var s,f=0,e=!0,h=function(){if(i.position===u){var s=o;n=n.filter(function(n){return""!==s.fieldFilterMem[t.name].memberObj[n.formattedText]&&(!s.fieldFilterMem[t.name].memberObj[n.formattedText]||"grand sum"===n.type)});e=!1}else n[f].members.length>0&&(n[f].members=o.performFilterDeletion(n[f].members,t,i,r,u+1));f++},o=this;f<n.length&&e;)h();return s=this,n.filter(function(n){return n.members.length>0||"grand sum"===n.type||s.matchIndexes(n.indexObject,r)})},t.prototype.matchIndexes=function(n,t){var r=Object.keys(n),i=r.length;if(0===i)return!0;for(;i>-1;){if(void 0!==t[n[r[i]]])return!0;i--}return!1},t.prototype.performFilterAddition=function(n,t,i){for(var r=0,f=function(){var f=n[r].valueSort.levelName,o,c;if(u.headerObjectsCollection[f]){for(var s={},e=0,h=n[r].members;e<h.length;e++)o=h[e],s[o.valueSort.levelName.toString()]=o.valueSort.levelName.toString();c=u.headerObjectsCollection[f].filter(function(n){return!s[n.valueSort.levelName.toString()]});n[r].members=n[r].members.concat(c);n[r].members=u.getSortedHeaders(n[r].members,u.fieldList[i.fields[n[r].members[0].level].name].sort);delete u.headerObjectsCollection[f]}n[r].members.length>0&&(n[r].members=u.performFilterAddition(n[r].members,t,i));r++},u=this;r<n.length;)f();return n},t.prototype.performFilterCommonUpdate=function(n,t,i){var o,u,h,p,c,f;if("row"===t.axis||"column"===t.axis){for(var r="row"===t.axis?this.rMembers:this.cMembers,l={},e=0,a=this.filterMembers;e<a.length;e++)o=a[e],l[o]=o;if(this.fieldFilterMem[n.name]&&(r=this.performFilterDeletion(t.headers,n,t,l,0)),i.length>0&&t.fields.length>0){if(this.frameHeaderObjectsCollection=!0,t.fields.filter(function(n){return n.showNoDataItems}).length>0)for(u=0;u<this.data.length;u++)i.push(u);this.headerObjectsCollection.parent=this.getIndexedHeaders(t.fields,this.data,0,i,t.axis,"");r=this.performFilterAddition(r,t.fields,t);for(var v={},s=0,y=r;s<y.length;s++)h=y[s],v[h.valueSort.levelName.toString()]=h.valueSort.levelName.toString();p=this.headerObjectsCollection.parent.filter(function(n){return!v[n.valueSort.levelName.toString()]});c=r.filter(function(n){return"grand sum"===n.type});c.length>0&&r.pop();r=this.getSortedHeaders(r.concat(p),this.fieldList[t.fields[0].name].sort).concat(c);"row"===t.axis?(this.cMembers=this.getIndexedHeaders(this.dataSourceSettings.columns,this.data,0,this.filterMembers,"column",""),this.insertAllMember(this.cMembers,this.filterMembers,"","column")):(this.rMembers=this.getIndexedHeaders(this.dataSourceSettings.rows,this.data,0,this.filterMembers,"row",""),this.insertAllMember(this.rMembers,this.filterMembers,"","row"))}"row"===t.axis?this.rowCount=0:this.columnCount=0;this.updateHeadersCount(r,t.axis,0,t.fields,"plus",!1);"row"===t.axis?(t.position>0&&this.insertPosition(this.dataSourceSettings.rows,this.data,0,this.filterMembers,"row","",r),this.insertTotalPosition(r),this.rMembers=this.headerCollection.rowHeaders=r,this.headerCollection.rowHeadersCount=this.rowCount):(t.position>0&&this.insertPosition(this.dataSourceSettings.columns,this.data,0,this.filterMembers,"column","",r),this.insertTotalPosition(r),this.cMembers=this.headerCollection.columnHeaders=r,this.headerCollection.columnHeadersCount=this.columnCount)}else f=this.dataSourceSettings.rows[0]&&this.dataSourceSettings.rows[0].showNoDataItems||this.dataSourceSettings.columns[0]&&this.dataSourceSettings.columns[0].showNoDataItems,this.rMembers=this.getIndexedHeaders(this.dataSourceSettings.rows,this.data,0,f?i:this.filterMembers,"row",""),this.cMembers=this.getIndexedHeaders(this.dataSourceSettings.columns,this.data,0,f?i:this.filterMembers,"column",""),this.insertAllMembersCommon(),this.rowCount=0,this.columnCount=0,this.updateHeadersCount(this.cMembers,"column",0,this.dataSourceSettings.columns,"plus",!1),this.updateHeadersCount(this.rMembers,"row",0,this.dataSourceSettings.rows,"plus",!1),f&&(this.insertPosition(this.dataSourceSettings.rows,this.data,0,this.filterMembers,"row","",this.rMembers),this.insertPosition(this.dataSourceSettings.columns,this.data,0,this.filterMembers,"column","",this.cMembers)),this.headerCollection.rowHeaders=this.rMembers,this.headerCollection.rowHeadersCount=this.rowCount,this.headerCollection.columnHeaders=this.cMembers,this.headerCollection.columnHeadersCount=this.columnCount;this.applyValueSorting()},t.prototype.getHeadersInfo=function(n,t){this.rMembers=this.headerCollection.rowHeaders;this.cMembers=this.headerCollection.columnHeaders;for(var e="row"===(t=""===t?this.getAxisByFieldName(n):t)?this.rMembers:this.cMembers,r="row"===t?this.dataSourceSettings.rows:this.dataSourceSettings.columns,u=0,i=0,f=r;i<f.length&&f[i].name!==n;i++)u++;return{axis:t,fields:r,headers:e,position:u}},t.prototype.updateEngine=function(){this.removeCount=0;this.validateValueFields();this.calculatePagingValues();this.pivotValues=[];this.headerContent=[];this.valueContent=[];var i=[],n=[],t=[],r=this.dataSourceSettings.values.length;this.frameDrillObject();this.getAggregatedHeaders(this.dataSourceSettings.rows,this.dataSourceSettings.columns,this.rMembers,this.cMembers,this.dataSourceSettings.values);this.getHeaderData(this.dataSourceSettings.rows,this.dataSourceSettings.columns,this.dataSourceSettings.values,t,this.cMembers,n,this.pivotValues,0,this.valueAxis?1:r);this.insertSubTotals();this.getTableData(t.length>0?t:this.rMembers,i,n,0,this.pivotValues,r,0,this.rowGrandTotal?this.rowGrandTotal:this.rMembers[this.rMembers.length-1],this.columnGrandTotal?this.columnGrandTotal:this.cMembers[this.cMembers.length-1]);this.applyAdvancedAggregate(i,n,this.pivotValues);this.customProperties.isTabularLayout&&(this.pivotValues=this.getTabularPivotValues(!0,!0),this.setRowSpan());this.isEngineUpdated=!0;this.isEmptyDataAvail(this.rMembers,this.cMembers)},t.prototype.getAxisByFieldName=function(n){for(var i=0,t="";i<4&&""===t;){switch(i){case 0:t=this.getFieldByName(n,this.dataSourceSettings.rows)?"row":"";break;case 1:t=this.getFieldByName(n,this.dataSourceSettings.columns)?"column":""}i++}return t},t.prototype.getFieldByName=function(n,t){return new nt.DataManager({json:t}).executeLocal((new nt.Query).where("name","equal",n))[0]},t.prototype.updateHeadersCount=function(n,t,i,r,u,f){for(var e=0,o=r[i],s="column"===t?this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&(!o||o.showSubTotals):this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals&&(!o||o.showSubTotals);e<n.length;)"row"===t?this.rowCount=this.rowCount-("plus"===u?-(1===this.valueAxis?this.dataSourceSettings.values.length:1):1===this.valueAxis?this.dataSourceSettings.values.length:1):this.columnCount=this.columnCount-("plus"===u?-(1===this.valueAxis?1:this.dataSourceSettings.values.length):1===this.valueAxis?1:this.dataSourceSettings.values.length),n[e].members.length>0&&(this.updateHeadersCount(n[e].members,t,i+1,r,u,!0),"row"===t&&(this.rowCount-=this.showSubTotalsAtBottom&&!this.customProperties.isTabularLayout&&n[e].hasChild&&n[e].isDrilled?1:0)),e++;"column"===t&&!s&&f&&(this.columnCount+="plus"===u?-this.colValuesLength:this.colValuesLength)},t.prototype.getSortedHeaders=function(n,t){var u="Grand Total"!==n[0].actualText?n[0].valueSort.axis:n[1].valueSort.axis,e=!(this.formatFields&&this.formatFields[u]&&this.formatFields[u].type),i=this.fieldList[u];if(e){if(i&&"number"===i.type&&n.length>0&&"string"==typeof n[0].actualText){for(var o=[],f=[],s=[],r=0;r<n.length;r++)if(isNaN(Number(n[r].actualText.toString().charAt(0))))o.push(n[r]);else{if(""!==n[r].actualText){f.push(n[r]);break}s.push(n[r])}return f.length>0&&(f=this.sortHeaders(u,i,n,i.sort,i.isAlphanumeric)),n}return this.sortHeaders(u,i,n,t,i.type)}return this.sortHeaders(u,i,n,t,"date")},t.prototype.sortHeaders=function(t,i,u,f,e){var a=!1,o=this.fieldList[t]&&this.fieldList[t].membersOrder?this.fieldList[t].membersOrder.slice():[],h,c,p;this.sortMembers[t]||(this.sortMembers[t]=Object.keys(i.members));var s={fieldName:t,sortOrder:f,members:o&&o.length>0?o:this.sortMembers[t],IsOrderChanged:!1},w="datetime"===(e="datetime"===e||"date"===e||"time"===e?this.formatFields[t]&&["date","dateTime","time"].indexOf(this.formatFields[t].type)>-1?e:"string":e)||"date"===e||"time"===e,v=!1;if(this.dataSourceSettings.groupSettings.length>0&&(h=this.dataSourceSettings.groupSettings.filter(function(n){return n.name===i.id}),!n.isNullOrUndefined(h)&&h.length>0&&(v="number"===h[0].type.toLocaleLowerCase()&&"string"===i.type.toLocaleLowerCase())),o&&o.length>0?r.applyCustomSort(s,u,e):(r.applyHeadersSort(u,f,e,v),a=!0),a&&this.getHeaderSortInfo){for(var y=[],l=0,b=0;l<u.length;l++)c=u[l],p=w?c.dateText:c.actualText,"Grand Total"!==c.actualText&&(y[b++]=p);s.members=y}return this.getHeaderSortInfo&&this.getHeaderSortInfo(s),s.IsOrderChanged&&r.applyCustomSort(s,u,e,!0),u},t.prototype.applyValueSorting=function(t,i){var r=!1;return this.enableValueSorting&&(this.valueSortSettings.rowHeaderText||this.valueSortSettings.columnHeaderText)&&this.dataSourceSettings.values.length>0&&(void 0!==t&&void 0!==i||(this.rowValueSortHeaderText=void 0,this.columnValueSortHeaderText=void 0,n.isNullOrUndefined(this.valueSortSettings.rowHeaderText)||""===this.valueSortSettings.rowHeaderText||(this.rowValueSortHeaderText=this.prepareValueSortHeaderText(this.valueSortSettings.rowHeaderText)),n.isNullOrUndefined(this.valueSortSettings.columnHeaderText)||""===this.valueSortSettings.columnHeaderText||(this.columnValueSortHeaderText=this.prepareValueSortHeaderText(this.valueSortSettings.columnHeaderText)),t=this.rMembers,i=this.cMembers,r=!0),i=this.applySortingForAxis(this.rowValueSortHeaderText,!0,t,i,this.rowGrandTotal),t=this.applySortingForAxis(this.columnValueSortHeaderText,!1,i,t,this.columnGrandTotal),r&&(this.rMembers=t,this.cMembers=i,this.isPagingOrVirtualizationEnabled&&(this.headerCollection.rowHeaders=this.rMembers,this.headerCollection.columnHeaders=this.cMembers))),{rMembers:t,cMembers:i}},t.prototype.applySortingForAxis=function(n,t,i,r,u){if(!n)return r;var s=t?this.dataSourceSettings.showRowGrandTotals:this.dataSourceSettings.showColumnGrandTotals,h=t?this.dataSourceSettings.rows.length>0:this.dataSourceSettings.columns.length>0,c=!(!this.dataSourceSettings.showGrandTotals||!s)||!h,e=!0;n.includes(this.localeObj.getConstant("grandTotal"))&&!c&&(i.push(u),e=!1);var f=this.getHeaderDetails(n,t),l=f.hText,a=f.mIndex,v=f.mType,o=this.getMember(i,l);return o&&(r=this.sortByValueRow(r,o,t?this.valueSortSettings.rowSortOrder:this.valueSortSettings.columnSortOrder,a,v)),e||i.pop(),r},t.prototype.prepareValueSortHeaderText=function(n){for(var t=n.split(this.valueSortSettings.headerDelimiter),i=0,u=this.dataSourceSettings.values;i<u.length;i++){var r=u[i],f=r.caption?r.caption:r.name,e=t.indexOf(f);if(e>-1){t.splice(e,1);t.push(f);n=t.join(this.valueSortSettings.headerDelimiter);break}}return n},t.prototype.getHeaderDetails=function(t,i){for(var o,s,e,u=t.split(this.valueSortSettings.headerDelimiter),f="",r=0;r<this.dataSourceSettings.values.length;r++){if(this.dataSourceSettings.values[r].caption===u[u.length-1]){e=this.dataSourceSettings.values[r].name;break}e=u[u.length-1]}if((1===this.dataSourceSettings.values.length&&(!i&&"column"===this.dataSourceSettings.valueAxis&&0===this.dataSourceSettings.columns.length||i&&"row"===this.dataSourceSettings.valueAxis&&0===this.dataSourceSettings.rows.length)||this.dataSourceSettings.values.length>1&&(!i&&"column"===this.dataSourceSettings.valueAxis||i&&"row"===this.dataSourceSettings.valueAxis))&&e&&this.fieldList[e]){for(r=0;r<u.length-1;r++)f=""===f?u[r]:f+this.valueSortSettings.headerDelimiter+u[r];o=this.fieldList[e].index;s=this.fieldList[e].aggregateType}else{if(this.dataSourceSettings.alwaysShowValueHeader&&1!==u.length&&(!i||"row"===this.dataSourceSettings.valueAxis)&&(i||"column"===this.dataSourceSettings.valueAxis))for(r=0;r<u.length-1;r++)f=""===f?u[r]:f+this.valueSortSettings.headerDelimiter+u[r];else f=t;if(n.isNullOrUndefined(this.dataSourceSettings.valueSortSettings.measure)||""===this.dataSourceSettings.valueSortSettings.measure)o=this.fieldList[this.dataSourceSettings.values[0].name].index,s=this.fieldList[this.dataSourceSettings.values[0].name].aggregateType;else for(r=0;r<this.dataSourceSettings.values.length;r++){if(this.dataSourceSettings.valueSortSettings.measure===this.dataSourceSettings.values[r].name){o=this.fieldList[this.dataSourceSettings.valueSortSettings.measure].index;s=this.fieldList[this.dataSourceSettings.valueSortSettings.measure].aggregateType;break}o=this.fieldList[this.dataSourceSettings.values[0].name].index;s=this.fieldList[this.dataSourceSettings.values[0].name].aggregateType}}return{hText:f,mIndex:o,mType:s}},t.prototype.getMember=function(n,t){for(var r,u=n.length,i=0;i<u;i++){if(n[i].valueSort.levelName===t){r=n[i];break}if(n[i].members.length>0&&(r=this.getMember(n[i].members,t)),r)return r}return r},t.prototype.sortByValueRow=function(n,t,i,u,f){for(var o,l,s,a,e,h=[],c=0,v=n;c<v.length;c++)"grand sum"===(e=v[c]).type?h.push({header:e}):(this.rawIndexObject={},o=this.getAggregateValue(e.index,t.indexObject,u,f,!1),l={fieldName:this.fields[u],row:e,column:t,value:o,cellSets:this.getValueCellInfo?this.getCellSet(this.rawIndexObject):[],rowCellType:e.hasChild&&e.isDrilled?"subTotal":"grand sum"===e.type?"grandTotal":"value",columnCellType:t.hasChild&&t.isDrilled?"subTotal":"grand sum"===t.type?"grandTotal":"value",aggregateType:f,skipFormatting:!1},this.getValueCellInfo&&this.getValueCellInfo(l),o=l.value,this.rawIndexObject={},h.push({header:e,value:o}));for(s=0,a=n=r.getSortedValue(h,i);s<a.length;s++)(e=a[s]).members.length>0&&(e.members=this.sortByValueRow(e.members,t,i,u,f));return n},t.prototype.insertAllMembersCommon=function(){this.rowGrandTotal=this.columnGrandTotal=null;var n=!((!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showRowGrandTotals)&&this.dataSourceSettings.rows.length>0),t=!((!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showColumnGrandTotals)&&this.dataSourceSettings.columns.length>0);this.isValueHasAdvancedAggregate?(this.insertAllMember(this.rMembers,this.filterMembers,"","row"),n&&(this.rowCount+=this.rowValuesLength),this.insertAllMember(this.cMembers,this.filterMembers,"","column"),t&&(this.columnCount+=this.colValuesLength)):(n?(this.insertAllMember(this.rMembers,this.filterMembers,"","row"),this.rowCount+=this.rowValuesLength):this.rowGrandTotal=this.insertAllMember([],this.filterMembers,"","row")[0],t?(this.insertAllMember(this.cMembers,this.filterMembers,"","column"),this.columnCount+=this.colValuesLength):this.columnGrandTotal=this.insertAllMember([],this.filterMembers,"","column")[0])},t.prototype.insertSubTotals=function(){for(var e,i,f,s,v,y,p,w=this.pivotValues.length,r=0;r<w;r++)if(e=this.pivotValues[r],e)for(var u=void 0,o=1,k=e.length,h=void 0,c=1,b=this.showSubTotalsAtTop?this.reformAxisCount:k,t=this.showSubTotalsAtTop?c:b-1,l=void 0,a=void 0;c<b;){if(i=e[t],i){for(u&&(u.colSpan=o,u.colIndex=this.showSubTotalsAtTop?u.colIndex+(o-1):u.colIndex-(o-1)),this.showSubTotalsAtTop&&(l=a=this.getMemberSpanCount(this.pivotValues[r],t)),h={index:i.index,indexObject:i.indexObject},i.index=[],i.indexObject={},u=n.extend({},i,null,!0),i.index=h.index,i.indexObject=h.indexObject,f=r+1;this.pivotValues[f]&&!this.pivotValues[f][t];)s=this.pivotValues[r][t],s.isDrilled||!this.valueAxis&&!this.isLastHeaderHasMeasures&&s.members&&s.members.length>0&&f>this.measureIndex||(s.rowSpan=f-r+1,u.rowSpan=f-r+1),v="sum"===i.type||"grand sum"===i.type?i.type:"sum",this.pivotValues[f][t]=this.headerContent[f][t]={type:v,formattedText:"sum"===i.type||"grand sum"===i.type?i.formattedText:i.formattedText+" Total",axis:"column",hierarchyName:i.hierarchyName,level:-1,colIndex:t,rowIndex:f,valueSort:i.valueSort},i.valueSort&&(i.valueSort[this.valueSortSettings.rowHeaderText]||i.valueSort[this.valueSortSettings.columnHeaderText])&&(this.valueSortSettings.columnIndex=t),y=!1,"grand sum"===v?(s.rowSpan=f-r+1,u.rowSpan=f-r+1):"sum"!==s.type&&(s.isDrilled||this.valueAxisFields[s.actualText]&&!this.valueAxis&&!this.isLastHeaderHasMeasures&&s.members&&s.members.length>0)?(this.pivotValues[r+1][t].rowSpan=f-r,y=!0):this.pivotValues[f][t].rowSpan=-1,f>r+1&&("sum"===s.type||y)&&(this.pivotValues[f][t].rowSpan=-1),f++;o=1}else e[t]=this.headerContent[r][t]=n.extend({},u,null,!0),e[t].index=this.headerContent[r][t].index=h.index,e[t].indexObject=this.headerContent[r][t].indexObject=h.indexObject,o++,this.showSubTotalsAtTop?(a--,e[t].colSpan=a,e[t].colIndex=e[t].colIndex+(o-1)):(e[t].colSpan=o,e[t].colIndex=e[t].colIndex-(o-1));(1===t&&u&&(this.showSubTotalsAtTop?(u.colSpan=l,u.colIndex=u.colIndex+(o-1)):(u.colSpan=o,u.colIndex=u.colIndex-(o-1))),this.showSubTotalsAtTop&&(e[t+1]||t+1===this.reformAxisCount))&&(p=this.pivotValues[r][t-o+1],p.colSpan=l,this.pivotValues[r][t-o+1]=p);t=this.showSubTotalsAtTop?t+1:t-1;c++}},t.prototype.getMemberSpanCount=function(n,t){for(var r=1,i=t+1;i<this.reformAxisCount&&!n[i];i++)r++;return r},t.prototype.frameDrillObject=function(n){var f,e,o,w,s,r,u,h,c,b,l,d;for(void 0===n&&(n=null),this.fieldDrillCollection={},f=0;f<this.drilledMembers.length;f++){for(var i=this.drilledMembers[f],a=!1,v=1,y=!1,k=this.fieldList[i.name],p=k&&k.expandAll,t=0;t<this.dataSourceSettings.rows.length;t++)if(this.dataSourceSettings.rows[t].name===i.name){v=((e=this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&this.measureIndex>-1&&this.measureIndex<=t)?t+1:t)+1;a=!!e;y=!0;break}if(!y)for(t=0;t<this.dataSourceSettings.columns.length;t++)if(this.dataSourceSettings.columns[t].name===i.name){v=((e=!this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&this.measureIndex>-1&&this.measureIndex<=t)?t+1:t)+1;a=!!e;y=!0;break}for(o=0,w=i.items;o<w.length;o++)if(s=w[o],r=s.split(i.delimiter),v===r.length&&(u=i.name+this.valueSortSettings.headerDelimiter+r.join(this.valueSortSettings.headerDelimiter),this.fieldDrillCollection[u]=u,a)){if(h=!1,this.isExpandAll||p)for(c=0,b=this.dataSourceSettings.values;c<b.length;c++){if(l=b[c],d=l.caption?l.caption:l.name,r[this.measureIndex]=d,!(i.items.indexOf(r.join(i.delimiter))>-1)){h=!1;break}h=!0}((this.isExpandAll||p)&&h||!this.isExpandAll||!p)&&((r=s.split(i.delimiter)).splice(this.measureIndex,1),n&&n.memberName===s&&(n.memberName=r.join(i.delimiter)),u=i.name+this.valueSortSettings.headerDelimiter+r.join(this.valueSortSettings.headerDelimiter),this.fieldDrillCollection[u]=u)}}},t.prototype.getIndexedHeaders=function(t,i,r,u,f,e,o){var h=[],vt=0,c,s,w,a,ut,st,ft,yt,ht,y,pt,wt,ct,at;if(t&&t.length>0){vt++;var et=t.length,b={},p=t[r].name,rt=t[r],l=this.fieldList[p];if(n.isNullOrUndefined(this.reportDataType)){for(this.reportDataType={},c=0;c<this.dataSourceSettings.rows.length;c++)this.reportDataType[this.dataSourceSettings.rows[c].name]=this.dataSourceSettings.rows[c].dataType;for(c=0;c<this.dataSourceSettings.columns.length;c++)this.reportDataType[this.dataSourceSettings.columns[c].name]=this.dataSourceSettings.columns[c].dataType;for(c=0;c<this.dataSourceSettings.values.length;c++)this.reportDataType[this.dataSourceSettings.values[c].name]=this.dataSourceSettings.values[c].dataType}l.type=n.isNullOrUndefined(this.reportDataType[l.id])?l.type:this.reportDataType[l.id];var k=!1,ot=this.formatFields[p]&&["date","dateTime","time"].indexOf(this.formatFields[p].type)>-1,g=u.length<1&&r>0||rt.showNoDataItems,d={};if(g){for(var tt=Object.keys(l.members),v=0,it=tt.length;v<it;v++)(this.dataSourceSettings.showHeaderWhenEmpty||this.localeObj&&tt[v]!==this.localeObj.getConstant("undefined"))&&(d[tt[v]]=tt[v]);u.length<1&&(k=!0,u.length=tt.length)}for(f===this.dataSourceSettings.valueAxis&&this.measureIndex===r&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&(this.isLastHeaderHasMeasures=!1),v=0,it=u.length;v<it;v++)s={},n.isNullOrUndefined(t[r].showSubTotals)||t[r].showSubTotals||(s.showSubTotals=!1),s.hasChild=r<et-1,s.level=r,s.axis=f,s.colSpan=1,this.rowMaxLevel="row"===f&&this.rowMaxLevel<r?r:this.rowMaxLevel,w=k?l.members[Object.keys(d)[0]].ordinal:this.valueMatrix[u[v]][l.index].ordinal,a=k?Object.keys(d)[0]:i[u[v]][this.fieldKeys[p]],(a=this.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(a):a,(n.isNullOrUndefined(a)||this.localeObj&&a===this.localeObj.getConstant("undefined"))&&!this.dataSourceSettings.showHeaderWhenEmpty)?g&&!k&&r>0&&v+1===u.length&&Object.keys(d).length>0&&(it=Object.keys(d).length,k=!0,v=-1):(delete d[a],g&&this.fieldFilterMem[p]&&this.fieldFilterMem[p].memberObj[a]===a)||(ut=ot?{actualText:a,formattedText:l.dateMember[w-1].formattedText,dateText:l.dateMember[w-1].actualText}:{formattedText:null===a?this.localeObj?this.localeObj.getConstant("null"):String(a):void 0===a&&this.localeObj?p in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(a),actualText:null===a?this.localeObj?this.localeObj.getConstant("null"):String(a):void 0===a?this.localeObj?p in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(a):a},s.actualText=ut.actualText,s.formattedText=ut.formattedText,ot&&(s.dateText=ut.dateText),st=!g||void 0!==this.filterPosObj[u[v]]&&!k,ft=!1,(g&&l.filter.length>0&&"include"===l.filterType&&(ft=!0),b&&b[w]||ft&&!(ft&&l.filter.indexOf(a.toString())>-1))?st&&(b[w].index.push(u[v]),b[w].indexObject[u[v]]=u[v]):(b[w]={index:[],indexObject:{}},s.index=b[w].index,s.indexObject=b[w].indexObject,st&&(s.index=b[w].index=[u[v]],b[w].indexObject[u[v]]=u[v],s.indexObject=b[w].indexObject),s.ordinal=w,s.valueSort={},s.valueSort.axis=p,0!==r?(s.valueSort.levelName=e+this.valueSortSettings.headerDelimiter+(this.customProperties.isTabularLayout?this.getFormattedValue(s.formattedText,l.caption).formattedText:s.formattedText),s.valueSort[e+this.valueSortSettings.headerDelimiter+s.formattedText]=1,s.valueSort.uniqueName=e+this.valueSortSettings.headerDelimiter+(s.actualText?s.actualText:s.formattedText),s.valueSort[e+this.valueSortSettings.headerDelimiter+(s.actualText?s.actualText:s.formattedText)]=1):(s.valueSort[s.formattedText]=1,s.valueSort.levelName=this.customProperties.isTabularLayout?this.getFormattedValue(s.formattedText,l.caption).formattedText:s.formattedText,s.valueSort[s.actualText?s.actualText:s.formattedText]=1,s.valueSort.uniqueName=s.actualText?s.actualText:s.formattedText),yt=s.valueSort.axis+this.valueSortSettings.headerDelimiter+s.valueSort.levelName,ht=this.isExpandAll||rt&&rt.expandAll,s.isDrilled=!(!o||!this.isValueFiltersAvail)||(s.hasChild&&this.fieldDrillCollection[yt]?!ht||!this.valueAxis&&!this.isLastHeaderHasMeasures&&vt>=this.measureIndex:ht),s.members=[],h.push(s)),g&&!k&&r>0&&v+1===u.length&&Object.keys(d).length>0&&(k=!0,it=Object.keys(d).length,v=-1));for(y=0,pt=h.length;y<pt;y++){if(this.frameHeaderObjectsCollection||("row"===f?(wt=h[y].isDrilled&&h[y].hasChild,this.rowCount+=this.rowValuesLength+(wt&&this.showSubTotalsAtBottom&&!this.customProperties.isTabularLayout?1:0)):this.columnCount+=this.colValuesLength),ct=null,h[y].valueSort&&h[y].valueSort.levelName&&(ct=h[y].valueSort.levelName),e=ct||h[y].formattedText,!this.dataSourceSettings.showHeaderWhenEmpty&&et-1>r&&h[y].index&&h[y].index.length>0)if(g&&t[r+1]&&t[r+1].name&&Object.keys(this.fieldList[t[r+1].name].members).length>0)h[y].hasChild=!0;else{for(var bt=h[y].index.length,kt=0,lt=0;lt<bt;lt++)a=i[h[y].index[lt]][this.fieldKeys[t[r+1].name]],(n.isNullOrUndefined(a)||this.localeObj&&a===this.localeObj.getConstant("undefined"))&&kt++;h[y].hasChild=kt!==bt}et-1>r&&h[y].isDrilled&&(this.columnCount-=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&rt.showSubTotals||"column"!==f?0:this.colValuesLength,at=h[y].index,h[y].members=this.getIndexedHeaders(t,i,r+1,void 0===at?[]:at,f,e,o),this.frameHeaderObjectsCollection&&(this.headerObjectsCollection[e]=h[y].members))}if(this.enableSort){if(ot)return this.sortHeaders(p,l,h,l.sort,"date");if("number"===l.type.toLowerCase()&&h.length>0&&"string"==typeof h[0].actualText&&h[0].actualText.match(/[a-zA-Z]+/g)){var gt=[],nt=void 0,dt=[],ni=[];for(c=0;c<h.length;c++)if(n.isNullOrUndefined(h[c].actualText.toString().match(/\d+/)))gt.push(h[c]),nt||"None"===l.sort||"Out of Range"===h[c].actualText&&(nt=h[c],h.splice(c,1));else{if(""!==h[c].actualText){this.fieldList[p].isAlphanumeric=!0;dt.push(h[c]);break}ni.push(h[c])}return nt&&("Ascending"===l.sort?"Grand Total"===h[0].actualText?h.splice(1,0,nt):h.splice(0,0,nt):"Grand Total"===h[h.length-1].actualText?h.splice(h.length-1,0,nt):h.splice(h.length,0,nt)),dt.length>0&&this.sortHeaders(p,l,h,l.sort,l.isAlphanumeric),h}return this.sortHeaders(p,l,h,l.sort,l.type)}return h}return h},t.prototype.getOrderedIndex=function(n){for(var i={},t=0;t<n.length;t++)"grand sum"!==n[t].type&&(i[n[t].ordinal]=t);return i},t.prototype.insertPosition=function(n,t,i,r,u,f,e){var a=[],g=this.getOrderedIndex(e),k,p,s,d,w;if(n){for(var c={},y=n[i].name,nt=this.fieldList[y],h=0,tt=r.length;h<tt;h++){var b={},l=this.valueMatrix[r[h]][nt.index].ordinal,o=e[g[l]],v=t[r[h]][this.fieldKeys[y]];v=null===v?this.localeObj?this.localeObj.getConstant("null"):String(v):v;k=this.formatFields[y]&&["date","dateTime","time"].indexOf(this.formatFields[y].type)>-1?this.getFormattedValue(v,y):{formattedText:v.toString(),actualText:v.toString()};o&&o.formattedText===k.formattedText&&(c&&c[l]?(c[l].index.push(r[h]),c[l].indexObject[r[h]]=r[h]):(c[l]={index:[],indexObject:{}},o.index=c[l].index=[r[h]],c[l].indexObject[r[h]]=r[h],o.indexObject=c[l].indexObject,o.valueSort={},o.valueSort.axis=y,0!==i?(o.valueSort.levelName=f+this.valueSortSettings.headerDelimiter+o.formattedText,o.valueSort[f+this.valueSortSettings.headerDelimiter+o.formattedText]=1,o.valueSort.uniqueName=f+this.valueSortSettings.headerDelimiter+(o.actualText?o.actualText:o.formattedText),o.valueSort[f+this.valueSortSettings.headerDelimiter+(o.actualText?o.actualText:o.formattedText)]=1):(o.valueSort[o.formattedText]=1,o.valueSort.levelName=o.formattedText,o.valueSort[o.actualText?o.actualText:o.formattedText]=1,o.valueSort.uniqueName=o.actualText?o.actualText:o.formattedText),b.members=[],a.push(b)))}for(p=e.length-a.length;p>0;)a.push({members:[]}),p--;for(s=0,d=a.length;s<d;s++)e[s].members.length>0&&(w=null,e[s].valueSort&&e[s].valueSort.levelName&&(w=e[s].valueSort.levelName),f=w||e[s].formattedText,a[s].members=this.insertPosition(n,t,i+1,e[s].index,u,f,e[s].members));return a}return a},t.prototype.insertTotalPosition=function(n){var t=n[n.length-1],i,r;if(t&&"grand sum"===t.type)for(t.index=this.filterMembers,t.indexObject={},i=0,r=this.filterMembers.length;i<r;i++)t.indexObject[this.filterMembers[i]]=this.filterMembers[i];return n},t.prototype.calculatePagingValues=function(){var t,n;this.isPagingOrVirtualizationEnabled&&(1===this.valueAxis?this.rowValuesLength=this.dataSourceSettings.values.length:this.colValuesLength=this.dataSourceSettings.values.length,this.columnPageCount=Math.ceil(this.columnCount/this.pageSettings.columnPageSize),this.rowPageCount=Math.ceil(this.rowCount/this.pageSettings.rowPageSize),this.pageSettings.currentColumnPage=this.pageSettings.currentColumnPage>=this.columnPageCount||this.enableOptimizedRendering&&this.pageSettings.currentColumnPage>1&&(this.pageSettings.currentColumnPage+1)*this.colValuesLength>=this.columnPageCount?this.columnPageCount:this.pageSettings.currentColumnPage,this.pageSettings.currentRowPage=this.pageSettings.currentRowPage>=this.rowPageCount||this.enableOptimizedRendering&&this.pageSettings.currentRowPage>1&&(this.pageSettings.currentRowPage+1)*this.rowValuesLength>=this.rowPageCount?this.rowPageCount:this.pageSettings.currentRowPage,t=this.enablePaging?1:this.enableOptimizedRendering?1.5:this.viewportPageCount,this.memberCnt=this.enablePaging?0:-this.rowValuesLength,this.rowStartPos=(this.pageSettings.currentRowPage*this.pageSettings.rowPageSize-this.pageSettings.rowPageSize)*(this.enablePaging?1:this.rowValuesLength)+(this.enablePaging?1:0),n=this.enablePaging?this.rowStartPos:this.rowStartPos+this.pageSettings.rowPageSize*t*this.rowValuesLength>this.rowCount?this.rowCount-this.pageSettings.rowPageSize*t*this.rowValuesLength:this.rowStartPos,n<0&&(n=this.rowStartPos=0,this.pageSettings.currentRowPage=1),this.rowFirstLvl=(this.rowStartPos-n)%this.pageSettings.rowPageSize,this.rowStartPos=n,this.endPos=this.rowStartPos+this.pageSettings.rowPageSize*t*(this.enablePaging?1:this.rowValuesLength)-(this.enablePaging?1:0),this.endPos=this.endPos>this.rowCount+1?this.rowCount+1:this.endPos,this.lastMember={},this.rMembers=this.performSlicing(this.rMembers,[],this.rowStartPos,"row"),this.memberCnt=this.enablePaging?0:-this.colValuesLength,this.pageInLimit=!1,this.colHdrBufferCalculated=!1,this.colStartPos=(this.pageSettings.currentColumnPage*this.pageSettings.columnPageSize-this.pageSettings.columnPageSize)*(this.enablePaging?1:this.colValuesLength)+(this.enablePaging?1:0),(n=this.enablePaging?this.colStartPos:this.colStartPos+this.pageSettings.columnPageSize*t*this.colValuesLength>this.columnCount?this.columnCount-this.pageSettings.columnPageSize*t*this.colValuesLength:this.colStartPos)<0&&(n=this.colStartPos=0,this.pageSettings.currentColumnPage=1),this.colFirstLvl=(this.colStartPos-n)%this.pageSettings.columnPageSize,this.colStartPos=n,this.endPos=this.colStartPos+this.pageSettings.columnPageSize*t*(this.enablePaging?1:this.colValuesLength)-(this.enablePaging?1:0),this.endPos=this.endPos>this.columnCount+1?this.columnCount+1:this.endPos,this.cMembers=this.performSlicing(this.cMembers,[],this.colStartPos,"column"),this.memberCnt=-1,this.pageInLimit=!1,this.isValueHasAdvancedAggregate?("grand sum"!==this.rMembers[this.rMembers.length-1].type&&"grand sum"===this.headerCollection.rowHeaders[this.headerCollection.rowHeaders.length-1].type&&(this.rMembers.push(this.headerCollection.rowHeaders[this.headerCollection.rowHeaders.length-1]),this.removeRowGrandTotal=!0),"grand sum"!==this.cMembers[this.cMembers.length-1].type&&"grand sum"===this.headerCollection.columnHeaders[this.headerCollection.columnHeaders.length-1].type&&(this.cMembers.push(this.headerCollection.columnHeaders[this.headerCollection.columnHeaders.length-1]),this.removeColumnGrandTotal=!0)):(this.rowGrandTotal=this.rowGrandTotal?this.rowGrandTotal:this.headerCollection.rowHeaders[this.headerCollection.rowHeaders.length-1],this.columnGrandTotal=this.columnGrandTotal?this.columnGrandTotal:this.headerCollection.columnHeaders[this.headerCollection.columnHeaders.length-1]))},t.prototype.performSlicing=function(n,t,i,r){for(var u=0;n[u]&&!(this.enablePaging&&this.endPos<=this.memberCnt&&0!==u);){if(this.memberCnt+=n[u].level<=this.measureIndex?"column"===r?this.colValuesLength:this.rowValuesLength:1,!this.pageInLimit&&i<=this.memberCnt&&("column"===r?this.colFirstLvl=this.colFirstLvl+n[u].level:this.rowFirstLvl=this.rowFirstLvl+n[u].level,this.pageInLimit=!0),this.pageInLimit&&!this.enablePaging&&this.endPos<=this.memberCnt){if("column"!==r)break;if(0===n[u].members.length){if(this.colHdrBufferCalculated)break;this.colHdrBufferCalculated=!0;this.endPos+=n[u].level*this.colValuesLength}else if(this.colHdrBufferCalculated)break}if(n[u].members.length>0&&"row"===r&&(this.lastMember[n[u].actualText]=n[u].members[n[u].members.length-1].valueSort.levelName),t.push(n[u].members.length>0?this.removeChildMembers(n[u]):n[u]),n[u].members.length>0&&("column"===r?this.memberCnt-=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&this.columnKeys[n[u].valueSort.axis].showSubTotals?0:this.colValuesLength:this.showSubTotalsAtBottom&&!this.customProperties.isTabularLayout&&this.memberCnt++,t[t.length-1].members=this.performSlicing(n[u].members,[],i,r)),this.pageInLimit||t.pop(),0===n[u].level&&this.pageInLimit&&this.endPos<=this.memberCnt)break;u++}return t},t.prototype.removeChildMembers=function(n){for(var i=Object.keys(n),t=0,r={};t<i.length;)r[i[t]]=n[i[t]],"members"===i[t]&&(r.members=[]),t++;return r},t.prototype.insertAllMember=function(n,t,i,r){var o=n.length,u={hasChild:!1,index:t,level:0,axis:r,isDrilled:!1,indexObject:{},members:[],actualText:"Grand Total",formattedText:this.localeObj?this.localeObj.getConstant("grandTotal"):"Grand Total",ordinal:o,type:"grand sum",valueSort:{}},f,e;for(u.valueSort[u.formattedText]=1,u.valueSort.levelName=u.formattedText,u.valueSort[u.actualText]=1,u.valueSort.uniqueName=u.actualText,f=0,e=t.length;f<e;f++)u.indexObject[t[f]]=t[f];return"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals?n.unshift(u):n.push(u),n},t.prototype.getTableData=function(t,i,u,f,e,o,s,h,c,l){for(var a,v,d,k,tt,it,rt,nt,ut,st,ht,et=t.length,b=0;b<et;b++)if(a=!this.valueAxis&&!this.isLastHeaderHasMeasures&&e.length<this.dataSourceSettings.columns.length+1?this.dataSourceSettings.columns.length+1:e.length,v=t[b],i[a]=v,d=a-Number(Object.keys(i)[0]),k=!i[a].members.length,v.colIndex=0,v.rowIndex=a,tt=!1,it=this.dataSourceSettings.valueSortSettings.headerDelimiter,this.valueAxis&&0===this.dataSourceSettings.rows.length&&this.dataSourceSettings.values.length>1&&(this.rowIndex=n.isNullOrUndefined(this.rowIndex)&&!k&&0===this.dataSourceSettings.rows.length?v.index:this.rowIndex,tt=this.valueAxis&&0===this.dataSourceSettings.rows.length&&v.valueSort.levelName&&0!==v.valueSort.levelName.toString().indexOf("Grand Total"+it),this.valueAxis&&0===this.dataSourceSettings.rows.length&&0===v.valueSort.levelName.toString().indexOf("Grand Total"+it)&&(v.index=this.rowIndex)),tt)k||this.recursiveRowData(t,i,u,a,e,o,k,b,0,s,h,c);else{if(rt=!1,this.showSubTotalsAtBottom&&i[f]&&i[f].hasChild)for(nt=0,ut=i[f].members;nt<ut.length;nt++)if("value"===ut[nt].type){rt=!0;break}if(rt&&!i[a].isSum&&i[a].members&&0===i[a].members.length)continue;if(e[a]||(e[a]=[],this.valueContent[d]={}),e[a][0]=i[a]=this.valueContent[d][0]=r.getFormattedHeader(v,this),this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)){var ct=a,lt=d,at=a,ft=!1;if(((0!==s||0!==this.measureIndex)&&!k||k)&&"value"===v.type&&!v.valueSort.axis||s>this.measureIndex&&"row"===v.axis&&v.valueSort.axis)for(var p=0,ot=!1,vt=v.valueSort.uniqueName?v.valueSort.uniqueName.toString().split(this.valueSortSettings.headerDelimiter):[],y=0,w=1,g=u.length;y<g;++y){if(!ot)for(p=0;p<o;p++)if(vt.indexOf(this.dataSourceSettings.values[p].name)>-1){ot=!0;ft=!0;break}if(s>this.measureIndex&&"row"===v.axis&&v.valueSort.axis)this.updateRowData(t,u,a,e,p,b,y,w,d,h,c);else{if(!i[f]){ft=!1;break}st=this.showSubTotalsAtBottom&&l?l:f;this.updateRowData(i,u,a,e,p,st,y,w,d,h,c)}w=e[a].length}if(!ft)for(y=0,w=1,g=u.length;y<g;++y)w=e[a].length,e[ct][w]=this.valueContent[lt][w]={axis:"value",actualText:"",colSpan:1,colIndex:w,formattedText:"",hasChild:!1};this.recursiveRowData(t,i,u,at,e,o,k,b,o,s,h,c)}else{for(y=0,w=1,g=u.length;y<g;++y)for(ht=u[y].valueSort.uniqueName?u[y].valueSort.uniqueName.toString().split(this.valueSortSettings.headerDelimiter):[],p=0;p<o;p++)(this.valueAxis||this.isLastHeaderHasMeasures||ht.indexOf(this.dataSourceSettings.values[p].name)>-1)&&(this.updateRowData(t,u,a,e,p,b,y,w,d,h,c),w=e[a].length);this.recursiveRowData(t,i,u,a,e,o,k,b,0,s,h,c)}}},t.prototype.insertRowSubTotals=function(n,t,i,u,f,e,o,s){var nt=!!n[i].type&&"value"===n[i].type&&n[i].valueSort.levelName!==n[i].actualText,l,h,k,a,c,g,p;if(n[i].hasChild&&n[i].members.length>0){if(l=[],h=r.frameHeaderWithKeys(n[i]),"value"===n[i].members[0].type){for(var w=0,y=[],v=1,b=0,d=h.members;b<d.length;b++)k=d[b],"value"===k.type&&(y[y.length]=k);for(;w<y.length;){for(a=r.frameHeaderWithKeys(y[w]),c=void 0;v<n.length;v++)if(n[v]&&n[v].valueSort.levelName===a.valueSort.levelName){c=n.indexOf(n[v]);break}c>-1&&(l[l.length]=c);a.formattedText=h.formattedText+" "+a.formattedText;a.isSum=!0;a.members=[];this.getTableData([a],n,t,i,u,f,e,o,s);w++}}else h.formattedText=h.formattedText+" Total",h.members=[],h.isDrilled=!1,h.hasChild=!1,h.isSum=!0,h.type="sum",g=nt?this.getParentIndex(n,h):0,(this.enableVirtualization&&n[i].members&&n[i].members[n[i].members.length-1]&&n[i].members[n[i].members.length-1].valueSort&&n[i].members[n[i].members.length-1].valueSort.levelName===this.lastMember[n[i].actualText]||!this.enableVirtualization)&&this.getTableData([h],n,t,i,u,f,e,o,s,g),l=[i];for(c=0;c<l.length;c++)p=u[l[c]],p=p.map(function(n){return n.formattedText=0===n.colIndex?n.formattedText:"",n}),u[l[c]]=p}},t.prototype.getParentIndex=function(n,t){for(var r=0,i=n.length-1;i>0;i--)if(t.level===n[i].level&&n[i].index){r=i;break}return r},t.prototype.getAggregatedHeaders=function(n,t,i,r,u){var p,f,o,s,l,y,a,e,c;for(this.selectedHeaders={selectedHeader:[],values:[]},p=u.length,f=0;f<p;f++)switch(u[f].type){case"DifferenceFrom":case"PercentageOfDifferenceFrom":o=void 0;s=void 0;this.selectedHeaders.values.push(u[f].name);u[f].baseField&&u[f].baseItem?(o=u[f].baseField,s=u[f].baseItem):this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&t.length>0?(o=t[0].name,s=Object.keys(this.fieldList[t[0].name].members)[0]):n.length>0&&(o=n[0].name,s=Object.keys(this.fieldList[n[0].name].members)[0]);for(var h=!1,v=0,w=n;v<w.length;v++)if(w[v].name===o){this.getAggregatedHeaderData(i,u[f].name,s,!1,"row",u[f].type,this.selectedHeaders.selectedHeader,f);h=!0;break}if(!h)for(l=0,y=t;l<y.length;l++)if(y[l].name===o){this.getAggregatedHeaderData(r,u[f].name,s,!1,"column",u[f].type,this.selectedHeaders.selectedHeader,f);break}break;case"PercentageOfParentRowTotal":case"PercentageOfParentColumnTotal":this.selectedHeaders.values.push(u[f].name);this.getAggregatedHeaderData("PercentageOfParentRowTotal"===u[f].type?i:r,u[f].name,void 0,!1,"PercentageOfParentRowTotal"===u[f].type?"row":"column",u[f].type,this.selectedHeaders.selectedHeader,f);break;case"RunningTotals":this.selectedHeaders.values.push(u[f].name);this.getAggregatedHeaderData(this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)?r:i,u[f].name,void 0,!1,this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)?"column":"row",u[f].type,this.selectedHeaders.selectedHeader,f);break;case"PercentageOfParentTotal":for(o=void 0,this.selectedHeaders.values.push(u[f].name),u[f].baseField?o=u[f].baseField:this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&t.length>0?o=t[0].name:n.length>0&&(o=n[0].name),h=!1,a=n.length,e=0;e<a;e++)if(n[e].name===o){c=e>=this.measureIndex?e+1:e;this.getAggregatedHeaderData(i,u[f].name,void 0,!1,"row",u[f].type,this.selectedHeaders.selectedHeader,f,c);h=!0;break}if(!h)for(a=t.length,e=0;e<a;e++)if(t[e].name===o){c=e;this.valueAxis||this.isLastHeaderHasMeasures||(c=e>=this.measureIndex?e+1:e);this.getAggregatedHeaderData(r,u[f].name,void 0,!1,"column",u[f].type,this.selectedHeaders.selectedHeader,f,c);break}}},t.prototype.getAggregatedHeaderData=function(t,i,r,u,f,e,o,s,h){for(var c,k,v,d,g,y,p,w,nt,l,ut,a=0,b=t;a<b.length;a++){c=b[a];switch(e){case"DifferenceFrom":case"PercentageOfDifferenceFrom":if(-1!==c.valueSort.levelName.toString().split(this.valueSortSettings.headerDelimiter).indexOf(r)){if(k=[],!u&&"row"===f)for(v=0,d=t;v<d.length;v++)g=d[v],g.level>=c.level&&k.push(g);if(o.push(this.updateSelectedHeaders(r,c.level,f,u,i,e,c.valueSort.levelName,u?[c]:"column"===f?t:k,s+1)),c.members.length>0){if(y=!1,p=[],"row"===f)for(w=0,nt=c.members;w<nt.length;w++){if("value"!==(l=nt[w]).type||0!==l.members.length){p.push(l);y=!1;break}y=!0}(!y&&p.length>0||"column"===f)&&this.getAggregatedHeaderData("column"===f?c.members:p,i,r,!0,f,e,o[o.length-1].childMembers,s)}}else c.members.length>0&&this.getAggregatedHeaderData(c.members,i,r,!1,f,e,o,s);break;case"RunningTotals":case"PercentageOfParentRowTotal":case"PercentageOfParentColumnTotal":"grand sum"===c.type?o.push(this.updateSelectedHeaders(void 0,c.level,f,!1,i,e,c.valueSort.levelName,t,s+1)):c.members.length>0&&(o.push(this.updateSelectedHeaders(void 0,c.level,f,!1,i,e,c.valueSort.levelName,c.members,s+1)),this.getAggregatedHeaderData(c.members,i,void 0,!1,f,e,o,s));break;case"PercentageOfParentTotal":if("grand sum"!==c.type)if(c.valueSort.levelName.split(this.valueSortSettings.headerDelimiter).length-1===h)if(c.members.length>0){if(u)for(var it=o[o.length-1].aggregateHeaders,tt=0,rt=c.members;tt<rt.length;tt++)l=rt[tt],it.push(n.extend({},l,null,!0));else ut=n.extend([],c.members,null,!0),o.push(this.updateSelectedHeaders(void 0,c.level,f,!1,i,e,c.valueSort.levelName,ut,s+1)),(it=o[o.length-1].aggregateHeaders).push(n.extend({},c,null,!0));this.getAggregatedHeaderData(c.members,i,void 0,!0,f,e,o,s,h+1)}else u||o.push(this.updateSelectedHeaders(void 0,c.level,f,!1,i,e,c.valueSort.levelName,[c],s+1));else c.members.length>0&&this.getAggregatedHeaderData(c.members,i,void 0,!1,f,e,o,s,h)}}},t.prototype.updateSelectedHeaders=function(t,i,r,u,f,e,o,s,h){return{name:t,level:i,axis:r,isChild:u,value:f,type:e,uniqueName:o,aggregateHeaders:n.extend([],s,null,!0),childMembers:[],valueCount:h}},t.prototype.applyAdvancedAggregate=function(n,t,i){var y,o,p,s,c,h,l,f;if(this.aggregatedValueMatrix=[],this.selectedHeaders.values.length>0){for(var u={},e=[],a=[],v=!1,w=i.length,r=0;r<w;r++)if(void 0!==i[r]&&void 0!==i[r][0]){if(!v)for(y=i[r].length,o=0;o<y;o++)p=i[r][o].actualText,"value"===i[r][o].axis&&-1!==this.selectedHeaders.values.indexOf(p)&&(e.push(o),v=!0);if(!(this.showSubTotalsAtBottom&&i[r][0].isDrilled&&i[r][0].hasChild)&&e.length>0&&"value"===i[r][e[0]].axis&&-1!==this.selectedHeaders.values.indexOf(i[r][e[0]].actualText))for(a.push(r),s=0,c=e;s<c.length;s++)u[r+","+(f=c[s])]=[r,f]}for(this.updateAggregates(n,t,i,this.selectedHeaders.selectedHeader,e,a,u),h=0,l=Object.keys(u);h<l.length;h++)i[u[f=l[h]][0]][u[f][1]].formattedText=this.selectedHeaders.selectedHeader.length>0?this.emptyCellTextContent:"#N/A",this.aggregatedValueMatrix[u[f][0]]||(this.aggregatedValueMatrix[u[f][0]]=[]),this.aggregatedValueMatrix[u[f][0]][u[f][1]]=0;this.updatePivotValues(!0)}},t.prototype.updateAggregates=function(t,i,r,u,f,e,o){for(var wt,gi,eu,a,lt,ou,nt,l,k,su,hu,d,ut,nr,bt,ir,kt,rr,dt,fr,h,gt,er,ft,ni,sr,ti,hr,ii,cr,lr,ri,ar,ui,fi,ei,vr,oi,yr,si,pr,hi,wr,au,ci,br,li,kr,dr,ai,gr,vi,ot,yi,nu,pi,tu,wi,iu,p,bi,ru,v,ki,uu,vu,vt=0,di=u;vt<di.length;vt++){var w=di[vt],st=w.aggregateHeaders,b=w.value,fu=w.type,ct=w.uniqueName,yt="row"===w.axis,tt=void 0,it=[],y=[],pt=[],ht=[],et=[],rt=[];if(-1!==["DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentRowTotal","PercentageOfParentColumnTotal","PercentageOfParentTotal","RunningTotals"].indexOf(w.type))if(yt){if("RunningTotals"!==w.type)for(wt=0,gi=e;wt<gi.length;wt++)if(void 0!==t[v=gi[wt]]&&t[v].valueSort[ct]){tt=t[v];et=0===this.valueAxis||this.valueAxis&&r[v]&&r[v][1]&&r[v][1].actualText===b?r[v]:[];break}}else{for(eu=r.length,a=0;a<eu&&void 0!==r[a]&&void 0===r[a][0];a++)pt.push(r[a]);for(lt=pt.length;lt--;)ou=(ut=pt[lt][f[0]]).actualText,-1===this.selectedHeaders.values.indexOf(ou)&&(y=pt[lt],lt=0);if("RunningTotals"!==w.type){for(nt=y.length,l=0;l<nt;l++)if(k=!1,void 0!==y[l]&&y[l].valueSort[ct]){for(tt=y[l],su=r.length,a=0;a<su;a++)void 0!==(ut=r[a])&&void 0!==ut[0]&&"value"===ut[l].axis&&-1!==this.selectedHeaders.values.indexOf(ut[l].actualText)&&(k=!0,rt[a]=ut[l],ht.push(a));if(k)break}if(0===rt.length&&0===ht.length)for(nt=y.length,l=0;l<nt;l++)if(k=!1,void 0!==y[l]&&0===y[l].valueSort.levelName.indexOf(ct)){for(tt=y[l],hu=r.length,d=0;d<hu;d++)void 0!==(ut=r[d])&&void 0!==ut[0]&&"value"===ut[l].axis&&-1!==this.selectedHeaders.values.indexOf(ut[l].actualText)&&(k=!0,ht.push(d));if(k)break}}}switch(w.type){case"DifferenceFrom":case"PercentageOfDifferenceFrom":if(nr=w.isChild,yt){if(nr){for(var at=ct.split(this.valueSortSettings.headerDelimiter),tr=0,cu=e;tr<cu.length;tr++)if(void 0!==t[p=cu[tr]]&&-1!==t[p].valueSort.levelName.split(this.valueSortSettings.headerDelimiter).indexOf(at[at.length-1])&&tt&&t[p].level===tt.level)for(bt=0,ir=f;bt<ir.length;bt++)h=ir[bt],"value"===(s=r[p][h]).axis&&s.actualText===b&&(it.push([p,h]),o[p+","+h]&&delete o[p+","+h])}else for(kt=0,rr=st;kt<rr.length;kt++)for(var g=rr[kt],ur=0,lu=e;ur<lu.length;ur++)if(void 0!==t[v=lu[ur]]&&t[v].valueSort[g.valueSort.levelName]&&t[v].level===tt.level&&"grand sum"!==t[v].type)for(dt=0,fr=f;dt<fr.length;dt++)h=fr[dt],"value"===(s=r[v][h]).axis&&s.actualText===b&&(it.push([v,h]),o[v+","+h]&&delete o[v+","+h]);for(gt=0,er=it;gt<er.length;gt++){var s=r[(h=er[gt])[0]][h[1]],or=n.isNullOrUndefined(et[h[1]].actualValue)?0:et[h[1]].actualValue,c=(n.isNullOrUndefined(s.actualValue)?0:s.actualValue)-or;c=isNaN(c)||0===s.value&&0===et[h[1]].value?0:c;this.aggregatedValueMatrix[h[0]]||(this.aggregatedValueMatrix[h[0]]=[]);"DifferenceFrom"===fu?(this.aggregatedValueMatrix[h[0]][h[1]]=c,s.formattedText=0===c?this.emptyCellTextContent:this.getFormattedValue(c,b).formattedText):(c=0===or?0:c/or,this.aggregatedValueMatrix[h[0]][h[1]]=c,s.formattedText=s.showSubTotals?0!==c?this.globalize.formatNumber(c,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,s.actualText)}):this.emptyCellTextContent:s.formattedText)}}else{if(nr){for(at=ct.split(this.valueSortSettings.headerDelimiter),nt=y.length,ft=0;ft<nt;ft++)if(k=!1,void 0!==y[ft]&&-1!==y[ft].valueSort.levelName.split(this.valueSortSettings.headerDelimiter).indexOf(at[at.length-1])&&y[ft].level===tt.level){for(ni=0,sr=ht;ni<sr.length;ni++)"value"===(s=r[h=sr[ni]][ft]).axis&&s.actualText===b&&(k=!0,it.push([h,ft]),o[h+","+ft]&&delete o[h+","+ft]);if(k)break}}else for(ti=0,hr=st;ti<hr.length;ti++)for(g=hr[ti],nt=y.length,l=0;l<nt;l++)if(k=!1,void 0!==y[l]&&y[l].valueSort[g.valueSort.levelName]&&tt&&y[l].level===tt.level&&"grand sum"!==y[l].type){for(ii=0,cr=ht;ii<cr.length;ii++)"value"===(s=r[h=cr[ii]][l]).axis&&s.actualText===b&&(k=!0,it.push([h,l]),o[h+","+l]&&delete o[h+","+l]);if(k)break}for(lr=void 0,0===rt.length&&(lr=this.getSelectedColumn(w.uniqueName,i)),ri=0,ar=it;ri<ar.length;ri++)s=r[(h=ar[ri])[0]][h[1]],ui=0,0===rt.length?(fi=this.getSelectedRow(s.rowHeaders,t),ui=this.getAggregateValue(fi.index,lr.indexObject,this.fieldList[b].index,w.type,!1)):ui=rt[h[0]].value,c=s.value-ui,c=isNaN(c)?0:c,this.aggregatedValueMatrix[h[0]]||(this.aggregatedValueMatrix[h[0]]=[]),"DifferenceFrom"===fu?(s.formattedText=0===c?this.emptyCellTextContent:this.getFormattedValue(c,b).formattedText,this.aggregatedValueMatrix[h[0]][h[1]]=c):(c=0===rt[h[0]].value?0:c/rt[h[0]].value,s.formattedText=0!==c?this.globalize.formatNumber(c,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,s.actualText)}):this.emptyCellTextContent,this.aggregatedValueMatrix[h[0]][h[1]]=c)}w.childMembers.length>0&&this.updateAggregates(t,i,r,w.childMembers,f,e,o);break;case"PercentageOfParentRowTotal":case"PercentageOfParentColumnTotal":case"PercentageOfParentTotal":if(yt){for(ei=0,vr=st;ei<vr.length;ei++)for(g=vr[ei],oi=0,yr=e;oi<yr.length;oi++)if(void 0!==t[a=yr[oi]]&&t[a].valueSort[g.valueSort.levelName]&&t[a].level===g.level)for(si=0,pr=f;si<pr.length;si++)h=pr[si],"value"===(s=r[a][h]).axis&&s.actualText===b&&(it.push([a,h]),o[a+","+h]&&delete o[a+","+h]);for(hi=0,wr=it;hi<wr.length;hi++)s=r[(a=wr[hi])[0]][a[1]],au=0===et.length&&tt?this.getAggregateValue(tt.index,i[a[1]-1].indexObject,this.fieldList[b].index,w.type,!1):et[a[1]]?et[a[1]].actualValue:0,c=s.value/au,c=isNaN(c)?0:c,s.formattedText=s.showSubTotals?0!==c?this.globalize.formatNumber(c,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,s.actualText)}):this.emptyCellTextContent:s.formattedText,this.aggregatedValueMatrix[a[0]]||(this.aggregatedValueMatrix[a[0]]=[]),this.aggregatedValueMatrix[a[0]][a[1]]=c}else{for(ci=0,br=st;ci<br.length;ci++)for(g=br[ci],nt=y.length,d=0;d<nt;d++)if(k=!1,void 0!==y[d]&&y[d].valueSort[g.valueSort.levelName]){for(li=0,kr=ht;li<kr.length;li++)h=kr[li],this.showSubTotalsAtBottom&&r[h][0].isDrilled&&r[h][0].hasChild||"value"===(s=r[h][d]).axis&&s.actualText===b&&(k=!0,it.push([h,d]),o[h+","+d]&&delete o[h+","+d]);if(k)break}for(dr=void 0,0===rt.length&&(dr=this.getSelectedColumn(w.uniqueName,i)),ai=0,gr=it;ai<gr.length;ai++)s=r[(a=gr[ai])[0]][a[1]],vi=0,0===rt.length?(fi=this.getSelectedRow(s.rowHeaders,t),vi=this.getAggregateValue(fi.index,dr.indexObject,this.fieldList[b].index,w.type,!1)):vi=rt[a[0]].value,ot=s.value/vi,ot=isNaN(ot)?0:ot,s.formattedText=0!==ot?this.globalize.formatNumber(ot,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,s.actualText)}):this.emptyCellTextContent,this.aggregatedValueMatrix[a[0]]||(this.aggregatedValueMatrix[a[0]]=[]),this.aggregatedValueMatrix[a[0]][a[1]]=ot}break;case"RunningTotals":if(yt){for(yi=0,nu=f;yi<nu.length;yi++)for(h=nu[yi],c=0,pi=0,tu=st;pi<tu.length;pi++)for(g=tu[pi],wi=0,iu=e;wi<iu.length;wi++)if(void 0!==t[p=iu[wi]]&&(s=r[p][h],void 0!==t[p]&&t[p].valueSort[g.valueSort.levelName]&&t[p].level===g.level&&"value"===s.axis&&s.actualText===b)){"grand sum"!==t[p].type&&(c+=s.showSubTotals||!n.isNullOrUndefined(s.actualValue)&&isNaN(s.actualValue)?n.isNullOrUndefined(s.value)||isNaN(s.value)?null:s.value:s.actualValue,s.formattedText=s.showSubTotals?0===c&&s.actualValue&&0!==s.actualValue?"":this.getFormattedValue(c,b).formattedText:s.formattedText,this.aggregatedValueMatrix[p]||(this.aggregatedValueMatrix[p]=[]),this.aggregatedValueMatrix[p][h]=c);o[p+","+h]&&delete o[p+","+h];break}}else for(bi=0,ru=e;bi<ru.length;bi++)if(void 0!==r[v=ru[bi]])for(c=0,ki=0,uu=st;ki<uu.length;ki++)for(g=uu[ki],vu=t[v].hasChild&&t[v].isDrilled&&(!n.isNullOrUndefined(t[v].showSubTotals)&&!t[v].showSubTotals||!this.dataSourceSettings.showSubTotals||!this.dataSourceSettings.showRowSubTotals),nt=y.length,l=0;l<nt;l++)if(s=r[v][l],void 0!==y[l]&&y[l].valueSort[g.valueSort.levelName]&&"value"===s.axis&&s.actualText===b){"grand sum"!==y[l].type&&(n.isNullOrUndefined(s.value)||(c+=s.value),s.formattedText=vu?"":this.getFormattedValue(c,b).formattedText,this.aggregatedValueMatrix[v]||(this.aggregatedValueMatrix[v]=[]),this.aggregatedValueMatrix[v][l]=c);o[v+","+l]&&delete o[v+","+l];break}}}},t.prototype.getSelectedColumn=function(n,t){for(var i,r={axis:"column",index:[],indexObject:{}},u=0,f=t;u<f.length;u++)i=f[u],i&&i.valueSort&&0===i.valueSort.levelName.indexOf(n)&&(r.index=r.index.concat(i.index).sort(function(n,t){return n-t}),r.indexObject=ds({},r.indexObject,i.indexObject));return r},t.prototype.getSelectedRow=function(n,t){for(var i,r=0,u=t;r<u.length;r++)if(i=u[r],i&&(i.valueSort&&i.valueSort.levelName===n||""===n&&"grand sum"===i.type))return i;return null},t.prototype.recursiveRowData=function(t,i,r,u,f,e,o,s,h,c,l,a){o||this.getTableData(i[u].members,i,r,u,f,e,c+1,l,a);this.showSubTotalsAtBottom&&(n.isNullOrUndefined(t[s].showSubTotals)||t[s].showSubTotals)&&this.insertRowSubTotals(i,r,u,f,e,c,l,a);this.isPagingOrVirtualizationEnabled||(i[u].members=[])},t.prototype.updateRowData=function(t,i,r,u,f,e,o,s,h,c,l){var tt=this.fieldList[this.dataSourceSettings.values[f].name].index,p=this.fieldList[this.dataSourceSettings.values[f].name].aggregateType,ot=this.dataSourceSettings.values[f].name,it=[],v={},a=0,g=0,b,y,nt,ft,k;switch(p){case"Index":for(var rt=["cVal","rTotalVal","cTotalVal","gTotalVal"],w=0,ut=0,st=it=[[t[e],i[o]],[t[e],l],[c,i[o]],[c,l]];ut<st.length;ut++)b=st[ut],v[rt[w]]=this.getAggregateValue(b[0].index,b[1].indexObject,tt,p,0!==w),w++;y=v.cVal*v.gTotalVal/(v.rTotalVal*v.cTotalVal);a=!(t[e].members.length>0&&t[e].hasChild&&t[e].isDrilled)||(n.isNullOrUndefined(t[e].showSubTotals)||t[e].showSubTotals)&&this.dataSourceSettings.showRowSubTotals&&this.dataSourceSettings.showSubTotals?n.isNullOrUndefined(v.cVal)?v.cVal:isNaN(y)?0:y:void 0;g=n.isNullOrUndefined(v.cVal)?v.cVal:isNaN(y)?0:y;break;case"PercentageOfGrandTotal":case"PercentageOfColumnTotal":case"PercentageOfRowTotal":for((it=[[t[e],i[o]]]).push("PercentageOfGrandTotal"===p?[c,l]:"PercentageOfColumnTotal"===p?[c,i[o]]:[t[e],l]),rt=["cVal","gTotalVal"],w=0,nt=0,ft=it;nt<ft.length;nt++)b=ft[nt],v[rt[w]]=this.getAggregateValue(b[0].index,b[1].indexObject,tt,p,0!==w),w++;y=v.cVal/v.gTotalVal;a=!(t[e].members.length>0&&t[e].hasChild&&t[e].isDrilled)||(n.isNullOrUndefined(t[e].showSubTotals)||t[e].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals?n.isNullOrUndefined(v.cVal)?v.cVal:isNaN(y)?0:y:void 0;g=n.isNullOrUndefined(v.cVal)?v.cVal:isNaN(y)?0:y;break;default:y=this.getAggregateValue(t[e].index,i[o].indexObject,tt,p,!1);a=!(t[e].members.length>0&&t[e].hasChild&&t[e].isDrilled)||(n.isNullOrUndefined(t[e].showSubTotals)||t[e].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals?y:void 0;g=y}k={fieldName:this.dataSourceSettings.values[f].name,row:t[e],column:i[o],value:a,cellSets:this.getValueCellInfo?this.getCellSet(this.rawIndexObject):[],rowCellType:t[e].hasChild&&t[e].isDrilled?"subTotal":"grand sum"===t[e].type?"grandTotal":"value",columnCellType:i[o].hasChild&&i[o].isDrilled?"subTotal":"grand sum"===i[o].type?"grandTotal":"value",aggregateType:p,skipFormatting:!1};this.getValueCellInfo&&this.getValueCellInfo(k);a=k.value;var ht=t[e].hasChild||i[o].hasChild||"grand sum"===t[e].type||"grand sum"===i[o].type||this.showSubTotalsAtBottom&&t[e].isSum,ct="grand sum"===t[e].type||"grand sum"===i[o].type,et=t[e].members.length>0&&t[e].hasChild&&t[e].isDrilled&&(!n.isNullOrUndefined(t[e].showSubTotals)&&!t[e].showSubTotals||!this.dataSourceSettings.showSubTotals||!this.dataSourceSettings.showRowSubTotals),d=et?"":void 0===a?this.emptyCellTextContent:"Count"===p||"DistinctCount"===p?a.toLocaleString():this.getFormattedValue(a,ot).formattedText;!isNaN(a)&&!n.isNullOrUndefined(a)&&["PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal"].indexOf(p)>=0?d=this.globalize.formatNumber(a,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,k.fieldName)}):et||!isNaN(a)||n.isNullOrUndefined(a)||-1===["PopulationStDev","SampleStDev","PopulationVar","SampleVar"].indexOf(p)||(d="#DIV/0!",a=0);d=k.skipFormatting?n.isNullOrUndefined(a)?this.emptyCellTextContent:a.toString():d;u[r][s]=this.valueContent[h][s]={axis:"value",actualText:ot,indexObject:this.isDrillThrough?this.rawIndexObject:{},rowHeaders:"grand sum"===t[e].type?"":t[e].valueSort.levelName,columnHeaders:"grand sum"===i[o].type?"":i[o].valueSort.levelName,formattedText:d,value:a,hierarchyName:i[o].hierarchyName,actualValue:g,rowIndex:r,colIndex:s,isSum:ht,isGrandSum:ct,showSubTotals:!et};this.rawIndexObject={}},t.prototype.getCellSet=function(n){for(var i,r=[],t=0,u=Object.keys(n);t<u.length;t++)i=u[t],this.data[parseInt(i,10)]&&r.push(this.data[parseInt(i,10)]);return r},t.prototype.updateValueMembers=function(t,i,u,f,e,o,s){var a=u&&!n.isNullOrUndefined(u.levelName)?u.levelName.toString():void 0,v=u&&!n.isNullOrUndefined(u.uniqueName)?u.uniqueName.toString():void 0,w,p,l,nt,h,c,d,g;if(t)for(w=0;w<o;w++){var y=this.dataSourceSettings.values[w],k=y.caption?y.caption:y.name,b={axis:this.valueAxis?"row":"column",rowIndex:this.valueAxis?0:i&&s<=i.rowIndex?i.rowIndex+1:s,actualText:y.name,formattedText:k,level:0,valueSort:{},members:[],type:this.valueAxis?"value":i?i.type:null,index:!this.valueAxis&&i?i.index:null,indexObject:!this.valueAxis&&i?i.indexObject:null};e.length>0&&(b.showSubTotals=y.showSubTotals);p=b.valueSort;p.axis=this.valueAxis?void 0:y.name;p[(a?a+this.valueSortSettings.headerDelimiter:"")+k]=1;p[(v?v+this.valueSortSettings.headerDelimiter:"")+y.name]=1;p.levelName=(a?a+this.valueSortSettings.headerDelimiter:"")+k;p.uniqueName=(v?v+this.valueSortSettings.headerDelimiter:"")+y.name;f.push(b);this.updateValueMembers(!1,i,p,b.members,e,o,s+1)}else for(l=0,nt=e.length;l<nt;l++)h=r.frameHeaderWithKeys(e[l]),h.members=[],h.rowIndex=this.valueAxis?h.rowIndex:s<0?0:s,c={},c.axis=h.valueSort.axis,c[(a?a+this.valueSortSettings.headerDelimiter:"")+h.formattedText]=1,c[(v?v+this.valueSortSettings.headerDelimiter:"")+h.actualText]=1,c.levelName=(a?a+this.valueSortSettings.headerDelimiter:"")+h.formattedText,c.uniqueName=(v?v+this.valueSortSettings.headerDelimiter:"")+h.actualText,h.hierarchyName=h.valueSort.uniqueName,h.valueSort=c,d=c.axis+this.valueSortSettings.headerDelimiter+c.levelName,g=this.fieldList[c.axis],h.isDrilled&&((this.isExpandAll||g.expandAll)&&this.fieldDrillCollection[d]||!this.isExpandAll&&!g.expandAll&&!this.fieldDrillCollection[d])&&(h.isDrilled=!1),f.push(h),h.isDrilled&&e[l].members.length>0?(this.valueAxis&&s<this.measureIndex&&this.measureIndex!==s+1&&(!e[l].hasChild||(n.isNullOrUndefined(e[l].showSubTotals)||e[l].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals)&&this.updateValueMembers(!0,h,c,f[f.length-1].members,[],o,s),this.updateValueMembers(this.measureIndex===s+1,h,c,f[f.length-1].members,e[l].members,o,s+1),!this.valueAxis&&s<this.measureIndex&&this.measureIndex!==s+1&&(!e[l].hasChild||(n.isNullOrUndefined(e[l].showSubTotals)||e[l].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals)&&this.updateValueMembers(!0,h,c,f[f.length-1].members,[],o,s)):s<this.measureIndex&&this.updateValueMembers(!0,h,c,f[f.length-1].members,[],o,s)},t.prototype.reArrangeValueMember=function(n){for(var r,t=[],i=0,u=n;i<u.length;i++)r=u[i],this.valueAxisFields[r.actualText]&&(t[t.length]=r);return t.concat(n).slice(0,n.length)},t.prototype.frameDefinedHeaderData=function(t,i,u,f,e,o){for(var h,a,l,v,c,s=0,y=t.length;s<y;s++)h=!0,!(t[s].members.length>0)||(n.isNullOrUndefined(t[s].showSubTotals)||t[s].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals||(h=!1),a=this.measureIndex<f&&h?1:this.measureIndex>f&&t[s].members.length>0||this.measureIndex!==f+1||!t[s].isDrilled?this.measureIndex===f&&0!==this.measureIndex&&h||this.measureIndex>f&&h&&t[s].valueSort&&t[s].valueSort.axis&&this.measureNames[t[s].valueSort.axis.toString()]?1:0:0!==this.measureIndex&&h?1:0,t[s].members.length&&(l=void 0,v=t[s].members,this.showSubTotalsAtTop?f+1<this.measureIndex&&h?(l=e,v=this.reArrangeValueMember(v)):l=e+a:l=e,this.frameDefinedHeaderData(v,i,u,f+1,l,o)),c=this.measureIndex>f&&t[s].valueSort&&t[s].valueSort.axis&&this.measureNames[t[s].valueSort.axis.toString()]?this.measureIndex:f,i[(e=this.showSubTotalsAtTop?e+1:i.length+a)-1]||(i[e-1]=r.frameHeaderWithKeys(t[s])),t[s].colIndex=e,u[c]||(u[c]=[],this.headerContent[c]={}),u[c][e]=this.headerContent[c][e]=r.frameHeaderWithKeys(t[s]),this.isPagingOrVirtualizationEnabled||this.showSubTotalsAtTop&&0===a||i[e-1]&&(i[e-1].members=[]),this.showSubTotalsAtTop&&(e=i.length,s+1===y&&0===t[s].level&&(this.reformAxisCount=i.length+1))},t.prototype.getHeaderData=function(t,i,u,f,e,o,s,h,c){var st,it,rt,w,ut,ht,ct,g,ft,pt,y,et,wt,nt,k,lt,tt,p,l,bt,a,ot,at,b;if(this.valueAxis||this.isLastHeaderHasMeasures){if(0===f.length&&this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&this.dataSourceSettings.values.length>0&&(this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals&&!n.isNullOrUndefined(this.rMembers)&&this.rMembers.length>0&&"grand sum"===this.rMembers[this.rMembers.length-1].type?(this.updateValueMembers(0===this.measureIndex&&this.rMembers.length>1,null,null,f,this.rMembers.slice(0,this.rMembers.length-1),this.dataSourceSettings.values.length,0),this.updateValueMembers(!1,null,null,f,this.rMembers.slice(this.rMembers.length-1,this.rMembers.length),this.dataSourceSettings.values.length,-1)):"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals&&0===this.measureIndex?(this.updateValueMembers(!1,null,null,f,this.rMembers.slice(0,1),this.dataSourceSettings.values.length,-1),this.updateValueMembers(0===this.measureIndex&&this.rMembers.length>1,null,null,f,this.rMembers.slice(1,this.rMembers.length),this.dataSourceSettings.values.length,0)):(st=0===t.length&&1===this.rMembers.length&&"grand sum"===this.rMembers[0].type,this.updateValueMembers(!st&&0===this.measureIndex,null,null,f,this.rMembers,this.dataSourceSettings.values.length,st?-1:0)),this.getAggregatedHeaders(t,i,f,e,u),this.selectedHeaders.values.length>0))for(tt=this.selectedHeaders.selectedHeader.length,p=0;p<tt;p++)if("row"===(l=this.selectedHeaders.selectedHeader[p]).axis)for(it=l.aggregateHeaders.length,a=0;a<it;a++)if(l.aggregateHeaders[a].actualText===l.value)if(-1!==l.aggregateHeaders[a].valueSort.levelName.indexOf(l.uniqueName))l.uniqueName=l.aggregateHeaders[a].valueSort.levelName,l.aggregateHeaders.splice(a,1),a--,it--;else for(rt=l.aggregateHeaders[a].members.length,w=0;w<rt;w++)"value"!==(b=l.aggregateHeaders[a].members[w]).type&&b.level===l.aggregateHeaders[a].level&&(ut=n.extend([],l.aggregateHeaders[a].members,null,!0),l.aggregateHeaders=[].concat(l.aggregateHeaders,ut,l.aggregateHeaders.splice(a)),l.aggregateHeaders.splice(ut.length+a,1),a=ut.length+a-1,it=l.aggregateHeaders.length);else if(l.aggregateHeaders[a].actualText!==l.value&&l.aggregateHeaders[a].members.length>0)for(rt=l.aggregateHeaders[a].members.length,w=0;w<rt;w++)if((b=l.aggregateHeaders[a].members[w]).actualText===l.value){l.uniqueName===l.aggregateHeaders[a].valueSort.levelName&&(l.uniqueName=b.valueSort.levelName);l.aggregateHeaders[a].members.splice(w,1);l.aggregateHeaders[a]=b;break}for(var vt=e.length,d=this.dataSourceSettings.columns.length,yt=this.valueSortSettings.headerText,v=0;v<vt;v++){if(ht=!n.isNullOrUndefined(e[v].showSubTotals)&&!e[v].showSubTotals,e[v].members.length&&this.getHeaderData(t,i,u,f,e[v].members,o,s,this.showSubTotalsAtTop&&!ht?h+1:h,c),ct=!0,h=this.showSubTotalsAtTop?h:o.length,!ht&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals?o[h]=r.frameHeaderWithKeys(e[v]):(e[v].members.length>0?(this.removeCount++,ct=!1):o[this.showSubTotalsAtTop?h:o.length]=r.frameHeaderWithKeys(e[v]),h=this.showSubTotalsAtTop?h:o.length-1),g=e[v].level,e[v].rowIndex=g,ft=h*c+(this.showSubTotalsAtTop?1:c),e[v].colIndex=ft,s[g]||(s[g]=[],this.headerContent[g]={}),s[g][ft]=this.headerContent[g][ft]=r.getFormattedHeader(e[v],this),pt=0===this.dataSourceSettings.columns.length&&1===this.dataSourceSettings.values.length,(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader||pt)&&!this.valueAxis&&ct)for(y=0;y<c;y++)et=this.dataSourceSettings.values[y].caption?this.dataSourceSettings.values[y].caption:this.dataSourceSettings.values[y].name,wt={axis:"column",actualText:this.dataSourceSettings.values[y].name,formattedText:et,level:0,valueSort:{},colIndex:h*c+1+y,rowIndex:d},s[d]||(s[d]=[],this.headerContent[d]={}),s[d][h*c+1+y]=this.headerContent[d][h*c+1+y]=wt,nt=s[d][h*c+1+y].valueSort,nt[e[v].valueSort.levelName+this.valueSortSettings.headerDelimiter+et]=1,nt.levelName=e[v].valueSort.levelName+this.valueSortSettings.headerDelimiter+et,nt[e[v].valueSort.uniqueName+this.valueSortSettings.headerDelimiter+this.dataSourceSettings.values[y].name]=1,nt.uniqueName=e[v].valueSort.uniqueName+this.valueSortSettings.headerDelimiter+this.dataSourceSettings.values[y].name,nt&&nt[yt]&&(this.valueSortSettings.columnIndex=h*c+1+y);else e[v].valueSort&&e[v].valueSort[yt]&&(this.valueSortSettings.columnIndex=h*c+1);this.isPagingOrVirtualizationEnabled||(o[h].members=[]);this.showSubTotalsAtTop&&(h=o.length,0===e[v].level&&v+1===vt&&(this.reformAxisCount=o.length*c+1))}}else{if(k=[],this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showColumnGrandTotals&&"grand sum"===e[e.length-1].type?(this.updateValueMembers(0===this.measureIndex&&e.length>1,null,null,k,e.slice(0,e.length-1),c,0),this.updateValueMembers(!1,null,null,k,e.slice(e.length-1,e.length),c,-1)):"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showColumnGrandTotals&&0===this.measureIndex?(this.updateValueMembers(!1,null,null,k,e.slice(0,1),c,-1),this.updateValueMembers(0===this.measureIndex&&e.length>1,null,null,k,e.slice(1,e.length),c,0)):(lt=0===i.length&&1===e.length&&"grand sum"===e[0].type,this.updateValueMembers(!lt&&0===this.measureIndex,null,null,k,e,c,lt?-1:0)),this.getAggregatedHeaders(t,i,this.rMembers,k,u),this.selectedHeaders.values.length>0)for(tt=this.selectedHeaders.selectedHeader.length,p=0;p<tt;p++)if("column"===(l=this.selectedHeaders.selectedHeader[p]).axis)if(l.uniqueName===l.value)this.selectedHeaders.selectedHeader.splice(p,1),p--,tt--;else if("Grand Total"===l.uniqueName)for(bt=l.aggregateHeaders.length,a=0;a<bt;a++)if(l.aggregateHeaders[a]&&l.aggregateHeaders[a].members.length>0)for(ot=0,at=l.aggregateHeaders[a].members;ot<at.length;ot++)(b=at[ot]).actualText===l.value&&(l.aggregateHeaders[a]=b,"grand sum"===b.type&&(l.uniqueName=b.valueSort.levelName));this.frameDefinedHeaderData(k,o,s,0,this.showSubTotalsAtTop?0:1,c)}},t.prototype.getAggregateValue=function(t,i,r,u,f){var s=0,o=0,et=0,g=!0,c=!1,v,k,b,l,h,d,tt,e,it,rt,w,p,at;switch(u.toLowerCase()){case"median":for(v=[],k=0;void 0!==t[s];)void 0!==i[e=t[s]]&&(c=!0,this.rawIndexObject[e]=e,n.isNullOrUndefined(this.valueMatrix[e][r].member)||v.push(this.valueMatrix[e][r].member)),s++;(a=v.length)>0&&(v.sort(function(n,t){return n-t}),o=a%2==0?(v[k=a/2<=1?0:a/2-1]+v[k+1])/2:v[k=(a+1)/2<=1?0:(a+1)/2-1]);break;case"count":for(;void 0!==t[s];)void 0!==i[e=t[s]]&&(c=!0,this.rawIndexObject[e]=e,o+=n.isNullOrUndefined(this.valueMatrix[e][r].member)?0:this.allowDataCompression?this.valueMatrix[e][r].member:1),s++;break;case"distinctcount":for(b=[];void 0!==t[s];)void 0!==i[t[s]]&&(this.rawIndexObject[t[s]]=t[s],c=!0,l=this.data[t[s]][this.fieldKeys[this.fields[r]]],n.isNullOrUndefined(l)||(h=l.toString(),(0===b.length||b.length>0&&-1===b.indexOf(h))&&(o+=this.allowDataCompression&&"number"==typeof l?l:1,b.push(h)))),s++;break;case"product":for(;void 0!==t[s];)void 0!==i[e=t[s]]&&(this.rawIndexObject[e]=e,c=!0,h=this.valueMatrix[e][r].member,n.isNullOrUndefined(h)?g&&(o=h):(o=g||n.isNullOrUndefined(o)?1:o,o*=h),g=!1),s++;break;case"populationstdev":case"samplestdev":case"populationvar":case"samplevar":for(var y=0,ot=(l=0,[]),st=0,ht=0,nt=0;void 0!==t[s];)void 0!==i[e=t[s]]&&(c=!0,this.rawIndexObject[e]=e,h=this.valueMatrix[e][r].member,n.isNullOrUndefined(h)||(l+=h,ot.push(h),y++)),s++;if(y>0){for(st=l/y,d=0,tt=ot;d<tt.length;d++)e=tt[d],nt+=Math.pow(e-st,2);o=0===(ht=-1!==["populationstdev","samplestdev"].indexOf(u.toLowerCase())?Math.sqrt(nt/("populationstdev"===u.toLowerCase()?y:y-1)):nt/("populationvar"===u.toLowerCase()?y:y-1))?NaN:ht}else o=l;break;case"min":for(it=!0,o=void 0;void 0!==t[s];)void 0!==i[e=t[s]]&&void 0!==this.valueMatrix[e][r].member&&(c=!0,this.rawIndexObject[e]=e,n.isNullOrUndefined(o)&&n.isNullOrUndefined(this.valueMatrix[e][r].member)?o=this.valueMatrix[e][r].member:it?(o=this.valueMatrix[e][r].member,it=!1):o=this.valueMatrix[e][r].member<o?this.valueMatrix[e][r].member:o),s++;break;case"max":for(rt=!0;void 0!==t[s];)void 0!==i[e=t[s]]&&void 0!==this.valueMatrix[e][r].member&&(c=!0,this.rawIndexObject[e]=e,rt?(o=this.valueMatrix[e][r].member,rt=!1):o=this.valueMatrix[e][r].member>o?this.valueMatrix[e][r].member:o),s++;break;case"calculatedfield":c=!0;var ut=this.calculatedFields[this.fields[r]],ft=ut.formula,ct={};if(this.calculatedFormulas[ut.name])for(var lt=this.calculatedFormulas[ut.name],a=0,vt=lt.length;a<vt;a++)w=lt[a],p=ct[w.formula],void 0===p&&(at=w.type,p=this.getAggregateValue(t,i,w.index,at,!1),ct[w.formula]=p),ft=ft.replace(w.formula,p<0?"("+String(p)+")":String(p));o=(o=this.evaluate(ft))===1/0||o===-1/0?1/0:void 0===o||isNaN(o)?void 0:JSON.parse(String(o));break;default:for(o=void 0;void 0!==t[s];)void 0!==i[e=t[s]]&&(c=!0,f||(this.rawIndexObject[e]=e),h=this.valueMatrix[e][r].member,n.isNullOrUndefined(o)&&n.isNullOrUndefined(h)?o=h:(n.isNullOrUndefined(o)&&(o=0),o+=n.isNullOrUndefined(h)?0:h),n.isNullOrUndefined(h)||et++),s++}return u&&"avg"===u.toLowerCase()&&0!==o&&!n.isNullOrUndefined(o)?o/et:c?o:void 0},t.prototype.evaluate=function(n){return Function('"use strict";return ('+n+")")()},t.prototype.getFormattedValue=function(t,i){var f=null===t?this.localeObj?this.localeObj.getConstant("null"):String(t):void 0===t?this.localeObj?i in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(t):t,r={formattedText:f.toString(),actualText:f,dateText:f},e,u;if(this.formatFields[i]&&(this.formatFields[i].format||this.formatFields[i].skeleton)&&!n.isNullOrUndefined(t))try{e=this.formatFields[i].properties?this.formatFields[i].properties:this.formatFields[i];u=n.extend({},e,null,!0);delete u.name;!u.minimumSignificantDigits&&u.minimumSignificantDigits<1&&delete u.minimumSignificantDigits;!u.maximumSignificantDigits&&u.maximumSignificantDigits<1&&delete u.maximumSignificantDigits;u.type?(r.formattedText=null===this.dateFormatFunction[i].exactFormat(new Date(t))?r.formattedText:this.dateFormatFunction[i].exactFormat(new Date(t)),r.actualText=t):(delete u.type,u.format&&!this.formatRegex.test(u.format)&&(n.isNullOrUndefined(u.minimumFractionDigits)&&delete u.minimumFractionDigits,n.isNullOrUndefined(u.maximumFractionDigits)&&delete u.maximumFractionDigits,n.isNullOrUndefined(u.minimumIntegerDigits)&&delete u.minimumIntegerDigits),r.formattedText=this.globalize.formatNumber(isNaN(Number(t))?t:Number(t),u),r.actualText=isNaN(Number(t))?t:Number(t),r.dateText=isNaN(Number(t))?t:Number(t));"None"!==this.fieldList[i].sort&&u.type&&["date","dateTime","time"].indexOf(this.formatFields[i].type)>-1&&(r.dateText=this.dateFormatFunction[i].fullFormat(new Date(t)));this.fieldList[i].isCustomField&&(r.formattedText="NaN"===r.formattedText?f.toString():r.formattedText,r.dateText="NaN"===r.dateText?f.toString():r.dateText)}catch(t){if(!this.fieldList[i].isCustomField)throw t;}finally{this.fieldList[i].isCustomField&&(r.formattedText=n.isNullOrUndefined(r.formattedText)||"NaN"===r.formattedText?f.toString():r.formattedText,r.dateText=n.isNullOrUndefined(r.dateText)||"NaN"===r.dateText?f.toString():r.dateText)}return r},t.prototype.powerFunction=function(n){if(n.indexOf("^")>-1){for(var t=[];n.indexOf("(")>-1;)n=n.replace(/(\([^()]*\))/g,function(n,i){return t.push(i),"~"+(t.length-1)});for(t.push(n),n="~"+(t.length-1);n.indexOf("~")>-1;)n=n.replace(new RegExp("~(\\d+)","g"),function(n,i){return t[i].replace(/(\w*)\^(\w*)/g,"Math.pow($1,$2)")})}return n},t.prototype.getTabularPivotValues=function(t,i,u){var w,nt,c,e,v,l,lt,rt,ut,d,g,s,wt,p,ot,ct;for(this.tabularPivotValues=[],nt=Object.keys(this.groupingFields).length>0,"row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&!i&&!u&&(this.rowMaxLevel=this.rowMaxLevel+1),c=0;c<this.pivotValues.length;c++){for(var h=void 0,tt=!1,b=!0,f=void 0,a=void 0,it=!1;n.isNullOrUndefined(this.pivotValues[c])&&c<this.pivotValues.length;)this.tabularPivotValues.length++,c++;if(c<this.pivotValues.length&&(h=this.pivotValues[c]),e=h[0]?h[0]:void 0,e&&(f=e.valueSort.levelName.split(this.dataSourceSettings.valueSortSettings.headerDelimiter),(this.dataSourceSettings.showSubTotals||"value"===e.type)&&this.dataSourceSettings.showRowSubTotals||e.formattedText===this.localeObj.getConstant("grandTotal")||e.isSum&&(b=!1),nt)&&(v=this.pivotValues[c-1][0],l=this.tabularPivotValues[this.tabularPivotValues.length-1][this.rowMaxLevel-1],n.isNullOrUndefined(v)&&n.isNullOrUndefined(l)||(lt=v.valueSort.axis,rt=void 0,!n.isNullOrUndefined(l)&&l.valueSort.axis&&(rt=l.valueSort.axis),a=(lt.includes("custom_group")||!n.isNullOrUndefined(rt)&&rt.includes("custom_group"))&&(v.formattedText===f[this.rowMaxLevel-1]&&v.formattedText!==f[f.length-1]||l&&l.formattedText===f[this.rowMaxLevel-1])?v.valueSort.axis?v.valueSort.axis:l.valueSort.axis:e.valueSort.axis)),e&&"row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)){if("value"===e.type&&f.length-1!==this.rowMaxLevel&&f[0]!==this.localeObj.getConstant("grandTotal"))for(ut=0;ut<this.dataSourceSettings.values.length;ut++)if(e.formattedText===this.dataSourceSettings.values[ut].name){b=!1;e.hasChild=!1;break}f.length-1!==this.rowMaxLevel?(e.isDrilled=!0,e.hasChild||e.type?f[0]===this.localeObj.getConstant("grandTotal")&&"grand sum"===e.type?e.hasChild=!0:e.level=f.length-1:e.hasChild=!0):e.level=f.length-1;tt=r.isMemberDrilled(e,f,this.drilledMembers)}if(b&&f&&f.length>1&&"sum"===e.type&&f[f.length-1]===f[f.length-2]&&(b=!1),n.isNullOrUndefined(e)||"row"!==e.axis){for(var k=[],at=this.rowMaxLevel+1,vt=0;vt<this.rowMaxLevel;vt++)k.push(void 0);for(k.push(e),p=h.slice(1,h.length),d=0;d<p.length;d++)p[d].colIndex=at,p[d].rowIndex=this.tabularPivotValues.length,at++;k=k.concat(p);this.tabularPivotValues.push(k)}else if(!n.isNullOrUndefined(h[1])&&(!e.hasChild||!e.isDrilled)&&b){if(g=[],"row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&(t&&tt?f.length-1<this.rowMaxLevel:f.length<=this.rowMaxLevel)&&"value"===e.type&&(this.dataSourceSettings.expandAll?!tt:tt)||f[0]===this.localeObj.getConstant("grandTotal")){for(s=f.length-1;s>=0;s--){if(it=!0,f[s]===f[f.length-2]){if(g[s]=f[f.length-2]+" "+f[f.length-1],0===s)break;for(;s>=0;)g[s-1]=f[s-1],s--;break}g[s]=f[f.length-2]+" "+f[f.length-1]}f=g}w=e.colIndex;for(var y=[],st=f[0],ht=0,o=0;o<f.length-1||o<this.rowMaxLevel;o++){var ft=void 0,et=void 0,yt=e.isDrilled,pt=e.hasChild;("row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)?(ft=!1,et=!1,f[f.length-1]!==f[f.length-2]&&(o<(f.length-1===this.rowMaxLevel&&this.dataSourceSettings.rows.length===this.rowMaxLevel?f.length-2:f.length-1)&&(et=!0),o<f.length-2&&(ft=!0))):(o<this.rowMaxLevel&&(pt=!0),(f.length>1||0===o)&&(yt=!0)),o<f.length-1&&(o>0&&(st=st+this.dataSourceSettings.valueSortSettings.headerDelimiter+f[o]),y.push({actualText:f[o],axis:e.axis,formattedText:f[o],rowIndex:this.tabularPivotValues.length,hasChild:"row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&"grand sum"!==e.type?et:pt,isDrilled:"row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&"grand sum"!==e.type?ft:yt,level:ht,valueSort:{levelName:it&&"value"===e.type&&o===this.rowMaxLevel?e.valueSort.levelName:st,axis:nt?a?a.includes("custom_group")?a:this.dataSourceSettings.rows[o].name:e.valueSort.axis:this.dataSourceSettings.rows[o]?this.dataSourceSettings.rows[o].name:e.valueSort.axis},type:it?e.type:void 0,colIndex:w++,colSpan:1,rowSpan:1})),o>=e.level)&&(wt=0===o?this.rowMaxLevel:this.rowMaxLevel-1,y.push({actualText:"row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)?void 0===f[o]?f[f.length-1]:f[o]:e.formattedText,axis:e.axis,formattedText:"row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)?void 0===f[o]?f[f.length-1]:f[o]:e.formattedText,rowIndex:this.tabularPivotValues.length,hasChild:"row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&"grand sum"!==e.type?et:e.hasChild,isDrilled:"row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&"grand sum"!==e.type?ft:e.isDrilled,level:ht,valueSort:{levelName:e.valueSort.levelName,axis:nt?a?a.includes("custom_group")?a:this.dataSourceSettings.rows[o].name:e.valueSort.axis:this.dataSourceSettings.rows[o].name},type:it||e.type?e.type:void 0,colIndex:w++,colSpan:wt,rowSpan:1}));ht++}for(e.colIndex=w,e.rowIndex=this.tabularPivotValues.length,e.colSpan=1,e.rowSpan=1,"row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&(e.formattedText=f[f.length-1]),y.push(e),this.setColumnSpan(y,e),p=h.slice(1,h.length),ot=1;ot<h.length;ot++)ct=h[ot],ct.colIndex=w+1,ct.rowIndex=this.tabularPivotValues.length,w++;y=y.concat(p);this.tabularPivotValues.push(y)}}return this.tabularPivotValues},t.prototype.setColumnSpan=function(n,t){for(var u,r,f,e=1,i=n.length-1;i>=0;i--)if(0!==i&&n[i].formattedText===n[i-1].formattedText&&n[i].valueSort.levelName===n[i-1].valueSort.levelName&&(n[i].colSpan=0,e++,n[i-1].colSpan=e),i<("row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)?n.length-2:n.length-1)&&!t.isSum&&n[n.length-1].formattedText!==n[n.length-2].formattedText&&"grand sum"!==t.type)for(n[i].hasChild=!0,u=this.dataSourceSettings.drilledMembers,r=0;r<u.length;r++)for(f=0;f<u[r].items.length;f++)u[r].items[f]===n[i].formattedText&&(n[i].isDrilled=!!n[i].isDrilled)},t.prototype.setRowSpan=function(){for(var u,t,r,f=this.headerContent.length,i=0;i<this.rowMaxLevel;i++)if(u=1,this.tabularPivotValues.length>this.rowMaxLevel+f)for(t=this.tabularPivotValues.length-1;t>=f-1;t--)if(t!==f-1){if(r=this.tabularPivotValues,n.isNullOrUndefined(r[t-1]))break;if(n.isNullOrUndefined(r[t-1][i]))u=1;else{var e=r[t-1][i].valueSort.levelName,s=e.lastIndexOf(this.dataSourceSettings.valueSortSettings.headerDelimiter),c=-1!==s?e.substring(0,s):e,o=r[t][i].valueSort.levelName,h=o.lastIndexOf(this.dataSourceSettings.valueSortSettings.headerDelimiter),l=-1!==h?o.substring(0,h):o;r[t][i].formattedText===r[t-1][i].formattedText&&l===c?(r[t][i].rowSpan=0,u++,r[t-1][i].rowSpan=u):u=1}}},t}();const o=ejdashboard.popups;var fl="load",yi="enginePopulating",pi="enginePopulated",gs="fieldDrop",kf="beforeExport",ve="exportComplete",ye="dataBound",nh="cellSelecting",pe="drill",el="editCompleted",ol="aggregateCellInfo",df="onHeadersSort",sl="memberFiltering",th="fieldRemove",ih="aggregateMenuOpen",hl="fieldDragStart",we="beforeServiceInvoke",be="afterServiceInvoke",cl="actionBegin",rh="actionComplete",ll="actionFailure",wi="initial-load",ni="ui-update",al="vertical-scroll",vl="horizontal-scroll",cr="content-ready",ti="data-ready",ke="init-groupingbar",kr="tree-view-update",de="pivot-button-update",dr="init-calculatedfield",uh="init-pivotPager",yl="Sort value",pl="Open conditional formatting dialog",wl="Open number formatting dialog",bl="Number Formatting menu",kl="Conditional Formatting menu",dl="Sort field tree",ge="Edit calculated field",fh="Sort field",eh="Filter field",no="Remove field",oh="Open calculated field dialog",gl="Edit record",na="Save edited records",ta="Add new record",ia="Remove record",to="Aggregate field",io="Window resize",sh="Calculated field applied",hh="Calculated field edited",ra="Field sorted",ch="Field filtered",ua="Field removed",fa="Field aggregated";const c=ejdashboard.grids,et=ejdashboard.navigations,y=ejdashboard.inputs,a=ejdashboard.dropdowns;var ea=function(){function t(n){this.menuInfo=[];this.stringAggregateTypes=["Count","DistinctCount"];this.parent=n}return t.prototype.render=function(n,t){this.parentElement=t;this.openContextMenu(n)},t.prototype.openContextMenu=function(n){var t=this,f=n.target.parentElement.getAttribute("data-uid"),s=r.getFieldInfo(f,this.parent),i,u,e,o;if(this.buttonElement=n.target.parentElement,i="number"!==this.parent.engineModule.fieldList[f].type?1:0,u=this.getMenuItem(i).slice(),this.parent.actionObj.actionName=to,this.parent.actionObj.fieldInfo=s.fieldItem,!this.parent.actionBeginMethod()){e={cancel:!1,fieldName:f,aggregateTypes:u,displayMenuCount:7};o="pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent;try{o.trigger(ih,e,function(r){if(!r.cancel){u=r.aggregateTypes;t.createContextMenu(i,u,r.displayMenuCount);t.currentMenu=n.target;var f=t.currentMenu.getBoundingClientRect();t.parent.enableRtl?t.menuInfo[i].open(f.top+(window.scrollY||document.documentElement.scrollTop),f.left-105):t.menuInfo[i].open(f.top+(window.scrollY||document.documentElement.scrollTop),f.left)}})}catch(n){this.parent.actionFailureMethod(n)}}},t.prototype.createContextMenu=function(t,i,r){var h=this,f=[],o,s,u,c,e;for(f[t]=[],this.menuInfo[t]&&!this.menuInfo[t].isDestroyed&&this.menuInfo[t].destroy(),o=[],s=0;s<i.length;s++)u=i[s],t?this.stringAggregateTypes.indexOf(u)>-1&&o.indexOf(u)<0&&(f[t].push({text:this.parent.localeObj.getConstant(u),id:this.parent.element.id+"StringMenu_"+u}),o.push(u)):this.parent.getAllSummaryType().indexOf(u)>-1&&o.indexOf(u)<0&&(f[t].push({text:this.parent.localeObj.getConstant(u),id:this.parent.element.id+"_"+u}),o.push(u));f[t].length>r&&(f[t].splice(r),f[t].push({text:this.parent.localeObj.getConstant("MoreOption"),id:this.parent.element.id+"_MoreOption"}));c={items:f[t],enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:this.parent.cssClass,beforeOpen:this.beforeMenuOpen.bind(this,t),onClose:function(){n.select("#"+h.buttonElement.id,h.parentElement).focus()},select:this.selectOptionInContextMenu.bind(this)};e=document.getElementById(this.parent.element.id+(t?"valueFieldStringContextMenu":"valueFieldContextMenu"));null!==e?e.innerHTML="":e=n.createElement("ul",{id:this.parent.element.id+(t?"valueFieldStringContextMenu":"valueFieldContextMenu")});this.parent.element.appendChild(e);this.menuInfo[t]=new et.ContextMenu(c);this.menuInfo[t].isStringTemplate=!0;this.menuInfo[t].appendTo(e)},t.prototype.getMenuItem=function(n){for(var t,i=[],r=0;r<this.parent.aggregateTypes.length;r++)t=this.parent.aggregateTypes[r],n?this.stringAggregateTypes.indexOf(t)>-1&&-1===i.indexOf(t)&&i.push(t):this.parent.getAllSummaryType().indexOf(t)>-1&&-1===i.indexOf(t)&&i.push(t);return i},t.prototype.beforeMenuOpen=function(n,t){t.element.style.zIndex=(this.menuInfo[n].element.style.zIndex+3).toString();t.element.style.display="inline"},t.prototype.createValueSettingsDialog=function(t,i,r){var f,u;this.parentElement=i;f=n.createElement("div",{id:this.parentElement.id+"_ValueDialog",className:"e-value-field-settings",attrs:{"data-field":t.getAttribute("data-uid")?t.getAttribute("data-uid"):t.getAttribute("data-field")}});this.parentElement.appendChild(f);u=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,header:this.parent.localeObj.getConstant("valueFieldSettings"),content:this.createFieldOptions(t,r),isModal:!0,visible:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"320px",height:"auto",position:{X:"center",Y:"center"},buttons:[{click:this.updateValueSettings.bind(this),isFlat:!1,buttonModel:{cssClass:wt+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:function(){u.hide()},isFlat:!1,buttonModel:{cssClass:cu+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}],closeOnEscape:"pivotfieldlist"!==this.parent.getModuleName()||"Popup"!==this.parent.renderMode,target:this.parentElement,close:this.removeDialog.bind(this),cssClass:this.parent.cssClass});u.isStringTemplate=!0;u.appendTo(f)},t.prototype.createFieldOptions=function(t,i){var d=this,vt=t.getAttribute("data-caption"),o=i&&"MoreOption"!==i?i:t.getAttribute("data-type"),e=t.getAttribute("data-basefield"),v=t.getAttribute("data-baseitem"),w,dt,b,ft,et,ot,st,ct,lt,k,u,at;o="undefined"!==o.toString()?o:"Sum";for(var yt=[],h=this.parent.aggregateTypes,pt=[],s=0;s<h.length;s++)this.parent.getAllSummaryType().indexOf(h[s])>-1&&pt.indexOf(h[s])<0&&(yt.push({value:h[s],text:this.parent.localeObj.getConstant(h[s])}),pt.push(h[s]));var wt=["DifferenceFrom","PercentageOfDifferenceFrom"],bt=["DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"],g=n.extend([],this.parent.dataSourceSettings.rows,null,!0);g=g.concat(this.parent.dataSourceSettings.columns);for(var c=[],f=[],nt=0,kt=g;nt<kt.length;nt++){var p=kt[nt],fi=p.name,ei=p.caption?p.caption:p.name;c.push({value:fi,text:ei})}0===Object.keys(c).length?(c.push({value:"",text:""}),e="",f=[]):(w="undefined"!==(e=e&&"undefined"!==e.toString()&&"null"!==e.toString()?e:c[0].value).toString()?e:c[0].value,dt=r.isDateField(w,this.parent.engineModule),f=this.parent.engineModule.fieldList[w].dateMember.map(function(n){return dt?n.formattedText:d.parent.engineModule.getFormattedValue(n.actualText,w).formattedText}));v="undefined"!==v.toString()?v:f[0];var gt=n.createElement("div",{className:"e-value-field-div-content",id:this.parentElement.id+"_field_div_content",attrs:{"data-type":o,"data-caption":vt,"data-basefield":e,"data-baseitem":v}}),tt=n.createElement("div",{className:"e-field-name-text-container"}),l=n.createElement("div",{className:"e-field-option-container"}),it=n.createElement("div",{className:"e-type-option-container"}),rt=n.createElement("div",{className:"e-base-field-option-container"}),ut=n.createElement("div",{className:"e-base-item-option-container"}),ni=n.createElement("div",{className:"e-field-name-title"});ni.innerText=this.parent.localeObj.getConstant("sourceName")+" ";b=n.createElement("div",{className:"e-field-name-content"});b.innerText=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(t.getAttribute("data-uid")?t.getAttribute("data-uid"):t.getAttribute("data-field")):t.getAttribute("data-uid")?t.getAttribute("data-uid"):t.getAttribute("data-field");this.buttonElement=this.buttonElement?this.buttonElement:document.getElementsByClassName(b.innerText)[0];ft=n.createElement("div",{className:"e-type-option-text"});ft.innerText=this.parent.localeObj.getConstant("sourceCaption");et=n.createElement("div",{className:"e-base-field-option-text"});et.innerText=this.parent.localeObj.getConstant("summarizeValuesBy");ot=n.createElement("div",{className:"e-base-item-option-text"});ot.innerText=this.parent.localeObj.getConstant("baseField");st=n.createElement("div",{className:"e-type-option-text"});st.innerText=this.parent.localeObj.getConstant("baseItem");var ht=n.createElement("div",{className:"e-caption-input-container"}),ti=n.createElement("div",{id:this.parentElement.id+"_type_option"}),ii=n.createElement("div",{id:this.parentElement.id+"_base_field_option"}),ri=n.createElement("div",{id:this.parentElement.id+"_base_item_option"}),ui=n.createElement("input",{id:this.parentElement.id+"type_input_option",className:"e-caption-input-text",attrs:{type:"text"}});return tt.appendChild(ni),tt.appendChild(b),ht.appendChild(ft),ht.appendChild(ui),it.appendChild(et),rt.appendChild(ot),ut.appendChild(st),it.appendChild(ti),rt.appendChild(ii),ut.appendChild(ri),l.appendChild(tt),l.appendChild(ht),l.appendChild(it),l.appendChild(rt),l.appendChild(ut),gt.appendChild(l),ct=this,lt=new a.DropDownList({dataSource:yt,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:o,cssClass:ns+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(n){k.enabled=-1!==bt.indexOf(n.value);u.enabled=-1!==wt.indexOf(n.value);u.enabled&&1===u.dataSource.length&&(u.dataSource=f,u.dataBind())}}),lt.isStringTemplate=!0,lt.appendTo(ti),k=new a.DropDownList({dataSource:c,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:e,enabled:-1!==bt.indexOf(o),cssClass:ns+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(n){var t=r.isDateField(n.value,d.parent.engineModule);f=ct.parent.engineModule.fieldList[n.value].dateMember.map(function(i){return t?i.formattedText:d.parent.engineModule.getFormattedValue(i.actualText,n.value).formattedText});u.dataSource=f;u.value=f[0];u.filterBarPlaceholder=ct.parent.localeObj.getConstant("example")+" "+f[0];u.itemData=null;u.dataBind()}}),k.isStringTemplate=!0,k.appendTo(ii),u=new a.DropDownList({dataSource:f,enableRtl:this.parent.enableRtl,locale:this.parent.locale,value:v,allowFiltering:!0,filterBarPlaceholder:this.parent.localeObj.getConstant("example")+" "+f[0],enabled:-1!==wt.indexOf(o),cssClass:uc+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%"}),u.isStringTemplate=!0,u.appendTo(ri),at=new y.MaskedTextBox({placeholder:"Enter field caption",enableRtl:this.parent.enableRtl,locale:this.parent.locale,value:vt,width:"100%",cssClass:this.parent.cssClass}),at.isStringTemplate=!0,at.appendTo(ui),gt},t.prototype.selectOptionInContextMenu=function(t){var f,c,i,u,s;if(null!==t.item.text){if(f=this.currentMenu.parentElement,c=r.getFieldInfo(f?f.getAttribute("data-uid"):"",this.parent),this.parent.actionObj.actionName=to,this.parent.actionObj.fieldInfo=c.fieldItem,this.parent.actionBeginMethod())return;i=t.item.id.split("_").pop();try{if("MoreOption"===i||"PercentageOfDifferenceFrom"===i||"PercentageOfParentTotal"===i||"DifferenceFrom"===i)this.createValueSettingsDialog(f,this.parentElement,i);else{var h=f.getAttribute("data-uid"),o=this.parent.dataSourceSettings.values,l=f.querySelector("."+ie),e=t.item.text+" "+this.parent.localeObj.getConstant("of")+" "+this.parent.engineModule.fieldList[h].caption;for(e=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(e):e,this.parent.dataSourceSettings.showAggregationOnValueField&&(l.innerText=e),l.setAttribute("title",e),f.setAttribute("data-type",i),u=0;u<this.parent.dataSourceSettings.values.length;u++)this.parent.dataSourceSettings.values[u].name===h&&(s=n.extend({},o[u].properties?o[u].properties:o[u],null,!0),s.type=i,this.parent.engineModule.fieldList[h].aggregateType=i,o.splice(u,1,s),this.parent.lastAggregationInfo=s);this.updateDataSource()}}catch(t){this.parent.actionFailureMethod(t)}}},t.prototype.updateDataSource=function(n){!1===this.parent.isDeferLayoutUpdate||this.parent.pivotGridModule&&!1===this.parent.pivotGridModule.pivotDeferLayoutUpdate||"pivotview"===this.parent.getModuleName()||this.parent.isAdaptive&&"pivotfieldlist"===this.parent.getModuleName()&&"Popup"===this.parent.renderMode?this.parent.updateDataSource(n):"pivotfieldlist"===this.parent.getModuleName()&&"Popup"===this.parent.renderMode?(this.parent.pivotGridModule.setProperties({dataSourceSettings:this.parent.dataSourceSettings.properties},!0),this.parent.pivotGridModule.notify(ni,this),this.parent.pivotGridModule.engineModule=this.parent.engineModule):this.parent.triggerPopulateEvent()},t.prototype.updateValueSettings=function(){var i,c=n.getInstance(n.select("#"+this.parentElement.id+"_ValueDialog",document),o.Dialog),p=c.element,f=n.getInstance(n.select("#"+this.parentElement.id+"type_input_option"),y.MaskedTextBox),e=n.getInstance(n.select("#"+this.parentElement.id+"_type_option"),a.DropDownList),l=n.getInstance(n.select("#"+this.parentElement.id+"_base_field_option"),a.DropDownList),v=n.getInstance(n.select("#"+this.parentElement.id+"_base_item_option"),a.DropDownList),s=p.getAttribute("data-field"),h,u,t;(this.parentElement.querySelector("."+w)&&(i=this.parentElement.getElementsByClassName(w+" "+s.replace(/[^A-Z0-9]/gi,""))[0]),i)&&(h=i.querySelector("."+ie),u=this.parent.dataSourceSettings.showAggregationOnValueField?this.parent.localeObj.getConstant(e.value)+" "+this.parent.localeObj.getConstant("of")+" "+f.value:f.value,u=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(u):u,h.innerText=u,h.setAttribute("title",u),i.setAttribute("data-type",e.value),i.setAttribute("data-caption",f.value),i.setAttribute("data-basefield",l.value),i.setAttribute("data-baseitem",v.value));t=r.getFieldByName(s,this.parent.dataSourceSettings.values);(t=t.properties?t.properties:t).caption=f.value;t.type=e.value;t.baseField=l.value;t.baseItem=v.value;this.parent.engineModule.fieldList[s].aggregateType=t.type;c.close();this.parent.lastAggregationInfo=t;this.updateDataSource(!0)},t.prototype.removeDialog=function(){this.buttonElement&&n.select("#"+this.buttonElement.id,this.parentElement)&&n.select("#"+this.buttonElement.id,this.parentElement).focus();var i=n.select("#"+this.parentElement.id+"_ValueDialog",document),t=i?n.getInstance(i,o.Dialog):null;t&&!t.isDestroyed&&t.destroy();document.getElementById(this.parentElement.id+"_ValueDialog")&&n.remove(document.getElementById(this.parentElement.id+"_ValueDialog"))},t.prototype.destroy=function(){this.parent&&this.parent.isDestroyed||(this.cleanupMenuInstances(),this.cleanupDialogs(),this.cleanupDOMElements(),this.currentMenu=null,this.buttonElement=null)},t.prototype.cleanupMenuInstances=function(){var t,i,r,u;if(this.menuInfo){for(t=0;t<this.menuInfo.length;t++)this.menuInfo[t]&&!this.menuInfo[t].isDestroyed&&this.menuInfo[t].destroy();this.menuInfo=[]}for(i=0,r=[document.getElementById(this.parent.element.id+"valueFieldContextMenu"),document.getElementById(this.parent.element.id+"valueFieldStringContextMenu")];i<r.length;i++)u=r[i],u&&n.remove(u)},t.prototype.cleanupDialogs=function(){var t,i;this.parentElement&&(t=n.select("#"+this.parentElement.id+"_ValueDialog",document),t&&(i=n.getInstance(t,o.Dialog),i&&!i.isDestroyed&&(this.cleanupDialogComponents(t),i.destroy()),n.remove(t)))},t.prototype.cleanupDialogComponents=function(t){var f,i,r,e,s,o,u;if(t&&this.parentElement)for(f=n.select("#"+this.parentElement.id+"type_input_option",t),f&&(i=n.getInstance(f,y.MaskedTextBox),i&&!i.isDestroyed&&i.destroy()),r=0,e=["#"+this.parentElement.id+"_type_option","#"+this.parentElement.id+"_base_field_option","#"+this.parentElement.id+"_base_item_option"];r<e.length;r++)s=e[r],o=n.select(s,t),o&&(u=n.getInstance(o,a.DropDownList),u&&!u.isDestroyed&&u.destroy())},t.prototype.cleanupDOMElements=function(){for(var u,r,t=0,i=[this.parent.element.id+"valueFieldContextMenu",this.parent.element.id+"valueFieldStringContextMenu"];t<i.length;t++)u=i[t],r=document.getElementById(u),r&&n.remove(r)},t}(),oa=function(){function t(n){this.isAutoFitEnabled=!1;this.pivotColumns=[];this.indentCollection={};this.colPos=0;this.lastSpan=0;this.lvlCollection={};this.hierarchyCollection={};this.lvlPosCollection={};this.hierarchyPosCollection={};this.position=0;this.measurePos=0;this.maxMeasurePos=0;this.hierarchyCount=0;this.actualText="";this.drilledLevelInfo={};this.selectedCells=[];this.parent=n;this.resColWidth=this.parent.isTabular?this.parent.showGroupingBar&&this.parent.groupingBarModule?this.parent.isAdaptive?110:150:this.parent.gridSettings.columnWidth:this.parent.showGroupingBar&&this.parent.groupingBarModule?this.parent.isAdaptive?180:250:this.parent.isAdaptive?140:200;this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule;this.gridSettings=this.parent.gridSettings;this.formatList=this.getFormatList();this.aggMenu=new ea(this.parent)}return t.prototype.render=function(t){var r,i;(t&&(this.timeOutObj&&(clearTimeout(this.timeOutObj),this.timeOutObj=void 0),this.removeAllHyperlinkEventHandlers(),this.initProperties()),this.resColWidth=this.parent.isTabular?this.parent.showGroupingBar&&this.parent.groupingBarModule?this.parent.isAdaptive?110:150:this.parent.gridSettings.columnWidth:this.parent.showGroupingBar&&this.parent.groupingBarModule?this.parent.isAdaptive?180:250:this.parent.isAdaptive?140:200,this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.gridSettings=this.parent.gridSettings,this.formatList=this.getFormatList(),this.parent.gridCellCollection={},this.injectGridModules(this.parent),this.rowStartPos=this.getRowStartPos(),this.parent.grid&&this.parent.grid.element&&this.parent.element.querySelector("."+yt))?(this.parent.notEmpty=!0,this.engine.isEngineUpdated?"olap"!==this.parent.dataType&&(this.parent.isTabular&&(this.engine.headerContent=this.frameDataSource("header")),(this.parent.enableValueSorting||this.parent.isTabular)&&(this.engine.valueContent=this.frameDataSource("value"))):(this.engine.headerContent=this.frameDataSource("header"),this.engine.valueContent=this.frameDataSource("value")),this.engine.isEngineUpdated=!1,r=this.parent.isTabular?this.parent.engineModule.rowMaxLevel+1:1,this.parent.grid.setProperties({frozenColumns:r,columns:this.frameStackedHeaders(),dataSource:("olap"===this.parent.dataType&&""!==this.parent.dataSourceSettings.url||this.parent.dataSourceSettings.dataSource&&this.parent.engineModule.data.length>0&&this.parent.dataSourceSettings.values.length>0)&&!this.engine.isEmptyData?this.frameGridDataSource(this.engine.valueContent):this.frameDataSource("value")},!0),this.parent.grid.notify("datasource-modified",{}),this.parent.isScrolling&&(this.parent.resizeInfo={}),this.parent.grid.width=this.calculateGridWidth(),this.parent.grid.refreshColumns(),this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+hi)&&this.parent.groupingBarModule.setGridRowWidth(),this.isAutoFitEnabled?this.addPivotAutoFitClass():this.removePivotAutoFitClass(),!this.gridSettings.allowAutoResizing&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+hi)&&this.parent.groupingBarModule.refreshUI(),this.parent.isScrolling||this.calculateGridHeight(!0)):(this.parent.element.innerHTML="",this.bindGrid(this.parent,!!this.engine.isEmptyData),i=n.createElement("div",{id:this.parent.element.id+"_grid"}),this.parent.element.appendChild(i),this.parent.grid.isStringTemplate=!0,this.parent.grid.appendTo(i));this.parent.grid.on(c.headerRefreshed,this.refreshHeader,this)},t.prototype.initProperties=function(){this.rowStartPos=void 0;this.maxIndent=void 0;this.resColWidth=void 0;this.isOverflows=void 0;this.indentCollection={};this.formatList=void 0;this.colPos=0;this.colGrandPos=void 0;this.rowGrandPos=void 0;this.lastSpan=0;this.field=void 0;this.fieldCaption=void 0;this.lvlCollection={};this.hierarchyCollection={};this.lvlPosCollection={};this.hierarchyPosCollection={};this.position=0;this.measurePos=0;this.maxMeasurePos=0;this.hierarchyCount=0;this.actualText="";this.timeOutObj=void 0},t.prototype.refreshHeader=function(){var i=this.parent.element.querySelector("."+nr),u,e;if(this.parent.enableVirtualization&&!n.isNullOrUndefined(i)){var r=n.closest(i,"."+at).querySelector("."+dt),t=this.parent.element.querySelector("."+ai),f=i.querySelector("."+li);(this.parent.virtualHeaderDiv=t.querySelector("."+li),t.querySelector("."+li)?n.remove(t.querySelector("."+li)):this.parent.virtualHeaderDiv=n.createElement("div",{className:li}),t.appendChild(this.parent.virtualHeaderDiv),f&&n.setStyleAttribute(this.parent.virtualHeaderDiv,{height:0,width:f.style.width}),t.querySelector("."+b))&&(n.setStyleAttribute(t.querySelector("."+b),{transform:i.querySelector("."+b).style.transform.split(",")[0]+",0px)"}),u=parseInt(t.querySelector("."+b).style.transform.split("(")[1].split(",")[0].split("px")[0],10),this.parent.enableRtl?this.parent.element.querySelector("."+vi).style.right=Number(u)+"px":this.parent.element.querySelector("."+vi).style.left=Number(-u)+"px");e=this.parent.isAdaptive?i:r&&"none"!==r.style.display?r:i.parentElement;t.scrollLeft=e.scrollLeft}},t.prototype.bindGrid=function(n,t){this.injectGridModules(n);this.parent.grid=new c.Grid({cssClass:this.parent.cssClass,frozenColumns:1,frozenRows:0,enableHover:!1,dataSource:t?this.frameEmptyData():this.frameDataSource("value"),columns:t?this.frameEmptyColumns():this.frameStackedHeaders(),height:t?"auto":this.calculateGridHeight(),width:t?this.gridSettings.allowAutoResizing?this.parent.width:400:this.calculateGridWidth(),locale:n.locale,enableRtl:n.enableRtl,allowExcelExport:n.allowExcelExport,allowPdfExport:n.allowPdfExport,allowResizing:this.gridSettings.allowResizing,allowTextWrap:this.gridSettings.allowTextWrap,clipMode:this.gridSettings.clipMode,allowReordering:this.gridSettings.allowReordering,allowSelection:this.gridSettings.allowSelection,contextMenuItems:this.gridSettings.contextMenuItems,selectedRowIndex:this.gridSettings.selectedRowIndex,selectionSettings:this.gridSettings.selectionSettings,textWrapSettings:this.gridSettings.textWrapSettings,printMode:this.gridSettings.printMode,rowHeight:this.gridSettings.rowHeight,gridLines:this.gridSettings.gridLines,contextMenuClick:this.contextMenuClick.bind(this),contextMenuOpen:this.contextMenuOpen.bind(this),beforeCopy:this.gridSettings.beforeCopy?this.gridSettings.beforeCopy.bind(this.parent):void 0,beforePrint:this.gridSettings.beforePrint?this.gridSettings.beforePrint.bind(this.parent):void 0,printComplete:this.gridSettings.printComplete?this.gridSettings.printComplete.bind(this.parent):void 0,rowSelecting:this.gridSettings.rowSelecting?this.gridSettings.rowSelecting.bind(this.parent):void 0,rowSelected:this.rowSelected.bind(this),rowDeselecting:this.gridSettings.rowDeselecting?this.gridSettings.rowDeselecting.bind(this.parent):void 0,rowDeselected:this.rowDeselected.bind(this),cellSelecting:this.cellSelecting.bind(this),cellSelected:this.cellSelected.bind(this),cellDeselecting:this.gridSettings.cellDeselecting?this.gridSettings.cellDeselecting.bind(this.parent):void 0,cellDeselected:this.cellDeselected.bind(this),resizeStart:this.gridSettings.resizeStart?this.gridSettings.resizeStart.bind(this.parent):void 0,columnDragStart:this.gridSettings.columnDragStart?this.gridSettings.columnDragStart.bind(this):void 0,columnDrag:this.gridSettings.columnDrag?this.gridSettings.columnDrag.bind(this):void 0,columnDrop:this.gridSettings.columnDrop?this.gridSettings.columnDrop.bind(this):void 0,beforeExcelExport:this.beforeExcelExport.bind(this),resizing:this.setGroupWidth.bind(this),resizeStop:this.onResizeStop.bind(this),queryCellInfo:this.queryCellInfo.bind(this),dataBound:this.dataBound.bind(this),headerCellInfo:this.headerCellInfo.bind(this),excelHeaderQueryCellInfo:this.excelHeaderQueryCellInfo.bind(this),pdfHeaderQueryCellInfo:this.pdfHeaderQueryCellInfo.bind(this),excelQueryCellInfo:this.excelQueryCellInfo.bind(this),pdfQueryCellInfo:this.pdfQueryCellInfo.bind(this),beforePdfExport:this.gridSettings.beforePdfExport?this.gridSettings.beforePdfExport.bind(this):void 0,pdfExportComplete:this.pdfExportComplete.bind(this),excelExportComplete:this.excelExportComplete.bind(this),actionComplete:this.actionComplete.bind(this)});this.parent.grid.on("header-refreshed",this.headerRefreshed.bind(this));this.parent.grid.on("export-DataBound",this.excelDataBound.bind(this))},t.prototype.actionComplete=function(t){if(t&&"refresh"===t.requestType&&this.isAutoFitEnabled&&this.removePivotAutoFitClass(),this.parent&&this.parent.isWindowResized&&this.selectedCells&&this.selectedCells.length>0){this.parent.grid.clearSelection();var r=this.parent.element,i=[];this.selectedCells.forEach(function(n){var t,u;null!=n.colIndex&&(t='[aria-colindex="'+(n.colIndex+1)+'"]',null!=n.rowIndex&&(t+='[index="'+n.rowIndex+'"]'),u=r.querySelector(t),u&&i.push(u))});i.forEach(function(t){n.addClass([t],[it,tt])})}this.parent.isWindowResized=!1},t.prototype.addPivotAutoFitClass=function(){document.body.classList.contains(ku)||document.body.classList.add(ku);document.body.classList.contains(ae)||document.body.classList.add(ae)},t.prototype.removePivotAutoFitClass=function(){document.body.classList.contains(ku)&&document.body.classList.remove(ku);document.body.classList.contains(ae)&&document.body.classList.remove(ae)},t.prototype.headerRefreshed=function(){var t=this.parent.element.querySelector("."+ai);this.parent.lastGridSettings&&Object.keys(this.parent.lastGridSettings).indexOf("allowResizing")>-1&&!n.isNullOrUndefined(t)&&t.querySelector("."+b)&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+hi)&&(this.parent.lastGridSettings=void 0,this.parent.groupingBarModule.setGridRowWidth())},t.prototype.beforeExcelExport=function(t){n.isNullOrUndefined(t.gridObject.columns)||n.isNullOrUndefined(this.parent.pivotColumns)||(t.gridObject.columns[t.gridObject.columns.length-1].width=this.parent.pivotColumns[this.parent.pivotColumns.length-1].width);this.parent.trigger("beforeExcelExport",t)},t.prototype.rowSelected=function(n){this.parent.renderModule.selected();this.parent.trigger("rowSelected",n)},t.prototype.rowDeselected=function(n){this.parent.renderModule.selected();this.parent.trigger("rowDeselected",n)},t.prototype.cellSelected=function(n){this.parent.rowRangeSelection.enable?(this.parent.grid.selectionModule.selectRowsByRange(this.parent.rowRangeSelection.startIndex,this.parent.rowRangeSelection.endIndex),this.parent.rowRangeSelection.enable=!1):(this.parent.renderModule.selected(),this.parent.trigger("selected",n))},t.prototype.cellSelecting=function(t){var i=this.parent.grid.selectionModule.actualTarget;!n.isNullOrUndefined(i)&&(i.classList.contains("e-expand")||i.classList.contains("e-collapse")||this.parent.allowGrouping&&!n.isNullOrUndefined(i.closest(".e-valuescontent")))&&(t.cancel=!0);this.parent.trigger("selecting",t)},t.prototype.cellDeselected=function(n){this.parent.renderModule.selected();this.parent.trigger("cellDeselected",n)},t.prototype.queryCellInfo=function(n){this.parent.renderModule.rowCellBoundEvent(n)},t.prototype.headerCellInfo=function(n){this.parent.renderModule.columnCellBoundEvent(n)},t.prototype.excelHeaderQueryCellInfo=function(n){this.parent.renderModule.excelColumnEvent(n)},t.prototype.pdfQueryCellInfo=function(n){this.parent.renderModule.pdfRowEvent(n)},t.prototype.excelQueryCellInfo=function(n){this.parent.renderModule.excelRowEvent(n)},t.prototype.pdfHeaderQueryCellInfo=function(n){this.parent.renderModule.pdfColumnEvent(n)},t.prototype.pdfExportComplete=function(n){void 0!==this.parent.lastColumn&&this.parent.lastColumn&&"auto"!==this.parent.lastColumn.width&&(this.parent.lastColumn.width="auto",this.parent.lastColumn=void 0);var t={type:"PDF",promise:n.promise};this.parent.trigger(ve,t)},t.prototype.excelExportComplete=function(n){void 0!==this.parent.lastColumn&&this.parent.lastColumn&&"auto"!==this.parent.lastColumn.width&&(this.parent.lastColumn.width="auto",this.parent.lastColumn=void 0);var t={type:"Excel/CSV",promise:n.promise};this.parent.trigger(ve,t)},t.prototype.dataBound=function(){if(this.parent.notEmpty&&this.calculateGridHeight(!0),this.parent.isScrolling=!1,this.setFocusOnLastCell(),n.isNullOrUndefined(this.parent.renderReactTemplates)||this.parent.renderReactTemplates(),this.parent.isInitial&&(this.parent.isInitial=!1,this.parent.refreshData(),this.parent.enableVirtualization&&this.parent.onContentReady()),this.parent.isTabular){var t=this.parent.element.querySelectorAll("."+ci+"."+vi),i=this.parent.enableRtl;t.forEach(function(r,u){var f=u===t.length-1;n.isNullOrUndefined(r)||i&&(!i||f)||r.style.setProperty("border-left-width","0px")})}this.parent.notify(cr,{})},t.prototype.setFocusOnLastCell=function(){if(this.parent.keyboardModule&&this.parent.keyboardModule.event&&"TD"===this.parent.keyboardModule.event.target.nodeName){var t=this.parent.grid.serviceLocator.getService("focus");t.setFocusedElement(this.parent.keyboardModule.event.target);t.focus(this.parent.keyboardModule.event);n.addClass([this.parent.keyboardModule.event.target],["e-focused","e-focus"]);this.parent.keyboardModule.event.target.setAttribute("tabindex","0");this.parent.keyboardModule.event=void 0}},t.prototype.getCellElement=function(t){var i=n.closest(t,"td");return n.isNullOrUndefined(i)&&(i=n.closest(t,"th")),i},t.prototype.contextMenuOpen=function(t){var u,f=this,e,s;t.element&&this.parent.cssClass&&n.addClass([t.element.parentElement],this.parent.cssClass);e=this.parent.lastCellClicked?this.parent.lastCellClicked:this.parent.isAdaptive?t.event.target:this.parent.lastCellClicked;e&&(u=this.getCellElement(e));for(var c=function(e){var l=void 0,c=void 0,h,v,d,w,g;if(!u||u&&0===Number(u.getAttribute("index"))&&parseInt(u.getAttribute("aria-colindex"),10)-1==0)return t.cancel=!0,{value:void 0};(u.classList.contains("e-valuesheader")||u.classList.contains("e-stot"))&&(l=!0);i.parent.allowGrouping&&i.parent.groupingModule&&!i.validateField(u)&&(c=!0);var nt=Number(u.getAttribute("index")),tt=parseInt(u.getAttribute("aria-colindex"),10)-1,b=i.parent.pivotValues[nt][tt];switch(e.id){case i.parent.element.id+"_expand":u.querySelectorAll("."+wr).length>0?(n.selectAll("#"+i.parent.element.id+"_expand",t.element)&&n.select("#"+i.parent.element.id+"_expand",t.element).classList.add(p),n.select("#"+i.parent.element.id+"_expand",t.element).classList.contains(p)&&n.select("#"+i.parent.element.id+"_expand",t.element).classList.remove(p),n.select("#"+i.parent.element.id+"_expand",t.element).classList.contains(ui)&&(n.select("#"+i.parent.element.id+"_expand",t.element).classList.remove(ui),n.select("#"+i.parent.element.id+"_collapse",t.element).classList.remove(ui))):l?n.select("#"+i.parent.element.id+"_expand",t.element).classList.add(ui):n.select("#"+i.parent.element.id+"_expand",t.element).classList.add(p);break;case i.parent.element.id+"_collapse":u.querySelectorAll("."+er).length>0?(n.select("#"+i.parent.element.id+"_expand",t.element)&&n.select("#"+i.parent.element.id+"_expand",t.element).classList.add(p),n.select("#"+i.parent.element.id+"_collapse",t.element).classList.contains(p)&&n.select("#"+i.parent.element.id+"_collapse",t.element).classList.remove(p),n.select("#"+i.parent.element.id+"_collapse",t.element).classList.contains(ui)&&(n.select("#"+i.parent.element.id+"_collapse",t.element).classList.remove(ui),n.select("#"+i.parent.element.id+"_expand",t.element).classList.remove(ui))):l?n.select("#"+i.parent.element.id+"_collapse",t.element).classList.add(ui):n.select("#"+i.parent.element.id+"_collapse",t.element).classList.add(p);break;case i.parent.element.id+"_custom_group":c||2!==t.items.length||(t.cancel=!0);n.selectAll("#"+i.parent.element.id+"_custom_group",t.element)&&n.addClass([n.select("#"+i.parent.element.id+"_custom_group",t.element)],ui);c&&n.selectAll("#"+i.parent.element.id+"_custom_group",t.element)&&n.removeClass([n.select("#"+i.parent.element.id+"_custom_group",t.element)],ui);break;case i.parent.element.id+"_custom_ungroup":if(n.selectAll("#"+i.parent.element.id+"_custom_ungroup",t.element)&&n.addClass([n.select("#"+i.parent.element.id+"_custom_ungroup",t.element)],ui),c){var a=!1,o=u.getAttribute("fieldname"),s=r.getFieldByName(o,i.parent.dataSourceSettings.groupSettings);if(s&&"Custom"===s.type||i.parent.engineModule.fieldList[o].isCustomField&&o.indexOf("_custom_group")>-1){if(s=r.getFieldByName(o.replace("_custom_group",""),i.parent.dataSourceSettings.groupSettings)){h=i.parent.engineModule.pivotValues[Number(u.getAttribute("index"))][parseInt(u.getAttribute("aria-colindex"),10)-1];v=i.parent.groupingModule.getSelectedCells(h.axis,o,h.actualText.toString());v.push({axis:h.axis,fieldName:o,name:h.actualText.toString(),cellInfo:h});for(var it=i.parent.groupingModule.getSelectedOptions(v),y=0,k=s.customGroups;y<k.length;y++)if(d=k[y],it.indexOf(d.groupName)>-1){a=!0;break}}}else(s&&("Date"===s.type||"Number"===s.type)||i.parent.engineModule.fieldList[o].isCustomField&&o.indexOf("_date_group")>-1)&&(a=!0);n.selectAll("#"+i.parent.element.id+"_custom_ungroup",t.element)&&a&&n.removeClass([n.select("#"+i.parent.element.id+"_custom_ungroup",t.element)],ui)}break;case i.parent.element.id+"_drillthrough":i.parent.allowDrillThrough?u.classList.contains("e-summary")?n.select("#"+i.parent.element.id+"_drillthrough",t.element).classList.contains(p)&&n.select("#"+i.parent.element.id+"_drillthrough",t.element).classList.remove(p):""===u.innerText&&n.select("#"+i.parent.element.id+"_drillthrough",t.element)&&n.select("#"+i.parent.element.id+"_drillthrough",t.element).classList.add(p):n.select("#"+i.parent.element.id+"_drillthrough",t.element)&&n.select("#"+i.parent.element.id+"_drillthrough",t.element).classList.add(p);break;case i.parent.element.id+"_sortasc":i.parent.enableValueSorting?u.querySelectorAll(".e-icon-descending").length>0?(n.select("#"+i.parent.element.id+"_sortdesc",t.element)?n.select("#"+i.parent.element.id+"_sortdesc",t.element).classList.add(p):n.select("#"+i.parent.element.id+"_sortdesc",t.element).classList.remove(p),n.select("#"+i.parent.element.id+"_sortasc",t.element).classList.contains(p)&&n.select("#"+i.parent.element.id+"_sortasc",t.element).classList.remove(p)):n.select("#"+i.parent.element.id+"_sortdesc",t.element).classList.contains(p)&&n.select("#"+i.parent.element.id+"_sortdesc",t.element).classList.remove(p):n.select("#"+i.parent.element.id+"_sortasc",t.element)&&n.select("#"+i.parent.element.id+"_sortasc",t.element).classList.add(p);break;case i.parent.element.id+"_sortdesc":i.parent.enableValueSorting?u.querySelectorAll(".e-icon-ascending").length>0?(n.select("#"+i.parent.element.id+"_sortasc",t.element)?n.select("#"+i.parent.element.id+"_sortasc",t.element).classList.add(p):n.select("#"+i.parent.element.id+"_sortasc",t.element).classList.remove(p),n.select("#"+i.parent.element.id+"_sortdesc",t.element).classList.contains(p)&&n.select("#"+i.parent.element.id+"_sortdesc",t.element).classList.remove(p)):n.select("#"+i.parent.element.id+"_sortasc",t.element).classList.contains(p)&&n.select("#"+i.parent.element.id+"_sortasc",t.element).classList.remove(p):n.select("#"+i.parent.element.id+"_sortdesc",t.element)&&n.select("#"+i.parent.element.id+"_sortdesc",t.element).classList.add(p);break;case i.parent.element.id+"_CalculatedField":i.parent.allowCalculatedField||n.select("#"+i.parent.element.id+"_CalculatedField",t.element).classList.add(p);break;case i.parent.element.id+"_pdf":i.parent.allowPdfExport||n.select("#"+i.parent.element.id+"_pdf",t.element).classList.add(p);break;case i.parent.element.id+"_excel":i.parent.allowExcelExport||n.select("#"+i.parent.element.id+"_excel",t.element).classList.add(p);break;case i.parent.element.id+"_csv":i.parent.allowExcelExport||n.select("#"+i.parent.element.id+"_csv",t.element).classList.add(p);break;case i.parent.element.id+"_exporting":i.parent.allowExcelExport||i.parent.allowPdfExport||n.select("#"+i.parent.element.id+"_exporting",t.element).classList.add(p);break;case i.parent.element.id+"_aggregate":(n.select("#"+i.parent.element.id+"_aggregate",t.element)&&!n.select("#"+i.parent.element.id+"_aggregate",t.element).classList.contains(p)&&n.select("#"+i.parent.element.id+"_aggregate",t.element).classList.add(p),(u.classList.contains("e-valuesheader")||u.classList.contains("e-valuescontent")||u.classList.contains("e-stot")&&u.classList.contains("e-rowsheader"))&&"olap"!==i.parent.dataType)&&(""!==u.innerText&&(w=i.parent.engineModule.fieldList[b.actualText.toString()].type),g={cancel:!1,fieldName:b.actualText.toString(),aggregateTypes:i.getMenuItem(w).slice(),displayMenuCount:7},i.parent.trigger(ih,g,function(i){var r;if(!i.cancel&&""!==u.innerText){for(var o=[],s=[],h=0;h<i.aggregateTypes.length;h++)r=i.aggregateTypes[h],"number"!==w?["Count","DistinctCount"].indexOf(r)>-1&&s.indexOf(r)<0&&(o.push({text:f.parent.localeObj.getConstant(r),id:f.parent.element.id+"_Agg"+r}),s.push(r)):f.parent.getAllSummaryType().indexOf(r)>-1&&s.indexOf(r)<0&&(o.push({text:f.parent.localeObj.getConstant(r),id:f.parent.element.id+"_Agg"+r}),s.push(r));o.length>i.displayMenuCount&&(o.splice(i.displayMenuCount),o.push({text:f.parent.localeObj.getConstant("MoreOption"),id:f.parent.element.id+"_AggMoreOption"}));o&&o.length>=1&&(e.items=o,n.select("#"+f.parent.element.id+"_aggregate",t.element).classList.remove(p))}}))}},i=this,o=0,h=t.items;o<h.length;o++)if(s=c(h[o]),"object"==typeof s)return s.value;this.parent.trigger("contextMenuOpen",t)},t.prototype.getMenuItem=function(n){for(var t,i=[],r=0;r<this.parent.aggregateTypes.length;r++)t=this.parent.aggregateTypes[r],"string"!==n?this.parent.getAllSummaryType().indexOf(t)>-1&&-1===i.indexOf(t)&&i.push(t):["Count","DistinctCount"].indexOf(t)>-1&&-1===i.indexOf(t)&&i.push(t);return i},t.prototype.contextMenuClick=function(n){var t,f=this,e=this.parent.lastCellClicked,o=n.item.id,r={},s,h,c,l;if(e){t=this.getCellElement(e);var u,a=Number(t.getAttribute("index")),v=parseInt(t.getAttribute("aria-colindex"),10)-1,i=this.parent.pivotValues[a][v];switch(n.item.id.indexOf(this.parent.element.id+"_Agg")>-1&&(this.field=this.parent.engineModule.fieldList[i.actualText.toString()].id,this.fieldCaption=this.parent.engineModule.fieldList[i.actualText.toString()].caption,u=n.item.id.split("_Agg")[1]),o){case this.parent.element.id+"_pdf":r={pdfDoc:void 0,isBlob:!1,isMultipleExport:!1,pdfExportProperties:{fileName:"Export.pdf"}};this.parent.trigger(kf,r,function(n){f.parent.pdfExport(n.pdfExportProperties,n.isMultipleExport,n.pdfDoc,n.isBlob)});break;case this.parent.element.id+"_excel":r={isBlob:!1,isMultipleExport:!1,workbook:void 0,excelExportProperties:{fileName:"Export.xlsx"}};this.parent.trigger(kf,r,function(n){f.parent.excelExport(n.excelExportProperties,n.isMultipleExport,n.workbook,n.isBlob)});break;case this.parent.element.id+"_csv":r={isBlob:!1,workbook:void 0,isMultipleExport:!1,excelExportProperties:{fileName:"Export.csv"}};this.parent.trigger(kf,r,function(n){f.parent.csvExport(n.excelExportProperties,n.isMultipleExport,n.workbook,n.isBlob)});break;case this.parent.element.id+"_drillthrough_menu":s=new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(s);break;case this.parent.element.id+"_sortasc":this.parent.setProperties({dataSourceSettings:{valueSortSettings:{columnHeaderText:i.valueSort.levelName,headerDelimiter:this.parent.dataSourceSettings.valueSortSettings.headerDelimiter}}});this.parent.dataSourceSettings.valueSortSettings.sortOrder="Ascending";break;case this.parent.element.id+"_sortdesc":this.parent.setProperties({dataSourceSettings:{valueSortSettings:{columnHeaderText:i.valueSort.levelName,headerDelimiter:this.parent.dataSourceSettings.valueSortSettings.headerDelimiter}}});this.parent.dataSourceSettings.valueSortSettings.sortOrder="Descending";break;case this.parent.element.id+"_expand":if(t.querySelectorAll("."+wr)){h=t.querySelectorAll("."+wr)[0];this.parent.onDrill(h)}break;case this.parent.element.id+"_collapse":if(t.querySelectorAll("."+er)){c=t.querySelectorAll("."+er)[0];this.parent.onDrill(c)}break;case this.parent.element.id+"_CalculatedField":this.parent.calculatedFieldModule.createCalculatedFieldDialog();break;case this.parent.element.id+"_AggMoreOption":case this.parent.element.id+"_AggDifferenceFrom":case this.parent.element.id+"_AggPercentageOfDifferenceFrom":case this.parent.element.id+"_AggPercentageOfParentTotal":t.setAttribute("id",this.field);t.setAttribute("data-caption",this.fieldCaption);t.setAttribute("data-field",this.field);t.setAttribute("data-type",this.engine.fieldList[i.actualText.toString()].aggregateType);t.setAttribute("data-basefield",this.engine.fieldList[i.actualText.toString()].baseField);t.setAttribute("data-baseItem",this.engine.fieldList[i.actualText.toString()].baseItem);this.aggMenu.createValueSettingsDialog(t,this.parent.element,u);break;case this.parent.element.id+"_Agg"+u:this.updateAggregate(u);break;case this.parent.element.id+"_custom_group":case this.parent.element.id+"_custom_ungroup":this.parent.groupingModule&&(l={target:t,option:o,parentElement:this.parent.element},this.parent.notify("init-grouping",l),this.parent.grid.contextMenuModule.contextMenu.close())}this.parent.trigger("contextMenuClick",n)}},t.prototype.validateColumnTotalcell=function(n){for(var t,f=Object.keys(this.engine.headerContent),i=!1,r="",u=f.length-1;u>=0;u--){if(t=this.engine.headerContent[Number(f[u])][n],!t)return!1;if(i=!(!i||""===r)&&r===t.valueSort.axis,r=t.valueSort.axis?t.valueSort.axis.toString():"","sum"===t.type&&(i=!0),i&&t.members&&t.members.length>0)return!0}return!1},t.prototype.validateField=function(n){var r=!1,t,u,f,e,i;if(n.classList.contains("e-stot")||n.classList.contains("e-gtot")||n.classList.contains("e-valuescontent")||n.classList.contains("e-valuesheader"))r=!0;else for(t=n.getAttribute("fieldName"),t&&""!==t||(u=Number(n.getAttribute("index")),f=parseInt(n.getAttribute("aria-colindex"),10)-1,t=this.engine.pivotValues[u][f].actualText),e=this.parent.dataSourceSettings.values,i=0;i<e.length;i++)if(this.parent.dataSourceSettings.values[i].name===t){r=!0;break}return r},t.prototype.updateAggregate=function(n){if(this.parent.getAllSummaryType().indexOf(n)>-1)for(var i=this.parent.dataSourceSettings.values,t=0;t<this.parent.dataSourceSettings.values.length;t++)this.parent.dataSourceSettings.values[t].name===this.field&&(i[t].type=n)},t.prototype.injectGridModules=function(n){c.Grid.Inject(c.Freeze);n.allowExcelExport&&c.Grid.Inject(c.ExcelExport);n.allowPdfExport&&c.Grid.Inject(c.PdfExport);c.Grid.Inject(c.Selection,c.Reorder,c.Resize);this.gridSettings.contextMenuItems&&c.Grid.Inject(c.ContextMenu)},t.prototype.updateGridSettings=function(){if(this.injectGridModules(this.parent),this.parent.grid.allowResizing=this.gridSettings.allowResizing,this.parent.grid.clipMode=this.gridSettings.clipMode,this.parent.grid.allowTextWrap=this.gridSettings.allowTextWrap,this.parent.grid.allowReordering=this.gridSettings.allowReordering,this.parent.grid.allowSelection=this.gridSettings.allowSelection,this.parent.grid.contextMenuItems=this.gridSettings.contextMenuItems,this.parent.grid.selectedRowIndex=this.gridSettings.selectedRowIndex,this.parent.grid.selectionSettings=this.gridSettings.selectionSettings,this.parent.grid.textWrapSettings=this.gridSettings.textWrapSettings,this.parent.grid.printMode=this.gridSettings.printMode,this.parent.grid.rowHeight=this.gridSettings.rowHeight,this.parent.grid.gridLines=this.gridSettings.gridLines,this.parent.lastGridSettings){var n=Object.keys(this.parent.lastGridSettings);n.indexOf("height")>-1&&(this.parent.grid.height=this.gridSettings.height);n.indexOf("width")>-1&&(this.parent.grid.width=this.gridSettings.width);this.updatePivotColumns();(n.indexOf("allowTextWrap")>-1||n.indexOf("clipMode")>-1)&&this.parent.layoutRefresh()}this.clearColumnSelection()},t.prototype.updatePivotColumns=function(){for(var f,i,r,u=Object.keys(this.parent.lastGridSettings),t=0;t<this.parent.pivotColumns.length;t++)for(f=this.parent.pivotColumns[t],i=0;i<u.length;i++)r=u[i],n.isNullOrUndefined(this.parent.pivotColumns[t][r])||(f[r]=this.parent.lastGridSettings[r]);this.parent.fillGridColumns(this.parent.grid.columns)},t.prototype.clearColumnSelection=function(){n.removeClass(this.parent.element.querySelectorAll("."+it),[it,tt])},t.prototype.appendValueSortIcon=function(t,i,r,u,f){var o="pivot"===this.parent.dataType?this.parent.engineModule:this.parent.olapEngineModule,e=this.parent.dataSourceSettings.valueSortSettings,s=e&&"pivot"===this.parent.dataType&&"Server"!==this.parent.dataSourceSettings.mode?e.columnHeaderText:e.headerText,l=e&&"pivot"===this.parent.dataType&&"Server"!==this.parent.dataSourceSettings.mode?e.columnSortOrder:e.sortOrder,h,c;return this.parent.enableValueSorting&&e&&""!==s&&(h="grand sum"!==t.type||1!==this.parent.dataSourceSettings.values.length||this.parent.dataSourceSettings.alwaysShowValueHeader?this.parent.dataSourceSettings.values.length>1||this.parent.dataSourceSettings.alwaysShowValueHeader?o.headerContent.length-1:0===this.parent.dataSourceSettings.columns.length?0:o.headerContent.length-1:0,c=e&&s?t.valueSort.levelName===s:u===e.columnIndex,void 0!==e&&c&&(r===h||r+1===h&&t.level>-1&&o.headerContent[r+1][u]&&-1===o.headerContent[r+1][u].level)&&i.querySelector("div div").appendChild(n.createElement("span",{className:("Descending"===l?"e-icon-descending e-icons e-descending e-sortfilterdiv e-value-sort-icon":"e-icon-ascending e-icons e-ascending e-sortfilterdiv e-value-sort-icon")+(t.hasChild?" e-value-sort-align":""),styles:"Right"===f.headerTextAlign?"float : left":""}))),i},t.prototype.onResizeStop=function(t){var r,i;t.column.columns&&t.column.columns.length>0?this.getChildColumnWidth(t.column.columns):(r=this.parent.isTabular?t.column.index<this.parent.engineModule.rowMaxLevel+1?t.column.index+".formattedText":""+t.column.customAttributes.cell.valueSort.levelName:"0.formattedText"===t.column.field?"0.formattedText":""+t.column.customAttributes.cell.valueSort.levelName,this.parent.resizeInfo[r]=Number(t.column.width.toString().split("px")[0]));!this.parent.isTabular&&this.parent.enableVirtualization&&"0.formattedText"===t.column.field&&(this.parent.dataSourceSettings.values.length>1&&!n.isNullOrUndefined(this.parent.grid.columns[this.parent.grid.columns.length-1].columns)?(i=this.parent.grid.columns[this.parent.grid.columns.length-1].columns,i[i.length-1].minWidth=this.parent.gridSettings.columnWidth):this.parent.grid.columns[this.parent.grid.columns.length-1].minWidth=this.parent.gridSettings.columnWidth,this.parent.layoutRefresh());this.setGroupWidth(t);this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.setValuePanelWidth();this.calculateGridHeight(!0);this.parent.grid.hideScroll()},t.prototype.getChildColumnWidth=function(n){for(var t,u,i=0,r=n;i<r.length;i++)t=r[i],t.columns&&t.columns.length>0?this.getChildColumnWidth(t.columns):(u=t.customAttributes.cell.valueSort.levelName,this.parent.resizeInfo[u]=Number(t.width.toString().split("px")[0]))},t.prototype.setGroupWidth=function(t){var u,i,r,f,e;if(this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+hi)){if(this.parent.groupingBarModule.refreshUI(),u=this.parent.isTabular&&t.column.index<=this.parent.engineModule.rowMaxLevel?t.column.index:0,this.setFirstColumnWidth(u,t),this.parent.isTabular){if(t.column.index<=this.parent.engineModule.rowMaxLevel&&(this.parent.element.querySelectorAll(".e-group-rows")[u].style.width=this.parent.element.querySelectorAll(".e-group-row")[u].offsetWidth-6+"px"),i=0,this.parent.engineModule.rowMaxLevel>0)for(r=0;r<this.parent.engineModule.rowMaxLevel+1;r++)n.isNullOrUndefined(this.parent.element.querySelectorAll(".e-group-row")[r])||(i+=this.parent.element.querySelectorAll(".e-group-row")[r].offsetWidth);else i=this.parent.element.querySelector(".e-group-row").offsetWidth;this.parent.element.querySelector(".e-group-values").style.width=i+"px"}else this.parent.element.querySelector(".e-group-values").style.width=this.parent.element.querySelector(".e-group-row").offsetWidth+"px",i=this.parent.element.querySelector(".e-group-row").offsetWidth,this.parent.element.querySelector(".e-group-values").style.width=i+"px";f=this.parent.element.querySelector("."+rt).offsetHeight;this.parent.element.querySelector(".e-group-rows").style.height=f+"px"}t.cancel&&(e=this.parent.isTabular?t.column.index<this.parent.engineModule.rowMaxLevel+1?t.column.index+".formattedText":""+t.column.customAttributes.cell.valueSort.levelName:"0.formattedText"===t.column.field?"0.formattedText":""+t.column.customAttributes.cell.valueSort.levelName,this.parent.resizeInfo[e]=Number(t.column.width.toString().split("px")[0]),this.parent.enableVirtualization);this.parent.enableVirtualization&&(this.parent.resizedValue=t.cancel||"0.formattedText"!==t.column.field?this.parent.resizedValue:Number(t.column.width.toString().split("px")[0]));this.parent.trigger("touchend"===t.e.type||"mouseup"===t.e.type?"resizeStop":"resizing",t)},t.prototype.setFirstColumnWidth=function(n,t){if(this.parent.element.querySelectorAll(".e-group-row")[n].offsetWidth<95&&!this.parent.firstColWidth){t.cancel=!0;var i=this.parent.grid.columns;i&&i.length>0&&(i[n].width=100);this.parent.element.querySelector("."+rt).querySelectorAll("col")[n].style.width="100px";this.parent.element.querySelector("."+ct).querySelectorAll("col")[n].style.width="100px";this.setValuePanelWidth()}},t.prototype.setValuePanelWidth=function(){var t=this.parent.element.getElementsByClassName(di+" "+si)[0];if(!n.isNullOrUndefined(t)){t.querySelectorAll(".e-pvt-btn-div").forEach(function(n){n.style.width=t.offsetWidth<250?"100%":"auto"});var u=this.parent.element.getElementsByClassName(iu+" "+yr)[0],r=this.parent.element.getElementsByClassName(pr+" "+vr)[0],i=t.offsetHeight/2;i>r.offsetHeight&&(n.setStyleAttribute(u,{height:n.formatUnit(i)}),n.setStyleAttribute(r,{height:n.formatUnit(i+2)}))}},t.prototype.selected=function(){clearTimeout(this.timeOutObj);this.timeOutObj=setTimeout(this.onSelect.bind(this),300)},t.prototype.onSelect=function(){var t={selectedCellsInfo:[],pivotValues:this.parent.pivotValues,currentCell:null},r=this.parent.element.querySelectorAll("."+ot+",."+tt),i;for(this.selectedCells=[],i=0;i<r.length;i++){var u=r[i],f=parseInt(u.getAttribute("aria-colindex"),10)-1,e=Number(u.getAttribute("index")),n=this.engine.pivotValues[e][f];this.selectedCells.push({colIndex:f,rowIndex:e});n&&("value"===n.axis?t.selectedCellsInfo.push({currentCell:n,value:n.value,columnHeaders:n.columnHeaders,rowHeaders:n.rowHeaders,measure:n.actualText.toString()}):"column"===n.axis?t.selectedCellsInfo.push({currentCell:n,value:n.formattedText,columnHeaders:n.valueSort.levelName,rowHeaders:"",measure:""}):t.selectedCellsInfo.push({currentCell:n,value:n.formattedText,columnHeaders:"",rowHeaders:n.valueSort.levelName,measure:""}))}this.parent.trigger("cellSelected",t)},t.prototype.rowCellBoundEvent=function(t){var r=t.cell,f=n.createElement("div",{className:"e-pivotrow-container"}),v,it,k,d,g,ut,b,ot,o,h,u,st,nt,ht;if(r&&this.parent.notEmpty&&this.engine.headerContent){var tt=this.parent.hyperlinkSettings.cssClass,l=t.column&&t.column.customAttributes&&t.column.customAttributes.cell?t.column.customAttributes.cell.colIndex:parseInt(r.getAttribute("aria-colindex"),10)-1,ct=this.parent.isTabular?l.toString():"0",i=t.data[Number(ct)],et=i.valueSort&&i.valueSort.levelName===(0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis&&this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+i.formattedText);if(r.setAttribute("index",i.rowIndex?i.rowIndex.toString():"0"),v=this.parent.pivotValues[i.rowIndex]&&this.parent.pivotValues[i.rowIndex][l]?this.parent.pivotValues[i.rowIndex][l]:null,l<=(this.parent.isTabular?this.parent.engineModule.rowMaxLevel:0)){if("pivot"===this.parent.dataType){it=i.type&&"value"===i.type;r.innerText="";var p=i.valueSort?i.valueSort.levelName.toString():"",rt=i.actualText?i.actualText.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,w=p.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-(rt?rt-1:rt),a=w?w-1:0;if("Bottom"!==this.parent.dataSourceSettings.subTotalsPosition||n.isNullOrUndefined(p)||(k=i.isSum?"value"===i.type?p.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+(this.parent.engineModule.valueAxisFields[i.actualText].caption?this.parent.engineModule.valueAxisFields[i.actualText].caption:this.parent.engineModule.valueAxisFields[i.actualText].name))[0]:"":p,i.isSum&&("value"!==i.type||this.drilledLevelInfo[k])?a-=1:i.isSum||(1===k.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length&&(this.drilledLevelInfo={}),i.members&&i.members.length>0&&(this.drilledLevelInfo[k]=i.isDrilled))),!this.parent.isTabular){do a>0&&f.appendChild(n.createElement("span",{className:0===a?"":hf})),a--;while(a>-1);a=w?w-1:0;this.lastSpan=w?this.lastSpan:0;!i.hasChild&&(it?0:a)>0&&f.appendChild(n.createElement("span",{className:rs}))}if(d=void 0,this.parent.dataSourceSettings.rows.length>0&&(!i.valueSort||Object.keys(i.valueSort).length>0)){if(it){for(g=0,ut=this.parent.dataSourceSettings.values;g<ut.length;g++)if(b=ut[g],ot=b.caption?b.caption:b.name,p.indexOf(ot)>-1){d=b.name;break}}else d=i.level>-1&&this.parent.dataSourceSettings.rows[i.level]?this.parent.dataSourceSettings.rows[i.level].name:"";r.setAttribute("fieldname",d)}}else f=this.onOlapRowCellBoundEvent(r,f,i);if(o=i.formattedText,i.type&&("grand sum"===i.type?(this.rowGrandPos=i.rowIndex,r.classList.add("e-gtot"),h=this.parent.dataSourceSettings.values,o=n.isNullOrUndefined(i.valueSort.axis)?0===this.parent.dataSourceSettings.rows.length&&1===h.length&&"row"===this.parent.dataSourceSettings.valueAxis?this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(h[h.length-1].type)+" "+this.parent.localeObj.getConstant("of")+" "+(n.isNullOrUndefined(h[h.length-1].caption)?h[h.length-1].name:h[h.length-1].caption):this.parent.localeObj.getConstant("grandTotal"):i.formattedText):i.valueSort.levelName===this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+i.formattedText?(r.classList.add("e-gtot"),o=et?this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(this.parent.engineModule.fieldList[i.actualText].aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+i.formattedText:o):"sum"===i.type&&3!==i.memberType?o=i.formattedText.split("Total")[0]+this.parent.localeObj.getConstant("total"):r.classList.add("e-stot")),this.parent.isTabular?(this.setSpanAttributes("rowspan",i.rowSpan,r),this.setSpanAttributes("colspan",i.colSpan,r)):r.classList.add(gi),!0!==i.hasChild||i.isNamedSet||f.appendChild(n.createElement("div",{className:(!0===i.isDrilled?er:wr)+" "+s,attrs:{title:!0===i.isDrilled?this.parent.localeObj.getConstant("collapse"):this.parent.localeObj.getConstant("expand")}})),f.appendChild(n.createElement("span",{className:wu})),t.column.disableHtmlEncode?this.parent.isRowCellHyperlink||i.enableHyperlink?f.querySelector("."+wu).innerHTML='<a  data-url="'+o+'" class="e-hyperlinkcell '+tt+'">'+o+"<\/a>":f.querySelector("."+wu).textContent=o:f.querySelector("."+wu).innerHTML=this.parent.isRowCellHyperlink||i.enableHyperlink?'<a  data-url="'+o+'" class="e-hyperlinkcell '+tt+'">'+o+"<\/a>":o,u=this.parent.pivotView.dataSourceSettings.valueSortSettings,this.parent.enableValueSorting){var c=u&&"pivot"===this.parent.dataType&&"Server"!==this.parent.dataSourceSettings.mode?u.rowHeaderText:u.headerText,lt=u&&"pivot"===this.parent.dataType&&"Server"!==this.parent.dataSourceSettings.mode?u.rowSortOrder:u.sortOrder,y=Number(r.getAttribute("index")),ft=Number(r.getAttribute("aria-colindex")),e=this.parent.pivotValues&&this.parent.pivotValues[Number(r.getAttribute("index"))]?this.parent.pivotValues[Number(r.getAttribute("index"))][ft-1]:void 0;"pivot"!==this.parent.dataType||"Server"===this.parent.dataSourceSettings.mode||"row"!==this.parent.dataSourceSettings.valueAxis||-1!==this.parent.dataSourceSettings.valueIndex||this.parent.isTabular||e.valueSort.levelName!==c||"value"===e.type||("Bottom"!==this.parent.dataSourceSettings.subTotalsPosition?this.parent.pivotValues[y+1]&&"value"===this.parent.pivotValues[y+1][ft-1].type&&(y="value"===e.type||3===e.memberType?y:y+1,this.modifiedHeaderText=this.parent.pivotValues[y][ft-1].valueSort.levelName):"Bottom"===this.parent.dataSourceSettings.subTotalsPosition&&this.parent.dataSourceSettings.values.length>0&&(n.isNullOrUndefined(u.measure)?this.modifiedHeaderText=c+u.headerDelimiter+this.parent.dataSourceSettings.values[0].name:n.isNullOrUndefined(u.measure)||(this.modifiedHeaderText=c+u.headerDelimiter+u.measure)));c="row"===this.parent.dataSourceSettings.valueAxis&&this.modifiedHeaderText?this.modifiedHeaderText:c;st=!("pivot"===this.parent.dataType&&"Bottom"===this.parent.dataSourceSettings.subTotalsPosition&&this.parent.dataSourceSettings.rows.length>1&&e.hasChild);u&&c&&e&&e.valueSort&&e.valueSort.levelName&&(!this.parent.isTabular&&e.valueSort.levelName===c&&st||this.parent.isTabular&&e.valueSort.levelName===c&&1===e.rowSpan)&&(f.appendChild(n.createElement("span",{className:("Descending"===lt?"e-icon-descending e-icons e-descending e-sortfilterdiv e-value-sort-icon":"e-icon-ascending e-icons e-ascending e-sortfilterdiv e-value-sort-icon")+(e.hasChild?" e-value-sort-align":""),styles:"right"===f.style.textAlign?"float: left":""})),this.modifiedHeaderText=void 0)}r.appendChild(f)}else nt=r.innerText,r.innerText="",r.classList.add("e-valuescontent"),i=t.data[l],(i=n.isNullOrUndefined(i)?t.column.customAttributes.cell:i).isGrandSum=!!et||i.isGrandSum,i.isSum&&r.classList.add("e-summary"),ht=n.isNullOrUndefined(i.isGrandSum)&&!n.isNullOrUndefined(this.parent.olapEngineModule)&&"column"===this.parent.olapEngineModule.olapValueAxis&&"olap"===this.parent.dataType&&this.colGrandPos-this.parent.dataSourceSettings.values.length<l,i.isGrandSum||ht||this.colGrandPos===l||this.rowGrandPos===Number(r.getAttribute("index"))?r.classList.add("e-gtot"):("olap"===this.parent.dataType?i.isSum:this.validateColumnTotalcell(i.colIndex))&&r.classList.add("e-colstot"),v&&v.cssClass&&r.classList.add(v.cssClass),r.appendChild(n.createElement("span",{className:wu,innerHTML:-1!==r.className.indexOf("e-summary")&&this.parent.isSummaryCellHyperlink||-1===r.className.indexOf("e-summary")&&this.parent.isValueCellHyperlink&&v||i.enableHyperlink?'<a data-url="'+nt+'" class="e-hyperlinkcell '+tt+'">'+nt+"<\/a>":nt})),this.parent.gridSettings.allowReordering&&r.setAttribute("aria-colindex",t.column.customAttributes?(t.column.customAttributes.cell.colIndex+1).toString():t.column.index.toString());this.parent.cellTemplate&&this.appendTemplate(r,v);this.unWireEvents(r);this.wireEvents(r)}t.pivotview=this.parent;this.parent.trigger("queryCellInfo",t)},t.prototype.appendTemplate=function(t,i){var r=this.parent.getCellTemplate()({targetCell:t,cellInfo:i},this.parent,"cellTemplate",this.parent.element.id+"_cellTemplate",null,null,t),u;r&&""!==r&&r.length>0&&(this.parent.enableHtmlSanitizer?this.parent.isVue||this.parent.isVue3?(u=n.createElement("div"),u.innerHTML=n.SanitizeHtmlHelper.sanitize(r),n.append([u.firstChild],t)):this.parent.appendHtml(t,n.SanitizeHtmlHelper.sanitize(r[0].outerHTML)):this.parent.isVue||this.parent.isVue3?n.append(r,t):this.parent.appendHtml(t,r[0].outerHTML))},t.prototype.onOlapRowCellBoundEvent=function(t,i,r){var p,v,f,a,w,y,b,o,k,rt,h,c,ut;if(t.innerText="",p=this.engine.rowMeasurePos,this.parent.enableVirtualization){if(r.ordinal>-1&&this.parent.olapEngineModule.tupRowInfo.length>0){var l=this.parent.olapEngineModule.tupRowInfo[r.ordinal],ft=3===r.memberType?this.engine.fieldList[r.actualText.toString()].tag.toString():r.actualText.toString(),et=l.uNameCollection.indexOf(ft),d=(l.uNameCollection.substring(0,et)+(3===r.memberType?"":r.actualText.toString())).split("::[").map(function(n){return"["===n[0]?n:"["+n});3===r.memberType&&p&&d.push(r.actualText.toString());for(var g=-1,tt=0,nt=!1,u=0;u<d.length;u++)g+=d[u].split("~~").length,v="2"!==l.typeCollection[u]&&(!!(this.engine.fieldList[l.members[u].getAttribute("Hierarchy")]&&this.engine.fieldList[l.members[u].getAttribute("Hierarchy")].isHierarchy&&u<this.parent.dataSourceSettings.rows.length-1&&!this.parent.dataSourceSettings.rows[u+1].isNamedSet&&this.parent.dataSourceSettings.rows[u+1].name.indexOf("[Measures]")<0&&this.engine.fieldList[this.parent.dataSourceSettings.rows[u+1].name]&&this.engine.fieldList[this.parent.dataSourceSettings.rows[u+1].name].hasAllMember)||Number(l.members[u].querySelector("CHILDREN_CARDINALITY").textContent)>0),tt+=u>0&&nt&&!v?1:0,nt=v;for(f=0,a=0;a<g;a++)i.appendChild(n.createElement("span",{className:hf})),f++;for(a=0;a<tt&&g>0;a++)i.appendChild(n.createElement("span",{className:rs}));this.indentCollection[r.rowIndex]=f;this.maxIndent=this.maxIndent>f?this.maxIndent:f}}else{var s=r.hierarchy,ot=r.valueSort?r.valueSort.levelName.toString():"",st=-1===r.level?this.measurePos:ot.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-1,e=3===r.memberType?st+"."+r.levelUniqueName:r.levelUniqueName,it=(v=r.hasChild,!1);if(r.isSum&&3===r.memberType){for(w=this.lvlCollection[r.parentUniqueName].position,y=w+1;y<this.position;y++)delete this.lvlCollection[this.lvlPosCollection[y]],delete this.lvlPosCollection[y];this.position=this.position>w+1?w+1:this.position;it=!0;this.measurePos=this.lvlCollection[r.parentUniqueName].position}if(!this.lvlCollection[e]&&e)this.lvlPosCollection[this.position]=e,this.lvlCollection[e]={position:this.position,hasChild:v},this.position++;else if(e){for(b=this.lvlCollection[e].position,o=b+1;o<this.position;o++)delete this.lvlCollection[this.lvlPosCollection[o]],delete this.lvlPosCollection[o];this.position=this.position>b+1?b+1:this.position}if(!this.hierarchyCollection[s]&&s)this.hierarchyPosCollection[this.hierarchyCount]=s,this.hierarchyCollection[s]={lvlPosition:this.position-1,hierarchyPOs:this.hierarchyCount},this.hierarchyCount++;else if(s){for(k=this.hierarchyCollection[s].hierarchyPOs,o=k+1;o<this.hierarchyCount;o++)delete this.hierarchyCollection[this.hierarchyPosCollection[o]],delete this.hierarchyPosCollection[o];this.hierarchyCount=this.hierarchyCount>k+1?k+1:this.hierarchyCount}for(3!==r.memberType&&e&&this.lvlCollection[e]&&(rt=this.hierarchyCollection[s]?this.hierarchyCollection[s].hierarchyPOs:-1,this.measurePos=p<=rt&&this.hierarchyPosCollection[p+1]?this.measurePos:this.lvlCollection[e].position),h=this.lvlCollection[e]?this.lvlCollection[e].position:-1,h=it?h-1:h,c=0,f=0;c<=h&&h>0&&r.level>-1;)ut=this.lvlCollection[this.lvlPosCollection[c]].hasChild,(nt=c>0&&this.lvlCollection[this.lvlPosCollection[c-1]].hasChild)&&!ut&&i.appendChild(n.createElement("span",{className:rs})),c!==h&&(i.appendChild(n.createElement("span",{className:hf})),f++),c++;"Top"!==this.parent.dataSourceSettings.grandTotalsPosition||n.isNullOrUndefined(this.parent.olapEngineModule)||"row"!==this.parent.olapEngineModule.olapValueAxis||"olap"!==this.parent.dataType||0!==r.valueSort.levelName.toString().indexOf(this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter)||i.appendChild(n.createElement("span",{className:hf}));3===r.memberType&&-1===r.level&&Object.keys(this.lvlCollection).length>1&&(i.appendChild(n.createElement("span",{className:hf})),f++);this.indentCollection[r.rowIndex]=f;this.maxIndent=this.maxIndent>f?this.maxIndent:f}return i.setAttribute("fieldname",r.hierarchy),t.setAttribute("fieldname",r.hierarchy),!!this.parent.olapEngineModule.tupRowInfo[r.ordinal]&&(0===this.parent.olapEngineModule.tupRowInfo[r.ordinal].measurePosition?1===this.parent.olapEngineModule.tupRowInfo[r.ordinal].allStartPos:0===this.parent.olapEngineModule.tupRowInfo[r.ordinal].allStartPos)&&t.classList.add("e-gtot"),i},t.prototype.columnCellBoundEvent=function(t){var i,r,l,a,v,y,f,u,e,k,d,o,p;if(t.cell.column&&t.cell.column.customAttributes){if(i=t.cell.column.customAttributes.cell,r=t.node,i){for(var w=this.parent.hyperlinkSettings.cssClass,h=!1,c=0,b=this.parent.dataSourceSettings.values;c<b.length;c++)l=b[c],l.name===i.actualText&&(h=!0,r.setAttribute("fieldname",l.name));for(-1===i.level&&!i.rowSpan||-1===i.rowSpan?t.node.style.display="none":i.rowSpan>1&&(t.node.setAttribute("rowspan",i.rowSpan.toString()),t.node.setAttribute("aria-rowspan",i.rowSpan.toString()),i.rowIndex+i.rowSpan===this.engine.headerContent.length&&(t.node.style.borderBottomWidth="0px")),t.node.setAttribute("aria-colindex",(i.colIndex+1).toString()),t.node.setAttribute("index",i.rowIndex.toString()),a=void 0,"pivot"===this.parent.dataType?(!h&&!(this.parent.dataSourceSettings.values&&"column"===this.parent.dataSourceSettings.valueAxis&&this.parent.dataSourceSettings.values.length>1&&h&&i.rowIndex===this.engine.headerContent.length-1)&&this.parent.dataSourceSettings.columns&&this.parent.dataSourceSettings.columns.length>0&&(a=i.level>-1&&this.parent.dataSourceSettings.columns[i.level]?this.parent.dataSourceSettings.columns[i.level].name:"",r.setAttribute("fieldname",a)),this.validateColumnTotalcell(i.colIndex)&&r.classList.add("e-colstot")):r=this.onOlapColumnCellBoundEvent(r,i),v=0===this.parent.dataSourceSettings.columns.length&&"column"===this.parent.dataSourceSettings.valueAxis&&i.valueSort&&i.valueSort.levelName===this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+i.formattedText,(i.type||v)&&(r.classList.add("grand sum"===i.type?"e-gtot":"e-stot"),"grand sum"===i.type?this.colGrandPos=i.colIndex:i.type&&r.classList.add("e-colstot"),y="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,f="grand sum"===i.type?n.isNullOrUndefined(i.valueSort.axis)||"olap"===this.parent.dataType?this.parent.localeObj.getConstant("grandTotal"):i.formattedText:i.formattedText.split("Total")[0]+this.parent.localeObj.getConstant("total"),f=v&&y.fieldList?this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(y.fieldList[i.actualText].aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+i.formattedText:f,null!==r.querySelector(".e-headertext")?r.querySelector(".e-headertext").innerText=f:r.querySelector(".e-stackedheadercelldiv").innerText=f),(r.classList.add(pu),this.parent.isColumnCellHyperlink||i.enableHyperlink)&&(r.querySelector(".e-stackedheadercelldiv")?(u=r.querySelector(".e-stackedheadercelldiv").innerText,r.querySelector(".e-stackedheadercelldiv").innerHTML='<a data-url="'+u+'" class="e-hyperlinkcell '+w+'">'+u+"<\/a>"):r.querySelector(".e-headertext")&&(u=r.querySelector(".e-headertext").innerText,r.querySelector(".e-headertext").innerHTML='<a data-url="'+u+'" class="e-hyperlinkcell '+w+'">'+u+"<\/a>")),!0!==i.hasChild||i.isNamedSet?this.updateWrapper(r):(e=r.querySelector(".e-headercelldiv"),e&&(e.style.height="auto",e.style.lineHeight="normal"),k=n.createElement("div",{className:(!0===i.isDrilled?er:wr)+" "+s,attrs:{title:!0===i.isDrilled?this.parent.localeObj.getConstant("collapse"):this.parent.localeObj.getConstant("expand")}}),r.children[0].style.display=window.navigator.userAgent.indexOf("Edge")>-1||window.navigator.userAgent.indexOf("Trident")>-1?"table":"block",this.updateWrapper(r,k)),r=this.appendValueSortIcon(i,r,i.rowIndex,i.colIndex,t.cell.column),this.parent.cellTemplate&&this.appendTemplate(r,i),d=this.parent.dataSourceSettings.values.length,o=0;o<d;o++)this.parent.dataSourceSettings.values[o].name===i.actualText&&("olap"===this.parent.dataType&&this.parent.olapEngineModule.tupColumnInfo[i.ordinal]&&(0===this.parent.olapEngineModule.tupColumnInfo[i.ordinal].measurePosition?1===this.parent.olapEngineModule.tupColumnInfo[i.ordinal].allStartPos:0===this.parent.olapEngineModule.tupColumnInfo[i.ordinal].allStartPos)&&r.classList.add("e-gtot"),i.valueSort.levelName===this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+i.formattedText||i.valueSort.levelName==="Grand Total"+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+i.formattedText?r.classList.add("e-gtot"):r.classList.add("e-valuesheader"));this.unWireEvents(r);this.wireEvents(r)}}else this.parent.isTabular&&(p=t.cell&&t.cell.column&&t.cell.column.index,0!==p&&this.parent.engineModule.rowMaxLevel>=p&&(t.node.querySelector(".e-headercelldiv").style.display="none"));this.parent.trigger("headerCellInfo",t)},t.prototype.updateWrapper=function(t,i){if(t.querySelectorAll(".e-headercelldiv").length>0||t.querySelectorAll(".e-stackedheadercelldiv").length>0){var r=n.createElement("div",{className:"e-pivotcell-container"}),u=n.createElement("div",{className:(i?"e-stackedheadertext":"e-headertext")+" "+wu,innerHTML:t.querySelectorAll(".e-headercelldiv").length>0?t.querySelector(".e-headercelldiv").innerHTML:t.querySelector(".e-stackedheadercelldiv").innerHTML});i&&r.append(i);r.append(u);t.children[0].innerHTML="";t.children[0].append(r)}return t},t.prototype.onOlapColumnCellBoundEvent=function(n,t){n.setAttribute("fieldname",3===t.memberType?t.actualText.toString():t.hierarchy);var i=this.engine.headerContent[t.rowIndex]?this.engine.headerContent[t.rowIndex][t.colIndex-1]:void 0;return i&&i.actualText===t.actualText&&i.type===t.type&&i.colSpan>1&&(n.style.display="none"),t.rowIndex===this.engine.headerContent.length-1&&2===t.memberType&&(n.style.display=this.isSpannedCell(this.engine.headerContent.length,t)?"none":n.style.display),n},t.prototype.isSpannedCell=function(n,t){for(var r,u,i=this.engine.headerContent[t.rowIndex-1]?this.engine.headerContent[t.rowIndex-1][t.colIndex]:void 0;i&&(i.memberType===t.memberType||i.type&&t.type);)i.rowSpan>0&&(r=i.rowSpan,u=i.rowIndex),i=this.engine.headerContent[i.rowIndex-1]?this.engine.headerContent[i.rowIndex-1][t.colIndex]:void 0;return u+r>=n},t.prototype.onHyperCellClick=function(t){var r=t.target.closest("td.e-rowcell")?t.target.closest("td.e-rowcell"):t.target.closest("th"),i={currentCell:r,data:this.engine.pivotValues[Number(r.getAttribute("index"))][parseInt(r.getAttribute("aria-colindex"),10)-1],cancel:!0,nativeEvent:t};this.parent.trigger("hyperlinkCellClick",i,function(t){if(!t.cancel){i.currentCell=n.getElement(i.currentCell);var r=i.currentCell.getAttribute("data-url")?i.currentCell.getAttribute("data-url"):i.currentCell.querySelector("a").getAttribute("data-url");window.open(r)}})},t.prototype.getRowStartPos=function(){for(var i,t=this.parent.pivotValues,n=0;n<(t?t.length:0);n++)if(t[n]&&t[n][0]&&"row"===t[n][0].axis){i=n;break}return i},t.prototype.frameDataSource=function(n){var u=[],r;if(("pivot"===this.parent.dataType&&this.parent.dataSourceSettings.dataSource&&this.parent.engineModule.data.length>0||"olap"===this.parent.dataType&&""!==this.parent.dataSourceSettings.url||"Server"===this.parent.dataSourceSettings.mode&&""!==this.parent.dataSourceSettings.url&&this.engine.pivotValues.length>0)&&this.parent.dataSourceSettings.values.length>0&&!this.engine.isEmptyData)if(this.parent.enableValueSorting||!this.engine.isEngineUpdated||"Tabular"===this.gridSettings.layout){for(var f=0,i=this.parent.pivotValues,e="value"===n?this.rowStartPos:0,o="value"===n?i?i.length:0:this.rowStartPos,t=e;t<o;t++)if(i[t]){for(u[f="header"===n?t:f]={},r=0;r<i[t].length;r++)i[t][r]&&(u[f][r]=i[t][r]);f++}}else u="value"===n?this.engine.valueContent:this.engine.headerContent;else u=this.frameEmptyData();return u},t.prototype.frameEmptyData=function(){return[{0:{formattedText:this.parent.localeObj.getConstant("grandTotal")},1:{formattedText:this.parent.localeObj.getConstant("emptyData")}}]},t.prototype.calculateColWidth=function(t){var f;n.isNullOrUndefined(this.parent.resizedValue)||(this.parent.resizedValue=this.parent.showGroupingBar&&this.parent.resizedValue<100?100:this.parent.resizedValue);this.resColWidth=n.isNullOrUndefined(this.parent.resizedValue)?this.resColWidth:this.parent.resizedValue;var e=this.calculateGridWidth(),o=this.parent.element.getBoundingClientRect().width?this.parent.element.getBoundingClientRect().width:this.parent.element.offsetWidth,i=isNaN(this.parent.width)?this.parent.width.toString().indexOf("%")>-1?parseFloat(this.parent.width.toString())/100*o:e:Number(this.parent.width);if(i-=this.gridSettings.columnWidth>this.resColWidth?this.gridSettings.columnWidth:this.parent.isTabular?(this.parent.engineModule.rowMaxLevel+1)*this.resColWidth:this.resColWidth,t=this.parent.isTabular?t-(this.parent.engineModule.rowMaxLevel+1):t-1,this.isOverflows=!(t*this.gridSettings.columnWidth<i),!this.isOverflows){var u=this.calculateGridHeight(),s="auto"===u?this.parent.getHeightAsNumber():u,h=this.engine&&this.engine.headerContent?Object.keys(this.engine.headerContent).length:1,l=s-this.gridSettings.rowHeight*h,r=0;this.engine&&(this.engine.valueContent&&this.engine.valueContent.length>0?r=this.engine.valueContent.length:this.engine.rowCount&&this.engine.rowCount>0&&(r=this.engine.rowCount));r>0&&this.gridSettings.rowHeight*r>l&&(i-=c.getScrollBarWidth())}return f=t*this.gridSettings.columnWidth<i?i/t:this.gridSettings.columnWidth,this.isOverflows||this.gridSettings.allowAutoResizing?f:this.gridSettings.columnWidth},t.prototype.resizeColWidth=function(t){var i,r;return n.isNullOrUndefined(this.parent.resizedValue)||(this.parent.resizedValue=this.parent.showGroupingBar&&this.parent.resizedValue<100?100:this.parent.resizedValue),this.resColWidth=n.isNullOrUndefined(this.parent.resizedValue)?this.resColWidth:this.parent.resizedValue,i=isNaN(this.parent.width)?this.parent.width.toString().indexOf("%")>-1?parseFloat(this.parent.width.toString())/100*this.parent.element.offsetWidth:this.parent.element.offsetWidth:Number(this.parent.width),t-=1,i-=this.gridSettings.columnWidth>this.resColWidth?this.gridSettings.columnWidth:this.resColWidth,this.isOverflows=!(t*this.gridSettings.columnWidth<i),r=t*this.gridSettings.columnWidth<i?i/t:this.gridSettings.columnWidth,this.isOverflows||this.gridSettings.allowAutoResizing?r:this.gridSettings.columnWidth},t.prototype.calculateGridWidth=function(){var n=this.parent.width,t=this.parent.element.getBoundingClientRect().width?this.parent.element.getBoundingClientRect().width:this.parent.element.offsetWidth;return 0===t&&(t=this.parent.element.parentElement.getBoundingClientRect().width?this.parent.element.parentElement.getBoundingClientRect().width:this.parent.element.parentElement.offsetWidth),"auto"===this.gridSettings.width?"auto"===this.parent.width?n=t:this.parent.width.toString().indexOf("%")>-1?n=parseFloat(this.parent.width.toString())/100*t:this.parent.width.toString().indexOf("px")>-1&&(n=this.parent.width.toString().split("px")[0]):n=this.gridSettings.width,!this.gridSettings.allowAutoResizing&&n>this.parent.totColWidth?this.parent.totColWidth:n},t.prototype.calculateGridHeight=function(n){var r=this.parent.element.querySelector("."+yt+" ."+ct),t=this.parent.height,i=this.parent.getHeightAsNumber();if(r&&(i=isNaN(i)?i>this.parent.minHeight?i:this.parent.minHeight:r.offsetWidth<r.querySelector("."+b).offsetWidth?i-c.getScrollBarWidth():i,this.parent.showToolbar&&"Chart"!==this.parent.currentView||!this.parent.showToolbar&&"Chart"!==this.parent.displayOption.view))if("auto"===this.gridSettings.height&&i&&this.parent.element.querySelector("."+lf))if(t=(t=i-(this.parent.element.querySelector("."+lf).offsetHeight+(this.parent.element.querySelector("."+br)?this.parent.element.querySelector("."+br).offsetHeight:0)+(this.parent.element.querySelector("."+gu)?42:0)+(this.parent.element.querySelector("."+gc)?this.parent.element.querySelector("."+gc).offsetHeight:0))-1)<40?40:t,n){var u=r.querySelector("."+b).offsetHeight,e=r.querySelector("."+b).offsetHeight,o=r.querySelector("."+b).offsetWidth,f=r.offsetWidth<=o;t>=u&&(!f||t>=e)&&!(f&&t-u<15)?this.parent.grid.height="auto":(this.parent.grid.height=t,this.parent.grid.dataBind())}else t>this.engine.valueContent.length*this.gridSettings.rowHeight&&(t="auto");else t=this.gridSettings.height;return t<this.parent.gridSettings.rowHeight?this.parent.gridSettings.rowHeight:t},t.prototype.frameStackedHeaders=function(){var p=this.parent.pivotColumns,rt="pivot"===this.parent.dataType?this.parent.engineModule:this.parent.olapEngineModule,s=this.parent.grid.columnModel,f=!1,w=!(!this.parent.toolbarModule||!this.parent.toolbarModule.isReportChange)||!!this.parent.actionObj&&("Sort value"===this.parent.actionObj.actionName&&1===rt.valueAxis||"Sort field"===this.parent.actionObj.actionName&&"columns"===this.parent.actionObj.fieldInfo.axis||this.parent.pivotFieldListModule&&"Sort field"===this.parent.pivotFieldListModule.actionObj.actionName&&"columns"===this.parent.pivotFieldListModule.actionObj.fieldInfo.axis),u,r,i,y,e,c,o,nt,b,k,d;if(this.pivotColumns=[],("olap"===this.parent.dataType&&""!==this.parent.dataSourceSettings.url||this.parent.dataSourceSettings.values.length>0&&this.parent.dataSourceSettings.dataSource&&this.parent.engineModule.data.length>0||"Server"===this.parent.dataSourceSettings.mode&&this.parent.dataSourceSettings.values.length>0&&""!==this.parent.dataSourceSettings.url&&this.engine.pivotValues.length>0)&&!this.engine.isEmptyData){var l=this.engine.headerContent.length,a=[],v=[],tt=this.calculateColWidth(this.engine.pivotValues&&this.engine.pivotValues[0]?this.engine.pivotValues[0].length:0),ut="olap"===this.parent.dataType&&!n.isNullOrUndefined(this.engine.colMeasurePos)&&this.engine.colDepth-1===this.parent.olapEngineModule.colMeasurePos;do{if(u=[],r=0,l--,i=this.engine.headerContent[l],y=i?Object.keys(i).length:0,i&&y>0)for(var ft=this.parent.isTabular?this.parent.engineModule.rowMaxLevel+1:i[0]?0:1,t=0,et=Object.keys(i).length+ft;t<et;t++){if(e=i[t]&&i[t].colSpan?3!==i[t].memberType||3===i[t].memberType&&!ut||0===l?i[t].colSpan:a[t]:1,e="olap"===this.parent.dataType&&n.isNullOrUndefined(e)?1:e,c=i[t]?"grand sum"===i[t].type?n.isNullOrUndefined(i[t].valueSort.axis)?this.parent.localeObj.getConstant("grandTotal"):i[t].formattedText:"sum"===i[t].type?i[t].formattedText.split("Total")[0]+this.parent.localeObj.getConstant("total"):i[t].formattedText:"",c=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(c):c,l===this.engine.headerContent.length-1)e=1,f=p.length-1===y&&!w&&!this.parent.isEmptyGrid&&p[r]&&p[r].autoFit,u[r]={field:t+".formattedText",headerText:c,customAttributes:{cell:this.cloneDataWithoutIndex(i[t])},width:f&&s[r]?s[r].width:i[t]&&i[t].valueSort?this.setSavedWidth(i[t].valueSort.levelName,tt):this.resColWidth,minWidth:f&&r===y?s[s.length-1].minWidth:30,allowReordering:this.parent.gridSettings.allowReordering,allowResizing:this.parent.gridSettings.allowResizing,visible:!0,textAlign:this.parent.enableRtl?"Left":"Right",headerTextAlign:this.parent.enableRtl?"Right":"Left"},t===y&&(u[r].width=u[r].width-3,this.lastColumn=u[r]);else if(a[t]){for(var it=e,g=[],h=t;it>0;){if(u[r]){if(!this.pivotColumns[v[h]])break;g.push(this.pivotColumns[v[h]])}else{if(u[r]={headerText:c,field:i[t]?i[t].valueSort.levelName:"",customAttributes:{cell:this.cloneDataWithoutIndex(i[t])},width:f&&0===r&&!w&&!this.parent.isEmptyGrid&&p[0].autoFit?s[0].width:i[t]?this.setSavedWidth(i[t].valueSort.levelName,tt):this.resColWidth,minWidth:30,allowReordering:this.parent.gridSettings.allowReordering,allowResizing:this.parent.gridSettings.allowResizing,visible:!0,headerTextAlign:this.parent.enableRtl?"Right":"Left"},!this.pivotColumns[v[h]])break;g=[this.pivotColumns[v[h]]]}this.isAutoFitEnabled=!!this.isAutoFitEnabled||f;it-=a[h];h+=a[h]}u[r].columns=g}u[r]&&(u[r].clipMode=this.gridSettings.clipMode);a[t]=e;v[t]=r;r++;t=t+e-1}this.pivotColumns=u.length>0?u:this.pivotColumns}while(l>0);if(this.parent.isTabular)for(o=0;o<this.parent.engineModule.rowMaxLevel+1;o++)if(nt=this.parent.element.querySelectorAll("."+rl),!this.parent.showGroupingBar||this.parent.isAdaptive||n.isNullOrUndefined(nt[o]))for(b=0;b<this.parent.engineModule.rowMaxLevel+1;b++)this.updatePivotColumn(this.pivotColumns,b,f,w,s);else k=nt[o].querySelectorAll(".e-pvt-btn-div"),d=0,d=this.parent.engineModule.rowMaxLevel!==k.length-1&&0!==this.parent.engineModule.rowMaxLevel&&o===this.parent.engineModule.rowMaxLevel?this.getTotalColumnWidth(k):0===this.parent.engineModule.rowMaxLevel?this.parent.resizedValue?this.parent.resizedValue:250:.8*this.parent.element.getBoundingClientRect().width<=this.getTotalColumnWidth(k)?this.gridSettings.columnWidth:this.parent.resizedValue?this.parent.resizedValue:150,this.pivotColumns[o]={field:o+".formattedText",width:d>this.gridSettings.columnWidth?d:this.resColWidth,minWidth:30,headerText:"",allowReordering:!1,allowResizing:this.parent.gridSettings.allowResizing,visible:!0,clipMode:this.parent.gridSettings.clipMode};else this.updatePivotColumn(this.pivotColumns,0,f,w,s)}else this.resColWidth=this.parent.showGroupingBar&&this.parent.groupingBarModule?this.parent.isAdaptive?180:250:this.parent.isAdaptive?140:200,this.pivotColumns=this.frameEmptyColumns();return this.parent.toolbarModule&&this.parent.showToolbar&&(this.parent.toolbarModule.isReportChange=!1),this.parent.triggerColumnRenderEvent(this.pivotColumns),f=this.parent.pivotColumns.length>0&&this.parent.pivotColumns[this.parent.pivotColumns.length-1].autoFit,this.pivotColumns},t.prototype.setSavedWidth=function(n,t){var u,i,r;if(this.parent.isTabular&&this.parent.element.querySelector(".e-row").querySelector(".e-rowcell")&&this.parent.showGroupingBar&&"0.formattedText"===n&&0===this.parent.dataSourceSettings.values.length&&(u=0,i=this.parent.element.querySelector("."+rl).querySelectorAll(".e-pvt-btn-div"),i.length>1)){for(r=0;r<i.length;r++)u+=i[r].getBoundingClientRect().width+6;t=u}return this.parent.resizeInfo[n]?this.parent.resizeInfo[n]:t},t.prototype.frameEmptyColumns=function(){var n=[],t=this.calculateColWidth(2);return n.push({field:"0.formattedText",headerText:"",minWidth:30,width:this.resColWidth}),n.push({field:"1.formattedText",headerText:this.parent.localeObj.getConstant("grandTotal"),minWidth:30,width:t-3}),n},t.prototype.getFormatList=function(){for(var t,r,i,o,f,s,e={},u=0;u<this.parent.dataSourceSettings.values.length;u++){if(t=this.parent.dataSourceSettings.values[u],r="N","olap"===this.parent.dataType)this.parent.olapEngineModule.fieldList[t.name]&&!n.isNullOrUndefined(this.parent.olapEngineModule.fieldList[t.name].formatString)&&(i=this.parent.olapEngineModule.formatFields[t.name]?this.parent.olapEngineModule.formatFields[t.name].format:this.parent.olapEngineModule.fieldList[t.name].formatString,r=(i="Standard"===i?"Number":i).indexOf("#")>-1||null!==i.match(/\d/)?i:i[0]+"2");else if(o=["PercentageOfDifferenceFrom","PercentageOfRowTotal","PercentageOfColumnTotal","PercentageOfGrandTotal","PercentageOfParentRowTotal","PercentageOfParentColumnTotal","PercentageOfParentTotal"],o.indexOf(t.type)>-1?r="P"+this.engine.getPercentFormat(this.engine.formatFields,t.name):["PopulationStDev","SampleStDev","PopulationVar","SampleVar","Index"].indexOf(t.type)>-1&&(r=void 0),this.parent.dataSourceSettings.formatSettings.length>0)for(f=0;f<this.parent.dataSourceSettings.formatSettings.length;f++)if(s=this.parent.dataSourceSettings.formatSettings[f],t.name===s.name){-1===o.indexOf(t.type)&&(r=s.format);break}e[t.name]=r}return e},t.prototype.getValidHeader=function(t,i){var f,u=this.parent.dataSourceSettings.values,r;if("row"===i){if(r=t,0===this.parent.dataSourceSettings.rows.length||0===this.parent.dataSourceSettings.columns.length){if(0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis&&this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+r.value===r.data[0].valueSort.levelName)return this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(this.parent.engineModule.fieldList[r.value.toString()].aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+r.value.toString();if(1===u.length&&0===this.parent.dataSourceSettings.rows.length)return this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(u[u.length-1].type)+" "+this.parent.localeObj.getConstant("of")+" "+(n.isNullOrUndefined(u[u.length-1].caption)?u[u.length-1].name:u[u.length-1].caption)}f=r.value}else if("column"===i){if(r=t,(0===this.parent.dataSourceSettings.rows.length||0===this.parent.dataSourceSettings.columns.length)&&!n.isNullOrUndefined(t.gridCell.column.customAttributes)&&0===this.parent.dataSourceSettings.columns.length&&"column"===this.parent.dataSourceSettings.valueAxis&&this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+r.gridCell.column.customAttributes.cell.formattedText===r.gridCell.column.customAttributes.cell.valueSort.levelName)return this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(this.parent.engineModule.fieldList[r.gridCell.column.customAttributes.cell.actualText].aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+r.gridCell.column.customAttributes.cell.formattedText;f=r.cell.value}return f},t.prototype.excelColumnEvent=function(n){0===this.parent.dataSourceSettings.columns.length&&"column"===this.parent.dataSourceSettings.valueAxis&&(n.cell.value=this.getValidHeader(n,"column"));void 0!==n.gridCell&&"auto"===n.gridCell.column.width&&(this.parent.lastColumn=n.gridCell.column,n.gridCell.column.width=n.gridCell.column.minWidth);n=this.exportHeaderEvent(n,"XLSX");this.parent.trigger("excelHeaderQueryCellInfo",n)},t.prototype.pdfColumnEvent=function(n){0===this.parent.dataSourceSettings.columns.length&&"column"===this.parent.dataSourceSettings.valueAxis&&(n.cell.value=this.getValidHeader(n,"column"));void 0!==n.gridCell&&"auto"===n.gridCell.column.width&&(this.parent.lastColumn=n.gridCell.column,n.gridCell.column.width=n.gridCell.column.minWidth);0===n.gridCell.column.index&&(n.cell.colSpan=this.parent.isTabular?this.parent.engineModule.rowMaxLevel+1:1);this.parent.trigger("pdfHeaderQueryCellInfo",n)},t.prototype.excelRowEvent=function(t){var i,h=this.parent.isTabular?this.parent.engineModule.rowMaxLevel:0,u=t.column?t.column.index:void 0,f;if(u>=0&&u<=h){var r=t.data[u],c=r.type&&"value"===r.type,e=0;if("olap"===this.parent.dataType)e=this.indentCollection[r.rowIndex];else{var l=r.valueSort?r.valueSort.levelName.toString():"",o=r.actualText?r.actualText.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,s=l.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-(o?o-1:o);e=s?s-1:0}this.colPos=0;t.style={hAlign:"Left",indent:2*e};this.lastSpan=c?this.lastSpan:e;0!==t.data[u].rowSpan&&0!==t.data[u].colSpan||"CSV"!==this.parent.exportType||!this.parent.isTabular||(t.value="")}else(this.colPos++,i=t.data[t.column.customAttributes.cell?t.column.customAttributes.cell.colIndex:this.colPos],n.isNullOrUndefined(i.value)||n.isNullOrUndefined(i.formattedText)||""===i.formattedText)?t.value="Excel"===this.parent.exportType?null:"":(f="pivot"===this.parent.dataType&&this.parent.engineModule?this.parent.engineModule.aggregatedValueMatrix:void 0,t.value=f&&f[i.rowIndex]&&f[i.rowIndex][i.colIndex]?f[i.rowIndex][i.colIndex]:n.isNullOrUndefined(i.value)||"#DIV/0!"===i.formattedText?i.formattedText:i.value);t=this.exportContentEvent(t);0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis&&(t.value="0.formattedText"===t.column.field?this.getValidHeader(t,"row"):t.value);this.parent.trigger("excelQueryCellInfo",t);i&&!n.isNullOrUndefined(t.value)&&""!==t.value&&(t.style&&this.formatList[i.actualText]?(t.style.type="number",t.style.numberFormat=t.style.numberFormat?t.style.numberFormat:this.formatList[i.actualText]):this.formatList[i.actualText]&&(t.style={numberFormat:this.formatList[i.actualText]}),t.column.format=this.formatList[i.actualText])},t.prototype.pdfRowEvent=function(n){if("0.formattedText"===(n=this.exportContentEvent(n)).column.field){var i=0,t=n.data[0],f=t.type&&"value"===t.type;if("olap"===this.parent.dataType)i=this.indentCollection[t.rowIndex];else{var e=t.valueSort?t.valueSort.levelName.toString():"",r=t.actualText?t.actualText.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,u=e.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-(r?r-1:r);i=u?u-1:0}n.style={paragraphIndent:10*i};this.lastSpan=f?this.lastSpan:i;0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis&&(n.value=this.getValidHeader(n,"row"))}this.parent.trigger("pdfQueryCellInfo",n)},t.prototype.excelDataBound=function(n){for(var u=n.excelRows,e=Object.keys(this.engine.headerContent).length,t=0;t<e;t++){for(var r=u[t].cells,f=[],i=0;i<r.length;i++)-1!==r[i].rowSpan&&f.push(r[i]);u[t].cells=f}},t.prototype.exportHeaderEvent=function(t,i){var u=1,r;return t.gridCell.column.customAttributes?(r=t.gridCell.column.customAttributes.cell,u=r.rowSpan>0?r.rowSpan:1,"XLSX"===i&&(r.rowSpan>0?u=r.rowSpan:n.isNullOrUndefined(r.type)||0===r.level||(u=1,t.cell.rowSpan=1)),this.actualText=r.actualText):u=Object.keys(this.engine.headerContent).length,t.cell.rowSpan!==u&&u>0&&(t.cell.rowSpan=u),t},t.prototype.frameGridDataSource=function(n){for(var i,r,f,u=[],t=0;t<n.length;t++)for(i=0,u[t]={},r=Object.keys(n[t]),f=0;null!=n[t]&&f<r.length;f++)for(;i<r.length;)u[t][Number(r[i])]=this.cloneDataWithoutIndex(n[t][Number(r[i])]),i++;return u},t.prototype.cloneDataWithoutIndex=function(t){if(!n.isNullOrUndefined(t)){for(var r=Object.keys(t),i=0,u={};i<r.length;)"indexObject"!==r[i]&&"index"!==r[i]&&(u[r[i]]=t[r[i]]),i++;return u}return t},t.prototype.exportContentEvent=function(t){var i=t.data[Number(t.column.field.split(".formattedText")[0])];return i.rowSpan>0&&"row"===i.axis&&(t.cell.rowSpan=i.rowSpan),i.colSpan>0&&"row"===i.axis&&(t.colSpan=i.colSpan),t.value="grand sum"===i.type?n.isNullOrUndefined(i.valueSort.axis)?this.parent.localeObj.getConstant("grandTotal"):i.formattedText:t.value,t},t.prototype.unWireEvents=function(t){t&&t.querySelector(".e-hyperlinkcell")&&n.EventHandler.remove(t.querySelector(".e-hyperlinkcell"),this.parent.isAdaptive?"touchend":"click",this.onHyperCellClick)},t.prototype.wireEvents=function(t){t.querySelector(".e-hyperlinkcell")&&n.EventHandler.add(t.querySelector(".e-hyperlinkcell"),this.parent.isAdaptive?"touchend":"click",this.onHyperCellClick,this)},t.prototype.setSpanAttributes=function(n,t,i){i.setAttribute(n,t?t.toString():"1");i.classList.add(gi,"e-freezeleftborder","e-tabular-layout-header");0===t&&i.classList.add(h)},t.prototype.updatePivotColumn=function(n,t,i,r,u){n[t]={field:t+".formattedText",width:i&&!r&&!this.parent.isEmptyGrid&&n[t].autoFit?u[t].width:this.resColWidth,minWidth:30,headerText:"",allowReordering:!1,allowResizing:this.parent.gridSettings.allowResizing,visible:!0,clipMode:this.parent.gridSettings.clipMode}},t.prototype.getTotalColumnWidth=function(n){for(var t=0,i=0;i<n.length;i++)t+=this.parent.resizedValue?this.parent.resizedValue:150;return t},t.prototype.destroy=function(){this.timeOutObj&&(clearTimeout(this.timeOutObj),this.timeOutObj=void 0);this.removeAllHyperlinkEventHandlers();this.aggMenu&&(this.aggMenu.destroy(),this.aggMenu=void 0);this.engine=null;this.gridSettings=null;this.formatList=null;this.lastColumn=null;this.pivotColumns=[];this.indentCollection={};this.lvlCollection={};this.hierarchyCollection={};this.lvlPosCollection={};this.hierarchyPosCollection={};this.drilledLevelInfo={};this.aggMenu=null;this.selectedCells=[]},t.prototype.removeAllHyperlinkEventHandlers=function(){if(this.parent&&this.parent.element)for(var i=this.parent.element.querySelectorAll(".e-hyperlinkcell"),t=0;t<i.length;t++)n.EventHandler.remove(i[t],this.parent.isAdaptive?"touchend":"click",this.onHyperCellClick)},t}(),sv=function(){function t(t){this.keyConfigs={shiftF:"shift+F",shiftS:"shift+S",shiftE:"shift+E","delete":"delete",enter:"enter",escape:"escape",upArrow:"upArrow",downArrow:"downArrow",altJ:"alt+J"};this.parent=t;this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex;this.keyboardModule=new n.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return t.prototype.keyActionHandler=function(n){switch(n.action){case"shiftF":this.processFilter(n);break;case"shiftS":this.processSort(n);break;case"shiftE":this.processEdit(n);break;case"delete":this.processDelete(n);break;case"enter":this.processEnter(n);break;case"escape":this.processClose(n);break;case"upArrow":case"downArrow":this.processFilterNodeSelection(n);break;case"altJ":this.processComponentFocus(n)}},t.prototype.processComponentFocus=function(n){if(this.parent.element)return this.parent.element.focus(),n.stopPropagation(),void n.preventDefault()},t.prototype.getButtonElement=function(n){for(var i=[].slice.call(this.parent.element.querySelectorAll("."+w)),t=0,r=i.length;t<r;t++)if(i[t].getAttribute("data-uid")===n.getAttribute("data-uid"))return i[t];return n},t.prototype.processEnter=function(t){var i=t.target;if(i&&n.closest(i,"."+w))return i.querySelector("."+nu)&&n.closest(i,"."+si)?i.querySelector("."+nu).click():i.querySelector("."+g)?i.querySelector("."+g).click():!i.querySelector("."+rf)||n.closest(i,"."+si)||n.closest(i,"."+ls)?i.querySelector("."+ii)&&!n.closest(i,"."+si)&&i.querySelector("."+ii).click():(i.querySelector("."+rf).click(),this.getButtonElement(i).focus()),void t.preventDefault()},t.prototype.processSort=function(t){var i=t.target;if(i&&n.closest(i,"."+w)&&i.querySelector("."+rf)&&!n.closest(i,"."+si)&&!n.closest(i,"."+ls))return i.querySelector("."+rf).click(),this.getButtonElement(i).focus(),void t.preventDefault()},t.prototype.processEdit=function(t){var i=t.target;if(i&&n.closest(i,"."+w)&&i.querySelector("."+g))return i.querySelector("."+g).click(),void t.preventDefault()},t.prototype.processFilter=function(t){var r=t.target,i,u;r&&n.closest(r,"."+w)&&r.querySelector("."+ii)&&!n.closest(r,"."+si)&&((r.querySelector("."+ii).click(),this.parent&&this.parent.control&&"pivotview"===this.parent.moduleName&&this.parent.control.grid&&this.parent.control.showGroupingBar&&this.parent.control.groupingBarModule&&n.closest(r,"."+ki)&&this.parent.filterDialog&&this.parent.filterDialog.dialogPopUp&&!this.parent.filterDialog.dialogPopUp.isDestroyed&&this.parent.filterDialog.dialogPopUp.element)&&(i=this.parent.filterDialog.dialogPopUp.element,u=this.parent.filterDialog.allowExcelLikeFilter,clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){i&&i.classList.contains("e-popup-open")&&(u&&i.querySelector(".e-dlg-closeicon-btn")?i.querySelector(".e-dlg-closeicon-btn").focus():i.querySelector("input")&&i.querySelector("input").focus())})),t.preventDefault())},t.prototype.processFilterNodeSelection=function(t){var r=t.target,u,i,f;if(r&&n.closest(r,"."+us)&&40===t.keyCode){if((i=n.closest(r,"."+ee).querySelector("."+hu))&&i.querySelector("li"))return u=i.querySelector("li"),i.querySelector("li#_active")&&(n.removeClass([i.querySelector("li#_active")],["e-node-focus"]),i.querySelector("li#_active").removeAttribute("id")),u.setAttribute("id","_active"),n.addClass([u],["e-node-focus"]),u.focus(),void t.preventDefault()}else if(r&&n.closest(r,"."+hu)&&38===t.keyCode){if((i=n.closest(r,"."+hu)).querySelector("li#_active.e-node-focus")&&i.querySelector("li")&&i.querySelector("li").classList.contains("e-prev-active-node")&&i.querySelector("li")===i.querySelector("li#_active.e-node-focus")&&(n.removeClass(i.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node"),f=n.closest(r,"."+ee).querySelector("."+us),f&&f.querySelector("li")))return(u=f.querySelector("li")).setAttribute("id","_active"),n.addClass([u],["e-node-focus"]),u.focus(),void t.preventDefault()}else r&&r.id===this.parent.parentID+"_inputbox"&&("upArrow"===t.action?r.parentElement.querySelector(".e-spin-up").click():"downArrow"===t.action&&r.parentElement.querySelector(".e-spin-down").click())},t.prototype.processDelete=function(t){var i=t.target;if(i&&n.closest(i,"."+w)&&i.querySelector("."+ur))return i.querySelector("."+ur).click(),void t.preventDefault()},t.prototype.processClose=function(t){var u=t.target,i,s,r,f,e;if(u&&n.closest(u,".e-popup.e-popup-open")&&(i=n.getInstance(n.closest(u,".e-popup.e-popup-open"),o.Dialog),i&&!i.closeOnEscape)){if(s=i.element.getAttribute("data-fieldName"),i.hide(),this.parent.element)for(r=0,f=[].slice.call(this.parent.element.querySelectorAll(".e-pivot-button"));r<f.length;r++)if(e=f[r],e.getAttribute("data-uid")===s){e.focus();break}return void t.preventDefault()}},t.prototype.destroy=function(){this.timeOutObj&&(clearTimeout(this.timeOutObj),this.timeOutObj=null);this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null)},t}(),hv=function(){function t(n){this.searchListItem=[];this.parent=n}return t.prototype.updateSorting=function(t){var f,c,e,s;if(!t.target.classList.contains(ii)&&!t.target.classList.contains(ur)){this.parent.filterDialog.dialogPopUp&&this.parent.filterDialog.dialogPopUp.close();var o,u=t.target,i=void 0,h=void 0;if(u.id?(i=u.getAttribute("data-uid"),h=[].slice.call(u.querySelectorAll("."+su))):(i=u.parentElement.getAttribute("data-uid"),h=[].slice.call(u.parentElement.querySelectorAll("."+su))),o=0!==h.length,f=r.getFieldByName(i,this.parent.dataSourceSettings.sortSettings),c=this.parent.engineModule&&this.parent.engineModule.fieldList[i]&&this.parent.engineModule.fieldList[i].membersOrder?this.parent.engineModule.fieldList[i].membersOrder.slice():[],n.isNullOrUndefined(f))s={name:i,order:o?"Ascending":"Descending",membersOrder:f?f.membersOrder:c},this.parent.dataSourceSettings.sortSettings.push(s);else{for(e=0;e<this.parent.dataSourceSettings.sortSettings.length;e++)if(this.parent.dataSourceSettings.sortSettings[e].name===i){this.parent.dataSourceSettings.sortSettings.splice(e,1);break}s={name:i,order:o?"Ascending":"Descending",membersOrder:f?f.membersOrder:c};this.parent.dataSourceSettings.sortSettings.push(s)}this.parent.control.lastSortInfo=this.parent.dataSourceSettings.sortSettings[this.parent.dataSourceSettings.sortSettings.length-1];o?n.removeClass([u],su):n.addClass([u],su)}},t.prototype.updateFiltering=function(t){var w=t.target,u=w.parentElement.getAttribute("data-uid"),nt=w.parentElement.textContent,a=!1,b=[],v=[],f,i,s,e,p,d,h,l;if(this.parent.dataSourceSettings.allowMemberFilter)if("olap"===this.parent.dataType)v=this.getOlapData(u,a);else{f=this.parent.engineModule.fieldList[u];i=r.getClonedData(f.dateMember);this.parent.isDateField=r.isDateField(u,this.parent.engineModule);s=f&&f.membersOrder?f.membersOrder.slice():[];e=void 0;"Out of Range"===i[0].actualText?(e=i[0],i.splice(0,1)):"Out of Range"===i[i.length-1].actualText&&(e=i[i.length-1],i.splice(i.length-1,1));var o={fieldName:u,sortOrder:f.sort,members:s&&s.length>0?s:Object.keys(i),IsOrderChanged:!1},k=!1,y=!(!f||!f.isAlphanumeric)||void 0;if(s&&s.length>0?i=r.applyCustomSort(o,i,y):(p=this.parent.dataSourceSettings.groupSettings.filter(function(n){return n.name===u&&"number"===n.type.toLocaleLowerCase()}),d=!n.isNullOrUndefined(p)&&p.length>0,i=r.applyHeadersSort(i,o.sortOrder,y,d),k=!0),h=r.getFilterItemByName(u,this.parent.dataSourceSettings.filterSettings),n.isNullOrUndefined(h)||(a=!(!this.isValidFilterItemsAvail(u,h)||"Include"!==h.type),b=h.items?h.items:[]),e&&("Ascending"===o.sortOrder?"Grand Total"===i[i.length-1].actualText?i.splice(i.length-1,0,e):i.splice(i.length,0,e):"Grand Total"===i[0].actualText?i.splice(1,0,e):i.splice(0,0,e)),k){for(var g=[],c=0,tt=0;c<i.length;c++)"Grand Total"!==i[c].actualText&&(g[tt++]=i[c].actualText);o.members=g}this.parent.control.trigger(df,o);o.IsOrderChanged&&(i=r.applyCustomSort(o,i,y,!0));v=this.getTreeData(a,i,b,u)}this.parent.filterDialog.dialogPopUp&&this.parent.filterDialog.dialogPopUp.close();l=this.parent.control.filterTargetID;n.isNullOrUndefined(l)&&(l="pivotfieldlist"!==this.parent.moduleName?this.parent.element:document.getElementById(this.parent.parentID+"_Container"));this.parent.filterDialog.createFilterDialog(v,u,nt,l)},t.prototype.isValidFilterItemsAvail=function(n,t){var u=!1,s,f,e,i,o;if(t&&["Include","Exclude"].indexOf(t.type)>=0)if("Include"===t.type&&0===t.items.length)u=!0;else for(f=this.parent.engineModule,e=f.fieldList[n],s="Server"===this.parent.dataSourceSettings.mode||"olap"===this.parent.dataType?e.members:r.getFormattedMembers(e.members,n,f),i=0,o=t.items;i<o.length;i++)if(s[o[i]]){u=!0;break}return u},t.prototype.getOlapData=function(t,i){var o=[],c=[],u,f,l,e;this.parent.filterDialog.isSearchEnabled=!1;u=this.parent.engineModule;f=r.getFilterItemByName(t,this.parent.dataSourceSettings.filterSettings);0===u.fieldList[t].filterMembers.length?this.parent.control.loadOnDemandInMemberEditor?f&&f.levelCount>1&&u.fieldList[t].levels.length>1?u.getFilterMembers(this.parent.dataSourceSettings,t,f.levelCount):(u.fieldList[t].levelCount=1,u.getMembers(this.parent.dataSourceSettings,t)):u.getMembers(this.parent.dataSourceSettings,t,!0):(u.fieldList[t].currrentMembers={},u.fieldList[t].searchMembers=[]);l=u.fieldList[t].isHierarchy;o=u.fieldList[t].filterMembers;n.isNullOrUndefined(f)||(i=!f.type||"Include"===f.type,c=f.items?f.items:[]);for(var a={},s={},y=u.fieldList[t].members,h=0,v=c;h<v.length;h++)e=v[h],a[e]=e,s[e]=e,y[e]&&(s=this.getParentNode(t,e,s));return o=this.getFilteredTreeNodes(t,o,s,[]),o=this.getOlapTreeData(i,r.getClonedData(o),a,t,l),this.sortOlapFilterData(o,u.fieldList[t].sort)},t.prototype.sortOlapFilterData=function(n,t){if(n.length>0){for(var s=!1,h=[],f=0;f<n.length;f++)h.push(n[f].caption);var e="Grand Total"!==n[0].caption||void 0===n[0].caption?n[0].htmlAttributes["data-fieldName"]:n[1].htmlAttributes["data-fieldName"],c=this.parent.engineModule,o=c.fieldList[e],i=o&&o.membersOrder?o.membersOrder.slice():[],r={fieldName:e,levelName:c.levelUniqueName[e],sortOrder:t,members:i&&i.length>0?i:h,IsOrderChanged:!1};if(i&&i.length>0?this.applyFilterCustomSort(n,r):(n="Ascending"===t?n.sort(function(n,t){return n.caption>t.caption?1:t.caption>n.caption?-1:0}):"Descending"===t?n.sort(function(n,t){return n.caption<t.caption?1:t.caption<n.caption?-1:0}):n,s=!0),s){for(var l=[],u=0,a=0;u<n.length;u++)"Grand Total"!==n[u].caption&&(l[a++]=n[u].caption);r.members=l}this.parent.control.trigger(df,r);r.IsOrderChanged&&this.applyFilterCustomSort(n,r,!0)}return n},t.prototype.applyFilterCustomSort=function(n,t,i){var e,o,u=[],r,f,s;for(o=t.IsOrderChanged?t.members:"Ascending"===t.sortOrder||"None"===t.sortOrder||void 0===t.sortOrder?[].concat(t.members):[].concat(t.members).reverse(),"Grand Total"===n[0].caption&&(e=n[0],n.shift()),r=0,f=0;r<n.length;r++){if(s=n[r].caption,o[f]===s){if(n.splice(f++,0,n[r]),n.splice(++r,1),!(f<o.length)){i||u.splice(--f,0,s);break}r=-1}r>=0&&!i&&(u[r]=n[r].caption)}if(!i){for(r=u.length;r<n.length;r++)u[r]=n[r].caption;"Grand Total"===u[u.length-1]&&u.pop();t.members=u}return e&&n.splice(0,0,e),n},t.prototype.getParentIDs=function(n,t,i){for(var r,e,u=0,f=n.fields.dataSource;u<f.length;u++)if(e=f[u],e.id===t){r=e.pid;break}return r&&(i.push(r),this.getParentIDs(n,r,i)),i},t.prototype.getChildIDs=function(n,t,i){for(var r,e,u=0,f=n.fields.dataSource;u<f.length;u++)if(e=f[u],e.pid===t){r=e.id;break}return r&&(i.push(r),this.getParentIDs(n,r,i)),i},t.prototype.searchTreeNodes=function(t,i,u,f){var l,a,d,y,g,c,p,nt,o,w,tt,b;if(u){for(var e=[],s=[],k=0,it=[].slice.call(i.element.querySelectorAll("li"));k<it.length;k++)l=it[k],l.querySelector(".e-list-text").textContent.toLowerCase().indexOf(t.value.toLowerCase())>-1?e.push(l):s.push(l);if(i.enableNodes(e),n.removeClass(e,h),i.disableNodes(s),n.addClass(s,h),e.length>0&&s.length>0)for(a=0,d=e;a<d.length;a++){var rt=d[a].getAttribute("data-uid"),ut=this.getParentIDs(i,rt,[]),ft=this.getChildIDs(i,rt,[]),v=[];if(ut.length>0)for(y=0,g=s;y<g.length;y++)c=g[y],-1!==r.inArray(c.getAttribute("data-uid"),ut)&&v.push(c);if(ft.length>0)for(p=0,nt=s;p<nt.length;p++)c=nt[p],-1!==r.inArray(c.getAttribute("data-uid"),ft)&&v.push(c);i.enableNodes(v);n.removeClass(v,h)}0===[].slice.call(i.element.querySelectorAll("li."+h)).length?i.collapseAll():i.expandAll(void 0,void 0,!0);this.searchListItem=e}else if(this.parent.searchTreeItems=[],"olap"!==this.parent.dataType||f){for(e=[],o=0,o=1,w=0,tt=this.parent.currentTreeItems;w<tt.length;w++)b=tt[w],b.name.toLowerCase().indexOf(t.value.toLowerCase())>-1&&(this.parent.searchTreeItems.push(b),o<=this.parent.control.maxNodeLimitInMemberEditor&&e.push(b),o++);--o>this.parent.control.maxNodeLimitInMemberEditor?(this.parent.editorLabelElement.innerText=o-this.parent.control.maxNodeLimitInMemberEditor+this.parent.control.localeObj.getConstant("editorDataLimitMsg"),this.parent.filterDialog.dialogPopUp.height=this.parent.filterDialog.allowExcelLikeFilter?"440px":"400px",this.parent.isDataOverflow=!0):(this.parent.editorLabelElement.innerText="",this.parent.filterDialog.dialogPopUp.height=this.parent.filterDialog.allowExcelLikeFilter?"400px":"350px",this.parent.isDataOverflow=!1);this.parent.isDataOverflow=o>this.parent.control.maxNodeLimitInMemberEditor;this.parent.editorLabelElement.parentElement.style.display=this.parent.isDataOverflow?"block":"none";i.fields={dataSource:e,id:"id",text:"name",isChecked:"isSelected",parentID:"pid"};i.dataBind()}else this.updateOlapSearchTree(t,i,f)},t.prototype.updateOlapSearchTree=function(n,t,i){var e=[],f=this.parent.filterDialog.dialogPopUp.element.getAttribute("data-fieldname"),h,a,u,c;if(""===n.value.toLowerCase()){this.parent.filterDialog.isSearchEnabled=!1;this.parent.engineModule.fieldList[f].searchMembers=[];for(var v={},s={},o=this.parent.engineModule.fieldList[f].members,y=[],l=0,p=Object.keys(o);l<p.length;l++)o[u=p[l]].isSelected&&(o[u].parent&&o[o[u].parent].isSelected||y.push(u));for(h=0,a=y;h<a.length;h++)v[u=a[h]]=u,s[u]=u,o[u]&&(s=this.getParentNode(f,u,s));c=this.parent.engineModule.fieldList[f].filterMembers;e=this.getFilteredTreeNodes(f,c,s,[]);e=this.getOlapTreeData(!0,r.getClonedData(e),v,f,i,!0)}else this.parent.filterDialog.isSearchEnabled=!0,c=this.parent.engineModule.fieldList[f].searchMembers,e=r.getClonedData(c),e=this.getOlapSearchTreeData(!0,e,f);t.fields={dataSource:e,id:"id",text:"name",isChecked:"isSelected",parentID:"pid"};t.dataBind()},t.prototype.getTreeData=function(t,i,r,u){var l,f,o;this.parent.currentTreeItems=[];this.parent.searchTreeItems=[];this.parent.currentTreeItemsPos={};this.parent.savedTreeFilterPos={};for(var b=this.parent.engineModule,v=[],e=1,y={},c=0,p=r;c<p.length;c++)l=p[c],y[l]=l;for(var k=u.replace(/[^a-zA-Z0-9 ]/g,"_"),a=0,w=i;a<w.length;a++){f=w[a];o=f.actualText.toString();o=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(o):o;var h=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(f.actualText):f.actualText,s={id:k+"_"+e,htmlAttributes:{"data-fieldName":u,"data-memberId":h.toString()},actualText:h,name:this.parent.isDateField?f.formattedText:b.getFormattedValue(h,u).formattedText,isSelected:!t},d=f.actualText;void 0!==y[this.parent.isDateField?d:o]&&(s.isSelected=!!t);e<=this.parent.control.maxNodeLimitInMemberEditor&&v.push(s);s.isSelected||(this.parent.savedTreeFilterPos[e-1]=this.parent.isDateField?f.formattedText:o);this.parent.currentTreeItems.push(s);this.parent.searchTreeItems.push(s);this.parent.currentTreeItemsPos[h]={index:e-1,isSelected:s.isSelected};e++}return this.parent.isDataOverflow=e-1>this.parent.control.maxNodeLimitInMemberEditor,v},t.prototype.getOlapTreeData=function(n,t,i,r,u,f){var o=this.parent.engineModule.fieldList[r];this.parent.currentTreeItems=[];this.parent.searchTreeItems=[];this.parent.currentTreeItemsPos={};for(var a=[],h=1,l=0,v=t;l<v.length;l++){var c=v[l],e=c,s=c.id.toString();f||(e.isSelected=!n);void 0!==i[s]&&(e.isSelected=!!n);!f&&c.hasChildren&&this.updateChildNodeStates(o.filterMembers,r,c.id,e.isSelected);o.members[s].isSelected=e.isSelected;o.currrentMembers&&o.currrentMembers[s]&&(o.currrentMembers[s].isSelected=e.isSelected);h<=this.parent.control.maxNodeLimitInMemberEditor&&u&&a.push(e);this.parent.currentTreeItems.push(e);this.parent.searchTreeItems.push(e);this.parent.currentTreeItemsPos[s]={index:h-1,isSelected:e.isSelected};h++}return this.parent.isDataOverflow=!!u&&h-1>this.parent.control.maxNodeLimitInMemberEditor,u?a:t},t.prototype.getOlapSearchTreeData=function(n,t,i){for(var r,f,e=this.parent.engineModule.fieldList[i].members,u=0,o=t;u<o.length;u++)r=o[u],f=r.id.toString(),e[f]&&(r.isSelected=e[f].isSelected),this.parent.searchTreeItems.push(r);return t},t.prototype.updateChildNodeStates=function(n,t,i,r){for(var u,s=this.parent.engineModule.fieldList[t].members,f=this.parent.engineModule.fieldList[t].currrentMembers,e=0,o=n;e<o.length;e++)u=o[e],u.pid&&u.pid.toString()===i&&(s[u.id].isSelected=r,f&&f[u.id]&&(f[u.id].isSelected=r),u.hasChildren&&this.updateChildNodeStates(n,t,u.id,r))},t.prototype.getParentNode=function(n,t,i){var u=this.parent.engineModule.fieldList[n].members,r;return u[t].parent&&t!==u[t].parent&&(r=u[t].parent,i[r]=r,this.getParentNode(n,r,i)),i},t.prototype.getFilteredTreeNodes=function(t,i,u,f){for(var a,h,c,v,e,s=[],o=this.parent.engineModule.fieldList[t].members,l=0,y=u?Object.keys(u):[];l<y.length;l++)a=y[l],h=o[a]?o[a].parent:void 0,void 0!==h&&-1===r.inArray(h,s)&&s.push(h);for(c=0,v=i;c<v.length;c++)e=v[c],n.isNullOrUndefined(e.pid)||-1!==r.inArray(e.pid,s)?(f.push(e),n.isNullOrUndefined(e.pid)&&-1!==r.inArray(e.id,s)?o[e.id].isNodeExpand=!0:n.isNullOrUndefined(e.pid)||-1===r.inArray(e.pid,s)?o[e.id].isNodeExpand=!1:(o[e.id].isNodeExpand=!1,o[e.pid].isNodeExpand=!0)):o[e.id].isNodeExpand=!1;return f},t}(),cv=function(){function t(n){this.parent=n}return t.prototype.onStateModified=function(t,i){var r="",o=n.closest(t.target,"."+oi),s=-1,u,f,e;if(this.parent.dataSourceUpdate.btnElement=t.element?t.element.parentElement:void 0,o&&(r=o.classList[1]===lu?"rows":o.classList[1]===vr?"columns":o.classList[1]===si?"values":o.classList[1]===yr?"filters":""),"olap"===this.parent.dataType||"pivot"===this.parent.dataType){if(u="olap"===this.parent.dataType&&this.parent.engineModule.fieldList[i]&&this.parent.engineModule.fieldList[i].isCalculatedField?this.parent.engineModule.fieldList[i].tag:i,t.cancel&&""===r)return!1;if(this.parent.dataSourceUpdate.btnElement&&"true"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&("filters"===r||"values"===r)||this.parent.dataSourceUpdate.btnElement&&"false"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&u.toLowerCase().indexOf("[measures].")>-1&&"olap"===this.parent.dataType&&("filters"===r||"rows"===r||"columns"===r)||this.parent.dataSourceUpdate.btnElement&&"false"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&"olap"===this.parent.dataType&&-1===u.toLowerCase().indexOf("[measures].")&&this.parent.engineModule.fieldList[i]&&this.parent.engineModule.fieldList[i].isNamedSets&&("filters"===r||"values"===r)||this.parent.dataSourceUpdate.btnElement&&"false"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&"olap"===this.parent.dataType&&-1===u.toLowerCase().indexOf("[measures].")&&"values"===r)return f=this.parent.localeObj.getConstant("warning"),e=this.parent.localeObj.getConstant("fieldDropErrorAction"),this.parent.errorDialog.createErrorDialog(f,e),!1}else if(t.cancel&&""===r||this.parent.dataSourceUpdate.btnElement&&"true"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&("filters"===r||"values"===r||r.indexOf(this.parent.dataSourceSettings.valueAxis)>-1))return!1;if(""!==r){if(("olap"===this.parent.dataType||"pivot"===this.parent.dataType)&&((u="olap"===this.parent.dataType&&this.parent.engineModule.fieldList[i]&&this.parent.engineModule.fieldList[i].isCalculatedField?this.parent.engineModule.fieldList[i].tag:i).toLowerCase().indexOf("[measures].")>-1&&"olap"===this.parent.dataType&&("filters"===r||"rows"===r||"columns"===r)||this.parent.engineModule.fieldList[i]&&this.parent.engineModule.fieldList[i].isNamedSets&&"filters"===r||"olap"===this.parent.dataType&&"values"===r&&-1===u.toLowerCase().indexOf("[measures].")))return f=this.parent.localeObj.getConstant("warning"),e=this.parent.localeObj.getConstant("fieldDropErrorAction"),this.parent.errorDialog.createErrorDialog(f,e),!1;if("pivot"===this.parent.dataType&&this.parent.engineModule.fieldList[i]&&"CalculatedField"===this.parent.engineModule.fieldList[i].aggregateType&&"values"!==r)return f=this.parent.localeObj.getConstant("warning"),e=this.parent.localeObj.getConstant("dropAction"),this.parent.errorDialog.createErrorDialog(f,e),!1;s=this.getButtonPosition(t.target,r)}else this.parent.engineModule.fieldList[i]&&(this.parent.engineModule.fieldList[i].isSelected=!1,"olap"===this.parent.dataType&&this.parent.engineModule.updateFieldlistData(i));return this.parent.dataSourceUpdate.updateDataSource(i,r,s)},t.prototype.getButtonPosition=function(t,i){var f=-1,r=n.closest(t,"."+rr);if(!n.isNullOrUndefined(r)){r=r.querySelector("."+w);for(var o=this.parent.element.querySelector(".e-"+i),e=[].slice.call(o.querySelectorAll("."+w)),u=0,s=e.length;u<s;u++)if(e[u].id===r.id){f=u;break}}return f},t}(),lv=function(){function t(n){this.parent=n}return t.prototype.updateDataSource=function(t,i,u){for(var s,y,p,l,e,h,f=this,a=-1,v=!0,c=[this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.values,this.parent.dataSourceSettings.filters],o=0,w=c.length;o<w;o++)if(c[o])for(s=0,y=c[o].length;s<y;s++)(c[o][s].name===t||"olap"===this.parent.dataType&&"[measures]"===c[o][s].name.toLowerCase()&&c[o][s].name.toLowerCase()===t)&&(h=0===o?"rows":1===o?"columns":2===o?"values":"filters",a=s),h||(h="fieldList");return p={fieldName:t,dropField:r.getFieldInfo(t,this.control).fieldItem,dataSourceSettings:r.getClonedDataSourceSettings(this.parent.dataSourceSettings),dropAxis:i,dropPosition:u,draggedAxis:h,cancel:!1},l="pivotfieldlist"===this.control.getModuleName()&&this.control.isPopupView?this.control.pivotGridModule:this.control,l.trigger(gs,p,function(o){var s,c;if(o.cancel)v=!1;else{if(i=o.dropAxis,u=o.dropPosition,t=o.dropField?o.dropField.name:o.fieldName,e=o.dropField,f.control&&f.btnElement&&"true"===f.btnElement.getAttribute("isvalue"))switch(i){case"":f.control.setProperties({dataSourceSettings:{values:[]}},!0);break;case"rows":u=u===f.parent.dataSourceSettings.rows.length?-1:u;f.control.setProperties({dataSourceSettings:{valueAxis:"row",valueIndex:u}},!0);break;case"columns":u=u===f.parent.dataSourceSettings.columns.length?-1:u;f.control.setProperties({dataSourceSettings:{valueAxis:"column",valueIndex:u}},!0)}else(f.removeFieldFromReport(t.toString()),"pivot"===f.parent.dataType&&f.control.showValuesButton&&f.parent.dataSourceSettings.values.length>1)&&(s="row"===f.parent.dataSourceSettings.valueAxis&&"rows"===i?f.parent.dataSourceSettings.rows:"column"===f.parent.dataSourceSettings.valueAxis&&"columns"===i?f.parent.dataSourceSettings.columns:void 0,a<f.parent.dataSourceSettings.valueIndex&&("row"===f.parent.dataSourceSettings.valueAxis&&"rows"===h||"column"===f.parent.dataSourceSettings.valueAxis&&"columns"===h)&&f.control.setProperties({dataSourceSettings:{valueIndex:f.parent.dataSourceSettings.valueIndex-1}},!0),n.isNullOrUndefined(s)||(-1===u&&-1===f.parent.dataSourceSettings.valueIndex?f.control.setProperties({dataSourceSettings:{valueIndex:s.length}},!0):u>-1&&u<=f.parent.dataSourceSettings.valueIndex?f.control.setProperties({dataSourceSettings:{valueIndex:f.parent.dataSourceSettings.valueIndex+1}},!0):f.parent.dataSourceSettings.valueIndex>-1&&u>f.parent.dataSourceSettings.valueIndex&&(u-=1))),"CalculatedField"===(e=f.getNewField(t.toString(),o.dropField)).type&&""!==i&&(i="values");("olap"===f.parent.dataType&&(f.removeFieldFromReport(t.toString()),e=f.getNewField(t.toString(),o.dropField),0===f.parent.dataSourceSettings.values.length&&f.removeFieldFromReport("[measures]"),"CalculatedField"===e.type&&""!==i&&(i="values")),f.control)&&(c={fieldName:t,droppedField:e,dataSourceSettings:r.getClonedDataSourceSettings(f.parent.dataSourceSettings),droppedAxis:i,droppedPosition:u},l.trigger("onFieldDropped",c,function(n){if(e=n.droppedField){switch(u=n.droppedPosition,i=n.droppedAxis){case"filters":-1!==u?f.parent.dataSourceSettings.filters.splice(u,0,e):f.parent.dataSourceSettings.filters.push(e);break;case"rows":-1!==u?f.parent.dataSourceSettings.rows.splice(u,0,e):f.parent.dataSourceSettings.rows.push(e);break;case"columns":-1!==u?f.parent.dataSourceSettings.columns.splice(u,0,e):f.parent.dataSourceSettings.columns.push(e);break;case"values":-1!==u?f.parent.dataSourceSettings.values.splice(u,0,e):f.parent.dataSourceSettings.values.push(e);"olap"!==f.parent.dataType||f.parent.engineModule.isMeasureAvail||f.parent.dataSourceSettings.values.length>1||("row"===f.parent.dataSourceSettings.valueAxis?f.parent.dataSourceSettings.rows:f.parent.dataSourceSettings.columns).push({name:"[Measures]",caption:"Measures",showRemoveIcon:!0,allowDragAndDrop:!0})}var t="columns"===i?l.dataSourceSettings.columns.length:"rows"===i?l.dataSourceSettings.rows.length:0;0!==t&&l.dataSourceSettings.valueIndex===t&&f.control.setProperties({dataSourceSettings:{valueIndex:-1}},!0)}}))}}),v},t.prototype.removeFieldFromReport=function(n){for(var r,s,u,f,e=!1,i=[this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.values,this.parent.dataSourceSettings.filters],o=this.parent.engineModule.fieldList[n],t=0,h=i.length;t<h;t++)if(!e&&i[t])for(r=0,s=i[t].length;r<s;r++)if(i[t][r].name===n||"olap"===this.parent.dataType&&"[measures]"===i[t][r].name.toLowerCase()&&i[t][r].name.toLowerCase()===n){((f=i[t][r].properties?i[t][r].properties:i[t][r]).type=o&&"number"===o.type?f.type:"Count",i[t].splice(r,1),"olap"===this.parent.dataType)&&(u=this.parent.engineModule,u&&u.fieldList[n]&&(u.fieldList[n].currrentMembers={},u.fieldList[n].searchMembers=[]));e=!0;break}return f},t.prototype.getNewField=function(n,t){var r,i;return"olap"===this.parent.dataType?(i=this.parent.engineModule.fieldList[n],r={name:t?t.name:n,caption:t?t.caption:i.caption,isNamedSet:t?t.isNamedSet:i.isNamedSets,isCalculatedField:t?t.isCalculatedField:i.isCalculatedField,type:t?void 0===t.type?"number"===i.type?"Sum":"Count":t.type:void 0===i.aggregateType?"number"===i.type?"Sum":"Count":i.aggregateType,showFilterIcon:t?t.showFilterIcon:i.showFilterIcon,showSortIcon:t?t.showSortIcon:i.showSortIcon,showEditIcon:t?t.showEditIcon:i.showEditIcon,showRemoveIcon:t?t.showRemoveIcon:i.showRemoveIcon,showValueTypeIcon:t?t.showValueTypeIcon:i.showValueTypeIcon,allowDragAndDrop:t?t.allowDragAndDrop:i.allowDragAndDrop,showSubTotals:t?t.showSubTotals:i.showSubTotals,expandAll:t?t.expandAll:i.expandAll}):(i=this.parent.engineModule.fieldList[n],r={name:t?t.name:n,caption:t?t.caption:i.caption,type:t?void 0===t.type||null===t.type?"number"===i.type?"Sum":"Count":t.type:void 0===i.aggregateType||null===i.aggregateType?"number"===i.type?"Sum":"Count":i.aggregateType,showNoDataItems:t?t.showNoDataItems:i.showNoDataItems,baseField:t?t.baseField:i.baseField,baseItem:t?t.baseItem:i.baseItem,allowDragAndDrop:t?t.allowDragAndDrop:i.allowDragAndDrop,showSubTotals:t?t.showSubTotals:i.showSubTotals,showFilterIcon:t?t.showFilterIcon:i.showFilterIcon,showSortIcon:t?t.showSortIcon:i.showSortIcon,showEditIcon:t?t.showEditIcon:i.showEditIcon,showRemoveIcon:t?t.showRemoveIcon:i.showRemoveIcon,showValueTypeIcon:t?t.showValueTypeIcon:i.showValueTypeIcon,expandAll:t?t.expandAll:i.expandAll}),r},t}(),av=function(){function t(n){this.parent=n}return t.prototype.createErrorDialog=function(t,i){var r=n.createElement("div",{id:this.parent.parentID+"_ErrorDialog",className:kh});this.parent.element.appendChild(r);this.errorPopUp=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!1,header:t,content:i,isModal:!0,visible:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"auto",height:"auto",position:{X:"center",Y:"center"},buttons:[{click:this.closeErrorDialog.bind(this),isFlat:!1,buttonModel:{cssClass:wt+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}}],cssClass:this.parent.cssClass,closeOnEscape:!0,target:document.body,close:this.removeErrorDialog.bind(this)});this.errorPopUp.isStringTemplate=!0;this.errorPopUp.appendTo(r)},t.prototype.closeErrorDialog=function(){this.errorPopUp.close()},t.prototype.removeErrorDialog=function(){this.errorPopUp&&!this.errorPopUp.isDestroyed&&(this.errorPopUp.destroy(),this.errorPopUp=null);document.getElementById(this.parent.parentID+"_ErrorDialog")&&n.remove(document.getElementById(this.parent.parentID+"_ErrorDialog"))},t}();const ro=ejdashboard.calendars,vv=ejdashboard.splitbuttons,ut=ejdashboard.buttons;var uo,yv=function(){function t(n){this.parent=n}return t.prototype.createFilterDialog=function(t,i,r,u){var f=this,e=n.createElement("div",{id:this.parent.parentID+"_EditorTreeView",className:"e-member-editor-dialog "+("olap"===this.parent.dataType?"e-olap-editor-dialog":"")+(this.parent.isDataOverflow?" "+nl:""),attrs:{"data-fieldName":i,"aria-label":r}}),c=this.parent.engineModule.fieldList[i].caption,l=this.parent.localeObj.getConstant("filter")+' "'+r+'" '+this.parent.localeObj.getConstant("by"),s;this.filterObject=this.getFilterObject(i);this.isSearchEnabled=!1;this.allowExcelLikeFilter=this.isExcelFilter(i);this.parent.element.appendChild(e);this.dialogPopUp=new o.Dialog({animationSettings:{effect:this.allowExcelLikeFilter?"None":"Fade"},allowDragging:!1,header:this.allowExcelLikeFilter?l:c,content:"",isModal:!0,visible:!0,showCloseIcon:!!this.allowExcelLikeFilter,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"320px",height:this.parent.isDataOverflow?this.allowExcelLikeFilter?"440px":"400px":this.allowExcelLikeFilter?"400px":"350px",position:{X:"center",Y:"center"},buttons:[{isFlat:!1,buttonModel:{cssClass:"e-clear-filter-button"+(this.allowExcelLikeFilter?"":" "+h)+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:"e-icons e-clear-filter-icon",enableRtl:this.parent.enableRtl,content:this.parent.localeObj.getConstant("clearFilter"),disabled:!this.filterObject}},{isFlat:!1,buttonModel:{cssClass:wt+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:this.closeFilterDialog.bind(this),isFlat:!1,buttonModel:{cssClass:cu+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}],closeOnEscape:"Popup"!==this.parent.renderMode,target:u,cssClass:this.parent.cssClass,close:this.removeFilterDialog.bind(this)});this.dialogPopUp.isStringTemplate=!0;this.dialogPopUp.appendTo(e);s={cancel:!1,fieldName:i,fieldMembers:this.parent.dataSourceSettings.allowMemberFilter?t:[],filterSetting:this.filterObject};("pivotfieldlist"===this.parent.moduleName&&this.parent.control.isPopupView?this.parent.control.pivotGridModule:this.parent.control).trigger("memberEditorOpen",s,function(u){u.cancel?(f.dialogPopUp.close(),f.dialogPopUp=void 0):(t=u.fieldMembers,f.allowExcelLikeFilter?(f.createTabMenu(t,r,i),n.addClass([f.dialogPopUp.element],"e-excel-filter"),f.updateCheckedState()):(f.dialogPopUp.content=f.createTreeView(t,r,i),f.updateCheckedState()),n.setStyleAttribute(f.dialogPopUp.element,{visibility:"visible"}),f.allowExcelLikeFilter&&f.dialogPopUp.element.querySelector(".e-dlg-closeicon-btn").focus(),f.memberTreeView.nodeChecked=f.parent.control.pivotButtonModule.nodeStateModified.bind(f.parent.control.pivotButtonModule),f.allMemberSelect.nodeChecked=f.parent.control.pivotButtonModule.nodeStateModified.bind(f.parent.control.pivotButtonModule))})},t.prototype.createTreeView=function(t,i,r){var u=this,e=n.createElement("div",{id:this.parent.parentID+"EditorDiv",className:ee+(this.allowExcelLikeFilter?" e-excelfilter":"")}),l=n.createElement("button",{id:this.parent.parentID+"_LevelDiv",className:"e-level-container-class",attrs:{type:"button"}}),s=n.createElement("div",{id:this.parent.parentID+"_SearchDiv",attrs:{tabindex:"-1"},className:sc}),nt=this.parent.engineModule.fieldList[r].caption,a=n.createElement("input",{attrs:{type:"text",className:"e-editor-search-input"}}),v=this.parent.isDataOverflow?this.parent.currentTreeItems.length-this.parent.control.maxNodeLimitInMemberEditor+this.parent.control.localeObj.getConstant("editorDataLimitMsg"):"",c=n.createElement("div",{id:this.parent.parentID+"_LabelDiv",attrs:{tabindex:"-1",title:v},className:"e-editor-label-container"}),d,g,f;this.parent.editorLabelElement=n.createElement("label",{className:"e-editor-label"});this.parent.editorLabelElement.innerText=v;c.style.display=this.parent.isDataOverflow?"block":"none";c.appendChild(this.parent.editorLabelElement);s.appendChild(a);this.createSortOptions(r,s,t);var p=n.createElement("div",{id:this.parent.parentID+"_AllDiv",attrs:{tabindex:"-1"},className:"e-select-all-container"}),w=n.createElement("div",{id:this.parent.parentID+"_SelectAllContainer",className:us}),b=n.createElement("div",{className:hu+"-outer-div"}),k=n.createElement("div",{className:hu}),o=n.createElement("div",{className:cf+" "+h});if(o.innerText=this.parent.localeObj.getConstant("noMatches"),"olap"!==this.parent.dataType||!this.parent.control.loadOnDemandInMemberEditor||this.parent.engineModule.fieldList[r].isHierarchy||this.parent.engineModule.fieldList[r].isNamedSets||(s.appendChild(l),this.createLevelWrapper(l,r)),p.appendChild(w),e.appendChild(s),e.appendChild(p),e.appendChild(o),this.editorSearch=new y.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("search")+' "'+nt+'"',enableRtl:this.parent.enableRtl,cssClass:hc+(this.parent.cssClass?" "+this.parent.cssClass:""),showClearButton:!0,change:function(t){if("olap"===u.parent.dataType)u.searchOlapTreeView(t,o);else{u.parent.eventBase.searchTreeNodes(t,u.memberTreeView,!1);var i=u.dialogPopUp.element;0===[].slice.call(u.memberTreeView.element.querySelectorAll("li")).length?(u.allMemberSelect.disableNodes([u.allMemberSelect.element.querySelector("li")]),i.querySelector("."+wt).setAttribute("disabled","disabled"),n.removeClass([o],h)):(u.allMemberSelect.enableNodes([u.allMemberSelect.element.querySelector("li")]),i.querySelector("."+wt).removeAttribute("disabled"),n.addClass([o],h));u.updateCheckedState()}}}),this.editorSearch.isStringTemplate=!0,this.editorSearch.appendTo(a),d={"data-fieldName":r,"data-memberId":"all"},g=[{id:"all",name:this.parent.localeObj.getConstant("all"),isSelected:!0,htmlAttributes:d}],this.allMemberSelect=new et.TreeView({fields:{dataSource:g,id:"id",text:"name",isChecked:"isSelected"},showCheckBox:!0,expandOn:"None",enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,nodeClicked:this.nodeCheck.bind(this,!0),keyPress:this.nodeCheck.bind(this,!0),nodeSelected:function(t){n.removeClass([t.node],"e-active");t.cancel=!0},cssClass:this.parent.cssClass}),this.allMemberSelect.isStringTemplate=!0,!n.isNullOrUndefined(this.parent.currentTreeItems))for(f=0;f<this.parent.currentTreeItems.length;f++)(this.parent.currentTreeItems[f].id.indexOf("\n")||0===this.parent.currentTreeItems[f].id.indexOf("\n"))&&(this.parent.currentTreeItems[f].id=this.parent.currentTreeItems[f].id.replace("\n"," "));return this.allMemberSelect.appendTo(w),b.appendChild(k),e.appendChild(b),this.memberTreeView=new et.TreeView({fields:{dataSource:t,id:"id",text:"name",isChecked:"isSelected",parentID:"pid"},showCheckBox:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,nodeChecking:this.validateTreeNode.bind(this),nodeClicked:this.nodeCheck.bind(this,!1),keyPress:this.nodeCheck.bind(this,!1),nodeExpanding:this.updateChildNodes.bind(this),nodeSelected:function(t){n.removeClass([t.node],"e-active");t.cancel=!0},expandOn:"None",cssClass:this.parent.cssClass}),this.memberTreeView.isStringTemplate=!0,this.memberTreeView.appendTo(k),this.parent.isDataOverflow&&this.parent.control.maxNodeLimitInMemberEditor<this.parent.currentTreeItems.length&&e.appendChild(c),e},t.prototype.createSortOptions=function(t,i,r){var o,u;if("pivot"===this.parent.dataType&&r&&r.length>0){o=this.parent.engineModule.fieldList[t].sort;u=n.createElement("div",{className:fc+" e-btn-group"+(this.parent.enableRtl?" "+fi:"")+(this.parent.cssClass?" "+this.parent.cssClass:""),id:this.parent.element.id+"_Member_Sort"});this.parent.element.appendChild(u);var f=n.createElement("button",{className:("Ascending"===o?fr+" ":"")+re,id:this.parent.element.id+"_Sort_Ascend",attrs:{type:"button","aria-label":"button"}}),e=n.createElement("button",{className:("Descending"===o?fr+" ":"")+re,id:this.parent.element.id+"_Sort_Descend",attrs:{type:"button","aria-label":"button"}}),h=new ut.Button({iconCss:s+" "+ec,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});h.appendTo(f);(h=new ut.Button({iconCss:s+" "+oc,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass,enableHtmlSanitizer:this.parent.enableHtmlSanitizer})).appendTo(e);u.appendChild(f);u.appendChild(e);i.appendChild(u);this.unWireEvent(f);this.unWireEvent(e);this.wireEvent(f,t);this.wireEvent(e,t)}},t.prototype.createLevelWrapper=function(t,i){for(var r=this,o=this.parent.engineModule,u=o.fieldList[i].levels,s=o.fieldList[i].levelCount,f=[],e=0,h=u.length;e<h;e++)f.push({id:u[e].id,text:u[e].name});this.dropMenu=new vv.DropDownButton({cssClass:"e-level-drop e-caret-hide"+(this.parent.cssClass?" "+this.parent.cssClass:""),items:f,iconCss:"e-icons e-dropdown-icon",disabled:s===u.length,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,beforeOpen:function(t){var f=[].slice.call(t.element.querySelectorAll("li")),o=r.parent.engineModule.fieldList[i].levelCount,u,e;for(n.removeClass(f,p),u=0,e=f.length;u<e;u++)u<o&&n.addClass([f[u]],p)},select:function(n){for(var i,u=r.dialogPopUp.element.getAttribute("data-fieldname"),e=r.parent.engineModule,t=0,o=f.length;t<o;t++)f[t].id===n.item.id&&(i=t);e.getFilterMembers(r.parent.dataSourceSettings,u,i+1,!1,!0)},close:function(){var n=r.parent.engineModule,t=n.fieldList[i].levels;n.fieldList[i].levelCount===t.length?(r.dropMenu.disabled=!0,r.dropMenu.dataBind()):r.dropMenu.disabled=!1}});this.dropMenu.appendTo(t)},t.prototype.searchOlapTreeView=function(t,i){var r=this;clearTimeout(this.timeOutObj);this.timeOutObj=setTimeout(function(){var u=r.parent.engineModule,e=r.dialogPopUp.element,f=e.getAttribute("data-fieldname"),o=r.parent.control.maxNodeLimitInMemberEditor?r.parent.control.maxNodeLimitInMemberEditor:5e3,s;u.fieldList[f].isHierarchy?r.parent.eventBase.searchTreeNodes(t,r.memberTreeView,!1,!0):((r.dropMenu.disabled=r.dropMenu&&""!==t.value?!0:!1,r.parent.control.loadOnDemandInMemberEditor)?(s=u.fieldList[f].levelCount?u.fieldList[f].levelCount:1,u.getSearchMembers(r.parent.dataSourceSettings,f,t.value.toLowerCase(),o,!1,s)):u.getSearchMembers(r.parent.dataSourceSettings,f,t.value.toLowerCase(),o,!0),r.parent.eventBase.searchTreeNodes(t,r.memberTreeView,!1,!1));0===[].slice.call(r.memberTreeView.element.querySelectorAll("li")).length?(r.allMemberSelect.disableNodes([r.allMemberSelect.element.querySelector("li")]),e.querySelector("."+wt).setAttribute("disabled","disabled"),n.removeClass([i],h)):(r.allMemberSelect.enableNodes([r.allMemberSelect.element.querySelector("li")]),e.querySelector("."+wt).removeAttribute("disabled"),n.addClass([i],h));r.updateCheckedState()},500)},t.prototype.nodeCheck=function(t,i){var u=[i.node],r;i.event.target.classList.contains("e-fullrow")||"Enter"===i.event.key?(r=t?this.allMemberSelect:this.memberTreeView,"true"===r.getNode(i.node).isChecked?r.uncheckAll(u):r.checkAll(u)):38!==i.event.keyCode||t||(n.removeClass(this.memberTreeView.element.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node"),n.addClass(u,"e-prev-active-node"))},t.prototype.applySorting=function(t,i){var r=n.closest(i.target,"."+re),u;r&&(u=[].slice.call(n.closest(r,"."+fc).querySelectorAll("."+re)),r.querySelector("."+ec)&&!r.classList.contains(fr)?(this.updateFilterMembers("Ascending",t),n.addClass([r],fr),n.removeClass([u[1]],fr)):r.querySelector("."+oc)&&!r.classList.contains(fr)?(this.updateFilterMembers("Descending",t),n.addClass([r],fr),n.removeClass([u[0]],fr)):(this.updateFilterMembers("None",t),n.removeClass(u,fr)))},t.prototype.updateFilterMembers=function(t,i){var s=this.parent.engineModule.fieldList[i],u="None"===t?r.getClonedData(s.dateMember):this.parent.currentTreeItems.slice(),a=!!s.isAlphanumeric||void 0,p=!1,h=s&&s.membersOrder?s.membersOrder.slice():[],o={fieldName:i,sortOrder:t,members:h&&h.length>0?h:Object.keys(u),IsOrderChanged:!1},v,w,b,y,e,d;if(h&&h.length>0?u=r.applyCustomSort(o,u,a):(v=this.parent.dataSourceSettings.groupSettings.filter(function(n){return n.name===i&&"number"===n.type.toLocaleLowerCase()}),w=!n.isNullOrUndefined(v)&&v.length>0,u=r.applyHeadersSort(u,o.sortOrder,a,w),p=!0),b="pivotfieldlist"===this.parent.moduleName&&this.parent.control.isPopupView?this.parent.control.pivotGridModule:this.parent.control,p){for(var k=[],l=0,g=0;l<u.length;l++)"Grand Total"!==u[l].actualText&&(k[g++]=u[l].actualText);o.members=k}b.trigger(df,o);o.IsOrderChanged&&(u=r.applyCustomSort(o,u,a,!0));this.parent.currentTreeItems=[];this.parent.searchTreeItems=[];for(var c=[],nt=i.replace(/[^a-zA-Z0-9 ]/g,"_"),tt=this.parent.engineModule,f=0,it=u.length;f<it;f++)"None"===t?(y=u[f].actualText.toString(),e={id:nt+"_"+(f+1),htmlAttributes:{"data-fieldName":i,"data-memberId":y},actualText:u[f].actualText,name:this.parent.isDateField?u[f].formattedText:tt.getFormattedValue(y,i).formattedText,isSelected:this.parent.currentTreeItemsPos[u[f].actualText].isSelected},this.parent.currentTreeItems.push(e),""!==this.editorSearch.value?e.name.toLowerCase().indexOf(this.editorSearch.value.toLowerCase())>-1&&(this.parent.searchTreeItems.push(e),c.push(e)):(this.parent.searchTreeItems.push(e),c.push(e))):(this.parent.currentTreeItems.push(u[f]),""!==this.editorSearch.value?u[f].name.toLowerCase().indexOf(this.editorSearch.value.toLowerCase())>-1&&(this.parent.searchTreeItems.push(u[f]),c.push(u[f])):(this.parent.searchTreeItems.push(u[f]),c.push(u[f]))),this.parent.currentTreeItemsPos[u[f].actualText].index=f;d=this.memberTreeView.fields.dataSource.length;this.memberTreeView.fields={dataSource:c.slice(0,d),id:"id",text:"name",isChecked:"isSelected",parentID:"pid"};this.memberTreeView.dataBind()},t.prototype.updateChildNodes=function(t){var c,o,l,p;if("olap"===this.parent.dataType){var s=this.parent.engineModule,f=t.node.getAttribute("data-fieldname"),i=s.fieldList[f],a=[];if(i&&i.filterMembers.length>0&&!this.isSearchEnabled&&!i.members[t.nodeData.id].isNodeExpand){for(var e=[],h=0,v=i.filterMembers;h<v.length;h++)c=v[h],c.pid===t.nodeData.id.toString()&&e.push(c);0===e.length&&(i.childMembers=[],s.getChildMembers(this.parent.dataSourceSettings,t.nodeData.id.toString(),f),e=i.childMembers,i.childMembers=[]);var u=r.getClonedData(e),w=this.memberTreeView.fields.dataSource,y=!1;for(n.isNullOrUndefined(this.filterObject)||(y="Include"===this.filterObject.type,a=this.filterObject.items?this.filterObject.items:[]),u=this.updateChildData(y,u,a,f,t.nodeData),o=0,l=u=this.parent.eventBase.sortOlapFilterData(u,s.fieldList[f].sort);o<l.length;o++)p=l[o],w.push(p);i.members[t.nodeData.id].isNodeExpand=!0;this.memberTreeView.addNodes(u,t.node)}}},t.prototype.updateChildData=function(n,t,i,r,u){for(var s=Object.keys(this.parent.currentTreeItemsPos).length,v=this.parent.engineModule.fieldList[r],h=[],c=1,e=0,l=t;e<l.length;e++){var o=l[e],f=o,a=o.id.toString();v.members[a].isNodeExpand=!1;o.isSelected="true"===u.isChecked;c<=this.parent.control.maxNodeLimitInMemberEditor&&h.push(f);this.parent.currentTreeItems.push(f);this.parent.searchTreeItems.push(f);this.parent.currentTreeItemsPos[a]={index:s,isSelected:f.isSelected};s++;c++}return this.parent.isDataOverflow=!1,h},t.prototype.createTabMenu=function(t,i,u){var c=n.createElement("div",{id:this.parent.parentID+"_FilterTabContainer",className:"e-filter-tab-container",attrs:{tabindex:"-1"}}),o,s,w,f;this.dialogPopUp.content=c;this.dialogPopUp.dataBind();for(var l=["Label","Value","Include","Exclude"],a="((-|\\+)?[0-9]+(\\.[0-9]+)?)+",e=Object.keys(this.parent.engineModule.fieldList[u].members)[0],b=this.parent.engineModule.fieldList[u].type,v=r.getFieldByName(u,this.parent.dataSourceSettings.formatSettings),y=[{header:{text:this.parent.localeObj.getConstant("member"),iconCss:this.filterObject&&l.indexOf(this.filterObject.type)>1?nc:""},content:this.createTreeView(t,i,u)}],h=0,p=l;h<p.length;h++)o=p[h],("Label"===o&&this.parent.dataSourceSettings.allowLabelFilter||"Value"===o&&this.parent.dataSourceSettings.allowValueFilter)&&(s="Label"===o&&e&&e.match(a)&&e.match(a)[0].length===e.length&&"number"===b?"Number":"Label"===o&&e&&"Invalid Date"!==new Date(e).toString()&&(v&&v.type||this.filterObject&&"Date"===this.filterObject.type)?"Date":o,w={header:{text:"Number"===s?this.parent.localeObj.getConstant("label"):this.parent.localeObj.getConstant(s.toLowerCase()),iconCss:this.filterObject&&this.filterObject.type===s?nc:""},content:this.createCustomFilter(u,this.filterObject&&this.filterObject.type===s?this.filterObject:void 0,s.toLowerCase())},y.push(w));f=this.filterObject?["Label","Date","Number"].indexOf(this.filterObject.type)>=0?1:"Value"===this.filterObject.type?this.parent.dataSourceSettings.allowLabelFilter&&this.parent.dataSourceSettings.allowValueFilter?2:1:0:0;f=this.parent.dataSourceSettings.allowMemberFilter||0!==f?f:1;this.tabObj=new et.Tab({heightAdjustMode:"Auto",items:y,height:"100%",selectedItem:f,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass});this.tabObj.isStringTemplate=!0;this.tabObj.appendTo(c);this.parent.dataSourceSettings.allowMemberFilter||this.tabObj.hideTab(0);f>0&&n.addClass([this.dialogPopUp.element.querySelector(".e-filter-div-content."+(1===f&&this.parent.dataSourceSettings.allowLabelFilter?"e-label-filter":"e-value-filter"))],"e-selected-tab")},t.prototype.createCustomFilter=function(t,i,r){for(var w,e,ft,l,b,o,wt,k,ot,d,y,st,ht,at=[],vt=[],u=[],c=this.parent.dataSourceSettings.values,f="DoesNotEquals",p=0,a=0,tt={label:["Equals","DoesNotEquals","BeginWith","DoesNotBeginWith","EndsWith","DoesNotEndsWith","Contains","DoesNotContains","GreaterThan","GreaterThanOrEqualTo","LessThan","LessThanOrEqualTo","Between","NotBetween"],date:["Equals","DoesNotEquals","Before","BeforeOrEqualTo","After","AfterOrEqualTo","Between","NotBetween"],value:["Equals","DoesNotEquals","GreaterThan","GreaterThanOrEqualTo","LessThan","LessThanOrEqualTo","Between","NotBetween"]},it=["Between","NotBetween"],rt="label"===r?tt.label:"date"===r?tt.date:tt.value,ut=0,yt=rt;ut<yt.length;ut++)w=yt[ut],f=i&&w===i.condition?rt.indexOf(i.condition)>=0?i.condition:rt[0]:f,at.push({value:w,text:this.parent.localeObj.getConstant(w)});for(e=c.length;e--;)vt.unshift({value:c[e].name,text:c[e].caption?c[e].caption:c[e].name}),p=i&&"Value"===i.type&&i.measure===c[e].name&&i.condition===f?e:p;if("olap"===this.parent.dataType)if(ft=this.parent.engineModule,l=ft.fieldList[t].levels,this.parent.engineModule.fieldList[t].isHierarchy){for(var v=void 0,et=0,pt=this.parent.engineModule.fieldListData;et<pt.length;et++)if(b=pt[et],b&&b.pid===t){v=b;break}u.push({value:v?v.id:t,text:v?v.caption:ft.fieldList[t].name});a=0;i&&i.name===t&&i.type.toLowerCase()===r&&(u[u.length-1].iconClass=s+" "+tc)}else for(o=0,wt=l.length;o<wt;o++)for(a=i&&i.selectedField===l[o].id?o:a,u.push({value:l[o].id,text:l[o].name}),k=0,ot=this.parent.dataSourceSettings.filterSettings;k<ot.length;k++)if(d=ot[k],d.name===t&&d.selectedField===l[o].id&&d.type.toLowerCase()===r){u[u.length-1].iconClass=s+" "+tc;break}y=n.createElement("div",{className:"e-filter-div-content e-"+(["date","number"].indexOf(r)>=0?"label":r)+"-filter"+(this.parent.isDataOverflow?" "+nl:""),id:this.parent.parentID+"_"+r+"_filter_div_content",attrs:{"data-type":r,"data-fieldName":t,"data-operator":f,"data-selectedField":"olap"===this.parent.dataType&&u.length>0?u[a].value.toString():"","data-measure":this.parent.dataSourceSettings.values.length>0?this.parent.dataSourceSettings.values[p].name:"","data-value1":i&&f===i.condition&&i.value1?i.value1.toString():"","data-value2":i&&f===i.condition&&i.value2?i.value2.toString():""}});st=n.createElement("div",{className:"e-filter-text-div"});st.innerText=this.parent.localeObj.getConstant(r+"TextContent");ht=n.createElement("div",{className:ic+" "+(-1===it.indexOf(f)?h:"")});ht.innerText=this.parent.localeObj.getConstant("And");var bt=n.createElement("div",{className:"e-separator-div"}),g=n.createElement("div",{className:"e-filter-option-container-1"}),ct=n.createElement("div",{className:"e-level-option-container "+("olap"===this.parent.dataType?"":h)}),lt=n.createElement("div",{className:"e-measure-option-container "+(["label","date","number"].indexOf(r)>=0?h:"")}),kt=n.createElement("div",{className:"e-condition-option-container"}),nt=n.createElement("div",{className:"e-filter-option-container-2"}),dt=n.createElement("div",{id:this.parent.parentID+"_"+r+"_level_option_container"}),gt=n.createElement("div",{id:this.parent.parentID+"_"+r+"_measure_option_container"}),ni=n.createElement("div",{id:this.parent.parentID+"_"+r+"_contition_option_container"}),ti=n.createElement("div",{className:"e-filter-input-div-1"}),ii=n.createElement("div",{className:rc+" "+(-1===it.indexOf(f)?h:"")}),ri=n.createElement("input",{id:this.parent.parentID+"_"+r+"_input_option_1",attrs:{type:"text"}}),ui=n.createElement("input",{id:this.parent.parentID+"_"+r+"_input_option_2",attrs:{type:"text"}});return ti.appendChild(ri),ii.appendChild(ui),ct.appendChild(dt),ct.appendChild(bt.cloneNode(!0)),lt.appendChild(gt),lt.appendChild(bt),kt.appendChild(ni),g.appendChild(ct),g.appendChild(lt),g.appendChild(kt),nt.appendChild(ti),nt.appendChild(ht),nt.appendChild(ii),this.createElements(i,it,gt,ni,ri,ui,vt,at,p,f,r,dt,u,a),y.appendChild(st),y.appendChild(g),y.appendChild(nt),y},t.prototype.createElements=function(t,i,r,u,f,e,o,s,l,v,p,w,b,k){var d=this,ot,it,g,rt,ut,nt,tt,ft,et;"olap"===this.parent.dataType&&(ot=new a.DropDownList({dataSource:b,enableRtl:this.parent.enableRtl,fields:{value:"value",text:"text",iconCss:"iconClass"},index:k,cssClass:"e-level-options"+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(t){var s=d.dialogPopUp.element.querySelector(".e-selected-tab"),p=s.getAttribute("data-fieldName"),h=s.getAttribute("data-type"),i,l,v,a,r,u;if(!n.isNullOrUndefined(s)){for(d.updateInputValues(s,h,f,e),c.setStyleAndAttributes(s,{"data-selectedField":t.value}),l=0,v=d.parent.dataSourceSettings.filterSettings;l<v.length;l++)if(a=v[l],a.name===p&&a.selectedField===t.value){i=a;break}i&&("value"===h&&i.measure&&""!==i.measure&&(it.value=i.measure?i.measure:o[0].value),g.value=i.condition?i.condition?i.condition:"DoesNotEquals":"DoesNotEquals",r=void 0,u=void 0,"value"===h?(r=n.getInstance(f,y.NumericTextBox),u=n.getInstance(e,y.NumericTextBox),r&&(r.value=i.value1?parseInt(i.value1,10):void 0),u&&(u.value=i.value2?parseInt(i.value2,10):void 0)):(r=n.getInstance(f,y.MaskedTextBox),u=n.getInstance(e,y.MaskedTextBox),r&&(r.value=i.value1?i.value1:""),u&&(u.value=i.value2?i.value2:"")));d.updateInputValues(s,h,f,e)}}}),ot.isStringTemplate=!0,ot.appendTo(w));it=new a.DropDownList({dataSource:o,enableRtl:this.parent.enableRtl,fields:{value:"value",text:"text"},index:l,cssClass:ns+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(t){var i=d.dialogPopUp.element.querySelector(".e-selected-tab");n.isNullOrUndefined(i)||(d.updateInputValues(i,p,f,e),c.setStyleAndAttributes(i,{"data-measure":t.value}))}});it.isStringTemplate=!0;it.appendTo(r);g=new a.DropDownList({dataSource:s,enableRtl:this.parent.enableRtl,fields:{value:"value",text:"text"},value:v,cssClass:uc+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(t){var r=d.dialogPopUp.element.querySelector(".e-selected-tab"),u,o,s;if(!n.isNullOrUndefined(r)){for(d.updateInputValues(r,p,f,e),u=0,o=[ic,rc];u<o.length;u++)s=o[u],i.indexOf(t.value)>=0?n.removeClass([r.querySelector("."+s)],h):n.addClass([r.querySelector("."+s)],h);c.setStyleAndAttributes(r,{"data-operator":t.value})}}});(g.isStringTemplate=!0,g.appendTo(u),"date"===p)?(rt=new ro.DateTimePicker({placeholder:this.parent.localeObj.getConstant("chooseDate"),enableRtl:this.parent.enableRtl,format:"dd/MM/yyyy hh:mm:ss a",showClearButton:!0,value:t&&v===t.condition?"string"==typeof t.value1?new Date(t.value1):t.value1:null,change:function(t){var i=d.dialogPopUp.element.querySelector(".e-selected-tab");n.isNullOrUndefined(i)||c.setStyleAndAttributes(i,{"data-value1":t.value,"data-value2":ut.value})},width:"100%",cssClass:this.parent.cssClass}),ut=new ro.DateTimePicker({placeholder:this.parent.localeObj.getConstant("chooseDate"),enableRtl:this.parent.enableRtl,format:"dd/MM/yyyy hh:mm:ss a",showClearButton:!0,value:t&&v===t.condition?"string"==typeof t.value2?new Date(t.value2):t.value2:null,change:function(t){var i=d.dialogPopUp.element.querySelector(".e-selected-tab");n.isNullOrUndefined(i)||c.setStyleAndAttributes(i,{"data-value1":rt.value,"data-value2":t.value})},width:"100%",cssClass:this.parent.cssClass}),rt.isStringTemplate=!0,rt.appendTo(f),ut.isStringTemplate=!0,ut.appendTo(e)):"value"===p?(nt=new y.NumericTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,showClearButton:!0,format:"###.##",value:t&&v===t.condition?parseInt(t.value1,10):void 0,change:function(t){var i=d.dialogPopUp.element.querySelector(".e-selected-tab");n.isNullOrUndefined(i)||c.setStyleAndAttributes(i,{"data-value1":t.value?t.value.toString():"0","data-value2":tt.value?tt.value.toString():"0"})},width:"100%",cssClass:this.parent.cssClass}),tt=new y.NumericTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,showClearButton:!0,format:"###.##",value:t&&v===t.condition?parseInt(t.value2,10):void 0,change:function(t){var i=d.dialogPopUp.element.querySelector(".e-selected-tab");n.isNullOrUndefined(i)||c.setStyleAndAttributes(i,{"data-value1":nt.value?nt.value.toString():"0","data-value2":t.value?t.value.toString():"0"})},width:"100%",cssClass:this.parent.cssClass}),nt.isStringTemplate=!0,nt.appendTo(f),tt.isStringTemplate=!0,tt.appendTo(e)):(ft=new y.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,showClearButton:!0,value:t&&v===t.condition?t.value1:"",change:function(t){var i=d.dialogPopUp.element.querySelector(".e-selected-tab");n.isNullOrUndefined(i)||c.setStyleAndAttributes(i,{"data-value1":t.value,"data-value2":et.value})},width:"100%",cssClass:this.parent.cssClass}),et=new y.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,showClearButton:!0,value:t&&v===t.condition?t.value2:"",change:function(t){var i=d.dialogPopUp.element.querySelector(".e-selected-tab");n.isNullOrUndefined(i)||c.setStyleAndAttributes(i,{"data-value1":ft.value,"data-value2":t.value})},width:"100%",cssClass:this.parent.cssClass}),ft.isStringTemplate=!0,ft.appendTo(f),et.isStringTemplate=!0,et.appendTo(e))},t.prototype.updateInputValues=function(t,i,r,u){var f=n.getInstance(r,"date"===i?ro.DateTimePicker:"value"===i?y.NumericTextBox:y.MaskedTextBox),e=n.getInstance(u,"date"===i?ro.DateTimePicker:"value"===i?y.NumericTextBox:y.MaskedTextBox),o=n.isNullOrUndefined(f.value)?"":f.value.toString(),s=n.isNullOrUndefined(e.value)?"":e.value.toString();c.setStyleAndAttributes(t,{"data-value1":o,"data-value2":s})},t.prototype.validateTreeNode=function(n){n.node.classList.contains(h)&&(n.cancel=!0)},t.prototype.updateCheckedState=function(){var i=this.dialogPopUp.element,e=[].slice.call(this.memberTreeView.element.querySelectorAll("li")),r=i.getAttribute("data-fieldname"),u=this.getUnCheckedNodes(r),f=this.getCheckedNodes(r),t=this.allMemberSelect.element.querySelector("li").querySelector("span."+bh);e.length>0?f>0?(u>0?(n.removeClass([t],ef),n.addClass([t],ko),this.allMemberSelect.element.querySelector("li").setAttribute("aria-checked","false")):0===u&&(n.removeClass([t],ko),n.addClass([t],ef)),this.dialogPopUp.buttons[0].buttonModel.disabled=!1,i.querySelector("."+wt).removeAttribute("disabled")):u>0&&0===f&&(n.removeClass([t],[ef,ko]),this.getCheckedNodes(r)===f&&(this.dialogPopUp.buttons[0].buttonModel.disabled=!0,i.querySelector("."+wt).setAttribute("disabled","disabled"))):(this.dialogPopUp.buttons[0].buttonModel.disabled=!0,i.querySelector("."+wt).setAttribute("disabled","disabled"))},t.prototype.getCheckedNodes=function(n){var u=this.parent.engineModule,f=[],t,i,r;if("olap"===this.parent.dataType&&u&&!u.fieldList[n].isHierarchy)return this.memberTreeView.getAllCheckedNodes().length;for(t=0,i=this.parent.searchTreeItems;t<i.length;t++)r=i[t],r.isSelected&&f.push(r);return f.length},t.prototype.getUnCheckedNodes=function(n){var u=[],f=[],e=this.parent.engineModule,t,i,r;if("olap"===this.parent.dataType&&e&&!e.fieldList[n].isHierarchy)return f=this.memberTreeView.getAllCheckedNodes(),this.memberTreeView.fields.dataSource.length-f.length;for(t=0,i=this.parent.searchTreeItems;t<i.length;t++)r=i[t],r.isSelected||u.push(r);return u.length},t.prototype.isExcelFilter=function(n){for(var i=!1,t=0,r=this.parent.dataSourceSettings.filters;t<r.length;t++)if(r[t].name===n){i=!0;break}return!(i||!this.parent.dataSourceSettings.allowLabelFilter&&!this.parent.dataSourceSettings.allowValueFilter)},t.prototype.getFilterObject=function(n){var t=r.getFilterItemByName(n,r.cloneFilterSettings(this.parent.dataSourceSettings.filterSettings));if(t&&(["Label","Date","Number"].indexOf(t.type)>=0&&this.parent.dataSourceSettings.allowLabelFilter||"Value"===t.type&&this.parent.dataSourceSettings.allowValueFilter||["Include","Exclude"].indexOf(t.type)>=0&&this.parent.eventBase.isValidFilterItemsAvail(n,t)))return t},t.prototype.wireEvent=function(t,i){n.EventHandler.add(t,"click",this.applySorting.bind(this,i),this)},t.prototype.unWireEvent=function(t){n.EventHandler.remove(t,"click",this.applySorting)},t.prototype.closeFilterDialog=function(){this.dialogPopUp.close()},t.prototype.removeFilterDialog=function(){this.editorSearch&&!this.editorSearch.isDestroyed&&(this.editorSearch.destroy(),this.editorSearch=null);this.allowExcelLikeFilter&&this.tabObj&&!this.tabObj.isDestroyed&&(this.tabObj.destroy(),this.tabObj=null);this.dropMenu&&!this.dropMenu.isDestroyed&&(this.dropMenu.destroy(),this.dropMenu=null);this.memberTreeView&&!this.memberTreeView.isDestroyed&&(this.memberTreeView.destroy(),this.memberTreeView=null);this.allMemberSelect&&!this.allMemberSelect.isDestroyed&&(this.allMemberSelect.destroy(),this.allMemberSelect=null);document.getElementById(this.parent.parentID+"_LevelDiv-popup")&&n.remove(document.getElementById(this.parent.parentID+"_LevelDiv-popup"));this.dialogPopUp&&!this.dialogPopUp.isDestroyed&&(this.dialogPopUp.destroy(),this.dialogPopUp=null,setTimeout(this.setFocus.bind(this)));document.getElementById(this.parent.parentID+"_EditorTreeView")&&n.remove(document.getElementById(this.parent.parentID+"_EditorTreeView"))},t.prototype.setFocus=function(){var n,t,i;if(this.parent.control.pivotButtonModule.parentElement)for(n=0,t=[].slice.call(this.parent.control.pivotButtonModule.parentElement.querySelectorAll(".e-pivot-button"));n<t.length;n++)if(i=t[n],i.getAttribute("data-uid")===this.parent.control.pivotButtonModule.fieldName){i.focus();break}},t}(),sa=function(){function n(n){return this.currentTreeItems=[],this.savedTreeFilterPos={},this.currentTreeItemsPos={},this.searchTreeItems=[],this.isDataOverflow=!1,this.isDateField=!1,this.element=n.element,this.moduleName=n.moduleName,this.dataSourceSettings=n.dataSourceSettings,this.engineModule=n.pivotEngine,this.enableRtl=n.enableRtl,this.enableHtmlSanitizer=n.enableHtmlSanitizer,this.isAdaptive=n.isAdaptive,this.renderMode=n.renderMode,this.parentID=n.id,this.localeObj=n.localeObj,this.dataType=n.dataType,this.cssClass=n.cssClass,this.nodeStateModified=new cv(this),this.dataSourceUpdate=new lv(this),this.eventBase=new hv(this),this.filterDialog=new yv(this),this.errorDialog=new av(this),this.keyboardModule=new sv(this),this}return n.prototype.destroy=function(){this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null)},n}(),ha=function(){function t(n){this.parent=n;this.parent.commonModule=this;this.addEventListener()}return t.prototype.getModuleName=function(){return"common"},t.prototype.initiateCommonModule=function(){if(this.parent.pivotCommon)this.parent.pivotCommon.element=this.parent.element,this.parent.pivotCommon.engineModule="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.parent.pivotCommon.parentID=this.parent.element.id,this.parent.pivotCommon.dataSourceSettings=this.parent.dataSourceSettings.properties?this.parent.dataSourceSettings.properties:this.parent.dataSourceSettings,this.parent.pivotCommon.moduleName=this.parent.getModuleName(),this.parent.pivotCommon.enableRtl=this.parent.enableRtl,this.parent.pivotCommon.isAdaptive=n.Browser.isDevice,this.parent.pivotCommon.renderMode="Popup",this.parent.pivotCommon.localeObj=this.parent.localeObj,this.parent.pivotCommon.dataType=this.parent.dataType,this.parent.pivotCommon.cssClass=this.parent.cssClass;else{var t={pivotEngine:"olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,dataSourceSettings:this.parent.dataSourceSettings.properties?this.parent.dataSourceSettings.properties:this.parent.dataSourceSettings,id:this.parent.element.id,element:this.parent.element,moduleName:this.parent.getModuleName(),enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,isAdaptive:n.Browser.isDevice,renderMode:"Popup",localeObj:this.parent.localeObj,dataType:this.parent.dataType,cssClass:this.parent.cssClass};this.parent.pivotCommon=new sa(t)}this.parent.pivotCommon.control=this.parent},t.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(wi,this.initiateCommonModule,this),this.parent.on(ni,this.initiateCommonModule,this))},t.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(wi,this.initiateCommonModule),this.parent.off(ni,this.initiateCommonModule))},t.prototype.destroy=function(){this.removeEventListener();this.parent.pivotCommon&&(this.parent.pivotCommon.destroy(),this.parent.pivotCommon=null)},t}(),bi=(uo=function(n,t){return uo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},uo(n,t)},function(n,t){function i(){this.constructor=n}uo(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),f=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},gf=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return bi(i,t),f([n.Property()],i.prototype,"name",void 0),f([n.Property()],i.prototype,"caption",void 0),f([n.Property("Sum")],i.prototype,"type",void 0),f([n.Property()],i.prototype,"axis",void 0),f([n.Property(!1)],i.prototype,"showNoDataItems",void 0),f([n.Property()],i.prototype,"baseField",void 0),f([n.Property()],i.prototype,"baseItem",void 0),f([n.Property(!0)],i.prototype,"showSubTotals",void 0),f([n.Property(!1)],i.prototype,"isNamedSet",void 0),f([n.Property(!1)],i.prototype,"isCalculatedField",void 0),f([n.Property(!0)],i.prototype,"showFilterIcon",void 0),f([n.Property(!0)],i.prototype,"showSortIcon",void 0),f([n.Property(!0)],i.prototype,"showRemoveIcon",void 0),f([n.Property(!0)],i.prototype,"showValueTypeIcon",void 0),f([n.Property(!0)],i.prototype,"showEditIcon",void 0),f([n.Property(!0)],i.prototype,"allowDragAndDrop",void 0),f([n.Property()],i.prototype,"dataType",void 0),f([n.Property(!1)],i.prototype,"expandAll",void 0),f([n.Property()],i.prototype,"groupName",void 0),i}(n.ChildProperty),pv=(n.ChildProperty,function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return bi(i,t),f([n.Property()],i.prototype,"name",void 0),f([n.Property("Include")],i.prototype,"type",void 0),f([n.Property()],i.prototype,"items",void 0),f([n.Property("DoesNotEquals")],i.prototype,"condition",void 0),f([n.Property()],i.prototype,"value1",void 0),f([n.Property()],i.prototype,"value2",void 0),f([n.Property()],i.prototype,"measure",void 0),f([n.Property(1)],i.prototype,"levelCount",void 0),f([n.Property()],i.prototype,"selectedField",void 0),i}(n.ChildProperty)),wv=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return bi(i,t),f([n.Property()],i.prototype,"measure",void 0),f([n.Property()],i.prototype,"label",void 0),f([n.Property()],i.prototype,"conditions",void 0),f([n.Property()],i.prototype,"value1",void 0),f([n.Property()],i.prototype,"value2",void 0),f([n.Property()],i.prototype,"style",void 0),f([n.Property(!0)],i.prototype,"applyGrandTotals",void 0),i}(n.ChildProperty),bv=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return bi(i,t),f([n.Property()],i.prototype,"name",void 0),f([n.Property("Ascending")],i.prototype,"order",void 0),f([n.Property([])],i.prototype,"membersOrder",void 0),i}(n.ChildProperty),kv=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return bi(i,t),f([n.Property()],i.prototype,"name",void 0),f([n.Property()],i.prototype,"minimumFractionDigits",void 0),f([n.Property()],i.prototype,"maximumFractionDigits",void 0),f([n.Property()],i.prototype,"minimumSignificantDigits",void 0),f([n.Property()],i.prototype,"maximumSignificantDigits",void 0),f([n.Property(!0)],i.prototype,"useGrouping",void 0),f([n.Property()],i.prototype,"skeleton",void 0),f([n.Property()],i.prototype,"type",void 0),f([n.Property()],i.prototype,"currency",void 0),f([n.Property()],i.prototype,"minimumIntegerDigits",void 0),f([n.Property()],i.prototype,"format",void 0),i}(n.ChildProperty),dv=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return bi(i,t),f([n.Property()],i.prototype,"name",void 0),f([n.Property()],i.prototype,"groupInterval",void 0),f([n.Property()],i.prototype,"startingAt",void 0),f([n.Property()],i.prototype,"endingAt",void 0),f([n.Property("Date")],i.prototype,"type",void 0),f([n.Property()],i.prototype,"rangeInterval",void 0),f([n.Property()],i.prototype,"caption",void 0),f([n.Property()],i.prototype,"customGroups",void 0),i}(n.ChildProperty),gv=(n.ChildProperty,function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return bi(i,t),f([n.Property()],i.prototype,"name",void 0),f([n.Property()],i.prototype,"formula",void 0),f([n.Property()],i.prototype,"hierarchyUniqueName",void 0),f([n.Property()],i.prototype,"formatString",void 0),i}(n.ChildProperty)),ny=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return bi(i,t),f([n.Property()],i.prototype,"name",void 0),f([n.Property()],i.prototype,"items",void 0),f([n.Property()],i.prototype,"delimiter",void 0),i}(n.ChildProperty),ty=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return bi(i,t),f([n.Property()],i.prototype,"headerText",void 0),f([n.Property(".")],i.prototype,"headerDelimiter",void 0),f([n.Property("None")],i.prototype,"sortOrder",void 0),f([n.Property()],i.prototype,"rowHeaderText",void 0),f([n.Property("Ascending")],i.prototype,"rowSortOrder",void 0),f([n.Property()],i.prototype,"columnHeaderText",void 0),f([n.Property("Ascending")],i.prototype,"columnSortOrder",void 0),f([n.Property()],i.prototype,"measure",void 0),i}(n.ChildProperty),iy=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return bi(i,t),f([n.Property()],i.prototype,"userName",void 0),f([n.Property()],i.prototype,"password",void 0),i}(n.ChildProperty),ca=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return bi(i,t),f([n.Property("Local")],i.prototype,"mode",void 0),f([n.Property()],i.prototype,"catalog",void 0),f([n.Property()],i.prototype,"cube",void 0),f([n.Property()],i.prototype,"roles",void 0),f([n.Property("Relational")],i.prototype,"providerType",void 0),f([n.Property()],i.prototype,"url",void 0),f([n.Property(1033)],i.prototype,"localeIdentifier",void 0),f([n.Property()],i.prototype,"dataSource",void 0),f([n.Collection([],gf)],i.prototype,"rows",void 0),f([n.Collection([],gf)],i.prototype,"columns",void 0),f([n.Collection([],gf)],i.prototype,"values",void 0),f([n.Collection([],gf)],i.prototype,"filters",void 0),f([n.Collection([],gf)],i.prototype,"fieldMapping",void 0),f([n.Property([])],i.prototype,"excludeFields",void 0),f([n.Property(!1)],i.prototype,"expandAll",void 0),f([n.Property("column")],i.prototype,"valueAxis",void 0),f([n.Property(-1)],i.prototype,"valueIndex",void 0),f([n.Collection([],pv)],i.prototype,"filterSettings",void 0),f([n.Collection([],bv)],i.prototype,"sortSettings",void 0),f([n.Property(!0)],i.prototype,"enableSorting",void 0),f([n.Property("JSON")],i.prototype,"type",void 0),f([n.Property(!0)],i.prototype,"allowMemberFilter",void 0),f([n.Property(!1)],i.prototype,"allowLabelFilter",void 0),f([n.Property(!1)],i.prototype,"allowValueFilter",void 0),f([n.Property(!0)],i.prototype,"showSubTotals",void 0),f([n.Property(!0)],i.prototype,"showRowSubTotals",void 0),f([n.Property(!0)],i.prototype,"showColumnSubTotals",void 0),f([n.Property("Auto")],i.prototype,"subTotalsPosition",void 0),f([n.Property(!0)],i.prototype,"showGrandTotals",void 0),f([n.Property("Bottom")],i.prototype,"grandTotalsPosition",void 0),f([n.Property(!0)],i.prototype,"showRowGrandTotals",void 0),f([n.Property(!0)],i.prototype,"showColumnGrandTotals",void 0),f([n.Property(!1)],i.prototype,"alwaysShowValueHeader",void 0),f([n.Property(!0)],i.prototype,"showHeaderWhenEmpty",void 0),f([n.Property(!0)],i.prototype,"showAggregationOnValueField",void 0),f([n.Collection([],kv)],i.prototype,"formatSettings",void 0),f([n.Collection([],ny)],i.prototype,"drilledMembers",void 0),f([n.Complex({},ty)],i.prototype,"valueSortSettings",void 0),f([n.Collection([],gv)],i.prototype,"calculatedFieldSettings",void 0),f([n.Collection([],wv)],i.prototype,"conditionalFormatSettings",void 0),f([n.Property()],i.prototype,"emptyCellsTextContent",void 0),f([n.Collection([],dv)],i.prototype,"groupSettings",void 0),f([n.Complex({},iy)],i.prototype,"authentication",void 0),i}(n.ChildProperty),ry=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),v=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},uy=(n.ChildProperty,function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return ry(i,t),v([n.Property("auto")],i.prototype,"height",void 0),v([n.Property("auto")],i.prototype,"width",void 0),v([n.Property("Both")],i.prototype,"gridLines",void 0),v([n.Property(!1)],i.prototype,"allowTextWrap",void 0),v([n.Property(!1)],i.prototype,"allowReordering",void 0),v([n.Property(!0)],i.prototype,"allowResizing",void 0),v([n.Property(!0)],i.prototype,"allowAutoResizing",void 0),v([n.Property(null)],i.prototype,"rowHeight",void 0),v([n.Property(110)],i.prototype,"columnWidth",void 0),v([n.Property("Compact")],i.prototype,"layout",void 0),v([n.Property("Ellipsis")],i.prototype,"clipMode",void 0),v([n.Property(!1)],i.prototype,"allowSelection",void 0),v([n.Property(-1)],i.prototype,"selectedRowIndex",void 0),v([n.Property({mode:"Row",cellSelectionMode:"Flow",type:"Single"})],i.prototype,"selectionSettings",void 0),v([n.Property({wrapMode:"Both"})],i.prototype,"textWrapSettings",void 0),v([n.Property("AllPages")],i.prototype,"printMode",void 0),v([n.Property()],i.prototype,"contextMenuItems",void 0),v([n.Event()],i.prototype,"beforeCopy",void 0),v([n.Event()],i.prototype,"printComplete",void 0),v([n.Event()],i.prototype,"beforePrint",void 0),v([n.Event()],i.prototype,"beforePdfExport",void 0),v([n.Event()],i.prototype,"beforeExcelExport",void 0),v([n.Event()],i.prototype,"contextMenuOpen",void 0),v([n.Event()],i.prototype,"contextMenuClick",void 0),v([n.Event()],i.prototype,"queryCellInfo",void 0),v([n.Event()],i.prototype,"headerCellInfo",void 0),v([n.Event()],i.prototype,"rowSelecting",void 0),v([n.Event()],i.prototype,"rowSelected",void 0),v([n.Event()],i.prototype,"rowDeselecting",void 0),v([n.Event()],i.prototype,"rowDeselected",void 0),v([n.Event()],i.prototype,"cellSelecting",void 0),v([n.Event()],i.prototype,"cellSelected",void 0),v([n.Event()],i.prototype,"cellDeselecting",void 0),v([n.Event()],i.prototype,"cellDeselected",void 0),v([n.Event()],i.prototype,"resizeStart",void 0),v([n.Event()],i.prototype,"resizing",void 0),v([n.Event()],i.prototype,"resizeStop",void 0),v([n.Event()],i.prototype,"pdfHeaderQueryCellInfo",void 0),v([n.Event()],i.prototype,"pdfQueryCellInfo",void 0),v([n.Event()],i.prototype,"excelHeaderQueryCellInfo",void 0),v([n.Event()],i.prototype,"excelQueryCellInfo",void 0),v([n.Event()],i.prototype,"columnDragStart",void 0),v([n.Event()],i.prototype,"columnDrag",void 0),v([n.Event()],i.prototype,"columnDrop",void 0),v([n.Event()],i.prototype,"columnRender",void 0),i}(n.ChildProperty)),fy=function(){function t(t){this.keyConfigs={tab:"tab",shiftTab:"shift+tab",enter:"enter",shiftUp:"shift+upArrow",shiftDown:"shift+downArrow",shiftLeft:"shift+leftArrow",shiftRight:"shift+rightArrow",shiftEnter:"shift+enter",ctrlEnter:"ctrl+enter",upArrow:"upArrow",downArrow:"downArrow",leftArrow:"leftArrow",rightArrow:"rightArrow",escape:"escape",ctrlShiftF:"ctrl+shift+f"};this.parent=t;this.event=void 0;this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex;this.pivotViewKeyboardModule=new n.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return t.prototype.keyActionHandler=function(n){switch(n.action){case"tab":this.processTab(n);break;case"shiftTab":this.processShiftTab(n);break;case"enter":case"shiftEnter":case"ctrlEnter":this.processEnter(n);break;case"shiftUp":case"shiftDown":case"shiftLeft":case"shiftRight":case"upArrow":case"downArrow":case"leftArrow":case"rightArrow":this.processSelection(n);break;case"escape":this.clearSelection();break;case"ctrlShiftF":this.toggleFieldList(n)}},t.prototype.getNextButton=function(t){var r=this.allpivotButtons(t),u,i;if(n.removeClass(r,"e-btn-focused"),this.parent.grid.element.querySelector("."+w))for(u=r.length,i=0;i<u;i++)if(r[i].getAttribute("data-uid")===t.getAttribute("data-uid"))return r[i+1]?r[i+1]:t;return t},t.prototype.getPrevButton=function(t){var r=this.allpivotButtons(t),u,i;if(n.removeClass(r,"e-btn-focused"),this.parent.grid.element.querySelector("."+w))for(u=r.length,i=0;i<u;i++)if(r[i].getAttribute("data-uid")===t.getAttribute("data-uid"))return r[i-1]?r[i-1]:t;return t},t.prototype.allpivotButtons=function(t){var i=[],h,c;if(t&&this.parent.showGroupingBar){var r=n.closest(t,"."+br),u=n.closest(t,"."+tr),f=n.closest(t,"."+wf),l=t.classList.contains(gi),e=void 0,o=void 0,s=void 0;(null!==r?o=r.classList.contains(br):null!==u?s=u.classList.contains(tr):null!==f&&(e=f.classList.contains(wf)),o||s||l)?(h=[].slice.call(this.parent.element.querySelector("."+br).querySelectorAll("."+w)),c=[].slice.call(this.parent.element.querySelector("."+tr).querySelectorAll("."+w)),i=h.concat(c)):e&&(i=[].slice.call(this.parent.element.querySelector("."+wf).querySelectorAll("."+w)))}return i},t.prototype.processTab=function(t){var i=t.target,r,u,f,o,e;if(i&&(n.closest(i,"."+w)||i.classList.contains("e-group-row"))){if(this.parent.grid){if(r=this.parent.grid.serviceLocator.getService("focus"),i.classList.contains("e-group-row")&&i.querySelector(".e-btn-focused"))i=i.querySelector(".e-btn-focused");else if(i.classList.contains("e-group-row"))return r.focus(),u=r.getFocusedElement(),n.addClass([u],["e-focused","e-focus"]),u.setAttribute("tabindex","0"),void t.preventDefault();return f=this.getNextButton(i),f.getAttribute("data-uid")!==i.getAttribute("data-uid")?(this.parent.element.querySelector(".e-focused")?(this.parent.element.querySelector(".e-focused").setAttribute("tabindex","-1"),n.removeClass(this.parent.element.querySelectorAll(".e-focus"),"e-focus"),n.removeClass(this.parent.element.querySelectorAll(".e-focused"),"e-focused"),r.setFocusedElement(this.parent.element.querySelector(".e-headercell")),this.parent.element.querySelector(".e-headercell").setAttribute("tabindex","0")):r.currentInfo.skipAction=!0,n.addClass([f],"e-btn-focused"),f.focus()):(r.focus(),u=r.getFocusedElement(),n.addClass([u],["e-focused","e-focus"]),u.setAttribute("tabindex","0")),void t.preventDefault()}}else if(!this.parent.showGroupingBar&&this.parent.showFieldList&&i&&n.closest(i,"."+st)){if(this.parent.grid)return(r=this.parent.grid.serviceLocator.getService("focus")).focus(),u=r.getFocusedElement(),n.addClass([u],["e-focused","e-focus"]),u.setAttribute("tabindex","0"),void t.preventDefault()}else if(this.parent.showGroupingBar||this.parent.showFieldList||!i||!n.closest(i,"."+ku)||n.closest(i,".e-popup.e-popup-open"))i&&n.closest(i,"."+gu)&&this.parent.toolbar&&this.parent.toolbarModule?(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){n.removeClass(n.closest(i,"."+gu).querySelectorAll(".e-menu-item.e-focused"),"e-focused");document.activeElement&&document.activeElement.classList.contains("e-menu-item")&&n.addClass([document.activeElement],"e-focused")})):i.classList.contains("e-numerictextbox")&&((r=this.parent.grid.serviceLocator.getService("focus")).focus(),u=r.getFocusedElement(),n.removeClass([u],["e-focused","e-focus"]),u.setAttribute("tabindex","0"),t.preventDefault());else if(this.parent.grid){if(o=n.closest(i,"."+ku),e=(r=this.parent.grid.serviceLocator.getService("focus"),[].slice.call(o.getElementsByTagName("tr"))),i.innerHTML!==e[e.length-1].lastChild.innerHTML)return r.focus(),u=r.getFocusedElement(),n.addClass([u],["e-focused","e-focus"]),u.setAttribute("tabindex","0"),void t.preventDefault();r.currentInfo.skipAction=!0}},t.prototype.processShiftTab=function(t){var i=t.target,u,r,o,e,f;if(i&&(n.closest(i,"."+w)||i.classList.contains("e-group-row"))){if(this.parent.grid){if(u=this.parent.grid.serviceLocator.getService("focus"),i.classList.contains("e-group-row")&&i.querySelector(".e-btn-focused"))i=i.querySelector(".e-btn-focused");else if(i.classList.contains("e-group-row")&&(i=this.parent.element.querySelector(".e-btn-focused")?this.parent.element.querySelector(".e-btn-focused"):this.parent.element.querySelector("."+br),r=this.allpivotButtons(i),r.length>0&&r[r.length-1]))return u.currentInfo.skipAction=!0,r[r.length-1].focus(),n.removeClass(r,"e-btn-focused"),n.addClass([r[r.length-1]],"e-btn-focused"),void t.preventDefault();if(o=this.getPrevButton(i),o.getAttribute("data-uid")!==i.getAttribute("data-uid"))return u.currentInfo.skipAction=!0,o.focus(),void t.preventDefault()}}else if(i&&this.parent.grid&&(i.classList.contains("e-movablefirst")||i.classList.contains("e-rowsheader")&&n.closest(i,"tr").getAttribute("data-uid")===this.parent.grid.element.querySelector(".e-frozencontent tr").getAttribute("data-uid"))){if((u=this.parent.grid.serviceLocator.getService("focus"),i.classList.contains("e-movablefirst"))&&(i=this.parent.element.querySelector("."+ki+" .e-btn-focused")?this.parent.element.querySelector("."+ki+" .e-btn-focused"):this.parent.element.querySelector("."+ki),e=u.getFocusedElement(),n.removeClass([e],["e-focused","e-focus"])),f=this.allpivotButtons(i),f.length>0)return u.currentInfo.skipAction=!0,setTimeout(function(){f[f.length-1].focus()}),n.removeClass(f,"e-btn-focused"),n.addClass([f[f.length-1]],"e-btn-focused"),void t.preventDefault()}else i&&n.closest(i,"."+gu)&&this.parent.toolbar&&this.parent.toolbarModule?(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){n.removeClass(n.closest(i,"."+gu).querySelectorAll(".e-menu-item.e-focused"),"e-focused");document.activeElement&&document.activeElement.classList.contains("e-menu-item")&&n.addClass([document.activeElement],"e-focused")})):i.classList.contains("e-numerictextbox")&&((u=this.parent.grid.serviceLocator.getService("focus")).focus(),e=u.getFocusedElement(),n.removeClass([e],["e-focused","e-focus"]),e.setAttribute("tabindex","0"),t.preventDefault())},t.prototype.processEnter=function(t){var i=t.target,u,r;i&&n.closest(i,"."+yt)&&(u=this.parent.grid.serviceLocator.getService("focus"),13!==t.keyCode||t.shiftKey||t.ctrlKey?13===t.keyCode&&t.shiftKey&&!t.ctrlKey?this.parent.enableValueSorting&&(this.event=t,i.click(),u.focus(),r=u.getFocusedElement(),n.addClass([r],["e-focused","e-focus"]),r.setAttribute("tabindex","0")):13===t.keyCode&&!t.shiftKey&&t.ctrlKey&&this.parent.hyperlinkSettings&&i.querySelector("a")&&i.querySelector("a").click():i.querySelector("."+s)?(this.event=t,i.querySelector("."+s).click(),u.focus(),r=u.getFocusedElement(),n.addClass([r],["e-focused","e-focus"]),r.setAttribute("tabindex","0")):i.classList.contains("e-valuescontent")?(i.dispatchEvent(new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0})),i.querySelector(".e-numerictextbox")&&i.click()):i.classList.contains("e-numerictextbox")&&(u.focus(),r=u.getFocusedElement(),n.removeClass([r],["e-focused","e-focus"])),t.preventDefault())},t.prototype.clearSelection=function(){var t=this.parent;n.removeClass(t.element.querySelectorAll("."+ot+",."+tt),[tt,ot,it]);this.parent&&this.parent.renderModule&&this.parent.renderModule.selected()},t.prototype.processSelection=function(t){var r=t.target,o,s;if(this.parent.grid&&this.parent.gridSettings.allowSelection&&"Row"!==this.parent.gridSettings.selectionSettings.mode&&!r.classList.contains("e-numerictextbox")){var i,u=this.parent,e=parseInt(t.target.getAttribute("aria-colindex"),10)-1,f=Number(t.target.getAttribute("index"));("TH"!==r.nodeName&&"TD"!==r.nodeName||(i="shiftUp"===t.action||"upArrow"===t.action?0===f||0===e||"TH"!==r.nodeName&&u.renderModule.rowStartPos!==f?null:this.getParentElement(u,i,e,f-1):"shiftDown"===t.action||"downArrow"===t.action?u.element.querySelector('th[aria-colindex="'+(e+1)+'"][index="'+(f+1)+'"]'):"shiftLeft"===t.action||"leftArrow"===t.action?t.target.previousSibling:t.target.nextSibling),n.isNullOrUndefined(i))?("upArrow"===t.action?(i=u.element.querySelector('[aria-colindex="'+(e+1)+'"][index="'+(f-1)+'"]'),f--):"downArrow"===t.action&&(i=u.element.querySelector('[aria-colindex="'+(e+1)+'"][index="'+(f+1)+'"]'),f++),n.isNullOrUndefined(i)||u.clearSelection(i,t)):"Both"===u.gridSettings.selectionSettings.mode&&i.classList.contains(ce)?u.clearSelection(i,t):(e=parseInt(i.getAttribute("aria-colindex"),10)-1,f=Number(i.getAttribute("index")),o=Number(i.getAttribute("aria-colspan")),u.clearSelection(i,t),s={cancel:!1,isCellClick:!0,currentCell:i,data:u.pivotValues[f][e]},u.trigger(nh,s,function(n){n.cancel||u.applyColumnSelection(t,i,e,e+(o>0?o-1:0),f)}))}else if(r&&(37===t.keyCode||38===t.keyCode)&&this.parent&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&!r.classList.contains("e-numerictextbox")){if(this.parent.grid&&this.parent.element.querySelector(".e-frozenheader")&&this.parent.element.querySelector(".e-frozenheader").querySelectorAll(".e-focus").length>0)return n.removeClass(this.parent.element.querySelector(".e-frozenheader").querySelectorAll(".e-focus"),"e-focus"),n.removeClass(this.parent.element.querySelector(".e-frozenheader").querySelectorAll(".e-focused"),"e-focused"),this.parent.element.querySelector(".e-headercell").setAttribute("tabindex","-1"),this.parent.grid.serviceLocator.getService("focus").setFocusedElement(r),n.addClass([r],["e-focused","e-focus"]),r.setAttribute("tabindex","0"),r.focus(),void t.preventDefault()}else r.classList.contains("e-numerictextbox")&&("rightArrow"===t.action||"leftArrow"===t.action)&&r.click()},t.prototype.getParentElement=function(n,t,i,r){for(;!t;)t=n.element.querySelector('[aria-colindex="'+(i+1)+'"][index="'+r+'"]'),i--;return t},t.prototype.toggleFieldList=function(n){if(this.parent&&!this.parent.isDestroyed&&this.parent.showFieldList&&this.parent.pivotFieldListModule&&!this.parent.pivotFieldListModule.isDestroyed&&this.parent.element.querySelector("."+st)){if(!this.parent.element.querySelector("."+st).classList.contains(gr))return this.parent.element.querySelector("."+st).click(),void n.preventDefault();this.parent.element.querySelector("."+st).classList.contains(gr)&&this.parent.pivotFieldListModule.dialogRenderer&&this.parent.pivotFieldListModule.dialogRenderer.fieldListDialog&&!this.parent.pivotFieldListModule.dialogRenderer.fieldListDialog.isDestroyed&&this.parent.pivotFieldListModule.dialogRenderer.fieldListDialog.hide()}},t.prototype.destroy=function(){this.timeOutObj&&(clearTimeout(this.timeOutObj),this.timeOutObj=null);this.event=null;this.pivotViewKeyboardModule&&(this.pivotViewKeyboardModule.destroy(),this.pivotViewKeyboardModule=null)},t}(),ey=function(){function t(n){this.parent=n;this.parent.contextMenuModule=this}return t.prototype.render=function(){this.renderContextMenu()},t.prototype.renderContextMenu=function(){var i=[{text:this.parent.localeObj.getConstant("addToFilter"),id:this.parent.element.id+"_Filters"},{text:this.parent.localeObj.getConstant("addToRow"),id:this.parent.element.id+"_Rows"},{text:this.parent.localeObj.getConstant("addToColumn"),id:this.parent.element.id+"_Columns"},{text:this.parent.localeObj.getConstant("addToValue"),id:this.parent.element.id+"_Values"}],r={cssClass:"e-pivot-context-menu"+(this.parent.cssClass?" "+this.parent.cssClass:""),items:i,enableRtl:this.parent.enableRtl,locale:this.parent.locale,beforeOpen:this.onBeforeMenuOpen.bind(this),select:this.onSelectContextMenu.bind(this)},t=n.createElement("ul",{id:this.parent.element.id+"_PivotContextMenu"});this.parent.element.appendChild(t);this.menuObj=new et.ContextMenu(r);this.menuObj.isStringTemplate=!0;this.menuObj.appendTo(t)},t.prototype.onBeforeMenuOpen=function(t){var r=[].slice.call(t.element.querySelectorAll("li")),s="olap"===this.parent.dataType?this.fieldElement.getAttribute("data-type"):this.fieldElement.querySelector("."+ie).getAttribute("data-type"),u,h,f,c,e,l,o,a,i;if(n.removeClass(r,p),"CalculatedField"===s||"isMeasureFieldsAvail"===s)for(u=0,h=r;u<h.length;u++)(i=h[u]).textContent!==this.parent.localeObj.getConstant("addToValue")&&n.addClass([i],p);else if("isMeasureAvail"===s)for(f=0,c=r;f<c.length;f++)(i=c[f]).textContent!==this.parent.localeObj.getConstant("addToRow")&&i.textContent!==this.parent.localeObj.getConstant("addToColumn")&&n.addClass([i],p);else if("olap"===this.parent.dataType){for(e=0,l=r;e<l.length;e++)if((i=l[e]).textContent===this.parent.localeObj.getConstant("addToValue")){n.addClass([i],p);break}}else if("true"===this.fieldElement.getAttribute("isvalue"))for(o=0,a=r;o<a.length;o++)(i=a[o]).textContent!==this.parent.localeObj.getConstant("addToValue")&&i.textContent!==this.parent.localeObj.getConstant("addToFilter")||n.addClass([i],p)},t.prototype.onSelectContextMenu=function(n){if(null!==n.element.textContent){var t=this.fieldElement.getAttribute("data-uid"),i=n.item.id.replace(this.parent.element.id+"_","").toLowerCase();this.parent.pivotCommon.dataSourceUpdate.control="pivotview"===this.parent.getModuleName()?this.parent:this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent;this.parent.pivotCommon.dataSourceUpdate.btnElement=this.fieldElement;this.parent.pivotCommon.dataSourceUpdate.updateDataSource(t,i,-1);this.parent.updateDataSource(!0);this.fieldElement=void 0}},t.prototype.destroy=function(){this.parent.isDestroyed&&this.menuObj&&!this.menuObj.isDestroyed&&(this.menuObj.destroy(),n.select("#"+this.parent.element.id+"_PivotContextMenu",document)&&n.remove(n.select("#"+this.parent.element.id+"_PivotContextMenu",document)))},t}(),la=function(){function t(t){this.previousValues={top:0,left:0};this.frozenPreviousValues={top:0,left:0};this.eventType="";this.isFireFox=n.Browser.userAgent.toLowerCase().indexOf("firefox")>-1;this.isScrolling=!1;this.boundElements=[];this.scrollingDirection="Up";this.parent=t;this.addInternalEvents()}return t.prototype.getModuleName=function(){return"virtualscroll"},t.prototype.addInternalEvents=function(){this.parent.isDestroyed||this.parent.on(cr,this.wireEvents,this)},t.prototype.wireEvents=function(){var u;if(this.engineModule="pivot"===this.parent.dataType?this.parent.engineModule:this.parent.olapEngineModule,"Chart"!==this.parent.displayOption.view){this.clearAllEventHandlers();var t=this.parent.element.querySelector("."+nr),f=this.parent.element.querySelector("."+at),i=this.parent.element.querySelector("."+ai),r=f.querySelector("."+dt);(this.boundElements=[t,f,i,r],this.engineModule)&&(u=this.parent.isAdaptive?t:f.querySelector("."+dt),n.EventHandler.add(u,"scroll touchmove pointermove",this.onHorizondalScroll(i,t),this),n.EventHandler.add(t.parentElement,"scroll wheel touchmove pointermove",this.onHorizondalScroll(i,t),this),n.EventHandler.add(t.parentElement,"scroll wheel touchmove pointermove keyup keydown",this.onVerticalScroll(t.parentElement,t),this),this.isFireFox?(n.EventHandler.add(u,"mouseup touchend scroll",this.common(i,t,t),this),this.parent.isAdaptive||n.EventHandler.add(t.parentElement,"mouseup touchend scroll",this.common(i,t.parentElement,t),this)):(n.EventHandler.add(u,"mouseup touchend",this.common(i,t,t),this),this.parent.isAdaptive||n.EventHandler.add(t.parentElement,"mouseup touchend",this.common(i,t.parentElement,t),this)),n.EventHandler.add(r,"scroll",this.onCustomScrollbarScroll(t,i),this),n.EventHandler.add(t,"scroll",this.onCustomScrollbarScroll(r,i),this),n.EventHandler.add(i,"scroll",this.onCustomScrollbarScroll(r,t),this),n.EventHandler.add(i,"touchstart pointerdown",this.setPageXY(),this),n.EventHandler.add(i,"touchmove pointermove",this.onTouchScroll(i,t),this),n.EventHandler.add(t,"touchstart pointerdown",this.setPageXY(),this),n.EventHandler.add(t,"touchmove pointermove",this.onTouchScroll(i,t),this));this.parent.grid.on("check-scroll-reset",function(n){n.cancel=!0});this.parent.grid.on("prevent-frozen-scroll-refresh",function(n){n.cancel=!0});this.parent.grid.isPreventScrollEvent=!0}},t.prototype.clearAllEventHandlers=function(){this.verticalScrollTimeoutObj&&(clearTimeout(this.verticalScrollTimeoutObj),this.verticalScrollTimeoutObj=null);this.horizontalScrollTimeoutObj&&(clearTimeout(this.horizontalScrollTimeoutObj),this.horizontalScrollTimeoutObj=null);this.boundElements.forEach(function(t){t&&n.EventHandler.clearEvents(t)});this.boundElements=[];this.parent&&this.parent.grid&&(this.parent.grid.off("check-scroll-reset"),this.parent.grid.off("prevent-frozen-scroll-refresh"))},t.prototype.onWheelScroll=function(n){var t=this,i=n;return function(n){var r=i.scrollTop+(1===n.deltaMode?30*n.deltaY:n.deltaY);t.frozenPreviousValues.top!==r&&(n.preventDefault(),t.frozenPreviousValues.top=r,t.eventType=n.type)}},t.prototype.getPointXY=function(n){var t={x:0,y:0};return n.touches&&n.touches.length?(t.x=n.touches[0].pageX,t.y=n.touches[0].pageY):(t.x=n.pageX,t.y=n.pageY),t},t.prototype.onCustomScrollbarScroll=function(n,t){var i=this,r=n,u=t;return function(n){if(null!==i.parent.element.querySelector("."+ct).querySelector("tbody")){var f=n.target,t=f.scrollLeft;i.previousValues.left===t||i.isFireFox&&f.classList.contains(ai)||(r.scrollLeft=t,u.scrollLeft=t,i.parent.isDestroyed)}}},t.prototype.onTouchScroll=function(n,t){var i=this,r=t;return function(u){if("mouse"!==u.pointerType){var e=i.getPointXY(u),o=i.parent.element.querySelector("."+yt+" ."+ct).scrollTop+(i.pageXY.y-e.y),s=i.parent.isAdaptive?t:r.parentElement.parentElement.querySelector("."+dt),f=s.scrollLeft+(i.pageXY.x-e.x);i.frozenPreviousValues.left===f||f<0||(n.scrollLeft=f,s.scrollLeft=f,i.pageXY.x=e.x,i.frozenPreviousValues.left=f,i.frozenPreviousValues.top===o||o<0||(i.pageXY.y=e.y,i.frozenPreviousValues.top=o,i.eventType=u.type))}}},t.prototype.update=function(t,i,u,f,e,o){var s=this,a=this.parent.element.querySelector("."+nr),p,w,h,k;this.parent.isScrolling=!0;var l="pivot"===this.parent.dataType?this.parent.engineModule:this.parent.olapEngineModule,nt={dataSourceSettings:r.getClonedDataSourceSettings(this.parent.dataSourceSettings)},y=this.parent.virtualScrollSettings&&this.parent.virtualScrollSettings.allowSinglePage&&"pivot"===this.parent.dataType,tt=this.parent.engineModule?this.parent.engineModule.viewportPageCount:3;if(this.parent.pageSettings&&l.pageSettings){if("vertical"===this.direction){var it=o.parentElement.scrollHeight-(t+o.parentElement.offsetHeight),d="pivot"===this.parent.dataType&&"row"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,v=this.parent.pageSettings.rowPageSize*d*this.parent.gridSettings.rowHeight,c="Up"===this.scrollingDirection?Math.ceil(t/v):Math.ceil(t/v)-1;if(c+=y&&it<=0?1:0,(this.parent.scrollPosObject.vertical===c||l.pageSettings.rowPageSize>=l.rowCount||a&&a.scrollHeight<a.parentElement.clientHeight*tt)&&!y)return;this.parent.actionObj.actionName=al;y&&this.parent.grid&&this.parent.grid.element.querySelector(".e-spinner-inner")&&n.addClass([this.parent.grid.element.querySelector(".e-spinner-inner")],[hr]);this.parent.actionBeginMethod();y||this.parent.showWaitingPopup();this.parent.scrollPosObject.vertical=c;this.parent.pageSettings.currentRowPage=l.pageSettings.currentRowPage=c>1?c:1;p=0;this.parent.trigger(yi,nt,function(){"pivot"===s.parent.dataType?"Server"===s.parent.dataSourceSettings.mode?s.parent.getEngine("onScroll",null,null,null,null,null,null):(s.parent.engineModule.generateGridData(s.parent.dataSourceSettings,!0,!1,s.parent.engineModule.headerCollection,!0),p=s.parent.engineModule.rowStartPos):(s.parent.olapEngineModule.scrollPage(),p=s.parent.olapEngineModule.pageRowStartPos);s.enginePopulatedEventMethod(l)});w=v*Math.ceil(p/(this.parent.pageSettings.rowPageSize*d))-l.rowFirstLvl*d*this.parent.gridSettings.rowHeight;this.parent.scrollPosObject.verticalSection=w}else{var rt=f.scrollWidth-(f.scrollLeft+f.offsetWidth),g="pivot"===this.parent.dataType&&"column"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,b=(v=this.parent.pageSettings.columnPageSize*g*this.parent.gridSettings.columnWidth,c=Math.ceil(Math.abs(i)/v),this.parent.virtualScrollSettings&&this.parent.virtualScrollSettings.allowSinglePage&&"pivot"===this.parent.dataType);if(c+=b&&rt<=0?1:0,(this.parent.scrollPosObject.horizontal===c||a&&a.scrollWidth<a.parentElement.clientWidth*tt)&&!b)return;this.parent.actionObj.actionName=vl;b&&this.parent.grid&&this.parent.grid.element.querySelector(".e-spinner-inner")&&(n.addClass([this.parent.grid.element.querySelector(".e-spinner-inner")],[hr]),e&&n.removeClass([e,o],["e-virtual-pivot-content"]));this.parent.actionBeginMethod();b||this.parent.showWaitingPopup();h=this.parent;h.scrollPosObject.horizontal=c;this.parent.pageSettings.currentColumnPage=l.pageSettings.currentColumnPage=c>1?c:1;k=0;this.parent.trigger(yi,nt,function(){"pivot"===h.dataType?"Server"===s.parent.dataSourceSettings.mode?s.parent.getEngine("onScroll",null,null,null,null,null,null):(h.engineModule.generateGridData(h.dataSourceSettings,!0,!1,h.engineModule.headerCollection),k=h.engineModule.colStartPos):(h.olapEngineModule.scrollPage(),k=h.olapEngineModule.pageColStartPos);s.enginePopulatedEventMethod(l)});w=v*Math.ceil(k/(h.pageSettings.columnPageSize*g))-l.colFirstLvl*g*h.gridSettings.columnWidth;h.scrollPosObject.horizontalSection=w}this.parent.actionObj.actionName=this.parent.getActionCompleteName();this.parent.actionObj.actionName&&this.parent.actionCompleteMethod()}},t.prototype.enginePopulatedEventMethod=function(n,t){var r=this,i=t||this.parent,u={dataSourceSettings:i.dataSourceSettings,pivotValues:n.pivotValues};i.trigger(pi,u,function(n){r.parent.pivotValues=n.pivotValues})},t.prototype.setPageXY=function(){var n=this;return function(t){"mouse"!==t.pointerType&&(n.pageXY=n.getPointXY(t))}},t.prototype.common=function(t,i,r){var u=this;return function(f){var o=u.parent.virtualScrollSettings&&u.parent.virtualScrollSettings.allowSinglePage&&"pivot"===u.parent.dataType,e;(u.isScrolling||!o)&&(u.isScrolling=!1,e=u.parent.isAdaptive?i:n.closest(i,"."+at).querySelector("."+dt),o&&("vertical"===u.direction?u.parent.element.querySelector("."+gt)&&(n.addClass([r],["e-virtual-pivot-content"]),n.removeClass([u.parent.element.querySelector("."+gt)],[hr])):u.parent.element.querySelector("."+gt)&&(n.addClass([t,i],["e-virtual-pivot-content"]),n.removeClass([u.parent.element.querySelector("."+gt)],[hr]))),u.update(u.parent.element.querySelector("."+yt+" ."+ct).scrollTop*u.parent.verticalScrollScale,e.scrollLeft*u.parent.horizontalScrollScale,f,e,t,i))}},t.prototype.onHorizondalScroll=function(t,i){var r=this,o=this.parent.isAdaptive?i:n.closest(i,"."+at).querySelector("."+dt),e=Math.abs(o.scrollLeft),f=e*this.parent.horizontalScrollScale,u=f-this.parent.scrollPosObject.horizontalSection-e;return u=this.parent.enableRtl?u:-u,"none"!==o.style.display&&this.alignFreezedCells(u,!1),function(s){var l,h,p,c,a,v,y,w;(e=Math.abs(o.scrollLeft),f=e*r.parent.horizontalScrollScale,"wheel"!==s.type&&"touchmove"!==s.type&&"wheel"!==r.eventType&&"touchmove"!==r.eventType||(r.horizontalScrollTimeoutObj&&clearTimeout(r.horizontalScrollTimeoutObj),r.horizontalScrollTimeoutObj=setTimeout(function(){f="touchmove"===s.type?e:f;r.update(i.parentElement.scrollTop*r.parent.verticalScrollScale,f,s,o,t,i)},300)),r.previousValues.left!==f)&&(r.parent.scrollDirection=r.direction="horizondal",r.isScrolling=!0,u=f-r.parent.scrollPosObject.horizontalSection-e,u=r.parent.enableRtl?u:-u,l=i.querySelector("."+b).style.transform.split(",").length>1?i.querySelector("."+b).style.transform.split(",")[1].trim():"0px)",e<r.parent.scrollerBrowserLimit&&(n.setStyleAttribute(i.querySelector("."+b),{transform:"translate("+u+"px,"+l}),n.setStyleAttribute(t.querySelector("."+b),{transform:"translate("+u+"px,0px)"}),r.alignFreezedCells(u,!1)),h=r.parent.scrollPosObject.horizontalSection>f?-(r.parent.scrollPosObject.horizontalSection-f):f+(t.offsetWidth-t.querySelector(".e-headercell.e-leftfreeze").offsetWidth)-(r.parent.scrollPosObject.horizontalSection+(i.querySelector("."+b).offsetWidth-i.querySelector("."+b).querySelector(".e-leftfreeze.e-rowsheader").offsetWidth)),p=Math.ceil(r.parent.scrollPosObject.horizontalSection/r.parent.horizontalScrollScale)<r.parent.scrollerBrowserLimit,(r.parent.scrollPosObject.horizontalSection>f||h>1&&p)&&(r.parent.virtualScrollSettings&&r.parent.virtualScrollSettings.allowSinglePage&&"pivot"===r.parent.dataType&&r.parent.element.querySelector("."+gt)&&(n.addClass([t,i],["e-virtual-pivot-content"]),n.removeClass([r.parent.element.querySelector("."+gt)],[hr])),f>t.clientWidth?(r.parent.scrollPosObject.left<1&&(r.parent.scrollPosObject.left=t.clientWidth),r.parent.scrollPosObject.left=r.parent.scrollPosObject.left-50,h=r.parent.scrollPosObject.horizontalSection>f?h-r.parent.scrollPosObject.left:h+r.parent.scrollPosObject.left):h=-r.parent.scrollPosObject.horizontalSection,u=-(f-(r.parent.scrollPosObject.horizontalSection+h)-n.closest(i,"."+at).querySelector("."+dt).scrollLeft),c=r.parent.gridSettings.columnWidth*r.engineModule.columnCount,c>r.parent.scrollerBrowserLimit&&(r.parent.horizontalScrollScale=c/r.parent.scrollerBrowserLimit,c=r.parent.scrollerBrowserLimit),u>c&&u>f&&(u=f,h=0),n.setStyleAttribute(i.querySelector("."+b),{transform:"translate("+u+"px,"+l}),n.setStyleAttribute(t.querySelector("."+b),{transform:"translate("+u+"px,0px)"}),r.alignFreezedCells(u,!1),r.parent.scrollPosObject.horizontalSection=r.parent.scrollPosObject.horizontalSection+h),a=o.scrollWidth-(e+(o.offsetWidth-r.parent.element.querySelector("."+yt).querySelector("."+ci+"."+vi).offsetWidth)),a<=0&&(v=i.querySelector("."+li),v.style.display="none",y=i.scrollWidth-(i.scrollLeft+i.offsetWidth),v.style.display="",w=i.scrollWidth-(i.scrollLeft+i.offsetWidth),r.parent.scrollPosObject.horizontalSection-=y>a?y:-w,u=e>r.parent.scrollerBrowserLimit?Number(i.querySelector("."+b).style.transform.split(",")[0].split("px")[0].trim()):-(e*r.parent.horizontalScrollScale-r.parent.scrollPosObject.horizontalSection-e),n.setStyleAttribute(i.querySelector("."+b),{transform:"translate("+u+"px,"+l}),n.setStyleAttribute(t.querySelector("."+b),{transform:"translate("+u+"px,0px)"}),r.alignFreezedCells(u,!1)),r.previousValues.left=f,r.frozenPreviousValues.left=f,r.eventType="",t.scrollLeft=o.scrollLeft,i.scrollLeft=o.scrollLeft)}},t.prototype.alignFreezedCells=function(n,t){for(var u,i=0,r=this.parent.element.querySelectorAll("."+vi);i<r.length;i++)this.parent.isTabular&&this.parent.dataSourceSettings.rows.length>1?(u=r[i],this.setFrozenColumnPosition(n,u,i,r,t)):t?this.parent.enableRtl?r[i].style.right=-n+"px":r[i].style.left=n+"px":this.parent.enableRtl?r[i].style.right=Number(n)+"px":r[i].style.left=Number(-n)+"px"},t.prototype.onVerticalScroll=function(t,i){var r=this,u=t.querySelector("."+nr)?t.querySelector("."+nr):t;return function(f){var y=r.parent.engineModule?r.parent.engineModule.viewportPageCount:3,e,h,o,l,s,a,v,c;if(r.parent.isAdaptive||u.scrollHeight>u.parentElement.clientHeight*y){if(e=t.scrollTop*r.parent.verticalScrollScale,("wheel"===f.type||"touchmove"===f.type||"scroll"===f.type||"wheel"===r.eventType||"touchmove"===r.eventType||"keyup"===f.type||"keydown"===f.type)&&(h=r.parent.isAdaptive?t:n.closest(t,"."+at).querySelector("."+dt),r.verticalScrollTimeoutObj&&clearTimeout(r.verticalScrollTimeoutObj),r.verticalScrollTimeoutObj=setTimeout(function(){var n=0,i;r.parent.isAdaptive?(i=h.querySelector("."+nr),n=h.scrollLeft===i.scrollLeft?h.scrollLeft:i.scrollLeft):n=h.scrollLeft;r.update(t.scrollTop*r.parent.verticalScrollScale,n*r.parent.horizontalScrollScale,f,h,null,t)},300)),r.previousValues.top===e)return;r.parent.scrollPosObject.horizontalSection<0&&(r.parent.scrollPosObject.horizontalSection=0);r.parent.scrollDirection=r.direction="vertical";r.isScrolling=!0;o=-(e-r.parent.scrollPosObject.verticalSection-t.scrollTop);l=t.querySelector("."+b).style.transform.split(",")[0].trim();o>r.parent.virtualDiv.clientHeight&&(o=r.parent.virtualDiv.clientHeight);t.scrollTop<r.parent.scrollerBrowserLimit&&(n.setStyleAttribute(t.querySelector("."+b),{transform:"translate(0px,"+o+"px)"}),n.setStyleAttribute(t.querySelector("."+b),{transform:l+","+o+"px)"}));s=r.parent.scrollPosObject.verticalSection>e?-(r.parent.scrollPosObject.verticalSection-e):e+t.clientHeight-(r.parent.scrollPosObject.verticalSection+t.querySelector("."+b).offsetHeight);a=Math.ceil(r.parent.scrollPosObject.verticalSection/r.parent.verticalScrollScale)<r.parent.scrollerBrowserLimit;(r.parent.scrollPosObject.verticalSection>e||s>1&&a)&&(r.parent.virtualScrollSettings&&r.parent.virtualScrollSettings.allowSinglePage&&"pivot"===r.parent.dataType&&r.parent.element.querySelector("."+gt)&&(n.addClass([i],["e-virtual-pivot-content"]),n.removeClass([r.parent.element.querySelector("."+gt)],[hr])),e>t.clientHeight?(r.parent.scrollPosObject.top<1&&(r.parent.scrollPosObject.top=t.clientHeight),r.parent.scrollPosObject.top=r.parent.scrollPosObject.top-50,s=r.parent.scrollPosObject.verticalSection>e?s-r.parent.scrollPosObject.top:s+r.parent.scrollPosObject.top):s=-r.parent.scrollPosObject.verticalSection,v=r.parent.element.querySelector("."+ct).querySelector("."+b),o=-(e-(r.parent.scrollPosObject.verticalSection+s)-t.scrollTop),c=r.parent.gridSettings.rowHeight*r.engineModule.rowCount+.1-v.clientHeight,c>r.parent.scrollerBrowserLimit&&(r.parent.verticalScrollScale=c/r.parent.scrollerBrowserLimit,c=r.parent.scrollerBrowserLimit),o>c&&o>e&&(o=e,s=0),o>r.parent.virtualDiv.clientHeight&&(o=r.parent.virtualDiv.clientHeight),n.setStyleAttribute(t.querySelector("."+b),{transform:"translate(0px,"+o+"px)"}),n.setStyleAttribute(t.querySelector("."+b),{transform:l+","+o+"px)"}),r.parent.scrollPosObject.verticalSection=r.parent.scrollPosObject.verticalSection+s);r.scrollingDirection=r.previousValues.top<t.scrollTop?"Up":"Down";r.previousValues.top=e;r.frozenPreviousValues.top=e;r.eventType=""}}},t.prototype.removeInternalEvents=function(){this.parent.isDestroyed||(this.parent.off(cr,this.wireEvents),this.clearAllEventHandlers())},t.prototype.destroy=function(){this.removeInternalEvents();this.engineModule=null;this.keyboardEvents=null},t.prototype.setFrozenColumnPosition=function(n,t,i,r,u){var f,o,e;if(t&&t instanceof HTMLTableCellElement){if(f=0,o=t.cellIndex+1,o>1)for(e=0;e<o-1;e++)f+=this.parent.pivotColumns[e].width;u?this.parent.enableRtl?r[i].style.right=-(n-f)+"px":r[i].style.left=n+f+"px":this.parent.enableRtl?r[i].style.right=Number(n+f)+"px":r[i].style.left=Number(-(n-f))+"px"}},t}(),oy=function(){function t(n){this.indexString=[];this.isUpdated=!1;this.isEdited=!1;this.parent=n;this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule}return t.prototype.showDrillThroughDialog=function(t,i){for(var c,u=this,e=t.rawData,s=[],f={},h=0;h<t.rawData.length;h++)s.push(r.frameHeaderWithKeys(t.rawData[h]));try{if("Table"===this.parent.currentView&&this.parent.editSettings.allowInlineEditing&&this.parent.editSettings.allowEditing&&1===t.rawData.length){if(this.parent.actionObj.actionName=gl,this.parent.actionBeginMethod())return;this.editCell(t,e)}else this.removeDrillThroughDialog(),c=n.createElement("div",{id:this.parent.element.id+"_drillthrough",className:"e-drillthrough-dialog"}),this.parent.element.appendChild(c),this.dialogPopUp=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!1,header:this.parent.localeObj.getConstant("details"),content:this.createDrillThroughGrid(t,e,i),cssClass:this.parent.cssClass,beforeOpen:function(){u.drillThroughGrid.setProperties({dataSource:u.parent.editSettings.allowEditing?u.dataWithPrimarykey(t,e,f):e,height:u.parent.editSettings.allowEditing?220:300},!1)},beforeClose:function(){var nt,t,o,w,b,d,ft;if(u.parent.editSettings.allowEditing&&u.isUpdated){"CSV"===u.parent.dataSourceSettings.type&&u.updateData(u.drillThroughGrid.dataSource);for(var l=[],a=0,g=Object.keys(f);a<g.length;a++)nt=g[a],l.push(f[nt]);for(var i=Object.keys(f).length,v=[],tt=[],y=0,p=0,it=u.drillThroughGrid.dataSource;p<it.length;p++){if(t=it[p],u.isEdited||"0"!==t.__index&&""!==t.__index)i>0&&(delete f[t.__index.toString()],tt.push(t),i--);else{for(o=0,w=u.engine.fields;o<w.length;o++)b=w[o],n.isNullOrUndefined(t[b])&&delete t[b];delete t.__index;v.push(t)}"Server"===u.parent.dataSourceSettings.mode&&(t.__index&&delete t.__index,e[y].__index&&delete e[y].__index);y++}if(i=0,"Server"===u.parent.dataSourceSettings.mode){for(var rt=[],h=Object.keys(f),r=0;r<h.length;r++)delete u.parent.drillThroughValue.indexObject[f[h[r]]],rt.push({Key:h[r],Value:f[h[r]]});u.parent.getEngine("updateRawData",null,null,null,null,null,null,null,{addedData:v,removedData:rt,updatedData:tt,indexObject:u.parent.drillThroughValue.indexObject})}else{for(var c=[],k=0,ut=u.parent.allowDataCompression?u.parent.engineModule.actualData:u.parent.engineModule.data;k<ut.length;k++)delete(t=ut[k]).__index,void 0===f[i.toString()]&&c.push(t),i++;c=c.concat(v);d={currentData:u.drillThroughGrid.dataSource,previousData:s,previousPosition:l,cancel:!1};u.parent.trigger(el,d);d.cancel||(u.parent.setProperties({dataSourceSettings:{dataSource:c}},!0),u.engine.updateGridData(u.parent.dataSourceSettings),u.parent.pivotValues=u.engine.pivotValues)}u.parent.actionObj.actionName="Records updated";ft={editInfo:{type:u.drillThroughGrid.editSettings.mode,action:"Update",currentData:u.drillThroughGrid.dataSource,previousData:s,previousPosition:l}};u.parent.actionObj.actionInfo=ft}u.isUpdated=!1;u.isEdited=!1;f={}},isModal:!0,visible:!0,showCloseIcon:!0,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:this.parent.isAdaptive?"100%":"60%",position:{X:"center",Y:"center"},closeOnEscape:!this.parent.editSettings.allowEditing,target:document.body,close:this.removeDrillThroughDialog.bind(this)}),this.dialogPopUp.isStringTemplate=!0,this.dialogPopUp.appendTo(c),n.setStyleAttribute(this.dialogPopUp.element,{visibility:"visible"}),this.parent.editSettings.allowEditing&&(this.drillthroughKeyboardModule=new n.KeyboardEvents(this.dialogPopUp.element,{keyAction:this.drillthroughKeyActionHandler.bind(this),keyConfigs:{escape:"escape"},eventName:"keydown"}))}catch(t){this.parent.actionFailureMethod(t)}},t.prototype.editCell=function(t,i){var u=this,c=this.parent.gridSettings.allowResizing,h=t.currentCell.actualText.toString(),e=Number(Object.keys(t.currentCell.indexObject)),f,s;t.currentTarget.firstElementChild.style.display="none";var l=Number(t.rawData[0][h]),a=r.frameHeaderWithKeys(t.rawData[t.rawData.length-1]),o=t.rawData[t.rawData.length-1],v={editInfo:{type:"Inline editing",action:"update",data:i}};this.parent.actionObj.actionInfo=v;f=new y.NumericTextBox({value:l,enableRtl:this.parent.enableRtl,enabled:!0,format:"####.##",locale:this.parent.locale,cssClass:this.parent.cssClass,change:function(){var i=n.isNullOrUndefined(f.value)?0:f.value,r=t.currentCell.indexObject[e];t.rawData[0][h]=i;u.parent.engineModule.data[r]=t.rawData[0]},blur:function(){var t={currentData:[o],previousData:[a],previousPosition:[o.index],cancel:!1},n,i;(u.parent.trigger(el,t),t.cancel)||("Server"===u.parent.dataSourceSettings.mode?(n={},n[e]=e,i=[o],u.parent.getEngine("updateRawData",null,null,null,null,null,null,null,{addedData:[],removedData:[],updatedData:i,indexObject:n})):(u.parent.setProperties({dataSourceSettings:{dataSource:u.parent.engineModule.data}},!0),u.engine.updateGridData(u.parent.dataSourceSettings),u.parent.pivotValues=u.engine.pivotValues,u.parent.gridSettings.allowResizing=c))}});s=n.createElement("input",{id:this.parent.element.id+"_inputbox"});t.currentTarget.appendChild(s);f.appendTo(s);t.currentCell.value=f.value;f.focusIn();this.parent.gridSettings.allowResizing=!1},t.prototype.updateData=function(t){for(var i=0,u=this.parent.allowDataCompression?this.parent.engineModule.actualData:this.parent.engineModule.data;i<t.length;){for(var f=Object.keys(t[i]),r=0,e=[];r<f.length;)n.isNullOrUndefined(this.parent.engineModule.fieldKeys[f[r]])||(e[this.parent.engineModule.fieldKeys[f[r]]]=t[i][f[r]]),r++;u[Number(t[i].__index)]=e;i++}this.parent.allowDataCompression?this.parent.engineModule.actualData=u:this.parent.engineModule.data=u},t.prototype.removeDrillThroughDialog=function(){this.dialogPopUp&&!this.dialogPopUp.isDestroyed&&(this.parent.actionObj.actionName="Drill-through closed",this.parent.actionObj.actionName&&this.parent.actionCompleteMethod(),this.dialogPopUp.destroy());var t=document.getElementById(this.parent.element.id+"_drillthrough");t&&n.remove(t);document.getElementById(this.parent.element.id+"_drillthroughgrid_ccdlg")&&n.remove(document.getElementById(this.parent.element.id+"_drillthroughgrid_ccdlg"))},t.prototype.createDrillThroughGrid=function(t,i,r){var u=this,s=n.createElement("div",{id:this.parent.element.id+"_drillthroughbody",className:"e-drillthrough-body"}),e=n.createElement("div",{id:this.parent.element.id+"_drillthroughbodyheader",className:"e-drillthrough-body-header-container"}),h,l,o,f;if((""!==t.rowHeaders&&(e.innerHTML="<span class="+wo+"><span class="+po+">"+this.parent.localeObj.getConstant("row")+"<\/span> : <span class="+bo+">"+t.rowHeaders+"<\/span><\/span>"),""!==t.columnHeaders&&(e.innerHTML=e.innerHTML+"<span class="+wo+"><span class="+po+">"+this.parent.localeObj.getConstant("column")+"<\/span> : <span class="+bo+">"+t.columnHeaders+"<\/span><\/span>"),""!==t.value)&&(h=t.currentCell.formattedText,"0"!==h&&(e.innerHTML=e.innerHTML+"<span class="+wo+"><span class="+po+">"+r+"<\/span> : <span class="+bo+">"+h+"<\/span><\/span>")),l=["ColumnChooser"],this.parent.editSettings.allowEditing&&(l=this.parent.editSettings.allowCommandColumns?["ColumnChooser","Add"]:"Batch"===this.parent.editSettings.mode?["ColumnChooser","Add","Delete","Update","Cancel"]:"Dialog"===this.parent.editSettings.mode?["ColumnChooser","Add","Edit","Delete"]:["ColumnChooser","Add","Edit","Delete","Update","Cancel"]),o=n.createElement("div",{id:this.parent.element.id+"_drillthroughgrid",className:"e-drillthrough-grid"}),c.Grid.Inject(c.Selection,c.Reorder,c.Resize,c.Toolbar,c.ColumnChooser),this.drillThroughGrid=new c.Grid({cssClass:this.parent.cssClass,gridLines:"Default",allowResizing:!0,allowReordering:!0,showColumnChooser:!0,enableHover:!1,toolbar:l,columns:t.gridColumns,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableVirtualization:!this.parent.editSettings.allowEditing,allowPaging:this.parent.editSettings.allowEditing,pageSettings:{pageSize:20},rowHeight:this.parent.gridSettings.rowHeight,height:"100%"}),"olap"===this.parent.dataType&&this.formatData(i),f=this,this.parent.trigger("beginDrillThrough",{cellInfo:t,gridObj:this.drillThroughGrid,type:"editing"}),this.drillThroughGrid.allowExcelExport&&c.Grid.Inject(c.ExcelExport),this.drillThroughGrid.allowPdfExport&&c.Grid.Inject(c.PdfExport),this.parent.editSettings.allowEditing){c.Grid.Inject(c.Edit,c.Page);try{this.drillThroughGrid.editSettings=this.parent.editSettings;this.drillThroughGrid.actionBegin=function(n){var t="save"===n.requestType?na:"add"===n.requestType?ta:"delete"===n.requestType?ia:"";u.parent.actionObj.actionName=t;u.parent.actionObj.actionName&&u.parent.actionBeginMethod()};this.parent.editSettings.allowCommandColumns?(this.drillThroughGrid.editSettings.mode="Normal",this.drillThroughGrid.editSettings.allowEditOnDblClick=!1,c.Grid.Inject(c.CommandColumn),this.drillThroughGrid.columns.push({headerText:this.parent.localeObj.getConstant("manageRecords"),width:160,showInColumnChooser:!1,commands:[{type:"Edit",buttonOption:{iconCss:" e-icons e-edit",cssClass:"e-flat"+(this.parent.cssClass?" "+this.parent.cssClass:"")}},{type:"Delete",buttonOption:{iconCss:"e-icons e-delete",cssClass:"e-flat"+(this.parent.cssClass?" "+this.parent.cssClass:"")}},{type:"Save",buttonOption:{iconCss:"e-icons e-update",cssClass:"e-flat"+(this.parent.cssClass?" "+this.parent.cssClass:"")}},{type:"Cancel",buttonOption:{iconCss:"e-icons e-cancel-icon",cssClass:"e-flat"+(this.parent.cssClass?" "+this.parent.cssClass:"")}}]})):this.drillThroughGrid.editSettings.allowEditOnDblClick=this.parent.editSettings.allowEditOnDblClick;this.drillThroughGrid.columns.push({field:"__index",visible:!1,isPrimaryKey:!0,type:"string",showInColumnChooser:!1,defaultValue:"0",validationRules:{required:!0}})}catch(t){this.parent.actionFailureMethod(t)}this.drillThroughGrid.actionComplete=function(n){"batchsave"!==n.requestType&&"save"!==n.requestType&&"delete"!==n.requestType||(f.isUpdated=!0);"batchsave"!==n.requestType&&"save"!==n.requestType||"edit"!==n.action||(f.isEdited=!0);u.parent.actionObj.actionName=u.parent.getActionCompleteName();var t={editInfo:{type:u.drillThroughGrid.editSettings.mode,action:n.requestType,data:i}};u.parent.actionObj.actionInfo=t;u.parent.actionObj.actionName&&u.parent.actionCompleteMethod();("Normal"===f.drillThroughGrid.editSettings.mode&&"save"===n.requestType&&f.drillThroughGrid.element.querySelectorAll(".e-tbar-btn:hover").length>0&&!f.parent.editSettings.allowCommandColumns||"batchsave"===n.requestType)&&f.dialogPopUp.hide()};this.drillThroughGrid.beforeBatchSave=function(){f.isUpdated=!0}}else c.Grid.Inject(c.VirtualScroll);return document.body.appendChild(o),this.drillThroughGrid.isStringTemplate=!0,this.drillThroughGrid.appendTo(o),s.appendChild(e),s.appendChild(o),s},t.prototype.frameGridColumns=function(t){var f,s,l,h,a,i,w;this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule;var v="olap"===this.parent.dataType?t[0]?Object.keys(t[0]):[]:Object.keys(this.engine.fieldList),c=[],u={};if(this.parent.dataSourceSettings.formatSettings.length>0)for(f=0;f<this.parent.dataSourceSettings.formatSettings.length;f++)u[this.parent.dataSourceSettings.formatSettings[f].name]=this.parent.dataSourceSettings.formatSettings[f].format;if("olap"===this.parent.dataType)for(s=0,l=v;s<l.length;s++){var y=(i=l[s]).replace(/_x005B_|_x005D_|_x0024_/g,"").replace(/_x0020_/g," ").replace("].[","").split(".").reverse(),b="[Measures].["+y[0]+"]",r=this.engine&&this.engine.fieldList?this.engine.fieldList[b]:null,k=r&&"number"===r.type?"number":"string",d=r?n.isNullOrUndefined(u[r.id])?"Currency"===r.formatString?"C":"Percent"===r.formatString?"P":r.format?r.format:null:u[r.id]:n.isNullOrUndefined(u[i])?null:u[i];c.push({field:i.replace(/_x005B_|_x0020_|_x005D_|_x0024_/g,"").replace("].[","").split(".").reverse().join(""),headerText:y.join("."),width:120,visible:!0,validationRules:{required:!0},format:d,type:k})}else for(h=0,a=v;h<a.length;h++)if(i=a[h],"CalculatedField"!==this.engine.fieldList[i].aggregateType){var e="",o=null,p=!("date"!==this.engine.fieldList[i].type&&"datetime"!==this.engine.fieldList[i].type||!(this.isDateFieldExist(i)||t[0]&&t[0][i]&&-1===t[0][i].toString().indexOf(" ")));"number"===this.engine.fieldList[i].type?(e="numericedit",o="number"):"date"===this.engine.fieldList[i].type&&p?(e="datepickeredit",o="date"):"datetime"===this.engine.fieldList[i].type&&p?(e="datetimepickeredit",o="date"):e="defaultedit";this.parent.engineModule.formatFields[i]&&(o=this.parent.engineModule.formatFields[i].type);w=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(this.engine.fieldList[i].caption):this.engine.fieldList[i].caption;c.push({field:i,headerText:w,width:120,visible:this.engine.fieldList[i].isSelected,validationRules:{required:!0},editType:e,format:n.isNullOrUndefined(u[i])?void 0:u[i],type:n.isNullOrUndefined(u[i])?"string":o})}return c},t.prototype.isDateFieldExist=function(n){for(var t=0;t<this.parent.dataSourceSettings.formatSettings.length;t++)if(this.parent.dataSourceSettings.formatSettings[t].name===n&&this.parent.dataSourceSettings.formatSettings[t].type.indexOf("date")>-1)return!0;for(t=0;t<this.parent.dataSourceSettings.fieldMapping.length;t++)if(this.parent.dataSourceSettings.fieldMapping[t].name===n&&this.parent.dataSourceSettings.fieldMapping[t].dataType&&this.parent.dataSourceSettings.fieldMapping[t].dataType.indexOf("date")>-1)return!0;return!1},t.prototype.formatData=function(n){for(var t=0;t<n.length;){for(var f=n[t],r=Object.keys(n[t]),u={},i=0;i<r.length;)u[r[i].replace(/_x005B_|_x0020_|_x005D_|_x0024_/g,"").replace("].[","").split(".").reverse().join("")]=f[r[i]],i++;n[t]=u;t++}},t.prototype.dataWithPrimarykey=function(n,t,i){for(var u=this.indexString.length>0?this.indexString:Object.keys(n.currentCell.indexObject),e=t,r=0,f=0,o=e;f<o.length;f++)o[f].__index=u[r],i[u[r].toString()]=Number(u[r]),r++;return e},t.prototype.drillthroughKeyActionHandler=function(n){"escape"===n.action&&this.processClose(n)},t.prototype.processClose=function(t){var u=t.target,i,s,r,f,e;if(u&&n.closest(u,".e-popup.e-popup-open")&&(i=n.getInstance(n.closest(u,".e-popup.e-popup-open"),o.Dialog),i&&!i.closeOnEscape)){if(s=i.element.getAttribute("data-fieldName"),i.hide(),this.parent.element)for(r=0,f=[].slice.call(this.parent.element.querySelectorAll(".e-pivot-button"));r<f.length;r++)if(e=f[r],e.getAttribute("data-uid")===s){e.focus();break}return void t.preventDefault()}},t.prototype.destroy=function(){this.parent.isDestroyed||this.drillthroughKeyboardModule&&!this.drillthroughKeyboardModule.isDestroyed&&(this.drillthroughKeyboardModule.destroy(),this.drillthroughKeyboardModule=null)},t}(),sy=function(){function t(n){this.parent=n;this.drillThroughDialog=new oy(this.parent);this.addInternalEvents()}return t.prototype.getModuleName=function(){return"drillThrough"},t.prototype.addInternalEvents=function(){this.parent&&this.parent.on(cr,this.wireEvents,this)},t.prototype.wireEvents=function(){this.unWireEvents();this.parent&&this.parent.element&&n.EventHandler.add(this.parent.element,"dblclick",this.mouseClickHandler,this)},t.prototype.unWireEvents=function(){this.parent.isDestroyed||this.parent&&this.parent.element&&!this.parent.isDestroyed&&n.EventHandler.remove(this.parent.element,"dblclick",this.mouseClickHandler)},t.prototype.mouseClickHandler=function(t){var i,r,f,u;this.parent&&(i=t.target,r=null,(i.classList.contains("e-stackedheadercelldiv")||i.classList.contains("e-headercelldiv")||i.classList.contains("e-stackedheadertext")||i.classList.contains("e-headertext")?r=n.closest(i.parentElement,"th"):i.classList.contains("e-cellvalue")?r=i.parentElement:(i.classList.contains("e-headercell")||i.classList.contains("e-rowcell"))&&(r=i),r&&this.parent.pivotValues.length>0&&this.parent.dataSourceSettings.values.length>0&&(this.parent.allowDrillThrough||this.parent.editSettings.allowEditing)&&r.classList.contains("e-valuescontent"))&&(f=parseInt(r.getAttribute("aria-colindex"),10)-1,u=Number(r.getAttribute("index")),n.isNullOrUndefined(this.parent.pivotValues[u])||n.isNullOrUndefined(this.parent.pivotValues[u][f])||this.executeDrillThrough(this.parent.pivotValues[u][f],u,f,r)))},t.prototype.executeDrillThrough=function(t,i,r,u){var b,e,a,s,v,p,h,w,d;this.parent.drillThroughElement=u;this.parent.drillThroughValue=t;var f="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,c="",l="",o=[];if(!n.isNullOrUndefined(t.rowHeaders)&&!n.isNullOrUndefined(t.columnHeaders)){if("olap"===this.parent.dataType){if(e=(b="row"===this.parent.dataSourceSettings.valueAxis?f.tupRowInfo[t.rowOrdinal]:f.tupColumnInfo[t.colOrdinal])?f.getUniqueName(b.measureName):t.actualText,f.fieldList[e]&&f.fieldList[e].isCalculatedField)return void this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),this.parent.localeObj.getConstant("drillError"));c=f.fieldList[e||t.actualText].caption;l=f.fieldList[e||t.actualText].aggregateType;try{this.parent.olapEngineModule.getDrillThroughData(t,this.parent.maxRowsInDrillThrough);o=JSON.parse(f.gridJSON)}catch(t){return this.parent.olapEngineModule.errorInfo&&this.parent.actionFailureMethod(this.parent.olapEngineModule.errorInfo),this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),this.parent.olapEngineModule.errorInfo?this.parent.olapEngineModule.errorInfo:f.gridJSON),void(this.parent.olapEngineModule.errorInfo=void 0)}}else if(c=f.fieldList[t.actualText.toString()]?f.fieldList[t.actualText.toString()].caption:t.actualText.toString(),l=f.fieldList[t.actualText]?f.fieldList[t.actualText].aggregateType:"","Server"===this.parent.dataSourceSettings.mode)this.parent.getEngine("fetchRawData",null,null,null,null,null,null,{rowIndex:i,columnIndex:r});else if(this.parent.allowDataCompression)for(a=Object.keys(t.indexObject),this.drillThroughDialog.indexString=[],s=0,v=a;s<v.length;s++)for(var g=v[s],y=0,k=this.parent.engineModule.groupRawIndex[Number(g)];y<k.length;y++)p=k[y],o.push(this.parent.engineModule.actualData[p]),this.drillThroughDialog.indexString.push(p.toString());else for(h=0,w=a=Object.keys(t.indexObject);h<w.length;h++)d=w[h],o.push(this.parent.engineModule.data[Number(d)]);"Server"!==this.parent.dataSourceSettings.mode&&this.triggerDialog(c,l,o,t,u)}},t.prototype.frameData=function(n){for(var r,t=0,i=0,u=[];i<n.rawData.length;){for(r={};t<n.gridColumns.length;)r[n.gridColumns[t].field]="Server"===this.parent.dataSourceSettings.mode?n.rawData[i][-1!==this.parent.engineModule.fields.indexOf(n.gridColumns[t].field)?this.parent.engineModule.fields.indexOf(n.gridColumns[t].field):0]:n.rawData[i][this.parent.engineModule.fieldKeys[n.gridColumns[t].field]],t++;u.push(r);i++;t=0}return n.rawData=u,n},t.prototype.triggerDialog=function(t,i,r,u,f){var e,s,o,h;this.parent&&(e="CalculatedField"===i?t.toString():""!==i?this.parent.localeObj.getConstant(i)+" "+this.parent.localeObj.getConstant("of")+" "+t:t,e=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(e):e,s="row"===this.parent.dataSourceSettings.valueAxis?this.parent.getRowText(Number(f.getAttribute("index")),0):""===u.rowHeaders?"":u.rowHeaders.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - "),o={currentTarget:f,currentCell:u,rawData:r,rowHeaders:s,columnHeaders:""===u.columnHeaders?"":u.columnHeaders.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - "),value:e+"("+u.formattedText+")",gridColumns:this.drillThroughDialog.frameGridColumns(r),cancel:!1},"CSV"===this.parent.dataSourceSettings.type&&(o=this.frameData(o)),h=this,this.parent.trigger("drillThrough",o,function(n){o.cancel||h.drillThroughDialog.showDrillThroughDialog(n,e)}))},t.prototype.destroy=function(){this.unWireEvents();this.drillThroughDialog&&(this.drillThroughDialog.destroy(),this.drillThroughDialog=null)},t}();const l=ejdashboard.charts;var fo=function(){function t(n){this.headerColl={};this.maxLevel=0;this.columnGroupObject={};this.selectedLegend=0;this.chartSeriesInfo={};this.measurePos=-1;this.measuresNames={};this.accumulationType=["Pie","Pyramid","Doughnut","Funnel"];this.isChartInitial=!0;this.parent=n}return t.prototype.getModuleName=function(){return"pivotChart"},t.prototype.loadChart=function(t,i){var pt,oi,d,f,h,w,ot,li,ii,ai,di,a,gi,st,ht,ui,v,fi,k,ur,yt,fr,ei,ct;if(this.parent=t,this.measuresNames={},this.engineModule="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.dataSourceSettings=this.parent.dataSourceSettings,this.chartSettings=i,!("olap"===t.dataType?""!==t.dataSourceSettings.url&&!t.olapEngineModule.isEmptyData&&t.olapEngineModule.tupColumnInfo.length>0&&t.olapEngineModule.tupRowInfo.length>0&&(!n.isNullOrUndefined(t.olapEngineModule.colMeasurePos)||!n.isNullOrUndefined(t.olapEngineModule.rowMeasurePos)):"Server"===this.parent.dataSourceSettings.mode?!n.isNullOrUndefined(t.dataSourceSettings.url)&&""!==t.dataSourceSettings.url&&t.dataSourceSettings.values.length>0&&!t.engineModule.isEmptyData:t.dataSourceSettings.values.length>0&&t.dataSourceSettings.dataSource&&(t.dataSourceSettings.dataSource.length>0||t.dataSourceSettings.dataSource instanceof nt.DataManager)&&!t.engineModule.isEmptyData))return this.parent.chart?(this.parent.element.querySelector(".e-chart")?(this.parent.chart.series=[],this.parent.chart.rows=[],this.parent.chart.primaryXAxis.title="",this.parent.chart.primaryYAxis.title="",this.parent.chart.primaryXAxis.multiLevelLabels=[],this.parent.chart.primaryYAxis.multiLevelLabels=[],this.parent.chart.axes.length>0&&(this.parent.chart.axes[0].title=""),this.parent.chart.primaryXAxis.zoomFactor=n.isNullOrUndefined(this.parent.chartSettings.primaryXAxis.zoomFactor)?1:this.parent.chartSettings.primaryXAxis.zoomFactor):this.parent.element.querySelector(".e-accumulationchart")&&(this.parent.chart.series[0].dataSource=[{}],this.parent.chart.series[0].dataLabel={}),void this.parent.chart.refresh()):(this.parent.appendChartElement(),this.parent.enableVirtualization&&this.isChartInitial&&(this.isChartInitial=!1,this.parent.onContentReady()),void this.parent.notify(cr,{}));for(!this.parent.chart&&(this.parent.element.querySelector(".e-chart")||this.parent.element.querySelector(".e-accumulationchart"))&&n.remove(n.select("#"+this.parent.element.id+"_chart",this.parent.element)),this.measureList=this.chartSettings.enableMultipleAxis&&this.accumulationType.indexOf(i.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type?this.dataSourceSettings.values.map(function(n){return n.name}):[""===i.value?this.dataSourceSettings.values[0].name:i.value],pt=0,oi=this.dataSourceSettings.values;pt<oi.length;pt++)d=(h=oi[pt]).name.replace(/[^A-Z0-9]+/gi,"_"),this.measuresNames[h.name]=d,this.measuresNames[d]=h.name,"Polar"!==this.chartSettings.chartSeries.type&&"Radar"!==this.chartSettings.chartSeries.type||(this.measuresNames[h.caption?h.caption:h.name]=h.name);this.columnGroupObject={};this.accEmptyPoint=!1;f=this.engineModule.pivotValues;this.currentMeasure=i.enableMultipleAxis&&this.accumulationType.indexOf(i.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type?this.measureList[0]:(""===i.value||0===this.dataSourceSettings.values.filter(function(n){return n.name===i.value}).length)&&this.dataSourceSettings.values.length>0?this.dataSourceSettings.values[0].name:i.value;var wt,bt,y,er=this.getColumnTotalIndex(f),yi=Object.keys(f),lt={},p=0,s=-.5;this.headerColl={};this.maxLevel=0;var c,pi={},si="",kt="",ft="";this.chartSeriesInfo={};this.selectedLegend=0;for(var dt=!1,gt={},g=!1,tt=this.parent.dataSourceSettings.valueSortSettings.headerDelimiter,hi=0,wi=this.dataSourceSettings.values;hi<wi.length;hi++)gt[d=(h=wi[hi]).name]=h.caption?h.caption:d,gt[h.caption?h.caption:d]=d;"olap"===this.parent.dataType&&(w=[],pi=this.groupHierarchyWithLevels(f,w),si=w[w.length-1],ft=kt=this.measurePos===w.length-1&&w.length>1?w[w.length-2]:si);for(var et=0,at=0,ni=0,bi=[],ti=0,or=yi.length;ti<or;ti++){var o=Number(yi[ti]),ci=void 0,u=void 0;if((u=f[o]&&f[o]["Tabular"===this.parent.gridSettings.layout?this.parent.engineModule.rowMaxLevel:0],"Tabular"===this.parent.gridSettings.layout&&"pivot"===this.parent.dataType)&&(ot=u&&f[+o][u.level-1],li=ot&&ot.valueSort&&this.engineModule.fieldList[ot.valueSort.axis],!li||li.showSubTotals&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals||-1!==bi.indexOf(ot.actualText)||(u=f[+o][0],bi.push(ot.actualText),ti--)),u&&u.level,!n.isNullOrUndefined(f[+o])){var sr="Tabular"===this.parent.gridSettings.layout?this.parent.engineModule.rowMaxLevel:0,it=f[+o][sr],rt=it&&it.valueSort&&!n.isNullOrUndefined(it.valueSort.levelName)?it.valueSort.levelName.toString().split(tt):void 0;if(g=!1,rt&&"Grand Total"!==rt[0]&&((i.enableMultipleAxis&&this.accumulationType.indexOf(i.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type||rt.indexOf(gt[this.currentMeasure])>-1)&&(g=!0),!g)){for(ii=0,ai=rt;ii<ai.length;ii++)if(gt[ir=ai[ii]]){g=!0;break}g=!g}if(it&&"row"===it.axis&&(0===this.dataSourceSettings.rows.length||"grand sum"!==it.type&&g)){if("Tabular"!==this.parent.gridSettings.layout&&u.isSum)continue;var l="olap"===this.parent.dataType?this.engineModule.tupRowInfo[u.ordinal]:void 0,ki=-1,ut=u.level;if("olap"===this.parent.dataType)dt="[Measures]"===u.hierarchy?dt:this.isAttributeDrill(u.hierarchy,l.drillInfo),ft=ft===kt||"[Measures]"===u.hierarchy||u.isNamedSet||this.engineModule.fieldList[u.hierarchy]&&!this.engineModule.fieldList[u.hierarchy].hasAllMember?kt:ft,ki=l.drillInfo.length-1,3===u.memberType||l.measureName&&l.measureName!==this.dataSourceSettings.values[0].name||(lt=0===(p=(bt=void 0===bt?u.levelUniqueName:bt)===u.levelUniqueName?0:p)?{}:lt,p=y&&bt!==u.levelUniqueName?y.hierarchy===u.hierarchy?p+(u.level-y.level):n.isNullOrUndefined(lt[u.levelUniqueName])?pi[u.hierarchy].start:lt[u.levelUniqueName]:p,lt[u.levelUniqueName]=p,ut=p,s+=!y||ft!==y.hierarchy||y.isDrilled&&y.hasChild?0:1,ft=dt?u.hierarchy:kt,wt=p,y=u);else if("value"!==u.type){if("Tabular"===this.parent.gridSettings.layout){for(di=u.valueSort.levelName.split(tt),a=u.formattedText.split(" "),ci=r.isMemberDrilled(u,di,this.parent.dataSourceSettings.drilledMembers),gi=rt.length-2!=this.parent.engineModule.rowMaxLevel-1?rt.length-2:this.parent.engineModule.rowMaxLevel-1,st=0;st<=this.parent.engineModule.rowMaxLevel;st++)if(this.headerColl[s]&&this.headerColl[s][st]){if(u.isSum){if(u.level>0){s-=u.level===this.parent.engineModule.rowMaxLevel-1?et-1:at-1;u.formattedText=!this.parent.dataSourceSettings.showSubTotals||!this.parent.dataSourceSettings.showRowSubTotals&&this.parent.dataSourceSettings.showColumnSubTotals?u.formattedText:a.length>2?a.slice(0,a.length-1).join(" "):a[0];u.hasChild=!0;break}s-=ni-1;u.formattedText=!this.parent.dataSourceSettings.showSubTotals||!this.parent.dataSourceSettings.showRowSubTotals&&this.parent.dataSourceSettings.showColumnSubTotals?u.formattedText:a.length>2?a.slice(0,a.length-1).join(" "):a[0];u.hasChild=!0;break}if(this.headerColl[s][st]&&rt[gi]!==this.headerColl[s][st].name){s++;break}}u.isSum||(et++,at++,ni++);u.isDrilled=this.parent.dataSourceSettings.expandAll?!ci:!!ci}else void 0===wt||wt<ut||s++;wt=ut}this.maxLevel=ut>this.maxLevel?ut:this.maxLevel;var nr="olap"===this.parent.dataType?u.formattedText:u.actualText?u.actualText.toString():u.formattedText.toString(),ri=this.engineModule.fieldList[this.currentMeasure],tr=0===this.parent.dataSourceSettings.rows.length?this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(ri.aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+(n.isNullOrUndefined(ri.caption)?ri.name:ri.caption):u.formattedText?u.formattedText.toString():nr,hr=u.hasChild&&!u.isNamedSet?(u.isDrilled?" - ":" + ")+tr:tr,ir=l?l.uNameCollection:u.valueSort.levelName.toString(),lr={name:nr,text:hr,hasChild:u.hasChild,isDrilled:u.isDrilled,levelName:ir,level:ut,fieldName:u.valueSort.axis?u.valueSort.axis.toString():"",rowIndex:+o,colIndex:0,cell:u};("olap"===this.parent.dataType?3!==u.memberType:"value"!==u.type)&&(this.headerColl[s]||(this.headerColl[s]={}),this.headerColl[s][ut]=lr,"Tabular"===this.parent.gridSettings.layout&&(u.isSum&&(s+=u.level>0?u.level===this.parent.engineModule.rowMaxLevel-1?et-1:at-1:ni-1),0===u.level?(at=0,et=0,ni=0):u.level===this.parent.engineModule.rowMaxLevel-1?et=0:u.level<this.parent.engineModule.rowMaxLevel-1&&0!==u.level&&(et=0,at=0)));var ar="Tabular"===this.parent.gridSettings.layout?f[+o]:f[o],rr=Object.keys(ar),b=void 0;if("olap"===this.parent.dataType)c=3!==u.memberType?u:c;else if(c="value"!==u.type?u:c,"value"!==u.type)c=u;else if(ht=u&&u.valueSort&&u.valueSort.levelName&&u.valueSort.levelName.toString().split(tt),ui=void 0,ht&&ht.length>0&&(ht.splice(ht.length-1,1),ui=ht.join(tt)),!(this.parent.dataSourceSettings.valueIndex<=0)&&(!this.engineModule.valueAxis||this.dataSourceSettings.rows.length!==this.engineModule.measureIndex)&&!n.isNullOrUndefined(c.valueSort)&&ui!==c.valueSort.levelName)for(v=o;v>-1;)f[v]&&f[v][0]&&f[v][0].valueSort&&f[v][0].valueSort.levelName===ui&&(c=f[v][0],v=0),v--;for(fi="Tabular"===this.parent.gridSettings.layout?this.parent.engineModule.rowMaxLevel:0;fi<rr.length;fi++){var vr=rr[fi],vt=Number(vr),e=f[+o][vt],yr=!n.isNullOrUndefined(e.rowHeaders)||0===this.dataSourceSettings.rows.length,vi="olap"===this.parent.dataType&&l&&l.measureName?l.measureName:e.actualText;if(("olap"!==this.parent.dataType||!e.isGrandSum)&&!er[e.colIndex]&&"value"===e.axis&&"header"!==u.type&&""!==vi&&(i.enableMultipleAxis&&this.accumulationType.indexOf(i.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type||vi===this.currentMeasure)){if(n.isNullOrUndefined(u.members)&&(u.members=[]),"olap"===this.parent.dataType?si!==u.hierarchy&&!dt||(3===u.memberType&&b?ki!==this.measurePos||b.isDrilled&&b.hasChild:u.isDrilled&&u.hasChild):("value"===u.type&&b?!n.isNullOrUndefined(b.members)&&b.hasChild&&b.isDrilled:u.hasChild&&u.isDrilled)||!yr)break;if("olap"===this.parent.dataType&&!0===e.isSum&&"row"===this.parent.dataSourceSettings.valueAxis)continue;k="";"olap"===this.parent.dataType?k=e.columnHeaders.toString().split(/~~|::/).join(" - "):(ur=e.columnHeaders.toString().split(tt),k=r.formatChartHeaders(ur,this,!0,e));yt="";"olap"===this.parent.dataType?yt=e.rowHeaders.toString().split(/~~|::/).join(" - "):(fr=e.rowHeaders.toString().split(tt),yt=r.formatChartHeaders(fr,this,!1,e));ei=k+" | "+vi;this.chartSeriesInfo[k]={uniqueName:k,caption:e.hierarchyName&&e.hierarchyName.toString().split(tt).join(" - "),colorIndex:[]};this.chartSeriesInfo[this.chartSeriesInfo[k].caption]=this.chartSeriesInfo[k];ct="pivot"===this.parent.dataType&&this.engineModule.aggregatedValueMatrix[o]&&!n.isNullOrUndefined(this.engineModule.aggregatedValueMatrix[o][vt])?Number(this.engineModule.aggregatedValueMatrix[o][vt]):n.isNullOrUndefined(e.value)?e.value:Number(e.value);0===(ct=ct===1/0?null:ct)&&(this.accEmptyPoint=!0);this.columnGroupObject[ei]?this.columnGroupObject[ei].push({x:0===this.dataSourceSettings.rows.length?u.formattedText:yt,y:ct,rIndex:+o,cIndex:vt}):this.columnGroupObject[ei]=[{x:0===this.dataSourceSettings.rows.length?u.formattedText:yt,y:ct,rIndex:+o,cIndex:vt}]}b=c}}}}this.refreshChart()},t.prototype.refreshChart=function(){var t,a,d,r,f,e,nt,o,it,s;this.chartSeries=[];var u=0,p={},h=Object.keys(this.columnGroupObject);this.persistSettings=JSON.parse(this.parent.getChartSettings()).chartSettings;for(var w=this.persistSettings.palettes&&this.persistSettings.palettes.length>0?this.persistSettings.palettes:l.getSeriesColor(this.chartSettings.theme),rt=this.parent.chartSettings.columnDelimiter?this.parent.chartSettings.columnDelimiter:"-",b=this.parent.chartSettings.columnHeader&&""!==this.parent.chartSettings.columnHeader?this.parent.chartSettings.columnHeader.split(rt).join(" - "):"",c=this.chartSettings.chartSeries?this.chartSettings.chartSeries.type:void 0,k={},i=0;i<this.parent.dataSourceSettings.values.length;i++)k[this.parent.dataSourceSettings.values[i].name]=n.isNullOrUndefined(this.parent.dataSourceSettings.values[i].caption)?void 0:this.parent.dataSourceSettings.values[i].caption;if(this.accumulationType.indexOf(c)>-1&&h.length>0)this.currentColumn=h.indexOf(b+" | "+this.currentMeasure)>-1&&void 0!==b?b+" | "+this.currentMeasure:h[0],t={},t=this.persistSettings.chartSeries?this.frameChartSeries(this.persistSettings.chartSeries):t,(n.isNullOrUndefined(t.palettes)||0===t.palettes.length)&&!n.isNullOrUndefined(this.persistSettings.palettes)&&this.persistSettings.palettes.length>0&&(t.palettes=this.persistSettings.palettes),t.dataSource=this.columnGroupObject[this.currentColumn],t.xName="x",t.yName="y",this.persistSettings.chartSeries&&this.persistSettings.chartSeries.dataLabel?(t.dataLabel=this.persistSettings.chartSeries.dataLabel,t.dataLabel.name="x"):(t.dataLabel={visible:!0,position:"Outside",name:"x"},this.parent.setProperties({chartSettings:{chartSeries:{dataLabel:{visible:!0,position:"Outside"}}}},!0)),this.accEmptyPoint&&t.emptyPointSettings?t.emptyPointSettings.mode="Zero":this.accEmptyPoint&&(t.emptyPointSettings={mode:"Zero"}),t.name=this.currentColumn,"Doughnut"===c?(t.type="Pie",t.innerRadius=this.chartSettings.chartSeries.innerRadius?this.chartSettings.chartSeries.innerRadius:"40%"):"Pie"===c&&(t.innerRadius=this.chartSettings.chartSeries.innerRadius?this.chartSettings.chartSeries.innerRadius:"0"),this.chartSeries=this.chartSeries.concat(t);else for(a=0,d=h;a<d.length;a++){for(r=d[a],t={},t=this.persistSettings.chartSeries?this.frameChartSeries(this.persistSettings.chartSeries):t,!n.isNullOrUndefined(t.palettes)&&t.palettes.length>0&&(n.isNullOrUndefined(this.persistSettings.palettes)||0===this.persistSettings.palettes.length)&&(this.chartSettings.palettes=t.palettes),i=0;i<this.columnGroupObject[r].length;i++)f=this.engineModule.fieldList[this.currentMeasure],this.columnGroupObject[r][i].x=0!==this.parent.dataSourceSettings.rows.length||this.chartSettings.showMultiLevelLabels?""===this.columnGroupObject[r][i].x?this.parent.localeObj.getConstant("blank"):this.columnGroupObject[r][i].x:this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(f.aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+(n.isNullOrUndefined(f.caption)?f.name:f.caption);t.dataSource=this.columnGroupObject[r];t.xName="x";t.yName="y";t.visible=!0;for(var tt=void 0,v=void 0,y=void 0,g=(i=0,r.split(" | "));i<g.length;i++)this.measuresNames&&this.measuresNames[g[i]]&&(v=g[i],y=r.split(" | "+v)[0]);this.chartSettings.enableMultipleAxis&&(e=v,tt=y+" | "+(e=n.isNullOrUndefined(k[e])?e:k[e]));(t.name=this.chartSettings.enableMultipleAxis?tt:y,this.chartSettings.showPointColorByMembers&&this.chartSettings.enableMultipleAxis)&&(t.name=y,nt=this.chartSeriesInfo[t.name].caption,t.name=null!=nt?nt:t.name,p[t.name]?(t.fill=p[t.name].color,this.chartSeriesInfo[t.name].colorIndex.push(this.selectedLegend++),t.name=void 0):(u=w[u]?u:0,p[t.name]={name:t.name,color:w[u]},t.fill=w[u++],this.chartSeriesInfo[t.name].colorIndex.push(this.selectedLegend++)));["Radar","Polar"].indexOf(c)<0&&(o=v,t.tooltipMappingName=this.measuresNames[o],t.yAxisName=this.chartSettings.enableMultipleAxis&&"Combined"===this.chartSettings.multipleAxisMode?this.measureList.join("_"):this.measuresNames[o]?this.measuresNames[o]:o);this.persistSettings.chartSeries&&this.persistSettings.chartSeries.emptyPointSettings&&(t.emptyPointSettings=this.persistSettings.chartSeries.emptyPointSettings);t.emptyPointSettings||(t.emptyPointSettings={mode:"Zero"});this.chartSeries=this.chartSeries.concat(t)}it={series:this.chartSeries,cancel:!1};s=this;this.parent.trigger("chartSeriesCreated",it,function(t){t.cancel?(s.element&&n.remove(s.element),s.parent.notify(cr,{})):s.bindChart()})},t.prototype.frameObjectWithKeys=function(n){for(var i=Object.keys(n),t=0,r={};t<i.length;)r[i[t]]=n[i[t]],t++;return r},t.prototype.frameChartSeries=function(n){for(var i=Object.keys(n),t=0,r={};t<i.length;)this.accumulationType.indexOf(this.parent.chartSettings.chartSeries.type)>-1&&["fill","dashArray","width","segmentAxis","drawType","isClosed","segments","stackingGroup","marker","errorBar","trendlines","minRadius","splineType","maxRadius","cardinalSplineTension","columnWidth","columnSpacing","cornerRadius"].indexOf(i[t])>-1||this.accumulationType.indexOf(this.parent.chartSettings.chartSeries.type)<0&&["endAngle","explode","explodeAll","explodeIndex","explodeOffset","gapRatio","groupMode","groupTo","neckHeight","neckWidth","pyramidMode","startAngle","dataLabel","innerRadius"].indexOf(i[t])>-1||(r[i[t]]=n[i[t]]),t++;return r},t.prototype.bindChart=function(){var u,i;this.parent.showWaitingPopup();var f=this.configXAxis(),s=this.configTooltipSettings(),e=this.configLegendSettings(),h=this.configZoomSettings(),r=this.frameAxesWithRows(),t=this.chartSettings.chartSeries.type;"Both"===this.parent.displayOption.view?this.element="Chart"===this.parent.displayOption.primary?this.parent.element.insertBefore(this.element?this.element:n.createElement("div",{className:lt,id:this.parent.element.id+"_chart"}),this.parent.element.querySelector("."+yt)):this.parent.element.appendChild(this.element?this.element:n.createElement("div",{className:lt,id:this.parent.element.id+"_chart"})):this.element||(this.element=this.parent.element.appendChild(n.createElement("div",{className:lt,id:this.parent.element.id+"_chart"})));!this.chartElement&&this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&"Pareto"!==this.chartSettings.chartSeries.type&&(this.parent.element.querySelector("."+lt).innerHTML="",this.chartElement=this.parent.element.querySelector("."+lt).appendChild(n.createElement("div",{className:bf,id:this.parent.element.id+"_chartInner"})));this.parent.element.querySelector("."+bf)&&(this.parent.element.querySelector("."+bf).innerHTML="");this.element.style.minWidth=this.parent.showGroupingBar?this.parent.minWidth?this.parent.minWidth+"px":"400px !important":this.parent.minWidth?this.parent.minWidth+"px":"310px !important";u=this.parent.width.toString();this.parent.showToolbar&&this.parent.grid&&(u=this.parent.getGridWidthAsNumber().toString());i=this.getChartHeight();this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&this.accumulationType.indexOf(t)<0&&"Pareto"!==this.chartSettings.chartSeries.type&&(this.parent.element.querySelector("."+lt).style.height=("auto"===i?this.getChartAutoHeight():i)+"px",this.parent.element.querySelector("."+lt).style.width=u+"px","Polar"!==this.parent.chartSettings.chartSeries.type&&"Radar"!==this.parent.chartSettings.chartSeries.type&&(this.parent.element.querySelector("."+lt).style.overflow="auto",this.parent.element.querySelector("."+lt).style.overflowX="hidden"));this.parent.chart&&("accumulationchart"===this.parent.chart.getModuleName()&&this.accumulationType.indexOf(t)<0||"chart"===this.parent.chart.getModuleName()&&this.accumulationType.indexOf(t)>-1&&"Pareto"!==this.chartSettings.chartSeries.type)&&(this.parent.chart.destroy(),n.select("#"+this.parent.element.id+"_chart",this.parent.element)&&(n.select("#"+this.parent.element.id+"_chart",this.parent.element).innerHTML="",n.select("#"+this.parent.element.id+"_chart",this.parent.element).appendChild(n.createElement("div",{className:bf,id:this.parent.element.id+"_chartInner"}))));!(this.parent.chart&&this.parent.chart.element&&this.parent.element.querySelector(".e-chart")||this.parent.element.querySelector(".e-accumulationchart"))||this.parent.toolbarModule&&this.parent.toolbarModule.isMultiAxisChange?(this.parent.toolbarModule&&this.parent.toolbarModule.isMultiAxisChange&&this.parent.chart&&(this.parent.chart.isDestroyed||this.parent.chart.destroy(),this.parent.chart=void 0,n.select("#"+this.parent.element.id+"_chart",this.parent.element).innerHTML="",n.select("#"+this.parent.element.id+"_chart",this.parent.element).appendChild(n.createElement("div",{className:bf,id:this.parent.element.id+"_chartInner"})),this.parent.toolbarModule.isMultiAxisChange=!1),l.Chart.Inject(l.ColumnSeries,l.StackingColumnSeries,l.RangeColumnSeries,l.BarSeries,l.StackingBarSeries,l.ScatterSeries,l.BubbleSeries,l.LineSeries,l.StepLineSeries,l.SplineSeries,l.SplineAreaSeries,l.MultiColoredLineSeries,l.PolarSeries,l.RadarSeries,l.AreaSeries,l.RangeAreaSeries,l.StackingAreaSeries,l.StepAreaSeries,l.StackingLineSeries,l.MultiColoredAreaSeries,l.ParetoSeries,l.Legend,l.Tooltip,l.Category,l.MultiLevelLabel,l.ScrollBar,l.Zoom,l.Export,l.Crosshair,l.Selection,l.StripLine,l.DataLabel),l.AccumulationChart.Inject(l.PieSeries,l.FunnelSeries,l.PyramidSeries,l.AccumulationDataLabel,l.AccumulationLegend,l.AccumulationTooltip,l.Export),this.parent.chart=this.accumulationType.indexOf(t)>-1?new l.AccumulationChart({series:this.chartSeries.length>0?this.chartSeries:[{}],legendSettings:e,tooltip:s,width:u,height:i.toString(),title:this.chartSettings.title,enableSmartLabels:this.chartSettings.enableSmartLabels,center:this.chartSettings.pieCenter,enableBorderOnMouseMove:this.chartSettings.enableBorderOnMouseMove,highlightMode:this.chartSettings.highlightMode,highlightPattern:this.chartSettings.highlightPattern,titleStyle:this.chartSettings.titleStyle,subTitle:this.chartSettings.subTitle,subTitleStyle:this.chartSettings.subTitleStyle,margin:this.chartSettings.margin,border:this.chartSettings.border,background:this.chartSettings.background,theme:this.chartSettings.theme,selectionMode:this.chartSettings.accumulationSelectionMode,isMultiSelect:this.chartSettings.isMultiSelect,enableExport:this.chartSettings.enableExport,selectedDataIndexes:this.chartSettings.selectedDataIndexes,enableAnimation:this.chartSettings.enableAnimation,useGroupingSeparator:this.chartSettings.useGroupingSeparator,locale:this.parent.locale,enableRtl:this.parent.enableRtl,beforePrint:this.beforePrint.bind(this),animationComplete:this.animationComplete.bind(this),legendRender:this.legendRender.bind(this),textRender:this.textRender.bind(this),pointRender:this.pointRender.bind(this),seriesRender:this.seriesRender.bind(this),chartMouseMove:this.chartMouseMove.bind(this),chartMouseClick:this.chartMouseClick.bind(this),pointMove:this.pointMove.bind(this),pointClick:this.pointClick.bind(this),chartMouseLeave:this.chartMouseLeave.bind(this),chartMouseDown:this.chartMouseDown.bind(this),chartMouseUp:this.chartMouseUp.bind(this),tooltipRender:this.tooltipRender.bind(this),loaded:this.loaded.bind(this),load:this.load.bind(this),resized:this.resized.bind(this)}):new l.Chart({series:this.chartSeries.length>0?this.chartSeries:[{}],legendSettings:e,tooltip:s,zoomSettings:h,axes:"Polar"===t||"Radar"===t?[]:r.axes,rows:"Polar"===t||"Radar"===t?[{}]:"Bar"===t||"StackingBar"===t||"StackingBar100"===t||"Pareto"===t&&this.chartSettings.enableMultipleAxis?[{height:"100%"}]:r.rows,columns:"Polar"===t||"Radar"===t?[{}]:"Bar"===t||"StackingBar"===t||"StackingBar100"===t&&this.chartSettings.enableMultipleAxis?r.columns:[{width:"100%"}],primaryYAxis:"Polar"===t||"Radar"===t?r.axes[0]:{visible:!1},primaryXAxis:f,width:u,height:"Polar"!==this.parent.chartSettings.chartSeries.type&&"Radar"!==this.parent.chartSettings.chartSeries.type&&this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&"Pareto"!==this.parent.chartSettings.chartSeries.type&&this.parent.dataSourceSettings.values.length>0?Number(i)>235*this.parent.dataSourceSettings.values.length+100?isNaN(Number(i))?i.toString():(Number(i)-5).toString():!isNaN(Number(i))||this.parent.dataSourceSettings.values.length>1?(235*this.parent.dataSourceSettings.values.length+100).toString():i.toString():i.toString(),title:this.chartSettings.title,titleStyle:this.chartSettings.titleStyle,subTitle:this.chartSettings.subTitle,subTitleStyle:this.chartSettings.subTitleStyle,margin:this.chartSettings.margin,border:this.chartSettings.border,background:this.chartSettings.background,chartArea:n.isNullOrUndefined(this.persistSettings.chartArea)?this.chartSettings.chartArea:this.persistSettings.chartArea,palettes:this.chartSettings.palettes,theme:this.chartSettings.theme,crosshair:this.chartSettings.crosshair,selectionMode:this.chartSettings.selectionMode,isMultiSelect:this.chartSettings.isMultiSelect,enableExport:this.chartSettings.enableExport,selectedDataIndexes:this.chartSettings.selectedDataIndexes,isTransposed:this.chartSettings.isTransposed,enableAnimation:this.chartSettings.enableAnimation,enableCanvas:this.chartSettings.enableCanvas,useGroupingSeparator:this.chartSettings.useGroupingSeparator,description:this.chartSettings.description,tabIndex:this.chartSettings.tabIndex,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableSideBySidePlacement:this.chartSettings.enableSideBySidePlacement,beforePrint:this.beforePrint.bind(this),animationComplete:this.animationComplete.bind(this),legendRender:this.legendRender.bind(this),textRender:this.textRender.bind(this),pointRender:this.pointRender.bind(this),seriesRender:this.seriesRender.bind(this),chartMouseMove:this.chartMouseMove.bind(this),chartMouseClick:this.chartMouseClick.bind(this),pointMove:this.pointMove.bind(this),pointClick:this.pointClick.bind(this),chartMouseLeave:this.chartMouseLeave.bind(this),chartMouseDown:this.chartMouseDown.bind(this),chartMouseUp:this.chartMouseUp.bind(this),dragComplete:this.dragComplete.bind(this),zoomComplete:this.zoomComplete.bind(this),scrollStart:this.scrollStart.bind(this),scrollEnd:this.scrollEnd.bind(this),scrollChanged:this.scrollChanged.bind(this),tooltipRender:this.tooltipRender.bind(this),legendClick:this.legendClick.bind(this),loaded:this.loaded.bind(this),load:this.load.bind(this),resized:this.resized.bind(this),axisLabelRender:this.axisLabelRender.bind(this),multiLevelLabelClick:this.multiLevelLabelClick.bind(this),axisMultiLabelRender:this.multiLevelLabelRender.bind(this)}),this.parent.chart.isStringTemplate=!0):(this.parent.chart.series=this.chartSeries,this.parent.chart.title=this.parent.chartSettings.title,this.parent.chart.subTitle=this.parent.chartSettings.subTitle,this.parent.chart.background=this.parent.chartSettings.background,this.parent.chart.theme=this.parent.chartSettings.theme,this.parent.chart.legendSettings=e,this.parent.chart.selectionMode=this.parent.chartSettings.selectionMode,this.parent.chart.enableExport=this.chartSettings.enableExport,this.parent.chart.isMultiSelect=this.parent.chartSettings.isMultiSelect,this.parent.chart.enableAnimation=this.parent.chartSettings.enableAnimation,this.parent.chart.useGroupingSeparator=this.parent.chartSettings.useGroupingSeparator,this.parent.chart.highlightPattern=this.parent.chartSettings.highlightPattern,this.accumulationType.indexOf(t)>-1?(this.parent.chart.enableBorderOnMouseMove=this.parent.chartSettings.enableBorderOnMouseMove,this.parent.chart.highlightMode=this.parent.chartSettings.highlightMode,this.parent.chart.enableSmartLabels=this.parent.chartSettings.enableSmartLabels):(this.parent.chart.palettes=this.parent.chartSettings.palettes,this.parent.chart.isTransposed=this.parent.chartSettings.isTransposed,this.parent.chart.enableSideBySidePlacement=this.parent.chartSettings.enableSideBySidePlacement,this.parent.chart.tabIndex=this.parent.chartSettings.tabIndex,this.parent.chart.description=this.parent.chartSettings.description,this.parent.chart.enableCanvas=this.parent.chartSettings.enableCanvas),"Polar"===t||"Radar"===t?(this.parent.chart.primaryXAxis=f,this.parent.chart.primaryYAxis.visible=!0,this.parent.chart.primaryYAxis=r.axes[0],this.parent.chart.axes=[],this.parent.chart.rows=[{}]):this.accumulationType.indexOf(t)<0&&"chart"===this.parent.chart.getModuleName()&&(this.parent.chart.primaryYAxis.visible=!1,this.parent.chart.primaryXAxis=f,this.parent.chart.axes=r.axes,"Bar"===t||"StackingBar"===t||"StackingBar100"===t&&this.chartSettings.enableMultipleAxis?(this.parent.chart.rows=[{height:"100%"}],this.parent.chart.columns=r.columns):"Pareto"===t&&this.chartSettings.enableMultipleAxis?(this.parent.chart.rows=[{height:"100%"}],this.parent.chart.columns=[{width:"100%"}]):(this.parent.chart.rows=r.rows,this.parent.chart.columns=[{width:"100%"}])),this.parent.chart.refresh(),this.accumulationType.indexOf(t)>-1&&"accumulationchart"===this.parent.chart.getModuleName()&&(0===this.parent.dataSourceSettings.rows.length||0===this.parent.dataSourceSettings.columns.length)&&(this.parent.hideWaitingPopup(),this.parent.pivotFieldListModule&&o.hideSpinner(this.parent.pivotFieldListModule.fieldListSpinnerElement)));this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis?this.parent.chart.appendTo(n.select("#"+this.parent.element.id+"_chartInner",this.parent.element)):this.parent.chart.appendTo(n.select("#"+this.parent.element.id+"_chart",this.parent.element))},t.prototype.legendClick=function(n){if(this.chartSettings.showPointColorByMembers&&this.chartSettings.enableMultipleAxis)for(var i=this.chartSeriesInfo[n.legendText].colorIndex,t=1;t<i.length;t++)n.chart.series[i[t]].visible=!n.chart.series[i[t]].visible;this.parent.trigger("chartLegendClick",n)},t.prototype.pointClick=function(n){var t=n.series.dataSource?n.series.dataSource:this.parent.chart.series[n.seriesIndex].dataSource,i,f,r,u;(["Pie","Funnel","Doughnut","Pyramid","Radar","Polar"].indexOf(this.parent.chartSettings.chartSeries.type)>-1||!this.parent.chartSettings.showMultiLevelLabels)&&("olap"===this.parent.dataType||this.parent.dataSourceSettings.rows.length>1)?(this.pivotIndex={rIndex:t?t[n.pointIndex].rIndex:void 0,cIndex:t?t[n.pointIndex].cIndex:void 0},this.creatMenu(),i=this.parent.element.getBoundingClientRect(),f=(this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:0)+(this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:0)+(window.scrollY||document.documentElement.scrollTop)+i.top,this.accumulationMenu.open(f+n.y,n.x+i.left+(window.scrollX||document.documentElement.scrollLeft))):(this.parent.allowDrillThrough||this.parent.editSettings.allowEditing)&&this.parent.drillThroughModule&&(r=t[n.pointIndex].rIndex,u=t[n.pointIndex].cIndex,this.parent.drillThroughModule.executeDrillThrough(this.parent.pivotValues[r][u],r,u));this.parent.trigger("chartPointClick",n)},t.prototype.frameAxesWithRows=function(){var u=[],o=[],s=[],b=[],k=this.persistSettings.chartSeries&&("StackingColumn100"===this.persistSettings.chartSeries.type||"StackingBar100"===this.persistSettings.chartSeries.type||"StackingArea100"===this.persistSettings.chartSeries.type||"StackingLine100"===this.persistSettings.chartSeries.type),d=["PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfDifferenceFrom","PercentageOfParentRowTotal","PercentageOfParentColumnTotal","PercentageOfParentTotal"],y,c,w;if(this.chartSettings.enableMultipleAxis)for(var l=0,g=100/this.dataSourceSettings.values.length+"%",a=0,nt=this.dataSourceSettings.values;a<nt.length;a++){var f=nt[a],i=this.engineModule.fieldList[f.name],h=("olap"===this.parent.dataType?"":this.parent.localeObj.getConstant(i.aggregateType)+" "+this.parent.localeObj.getConstant("of")+" ")+i.caption;b.push(h);for(var e=void 0,v=0,tt=this.dataSourceSettings.formatSettings;v<tt.length;v++)if(y=tt[v],y.name===f.name){e=y;break}var p=-1!==r.inArray(i.aggregateType,d)?"P2":e?e.format:"olap"===this.parent.dataType?this.getFormat(i.formatString):"N",it="Polar"===this.chartSettings.chartSeries.type||"Radar"===this.chartSettings.chartSeries.type,t={};(t=this.persistSettings.primaryYAxis?this.frameObjectWithKeys(this.persistSettings.primaryYAxis):t).labelFormat=t.labelFormat?t.labelFormat:k?"":it?"N":p;t.title=t.title?t.title:"Combined"===this.chartSettings.multipleAxisMode?b.join(" - "):h;t.zoomFactor=n.isNullOrUndefined(this.chartSettings.primaryYAxis.zoomFactor)?1:this.chartSettings.primaryYAxis.zoomFactor;t.edgeLabelPlacement=this.chartSettings.primaryYAxis.edgeLabelPlacement?this.chartSettings.primaryYAxis.edgeLabelPlacement:this.persistSettings.primaryYAxis.edgeLabelPlacement;"Bar"===this.chartSettings.chartSeries.type||"StackingBar"===this.chartSettings.chartSeries.type||"StackingBar100"===this.chartSettings.chartSeries.type?t.plotOffsetRight=t.plotOffsetRight?t.plotOffsetRight:30:t.plotOffsetTop=t.plotOffsetTop?t.plotOffsetTop:30;it||(t.name="Combined"===this.chartSettings.multipleAxisMode?this.measureList.join("_"):this.measuresNames[f.name]?this.measuresNames[f.name]:f.name);u=u.concat(t);"Combined"===this.chartSettings.multipleAxisMode&&(u=[u[u.length-1]]);"Stacked"===this.chartSettings.multipleAxisMode?(t.rowIndex=l,t.columnIndex=l,o.push({height:g}),s.push({width:g})):(t.rowIndex=0,t.columnIndex=0,o=[{height:"100%"}],s=[{width:"100%"}]);l++}else{for(i=this.engineModule.fieldList[this.currentMeasure],h=("olap"===this.parent.dataType?"":this.parent.localeObj.getConstant(i.aggregateType)+" "+this.parent.localeObj.getConstant("of")+" ")+i.caption,e=void 0,c=0,w=this.dataSourceSettings.formatSettings;c<w.length;c++)if((f=w[c]).name===this.currentMeasure){e=f;break}t={};p=-1!==r.inArray(i.aggregateType,d)?"P2":e?e.format:"olap"===this.parent.dataType?this.getFormat(i.formatString):"N";(t=this.persistSettings.primaryYAxis?this.frameObjectWithKeys(this.persistSettings.primaryYAxis):t).zoomFactor=n.isNullOrUndefined(this.chartSettings.primaryYAxis.zoomFactor)?1:this.chartSettings.primaryYAxis.zoomFactor;t.rowIndex=0;t.columnIndex=0;t.edgeLabelPlacement=this.chartSettings.primaryYAxis.edgeLabelPlacement?this.chartSettings.primaryYAxis.edgeLabelPlacement:this.persistSettings.primaryYAxis.edgeLabelPlacement;"Polar"!==this.chartSettings.chartSeries.type&&"Radar"!==this.chartSettings.chartSeries.type&&(t.name=this.measuresNames[this.currentMeasure]?this.measuresNames[this.currentMeasure]:this.currentMeasure);t.labelFormat=t.labelFormat?t.labelFormat:k?"":p;t.title=t.title?t.title:h;u=u.concat(t);o.push({height:"100%"});s.push({width:"100%"})}return{axes:u,rows:o,columns:s}},t.prototype.getFormat=function(n){return"Currency"===n?"C":"Percent"===n?"P":"N"},t.prototype.getColumnTotalIndex=function(t){for(var h,r,u,o,c,i,f={},e=0,s=Object.keys(t);e<s.length;e++)if(h=s[e],r=t[Number(h)],!n.isNullOrUndefined(r))for(u=0,o=Object.keys(r);u<o.length;u++)if(c=o[u],i=r[Number(c)],!n.isNullOrUndefined(i)){if("column"!==i.axis)return f;"sum"!==i.type&&(this.dataSourceSettings&&this.dataSourceSettings.columns&&0===this.dataSourceSettings.columns.length||"grand sum"!==i.type)||-1===i.rowSpan||(f[i.colIndex]=i.colIndex)}return f},t.prototype.groupHierarchyWithLevels=function(t,i){var c,l,f={},e=0,h={},o,r,s,u;for(this.measurePos=this.engineModule.tupRowInfo[0].measurePosition,o=0;o<t.length;o++)r=t[o][0],r&&"row"===r.axis&&"grand sum"!==r.type&&(n.isNullOrUndefined(f[r.hierarchy])?(3===r.memberType?e===this.measurePos?(i[this.measurePos]=r.hierarchy,f[r.hierarchy]=((c={})[r.levelUniqueName]=r.levelUniqueName,c)):e--:(i[e]=r.hierarchy,f[r.hierarchy]=((l={})[r.levelUniqueName]=r.levelUniqueName,l)),e++):f[r.hierarchy][r.levelUniqueName]=r.levelUniqueName);for(s=-1,u=0;u<i.length;u++)this.measurePos!==u&&(h[i[u]]={start:s+1,end:s+Object.keys(f[i[u]]).length},s=h[i[u]].end);return h},t.prototype.frameMultiLevelLabels=function(){for(var o,a,d,r,v,y,s,p=Object.keys(this.headerColl),e=this.headerColl[-.5],h=0,w=p;h<w.length;h++){for(var c=w[h],u=Number(c),t=this.headerColl[u],i=0,b=!1;i<=this.maxLevel;)b?t[i]||(t[i]={name:t[i-1].name,text:"",hasChild:t[i-1].hasChild,isDrilled:t[i-1].isDrilled,levelName:t[i-1].levelName,level:t[i-1].level,fieldName:t[i-1].fieldName,rowIndex:t[i-1].rowIndex,colIndex:t[i-1].colIndex,span:-1}):t[i]?b=!0:t[i]=e[i],i++;e=this.headerColl[u]}for(var f={},l=0,k=p;l<k.length;l++){for(c=k[l],u=Number(c),t=this.headerColl[u],o=0,a=Object.keys(t);o<a.length;o++)d=a[o],r=Number(d),f[r]?(v=f[r].length,t[r].levelName===e[r].levelName?f[r][v-1].end=f[r][v-1].end+1:f[r].push({start:u,end:u+1,text:t[r].text,type:n.isNullOrUndefined(this.persistSettings.primaryXAxis)||n.isNullOrUndefined(this.persistSettings.primaryXAxis.border)||n.isNullOrUndefined(this.persistSettings.primaryXAxis.border.type)?-1===t[r].span?"WithoutTopandBottomBorder":"WithoutTopBorder":this.persistSettings.primaryXAxis.border.type,customAttributes:t[r]})):f[r]=[{start:u,end:u+1,text:t[r].text,type:n.isNullOrUndefined(this.persistSettings.primaryXAxis)||n.isNullOrUndefined(this.persistSettings.primaryXAxis.border)||n.isNullOrUndefined(this.persistSettings.primaryXAxis.border.type)?-1===t[r].span?"WithoutTopandBottomBorder":"WithoutTopBorder":this.persistSettings.primaryXAxis.border.type,customAttributes:t[r]}];e=t}for(y=[],s=Object.keys(f).length-1;s>-1;s--)y.push({categories:f[s],border:{width:1},overflow:"Trim"});return y},t.prototype.getZoomFactor=function(){this.calculatedWidth=this.getCalulatedWidth();var t=10*this.chartSeries.length>120?10*this.chartSeries.length:120,n=this.chartSeries.length>0?this.calculatedWidth/(Object.keys(this.chartSeries[0].dataSource).length*t):1;return n<1&&n>0?n:1},t.prototype.getCalulatedWidth=function(){return this.calculatedWidth=isNaN(Number(this.parent.width))?this.parent.width.indexOf("%")>-1?this.parent.element.clientWidth*(parseFloat(this.parent.width)/100):this.parent.width.indexOf("px")>-1?Number(this.parent.width.toString().split("px")[0]):this.parent.element.clientWidth:Number(this.parent.width),this.calculatedWidth},t.prototype.configTooltipSettings=function(){var n=this.persistSettings.tooltip?this.persistSettings.tooltip:this.chartSettings.tooltip;return n.enable=void 0===n.enable||n.enable,n.enable&&n.template&&(this.templateFn=this.parent.templateParser(n.template)),this.parent.tooltipTemplate&&(n.template=n.template?n.template:this.parent.tooltipTemplate),n.header=n.header?n.header:"",n.enableMarker=void 0===n.enableMarker||n.enableMarker,n},t.prototype.configLegendSettings=function(){var n={},t,i;if(this.chartSettings.legendSettings)for(t=0,i=Object.keys(this.chartSettings.legendSettings);t<i.length;)n[i[t]]=this.chartSettings.legendSettings[i[t]],t++;return n.visible=!1!==n.visible,n.padding=n.padding?n.padding:25,n.shapePadding=n.shapePadding?n.shapePadding:10,n},t.prototype.configXAxis=function(){var t={};return(t=this.persistSettings.primaryXAxis?this.frameObjectWithKeys(this.persistSettings.primaryXAxis):t).valueType="Category",t.labelIntersectAction=t.labelIntersectAction?t.labelIntersectAction:"Rotate45",t.title=t.title?t.title:this.dataSourceSettings.rows.map(function(n){return n.caption||n.name}).join(" / "),t.zoomFactor=n.isNullOrUndefined(this.parent.chartSettings.primaryXAxis.zoomFactor)?this.getZoomFactor():this.parent.chartSettings.primaryXAxis.zoomFactor,this.parent.chartSettings.zoomSettings.enableScrollbar||(t.zoomFactor=1),this.chartSettings.showMultiLevelLabels&&"Pareto"!==this.chartSettings.chartSeries.type?(t.multiLevelLabels=this.frameMultiLevelLabels(),t.border={width:1,type:n.isNullOrUndefined(this.persistSettings.primaryXAxis)||n.isNullOrUndefined(this.persistSettings.primaryXAxis.border)||n.isNullOrUndefined(this.persistSettings.primaryXAxis.border.type)?"WithoutTopandBottomBorder":this.persistSettings.primaryXAxis.border.type},t.majorTickLines={width:0,height:-10}):(t.multiLevelLabels=[],t.border={width:1,type:n.isNullOrUndefined(this.persistSettings.primaryXAxis)||n.isNullOrUndefined(this.persistSettings.primaryXAxis.border)||n.isNullOrUndefined(this.persistSettings.primaryXAxis.border.type)?"Rectangle":this.persistSettings.primaryXAxis.border.type},t.majorTickLines={width:0,height:5}),t},t.prototype.configZoomSettings=function(){var n=this.chartSettings.zoomSettings;return n.enableSelectionZooming=void 0===n.enableSelectionZooming||n.enableSelectionZooming,n.enableScrollbar=void 0===n.enableScrollbar||n.enableScrollbar,n},t.prototype.tooltipRender=function(t){var h=this.chartSettings.enableMultipleAxis&&"Combined"===this.chartSettings.multipleAxisMode&&this.accumulationType.indexOf(this.chartSettings.chartSeries.type)<0&&"Radar"!==this.chartSettings.chartSeries.type&&"Polar"!==this.chartSettings.chartSeries.type?t.series.tooltipMappingName:t.series.yAxisName?t.series.yAxisName.split("_CumulativeAxis")[0]:this.chartSettings.enableMultipleAxis&&this.accumulationType.indexOf(this.chartSettings.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type?t.series.name?t.series.name.split(" | ")[1]:t.data.seriesName?t.data.seriesName.split(" | ")[1]:this.currentMeasure:this.measuresNames[this.currentMeasure]?this.measuresNames[this.currentMeasure]:this.currentMeasure,i=t.series.dataSource?t.series.dataSource:this.parent.chart.series[t.data.seriesIndex].dataSource,o=i?i[t.data.pointIndex].rIndex:void 0,s=i?i[t.data.pointIndex].cIndex:void 0,u=this.engineModule.fieldList[this.measuresNames[h]?this.measuresNames[h]:h],a="olap"===this.parent.dataType?"":this.parent.localeObj.getConstant(u.aggregateType),g=("olap"===this.parent.dataType?"":a+" "+this.parent.localeObj.getConstant("of")+" ")+u.caption,v=this.engineModule.pivotValues[o][s].formattedText,c=this.engineModule.formatFields[u.id],y=this.engineModule.getFormattedValue(t.point.y,u.id,v),p=c&&c.format&&null!==c.format.toLowerCase().match(/n|p|c/)&&this.chartSettings.useGroupingSeparator?"olap"===this.parent.dataType?y.toString():y.formattedText:v,w=this.parent.pivotValues[o][s],f=w.columnHeaders,e="",b,l;if(n.isNullOrUndefined(f)?e=void 0:"olap"===this.parent.dataType?e=this.chartSeriesInfo[f.toString().split(/~~|::/).join(" - ")].uniqueName:(b=f.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter),f=r.formatChartHeaders(b,this,!0,w),e=this.chartSeriesInfo[f.toString()].uniqueName),l=t.point.x,this.parent.tooltipTemplate&&void 0!==this.parent.getTooltipTemplate()||this.chartSettings.tooltip.template){var k,nt=i?this.parent.getHeaderField(o,s,"row"):"",tt=i?this.parent.getHeaderField(o,s,"Column"):"",d={rowHeaders:l,columnHeaders:e,aggregateType:a,value:p,valueField:u.caption,rowFields:nt,columnFields:tt};k=this.parent.chartSettings&&this.parent.chartSettings.tooltip&&this.parent.chartSettings.tooltip.enable&&this.parent.chartSettings.tooltip.template?this.tooltipTemplateFn()(d,this,"tooltipTemplate",this.element.id+"1tooltipTemplate")[0].outerHTML:this.parent.getTooltipTemplate()(d,this,"tooltipTemplate",this.element.id+"tooltipTemplate")[0].outerHTML;t.template=k}else t.text=g+": "+p+(0===this.dataSourceSettings.columns.length?"":" <br/>"+this.parent.localeObj.getConstant("column")+": "+e)+(0===this.dataSourceSettings.rows.length?"":" <br/>"+this.parent.localeObj.getConstant("row")+": "+l)+(t.data&&"Pareto"===t.data.seriesName?" <br/>"+this.parent.localeObj.getConstant("pareto")+": "+t.data.pointY+"%":""),this.parent.trigger("chartTooltipRender",t)},t.prototype.tooltipTemplateFn=function(){return this.templateFn},t.prototype.loaded=function(t){var f,i,u;this.parent.isChartLoaded=!0;f=this.parent.grid?this.parent.getGridWidthAsNumber().toString():this.parent.getWidthAsNumber().toString();(this.parent.chart&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.showFieldList&&"Chart"===this.parent.currentView&&this.parent.groupingBarModule.alignIcon(),this.chartSettings.showMultiLevelLabels)&&(i=r.inArray(this.chartSettings.chartSeries.type,["Bar","StackingBar","StackingBar100"])>-1?"_chartYAxisMultiLevelLabel0":"_chartXAxisMultiLevelLabel0",n.isNullOrUndefined(n.select("#"+this.parent.element.id+i,this.parent.element))||this.parent.element.querySelector("#"+this.parent.element.id+i).setAttribute("cursor","pointer"));u=this.getChartHeight();this.parent.chart.height=u;this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&(["Pie","Funnel","Pyramid","Doughnut","Radar","Polar","Pareto"].indexOf(this.parent.chartSettings.chartSeries.type)>=0?this.parent.element.querySelector("."+lt).style.overflow="visible":(this.parent.element.querySelector("."+lt).style.overflow="auto",this.parent.element.querySelector("."+lt).style.overflowX="hidden"),this.parent.element.querySelector("."+lt).style.width=f+"px",this.parent.element.querySelector("."+lt).style.height=u+"px");this.updateView();"Chart"!==this.parent.displayOption.primary&&"Chart"!==this.parent.displayOption.view||this.parent.notify(cr,{});this.parent.trigger("chartLoaded",t);("Server"===this.parent.dataSourceSettings.mode&&this.parent.isServerWaitingPopup||"Local"===this.parent.dataSourceSettings.mode)&&this.parent.hideWaitingPopup()},t.prototype.updateView=function(){if(this.parent.grid&&this.parent.chart&&this.parent.showToolbar){var n=this.parent.element.querySelector(".e-pivot-grouping-bar"),t=this.parent.element.querySelector(".e-chart-grouping-bar");"Table"===this.parent.currentView?(this.parent.grid.element.style.display="",this.parent.chart.element.style.display="none",this.parent.showGroupingBar&&this.parent.groupingBarModule&&(n&&(n.style.display="",n.querySelector("."+tu)&&null!=this.parent.groupingBarModule.gridPanel&&!this.parent.groupingBarModule.gridPanel.isDestroyed&&this.parent.groupingBarModule.gridPanel.refreshOverflow()),t&&(t.style.display="none")),this.parent.chartSettings.enableMultipleAxis&&this.parent.chartSettings.enableScrollOnMultiAxis&&(this.parent.element.querySelector(".e-pivotchart").style.display="none")):(this.parent.grid.element.style.display="none",this.parent.chart.element.style.display="",this.parent.showGroupingBar&&this.parent.groupingBarModule&&(n&&(n.style.display="none"),t&&(t.style.display="",t.querySelector("."+tu)&&null!=this.parent.groupingBarModule.chartPanel&&!this.parent.groupingBarModule.chartPanel.isDestroyed&&this.parent.groupingBarModule.chartPanel.refreshOverflow())),this.parent.chartSettings.enableMultipleAxis&&this.parent.chartSettings.enableScrollOnMultiAxis&&(this.parent.element.querySelector(".e-pivotchart").style.display=""))}},t.prototype.creatMenu=function(){var u,s;this.accumulationMenu&&!this.accumulationMenu.isDestroyed&&this.accumulationMenu.destroy();for(var f=(this.parent.allowDrillThrough||this.parent.editSettings.allowEditing)&&this.parent.drillThroughModule?["expand","collapse","drillThrough","exit"]:["expand","collapse","exit"],r=[],t=0;t<f.length;t++)r.push({id:this.parent.element.id+"_DrillMenuChart_"+f[t],text:this.parent.localeObj.getConstant(f[t]),items:[]});var i=this.getMenuItems(),e=[],o=[];for(t=0;t<i.length;t++)"expand"===i[t].type?e.push({id:this.element.id+"drillExpand_"+i[t].key,text:i[t].value}):o.push({id:this.element.id+"drillCollapse_"+i[t].key,text:i[t].value});e.length>0&&(r[0].items=e);o.length>0&&(r[1].items=o);s={cssClass:this.parent.element.id+"_accumulationChart"+(this.parent.cssClass?" "+this.parent.cssClass:""),items:r,enableRtl:this.parent.enableRtl,beforeOpen:this.drillMenuOpen.bind(this),select:this.drillMenuSelect.bind(this),locale:this.parent.locale};this.accumulationMenu=new et.ContextMenu(s);n.select("#"+this.parent.element.id+"_accumulationChart",this.parent.element)?(u=n.select("#"+this.parent.element.id+"_accumulationChart",this.parent.element)).innerHTML="":(u=n.createElement("ul",{id:this.parent.element.id+"_accumulationChart"}),this.parent.element.appendChild(u));this.accumulationMenu.isStringTemplate=!0;this.accumulationMenu.appendTo(u)},t.prototype.drillMenuOpen=function(n){n.items[0]&&n.items[0].text===this.parent.localeObj.getConstant("expand")&&n.items[0].items&&0===n.items[0].items.length&&this.accumulationMenu.enableItems([this.parent.localeObj.getConstant("expand")],!1);n.items[1]&&n.items[1].text===this.parent.localeObj.getConstant("collapse")&&n.items[1].items&&0===n.items[1].items.length&&this.accumulationMenu.enableItems([this.parent.localeObj.getConstant("collapse")],!1)},t.prototype.getMenuItems=function(){for(var o,t=this.pivotIndex.rIndex,f=[],r=this.engineModule.pivotValues,e=[],n=r[t][this.pivotIndex.cIndex],i=!r[t][0].isNamedSet&&r[t][0].hasChild?r[t][0].level:void 0,u="olap"===this.parent.dataType?n.rowHeaders.toString().split(/~~|::/):n.rowHeaders.toString().split(this.engineModule.valueSortSettings.headerDelimiter);r[t][0];)(n=r[t][0],0!==u.length&&u.indexOf(n.formattedText.toString())===u.length-1)&&(n.hasChild&&!n.isNamedSet&&e.indexOf(n.level)<0&&(i?i>=n.level:0!==i||0===n.level)&&(n.isDrilled&&n.hasChild?f.push({key:t,type:"collapse",value:n.formattedText}):f.push({key:t,type:"expand",value:n.formattedText}),e.push(n.level),i=i?i-1:n.level-1),o=u.indexOf(n.formattedText.toString()),u.splice(o,1)),0===n.level&&n.hasChild&&!n.isNamedSet&&(i=void 0,e=[]),t--;return f},t.prototype.drillMenuSelect=function(n){var i="olap"===this.parent.dataType?this.parent.olapEngineModule.pivotValues:this.parent.engineModule.pivotValues,r=n.element.id.split("_DrillMenuChart_")[1];if(0===n.element.id.indexOf(this.element.id+"drill")){var h=n.element.id.split(this.element.id+"drill")[1].indexOf("Expand")>=0?"drillExpand":"drillCollapse",u=Number(n.element.id.split(this.element.id+h+"_")[1]),t=i[u][0],f="olap"===this.parent.dataType?t.formattedText:t.actualText?t.actualText.toString():t.formattedText.toString(),e=t.formattedText?t.formattedText.toString():f,c=t.hasChild&&!t.isNamedSet?(t.isDrilled?" - ":" + ")+e:e,o="olap"===this.parent.dataType?this.engineModule.tupRowInfo[t.ordinal]:void 0,l=o?o.uNameCollection:t.valueSort.levelName.toString(),s={fieldName:t.valueSort.axis,level:t.level,hasChild:t.hasChild,levelName:l,name:f,text:c,rowIndex:u,colIndex:0,isDrilled:t.isDrilled,cell:t};"olap"===this.parent.dataType?this.parent.onDrill(void 0,s):this.onDrill({customAttributes:s})}else"drillThrough"===r?this.parent.drillThroughModule.executeDrillThrough(i[this.pivotIndex.rIndex][this.pivotIndex.cIndex],this.pivotIndex.rIndex,this.pivotIndex.rIndex):"exit"===r&&this.accumulationMenu.close()},t.prototype.getChartHeight=function(){var t,i,r,u;return n.isNullOrUndefined(this.parent.getHeightAsNumber())?t="auto":(r=this.parent.showToolbar?6:5,t=(this.parent.getHeightAsNumber()-r).toString(),i=this.parent.getHeightAsNumber()-r),n.isNullOrUndefined(this.parent.getHeightAsNumber())?t="auto":(u=!1,null!==this.parent.element.querySelector(".e-chart-grouping-bar")&&"none"===this.parent.element.querySelector(".e-chart-grouping-bar").style.display.toLowerCase()&&(u=!0,this.parent.element.querySelector(".e-chart-grouping-bar").style.display="block"),this.parent.showToolbar&&this.parent.showGroupingBar?t=(i-(this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:42)-(this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:62)).toString():this.parent.showToolbar?t=(i-(this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:42)).toString():this.parent.showGroupingBar?t=(i-(this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:62)).toString():(this.parent.chart&&parseInt(this.parent.chart.height,10)<200||i<200)&&(t="200"),u&&(this.parent.element.querySelector(".e-chart-grouping-bar").style.display="none")),t},t.prototype.getChartAutoHeight=function(){var n=this.parent.element.offsetHeight<this.parent.minHeight?this.parent.minHeight:this.parent.element.offsetHeight;return this.parent.showToolbar&&this.parent.showGroupingBar?n=n-(this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:42)-(this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:62):this.parent.showToolbar?n-=this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:42:this.parent.showGroupingBar&&(n-=this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:62),n},t.prototype.axisLabelRender=function(n){if(this.chartSettings.showMultiLevelLabels&&"Pareto"!==this.chartSettings.chartSeries.type&&"primaryXAxis"===n.axis.name&&(n.text=""),"primaryXAxis"!==n.axis.name&&"StackingColumn100"!==this.parent.chartSettings.chartSeries.type&&"StackingBar100"!==this.parent.chartSettings.chartSeries.type&&"StackingArea100"!==this.parent.chartSettings.chartSeries.type&&"StackingLine100"!==this.parent.chartSettings.chartSeries.type){var r=this.chartSettings.enableMultipleAxis&&"Combined"===this.chartSettings.multipleAxisMode?this.currentMeasure:"olap"===this.parent.dataType?this.measuresNames[n.axis.name]:n.axis.name,t=this.engineModule.formatFields[r]||null,i=this.engineModule.getFormattedValue(n.value,this.chartSettings.enableMultipleAxis&&"Combined"===this.chartSettings.multipleAxisMode?this.currentMeasure:n.axis.name,n.text),u=t&&t.format&&this.chartSettings.useGroupingSeparator?"olap"===this.parent.dataType?i.toString():i.formattedText:n.value.toString();n.text=u}this.parent.trigger("chartAxisLabelRender",n)},t.prototype.multiLevelLabelClick=function(t){var i={axis:t.axis,text:t.text,cell:n.isNullOrUndefined(t.customAttributes)?void 0:t.customAttributes.cell,cancel:!1};this.parent.trigger("multiLevelLabelClick",i);!i.cancel&&t.customAttributes&&t.customAttributes.hasChild&&!t.customAttributes.cell.isNamedSet&&("olap"===this.parent.dataType?this.parent.onDrill(void 0,t.customAttributes):this.onDrill(t))},t.prototype.onDrill=function(n){var e=n.customAttributes,u=this.dataSourceSettings.drilledMembers[0]&&this.dataSourceSettings.drilledMembers[0].delimiter?this.dataSourceSettings.drilledMembers[0].delimiter:"**",o=e.fieldName,p="Tabular"===this.parent.gridSettings.layout?!this.parent.dataSourceSettings.showSubTotals||!this.parent.dataSourceSettings.showRowSubTotals&&this.parent.dataSourceSettings.showColumnSubTotals||this.engineModule&&!this.engineModule.fieldList[e.fieldName].showSubTotals?e.level:this.parent.engineModule.rowMaxLevel:e.colIndex,v=this.engineModule.pivotValues[e.rowIndex][p],f=v.valueSort.levelName.split(this.engineModule.valueSortSettings.headerDelimiter).join(u),y=!1,s,i,c,l,a;if(0===this.dataSourceSettings.drilledMembers.length)this.parent.setProperties({dataSourceSettings:{drilledMembers:[{name:o,items:[f],delimiter:u}]}},!0);else{for(s=0;s<this.dataSourceSettings.drilledMembers.length;s++)i=this.dataSourceSettings.drilledMembers[s],(f=f.split(u).join(i.delimiter?i.delimiter:u),u=i.delimiter=i.delimiter?i.delimiter:u,i.name===o)&&(y=!0,c=i.items.indexOf(f),c>-1?i.items.splice(c,1):i.items.push(f));y||this.dataSourceSettings.drilledMembers.push({name:o,items:[f],delimiter:u})}this.parent.showWaitingPopup();var t=this,h={fieldName:o,memberName:f,delimiter:u,axis:"row",action:e.isDrilled?"up":"down",currentCell:v},w={drillInfo:h,pivotview:t.parent};t.parent.trigger(pe,w);l={dataSourceSettings:r.getClonedDataSourceSettings(this.parent.dataSourceSettings)};this.parent.trigger(yi,l);this.parent.setProperties({dataSourceSettings:l.dataSourceSettings},!0);t.parent.enableVirtualization||t.parent.enablePaging?"Server"===t.parent.dataSourceSettings.mode?t.parent.getEngine("onDrill",h,null,null,null,null,null):(t.engineModule.drilledMembers=t.dataSourceSettings.drilledMembers,t.engineModule.onDrill(h)):"Server"===t.parent.dataSourceSettings.mode?t.parent.getEngine("onDrill",h,null,null,null,null,null):t.engineModule.generateGridData(t.dataSourceSettings,!0);t.parent.allowServerDataBinding=!1;t.parent.setProperties({pivotValues:t.engineModule.pivotValues},!0);t.parent.allowServerDataBinding=!0;a={dataSourceSettings:r.getClonedDataSourceSettings(this.parent.dataSourceSettings),pivotValues:this.parent.pivotValues};this.parent.trigger(pi,a);t.engineModule.pivotValues=a.pivotValues;t.parent.renderPivotGrid()},t.prototype.isAttributeDrill=function(n,t){for(var u,e=!1,i=0;i<this.dataSourceSettings.drilledMembers.length;i++)if(this.dataSourceSettings.drilledMembers[i].name===n)for(u=0;u<this.dataSourceSettings.drilledMembers[i].items.length;u++){for(var o=this.dataSourceSettings.drilledMembers[i].items[u].split(this.dataSourceSettings.drilledMembers[i].delimiter),f="",r=0;r<o.length;r++)t[r]&&t[r].uName&&(f=f+(""===f?"":this.dataSourceSettings.drilledMembers[i].delimiter)+(t[r].uName.indexOf("[Measures]")>-1?"[Measures]":t[r].uName));if(f===this.dataSourceSettings.drilledMembers[i].items[u]){e=!0;break}}return e},t.prototype.load=function(n){n.chart.zoomModule&&(n.chart.zoomModule.isZoomed=!0);this.parent.trigger("chartLoad",n)},t.prototype.beforePrint=function(n){this.parent.trigger("beforePrint",n)},t.prototype.animationComplete=function(n){this.parent.trigger("animationComplete",n)},t.prototype.legendRender=function(n){this.parent.trigger("legendRender",n)},t.prototype.textRender=function(n){this.parent.trigger("textRender",n)},t.prototype.pointRender=function(n){this.parent.trigger("pointRender",n)},t.prototype.seriesRender=function(n){this.parent.trigger("seriesRender",n)},t.prototype.chartMouseMove=function(n){this.parent.trigger("chartMouseMove",n)},t.prototype.chartMouseClick=function(n){this.parent.trigger("chartMouseClick",n)},t.prototype.pointMove=function(n){this.parent.trigger("pointMove",n)},t.prototype.chartMouseLeave=function(n){this.parent.trigger("chartMouseLeave",n)},t.prototype.chartMouseDown=function(n){this.parent.trigger("chartMouseDown",n)},t.prototype.chartMouseUp=function(n){this.parent.trigger("chartMouseUp",n)},t.prototype.dragComplete=function(n){this.parent.trigger("dragComplete",n)},t.prototype.zoomComplete=function(n){this.parent.trigger("zoomComplete",n)},t.prototype.scrollStart=function(n){this.parent.trigger("scrollStart",n)},t.prototype.scrollEnd=function(n){this.parent.trigger("scrollEnd",n)},t.prototype.scrollChanged=function(n){this.parent.trigger("scrollChanged",n)},t.prototype.multiLevelLabelRender=function(n){this.parent.trigger("multiLevelLabelRender",n)},t.prototype.resized=function(t){this.accumulationType.indexOf(this.chartSettings.chartSeries.type)<0&&(t.chart.primaryXAxis.zoomFactor=n.isNullOrUndefined(this.parent.chartSettings.primaryXAxis.zoomFactor)?this.getZoomFactor():this.parent.chartSettings.primaryXAxis.zoomFactor,this.parent.chartSettings.zoomSettings.enableScrollbar||(t.chart.primaryXAxis.zoomFactor=n.isNullOrUndefined(this.parent.chartSettings.primaryXAxis.zoomFactor)?1:this.parent.chartSettings.primaryXAxis.zoomFactor));this.parent.trigger("chartResized",t)},t.prototype.getResizedChartHeight=function(){return["Pie","Funnel","Pyramid","Doughnut","Radar","Polar","Pareto"].indexOf(this.parent.chartSettings.chartSeries.type)<0&&this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&this.parent.dataSourceSettings.values.length>0?Number(this.parent.chart.height)>235*this.parent.dataSourceSettings.values.length+100?isNaN(Number(this.getChartHeight()))?this.getChartHeight().toString():(Number(this.getChartHeight())-5).toString():!isNaN(Number(this.getChartHeight()))||this.parent.dataSourceSettings.values.length>1?(235*this.parent.dataSourceSettings.values.length+100).toString():this.getChartHeight().toString():this.getChartHeight().toString()},t.prototype.destroy=function(){var i,t;if(!this.parent||!this.parent.isDestroyed){if((this.accumulationMenu&&!this.accumulationMenu.isDestroyed&&(this.accumulationMenu.destroy(),this.accumulationMenu=null),n.select("#"+this.parent.element.id+"_accumulationChart",this.parent.element)&&n.remove(n.select("#"+this.parent.element.id+"_accumulationChart",this.parent.element)),this.parent&&this.parent.chart&&!this.parent.chart.isDestroyed)?(this.parent.chart.destroy(),this.parent.chart=null):this.parent&&!this.parent.chart&&n.select("#"+this.parent.element.id+"_chart",this.parent.element)&&(i=n.select("#"+this.parent.element.id+"_chart",this.parent.element),n.getInstance(i,l.Chart).destroy(),n.remove(i)),this.chartElement&&(this.chartElement.parentNode&&this.chartElement.parentNode.removeChild(this.chartElement),this.chartElement=null),this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null),this.templateFn&&(this.templateFn=null),this.engineModule&&!this.parent.destroyEngine&&(this.engineModule.fieldList={},this.engineModule=null),this.chartSeries&&(this.chartSeries.length=0,this.chartSeries=null),this.columnGroupObject){for(t in this.columnGroupObject)Object.prototype.hasOwnProperty.call(this.columnGroupObject,t)&&(this.columnGroupObject[t]=null);this.columnGroupObject=null}if(this.chartSeriesInfo){for(t in this.chartSeriesInfo)Object.prototype.hasOwnProperty.call(this.chartSeriesInfo,t)&&(this.chartSeriesInfo[t]=null);this.chartSeriesInfo={};this.selectedLegend=null}if(this.headerColl){for(t in this.headerColl)Object.prototype.hasOwnProperty.call(this.headerColl,t)&&(this.headerColl[t]=null);this.headerColl={}}if(this.measuresNames){for(t in this.measuresNames)Object.prototype.hasOwnProperty.call(this.measuresNames,t)&&delete this.measuresNames[t];this.measuresNames={}}this.chartSettings=null;this.persistSettings=null;this.dataSourceSettings=null;this.currentColumn=null;this.currentMeasure=null;this.pivotIndex=null;this.measureList=null;this.maxLevel=0;this.measurePos=-1;this.accEmptyPoint=!1;this.isChartInitial=!0;this.calculatedWidth=null}},t}(),hy={size:"12px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},cy={size:"14px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},ly={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},ay={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},vy={size:"12px",fontWeight:"Regular",color:"#353535",fontStyle:"Normal",fontFamily:"Segoe UI"},d=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),i=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},aa=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(!0)],r.prototype,"enable",void 0),i([n.Property(1e3)],r.prototype,"duration",void 0),i([n.Property(0)],r.prototype,"delay",void 0),r}(n.ChildProperty),yy=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(null)],r.prototype,"value",void 0),i([n.Property(null)],r.prototype,"color",void 0),i([n.Property("0")],r.prototype,"dashArray",void 0),r}(n.ChildProperty),eu=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property("Normal")],r.prototype,"fontStyle",void 0),i([n.Property("16px")],r.prototype,"size",void 0),i([n.Property("Normal")],r.prototype,"fontWeight",void 0),i([n.Property("")],r.prototype,"color",void 0),i([n.Property("Center")],r.prototype,"textAlignment",void 0),i([n.Property("Segoe UI")],r.prototype,"fontFamily",void 0),i([n.Property(1)],r.prototype,"opacity",void 0),i([n.Property("Trim")],r.prototype,"textOverflow",void 0),r}(n.ChildProperty),va=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(10)],r.prototype,"left",void 0),i([n.Property(10)],r.prototype,"right",void 0),i([n.Property(10)],r.prototype,"top",void 0),i([n.Property(10)],r.prototype,"bottom",void 0),r}(n.ChildProperty),ir=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property("")],r.prototype,"color",void 0),i([n.Property(1)],r.prototype,"width",void 0),r}(n.ChildProperty),py=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(0)],r.prototype,"x",void 0),i([n.Property(0)],r.prototype,"y",void 0),r}(n.ChildProperty),wy=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(0)],r.prototype,"series",void 0),i([n.Property(0)],r.prototype,"point",void 0),r}(n.ChildProperty),by=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Complex({},ir)],r.prototype,"border",void 0),i([n.Property("transparent")],r.prototype,"background",void 0),i([n.Property(1)],r.prototype,"opacity",void 0),i([n.Property(null)],r.prototype,"backgroundImage",void 0),r}(n.ChildProperty),ky=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(!1)],r.prototype,"enable",void 0),i([n.Property("")],r.prototype,"dashArray",void 0),i([n.Complex({color:null,width:1},ir)],r.prototype,"line",void 0),i([n.Property("Both")],r.prototype,"lineType",void 0),r}(n.ChildProperty),dy=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(!1)],r.prototype,"visible",void 0),i([n.Property(null)],r.prototype,"name",void 0),i([n.Property("transparent")],r.prototype,"fill",void 0),i([n.Property(1)],r.prototype,"opacity",void 0),i([n.Property(0)],r.prototype,"angle",void 0),i([n.Property(!1)],r.prototype,"enableRotation",void 0),i([n.Property("Auto")],r.prototype,"position",void 0),i([n.Property(5)],r.prototype,"rx",void 0),i([n.Property(5)],r.prototype,"ry",void 0),i([n.Property("Center")],r.prototype,"alignment",void 0),i([n.Complex({width:null,color:null},ir)],r.prototype,"border",void 0),i([n.Complex({left:5,right:5,top:5,bottom:5},va)],r.prototype,"margin",void 0),i([n.Complex({size:"11px",color:"",fontStyle:"Normal",fontWeight:"Normal",fontFamily:"Segoe UI"},eu)],r.prototype,"font",void 0),i([n.Property(null)],r.prototype,"template",void 0),r}(n.ChildProperty),gy=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property("Line")],r.prototype,"type",void 0),i([n.Property(null)],r.prototype,"color",void 0),i([n.Property(1)],r.prototype,"width",void 0),i([n.Property(null)],r.prototype,"length",void 0),i([n.Property("")],r.prototype,"dashArray",void 0),r}(n.ChildProperty),np=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(!0)],r.prototype,"visible",void 0),i([n.Complex({width:null,color:null},ir)],r.prototype,"border",void 0),i([n.Complex({size:"11px",color:"",fontStyle:"Normal",fontWeight:"Normal",fontFamily:"Segoe UI"},eu)],r.prototype,"font",void 0),i([n.Property("transparent")],r.prototype,"fill",void 0),i([n.Property(0)],r.prototype,"angle",void 0),i([n.Property(!1)],r.prototype,"enableRotation",void 0),i([n.Property("Outside")],r.prototype,"position",void 0),i([n.Property(5)],r.prototype,"rx",void 0),i([n.Property(5)],r.prototype,"ry",void 0),i([n.Property(null)],r.prototype,"template",void 0),i([n.Complex({},gy)],r.prototype,"connectorStyle",void 0),r}(n.ChildProperty),ya=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(!1)],r.prototype,"visible",void 0),i([n.Property("Circle")],r.prototype,"shape",void 0),i([n.Property("")],r.prototype,"imageUrl",void 0),i([n.Property(5)],r.prototype,"width",void 0),i([n.Property(5)],r.prototype,"height",void 0),i([n.Complex({width:2,color:null},ir)],r.prototype,"border",void 0),i([n.Complex({x:0,y:0},py)],r.prototype,"offset",void 0),i([n.Property(null)],r.prototype,"fill",void 0),i([n.Property(1)],r.prototype,"opacity",void 0),i([n.Complex({},dy)],r.prototype,"dataLabel",void 0),r}(n.ChildProperty),tp=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(1)],r.prototype,"width",void 0),i([n.Property(10)],r.prototype,"length",void 0),i([n.Property(null)],r.prototype,"color",void 0),i([n.Property(1)],r.prototype,"opacity",void 0),r}(n.ChildProperty),ip=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(!1)],r.prototype,"visible",void 0),i([n.Property("Fixed")],r.prototype,"type",void 0),i([n.Property("Both")],r.prototype,"direction",void 0),i([n.Property("Vertical")],r.prototype,"mode",void 0),i([n.Property(1)],r.prototype,"verticalError",void 0),i([n.Property(null)],r.prototype,"color",void 0),i([n.Property(1)],r.prototype,"width",void 0),i([n.Property(1)],r.prototype,"horizontalError",void 0),i([n.Property(3)],r.prototype,"verticalNegativeError",void 0),i([n.Property(3)],r.prototype,"verticalPositiveError",void 0),i([n.Property(1)],r.prototype,"horizontalNegativeError",void 0),i([n.Property(1)],r.prototype,"horizontalPositiveError",void 0),i([n.Complex(null,tp)],r.prototype,"errorBarCap",void 0),r}(n.ChildProperty),rp=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property("")],r.prototype,"name",void 0),i([n.Property("0")],r.prototype,"dashArray",void 0),i([n.Property(!0)],r.prototype,"visible",void 0),i([n.Property(2)],r.prototype,"period",void 0),i([n.Property("Linear")],r.prototype,"type",void 0),i([n.Property(0)],r.prototype,"backwardForecast",void 0),i([n.Property(0)],r.prototype,"forwardForecast",void 0),i([n.Property(2)],r.prototype,"polynomialOrder",void 0),i([n.Complex({},ya)],r.prototype,"marker",void 0),i([n.Property(!0)],r.prototype,"enableTooltip",void 0),i([n.Complex({},aa)],r.prototype,"animation",void 0),i([n.Property("")],r.prototype,"fill",void 0),i([n.Property(1)],r.prototype,"width",void 0),i([n.Property(null)],r.prototype,"intercept",void 0),i([n.Property("SeriesType")],r.prototype,"legendShape",void 0),r}(n.ChildProperty),up=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(null)],r.prototype,"fill",void 0),i([n.Complex({color:"transparent",width:0},ir)],r.prototype,"border",void 0),i([n.Property("Zero")],r.prototype,"mode",void 0),r}(n.ChildProperty),fp=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(0)],r.prototype,"topLeft",void 0),i([n.Property(0)],r.prototype,"topRight",void 0),i([n.Property(0)],r.prototype,"bottomLeft",void 0),i([n.Property(0)],r.prototype,"bottomRight",void 0),r}(n.ChildProperty),ep=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(!1)],r.prototype,"enable",void 0),i([n.Property(null)],r.prototype,"fill",void 0),i([n.Complex(ly,eu)],r.prototype,"textStyle",void 0),r}(n.ChildProperty),op=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(!0)],r.prototype,"visible",void 0),i([n.Property(!1)],r.prototype,"startFromAxis",void 0),i([n.Property(null)],r.prototype,"start",void 0),i([n.Property(null)],r.prototype,"end",void 0),i([n.Property(null)],r.prototype,"size",void 0),i([n.Property("#808080")],r.prototype,"color",void 0),i([n.Property(null)],r.prototype,"dashArray",void 0),i([n.Property("Auto")],r.prototype,"sizeType",void 0),i([n.Property(!1)],r.prototype,"isRepeat",void 0),i([n.Property(null)],r.prototype,"repeatEvery",void 0),i([n.Property(null)],r.prototype,"repeatUntil",void 0),i([n.Property(!1)],r.prototype,"isSegmented",void 0),i([n.Property(null)],r.prototype,"segmentStart",void 0),i([n.Property(null)],r.prototype,"segmentEnd",void 0),i([n.Property(null)],r.prototype,"segmentAxisName",void 0),i([n.Complex({color:"transparent",width:1},ir)],r.prototype,"border",void 0),i([n.Property("")],r.prototype,"text",void 0),i([n.Property(null)],r.prototype,"rotation",void 0),i([n.Property("Middle")],r.prototype,"horizontalAlignment",void 0),i([n.Property("Middle")],r.prototype,"verticalAlignment",void 0),i([n.Complex(vy,eu)],r.prototype,"textStyle",void 0),i([n.Property("Behind")],r.prototype,"zIndex",void 0),i([n.Property(1)],r.prototype,"opacity",void 0),r}(n.ChildProperty),sp=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property("")],r.prototype,"color",void 0),i([n.Property(1)],r.prototype,"width",void 0),i([n.Property("Rectangle")],r.prototype,"type",void 0),r}(n.ChildProperty),hp=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(1)],r.prototype,"width",void 0),i([n.Property("")],r.prototype,"dashArray",void 0),i([n.Property(null)],r.prototype,"color",void 0),r}(n.ChildProperty),cp=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(.7)],r.prototype,"width",void 0),i([n.Property("")],r.prototype,"dashArray",void 0),i([n.Property(null)],r.prototype,"color",void 0),r}(n.ChildProperty),lp=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(1)],r.prototype,"width",void 0),i([n.Property("")],r.prototype,"dashArray",void 0),i([n.Property(null)],r.prototype,"color",void 0),r}(n.ChildProperty),ap=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(1)],r.prototype,"width",void 0),i([n.Property(5)],r.prototype,"height",void 0),i([n.Property(null)],r.prototype,"color",void 0),r}(n.ChildProperty),vp=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(.7)],r.prototype,"width",void 0),i([n.Property(5)],r.prototype,"height",void 0),i([n.Property(null)],r.prototype,"color",void 0),r}(n.ChildProperty),yp=(n.ChildProperty,function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(null)],r.prototype,"fill",void 0),i([n.Property(null)],r.prototype,"endAngle",void 0),i([n.Property(!1)],r.prototype,"explode",void 0),i([n.Property(!1)],r.prototype,"explodeAll",void 0),i([n.Property(null)],r.prototype,"explodeIndex",void 0),i([n.Property(null)],r.prototype,"innerRadius",void 0),i([n.Property("30%")],r.prototype,"explodeOffset",void 0),i([n.Property(0)],r.prototype,"gapRatio",void 0),i([n.Property("Value")],r.prototype,"groupMode",void 0),i([n.Property(null)],r.prototype,"groupTo",void 0),i([n.Property("20%")],r.prototype,"neckHeight",void 0),i([n.Property("20%")],r.prototype,"neckWidth",void 0),i([n.Property("Linear")],r.prototype,"pyramidMode",void 0),i([n.Property([])],r.prototype,"palettes",void 0),i([n.Property(0)],r.prototype,"startAngle",void 0),i([n.Complex(null,aa)],r.prototype,"animation",void 0),i([n.Complex(null,np)],r.prototype,"dataLabel",void 0),i([n.Property("0")],r.prototype,"dashArray",void 0),i([n.Property(1)],r.prototype,"width",void 0),i([n.Property("X")],r.prototype,"segmentAxis",void 0),i([n.Property("Line")],r.prototype,"drawType",void 0),i([n.Property(!0)],r.prototype,"isClosed",void 0),i([n.Collection([],yy)],r.prototype,"segments",void 0),i([n.Property("")],r.prototype,"stackingGroup",void 0),i([n.Complex({color:"transparent",width:0},ir)],r.prototype,"border",void 0),i([n.Property(!0)],r.prototype,"visible",void 0),i([n.Property(1)],r.prototype,"opacity",void 0),i([n.Property("Line")],r.prototype,"type",void 0),i([n.Complex(null,ya)],r.prototype,"marker",void 0),i([n.Complex(null,ip)],r.prototype,"errorBar",void 0),i([n.Property(!0)],r.prototype,"enableTooltip",void 0),i([n.Collection([],rp)],r.prototype,"trendlines",void 0),i([n.Property("")],r.prototype,"tooltipMappingName",void 0),i([n.Property("SeriesType")],r.prototype,"legendShape",void 0),i([n.Property(1)],r.prototype,"minRadius",void 0),i([n.Property(null)],r.prototype,"selectionStyle",void 0),i([n.Property("Natural")],r.prototype,"splineType",void 0),i([n.Property(3)],r.prototype,"maxRadius",void 0),i([n.Property(.5)],r.prototype,"cardinalSplineTension",void 0),i([n.Property(null)],r.prototype,"columnWidth",void 0),i([n.Complex(null,up)],r.prototype,"emptyPointSettings",void 0),i([n.Complex(null,fp)],r.prototype,"cornerRadius",void 0),i([n.Property(0)],r.prototype,"columnSpacing",void 0),r}(n.ChildProperty)),pa=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property("Rotate45")],r.prototype,"labelIntersectAction",void 0),i([n.Complex(hy,eu)],r.prototype,"labelStyle",void 0),i([n.Property("")],r.prototype,"title",void 0),i([n.Property(null)],r.prototype,"zoomFactor",void 0),i([n.Complex({},ep)],r.prototype,"crosshairTooltip",void 0),i([n.Property("")],r.prototype,"labelFormat",void 0),i([n.Complex(cy,eu)],r.prototype,"titleStyle",void 0),i([n.Property(!1)],r.prototype,"isIndexed",void 0),i([n.Property(0)],r.prototype,"plotOffset",void 0),i([n.Property("Shift")],r.prototype,"edgeLabelPlacement",void 0),i([n.Property("BetweenTicks")],r.prototype,"labelPlacement",void 0),i([n.Property("Outside")],r.prototype,"tickPosition",void 0),i([n.Property(!1)],r.prototype,"opposedPosition",void 0),i([n.Property(!0)],r.prototype,"visible",void 0),i([n.Property("Outside")],r.prototype,"labelPosition",void 0),i([n.Property(0)],r.prototype,"labelRotation",void 0),i([n.Property(0)],r.prototype,"minorTicksPerInterval",void 0),i([n.Property(null)],r.prototype,"maximum",void 0),i([n.Property(null)],r.prototype,"minimum",void 0),i([n.Property(34)],r.prototype,"maximumLabelWidth",void 0),i([n.Property(null)],r.prototype,"interval",void 0),i([n.Complex({},ap)],r.prototype,"majorTickLines",void 0),i([n.Property(!1)],r.prototype,"enableTrim",void 0),i([n.Complex({},hp)],r.prototype,"majorGridLines",void 0),i([n.Complex({},vp)],r.prototype,"minorTickLines",void 0),i([n.Complex({},lp)],r.prototype,"lineStyle",void 0),i([n.Complex({},cp)],r.prototype,"minorGridLines",void 0),i([n.Property(!1)],r.prototype,"isInversed",void 0),i([n.Property(null)],r.prototype,"description",void 0),i([n.Property(0)],r.prototype,"startAngle",void 0),i([n.Property(100)],r.prototype,"coefficient",void 0),i([n.Collection([],op)],r.prototype,"stripLines",void 0),i([n.Property(2)],r.prototype,"tabIndex",void 0),i([n.Complex({color:null,width:0,type:"Rectangle"},sp)],r.prototype,"border",void 0),r}(n.ChildProperty),pp=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(!1)],r.prototype,"enableMarker",void 0),i([n.Property(!0)],r.prototype,"enable",void 0),i([n.Property(null)],r.prototype,"fill",void 0),i([n.Property(!1)],r.prototype,"shared",void 0),i([n.Property(.75)],r.prototype,"opacity",void 0),i([n.Property(null)],r.prototype,"header",void 0),i([n.Property(null)],r.prototype,"format",void 0),i([n.Complex(ay,eu)],r.prototype,"textStyle",void 0),i([n.Property(null)],r.prototype,"template",void 0),i([n.Complex({color:"#cccccc",width:.5},ir)],r.prototype,"border",void 0),i([n.Property(!0)],r.prototype,"enableAnimation",void 0),r}(n.ChildProperty),wp=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property("50%")],r.prototype,"x",void 0),i([n.Property("50%")],r.prototype,"y",void 0),r}(n.ChildProperty),bp=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Property(!1)],r.prototype,"enablePinchZooming",void 0),i([n.Property(!0)],r.prototype,"enableSelectionZooming",void 0),i([n.Property(!1)],r.prototype,"enableDeferredZooming",void 0),i([n.Property(!1)],r.prototype,"enableMouseWheelZooming",void 0),i([n.Property("XY")],r.prototype,"mode",void 0),i([n.Property(["Zoom","ZoomIn","ZoomOut","Pan","Reset"])],r.prototype,"toolbarItems",void 0),i([n.Property(!0)],r.prototype,"enableScrollbar",void 0),i([n.Property(!1)],r.prototype,"enablePan",void 0),r}(n.ChildProperty),kp=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),i([n.Complex({},yp)],r.prototype,"chartSeries",void 0),i([n.Complex({},pa)],r.prototype,"primaryXAxis",void 0),i([n.Complex({},pa)],r.prototype,"primaryYAxis",void 0),i([n.Property("")],r.prototype,"value",void 0),i([n.Property("")],r.prototype,"columnHeader",void 0),i([n.Property("-")],r.prototype,"columnDelimiter",void 0),i([n.Property(!1)],r.prototype,"enableMultipleAxis",void 0),i([n.Property("Stacked")],r.prototype,"multipleAxisMode",void 0),i([n.Property(!1)],r.prototype,"enableScrollOnMultiAxis",void 0),i([n.Property(!1)],r.prototype,"showMemberSeries",void 0),i([n.Property(!1)],r.prototype,"showPointColorByMembers",void 0),i([n.Complex({border:{color:null,width:.5},background:"transparent"},l.titleSettings)],r.prototype,"titleStyle",void 0),i([n.Property("")],r.prototype,"title",void 0),i([n.Complex({border:{color:null,width:.5},background:"transparent"},l.titleSettings)],r.prototype,"subTitleStyle",void 0),i([n.Property("")],r.prototype,"subTitle",void 0),i([n.Complex({color:"#DDDDDD",width:0},ir)],r.prototype,"border",void 0),i([n.Complex({},va)],r.prototype,"margin",void 0),i([n.Complex({border:{color:null,width:.5},background:"transparent"},by)],r.prototype,"chartArea",void 0),i([n.Property(null)],r.prototype,"background",void 0),i([n.Property("Material")],r.prototype,"theme",void 0),i([n.Property([])],r.prototype,"palettes",void 0),i([n.Complex({},ky)],r.prototype,"crosshair",void 0),i([n.Complex({},pp)],r.prototype,"tooltip",void 0),i([n.Complex(null,wp)],r.prototype,"pieCenter",void 0),i([n.Complex({},bp)],r.prototype,"zoomSettings",void 0),i([n.Property()],r.prototype,"legendSettings",void 0),i([n.Property("None")],r.prototype,"selectionMode",void 0),i([n.Property("None")],r.prototype,"accumulationSelectionMode",void 0),i([n.Property(!0)],r.prototype,"enableSmartLabels",void 0),i([n.Property(!0)],r.prototype,"enableBorderOnMouseMove",void 0),i([n.Property("None")],r.prototype,"highlightMode",void 0),i([n.Property("None")],r.prototype,"highlightPattern",void 0),i([n.Property(!0)],r.prototype,"enableExport",void 0),i([n.Property(!1)],r.prototype,"isMultiSelect",void 0),i([n.Collection([],wy)],r.prototype,"selectedDataIndexes",void 0),i([n.Property(!0)],r.prototype,"enableAnimation",void 0),i([n.Property(!1)],r.prototype,"enableCanvas",void 0),i([n.Property(!0)],r.prototype,"useGroupingSeparator",void 0),i([n.Property(!1)],r.prototype,"isTransposed",void 0),i([n.Property(1)],r.prototype,"tabIndex",void 0),i([n.Property(null)],r.prototype,"description",void 0),i([n.Event()],r.prototype,"resized",void 0),i([n.Property(!0)],r.prototype,"enableSideBySidePlacement",void 0),i([n.Event()],r.prototype,"loaded",void 0),i([n.Event()],r.prototype,"beforePrint",void 0),i([n.Event()],r.prototype,"animationComplete",void 0),i([n.Event()],r.prototype,"load",void 0),i([n.Event()],r.prototype,"textRender",void 0),i([n.Event()],r.prototype,"legendRender",void 0),i([n.Event()],r.prototype,"seriesRender",void 0),i([n.Event()],r.prototype,"multiLevelLabelRender",void 0),i([n.Event()],r.prototype,"pointRender",void 0),i([n.Event()],r.prototype,"tooltipRender",void 0),i([n.Event()],r.prototype,"legendClick",void 0),i([n.Event()],r.prototype,"axisLabelRender",void 0),i([n.Event()],r.prototype,"multiLevelLabelClick",void 0),i([n.Event()],r.prototype,"chartMouseClick",void 0),i([n.Event()],r.prototype,"chartMouseMove",void 0),i([n.Event()],r.prototype,"pointMove",void 0),i([n.Event()],r.prototype,"pointClick",void 0),i([n.Event()],r.prototype,"chartMouseDown",void 0),i([n.Event()],r.prototype,"chartMouseLeave",void 0),i([n.Event()],r.prototype,"dragComplete",void 0),i([n.Event()],r.prototype,"chartMouseUp",void 0),i([n.Event()],r.prototype,"scrollStart",void 0),i([n.Event()],r.prototype,"zoomComplete",void 0),i([n.Event()],r.prototype,"scrollChanged",void 0),i([n.Event()],r.prototype,"scrollEnd",void 0),i([n.Property(!0)],r.prototype,"showMultiLevelLabels",void 0),r}(n.ChildProperty),nf=function(){function t(){}return t.getCellSets=function(t,i,r,u,f){var s;this.engine=i;this.isMondrian=i.isMondrian;this.isMeasureAvail=i.isMeasureAvail;this.isPaging=i.isPaging;this.pageSettings=i.pageSettings;this.rows=i.rows;this.columns=i.columns;this.values=i.values;this.filters=i.filters;this.allowLabelFilter=i.allowLabelFilter;this.allowValueFilter=i.allowValueFilter;this.drilledMembers=i.updateDrilledItems(t.drilledMembers);this.calculatedFieldSettings=i.calculatedFieldSettings;this.valueAxis="row"===t.valueAxis?"rows":"columns";u&&(u.axis="row"===u.axis?"rows":"columns");this.filterMembers=n.extend({},i.filterMembers,null,!0);this.fieldDataObj=i.fieldListObj;this.fieldList=i.fieldList;this.cellSetInfo="\nDIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE";var h=this.getMeasuresQuery(this.values),e=this.getDimensionsQuery(this.rows,h,"rows",u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;"),o=this.getDimensionsQuery(this.columns,h,"columns",u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;");this.isPaging&&r&&void 0!==this.pageSettings?(e=(s=this.getPagingQuery(e,o)).rowQuery,o=s.columnQuery):this.isPaging&&!r&&void 0!==this.pageSettings&&(e=(s=this.getPagingCountQuery(e,o)).rowQuery,o=s.columnQuery);e=e.length>0?e+(this.isPaging&&!r?"":this.cellSetInfo+" ON ROWS"):"";o=o.length>0?o+(this.isPaging&&!r?"":this.cellSetInfo+" ON COLUMNS"):"";var l=this.getSlicersQuery(this.filters,"filters").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;"),a=this.getfilterQuery(this.filterMembers,t.cube).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;"),v=this.getCalculatedFieldQuery(this.calculatedFieldSettings).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;"),c=this.frameMDXQuery(e,o,l,a,v,r),y={catalog:t.catalog,cube:t.cube,url:t.url,request:c,LCID:t.localeIdentifier.toString(),roles:t.roles};i.mdxQuery=c.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/%280/g,'"').replace(/&apos;/g,"'");u&&(u.axis="rows"===u.axis?"row":"column");f||this.getTableCellData(y,this.isPaging&&!r?this.engine.generatePagingData.bind(this.engine):this.engine.generateEngine.bind(this.engine),u?{action:u.action,drillInfo:u}:{dataSourceSettings:t,action:"loadTableElements"})},t.getTableCellData=function(n,t,i){var r=this.engine.getConnectionInfo(n.url,n.LCID),u='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"> <Header><\/Header> <Body> <Execute xmlns="urn:schemas-microsoft-com:xml-analysis"> <Command> <Statement>'+n.request+"<\/Statement> <\/Command> <Properties> <PropertyList> <Catalog>"+n.catalog+"<\/Catalog> <LocaleIdentifier>"+r.LCID+"<\/LocaleIdentifier>"+(n.roles?"<Roles>"+n.roles+"<\/Roles>":"")+"<\/PropertyList> <\/Properties><\/Execute> <\/Body> <\/Envelope>";if(this.engine.doAjaxPost("POST",r.url,u,t,i),this.engine.errorInfo)throw this.engine.errorInfo;},t.frameMDXQuery=function(n,t,i,r,u,f){var e=this.isPaging&&!f?""!==u?"":"\nWITH":"\nSelect ";return t.length>0&&(e+=t),n.length>0&&(e=e+(t.length>0?this.isPaging&&!f?"":", ":"")+n),u+e+(this.isPaging&&!f?"\nMEMBER [Measures].[3d268ce0-664d-4092-b9cb-fece97175006] AS Count([e16a30d0-2174-4874-8dae-a5085a75a3e2]) MEMBER [Measures].[8d7fe8c1-f09f-410e-b9ba-eaab75a1fc3e] AS Count ([d1876d2b-e50e-4547-85fe-5b8ed9d629de])\nSELECT { [Measures].[3d268ce0-664d-4092-b9cb-fece97175006] , [Measures].[8d7fe8c1-f09f-410e-b9ba-eaab75a1fc3e] } ON AXIS(0)":"")+" "+r+i+"\nCELL PROPERTIES VALUE, FORMAT_STRING, FORMATTED_VALUE\n"},t.getPagingQuery=function(n,t){n=n.replace("NON EMPTY ( ","").slice(0,-1);t=t.replace("NON EMPTY ( ","").slice(0,-1);var e=n,i=(this.pageSettings.currentRowPage-1)*this.pageSettings.rowPageSize,r=(this.pageSettings.currentColumnPage-1)*this.pageSettings.columnPageSize,u=this.engine.isExporting&&this.engine.exportSpeciedPages&&this.engine.exportSpeciedPages.rowSize?this.engine.exportSpeciedPages.rowSize:3*this.pageSettings.rowPageSize,f=this.engine.isExporting&&this.engine.exportSpeciedPages&&this.engine.exportSpeciedPages.columnSize?this.engine.exportSpeciedPages.columnSize:3*this.pageSettings.columnPageSize;return i=this.engine.rowCount<i+u?this.engine.rowCount>u?this.engine.rowCount-u:0:i,this.engine.pageRowStartPos=i,r=this.engine.columnCount<r+f?this.engine.columnCount>f?this.engine.columnCount-f:0:r,this.engine.pageColStartPos=r,{rowQuery:""!==n?"\nSUBSET ({ "+(this.isMondrian?"":"NONEMPTY")+" ("+n+(this.isMondrian||""===t?"":","+t)+")},"+i+","+u+")":"",columnQuery:""!==t?"\nSUBSET ({ "+(this.isMondrian?"":"NONEMPTY")+" ("+t+(this.isMondrian||""===e?"":","+e)+")},"+r+","+f+")":""}},t.getPagingCountQuery=function(n,t){n=n.replace("NON EMPTY ( ","").slice(0,-1);t=t.replace("NON EMPTY ( ","").slice(0,-1);var i=n;return{rowQuery:""!==n?"SET [d1876d2b-e50e-4547-85fe-5b8ed9d629de] as "+(this.isMondrian?"":"NONEMPTY")+" ("+n+(this.isMondrian||""===t?"":","+t)+")\n":"",columnQuery:""!==t?"\nSET [e16a30d0-2174-4874-8dae-a5085a75a3e2] as "+(this.isMondrian?"":"NONEMPTY")+" ("+t+(this.isMondrian||""===i?"":","+i)+")\n":""}},t.getDimensionsQuery=function(n,t,i,r){var u="",f,o,e;if(n.length>0){for(u="\nNON EMPTY ( "+(this.drilledMembers.length>0?"HIERARCHIZE ({":""),f=0;f<n.length;)0===f?"[measures]"===n[f].name.toLowerCase()?""!==t&&(u+=t):u+="({"+this.getDimensionQuery(n[f],i)+"})":"[measures]"===n[f].name.toLowerCase()?""!==t&&(u=u+" * "+t):u=u+" * ({"+this.getDimensionQuery(n[f],i)+"})",f++;o=this.getDrillQuery(n,t,i,r);u=r&&r.axis===i?"\nNON EMPTY ( "+(this.drilledMembers.length>0?"HIERARCHIZE ({":"")+o.query:u+(""!==o.query?",":"")+o.query;e=this.getAttributeDrillQuery(n,t,i,r);u=u+(this.isPaging?(""!==e?"-":"")+e:"")+(this.drilledMembers.length>0?"})":"")+(this.isPaging?"":(""!==e?"-":"")+e)+")"}return u},t.getAttributeDrillQuery=function(n,t,i,r){var y,h="",f,c,a,o,u;y=r&&r.axis===i&&"down"===r.action.toLowerCase()?[{name:r.fieldName,items:[r.memberName],delimiter:"~~"}]:this.drilledMembers;for(var p=i===this.valueAxis?this.getMeasurePos(i):0,l=0,w=y;l<w.length;l++)if(f=w[l],this.engine.fieldList[f.name]&&this.engine.fieldList[f.name].isHierarchy)for(c=0,a=f.items;c<a.length;c++){for(var b=a[c],v=[],e=b.split(f.delimiter?f.delimiter:"~~"),s=this.getDrillLevel(n,e),k=this.getDimensionPos(i,f.name),d=n.length-(p>k?1:0),g=!!this.isPaging&&this.isAttributeMemberExist(f.name,b.split(f.delimiter?f.delimiter:"~~"),f.delimiter,e,i);s.level>0&&s.isDrill&&k+1!==p&&!g;){for(o=[],u=0;u<n.length;){if("[measures]"===n[u].name.toLowerCase())""!==t&&o.push(e[u]?"({{"+e[u]+"}})":"("+t+")");else if(e[u]&&(-1!==e[u].indexOf(n[u].name)||n[u].isNamedSet&&this.fieldList[n[u].name]&&-1!==e[u].indexOf(this.fieldList[n[u].name].pid.split("Sets_")[1])))o.push(this.getHierarchyQuery(e[u],!1,!1,!1,s.level,!0));else{if(e[u]||!n[u]){o=[];break}o.push(this.getHierarchyQuery(n[u].name,!!(this.isPaging&&2===s.level||!this.isPaging&&d>u),n[u].isNamedSet,n[u].isCalculatedField,s.level,!1))}u++}o.length>0&&v.push("("+o.join("*")+")");s.level--;d--}v.length>0&&(h=h+(""!==h?"-":"")+v.join(this.isPaging?"+":"-"))}return h},t.getDimensionPos=function(n,t){for(var r=0,u="rows"===n?this.rows:this.columns,i=0;i<u.length;i++)if(u[i].name===t){r=i;break}return r},t.getMeasurePos=function(n){for(var i=0,r="rows"===n?this.rows:this.columns,t=0;t<r.length;t++)if(0===r[t].name.indexOf("[Measures]")){i=t;break}return i},t.getDrillLevel=function(n,t){for(var r=n.length,u=!1,i=0;i<n.length;)t[i]&&-1!==t[i].indexOf(n[i].name)?(r-=1,n[i+1]&&!(n[i+1].isNamedSet||0===n[i+1].name.indexOf("[Measures]")||this.fieldList[n[i+1].name]&&!this.fieldList[n[i+1].name].hasAllMember)&&(u=!0)):(n[i].isNamedSet||0===n[i].name.indexOf("[Measures]")||this.fieldList[n[i].name]&&!this.fieldList[n[i].name].hasAllMember)&&(r-=1),i++;return{level:this.isPaging?2:r,isDrill:u}},t.getHierarchyQuery=function(n,t,i,r,u,f){return n=r?this.fieldList[n].tag:n,!this.fieldList[n]||this.fieldList[n].hasAllMember||i||r?i||r?"({"+n+"})":this.isPaging?"({"+n+(t?".CHILDREN})":f||1!==u?"})":".[All]})"):"({DrilldownLevel({"+n+(t?".CHILDREN":"")+"},,,INCLUDE_CALC_MEMBERS)})":"(("+n+").levels(0).AllMembers)"},t.isAttributeMemberExist=function(n,t,i,r,u){var o,s,f,h,e,c;if(t.splice(r.length-1,1),o=!1,""!==t.join(i)&&(!this.isPaging||1!==t.length||"[Measures]"!==t.join(i))&&this.engine.fieldList[n]&&this.engine.fieldList[n].hasAllMember)for(s=this.getDimensionPos(u,n),f=0;f<this.drilledMembers.length;f++)if(n!==this.drilledMembers[f].name&&this.engine.fieldList[this.drilledMembers[f].name]&&this.engine.fieldList[this.drilledMembers[f].name].isHierarchy)for(h=this.getDimensionPos(u,this.drilledMembers[f].name),e=0;e<this.drilledMembers[f].items.length;e++)if(c=this.getDrillLevel("rows"===u?this.rows:this.columns,this.drilledMembers[f].items[e].split(this.drilledMembers[f].delimiter?this.drilledMembers[f].delimiter:"~~")),(!this.isPaging||h<s&&c.isDrill)&&(0===this.drilledMembers[f].items[e].indexOf(t.join(i))||0===t.join(i).indexOf(this.drilledMembers[f].items[e]))){o=!0;break}return o},t.getDrillQuery=function(n,t,i,r){var l="",k=[],p=[],h=!1,f="",a,w,s,v,b,y;for(r&&r.axis===i&&"down"===r.action.toLowerCase()?(h=!0,p=[{name:r.fieldName,items:[r.memberName],delimiter:"~~"}]):p=this.drilledMembers,a=0,w=p;a<w.length;a++)if(s=w[a],!this.engine.fieldList[s.name]||!this.engine.fieldList[s.name].isHierarchy)for(v=0,b=s.items;v<b.length;v++){for(var d=b[v],o=[],c=[],u=0,e=d.split(s.delimiter?s.delimiter:"~~"),g=this.isAttributeMemberExist(s.name,d.split(s.delimiter?s.delimiter:"~~"),s.delimiter?s.delimiter:"~~",e,i);u<n.length&&!g;){if(e[u]&&-1!==e[u].indexOf(n[u].name))-1!==e[e.length-1].indexOf(n[u].name)?h?f=f+(""!==f?" * ":"")+"({"+e[u]+".CHILDREN})":(o.push("("+e[u]+".CHILDREN)"),c.push("("+e[u]+")")):"[measures]"===e[u].toLowerCase()&&""!==t?h?f=f+(""!==f?" * ":"")+"("+t+")":(o.push("("+t+")"),c.push("("+t+")")):-1!==e[u].toLowerCase().indexOf("[measures]")?h?f=f+(""!==f?" * ":"")+"({"+e[u]+"})":(o.push("({"+e[u]+"})"),c.push("({"+e[u]+"})")):h?f=f+(""!==f?" * ":"")+"({"+e[u]+"})":(o.push("("+e[u]+")"),c.push("("+e[u]+")"));else{if(e[u]||!n[u]){o=[];break}"[measures]"===n[u].name.toLowerCase()&&""!==t?h?f=f+(""!==f?" * ":"")+"("+t+")":(o.push("("+t+")"),c.push("("+t+")")):(y=this.getDimensionQuery(n[u],i),h?f=f+(""!==f?" * ":"")+"({"+y+"})":(o.push("("+y+")"),c.push("("+y+")")))}u++}o.length>0&&o.length<e.length&&(o=[],c=[]);l=l+(""!==l&&o.length>0?",":"")+(o.length>0?"("+o.toString()+")":"");c.length>0&&k.push("("+c.toString()+")")}return{query:h?f:l,collection:h?[f]:k}},t.getSlicersQuery=function(t,i){var f=this,r="",e=n.extend([],this.rows,null,!0),u;if(e=e.concat(this.columns),t.length>0){for(u=0;u<t.length;)e.filter(function(n){var i=f.getDimensionUniqueName(n.name),r=f.getDimensionUniqueName(t[u].name);return i===r&&!(f.isMondrian&&""===r&&""===i)}).length>0||(void 0===t[u].name||this.filterMembers[t[u].name]?this.filterMembers[t[u].name]&&(r=r+(""!==r?" * ":"")+"{"+this.filterMembers[t[u].name].toString()+"}"):r=r+(""!==r?" * ":"")+"{"+this.getDimensionQuery(t[u],i)+"}"),u++;r=""===r?"":"\nWHERE ("+r.replace(/DrilldownLevel/g,"")+")"}return r},t.getDimensionQuery=function(n,t){var i=n.isCalculatedField?this.fieldList[n.name].tag:n.name;return this.fieldList[n.name]&&this.fieldList[n.name].hasAllMember||n.isNamedSet||n.isCalculatedField?n.isNamedSet||n.isCalculatedField?"{"+i+"}":this.isPaging?i+".CHILDREN":"DrilldownLevel({"+i+"}"+("rows"===t||"columns"===t?",,,INCLUDE_CALC_MEMBERS":"")+")":"(("+i+").levels(0).AllMembers)"},t.getDimensionUniqueName=function(n){var f=this.fieldDataObj.hierarchy,i=[],t,r,u;if(f){for(t=0,r=f;t<r.length;t++)u=r[t],u.id.toLowerCase()===n.toLowerCase()&&i.push(u);return i.length>0?i[0].pid:""}return n.split(".")[0]},t.getMeasuresQuery=function(n){var t="",r,f;if(n.length>0){t="{{";for(var i="",u=0,e=n;u<e.length;u++)r=e[u],f=r.isCalculatedField?this.fieldList[r.name].tag:r.name,i=i.length>0?i+", "+f:f;t=t+i+"}}"}return t},t.getfilterQuery=function(n,t){for(var a,d,g,v,nt,ot,y,it,st,p,rt,o,u,w,b,s="\nFROM ["+t+"]",r="\nFROM( SELECT (",c=[],l=[],f=[],e=[],k=0,ft=this.rows;k<ft.length;k++)n[(i=ft[k]).name]&&n[i.name].length>0&&("string"==typeof n[i.name][0]?f.push(n[i.name]):(n[i.name][1]=n[i.name][0].type,c.push(n[i.name]),delete n[i.name]));for(a=0,d=this.columns;a<d.length;a++)n[(i=d[a]).name]&&n[i.name].length>0&&("string"==typeof n[i.name][0]?e.push(n[i.name]):(g=n[i.name],g[1]=g[0].type,c.push(n[i.name]),delete n[i.name]));for(v=0,nt=this.filters;v<nt.length;v++){for(var i=nt[v],h=!1,tt=0,et=this.columns;tt<et.length;tt++)ot=et[tt],h||this.getDimensionUniqueName(ot.name)!==this.getDimensionUniqueName(i.name)||n[i.name]&&(e.push(n[i.name]),h=!0);if(!h)for(y=0,it=this.rows;y<it.length;y++)st=it[y],h||this.getDimensionUniqueName(st.name)!==this.getDimensionUniqueName(i.name)||n[i.name]&&(f.push(n[i.name]),h=!0)}if((this.allowLabelFilter||this.allowValueFilter)&&c.length>0)for(p=0,rt=["Value","Label"];p<rt.length;p++)for(var ct=rt[p],ut=0,ht=c;ut<ht.length;ut++)o=ht[ut],o&&2===o.length&&"string"==typeof o[1]&&o[1]===ct&&l.push(this.getAdvancedFilterQuery(o[0],r,"COLUMNS"));for(u=0,w=e.length;u<w;u++)r=0===u?r+"{"+e[u].toString()+"}":r+",{"+e[u].toString()+"}";for(e.length>0&&(r=f.length>0?r+" ) ON COLUMNS ,(":r+" ) ON COLUMNS"),u=0,w=f.length;u<w;u++)r=u>0?r+",{"+f[u].toString()+"}":r+"{"+f[u].toString()+"}";return r=e.length>0&&f.length>0?r+=") ON ROWS ":0===e.length&&f.length>0?r+") ON COLUMNS ":r,b="",l.length>0&&(b=l.join(" ")+" "+(e.length>0||f.length>0?r:"")+" "+s+Array(l.length+1+(e.length>0||f.length>0?1:0)).join(")")),s=0===e.length&&0===f.length?s:r+s+")",b.length>0?b:s},t.getAdvancedFilterQuery=function(n,t,i){return"\nFROM (SELECT Filter("+n.selectedField+".AllMembers, "+this.getAdvancedFilterCondtions(n.name,n.condition,n.value1,n.value2,n.type,n.measure)+")) on "+i},t.getAdvancedFilterCondtions=function(n,t,i,r,u,f){var e="";switch(t){case"Equals":e="("+("Value"!==u?n+'.CurrentMember.member_caption ="'+i+'"':f+" = "+i);break;case"DoesNotEquals":e="("+("Value"!==u?n+'.CurrentMember.member_caption <>"'+i+'"':f+" <>"+i);break;case"Contains":default:e="( InStr (1,"+n+'.CurrentMember.member_caption,"'+i+'") >0';break;case"DoesNotContains":e="( InStr (1,"+n+'.CurrentMember.member_caption,"'+i+'")=0';break;case"BeginWith":e="( Left ("+n+".CurrentMember.member_caption,"+i.length+')="'+i+'"';break;case"DoesNotBeginWith":e="( Left ("+n+".CurrentMember.member_caption,"+i.length+') <>"'+i+'"';break;case"EndsWith":e="( Right ("+n+".CurrentMember.member_caption,"+i.length+')="'+i+'"';break;case"DoesNotEndsWith":e="( Right ("+n+".CurrentMember.member_caption,"+i.length+') <>"'+i+'"';break;case"GreaterThan":e="("+("Value"!==u?n+'.CurrentMember.member_caption >"'+i+'"':f+" >"+i);break;case"GreaterThanOrEqualTo":e="("+("Value"!==u?n+'.CurrentMember.member_caption >="'+i+'"':f+" >="+i);break;case"LessThan":e="("+("Value"!==u?n+'.CurrentMember.member_caption <"'+i+'"':f+" <"+i);break;case"LessThanOrEqualTo":e="("+("Value"!==u?n+'.CurrentMember.member_caption <="'+i+'"':f+" <="+i);break;case"Between":e="("+("Value"!==u?n+'.CurrentMember.member_caption >="'+i+'"AND '+n+'.CurrentMember.member_caption <="'+r+'"':f+" >="+i+" AND "+f+" <="+r);break;case"NotBetween":e="("+("Value"!==u?n+'.CurrentMember.member_caption >="'+i+'"OR '+n+'.CurrentMember.member_caption <="'+r+'"':f+" >="+i+" OR "+f+" <="+r)}return e},t.getCalculatedFieldQuery=function(t){var u="",r,f;if(t.length>0)for(u="\nWITH",r=0,f=t;r<f.length;r++){var i=f[r],o=(i.formula.indexOf("Measure")>-1?"[Measures].":i.hierarchyUniqueName+".")+"["+i.name+"]",e=n.isNullOrUndefined(i.formatString)?null:i.formatString;u+="\nMEMBER "+o+"as ("+i.formula+") "+(n.isNullOrUndefined(e)?"":', FORMAT_STRING ="'+e.trim()+'"')}return u},t}(),wa=function(){function t(){this.fieldList={};this.columnCount=0;this.rowCount=0;this.colFirstLvl=0;this.rowFirstLvl=0;this.pageColStartPos=0;this.enableSort=!1;this.enableValueSorting=!1;this.dataFields={};this.formatFields={};this.filterMembers={};this.drilledSets={};this.isExporting=!1;this.aggregatedValueMatrix=[];this.mappingFields={};this.formatRegex=/^(?:[ncpae])(?:([0-9]|1[0-9]|20))?$/i;this.clonedValTuple=[];this.clonedColumnTuple=[];this.clonedRowTuple=[];this.requestHeaders={};this.pivotValues=[];this.valueContent=[];this.headerContent=[];this.rowStartPos=0;this.pageRowStartPos=0;this.tupColumnInfo=[];this.tupRowInfo=[];this.gridJSON="";this.namedSetsPosition={};this.colDepth=0;this.levelUniqueName={};this.totalCollection=[];this.parentObjCollection={};this.curDrillEndPos=-1;this.headerGrouping={};this.lastLevel=[];this.showRowSubTotals=!0;this.showColumnSubTotals=!0;this.hideRowTotalsObject={};this.hideColumnTotalsObject={};this.sortObject={};this.isColDrill=!1}return t.prototype.renderEngine=function(t,i,r,u,f){if(this.isEmptyData=!1,this.getHeaderSortInfo=r,this.getBeforeSeviceInvoke=u,this.getAfterSeviceInvoke=f,this.mdxQuery="",this.isMeasureAvail=!1,this.allowMemberFilter=!1,this.allowLabelFilter=!1,this.allowValueFilter=!1,this.isMondrian=!1,this.aggregatedValueMatrix=[],this.measureReportItems=[],this.calcChildMembers=[],this.selectedItems=[],this.savedFieldList=void 0,this.savedFieldListData=void 0,this.formatFields={},this.filterMembers={},this.dataFields={},this.valueAxis="",this.columnCount=0,this.rowCount=0,this.colFirstLvl=0,this.rowFirstLvl=0,this.pageColStartPos=0,this.sortObject={},this.globalize=new n.Internationalization,this.locale=this.globalize.culture?this.globalize.culture:"en-US",this.localeObj=i?i.localeObj:void 0,this.enableValueSorting=!!i&&i.enableValueSorting,t.url){this.dataSourceSettings=t;this.measureIndex=n.isNullOrUndefined(t.valueIndex)?-1:t.valueIndex;this.valueAxis="row"===t.valueAxis?"row":"column";this.getAxisFields();this.formats=t.formatSettings?t.formatSettings:[];this.enableSort=void 0===t.enableSorting||t.enableSorting;this.valueSortSettings=t.valueSortSettings?t.valueSortSettings:void 0;this.filterSettings=t.filterSettings?t.filterSettings:[];this.sortSettings=t.sortSettings?t.sortSettings:[];this.allowMemberFilter=!!t.allowMemberFilter;this.allowLabelFilter=!!t.allowLabelFilter;this.allowValueFilter=!!t.allowValueFilter;this.drilledMembers=t.drilledMembers?this.updateDrilledItems(t.drilledMembers):[];this.calculatedFieldSettings=t.calculatedFieldSettings?t.calculatedFieldSettings:[];this.emptyCellTextContent=t.emptyCellsTextContent?t.emptyCellsTextContent:"";this.pageSettings=i?i.pageSettings?i.pageSettings:this.pageSettings:void 0;this.isPaging=!(!this.pageSettings||!i.enablePaging&&!i.enableVirtualization);this.frameSortObject();this.getFormattedFields(this.formats);this.savedFieldList=i?i.savedFieldList:void 0;this.savedFieldListData=i?i.savedFieldListData:void 0;this.fieldListData=[];this.fieldListObj={};this.setNamedSetsPosition();this.savedFieldList&&Object.keys(this.savedFieldList).length>0&&this.savedFieldListData?this.updateFieldlist(!0):(this.getCubes(t),this.getFieldList(t));this.loadCalculatedMemberElements(this.calculatedFieldSettings);var e=this.getMeasureInfo();this.olapVirtualization=this.isPaging&&t.showSubTotals&&e.measureIndex===("column"===e.measureAxis?t.columns.length-1:t.rows.length-1)&&!n.isNullOrUndefined(this.pageSettings)&&t.showGrandTotals;this.isPaging=this.isPaging?!this.olapVirtualization:this.isPaging;this.measureReportItems=[];this.updateFilterItems(this.filterSettings);this.generateGridData(t)}},t.prototype.generateGridData=function(n,t){var i=!(!t||"navPaging"!==t||!this.isPaging||void 0===this.pageSettings);this.rows.length>0||this.columns.length>0||this.values.length>0||this.filters.length>0?nf.getCellSets(n,this,i):(nf.getCellSets(n,this,!0,void 0,!0),this.generateEngine(void 0,void 0,{dataSourceSettings:n,action:"loadTableElements"}))},t.prototype.generatePagingData=function(n,t,i){var u=[].slice.call(n.querySelectorAll("Axes, CellData")),r=u[1]?u[1].querySelectorAll("FmtValue"):null,f;r&&r.length>0&&(this.columnCount=Number(r[0].textContent),this.rowCount=Number(r[1].textContent));f=i.dataSourceSettings;nf.getCellSets(f,this,!0)},t.prototype.scrollPage=function(){if(this.olapVirtualization){var n=this.getVirtualScrollingData(this.clonedColumnTuple,this.clonedRowTuple);n.isCalculated&&(this.pivotValues=[],this.clearEngineProperties(),this.performEngine(n.columnTuple,n.rowTuple,n.valueTuple));this.pivotValues=this.pivotValues.slice()}else nf.getCellSets(this.dataSourceSettings,this,!0)},t.prototype.getVirtualScrollingData=function(t,i){var w=this.clonedValTuple.slice(),d=!1,f=(this.pageSettings.currentColumnPage-1)*this.pageSettings.columnPageSize,e=(this.pageSettings.currentRowPage-1)*this.pageSettings.rowPageSize,r=3*this.pageSettings.columnPageSize,u=3*this.pageSettings.rowPageSize,g;if(f=this.columnCount<f+r?this.columnCount>r?this.columnCount-r:0:f,e=this.rowCount<e+u?this.rowCount>u?this.rowCount-u:0:e,f!==this.pageColStartPos||e!==this.pageRowStartPos||!(t.length<=r&&i.length<=u)){d=!0;var l=this.getMeasureInfo(),a=!n.isNullOrUndefined(t[0])&&0===Number(t[0].querySelectorAll("Member")[0].querySelector("LNum").textContent)&&t[0].querySelectorAll("Member")[0].querySelector("MEMBER_VALUE").textContent.startsWith("All"),v=!n.isNullOrUndefined(i[0])&&0===Number(i[0].querySelectorAll("Member")[0].querySelector("LNum").textContent)&&i[0].querySelectorAll("Member")[0].querySelector("MEMBER_VALUE").textContent.startsWith("All"),nt=!!a&&f+r>=t.length-1,tt=!!v&&e+u>=i.length-1,b=a?this.getAxisdepth(t):"column"===l.measureAxis?l.valueInfo.length:1,k=v?this.getAxisdepth(i):"row"===l.measureAxis?l.valueInfo.length:1,h=(a?b:0)+f,c=(v?k:0)+e,o=t.slice(h,h+r),s=i.slice(c,c+u),it=o[0]?Number(o[0].querySelectorAll("Member")[0].querySelector("LNum").textContent):0,rt=s[0]?Number(s[0].querySelectorAll("Member")[0].querySelector("LNum").textContent):0,y=this.getVirtualTotals(t.slice(0,h),it,nt,"column",b),p=this.getVirtualTotals(i.slice(0,c),rt,tt,"row",k);h=o.length+y.totalsCollection.length>r?Math.max(o.length+y.totalsCollection.length-r):0;c=s.length+p.totalsCollection.length>u?Math.max(s.length+p.totalsCollection.length-u):0;o=y.totalsCollection.concat(o.slice(h,o.length));s=p.totalsCollection.concat(s.slice(c,s.length));g=this.getVirtualValues(w,f+h,e+c,r,u,y.indexCollection,p.indexCollection,t.length,i.length,b,k,a,v);t=o.slice();i=s.slice();w=g.slice()}return this.pageColStartPos=f,this.pageRowStartPos=e,{columnTuple:t,rowTuple:i,valueTuple:w,isCalculated:d}},t.prototype.getAxisdepth=function(n){for(var i=0,t=0;t<n.length&&0===Number(n[t].querySelectorAll("Member")[0].querySelector("LNum").textContent);t++)i++;return i},t.prototype.getVirtualTotals=function(n,t,i,r,u){var e=[],o=[],f,s,h;if(1!==t)for(f=n.length-1;f>0;f--){if(s=Number(n[f].querySelectorAll("Member")[0].querySelector("LNum").textContent),0===s)break;if(t>s)if(t=s,Number(n[f-1].querySelectorAll("Member")[0].querySelector("LNum").textContent)===s){for(h=0;h<u;h++)e[e.length]=n[f-h],o[o.length]=f-h;f=u>1?f-(u-1):f}else e[e.length]=n[f],o[o.length]=f;else if(1===s)break}if(i)for(f=u;f>0;f--)e=e.concat([n[f-1]]),o=o.concat([f-1]);return{totalsCollection:e.reverse(),indexCollection:o.reverse()}},t.prototype.getVirtualValues=function(n,t,i,r,u,f,e,o,s,h,c,l,a){var w=[],y=n,b,p,v,k,nt;if(s>u){for(b=((a?c:0)+i)*o,y=n.slice(b,b+u*o),p=[],v=0;v<e.length;v++)p=p.concat(n.slice(e[v]*o,e[v]*o+o));y=p.concat(y)}for(k=t+(l?h:0),nt=(v=0,y.length/o);v<nt;v++){for(var tt=y.slice(v*o,v*o+o),it=tt.slice(k,k+r),d=[],g=0;g<f.length;g++)d[d.length]=tt[f[g]];w=w.concat(d.concat(it))}return w},t.prototype.generateEngine=function(t,i,r){var l,f,o,s,a,h;"down"!==r.action&&this.clearEngineProperties();this.xmlDoc=t?t.cloneNode(!0):void 0;this.request=i;this.customArgs=r;this.parentObjCollection={};this.curDrillEndPos=-1;this.onDemandDrillEngine=[];this.getSubTotalsVisibility();this.xmlaCellSet=t?t.querySelectorAll("Axes, CellData"):void 0;var e=this.xmlaCellSet&&this.xmlaCellSet.length>0?[].slice.call(this.xmlaCellSet[0].querySelectorAll('Axis[name|="Axis0"] Tuple')):[],c=this.xmlaCellSet&&this.xmlaCellSet.length>0?[].slice.call(this.xmlaCellSet[0].querySelectorAll('Axis[name|="Axis1"] Tuple')):[],u=this.xmlaCellSet&&this.xmlaCellSet.length>1?[].slice.call(this.xmlaCellSet[1].querySelectorAll("Cell")):[];if(this.olapVirtualization&&!n.isNullOrUndefined(this.pageSettings)){if(e.length*c.length!==u.length){for(l=[],f=0;f<u.length;f++)n.isNullOrUndefined(u[f])||(l[Number(u[f].getAttribute("CellOrdinal"))]=u[f]);u=l}this.clonedValTuple=u;o=this.getDrillInfo("columns");s=this.getActualTuples(e,o);o=this.getDrillInfo("rows");a=this.getActualTuples(c,o,s.indexColls,e.length);this.clonedColumnTuple=s.tupColls;this.clonedRowTuple=a.tupColls;this.columnCount=this.clonedColumnTuple.length;this.rowCount=this.clonedRowTuple.length;s=a=void 0;h=this.getVirtualScrollingData(this.clonedColumnTuple,this.clonedRowTuple);this.performEngine(h.columnTuple,h.rowTuple,h.valueTuple)}else this.performEngine(e,c,u)},t.prototype.getDrillInfo=function(n){var i={},r=[],u,e,f,t;if("columns"===n?r=this.dataSourceSettings.columns.map(function(n){return n.name}):"rows"===n&&(r=this.dataSourceSettings.rows.map(function(n){return n.name})),r.length>0)for(u=0,e=this.drilledMembers.length;u<e;u++)f=this.drilledMembers[u],t=r.indexOf(f.name),t>-1&&(i[t]||(i[t]=[]),i[t]=i[t].concat(f.items));return i},t.prototype.getActualTuples=function(n,t,i,r){var f=[],e=[],u=[],s;if(n.length>0)for(var h=function(o){for(var l,w,b,a=n[o],h=!0,v=!1,y=!1,p=a.getElementsByTagName("MEMBER_TYPE"),k=a.getElementsByTagName("UName"),s=0,d=p.length;s<d;s++)if(l=Number(p[s].textContent),w=k[s].textContent,y&&l<2?h=!1:2===l?v=!0:v&&l<2&&(h=!1),t[s]&&t[s].indexOf(w)>-1&&(y=!0),!h)break;h&&((f[f.length]=a,i)?(b=c.clonedValTuple.slice(o*r,o*r+r),u=u.concat(i.map(function(n){return b[n]}))):e[e.length]=o)},c=this,o=0,l=n.length;o<l;o++)h(o);else i&&(s=this.clonedValTuple.slice(0,r),u=u.concat(i.map(function(n){return s[n]})));return u.length>0&&(this.clonedValTuple=u),{tupColls:f,indexColls:e}},t.prototype.clearEngineProperties=function(){this.pivotValues=[];this.valueContent=[];this.headerContent=[];this.colDepth=0;this.tupColumnInfo=[];this.tupRowInfo=[];this.colMeasures={};this.colMeasurePos=void 0;this.rowMeasurePos=void 0;this.rowStartPos=-1;this.levelUniqueName={}},t.prototype.performEngine=function(t,i,r){var s,f,h,c,e,u,o;for(this.totalCollection=[],s=this.getMeasureInfo(),this.drilledMembers.length>0&&(f=void 0,h=t.length&&i.length?t.length*i.length:t.length?t.length:i.length,t=(f=this.frameMeasureOrder(s,"column",t,r,t.length,h)).orderedHeaderTuples,r=f.orderedValueTuples,i=(f=this.frameMeasureOrder(s,"row",i,r,t.length,h)).orderedHeaderTuples,r=f.orderedValueTuples),"down"===this.customArgs.action&&this.updateTupCollection("row"===this.customArgs.drillInfo.axis?i.length:t.length),e={},u=0;u<r.length;u++)n.isNullOrUndefined(r[u])||(e[this.olapVirtualization?u:Number(r[u].getAttribute("CellOrdinal"))]=r[u]);if(this.valueSortSettings.columnIndex=void 0,this.enableValueSorting&&this.valueSortSettings&&!this.isPaging&&!this.olapVirtualization&&(c=this.getValueSortInfo(t,i,s)),"down"===this.customArgs.action&&"column"!==this.customArgs.drillInfo.axis||(this.frameColumnHeader(t),this.isPaging||this.olapVirtualization||this.performColumnSorting(e,c)),"down"===this.customArgs.action&&"row"!==this.customArgs.drillInfo.axis||(this.frameRowHeader(i),this.isPaging||this.olapVirtualization||this.performRowSorting(e,c)),this.frameValues(e,t.length),this.performColumnSpanning(),!this.isPaging&&!this.olapVirtualization&&this.enableSort)for(o=0;o<this.headerContent.length;o++)this.headerContent[o]=this.pivotValues[o];this.isEngineUpdated=!0;this.isEmptyData=0===t.length},t.prototype.getValueSortInfo=function(n,t,i){var s,r,f,c,o,l,a;if(this.valueSortSettings.headerText){r=this.valueSortSettings.headerText.split(this.valueSortSettings.headerDelimiter);f=r.indexOf("Grand Total");f>-1&&(c=r.join("").split(r[f]).join(""),(r=[])[i.measureIndex]=c);for(var h="",u=i.measureIndex,e=0;e<this.dataSourceSettings.values.length;e++)if(u=r.indexOf(this.dataSourceSettings.values[e].caption),this.dataSourceSettings.values[e].caption===r[u]){r[u]=this.fieldList[this.dataSourceSettings.values[e].name].name;h=r[u];break}-1!==u&&(u<i.measureIndex&&(r=this.reArrangeHeaders(r,i.measureIndex,h)),o="column"===this.olapValueAxis?n:t,o.length>0&&(l=o[0].getElementsByTagName("Member").length-(f>-1?u:0),a=this.getParentElement(o,r,l,i.measureIndex,h,f>-1)[0],s=o.indexOf(a)))}return{memberIndex:s,columnLength:n.length,rowLength:t.length,isValueSorting:s>-1}},t.prototype.getParentElement=function(t,i,r,u,f,e){for(var l,c,v,s=[],a=0,w=!1,y=!1,o=t[0].getElementsByTagName("Member").length-r,h=0;h<t.length;h++){if(n.isNullOrUndefined(t[h].getElementsByTagName("Member")[o])){s=[];break}var d=t[h].getElementsByTagName("UName")[o].textContent,g=t[h].getElementsByTagName("Caption")[o].textContent,b=Number(t[h].getElementsByTagName("LNum")[o].textContent),k=d===i[o]||g===i[o]||n.isNullOrUndefined(i[o])&&0===b;if(k){if(s[s.length]=t[h],w=!0,a=b,e)break}else{if(w&&a<b){for(l=[],c=h;c<t.length;c++){var nt=t[c].getElementsByTagName("UName")[o].textContent,tt=t[c].getElementsByTagName("Caption")[o].textContent,p=Number(t[c].getElementsByTagName("LNum")[o].textContent),it=nt===i[o+1]||tt===i[o+1]||n.isNullOrUndefined(i[o+1])&&0===p;if(a+1===p&&it)l[l.length]=t[c],y=!0;else if(a+1<p){if(!y)break;l[l.length]=t[c]}else if(a+1>p)break}y&&(v=i.slice(0,o).concat(i.slice(o+1,i.length)),v.indexOf(f)<u&&(v=this.reArrangeHeaders(v,u,f)),s=this.getParentElement(l,v,l[0].getElementsByTagName("Member").length,u,f));break}if(w&&!k)break}}return e||o<i.length-1&&s.length>0&&!y&&(s=this.getParentElement(s,i,r-1,u,f)),s},t.prototype.reArrangeHeaders=function(n,t,i){var r=n.indexOf(i),u=n.slice(0,r),f=n.slice(r+1,n.length);return u[t]=n[r],u.concat(f)},t.prototype.getSubTotalsVisibility=function(){var i,n,t;this.showRowSubTotals=this.dataSourceSettings.showRowSubTotals&&this.dataSourceSettings.showSubTotals;this.showColumnSubTotals=this.dataSourceSettings.showColumnSubTotals&&this.dataSourceSettings.showSubTotals;this.showSubTotalsAtTop=this.showColumnSubTotals&&"Top"===this.dataSourceSettings.subTotalsPosition;this.showSubTotalsAtBottom=this.showRowSubTotals&&"Bottom"===this.dataSourceSettings.subTotalsPosition;this.hideRowTotalsObject={};this.hideColumnTotalsObject={};i=1;do{if(1===i){if(this.showColumnSubTotals)for(n=0;n<this.dataSourceSettings.columns.length;n++)!1===this.dataSourceSettings.columns[n].showSubTotals&&(this.hideColumnTotalsObject[this.dataSourceSettings.columns[n].name]=n)}else if(this.showRowSubTotals)for(t=0;t<this.dataSourceSettings.rows.length;t++)!1===this.dataSourceSettings.rows[t].showSubTotals&&(this.hideRowTotalsObject[this.dataSourceSettings.rows[t].name]=t);i++}while(i<3)},t.prototype.frameRowHeader=function(n){var wt=this,u,at,b,y,vt,tt,ni,a,ti,yt,et,pt,e,ot;this.headerGrouping={};this.lastLevel=[];var bt=!0,r=this.pivotValues.length,f=[],c=[];"down"!==this.customArgs.action?(f=this.pivotValues,c=this.valueContent):r=this.customArgs.drillInfo.currentCell.rowIndex+1;this.rowStartPos=this.rowStartPos>0?this.rowStartPos:r;for(var st,ht,o,p,i=0,rt=[],w={},ui=[],ct=!1,ut=-1,lt=-1,kt=[],h=[{actualText:"Grand Total",axis:"row",colIndex:0,formattedText:"Grand Total",hasChild:!1,level:-1,rowIndex:0,index:[],type:"grand sum",ordinal:0,colSpan:1,rowSpan:1,memberType:2,isDrilled:!1,valueSort:{"Grand Total":1,levelName:"Grand Total"}}],dt=[],fi=this.customArgs.drillInfo&&"row"===this.customArgs.drillInfo.axis?this.customArgs.drillInfo.currentCell.ordinal+1:0;i<n.length;)u=n[i].querySelectorAll("Member"),dt=this.frameTupCollection(u,dt,i+fi,this.tupRowInfo,this.showRowSubTotals,this.hideRowTotalsObject,"row"),i++;i=0;at=n.length;"down"===this.customArgs.action&&(b=this.customArgs.drillInfo.currentCell.ordinal+1,i=b,at+=b,ht=this.tupRowInfo[b-1].allCount,st=this.tupRowInfo[b-1].allStartPos,p=this.tupRowInfo[b-1]);for(var ei=i,l=0,gt=!1,ft=[];i<at;){u=n["down"===this.customArgs.action?i-(this.customArgs.drillInfo.currentCell.ordinal+1):i].querySelectorAll("Member");var t=0,k=void 0,d=this.tupRowInfo[i].allCount,v=this.tupRowInfo[i].allStartPos,g=this.tupRowInfo[i].measure,s=this.tupRowInfo[i].typeCollection,nt=this.tupRowInfo[i].drillStartPos,oi=this.tupRowInfo[i].startDrillUniquename;if(0===i||i===ei){for(y="down"===this.customArgs.action?this.tupRowInfo[0].members:u;t<y.length;)kt[t]="1"===y[t].querySelector("MEMBER_TYPE").textContent&&0===Number(y[t].querySelector("LNum").textContent)?0:Number(y[t].querySelector("LNum").textContent),"1"===y[t].querySelector("MEMBER_TYPE").textContent?(w[t]=0,ut=-1===ut?t:ut,lt=t):(w[t]=1,ct="3"!==y[t].querySelector("MEMBER_TYPE").textContent||ct),t++;o=s.indexOf("3")}if(t=0,0===i&&(u.length>d+(g?1:0)||1===u.length&&g)&&h.pop(),0===i&&this.isPaging?0===h.length:!ct||d===ht||v!==st||1===u.length&&g){if(vt=this.checkAttributeDrill(this.tupRowInfo[i].drillInfo,"rows"),tt=!(nt>-1)||!(d>0)||vt||v>nt,tt=p&&tt&&nt>-1?p.startDrillUniquename!==oi||!(lt>p.measurePosition||p.measureName===this.tupRowInfo[i].measureName||v!==nt+1&&this.tupRowInfo[i].measurePosition!==nt+1):tt,ni=!(ut>-1&&d>0)||vt||v>lt,(gt="Top"===this.dataSourceSettings.grandTotalsPosition&&0===this.olapRowValueIndex&&"row"===this.olapValueAxis&&this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals&&("row"!==this.olapValueAxis||this.dataSourceSettings.rows.length>1))&&1===h.length&&(h=this.frameGrandTotalValues(n,h,s,o)),u.length===d+(g?1:0)&&g&&!gt)a="Grand Total"+this.valueSortSettings.headerDelimiter+this.dataFields[this.getUniqueName(u[o].querySelector("UName").textContent)].caption?this.dataFields[this.getUniqueName(u[o].querySelector("UName").textContent)].caption:0,ti="3"===s[o]&&this.dataFields[this.getUniqueName(u[o].querySelector("UName").textContent)]&&this.dataFields[this.getUniqueName(u[o].querySelector("UName").textContent)].caption?this.dataFields[this.getUniqueName(u[o].querySelector("UName").textContent)].caption:u[o].querySelector("Caption").textContent,(h=this.frameGrandTotalAxisSet(h,this.getUniqueName(u[o].querySelector("UName").textContent),ti,r,i,Number(s[o]),u[o].querySelector("PARENT_UNIQUE_NAME")?u[o].querySelector("PARENT_UNIQUE_NAME").textContent:void 0,u[o].querySelector("LName").textContent,u[o].getAttribute("Hierarchy"),{levelName:a,axis:u[o].getAttribute("Hierarchy")}))[h.length-1].valueSort[a]=1;else if(0!==v&&(0!==o||1!==v)&&tt&&ni){for("Top"===this.dataSourceSettings.grandTotalsPosition&&bt&&this.dataSourceSettings.showGrandTotals&&("row"!==this.olapValueAxis||this.dataSourceSettings.rows.length>1)&&(this.insertRowGrandTotal(h,c,f,n,r),r=this.pivotValues.length,bt=!1),p=this.tupRowInfo[i],yt=r,et=t,k={},pt=!1;t<u.length;){if(e=u[t],e.querySelector("UName").textContent===rt[t]||"2"===s[t]||(Object.keys(k).length>0?k.isDrilled&&!this.fieldList[k.hierarchy].isHierarchy:pt)&&("3"!==s[t]||!w[t-1]||0===w[t+1]))"2"===s[t]?et=t:this.tupRowInfo[i].drillInfo[t].isDrilled&&0===w[t]&&(pt=!0);else{var ii=Number(e.querySelector("LNum").textContent)-(w[t]&&"3"!==s[t]?1:kt[t]),si=!!this.namedSetsPosition.row[t],it=this.getUniqueName(e.querySelector("UName").textContent),ri=this.getDepth(this.tupRowInfo[i],it,Number(s[t]));if(a=this.getCaptionCollectionWithMeasure(this.tupRowInfo[i],t,!0),this.showSubTotalsAtBottom&&r>this.rowStartPos&&(yt=r=this.insertRowSubTotal(f,c,ft,r,ii,a)),!(this.isPaging&&f[l][0]&&this.fieldList[f[l][0].hierarchy]&&this.fieldList[f[l][0].hierarchy].isHierarchy&&f[l][0].hasChild&&!f[l][0].isDrilled&&!this.rows[t].isNamedSet&&(0===this.rows[t].name.indexOf("[Measures]")||this.fieldList[e.getAttribute("Hierarchy")]&&(this.fieldList[e.getAttribute("Hierarchy")].isHierarchy||this.fieldList[e.getAttribute("Hierarchy")].hasAllMember))&&f[l][0].depth<ri)){for(f[r]=[{axis:"row",actualText:it,colIndex:0,formattedText:"3"===s[t]&&this.dataFields[it]&&this.dataFields[it].caption?this.dataFields[it].caption:e.querySelector("Caption").textContent,hasChild:!!(this.fieldList[e.getAttribute("Hierarchy")]&&this.fieldList[e.getAttribute("Hierarchy")].isHierarchy&&t<this.rows.length-1&&!this.rows[t+1].isNamedSet&&this.rows[t+1].name.indexOf("[Measures]")<0&&this.fieldList[this.rows[t+1].name]&&this.fieldList[this.rows[t+1].name].hasAllMember)||Number(e.querySelector("CHILDREN_CARDINALITY").textContent)>0,level:ii,depth:ri,rowIndex:r,index:[],ordinal:i,type:"header",colSpan:1,rowSpan:1,memberType:Number(s[t]),isDrilled:!(!this.fieldList[e.getAttribute("Hierarchy")]||!this.fieldList[e.getAttribute("Hierarchy")].isHierarchy||this.isAttributeDrill(e.getAttribute("Hierarchy"),this.tupRowInfo[i].drillInfo,"rows"))||this.tupRowInfo[i].drillInfo[t].isDrilled,parentUniqueName:e.querySelector("PARENT_UNIQUE_NAME")?e.querySelector("PARENT_UNIQUE_NAME").textContent:void 0,levelUniqueName:e.querySelector("LName").textContent,hierarchy:e.getAttribute("Hierarchy"),isNamedSet:si,valueSort:{levelName:"",axis:e.getAttribute("Hierarchy")}}],this.olapVirtualization&&"header"===f[r][0].type&&delete f[r][0].type,(k="3"!==s[t]?f[r][0]:k)||ui.push(e.querySelector("Caption").textContent),a=this.getCaptionCollectionWithMeasure(this.tupRowInfo[i],t,!1),f[r][0].valueSort.levelName=a,f[r][0].valueSort[a]=1,c[r-this.rowStartPos]={},c[r-this.rowStartPos][0]=f[r][0],g&&o>t&&(rt[o]=""),ot=t+1;ot<u.length;ot++)rt[ot]="";rt[t]=e.querySelector("UName").textContent;l=3!==Number(s[t])?r:l;r++;et=t}}this.tupRowInfo[i].drillInfo[t].isDrilled&&this.tupRowInfo[i].showTotals&&(this.tupRowInfo[i].showTotals=!!this.showRowSubTotals&&void 0===this.hideRowTotalsObject[this.tupRowInfo[i].drillInfo[t].hierarchy]);t++}yt<r&&et>=u.length-1&&(f[r-1][0].ordinal=i,"header"===f[r-1][0].type&&delete f[r-1][0].type)}ht=d;st=v}i++}this.showSubTotalsAtBottom&&ft.length>0&&(ft.reverse(),ft.forEach(function(n){f[r]=[n];c[r-wt.rowStartPos]={};c[r-wt.rowStartPos][0]=f[r][0];r++}));("Top"!==this.dataSourceSettings.grandTotalsPosition||"row"===this.olapValueAxis&&1===this.dataSourceSettings.rows.length&&"Top"===this.dataSourceSettings.grandTotalsPosition||0===this.dataSourceSettings.rows.length)&&this.insertRowGrandTotal(h,c,f,n,r)},t.prototype.insertRowSubTotal=function(n,t,i,u,f,e){var o=r.frameHeaderWithKeys(n[u-1][0]),s,c,h,a;if(o.level<f&&"grand sum"!==o.type&&(o.isDrilled||3===o.memberType))if(3===o.memberType){for(s=[],c=1;3===n[u-c][0].memberType;)s[s.length]=n[u-c][0],c++;if(n[u-c][0].isDrilled&&0!==s.length){for(h=0,a=s.length;h<a;h++)s[h].formattedText=n[u-c][0].formattedText+" "+s[h].formattedText,s[h].isSum=!0,s[h].type="sum",s[h].parentUniqueName=n[u-c][0].levelUniqueName,i[i.length]=s[h];u-=--c}}else o.hasChild=!1,o.isDrilled=!1,o.isSum=!0,o.type="sum",o.formattedText=o.formattedText+" Total",i[Object.keys(i).length]=o;if(i.length>0)for(var l=i.length-1,v=i[l].valueSort.levelName.split(".").length,y=e.split(".").length;v>=y&&(n[u]=[i[l]],t[u-this.rowStartPos]={},t[u-this.rowStartPos][0]=n[u][0],u++,i.splice(i.length-1,1),Object.keys(i).length>0);)v=i[--l].valueSort.levelName.split(".").length;return u},t.prototype.insertRowGrandTotal=function(n,t,i,r,u){var e,f;if(n.length>1&&3!==n[0].memberType&&(n[0].ordinal=-1),"down"!==this.customArgs.action){if(e=0===this.dataSourceSettings.rows.length||1===this.dataSourceSettings.rows.length&&"[Measures]"===this.dataSourceSettings.rows[0].name,this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals||e)for(f=0;f<n.length;f++)n[f].rowIndex=u,i[u]=[n[f]],t[u-this.rowStartPos]={},t[u-this.rowStartPos][0]=i[u][0],u++}else this.updateRowEngine(i,t,r.length),this.onDemandDrillEngine=i;return n},t.prototype.frameGrandTotalAxisSet=function(n,t,i,r,u,f,e,o,s,h){return n.push({axis:"row",actualText:t,colIndex:0,formattedText:i,hasChild:!1,level:-1,rowIndex:r,index:[],ordinal:u,colSpan:1,rowSpan:1,memberType:f,isDrilled:!1,parentUniqueName:e,levelUniqueName:o,hierarchy:s,valueSort:h}),n},t.prototype.getDepth=function(n,t,i){var e=n.uNameCollection.indexOf(t),r=(n.uNameCollection.substring(0,e)+(3===i?"":t)).split("::[").map(function(n){return"["===n[0]?n:"["+n}),f,u;for(3===i&&this.rowMeasurePos===r.length&&r.push(t),f=-1,u=0;u<r.length;u++)f+=r[u].split("~~").length;return f},t.prototype.checkAttributeDrill=function(n,t){for(var r=!1,i=0;i<n.length&&!(r=this.isAttributeDrill(n[i].hierarchy,n,t));i++);return r},t.prototype.frameTupCollection=function(t,i,r,u,f,e,o){for(var k,a,ht,ct,d,v,kt,lt,p,g,at,vt,gt,rt,ut,w,yt,pt,nt,s=0,ft=0,et=[],wt=[],ot=[],b="",tt="",bt=!0,st=-1;s<t.length;){var c=t[s],h=Number(c.querySelector("LNum").textContent),y=c.querySelector("UName").textContent;if(Number(c.querySelector("MEMBER_TYPE").textContent)>3&&(c.querySelector("MEMBER_TYPE").textContent=0===y.indexOf("[Measures]")?"3":"1"),k=0===y.indexOf("[Measures]")?"3":Number(c.querySelector("MEMBER_TYPE").textContent)>3?"1":c.querySelector("MEMBER_TYPE").textContent,a=c.querySelector("Caption").textContent,this.fieldList[a]&&"CalculatedField"===this.fieldList[a].type&&(a=this.fieldList[a].caption,c.querySelector("Caption").textContent=a),ht=c.getAttribute("Hierarchy"),ct=c.querySelector("PARENT_UNIQUE_NAME")?c.querySelector("PARENT_UNIQUE_NAME").textContent:"","2"===k?(this.isPaging||ft++,w=n.isNullOrUndefined(w)?s:w):"3"===k?(yt=c,pt=y,nt=s,"column"===o?(this.colMeasures[y]=c,this.colMeasurePos=s):this.rowMeasurePos=s):st=e[ht],"2"!==k){if(this.headerGrouping[s]){if(h>this.lastLevel[s])this.lastLevel[s]=h;else if(h<this.lastLevel[s]){for(d=this.lastLevel[s];d>=h;)delete this.headerGrouping[s].UName[d],delete this.headerGrouping[s].Caption[d],d--;this.lastLevel[s]=h}this.headerGrouping[s].UName[h]=y;this.headerGrouping[s].Caption[h]=a}else this.lastLevel[s]=h,this.headerGrouping[s]={UName:(rt={},rt[h]=y,rt),Caption:(ut={},ut[h]=a,ut)};if(this.isPaging)for(v=ct;this.drilledSets[v];)kt=this.drilledSets[v].querySelector("Caption").textContent,lt=Number(this.drilledSets[v].querySelector("LNum").textContent),this.headerGrouping[s].UName[lt]=v,this.headerGrouping[s].Caption[lt]=kt,v=null===this.drilledSets[v].querySelector("PARENT_UNIQUE_NAME")?"":this.drilledSets[v].querySelector("PARENT_UNIQUE_NAME").textContent;for(var it="",dt=Object.keys(this.headerGrouping[s].UName),l=0;l<dt.length;l++)p=dt[l],it=0===l?this.headerGrouping[s].UName[Number(p)]:it+"~~"+this.headerGrouping[s].UName[Number(p)];for(b=""===b?it:b+"::"+it,g="",at=Object.keys(this.headerGrouping[s].Caption),l=0;l<at.length;l++)p=at[l],g=0===l?this.headerGrouping[s].Caption[Number(p)]:g+"~~"+this.headerGrouping[s].Caption[Number(p)];s!==nt&&(tt=""===tt?g:tt+"::"+g)}(et.push(k),wt.push(h),(n.isNullOrUndefined(i[s])||i[s]<h)&&(i[s]=h),ot.push({level:h,uName:y,hierarchy:ht,isDrilled:!1}),u[r-1]&&"1"===u[r-1].typeCollection[s]&&ot[s].level>u[r-1].drillInfo[s].level)&&(vt=b.split(/~~|::\[/).map(function(n){return"["===n[0]?n:"["+n}),vt.pop(),gt=vt.join("~~"),this.setDrillInfo(ct,gt,s,r,u));s++}return st>-1&&(bt="2"!==et[st+1]),u[r]={allCount:ft,allStartPos:w,measure:yt,measureName:pt,measurePosition:nt,members:t,typeCollection:et,uNameCollection:b,captionCollection:tt,levelCollection:wt,drillInfo:ot,drillStartPos:-1,drillEndPos:-1,showTotals:!(!f&&ft>0&&w>(0===nt?1:0))&&bt},i},t.prototype.getCaptionCollectionWithMeasure=function(n,t,i){var u=n.captionCollection,o=!0,r,e;if(!i&&"3"!==n.typeCollection[t])for(r=0;r<this.measurePosition;r++)if(n.drillInfo[t].hierarchy===this.dataSourceSettings.rows[r].name){o=!1;break}if(n.measure&&o){var f=this.getUniqueName(n.measure.querySelector("UName").textContent),s=this.dataFields[f]&&this.dataFields[f].caption?this.dataFields[f].caption:n.measure.querySelector("Caption").textContent,h=n.uNameCollection.split(/[~~::]+/g).indexOf(n.measureName);(e=n.captionCollection.split(/[~~::]+/g)).splice(h,0,s);u=e.join(this.valueSortSettings.headerDelimiter)}else u=(e=n.captionCollection.split(/[~~::]+/g)).join(this.valueSortSettings.headerDelimiter);return u},t.prototype.setNamedSetsPosition=function(){var n;this.namedSetsPosition={};n=0;do{for(var r={},i=n?this.dataSourceSettings.rows:this.dataSourceSettings.columns,t=0;t<i.length;t++)i[t].isNamedSet&&(r[t]=i[t].name);this.namedSetsPosition[n?"row":"column"]=r;n++}while(n<2)},t.prototype.updateRowEngine=function(n,t,i){for(var u,r=this.pivotValues.length-1,f=Object.keys(n).length;r>this.customArgs.drillInfo.currentCell.rowIndex;)this.pivotValues[r+f]=this.pivotValues[r],this.pivotValues[r+f][0].ordinal+=i,this.pivotValues[r+f][0].rowIndex+=f,this.valueContent[r+f-this.rowStartPos]=this.valueContent[r-this.rowStartPos],r--;for(u=0;u<n.length;u++)this.pivotValues[u]=n[u],this.valueContent[Number(u)-this.rowStartPos]=t[Number(u)-this.rowStartPos];this.pivotValues[this.customArgs.drillInfo.currentCell.rowIndex][0].isDrilled=!0},t.prototype.updateTupCollection=function(n){for(var i="row"===this.customArgs.drillInfo.axis?this.tupRowInfo:this.tupColumnInfo,t=i.length-1;t>this.customArgs.drillInfo.currentCell.ordinal;)i[t+n]=i[t],t--},t.prototype.frameGrandTotalValues=function(n,t,i,r){for(var c,l,u=0,o=!1;u<n.length&&!o;){var f=n["down"===this.customArgs.action?u-(this.customArgs.drillInfo.currentCell.ordinal+1):u].querySelectorAll("Member"),s=this.tupRowInfo[u].allCount,e=(this.tupRowInfo[u].allStartPos,this.tupRowInfo[u].measure),h=this.tupRowInfo[u].typeCollection;(this.tupRowInfo[u].drillStartPos,this.tupRowInfo[u].startDrillUniquename,0===u&&(f.length>s+(e?1:0)||1===f.length&&e)&&t.pop(),(0!==u||!this.isPaging||0===t.length)&&(this.checkAttributeDrill(this.tupRowInfo[u].drillInfo,"rows"),f.length===s+(e?1:0)&&e))&&(c="Grand Total"+this.valueSortSettings.headerDelimiter+f[r].querySelector("Caption").textContent,l="3"===h[r]&&this.dataFields[this.getUniqueName(f[r].querySelector("UName").textContent)]&&this.dataFields[this.getUniqueName(f[r].querySelector("UName").textContent)].caption?this.dataFields[this.getUniqueName(f[r].querySelector("UName").textContent)].caption:f[r].querySelector("Caption").textContent,(t=this.frameGrandTotalAxisSet(t,this.getUniqueName(f[r].querySelector("UName").textContent),l,this.pivotValues.length,u,Number(h[r]),f[r].querySelector("PARENT_UNIQUE_NAME")?f[r].querySelector("PARENT_UNIQUE_NAME").textContent:void 0,f[r].querySelector("LName").textContent,f[r].getAttribute("Hierarchy"),{levelName:c,axis:f[r].getAttribute("Hierarchy")}))[t.length-1].valueSort["Grand Total"+this.valueSortSettings.headerDelimiter+f[r].querySelector("Caption").textContent]=1);o=this.dataSourceSettings.values.length+1===t.length;u++}return t},t.prototype.frameColumnHeader=function(n){var d=this,h,f,p,b,c,k;this.headerGrouping={};this.lastLevel=[];for(var i=0,e=[],o=[],s=[],v=-1,y=-1,g=this.customArgs.drillInfo&&"column"===this.customArgs.drillInfo.axis?this.customArgs.drillInfo.currentCell.ordinal+1:0;i<n.length;)h=n[i].querySelectorAll("Member"),e=this.frameTupCollection(h,e,i+g,this.tupColumnInfo,this.showColumnSubTotals,this.hideColumnTotalsObject,"column"),i++;if(n.length>0)for(h=n[0].querySelectorAll("Member"),f=0;f<h.length;)s[f]="1"===h[f].querySelector("MEMBER_TYPE").textContent&&0===Number(h[f].querySelector("LNum").textContent)?0:Number(h[f].querySelector("LNum").textContent),"1"!==h[f].querySelector("MEMBER_TYPE").textContent||!this.isPaging&&0!==Number(h[f].querySelector("LNum").textContent)?o[f]=1:(o[f]=0,v=-1===v?f:v,y=f),f++;i=0;for(var w,u=1,r={},l=!0,a=!1,nt=function(){var p=n[i].querySelectorAll("Member"),f=t.tupColumnInfo[i].allCount,c=t.tupColumnInfo[i].allStartPos,lt=t.tupColumnInfo[i].measure,tt=t.tupColumnInfo[i].typeCollection,k=t.tupColumnInfo[i].drillInfo,b=t.tupColumnInfo[i].drillStartPos,it=t.tupColumnInfo[i].startDrillUniquename,ut=t.tupColumnInfo[i].endDrillUniquename,at=t.tupColumnInfo[i].drillEndPos,ot=t.tupColumnInfo[i].levelCollection,nt="2"!==tt[0]&&("3"!==tt[0]||"2"!==tt[1]),ft=0,g,et,rt,h,st,ht,ct;if(e.map(function(n,t){ft+=0===o[t]?n+(1-(s[t]>1?1:s[t])):0===n?d.isPaging&&"2"===tt[t]?0:1:n}),t.colDepth=t.colDepth>ft?t.colDepth:ft,0===i&&p.length>f+(lt?1:0)&&(a=!0,nt=f>0&&nt?c>v:nt),g=!1,"Top"===t.dataSourceSettings.grandTotalsPosition&&t.dataSourceSettings.showGrandTotals&&t.dataSourceSettings.showColumnGrandTotals){for(et=0,rt=0;rt<p.length;rt++)0===p[rt].querySelector("Caption").textContent.indexOf("All")&&et++;g=et===("column"===t.olapValueAxis?t.dataSourceSettings.columns.length-1:t.dataSourceSettings.columns.length)}(nt||g)&&(0===f||g)&&(h=[-1,-1,-1],t.tupColumnInfo[i-1]&&0===t.tupColumnInfo[i-1].allCount?h=t.levelCompare(ot,t.tupColumnInfo[i-1].levelCollection):a&&w&&(h=t.levelCompare(ot,w.levelCollection)),t.tupColumnInfo[i].drillStartPos<0||t.showSubTotalsAtTop?(!l&&h[0]>-1&&h[2]>-1&&(u=t.mergeTotCollection(u,f,e,s,o,c,k,h)),t.setParentCollection(p),t.frameCommonColumnLoop(p,i,u,e,o,s),t.tupColumnInfo[i].showTotals||u--,!l&&h[0]>-1&&h[2]>-1&&(u=t.mergeTotCollection(u,f,e,s,o,c,k,h)),l=!1,t.isColDrill?t.isColDrill=!1:u++):r.drillStartPos===b&&r.startDrillUniquename===it&&r.allCount!==f||(!l&&h[0]>-1&&h[2]>-1&&(u=t.mergeTotCollection(u,f,e,s,o,c,k,h),l=!0),t.setParentCollection(p),(!a||y<=b)&&(g||(t.totalCollection[t.totalCollection.length]={allCount:f,ordinal:i,members:p,drillInfo:k}),r.allCount=f,r.allStartPos=c,r.drillStartPos=b,r.startDrillUniquename=it,r.endDrillUniquename=ut)),w=t.tupColumnInfo[i]);st=t.checkAttributeDrill(t.tupColumnInfo[i].drillInfo,"columns");f>0&&(!a||nt&&(st||y<c))&&(f===r.allCount||c!==r.allStartPos)&&(ht=at===b||r.endDrillUniquename===ut,ct=c!==r.allStartPos?r.startDrillUniquename!==it:ht,b>-1&&!ct||(l||(u=t.mergeTotCollection(u,f,e,s,o,c,k),l=!0),t.setParentCollection(p),a&&b>-1&&!(y<=b)||(g||(t.totalCollection[t.totalCollection.length]={allCount:f,ordinal:i,members:p,allStartPos:c,drillInfo:k}),r.allCount=f,r.allStartPos=c,r.drillStartPos=b,r.startDrillUniquename=it,r.endDrillUniquename=ut)));i++},t=this;i<n.length;)nt();if(this.totalCollection.length>0)if(Object.keys(this.colMeasures).length>1)this.orderTotals(u,e,o,s);else for(this.totalCollection=this.totalCollection.reverse(),p=0,b=this.totalCollection;p<b.length;p++)c=b[p],(0===this.tupColumnInfo[c.ordinal].measurePosition?1===this.tupColumnInfo[c.ordinal].allStartPos:0===this.tupColumnInfo[c.ordinal].allStartPos)&&(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showColumnGrandTotals)||(this.frameCommonColumnLoop(c.members,c.ordinal,u,e,s,o),k=this.checkAttributeDrill(this.tupColumnInfo[c.ordinal].drillInfo,"columns"),(this.tupColumnInfo[c.ordinal].showTotals||k)&&u++)},t.prototype.orderTotals=function(n,t,i,r){for(var u,e,v,s,h,l,f={},o=1,c=0,a=this.totalCollection;c<a.length;c++)u=a[c],(0===this.tupColumnInfo[u.ordinal].measurePosition?1===this.tupColumnInfo[u.ordinal].allStartPos:0===this.tupColumnInfo[u.ordinal].allStartPos)&&(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showColumnGrandTotals)||(e=this.tupColumnInfo[u.ordinal].measure.querySelector("UName").textContent,f[e]?(f[e].coll.push(u),f[e].count++,o=o<f[e].count?f[e].count:o):f[e]={coll:[u],count:1});for(v=Object.keys(f),s=o-1;s>-1;){for(h=0,l=v;h<l.length;h++)(u=f[l[h]].coll[s])&&(this.frameCommonColumnLoop(u.members,u.ordinal,n,t,i,r),this.tupColumnInfo[u.ordinal].showTotals&&n++);s--}},t.prototype.setParentCollection=function(n){for(var o,u,t=0;n.length>t;){var i=n[t],s=Number(i.querySelector("MEMBER_TYPE").textContent)>2?"3":i.querySelector("MEMBER_TYPE").textContent,r=Number(i.querySelector("LNum").textContent),h=i.querySelector("UName").textContent,c=i.querySelector("PARENT_UNIQUE_NAME")?i.querySelector("PARENT_UNIQUE_NAME").textContent:"",f=!0,e=!1;this.parentObjCollection[t]&&(o=Object.keys(this.parentObjCollection[t]),u=this.parentObjCollection[t][r-1],f=u?c===u.querySelector("UName").textContent:0===o.length,e="1"===this.tupColumnInfo[0].typeCollection[t]);"2"===s?delete this.parentObjCollection[t]:(!this.isPaging&&!e||f||delete this.parentObjCollection[t],this.parentObjCollection[t]?this.parentObjCollection[t][r]&&this.parentObjCollection[t][r].querySelector("UName").textContent===h||(this.parentObjCollection[t][r]=i):(this.parentObjCollection[t]={},this.parentObjCollection[t][r]=i));t++}},t.prototype.setDrillInfo=function(n,t,i,r,u){for(r--;u[r]&&u[r].drillInfo[i].uName===n&&!(u[r].uNameCollection.split(/~~|::\[/).map(function(n){return"["===n[0]?n:"["+n}).join("~~").indexOf(t)<0);)u[r].drillInfo[i].isDrilled=!0,this.curDrillEndPos<=i&&(u[r].drillEndPos=this.curDrillEndPos=i,u[r].endDrillUniquename=n),(u[r].drillStartPos>i||-1===u[r].drillStartPos)&&(u[r].drillStartPos=i),u[r].startDrillUniquename=n,r--},t.prototype.levelCompare=function(n,t){for(var r=[-1,0],i=0;i<t.length;i++)if(n[i]!==t[i]){r=[i,n[i],t[i]-n[i]];break}return r},t.prototype.mergeTotCollection=function(t,i,r,u,f,e,o,s){for(var h,a,tt,p,w,k,l,v=n.isNullOrUndefined(e)?s[0]:e-(this.colMeasurePos===e-1?2:1),d=o[v]&&o[v].level,it=this.getLevelsAsString(v-1,o),c={},y=1,g=!1,b=0,nt=this.totalCollection;b<nt.length;b++)h=nt[b],(g||h.allCount<=i&&(!(d>-1&&h.drillInfo[v])||h.drillInfo[v].level>=d&&this.getLevelsAsString(v-1,h.drillInfo)===it))&&(a=this.tupColumnInfo[h.ordinal].measure?this.tupColumnInfo[h.ordinal].measure.querySelector("UName").textContent:"measure",c[a]?(c[a].coll.push(h),c[a].count++,y=y<c[a].count?c[a].count:y):c[a]={coll:[h],count:1},g=!1);for(tt=Object.keys(c),p=y-1;p>-1;){for(w=0,k=tt;w<k.length;w++)l=c[k[w]].coll[p],l&&((!(0===this.tupColumnInfo[l.ordinal].measurePosition?1===this.tupColumnInfo[l.ordinal].allStartPos:0===this.tupColumnInfo[l.ordinal].allStartPos)||this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showColumnGrandTotals)&&(this.frameCommonColumnLoop(l.members,l.ordinal,t,r,f,u),this.tupColumnInfo[l.ordinal].showTotals&&t++),this.totalCollection.pop());p--}return t},t.prototype.getLevelsAsString=function(n,t){for(var r=[],i=0;i<n;i++)r[i]=t[i].level;return r.length>0?r.toString():""},t.prototype.frameCommonColumnLoop=function(n,t,i,r,u,f){var w,k=-1,s,a,it,d,c,nt,ft,tt;if(this.tupColumnInfo[t].showTotals)for(s=0,a=0;s<n.length;)a+=f[s]>0&&this.getMeasurePosition(this.tupColumnInfo[t].uNameCollection,this.tupColumnInfo[t].measurePosition)!==s?r[s]:r[s]+(1-u[s]),this.tupColumnInfo[t].drillInfo[s].isDrilled&&this.tupColumnInfo[t].showTotals&&(this.tupColumnInfo[t].showTotals=!!this.showColumnSubTotals&&void 0===this.hideColumnTotalsObject[this.tupColumnInfo[t].drillInfo[s].hierarchy],a-=r[s]-this.tupColumnInfo[t].levelCollection[s],k=this.tupColumnInfo[t].showTotals?-1:a-1),s++;if(it=this.checkAttributeDrill(this.tupColumnInfo[t].drillInfo,"columns"),this.tupColumnInfo[t].showTotals||it)for(var o=0,h=0,y={},rt="0"===n[0].querySelector("LNum").textContent;o<n.length;){for(var e=n[o],l=Number(e.querySelector("MEMBER_TYPE").textContent)>2?"3":e.querySelector("MEMBER_TYPE").textContent,ut=0,et=e.querySelector("LNum").textContent,v="2"!==l?f[o]?1:u[o]:1;v<=("3"===l?1:r[o]);v++){d=!1;this.pivotValues[h]||(this.pivotValues[h]=[]);Number(n[o].querySelector("LNum").textContent)>v&&"2"!==l?(this.parentObjCollection[o][v]||this.getDrilledParent(n[o],v,this.parentObjCollection[o]),this.parentObjCollection[o][v]&&(e=this.parentObjCollection[o][v]),d=!0):(e=n[o],ut++);c=this.getUniqueName(e.querySelector("UName").textContent);"2"!==l?y[c]="3"===l&&this.dataFields[c]&&this.dataFields[c].caption?this.dataFields[c].caption:e.querySelector("Caption").textContent:"2"===l&&"0"===et&&rt&&(y[c]="Grand Total",rt=!1);for(var g=Object.keys(y),p=o>=this.measurePosition&&0===Number(e.getElementsByTagName("LNum")[0].textContent)&&1===g.length?"Grand Total"+this.valueSortSettings.headerDelimiter:"",b=0;b<g.length;b++)nt=g[b],0===b?p+=y[nt]:p=p+this.valueSortSettings.headerDelimiter+y[nt];if(ft=!!this.namedSetsPosition.column[o],tt=this.getDepth(this.tupColumnInfo[t],c,Number(l)),this.isPaging&&this.pivotValues[h-1]&&this.pivotValues[h-1][i]&&this.fieldList[this.pivotValues[h-1][i].hierarchy]&&this.fieldList[this.pivotValues[h-1][i].hierarchy].isHierarchy&&this.pivotValues[h-1][i].hasChild&&!this.pivotValues[h-1][i].isDrilled&&!this.columns[o].isNamedSet&&this.fieldList[e.getAttribute("Hierarchy")]&&(this.fieldList[e.getAttribute("Hierarchy")].isHierarchy||this.fieldList[e.getAttribute("Hierarchy")].hasAllMember)&&this.pivotValues[h-1][i].depth<tt){this.isColDrill=!0;break}this.pivotValues[h][i]={axis:"column",actualText:c,colIndex:i,formattedText:"3"===l&&this.dataFields[c]&&this.dataFields[c].caption?this.dataFields[c].caption:e.querySelector("Caption").textContent,hasChild:!!(this.fieldList[e.getAttribute("Hierarchy")]&&this.fieldList[e.getAttribute("Hierarchy")].isHierarchy&&o<this.columns.length-1&&!this.columns[o+1].isNamedSet&&this.columns[o+1].name.indexOf("[Measures]")<0&&this.fieldList[this.columns[o+1].name]&&this.fieldList[this.columns[o+1].name].hasAllMember)||Number(e.querySelector("CHILDREN_CARDINALITY").textContent)>0,level:ut>1?-1:Number(e.querySelector("LNum").textContent)-(f[o]&&"3"!==l?1:0),rowIndex:h,ordinal:t,memberType:Number(l),depth:tt,isDrilled:!(!this.fieldList[e.getAttribute("Hierarchy")]||!this.fieldList[e.getAttribute("Hierarchy")].isHierarchy||this.isAttributeDrill(e.getAttribute("Hierarchy"),this.tupColumnInfo[t].drillInfo,"columns"))||d||this.tupColumnInfo[t].drillInfo[o].isDrilled,parentUniqueName:e.querySelector("PARENT_UNIQUE_NAME")?e.querySelector("PARENT_UNIQUE_NAME").textContent:void 0,levelUniqueName:e.querySelector("LName").textContent,hierarchy:e.getAttribute("Hierarchy"),isNamedSet:ft,valueSort:(w={levelName:p},w[p]=1,w.axis=e.getAttribute("Hierarchy"),w)};this.headerContent[h]||(this.headerContent[h]={});this.headerContent[h][i]=this.pivotValues[h][i];h++}o++}else if(k>-1)this.pivotValues[k][i-1].ordinal=t;else if(this.tupColumnInfo[t].allCount>0){for(s=0,a=0;s<this.tupColumnInfo[t].allStartPos;)a+=f[s]>0&&this.getMeasurePosition(this.tupColumnInfo[t].uNameCollection,this.tupColumnInfo[t].measurePosition)!==s?r[s]:r[s]+(1-u[s]),s++;a-=this.tupColumnInfo[t].allStartPos===this.tupColumnInfo[t].measurePosition+1?r[this.tupColumnInfo[t].allStartPos-2]-this.tupColumnInfo[t].levelCollection[this.tupColumnInfo[t].allStartPos-2]+1:r[this.tupColumnInfo[t].allStartPos-1]-this.tupColumnInfo[t].levelCollection[this.tupColumnInfo[t].allStartPos-1];this.pivotValues[a-1]&&(this.pivotValues[a-1][i-1].ordinal=t)}},t.prototype.isAttributeDrill=function(n,t,i){var o=!1,r,u;if(!this.isAdjacentToMeasure(n,i))for(r=0;r<this.drilledMembers.length;r++)if(this.drilledMembers[r].name===n)for(u=0;u<this.drilledMembers[r].items.length;u++){for(var s=this.drilledMembers[r].delimiter,h=this.drilledMembers[r].items[u].split(s),e="",f=0;f<h.length;f++)t[f]&&t[f].uName&&(e=e+(""===e?"":this.drilledMembers[r].delimiter)+t[f].uName);if(e===this.drilledMembers[r].items[u]){o=!0;break}}return o},t.prototype.isAdjacentToMeasure=function(n,t){for(var u=!1,r="rows"===t?this.rows:this.columns,i=0;i<r.length;i++)if(r[i].name===n&&r[i+1]&&("[Measures]"===r[i+1].name||r[i+1].isNamedSet||this.fieldList[r[i+1].name]&&!this.fieldList[r[i+1].name].hasAllMember)){u=!0;break}return u},t.prototype.getDrilledParent=function(n,t,i){for(var r,e=Number(n.querySelector("LNum").textContent),f=n,u=e-1;u>=t;u--){if(r=this.drilledSets[f.querySelector("PARENT_UNIQUE_NAME").textContent],!r)break;i[u]=r;f=r}},t.prototype.performRowSorting=function(n,t){var bt,u,nt,b,ht,p,s,w,e,yt,ut,pt,d,f,at,wt;if((this.enableSort||this.enableValueSorting)&&this.tupRowInfo.length>0){for(var kt=this.pivotValues.length,it={},o={},st=[],g=!1,vt=this.tupRowInfo[0].typeCollection.lastIndexOf("1"),dt=void 0,c=this.colDepth;c<kt;c++)u=this.pivotValues[c][0],this.showSubTotalsAtBottom&&u.isSum&&3!==u.memberType||(nt=this.tupRowInfo[u.ordinal],b=nt?0===nt.measurePosition&&3===u.memberType?nt.measureName:nt.uNameCollection:"",""!==b&&(vt>-1&&(b=this.frameUniqueName(b,u,nt)),ht=b.split(/~~|::\[/).length,3===u.memberType&&this.tupRowInfo[0].measurePosition>0?o[f=this.getParentUname(b,u,!0,!0)]?o[f].push(u):o[f]=[u]:it[ht]?it[ht][b]=[u]:it[ht]=((bt={})[b]=[u],bt)),g&&st.push(u),"grand sum"===u.type&&(g=!0));for(var ct=Object.keys(o).length>0&&this.tupRowInfo[0].measurePosition>0,y=Object.keys(it).map(function(n){return Number(n)}).sort(function(n,t){return n>t?1:t>n?-1:0}),k={},a=y.length-1;a>=0;a--){for(var v={},lt=it[y[a]],rt=Object.keys(lt),tt=0;tt<rt.length;tt++)v[f=0===a?"parent":this.getParentUname(rt[tt],lt[rt[tt]][0],ct,!1)]?v[f].push(lt[rt[tt]][0]):v[f]=lt[rt[tt]];for(p=Object.keys(v),s=0;s<p.length;s++)v[p[s]]=this.sortRowHeaders(v[p[s]],n,t);if(k[y[a+1]])for(s=0;s<p.length;s++){for(var i=[],l=v[p[s]],h=0;h<l.length;h++){if(w=this.tupRowInfo[l[h].ordinal],e=0===w.measurePosition&&3===l[h].memberType?w.measureName:w.uNameCollection,i.push(l[h]),vt>-1&&(e=this.frameUniqueName(e,l[h],w)),yt=!1,ct&&o[f=this.getParentUname(e,l[h],ct,!0)]){o[f]=this.sortRowHeaders(o[f],n,t);var ii=e.lastIndexOf("::[")===e.indexOf("::[Measures]"),ri=e.split("::[").length-1===w.measurePosition,ui=!w.drillInfo[w.measurePosition-1].isDrilled,fi=w.members.length>w.measurePosition+1;if(ii&&ri&&ui&&fi)for(yt=!0,ut=0;ut<o[f].length;ut++)i.push(o[f][ut]),pt=e.substring(0,e.indexOf("::[Measures]"))+"::"+o[f][ut].actualText,k[y[a+1]][pt]&&(i=i.concat(k[y[a+1]][pt]));else dt=this.showSubTotalsAtBottom&&i[i.length-1].isDrilled,i=i.concat(o[f])}if(!yt&&k[y[a+1]][e])if(this.showSubTotalsAtBottom&&3===i[i.length-1].memberType&&i[i.length-1].level>-1&&dt){for(var ft=[],gt=0,et=i.length-1;et>=0;et--){if(3!==i[et].memberType){ft=ft.reverse();gt=et+1;break}ft[ft.length]=i[et]}i=i.slice(0,gt).concat(k[y[a+1]][e]).concat(ft)}else u=i[i.length-1],d=void 0,this.showSubTotalsAtBottom&&u.isDrilled&&((d=r.frameHeaderWithKeys(u)).hasChild=!1,d.isDrilled=!1,d.isSum=!0,d.formattedText=d.formattedText+" Total"),i=i.concat(k[y[a+1]][e]),d&&(i[i.length]=d)}v[p[s]]=i}else if(ct)for(s=0;s<p.length;s++){for(l=v[p[s]],i=[],h=0;h<l.length;h++)i.push(l[h]),e=this.tupRowInfo[l[h].ordinal].uNameCollection,vt>-1&&(e=this.frameUniqueName(e,l[h],this.tupRowInfo[l[h].ordinal])),o[f=this.getParentUname(e,l[h],!0,!0)]&&(o[f]=this.sortRowHeaders(o[f],n,t),i=i.concat(o[f]));v[p[s]]=i}k[y[a]]=v}var ot=0,ni=0,ti=0;for(g=!1,st=this.sortRowHeaders(st,n,t),c=this.colDepth;c<kt;c++)"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals&&("column"===this.olapValueAxis&&this.colDepth+1===c||"row"===this.olapValueAxis&&this.colDepth+this.dataSourceSettings.values.length+1===c)&&(ot=0,g=!1),at=g?st:k[y[0]].parent,wt="Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals&&this.colDepth===c?at.length:g?ot-ni:ot,at[wt]&&(this.pivotValues[c]=[at[wt]],this.pivotValues[c][0].rowIndex=c,this.valueContent[ti][0]=this.pivotValues[c][0]),ot++,ti++,"grand sum"===this.pivotValues[c][0].type&&(g=!0,ni=ot)}},t.prototype.performColumnSorting=function(t,i){var ft,p,ct,nt,w,lt,v,st,at,tt,ht,it,vt,b,yt,g,k,d,rt,y,ut;if(this.enableSort||this.enableValueSorting)for(ft=0;ft<this.dataSourceSettings.columns.length;ft++){for(var o=[],f=0,s=[],l=0;l<this.pivotValues.length;l++){var r=this.pivotValues[l],c=void 0,e={},a=[],h=1;s[f]=[];o[f]=[];for(var u=1,et=r[u].hierarchy,ot=r[u].levelUniqueName;u<r.length;u++)if(!r[u].isNamedSet){if(2!==r[u].memberType&&"[Measures]"!==r[u].hierarchy&&-1!==r[u].level){if(n.isNullOrUndefined(e[r[u].formattedText])||n.isNullOrUndefined(this.pivotValues[l-1]))e[r[u].formattedText]||(e[r[u].formattedText]=[]),r[u+1]&&r[u].formattedText===r[u+1].formattedText||(a[a.length]=r[u]),e[r[u].formattedText][r[u].colIndex]=r[u];else if(e[r[u].formattedText]&&this.pivotValues[l-1]){var pt=this.pivotValues[l-1][r[u].colIndex],wt=Number(Object.keys(e[r[u].formattedText])[0]),bt=e[r[u].formattedText][wt].colIndex,kt=this.pivotValues[l-1][bt];if(pt.formattedText!==kt.formattedText){for(c=this.sortColumnHeaders(e,a,this.sortObject[r[u-1].levelUniqueName]||this.sortObject[r[u].hierarchy],t,i,et,ot),o[f]=n.isNullOrUndefined(o[f])?[]:o[f],p=0;p<c.length;p++)for(ct=Object.keys(e[c[p]]).length,nt=0;nt<ct;nt++)h=0===o[f].length?1:0,o[f][o[f].length+h]=e[c[p]][Number(Object.keys(e[c[p]])[nt])];a=[];(e={})[r[u].formattedText]=[];a[a.length]=r[u];e[r[u].formattedText][r[u].colIndex]=r[u]}else e[r[u].formattedText][r[u].colIndex]=r[u]}}else if(Object.keys(e).length>0)for(s[f][s[f].length+h]=r[u],c=this.sortColumnHeaders(e,a,this.sortObject[r[u-1].levelUniqueName]||this.sortObject[r[u].hierarchy],t,i,et,ot),o[f]=n.isNullOrUndefined(o[f])?[]:o[f],w=0;w<c.length;w++)for(lt=Object.keys(e[c[w]]).length,v=0;v<lt;v++)h=0===o[f].length?1:0,o[f][o[f].length+h]=e[c[w]][Number(Object.keys(e[c[w]])[v])];else(-1===r[u].level||0===r[u].level)&&Object.keys(e).length>=0&&"[Measures]"!==r[u].hierarchy&&(s[f][s[f].length+h]=r[u]);if(-1!==r[u].level&&1===Object.keys(e).length&&"[Measures]"!==r[u].hierarchy&&!n.isNullOrUndefined(r[u+1])&&-1===r[u+1].level)if(st=Object.keys(e[r[u].formattedText]).length,at=Object.keys(e[r[u].formattedText]),st>1)for(tt=0;tt<st;tt++)h=0===s[f].length?1:0,s[f][s[f].length+h]=e[r[u].formattedText][Number(at[tt])];else s[f][s[f].length+h]=r[u];if(Object.keys(s[f]).length>0){if(h=0===o[f].length?1:0,ht=s[f].length,ht>2)for(it=1;it<ht;it++)h=0===o[f].length?1:0,o[f][o[f].length+h]=s[f][it];else o[f][o[f].length+h]=s[f][1]||s[f][0];e={};a=[];s[f]=[]}}if(Object.keys(e).length>0)for(s[f][s[f].length+h]=r[u],vt=this.sortObject[r[u-1].levelUniqueName]||this.sortObject[r[u-1].hierarchy],c=this.sortColumnHeaders(e,a,vt,t,i,et,ot),o[f]=n.isNullOrUndefined(o[f])?[]:o[f],b=0;b<c.length;b++)for(yt=Object.keys(e[c[b]]).length,v=0;v<yt;v++)h=0===o[f].length?1:0,o[f][o[f].length+h]=e[c[b]][Number(Object.keys(e[c[b]])[v])];for(g=1;g<o[f].length;g++)this.pivotValues[f][g]=o[f][g];for(k=l;k<this.pivotValues.length;k++)if(d=n.extend({},this.pivotValues[k+1],null,!0),rt=n.extend({},this.pivotValues[k],null,!0),Object.keys(d).length===Object.keys(rt).length&&Object.keys(d).length>2){for(y=1;y<this.pivotValues[l].length;y++)Object.keys(d).length>0&&rt[y].colIndex!==d[y].colIndex&&(this.pivotValues[k+1][y]=d[rt[y].colIndex]);break}f++;e={}}for(ut=0;ut<this.pivotValues.length;ut++)for(r=this.pivotValues[ut],l=1;l<r.length;l++)r[l].colIndex=l}},t.prototype.frameUniqueName=function(n,t,i){var r=n.indexOf(t.actualText.toString()+"::[Measures]")>-1,u=(n=n.substring(0,n.indexOf(t.actualText.toString()))+t.actualText.toString()).split("::[").length<=this.getMeasurePosition(n,i.measurePosition);return n+(r||u?"::"+i.measureName:"")},t.prototype.getMeasurePosition=function(n,t){for(var u=t,r=n.split("::["),i=0;i<r.length;i++)if(r[i]&&r[i].indexOf("Measures")>-1){u=i;break}return u},t.prototype.sortRowHeaders=function(t,i,u){var c,f,a;if(this.enableValueSorting&&"column"===this.olapValueAxis&&u.isValueSorting&&!n.isNullOrUndefined(this.valueSortSettings)){for(c=[],f=0;f<t.length;f++){var v=t[f],l=i[v.ordinal*u.columnLength+u.memberIndex],y=l?l.getElementsByTagName("Value"):void 0,b=l&&y.length>0?Number(y[0].textContent):0;c.push({header:v,value:b})}t=r.getSortedValue(c,this.valueSortSettings.sortOrder)}else if(this.enableSort&&t.length>0&&3!==t[0].memberType&&!t[0].isNamedSet){for(a=[],f=0;f<t.length;f++)a[f]=t[f].actualText;var p=!1,o="Grand Total"!==t[0].actualText?t[0].hierarchy:t[1].hierarchy,s=this.fieldList[o]&&this.fieldList[o].membersOrder?this.fieldList[o].membersOrder.slice():[],e={fieldName:o,levelName:t[0].levelUniqueName,sortOrder:this.sortObject[t[0].hierarchy]||this.sortObject[t[0].levelUniqueName],members:s&&s.length>0?s:a,IsOrderChanged:!1};if(this.levelUniqueName[o]=e.levelName,s&&s.length>0?r.applyCustomSort(e,t,"string",!1,!0):("Ascending"===e.sortOrder||void 0===e.sortOrder?t.sort(function(n,t){return n.formattedText>t.formattedText?1:t.formattedText>n.formattedText?-1:0}):"Descending"===e.sortOrder&&t.sort(function(n,t){return n.formattedText<t.formattedText?1:t.formattedText<n.formattedText?-1:0}),p=!0),p&&this.getHeaderSortInfo){for(var w=[],h=0,k=0;h<t.length;h++)"Grand Total"!==t[h].actualText&&(w[k++]=t[h].formattedText);e.members=w}this.getHeaderSortInfo&&this.getHeaderSortInfo(e);e.IsOrderChanged&&r.applyCustomSort(e,t,"string",!0,!0)}return t},t.prototype.sortColumnHeaders=function(t,i,u,f,e,o,s){var h=Object.keys(t),y,a;if(this.enableValueSorting&&"row"===this.olapValueAxis&&e.isValueSorting&&!n.isNullOrUndefined(this.valueSortSettings)){for(y=[],a=0;a<h.length;a++){var p=t[h[a]],b=this.showSubTotalsAtTop?p[0]:p[p.length-1],w=f[e.memberIndex*e.columnLength+b.ordinal],k=w?w.getElementsByTagName("Value"):void 0,nt=w&&k.length>0?Number(k[0].textContent):0;y.push({header:b,value:nt})}h=r.getSortedValue(y,this.valueSortSettings.sortOrder).map(function(n){return n.formattedText})}else if(this.enableSort){var d=!1,l=this.fieldList[o]&&this.fieldList[o].membersOrder?this.fieldList[o].membersOrder.slice():[],c={fieldName:o,levelName:s,sortOrder:u,members:l&&l.length>0?l:h,IsOrderChanged:!1};if(this.levelUniqueName[o]=c.levelName,l&&l.length>0?this.applyCustomSort(h,c):("Ascending"===c.sortOrder||void 0===c.sortOrder?h.sort(function(n,t){return n>t?1:t>n?-1:0}):"Descending"===c.sortOrder&&h.sort(function(n,t){return n<t?1:t<n?-1:0}),d=!0),d&&this.getHeaderSortInfo){for(var g=[],v=0,tt=0;v<h.length;v++)"Grand Total"!==h[v]&&(g[tt++]=h[v]);c.members=g}this.getHeaderSortInfo&&this.getHeaderSortInfo(c);c.IsOrderChanged&&this.applyCustomSort(h,c,!0)}return h},t.prototype.applyCustomSort=function(n,t,i){var o,s,u=[],r,f,e;for(s=t.IsOrderChanged?t.members:"Ascending"===t.sortOrder||"None"===t.sortOrder||void 0===t.sortOrder?[].concat(t.members):[].concat(t.members).reverse(),"Grand Total"===n[0]&&(o=n[0],n.shift()),r=0,f=0;r<n.length;r++){if(e=n[r],s[f]===e){if(n.splice(f++,0,e),n.splice(++r,1),!(f<s.length)){i||u.splice(--f,0,e);break}r=-1}r>=0&&!i&&(u[r]=n[r])}if(!i){for(r=u.length;r<n.length;r++)u[r]=n[r];"Grand Total"===u[u.length-1]&&u.pop();t.members=u}return o&&n.splice(0,0,o),n},t.prototype.frameSortObject=function(){if(this.enableSort)for(var n=0;n<this.sortSettings.length;n++)this.sortObject[this.sortSettings[n].name]=this.sortSettings[n].order},t.prototype.getParentUname=function(n,t,i,r){var o="",e;if(i&&!r){for(var s=this.tupRowInfo[t.ordinal],f=[],h={},u=0;u<n.length;u++)"~"!==n[u]&&":"!==n[u]||(f.push(u),h[u]=n[u]+n[u],u++);o=this.getMeasurePosition(n,s.measurePosition)>=n.split("::[").length-1?f[f.length-2]>-1?n.substring(0,f[f.length-2])+h[f[f.length-1]]+s.measureName:"parent":(e=n.lastIndexOf("~~")>n.lastIndexOf("::[")?n.lastIndexOf("~~"):n.lastIndexOf("::["))>-1?n.substring(0,e):"parent"}else o=(e=n.lastIndexOf("~~")>n.lastIndexOf("::[")?n.lastIndexOf("~~"):n.lastIndexOf("::["))>-1?n.substring(0,e):"parent";return o},t.prototype.performColumnSpanning=function(){for(var r={},n=this.rowStartPos-1,e=Object.keys(this.colMeasures).length,f=this.tupColumnInfo[0]?this.tupColumnInfo[0].measurePosition:this.measureIndex,u=n;u>-1;u--)if(3===this.pivotValues[u][1].memberType){f=u;break}for(;n>-1;){r[n]={};for(var i=this.pivotValues[n].length-1,o=function(){var a;r[n][i]=1;var s=t.pivotValues[n][i+1],o=t.pivotValues[n+1]&&t.rowStartPos-n>1?t.pivotValues[n+1][i]:void 0,u=t.pivotValues[n][i],v=!1,h=!1,c=t.tupColumnInfo[u.ordinal],y=c.allStartPos>("3"===c.typeCollection[0]?1:0),w=t.checkAttributeDrill(c.drillInfo,"columns");if(t.showSubTotalsAtTop&&u.isDrilled&&s&&s.actualText!==u.actualText&&u.level>-1&&(u.ordinal=t.getOrdinal(u,t.pivotValues[n+1])),o&&s&&(2===u.memberType||-1===u.level?s.actualText===u.actualText:3===u.memberType&&u.actualText===s.actualText||s.valueSort.levelName===u.valueSort.levelName)){if(2===u.memberType)u.colSpan=y&&"sum"!==s.type?1:s.colSpan+1>(f>n?e:0)?1:s.colSpan+1;else{var l=t.dataSourceSettings.valueSortSettings.headerDelimiter,p=[u,s].map(function(n){return n.valueSort.levelName.toString().split(l)}),b=p[0],k=p[1];b.slice(0,-1).join(l)===k.slice(0,-1).join(l)?(u.colSpan=s.colSpan+1,u.ordinal=s.ordinal):u.colSpan=1}v=!0}2===u.memberType?(y?(w||(u.type="sum"),u.formattedText="Total",u.valueSort[u.valueSort.levelName.toString()]=1):(u.type="grand sum",u.formattedText="Grand Total",n<t.measureIndex)&&(a="Grand Total",u.valueSort.levelName=a,u.valueSort[a.toString()]=1),u.hasChild=!1):-1===u.level&&(u.type="sum",u.formattedText="Total",u.hasChild=!1,u.valueSort[u.valueSort.levelName.toString()]=1);o?2===u.memberType&&2===o.memberType||o.actualText===u.actualText?(r[n][i]=r[n+1]?r[n+1][i]+1:1,0===n||1===u.memberType&&u.level>-1&&1===o.memberType&&-1===o.level?(u.rowSpan=!u.isDrilled||t.fieldList[u.hierarchy]&&t.fieldList[u.hierarchy].isHierarchy&&!u.hasChild?r[n+1][i]+1:1,o.rowSpan=!o.isDrilled||t.fieldList[o.hierarchy]&&t.fieldList[o.hierarchy].isHierarchy&&!o.hasChild||-1!==o.level?o.rowSpan:r[n+1][i]):u.rowSpan=3===u.memberType?1:-1,h=!0):!u.isDrilled||t.fieldList[u.hierarchy]&&t.fieldList[u.hierarchy].isHierarchy&&!u.hasChild||-1!==u.level||2!==o.memberType?(u.rowSpan=0===n?r[n][i]:-1,o.rowSpan=o.level>-1&&(!o.isDrilled||t.fieldList[o.hierarchy]&&t.fieldList[o.hierarchy].isHierarchy&&!o.hasChild)||2!==u.memberType&&2===o.memberType?r[n+1][i]:1):(r[n][i]=r[n+1]?r[n+1][i]+1:1,u.rowSpan=-1,h=!0):u.rowSpan=u.level>-1||1===t.rowStartPos?r[n][i]:-1;v||(u.colSpan=1);h||(r[n][i]=1);i--},t=this;i>0;)o();n--}},t.prototype.getOrdinal=function(n,t){for(var r=0,i=n.colIndex;i>0;i--)if(-1===t[i].level){r=t[i].ordinal;break}return r},t.prototype.frameValues=function(t,i){var v=this.pivotValues.length,y=v>0?this.pivotValues.findIndex(function(t){return t&&!n.isNullOrUndefined(t[0])}):this.colDepth,w=0,a,o,g,s,nt,tt;for("down"===this.customArgs.action&&(a=Object.keys(this.onDemandDrillEngine),y=Number(a[0]),v=Number(a[a.length-1])+1,w=this.onDemandDrillEngine[y][0].ordinal),o=y;o<v;o++)for(var r=this.pivotValues[o],u=r[0].ordinal,f=1;f<this.pivotValues[0].length;f++)if(this.pivotValues[this.colDepth-1][f]){var e=this.pivotValues[this.colDepth-1][f].ordinal,p=this.pivotValues[this.colDepth-1][f],b=3===r[0].memberType?r[0].actualText.toString():this.tupColumnInfo[p.ordinal]&&this.tupColumnInfo[p.ordinal].measure?this.tupColumnInfo[p.ordinal].measure.querySelector("UName").textContent:r[0].actualText;if("header"===r[0].type)r[f]={axis:"value",actualText:this.getUniqueName(b),formattedText:"",value:0,colIndex:f,rowIndex:o};else{var h,c=void 0,k=this.getUniqueName(b),l=!0,d=!this.fieldList[r[0].hierarchy]||!this.fieldList[r[0].hierarchy].isHierarchy||r[0].isDrilled;this.tupRowInfo[u]?l=this.tupRowInfo[u].showTotals:(g=0===this.dataSourceSettings.rows.length||1===this.dataSourceSettings.rows.length&&"[Measures]"===this.dataSourceSettings.rows[0].name,l=this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals||g);s=t[(u-w)*i+e];c=this.showSubTotalsAtBottom&&r[0].isDrilled||!l&&d?"":n.isNullOrUndefined(s)||n.isNullOrUndefined(s.querySelector("FmtValue"))?this.emptyCellTextContent:s.querySelector("FmtValue").textContent;h=!l&&d?"0":n.isNullOrUndefined(s)||n.isNullOrUndefined(s.querySelector("Value"))?null:s.querySelector("Value").textContent;c=this.showSubTotalsAtBottom&&r[0].isDrilled?"":l&&!n.isNullOrUndefined(h)?this.getFormattedValue(Number(h),k,""!==c?c:h):c;nt=!this.tupColumnInfo[e]||this.tupColumnInfo[e].allCount>0||this.tupColumnInfo[e].drillStartPos>-1||!this.tupRowInfo[u]||this.tupRowInfo[u].allCount>0||this.tupRowInfo[u].drillStartPos>-1;tt=!!this.tupRowInfo[u]&&(0===this.tupRowInfo[u].measurePosition?1===this.tupRowInfo[u].allStartPos:0===this.tupRowInfo[u].allStartPos)||!!this.tupColumnInfo[e]&&(0===this.tupColumnInfo[e].measurePosition?1===this.tupColumnInfo[e].allStartPos:0===this.tupColumnInfo[e].allStartPos);r[f]={axis:"value",actualText:k,formattedText:c,colOrdinal:e,rowOrdinal:u,columnHeaders:this.tupColumnInfo[e]?this.tupColumnInfo[e].captionCollection:"",rowHeaders:this.tupRowInfo[u]?this.tupRowInfo[u].captionCollection:"",value:n.isNullOrUndefined(h)?null:Number(h),colIndex:f,rowIndex:o,isSum:nt,isGrandSum:tt}}this.valueContent[o-this.rowStartPos][f]=r[f]}},t.prototype.getFormattedValue=function(t,i,r){var f=r,e,u;return this.formatFields[i]&&!n.isNullOrUndefined(t)&&(e=this.formatFields[i].properties?this.formatFields[i].properties:this.formatFields[i],u=n.extend({},e,null,!0),delete u.name,!u.minimumSignificantDigits&&u.minimumSignificantDigits<1&&delete u.minimumSignificantDigits,!u.maximumSignificantDigits&&u.maximumSignificantDigits<1&&delete u.maximumSignificantDigits,u.type?f=this.globalize.formatDate(new Date(t.toString()),u):(delete u.type,f=this.globalize.formatNumber(t,u))),f},t.prototype.getMeasureInfo=function(){var u;this.olapValueAxis=void 0;this.olapRowValueIndex=void 0;for(var t,i="column",r=[],f=0,h=this.values;f<h.length;f++)u=h[f],r[r.length]=u.isCalculatedField?this.fieldList[u.name].tag:u.name;if(r.length>0){if(this.isMeasureAvail){for(var e=!1,o=0,n=0,s=this.rows.length;n<s;n++)if("[measures]"===this.rows[n].name.toLowerCase()){i="row";t=n;e=!0;o=this.dataSourceSettings.rows.length;this.olapRowValueIndex=t;break}if(!e)for(n=0,s=this.columns.length;n<s;n++)if("[measures]"===this.columns[n].name.toLowerCase()){i="column";t=n;e=!0;o=this.dataSourceSettings.columns.length;break}this.olapValueAxis=i;this.measurePosition=t;this.measureIndex=t===o-1?-1:t}else t="row"===(i=this.valueAxis)?this.rows.length-1:this.columns.length-1;return{measureAxis:i,measureIndex:t,valueInfo:r}}return{measureAxis:i,measureIndex:-1,valueInfo:[]}},t.prototype.frameMeasureOrder=function(t,i,r,u,f,e){var k=[],ft=[],l=[],d={},ct=[],gt=t.measureAxis,g=t.measureIndex,lt=t.valueInfo,et,at,ot,yt,st,pt,dt,ut,a,ht,b;if(gt===i&&lt.length>0){for(var v={},nt=[],o=0,fi=r.length;o<fi;o++){for(var ni=r[o],ti=[].slice.call(ni.querySelectorAll("Member")),h="",y="",s=0;s<ti.length;)h=h+(""!==h?"~~":"")+ti[s].querySelector("UName").textContent,(s===g&&0===g||s===g-1)&&(y=h),s++;v[y]?v[y][v[y].length]=h:(v[y]=[h],nt[nt.length]=y);d[h]={index:o,node:ni};ct[ct.length]=h}if(ct.length>0&&nt.length>0)if(0===g){for(et=0,at=lt;et<at.length;et++)for(var ei=at[et],vt=0,ii=nt;vt<ii.length;vt++)if((wt=ii[vt])===ei)for(ot=0,yt=v[wt];ot<yt.length;ot++)h=yt[ot],l[l.length]=d[h].index,k[k.length]=d[h].node}else for(st=0,pt=nt;st<pt.length;st++)for(var wt=pt[st],bt=0,ri=lt;bt<ri.length;bt++)for(var oi=ri[bt],kt=0,ui=v[wt];kt<ui.length;kt++)(h=ui[kt]).split("~~")[g]===oi&&(l[l.length]=d[h].index,k[k.length]=d[h].node);if(dt=[],u.length>0){for(var c=[],tt=[],it=0,p=0,w=0,rt=(o=0,e);o<rt;o++)p>f-1?(p=0,c[++w]||(c[w]=[]),c[w][p]=o,p++):(c[w]||(c[w]=[]),c[w][p]=o,p++),ut=void 0,u[it]?ut=this.olapVirtualization?o:Number(u[it].getAttribute("CellOrdinal")):it++,ut===o&&(tt[o]=ut,dt[ut]=u[it],it++);if(u=dt,"column"===gt){if(c.length>0&&c[0].length===l.length)for(s=0,rt=l.length;s<rt;s++)for(o=0;o<c.length;)a=o*f+s,n.isNullOrUndefined(c[o])||n.isNullOrUndefined(l[s])||(ht=tt[a]?tt[a].toString():a.toString(),(b=u[Number(c[o][l[s]])])&&(b.setAttribute("CellOrdinal",ht.toString()),ft[a]=b)),o++}else if(c.length===l.length)for(s=0,rt=l.length;s<rt;s++)for(o=0;o<c[l[s]].length;)ht=tt[a=s*f+o]?tt[a].toString():a.toString(),(b=u[Number(c[l[s]][o])])&&(b.setAttribute("CellOrdinal",ht.toString()),ft[ft.length]=b),o++}return{orderedHeaderTuples:k,orderedValueTuples:ft}}return{orderedHeaderTuples:r,orderedValueTuples:u}},t.prototype.getDrilledSets=function(t,i,r,u){for(var y,l,f,nt,p,s,rt,ut,w=[],ft=i.actualText.toString(),e="row"===u?this.tupRowInfo:this.tupColumnInfo,lt=e[i.ordinal],at=0===e[0].typeCollection.indexOf("3")?1:0,h=0,vt="1"===e[0].typeCollection[r];h<e.length;)(n.isNullOrUndefined(e[h].allStartPos)||e[h].allStartPos>at)&&(w[w.length]=e[h].uNameCollection),h++;for(var v=t.split("::[").map(function(n){return"["===n[0]?n:"["+n}),c=[],o=0;o<=r;o++)if(v[o])if((vt||this.isPaging)&&o===r){for(var et=v[o].split("~~"),yt=et.indexOf(ft),b=[],k=0;k<=yt;k++)b.push(et[k]);c[c.length]=b.length>0?b.join("~~"):v[o]}else c[c.length]=v[o];t=c.join("::");for(var d=[],ot={},g=0,st=w;g<st.length;g++)if(y=st[g],0===y.indexOf(t)&&(d.push(y),this.isPaging))for(l=y.split("::[")[r],f=(s=(l="["===l[0]?l:"["+l).split("~~")).indexOf(ft);f<s.length;f++)ot[s[f]]=s[f];if(this.isPaging){for(nt=lt.uNameCollection.split("::[").map(function(n){return"["===n[0]?n:"["+n}),p=[],f=0;f<nt.length;f++)f!==r&&(p[f]=nt[f]);for(s=Object.keys(ot),f=0;f<s.length;f++)p[r]=s[f],d.push(p.join("::"))}for(var ht={},tt=0,ct=d;tt<ct.length;tt++){for(var pt=ct[tt].split("::[").map(function(n){return"["===n[0]?n:"["+n}),a="",it=0;it<=r;it++)rt=pt[it],rt&&(ut=rt.split("~~"),a=a+(""!==a?"~~":"")+ut[ut.length-1]);ht[a]=a}return ht},t.prototype.updateDrilledInfo=function(n){this.dataSourceSettings=n;this.drilledMembers=n.drilledMembers?this.updateDrilledItems(n.drilledMembers):[];this.generateGridData(n)},t.prototype.updateCalcFields=function(n,t){this.dataSourceSettings=n;this.calculatedFieldSettings=n.calculatedFieldSettings?n.calculatedFieldSettings:[];this.getAxisFields();this.updateFieldlist();this.loadCalculatedMemberElements(this.calculatedFieldSettings);this.dataFields[t.name]?this.generateGridData(n):nf.getCellSets(n,this,!0,void 0,!0)},t.prototype.onSort=function(n,t){this.dataSourceSettings=n;t||(this.sortSettings=n.sortSettings?n.sortSettings:[],this.getAxisFields(),this.frameSortObject(),this.updateFieldlist());this.xmlaCellSet.length>0&&this.xmlDoc?this.generateEngine(this.xmlDoc,this.request,this.customArgs):this.generateGridData(n)},t.prototype.updateFieldlist=function(n){for(var t,u,e,r,f,s,i=0;i<this.savedFieldListData.length;){if(t=this.savedFieldListData[i].id,u=this.savedFieldListData[i].pid,this.savedFieldList[t]&&(e=this.enableSort?this.sortObject[t]?this.sortObject[t]:"Ascending":"None",this.savedFieldList[t].isSelected=!1,this.savedFieldList[t].isExcelFilter=!1,this.savedFieldList[t].sort=e,this.savedFieldList[t].allowDragAndDrop=!0,this.savedFieldList[t].showFilterIcon=!0,this.savedFieldList[t].showSortIcon=!0,this.savedFieldList[t].showEditIcon=!0,this.savedFieldList[t].showRemoveIcon=!0,this.savedFieldList[t].showValueTypeIcon=!0,this.savedFieldList[t].showSubTotals=!0,this.savedFieldListData[i].sort=e,this.savedFieldListData[i].allowDragAndDrop=!0,this.savedFieldListData[i].showFilterIcon=!0,this.savedFieldListData[i].showSortIcon=!0,this.savedFieldListData[i].showEditIcon=!0,this.savedFieldListData[i].showRemoveIcon=!0,this.savedFieldListData[i].showValueTypeIcon=!0,this.savedFieldListData[i].showSubTotals=!0,n&&(this.savedFieldList[t].filter=[],this.savedFieldList[t].actualFilter=[])),this.dataFields[t]&&this.savedFieldList[t]&&this.selectedItems.indexOf(t)>-1?(this.savedFieldList[t].isSelected=!0,this.savedFieldList[t].allowDragAndDrop=!this.dataFields[t]||this.dataFields[t].allowDragAndDrop,this.savedFieldList[t].showFilterIcon=!this.dataFields[t]||this.dataFields[t].showFilterIcon,this.savedFieldList[t].showSortIcon=!this.dataFields[t]||this.dataFields[t].showSortIcon,this.savedFieldList[t].showEditIcon=!this.dataFields[t]||this.dataFields[t].showEditIcon,this.savedFieldList[t].showRemoveIcon=!this.dataFields[t]||this.dataFields[t].showRemoveIcon,this.savedFieldList[t].showValueTypeIcon=!this.dataFields[t]||this.dataFields[t].showValueTypeIcon,this.savedFieldList[t].showSubTotals=!this.dataFields[t]||this.dataFields[t].showSubTotals,this.savedFieldListData[i].isSelected=!0,this.savedFieldListData[i].allowDragAndDrop=!this.dataFields[t]||this.dataFields[t].allowDragAndDrop,this.savedFieldListData[i].showFilterIcon=!this.dataFields[t]||this.dataFields[t].showFilterIcon,this.savedFieldListData[i].showSortIcon=!this.dataFields[t]||this.dataFields[t].showSortIcon,this.savedFieldListData[i].showEditIcon=!this.dataFields[t]||this.dataFields[t].showEditIcon,this.savedFieldListData[i].showRemoveIcon=!this.dataFields[t]||this.dataFields[t].showRemoveIcon,this.savedFieldListData[i].showValueTypeIcon=!this.dataFields[t]||this.dataFields[t].showValueTypeIcon,this.savedFieldListData[i].showSubTotals=!this.dataFields[t]||this.dataFields[t].showSubTotals):this.savedFieldListData[i].isSelected=this.dataFields[u]&&this.savedFieldList[u]&&this.selectedItems.indexOf(u)>-1?!0:!1,this.savedFieldList[t]&&this.savedFieldList[t].isCalculatedField||"[calculated members].[_0]"===t.toLowerCase()){for(var h=!1,o=0,c=this.calculatedFieldSettings;o<c.length;o++)r=c[o],t===r.name&&(f=r.formula,s=r.formatString,this.savedFieldListData[i].formula=f,this.savedFieldListData[i].formatString=s,this.savedFieldListData[i].parentHierarchy=f.toLowerCase().indexOf("measure")>-1?void 0:r.hierarchyUniqueName,this.savedFieldList[t].formula=f,this.savedFieldList[t].formatString=s,this.savedFieldList[t].parentHierarchy=this.savedFieldListData[i].parentHierarchy,h=!0);(h||"[calculated members].[_0]"===t.toLowerCase())&&("[calculated members].[_0]"!==t.toLowerCase()||0!==this.calculatedFieldSettings.length)||(this.savedFieldListData.splice(i,1),i--,this.savedFieldList[t]&&delete this.savedFieldList[t])}i++}this.fieldList=this.savedFieldList;this.fieldListData=this.savedFieldListData},t.prototype.updateFieldlistData=function(n,t){for(var u,i=0,r=this.fieldListData;i<r.length;i++)if(u=r[i],u.id===n){u.isSelected=!!t;break}},t.prototype.getFormattedFields=function(n){this.formatFields={};for(var t=n.length;t--;)this.formatFields[n[t].name]=n[t]},t.prototype.getCubes=function(n){var t=this.getConnectionInfo(n.url,n.localeIdentifier.toString()),i='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis"><RequestType>MDSCHEMA_CUBES<\/RequestType><Restrictions><RestrictionList><CATALOG_NAME>'+n.catalog+"<\/CATALOG_NAME><\/RestrictionList><\/Restrictions><Properties><PropertyList><Catalog>"+n.catalog+"<\/Catalog> <LocaleIdentifier>"+t.LCID+"<\/LocaleIdentifier>"+(n.roles?"<Roles>"+n.roles+"<\/Roles>":"")+"<\/PropertyList><\/Properties><\/Discover><\/Body><\/Envelope>";if(this.doAjaxPost("POST",t.url,i,this.validateCube.bind(this),{dataSourceSettings:n,action:"getCubes"}),this.errorInfo)throw this.errorInfo;},t.prototype.validateCube=function(n,t,i){for(var u=[].slice.call(n.querySelectorAll("row")),f=!1,r=0,e=u;r<e.length;r++)if(e[r].querySelector("CUBE_NAME").textContent===i.dataSourceSettings.cube){f=!0;break}!f&&u.length>0&&(this.errorInfo="Invalid cube name "+this.dataSourceSettings.cube)},t.prototype.getFieldList=function(n){var t={catalog:n.catalog,cube:n.cube,url:n.url,LCID:n.localeIdentifier.toString(),request:"MDSCHEMA_HIERARCHIES",roles:n.roles};this.getTreeData(t,this.getFieldListItems.bind(this),{dataSourceSettings:n,action:"loadFieldElements"})},t.prototype.getTreeData=function(n,t,i){var r=this.getConnectionInfo(n.url,n.LCID),u='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis"><RequestType>'+n.request+"<\/RequestType><Restrictions><RestrictionList><CATALOG_NAME>"+n.catalog+"<\/CATALOG_NAME><CUBE_NAME>"+n.cube+"<\/CUBE_NAME><\/RestrictionList><\/Restrictions><Properties><PropertyList><Catalog>"+n.catalog+"<\/Catalog> <LocaleIdentifier>"+r.LCID+"<\/LocaleIdentifier>"+(n.roles?"<Roles>"+n.roles+"<\/Roles>":"")+"<\/PropertyList><\/Properties><\/Discover><\/Body><\/Envelope>";if(this.doAjaxPost("POST",r.url,u,t,i),this.errorInfo)throw this.errorInfo;},t.prototype.getAxisFields=function(){var t,i,r,u,f,e;for(this.rows=this.dataSourceSettings.rows?this.dataSourceSettings.rows:[],this.columns=this.dataSourceSettings.columns?this.dataSourceSettings.columns:[],this.filters=this.dataSourceSettings.filters?this.dataSourceSettings.filters:[],this.values=this.dataSourceSettings.values?this.dataSourceSettings.values:[],t=n.extend([],this.rows,null,!0),i=(t=t.concat(this.columns,this.values,this.filters)).length;i--;)this.dataFields[t[i].name]=t[i],"[measures]"===t[i].name.toLowerCase()?this.isMeasureAvail=!0:this.selectedItems.push(t[i].name);if(this.mappingFields={},this.dataSourceSettings.fieldMapping)for(r=0,u=this.dataSourceSettings.fieldMapping;r<u.length;r++)f=u[r],this.mappingFields[f.name]=f;!this.isMeasureAvail&&this.values.length>0&&(e={name:"[Measures]",caption:"Measures",showRemoveIcon:!0,allowDragAndDrop:!0},"row"===this.valueAxis?this.rows.push(e):this.columns.push(e),this.isMeasureAvail=!0)},t.prototype.getAggregateType=function(n,t){var i;switch(t){case"1":i="Sum";break;case"2":i="Count";break;case"3":i="Min";break;case"4":i="Max";break;case"5":i="Avg";break;case"8":i="DistinctCount";break;case"127":i="CalculatedField";break;default:i=void 0}return i||void 0},t.prototype.getUniqueName=function(n){for(var t,r=n,i=0,u=this.calculatedFieldSettings;i<u.length;i++)if(t=u[i],n===(t.formula.toLowerCase().indexOf("measure")>-1?"[Measures].":t.hierarchyUniqueName+".")+"["+t.name+"]"){r=t.name;break}return r},t.prototype.updateFilterItems=function(t){var l=n.extend([],this.rows,null,!0),e,a,i,f,o,v,s,nt,p,h,b,c,k,u;for(l=l.concat(this.columns),e=0,a=t;e<a.length;e++)if(i=a[e],"Include"===i.type&&this.allowMemberFilter&&this.fieldList[i.name]){if(f=this.fieldList[i.name].members,o=f&&Object.keys(f).length>0,this.fieldList[i.name].actualFilter=i.items.slice(),v=n.extend([],i.items,null,!0),o)for(s=0;s<v.length;){for(var d=[],y=0,g=d=this.getParentNode(v[s],f,d);y<g.length;y++)nt=g[y],p=r.inArray(nt,i.items),-1!==p&&i.items.splice(p,1);s++}for(var tt=[],w=0,it=i.items;w<it.length;w++)h=it[w],b=void 0,o||1!==i.items.length||(this.getMembers(this.dataSourceSettings,i.name,void 0,void 0,void 0,i.items[0]),b=this.fieldList[i.name].actualFilter[0]),tt.push(h),o?this.fieldList[i.name].filter.push(f[h].caption):this.fieldList[i.name].filter.push(b||h);this.filterMembers[i.name]=tt;this.fieldList[i.name].isExcelFilter=!1}else if((this.allowValueFilter||this.allowLabelFilter)&&-1!==["Date","Label","Number","Value"].indexOf(i.type))for(c=0,k=l;c<k.length;c++)if(k[c].name===i.name){u=this.filterMembers[i.name];u&&"object"==typeof u[0]&&u[0].type===i.type?u[u.length]=i:this.filterMembers[i.name]=[i];this.fieldList[i.name].isExcelFilter=!0;break}},t.prototype.getParentNode=function(n,t,i){if(t[n].parent&&n!==t[n].parent){var r=t[n].parent;i.push(r);this.getParentNode(r,t,i)}return i},t.prototype.updateDrilledItems=function(t){var e=[],r=n.extend([],this.rows,null,!0),i,u,h;for(r=r.concat(this.columns),i=0,u=t;i<u.length;i++)for(var o=u[i],f=0,s=r;f<s.length;f++)if(h=s[f],o.name===h.name){e.push(o);break}return e},t.prototype.getDrillThroughData=function(n,t){for(var s,u,f,l,a,v,h,e=this.tupColumnInfo[n.colOrdinal]&&this.tupColumnInfo[n.colOrdinal].uNameCollection&&""!==this.tupColumnInfo[n.colOrdinal].uNameCollection?this.tupColumnInfo[n.colOrdinal].uNameCollection.split("::[").map(function(n){return"["===n[0]?n:"["+n}):[],o=this.tupRowInfo[n.rowOrdinal]&&this.tupRowInfo[n.rowOrdinal].uNameCollection&&""!==this.tupRowInfo[n.rowOrdinal].uNameCollection?this.tupRowInfo[n.rowOrdinal].uNameCollection.split("::[").map(function(n){return"["===n[0]?n:"["+n}):[],c=[],r="",i=0;i<this.filters.length;i++)if(h=this.filterMembers[this.filters[i].name]){for(s=0;s<h.length;s++)r+=h[s],r=s<h.length-1?r+",":r+"";c[i]=r;r=""}for(i=0;i<c.length;i++)r=""===r?"{"+c[i]+"}":r+",{"+c[i]+"}";for(u="",f="",i=0;i<e.length;i++)u=(u.length>0?u+",":"")+(e[i].split("~~").length>1?e[i].split("~~")[e[i].split("~~").length-1]:e[i]);for(i=0;i<o.length;i++)f=(f.length>0?f+",":"")+(o[i].split("~~").length>1?o[i].split("~~")[o[i].split("~~").length-1]:o[i]);if(l="DRILLTHROUGH MAXROWS "+t+" Select("+(u.length>0?u:"")+(u.length>0&&f.length>0?",":"")+(f.length>0?f:"")+") on 0 from "+(""===r?"["+this.dataSourceSettings.cube+"]":"(SELECT ("+r+") ON COLUMNS FROM ["+this.dataSourceSettings.cube+"])"),l=l.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;"),a=this.getSoapMsg(this.dataSourceSettings,l),v=this.getConnectionInfo(this.dataSourceSettings.url,this.dataSourceSettings.localeIdentifier),this.doAjaxPost("POST",v.url,a,this.drillThroughSuccess.bind(this),{dataSourceSettings:this.dataSourceSettings,action:"drillThrough"}),this.errorInfo)throw this.errorInfo;},t.prototype.drillThroughSuccess=function(n){var e=[].slice.call(n.querySelectorAll("row")),u="",t,i,o,f,l,r,h;if(e.length>0){for(t=[],i=0;i<e.length;){for(o=[].slice.call(e[i].children),f=0;f<o.length;){var s=o[f],a=s.tagName,c=s.textContent,v=s.getAttribute("xsi:type");t.push('"'+a+'":'+("xsd:double"===v?parseFloat(c||"0"):'"'+c+'"'));f++}i++}for(l=t[0],r=0;r<t.length;)Object.keys(JSON.parse("[{"+t[r]+"}]")[0])[0]!==Object.keys(JSON.parse("[{"+l+"}]")[0])[0]?(u+=","+t[r],r++):(u+=""===u?"[{"+t[r]:"}, {"+t[r],r++);u+="}]"}else for(h=[].slice.call(n.querySelectorAll("faultstring")),i=0;i<h.length;)u+=h[i].textContent,i++;this.gridJSON=u},t.prototype.getFilterMembers=function(n,t,i,r,u){var e,f=this.fieldList[t].levels,o=this.fieldList[t].levelCount;return e=u?"Descendants({"+f[o].id+"}, "+f[i-1].id+", "+(i-o==1?"SELF)":"SELF_AND_BEFORE)"):t+", Descendants({"+f[0].id+"}, "+f[i-1].id+", SELF_AND_BEFORE)",this.fieldList[t].levelCount=i,r||this.getMembers(n,t,!1,e,u),e},t.prototype.getMembers=function(n,t,i,r,u,f){var o,s="DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE",h=this.fieldList[t].hasAllMember,e=(h?t:t+".LEVELS(0)").replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;"),c,l;if(o=i||f?f?"SELECT {"+(f=f.replace(/&/g,"&amp;"))+"} ON 0 FROM ["+n.cube+"] WHERE {}":"SELECT ({"+e+".ALLMEMBERS})"+s+" ON 0 FROM ["+n.cube+"]":"SELECT ({"+(r||(h?e+", "+e+".CHILDREN":e+".ALLMEMBERS"))+"})"+s+" ON 0 FROM ["+n.cube+"]",c=this.getSoapMsg(n,o),l=this.getConnectionInfo(n.url,n.localeIdentifier),u||(this.fieldList[t].filterMembers=[],this.fieldList[t].childMembers=[],this.fieldList[t].searchMembers=[],this.fieldList[t].members={},this.fieldList[t].currrentMembers={}),this.doAjaxPost("POST",l.url,c,f?this.getOlapFilterText.bind(this):this.generateMembers.bind(this),{dataSourceSettings:n,fieldName:t,loadLevelMembers:u,action:"fetchMembers"}),this.errorInfo)throw this.errorInfo;},t.prototype.getOlapFilterText=function(n,t,i){var r=[].slice.call(n.querySelectorAll('Axis[name="Axis0"] Tuple'));r.length>0&&this.fieldList[i.fieldName]&&r[r.length-1].getElementsByTagName("Caption")&&r[r.length-1].getElementsByTagName("Caption")[0]&&(this.fieldList[i.fieldName].actualFilter[0]=r[r.length-1].getElementsByTagName("Caption")[0].textContent)},t.prototype.getChildMembers=function(n,t,i){var r="SELECT ({"+t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")+".CHILDREN})DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE ON 0 FROM ["+n.cube+"]",u=this.getSoapMsg(n,r),f=this.getConnectionInfo(n.url,n.localeIdentifier);if(this.doAjaxPost("POST",f.url,u,this.generateMembers.bind(this),{dataSourceSettings:n,fieldName:i,action:"fetchChildMembers"}),this.errorInfo)throw this.errorInfo;},t.prototype.getCalcChildMembers=function(n,t){this.calcChildMembers=[];var i="SELECT ({"+t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")+".MEMBERS})DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE ON 0 FROM ["+n.cube+"]",r=this.getConnectionInfo(n.url,n.localeIdentifier),u=this.getSoapMsg(n,i);if(this.doAjaxPost("POST",r.url,u,this.generateMembers.bind(this),{dataSourceSettings:n,action:"fetchCalcChildMembers"}),this.errorInfo)throw this.errorInfo;},t.prototype.getSearchMembers=function(n,t,i,r,u,f){if(this.fieldList[t].searchMembers=[],this.fieldList[t].currrentMembers={},""!==i){var e=t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;"),o="WITH SET [SearchMembersSet] AS &#39;FILTER("+(u?e+".ALLMEMBERS, ":"{"+(f>1?this.getFilterMembers(n,t,f,!0):e+", "+e+".CHILDREN")+"},")+"(INSTR(1, "+e+'.CurrentMember.member_caption, "'+i+'") > 0))&#39;SET [SearchParentsSet] AS &#39;GENERATE([SearchMembersSet], ASCENDANTS([SearchMembersSet].Current))&#39;SET [SearchSet] AS &#39;HIERARCHIZE(DISTINCT({[SearchMembersSet], [SearchParentsSet]}))&#39;SELECT SUBSET([SearchSet], 0, '+r+")DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE ON 0 FROM ["+n.cube+"]",s=this.getSoapMsg(n,o),h=this.getConnectionInfo(n.url,n.localeIdentifier);if(this.doAjaxPost("POST",h.url,s,this.generateMembers.bind(this),{dataSourceSettings:n,fieldName:t,action:"fetchSearchMembers"}),this.errorInfo)throw this.errorInfo;}},t.prototype.generateMembers=function(n,t,i){for(var p,v,w=[].slice.call(n.querySelectorAll('Axis[name="Axis0"] Tuple')),u=i.fieldName,f={},l=0,y=w;l<y.length;l++){var o=y[l],h=o.querySelector("Member"),c=h.querySelector("MEMBER_TYPE").textContent,r=h.querySelector("UName").textContent,e=h.querySelector("Caption").textContent,s=h.querySelector("PARENT_UNIQUE_NAME")?h.querySelector("PARENT_UNIQUE_NAME").textContent:"",a={"data-fieldName":u,"data-memberId":r};if(""===s&&"1"===c)f={hasChildren:!!o.querySelector("CHILDREN_CARDINALITY")&&"0"!==o.querySelector("CHILDREN_CARDINALITY").textContent,isSelected:!1,id:r,tag:r,name:e,caption:e,htmlAttributes:a},"fetchMembers"===i.action||"fetchChildMembers"===i.action?(this.fieldList[u].members[r]={name:r,caption:e,parent:void 0,isNodeExpand:!1,isSelected:!1},this.fieldList[u].filterMembers.push(f),this.fieldList[u].childMembers.push(f)):"fetchSearchMembers"===i.action?(this.fieldList[u].currrentMembers[r]={name:r,caption:e,parent:void 0,isNodeExpand:!1,isSelected:!1},this.fieldList[u].searchMembers.push(f),f.expanded=!0):this.calcChildMembers.push(f);else if(""!==s&&"1"===c)if(s===v&&"1"===c)f={hasChildren:!!o.querySelector("CHILDREN_CARDINALITY")&&"0"!==o.querySelector("CHILDREN_CARDINALITY").textContent,id:r,name:e,isSelected:!1,caption:e,htmlAttributes:a,tag:r},"fetchMembers"===i.action||"fetchChildMembers"===i.action?(this.fieldList[u].filterMembers.push(f),this.fieldList[u].childMembers.push(f),this.fieldList[u].members[r]={name:r,caption:e,parent:void 0,isNodeExpand:!1,isSelected:!1}):"fetchSearchMembers"===i.action?(f.expanded=!0,this.fieldList[u].searchMembers.push(f),this.fieldList[u].currrentMembers[r]={name:r,caption:e,parent:void 0,isNodeExpand:!1,isSelected:!1}):this.calcChildMembers.push(f);else{if("fetchMembers"===i.action&&this.fieldList[u].members[r])continue;p=!!i.loadLevelMembers&&this.fieldList[u].members[s].isSelected;f={hasChildren:!!o.querySelector("CHILDREN_CARDINALITY")&&"0"!==o.querySelector("CHILDREN_CARDINALITY").textContent,htmlAttributes:a,isSelected:!1,id:r,pid:s,name:e,caption:e,tag:r};"fetchMembers"===i.action||"fetchChildMembers"===i.action?(this.fieldList[u].isHierarchy=!1,this.fieldList[u].filterMembers.push(f),this.fieldList[u].childMembers.push(f),this.fieldList[u].members[r]={name:r,caption:e,parent:s,isNodeExpand:!1,isSelected:p}):"fetchSearchMembers"===i.action?(this.fieldList[u].searchMembers.push(f),f.expanded=!0,this.fieldList[u].currrentMembers[r]={name:r,caption:e,parent:s,isNodeExpand:!1,isSelected:!1}):this.calcChildMembers.push(f)}else"2"===c&&(v=r)}},t.prototype.getFieldListItems=function(n,t,i){for(var l,o,s=[],e=0,h=[].slice.call(n.querySelectorAll("row"));e<h.length;e++){var r=h[e],c=[].slice.call(r.querySelectorAll("ALL_MEMBER")).length>0,u=r.querySelector("DIMENSION_UNIQUE_NAME").textContent,f=r.querySelector("HIERARCHY_UNIQUE_NAME").textContent,a=u===f&&"[measures]"!==u.toLowerCase()&&"[measures]"!==f.toLowerCase();s.push({pid:this.isMondrian||a?u+"~#^Dim":u,id:f,name:r.querySelector("HIERARCHY_CAPTION").textContent,caption:r.querySelector("HIERARCHY_CAPTION").textContent,tag:f,hasAllMember:c,allMember:c?r.querySelectorAll("ALL_MEMBER")[0].textContent:void 0,type:"string"})}o={hierarchy:s,hierarchySuccess:n,measures:[]};this.fieldListObj=o;l={catalog:i.dataSourceSettings.catalog,cube:i.dataSourceSettings.cube,url:i.dataSourceSettings.url,LCID:i.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_DIMENSIONS",roles:i.dataSourceSettings.roles};this.getTreeData(l,this.loadDimensionElements.bind(this),i)},t.prototype.loadCalculatedMemberElements=function(n){var i,o,u,f,t;if(n.length>0)for(i=this.fieldListData,o={hasChildren:!0,isSelected:!1,id:"[Calculated Members].[_0]",name:"[Calculated Members].[_0]",caption:"Calculated Members",spriteCssClass:"e-calcMemberGroupCDB "+s,tag:"[Calculated Members].[_0]",type:"string"},i.length>0&&"[measures]"===i[0].id.toLowerCase()&&i.splice(0,0,o),u=0,f=n;u<f.length;u++)if(t=f[u],!this.fieldList[t.name]){var r=t.formula,h=(r.toLowerCase().indexOf("measure")>-1?"[Measures].":t.hierarchyUniqueName+".")+"["+t.name+"]",c=this.dataFields[t.name]&&this.dataFields[t.name].caption?this.dataFields[t.name].caption:this.mappingFields[t.name]&&this.mappingFields[t.name].caption?this.mappingFields[t.name].caption:t.name,l=t.formatString,e={hasChildren:!1,isSelected:!1,id:t.name,pid:"[Calculated Members].[_0]",name:t.name,caption:c,spriteCssClass:"e-calc-member "+(r.toLowerCase().indexOf("measure")>-1?"e-calc-measure-icon":"e-calc-dimension-icon")+" "+s,tag:h,formula:r,formatString:l,aggregateType:void 0,type:"CalculatedField",filter:[],dateMember:[],sort:"Ascending",actualFilter:[],filterMembers:[],childMembers:[],searchMembers:[],members:{},currrentMembers:{},isHierarchy:!0,isExcelFilter:!1,isCalculatedField:!0,allowDragAndDrop:this.dataFields[t.name]?this.dataFields[t.name].allowDragAndDrop:!this.mappingFields[t.name]||this.mappingFields[t.name].allowDragAndDrop,showFilterIcon:this.dataFields[t.name]?this.dataFields[t.name].showFilterIcon:!this.mappingFields[t.name]||this.mappingFields[t.name].showFilterIcon,showSortIcon:this.dataFields[t.name]?this.dataFields[t.name].showSortIcon:!this.mappingFields[t.name]||this.mappingFields[t.name].showSortIcon,showEditIcon:this.dataFields[t.name]?this.dataFields[t.name].showEditIcon:!this.mappingFields[t.name]||this.mappingFields[t.name].showEditIcon,showRemoveIcon:this.dataFields[t.name]?this.dataFields[t.name].showRemoveIcon:!this.mappingFields[t.name]||this.mappingFields[t.name].showRemoveIcon,showValueTypeIcon:this.dataFields[t.name]?this.dataFields[t.name].showValueTypeIcon:!this.mappingFields[t.name]||this.mappingFields[t.name].showValueTypeIcon,showSubTotals:this.dataFields[t.name]?this.dataFields[t.name].showSubTotals:!this.mappingFields[t.name]||this.mappingFields[t.name].showSubTotals,fieldType:r.toLowerCase().indexOf("measure")>-1?"Measure":"Dimension",parentHierarchy:r.toLowerCase().indexOf("measure")>-1?void 0:t.hierarchyUniqueName};i.push(e);this.fieldList[e.id]=e;this.updateMembersOrder(t.name)}},t.prototype.loadDimensionElements=function(t,i,r){for(var v,e=[],h=[].slice.call(t.querySelectorAll("row")),c={},o=0,l=h;o<l.length;o++){var f=l[o],u=f.querySelector("DIMENSION_UNIQUE_NAME").textContent,y=f.querySelector("DEFAULT_HIERARCHY").textContent,a=f.querySelector("DIMENSION_CAPTION").textContent,p=u===y;u.toLowerCase().indexOf("[measure")>=0?c={hasChildren:!0,isSelected:!1,id:u,name:u,caption:a,spriteCssClass:"[measures]"===u.toLowerCase()?"e-measureGroupCDB-icon "+s:"e-dimensionCDB-icon "+s,tag:u,type:"string"}:n.isNullOrUndefined(h[0].querySelector("HIERARCHY_CAPTION"))&&e.push({hasChildren:!0,isSelected:!1,id:this.isMondrian||p?u+"~#^Dim":u,name:u,caption:a,spriteCssClass:"e-dimensionCDB-icon "+s,tag:u,defaultHierarchy:f.querySelector("DEFAULT_HIERARCHY").textContent,type:"string"})}e.splice(0,0,c);this.fieldListData=e;v={catalog:r.dataSourceSettings.catalog,cube:r.dataSourceSettings.cube,url:r.dataSourceSettings.url,LCID:r.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_SETS",roles:r.dataSourceSettings.roles};this.getTreeData(v,this.loadNamedSetElements.bind(this),r)},t.prototype.loadNamedSetElements=function(t,i,r){var e=n.extend([],this.rows,null,!0),f,u,c;e=e.concat(this.columns,this.filters);for(var l=this.fieldListData,a=[],o=0,v=e;o<v.length;o++)f=v[o],a.push(f.name);for(var y=[],h=0,p=[].slice.call(t.querySelectorAll("row"));h<p.length;h++)f=p[h],y.indexOf(f.querySelector("DIMENSIONS").textContent.split(".")[0])>=0||(l.push({hasChildren:!0,isSelected:!1,pid:f.querySelector("DIMENSIONS").textContent.split(".")[0],id:f.querySelector("SET_DISPLAY_FOLDER").textContent+"_"+f.querySelector("DIMENSIONS").textContent.split(".")[0],name:f.querySelector("SET_DISPLAY_FOLDER").textContent,spriteCssClass:"e-folderCDB-icon "+s+" namedSets",caption:f.querySelector("SET_DISPLAY_FOLDER").textContent,type:"string"}),y.push(f.querySelector("DIMENSIONS").textContent.split(".")[0])),u="["+f.querySelector("SET_NAME").textContent.trim()+"]",c={hasChildren:!0,isNamedSets:!0,isSelected:a.indexOf("["+f.querySelector("SET_NAME").textContent+"]")>=0,pid:f.querySelector("SET_DISPLAY_FOLDER").textContent+"_"+f.querySelector("DIMENSIONS").textContent.split(".")[0],id:u,name:f.querySelector("SET_CAPTION").textContent,caption:this.dataFields[u]&&this.dataFields[u].caption?this.dataFields[u].caption:this.mappingFields[u]&&this.mappingFields[u].caption?this.mappingFields[u].caption:f.querySelector("SET_CAPTION").textContent,spriteCssClass:"e-namedSetCDB-icon "+s,tag:f.querySelector("EXPRESSION").textContent,type:"string",filter:[],dateMember:[],actualFilter:[],filterMembers:[],childMembers:[],searchMembers:[],members:{},currrentMembers:{},isHierarchy:!0,isExcelFilter:!1,allowDragAndDrop:this.dataFields[u]?this.dataFields[u].allowDragAndDrop:!this.mappingFields[u]||this.mappingFields[u].allowDragAndDrop,showFilterIcon:this.dataFields[u]?this.dataFields[u].showFilterIcon:!this.mappingFields[u]||this.mappingFields[u].showFilterIcon,showSortIcon:this.dataFields[u]?this.dataFields[u].showSortIcon:!this.mappingFields[u]||this.mappingFields[u].showSortIcon,showEditIcon:this.dataFields[u]?this.dataFields[u].showEditIcon:!this.mappingFields[u]||this.mappingFields[u].showEditIcon,showRemoveIcon:this.dataFields[u]?this.dataFields[u].showRemoveIcon:!this.mappingFields[u]||this.mappingFields[u].showRemoveIcon,showValueTypeIcon:this.dataFields[u]?this.dataFields[u].showValueTypeIcon:!this.mappingFields[u]||this.mappingFields[u].showValueTypeIcon,showSubTotals:this.dataFields[u]?this.dataFields[u].showSubTotals:!this.mappingFields[u]||this.mappingFields[u].showSubTotals},l.push(c),this.fieldList[u]=c,this.updateMembersOrder(u);r.hierarchy=this.fieldListData;r.hierarchySuccess=this.fieldListObj.hierarchySuccess;this.loadHierarchyElements(r)},t.prototype.loadHierarchyElements=function(t){for(var r,o,y,w,c,l,f,ot,d,st,ht=t.hierarchySuccess,e=t.hierarchy,g=n.extend([],this.rows,null,!0),nt=[],v=0,tt=g=g.concat(this.columns,this.filters);v<tt.length;v++)r=tt[v],nt.push(r.name);for(o=0,y=[].slice.call(ht.querySelectorAll("row"));o<y.length;o++){var u=(r=y[o]).querySelector("DIMENSION_UNIQUE_NAME").textContent,i=r.querySelector("HIERARCHY_UNIQUE_NAME").textContent,it=[].slice.call(r.querySelectorAll("ALL_MEMBER")).length>0,p=void 0;it?(w=r.querySelectorAll("ALL_MEMBER")[0].textContent.replace(/[&[\]']+/g,"").split("."),p=w[w.length-1].trim()):p=void 0;for(var h=r.querySelector("HIERARCHY_DISPLAY_FOLDER")?r.querySelector("HIERARCHY_DISPLAY_FOLDER").textContent:"",rt=[],b=0,ut=e;b<ut.length;b++)(f=ut[b]).tag===u&&rt.push(f);if(rt.length>0&&(c=u===i&&"[measures]"!==u.toLowerCase()&&"[measures]"!==i.toLowerCase(),"[measures]"!==u.toLowerCase()&&"[measures]"!==i.toLowerCase())){if(l=u+(this.isMondrian||c?"~#^Dim":""),""!==h){for(var a=u+(this.isMondrian||c?"~#^Dim":"")+"_"+h,ft=[],k=0,et=e;k<et.length;k++)(f=et[k]).tag===a&&f.pid===l&&ft.push(f);0===ft.length&&(ot={hasChildren:!0,isSelected:!1,pid:u+(this.isMondrian||c?"~#^Dim":""),id:a,name:h,spriteCssClass:"e-folderCDB-icon "+s,tag:a,caption:h,type:"string"},e.push(ot));l=a}d={hasChildren:!r.querySelector("HIERARCHY_ORIGIN")||"2"!==r.querySelector("HIERARCHY_ORIGIN").textContent&&"6"!==r.querySelector("HIERARCHY_ORIGIN").textContent,isSelected:nt.indexOf(i)>=0,pid:l,id:i,name:r.querySelector("HIERARCHY_CAPTION").textContent,spriteCssClass:(r.querySelector("HIERARCHY_ORIGIN")?"2"!==r.querySelector("HIERARCHY_ORIGIN").textContent&&"6"!==r.querySelector("HIERARCHY_ORIGIN").textContent?"e-hierarchyCDB-icon":"e-attributeCDB-icon":"e-hierarchyCDB-icon")+" "+s,hasAllMember:it,allMember:p,tag:i,caption:this.dataFields[i]&&this.dataFields[i].caption?this.dataFields[i].caption:this.mappingFields[i]&&this.mappingFields[i].caption?this.mappingFields[i].caption:r.querySelector("HIERARCHY_CAPTION").textContent,type:"string",filter:[],dateMember:[],sort:this.enableSort?this.sortObject[i]?this.sortObject[i]:"Ascending":"None",actualFilter:[],filterMembers:[],childMembers:[],searchMembers:[],members:{},currrentMembers:{},levels:[],levelCount:1,isHierarchy:!!r.querySelector("HIERARCHY_ORIGIN")&&("2"===r.querySelector("HIERARCHY_ORIGIN").textContent||"6"===r.querySelector("HIERARCHY_ORIGIN").textContent),isExcelFilter:!1,allowDragAndDrop:this.dataFields[i]?this.dataFields[i].allowDragAndDrop:!this.mappingFields[i]||this.mappingFields[i].allowDragAndDrop,showFilterIcon:this.dataFields[i]?this.dataFields[i].showFilterIcon:!this.mappingFields[i]||this.mappingFields[i].showFilterIcon,showSortIcon:this.dataFields[i]?this.dataFields[i].showSortIcon:!this.mappingFields[i]||this.mappingFields[i].showSortIcon,showEditIcon:this.dataFields[i]?this.dataFields[i].showEditIcon:!this.mappingFields[i]||this.mappingFields[i].showEditIcon,showRemoveIcon:this.dataFields[i]?this.dataFields[i].showRemoveIcon:!this.mappingFields[i]||this.mappingFields[i].showRemoveIcon,showValueTypeIcon:this.dataFields[i]?this.dataFields[i].showValueTypeIcon:!this.mappingFields[i]||this.mappingFields[i].showValueTypeIcon,showSubTotals:this.dataFields[i]?this.dataFields[i].showSubTotals:!this.mappingFields[i]||this.mappingFields[i].showSubTotals};e.push(d);this.fieldList[i]=d;this.updateMembersOrder(i)}}st={catalog:t.dataSourceSettings.catalog,cube:t.dataSourceSettings.cube,url:t.dataSourceSettings.url,LCID:t.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_LEVELS",roles:t.dataSourceSettings.roles};this.getTreeData(st,this.loadLevelElements.bind(this),t)},t.prototype.updateMembersOrder=function(n){for(var i,t=0,r=this.sortSettings;t<r.length;t++)if(i=r[t],n===i.name&&i.membersOrder){this.fieldList[n].membersOrder=i.membersOrder;break}},t.prototype.loadLevelElements=function(n,t,i){var e=[],h=this.fieldListData,f,o,u,v;for(e=[],f=0,o=[].slice.call(n.querySelectorAll("row"));f<o.length;f++)if(u=o[f],1!==parseInt(u.querySelector("LEVEL_TYPE").textContent,10)&&"[measures]"!==u.querySelector("HIERARCHY_UNIQUE_NAME").textContent.toLowerCase()){var r=u.querySelector("HIERARCHY_UNIQUE_NAME").textContent,c=u.querySelector("LEVEL_UNIQUE_NAME").textContent,l=u.querySelector("LEVEL_CAPTION").textContent,a={hasChildren:!1,isChecked:!1,isSelected:this.fieldList[r].isSelected,pid:r,id:c,name:l,tag:c,spriteCssClass:"e-level-members e-hierarchy-level-"+parseInt(u.querySelector("LEVEL_NUMBER").textContent,10)+"-icon "+s,caption:l,type:"string"};e.push(a);this.fieldList[r]&&this.fieldList[r].spriteCssClass&&-1===this.fieldList[r].spriteCssClass.indexOf("e-attributeCDB-icon")?(this.fieldList[r].levels.push(a),this.fieldList[r].isHierarchy=!1):this.fieldList[r].isHierarchy=!0}this.fieldListData=h=h.concat(e);v={catalog:i.dataSourceSettings.catalog,cube:i.dataSourceSettings.cube,url:i.dataSourceSettings.url,LCID:i.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_MEASURES",roles:i.dataSourceSettings.roles};this.getTreeData(v,this.loadMeasureElements.bind(this),i)},t.prototype.loadMeasureElements=function(t,i,r){for(var f,g,c,a,p,w,h,b=this.fieldListData,k=[],o=[],l=0,d=n.extend([],this.values,null,!0);l<d.length;l++)f=d[l],o.push(f.name);for("en-US"!==this.locale&&(g={catalog:r.dataSourceSettings.catalog,cube:r.dataSourceSettings.cube,url:r.dataSourceSettings.url,LCID:r.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_MEASUREGROUPS",roles:r.dataSourceSettings.roles},this.getTreeData(g,this.loadMeasureGroups.bind(this),r)),c=0,a=[].slice.call(t.querySelectorAll("row"));c<a.length;c++){f=a[c];var e=n.isNullOrUndefined(f.querySelector("MEASUREGROUP_NAME"))?"":f.querySelector("MEASUREGROUP_NAME").textContent,u=f.querySelector("MEASURE_UNIQUE_NAME").textContent,it=f.querySelector("DEFAULT_FORMAT_STRING")?f.querySelector("DEFAULT_FORMAT_STRING").textContent:"#,#",nt=f.querySelector("MEASURE_AGGREGATOR")?f.querySelector("MEASURE_AGGREGATOR").textContent:"1";if(!(k.indexOf(e)>=0)){if("en-US"!==this.locale){for(var v=[],y=0,tt=this.fieldListObj.measuresGroups;y<tt.length;y++)p=tt[y],p.querySelector("MEASUREGROUP_NAME").textContent===e&&v.push(p);h=v.length>0?v[0].querySelector("MEASUREGROUP_CAPTION").textContent:e}else h=e;""!==e&&(b.push({hasChildren:!0,isChecked:!1,isSelected:!1,pid:"[Measures]",id:e,name:h,spriteCssClass:"e-measureCDB e-folderCDB-icon "+s,tag:e,caption:h,aggregateType:this.getAggregateType(e,nt),type:"string"}),k.push(e))}w={hasChildren:!1,isSelected:o.indexOf(u)>=0,pid:""===e?"[Measures]":e,id:u,name:f.querySelector("MEASURE_CAPTION").textContent,spriteCssClass:"e-measure-icon "+s,tag:u,caption:this.dataFields[u]&&this.dataFields[u].caption?this.dataFields[u].caption:this.mappingFields[u]&&this.mappingFields[u].caption?this.mappingFields[u].caption:f.querySelector("MEASURE_CAPTION").textContent,aggregateType:this.getAggregateType(u,nt),type:"number",filter:[],actualFilter:[],filterMembers:[],childMembers:[],searchMembers:[],members:{},currrentMembers:{},formatString:it,allowDragAndDrop:this.dataFields[u]?this.dataFields[u].allowDragAndDrop:!this.mappingFields[u]||this.mappingFields[u].allowDragAndDrop,showFilterIcon:this.dataFields[u]?this.dataFields[u].showFilterIcon:!this.mappingFields[u]||this.mappingFields[u].showFilterIcon,showSortIcon:this.dataFields[u]?this.dataFields[u].showSortIcon:!this.mappingFields[u]||this.mappingFields[u].showSortIcon,showEditIcon:this.dataFields[u]?this.dataFields[u].showEditIcon:!this.mappingFields[u]||this.mappingFields[u].showEditIcon,showRemoveIcon:this.dataFields[u]?this.dataFields[u].showRemoveIcon:!this.mappingFields[u]||this.mappingFields[u].showRemoveIcon,showValueTypeIcon:this.dataFields[u]?this.dataFields[u].showValueTypeIcon:!this.mappingFields[u]||this.mappingFields[u].showValueTypeIcon,showSubTotals:this.dataFields[u]?this.dataFields[u].showSubTotals:!this.mappingFields[u]||this.mappingFields[u].showSubTotals};b.push(w);this.fieldList[u]=w;o.indexOf(u)>=0&&o.splice(o.indexOf(u),1)}this.measureReportItems=o},t.prototype.loadMeasureGroups=function(t){n.isNullOrUndefined(this.fieldListObj)&&(this.fieldListObj={});this.fieldListObj.measuresGroups=[].slice.call(t.querySelectorAll("row"))},t.prototype.doAjaxPost=function(t,i,r,u,f){var s=this,e={dataSourceSettings:f.dataSourceSettings,action:f.action,customProperties:{},internalProperties:{headers:{"Content-Type":"text/xml"},requestType:"string",data:r}},o;this.getBeforeSeviceInvoke&&this.getBeforeSeviceInvoke(e);this.requestHeaders=e.internalProperties.headers||{};o=this.requestHeaders["Content-Type"]?this.requestHeaders["Content-Type"]:"text/xml";new n.Ajax({mode:!1,contentType:o,url:i,data:r,dataType:"xml",type:t,beforeSend:this.beforeSend.bind(this),onSuccess:this.onSuccess.bind(this,u,f),onFailure:function(n){s.errorInfo=n}}).send()},t.prototype.onSuccess=function(n,t,i,r){var f=(new DOMParser).parseFromString(i,"text/xml"),u=f.querySelector("Body"),e;(u.querySelector("OlapInfo")||u.querySelector("DiscoverResponse")||(u.querySelector("Fault")&&u.querySelector("Fault").querySelector("faultstring")?this.errorInfo=u.querySelector("Fault").querySelector("faultstring").innerHTML:u.querySelector("return")&&u.querySelector("return").querySelector("Error")&&(this.errorInfo=u.querySelector("return").querySelector("Error").getAttribute("Description"))),this.getAfterSeviceInvoke)&&(e={action:t.action,response:i},this.getAfterSeviceInvoke(e));n(f,r,t)},t.prototype.beforeSend=function(n){for(var t in this.dataSourceSettings.authentication.userName&&this.dataSourceSettings.authentication.password&&n.httpRequest.setRequestHeader("Authorization","Basic "+btoa(this.dataSourceSettings.authentication.userName+":"+this.dataSourceSettings.authentication.password)),this.requestHeaders)Object.prototype.hasOwnProperty.call(this.requestHeaders,t)&&"Content-Type"!==t&&n.httpRequest.setRequestHeader(t,this.requestHeaders[t])},t.prototype.getSoapMsg=function(n,t){var i=this.getConnectionInfo(n.url,n.localeIdentifier);return this.isMondrian?'<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement><![CDATA['+t+"]\]><\/Statement><\/Command><Properties><PropertyList><DataSourceInfo><\/DataSourceInfo><Catalog>"+n.catalog+"<\/Catalog><AxisFormat>TupleFormat<\/AxisFormat><Content>Data<\/Content><Format>Multidimensional<\/Format><\/PropertyList><\/Properties><\/Execute><\/SOAP-ENV:Body><\/SOAP-ENV:Envelope>":'<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"> <Header><\/Header> <Body> <Execute xmlns="urn:schemas-microsoft-com:xml-analysis"> <Command> <Statement> '+t+" <\/Statement> <\/Command> <Properties> <PropertyList> <Catalog>"+n.catalog+"<\/Catalog> <LocaleIdentifier>"+i.LCID+"<\/LocaleIdentifier>"+(n.roles?"<Roles>"+n.roles+"<\/Roles>":"")+"<\/PropertyList> <\/Properties> <\/Execute> <\/Body> <\/Envelope>"},t.prototype.getConnectionInfo=function(t,i){var u={url:"",LCID:n.isNullOrUndefined(i)?"1033":i.toString()},f,e,r;if(""!==t)for(f=0,e=t.split(";");f<e.length;f++)r=e[f],r.toLowerCase().indexOf("locale")<0&&0===u.url.length?u.url=r:r.toLowerCase().indexOf("locale")>=0&&(u.LCID=r.replace(/ /g,"").split("=")[1]);return u},t.prototype.getMDXQuery=function(n){return nf.getCellSets(n,this,!0,void 0,!0),this.mdxQuery},t}();const dp=ejdashboard.svgbase;ba=function(){function t(){}return t.prototype.drawHeader=function(n,t){var r=t.pageSettings.size,i=n.header,u=new e.PointF(0,i&&i.fromTop?i.fromTop:0),f=new e.SizeF(r.width-80,i&&i.height?.75*i.height:50),o=new e.RectangleF(u,f);t.template.top=this.drawPageTemplate(new e.PdfPageTemplateElement(o),i)},t.prototype.drawFooter=function(n,t){var r=t.pageSettings.size,i=n.footer,u=new e.PointF(0,r.width-80-(i&&i.fromBottom?.75*i.fromBottom:0)),f=new e.SizeF(r.width-80,i&&i.height?.75*i.height:50),o=new e.RectangleF(u,f);t.template.bottom=this.drawPageTemplate(new e.PdfPageTemplateElement(o),i)},t.prototype.drawPageTemplate=function(t,i){for(var r,u=0,f=i.contents;u<f.length;u++){r=f[u];switch(this.processContentValidation(r),r.type){case"Text":if(""===r.value||n.isNullOrUndefined(r.value)||"string"!=typeof r.value)throw new Error("please enter the valid input value in text content...");this.drawText(t,r);break;case"PageNumber":this.drawPageNumber(t,r);break;case"Image":if(n.isNullOrUndefined(r.src)||""===r.src)throw new Error("please enter the valid base64 string in image content...");this.drawImage(t,r);break;case"Line":this.drawLine(t,r)}}return t},t.prototype.processContentValidation=function(t){if(n.isNullOrUndefined(t.type))throw new Error("please set valid content type...");if("Line"===t.type){if(n.isNullOrUndefined(t.points))throw new Error("please enter valid points in "+t.type+" content...");if(n.isNullOrUndefined(t.points.x1)||"number"!=typeof t.points.x1)throw new Error("please enter valid x1 co-ordinate in "+t.type+" points...");if(n.isNullOrUndefined(t.points.y1)||"number"!=typeof t.points.y1)throw new Error("please enter valid y1 co-ordinate in "+t.type+" points...");if(n.isNullOrUndefined(t.points.x2)||"number"!=typeof t.points.x2)throw new Error("please enter valid x2 co-ordinate in "+t.type+" points...");if(n.isNullOrUndefined(t.points.y2)||"number"!=typeof t.points.y2)throw new Error("please enter valid y2 co-ordinate in "+t.type+" points...");}else{if(n.isNullOrUndefined(t.position))throw new Error("please enter valid position in "+t.type+" content...");if(n.isNullOrUndefined(t.position.x)||"number"!=typeof t.position.x)throw new Error("please enter valid x co-ordinate in "+t.type+" position...");if(n.isNullOrUndefined(t.position.y)||"number"!=typeof t.position.y)throw new Error("please enter valid y co-ordinate in "+t.type+" position...");}},t.prototype.drawText=function(t,i){var h=this.getFontFromContent(i),u=this.getBrushFromContent(i),f=null,o,r;n.isNullOrUndefined(i.style)||n.isNullOrUndefined(i.style.textPenColor)||(o=this.hexDecToRgb(i.style.textPenColor),f=new e.PdfPen(new e.PdfColor(o.r,o.g,o.b)));null==u&&null==f&&(u=new e.PdfSolidBrush(new e.PdfColor(0,0,0)));var c=i.value.toString(),l=.75*i.position.x,a=.75*i.position.y,s=new e.PdfStringFormat;n.isNullOrUndefined(i.stringFormat)||(s=i.stringFormat);r=this.setContentFormat(i,s);null===r||n.isNullOrUndefined(r.format)||n.isNullOrUndefined(r.size)?t.graphics.drawString(c,h,f,u,l,a,s):t.graphics.drawString(c,h,f,u,l,a,r.size.width,r.size.height,r.format)},t.prototype.drawPageNumber=function(t,i){var f=this.getFontFromContent(i),o=null,a,u,r,l,s,h,v;n.isNullOrUndefined(i.style)||n.isNullOrUndefined(i.style.textBrushColor)?o=new e.PdfSolidBrush(new e.PdfColor(0,0,0)):(a=this.hexDecToRgb(i.style.textBrushColor),o=new e.PdfSolidBrush(new e.PdfColor(a.r,a.g,a.b)));l=new e.PdfPageNumberField(f,o);(l.numberStyle=this.getPageNumberStyle(i.pageNumberType),n.isNullOrUndefined(i.format))?(r="{0}",u=new e.PdfCompositeField(f,o,r,l)):(s="$total",h="$current",-1!==i.format.indexOf(s)&&-1!==i.format.indexOf(h)?((v=new e.PdfPageCountField(f)).numberStyle=this.getPageNumberStyle(i.pageNumberType),r=i.format.indexOf(s)>i.format.indexOf(h)?(r=i.format.replace(h,"0")).replace(s,"1"):(r=i.format.replace(h,"1")).replace(s,"0"),u=new e.PdfCompositeField(f,o,r,l,v)):-1!==i.format.indexOf(h)&&-1===i.format.indexOf(s)?(r=i.format.replace(h,"0"),u=new e.PdfCompositeField(f,o,r,l)):(v=new e.PdfPageCountField(f),r=i.format.replace(s,"0"),u=new e.PdfCompositeField(f,o,r,v)));var y=.75*i.position.x,p=.75*i.position.y,c=this.setContentFormat(i,u.stringFormat);null===c||n.isNullOrUndefined(c.format)||n.isNullOrUndefined(c.size)||(u.stringFormat=c.format,u.bounds=new e.RectangleF(y,p,c.size.width,c.size.height));u.draw(t.graphics,y,p)},t.prototype.drawImage=function(t,i){var r=.75*i.position.x,u=.75*i.position.y,f=n.isNullOrUndefined(i.size)||n.isNullOrUndefined(i.size.width)?void 0:.75*i.size.width,s=n.isNullOrUndefined(i.size)||n.isNullOrUndefined(i.size.height)?void 0:.75*i.size.height,o=new e.PdfBitmap(i.src);n.isNullOrUndefined(f)?t.graphics.drawImage(o,r,u):t.graphics.drawImage(o,r,u,f,s)},t.prototype.drawLine=function(t,i){var u=.75*i.points.x1,f=.75*i.points.y1,e=.75*i.points.x2,o=.75*i.points.y2,r=this.getPenFromContent(i);n.isNullOrUndefined(i.style)||(n.isNullOrUndefined(i.style.penSize)||"number"!=typeof i.style.penSize||(r.width=.75*i.style.penSize),r.dashStyle=this.getDashStyle(i.style.dashStyle));t.graphics.drawLine(r,u,f,e,o)},t.prototype.getFontFromContent=function(t){var r=n.isNullOrUndefined(t.font)||n.isNullOrUndefined(t.font.fontSize)?n.isNullOrUndefined(t.style)||n.isNullOrUndefined(t.style.fontSize)?9.75:.75*t.style.fontSize:.75*t.font.fontSize,u=n.isNullOrUndefined(t.font)||n.isNullOrUndefined(t.font.pdfFontFamily)?e.PdfFontFamily.TimesRoman:t.font.pdfFontFamily,i=e.PdfFontStyle.Regular;return n.isNullOrUndefined(t.font)||n.isNullOrUndefined(t.font.bold)||(i|=e.PdfFontStyle.Bold),n.isNullOrUndefined(t.font)||n.isNullOrUndefined(t.font.italic)||(i|=e.PdfFontStyle.Italic),n.isNullOrUndefined(t.font)||n.isNullOrUndefined(t.font.underline)||(i|=e.PdfFontStyle.Underline),n.isNullOrUndefined(t.font)||n.isNullOrUndefined(t.font.strikeout)||(i|=e.PdfFontStyle.Strikeout),new e.PdfStandardFont(u,r,i)},t.prototype.getPenFromContent=function(t){var r=new e.PdfPen(new e.PdfColor(0,0,0)),i;return n.isNullOrUndefined(t.style)||null===t.style||n.isNullOrUndefined(t.style.penColor)||(i=this.hexDecToRgb(t.style.penColor),r=new e.PdfPen(new e.PdfColor(i.r,i.g,i.b))),r},t.prototype.getBrushFromContent=function(t){var r=null,i;return n.isNullOrUndefined(t.style)||n.isNullOrUndefined(t.style.textBrushColor)||(i=this.hexDecToRgb(t.style.textBrushColor),r=new e.PdfSolidBrush(new e.PdfColor(i.r,i.g,i.b))),r},t.prototype.setContentFormat=function(t,i){if(!n.isNullOrUndefined(t.size)){var r=.75*t.size.width,u=.75*t.size.height;if(i=new e.PdfStringFormat(e.PdfTextAlignment.Left,e.PdfVerticalAlignment.Middle),!n.isNullOrUndefined(t.style)&&!n.isNullOrUndefined(t.style.hAlign))switch(t.style.hAlign){case"Right":i.alignment=e.PdfTextAlignment.Right;break;case"Center":i.alignment=e.PdfTextAlignment.Center;break;case"Justify":i.alignment=e.PdfTextAlignment.Justify}if(!n.isNullOrUndefined(t.style)&&!n.isNullOrUndefined(t.style.vAlign))switch(t.style.vAlign){case"Bottom":i.lineAlignment=e.PdfVerticalAlignment.Bottom;break;case"Top":i.lineAlignment=e.PdfVerticalAlignment.Top}return{format:i,size:new e.SizeF(r,u)}}return null},t.prototype.getPageNumberStyle=function(n){switch(n){case"LowerLatin":return 2;case"LowerRoman":return 3;case"UpperLatin":return 4;case"UpperRoman":return 5;default:return 1}},t.prototype.getDashStyle=function(n){switch(n){case"Dash":return 1;case"Dot":return 2;case"DashDot":return 3;case"DashDotDot":return 4;default:return 0}},t.prototype.hexDecToRgb=function(n){if(null===n||""===n||7!==n.length)throw new Error("please set valid hex value for color..");n=n.substring(1);var t=parseInt(n,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},t}();ka=function(){function t(n){this.parent=n;this.pdfExportHelper=new ba}return t.prototype.getModuleName=function(){return"chartExport"},t.prototype.pdfChartExport=function(t,i,r,u){var a=this,v=[this.parent.chart],f=this.getChartInfo(v),h=f.width,c=f.height,o=this.parent.chart.svgObject;this.parent.enableRtl&&f.svg&&f.svg.querySelector("#"+this.parent.element.id+"_chart_svg").setAttribute("direction","rtl");this.parent.chart.enableCanvas||(o=n.createElement("canvas",{id:"ej2-canvas",attrs:{width:h.toString(),height:c.toString()}}));var l=window.URL.createObjectURL(new Blob([(new XMLSerializer).serializeToString(f.svg)],{type:"image/svg+xml"})),s=new Image,y=o.getContext("2d");return s.src=l,new Promise(function(f){s.onload=function(){var v;v=n.isNullOrUndefined(i)?new e.PdfDocument:i;y.drawImage(s,0,0);window.URL.revokeObjectURL(l);a.exportPdf(o,v,r,u,h,c,t);f(v)}})},t.prototype.getChartInfo=function(t,i){var e,u=0,f=0,o=this.parent.chart.enableCanvas,r=new dp.SvgRenderer("").createSvg({id:"Svg_Export_Element",width:200,height:200});return t.map(function(t){var s=t.svgObject.cloneNode(!0),h=t.renderer.createGroup({style:n.isNullOrUndefined(i)||i?"transform: translateY("+f+"px)":"transform: translateX("+u+"px)"});"transparent"===(e=s.childNodes[0]?s.childNodes[0].getAttribute("fill"):"transparent")&&(e=t.theme.indexOf("Dark")>-1||"HighContrast"===t.theme?"rgba(0, 0, 0, 1)":"rgba(255, 255, 255, 1)");o||h.appendChild(s);u=t.availableSize.width;f=t.availableSize.height;o||r.appendChild(h)}),o||(r.setAttribute("width",u+""),r.setAttribute("height",f+""),r.style.backgroundColor=e),{width:u,height:f,svg:r}},t.prototype.exportPdf=function(t,i,u,f,o,s,h){var y=i.sections.add(),p=i.pageSettings.width,l=i.pageSettings.height,w=i.pageSettings.margins,b=o+w.left+w.right,k,c,a,d,g,v,nt;return i.pageSettings.size=new e.SizeF(b,l),n.isNullOrUndefined(this.exportProperties)&&(this.exportProperties={}),k=this.exportProperties.fileName?this.exportProperties.fileName:n.isNullOrUndefined(h)||n.isNullOrUndefined(h.fileName)?"default":h.fileName,(this.exportProperties.width||this.exportProperties.height?(i.pageSettings.orientation=this.exportProperties.width>this.exportProperties.height||!this.exportProperties.height&&this.exportProperties.width>l||!this.exportProperties.width&&p>this.exportProperties.height?e.PdfPageOrientation.Landscape:e.PdfPageOrientation.Portrait,i.pageSettings.size=new e.SizeF(this.exportProperties.width?this.exportProperties.width:p,this.exportProperties.height?this.exportProperties.height:l)):(i.pageSettings.orientation=0===this.exportProperties.orientation||this.exportProperties.orientation?this.exportProperties.orientation:n.isNullOrUndefined(h)||n.isNullOrUndefined(h.pageOrientation)||"Landscape"===h.pageOrientation?e.PdfPageOrientation.Landscape:e.PdfPageOrientation.Portrait,n.isNullOrUndefined(h)||n.isNullOrUndefined(h.pageSize)||(i.pageSettings.size=r.getPageSize(h.pageSize))),n.isNullOrUndefined(this.exportProperties.pdfMargins))||(c=i.pageSettings.margins,c.top=n.isNullOrUndefined(this.exportProperties.pdfMargins.top)?c.top:this.exportProperties.pdfMargins.top,c.bottom=n.isNullOrUndefined(this.exportProperties.pdfMargins.bottom)?c.bottom:this.exportProperties.pdfMargins.bottom,c.left=n.isNullOrUndefined(this.exportProperties.pdfMargins.left)?c.left:this.exportProperties.pdfMargins.left,c.right=n.isNullOrUndefined(this.exportProperties.pdfMargins.right)?c.right:this.exportProperties.pdfMargins.right),y.setPageSettings(i.pageSettings),l=i.pageSettings.height,a=t.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream"),a=a.slice(a.indexOf(",")+1),g=new e.PdfBitmap(a),v=y.pages.add(),n.isNullOrUndefined(h)||n.isNullOrUndefined(h.header)||this.pdfExportHelper.drawHeader(h,i),n.isNullOrUndefined(h)||n.isNullOrUndefined(h.footer)||this.pdfExportHelper.drawFooter(h,i),v.graphics.drawImage(g,0,0,l<s||this.exportProperties.width||i.pageSettings.size?v.getClientSize().width:b,l<s?v.getClientSize().height:s),f||u?f&&(d=i.save()):(i.save(k+".pdf"),i.destroy()),nt={type:"PDF",promise:f?d:null},this.parent.trigger(ve,nt),new Promise(function(){})},t.prototype.destroy=function(){this.exportProperties&&(this.exportProperties=null);this.pdfExportHelper&&(this.pdfExportHelper=null)},t}();const gp=ejdashboard.fileutils;var lr=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),u=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},nw=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return lr(i,t),u([n.Property(!0)],i.prototype,"showFilterIcon",void 0),u([n.Property(!0)],i.prototype,"showSortIcon",void 0),u([n.Property(!0)],i.prototype,"showRemoveIcon",void 0),u([n.Property(!0)],i.prototype,"showValueTypeIcon",void 0),u([n.Property("Both")],i.prototype,"displayMode",void 0),u([n.Property(!0)],i.prototype,"allowDragAndDrop",void 0),u([n.Property(!1)],i.prototype,"showFieldsPanel",void 0),i}(n.ChildProperty),tw=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return lr(i,t),u([n.Property(!1)],i.prototype,"allowAdding",void 0),u([n.Property(!1)],i.prototype,"allowEditing",void 0),u([n.Property(!1)],i.prototype,"allowDeleting",void 0),u([n.Property(!1)],i.prototype,"allowCommandColumns",void 0),u([n.Property(!1)],i.prototype,"allowInlineEditing",void 0),u([n.Property("Normal")],i.prototype,"mode",void 0),u([n.Property(!0)],i.prototype,"allowEditOnDblClick",void 0),u([n.Property(!0)],i.prototype,"showConfirmDialog",void 0),u([n.Property(!1)],i.prototype,"showDeleteConfirmDialog",void 0),i}(n.ChildProperty),iw=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return lr(i,t),u([n.Property()],i.prototype,"measure",void 0),u([n.Property()],i.prototype,"label",void 0),u([n.Property("NotEquals")],i.prototype,"conditions",void 0),u([n.Property()],i.prototype,"value1",void 0),u([n.Property()],i.prototype,"value2",void 0),i}(n.ChildProperty),rw=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return lr(i,t),u([n.Property(!1)],i.prototype,"showHyperlink",void 0),u([n.Property(!1)],i.prototype,"showRowHeaderHyperlink",void 0),u([n.Property(!1)],i.prototype,"showColumnHeaderHyperlink",void 0),u([n.Property(!1)],i.prototype,"showValueCellHyperlink",void 0),u([n.Property(!1)],i.prototype,"showSummaryCellHyperlink",void 0),u([n.Collection([],iw)],i.prototype,"conditionalSettings",void 0),u([n.Property()],i.prototype,"headerText",void 0),u([n.Property("")],i.prototype,"cssClass",void 0),i}(n.ChildProperty),uw=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return lr(i,t),u([n.Property(5)],i.prototype,"columnPageSize",void 0),u([n.Property(5)],i.prototype,"rowPageSize",void 0),u([n.Property(1)],i.prototype,"currentColumnPage",void 0),u([n.Property(1)],i.prototype,"currentRowPage",void 0),i}(n.ChildProperty),fw=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return lr(i,t),u([n.Property("Bottom")],i.prototype,"position",void 0),u([n.Property(!1)],i.prototype,"isInversed",void 0),u([n.Property(!0)],i.prototype,"showRowPager",void 0),u([n.Property(!0)],i.prototype,"showColumnPager",void 0),u([n.Property(!0)],i.prototype,"showRowPageSize",void 0),u([n.Property(!0)],i.prototype,"showColumnPageSize",void 0),u([n.Property([10,50,100,200])],i.prototype,"rowPageSizes",void 0),u([n.Property([5,10,20,50,100])],i.prototype,"columnPageSizes",void 0),u([n.Property(!1)],i.prototype,"enableCompactView",void 0),u([n.Property()],i.prototype,"template",void 0),i}(n.ChildProperty),ew=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return lr(i,t),u([n.Property("Table")],i.prototype,"view",void 0),u([n.Property("Table")],i.prototype,"primary",void 0),i}(n.ChildProperty),ow=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return lr(i,t),u([n.Property(!1)],i.prototype,"allowSinglePage",void 0),i}(n.ChildProperty),da=function(t){function i(i,r){var u=t.call(this,i,r)||this;return u.verticalScrollScale=1,u.horizontalScrollScale=1,u.scrollerBrowserLimit=8e6,u.lastSortInfo={},u.lastFilterInfo={},u.lastAggregationInfo={},u.lastCalcFieldInfo={},u.isScrolling=!1,u.allowEngineExport=!1,u.isInitial=!0,u.shiftLockedPos=[],u.savedSelectedCellsPos=[],u.cellSelectionPos=[],u.isPopupClicked=!1,u.isMouseDown=!1,u.isMouseUp=!1,u.fieldsType={},u.remoteData=[],u.defaultItems={},u.isCellBoxMultiSelection=!1,u.isBlobData=!1,u.gridCellCollection={},u.rowRangeSelection={enable:!1,startIndex:0,endIndex:0},u.isStaticRefresh=!1,u.isStaticFieldList=!1,u.resizeInfo={},u.scrollPosObject={vertical:0,horizontal:0,verticalSection:0,horizontalSection:0,top:0,left:0,scrollDirection:{direction:"",position:0}},u.pivotColumns=[],u.totColWidth=0,u.posCount=0,u.isModified=!1,u.isInitialRendering=!1,u.needsID=!0,u.pivotRefresh=n.Component.prototype.refresh,u.request="undefined"!=typeof window?new XMLHttpRequest:null,u.isServerWaitingPopup=!1,u.actionObj={},u.defaultFieldListOrder="None",u.destroyEngine=!1,u.pivotView=u,n.setValue("mergePersistData",u.mergePersistPivotData,u),u}return lr(i,t),i.prototype.requiredModules=function(){var n=[];return this.showGroupingBar&&n.push({args:[this],member:"groupingBar"}),this.allowConditionalFormatting&&n.push({args:[this],member:"conditionalFormatting"}),this.allowNumberFormatting&&n.push({args:[this],member:"numberFormatting"}),this.allowCalculatedField&&n.push({args:[this],member:"calculatedField"}),this.showToolbar&&(this.toolbar.length>0||this.toolbarTemplate)&&n.push({args:[this],member:"toolbar"}),this.showFieldList&&n.push({args:[this],member:"fieldList"}),this.allowExcelExport&&n.push({args:[this],member:"excelExport"}),this.allowPdfExport&&n.push({args:[this],member:"pdfExport"}),this.enableVirtualization&&n.push({args:[this],member:"virtualscroll"}),this.allowGrouping&&n.push({args:[this],member:"grouping"}),(this.allowDrillThrough||this.editSettings&&this.editSettings.allowEditing)&&n.push({args:[this],member:"drillThrough"}),this.enablePaging&&n.push({args:[this],member:"pager"}),n},i.prototype.preRender=function(){this.dataSourceSettings&&"SSAS"===this.dataSourceSettings.providerType?(this.dataType="olap",this.olapEngineModule=new wa):(this.dataType="pivot",this.engineModule=new ul);this.isAdaptive=n.Browser.isDevice;n.Browser.isIE||"edge"===n.Browser.info.name?this.scrollerBrowserLimit=15e5:"chrome"===n.Browser.info.name&&(this.scrollerBrowserLimit=15e6);this.isTouchMode=!!n.closest(this.element,"e-bigger");this.initProperties();this.renderToolTip();this.keyboardModule=new fy(this);this.contextMenuModule=new ey(this);this.globalize=new n.Internationalization(this.locale);(this.showFieldList||this.showGroupingBar||this.allowNumberFormatting||this.allowCalculatedField||this.toolbar&&this.showToolbar||this.allowGrouping||this.gridSettings.contextMenuItems||this.allowDrillThrough)&&(this.commonModule=new ha(this));!this.chartSettings.enableExport||"Both"!==this.displayOption.view&&"Chart"!==this.displayOption.view||(this.chartExportModule=new ka(this));this.defaultLocale={applyToGrandTotal:"Apply to Grand Total",grandTotal:"Grand Total",total:"Total",value:"Value",noValue:"No value",row:"Row",column:"Column",collapse:"Collapse",expand:"Expand",rowAxisPrompt:"Drop row here",columnAxisPrompt:"Drop column here",valueAxisPrompt:"Drop value here",filterAxisPrompt:"Drop filter here",filter:"Filter",filtered:"Filtered",sort:"Sort",filters:"Filters",rows:"Rows",columns:"Columns",values:"Values",close:"Close",cancel:"Cancel","delete":"Delete",CalculatedField:"Calculated Field",createCalculatedField:"Create Calculated Field",fieldName:"Enter the field name",error:"Error",invalidFormula:"Invalid formula.",dropText:'Example: ("Sum(Order_Count)" + "Sum(In_Stock)") * 250',dropTextMobile:"Add fields and edit formula here.",dropAction:"Calculated field cannot be place in any other region except value axis.",alert:"Alert",warning:"Warning",ok:"OK",search:"Search",drag:"Drag",remove:"Remove",allFields:"All Fields",formula:"Formula",addToRow:"Add to Row",addToColumn:"Add to Column",addToValue:"Add to Value",addToFilter:"Add to Filter",emptyData:"No records to display",fieldExist:"A field already exists in this name. Please enter a different name.",confirmText:"A calculation field already exists in this name. Do you want to replace it?",noMatches:"No matches",format:"Summaries values by",edit:"Edit",clear:"Clear",sortAscending:"Sort ascending order",sortDescending:"Sort descending order",sortNone:"Sort data order",clearCalculatedField:"Clear edited field info",editCalculatedField:"Edit calculated field",formulaField:"Drag and drop fields to formula",dragField:"Drag field to formula",clearFilter:"Clear",by:"by",all:"All",multipleItems:"Multiple items",member:"Member",label:"Label",date:"Date",enterValue:"Enter value",chooseDate:"Enter date",Before:"Before",BeforeOrEqualTo:"Before Or Equal To",After:"After",AfterOrEqualTo:"After Or Equal To",labelTextContent:"Show the items for which the label",dateTextContent:"Show the items for which the date",valueTextContent:"Show the items for which",Equals:"Equals",DoesNotEquals:"Does Not Equal",BeginWith:"Begins With",DoesNotBeginWith:"Does Not Begin With",EndsWith:"Ends With",DoesNotEndsWith:"Does Not End With",Contains:"Contains",DoesNotContains:"Does Not Contain",GreaterThan:"Greater Than",GreaterThanOrEqualTo:"Greater Than Or Equal To",LessThan:"Less Than",LessThanOrEqualTo:"Less Than Or Equal To",Between:"Between",NotBetween:"Not Between",And:"and",Sum:"Sum",Count:"Count",DistinctCount:"Distinct Count",Product:"Product",Avg:"Avg",Median:"Median",Min:"Min",SampleVar:"Sample Var",PopulationVar:"Population Var",RunningTotals:"Running Totals",Max:"Max",Index:"Index",SampleStDev:"Sample StDev",PopulationStDev:"Population StDev",PercentageOfRowTotal:"% of Row Total",PercentageOfParentTotal:"% of Parent Total",PercentageOfParentColumnTotal:"% of Parent Column Total",PercentageOfParentRowTotal:"% of Parent Row Total",DifferenceFrom:"Difference From",PercentageOfDifferenceFrom:"% of Difference From",PercentageOfGrandTotal:"% of Grand Total",PercentageOfColumnTotal:"% of Column Total",MoreOption:"More...",NotEquals:"Not Equals",AllValues:"All Values",conditionalFormatting:"Conditional Formatting",apply:"Apply",condition:"Add Condition",formatLabel:"Format",valueFieldSettings:"Value field settings",baseField:"Base field",baseItem:"Base item",summarizeValuesBy:"Summarize values by",sourceName:"Field name :",sourceCaption:"Field caption",example:"e.g:",editorDataLimitMsg:" more items. Search to refine further.",details:"Details",manageRecords:"Manage Records",Years:"Years",Quarters:"Quarters",Months:"Months",Days:"Days",Hours:"Hours",Minutes:"Minutes",Seconds:"Seconds",save:"Save a report","new":"Create a new report",load:"Load",saveAs:"Save as current report",rename:"Rename a current report",deleteReport:"Delete a current report","export":"Export",subTotals:"Sub totals",grandTotals:"Grand totals",reportName:"Report Name :",pdf:"PDF",excel:"Excel",csv:"CSV",png:"PNG",jpeg:"JPEG",svg:"SVG",mdxQuery:"MDX Query",showSubTotals:"Show subtotals",doNotShowSubTotals:"Do not show subtotals",showSubTotalsRowsOnly:"Show subtotals rows only",showSubTotalsColumnsOnly:"Show subtotals columns only",showGrandTotals:"Show grand totals",doNotShowGrandTotals:"Do not show grand totals",showGrandTotalsRowsOnly:"Show grand totals rows only",showGrandTotalsColumnsOnly:"Show grand totals columns only",fieldList:"Show fieldlist",grid:"Show table",toolbarFormatting:"Conditional formatting",chart:"Chart",reportMsg:"Please enter valid report name!!!",reportList:"Report list",removeConfirm:"Are you sure you want to delete this report?",emptyReport:"No reports found!!",bar:"Bar",pie:"Pie",funnel:"Funnel",doughnut:"Doughnut",pyramid:"Pyramid",stackingcolumn:"Stacked Column",stackingarea:"Stacked Area",stackingbar:"Stacked Bar",stackingline:"Stacked Line",stepline:"Step Line",steparea:"Step Area",splinearea:"Spline Area",spline:"Spline",stackingcolumn100:"100% Stacked Column",stackingbar100:"100% Stacked Bar",stackingarea100:"100% Stacked Area",stackingline100:"100% Stacked Line",bubble:"Bubble",pareto:"Pareto",radar:"Radar",line:"Line",area:"Area",scatter:"Scatter",polar:"Polar",of:"of",emptyFormat:"No format found!!!",emptyInput:"Enter a value",newReportConfirm:"Do you want to save the changes to this report?",emptyReportName:"Enter a report name",qtr:"Qtr","null":"null",undefined:"undefined",groupOutOfRange:"Out of Range",fieldDropErrorAction:"The field you are moving cannot be placed in that area of the report",aggregate:"Aggregate",drillThrough:"Drill Through",ascending:"Ascending",descending:"Descending",number:"Number",currency:"Currency",percentage:"Percentage",formatType:"Format Type",customText:"Currency Symbol",symbolPosition:"Symbol Position",left:"Left",right:"Right",grouping:"Grouping","true":"True","false":"False",decimalPlaces:"Decimal Places",numberFormat:"Number Formatting",memberType:"Field Type",formatString:"Format",expressionField:"Expression",customFormat:"Enter custom format string",numberFormatString:"Example: C, P, 0000 %, ###0.##0#, etc.",selectedHierarchy:"Parent Hierarchy",olapDropText:"Example: [Measures].[Order Quantity] + ([Measures].[Order Quantity] * 0.10)",Percent:"Percent",Currency:"Currency",Custom:"Custom",Measure:"Measure",Dimension:"Dimension",Standard:"Standard",blank:"(Blank)",fieldTooltip:'Drag and drop fields to create an expression. And, if you want to edit the existing calculated fields! You can achieve it by simply selecting the field under "Calculated Members".',fieldTitle:"Field Name",QuarterYear:"Quarter Year",drillError:"Cannot show the raw items of calculated fields.",caption:"Field Caption",copy:"Copy",defaultReport:"Sample Report",customFormatString:"Custom Format",invalidFormat:"Invalid Format.",group:"Group",unGroup:"Ungroup",invalidSelection:"Cannot group that selection.",groupName:"Enter the caption to display in header",captionName:"Enter the caption for group field",selectedItems:"Selected items",groupFieldCaption:"Field caption",groupTitle:"Group name",startAt:"Starting at",endAt:"Ending at",groupBy:"Interval by",selectGroup:"Select groups",multipleAxes:"Multiple Axis",showLegend:"Show Legend",exit:"Exit",chartTypeSettings:"Chart Type Settings",ChartType:"Chart Type",yes:"Yes",no:"No",numberFormatMenu:"Number Formatting...",conditionalFormattingMenu:"Conditional Formatting...",removeCalculatedField:"Are you sure you want to delete this calculated field?",replaceConfirmBefore:"A report named ",replaceConfirmAfter:" already exists. Do you want to replace it?",invalidJSON:"Invalid JSON data",invalidCSV:"Invalid CSV data",stacked:"Stacked",single:"Single",combined:"Combined",multipleAxisMode:"Multiple Axis Mode",grandTotalPosition:"Grand totals position",top:"Top",bottom:"Bottom",None:"None",rowPage:"Row pager",rowPerPage:"Rows per page",columnPage:"Column pager",columnPerPage:"Columns per page",goToFirstPage:"Go to first page",goToPreviousPage:"Go to previous page",goToNextPage:"Go to next page",goToLastPage:"Go to last page",subTotalPosition:"Subtotals position",auto:"Auto",loading:"Loading...",add:"Add"};this.localeObj=new n.L10n(this.getModuleName(),this.defaultLocale,this.locale);this.renderContextMenu();this.isDragging=!1;this.pivotDeferLayoutUpdate=n.isNullOrUndefined(this.pivotDeferLayoutUpdate)?this.allowDeferLayoutUpdate:this.pivotDeferLayoutUpdate;this.addInternalEvents()},i.prototype.onBeforeTooltipOpen=function(n){n.element.classList.add("e-pivottooltipwrap")},i.prototype.renderToolTip=function(){this.showTooltip?(this.tooltip=this.tooltipTemplate?new o.Tooltip({target:"td.e-valuescontent",cssClass:"e-pivottooltiptemplate"+(this.cssClass?" "+this.cssClass:""),showTipPointer:!1,position:"BottomRight",mouseTrail:!0,enableRtl:this.enableRtl,locale:this.locale,enableHtmlSanitizer:this.enableHtmlSanitizer,beforeRender:this.setToolTip.bind(this),beforeOpen:this.onBeforeTooltipOpen}):new o.Tooltip({target:"td.e-valuescontent",cssClass:this.cssClass,showTipPointer:!1,position:"BottomRight",mouseTrail:!0,enableRtl:this.enableRtl,locale:this.locale,enableHtmlSanitizer:this.enableHtmlSanitizer,beforeRender:this.setToolTip.bind(this),beforeOpen:this.onBeforeTooltipOpen}),this.tooltip.isStringTemplate=!0,this.tooltip.appendTo(this.element)):this.tooltip&&this.tooltip.destroy()},i.prototype.renderContextMenu=function(){var i,f,n,e,o,t;if(this.gridSettings.contextMenuItems||this.allowGrouping&&"pivot"===this.dataType){var s=[],r=[],h=[],u=[],c=[],l=[],a=[];if(this.gridSettings.contextMenuItems)for(i=0,f=this.gridSettings.contextMenuItems;i<f.length;i++)n=f[i],"string"==typeof n&&-1!==this.getDefaultItems().indexOf(n)?-1!==n.toString().toLowerCase().indexOf("aggregate")&&"pivot"===this.dataType?(a=[{text:this.localeObj.getConstant("Sum")}],e=this.buildDefaultItems("Aggregate"),e.items=a,c.push(e)):-1!==n.toString().toLowerCase().indexOf("export")?u.push(this.buildDefaultItems(n)):s.push(this.buildDefaultItems(n)):"string"!=typeof n&&h.push(n);(this.allowGrouping&&"pivot"===this.dataType&&(this.getFieldByID(this.element.id+"_custom_group",this.gridSettings.contextMenuItems)||r.push(this.buildDefaultItems("Group")),this.getFieldByID(this.element.id+"_custom_ungroup",this.gridSettings.contextMenuItems)||r.push(this.buildDefaultItems("Ungroup"))),u.length>0)&&(o=this.buildDefaultItems("export"),o.items=u,l.push(o));t=[];Array.prototype.push.apply(t,c);Array.prototype.push.apply(t,s);Array.prototype.push.apply(t,r);Array.prototype.push.apply(t,l);Array.prototype.push.apply(t,h);this.setProperties({gridSettings:{contextMenuItems:t}},!0)}},i.prototype.getFieldByID=function(n,t){return new nt.DataManager({json:t}).executeLocal((new nt.Query).where("id","equal",n))[0]},i.prototype.getAllSummaryType=function(){return["Sum","Count","DistinctCount","Product","Min","Max","Avg","Median","Index","PopulationVar","SampleVar","PopulationStDev","SampleStDev","RunningTotals","PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"]},i.prototype.getDefaultItems=function(){return["Drillthrough","Expand","Collapse","Pdf Export","Excel Export","Csv Export","Sort Ascending","Sort Descending","Aggregate","CalculatedField"]},i.prototype.buildDefaultItems=function(n){var t;switch(n){case"Aggregate":t={text:this.localeObj.getConstant("aggregate"),target:"th.e-valuesheader,td.e-valuescontent,.e-stot.e-rowsheader",id:this.element.id+"_aggregate"};break;case"CalculatedField":t={text:this.localeObj.getConstant("CalculatedField"),target:"td.e-valuescontent",id:this.element.id+"_CalculatedField"};break;case"Drillthrough":t={text:this.localeObj.getConstant("drillThrough"),target:"td.e-valuescontent",id:this.element.id+"_drillthrough_menu",iconCss:"e-pivotview-grid "+s};break;case"export":t={text:this.localeObj.getConstant("export"),target:"td.e-valuescontent",id:this.element.id+"_exporting",iconCss:"e-pivotview-export "+s};break;case"Pdf Export":t={text:this.localeObj.getConstant("pdf"),id:this.element.id+"_pdf",iconCss:"e-pivotview-pdf-export "+s};break;case"Excel Export":t={text:this.localeObj.getConstant("excel"),id:this.element.id+"_excel",iconCss:"e-pivotview-excel-export "+s};break;case"Csv Export":t={text:this.localeObj.getConstant("csv"),id:this.element.id+"_csv",iconCss:"e-pivotview-csv-export "+s};break;case"Expand":t={text:this.localeObj.getConstant("expand"),target:"td.e-rowsheader,.e-columnsheader",id:this.element.id+"_expand",iconCss:"e-pivotview-expand "+s};break;case"Collapse":t={text:this.localeObj.getConstant("collapse"),target:"td.e-rowsheader,.e-columnsheader",id:this.element.id+"_collapse",iconCss:"e-pivotview-collapse "+s};break;case"Sort Ascending":t={text:this.localeObj.getConstant("ascending"),target:"th.e-valuesheader,.e-stot",id:this.element.id+"_sortasc",iconCss:"e-icon-ascending "+s};break;case"Sort Descending":t={text:this.localeObj.getConstant("descending"),target:"th.e-valuesheader,.e-stot",id:this.element.id+"_sortdesc",iconCss:"e-icon-descending "+s};break;case"Group":t={text:this.localeObj.getConstant("group"),target:"td.e-rowsheader,.e-columnsheader",id:this.element.id+"_custom_group",iconCss:"e-pivotview-group "+s};break;case"Ungroup":t={text:this.localeObj.getConstant("unGroup"),target:"td.e-rowsheader,.e-columnsheader",id:this.element.id+"_custom_ungroup",iconCss:"e-pivotview-ungroup "+s}}return this.defaultItems[n]={text:t.text,id:t.id,target:t.target,iconCss:t.iconCss},this.defaultItems[n]},i.prototype.initProperties=function(){if(this.isTabular="Tabular"===this.gridSettings.layout,this.pivotRefresh=n.Component.prototype.refresh,this.minHeight=n.isNullOrUndefined(this.minHeight)?300:this.minHeight<10?10:this.minHeight,this.isScrolling=!1,this.allowServerDataBinding=!1,this.isStaticRefresh=!1,this.setProperties({pivotValues:[]},!0),this.allowServerDataBinding=!0,this.scrollPosObject={vertical:0,horizontal:0,verticalSection:0,horizontalSection:0,top:0,left:0,scrollDirection:{direction:"",position:0}},this.queryCellInfo=this.gridSettings.queryCellInfo?this.gridSettings.queryCellInfo:void 0,this.headerCellInfo=this.gridSettings.headerCellInfo?this.gridSettings.headerCellInfo:void 0,this.resizing=this.gridSettings.resizing?this.gridSettings.resizing:void 0,this.resizeStop=this.gridSettings.resizeStop?this.gridSettings.resizeStop:void 0,this.pdfHeaderQueryCellInfo=this.gridSettings.pdfHeaderQueryCellInfo?this.gridSettings.pdfHeaderQueryCellInfo:void 0,this.pdfQueryCellInfo=this.gridSettings.pdfQueryCellInfo?this.gridSettings.pdfQueryCellInfo:void 0,this.excelHeaderQueryCellInfo=this.gridSettings.excelHeaderQueryCellInfo?this.gridSettings.excelHeaderQueryCellInfo:void 0,this.excelQueryCellInfo=this.gridSettings.excelQueryCellInfo?this.gridSettings.excelQueryCellInfo:void 0,this.columnDragStart=this.gridSettings.columnDragStart?this.gridSettings.columnDragStart:void 0,this.columnDrag=this.gridSettings.columnDrag?this.gridSettings.columnDrag:void 0,this.columnDrop=this.gridSettings.columnDrop?this.gridSettings.columnDrop:void 0,this.beforeColumnsRender=this.gridSettings.columnRender?this.gridSettings.columnRender:void 0,this.selected=this.gridSettings.cellSelected?this.gridSettings.cellSelected:void 0,this.selecting=this.gridSettings.cellSelecting?this.gridSettings.cellSelecting:void 0,this.cellDeselected=this.gridSettings.cellDeselected?this.gridSettings.cellDeselected:void 0,this.rowSelected=this.gridSettings.rowSelected?this.gridSettings.rowSelected:void 0,this.rowDeselected=this.gridSettings.rowDeselected?this.gridSettings.rowDeselected:void 0,this.chartTooltipRender=this.chartSettings.tooltipRender?this.chartSettings.tooltipRender:void 0,this.chartLegendClick=this.chartSettings.legendClick?this.chartSettings.legendClick:void 0,this.chartLoaded=this.chartSettings.loaded?this.chartSettings.loaded:void 0,this.chartLoad=this.chartSettings.load?this.chartSettings.load:void 0,this.chartResized=this.chartSettings.resized?this.chartSettings.resized:void 0,this.chartAxisLabelRender=this.chartSettings.axisLabelRender?this.chartSettings.axisLabelRender:void 0,this.multiLevelLabelClick=this.chartSettings.multiLevelLabelClick?this.chartSettings.multiLevelLabelClick:void 0,this.chartPointClick=this.chartSettings.pointClick?this.chartSettings.pointClick:void 0,this.contextMenuClick=this.gridSettings.contextMenuClick?this.gridSettings.contextMenuClick:void 0,this.contextMenuOpen=this.gridSettings.contextMenuOpen?this.gridSettings.contextMenuOpen:void 0,this.beforePdfExport=this.gridSettings.beforePdfExport?this.gridSettings.beforePdfExport:void 0,this.beforeExcelExport=this.gridSettings.beforeExcelExport?this.gridSettings.beforeExcelExport:void 0,this.beforePrint=this.chartSettings.beforePrint?this.chartSettings.beforePrint:void 0,this.animationComplete=this.chartSettings.animationComplete?this.chartSettings.animationComplete:void 0,this.legendRender=this.chartSettings.legendRender?this.chartSettings.legendRender:void 0,this.textRender=this.chartSettings.textRender?this.chartSettings.textRender:void 0,this.pointRender=this.chartSettings.pointRender?this.chartSettings.pointRender:void 0,this.seriesRender=this.chartSettings.seriesRender?this.chartSettings.seriesRender:void 0,this.chartMouseMove=this.chartSettings.chartMouseMove?this.chartSettings.chartMouseMove:void 0,this.chartMouseClick=this.chartSettings.chartMouseClick?this.chartSettings.chartMouseClick:void 0,this.pointMove=this.chartSettings.pointMove?this.chartSettings.pointMove:void 0,this.chartMouseLeave=this.chartSettings.chartMouseLeave?this.chartSettings.chartMouseLeave:void 0,this.chartMouseDown=this.chartSettings.chartMouseDown?this.chartSettings.chartMouseDown:void 0,this.chartMouseUp=this.chartSettings.chartMouseUp?this.chartSettings.chartMouseUp:void 0,this.dragComplete=this.chartSettings.dragComplete?this.chartSettings.dragComplete:void 0,this.zoomComplete=this.chartSettings.zoomComplete?this.chartSettings.zoomComplete:void 0,this.scrollStart=this.chartSettings.scrollStart?this.chartSettings.scrollStart:void 0,this.scrollEnd=this.chartSettings.scrollEnd?this.chartSettings.scrollEnd:void 0,this.scrollChanged=this.chartSettings.scrollChanged?this.chartSettings.scrollChanged:void 0,this.multiLevelLabelRender=this.chartSettings.multiLevelLabelRender?this.chartSettings.multiLevelLabelRender:void 0,null===this.gridSettings.rowHeight&&(this.isTouchMode?this.setProperties({gridSettings:{rowHeight:36}},!0):this.setProperties({gridSettings:{rowHeight:this.isAdaptive?36:30}},!0)),this.chartSettings&&this.chartSettings.showMemberSeries&&!this.chartSettings.showPointColorByMembers&&this.setProperties({chartSettings:{showPointColorByMembers:!0}},!0),this.element.style.height="100%",this.enableVirtualization&&this.updatePageSettings(!0),this.isCellBoxMultiSelection=this.gridSettings.allowSelection&&"Box"===this.gridSettings.selectionSettings.cellSelectionMode&&"Cell"===this.gridSettings.selectionSettings.mode&&"Multiple"===this.gridSettings.selectionSettings.type,this.allowGrouping&&!this.isCellBoxMultiSelection&&(this.isCellBoxMultiSelection=!0,this.setProperties({gridSettings:{allowSelection:!0,selectionSettings:{cellSelectionMode:"Box",mode:"Cell",type:"Multiple"}}},!0)),"Table"!==this.displayOption.view&&(this.pivotChartModule=new fo(this)),this.currentView=this.currentView?this.currentView:"Both"===this.displayOption.view?this.displayOption.primary:this.displayOption.view,"pivot"===this.dataType&&"Server"!==this.dataSourceSettings.mode&&!n.isNullOrUndefined(this.dataSourceSettings.valueSortSettings.headerText)&&""!==this.dataSourceSettings.valueSortSettings.headerText){var t=void 0;"column"===this.dataSourceSettings.valueAxis?t={columnHeaderText:this.dataSourceSettings.valueSortSettings.headerText,columnSortOrder:this.dataSourceSettings.valueSortSettings.sortOrder}:"row"===this.dataSourceSettings.valueAxis&&(t={rowHeaderText:this.dataSourceSettings.valueSortSettings.headerText,rowSortOrder:this.dataSourceSettings.valueSortSettings.sortOrder});this.setProperties({dataSourceSettings:{valueSortSettings:t}},!0)}},i.prototype.updatePageSettings=function(n){var i,r,t;this.enableVirtualization&&(i=1,r=1,this.dataSourceSettings.values.length>1&&"pivot"===this.dataType&&("row"===this.dataSourceSettings.valueAxis?r=this.dataSourceSettings.values.length:i=this.dataSourceSettings.values.length),t=this.getHeightAsNumber(),isNaN(t)&&(t=this.element.offsetHeight),this.pageSettings={currentColumnPage:n?1:this.pageSettings.currentColumnPage,currentRowPage:n?1:this.pageSettings.currentRowPage,columnPageSize:Math.ceil((Math.floor(this.getWidthAsNumber()/this.gridSettings.columnWidth)-1)/i),rowPageSize:Math.ceil(Math.floor(t/this.gridSettings.rowHeight)/r)})},i.prototype.render=function(){this.loadData()},i.prototype.loadData=function(){if(this.dataSourceSettings.formatSettings.length>0)for(var i=this.dataSourceSettings.formatSettings,t=0;t<i.length;t++)n.isNullOrUndefined(i[t].maximumFractionDigits)&&n.isNullOrUndefined(i[t].minimumFractionDigits)||null!==i[t].format.match(/^(P|N|C|P[0-9]|C[0-9]|N[0-9])$/g)||(i[t].maximumFractionDigits=void 0,i[t].minimumIntegerDigits=void 0);"pivot"===this.dataType&&this.dataSourceSettings.url&&""!==this.dataSourceSettings.url?"Server"===this.dataSourceSettings.mode?(this.guid=r.generateUUID(),this.initialLoad(),"Chart"!==this.displayOption.view?this.renderEmptyGrid():this.refreshData(),this.showWaitingPopup()):new n.Fetch(this.dataSourceSettings.url,"GET").send().then(function(n){return"string"==typeof n?n:n.text()}).then(this.onReadyStateChange.bind(this)):this.initialLoad()},i.prototype.blobToString=function(n){return r=this,u=void 0,t=function(){return function(n,t){function o(e){return function(o){return function(e){if(f)throw new TypeError("Generator is already executing.");for(;r;)try{if(f=1,u&&(i=2&e[0]?u.return:e[0]?u.throw||((i=u.return)&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==e[0]&&2!==e[0])){r=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(6===e[0]&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(n){e=[6,n];u=0}finally{f=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var f,u,i,e,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e}(this,function(t){switch(t.label){case 0:return[4,n];case 1:return[2,t.sent().text()]}})},new((i=void 0)||(i=Promise))(function(n,f){function o(n){try{e(t.next(n))}catch(n){f(n)}}function s(n){try{e(t.throw(n))}catch(n){f(n)}}function e(t){t.done?n(t.value):new i(function(n){n(t.value)}).then(o,s)}e((t=t.apply(r,u||[])).next())});var r,u,i,t},i.prototype.onSuccess=function(t){var ht=this,k,tt,it,i,e,a,o,c,l,y,g,nt,p,w,b;if(this.request.readyState===XMLHttpRequest.DONE)if(this.isServerWaitingPopup=!0,"onExcelExport"===this.currentAction||"onCsvExport"===this.currentAction||"onPivotExcelExport"===this.currentAction||"onPivotCsvExport"===this.currentAction)200===this.request.status?(k=this.request.response,t=n.isNullOrUndefined(t)?{}:t,tt=n.isNullOrUndefined(t.fileName)?"onExcelExport"===this.currentAction||"onPivotExcelExport"===this.currentAction?"default.xlsx":"default.csv":t.fileName,this.isBlobData||gp.Save.save(tt,k),it={type:"onExcelExport"===this.currentAction||"onPivotExcelExport"===this.currentAction?"xlsx":"csv",promise:this.isBlobData?k:null},this.isBlobData=!1,this.trigger(ve,it),this.triggerAfterServiceInvoke()):this.blobToString(this.request.response).then(function(n){ht.triggerAfterServiceInvoke(n)});else{try{if(this.triggerAfterServiceInvoke(),i=JSON.parse(this.request.responseText),"fetchFieldMembers"===this.currentAction){for(var rt=JSON.parse(i.members),ut=[],ft={},et=r.isDateField(i.memberName,this.engineModule),ct="number"===this.engineModule.fieldList[i.memberName].type,f=Object.keys(rt),u=0,lt=f.length;u<lt;u++)e=rt[f[u]],a=et?this.engineModule.getFormattedValue(e.Name,i.memberName):{formattedText:e.Caption},ft[f[u]]={index:e.Index,ordinal:e.Ordinal,isDrilled:e.IsDrilled,caption:a.formattedText},ut.push({formattedText:a.formattedText,actualText:et?a.actualText:ct?isNaN(Number(e.Name))?e.Name:Number(e.Name):e.Name});this.engineModule.fieldList[i.memberName].members=ft;this.engineModule.fieldList[i.memberName].dateMember=ut;this.showGroupingBar?this.pivotButtonModule.updateFilterEvents():this.pivotFieldListModule.pivotButtonModule.updateFilterEvents()}else if("fetchRawData"===this.currentAction){for(var at=this.engineModule.fieldList[this.drillThroughValue.actualText.toString()]?this.engineModule.fieldList[this.drillThroughValue.actualText.toString()].caption:this.drillThroughValue.actualText.toString(),vt=this.engineModule.fieldList[this.drillThroughValue.actualText]?this.engineModule.fieldList[this.drillThroughValue.actualText].aggregateType:"",yt=JSON.parse(i.rawData),d=JSON.parse(i.indexObject),ot={},v=0;v<d.length;v++)ot[d[v].Key]=d[v].Value;this.drillThroughValue.indexObject=ot;this.drillThroughModule.triggerDialog(at,vt,yt,this.drillThroughValue,this.drillThroughElement);this.hideWaitingPopup()}else{if(o=JSON.parse(i.fieldList),this.engineModule.fieldList)for(f=Object.keys(this.engineModule.fieldList),u=0;u<f.length;u++)this.engineModule.fieldList[f[u]]&&o[f[u]]&&(o[f[u]].dateMember=this.engineModule.fieldList[f[u]].dateMember,o[f[u]].formattedMembers=this.engineModule.fieldList[f[u]].formattedMembers,o[f[u]].members=this.engineModule.fieldList[f[u]].members);this.engineModule.fieldList=o;this.engineModule.fields=JSON.parse(i.fields);this.engineModule.rowCount=JSON.parse(i.pivotCount).RowCount;this.engineModule.columnCount=JSON.parse(i.pivotCount).ColumnCount;this.engineModule.rowStartPos=JSON.parse(i.pivotCount).RowStartPosition;this.engineModule.colStartPos=JSON.parse(i.pivotCount).ColumnStartPosition;this.engineModule.rowFirstLvl=JSON.parse(i.pivotCount).RowFirstLevel;this.engineModule.colFirstLvl=JSON.parse(i.pivotCount).ColumnFirstLevel;this.engineModule.columnPageCount=JSON.parse(i.pivotCount).ColumnPageCount;this.engineModule.rowPageCount=JSON.parse(i.pivotCount).RowPageCount;this.engineModule.rowMaxLevel=JSON.parse(i.pivotCount).RowMaxLevel;for(var st=void 0,s=JSON.parse(i.pivotValue),h=0;h<s.length;h++)if(s[h]&&s[h][0]&&"row"===s[h][0].axis){st=h;break}for(this.engineModule.headerContent=r.frameContent(s,"header",st,this),this.engineModule.pageSettings=this.pageSettings,c=JSON.parse(i.dataSourceSettings),this.dataSourceSettings.groupSettings.length>0&&(this.setProperties({dataSourceSettings:{rows:c.rows}},!0),this.setProperties({dataSourceSettings:{columns:c.columns}},!0),this.setProperties({dataSourceSettings:{formatSettings:c.formatSettings}},!0)),l=c.valueSortSettings,this.engineModule.valueSortSettings={headerText:l.headerText,headerDelimiter:l.headerDelimiter,sortOrder:l.sortOrder,columnIndex:l.columnIndex},this.engineModule.pivotValues=s,this.engineModule.isEmptyData=i.isEmptyData,this.engineModule.isEngineUpdated=i.isEngineUpdated,y=0,g=this.dataSourceSettings.values;y<g.length;y++)nt=g[y],this.engineModule.valueAxisFields[nt.name]=nt;this.engineModule.globalize=n.isNullOrUndefined(this.globalize)?new n.Internationalization:this.globalize;this.engineModule.formatFields=this.engineModule.setFormattedFields(this.dataSourceSettings.formatSettings)}}catch(t){this.engineModule.pivotValues=[]}"onScroll"===this.currentAction&&("vertical"===this.scrollDirection?(p="row"===this.dataSourceSettings.valueAxis?this.dataSourceSettings.values.length:1,w=this.pageSettings.rowPageSize*p*this.gridSettings.rowHeight*Math.ceil(this.engineModule.rowStartPos/(this.pageSettings.rowPageSize*p))-this.engineModule.rowFirstLvl*p*this.gridSettings.rowHeight,this.scrollPosObject.verticalSection=w):"horizondal"===this.scrollDirection&&(b="column"===this.dataSourceSettings.valueAxis?this.dataSourceSettings.values.length:1,w=this.pageSettings.columnPageSize*b*this.gridSettings.columnWidth*Math.ceil(this.engineModule.colStartPos/(this.pageSettings.columnPageSize*b))-this.engineModule.colFirstLvl*b*this.gridSettings.columnWidth,this.scrollPosObject.horizontalSection=w));"fetchFieldMembers"!==this.currentAction&&"fetchRawData"!==this.currentAction&&(this.initEngine(),this.calculatedFieldModule&&this.calculatedFieldModule.isRequireUpdate&&(this.calculatedFieldModule.endDialog(),this.calculatedFieldModule.isRequireUpdate=!1),this.pivotFieldListModule&&this.pivotFieldListModule.calculatedFieldModule&&this.pivotFieldListModule.calculatedFieldModule.isRequireUpdate&&(this.pivotFieldListModule.calculatedFieldModule.endDialog(),this.pivotFieldListModule.calculatedFieldModule.isRequireUpdate=!1))}},i.prototype.triggerAfterServiceInvoke=function(n){var t={action:this.currentAction,response:n||("string"==typeof this.request.response?this.request.responseText:this.request.response)};this.trigger(be,t)},i.prototype.getEngine=function(n,t,i,u,f,e,o,s,h,c,l){var k=this,w,a,y,v,p,b;for(this.engineModule.isEmptyData=!1,this.element.querySelector(".e-spin-hide")&&"onExcelExport"!==n&&"onCsvExport"!==n&&"onPivotExcelExport"!==n&&"onPivotCsvExport"!==n&&this.showWaitingPopup(),this.currentAction=n,this.isServerWaitingPopup=!1,w={pageSettings:JSON.parse(this.getPageSettings()).pageSettings,enableValueSorting:this.enableValueSorting,enablePaging:this.enablePaging,enableVirtualization:this.enableVirtualization,allowDataCompression:this.allowDataCompression,enableDrillThrough:this.allowDrillThrough||this.editSettings.allowEditing,locale:JSON.stringify(r.getLocalizedObject(this)),savedFieldList:"onDrop"===n&&null!==this.engineModule.fieldList?r.getClonedFieldList(this.engineModule.fieldList,!0):void 0,enableOptimizedRendering:this.enableVirtualization&&this.virtualScrollSettings&&this.virtualScrollSettings.allowSinglePage,requestType:"string",headers:{"Content-type":"application/json"},isTabular:this.isTabular,showFieldList:this.showFieldList||this.isStaticFieldList,showPivotChart:"Both"===this.displayOption.view||"Chart"===this.displayOption.view,chartType:this.chartSettings&&this.chartSettings.chartSeries&&this.chartSettings.chartSeries.type,showGroupingBar:this.showGroupingBar,showTooltip:this.showTooltip,chartSettings:l?JSON.parse(this.getPersistData()).chartSettings:null,gridSettings:l?JSON.parse(this.getPersistData()).gridSettings:null,enableAutoFit:this.grid&&this.grid.isAutoFitColumns},this.request.readyState!==XMLHttpRequest.UNSENT&&this.request.readyState!==XMLHttpRequest.OPENED||(this.request.withCredentials=!1),a={request:this.request,dataSourceSettings:JSON.parse(this.getPersistData()).dataSourceSettings,action:n,customProperties:{},internalProperties:w,drillItem:t,sortItem:i,aggregatedItem:u,calculatedItem:f,filterItem:e,memberName:o,fetchRawDataArgs:s,editArgs:h,hash:this.guid,excelExportProperties:c,exportAllPages:this.exportAllPages,isGroupingUpdated:"onRefresh"===this.currentAction&&this.dataSourceSettings.groupSettings.length>0||!!this.groupingModule&&this.groupingModule.isUpdate},this.trigger(we,a,function(n){k.request=n.request;a.internalProperties=n.internalProperties;a.customProperties=n.customProperties;a.dataSourceSettings=n.dataSourceSettings;a.calculatedItem=n.calculatedItem;a.drillItem=n.drillItem;a.editArgs=n.editArgs;a.fetchRawDataArgs=n.fetchRawDataArgs;a.filterItem=n.filterItem;a.hash=n.hash;a.memberName=n.memberName;a.sortItem=n.sortItem;a.excelExportProperties=n.excelExportProperties;a.exportAllPages=n.exportAllPages}),this.request.open("POST",this.dataSourceSettings.url,!0),this.request.onreadystatechange=this.onSuccess.bind(this,a.excelExportProperties),this.request.responseType="onExcelExport"===a.action||"onCsvExport"===a.action||"onPivotExcelExport"===a.action||"onPivotCsvExport"===a.action?"blob":"",y=Object.keys(a.internalProperties.headers),v=0;v<y.length;v++)p=y[v],b=String(a.internalProperties.headers[p]),this.request.setRequestHeader(p,b);"string"===a.internalProperties.requestType?this.request.send(JSON.stringify(a)):"base64"===a.internalProperties.requestType&&this.request.send(btoa(JSON.stringify(a)))},i.prototype.getChartSettings=function(){var t=this.chartSettings.load,i=this.chartSettings.loaded,r=this.chartSettings.textRender,u=this.chartSettings.pointRender,f=this.chartSettings.seriesRender,e=this.chartSettings.legendRender,o=this.chartSettings.pointClick,s=this.chartSettings.tooltipRender,h=this.chartSettings.legendClick,c=this.chartSettings.multiLevelLabelRender,l=this.chartSettings.beforePrint,a=this.chartSettings.animationComplete,v=this.chartSettings.chartMouseMove,y=this.chartSettings.chartMouseClick,p=this.chartSettings.pointMove,w=this.chartSettings.chartMouseLeave,b=this.chartSettings.chartMouseDown,k=this.chartSettings.chartMouseUp,d=this.chartSettings.dragComplete,g=this.chartSettings.zoomComplete,nt=this.chartSettings.scrollStart,tt=this.chartSettings.scrollEnd,it=this.chartSettings.scrollChanged,n;return this.chartSettings.load=void 0,this.chartSettings.loaded=void 0,this.chartSettings.textRender=void 0,this.chartSettings.pointRender=void 0,this.chartSettings.seriesRender=void 0,this.chartSettings.legendRender=void 0,this.chartSettings.pointClick=void 0,this.chartSettings.tooltipRender=void 0,this.chartSettings.legendClick=void 0,this.chartSettings.multiLevelLabelRender=void 0,this.chartSettings.beforePrint=void 0,this.chartSettings.animationComplete=void 0,this.chartSettings.chartMouseMove=void 0,this.chartSettings.chartMouseClick=void 0,this.chartSettings.pointMove=void 0,this.chartSettings.chartMouseLeave=void 0,this.chartSettings.chartMouseDown=void 0,this.chartSettings.chartMouseUp=void 0,this.chartSettings.dragComplete=void 0,this.chartSettings.zoomComplete=void 0,this.chartSettings.scrollStart=void 0,this.chartSettings.scrollEnd=void 0,this.chartSettings.scrollChanged=void 0,n=this.addOnPersist(["chartSettings"]),this.chartSettings.load=t,this.chartSettings.loaded=i,this.chartSettings.textRender=r,this.chartSettings.pointRender=u,this.chartSettings.seriesRender=f,this.chartSettings.legendRender=e,this.chartSettings.pointClick=o,this.chartSettings.tooltipRender=s,this.chartSettings.legendClick=h,this.chartSettings.multiLevelLabelRender=c,this.chartSettings.beforePrint=l,this.chartSettings.animationComplete=a,this.chartSettings.chartMouseMove=v,this.chartSettings.chartMouseClick=y,this.chartSettings.pointMove=p,this.chartSettings.chartMouseLeave=w,this.chartSettings.chartMouseDown=b,this.chartSettings.chartMouseUp=k,this.chartSettings.dragComplete=d,this.chartSettings.zoomComplete=g,this.chartSettings.scrollStart=nt,this.chartSettings.scrollEnd=tt,this.chartSettings.scrollChanged=it,n},i.prototype.getPageSettings=function(){return this.addOnPersist(["pageSettings"])},i.prototype.onReadyStateChange=function(t){var i=[],u,r;if("CSV"===this.dataSourceSettings.type)for(u=t.split(/\r?\n|\r/),r=0;r<u.length;r++)n.isNullOrUndefined(u[r])||""===u[r]||i.push(u[r].split(","));else try{i=JSON.parse(t)}catch(t){i=[]}i&&i.length>0&&this.setProperties({dataSourceSettings:{dataSource:i}},!0);this.initialLoad()},i.prototype.initialLoad=function(){var n=this,t;try{this.cellTemplateFn=this.templateParser(this.cellTemplate);this.tooltipTemplateFn=this.templateParser(this.tooltipTemplate);this.spinnerTemplate?o.createSpinner({target:this.element,template:this.spinnerTemplate,cssClass:this.cssClass?this.cssClass:void 0},this.createElement):o.createSpinner({target:this.element,cssClass:this.cssClass?this.cssClass:void 0},this.createElement);t={dataSourceSettings:this.dataSourceSettings,pivotview:this,fieldsType:{},defaultFieldListOrder:this.defaultFieldListOrder};this.trigger(fl,t,function(i){n.dataSourceSettings=i.dataSourceSettings;n.fieldsType=i.fieldsType;n.defaultFieldListOrder=t.defaultFieldListOrder;n.updateClass();n.notify(ke,{});n.notify(wi,{});n.isAdaptive&&n.contextMenuModule.render();n.notify("init-toolbar",{});n.notify(uh,{})})}catch(n){this.actionFailureMethod(n)}},i.prototype.addInternalEvents=function(){this.on(wi,this.generateData,this);this.on(ti,this.renderPivotGrid,this);this.on(cr,this.onContentReady,this)},i.prototype.removeInternalEvents=function(){this.off(wi,this.generateData);this.off(ti,this.renderPivotGrid);this.off(cr,this.onContentReady)},i.prototype.getPersistData=function(n){var r=this.gridSettings.columnRender,u=this.gridSettings.excelQueryCellInfo,f=this.gridSettings.excelHeaderQueryCellInfo,e=this.gridSettings.pdfQueryCellInfo,o=this.gridSettings.pdfHeaderQueryCellInfo,s=this.chartSettings.load,h=this.chartSettings.loaded,c=this.chartSettings.textRender,l=this.chartSettings.pointRender,a=this.chartSettings.seriesRender,v=this.chartSettings.legendRender,y=this.chartSettings.pointClick,p=this.chartSettings.tooltipRender,w=this.chartSettings.legendClick,b=this.chartSettings.multiLevelLabelRender,k=this.chartSettings.beforePrint,d=this.chartSettings.animationComplete,g=this.chartSettings.chartMouseMove,tt=this.chartSettings.chartMouseClick,it=this.chartSettings.pointMove,rt=this.chartSettings.chartMouseLeave,ut=this.chartSettings.chartMouseDown,ft=this.chartSettings.chartMouseUp,et=this.chartSettings.dragComplete,ot=this.chartSettings.zoomComplete,st=this.chartSettings.scrollStart,ht=this.chartSettings.scrollEnd,ct=this.chartSettings.scrollChanged,t,i;return this.gridSettings.columnRender=void 0,this.gridSettings.excelQueryCellInfo=void 0,this.gridSettings.excelHeaderQueryCellInfo=void 0,this.gridSettings.pdfQueryCellInfo=void 0,this.gridSettings.pdfHeaderQueryCellInfo=void 0,this.chartSettings.tooltipRender=void 0,this.chartSettings.legendClick=void 0,this.chartSettings.multiLevelLabelRender=void 0,this.chartSettings.load=void 0,this.chartSettings.loaded=void 0,this.chartSettings.textRender=void 0,this.chartSettings.pointRender=void 0,this.chartSettings.seriesRender=void 0,this.chartSettings.legendRender=void 0,this.chartSettings.pointClick=void 0,this.chartSettings.beforePrint=void 0,this.chartSettings.animationComplete=void 0,this.chartSettings.chartMouseMove=void 0,this.chartSettings.chartMouseClick=void 0,this.chartSettings.pointMove=void 0,this.chartSettings.chartMouseLeave=void 0,this.chartSettings.chartMouseDown=void 0,this.chartSettings.chartMouseUp=void 0,this.chartSettings.dragComplete=void 0,this.chartSettings.zoomComplete=void 0,this.chartSettings.scrollStart=void 0,this.chartSettings.scrollEnd=void 0,this.chartSettings.scrollChanged=void 0,t=[],n&&(t=!this.dataSourceSettings.dataSource||this.dataSourceSettings.dataSource instanceof nt.DataManager?this.dataSourceSettings.dataSource:this.dataSourceSettings.dataSource.slice(),this.setProperties({dataSourceSettings:{dataSource:[]}},!0)),i=this.addOnPersist(["dataSourceSettings","pivotValues","gridSettings","chartSettings","displayOption","pageSettings"]),this.gridSettings.columnRender=r,this.gridSettings.excelQueryCellInfo=u,this.gridSettings.excelHeaderQueryCellInfo=f,this.gridSettings.pdfQueryCellInfo=e,this.gridSettings.pdfHeaderQueryCellInfo=o,this.chartSettings.load=s,this.chartSettings.loaded=h,this.chartSettings.textRender=c,this.chartSettings.pointRender=l,this.chartSettings.seriesRender=a,this.chartSettings.legendRender=v,this.chartSettings.pointClick=y,this.chartSettings.tooltipRender=p,this.chartSettings.legendClick=w,this.chartSettings.multiLevelLabelRender=b,this.chartSettings.beforePrint=k,this.chartSettings.animationComplete=d,this.chartSettings.chartMouseMove=g,this.chartSettings.chartMouseClick=tt,this.chartSettings.pointMove=it,this.chartSettings.chartMouseLeave=rt,this.chartSettings.chartMouseDown=ut,this.chartSettings.chartMouseUp=ft,this.chartSettings.dragComplete=et,this.chartSettings.zoomComplete=ot,this.chartSettings.scrollStart=st,this.chartSettings.scrollEnd=ht,this.chartSettings.scrollChanged=ct,n&&this.setProperties({dataSourceSettings:{dataSource:t}},!0),i},i.prototype.loadPersistData=function(n){var t=JSON.parse(n);this.allowServerDataBinding=!1;this.setProperties({gridSettings:t.gridSettings,pivotValues:t.pivotValues,chartSettings:t.chartSettings,displayOption:t.displayOption},!0);this.currentView="Chart"===t.displayOption.primary?"Chart":"Table";this.allowServerDataBinding=!0;this.dataSourceSettings&&this.dataSourceSettings.dataSource&&this.dataSourceSettings.dataSource instanceof nt.DataManager&&t.dataSourceSettings&&t.dataSourceSettings.dataSource&&t.dataSourceSettings.dataSource.dataSource&&this.dataSourceSettings.dataSource.dataSource&&t.dataSourceSettings.dataSource.dataSource.url===this.dataSourceSettings.dataSource.dataSource.url&&(t.dataSourceSettings.dataSource=this.dataSourceSettings.dataSource);this.dataSourceSettings=t.dataSourceSettings},i.prototype.mergePersistPivotData=function(){var i=window.localStorage.getItem(this.getModuleName()+this.element.id),t;n.isNullOrUndefined(i)||""===i||(t=JSON.parse(i),this.dataSourceSettings&&this.dataSourceSettings.dataSource&&this.dataSourceSettings.dataSource instanceof nt.DataManager&&t.dataSourceSettings&&t.dataSourceSettings.dataSource&&t.dataSourceSettings.dataSource.dataSource&&this.dataSourceSettings.dataSource.dataSource&&t.dataSourceSettings.dataSource.dataSource.url===this.dataSourceSettings.dataSource.dataSource.url&&(t.dataSourceSettings.dataSource=this.dataSourceSettings.dataSource),this.setProperties(t,!0))},i.prototype.showConditionalFormattingDialog=function(){this.conditionalFormattingModule&&this.conditionalFormattingModule.showConditionalFormattingDialog()},i.prototype.createCalculatedFieldDialog=function(){this.calculatedFieldModule&&this.calculatedFieldModule.createCalculatedFieldDialog()},i.prototype.getModuleName=function(){return"pivotview"},i.prototype.copy=function(n){this.grid.copy(n)},i.prototype.onPropertyChanged=function(i,u){for(var s,h,c,f,a,e=!1,o=0,l=Object.keys(i);o<l.length;o++){s=l[o];switch(s){case"dataSourceSettings":case"hyperlinkSettings":case"allowDrillThrough":case"editSettings":case"allowDataCompression":if(i.dataSourceSettings&&(!n.isNullOrUndefined(i.dataSourceSettings.dataSource)&&!n.isNullOrUndefined(this.clonedDataSet)&&this.clonedDataSet!==i.dataSourceSettings.dataSource&&!n.isNullOrUndefined(i.dataSourceSettings.groupSettings)&&i.dataSourceSettings.groupSettings.length>0||1===Object.keys(i.dataSourceSettings).length&&"dataSource"===Object.keys(i.dataSourceSettings)[0]&&this.dataSourceSettings.groupSettings.length>0)&&(this.clonedDataSet=i.dataSourceSettings.dataSource,this.engineModule.groupingFields={}),i.dataSourceSettings&&1===Object.keys(i.dataSourceSettings).length&&i.dataSourceSettings.groupSettings&&"pivot"===this.dataType&&this.updateGroupingReport(i.dataSourceSettings.groupSettings,"Date"),(n.isNullOrUndefined(i.dataSourceSettings)?[]:Object.keys(i.dataSourceSettings)).indexOf("dataSource")>-1&&"CSV"!==i.dataSourceSettings.type)!n.isNullOrUndefined(this.savedDataSourceSettings)&&this.dataSourceSettings.dataSource.length>0&&(r.updateDataSourceSettings(this,this.savedDataSourceSettings),this.savedDataSourceSettings=void 0),i.dataSourceSettings.dataSource&&0===i.dataSourceSettings.dataSource.length&&(this.savedDataSourceSettings=r.getClonedDataSourceSettings(this.dataSourceSettings),this.setProperties({dataSourceSettings:{rows:[]}},!0),this.setProperties({dataSourceSettings:{columns:[]}},!0),this.setProperties({dataSourceSettings:{values:[]}},!0),this.setProperties({dataSourceSettings:{filters:[]}},!0)),this.isStaticRefresh||(this.pivotValues=[],"pivot"===this.dataType?(this.engineModule.fieldList=null,this.engineModule.isEmptyData=!0,this.engineModule.data=[],this.engineModule.groupingFieldsInfo={}):"olap"===this.dataType&&(this.olapEngineModule.fieldList={},this.olapEngineModule.fieldListData=void 0,this.olapEngineModule.isEmptyData=!0)),this.showWaitingPopup(),this.notify(wi,{});else if(r.isButtonIconRefesh(s,u,i)){if(this.showGroupingBar&&this.groupingBarModule&&this.axisFieldModule.render(),this.showFieldList&&this.pivotFieldListModule){var v=r.cloneFieldSettings(this.dataSourceSettings.rows),y=r.cloneFieldSettings(this.dataSourceSettings.columns),p=r.cloneFieldSettings(this.dataSourceSettings.values),w=r.cloneFieldSettings(this.dataSourceSettings.filters);this.pivotFieldListModule.setProperties({dataSourceSettings:{rows:v,columns:y,values:p,filters:w}},!0);this.pivotFieldListModule.axisFieldModule.render();this.pivotFieldListModule.treeViewModule.fieldTable&&!this.isAdaptive&&this.pivotFieldListModule.notify(kr,{})}}else this.remoteData=[],"pivot"===this.dataType&&this.dataSourceSettings.url&&""!==this.dataSourceSettings.url&&!n.isNullOrUndefined(i.dataSourceSettings)&&("type"in i.dataSourceSettings||"url"in i.dataSourceSettings)?(this.engineModule.fieldList=null,this.loadData()):(i.dataSourceSettings&&("pivot"===this.dataType&&"dataSource"in i.dataSourceSettings||"olap"===this.dataType&&"url"in i.dataSourceSettings)&&(this.isStaticRefresh||("pivot"===this.dataType?(this.engineModule.fieldList=null,this.engineModule.isEmptyData=!0,this.engineModule.data=[],this.engineModule.groupingFieldsInfo={}):"olap"===this.dataType&&(this.olapEngineModule.fieldList={},this.olapEngineModule.fieldListData=void 0,this.olapEngineModule.isEmptyData=!0),this.pivotValues=[])),this.notify(wi,{}));break;case"height":case"width":this.layoutRefresh();break;case"pivotValues":case"displayOption":if(i.displayOption&&1===Object.keys(i.displayOption).length&&i.displayOption.view)switch(this.currentView="Both"===i.displayOption.view?this.displayOption.primary:i.displayOption.view,(this.showGroupingBar||this.showFieldList)&&(this.showFieldList&&this.pivotFieldListModule&&(this.pivotFieldListModule.destroyEngine=!0,this.pivotFieldListModule.destroy(),null!==n.select("#"+this.element.id+"_PivotFieldList",this.element)&&n.remove(n.select("#"+this.element.id+"_PivotFieldList",this.element)),this.pivotFieldListModule.destroyEngine=!1),this.notify(ke,this)),i.displayOption.view){case"Both":this.pivotChartModule||(this.pivotChartModule=new fo(this));this.grid||this.renderEmptyGrid();break;case"Chart":this.grid&&(this.grid.destroy(),this.grid=void 0,null!==(h=n.select("#"+this.element.id+"_grid",this.element))&&n.remove(h));this.pivotChartModule||(this.pivotChartModule=new fo(this));break;case"Table":this.grid||this.renderEmptyGrid();this.pivotChartModule&&(this.destroyEngine=!0,this.pivotChartModule.destroy(),this.destroyEngine=!1,this.chart=void 0,this.pivotChartModule=void 0)}else this.showToolbar&&!n.isNullOrUndefined(i.displayOption)&&i.displayOption.view&&(this.currentView="Both"===i.displayOption.view?this.displayOption.primary:i.displayOption.view);this.showToolbar&&!n.isNullOrUndefined(i.displayOption)&&i.displayOption.view&&("Chart"===i.displayOption.view?(this.toolbarModule.createChartMenu(),this.toggleButtonState(bs,"add"),this.toggleButtonState(ks,"remove")):"Table"===i.displayOption.view?((h=n.select("#"+this.element.id+"_grid",this.element)).style.display="block",this.toggleButtonState(ks,"add"),this.toggleButtonState(bs,"remove")):(this.toolbarModule.createChartMenu(),this.toggleButtonState(bs,"remove"),this.toggleButtonState(ks,"remove")));c="pivot"===this.dataType?this.engineModule:this.olapEngineModule;n.isNullOrUndefined(c.fieldList)&&n.isNullOrUndefined(c.pivotValues)||this.notify(ti,{});break;case"gridSettings":this.isTabular="Tabular"===this.gridSettings.layout;this.lastGridSettings=i.gridSettings;this.isCellBoxMultiSelection=this.gridSettings.allowSelection&&"Box"===this.gridSettings.selectionSettings.cellSelectionMode&&"Cell"===this.gridSettings.selectionSettings.mode&&"Multiple"===this.gridSettings.selectionSettings.type;this.allowGrouping&&this.groupingModule&&!this.isCellBoxMultiSelection&&(this.setProperties({gridSettings:{allowSelection:!0,selectionSettings:{cellSelectionMode:"Box",mode:"Cell",type:"Multiple"}}},!0),this.isCellBoxMultiSelection=!0);this.renderModule&&this.grid&&this.renderModule.updateGridSettings();i.gridSettings.layout&&this.initialLoad();break;case"chartSettings":this.showGroupingBar&&this.groupingBarModule&&(-1!==Object.keys(i.chartSettings).indexOf("enableMultipleAxis")||i.chartSettings.chartSeries&&-1!==Object.keys(i.chartSettings.chartSeries).indexOf("type"))&&(this.groupingBarModule.renderLayout(),this.pivotChartModule&&this.groupingBarModule.appendToElement());n.isNullOrUndefined(this.pivotChartModule)&&"Table"!==this.displayOption.view&&(this.pivotChartModule=new fo(this));f="pivot"===this.dataType?this.engineModule:this.olapEngineModule;n.isNullOrUndefined(this.pivotChartModule)||n.isNullOrUndefined(f.pivotValues)||this.pivotChartModule.loadChart(this,this.chartSettings);n.isNullOrUndefined(f.pivotValues)||n.isNullOrUndefined(f.fieldList)||this.notify(ni,this);break;case"locale":case"currencyCode":case"enableRtl":(this.tooltip&&this.tooltip.destroy(),this.dataSourceSettings.groupSettings&&this.dataSourceSettings.groupSettings.length>0&&this.clonedDataSet)&&(a="CSV"===this.dataSourceSettings.type?r.getClonedCSVData(this.clonedDataSet):r.getClonedData(this.clonedDataSet),this.setProperties({dataSourceSettings:{dataSource:a}},!0));t.prototype.refresh.call(this);this.updateClass();break;case"enableValueSorting":this.enableValueSorting=i.enableValueSorting;this.updateDataSource();break;case"showGroupingBar":this.element.querySelector(".e-grouping-bar")?this.element.querySelector(".e-grouping-bar").remove():this.groupingBarModule&&(this.groupingBarModule.renderLayout(),this.commonModule||(this.commonModule=new ha(this)),this.notify(wi,{}));n.isNullOrUndefined(i.showFieldList)&&this.renderPivotGrid();break;case"showFieldList":this.initialLoad();break;case"groupingBarSettings":this.showGroupingBar&&this.groupingBarModule&&(i.groupingBarSettings&&Object.keys(i.groupingBarSettings).indexOf("showFieldsPanel")>-1?(this.groupingBarModule.RefreshFieldsPanel(),this.layoutRefresh()):this.axisFieldModule.render());break;case"showValuesButton":this.showGroupingBar&&this.groupingBarModule&&this.axisFieldModule&&this.axisFieldModule.render();this.showFieldList&&this.pivotFieldListModule&&this.pivotFieldListModule.axisFieldModule&&(this.pivotFieldListModule.setProperties({showValuesButton:i.showValuesButton},!0),this.pivotFieldListModule.axisFieldModule.render());break;case"showTooltip":this.renderToolTip();break;case"showToolbar":case"toolbar":this.toolbarModule&&this.showToolbar&&this.toolbarModule.refreshToolbar();break;case"chartTypes":this.toolbarModule&&this.toolbarModule.createChartMenu();break;case"aggregateTypes":this.showGroupingBar&&this.groupingBarModule&&this.axisFieldModule&&this.axisFieldModule.render();this.showFieldList&&this.pivotFieldListModule&&this.pivotFieldListModule.axisFieldModule&&(this.pivotFieldListModule.setProperties({aggregateTypes:i.aggregateTypes},!0),this.pivotFieldListModule.axisFieldModule.render());break;case"enableFieldSearching":this.pivotFieldListModule&&(this.pivotFieldListModule.enableFieldSearching=this.enableFieldSearching);break;case"pageSettings":this.enableVirtualization||(this.engineModule.pageSettings=this.pageSettings,this.engineModule.fieldList?this.refreshPageData():this.initialLoad());break;case"pagerSettings":case"enablePaging":this.isStaticFieldList&&this.isStaticRefresh&&(this.isStaticRefresh=!1);this.initialLoad();break;case"cellTemplate":this.cellTemplateFn=this.templateParser(this.cellTemplate);e=!0;break;case"tooltipTemplate":this.tooltipTemplateFn=this.templateParser(this.tooltipTemplate);e=!0;break;case"allowCalculatedField":this.pivotFieldListModule&&(this.pivotFieldListModule.allowCalculatedField=this.allowCalculatedField);break;case"allowDeferLayoutUpdate":this.pivotDeferLayoutUpdate=this.allowDeferLayoutUpdate;this.pivotFieldListModule&&(this.pivotFieldListModule.allowDeferLayoutUpdate=this.allowDeferLayoutUpdate);break;case"allowGrouping":case"enableVirtualization":this.refresh()}}e&&this.grid&&this.grid.refreshColumns()},i.prototype.toggleButtonState=function(n,t){var r=this.element.querySelector("."+n),i;r&&(i=r.closest(".e-toolbar-item"),i&&("add"===t?i.classList.add(p):"remove"===t&&i.classList.remove(p)))},i.prototype.templateParser=function(t){if(t)try{return"function"!=typeof t&&document.querySelectorAll(t).length?n.compile(document.querySelector(t).innerHTML.trim()):n.compile(t)}catch(i){return n.compile(t)}},i.prototype.getCellTemplate=function(){return this.cellTemplateFn},i.prototype.appendHtml=function(t,i){var r=document.createElement("div");return r.innerHTML=i,n.isNullOrUndefined(r.firstChild)||t.appendChild(r.firstChild),t},i.prototype.renderPivotGrid=function(){this.isEmptyGrid=!1;this.notEmpty=!0;this.clearTemplate();this.showGroupingBar&&(this.pivotChartModule&&this.appendChartElement(),this.groupingBarModule.appendToElement());this.pivotChartModule&&(this.pivotChartModule.engineModule=this.engineModule,this.pivotChartModule.loadChart(this,this.chartSettings),this.enableRtl&&this.chart&&"rtl"!==document.body.getAttribute("dir")&&n.addClass([this.chart.element],"e-ltr"));this.enableVirtualization&&(this.virtualscrollModule=new la(this));(this.allowDrillThrough||this.editSettings.allowEditing)&&(this.drillThroughModule=new sy(this));this.enablePaging&&this.notify(uh,this);"Chart"!==this.displayOption.view?(this.hyperlinkSettings&&(this.isRowCellHyperlink=!!this.hyperlinkSettings.showRowHeaderHyperlink||!!this.hyperlinkSettings.showHyperlink,this.isColumnCellHyperlink=!!this.hyperlinkSettings.showColumnHeaderHyperlink||!!this.hyperlinkSettings.showHyperlink,this.isValueCellHyperlink=!!this.hyperlinkSettings.showValueCellHyperlink||!!this.hyperlinkSettings.showHyperlink,this.isSummaryCellHyperlink=!!this.hyperlinkSettings.showSummaryCellHyperlink||!!this.hyperlinkSettings.showHyperlink,this.applyHyperlinkSettings()),this.renderModule=this.renderModule?this.renderModule:new oa(this),this.renderModule.render(!0)):this.grid&&n.remove(this.grid.element);var t=this.actionObj.actionName===wl||this.actionObj.actionName===bl,i=this.actionObj.actionName===kl||this.actionObj.actionName===pl;(this.showFieldList||this.allowNumberFormatting||this.allowCalculatedField||this.toolbar||this.allowGrouping||this.gridSettings.contextMenuItems)&&!t&&!i&&(this.notify(ni,this),this.pivotFieldListModule&&this.allowDeferLayoutUpdate&&(this.pivotFieldListModule.clonedDataSource=r.getClonedDataSourceSettings(this.dataSourceSettings)));this.allowConditionalFormatting&&this.applyFormatting(this.pivotValues);this.showToolbar&&"Both"===this.displayOption.view&&this.chart&&this.grid&&(this.showGroupingBar&&this.groupingBarModule&&this.element.querySelector("."+hi)&&this.groupingBarModule.refreshUI(),this.toolbarModule&&this.toolbarModule.toolbar&&(this.toolbarModule.toolbar.width=this.getGridWidthAsNumber()),this.chartSettings.enableScrollOnMultiAxis&&this.chartSettings.enableMultipleAxis&&(this.element.querySelector("."+lt).style.width=n.formatUnit(this.getGridWidthAsNumber())),this.chart.width=n.formatUnit(this.getGridWidthAsNumber()),"Table"===this.currentView?(this.grid.element.style.display="",this.chart.element.style.display="none",this.chartSettings.enableMultipleAxis&&this.chartSettings.enableScrollOnMultiAxis&&(this.element.querySelector(".e-pivotchart").style.display="none")):(this.grid.element.style.display="none",this.chart.element.style.display="",this.chartSettings.enableMultipleAxis&&this.chartSettings.enableScrollOnMultiAxis&&(this.element.querySelector(".e-pivotchart").style.display="")));this.toolbarModule&&(r.toggleFieldListIconVisibility(this),this.toolbarModule&&"New"!==this.toolbarModule.action&&"Load"!==this.toolbarModule.action&&"Remove"!==this.toolbarModule.action&&(this.isModified=!0),this.isInitialRendering||(this.isModified=!1,this.isInitialRendering=!this.isInitialRendering),this.toolbarModule.action="")},i.prototype.appendChartElement=function(){var t,i;n.select("#"+this.element.id+"_chart",this.element)||("Both"===this.displayOption.view&&"Chart"===this.displayOption.primary?this.element.insertBefore(n.createElement("div",{className:lt,id:this.element.id+"_chart"}),this.element.querySelector("."+yt)):this.element.appendChild(n.createElement("div",{className:lt,id:this.element.id+"_chart"})),t=this.width.toString(),this.showToolbar&&this.grid&&(t=this.getGridWidthAsNumber().toString()),i=this.pivotChartModule.getChartHeight(),(this.chartSettings&&this.chartSettings.chartSeries&&this.pivotChartModule.accumulationType.indexOf(this.chartSettings.chartSeries.type)>-1?new l.AccumulationChart({width:t,height:i}):new l.Chart({width:t,height:i})).appendTo(n.select("#"+this.element.id+"_chart",this.element)),this.showToolbar&&("Both"===this.displayOption.view&&"Chart"===this.currentView&&(this.grid.element.style.display="none"),"Chart"!==this.currentView&&(n.select("#"+this.element.id+"_chart",this.element).style.display="none")))},i.prototype.showWaitingPopup=function(){this.grid&&this.grid.element&&!this.spinnerTemplate&&"Table"===this.currentView?o.showSpinner(this.grid.element):o.showSpinner(this.element)},i.prototype.hideWaitingPopup=function(){this.grid&&this.grid.element&&!this.spinnerTemplate&&"Table"===this.currentView?o.hideSpinner(this.grid.element):o.hideSpinner(this.element)},i.prototype.updateDataSource=function(){var i=this;this.showWaitingPopup();var t=this,u=!n.isNullOrUndefined(t.lastSortInfo)&&Object.keys(t.lastSortInfo).length>0,e=!n.isNullOrUndefined(t.lastFilterInfo)&&Object.keys(t.lastFilterInfo).length>0,o=!n.isNullOrUndefined(t.lastAggregationInfo)&&Object.keys(t.lastAggregationInfo).length>0,f=!n.isNullOrUndefined(t.lastCalcFieldInfo)&&Object.keys(t.lastCalcFieldInfo).length>0,s={dataSourceSettings:r.getClonedDataSourceSettings(t.dataSourceSettings)};t.trigger(yi,s,function(n){if((t.enableVirtualization||t.enablePaging)&&(u||e||o||f)||r.updateDataSourceSettings(t,n.dataSourceSettings),t.updatePageSettings(!1),!u||""===t.dataSourceSettings.valueSortSettings.headerText&&""===t.dataSourceSettings.valueSortSettings.rowHeaderText&&""===t.dataSourceSettings.valueSortSettings.columnHeaderText||t.setProperties({dataSourceSettings:{valueSortSettings:{headerText:"",rowHeaderText:"",columnHeaderText:""}}},!0),"pivot"===t.dataType&&(t.enableVirtualization||t.enablePaging)&&(u||e||o||f))u&&("Server"===i.dataSourceSettings.mode?t.getEngine("onSort",null,t.lastSortInfo,null,null,null,null):t.engineModule.onSort(t.lastSortInfo,t.dataSourceSettings),t.lastSortInfo={}),o&&("Server"===i.dataSourceSettings.mode?t.getEngine("onAggregation",null,null,t.lastAggregationInfo,null,null,null):t.engineModule.onAggregation(t.lastAggregationInfo,t.dataSourceSettings),t.lastAggregationInfo={}),f&&("Server"===i.dataSourceSettings.mode?t.getEngine("onCalcOperation",null,null,null,t.lastCalcFieldInfo,null,null):t.engineModule.onCalcOperation(t.lastCalcFieldInfo,t.dataSourceSettings),t.lastCalcFieldInfo={}),e&&("Server"===i.dataSourceSettings.mode?t.getEngine("onFilter",null,null,null,null,t.lastFilterInfo,null):t.engineModule.onFilter(t.lastFilterInfo,t.dataSourceSettings),t.lastFilterInfo={}),t.allowServerDataBinding=!1,t.setProperties({pivotValues:t.engineModule.pivotValues},!0),t.allowServerDataBinding=!0,"Server"!==t.dataSourceSettings.mode&&t.enginePopulatedEventMethod("updateDataSource");else if("olap"===t.dataType){var s={mode:"",savedFieldList:t.olapEngineModule.fieldList,savedFieldListData:t.olapEngineModule.fieldListData,pageSettings:t.pageSettings,enableValueSorting:t.enableValueSorting,isDrillThrough:t.allowDrillThrough||t.editSettings.allowEditing,localeObj:t.localeObj,enableVirtualization:i.enableVirtualization};f||u?(t.olapEngineModule.savedFieldList=t.olapEngineModule.fieldList,t.olapEngineModule.savedFieldListData=t.olapEngineModule.fieldListData,f?(t.olapEngineModule.updateCalcFields(t.dataSourceSettings,t.lastCalcFieldInfo),t.lastCalcFieldInfo={}):(t.olapEngineModule.onSort(t.dataSourceSettings),t.lastSortInfo={})):r.renderOlapEngine(t,s);t.allowServerDataBinding=!1;t.setProperties({pivotValues:t.olapEngineModule.pivotValues},!0);t.allowServerDataBinding=!0;t.enginePopulatedEventMethod("updateDataSource")}else s={mode:"",savedFieldList:t.engineModule.fieldList,pageSettings:t.pageSettings,enableValueSorting:t.enableValueSorting,isDrillThrough:t.allowDrillThrough||t.editSettings.allowEditing,localeObj:t.localeObj,fieldsType:t.fieldsType,clonedReport:t.clonedReport,globalize:t.globalize,currenyCode:t.currencyCode,enablePaging:i.enablePaging,enableVirtualization:i.enableVirtualization,allowDataCompression:i.allowDataCompression,enableHtmlSanitizer:i.enableHtmlSanitizer,enableOptimizedRendering:i.enableVirtualization&&i.virtualscrollModule&&i.virtualScrollSettings.allowSinglePage,isTabularLayout:i.isTabular},"Server"===t.dataSourceSettings.mode?u?t.getEngine("onSort",null,t.lastSortInfo,null,null,null,null):o?t.getEngine("onAggregation",null,null,t.lastAggregationInfo,null,null,null):f?t.getEngine("onCalcOperation",null,null,null,t.lastCalcFieldInfo,null,null):e?t.getEngine("onFilter",null,null,null,null,t.lastFilterInfo,null):t.getEngine("onDrop",null,null,null,null,null,null):(t.engineModule.renderEngine(t.dataSourceSettings,s,t.aggregateCellInfo?t.getValueCellInfo.bind(t):void 0,t.onHeadersSort?t.getHeaderSortInfo.bind(t):void 0),t.allowServerDataBinding=!1,t.setProperties({pivotValues:t.engineModule.pivotValues},!0),t.allowServerDataBinding=!0,t.enginePopulatedEventMethod("updateDataSource")),t.lastSortInfo={},t.lastAggregationInfo={},t.lastCalcFieldInfo={},t.lastFilterInfo={}})},i.prototype.refreshPageData=function(){var n={dataSourceSettings:r.getClonedDataSourceSettings(this.dataSourceSettings)};this.actionBeginMethod();this.showWaitingPopup();this.trigger(yi,n);"pivot"===this.dataType&&("Server"===this.dataSourceSettings.mode?this.getEngine("onPageChange",null,null,null,null,null,null):this.engineModule.generateGridData(this.dataSourceSettings,!0,!1,this.engineModule.headerCollection,!0),this.setProperties({pivotValues:this.engineModule.pivotValues},!0),this.enginePopulatedEventMethod("updateDataSource"));this.actionObj.actionName=this.getActionCompleteName();this.actionObj.actionName&&this.actionCompleteMethod()},i.prototype.excelExport=function(n,t,i,r){if(this.isBlobData=r,"Server"===this.dataSourceSettings.mode)this.getEngine("onExcelExport",null,null,null,null,null,null,null,null,n);else{this.enableVirtualization||this.enablePaging||this.allowEngineExport||this.allowConditionalFormatting&&this.dataSourceSettings.conditionalFormatSettings.length>0?this.excelExportModule.exportToExcel("Excel",n,r):(this.exportType="Excel",this.grid.excelExport(n,t,i,r));this.actionObj.actionName=this.getActionCompleteName();var u={exportInfo:{type:this.exportType,info:n}};this.actionObj.actionInfo=u;this.actionObj.actionName&&this.actionCompleteMethod()}},i.prototype.exportAsPivot=function(n){"Server"===this.dataSourceSettings.mode&&("CSV"===n?this.getEngine("onPivotCsvExport",null,null,null,null,null,null,null,null,null,!0):this.getEngine("onPivotExcelExport",null,null,null,null,null,null,null,null,null,!0))},i.prototype.csvExport=function(n,t,i,r){if("Server"===this.dataSourceSettings.mode)this.getEngine("onCsvExport",null,null,null,null,null,null,null,null,n);else{this.enableVirtualization||this.enablePaging||this.allowEngineExport||this.allowConditionalFormatting&&this.dataSourceSettings.conditionalFormatSettings.length>0?this.excelExportModule.exportToExcel("CSV",n,r):(this.exportType="CSV",this.grid.csvExport(n,t,i,r));this.actionObj.actionName=this.getActionCompleteName();var u={exportInfo:{type:this.exportType,info:n}};this.actionObj.actionInfo=u;this.actionObj.actionName&&this.actionCompleteMethod()}},i.prototype.gridPdfExport=function(n,t,i,r){var f,u={pdfExportProperties:n,isMultipleExport:t,isBlob:r,pdfDoc:i,currentExportView:"Table",pdfMargins:{}},e;return this.trigger(kf,u),this.pdfExportModule&&(this.pdfExportModule.exportProperties=u),f="Server"!==this.dataSourceSettings.mode&&(this.enableVirtualization||this.enablePaging||this.allowEngineExport||Object.keys(u.pdfMargins).length>0||u.height||u.width||this.allowConditionalFormatting&&this.dataSourceSettings.conditionalFormatSettings.length>0)?this.pdfExportModule.exportToPDF(u.pdfExportProperties,u.isMultipleExport,u.pdfDoc,u.isBlob):this.grid.pdfExport(u.pdfExportProperties,u.isMultipleExport,u.pdfDoc,u.isBlob),this.actionObj.actionName=this.getActionCompleteName(),e={exportInfo:{type:"PDF",info:n}},this.actionObj.actionInfo=e,this.actionObj.actionName&&this.actionCompleteMethod(),f},i.prototype.chartExport=function(t,i,r,u,f){var s,o={pdfExportProperties:i,isMultipleExport:r,isBlob:f,pdfDoc:u,type:t,currentExportView:"Chart",pdfMargins:{}},h,c,l;return this.trigger(kf,o),this.chartExportModule&&(this.chartExportModule.exportProperties=o),h=o.fileName?o.fileName:n.isNullOrUndefined(i)||n.isNullOrUndefined(i.fileName)?"default":i.fileName,"PDF"===t?s=this.chartExportModule.pdfChartExport(o.pdfExportProperties,o.pdfDoc,o.isMultipleExport,o.isBlob):(c=0===o.orientation||o.orientation?o.orientation:n.isNullOrUndefined(i)||n.isNullOrUndefined(i.pageOrientation)||"Landscape"===i.pageOrientation?e.PdfPageOrientation.Landscape:e.PdfPageOrientation.Portrait,s=this.chart.exportModule.export(o.type,h,c,null)),this.actionObj.actionName=this.getActionCompleteName(),l={exportInfo:{type:t,info:h}},this.actionObj.actionInfo=l,this.actionObj.actionName&&this.actionCompleteMethod(),s},i.prototype.pdfExport=function(n,t,i,r,u){var f=this,e=null;return new Promise(function(o){if(u&&"Both"===f.displayOption.view)"Chart"===f.displayOption.primary?f.chartExport("PDF",n,!0,i,!1).then(function(i){e=f.gridPdfExport(n,t,i,r);o(e)}):f.gridPdfExport(n,!0,i,!1).then(function(i){e=f.chartExport("PDF",n,t,i,r);o(e)});else{var s=f.gridPdfExport(n,t,i,r);o(s)}})},i.prototype.printChart=function(){this.chart&&this.chart.print()},i.prototype.onDrill=function(t,i){var f=this,o=this.dataSourceSettings.drilledMembers[0]&&this.dataSourceSettings.drilledMembers[0].delimiter?this.dataSourceSettings.drilledMembers[0].delimiter:"**",s="",c="",a="",v,y,e,p;if(i?(s=i.fieldName,c=i.cell.axis,a=i.isDrilled?"up":"down"):(s="row"==(c=t.closest("td.e-rowsheader")?"row":"column")?n.closest(t,"td").getAttribute("fieldname"):n.closest(t,"th").getAttribute("fieldname"),a=t.classList.contains(er)?"up":"down"),"pivot"===this.dataType){var k=r.cloneDrillMemberSettings(this.dataSourceSettings.drilledMembers),d="row"===c?parseInt(n.closest(t,"td").getAttribute("aria-colindex"),10)-1:parseInt(n.closest(t,"th").getAttribute("aria-colindex"),10)-1,g=Number("row"===c?n.closest(t,"td").getAttribute("index"):n.closest(t,"th").getAttribute("index")),w=i?i.cell:this.engineModule.pivotValues[g][d],h=w.valueSort.levelName.split(this.engineModule.valueSortSettings.headerDelimiter).join(o),b=!1;if(0===this.dataSourceSettings.drilledMembers.length)this.setProperties({dataSourceSettings:{drilledMembers:[{name:s,items:[h],delimiter:o}]}},!0);else{for(v=r.cloneDrillMemberSettings(this.dataSourceSettings.drilledMembers),y=0;y<v.length;y++)e=v[y],(h=h.split(o).join(e.delimiter?e.delimiter:o),o=e.delimiter=e.delimiter?e.delimiter:o,e.name===s)&&(b=!0,p=e.items.indexOf(h),p>-1?e.items.splice(p,1):e.items.push(h));this.setProperties({dataSourceSettings:{drilledMembers:v}},!0);b||this.dataSourceSettings.drilledMembers.push({name:s,items:[h],delimiter:o})}this.showWaitingPopup();var u=this,l={fieldName:s,memberName:h,delimiter:o,axis:c,action:a,currentCell:w},nt={drillInfo:l,pivotview:u,cancel:!1};u.trigger(pe,nt,function(n){var t,i,e;n.cancel?(f.hideWaitingPopup(),f.setProperties({dataSourceSettings:{drilledMembers:k}},!0)):(t={dataSourceSettings:r.getClonedDataSourceSettings(f.dataSourceSettings)},(u.trigger(yi,t),u.setProperties({dataSourceSettings:t.dataSourceSettings},!0),u.enableVirtualization||u.enablePaging?"Server"===f.dataSourceSettings.mode?f.getEngine("onDrill",l,null,null,null,null,null):(u.engineModule.drilledMembers=u.dataSourceSettings.drilledMembers,u.engineModule.onDrill(l)):"Server"===f.dataSourceSettings.mode?f.getEngine("onDrill",l,null,null,null,null,null):u.engineModule.generateGridData(u.dataSourceSettings,!0),"Server"!==f.dataSourceSettings.mode)&&(u.allowServerDataBinding=!1,u.setProperties({pivotValues:u.engineModule.pivotValues},!0),u.allowServerDataBinding=!0,i={dataSourceSettings:r.getClonedDataSourceSettings(t.dataSourceSettings),pivotValues:f.pivotValues},f.trigger(pi,i),u.engineModule.pivotValues=i.pivotValues,e={drillInfo:l},f.actionObj.actionInfo=e,u.renderPivotGrid()))})}else this.onOlapDrill(s,c,a,o,t,i)},i.prototype.onOlapDrill=function(t,i,u,f,e,o){var a,s=this,tt=this,gt=r.cloneDrillMemberSettings(this.dataSourceSettings.drilledMembers),ni,ti,g,v,k,et,w,p,nt,pt,ot,st,ht,wt,d,bt,dt;o?a=o.cell:(ni="row"===i?parseInt(n.closest(e,"td").getAttribute("aria-colindex"),10)-1:parseInt(n.closest(e,"th").getAttribute("aria-colindex"),10)-1,ti=Number("row"===i?n.closest(e,"td").getAttribute("index"):n.closest(e,"th").getAttribute("index")),a=this.olapEngineModule.pivotValues[ti][ni]);g="row"===i?this.olapEngineModule.tupRowInfo[a.ordinal]:this.olapEngineModule.tupColumnInfo[a.ordinal];v={axis:i,action:u,fieldName:t,delimiter:"~~",memberName:g.uNameCollection,currentCell:a};this.showWaitingPopup();var ct={drillInfo:v,pivotview:tt,cancel:!1},ut=this.olapEngineModule.fieldList[v.fieldName]&&this.olapEngineModule.fieldList[v.fieldName].isHierarchy,it=g.drillInfo.map(function(n){return n.hierarchy}).indexOf(a.hierarchy.toString()),l=r.cloneDrillMemberSettings(this.dataSourceSettings.drilledMembers);if(v&&"down"===v.action){for(var lt=g.drillInfo.map(function(n){return n.uName}),h="",b=0;b<=it;b++)h=h+(""!==h?"~~":"")+(st=(ot=lt[b]).split("~~"))[st.length-1];for(var rt=this.olapEngineModule.getDrilledSets(v.memberName,a,this.olapEngineModule.fieldList[a.hierarchy]&&!this.olapEngineModule.fieldList[a.hierarchy].hasAllMember?a.valueSort.levelName.split(this.dataSourceSettings.valueSortSettings.headerDelimiter).length-1:it,i),at=0,ii=pt=Object.keys(rt);at<ii.length;at++)for(var ft=rt[ii[at]],y=0,vt=l.length;y<vt;y++){for(k=l[y],et=ft,k.delimiter&&(et=et.replace(/~~/g,k.delimiter)),w=[],p=0;p<k.items.length;p++)0!==k.items[p].indexOf(et)&&(w[w.length]=k.items[p]);k.items=w}this.olapEngineModule.drilledSets[a.actualText]=g.members[it];v.memberName=h;for(var c=[],yt=0,ri=l;yt<ri.length;yt++)(ot=ri[yt]).name===v.fieldName&&c.push(ot);if(c.length>0){if(c[0].delimiter&&(h=h.replace(/~~/g,c[0].delimiter)),-1===r.inArray(h,c[0].items)&&c[0].items.push(h),ut)for(y=0;y<c[0].items.length;)c[0].items[y]===h?c[0].items.splice(y,1):++y}else ut||(nt={name:v.fieldName,items:[h],delimiter:"~~"},l?l.push(nt):l=[nt]);ct.drillInfo.memberName=h;this.setProperties({dataSourceSettings:{drilledMembers:l}},!0);tt.trigger(pe,ct,function(n){var t,i;n.cancel?(s.hideWaitingPopup(),s.setProperties({dataSourceSettings:{drilledMembers:gt}},!0)):(t={dataSourceSettings:r.getClonedDataSourceSettings(s.dataSourceSettings)},s.trigger(yi,t),s.setProperties({dataSourceSettings:t.dataSourceSettings},!0),s.olapEngineModule.updateDrilledInfo(s.dataSourceSettings),s.allowServerDataBinding=!1,s.setProperties({pivotValues:s.olapEngineModule.pivotValues},!0),s.allowServerDataBinding=!0,i={dataSourceSettings:r.getClonedDataSourceSettings(t.dataSourceSettings),pivotValues:tt.olapEngineModule.pivotValues},s.trigger(pi,i),s.olapEngineModule.pivotValues=i.pivotValues,s.renderPivotGrid())})}else{for(delete this.olapEngineModule.drilledSets[a.actualText],rt=this.olapEngineModule.getDrilledSets(v.memberName,a,it,i),pt=Object.keys(rt),lt=g.drillInfo.map(function(n){return n.uName}),h="",b=0;b<=it;b++)h=h+(""!==h?"~~":"")+(st=(ot=lt[b]).split("~~"))[st.length-1];for(ht=0,wt=pt;ht<wt.length;ht++){for(ft=rt[wt[ht]],d=[],y=0,vt=l.length;y<vt;y++)if(bt=ft,(c=l[y]).name===v.fieldName&&d.push(c),c.delimiter&&(bt=ft.replace(/~~/g,c.delimiter)),!ut){for(w=[],p=0;p<c.items.length;p++)0!==c.items[p].indexOf(bt)&&(w[w.length]=c.items[p]);c.items=w}ut&&(d.length>0?(d[0].delimiter&&(h=h.replace(/~~/g,d[0].delimiter)),-1===r.inArray(h,d[0].items)&&d[0].items.push(h)):(nt={name:v.fieldName,items:[h],delimiter:"~~"},l?l.push(nt):l=[nt]))}for(var ui=[],kt=0,fi=l;kt<fi.length;kt++)dt=fi[kt],dt.items.length>0&&ui.push(dt);this.setProperties({dataSourceSettings:{drilledMembers:l}},!0);tt.trigger(pe,ct,function(n){var t,i;n.cancel?(s.hideWaitingPopup(),s.setProperties({dataSourceSettings:{drilledMembers:gt}},!0)):(t={dataSourceSettings:r.getClonedDataSourceSettings(s.dataSourceSettings)},s.trigger(yi,t),s.setProperties({dataSourceSettings:t.dataSourceSettings},!0),s.setProperties({dataSourceSettings:{drilledMembers:ui}},!0),s.olapEngineModule.updateDrilledInfo(s.dataSourceSettings),s.allowServerDataBinding=!1,s.setProperties({pivotValues:s.olapEngineModule.pivotValues},!0),s.allowServerDataBinding=!0,i={dataSourceSettings:r.getClonedDataSourceSettings(t.dataSourceSettings),pivotValues:tt.olapEngineModule.pivotValues},s.trigger(pi,i),s.olapEngineModule.pivotValues=i.pivotValues,s.renderPivotGrid())})}},i.prototype.onContentReady=function(){var s,u,h=c.getScrollBarWidth(),k,ft,e,d,lt,a,nt,f,v,tt,et,r,it,p,ot,w,st;this.isPopupClicked=!1;this.showFieldList&&this.pivotFieldListModule&&"Server"!==this.dataSourceSettings.mode?(this.pivotFieldListModule.element.style.display="block",o.hideSpinner(this.pivotFieldListModule.fieldListSpinnerElement)):this.fieldListSpinnerElement&&o.hideSpinner(this.fieldListSpinnerElement);this.isEmptyGrid?this.pivotValues.length>0&&(this.isEmptyGrid=!1,this.notEmpty=!0):("Server"===this.dataSourceSettings.mode&&this.isServerWaitingPopup||"Local"===this.dataSourceSettings.mode)&&this.hideWaitingPopup();var t=this.element.querySelector("."+nr)?this.element.querySelector("."+nr):this.element.querySelector("."+ct),l=this.element.querySelector("."+ai),g=this.virtualScrollSettings&&this.virtualScrollSettings.allowSinglePage&&"pivot"===this.dataType;if(this.grid){var i=this.element.querySelector("."+at),ht=t.parentElement.offsetWidth<t.querySelector("."+b).offsetWidth,ut="pivot"===this.dataType?this.engineModule:this.olapEngineModule;if(this.enableVirtualization&&ut&&this.virtualscrollModule){(g&&this.element.querySelector("."+gt)&&(n.removeClass([l,t],["e-virtual-pivot-content"]),n.addClass([this.element.querySelector("."+gt)],[hr]),this.grid&&this.grid.element.querySelector(".e-spinner-inner")&&n.removeClass([this.grid.element.querySelector(".e-spinner-inner")],[hr])),g)&&(k=this.element.querySelector("."+gt),(k||(k=n.createElement("div",{className:gt+" "+hr,innerHTML:this.localeObj.getConstant("loading")}),this.grid.element&&!this.element.querySelector("."+gt)&&this.grid.element.insertBefore(k,this.grid.element.firstElementChild)),this.element.querySelector("."+rt)&&this.element.querySelector("."+at))&&(ft=this.element.querySelector("."+at).offsetHeight+this.element.querySelector("."+rt).offsetHeight,n.setStyleAttribute(k,{height:ft+"px",width:this.element.querySelector("."+rt).offsetWidth+"px",padding:Math.floor(ft/2)+"px"})));this.element.querySelector("."+ct)&&!this.element.querySelector("."+ct).querySelector("."+li)&&(this.virtualDiv=n.createElement("div",{className:li}),this.element.querySelector("."+ct).appendChild(this.virtualDiv));this.element.querySelector("."+ai)&&!this.element.querySelector("."+ai).querySelector("."+li)?(this.virtualHeaderDiv=n.createElement("div",{className:li}),this.element.querySelector("."+ai).appendChild(this.virtualHeaderDiv)):this.virtualHeaderDiv=this.element.querySelector("."+ai).querySelector("."+li);e=i.querySelector("."+dt);i&&!e&&(this.virtualTableDiv=n.createElement("div",{className:dt}),i.appendChild(this.virtualTableDiv),e=i.querySelector("."+dt),this.virtualScrollDiv=n.createElement("div",{className:ys}),e.appendChild(this.virtualScrollDiv),n.setStyleAttribute(e,{minHeight:0!==h?h:"15px",maxHeight:0!==h?h:"15px",overflowX:"scroll"}),n.setStyleAttribute(this.virtualScrollDiv,{height:"0.1px"}),d=n.createElement("div",{className:nr}),d.append.apply(d,Array.prototype.slice.call(t.childNodes)),t.appendChild(d),d.scrollLeft=0);lt=this.element.querySelector("."+ct).querySelector("."+b);a=this.gridSettings.rowHeight*ut.rowCount+.1-lt.clientHeight;a>this.scrollerBrowserLimit&&(this.verticalScrollScale=a/this.scrollerBrowserLimit,a=this.scrollerBrowserLimit);(u=this.gridSettings.columnWidth*ut.columnCount)>this.scrollerBrowserLimit&&(this.horizontalScrollScale=u/this.scrollerBrowserLimit,u=this.scrollerBrowserLimit);n.setStyleAttribute(this.virtualDiv,{height:(a>.1?a:.1)+"px",width:(u>.1?u:.1)+"px"});n.setStyleAttribute(this.virtualHeaderDiv,{height:0,width:(u>.1?u:.1)+"px"});this.isAdaptive&&(t.style.minHeight="1px",t.style.minHeight="1px");nt=this.isAdaptive?t:i.querySelector("."+dt)?i.querySelector("."+dt):t;s=t.parentElement.scrollTop>this.scrollerBrowserLimit?t.querySelector("."+b).style.transform.split(",")[1].trim():(g?t.parentElement.scrollTop:-(t.parentElement.scrollTop*this.verticalScrollScale-this.scrollPosObject.verticalSection-t.parentElement.scrollTop))+"px)";Number(s.split("px")[0])>this.virtualDiv.clientHeight&&(s=this.virtualDiv.clientHeight+"px)");f=Math.abs(nt.scrollLeft);v=f>this.scrollerBrowserLimit?t.querySelector("."+b).style.transform.split(",")[0].trim()+",":"translate("+(this.enableRtl?1:-1)*(f*this.horizontalScrollScale-this.scrollPosObject.horizontalSection-f)+"px,";n.setStyleAttribute(t.querySelector("."+b),{transform:v+s});n.setStyleAttribute(l.querySelector("."+b),{transform:v+0+"px)"});e.style.display=!ht&&i&&e||this.isAdaptive?"none":"block";tt=Number(-t.querySelector("."+b).style.transform.split("(")[1].split(",")[0].split("px")[0]);(this.virtualscrollModule.alignFreezedCells(tt,!0),ht)&&(et=this.pivotColumns.length<25?u+t.querySelector("."+b).querySelector("."+vi).offsetWidth+(i.offsetWidth-i.clientWidth):u+(i.offsetWidth-i.clientWidth),this.grid.element.querySelector("."+ys).style.width="auto"!==this.grid.height?et+h+"px":et+"px");this.grid.element.querySelector("."+nr)&&t.parentElement.scrollHeight===t.scrollHeight&&(t.style.overflowY="");var pt="pivot"===this.dataType&&"column"===this.dataSourceSettings.valueAxis?this.dataSourceSettings.values.length:1,vt=this.pageSettings.columnPageSize*pt*this.gridSettings.columnWidth,y=nt.scrollWidth-(Math.abs(f)+nt.offsetWidth);this.virtualscrollModule&&vt>0&&y<=vt&&f>0&&(r=t.scrollWidth-(Math.abs(t.scrollLeft)+t.parentElement.offsetWidth),it=void 0,r<1&&"horizondal"===this.scrollDirection&&(t.parentElement.scrollTop>0&&(it=t.parentElement.scrollTop),this.virtualDiv.style.display="none",r=t.scrollWidth-(Math.abs(t.scrollLeft)+t.parentElement.offsetWidth)),this.virtualDiv.style.display="",it&&(t.parentElement.scrollTop=it),p=t.scrollWidth-(Math.abs(t.scrollLeft)+t.parentElement.offsetWidth),r>1&&(this.scrollPosObject.horizontalSection-=y<=0?r>y?r:-p:p===r?r-y:r<p&&(y===p||y>r)?-(p-r):0,"auto"!==this.grid.height&&(this.scrollPosObject.horizontalSection-=h),this.scrollPosObject.horizontalSection=this.scrollPosObject.horizontalSection>=-this.element.querySelector("."+yt).querySelector("."+ci+"."+vi).offsetWidth?this.scrollPosObject.horizontalSection:-this.element.querySelector("."+yt).querySelector("."+ci+"."+vi).offsetWidth),v=f>this.scrollerBrowserLimit?t.querySelector("."+b).style.transform.split(",")[0].trim()+",":"translate("+(this.enableRtl?1:-1)*(f*this.horizontalScrollScale-this.scrollPosObject.horizontalSection-f)+"px,",n.setStyleAttribute(t.querySelector("."+b),{transform:v+s}),n.setStyleAttribute(l.querySelector("."+b),{transform:v+0+"px)"}),tt=Number(-t.querySelector("."+b).style.transform.split("(")[1].split(",")[0].split("px")[0]),this.virtualscrollModule.alignFreezedCells(tt,!0))}("Chart"!==this.currentView&&this.grid.hideScroll(),this.showGroupingBar)?((this.groupingBarModule&&this.element.querySelector("."+hi)&&(this.groupingBarModule.appendToElement(),this.renderModule.setValuePanelWidth()),this.actionObj.fieldInfo&&this.actionObj.fieldInfo.fieldName)&&(ot=this.pivotButtonModule.parentElement.querySelector('[data-uid="'+this.actionObj.fieldInfo.fieldName+'"]'),n.isNullOrUndefined(ot)||ot.focus()),this.element.style.minWidth=this.isAdaptive?this.minWidth?this.minWidth+"px":"310px":this.minWidth?this.minWidth+"px":"400px",this.grid.element.style.minWidth=this.isAdaptive?this.minWidth?this.minWidth+"px":"310px":this.minWidth?this.minWidth+"px":"400px"):(this.element.style.minWidth=this.minWidth?this.minWidth+"px":"310px",this.grid.element.style.minWidth=this.minWidth?this.minWidth+"px":"310px")}(this.unwireEvents(),this.wireEvents(),this.isChartLoaded=!1,this.isEmptyGrid||this.trigger(ye),this.actionObj.actionName=this.getActionCompleteName(),this.actionObj.actionName&&(this.actionObj.actionName===ch&&this.pivotCommon&&this.pivotCommon.filterDialog&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.pivotCommon.filterDialog.setFocus.bind(this.pivotCommon.filterDialog))),this.actionObj.actionName!==io&&this.actionCompleteMethod()),this.groupingModule&&(this.groupingModule.isUpdate=!1),this.engineModule&&this.engineModule.clearProperties(),this.virtualscrollModule&&this.grid&&this.virtualscrollModule.onHorizondalScroll(l,t),!this.isAdaptive&&this.enableVirtualization&&t&&this.virtualscrollModule&&!g)&&(w=t.parentElement.parentElement.querySelector(".e-movablescrolldiv"),u<3*t.parentElement.clientWidth?(t.style.overflowX="visible",w.style.display="none",l.scrollLeft=t.parentElement.scrollLeft,n.setStyleAttribute(t.querySelector("."+b),{transform:"translate(0px,"+s}),n.setStyleAttribute(l.querySelector("."+b),{transform:"translate(0px, 0px)"}),this.virtualscrollModule.alignFreezedCells(0,!0)):(n.EventHandler.remove(this.element.querySelector("."+at).querySelector("."+ct),"scroll",this.headerScrollUpdate),st=this.element.querySelector("."+at).querySelector("."+ct).scrollLeft,t.style.overflowX="auto",w.style.display="block",0!==st&&(w.scrollLeft=st),w.scrollLeft!==t.scrollLeft&&0!==t.scrollLeft&&(w.scrollLeft=t.scrollLeft)));this.isStaticRefresh=!1},i.prototype.setToolTip=function(t){var e,l,y=this,o=parseInt(t.target.getAttribute("aria-colindex"),10)-1,f=Number(t.target.getAttribute("index")),i=this.dataSourceSettings.values.length>0&&this.pivotValues&&this.pivotValues[f]&&this.pivotValues[f][o]?this.pivotValues[f][o]:void 0,a,r,s,u,p,v,w,b,d;if(this.tooltip.content="",a=!1,i&&"olap"===this.dataType?(r=i.actualText,n.isNullOrUndefined(r)||!this.olapEngineModule.fieldList||this.olapEngineModule.fieldList[r]||(s=this.olapEngineModule.tupRowInfo,r=i.rowOrdinal>-1&&s.length>0&&s[i.rowOrdinal]&&!n.isNullOrUndefined(s[i.rowOrdinal].measureName)?s[i.rowOrdinal].measureName:r),this.olapEngineModule.fieldList&&this.olapEngineModule.fieldList[r]&&(e=(u=this.olapEngineModule.fieldList[r]).isCalculatedField?u.type:u.aggregateType,l=this.olapEngineModule.dataFields[r]&&this.olapEngineModule.dataFields[r].caption?this.olapEngineModule.dataFields[r].caption:u.caption,a=!0)):i&&this.engineModule.fieldList&&this.engineModule.fieldList[i.actualText]&&(e="DistinctCount"===(e=(u=this.engineModule.fieldList[i.actualText]).aggregateType)||"number"===u.type&&"include"!==u.type&&"exclude"!==u.type?void 0===e?"Sum":u.aggregateType:"Count",l=u.caption,a=!0),i&&a){var g=this.isTabular&&this.engineModule.rowMaxLevel>0?this.engineModule.rowMaxLevel:0,h=this.getRowText(f,g),c=this.getColText(0,o,f),k=""===i.formattedText?this.localeObj.getConstant("noValue"):i.formattedText;this.tooltipTemplate&&void 0!==this.getTooltipTemplate()?(p={rowHeaders:h,columnHeaders:c,aggregateType:e,valueField:l,value:k,rowFields:this.getHeaderField(f,o,"row"),columnFields:this.getHeaderField(f,o,"column")},"function"==typeof this.tooltipTemplate&&this.isReact?(v=document.createElement("div"),this.getTooltipTemplate()(p,this,"tooltipTemplate",this.element.id+"tooltipTemplate",null,null,v),this.renderReactTemplates(function(){y.tooltip.content=y.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(v.outerHTML):v.outerHTML})):(w=this.getTooltipTemplate()(p,this,"tooltipTemplate",this.element.id+"tooltipTemplate")[0].outerHTML,this.tooltip.content=this.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(w):w)):(b=this.grid.getColumns()[o],c=b.disableHtmlEncode?this.encodeHtml(c):c,h=b.disableHtmlEncode?this.encodeHtml(h):h,d="<div class=e-pivottooltip><p class="+ts+">"+this.localeObj.getConstant("row")+":<\/p><p class="+is+">"+h+"<\/p><\/br><p class="+ts+">"+this.localeObj.getConstant("column")+":<\/p><p class="+is+">"+c+"<\/p><\/br>"+(""!==i.actualText?"<p class="+ts+">"+("olap"===this.dataType?"":this.localeObj.getConstant(e)+" "+this.localeObj.getConstant("of")+" ")+l+":<\/p><p class="+is+">"+k+"<\/p><\/div>":""),this.tooltip.content=n.initializeCSPTemplate(function(){return d}))}else t.cancel=!0},i.prototype.encodeHtml=function(t){var i=n.createElement("div");return i.innerText=t,i.innerHTML},i.prototype.getTooltipTemplate=function(){return this.tooltipTemplateFn},i.prototype.getHeaderField=function(n,t,i){var f,e="",o="olap"===this.dataType?this.olapEngineModule:this.engineModule,s=o.valueSortSettings.headerDelimiter,r,h,u;if("row"===i)for(f=this.pivotValues[n][0].valueSort.levelName.toString().split(s).length,r=0;r<f&&this.dataSourceSettings.rows.length>0&&this.dataSourceSettings.rows[r];r++)e+=(r?" - ":"")+(this.dataSourceSettings.rows[r].caption?this.dataSourceSettings.rows[r].caption:this.dataSourceSettings.rows[r].name);else for(this.dataSourceSettings.columns.length>0&&(h=0===this.dataSourceSettings.values.length?0:Number(Object.keys(o.headerContent)[Object.keys(o.headerContent).length-1]),f=this.pivotValues[h][t].valueSort.levelName.toString().split(s).length,f=this.dataSourceSettings.values.length>1?f-1:f),u=0;u<f&&this.dataSourceSettings.columns.length>0&&this.dataSourceSettings.columns[u];u++)e+=(u?" - ":"")+(this.dataSourceSettings.columns[u].caption?this.dataSourceSettings.columns[u].caption:this.dataSourceSettings.columns[u].name);return e},i.prototype.getLevel=function(n){var r=n.valueSort?n.valueSort.levelName.toString():"",t=n.actualText?n.actualText.toString().split(this.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,i=r.split(this.dataSourceSettings.valueSortSettings.headerDelimiter).length-(t?t-1:t);return i?i-1:0},i.prototype.getRowText=function(t,i){var r=this.pivotValues[t][i],u="",f;if(r){if(f=this.getLevel(r),this.isTabular&&(0===f||this.engineModule&&f!==this.engineModule.rowMaxLevel)&&(i=f,r=this.pivotValues[t][i]),u="grand sum"===r.type?this.localeObj.getConstant("grandTotal"):r.formattedText,"row"===this.dataSourceSettings.valueAxis)u=(u=0===this.dataSourceSettings.rows.length&&this.dataSourceSettings.values.length>1?this.pivotValues[t][0].valueSort.levelName.toString().slice((this.localeObj.getConstant("grandTotal")+this.dataSourceSettings.valueSortSettings.headerDelimiter).length).toString():1===this.dataSourceSettings.values.length?n.isNullOrUndefined(this.dataSourceSettings.values[0].caption)?this.dataSourceSettings.values[0].name:this.dataSourceSettings.values[this.isTabular?i:0].caption:this.pivotValues[t][this.isTabular?i:0].valueSort.levelName.toString()).split(this.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - ");else if(this.isTabular)for(;f>0;)i--,r=this.pivotValues[t][i],u=u+this.dataSourceSettings.valueSortSettings.headerDelimiter+r.formattedText,f-=1;else for(;f>0||r&&void 0===r.index;)t--,(r=this.pivotValues[t][i])&&f>r.level&&(u=u+this.dataSourceSettings.valueSortSettings.headerDelimiter+r.formattedText,f-=1);u=u.split(this.dataSourceSettings.valueSortSettings.headerDelimiter).reverse().join(" - ")}return u},i.prototype.getColText=function(n,t,i){for(var r=this.pivotValues[0][t],u=r.axis,f="grand sum"===r.type?this.localeObj.getConstant("grandTotal"):r.formattedText;"value"!==u&&i>n;)n++,this.pivotValues[n]&&(u=(r=this.pivotValues[n][t]).axis,"sum"!==r.type&&"grand sum"!==r.type&&"value"!==u&&(f=f+" - "+r.formattedText));return f},i.prototype.updateClass=function(){this.enableRtl?n.addClass([this.element],fi):n.removeClass([this.element],fi);this.isAdaptive?n.addClass([this.element],ar):n.removeClass([this.element],ar);this.cssClass&&n.addClass([this.element],this.cssClass.split(" "))},i.prototype.mouseRclickHandler=function(n){(3===n.which||0===n.which)&&(this.lastCellClicked=n.target);this.lastCellClicked=n.target},i.prototype.mouseDownHandler=function(n){3===n.which&&(this.lastCellClicked=n.target);this.isCellBoxMultiSelection&&(this.isMouseDown=!n.target.closest("."+w),this.isMouseUp=!1,this.lastSelectedElement=void 0)},i.prototype.mouseMoveHandler=function(t){var r=this,i,u;if(this.isCellBoxMultiSelection&&(t.preventDefault(),i=t.target?t.target:void 0,this.isMouseDown&&i&&!i.classList.contains("e-expand")&&!i.classList.contains("e-collapse")&&(u=i.parentElement.classList.contains(gi)||i.classList.contains(gi)?"row":"column",i="column"===u?n.closest(i,"th"):n.closest(i,"td")))){var f=parseInt(i.getAttribute("aria-colindex"),10)-1,e=Number(i.getAttribute("index")),o={cancel:!1,isCellClick:!0,currentCell:i,data:this.pivotValues[e][f]};this.trigger(nh,o,function(n){if(!n.cancel){r.grid.clearSelection();var t=r.parentAt(i,"TH");r.lastSelectedElement&&r.lastSelectedElement!==t&&t.classList.contains(tt)?(r.lastSelectedElement.classList.remove(it),r.lastSelectedElement.classList.remove(tt),r.lastSelectedElement=t):(r.lastSelectedElement=t,t.classList.contains(ci)&&t.classList.contains(vi)||(t.classList.add(it),t.classList.add(tt)));r.renderModule.selected()}})}},i.prototype.mouseUpHandler=function(){this.isCellBoxMultiSelection&&(this.isMouseDown=!1,this.isMouseUp=!0)},i.prototype.parentAt=function(n,t){for(;n.tagName!==t&&n.parentElement;)n=n.parentElement;return n},i.prototype.mouseClickHandler=function(t){var f,k,d,l,s,o,g,a,h,e,c,nt,tt,y,i,v,p,it,ut;if((3===t.which||0===t.which)&&(this.lastCellClicked=t.target),f=t.target,!n.closest(f,"."+w)){var u=null,ft=f.closest("td.e-rowsheader"),et=f.closest("td.e-valuescontent"),b=ft||et?"row":"column";if(u="column"===b?n.closest(f,"th"):n.closest(f,"td"),"column"!==b||u||"Row"===this.gridSettings.selectionSettings.mode||(u=n.closest(f,"td")),f.classList.contains(er)||f.classList.contains(wr)||!this.enableValueSorting||f.classList.contains("e-resized")||f.classList.contains("e-rhandler")&&f.classList.contains("e-rcursor")||"olap"===this.dataType&&this.enableVirtualization){if(!f.classList.contains(er)&&!f.classList.contains(wr))return void this.cellClicked(f,u,t);if(k=f.parentElement.getAttribute("fieldname"),d=(a=r.getFieldInfo(k,this),f.classList.contains(er)?this.actionObj.actionName="Drill up":f.classList.contains(wr)?this.actionObj.actionName="Drill down":""),this.actionObj.actionName=d,this.actionObj.fieldInfo=a.fieldItem,this.actionBeginMethod())return;try{this.onDrill(f)}catch(t){this.actionFailureMethod(t)}}else{l="pivot"===this.dataType?this.engineModule:this.olapEngineModule;this.cellClicked(f,u,t);s=u&&!n.isNullOrUndefined(u.closest("."+rt));o=u&&(!n.isNullOrUndefined(u.closest(".e-row"))||u.classList.contains("e-rowsheader"));try{if(u&&(s||o)&&"olap"!==this.dataType&&"Server"!==this.dataSourceSettings.mode||("olap"===this.dataType||"Server"===this.dataSourceSettings.mode)&&(s&&"column"===this.dataSourceSettings.valueAxis&&!u.classList.contains(vi)||o&&"row"===this.dataSourceSettings.valueAxis)){if(g=u.getAttribute("fieldname"),a=r.getFieldInfo(g,this),this.actionObj.actionName=yl,this.actionObj.fieldInfo=a.fieldItem,this.actionBeginMethod())return;if(h=parseInt(u.getAttribute("aria-colindex"),10)-1,e=Number(u.getAttribute("index")),"row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&o?(c=this.pivotValues[e][h],e=-1===this.dataSourceSettings.valueIndex&&o&&!this.isTabular&&"Bottom"!==this.dataSourceSettings.subTotalsPosition?"value"===c.type||3===c.memberType?e:e+1:this.getLevel(c)<=l.measureIndex&&c.members&&c.members.length>0?c.members[0].rowIndex:e):"column"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&s&&(h=parseInt(u.getAttribute("aria-colindex"),10)-1+Number(u.getAttribute("aria-colspan"))-1,e=l.headerContent.length-1),"pivot"===this.dataType&&"Server"!==this.dataSourceSettings.mode&&(s||o)?(nt=this.pivotValues[e][h],tt=o&&this.isTabular&&("row"===this.dataSourceSettings.valueAxis&&"value"===nt.type||"column"===this.dataSourceSettings.valueAxis),(o&&(!this.isTabular||tt)||s)&&(y=s?{columnIndex:Number(u.getAttribute("aria-colindex"))+Number(u.getAttribute("aria-colspan"))-1,columnHeaderText:this.pivotValues[e][h].valueSort.levelName,columnSortOrder:"Descending"===this.dataSourceSettings.valueSortSettings.columnSortOrder?"Ascending":"Descending"}:{rowIndex:Number(u.getAttribute("index"))+Number(u.getAttribute("aria-rowspan"))-1,rowSortOrder:"Descending"===this.dataSourceSettings.valueSortSettings.rowSortOrder?"Ascending":"Descending",rowHeaderText:this.pivotValues[e][h].valueSort.levelName},y.headerDelimiter=this.dataSourceSettings.valueSortSettings.headerDelimiter?this.dataSourceSettings.valueSortSettings.headerDelimiter:".",this.setProperties({dataSourceSettings:{valueSortSettings:y}},!0))):"olap"!==this.dataType&&"Server"!==this.dataSourceSettings.mode||this.setProperties({dataSourceSettings:{valueSortSettings:{columnIndex:Number(u.getAttribute("aria-colindex"))+Number(u.getAttribute("aria-colspan"))-1,sortOrder:"Descending"===this.dataSourceSettings.valueSortSettings.sortOrder?"Ascending":"Descending",headerText:this.pivotValues[e][h].valueSort.levelName,headerDelimiter:this.dataSourceSettings.valueSortSettings.headerDelimiter?this.dataSourceSettings.valueSortSettings.headerDelimiter:"."}}},!0),this.showWaitingPopup(),i=this,l.enableValueSorting=!0,i.enableVirtualization||i.enablePaging){if(i.dataSourceSettings.enableSorting){for(v=0,p=Object.keys(i.engineModule.fieldList);v<p.length;v++)it=p[v],i.engineModule.fieldList[it].sort="Ascending";i.setProperties({dataSourceSettings:{sortSettings:[]}},!0)}"Server"===i.dataSourceSettings.mode?i.getEngine("onValueSort",null,null,null,null,null,null):(i.engineModule.rMembers=i.engineModule.headerCollection.rowHeaders,i.engineModule.cMembers=i.engineModule.headerCollection.columnHeaders,i.engineModule.applyValueSorting(),i.engineModule.updateEngine())}else"Server"===i.dataSourceSettings.mode?i.getEngine("onValueSort",null,null,null,null,null,null):"olap"===this.dataType?i.olapEngineModule.onSort(i.dataSourceSettings,!0):i.engineModule.generateGridData(i.dataSourceSettings,!0);i.allowServerDataBinding=!1;i.setProperties({pivotValues:l.pivotValues},!0);i.allowServerDataBinding=!0;ut={valueSortInfo:l.valueSortSettings};this.actionObj.actionInfo=ut;i.renderPivotGrid()}}catch(t){this.actionFailureMethod(t)}}}},i.prototype.updateTotColWidth=function(){var n,t,i;for(this.totColWidth=0,n=0,t=this.pivotColumns;n<t.length;n++)i=t[n],this.totColWidth=this.totColWidth+i.width},i.prototype.framePivotColumns=function(n){for(var t,u,f,i=0,r=n;i<r.length;i++)t=r[i],t.columns&&t.columns.length>0?this.framePivotColumns(t.columns):(u="0.formattedText"===t.field?"":t.customAttributes&&t.customAttributes.cell&&t.customAttributes.cell.valueSort?t.customAttributes.cell.valueSort.levelName:"",f=this.renderModule.setSavedWidth("0.formattedText"===t.field?t.field:u,Number("auto"===t.width?t.minWidth:t.width)),this.pivotColumns.push({allowReordering:t.allowReordering,allowResizing:t.allowResizing,headerText:u,width:f,autoFit:t.autoFit}),this.totColWidth=this.totColWidth+Number(f))},i.prototype.setGridColumns=function(t){var r,u,i,e,o,f;if(!n.isNullOrUndefined(this.totColWidth)&&this.totColWidth>0||this.renderModule.isAutoFitEnabled){for(r=0,u=t;r<u.length;r++)i=u[r],i.columns&&i.columns.length>0?this.setGridColumns(i.columns):this.renderModule.isAutoFitEnabled?(i.autoFit=this.pivotColumns[this.posCount].autoFit,this.posCount++):(e="0.formattedText"===i.field?"":i.customAttributes?i.customAttributes.cell.valueSort.levelName:"",o=n.isNullOrUndefined(i.customAttributes)&&""===i.headerText?i.field:e,i.allowReordering=this.pivotColumns[this.posCount].allowReordering,i.allowResizing=this.pivotColumns[this.posCount].allowResizing,i.autoFit=this.pivotColumns[this.posCount].autoFit,f=this.renderModule.setSavedWidth(o,Number(this.pivotColumns[this.posCount].width)),i.autoFit?this.renderModule.isAutoFitEnabled=!0:"auto"!==i.width?i.width=f:i.minWidth=f,this.posCount++,i.allowReordering&&(this.gridSettings.allowReordering=!0),i.allowResizing&&(this.gridSettings.allowResizing=!0));this.gridSettings.allowReordering&&c.Grid.Inject(c.Reorder);this.gridSettings.allowResizing&&c.Grid.Inject(c.Resize)}},i.prototype.fillGridColumns=function(n){for(var t,i=0,r=n;i<r.length;i++)t=r[i],t.allowReordering=this.gridSettings.allowReordering,t.allowResizing=this.gridSettings.allowResizing,t.clipMode=this.gridSettings.clipMode,this.posCount++,t.columns&&t.columns.length>0&&this.fillGridColumns(t.columns)},i.prototype.triggerColumnRenderEvent=function(n){this.pivotColumns=[];this.totColWidth=0;this.framePivotColumns(n);var t=this.pivotColumns[0].width,i={columns:this.pivotColumns,dataSourceSettings:this.dataSourceSettings,stackedColumns:this.getStackedColumns(n,[])};this.trigger("beforeColumnsRender",i);this.updateTotColWidth();t!==this.pivotColumns[0].width&&(this.firstColWidth=this.pivotColumns[0].width,this.renderModule.resColWidth=parseInt(this.firstColWidth.toString(),10));this.posCount=0;this.setGridColumns(n)},i.prototype.setCommonColumnsWidth=function(n,t){for(var i,r=0,u=n;r<u.length;r++)i=u[r],this.isTabular?i.index>this.engineModule.rowMaxLevel?i.columns?this.setCommonColumnsWidth(i.columns,t):this.setColumnWidth(i,t):i.width=this.firstColWidth?this.firstColWidth:i.width:"0.formattedText"!==i.field?i.columns?this.setCommonColumnsWidth(i.columns,t):this.setColumnWidth(i,t):i.width=this.firstColWidth?this.firstColWidth:i.width},i.prototype.getHeightAsNumber=function(){var n,t;return isNaN(this.height)?this.height.toString().indexOf("%")>-1?(this.isAngular&&this.element&&this.element.style&&(t=window.getComputedStyle(this.element).display,this.element.style.display="block"),n=parseFloat(this.height.toString())/100*this.element.offsetHeight,this.isAngular&&this.element&&this.element.style&&(this.element.style.display=t)):this.height.toString().indexOf("px")>-1&&(n=Number(this.height.toString().split("px")[0])):n=Number(this.height),(n<this.minHeight||"auto"===this.height)&&(n=this.minHeight),n},i.prototype.getWidthAsNumber=function(){var n;return isNaN(this.width)?(this.width.toString().indexOf("%")>-1?n=parseFloat(this.width.toString())/100*this.element.offsetWidth:this.width.toString().indexOf("px")>-1&&(n=Number(this.width.toString().split("px")[0])),isNaN(n)&&(n=this.element.offsetWidth)):n=Number(this.width),n<400&&!this.isAdaptive?n=this.minWidth?this.minWidth:400:this.isAdaptive&&n<310&&(n=this.minWidth?this.minWidth:310),n},i.prototype.getGridWidthAsNumber=function(){var n,t=this.element.offsetWidth?this.element.offsetWidth:this.element.getBoundingClientRect().width;return isNaN(this.grid.width)?(this.grid.width.toString().indexOf("%")>-1?n=parseFloat(this.grid.width.toString())/100*t:this.grid.width.toString().indexOf("px")>-1&&(n=Number(this.grid.width.toString().split("px")[0])),isNaN(n)&&(n=t)):n=Number(this.grid.width),n},i.prototype.onWindowResize=function(){this.actionObj.actionName=io;this.isWindowResized=!0;this.actionBeginMethod()||(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.layoutRefresh.bind(this),500),this.actionObj.actionName=this.getActionCompleteName(),this.actionObj.actionName&&this.actionCompleteMethod())},i.prototype.refresh=function(){this.pivotRefresh()},i.prototype.layoutRefresh=function(){if(this.element&&this.element.classList.contains("e-pivotview")&&("olap"===this.dataType?this.olapEngineModule&&this.olapEngineModule.pivotValues:this.engineModule&&this.engineModule.pivotValues)){if(this.grid){var n="olap"===this.dataType&&this.olapEngineModule.pivotValues.length>0?this.olapEngineModule.pivotValues[0].length:this.dataSourceSettings.values.length>0&&this.engineModule&&this.engineModule.pivotValues.length>0?this.engineModule.pivotValues[0].length:2,t=this.renderModule.calculateColWidth(n);this.grid.width=this.renderModule.calculateGridWidth();this.renderModule.calculateGridHeight(!0);this.gridSettings.allowAutoResizing&&this.setCommonColumnsWidth(this.grid.columns,t);this.triggerColumnRenderEvent(this.grid.columns);this.grid.refreshColumns();this.renderModule.isAutoFitEnabled?this.renderModule.addPivotAutoFitClass():this.renderModule.removePivotAutoFitClass();this.showGroupingBar&&this.groupingBarModule&&this.element.querySelector("."+hi)&&this.groupingBarModule.setGridRowWidth();this.chart&&this.pivotChartModule&&(this.chart.height=this.pivotChartModule.getResizedChartHeight())}this.showToolbar&&this.toolbarModule&&this.toolbarModule.toolbar&&(this.toolbarModule.toolbar.width=this.grid?this.getGridWidthAsNumber():this.getWidthAsNumber());this.enablePaging&&this.notify(uh,this);this.chart&&(this.showToolbar&&"Chart"===this.currentView||!this.showToolbar)&&(this.chart.width=this.showToolbar&&this.grid||"Both"===this.displayOption.view&&this.grid?this.getGridWidthAsNumber().toString():this.getWidthAsNumber().toString(),this.chart.height=this.pivotChartModule.getResizedChartHeight(),"Chart"===this.displayOption.view&&this.showGroupingBar&&this.groupingBarModule&&this.element.querySelector("."+wf)&&this.groupingBarModule.refreshUI())}},i.prototype.cellClicked=function(t,i,r){var u=this;if(t.classList.contains(ws)&&(this.isPopupClicked=t.classList.contains(ps)?!1:!0),i&&!n.isNullOrUndefined(this.pivotValues)&&this.pivotValues.length>0){var e=parseInt(i.getAttribute("aria-colindex"),10)-1,f=Number(i.getAttribute("index")),o=Number(i.getAttribute("aria-colspan")),s={cancel:!1,isCellClick:!0,currentCell:i,data:this.pivotValues[f][e]};this.trigger(nh,s,function(n){!u.gridSettings.allowSelection||u.gridSettings.selectionSettings&&u.gridSettings.selectionSettings.enableSimpleMultiRowSelection||(("Both"===u.gridSettings.selectionSettings.mode?i.classList.contains(ce):"Row"===u.gridSettings.selectionSettings.mode)?u.clearSelection(i,r):n.cancel||(u.clearSelection(i,r),u.applyColumnSelection(r,i,e,e+(o>0?o-1:0),f)),"Column"===u.gridSettings.selectionSettings.mode||i.classList.contains(pu)||u.rowDeselect(i,r,f,u.gridSettings.selectionSettings.mode,n),"Column"===u.gridSettings.selectionSettings.mode||n.cancel||(("Multiple"===u.gridSettings.selectionSettings.type?r.ctrlKey||r.shiftKey:u.selectedRowIndex===f)?u.selectedRowIndex=void 0:(u.selectedRowIndex=f,u.grid.selectionModule.selectRow(f-u.renderModule.rowStartPos),i.classList.add("e-focused"))));u.cellClick&&n.isCellClick&&u.trigger("cellClick",{currentCell:i,data:u.pivotValues[f][e],nativeEvent:r});u.getSelectedCellsPos()})}else this.clearSelection(null,r)},i.prototype.rowDeselect=function(t,i,r,u,f){if((i.shiftKey||i.ctrlKey||"Both"===this.gridSettings.selectionSettings.mode)&&"Single"!==this.gridSettings.selectionSettings.type)(i.shiftKey||i.ctrlKey||"Both"===this.gridSettings.selectionSettings.mode)&&f.cancel&&(n.removeClass(this.element.querySelectorAll("."+ot),ot),n.removeClass(this.element.querySelectorAll("."+tt),tt),n.removeClass(this.element.querySelectorAll("."+it),it),this.setSavedSelectedCells());else if(t.classList.contains(ot)||t.classList.contains(tt)||t.classList.contains(it)){if(n.removeClass(this.element.querySelectorAll("."+ot),ot),n.removeClass(this.element.querySelectorAll("."+tt),tt),n.removeClass(this.element.querySelectorAll("."+it),it),f.cancel)this.setSavedSelectedCells();else if("Cell"===u)n.addClass([t],[ot]);else if("Row"===u||"Single"===this.gridSettings.selectionSettings.type){var e='[index="'+r+'"]';n.addClass(this.element.querySelectorAll(e),[tt,it]);"Row"!==u&&t.classList.add(ot)}}else f.cancel?this.setSavedSelectedCells():(n.removeClass(this.element.querySelectorAll("."+ot),ot),n.removeClass(this.element.querySelectorAll("."+tt),tt),n.removeClass(this.element.querySelectorAll("."+it),it))},i.prototype.clearSelection=function(t,i){var r,o,c,u,s,l,f,e,h,a;if((i.shiftKey||i.ctrlKey)&&"Single"!==this.gridSettings.selectionSettings.type){if("Both"===this.gridSettings.selectionSettings.mode&&"Multiple"===this.gridSettings.selectionSettings.type&&t.classList.contains(gi))for(u=0,s=[].slice.call(this.element.querySelectorAll("."+pu+"."+tt));u<s.length;u++)if(l=s[u],f=Number(l.getAttribute("aria-colindex")),f&&!isNaN(f))for(e=0,h=[].slice.call(this.element.querySelectorAll("[aria-colindex='"+f+"']:not(."+it+")"));e<h.length;e++)a=h[e],n.addClass([a],[it,tt])}else if("Cell"===this.gridSettings.selectionSettings.mode)t&&t.classList.contains(pu)?n.removeClass(this.element.querySelectorAll("."+ce+"."+ot),ot):n.removeClass(this.element.querySelectorAll("."+pu+"."+it),[it,tt]);else if("Both"===this.gridSettings.selectionSettings.mode)if(t&&t.classList.contains(ce))for(r=0,o=[].slice.call(this.element.querySelectorAll("."+tt+", ."+ot));r<o.length;r++)c=o[r],n.removeClass([c],[it,tt,ot]);else n.removeClass(this.element.querySelectorAll("."+ot),ot)},i.prototype.applyRowSelection=function(n,t,i){var u=this.engineModule.pivotValues[t][n],e,f,r;if(i.ctrlKey||i.shiftKey||!u||this.selectedRowIndex===t)this.selectedRowIndex=void 0;else{this.selectedRowIndex=t;e=u.level;f=t;do f++,u=this.engineModule.pivotValues[f][n];while(u&&e<u.level);r=this;this.isAdaptive?this.rowRangeSelection={enable:!0,startIndex:t-r.renderModule.rowStartPos,endIndex:f-(1+r.renderModule.rowStartPos)}:r.grid.selectionModule.selectRowsByRange(t-r.renderModule.rowStartPos,f-(1+r.renderModule.rowStartPos))}},i.prototype.applyColumnSelection=function(t,i,r,u,f){var o,h,w,e,b,k,c,d,l;if(!i.classList.contains(gi)&&("Cell"!==this.gridSettings.selectionSettings.mode||i.classList.contains(pu))){o=t.ctrlKey;this.isAdaptive&&"Multiple"===this.gridSettings.selectionSettings.type&&(this.grid.selectionModule.showPopup(t),this.isPopupClicked?(this.element.querySelector("."+ws).classList.add(ps),o=!0):(this.element.querySelector("."+ws).classList.remove(ps),o=!1));for(var nt=[],a=this.gridSettings.selectionSettings.type,v=i.classList.contains(it),s=[],y={},p=r;p<=u;p++)s.push(p.toString());if(o&&"Single"!==a)v=!1;else{for(h=0,w=[].slice.call(this.element.querySelectorAll("."+it+", ."+tt));h<w.length;h++)e=w[h],n.removeClass([e],[it,tt]),-1===s.indexOf((parseInt(e.getAttribute("aria-colindex"),10)-1).toString())&&(v=!1),b=parseInt(e.getAttribute("aria-colindex"),10)-1,y[b]=b;s=Object.keys(y).length>0?Object.keys(y).sort(function(n,t){return parseInt(n,10)-parseInt(t,10)}):s}if("Multiple"===a&&t.shiftKey?(this.shiftLockedPos=0===this.shiftLockedPos.length?s:this.shiftLockedPos,Number(this.shiftLockedPos[0])<=r?r=Number(this.shiftLockedPos[0]):u=u<Number(this.shiftLockedPos[this.shiftLockedPos.length-1])?Number(this.shiftLockedPos[this.shiftLockedPos.length-1]):u):this.shiftLockedPos=[],k=[],t.ctrlKey&&"Both"===this.gridSettings.selectionSettings.mode&&"Multiple"===a&&!i.classList.contains(gi))for(c=0,d=[].slice.call(this.element.querySelectorAll("."+gi+"."+ot+",."+gi+"."+tt));c<d.length;c++)e=d[c],k.push(e.getAttribute("index"));for(l=r;l<=u;)nt.push('[aria-colindex="'+(l+1)+'"]'+("Cell"===this.gridSettings.selectionSettings.mode?'[index="'+f+'"]':"")),l++;if(!v){f=i.classList.contains(ci)?f:this.renderModule.rowStartPos-1;for(var ut=i.classList.contains(it),g=0,rt=[].slice.call(this.element.querySelectorAll(nt.toString()));g<rt.length;g++)e=rt[g],Number(e.getAttribute("index"))>=f&&(ut&&o&&-1===k.indexOf(e.getAttribute("index"))?n.removeClass([e],[it,tt]):n.addClass([e],[it,tt]))}this.renderModule.selected()}},i.prototype.getSelectedCellsPos=function(){var t=this,i,u,n,r,f;for(t.savedSelectedCellsPos=[],t.cellSelectionPos=[],i=0,u=[].slice.call(this.element.querySelectorAll("."+tt));i<u.length;i++)n=u[i],t.savedSelectedCellsPos.push({rowIndex:n.getAttribute("index"),colIndex:(parseInt(n.getAttribute("aria-colindex"),10)-1).toString()});for(r=0,f=[].slice.call(this.element.querySelectorAll("."+ot));r<f.length;r++)n=f[r],t.cellSelectionPos.push({rowIndex:n.getAttribute("index"),colIndex:(parseInt(n.getAttribute("aria-colindex"),10)-1).toString()})},i.prototype.setSavedSelectedCells=function(){for(var t,r,u,e,i=0,f=[].slice.call(this.savedSelectedCellsPos);i<f.length;i++)t=f[i],r='[aria-colindex="'+(parseInt(t.colIndex,10)+1)+'"][index="'+t.rowIndex+'"]',n.addClass([this.element.querySelector(r)],[it,tt]);for(u=0,e=[].slice.call(this.cellSelectionPos);u<e.length;u++)t=e[u],r='[aria-colindex="'+(parseInt(t.colIndex,10)+1)+'"][index="'+t.rowIndex+'"]',n.addClass([this.element.querySelector(r)],[ot])},i.prototype.renderEmptyGrid=function(){var i=this,t;(this.isEmptyGrid=!0,this.notEmpty=!1,this.isInitial=!0,this.renderModule=this.renderModule?this.renderModule:new oa(this),this.grid&&this.grid.element&&this.element.querySelector("."+yt))?(this.notEmpty=!0,this.grid.setProperties({columns:this.renderModule.frameEmptyColumns(),dataSource:this.renderModule.frameEmptyData()},!0),this.grid.notify("datasource-modified",{}),this.grid.refreshColumns()):(this.element.querySelector("."+yt)&&n.remove(this.element.querySelector("."+yt)),this.renderModule.bindGrid(this,!0),this.grid.showSpinner=function(){},this.grid.hideSpinner=function(){},t=n.createElement("div",{id:this.element.id+"_grid"}),this.element.appendChild(t),this.grid.isStringTemplate=!0,this.grid.appendTo(t),this.grid.off("data-ready",this.grid.dataReady),this.grid.on("data-ready",function(){i.grid.scrollModule.setWidth();i.grid.scrollModule.setHeight()}))},i.prototype.initEngine=function(){var t=this,i,u,f;if((this.element.querySelector(".e-spin-hide")&&this.showWaitingPopup(),"pivot"===this.dataType)&&(i=!n.isNullOrUndefined(this.dataSourceSettings.dataSource)&&this.dataSourceSettings.dataSource.length>0?this.dataSourceSettings.dataSource[0]:n.isNullOrUndefined(this.engineModule.data)?void 0:this.engineModule.data[0],i&&this.pivotCommon)){if(u="[object Array]"===Object.prototype.toString.call(i),u&&"JSON"===this.dataSourceSettings.type)return void this.pivotCommon.errorDialog.createErrorDialog(this.localeObj.getConstant("error"),this.localeObj.getConstant("invalidJSON"));if(!u&&"CSV"===this.dataSourceSettings.type)return void this.pivotCommon.errorDialog.createErrorDialog(this.localeObj.getConstant("error"),this.localeObj.getConstant("invalidCSV"))}f={dataSourceSettings:r.getClonedDataSourceSettings(this.dataSourceSettings)};this.trigger(yi,f,function(n){var i,u,f;r.updateDataSourceSettings(t,n.dataSourceSettings);t.updatePageSettings(!1);i={mode:"",savedFieldList:void 0,pageSettings:t.pageSettings,enableValueSorting:t.enableValueSorting,isDrillThrough:t.allowDrillThrough||t.editSettings.allowEditing,localeObj:t.localeObj,fieldsType:t.fieldsType,clonedReport:t.clonedReport,globalize:t.globalize,currenyCode:t.currencyCode,enablePaging:t.enablePaging,enableVirtualization:t.enableVirtualization,allowDataCompression:t.allowDataCompression,enableHtmlSanitizer:t.enableHtmlSanitizer,enableOptimizedRendering:t.enableVirtualization&&t.virtualScrollSettings&&t.virtualScrollSettings.allowSinglePage,isTabularLayout:t.isTabular};"pivot"===t.dataType?(t.dataSourceSettings.groupSettings&&t.dataSourceSettings.groupSettings.length>0&&(u=t.engineModule.data,t.clonedDataSet=t.clonedDataSet?t.clonedDataSet:"CSV"===t.dataSourceSettings.type?r.getClonedCSVData(u):r.getClonedData(u),f=JSON.parse(t.getPersistData()).dataSourceSettings,f.dataSource=[],t.clonedReport=t.clonedReport?t.clonedReport:f),"Server"!==t.dataSourceSettings.mode&&t.engineModule.renderEngine(t.dataSourceSettings,i,t.aggregateCellInfo?t.getValueCellInfo.bind(t):void 0,t.onHeadersSort?t.getHeaderSortInfo.bind(t):void 0),t.allowServerDataBinding=!1,t.setProperties({pivotValues:t.engineModule.pivotValues},!0),t.allowServerDataBinding=!0,t.enginePopulatedEventMethod("initEngine")):"SSAS"===t.dataSourceSettings.providerType&&"olap"===t.dataType&&(i.savedFieldList=t.olapEngineModule.fieldList,i.savedFieldListData=t.olapEngineModule.fieldListData,r.renderOlapEngine(t,i),t.allowServerDataBinding=!1,t.setProperties({pivotValues:t.olapEngineModule.pivotValues},!0),t.allowServerDataBinding=!0,t.enginePopulatedEventMethod("initEngine"))})},i.prototype.enginePopulatedEventMethod=function(n,t){var r,i,u;"initEngine"===n?(r=t||this,this.trigger(pi,{pivotValues:this.pivotValues},function(n){"olap"===r.dataType?(r.olapEngineModule.pivotValues=n.pivotValues,r.setProperties({pivotValues:r.olapEngineModule.pivotValues},!0)):(r.engineModule.pivotValues=n.pivotValues,r.setProperties({pivotValues:r.engineModule.pivotValues},!0));r.notify(ti,{});r.notEmpty=!0})):(i=t||this,u={dataSourceSettings:i.dataSourceSettings,pivotValues:i.pivotValues},i.trigger(pi,u,function(n){i.dataSourceSettings=n.dataSourceSettings;"olap"===i.dataType?(i.olapEngineModule.pivotValues=n.pivotValues,i.allowServerDataBinding=!1,i.setProperties({pivotValues:i.olapEngineModule.pivotValues},!0),i.allowServerDataBinding=!0):(i.engineModule.pivotValues=n.pivotValues,i.allowServerDataBinding=!1,i.setProperties({pivotValues:i.engineModule.pivotValues},!0),i.allowServerDataBinding=!0);i.pivotCommon&&(i.pivotCommon.engineModule="olap"===i.dataType?i.olapEngineModule:i.engineModule,i.pivotCommon.dataSourceSettings=i.dataSourceSettings);i.renderPivotGrid()}))},i.prototype.generateData=function(){this.isStaticRefresh||("Chart"!==this.displayOption.view&&n.isNullOrUndefined(this.grid)?(this.renderEmptyGrid(),this.showWaitingPopup()):(this.showWaitingPopup(),clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.refreshData.bind(this),100)))},i.prototype.refreshData=function(){var t=this;t.isStaticRefresh?(t.isStaticRefresh=!1,t.hideWaitingPopup()):t.dataSourceSettings&&(t.dataSourceSettings.dataSource||t.dataSourceSettings.url)?t.dataSourceSettings.dataSource instanceof nt.DataManager?"pivot"===t.dataType&&t.remoteData.length>0?(this.element.querySelector(".e-spinner-pane")||this.showWaitingPopup(),this.engineModule.data=t.remoteData,this.initEngine()):n.isNullOrUndefined(t.engineModule.data)||0!==t.engineModule.data.length?t.initEngine():(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(t.getData.bind(t),100)):""!==this.dataSourceSettings.url&&"olap"===this.dataType||t.dataSourceSettings.dataSource&&t.dataSourceSettings.dataSource.length>0||this.engineModule.data&&this.engineModule.data.length>0?("pivot"===t.dataType&&(this.hideWaitingPopup(),t.engineModule.data=t.dataSourceSettings.dataSource),t.initEngine()):"Server"===this.dataSourceSettings.mode?this.getEngine("onRefresh"):(this.notify(ti,{}),this.hideWaitingPopup()):(this.notify(ti,{}),this.hideWaitingPopup())},i.prototype.getValueCellInfo=function(n){var t=n;return this.trigger(ol,t),t},i.prototype.getHeaderSortInfo=function(n){var t=n;return this.trigger(df,t),t},i.prototype.getBeforeServiceInvoke=function(n){return this.trigger(we,n),n},i.prototype.getAfterServiceInvoke=function(n){return this.trigger(be,n),n},i.prototype.bindTriggerEvents=function(n){this.trigger(c.getObject("name",n),n)},i.prototype.getData=function(){this.dataSourceSettings.dataSource.defaultQuery?this.dataSourceSettings.dataSource.executeQuery(this.dataSourceSettings.dataSource.defaultQuery).then(this.executeQuery.bind(this)):this.dataSourceSettings.dataSource.executeQuery(new nt.Query).then(this.executeQuery.bind(this))},i.prototype.executeQuery=function(t){this.element.querySelector(".e-spinner-pane")||this.showWaitingPopup();var i=this;i.engineModule.data=t.result;this.isEmptyGrid&&!n.isNullOrUndefined(i.engineModule.data)&&0===i.engineModule.data.length?this.hideWaitingPopup():!n.isNullOrUndefined(i.engineModule.data)&&i.engineModule.data.length>0?(this.isEmptyGrid=!1,i.initEngine()):(this.isEmptyGrid=!0,this.hideWaitingPopup(),this.renderEmptyGrid(),this.engineModule.fieldList=null,this.engineModule.isEmptyData=!0,this.pivotValues=[],this.engineModule.data=[],this.notify(ti,{}))},i.prototype.applyFormatting=function(t){var f,r,i,e;if(t){for(var s=[],h=t.length,u=0;u<h;u++)n.isNullOrUndefined(t[u])||void 0!==t[u][0]||s.push(u);for(u=0;u<t.length;u++)for(f=this.isTabular?this.engineModule.rowMaxLevel+1:1;t[u]&&f<t[u].length;f++)if("value"===t[u][f].axis&&""!==t[u][f].formattedText)for(t[u][f].style=void 0,t[u][f].cssClass=void 0,r=this.dataSourceSettings.conditionalFormatSettings,i=0;i<r.length;i++)!0!==r[i].applyGrandTotals&&!n.isNullOrUndefined(r[i].applyGrandTotals)&&t[u][f].isGrandSum||this.checkCondition(t[u][f].value,r[i].conditions,r[i].value1,r[i].value2)&&(r[i].measure&&t[u][f].actualText!==r[i].measure||void 0!==r[i].measure&&""===r[i].measure||void 0!==r[i].label&&""===r[i].label||!(!r[i].label||t[u][0].valueSort.levelName.indexOf(r[i].label)>-1||t[u][f].rowHeaders.indexOf(r[i].label)>-1||t[u][f].columnHeaders.indexOf(r[i].label)>-1)||(r[i].style&&r[i].style.backgroundColor&&(r[i].style.backgroundColor="#"===r[i].style.backgroundColor.charAt(0)&&this.conditionalFormattingModule.isHex(r[i].style.backgroundColor.substr(1))?r[i].style.backgroundColor:this.conditionalFormattingModule.colourNameToHex(r[i].style.backgroundColor)),r[i].style&&r[i].style.color&&(r[i].style.color="#"===r[i].style.color.charAt(0)&&this.conditionalFormattingModule.isHex(r[i].style.color.substr(1))?r[i].style.color:this.conditionalFormattingModule.colourNameToHex(r[i].style.color)),t[u][f].style=r[i].style,t[u][f].cssClass="format"+this.element.id+i));for(e=this.dataSourceSettings.conditionalFormatSettings,i=0;i<e.length;i++){var c=this.createStyleSheet.bind(this)(),l="color: "+e[i].style.color+"!important;background-color: "+e[i].style.backgroundColor+"!important;font-size: "+e[i].style.fontSize+"!important;font-family: "+e[i].style.fontFamily+" !important;",o=".format"+this.element.id+i;c.insertRule(o+", "+o+" .e-cellvalue{"+l+"}",0)}}},i.prototype.createStyleSheet=function(){var n=document.createElement("style");return n.textContent="",document.head.appendChild(n),n.sheet},i.prototype.applyHyperlinkSettings=function(){var u,f,r,s,h,c,o,l;if(this.pivotValues){for(var t=this.pivotValues,e=[],a=t.length,i=0;i<a;i++)!n.isNullOrUndefined(t[i])&&n.isNullOrUndefined(t[i][0])&&e.push(i);if(this.hyperlinkSettings.conditionalSettings.length>0)for(i=0;i<t.length;i++)for(u=this.isTabular?this.engineModule.rowMaxLevel+1:1;t[i]&&u<t[i].length;u++)if("value"===t[i][u].axis)for(t[i][u].enableHyperlink=!1,f=this.hyperlinkSettings.conditionalSettings,r=0;r<f.length;r++)this.checkCondition(t[i][u].value,f[r].conditions,f[r].value1,f[r].value2)&&(s="row"===this.dataSourceSettings.valueAxis?i:"pivot"===this.dataType?this.engineModule.headerContent.length-1:this.olapEngineModule.headerContent.length-1,h="row"===this.dataSourceSettings.valueAxis?0:u,(!f[r].measure||1===this.dataSourceSettings.values.length||t[s][h].valueSort&&t[s][h].actualText===f[r].measure)&&(!f[r].label||t[e[f[r].label.split(".").length-1]]&&t[e[f[r].label.split(".").length-1]][u]&&t[e[f[r].label.split(".").length-1]][u].valueSort&&t[e[f[r].label.split(".").length-1]][u].valueSort[f[r].label]||t[i][0].valueSort.levelName.indexOf(f[r].label)>-1)&&(t[i][u].enableHyperlink=!0));if(n.isNullOrUndefined(this.hyperlinkSettings.headerText))return;for(c=this.dataSourceSettings.valueSortSettings.headerDelimiter?this.dataSourceSettings.valueSortSettings.headerDelimiter:".",i=0;i<t.length;i++)for(u=this.isTabular?this.engineModule.rowMaxLevel+1:1;t[i]&&u<t[i].length;u++)if("value"===t[i][u].axis)if(o=this.hyperlinkSettings.headerText,t[i][0].valueSort.levelName.indexOf(o)>-1)t[i][0].enableHyperlink=!0,t[i][u].enableHyperlink=!0;else{for(l=!1,r=0;r<e.length;r++)o=c+this.hyperlinkSettings.headerText,(c+t[e[r]][u].valueSort.levelName).indexOf(o)>-1&&(t[e[r]][u].enableHyperlink=!0,l=!0);t[i][u].enableHyperlink=l}}},i.prototype.checkCondition=function(n,t,i,r){switch(t){case"LessThan":return n<i;case"LessThanOrEqualTo":return n<=i;case"GreaterThan":return n>i;case"GreaterThanOrEqualTo":return n>=i;case"Equals":return n===i;case"NotEquals":return n!==i;case"Between":return i<r&&n>=i&&n<=r||i>r&&n<=i&&n>=r;case"NotBetween":return!(i<r&&n>=i&&n<=r||i>r&&n<=i&&n>=r);default:return!1}},i.prototype.updateGroupingReport=function(t,i){var k,d,w,nt,v,b;this.clonedDataSet||this.clonedReport||(k=this.engineModule.data,this.clonedDataSet="CSV"===this.dataSourceSettings.type?r.getClonedCSVData(k):r.getClonedData(k),d=JSON.parse(this.getPersistData()).dataSourceSettings,d.dataSource=[],this.clonedReport=this.clonedReport?this.clonedReport:d);var ft=/_date_group_years|_date_group_quarters|_date_group_quarterYear|_date_group_months|_date_group_days|_date_group_hours|_date_group_minutes|_date_group_seconds/g,ct="CSV"===this.dataSourceSettings.type?r.getClonedCSVData(this.clonedDataSet):r.getClonedData(this.clonedDataSet),e=this.dataSourceSettings,h=this.clonedReport.properties?this.clonedReport.properties:this.clonedReport,s=[e.rows,e.columns,e.values,e.filters],o=[e.filterSettings,e.sortSettings,e.formatSettings,e.drilledMembers],l=h.rows;if(l=l.concat(h.columns,h.values,h.filters),0===t.length||t.length>0){this.engineModule.groupingFields={};this.setProperties({dataSourceSettings:{dataSource:ct,groupSettings:t.length>0?e.groupSettings:[]}},!0);for(var y,et="Date"===i,a=[],u=0,g=s.length;u<g;u++)for(var ot,st,lt=function(t,i){var f=s[u][t].name,v,h,c,o;if(-1===a.indexOf(f)&&a.push(f),v=a.indexOf(f),(n.isNullOrUndefined(f.match(ft))||!et)&&(-1===f.indexOf("_custom_group")||r.getFieldByName(f.replace("_custom_group",""),e.groupSettings)))(o=r.getFieldByName(f,l))?s[u].splice(t,1,o):y===f&&s[u].splice(t,1);else{for(s[u].splice(t,1),a.splice(v,1),t--,i--,f=f.split("_")[0],h=!1,c=0;c<s.length&&!(h=s[c].filter(function(n){return n.name===f}).length>0);c++);h||(y=f.split("_")[0],o=r.getFieldByName(y,l),l=l.filter(function(n){return n.name!==y}),a.push(y),o&&(h?s[u].splice(t,1,o):s[u].splice(++t,0,o)))}ot=t;st=i},f=0,c=s[u].length;f<c;f++)lt(f,c),f=ot,c=st;for(w=0,nt=a;w<nt.length;w++){var p=nt[w],tt=r.getFilterItemByName(p,h.filterSettings),it=r.getFieldByName(p,h.sortSettings),rt=r.getFieldByName(p,h.formatSettings),ut=r.getFieldByName(p,h.drilledMembers),ht=[tt,it,rt,ut];for(u=0,g=o.length;u<g;u++){for(v=!1,f=0,c=o[u].length;f<c;f++)if(b=o[u][f].name,(n.isNullOrUndefined(b.match(ft))||!et)&&(-1===b.indexOf("_custom_group")||r.getFieldByName(b.replace("_custom_group",""),e.groupSettings))){if(p===o[u][f].name){v=!0;ht[u]?o[u].splice(f,1,ht[u]):(o[u].splice(f,1),f--,c--);break}}else o[u].splice(f,1),f--,c--;!v&&0===u&&tt&&o[u].push(tt);!v&&1===u&&it&&o[u].push(it);!v&&2===u&&rt&&o[u].push(rt);!v&&3===u&&ut&&o[u].push(ut)}}}},i.prototype.removeButtonFocus=function(){document.querySelectorAll(".e-btn-focused")&&n.removeClass(document.querySelectorAll(".e-btn-focused"),"e-btn-focused")},i.prototype.wireEvents=function(){var t=this.virtualScrollSettings&&this.virtualScrollSettings.allowSinglePage&&"pivot"===this.dataType;"Chart"!==this.displayOption.view&&(n.EventHandler.add(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler,this),n.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),n.EventHandler.add(this.element.querySelector("."+lf),"mousemove",this.mouseMoveHandler,this),n.EventHandler.add(this.element,"mouseup",this.mouseUpHandler,this),n.EventHandler.add(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler,this),this.virtualscrollModule&&this.enableVirtualization&&!t&&n.EventHandler.add(this.element.querySelector("."+at).querySelector("."+ct),"scroll",this.headerScrollUpdate,this));n.EventHandler.add(document,this.isAdaptive?"touchend":"click",this.removeButtonFocus,this);window.addEventListener("resize",this.onWindowResize.bind(this),!0)},i.prototype.headerScrollUpdate=function(){this.element.querySelector("."+ai).scrollLeft!==this.element.querySelector("."+at).querySelector("."+ct).scrollLeft&&(this.virtualscrollModule.direction="horizondal");this.element.querySelector("."+ai).scrollLeft=this.element.querySelector("."+at).querySelector("."+ct).scrollLeft},i.prototype.unwireEvents=function(){"Chart"!==this.displayOption.view&&(n.EventHandler.remove(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler),n.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),this.element.querySelector("."+lf)&&n.EventHandler.remove(this.element.querySelector("."+lf),"mousemove",this.mouseMoveHandler),n.EventHandler.remove(this.element,"mouseup",this.mouseUpHandler),n.EventHandler.remove(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler),this.virtualscrollModule&&this.enableVirtualization&&this.element.querySelector("."+at)&&n.EventHandler.remove(this.element.querySelector("."+at).querySelector("."+ct),"scroll",this.headerScrollUpdate));n.EventHandler.remove(document,this.isAdaptive?"touchend":"click",this.removeButtonFocus);window.removeEventListener("resize",this.onWindowResize.bind(this),!0)},i.prototype.actionBeginMethod=function(){this.actionObj.actionName!==io&&(this.renderModule&&(this.renderModule.selectedCells=[]),this.isWindowResized=!1);var n={dataSourceSettings:r.getClonedDataSourceSettings(this.dataSourceSettings),actionName:this.actionObj.actionName,fieldInfo:this.actionObj.fieldInfo,cancel:!1};return this.trigger(cl,n),n.cancel},i.prototype.actionCompleteMethod=function(){var n={dataSourceSettings:r.getClonedDataSourceSettings(this.dataSourceSettings),actionName:this.actionObj.actionName,fieldInfo:this.actionObj.fieldInfo,actionInfo:this.actionObj.actionInfo};this.trigger(rh,n);this.actionObj.actionName="";this.actionObj.actionInfo=void 0;this.actionObj.fieldInfo=void 0},i.prototype.actionFailureMethod=function(n){var t={actionName:this.actionObj.actionName,errorInfo:n};this.trigger(ll,t)},i.prototype.getActionCompleteName=function(){var n;switch(this.actionObj.actionName){case pl:case kl:n="Conditional formatting applied";break;case wl:case bl:n="Number formatting applied";break;case"Show table view":n="Table view shown";break;case"Show chart view":n="Chart view shown";break;case"Hide sub-totals":n="Sub-totals hidden";break;case"Show row sub-totals":n="Row sub-totals shown";break;case"Show column sub-totals":n="Column sub-totals shown";break;case"Show sub-totals":n="Sub-totals shown";break;case"Hide grand totals":n="Grand totals hidden";break;case"Show row grand totals":n="Row grand totals shown";break;case"Show column grand totals":n="Column grand totals shown";break;case"Show grand totals":n="Grand totals shown";break;case yl:n="Value sorted";break;case oh:n=sh;break;case ge:n=hh;break;case fh:n=ra;break;case eh:n=ch;break;case no:n=ua;break;case to:n=fa;break;case gl:n="Record edited";break;case"Report change":n="Report changed";break;case na:n="Edited records saved";break;case ta:n="New record added";break;case ia:n="Record removed";break;case"PNG export":n="PNG exported";break;case"JPEG export":n="JPEG exported";break;case"SVG export":n="SVG exported";break;case"PDF export":n="PDF exported";break;case"CSV export":n="CSV exported";break;case"Excel export":n="Excel exported";break;case io:n="Window resized";break;case"Save current report":n="Report saved";break;case"Add new report":n="New report added";break;case"Save as current report":n="Report re-saved";break;case"Rename current report":n="Report renamed";break;case vl:n="Horizontally scrolled";break;case al:n="Vertically scrolled";break;case"Navigate row page":n="Row page navigated";break;case"Navigate column page":n="Column page navigated";break;default:n=this.actionObj.actionName}return n},i.prototype.getStackedColumns=function(n,t){for(var i,r=0,u=n;r<u.length;r++)i=u[r],t.push(i),i.columns&&i.columns.length>0&&this.getStackedColumns(i.columns,t);return t},i.prototype.destroy=function(){this.removeInternalEvents();this.engineModule&&(this.engineModule.fieldList={},this.engineModule.rMembers=null,this.engineModule.cMembers=null,this.engineModule.valueMatrix=[],this.engineModule={});this.olapEngineModule&&(this.olapEngineModule.fieldList={},this.olapEngineModule={});this.showGroupingBar&&this.groupingBarModule&&this.groupingBarModule.destroy();this.allowGrouping&&this.groupingModule&&this.groupingModule.destroy();this.showToolbar&&this.toolbarModule&&this.toolbarModule.destroy();this.enablePaging&&this.pagerModule&&this.pagerModule.destroy();this.enableVirtualization&&this.virtualscrollModule&&this.virtualscrollModule.destroy();this.allowConditionalFormatting&&this.conditionalFormattingModule&&this.conditionalFormattingModule.destroy();this.allowNumberFormatting&&this.numberFormattingModule&&this.numberFormattingModule.destroy();this.contextMenuModule&&this.contextMenuModule.destroy();this.keyboardModule&&this.keyboardModule.destroy();this.tooltip&&!this.tooltip.isDestroyed&&this.tooltip.destroy();this.calculatedFieldModule&&this.calculatedFieldModule.destroy();this.chart&&!this.chart.isDestroyed&&(this.chart.destroy(),this.chart.isDestroyed&&n.select("#"+this.element.id+"_chart",this.element)&&n.remove(n.select("#"+this.element.id+"_chart",this.element)));this.grid&&!this.grid.isDestroyed&&(this.grid.destroy(),this.grid.isDestroyed&&n.select("#"+this.element.id+"_grid",this.element)&&n.remove(n.select("#"+this.element.id+"_grid",this.element)));this.commonModule&&this.commonModule.destroy();this.pivotChartModule&&this.pivotChartModule.destroy();this.pivotButtonModule&&!this.pivotButtonModule.isDestroyed&&this.pivotButtonModule.destroy();this.pivotFieldListModule&&!this.pivotFieldListModule.isDestroyed&&(this.pivotFieldListModule.destroy(),this.pivotFieldListModule.isDestroyed&&null!==n.select("#"+this.element.id+"_PivotFieldList",this.element)&&n.remove(n.select("#"+this.element.id+"_PivotFieldList",this.element)),this.pivotFieldListModule.element.remove(),this.pivotFieldListModule.element=null);this.fieldListModule&&(this.fieldListModule.element=null);(this.allowDrillThrough||this.editSettings&&this.editSettings.allowEditing)&&this.drillThroughModule&&this.drillThroughModule.destroy();this.chartExportModule&&this.chartExportModule.destroy();this.unwireEvents();t.prototype.destroy.call(this);this.groupingBarModule&&(this.groupingBarModule=null);this.groupingModule&&(this.groupingModule=null);this.pivotFieldListModule&&(this.pivotFieldListModule=null);this.calculatedFieldModule&&(this.calculatedFieldModule=null);this.conditionalFormattingModule&&(this.conditionalFormattingModule=null);this.numberFormattingModule&&(this.numberFormattingModule=null);this.toolbarModule&&(this.toolbarModule=null);this.pagerModule&&(this.pagerModule=null);this.virtualscrollModule&&(this.virtualscrollModule=null);this.contextMenuModule&&(this.contextMenuModule=null);this.keyboardModule&&(this.keyboardModule=null);this.tooltip&&(this.tooltip=null);this.chart&&(this.chart=null);this.grid&&(this.grid=null);this.commonModule&&(this.commonModule=null);this.pivotChartModule&&(this.pivotChartModule=null);this.pivotButtonModule&&(this.pivotButtonModule=null);this.renderModule&&(this.renderModule=null);this.axisFieldModule&&(this.axisFieldModule=null);this.pdfExportModule&&(this.pdfExportModule=null);this.excelExportModule&&(this.excelExportModule=null);this.drillThroughModule&&(this.drillThroughModule=null);this.clonedDataSet&&(this.clonedDataSet=null);this.clonedReport&&(this.clonedReport=null);this.pagerModule&&(this.pagerModule=null);this.chartExportModule&&(this.chartExportModule=null);this.exportSpecifiedPages&&(this.exportSpecifiedPages=void 0);this.element.innerHTML="";n.removeClass([this.element],co);n.removeClass([this.element],fi);n.removeClass([this.element],ar);this.globalize=null;this.localeObj=null;this.currentView=null;this.fieldListSpinnerElement=null;this.lastSortInfo=null;this.lastFilterInfo=null;this.lastAggregationInfo=null;this.lastCalcFieldInfo=null;this.lastCellClicked=null;this.lastColumn=null;this.pivotCommon=null;this.virtualDiv=null;this.virtualHeaderDiv=null;this.virtualScrollDiv=null;this.virtualTableDiv=null;this.lastSelectedElement=null},i.prototype.showNumberFormattingDialog=function(){this.allowNumberFormatting&&this.numberFormattingModule.showNumberFormattingDialog()},i.prototype.getValuesHeader=function(t,i){var r=this.dataSourceSettings.values;return"value"===i&&!n.isNullOrUndefined(t.valueSort)&&this.localeObj.getConstant("grandTotal")+this.dataSourceSettings.valueSortSettings.headerDelimiter+t.formattedText===t.valueSort.levelName&&("column"===t.axis&&0===this.dataSourceSettings.columns.length&&"column"===this.dataSourceSettings.valueAxis||"row"===t.axis&&0===this.dataSourceSettings.rows.length&&"row"===this.dataSourceSettings.valueAxis)?this.localeObj.getConstant("total")+" "+this.localeObj.getConstant(this.engineModule.fieldList[t.actualText].aggregateType)+" "+this.localeObj.getConstant("of")+" "+t.formattedText:"grandTotal"===i&&1===r.length&&"row"===this.dataSourceSettings.valueAxis&&t.formattedText===this.localeObj.getConstant("grandTotal")?this.localeObj.getConstant("total")+" "+this.localeObj.getConstant(r[r.length-1].type)+" "+this.localeObj.getConstant("of")+" "+(n.isNullOrUndefined(r[r.length-1].caption)?r[r.length-1].name:r[r.length-1].caption):t.formattedText},i.prototype.setColumnWidth=function(n,t){n.autoFit||("auto"!==n.width?n.width=this.renderModule.lastColumn&&n.field===this.renderModule.lastColumn.field?t-3:t:n.minWidth=t)},u([n.Property("USD")],i.prototype,"currencyCode",void 0),u([n.Property(!1)],i.prototype,"showFieldList",void 0),u([n.Complex({},uy)],i.prototype,"gridSettings",void 0),u([n.Complex({},kp)],i.prototype,"chartSettings",void 0),u([n.Complex({},nw)],i.prototype,"groupingBarSettings",void 0),u([n.Complex({},rw)],i.prototype,"hyperlinkSettings",void 0),u([n.Complex({},uw)],i.prototype,"pageSettings",void 0),u([n.Complex({},fw)],i.prototype,"pagerSettings",void 0),u([n.Complex({},ca)],i.prototype,"dataSourceSettings",void 0),u([n.Complex({},tw)],i.prototype,"editSettings",void 0),u([n.Complex({},ew)],i.prototype,"displayOption",void 0),u([n.Complex({},ow)],i.prototype,"virtualScrollSettings",void 0),u([n.Property()],i.prototype,"pivotValues",void 0),u([n.Property(!1)],i.prototype,"showGroupingBar",void 0),u([n.Property(!0)],i.prototype,"showTooltip",void 0),u([n.Property(!1)],i.prototype,"showToolbar",void 0),u([n.Property([])],i.prototype,"toolbar",void 0),u([n.Property(!1)],i.prototype,"showValuesButton",void 0),u([n.Property(!1)],i.prototype,"allowCalculatedField",void 0),u([n.Property(!1)],i.prototype,"enableFieldSearching",void 0),u([n.Property(!1)],i.prototype,"enableValueSorting",void 0),u([n.Property(!1)],i.prototype,"allowConditionalFormatting",void 0),u([n.Property(!1)],i.prototype,"allowNumberFormatting",void 0),u([n.Property("auto")],i.prototype,"height",void 0),u([n.Property("auto")],i.prototype,"width",void 0),u([n.Property(!1)],i.prototype,"allowExcelExport",void 0),u([n.Property(!1)],i.prototype,"enableVirtualization",void 0),u([n.Property(!1)],i.prototype,"enablePaging",void 0),u([n.Property(!1)],i.prototype,"allowDrillThrough",void 0),u([n.Property(!1)],i.prototype,"allowPdfExport",void 0),u([n.Property(!1)],i.prototype,"allowDeferLayoutUpdate",void 0),u([n.Property(!1)],i.prototype,"allowDataCompression",void 0),u([n.Property(1e3)],i.prototype,"maxNodeLimitInMemberEditor",void 0),u([n.Property(1e4)],i.prototype,"maxRowsInDrillThrough",void 0),u([n.Property(!0)],i.prototype,"loadOnDemandInMemberEditor",void 0),u([n.Property(!1)],i.prototype,"enableHtmlSanitizer",void 0),u([n.Property()],i.prototype,"cellTemplate",void 0),u([n.Property()],i.prototype,"toolbarTemplate",void 0),u([n.Property()],i.prototype,"tooltipTemplate",void 0),u([n.Property()],i.prototype,"spinnerTemplate",void 0),u([n.Property(!1)],i.prototype,"allowGrouping",void 0),u([n.Property(!0)],i.prototype,"exportAllPages",void 0),u([n.Property(["Sum","Count","DistinctCount","Product","Min","Max","Avg","Median","Index","PopulationVar","SampleVar","PopulationStDev","SampleStDev","RunningTotals","PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"])],i.prototype,"aggregateTypes",void 0),u([n.Property(["Column","Bar","Line","Area","Scatter","Polar","StackingColumn","StackingArea","StackingBar","StackingLine","StepLine","StepArea","SplineArea","Spline","StackingColumn100","StackingBar100","StackingArea100","StackingLine100","Bubble","Pareto","Radar","Pie","Doughnut","Funnel","Pyramid"])],i.prototype,"chartTypes",void 0),u([n.Property("")],i.prototype,"cssClass",void 0),u([n.Event()],i.prototype,"queryCellInfo",void 0),u([n.Event()],i.prototype,"headerCellInfo",void 0),u([n.Event()],i.prototype,"resizing",void 0),u([n.Event()],i.prototype,"resizeStop",void 0),u([n.Event()],i.prototype,"pdfHeaderQueryCellInfo",void 0),u([n.Event()],i.prototype,"pdfQueryCellInfo",void 0),u([n.Event()],i.prototype,"excelHeaderQueryCellInfo",void 0),u([n.Event()],i.prototype,"excelQueryCellInfo",void 0),u([n.Event()],i.prototype,"columnDragStart",void 0),u([n.Event()],i.prototype,"columnDrag",void 0),u([n.Event()],i.prototype,"columnDrop",void 0),u([n.Event()],i.prototype,"beforePdfExport",void 0),u([n.Event()],i.prototype,"beforeExcelExport",void 0),u([n.Event()],i.prototype,"beforeColumnsRender",void 0),u([n.Event()],i.prototype,"selected",void 0),u([n.Event()],i.prototype,"selecting",void 0),u([n.Event()],i.prototype,"cellDeselected",void 0),u([n.Event()],i.prototype,"rowSelected",void 0),u([n.Event()],i.prototype,"rowDeselected",void 0),u([n.Event()],i.prototype,"chartTooltipRender",void 0),u([n.Event()],i.prototype,"chartLegendClick",void 0),u([n.Event()],i.prototype,"beforePrint",void 0),u([n.Event()],i.prototype,"animationComplete",void 0),u([n.Event()],i.prototype,"legendRender",void 0),u([n.Event()],i.prototype,"textRender",void 0),u([n.Event()],i.prototype,"pointRender",void 0),u([n.Event()],i.prototype,"seriesRender",void 0),u([n.Event()],i.prototype,"chartMouseMove",void 0),u([n.Event()],i.prototype,"chartMouseClick",void 0),u([n.Event()],i.prototype,"pointMove",void 0),u([n.Event()],i.prototype,"chartMouseLeave",void 0),u([n.Event()],i.prototype,"chartMouseDown",void 0),u([n.Event()],i.prototype,"chartMouseUp",void 0),u([n.Event()],i.prototype,"dragComplete",void 0),u([n.Event()],i.prototype,"zoomComplete",void 0),u([n.Event()],i.prototype,"scrollStart",void 0),u([n.Event()],i.prototype,"scrollEnd",void 0),u([n.Event()],i.prototype,"scrollChanged",void 0),u([n.Event()],i.prototype,"multiLevelLabelRender",void 0),u([n.Event()],i.prototype,"chartLoaded",void 0),u([n.Event()],i.prototype,"chartLoad",void 0),u([n.Event()],i.prototype,"chartResized",void 0),u([n.Event()],i.prototype,"chartAxisLabelRender",void 0),u([n.Event()],i.prototype,"multiLevelLabelClick",void 0),u([n.Event()],i.prototype,"chartPointClick",void 0),u([n.Event()],i.prototype,"contextMenuClick",void 0),u([n.Event()],i.prototype,"contextMenuOpen",void 0),u([n.Event()],i.prototype,"onPdfCellRender",void 0),u([n.Event()],i.prototype,"saveReport",void 0),u([n.Event()],i.prototype,"fetchReport",void 0),u([n.Event()],i.prototype,"loadReport",void 0),u([n.Event()],i.prototype,"renameReport",void 0),u([n.Event()],i.prototype,"removeReport",void 0),u([n.Event()],i.prototype,"newReport",void 0),u([n.Event()],i.prototype,"toolbarRender",void 0),u([n.Event()],i.prototype,"toolbarClick",void 0),u([n.Event()],i.prototype,"load",void 0),u([n.Event()],i.prototype,"enginePopulating",void 0),u([n.Event()],i.prototype,"enginePopulated",void 0),u([n.Event()],i.prototype,"onFieldDropped",void 0),u([n.Event()],i.prototype,"fieldDrop",void 0),u([n.Event()],i.prototype,"fieldDragStart",void 0),u([n.Event()],i.prototype,"dataBound",void 0),u([n.Event()],i.prototype,"created",void 0),u([n.Event()],i.prototype,"destroyed",void 0),u([n.Event()],i.prototype,"beforeExport",void 0),u([n.Event()],i.prototype,"exportComplete",void 0),u([n.Event()],i.prototype,"conditionalFormatting",void 0),u([n.Event()],i.prototype,"memberFiltering",void 0),u([n.Event()],i.prototype,"cellClick",void 0),u([n.Event()],i.prototype,"drillThrough",void 0),u([n.Event()],i.prototype,"editCompleted",void 0),u([n.Event()],i.prototype,"beginDrillThrough",void 0),u([n.Event()],i.prototype,"hyperlinkCellClick",void 0),u([n.Event()],i.prototype,"cellSelecting",void 0),u([n.Event()],i.prototype,"drill",void 0),u([n.Event()],i.prototype,"cellSelected",void 0),u([n.Event()],i.prototype,"chartSeriesCreated",void 0),u([n.Event()],i.prototype,"aggregateCellInfo",void 0),u([n.Event()],i.prototype,"fieldListRefreshed",void 0),u([n.Event()],i.prototype,"memberEditorOpen",void 0),u([n.Event()],i.prototype,"calculatedFieldCreate",void 0),u([n.Event()],i.prototype,"numberFormatting",void 0),u([n.Event()],i.prototype,"aggregateMenuOpen",void 0),u([n.Event()],i.prototype,"fieldRemove",void 0),u([n.Event()],i.prototype,"beforeServiceInvoke",void 0),u([n.Event()],i.prototype,"afterServiceInvoke",void 0),u([n.Event()],i.prototype,"actionBegin",void 0),u([n.Event()],i.prototype,"actionComplete",void 0),u([n.Event()],i.prototype,"actionFailure",void 0),u([n.Event()],i.prototype,"onHeadersSort",void 0),u([n.NotifyPropertyChanges],i)}(n.Component);ejdashboard.excelexport;var sw=function(){function t(n){this.parent=n}return t.prototype.render=function(){var t=n.createElement("div",{id:this.parent.element.id+"_Container",className:lo+" "+("olap"===this.parent.dataType?"e-olapfieldlist-container":""),styles:"width:"+this.parent.element.style.width});this.parent.isAdaptive?n.addClass([t],ar):n.removeClass([t],ar);this.parent.enableRtl?n.addClass([t],fi):n.removeClass([t],fi);this.parent.cssClass&&n.addClass([t],this.parent.cssClass.split(" "));this.parent.enableFieldSearching?n.addClass([t],yh):n.removeClass([t],yh);this.parentElement=n.createElement("div",{className:"e-field-list-container"});this.parent.element.appendChild(t);this.parent.isAdaptive&&(t.removeAttribute("style"),this.parentElement=n.createElement("div",{className:"e-adaptive-container"}),this.renderAdaptiveLayout(t));"Popup"===this.parent.renderMode?(this.renderFieldListDialog(t),this.unWireDialogEvent(this.parent.element.querySelector("."+st)),this.wireDialogEvent(this.parent.element.querySelector("."+st))):this.renderStaticLayout(t)},t.prototype.renderStaticLayout=function(t){if(!this.parent.isAdaptive){var i=n.createElement("div",{className:"e-field-list-title"}),r=n.createElement("div",{className:"e-title-content"});r.innerText=this.parent.localeObj.getConstant("staticFieldList");i.appendChild(r);i.appendChild(this.createCalculatedButton());n.addClass([t],ao);t.appendChild(i);t.appendChild(this.parentElement);n.addClass([t],ao);this.parent.allowDeferLayoutUpdate&&(t.appendChild(this.createDeferUpdateButtons()),this.renderDeferUpdateButtons(t))}},t.prototype.renderDeferUpdateButtons=function(t){this.parent.allowDeferLayoutUpdate&&(this.deferUpdateCheckBox=new ut.CheckBox({label:this.parent.localeObj.getConstant("deferLayoutUpdate"),checked:this.parent.isPopupView&&this.parent.pivotGridModule?!!n.isNullOrUndefined(this.parent.pivotGridModule.pivotDeferLayoutUpdate)||this.parent.pivotGridModule.pivotDeferLayoutUpdate:!!n.isNullOrUndefined(this.parent.isDeferLayoutUpdate)||this.parent.isDeferLayoutUpdate,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,change:this.onCheckChange.bind(this),cssClass:this.parent.cssClass}),this.deferUpdateCheckBox.isStringTemplate=!0,this.deferUpdateCheckBox.appendTo(n.select("#"+this.parent.element.id+"DeferUpdateCheckBox",t)),this.deferUpdateApplyButton=new ut.Button({cssClass:"e-defer-apply-button e-defer-update-btn"+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("apply"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,isPrimary:!0,disabled:this.parent.isPopupView&&this.parent.pivotGridModule?!n.isNullOrUndefined(this.parent.pivotGridModule.pivotDeferLayoutUpdate)&&!this.parent.pivotGridModule.pivotDeferLayoutUpdate:!n.isNullOrUndefined(this.parent.isDeferLayoutUpdate)&&!this.parent.isDeferLayoutUpdate}),this.deferUpdateApplyButton.isStringTemplate=!0,this.deferUpdateApplyButton.appendTo(n.select("#"+this.parent.element.id+"_DeferUpdateButton1",t)),this.deferUpdateApplyButton.element.onclick="Fixed"===this.parent.renderMode?this.applyButtonClick.bind(this):this.onDeferUpdateClick.bind(this));this.deferUpdateCancelButton=new ut.Button({cssClass:"e-defer-cancel-button "+cu+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.allowDeferLayoutUpdate?this.parent.localeObj.getConstant("cancel"):this.parent.localeObj.getConstant("close"),enableRtl:this.parent.enableRtl,isPrimary:!this.parent.allowDeferLayoutUpdate,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,disabled:this.parent.isPopupView&&this.parent.pivotGridModule&&this.parent.pivotGridModule.refreshing?!(!this.parent.allowDeferLayoutUpdate||n.isNullOrUndefined(this.parent.pivotGridModule.pivotDeferLayoutUpdate)||this.parent.pivotGridModule.pivotDeferLayoutUpdate):!(!this.parent.refreshing||n.isNullOrUndefined(this.parent.isDeferLayoutUpdate)||!this.parent.allowDeferLayoutUpdate||this.parent.isDeferLayoutUpdate)});this.deferUpdateCancelButton.isStringTemplate=!0;this.deferUpdateCancelButton.appendTo(n.select("#"+this.parent.element.id+"_DeferUpdateButton2",t));this.parent.allowDeferLayoutUpdate&&(!this.parent.isDeferLayoutUpdate&&"Popup"===this.parent.renderMode&&this.parent.refreshing||this.parent.isPopupView&&this.parent.pivotGridModule&&!this.parent.pivotGridModule.pivotDeferLayoutUpdate&&this.parent.pivotGridModule.refreshing)&&(this.deferUpdateApplyButton.element.style.display="none",this.deferUpdateCancelButton.setProperties({content:this.parent.localeObj.getConstant("close")}),this.deferUpdateCancelButton.isPrimary=!0,this.deferUpdateApplyButton.disabled=this.parent.isPopupView?this.parent.pivotGridModule.pivotDeferLayoutUpdate:this.parent.isDeferLayoutUpdate,this.deferUpdateCancelButton.disabled=this.parent.isPopupView?this.parent.pivotGridModule.pivotDeferLayoutUpdate:this.parent.isDeferLayoutUpdate);this.deferUpdateCancelButton.element.onclick=this.onCloseFieldList.bind(this)},t.prototype.createDeferUpdateButtons=function(){var i=n.createElement("div",{className:"e-layout-footer"}),r,u,t,f,e;return this.parent.allowDeferLayoutUpdate&&(r=n.createElement("div",{className:"e-checkbox-layout",attrs:{title:this.parent.localeObj.getConstant("deferLayoutUpdate")}}),u=n.createElement("input",{id:this.parent.element.id+"DeferUpdateCheckBox"}),r.appendChild(u),i.appendChild(r)),t=n.createElement("div",{className:"e-button-layout"}),this.parent.allowDeferLayoutUpdate&&(f=n.createElement("button",{id:this.parent.element.id+"_DeferUpdateButton1",attrs:{type:"button",title:this.parent.localeObj.getConstant("apply")}}),t.appendChild(f)),e=n.createElement("button",{id:this.parent.element.id+"_DeferUpdateButton2",attrs:{type:"button",title:this.parent.localeObj.getConstant("cancel")}}),t.appendChild(e),i.appendChild(t),i},t.prototype.onCheckChange=function(n){n.checked&&(this.parent.clonedDataSource=r.getClonedDataSourceSettings(this.parent.dataSourceSettings),"olap"===this.parent.dataType&&(this.parent.clonedFieldListData=r.cloneOlapFieldSettings(this.parent.olapEngineModule.fieldListData)),this.parent.clonedFieldList=r.getClonedFieldList(this.parent.pivotFieldList));this.parent.isDeferLayoutUpdate=n.checked;this.parent.isPopupView&&this.parent.pivotGridModule&&(this.parent.pivotGridModule.pivotDeferLayoutUpdate=n.checked);"Fixed"===this.parent.renderMode?(this.deferUpdateApplyButton.setProperties({disabled:!n.checked}),this.deferUpdateCancelButton.setProperties({disabled:!n.checked})):this.parent.allowDeferLayoutUpdate&&n.checked?(this.deferUpdateApplyButton.element.style.display="",this.deferUpdateCancelButton.setProperties({content:this.parent.localeObj.getConstant("cancel")}),this.deferUpdateCancelButton.isPrimary=!1):(this.deferUpdateApplyButton.element.style.display="none",this.deferUpdateCancelButton.setProperties({content:this.parent.localeObj.getConstant("close")}),this.deferUpdateCancelButton.isPrimary=!0);Object.keys(this.parent.clonedFieldList).length!==Object.keys(this.parent.pivotFieldList).length&&this.parent.calculatedFieldModule&&this.parent.calculatedFieldModule.field&&"pivot"===this.parent.dataType&&(this.parent.engineModule.fields=Object.keys(this.parent.clonedFieldList));this.onCloseFieldList(null,!0)},t.prototype.applyButtonClick=function(){"pivotfieldlist"===this.parent.getModuleName()&&this.parent.allowDeferLayoutUpdate&&(this.parent.pivotChange=!1);this.parent.isDeferUpdateApplied=!0;this.parent.isPopupView||"Server"!==this.parent.dataSourceSettings.mode||(this.parent.isRequiredUpdate=!0);this.parent.updateDataSource(!1);var n=this.parent;n.axisFieldModule.render();n.clonedDataSource=r.getClonedDataSourceSettings(n.dataSourceSettings);"olap"===this.parent.dataType&&(this.parent.clonedFieldListData=r.cloneOlapFieldSettings(this.parent.olapEngineModule.fieldListData));n.clonedFieldList=r.getClonedFieldList(n.pivotFieldList)},t.prototype.onCloseFieldList=function(n,t){var i,f,s,e,o,u;if((this.parent.allowDeferLayoutUpdate||t)&&(!this.parent.isPopupView||this.parent.pivotGridModule&&""!==this.parent.pivotGridModule.actionObj.actionName||""!==this.parent.actionObj.actionName)){if(this.parent.setProperties({dataSourceSettings:this.parent.clonedDataSource},!0),"olap"===this.parent.dataType)if(this.parent.olapEngineModule.fieldList=r.getClonedFieldList(this.parent.clonedFieldList),this.parent.olapEngineModule.fieldListData=r.cloneOlapFieldSettings(this.parent.clonedFieldListData),this.parent.isPopupView)this.parent.isPopupView&&this.parent.clonedFieldListData&&Object.keys(this.parent.clonedFieldListData).length>0&&(this.parent.olapEngineModule.fieldListData=this.parent.clonedFieldListData);else for(i=0,f=Object.keys(this.parent.clonedFieldList);i<f.length;i++)s=f[i],e=this.parent.clonedFieldList[s],this.parent.olapEngineModule.updateFieldlistData(e.id,e.isSelected);else this.parent.engineModule.fieldList=r.getClonedFieldList(this.parent.clonedFieldList);this.parent.updateDataSource(!1,!0)}((!this.parent.isDeferLayoutUpdate||this.parent.pivotGridModule&&!this.parent.pivotGridModule.pivotDeferLayoutUpdate)&&t&&(this.parent.pivotChange=!1),this.parent.allowDeferLayoutUpdate&&this.parent.isPopupView&&this.parent.pivotGridModule&&!this.parent.isAdaptive&&(this.parent.pivotGridModule.actionObj.actionName="",this.parent.pivotGridModule.engineModule=this.parent.engineModule,this.parent.pivotGridModule.olapEngineModule=this.parent.olapEngineModule,this.parent.pivotGridModule.setProperties({dataSourceSettings:this.parent.clonedDataSource},!0)),this.parent.allowDeferLayoutUpdate&&this.parent.allowCalculatedField&&"pivot"===this.parent.dataType&&!this.parent.isAdaptive)&&(this.parent.engineModule.fieldList=this.parent.pivotFieldList=r.getClonedFieldList(this.parent.clonedFieldList),o=Object.keys(this.parent.engineModule.fieldList),this.parent.allowCalculatedField&&o.length!==this.parent.engineModule.fields.length&&(u=[],this.parent.engineModule.fields.forEach(function(n){-1!==o.indexOf(n)&&(u[u.length]=n)}),this.parent.engineModule.fields=u));"Popup"!==this.parent.renderMode||t?this.parent.actionObj.actionName="Action dropped":(this.parent.dialogRenderer.fieldListDialog.hide(),this.parent.actionObj.actionName="Field list closed");this.parent.actionObj.actionName&&this.parent.actionCompleteMethod()},t.prototype.renderFieldListDialog=function(t){var e=n.createElement("div",{className:st+" "+s+" e-select-table",attrs:{tabindex:"0",title:this.parent.localeObj.getConstant("fieldList"),"aria-disabled":"false","aria-label":this.parent.localeObj.getConstant("fieldList"),role:"button"}}),i,u,r,f;(this.parent.element.appendChild(e),this.parent.isAdaptive)?(i='<div class=e-title-mobile-header><span class="'+s+" "+dc+'"><\/span><div class=e-title-mobile-content>'+this.parent.localeObj.getConstant("fieldList")+"<\/div><\/div>",u=[{click:this.showFieldListDialog.bind(this),isFlat:!1,buttonModel:{cssClass:yu+" "+oe+" "+se+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:s+" "+sf,isPrimary:!0}},{click:this.showCalculatedField.bind(this),isFlat:!1,buttonModel:{cssClass:of+" "+oe+" "+se+" "+h+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:s+" "+sf,enableRtl:this.parent.enableRtl,isPrimary:!0}}],this.fieldListDialog=new o.Dialog({animationSettings:{effect:this.parent.enableRtl?"SlideRight":"SlideLeft"},header:i,content:this.parentElement,isModal:!0,showCloseIcon:!1,visible:!1,allowDragging:!1,closeOnEscape:!1,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"100%",height:"100%",position:{X:"center",Y:"center"},buttons:u,target:document.body,cssClass:this.parent.cssClass,close:this.removeFieldListIcon.bind(this),open:this.dialogOpen.bind(this)}),this.fieldListDialog.isStringTemplate=!0,this.fieldListDialog.appendTo(t),n.setStyleAttribute(n.select("#"+t.id+"_dialog-content",t),{padding:"0"}),r=t.querySelector(".e-footer-content"),n.addClass([r],vo),n.removeClass([r.querySelector("."+of)],gh),n.removeClass([r.querySelector("."+yu)],gh),this.fieldListDialog.element.querySelector("."+dc).onclick=this.parent.allowDeferLayoutUpdate?this.onDeferUpdateClick.bind(this):this.onCloseFieldList.bind(this)):(f=this.createDeferUpdateButtons().outerHTML,i="<div class="+dh+"><div class=e-title-content>"+this.parent.localeObj.getConstant("fieldList")+"<\/div><\/div>",this.fieldListDialog=new o.Dialog({animationSettings:{effect:"Zoom"},header:i,content:this.parentElement,isModal:!1,showCloseIcon:!1,visible:!1,allowDragging:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:this.parent.element.style.width,position:{X:"center",Y:this.parent.element.offsetTop},footerTemplate:f,closeOnEscape:!1,cssClass:this.parent.cssClass,target:n.isNullOrUndefined(this.parent.target)?document.body:"string"==typeof this.parent.target?document.querySelector(this.parent.target):this.parent.target,close:this.removeFieldListIcon.bind(this),beforeOpen:this.beforeOpen.bind(this)}),this.fieldListDialog.isStringTemplate=!0,this.fieldListDialog.appendTo(t),this.renderDeferUpdateButtons(t),n.setStyleAttribute(n.select("#"+t.id+"_title",t),{width:"100%"}),t.querySelector("."+dh).appendChild(this.createCalculatedButton()))},t.prototype.beforeOpen=function(){this.parent.clonedFieldList&&0===Object.keys(this.parent.clonedFieldList).length&&(this.parent.isDeferLayoutUpdate||this.parent.pivotGridModule&&this.parent.pivotGridModule.pivotDeferLayoutUpdate)&&(this.parent.clonedFieldList=r.getClonedFieldList(this.parent.pivotFieldList))},t.prototype.dialogOpen=function(){4===this.lastTabIndex?(this.adaptiveElement.items[this.lastTabIndex].content="",this.adaptiveElement.dataBind(),this.parent.notify(dr,{})):this.adaptiveElement.refresh()},t.prototype.updateDataSource=function(n){for(var r,u,f=["filters","columns","rows","values"],t=0,i=n;t<i.length;t++)r=i[t],u=f[this.adaptiveElement.selectedItem],this.parent.pivotCommon.dataSourceUpdate.control="pivotview"===this.parent.getModuleName()?this.parent:this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,this.parent.pivotCommon.dataSourceUpdate.updateDataSource(r,u,-1);this.parent.axisFieldModule.render();this.parent.allowDeferLayoutUpdate?this.parent.triggerPopulateEvent():this.parent.updateDataSource(!0)},t.prototype.onDeferUpdateClick=function(){this.parent.isPopupView&&"Server"===this.parent.dataSourceSettings.mode&&(this.parent.isRequiredUpdate=!0);this.parent.updateDataSource();this.parent.dialogRenderer.fieldListDialog.hide()},t.prototype.renderAdaptiveLayout=function(t){var r=n.createElement("div",{className:vo}),i;t.appendChild(this.parentElement);i=[{header:{text:this.parent.localeObj.getConstant("filters")},content:this.createAxisTable("filters")},{header:{text:this.parent.localeObj.getConstant("columns")},content:this.createAxisTable("columns")},{header:{text:this.parent.localeObj.getConstant("rows")},content:this.createAxisTable("rows")},{header:{text:this.parent.localeObj.getConstant("values")},content:this.createAxisTable("values")},{header:{text:this.parent.localeObj.getConstant("createCalculatedField")},content:"Calculated Field Related UI"}];this.parent.allowCalculatedField||i.pop();this.adaptiveElement=new et.Tab({heightAdjustMode:"Auto",items:i,height:"100%",enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,selected:this.tabSelect.bind(this),cssClass:this.parent.cssClass});"Fixed"===this.parent.renderMode?(r.appendChild(this.createAddButton()),n.addClass([t],ao),this.adaptiveElement.isStringTemplate=!0,this.adaptiveElement.appendTo(this.parentElement),this.parentElement.appendChild(r)):(this.adaptiveElement.isStringTemplate=!0,this.adaptiveElement.appendTo(this.parentElement))},t.prototype.tabSelect=function(t){var i=n.closest(this.parentElement,"."+lo);this.lastTabIndex=t.selectedIndex;i&&i.querySelector("."+yu)&&(4!==t.selectedIndex?(n.addClass([i.querySelector("."+of)],h),n.removeClass([i.querySelector("."+yu)],h)):(n.removeClass([i.querySelector("."+of)],h),n.addClass([i.querySelector("."+yu)],h)));4===t.selectedIndex?(this.adaptiveElement.items[4].content="",this.adaptiveElement.dataBind(),this.parent.notify(dr,{})):this.parent.axisFieldModule.render()},t.prototype.createCalculatedButton=function(){var t=n.createElement("button",{id:this.parent.element.id+"_CalculatedField",attrs:{type:"button",tabindex:"0","aria-disabled":"false","aria-label":this.parent.localeObj.getConstant("CalculatedField")}}),i=new ut.Button({cssClass:"e-calculated-field "+h+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("CalculatedField"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});return i.isStringTemplate=!0,i.appendTo(t),this.parent.calculatedFieldModule&&this.parent.allowCalculatedField&&n.removeClass([t],h),i.element.onclick=this.showCalculatedField.bind(this),t},t.prototype.createAddButton=function(){var t=n.createElement("div",{className:vo+"-content"}),u=n.createElement("div",{}),f=n.createElement("div",{}),i=new ut.Button({cssClass:of+" "+oe+" "+se+" "+h+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:s+" "+sf,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),r=new ut.Button({cssClass:yu+" "+oe+" "+se+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:s+" "+sf,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});return r.isStringTemplate=!0,r.appendTo(u),i.isStringTemplate=!0,i.appendTo(f),t.appendChild(u),t.appendChild(f),i.element.onclick=this.showCalculatedField.bind(this),r.element.onclick=this.showFieldListDialog.bind(this),t},t.prototype.createAxisTable=function(t){var i=n.createElement("div",{className:ht+"-"+t}),u=n.createElement("div",{className:ei+" e-"+t}),r=n.createElement("span",{className:te});return r.innerText=this.parent.localeObj.getConstant("addPrompt"),i.appendChild(u),i.appendChild(r),i},t.prototype.showCalculatedField=function(){try{if(!this.parent.isAdaptive){if(this.parent.actionObj.actionName=oh,this.parent.actionBeginMethod())return;this.parent.dialogRenderer.fieldListDialog&&(this.parent.dialogRenderer.fieldListDialog.hide(),n.addClass([this.parent.element.querySelector("."+st)],gr))}this.parent.notify(dr,{})}catch(t){this.parent.actionFailureMethod(t)}},t.prototype.showFieldListDialog=function(){var n=this.adaptiveElement.selectedItem;this.parent.treeViewModule.render(n)},t.prototype.onShowFieldList=function(){if(this.parent.actionObj.actionName="Open field list",!this.parent.actionBeginMethod()){this.parent.actionObj.actionName="";try{this.parent.allowDeferLayoutUpdate&&(this.parent.isAdaptive&&this.parent.axisFieldModule.render(),this.parent.clonedDataSource=r.getClonedDataSourceSettings(this.parent.dataSourceSettings),"olap"===this.parent.dataType&&(this.parent.clonedFieldListData=r.cloneOlapFieldSettings(this.parent.olapEngineModule.fieldListData)),this.parent.clonedFieldList=r.getClonedFieldList(this.parent.pivotFieldList));n.addClass([this.parent.element.querySelector("."+st)],gr);this.parent.dialogRenderer.fieldListDialog.show();this.parent.dialogRenderer.fieldListDialog.element.style.top=parseInt(this.parent.dialogRenderer.fieldListDialog.element.style.top,10)<0?"0px":this.parent.dialogRenderer.fieldListDialog.element.style.top}catch(t){this.parent.actionFailureMethod(t)}}},t.prototype.removeFieldListIcon=function(){this.parent.isAdaptive&&this.parent.allowCalculatedField&&this.parent.calculatedFieldModule&&this.adaptiveElement&&4===this.adaptiveElement.selectedItem&&(n.select("#"+this.parent.element.id+"droppable",this.adaptiveElement.element)?this.parent.calculatedFieldModule.updateAdaptiveCalculatedField(!1):this.parent.notify(dr,{edit:!1}));document.getElementById(this.parent.element.id+"calculateddialog")||n.removeClass([this.parent.element.querySelector("."+st)],gr)},t.prototype.keyPress=function(n){if(13===n.keyCode&&n.target)return n.target.click(),void n.preventDefault()},t.prototype.wireDialogEvent=function(t){n.EventHandler.add(t,"keydown",this.keyPress,this);n.EventHandler.add(t,"click",this.onShowFieldList,this)},t.prototype.unWireDialogEvent=function(t){n.EventHandler.remove(t,"keydown",this.keyPress);n.EventHandler.remove(t,"click",this.onShowFieldList)},t.prototype.destroy=function(){var r,u,f,i,t,e;if("Popup"===this.parent.renderMode&&(r=this.parent.element.querySelector("."+st),r&&this.unWireDialogEvent(r)),this.deferUpdateCheckBox&&!this.deferUpdateCheckBox.isDestroyed&&(this.deferUpdateCheckBox.destroy(),this.deferUpdateCheckBox=null),this.deferUpdateApplyButton&&!this.deferUpdateApplyButton.isDestroyed&&(this.deferUpdateApplyButton.destroy(),this.deferUpdateApplyButton=null),this.deferUpdateCancelButton&&!this.deferUpdateCancelButton.isDestroyed&&(this.deferUpdateCancelButton.destroy(),this.deferUpdateCancelButton=null),this.adaptiveElement&&!this.adaptiveElement.isDestroyed&&(this.adaptiveElement.destroy(),this.adaptiveElement=null),u=document.getElementById(this.parent.element.id+"_CalculatedField"),u&&(t=n.getInstance(u,ut.Button))&&!t.isDestroyed&&t.destroy(),"Popup"===this.parent.renderMode){if(this.fieldListDialog&&!this.fieldListDialog.isDestroyed){for(f=this.fieldListDialog.element.querySelectorAll("button"),i=0;i<f.length;i++)(t=n.getInstance(f[i],ut.Button))&&!t.isDestroyed&&t.destroy();this.fieldListDialog.destroy();this.fieldListDialog=null}e=document.getElementById(this.parent.element.id+"_Container");e&&n.remove(e)}this.lastTabIndex=null},t}(),hw=function(){function t(n){this.selectedNodes=[];this.isSearching=!1;this.parentIDs=[];this.isSpaceKey=!1;this.olapFieldListData=[];this.parent=n;this.addEventListener()}return t.prototype.render=function(t){var i,u,f,r,e,o,c,a,l;(this.parentElement=this.parent.dialogRenderer.parentElement,this.fieldListSort=this.parent.pivotGridModule?this.parent.pivotGridModule.defaultFieldListOrder:this.parent.defaultFieldListOrder,this.fieldListSort="Ascending"===this.fieldListSort?"Ascend":"Descending"===this.fieldListSort?"Descend":"None",this.parent.isAdaptive)?this.renderTreeDialog(t):(i=n.createElement("div",{className:"e-field-table "+("olap"===this.parent.dataType?"e-olap-field-table":"")}),u=n.createElement("div",{className:"e-field-header",attrs:{title:this.parent.localeObj.getConstant("allFields")}}),u.innerText=this.parent.localeObj.getConstant("allFields"),f=n.createElement("div",{className:ah+" "+ac}),this.treeViewElement=n.createElement("div",{id:this.parent.element.id+"_TreeView",className:ht+" "+("olap"===this.parent.dataType?"e-olap-field-list-tree":"")}),r=n.createElement("div",{className:"e-field-header-container"}),(r.appendChild(u),i.appendChild(r),this.updateSortElements(r),this.parent.enableFieldSearching)&&(e=n.createElement("div",{id:this.parent.element.id+"_SearchDiv",attrs:{tabindex:"-1"},className:"e-field-list-search"}),o=n.createElement("input",{attrs:{type:"text"}}),e.appendChild(o),this.fieldSearch=new y.TextBox({placeholder:this.parent.localeObj.getConstant("search"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:"e-field-list-search-input"+(this.parent.cssClass?" "+this.parent.cssClass:""),input:this.textChange.bind(this),showClearButton:!0}),this.fieldSearch.isStringTemplate=!0,this.fieldSearch.appendTo(o),this.fieldSearch.addIcon("append","e-field-list-search-icon "+s),c=n.createElement("div",{className:cf+" "+h}),c.innerText=this.parent.localeObj.getConstant("noMatches"),i.appendChild(e),i.appendChild(c)),(f.appendChild(this.treeViewElement),i.appendChild(f),this.parentElement.appendChild(i),"Fixed"===this.parent.renderMode)&&(a=n.createElement("div",{className:"e-center-div"}),l=n.createElement("div",{className:"e-center-title"}),l.innerText=this.parent.localeObj.getConstant("centerHeader"),this.parentElement.appendChild(a),this.parentElement.appendChild(l)),this.renderTreeView())},t.prototype.updateSortElements=function(t){for(var i,r,f={None:"sortNone",Ascend:"sortAscending",Descend:"sortDescending"},u=0,e=Object.keys(f);u<e.length;u++)i=e[u],r=n.createElement("span",{attrs:{tabindex:"0","aria-disabled":"false","aria-label":"Sort "+i,"data-sort":i,title:this.parent.localeObj.getConstant(f[i]),role:"button"},className:s+" e-sort-"+i.toLowerCase()+" "+(this.fieldListSort===i?"e-selected":"")}),t.appendChild(r),this.unWireFieldListEvent(r),this.wireFieldListEvent(r)},t.prototype.renderTreeView=function(){this.fieldTable=new et.TreeView({fields:{dataSource:this.getTreeData(),id:"id",text:"caption",isChecked:"isSelected",parentID:"pid",iconCss:"spriteCssClass"},nodeChecked:this.nodeChecked.bind(this),nodeClicked:this.nodeStateChange.bind(this),keyPress:this.nodeStateChange.bind(this),cssClass:"e-field-list-tree"+(this.parent.cssClass?" "+this.parent.cssClass:""),showCheckBox:!0,allowDragAndDrop:!0,sortOrder:"None",loadOnDemand:"olap"!==this.parent.dataType&&!this.parent.enableFieldSearching,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,nodeDragStart:this.dragStart.bind(this),nodeDragStop:this.dragStop.bind(this),drawNode:this.updateTreeNode.bind(this),nodeExpanding:this.updateNodeIcon.bind(this),nodeCollapsed:this.updateNodeIcon.bind(this),nodeSelected:function(t){n.removeClass([t.node],"e-active");t.cancel=!0}});this.treeViewElement.innerHTML="";this.fieldTable.isStringTemplate=!0;this.fieldTable.appendTo(this.treeViewElement);var t="Fixed"===this.parent.renderMode?this.parent.element:this.parentElement;n.isNullOrUndefined(t.querySelector("."+ht))||(n.getInstance(t.querySelector("."+ht),et.TreeView).dragObj.enableAutoScroll=!1)},t.prototype.updateNodeIcon=function(t){if("olap"===this.parent.dataType)if(t.node&&t.node.querySelector(".e-list-icon")&&t.node.querySelector(".e-list-icon").className.indexOf("e-folderCDB-icon")>-1){var i=t.node.querySelector(".e-list-icon");n.removeClass([i],"e-folderCDB-icon");n.addClass([i],"e-folderCDB-open-icon")}else t.node&&t.node.querySelector(".e-list-icon")&&t.node.querySelector(".e-list-icon").className.indexOf("e-folderCDB-open-icon")>-1&&(i=t.node.querySelector(".e-list-icon"),n.removeClass([i],"e-folderCDB-open-icon"),n.addClass([i],"e-folderCDB-icon"))},t.prototype.updateTreeNode=function(t){var i=!1,u,c,f,l,e,o;if("olap"===this.parent.dataType?i=this.updateOlapTreeNode(t):t.nodeData.hasChildren?(i=!1,t.node.querySelector("."+sr).style.display="none",n.addClass([t.node],ph)):i=!0,n.isNullOrUndefined(t.nodeData.pid)||n.addClass([t.node],wh),u=t.node.querySelector("."+ru),t.node.querySelector(".e-list-icon")&&u&&(c=t.node.querySelector(".e-list-icon"),u.insertBefore(c,t.node.querySelector(".e-list-text"))),i&&!this.parent.isAdaptive&&(f=r.getFieldInfo(t.nodeData.id,this.parent),i=!1,l=n.createElement("span",{attrs:{tabindex:"-1",title:f.fieldItem?f.fieldItem.allowDragAndDrop?this.parent.localeObj.getConstant("drag"):"":this.parent.localeObj.getConstant("drag"),"aria-disabled":"false"},className:s+" "+ff+" "+(f.fieldItem?f.fieldItem.allowDragAndDrop?"":fe:"")}),t.node.querySelector("."+sr)&&!t.node.querySelector(".cls.DRAG_CLASS")&&u&&u.insertBefore(l,t.node.querySelector("."+sr))),t.node.querySelector("."+ef)&&n.addClass([t.node.querySelector("."+ri)],uu),this.parent.enableFieldSearching&&this.isSearching&&"pivot"===this.parent.dataType)for(e=t.node,o=0;o<this.nonSearchList.length;o++){if(e.textContent===this.nonSearchList[o].textContent){n.addClass([e],h);break}if(e.innerText===this.nonSearchList[o].textContent){n.addClass([e],h);break}}},t.prototype.updateOlapTreeNode=function(n){var t=!1;return"olap"===this.parent.dataType?(n.node&&n.node.querySelector(".e-calcMemberGroupCDB,.e-measureGroupCDB-icon,.e-folderCDB-icon,.e-folderCDB-open-icon,.e-dimensionCDB-icon,.e-kpiCDB-icon")&&(n.node.querySelector("."+sr).style.display="none"),n.node&&n.node.querySelector(".e-list-icon")&&n.node.querySelector(".e-list-icon").className.indexOf("e-level-members")>-1&&(this.parent.isAdaptive?n.node.querySelector("."+sr).style.display="none":n.node.querySelector("."+sr).style.visibility="hidden"),n.node&&(n.node.querySelector(".e-hierarchyCDB-icon,.e-attributeCDB-icon,.e-namedSetCDB-icon")||n.node.querySelector(".e-measure-icon,.e-kpiGoal-icon,.e-kpiStatus-icon,.e-kpiTrend-icon,.e-kpiValue-icon")||n.node.querySelector(".e-calc-measure-icon,.e-calc-dimension-icon"))&&(n.node.querySelector(".e-measure-icon")?(n.node.querySelector(".e-list-icon").style.display="none",t=!0):t=!0)):t=!0,t},t.prototype.renderTreeDialog=function(t){var i=n.createElement("div",{id:this.parent.element.id+"_FieldListTreeView",className:"e-adaptive-field-list-dialog "+("olap"===this.parent.dataType?"e-olap-editor-dialog":"")});this.parentElement.appendChild(i);this.fieldDialog=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!1,header:this.parent.localeObj.getConstant("adaptiveFieldHeader"),content:this.createTreeView(this.getTreeData(t)),isModal:!0,visible:!0,showCloseIcon:!1,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,width:"320px",height:"350px",position:{X:"center",Y:"center"},buttons:[{click:this.closeTreeDialog.bind(this),isFlat:!1,buttonModel:{cssClass:cu+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}},{click:this.onFieldAdd.bind(this),isFlat:!1,buttonModel:{cssClass:wt+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("add"),isPrimary:!0}}],closeOnEscape:!1,cssClass:this.parent.cssClass,close:this.closeTreeDialog.bind(this),target:n.closest(this.parentElement,"."+lo)});this.fieldDialog.isStringTemplate=!0;this.fieldDialog.appendTo(i)},t.prototype.createTreeView=function(t){var i=n.createElement("div",{id:this.parent.element.id+"EditorDiv",className:ee}),e=n.createElement("div",{id:this.parent.element.id+"_SearchDiv",attrs:{tabindex:"-1"},className:sc}),o=n.createElement("input",{attrs:{type:"text"}}),r,u,f;return e.appendChild(o),r=n.createElement("div",{className:ah}),u=n.createElement("div",{className:hu+" "+("olap"===this.parent.dataType?"e-olap-field-list-tree":"")}),i.appendChild(e),this.editorSearch=new y.MaskedTextBox({showClearButton:!0,placeholder:this.parent.localeObj.getConstant("search"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:hc+(this.parent.cssClass?" "+this.parent.cssClass:""),change:this.textChange.bind(this)}),this.editorSearch.isStringTemplate=!0,this.editorSearch.appendTo(o),f=n.createElement("div",{className:cf+" "+h}),f.innerText=this.parent.localeObj.getConstant("noMatches"),i.appendChild(f),r.appendChild(u),i.appendChild(r),this.fieldTable=new et.TreeView({fields:{dataSource:t,id:"id",text:"caption",isChecked:"isSelected",parentID:"pid",iconCss:"spriteCssClass"},showCheckBox:!0,loadOnDemand:"olap"!==this.parent.dataType,sortOrder:"olap"===this.parent.dataType?"None":"Ascending",enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass,nodeChecked:this.nodeChecked.bind(this),nodeClicked:this.addNode.bind(this),keyPress:this.addNode.bind(this),drawNode:this.updateTreeNode.bind(this),nodeExpanding:this.updateNodeIcon.bind(this),nodeCollapsed:this.updateNodeIcon.bind(this),nodeSelected:function(t){n.removeClass([t.node],"e-active");t.cancel=!0}}),this.fieldTable.isStringTemplate=!0,this.fieldTable.appendTo(u),i},t.prototype.textChange=function(n){var i=this,r,t;"olap"===this.parent.dataType?""===n.value?(this.fieldTable.fields.dataSource=this.olapFieldListData,setTimeout(function(){i.fieldTable.collapseAll()}),this.isSearching=!1,this.promptVisibility(!1)):(this.fieldTable.fields.dataSource=this.performeSearching(n.value),setTimeout(function(){i.fieldTable.expandAll()}),this.isSearching=!0,this.promptVisibility(0===this.fieldTable.fields.dataSource.length)):(this.parent.pivotCommon.eventBase.searchTreeNodes(n,this.fieldTable,!0),r=[].slice.call(this.fieldTable.element.querySelectorAll("li")),t=[].slice.call(this.fieldTable.element.querySelectorAll("li."+h)),this.promptVisibility(r.length===t.length),this.isSearching=t.length>0,this.nonSearchList=t)},t.prototype.promptVisibility=function(t){var i,r;this.parent.isAdaptive?i=this.fieldDialog.element.querySelector("."+cf):(i=this.parentElement.querySelector("."+cf),r=this.parentElement.querySelector("."+ac));t?(n.removeClass([i],h),this.parent.isAdaptive||(n.addClass([r],h),n.removeClass([i],vh))):(n.addClass([i],h),this.parent.isAdaptive||(n.removeClass([r],h),n.addClass([i],vh)))},t.prototype.performeSearching=function(n){var u=this,t=new nt.DataManager(this.olapFieldListData),f=t.executeLocal((new nt.Query).where(new nt.Predicate(this.fieldTable.fields.text,"contains",n,!0))),i=[],r=new Set;return f.forEach(function(n){if(n){var f=[],e=[];n.pid&&(f=u.getParentItems(t,"id",n.pid));n.hasChildren&&(e=t.executeLocal((new nt.Query).where("pid","equal",n.id,!1)));f.concat([n]).concat(e).forEach(function(n){var t=n.id;r.has(t)||(r.add(t),i.push(new nt.Predicate("id","equal",t,!1)))})}}),i.length>0?t.executeLocal((new nt.Query).where(nt.Predicate.or.apply(nt.Predicate,i))):[]},t.prototype.getParentItems=function(n,t,i){var r=n.executeLocal((new nt.Query).where(t,"equal",i,!1));return r&&r[0]&&r[0].pid&&(r=this.getParentItems(n,t,r[0].pid).concat(r)),r},t.prototype.dragStart=function(t){var i=this,u,f;t.event.target.classList.contains(ff)&&!t.event.target.classList.contains(fe)?(u=r.getFieldInfo(t.draggedNode.getAttribute("data-uid"),this.parent),f={fieldName:u.fieldName,fieldItem:u.fieldItem,axis:u.axis,dataSourceSettings:this.parent.dataSourceSettings,cancel:!1},(this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(hl,f,function(r){var f,s,u,e,h,o;if(r.cancel)i.parent.isDragging=!1,t.cancel=!0;else{if(i.parent.isDragging=!0,n.addClass([t.draggedNode.querySelector("."+ri)],vu),f="olap"===i.parent.dataType?i.parent.olapEngineModule.fieldList[t.draggedNode.getAttribute("data-uid")]:i.parent.engineModule.fieldList[t.draggedNode.getAttribute("data-uid")],s=[lu,vr,yr],f&&"CalculatedField"===f.aggregateType)for(u=0,e=s;u<e.length;u++)h=e[u],n.addClass([i.parentElement.querySelector("."+h)],au);o=t.clonedNode;o&&"Popup"===("pivotfieldlist"===i.parent.getModuleName()&&i.parent.renderMode)&&(o.style.zIndex=(i.parent.dialogRenderer.fieldListDialog.zIndex+1).toString())}})):(this.parent.isDragging=!1,t.cancel=!0)},t.prototype.dragStop=function(t){var i,u,f,r,e;for(t.cancel=!0,this.parent.isDragging=!1,i=0,u=[lu,vr,yr];i<u.length;i++)f=u[i],n.removeClass([this.parentElement.querySelector("."+f)],au);n.removeClass([t.draggedNode.querySelector("."+ri)],vu);this.parent.pivotCommon.filterDialog.dialogPopUp&&this.parent.pivotCommon.filterDialog.dialogPopUp.close();r=t.draggedNodeData.id.toString();this.isNodeDropped(t,r)&&(e=this.parent.pivotFieldList[r],this.parent.pivotCommon.dataSourceUpdate.control="pivotview"===this.parent.getModuleName()?this.parent:this.parent.isPopupView&&this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,this.parent.pivotCommon.nodeStateModified.onStateModified(t,r)&&(this.parent.isDeferLayoutUpdate||this.parent.pivotGridModule&&this.parent.pivotGridModule.pivotDeferLayoutUpdate?(e.isSelected=!0,this.updateDataSource()):this.parent.updateDataSource(),this.parent.axisFieldModule.render()))},t.prototype.isNodeDropped=function(t,i){var s=!0,l,a;if("true"===t.draggedNodeData.isChecked){var f=this.getButton(i),h=n.closest(f,"."+oi),v=n.closest(t.target,"."+oi);if(f&&h===v){for(var u=[].slice.call(h.querySelectorAll("."+w)),c=n.closest(t.target,"."+rr),e=void 0,o=-1,r=0,y=u.length;r<y;r++)(u[r].id===f.id&&(e=r),c)&&(l=c.querySelector("."+w),u[r].id===l.id&&(o=r));(e===o||e===u.length-1&&-1===o)&&(a=document.getElementById(this.parent.element.id+"_Container"),n.removeClass([].slice.call(a.querySelectorAll("."+vt)),kt),s=!1)}}return s},t.prototype.getButton=function(n){for(var r,u=document.getElementById(this.parent.element.id+"_Container"),i=[].slice.call(u.querySelectorAll("."+w)),t=0,f=i.length;t<f;t++)if(i[t].getAttribute("data-uid")===n){r=i[t];break}return r},t.prototype.nodeChecked=function(t){var i,r;this.isSpaceKey&&(i=n.closest(t.node,"."+ru),n.isNullOrUndefined(i)||(r=n.closest(i,"li").getAttribute("data-uid"),this.parent.isAdaptive?this.addNode(void 0,r,"check"===t.action,i):this.nodeStateChange(void 0,r,"check"===t.action,i)));this.isSpaceKey=!1},t.prototype.nodeStateChange=function(t,i,u,f){var e=this,o,l,v,y;if(f=n.isNullOrUndefined(f)?t.node:f,i=n.isNullOrUndefined(i)?f.getAttribute("data-uid"):i,this.parent.pivotCommon.filterDialog.dialogPopUp&&this.parent.pivotCommon.filterDialog.dialogPopUp.close(),o=this.parent.pivotFieldList[i],!n.isNullOrUndefined(t)){if(this.isSpaceKey=t.event.action&&"space"===t.event.action,n.isNullOrUndefined(o)||f.classList.contains(h)||t.event.target&&(t.event.target.classList.contains(tl)||t.event.target.classList.contains(il))||t.event.action&&"enter"!==t.event.action)return;u=!1;l=this.fieldTable.getNode(f);t.event&&t.event.target&&!t.event.target.closest("."+sr)?"true"===l.isChecked?(this.fieldTable.uncheckAll([f]),u=!1):(this.fieldTable.checkAll([f]),u=!0):u="true"===l.isChecked}var a=this.parent.isPopupView?this.parent.pivotGridModule:this.parent,s=r.getFieldInfo(i,this.parent),c=f.closest("."+ph);u?(v={fieldName:i,dropField:s.fieldItem,dataSourceSettings:r.getClonedDataSourceSettings(this.parent.dataSourceSettings),dropAxis:"number"===o.type||"CalculatedField"===o.type&&o.formula&&o.formula.indexOf("Measure")>-1&&"olap"===this.parent.dataType?"values":"rows",dropPosition:s.position,draggedAxis:"fieldlist",cancel:!1},a.trigger(gs,v,function(t){if(t.cancel)e.updateCheckState(o,"check");else{n.addClass([f.querySelector("."+ri)],uu);c&&n.addClass([c.querySelector("."+ri)],uu);e.updateSelectedNodes(f,"check");var r=e.parent.pivotCommon.dataSourceUpdate.getNewField(i,s.fieldItem);e.updateReportSettings(r,t);e.updateNodeStateChange(i,o,u)}})):(y={cancel:!1,fieldName:i,dataSourceSettings:r.getClonedDataSourceSettings(this.parent.dataSourceSettings),fieldItem:s.fieldItem,axis:s.axis},a.trigger(th,y,function(t){t.cancel?e.updateCheckState(o,"uncheck"):(n.removeClass([f.querySelector("."+ri)],uu),c&&n.isNullOrUndefined(c.querySelector("."+wh+" ."+ef))&&n.removeClass([c.querySelector("."+ri)],uu),e.updateSelectedNodes(f,"uncheck"),e.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport(i),"pivot"===e.parent.dataType&&e.parent.showValuesButton&&e.parent.dataSourceSettings.values.length>1&&s&&s.position<e.parent.dataSourceSettings.valueIndex&&("row"===e.parent.dataSourceSettings.valueAxis&&"rows"===s.axis||"column"===e.parent.dataSourceSettings.valueAxis&&"columns"===s.axis)&&a.setProperties({dataSourceSettings:{valueIndex:e.parent.dataSourceSettings.valueIndex-1}},!0),"olap"===e.parent.dataType&&0===e.parent.dataSourceSettings.values.length&&e.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport("[Measures]"),e.updateNodeStateChange(i,o,u))}))},t.prototype.updateReportSettings=function(t,i){var r=i.dropPosition,u=i.dropAxis,f;"pivot"===this.parent.dataType&&this.parent.showValuesButton&&this.parent.dataSourceSettings.values.length>1&&(f="row"===this.parent.dataSourceSettings.valueAxis&&"rows"===u?this.parent.dataSourceSettings.rows:"column"===this.parent.dataSourceSettings.valueAxis&&"columns"===u?this.parent.dataSourceSettings.columns:void 0,n.isNullOrUndefined(f)||(-1===r&&-1===this.parent.dataSourceSettings.valueIndex?this.parent.setProperties({dataSourceSettings:{valueIndex:f.length}},!0):r>-1&&r<=this.parent.dataSourceSettings.valueIndex?this.parent.setProperties({dataSourceSettings:{valueIndex:this.parent.dataSourceSettings.valueIndex+1}},!0):this.parent.dataSourceSettings.valueIndex>-1&&r>this.parent.dataSourceSettings.valueIndex&&(r-=1)));switch(u){case"filters":-1!==r?this.parent.dataSourceSettings.filters.splice(r,0,t):this.parent.dataSourceSettings.filters.push(t);break;case"rows":-1!==r?this.parent.dataSourceSettings.rows.splice(r,0,t):this.parent.dataSourceSettings.rows.push(t);break;case"columns":-1!==r?this.parent.dataSourceSettings.columns.splice(r,0,t):this.parent.dataSourceSettings.columns.push(t);break;case"values":(-1!==r?this.parent.dataSourceSettings.values.splice(r,0,t):this.parent.dataSourceSettings.values.push(t),"olap"!==this.parent.dataType||!this.parent.olapEngineModule||this.parent.olapEngineModule.isMeasureAvail||this.parent.dataSourceSettings.values.length>1)||("row"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.rows:this.parent.dataSourceSettings.columns).push({name:"[Measures]",caption:"Measures",baseField:void 0,baseItem:void 0})}},t.prototype.updateCheckState=function(n,t){for(var r=this.fieldTable.element.querySelectorAll("."+sr),u=this.fieldTable.element.querySelectorAll(".e-list-text"),i=0;i<r.length;i++)n.caption===u[i].textContent&&("check"===t?this.fieldTable.uncheckAll([n.id]):this.fieldTable.checkAll([n.id]))},t.prototype.updateNodeStateChange=function(t,i,r){var u,f;!1===this.parent.isDeferLayoutUpdate||this.parent.pivotGridModule&&!1===this.parent.pivotGridModule.pivotDeferLayoutUpdate?this.parent.updateDataSource(!0):(i.isSelected=r,"olap"===this.parent.dataType&&this.parent.olapEngineModule.updateFieldlistData(t,r),this.updateDataSource());u=this.treeViewElement.querySelector('[data-uid="'+t+'"]');u.focus();n.removeClass([u],"e-hover");f=this.parent;setTimeout(function(){f.axisFieldModule.render()})},t.prototype.updateSelectedNodes=function(t,i){var r,u,f;if(t&&t.querySelector("ul"))for(r=0,u=[].slice.call(t.querySelectorAll("li"));r<u.length;r++)f=u[r],"check"===i?n.addClass([f.querySelector("."+ri)],uu):n.removeClass([f.querySelector("."+ri)],uu)},t.prototype.updateDataSource=function(){this.parent.isPopupView?("olap"===this.parent.dataType?this.parent.pivotGridModule.olapEngineModule=this.parent.olapEngineModule:this.parent.pivotGridModule.engineModule=this.parent.engineModule,this.parent.pivotGridModule.setProperties({dataSourceSettings:this.parent.dataSourceSettings.properties},!0),this.parent.pivotGridModule.notify(ni,this)):this.parent.triggerPopulateEvent()},t.prototype.addNode=function(t,i,u,f){var o=this,e,c,s,l,a,v;if(f=n.isNullOrUndefined(f)?t.node:f,i=n.isNullOrUndefined(i)?f.getAttribute("data-uid"):i,e=this.parent.pivotFieldList[i],!n.isNullOrUndefined(t)){if(this.isSpaceKey=t.event.key&&" "===t.event.key,n.isNullOrUndefined(e)||t.node.classList.contains(h)||t.event.target&&(t.event.target.classList.contains(tl)||t.event.target.classList.contains(il))||t.event.key&&"Enter"!==t.event.key)return;u=!1;c=this.fieldTable.getNode(t.node);t.event&&t.event.target&&!t.event.target.classList.contains(bh)?"true"===c.isChecked?(this.fieldTable.uncheckAll([t.node]),u=!1):(this.fieldTable.checkAll([t.node]),u=!0):u="true"===c.isChecked}s=r.getFieldInfo(e.id.toString(),this.parent);l=this.parent.isPopupView?this.parent.pivotGridModule:this.parent;u?(a={fieldName:s.fieldName,dropField:s.fieldItem,dataSourceSettings:r.getClonedDataSourceSettings(this.parent.dataSourceSettings),dropAxis:["filters","columns","rows","values"][this.parent.dialogRenderer.adaptiveElement.selectedItem],draggedAxis:"fieldlist",cancel:!1},l.trigger(gs,a,function(n){n.cancel?o.updateCheckState(e,"check"):o.selectedNodes.push(e.id.toString())})):(v={cancel:!1,fieldName:s.fieldName,dataSourceSettings:r.getClonedDataSourceSettings(this.parent.dataSourceSettings),fieldItem:s.fieldItem,axis:s.axis},l.trigger(th,v,function(n){if(n.cancel)o.updateCheckState(e,"uncheck");else for(var t=o.selectedNodes.length;t--;)if(o.selectedNodes[t]===e.id.toString()){o.selectedNodes.splice(t,1);break}}))},t.prototype.refreshTreeView=function(){if(this.fieldTable){var n=this.getUpdatedData();this.fieldTable.fields={dataSource:n,id:"id",text:"caption",isChecked:"isSelected",parentID:"pid",iconCss:"spriteCssClass"};this.fieldTable.dataBind()}},t.prototype.getUpdatedData=function(){var n=this.getTreeData(),t=this.fieldTable.expandedNodes;return this.updateExpandedNodes(n,t),this.applySorting(n,this.fieldListSort)},t.prototype.getTreeData=function(t){var e=[],f,r,u,p,l,o,a,s,v,w;if("olap"===this.parent.dataType)e=this.getOlapTreeData(t),this.isSearching&&this.olapFieldListData.length>0&&(e=this.performeSearching(this.fieldSearch.value));else{for(var h=this.parent.pivotFieldList?Object.keys(this.parent.pivotFieldList).reverse():[],i={},c=0,y=h;c<y.length;c++)f=y[c],r=this.parent.pivotFieldList[f],(i[f]={id:r.id,pid:r.pid,caption:r.caption,isSelected:r.isSelected},n.isNullOrUndefined(r.pid)||i[f].hasChildren)||(u=r.pid+"_group_name",i[f].pid=u,i[u]={id:u,caption:r.pid,isSelected:i[u]&&i[u].isSelected?i[u].isSelected:r.isSelected,hasChildren:!0});if(this.parent.isAdaptive){for(p=[this.parent.dataSourceSettings.filters,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.values][t],l=h.length;l--;)i[h[l]].isSelected=!1;for(o=0,a=p;o<a.length;o++)i[a[o].name].isSelected=!0}for(s=0,v=Object.keys(i);s<v.length;s++)w=i[r=v[s]],e.push(w)}return e},t.prototype.getOlapTreeData=function(t){var f=[],a=this.parent.olapEngineModule.fieldListData?this.parent.olapEngineModule.fieldListData:[],h,e,i,u,o,c,v,s,l,y;if(this.parent.isAdaptive)for(h=[this.parent.dataSourceSettings.filters,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.values][t],e=0;e<a.length;){if(i=a[e],u=void 0,3===t){if("[measures]"!==i.id.toLowerCase()&&(0===i.id.toLowerCase().indexOf("[measures]")||i.spriteCssClass&&-1!==i.spriteCssClass.indexOf("e-measureCDB"))||"[calculated members].[_0]"===i.id.toLowerCase()||i.spriteCssClass&&-1!==i.spriteCssClass.indexOf("e-calc-measure-icon")){for((u={id:i.id,caption:i.caption,hasChildren:i.hasChildren,type:i.type,aggregateType:i.aggregateType,isSelected:i.isSelected,pid:i.pid,spriteCssClass:i.spriteCssClass}).isSelected=!1,u.spriteCssClass&&-1!==u.spriteCssClass.indexOf("e-measureCDB")&&(u.spriteCssClass=u.spriteCssClass.replace("e-folderCDB-icon","e-measureGroupCDB-icon"),u.pid=void 0),o=0,c=h;o<c.length;o++)if(v=c[o],u.id===v.name){u.isSelected=!0;break}f.push(u)}}else if(!(0===i.id.toLowerCase().indexOf("[measures]")||i.spriteCssClass&&-1!==i.spriteCssClass.indexOf("e-measureCDB")||i.spriteCssClass&&-1!==i.spriteCssClass.indexOf("e-calc-measure-icon"))){for((u={id:i.id,caption:i.caption,hasChildren:i.hasChildren,type:i.type,aggregateType:i.aggregateType,isSelected:i.isSelected,pid:i.pid,spriteCssClass:i.spriteCssClass}).isSelected=!1,s=0,l=h;s<l.length;s++)if(y=l[s],u.id===y.name){u.isSelected=!0;break}f.push(u)}e++}else f=n.isNullOrUndefined(this.parent.olapEngineModule.fieldListData)?[]:r.getClonedData(this.parent.olapEngineModule.fieldListData);return this.olapFieldListData=f,f},t.prototype.updateExpandedNodes=function(n,t){var i;if(t.length>0)for(var u=0,r=0,f=n;r<f.length;r++)if(i=f[r],t.indexOf(i.id)>-1&&(u++,i.expanded=!0,i.spriteCssClass=i.spriteCssClass&&i.spriteCssClass.toString().indexOf("e-folderCDB-icon")>-1?i.spriteCssClass.toString().replace("e-folderCDB-icon","e-folderCDB-open-icon"):i.spriteCssClass,u===t.length))break},t.prototype.updateSorting=function(t){var i=t.target,r=i.getAttribute("data-sort");if(this.parent.actionObj.actionName=dl,!this.parent.actionBeginMethod()){try{if(-1===i.className.indexOf("e-selected")){switch(r){case"None":this.fieldListSort="None";n.addClass([i],"e-selected");n.removeClass([this.parentElement.querySelector(".e-sort-ascend")],"e-selected");n.removeClass([this.parentElement.querySelector(".e-sort-descend")],"e-selected");break;case"Ascend":this.fieldListSort="Ascend";n.addClass([i],"e-selected");n.removeClass([this.parentElement.querySelector(".e-sort-none")],"e-selected");n.removeClass([this.parentElement.querySelector(".e-sort-descend")],"e-selected");break;case"Descend":this.fieldListSort="Descend";n.addClass([i],"e-selected");n.removeClass([this.parentElement.querySelector(".e-sort-ascend")],"e-selected");n.removeClass([this.parentElement.querySelector(".e-sort-none")],"e-selected")}this.refreshTreeView()}}catch(t){this.parent.actionFailureMethod(t)}this.parent.actionObj.actionName=this.parent.getActionCompleteName();this.parent.actionObj.actionName&&this.parent.actionCompleteMethod()}},t.prototype.applySorting=function(n,t){if(n.length>0)if("olap"===this.parent.dataType){var i=void 0,r=void 0;this.parent.dataSourceSettings.calculatedFieldSettings.length>0&&"[calculated members].[_0]"===n[0].id.toLowerCase()?(r=n[0],i=n[1],n.splice(0,2)):(i=n[0],n.splice(0,1));n="Ascend"===t?n.sort(function(n,t){return n.caption>t.caption?1:t.caption>n.caption?-1:0}):"Descend"===t?n.sort(function(n,t){return n.caption<t.caption?1:t.caption<n.caption?-1:0}):n;r?n.splice(0,0,r,i):n.splice(0,0,i)}else this.fieldTable.sortOrder="Ascend"===t?"Ascending":"Descend"===t?"Descending":"None";return n},t.prototype.onFieldAdd=function(){this.parent.dialogRenderer.updateDataSource(this.selectedNodes);this.closeTreeDialog()},t.prototype.closeTreeDialog=function(){this.selectedNodes=[];this.fieldDialog.hide();this.fieldDialog.destroy();document.getElementById(this.parent.element.id+"_FieldListTreeView")&&n.remove(document.getElementById(this.parent.element.id+"_FieldListTreeView"));this.fieldDialog=null},t.prototype.keyPress=function(n){if(13===n.keyCode&&n.target)return n.target.click(),void n.preventDefault()},t.prototype.wireFieldListEvent=function(t){n.EventHandler.add(t,"keydown",this.keyPress,this);n.EventHandler.add(t,"click",this.updateSorting,this)},t.prototype.unWireFieldListEvent=function(t){n.EventHandler.remove(t,"keydown",this.keyPress);n.EventHandler.remove(t,"click",this.updateSorting)},t.prototype.addEventListener=function(){this.parent.on(kr,this.refreshTreeView,this)},t.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(kr,this.refreshTreeView)},t.prototype.destroy=function(){var t,r,u,f,i;if(this.removeEventListener(),this.parentElement)for(t=0,r=[this.parentElement.querySelector(".e-sort-none"),this.parentElement.querySelector(".e-sort-ascend"),this.parentElement.querySelector(".e-sort-descend")];t<r.length;t++)u=r[t],u&&this.unWireFieldListEvent(u);if(this.editorSearch&&!this.editorSearch.isDestroyed&&(this.editorSearch.destroy(),this.editorSearch=null),this.fieldSearch&&!this.fieldSearch.isDestroyed&&(this.fieldSearch.destroy(),this.fieldSearch=null),this.fieldTable&&!this.fieldTable.isDestroyed){if(this.fieldTable.element)for(f=this.fieldTable.element.querySelectorAll("li"),i=0;i<f.length;i++)n.EventHandler.clearEvents(f[i]);this.fieldTable.destroy();this.fieldTable=null}this.fieldDialog&&!this.fieldDialog.isDestroyed&&(this.fieldDialog.destroy(),this.fieldDialog=null);this.treeViewElement&&this.treeViewElement.parentNode&&(this.treeViewElement.innerHTML="");this.selectedNodes=[];this.nonSearchList=null;this.parentIDs=[]},t}(),cw=function(){function t(n){this.droppableInstances=[];this.parent=n}return t.prototype.render=function(){if(!this.parent.isAdaptive){var t=n.createElement("div",{className:"e-axis-table "+("olap"===this.parent.dataType?"e-olap-axis-table":"")});this.leftAxisPanel=n.createElement("div",{className:ou});this.rightAxisPanel=n.createElement("div",{className:yo});this.parent.dialogRenderer.parentElement.appendChild(t);t.appendChild(this.leftAxisPanel);t.appendChild(this.rightAxisPanel);this.axisTable=t;this.renderAxisTable()}this.parent.axisFieldModule.render()},t.prototype.renderAxisTable=function(){for(var s,u,e,h,i=["filters","rows","columns","values"],t=0,c=i.length;t<c;t++){var r=n.createElement("div",{className:ht+"-"+i[t]}),f=n.createElement("div",{className:fu+"-container"}),o=n.createElement("div",{className:"e-axis-header",attrs:{title:this.parent.localeObj.getConstant(i[t])}});o.innerText=this.parent.localeObj.getConstant(i[t]);f.appendChild(this.getIconupdate(i[t]));f.appendChild(o);u=n.createElement("div",{className:ei+" e-"+i[t]});s="rows"===i[t]?this.parent.localeObj.getConstant("dropRowPrompt"):"columns"===i[t]?this.parent.localeObj.getConstant("dropColPrompt"):"values"===i[t]?this.parent.localeObj.getConstant("dropValPrompt"):this.parent.localeObj.getConstant("dropFilterPrompt");e=n.createElement("span",{className:te});e.innerText=s;h=new n.Droppable(u,{});this.droppableInstances.push(h);r.appendChild(f);r.appendChild(u);r.appendChild(e);t<=1?this.leftAxisPanel.appendChild(r):this.rightAxisPanel.appendChild(r);this.unWireEvent(u);this.wireEvent(u)}},t.prototype.getIconupdate=function(t){var i=n.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false"},className:fu+"-icon-container"}),r=n.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false"},className:s+" "+fu+"-"+t});return i.appendChild(r),i},t.prototype.wireEvent=function(t){n.EventHandler.add(t,"mouseover",this.updateDropIndicator,this);n.EventHandler.add(t,"mouseleave",this.updateDropIndicator,this)},t.prototype.unWireEvent=function(t){n.EventHandler.remove(t,"mouseover",this.updateDropIndicator);n.EventHandler.remove(t,"mouseleave",this.updateDropIndicator)},t.prototype.updateDropIndicator=function(t){var i=this.parent.dialogRenderer.parentElement,r;this.parent.isDragging&&t.target.classList.contains(ei)&&"mouseover"===t.type?(n.removeClass([].slice.call(i.querySelectorAll("."+vt)),kt),n.removeClass([].slice.call(i.querySelectorAll("."+vt+"-last")),kt),r=[].slice.call(t.target.querySelectorAll("."+rr)),r.length>0&&n.addClass([r[r.length-1].querySelector("."+vt+"-last")],kt)):this.parent.isDragging&&(t.target.classList.contains(oi)||"mouseleave"!==t.type)||(n.removeClass([].slice.call(i.querySelectorAll("."+vt)),kt),n.removeClass([].slice.call(i.querySelectorAll("."+vt+"-last")),kt))},t.prototype.destroy=function(){if(this.axisTable)for(var t=this.axisTable.querySelectorAll("."+ei),n=0;n<t.length;n++)this.unWireEvent(t[n]);for(n=0;n<this.droppableInstances.length;n++)this.droppableInstances[n]&&!this.droppableInstances[n].isDestroyed&&this.droppableInstances[n].destroy();this.droppableInstances=[];this.axisTable&&this.axisTable.parentNode&&this.axisTable.parentNode.removeChild(this.axisTable);this.axisTable=null;this.leftAxisPanel=null;this.rightAxisPanel=null},t}(),ga=function(){function t(n){this.parent=n;this.menuOption=new ea(this.parent);this.parent.pivotButtonModule=this;this.addEventListener();this.parent instanceof ne&&(this.axisField=new nv(this.parent));this.isDestroyed=!1}return t.prototype.renderPivotButton=function(t){var ft,e,et,p,ot=this,w,ct,it,i,g,o,v,s,lt,tt,k,dt,y,ut,pt;this.parentElement="pivotview"===this.parent.getModuleName()?this.parent.element:document.getElementById(this.parent.element.id+"_Container");!this.parent.isTabular||this.parent.isTabular&&"rows"!==t.axis?e=Array.prototype.slice.call(this.parentElement.querySelectorAll(".e-group-"+t.axis)):this.parent.isTabular&&"rows"===t.axis&&(n.isNullOrUndefined(this.parentElement.querySelectorAll("."+tr)[0])||(e=Array.prototype.slice.call(this.parentElement.querySelectorAll("."+tr))),n.isNullOrUndefined(this.parentElement.querySelectorAll("."+le)[0])||(et=Array.prototype.slice.call(this.parentElement.querySelectorAll("."+le))));"rows"===t.axis&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&n.isNullOrUndefined(this.parentElement.querySelector("."+tr))&&!n.isNullOrUndefined(e)&&(e.push(this.parent.groupingBarModule.rowPanel),p=this.parent.groupingBarModule.rowPanel);var u=n.extend([],t.field,null,!0),f=t.axis,d=-1,st="pivot"===this.parent.dataType&&("pivotfieldlist"===this.parent.getModuleName()&&this.parent.pivotGridModule?this.parent.pivotGridModule.showValuesButton:this.parent.showValuesButton);if(("row"===this.parent.dataSourceSettings.valueAxis&&"rows"===t.axis||"column"===this.parent.dataSourceSettings.valueAxis&&"columns"===t.axis)&&st&&this.parent.dataSourceSettings.values.length>1&&n.isNullOrUndefined(r.getFieldByName("[Measures]",u))&&(w=r.getFieldByName("[Measures]",this.parent.dataSourceSettings.fieldMapping),ct={name:"[Measures]",caption:this.parent.localeObj.getConstant("values"),axis:t.axis,showRemoveIcon:!w||!("showRemoveIcon"in w)||w.showRemoveIcon,allowDragAndDrop:!w||!("allowDragAndDrop"in w)||w.allowDragAndDrop},-1===this.parent.dataSourceSettings.valueIndex||this.parent.dataSourceSettings.valueIndex>u.length?(d=u.length,u.push(ct),this.parent.setProperties({dataSourceSettings:{valueIndex:-1}},!0)):(d=this.parent.dataSourceSettings.valueIndex,u.splice(d,0,ct))),"pivotfieldlist"===this.parent.getModuleName()){if(this.parentElement=document.getElementById(this.parent.element.id+"_Container"),!this.parentElement.querySelector("."+ht+"-"+f))return;it=this.parentElement.querySelector("."+ht+"-"+f).querySelector("."+te);0===u.length?n.removeClass([it],h):n.addClass([it],h);p=this.parentElement.querySelector("."+ht+"-"+f).querySelector("."+ei)}else this.parentElement=this.parent.element,n.isNullOrUndefined(this.parentElement.querySelector(".e-group-"+f))||(p=this.parentElement.querySelector(".e-group-"+f));if(p)if("pivotview"===this.parent.getModuleName()&&0===u.length)for(i=0;i<e.length;i++)(s=e[i]).classList.contains(vf)||s.classList.contains(af)||((it=n.createElement("span",{className:te})).innerText=this.parent.groupingBarSettings.allowDragAndDrop?"rows"===f?this.parent.localeObj.getConstant("rowAxisPrompt"):"columns"===f?this.parent.localeObj.getConstant("columnAxisPrompt"):"values"===f?this.parent.localeObj.getConstant("valueAxisPrompt"):"filters"===f?this.parent.localeObj.getConstant("filterAxisPrompt"):this.parent.localeObj.getConstant("allFields"):"",s.appendChild(it));else{if(!this.parent.isTabular||this.parent.isTabular&&"rows"!==t.axis)for(i=0,g=u.length;i<g;i++)for(o="pivotfieldlist"===this.parent.getModuleName()?[p]:e,v=0;v<o.length;v++)s=o[v],this.appendPivotButton(s,u,f,d,i,t);else{if(!n.isNullOrUndefined(e))for(i=0,g=u.length;i<g;i++)o="pivotfieldlist"===this.parent.getModuleName()?[p]:e,lt="row"===this.parent.dataSourceSettings.valueAxis&&this.parent.dataSourceSettings.values.length>1&&o.length>1,s=o[lt&&st?i===u.length-1?o.length-1:i%(o.length-1):lt&&!st||this.parent.dataSourceSettings.alwaysShowValueHeader&&1===this.parent.dataSourceSettings.values.length?i%(o.length-1):i%o.length],this.appendPivotButton(s,u,f,d,i,t);if(!n.isNullOrUndefined(et))for(i=0,g=u.length;i<g;i++)for(o="pivotfieldlist"===this.parent.getModuleName()?[p]:et,v=0;v<o.length;v++)s=o[v],this.appendPivotButton(s,u,f,d,i,t)}if("values"===f){var nt=n.select("."+yf,this.parentElement)?n.getInstance(n.select("."+yf,this.parentElement),a.DropDownList):null,ii=function(t){var f=e[t],r,i,o;f.classList.contains(vf)&&b.parent.pivotChartModule&&(r=u.map(function(n){return{text:n.caption?n.caption:n.name,value:n.name}}),i=b.parent,nt&&f.querySelector("."+yf)?(nt.dataSource=r,nt.value=i.chartSettings.enableMultipleAxis?r[0].value:i.pivotChartModule.currentMeasure):(o=n.createElement("div",{className:yf}),f.appendChild(o),nt=new a.DropDownList({dataSource:r,enableRtl:b.parent.enableRtl,locale:b.parent.locale,value:i.chartSettings.enableMultipleAxis?r[0].value:i.pivotChartModule.currentMeasure,width:b.parent.isAdaptive?150:200,fields:{value:"value",text:"text"},cssClass:"e-group-chart-values-drodown"+(b.parent.cssClass?" "+b.parent.cssClass:""),change:function(n){n.e&&null!==n.e&&(i.chartSettings.value=n.value)}}),nt.isStringTemplate=!0,nt.appendTo(o)))},b=this;for(i=0;i<e.length;i++)ii(i)}else if("columns"===f)for(tt=void 0,k=n.select("."+pf,this.parentElement)?n.getInstance(n.select("."+pf,this.parentElement),a.DropDownList):null,i=0;i<e.length;i++)if((s=e[i]).classList.contains(af)&&this.parent.pivotChartModule){for(var ri=this.parent.pivotChartModule.currentMeasure,ui=this.parent.chartSettings.columnDelimiter?this.parent.chartSettings.columnDelimiter:"-",fi=this.parent.chartSettings.columnHeader&&""!==this.parent.chartSettings.columnHeader?this.parent.chartSettings.columnHeader.split(ui).join(" - "):"",wt="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,c=wt.pivotValues,oi=this.parent.pivotChartModule.getColumnTotalIndex(c),l=[],bt=!1,at=0,kt=Object.keys(c);at<kt.length;at++){if(dt=kt[at],bt)break;if(y=Number(dt),c[y]&&c[y][0]&&"row"===c[y][0].axis&&(0===this.parent.dataSourceSettings.rows.length||"grand sum"!==c[y][0].type))for(var gt=c[y][0],vt="olap"===this.parent.dataType?wt.tupRowInfo[gt.ordinal]:void 0,si=c[y],yt=0,ni=Object.keys(si);yt<ni.length;yt++){var hi=ni[yt],ci=Number(hi),rt=c[y][ci],ti="olap"===this.parent.dataType&&vt&&vt.measureName?vt.measureName:rt.actualText;oi[rt.colIndex]||"value"!==rt.axis||"header"===gt.type||""===ti||ti!==ri||(bt=!0,ut="olap"===this.parent.dataType?rt.columnHeaders.toString().split(/~~|::/).join(" - "):rt.columnHeaders.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - "),l.push({value:ut,text:ut,title:(ft={},ft.title=ut,ft)}),ut===fi&&(tt=l.length))}}k&&s.querySelector("."+pf)?(k.dataSource=l,k.value=void 0!==tt?l[tt-1].value:l[0].value):(pt=n.createElement("div",{className:pf}),s.appendChild(pt),k=new a.DropDownList({dataSource:l,enableRtl:this.parent.enableRtl,locale:this.parent.locale,value:tt?l[tt-1].value:l[0]?l[0].value:"",width:"200",fields:{value:"value",text:"text",htmlAttributes:"title"},cssClass:"e-group-chart-columns-dropdown"+(this.parent.cssClass?" "+this.parent.cssClass:""),change:function(n){if(n.e&&null!==n.e){var t=ot.parent.chartSettings.columnDelimiter?ot.parent.chartSettings.columnDelimiter:"-";ot.parent.chartSettings.columnHeader=n.value.split(" - ").join(t)}}}),k.isStringTemplate=!0,k.appendTo(pt))}}},t.prototype.appendPivotButton=function(t,i,r,u,f,e){var l,p,c,a,y,v,b;if(!n.isNullOrUndefined(t)&&(this.parent.olapEngineModule&&(this.parent.olapEngineModule.fieldList[i[f].name]||"[Measures]"===i[f].name)||this.parent.engineModule)&&(l="olap"===this.parent.dataType&&("[measures]"===i[f].name.toLowerCase()||"values"===r),p="olap"===this.parent.dataType&&"values"===r,!t.classList.contains(vf)&&!t.classList.contains(af))){c=n.createElement("div",{className:rr+(0===f&&"all-fields"!==r?" e-first-btn":"")+(this.parent.isTabular?" e-tabular-pvt-btn":""),attrs:{"data-tag":r+":"+i[f].name}});this.parent.isTabular&&(c.style.width="rows"===e.axis&&t.classList.contains(tr)?"100%":"auto");a=i[f].caption?i[f].caption:i[f].name;a=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(a):a;var o=n.createElement("div",{id:this.parent.element.id+"_"+i[f].name,className:w+" "+i[f].name.replace(/[^A-Z0-9]/gi,"")+(this.parent.isTabular?" e-tabular-row-btn":""),attrs:{"data-uid":i[f].name,tabindex:"pivotview"===this.parent.getModuleName()&&this.parent.grid&&"rows"===r&&!t.classList.contains(le)?"-1":"0",isvalue:f===u||l&&!p?"true":"false","aria-disabled":"false","aria-label":a,"data-type":"olap"===this.parent.dataType?p?"isMeasureFieldsAvail":l?"isMeasureAvail":i[f].type:i[f].type,"data-caption":a,"data-basefield":this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(i[f].baseField):i[f].baseField,"data-baseitem":this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(i[f].baseItem):i[f].baseItem,role:"button"}}),k=n.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false"},className:vt}),nt=n.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false"},className:vt+"-last"}),tt=this.createButtonDragIcon(i[f],o),d=this.createButtonText(i,f,r,u);(o.appendChild(d),"all-fields"!==r)?((l||i[f].isNamedSet||i[f].isCalculatedField||(-1!==["filters","values"].indexOf(r)||u===f||"olap"===this.parent.dataType&&("pivotview"===this.parent.getModuleName()&&this.parent.enableVirtualization||"pivotfieldlist"===this.parent.getModuleName()&&void 0!==this.parent.pivotGridModule&&this.parent.pivotGridModule.enableVirtualization)||this.createSortOption(o,i[f].name,i[f]),"values"!==r&&u!==f&&this.createFilterOption(o,i[f].name,r,i[f]),"values"===r&&this.getTypeStatus(i,f,o)),i[f].isCalculatedField||"CalculatedField"===i[f].type)&&(y=n.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("editCalculatedField")},className:s+" "+g}),this.parent.allowCalculatedField&&this.parent.calculatedFieldModule&&(i[f].showEditIcon||void 0===i[f].showEditIcon)?n.removeClass([y],h):n.addClass([y],h),o.appendChild(y)),v=n.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("remove")},className:s+" "+ur}),"pivotview"===this.parent.getModuleName()?this.parent.groupingBarSettings.showRemoveIcon&&(i[f].showRemoveIcon||void 0===i[f].showRemoveIcon)?n.removeClass([v],h):n.addClass([v],h):i[f].showRemoveIcon||void 0===i[f].showRemoveIcon?n.removeClass([v],h):n.addClass([v],h),o.appendChild(v),c.appendChild(k),c.appendChild(o),c.appendChild(nt)):(c.appendChild(k),c.appendChild(o));t.appendChild(c);b=new ut.Button({enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass});b.isStringTemplate=!0;b.appendTo(o);this.unWireEvent(c,f===u&&"all-fields"!==r?"values":r,l);this.wireEvent(c,f===u&&"all-fields"!==r?"values":r,l);("pivotview"===this.parent.getModuleName()&&!this.parent.isAdaptive||"pivotfieldlist"===this.parent.getModuleName())&&(this.createDraggable(i[f],"pivotview"===this.parent.getModuleName()?d:tt),n.getInstance(o.querySelector("."+lh),n.Draggable).enableAutoScroll=!1)}},t.prototype.createButtonText=function(t,i,r,u){var o,s,e,f,h;return"filters"===r&&(s=this.updateButtontext(t[i].name)),(e="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule).fieldList&&void 0!==e.fieldList[t[i].name]&&(o="DistinctCount"===(o=e.fieldList[t[i].name].aggregateType)||"number"===e.fieldList[t[i].name].type&&"include"!==e.fieldList[t[i].name].type&&"exclude"!==e.fieldList[t[i].name].type?void 0===o?"Sum":e.fieldList[t[i].name].aggregateType:"Count"),f=t[i].caption?t[i].caption:t[i].name,f=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(f):f,h=n.createElement("span",{attrs:{title:"filters"===r?"olap"===this.parent.dataType&&"CalculatedField"===e.fieldList[t[i].name].type?f:f+" ("+s+")":"olap"===this.parent.dataType?f:this.parent.dataSourceSettings.showAggregationOnValueField&&"values"===r&&"CalculatedField"!==o?this.parent.localeObj.getConstant(o)+" "+this.parent.localeObj.getConstant("of")+" "+f:f,tabindex:"-1","aria-disabled":"false",oncontextmenu:"return false;","data-type":u===i?"":o},className:ie+" "+("pivotview"===this.parent.getModuleName()?this.parent.groupingBarSettings.allowDragAndDrop&&(t[i].allowDragAndDrop||void 0===t[i].allowDragAndDrop)?"":fe:"")}),h.innerText="filters"===r?"olap"===this.parent.dataType&&"CalculatedField"===e.fieldList[t[i].name].type?f:f+" ("+s+")":"olap"===this.parent.dataType?f:this.parent.dataSourceSettings.showAggregationOnValueField&&"values"===r&&"CalculatedField"!==o?this.parent.localeObj.getConstant(o)+" "+this.parent.localeObj.getConstant("of")+" "+f:f,h},t.prototype.getTypeStatus=function(n,t,i){var u,r;(u="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule).fieldList&&(r=u.fieldList[n[t].name],r&&"CalculatedField"!==r.aggregateType&&this.validateDropdown(r.type)&&this.createSummaryType(i,n[t].name,n[t]))},t.prototype.validateDropdown=function(n){var t=this.parent.aggregateTypes,i;if("number"!==n)return t.indexOf("Count")>-1||t.indexOf("DistinctCount")>-1;for(i=0;i<t.length;i++)if(this.parent.getAllSummaryType().indexOf(t[i])>-1)return!0;return!1},t.prototype.createSummaryType=function(t,i,r){var u=n.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("format")},className:s+" "+nu});return"pivotview"===this.parent.getModuleName()?this.parent.groupingBarSettings.showValueTypeIcon&&r.showValueTypeIcon?n.removeClass([u],h):n.addClass([u],h):r.showValueTypeIcon?n.removeClass([u],h):n.addClass([u],h),t.appendChild(u),u},t.prototype.createMenuOption=function(n){this.menuOption.render(n,this.parentElement);this.parent.pivotButtonModule=this},t.prototype.openCalculatedFieldDialog=function(t){var i=t.target.parentElement.getAttribute("data-uid"),u=r.getFieldInfo(i,this.parent);if(this.parent.actionObj.actionName=ge,this.parent.actionObj.fieldInfo=u,!this.parent.actionBeginMethod())try{"pivotview"===this.parent.getModuleName()?this.parent.isAdaptive&&this.parent.showFieldList&&this.parent.pivotFieldListModule&&!this.parent.pivotFieldListModule.isDestroyed?(this.parent.pivotFieldListModule.element.querySelector("."+st).click(),this.parent.pivotFieldListModule.dialogRenderer.adaptiveElement.select(4),this.parent.pivotFieldListModule.calculatedFieldModule.updateAdaptiveCalculatedField(!0,i)):(this.parent.isAdaptive||(this.parent.calculatedFieldModule.buttonCall=!0),this.parent.notify(dr,{edit:!0,fieldName:i})):"pivotfieldlist"===this.parent.getModuleName()&&(this.parent.isAdaptive?(this.parent.dialogRenderer.adaptiveElement.select(4),this.parent.calculatedFieldModule.updateAdaptiveCalculatedField(!0,i),this.parent.calculatedFieldModule.buttonCall=!0):(this.parent.dialogRenderer.fieldListDialog&&(this.parent.dialogRenderer.fieldListDialog.hide(),n.addClass([this.parent.element.querySelector("."+st)],gr)),this.parent.notify(dr,{edit:!0,fieldName:i}),this.parent.calculatedFieldModule&&(this.parent.calculatedFieldModule.buttonCall=!0)))}catch(t){this.parent.actionFailureMethod(t)}},t.prototype.createDraggable=function(t,i){this.draggable=new n.Draggable(i,{clone:!0,enableTailMode:!0,enableAutoScroll:!0,helper:this.createDragClone.bind(this),dragStart:this.onDragStart.bind(this),drag:this.onDragging.bind(this),dragStop:this.onDragStop.bind(this),abort:"pivotview"===this.parent.getModuleName()?this.parent.groupingBarSettings.allowDragAndDrop&&t.allowDragAndDrop?"":"."+w:t.allowDragAndDrop?"":"."+w})},t.prototype.createButtonDragIcon=function(t,i){var r=n.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false"}}),u=n.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("drag")},className:s+" "+ff+" "+(t.allowDragAndDrop||void 0===t.allowDragAndDrop?"":fe)});return r.appendChild(u),"pivotfieldlist"===this.parent.getModuleName()&&i.appendChild(r),r},t.prototype.createSortOption=function(t,i,r){var e,u,o,f;if(o="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,!1===this.parent.isDeferLayoutUpdate||this.parent.pivotGridModule&&!1===this.parent.pivotGridModule.pivotDeferLayoutUpdate)e="Descending"===o.fieldList[i].sort?su:"";else for(e="",f=0;f<this.parent.dataSourceSettings.sortSettings.length;f++)this.parent.dataSourceSettings.sortSettings[f].name===i&&(e="Descending"===this.parent.dataSourceSettings.sortSettings[f].order?su:"");return u=o.fieldList&&"None"===o.fieldList[i].sort?n.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("sort")},className:s}):n.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("sort")},className:s+" "+rf+" "+e}),this.parent.dataSourceSettings.enableSorting?"pivotview"===this.parent.getModuleName()?r.showSortIcon&&this.parent.groupingBarSettings.showSortIcon?n.removeClass([u],h):n.addClass([u],h):r.showSortIcon?n.removeClass([u],h):n.addClass([u],h):n.addClass([u],h),t.appendChild(u),u},t.prototype.createFilterOption=function(t,i,u,f){var c,o,a,l,e;if(o="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,a=r.getFieldByName(i,this.parent.dataSourceSettings.filterSettings),!1===this.parent.isDeferLayoutUpdate||this.parent.pivotGridModule&&!1===this.parent.pivotGridModule.pivotDeferLayoutUpdate)o.fieldList[i].filter=null===o.fieldList[i].filter?[]:o.fieldList[i].filter,c="Server"===this.parent.dataSourceSettings.mode&&!a||"Local"===this.parent.dataSourceSettings.mode&&0===o.fieldList[i].filter.length?o.fieldList[i].isExcelFilter?uf:ue:uf;else for(c=ue,l=0;l<this.parent.dataSourceSettings.filterSettings.length;l++)this.parent.dataSourceSettings.filterSettings[l].name===i&&(c=uf);return e=n.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("filter")},className:ii+" "+s+" "+c}),(this.parent.dataSourceSettings.allowLabelFilter||this.parent.dataSourceSettings.allowValueFilter)&&"filters"!==u||this.parent.dataSourceSettings.allowMemberFilter?n.removeClass([e],h):n.addClass([e],h),"pivotview"===this.parent.getModuleName()?((this.parent.dataSourceSettings.allowLabelFilter||this.parent.dataSourceSettings.allowValueFilter)&&"filters"!==u||this.parent.dataSourceSettings.allowMemberFilter)&&this.parent.groupingBarSettings.showFilterIcon&&f.showFilterIcon?n.removeClass([e],h):n.addClass([e],h):f.showFilterIcon&&((this.parent.dataSourceSettings.allowLabelFilter||this.parent.dataSourceSettings.allowValueFilter)&&"filters"!==u||this.parent.dataSourceSettings.allowMemberFilter)?n.removeClass([e],h):n.addClass([e],h),t.appendChild(e),e},t.prototype.updateButtontext=function(n){var t,i,r=(t="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule).fieldList[n].filter.length,o=t.fieldList[n].filterType,s=t.fieldList[n].dateMember.length,f=t.fieldList[n].filter[0],h;if("olap"===this.parent.dataType)i=this.updateOlapButtonText(t,n,f,r);else if("include"===o)1===r?i=f:r>1&&(i=r===s?this.parent.localeObj.getConstant("all"):this.parent.localeObj.getConstant("multipleItems"));else if("exclude"===o){if(1===r)i=2===s?f!==t.fieldList[n].dateMember[0].actualText?f:t.fieldList[n].dateMember[0].actualText:this.parent.localeObj.getConstant("multipleItems");else if(r>1){var u=void 0,e=Object.keys(t.fieldList[n].members),c=t.fieldList[n].filter;if(r===e.length-1){for(u=0;u<e.length;u++)if(h=e[u],-1===c.indexOf(h)){i=e[u];break}}else i=this.parent.localeObj.getConstant("multipleItems")}}else i=this.parent.localeObj.getConstant("all");return i},t.prototype.updateOlapButtonText=function(n,t,i,r){var s,a=n.fieldList[t].actualFilter,f,e,h,l,u;if(a.length>0){if(f=n.fieldList[t].members,e=[],n.fieldList[t].filterMembers.length>0){for(var o={},c=0,v=a;c<v.length;c++)o[u=v[c]]=u,f[u]&&(o=this.parent.pivotCommon.eventBase.getParentNode(t,u,o));for(h=0,l=o?Object.keys(o):[];h<l.length;h++)f[u=l[h]].isSelected&&(f[u].parent&&f[f[u].parent].isSelected||e.push(u));i=1===e.length?f[e[0]].caption:i}r=0===e.length?r:e.length}return 0===r?s=n.fieldList[t].allMember?n.fieldList[t].allMember:this.parent.localeObj.getConstant("all"):1===r?s=i:r>1&&(s=this.parent.localeObj.getConstant("multipleItems")),s},t.prototype.createDragClone=function(t){var r=n.closest(t.element,"."+w),i=n.createElement("div",{id:this.parent.element.id+"_DragClone",className:"e-button-drag-clone"+(this.parent.cssClass?" "+this.parent.cssClass:"")}),u=n.createElement("span",{className:ru});return u.innerText=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(r.textContent):r.textContent,i.appendChild(u),document.body.appendChild(i),i},t.prototype.onDragStart=function(t){var i=this,u=n.closest(t.element,"."+w),f=document.getElementById(this.parent.element.id+"_DragClone"),e=r.getFieldInfo(u.getAttribute("data-uid"),this.parent),o={fieldName:e.fieldName,fieldItem:e.fieldItem,axis:e.axis,dataSourceSettings:r.getClonedDataSourceSettings(this.parent.dataSourceSettings),cancel:!1};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(hl,o,function(r){var o,c,l,e,s,h;if(r.cancel)i.parent.isDragging=!1,i.draggable.intDestroy(t.event),n.detach(f);else if(i.parent.isDragging=!0,o=("olap"===i.parent.dataType?i.parent.olapEngineModule:i.parent.engineModule).fieldList[u.getAttribute("data-uid")],c=[lu,vr,yr],(n.addClass([u],vu),f&&"Popup"===("pivotfieldlist"===i.parent.getModuleName()&&i.parent.renderMode))&&(l=i.parent,f.style.zIndex=(l.dialogRenderer.fieldListDialog.zIndex+1).toString()),o&&"CalculatedField"===o.aggregateType)for(e=0,s=c;e<s.length;e++)h=s[e],n.addClass([i.parentElement.querySelector("."+h)],au),i.parentElement.querySelector("."+h).querySelectorAll(".e-pivot-button").forEach(function(n){n.style.cursor="no-drop"})})},t.prototype.onDragging=function(t){this.draggable.setProperties({cursorAt:{top:!n.isNullOrUndefined(t.event.targetTouches)||n.Browser.isDevice?60:-20}})},t.prototype.onDragStop=function(t){var r,i,u,f;for(this.parent.isDragging=!1,t.target&&t.element&&n.closest(t.element,"."+go)&&!n.closest(t.target,"."+oi)&&(t.cancel=!0),r=n.closest(t.element,"."+w),n.removeClass([].slice.call(this.parentElement.querySelectorAll("."+w)),vu),n.removeClass([].slice.call(this.parentElement.querySelectorAll("."+vt)),kt),i=0,u=[lu,vr,yr];i<u.length;i++)f=u[i],n.removeClass([this.parentElement.querySelector("."+f)],au),this.parentElement.querySelector("."+f).querySelectorAll(".e-pivot-button").forEach(function(n){n.style.cursor="default"});this.parent.pivotCommon.filterDialog.dialogPopUp&&this.parent.pivotCommon.filterDialog.dialogPopUp.close();document.getElementById(this.parent.element.id+"_DragClone")&&n.remove(document.getElementById(this.parent.element.id+"_DragClone"));document.body.style.cursor="auto";this.isButtonDropped(t.target,r)&&!t.cancel&&(this.parent.pivotCommon.dataSourceUpdate.control="pivotview"===this.parent.getModuleName()?this.parent:this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,this.parent.pivotCommon.nodeStateModified.onStateModified(t,r.getAttribute("data-uid")))&&(this.updateDataSource(),this.parent.axisFieldModule.render())},t.prototype.isButtonDropped=function(t,i){var f=n.closest(i,"."+oi),l=n.closest(t,"."+oi),s=!0,c;if(f&&f===l){for(var u=[].slice.call(f.querySelectorAll("."+w)),h=n.closest(t,"."+rr),e=void 0,o=-1,r=0,a=u.length;r<a;r++)(u[r].id===i.id&&(e=r),h)&&(c=h.querySelector("."+w),u[r].id===c.id&&(o=r));(e===o||e===u.length-1&&-1===o)&&(n.removeClass([].slice.call(this.parentElement.querySelectorAll("."+vt)),kt),s=!1)}return s},t.prototype.updateSorting=function(t){var u=n.closest(t.target,"."+w),i=r.getFieldInfo(u?u.getAttribute("data-uid"):"",this.parent),f;if(!t.target.classList.contains(ii)&&!t.target.classList.contains(ur)&&!t.target.classList.contains(ff)&&u&&i.fieldItem&&(i.fieldItem.showSortIcon||n.isNullOrUndefined(i.fieldItem.showSortIcon))&&!i.fieldItem.isCalculatedField){if(this.parent.actionObj.actionName=fh,this.parent.actionObj.fieldInfo=i,this.parent.actionBeginMethod())return;try{!(this.parent instanceof ne||this.parent.groupingBarSettings.showSortIcon)||!this.parent.dataSourceSettings.enableSorting||"olap"===this.parent.dataType&&("pivotfieldlist"===this.parent.getModuleName()&&void 0!==this.parent.pivotGridModule&&this.parent.pivotGridModule.enableVirtualization||"pivotview"===this.parent.getModuleName()&&this.parent.enableVirtualization)||((this.parent.pivotCommon.eventBase.updateSorting(t),this.parent.staticPivotGridModule&&(this.parent.staticPivotGridModule.actionObj=this.parent.actionObj),!1===this.parent.isDeferLayoutUpdate||this.parent.pivotGridModule&&!1===this.parent.pivotGridModule.pivotDeferLayoutUpdate||"pivotfieldlist"!==this.parent.getModuleName())&&(f={sortInfo:this.parent.lastSortInfo},this.parent.actionObj.actionInfo=f,this.updateDataSource(!0)),this.parent instanceof ne&&(this.axisField.render(),this.parent.isPopupView&&this.parent.pivotGridModule?this.parent.pivotGridModule.notify(ni,this):this.parent.staticPivotGridModule&&this.parent.staticPivotGridModule.notify(ni,this)))}catch(t){this.parent.actionFailureMethod(t)}}},t.prototype.updateDataSource=function(n){!1===this.parent.isDeferLayoutUpdate||this.parent.pivotGridModule&&!1===this.parent.pivotGridModule.pivotDeferLayoutUpdate||"pivotview"===this.parent.getModuleName()?this.parent.updateDataSource(n):"pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView&&this.parent.pivotGridModule?("olap"===this.parent.dataType?this.parent.pivotGridModule.olapEngineModule=this.parent.olapEngineModule:this.parent.pivotGridModule.engineModule=this.parent.engineModule,this.parent.pivotGridModule.notify(ni,this),this.parent.pivotGridModule.setProperties({dataSourceSettings:this.parent.dataSourceSettings.properties},!0)):this.parent.triggerPopulateEvent()},t.prototype.updateFiltering=function(n){var t=this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,i=n.target.parentElement.getAttribute("data-uid"),u=r.getFieldInfo(i,this.parent);if(this.parent.actionObj.actionName=eh,this.parent.actionObj.fieldInfo=u,!this.parent.actionBeginMethod())try{"pivotfieldlist"===t.getModuleName()?o.showSpinner(t.fieldListSpinnerElement):t.showWaitingPopup();t.mouseEventArgs=n;t.filterTargetID="pivotfieldlist"!==this.parent.pivotCommon.moduleName?this.parent.element:document.getElementById(this.parent.pivotCommon.parentID+"_Container");"Server"===t.dataSourceSettings.mode?this.parent.engineModule.fieldList[i].members&&Object.keys(this.parent.engineModule.fieldList[i].members).length>0?this.updateFilterEvents():this.parent.getEngine("fetchFieldMembers",null,null,null,null,null,i):("pivot"!==t.dataType||this.parent.engineModule.fieldList[i].isMembersFilled||this.parent.engineModule.fetchFieldMembers(i),this.updateFilterEvents())}catch(n){this.parent.actionFailureMethod(n)}},t.prototype.updateFilterEvents=function(){var n=this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,t;this.parent.pivotCommon.eventBase.updateFiltering(n.mouseEventArgs);t=n.mouseEventArgs.target;this.fieldName=t.parentElement.getAttribute("data-uid");this.parent.pivotCommon.filterDialog.dialogPopUp&&this.bindDialogEvents();"pivotfieldlist"===n.getModuleName()?o.hideSpinner(n.fieldListSpinnerElement):n.hideWaitingPopup()},t.prototype.bindDialogEvents=function(){this.parent.pivotCommon.filterDialog.allowExcelLikeFilter&&this.parent.pivotCommon.filterDialog.tabObj?(this.index=this.parent.pivotCommon.filterDialog.tabObj.selectedItem,this.updateDialogButtonEvents(),this.parent.pivotCommon.filterDialog.dialogPopUp.buttons=this.buttonModel(),this.parent.pivotCommon.filterDialog.dialogPopUp.dataBind(),this.parent.pivotCommon.filterDialog.tabObj.selected=this.tabSelect.bind(this)):this.parent.dataSourceSettings.allowMemberFilter&&(this.index=0,this.updateDialogButtonEvents())},t.prototype.buttonModel=function(){return[{isFlat:!1,buttonModel:{cssClass:"e-clear-filter-button"+(this.parent.pivotCommon.filterDialog.allowExcelLikeFilter?"":" "+h)+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:"e-icons e-clear-filter-icon",enableRtl:this.parent.enableRtl,content:this.parent.localeObj.getConstant("clearFilter"),disabled:!this.parent.pivotCommon.filterDialog.filterObject},click:this.ClearFilter.bind(this)},{isFlat:!1,buttonModel:{cssClass:wt+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0},click:0===this.index?this.updateFilterState.bind(this,this.fieldName):this.updateCustomFilter.bind(this)},{isFlat:!1,click:this.parent.pivotCommon.filterDialog.closeFilterDialog.bind(this.parent.pivotCommon.filterDialog),buttonModel:{cssClass:cu+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}]},t.prototype.tabSelect=function(t){this.index=t.selectedIndex;this.updateDialogButtonEvents();n.removeClass([].slice.call(this.parent.pivotCommon.filterDialog.dialogPopUp.element.querySelectorAll(".e-selected-tab")),"e-selected-tab");t.selectedIndex>0&&n.addClass([this.parent.pivotCommon.filterDialog.dialogPopUp.element.querySelector(".e-filter-div-content."+(1===t.selectedIndex&&this.parent.dataSourceSettings.allowLabelFilter?"e-label-filter":"e-value-filter"))],"e-selected-tab");0===t.selectedIndex?this.parent.pivotCommon.filterDialog.updateCheckedState():(this.parent.pivotCommon.filterDialog.dialogPopUp.buttons[0].buttonModel.disabled=!1,this.parent.pivotCommon.filterDialog.dialogPopUp.element.querySelector("."+wt).removeAttribute("disabled"))},t.prototype.updateDialogButtonEvents=function(){this.parent.pivotCommon.filterDialog.dialogPopUp.buttons=this.buttonModel();this.parent.pivotCommon.filterDialog.dialogPopUp.dataBind()},t.prototype.updateCustomFilter=function(){var t,i=this,f=this.parent.pivotCommon.filterDialog.dialogPopUp.element.querySelector(".e-selected-tab"),e=f.getAttribute("data-fieldname"),v=f.getAttribute("data-selectedField"),s=f.getAttribute("data-type"),d=f.getAttribute("data-measure"),w=f.getAttribute("data-operator"),o=f.getAttribute("data-value1"),h=f.getAttribute("data-value2"),c="value"===s?"Value":"date"===s?"Date":"number"===s?"Number":"Label",u={name:e,type:c,measure:d,condition:w,value1:"date"===s?new Date(o):o,value2:"date"===s?new Date(h):h},l,y,a,b,p,k;if("olap"===this.parent.dataType)for(u.selectedField=v,this.removeDataSourceSettings(e,v,c),l=0,y=this.parent.dataSourceSettings.filterSettings;l<y.length;l++)a=y[l],a.name===e&&a.selectedField===v&&(t=a);else t=r.getFilterItemByName(e,this.parent.dataSourceSettings.filterSettings);if(n.isNullOrUndefined(o)||""===o||["Between","NotBetween"].indexOf(w)>-1&&(n.isNullOrUndefined(h)||""===h))return b=c.toLowerCase()+(n.isNullOrUndefined(o)||""===o?"_input_option_1":"_input_option_2"),p=n.select("#"+this.parent.element.id+"_"+b,f),n.addClass([p],as),void p.focus();k={cancel:!1,filterSettings:u,dataSourceSettings:r.getClonedDataSourceSettings(this.parent.dataSourceSettings)};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(sl,k,function(n){n.cancel||(u=n.filterSettings,t?((t=t.properties?t.properties:t).type=u.type,t.measure=u.measure,t.condition=u.condition,t.value1=u.value1,t.value2=u.value2,"olap"===i.parent.dataType&&(t.selectedField=u.selectedField)):i.parent.dataSourceSettings.filterSettings.push(u));"Value"!==c&&(i.parent.lastFilterInfo=r.getFilterItemByName(e,i.parent.dataSourceSettings.filterSettings),i.parent.lastFilterInfo=i.parent.lastFilterInfo.properties?i.parent.lastFilterInfo.properties:i.parent.lastFilterInfo);i.parent.pivotCommon.filterDialog.dialogPopUp.close();n.cancel||(i.refreshPivotButtonState(e,!0),i.updateDataSource(!0))})},t.prototype.ClearFilter=function(){var t=this.parent.pivotCommon.filterDialog.dialogPopUp.element,n=t.getAttribute("data-fieldname"),i=t.querySelector(".e-selected-tab"),u,f;(this.parent.pivotCommon.filterDialog.dialogPopUp.close(),"olap"===this.parent.dataType&&i)?(u=i.getAttribute("data-selectedField"),this.removeDataSourceSettings(n,u)):this.removeDataSourceSettings(n);f=r.getFilterItemByName(n,this.parent.dataSourceSettings.filterSettings);this.refreshPivotButtonState(n,!!f);this.updateDataSource(!0)},t.prototype.removeButton=function(n){var t=this,f=n.target,u=f.parentElement.getAttribute("data-uid"),i=r.getFieldInfo(u,this.parent),e;if(this.parent.actionObj.actionName=no,this.parent.actionObj.fieldInfo=i,!this.parent.actionBeginMethod()){e={cancel:!1,fieldName:u,dataSourceSettings:r.getClonedDataSourceSettings(this.parent.dataSourceSettings),fieldItem:i.fieldItem,axis:i.axis};try{("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(th,e,function(n){n.cancel||("true"===f.parentElement.getAttribute("isvalue")?(t.parent.setProperties({dataSourceSettings:{values:[]}},!0),"olap"===t.parent.dataType&&t.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport("[Measures]")):(t.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport(u),"pivot"===t.parent.dataType&&t.parent.showValuesButton&&t.parent.dataSourceSettings.values.length>1&&i.position<t.parent.dataSourceSettings.valueIndex&&("row"===t.parent.dataSourceSettings.valueAxis&&"rows"===n.axis||"column"===t.parent.dataSourceSettings.valueAxis&&"columns"===n.axis)&&t.parent.setProperties({dataSourceSettings:{valueIndex:t.parent.dataSourceSettings.valueIndex-1}},!0),"olap"===t.parent.dataType&&0===t.parent.dataSourceSettings.values.length&&t.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport("[Measures]")),"pivotfieldlist"===t.parent.getModuleName()&&t.parent.axisFieldModule.render(),t.updateDataSource())})}catch(n){this.parent.actionFailureMethod(n)}}},t.prototype.nodeStateModified=function(t){var i=n.closest(t.node,"li"),r=i.getAttribute("data-fieldname"),f,u;"all"===i.getAttribute("data-memberId")?(this.parent.pivotCommon.filterDialog.memberTreeView.nodeChecked=null,"check"===t.action?this.parent.pivotCommon.filterDialog.memberTreeView.checkAll():this.parent.pivotCommon.filterDialog.memberTreeView.uncheckAll(),"olap"===this.parent.dataType&&this.parent.olapEngineModule&&!this.parent.olapEngineModule.fieldList[r].isHierarchy&&this.updateNodeStates(this.parent.pivotCommon.filterDialog.memberTreeView.getAllCheckedNodes(),r),this.checkedStateAll(t.action),this.parent.pivotCommon.filterDialog.memberTreeView.nodeChecked=this.nodeStateModified.bind(this)):("olap"===this.parent.dataType&&this.parent.olapEngineModule&&!this.parent.olapEngineModule.fieldList[r].isHierarchy&&(f=this.parent.pivotCommon.filterDialog.memberTreeView.getAllCheckedNodes(),this.updateNodeStates(f,r)),u=this.parent.pivotCommon.currentTreeItemsPos[i.getAttribute("data-memberId")].index,this.parent.pivotCommon.currentTreeItems[u]&&(this.parent.pivotCommon.currentTreeItems[u].isSelected="check"===t.action,this.parent.pivotCommon.currentTreeItemsPos[i.getAttribute("data-memberId")].isSelected="check"===t.action));this.parent.pivotCommon.filterDialog.updateCheckedState()},t.prototype.checkedStateAll=function(n){for(var i,u,t,f={},r=0,e=this.parent.pivotCommon.searchTreeItems;r<e.length;r++)(t=e[r]).isSelected="check"===n,f[t.htmlAttributes["data-memberId"]]=t.htmlAttributes["data-memberId"];for(i=0,u=this.parent.pivotCommon.currentTreeItems;i<u.length;i++)void 0!==f[(t=u[i]).htmlAttributes["data-memberId"]]&&(t.isSelected="check"===n,this.parent.pivotCommon.currentTreeItemsPos[t.htmlAttributes["data-memberId"]].isSelected="check"===n)},t.prototype.updateNodeStates=function(n,t){var f=this.parent.pivotCommon.engineModule.fieldList[t],r=f.members,e=f.currrentMembers,o,a,s,v,h,c,y,u,l,p,i;if(f.searchMembers.length>0){for(o=0,a=Object.keys(e);o<a.length;o++)e[u=a[o]]&&(e[u].isSelected=!1),r[u]&&(r[u].isSelected=!1,this.parent.pivotCommon.filterDialog.memberTreeView.element.querySelector('li[data-memberId="'+u+'"]')&&(h=this.parent.pivotCommon.filterDialog.memberTreeView.element.querySelector('li[data-memberId="'+u+'"]'))&&!h.querySelector("ul")&&this.parent.pivotCommon.eventBase.updateChildNodeStates(f.filterMembers,t,u,!1));for(s=0,v=n;s<v.length;s++)r[i=v[s]]&&this.parent.pivotCommon.filterDialog.memberTreeView.element.querySelector('li[data-memberId="'+i+'"]')&&(h=this.parent.pivotCommon.filterDialog.memberTreeView.element.querySelector('li[data-memberId="'+i+'"]'))&&!h.querySelector("ul")&&(r[i].isSelected=!0,this.parent.pivotCommon.eventBase.updateChildNodeStates(f.filterMembers,t,i,!0)),e[i]&&(e[i].isSelected=!0)}else{for(c=0,y=Object.keys(r);c<y.length;c++)r[u=y[c]].isSelected&&(r[u].isSelected=!1);for(l=0,p=n;l<p.length;l++)r[i=p[l]]&&(r[i].isSelected=!0,this.parent.pivotCommon.eventBase.updateChildNodeStates(f.filterMembers,t,i,!0))}},t.prototype.updateFilterState=function(n){var i=this,f=!1,t={items:[],name:n,type:"Include"},u="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,o,s,v,w,h,y,e,c,p,l,a,b;if("olap"===this.parent.dataType&&u&&!u.fieldList[n].isHierarchy)for(o=u.fieldList[n].members,s=u.fieldList[n].currrentMembers,(t.items=this.parent.pivotCommon.filterDialog.memberTreeView.getAllCheckedNodes(),t.levelCount=u.fieldList[n].levelCount,f=t.items.length!==this.parent.pivotCommon.filterDialog.memberTreeView.fields.dataSource.length,u.fieldList[n].searchMembers.length>0&&!f)&&(v=Object.keys(o).length,w=Object.keys(s).length,f=v!==w||v!==t.items.length),h=0,y=t.items;h<y.length;h++)e=y[h],u.fieldList[n].searchMembers.length>0&&s[e]?s[e].isSelected=!0:o[e]&&(o[e].isSelected=!0);else{for(c=0,p=this.parent.pivotCommon.searchTreeItems;c<p.length;c++)l=p[c],l.isSelected&&(this.parent.pivotCommon.isDateField?t.items.push(l.actualText):t.items.push(l.htmlAttributes["data-memberId"]));f=t.items.length!==this.parent.pivotCommon.currentTreeItems.length}if("olap"===this.parent.dataType&&this.removeDataSourceSettings(n),this.parent.allowDeferLayoutUpdate)for(u.fieldList[t.name].filterType=t.type.toLowerCase(),u.fieldList[t.name].filter=[],a=0;a<t.items.length;a++)u.fieldList[t.name].filter.push(t.items[a]);b={filterSettings:t,dataSourceSettings:r.getClonedDataSourceSettings(this.parent.dataSourceSettings),cancel:!1};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(sl,b,function(u){var e,l,s,o,h,c;if(t=u.filterSettings,!u.cancel){if(r.getFilterItemByName(n,i.parent.dataSourceSettings.filterSettings))for(e=0;e<i.parent.dataSourceSettings.filterSettings.length;e++)if(i.parent.dataSourceSettings.filterSettings[e].name===n){i.parent.dataSourceSettings.filterSettings.splice(e,1);break}i.parent.dataSourceSettings.filterSettings.push(t)}for((i.parent.pivotCommon.filterDialog.dialogPopUp.close(),u.cancel)||(i.refreshPivotButtonState(n,f),f||(i.removeDataSourceSettings(n),t={}),i.parent.lastFilterInfo=t,l={filterInfo:i.parent.lastFilterInfo},i.parent.actionObj.actionInfo=l,i.updateDataSource(!0),s=i,s.parent instanceof ne&&s.axisField.render()),o=0,h=[].slice.call(i.parentElement.querySelectorAll(".e-pivot-button"));o<h.length;o++)if(c=h[o],c.getAttribute("data-uid")===n){c.focus();break}})},t.prototype.refreshPivotButtonState=function(t,i){for(var r,e,u=0,f=[].slice.call(this.parentElement.querySelectorAll(".e-pivot-button"));u<f.length;u++)if(e=f[u],e.getAttribute("data-uid")===t){r=e.querySelector("."+ii);break}r&&(i?(n.removeClass([r],ue),n.addClass([r],uf)):(n.removeClass([r],uf),n.addClass([r],ue)))},t.prototype.removeDataSourceSettings=function(n,t,i){for(var u=this.parent.dataSourceSettings.filterSettings,r=0,f=u.length;r<f;r++)if("olap"===this.parent.dataType&&t){if(!i&&u[r].name===n&&u[r].selectedField===t){u.splice(r,1);break}i&&u[r].type!==i&&u[r].name===n&&(u.splice(r,1),f--,r--)}else if(u[r].name===n){if(u.splice(r,1),"olap"!==this.parent.dataType)break;f--;r--}},t.prototype.updateDropIndicator=function(t){if(this.parent.isDragging&&(n.removeClass([].slice.call(this.parentElement.querySelectorAll("."+vt+"-last")),kt),n.removeClass([].slice.call(this.parentElement.querySelectorAll("."+vt)),kt),n.closest(t.target,"."+oi))){var i=n.closest(t.target,"."+rr);n.addClass([i.querySelector("."+vt)],kt)}},t.prototype.wireEvent=function(t,i,r){n.EventHandler.add(t,"mouseover",this.updateDropIndicator,this);r||(-1===["filters","values"].indexOf(i)&&null!==t.querySelector("."+w)&&n.EventHandler.add(t.querySelector("."+w),"click",this.updateSorting,this),"values"!==i&&null!==t.querySelector("."+ii)&&n.EventHandler.add(t.querySelector("."+ii),"click",this.updateFiltering,this),"values"===i&&null!==t.querySelector("."+nu)&&n.EventHandler.add(t.querySelector("."+nu),"click",this.createMenuOption,this));null!==t.querySelector("."+g)&&n.EventHandler.add(t.querySelector("."+g),"click",this.openCalculatedFieldDialog,this);null!==t.querySelector("."+ur)&&n.EventHandler.add(t.querySelector("."+ur),"click",this.removeButton,this)},t.prototype.unWireEvent=function(t,i,r){n.EventHandler.remove(t,"mouseover",this.updateDropIndicator);r||(-1===["filters","values"].indexOf(i)&&null!==t.querySelector("."+w)&&n.EventHandler.remove(t.querySelector("."+w),"click",this.updateSorting),"values"!==i&&null!==t.querySelector("."+ii)&&n.EventHandler.remove(t.querySelector("."+ii),"click",this.updateFiltering),"values"===i&&null!==t.querySelector("."+nu)&&n.EventHandler.remove(t.querySelector("."+nu),"click",this.createMenuOption));null!==t.querySelector("."+g)&&n.EventHandler.remove(t.querySelector("."+g),"click",this.openCalculatedFieldDialog);null!==t.querySelector("."+ur)&&n.EventHandler.remove(t.querySelector("."+ur),"click",this.removeButton)},t.prototype.addEventListener=function(){this.handlers={load:this.renderPivotButton};this.parent.isDestroyed||this.parent.on(de,this.handlers.load,this)},t.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(de,this.handlers.load)},t.prototype.destroy=function(){this.removeEventListener();this.cleanupButtonElements();this.menuOption&&(this.menuOption.destroy(),this.menuOption=null);this.cleanupDropdowns();this.draggable&&!this.draggable.isDestroyed&&(this.draggable.destroy(),this.draggable=null);var t=document.getElementById(this.parent.element.id+"_DragClone");t&&n.remove(t);this.axisField&&(this.axisField=null);this.handlers=null;this.isDestroyed=!0},t.prototype.cleanupButtonElements=function(){var i,u,f,t,r;if((this.parentElement="pivotview"===this.parent.getModuleName()?this.parent.element:document.getElementById(this.parent.element.id+"_Container"),this.parentElement)&&(i=this.parentElement.querySelectorAll("."+rr),i&&i.length>0))for(u=0;u<i.length;u++)f=i[u],n.EventHandler.remove(f,"mouseover",this.updateDropIndicator),t=f.querySelector("."+w),t&&(n.EventHandler.remove(t,"click",this.updateSorting),r=n.getInstance(t,ut.Button),r&&!r.isDestroyed&&(r.destroy(),r=null),t.remove(),t=null)},t.prototype.cleanupDropdowns=function(){var r,t,u,i;this.parentElement&&(r=n.select("."+yf,this.parentElement),r&&(t=n.getInstance(r,a.DropDownList),t&&!t.isDestroyed&&t.destroy()),u=n.select("."+pf,this.parentElement),u&&(i=n.getInstance(u,a.DropDownList),i&&!i.isDestroyed&&i.destroy()))},t}(),nv=function(){function n(n){this.parent=n}return n.prototype.render=function(){(!this.parent.pivotButtonModule||this.parent.pivotButtonModule&&this.parent.pivotButtonModule.isDestroyed)&&new ga(this.parent);this.parent.pivotButtonModule.cleanupButtonElements();this.createPivotButtons()},n.prototype.createPivotButtons=function(){var i=[this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.values,this.parent.dataSourceSettings.filters],n=this.parent.dialogRenderer.parentElement,r;if(n.querySelector("."+ht+"-filters")&&(n.querySelector("."+ht+"-filters").querySelector("."+ei).innerHTML=""),n.querySelector("."+ht+"-rows")&&(n.querySelector("."+ht+"-rows").querySelector("."+ei).innerHTML=""),n.querySelector("."+ht+"-columns")&&(n.querySelector("."+ht+"-columns").querySelector("."+ei).innerHTML=""),n.querySelector("."+ht+"-values")&&(n.querySelector("."+ht+"-values").querySelector("."+ei).innerHTML=""),(this.parent.engineModule&&this.parent.engineModule.fieldList&&Object.keys(this.parent.engineModule.fieldList).length>0||"pivot"!==this.parent.dataType)&&("pivot"===this.parent.dataType&&this.parent.dataSourceSettings.dataSource&&(!(this.parent.dataSourceSettings.dataSource instanceof nt.DataManager)&&this.parent.dataSourceSettings.dataSource.length>0||this.parent.dataSourceSettings.dataSource instanceof nt.DataManager&&this.parent.engineModule.data&&this.parent.engineModule.data.length>0)||"olap"===this.parent.dataType&&this.parent.dataSourceSettings.url&&""!==this.parent.dataSourceSettings.url||"Server"===this.parent.dataSourceSettings.mode&&""!==this.parent.dataSourceSettings.url))for(var u=["rows","columns","values","filters"],t=0,f=i.length;t<f;t++)i[t]&&(r={field:i[t],axis:u[t].toString()},this.parent.notify(de,r))},n.prototype.destroy=function(){var r=this.parent.dialogRenderer.parentElement,n,i,u,t;if(r)for(n=0,i=["."+ht+"-filters","."+ht+"-rows","."+ht+"-columns","."+ht+"-values"];n<i.length;n++)u=i[n],t=r.querySelector(u),t&&t.querySelector("."+ei)&&(t.querySelector("."+ei).innerHTML="")},n}(),lw=function(){function n(n){this.parent=n;this.parent.dialogRenderer=new sw(this.parent);this.parent.treeViewModule=new hw(this.parent);this.parent.axisTableModule=new cw(this.parent);this.parent.axisFieldModule=new nv(this.parent)}return n.prototype.render=function(){this.parent.dialogRenderer.render();this.parent.isAdaptive||this.parent.treeViewModule.render();this.parent.axisTableModule.render()},n}(),aw=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),k=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},ne=function(t){function i(n,i){var r=t.call(this,n,i)||this;return r.pivotChange=!1,r.isRequiredUpdate=!0,r.lastSortInfo={},r.lastFilterInfo={},r.lastAggregationInfo={},r.lastCalcFieldInfo={},r.isPopupView=!1,r.enableValueSorting=!1,r.request="undefined"!=typeof window?new XMLHttpRequest:null,r.remoteData=[],r.actionObj={},r.destroyEngine=!1,r.defaultFieldListOrder="None",r.isDeferUpdateApplied=!1,r.isInitial=!0,r}return aw(i,t),i.prototype.requiredModules=function(){var n=[];return this.allowCalculatedField&&n.push({args:[this],member:"calculatedField"}),n},i.prototype.getAllSummaryType=function(){return["Sum","Count","DistinctCount","Product","Min","Max","Avg","Median","Index","PopulationVar","SampleVar","PopulationStDev","SampleStDev","RunningTotals","PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"]},i.prototype.preRender=function(){this.dataSourceSettings&&"SSAS"===this.dataSourceSettings.providerType?(this.olapEngineModule=new wa,this.dataType="olap"):(this.engineModule=new ul,this.dataType="pivot");this.isAdaptive=n.Browser.isDevice;this.globalize=new n.Internationalization(this.locale);this.renderModule=new lw(this);this.defaultLocale={staticFieldList:"Pivot Field List",fieldList:"Field List",dropFilterPrompt:"Drop filter here",dropColPrompt:"Drop column here",dropRowPrompt:"Drop row here",dropValPrompt:"Drop value here",addPrompt:"Add field here",adaptiveFieldHeader:"Choose field",centerHeader:"Drag fields between axes below:",add:"Add",drag:"Drag",filter:"Filter",filtered:"Filtered",sort:"Sort",remove:"Remove",filters:"Filters",rows:"Rows",columns:"Columns",values:"Values",CalculatedField:"Calculated Field",createCalculatedField:"Create Calculated Field",fieldName:"Enter the field name",error:"Error",invalidFormula:"Invalid formula.",dropText:'Example: ("Sum(Order_Count)" + "Sum(In_Stock)") * 250',dropTextMobile:"Add fields and edit formula here.",dropAction:"Calculated field cannot be place in any other region except value axis.",search:"Search",close:"Close",cancel:"Cancel","delete":"Delete",alert:"Alert",warning:"Warning",ok:"OK",allFields:"All Fields",formula:"Formula",fieldExist:"A field already exists in this name. Please enter a different name.",confirmText:"A calculation field already exists in this name. Do you want to replace it?",noMatches:"No matches",format:"Summaries values by",edit:"Edit",clear:"Clear",clearCalculatedField:"Clear edited field info",editCalculatedField:"Edit calculated field",sortAscending:"Sort ascending order",sortDescending:"Sort descending order",sortNone:"Sort data order",formulaField:"Drag and drop fields to formula",dragField:"Drag field to formula",clearFilter:"Clear",by:"by",enterValue:"Enter value",chooseDate:"Enter date",all:"All",multipleItems:"Multiple items",Equals:"Equals",DoesNotEquals:"Does Not Equal",BeginWith:"Begins With",DoesNotBeginWith:"Does Not Begin With",EndsWith:"Ends With",DoesNotEndsWith:"Does Not End With",Contains:"Contains",DoesNotContains:"Does Not Contain",GreaterThan:"Greater Than",GreaterThanOrEqualTo:"Greater Than Or Equal To",LessThan:"Less Than",LessThanOrEqualTo:"Less Than Or Equal To",Between:"Between",NotBetween:"Not Between",Before:"Before",BeforeOrEqualTo:"Before Or Equal To",After:"After",AfterOrEqualTo:"After Or Equal To",member:"Member",label:"Label",date:"Date",value:"Value",labelTextContent:"Show the items for which the label",dateTextContent:"Show the items for which the date",valueTextContent:"Show the items for which",And:"and",Sum:"Sum",Count:"Count",DistinctCount:"Distinct Count",Product:"Product",Avg:"Avg",Median:"Median",Min:"Min",Max:"Max",Index:"Index",SampleStDev:"Sample StDev",PopulationStDev:"Population StDev",SampleVar:"Sample Var",PopulationVar:"Population Var",RunningTotals:"Running Totals",DifferenceFrom:"Difference From",PercentageOfDifferenceFrom:"% of Difference From",PercentageOfGrandTotal:"% of Grand Total",PercentageOfColumnTotal:"% of Column Total",PercentageOfRowTotal:"% of Row Total",PercentageOfParentTotal:"% of Parent Total",PercentageOfParentColumnTotal:"% of Parent Column Total",PercentageOfParentRowTotal:"% of Parent Row Total",MoreOption:"More...",Years:"Years",Quarters:"Quarters",Months:"Months",Days:"Days",Hours:"Hours",Minutes:"Minutes",Seconds:"Seconds",apply:"Apply",valueFieldSettings:"Value field settings",sourceName:"Field name :",sourceCaption:"Field caption",summarizeValuesBy:"Summarize values by",baseField:"Base field",baseItem:"Base item",example:"e.g:",editorDataLimitMsg:" more items. Search to refine further.",deferLayoutUpdate:"Defer Layout Update","null":"null",undefined:"undefined",groupOutOfRange:"Out of Range",fieldDropErrorAction:"The field you are moving cannot be placed in that area of the report",memberType:"Field Type",selectedHierarchy:"Parent Hierarchy",formatString:"Format",expressionField:"Expression",olapDropText:"Example: [Measures].[Order Quantity] + ([Measures].[Order Quantity] * 0.10)",customFormat:"Enter custom format string",numberFormatString:"Example: C, P, 0000 %, ###0.##0#, etc.",Measure:"Measure",Dimension:"Dimension",Standard:"Standard",Currency:"Currency",Percent:"Percent",Custom:"Custom",blank:"(Blank)",fieldTooltip:'Drag and drop fields to create an expression. And, if you want to edit the existing calculated fields! You can achieve it by simply selecting the field under "Calculated Members".',fieldTitle:"Field Name",QuarterYear:"Quarter Year",caption:"Field Caption",copy:"Copy",of:"of",group:"Group",removeCalculatedField:"Are you sure you want to delete this calculated field?",yes:"Yes",no:"No",None:"None",qtr:"Qtr",grandTotal:"Grand Total"};this.localeObj=new n.L10n(this.getModuleName(),this.defaultLocale,this.locale);this.isDragging=!1;this.isDeferLayoutUpdate=n.isNullOrUndefined(this.isDeferLayoutUpdate)&&!this.isPopupView?this.allowDeferLayoutUpdate:this.isDeferLayoutUpdate;this.wireEvent()},i.prototype.frameCustomProperties=function(n,t){this.pivotGridModule&&this.pivotGridModule.updatePageSettings(!1);var s=!!this.pivotGridModule&&this.pivotGridModule.isTabular,i=this.pivotGridModule?this.pivotGridModule.pageSettings:this.pageSettings,h=!!this.pivotGridModule&&this.pivotGridModule.enablePaging,r=!!this.pivotGridModule&&this.pivotGridModule.enableVirtualization,c=this.pivotGridModule?this.pivotGridModule.enableHtmlSanitizer:this.enableHtmlSanitizer,u=this.pivotGridModule?this.pivotGridModule.localeObj:this.staticPivotGridModule?this.staticPivotGridModule.localeObj:this.localeObj,f=!this.pivotGridModule||this.pivotGridModule.allowDrillThrough||this.pivotGridModule.editSettings.allowEditing,e=this.pivotGridModule?this.pivotGridModule.enableValueSorting:this.staticPivotGridModule?this.staticPivotGridModule.enableValueSorting:this.enableValueSorting,o=!(!this.pivotGridModule||!this.pivotGridModule.allowDataCompression)&&this.pivotGridModule.allowDataCompression,l=this.pivotGridModule&&this.pivotGridModule.enableVirtualization&&this.pivotGridModule.virtualScrollSettings&&this.pivotGridModule.virtualScrollSettings.allowSinglePage;return"olap"===this.dataType?{mode:"",savedFieldList:t||void 0,savedFieldListData:n||void 0,pageSettings:i,enableValueSorting:e,isDrillThrough:f,localeObj:u,enableVirtualization:r,allowDataCompression:o}:{mode:"",savedFieldList:void 0,pageSettings:i,enableValueSorting:e,isDrillThrough:f,localeObj:u,clonedReport:this.clonedReport,globalize:this.globalize,currenyCode:this.currencyCode,enablePaging:h,enableVirtualization:r,enableHtmlSanitizer:c,allowDataCompression:o,enableOptimizedRendering:l,isTabularLayout:s}},i.prototype.render=function(){"pivot"===this.dataType&&this.dataSourceSettings.url&&""!==this.dataSourceSettings.url?"Server"===this.dataSourceSettings.mode?(this.guid=r.generateUUID(),this.initialLoad()):new n.Fetch(this.dataSourceSettings.url,"GET").send().then(function(n){return"string"==typeof n?n:n.text()}).then(this.onReadyStateChange.bind(this)):this.initialLoad()},i.prototype.getEngine=function(n,t,i,u,f,e,o,s,h){var w=this,y,c,a,l,v,p;for(this.currentAction=n,this.pivotGridModule&&this.pivotGridModule.updatePageSettings(!1),y={pageSettings:this.pivotGridModule?JSON.parse(this.pivotGridModule.getPageSettings()).pageSettings:void 0,enableValueSorting:this.pivotGridModule?this.pivotGridModule.enableValueSorting:void 0,enableDrillThrough:!this.pivotGridModule||this.pivotGridModule.allowDrillThrough||this.pivotGridModule.editSettings.allowEditing,locale:JSON.stringify(r.getLocalizedObject(this)),savedFieldList:"onDrop"===n&&null!==this.engineModule.fieldList?r.getClonedFieldList(this.engineModule.fieldList,!0):void 0,enableOptimizedRendering:this.pivotGridModule&&this.pivotGridModule.enableVirtualization&&this.pivotGridModule.virtualScrollSettings&&this.pivotGridModule.virtualScrollSettings.allowSinglePage,requestType:"string",headers:{"Content-type":"application/json"},enablePaging:this.pivotGridModule&&this.pivotGridModule.enablePaging,enableVirtualization:this.pivotGridModule&&this.pivotGridModule.enableVirtualization,allowDataCompression:this.pivotGridModule&&this.pivotGridModule.allowDataCompression,isTabular:this.pivotGridModule&&this.pivotGridModule.isTabular},this.request.readyState!==XMLHttpRequest.UNSENT&&this.request.readyState!==XMLHttpRequest.OPENED||(this.request.withCredentials=!1),c={request:this.request,dataSourceSettings:JSON.parse(this.getPersistData()).dataSourceSettings,action:n,customProperties:{},internalProperties:y,drillItem:t,sortItem:i,aggregatedItem:u,calculatedItem:f,filterItem:e,memberName:o,fetchRawDataArgs:s,editArgs:h,hash:this.pivotGridModule?this.pivotGridModule.guid:this.staticPivotGridModule?this.staticPivotGridModule.guid:this.guid,isGroupingUpdated:"onRefresh"===this.currentAction&&this.dataSourceSettings.groupSettings.length>0||!(!this.pivotGridModule||!this.pivotGridModule.groupingModule)&&this.pivotGridModule.groupingModule.isUpdate},(this.isPopupView?this.pivotGridModule:this).trigger(we,c,function(n){w.request=n.request;c.internalProperties=n.internalProperties;c.customProperties=n.customProperties;c.dataSourceSettings=n.dataSourceSettings;c.calculatedItem=n.calculatedItem;c.drillItem=n.drillItem;c.editArgs=n.editArgs;c.fetchRawDataArgs=n.fetchRawDataArgs;c.filterItem=n.filterItem;c.hash=n.hash;c.memberName=n.memberName;c.sortItem=n.sortItem}),this.request.open("POST",this.dataSourceSettings.url,!0),this.request.onreadystatechange=this.onSuccess.bind(this),a=Object.keys(c.internalProperties.headers),l=0;l<a.length;l++)v=a[l],p=String(c.internalProperties.headers[v]),this.request.setRequestHeader(v,p);"string"===c.internalProperties.requestType?this.request.send(JSON.stringify(c)):"base64"===c.internalProperties.requestType&&this.request.send(btoa(JSON.stringify(c)))},i.prototype.onSuccess=function(){var l,t,f,c,e,h;if(this.request.readyState===XMLHttpRequest.DONE){try{if(l={action:this.currentAction,response:this.request.responseText},(this.isPopupView?this.pivotGridModule:this).trigger(be,l),t=JSON.parse(this.request.responseText),"fetchFieldMembers"===this.currentAction){var a=JSON.parse(t.members),v=[],y={};this.engineModule.globalize=n.isNullOrUndefined(this.globalize)?new n.Internationalization:this.globalize;this.engineModule.formatFields=this.engineModule.setFormattedFields(this.dataSourceSettings.formatSettings);for(var p=r.isDateField(t.memberName,this.engineModule),b="number"===this.engineModule.fieldList[t.memberName].type,u=Object.keys(a),i=0,k=u.length;i<k;i++)f=a[u[i]],c=p?this.engineModule.getFormattedValue(f.Name,t.memberName):{formattedText:f.Caption},y[u[i]]={index:f.Index,ordinal:f.Ordinal,isDrilled:f.IsDrilled,caption:c.formattedText},v.push({formattedText:c.formattedText,actualText:p?c.actualText:b?isNaN(Number(f.Name))?f.Name:Number(f.Name):f.Name});this.engineModule.fieldList[t.memberName].members=y;this.engineModule.fieldList[t.memberName].dateMember=v;this.pivotButtonModule.updateFilterEvents()}else{if(e=JSON.parse(t.fieldList),this.engineModule.fieldList)for(u=Object.keys(this.engineModule.fieldList),i=0;i<u.length;i++)this.engineModule.fieldList[u[i]]&&e[u[i]]&&(e[u[i]].dateMember=this.engineModule.fieldList[u[i]].dateMember,e[u[i]].formattedMembers=this.engineModule.fieldList[u[i]].formattedMembers,e[u[i]].members=this.engineModule.fieldList[u[i]].members);this.engineModule.fieldList=e;this.engineModule.fields=JSON.parse(t.fields);this.engineModule.rowCount=JSON.parse(t.pivotCount).RowCount;this.engineModule.columnCount=JSON.parse(t.pivotCount).ColumnCount;this.engineModule.rowStartPos=JSON.parse(t.pivotCount).RowStartPosition;this.engineModule.colStartPos=JSON.parse(t.pivotCount).ColumnStartPosition;this.engineModule.rowFirstLvl=JSON.parse(t.pivotCount).RowFirstLevel;this.engineModule.colFirstLvl=JSON.parse(t.pivotCount).ColumnFirstLevel;this.engineModule.rowMaxLevel=JSON.parse(t.pivotCount).RowMaxLevel;this.pivotGridModule&&this.pivotGridModule.enablePaging&&(this.engineModule.rowPageCount=JSON.parse(t.pivotCount).RowPageCount,this.engineModule.columnPageCount=JSON.parse(t.pivotCount).ColumnPageCount);for(var w=void 0,o=JSON.parse(t.pivotValue),s=0;s<o.length;s++)if(o[s]&&o[s][0]&&"row"===o[s][0].axis){w=s;break}this.engineModule.headerContent=r.frameContent(o,"header",w,this);this.engineModule.pageSettings=this.pivotGridModule?this.pivotGridModule.pageSettings:void 0;h=JSON.parse(t.dataSourceSettings).valueSortSettings;this.engineModule.valueSortSettings={headerText:h.headerText,headerDelimiter:h.headerDelimiter,sortOrder:h.sortOrder,columnIndex:h.columnIndex};this.engineModule.pivotValues=o;this.engineModule.isEmptyData=0===this.dataSourceSettings.values.length}}catch(l){this.engineModule.pivotValues=[]}"fetchFieldMembers"!==this.currentAction&&(this.isInitial&&!this.isPopupView?(this.initEngine(),this.isInitial=!1):this.enginePopulatedEventMethod(this,!0,!1),this.calculatedFieldModule&&"onCalcOperation"===this.currentAction&&(this.calculatedFieldModule.endDialog(),this.calculatedFieldModule.isRequireUpdate&&(this.calculatedFieldModule.isRequireUpdate=!1)),this.pivotGridModule&&this.pivotGridModule.calculatedFieldModule&&this.pivotGridModule.calculatedFieldModule.isRequireUpdate&&(this.pivotGridModule.calculatedFieldModule.endDialog(),this.pivotGridModule.calculatedFieldModule.isRequireUpdate=!1))}},i.prototype.onReadyStateChange=function(t){var i=[],u,r;if("CSV"===this.dataSourceSettings.type)for(u=t.split(/\r?\n|\r/),r=0;r<u.length;r++)n.isNullOrUndefined(u[r])||""===u[r]||i.push(u[r].split(","));else try{i=JSON.parse(t)}catch(t){i=[]}i&&i.length>0&&this.setProperties({dataSourceSettings:{dataSource:i}},!0);this.initialLoad()},i.prototype.initialLoad=function(){var t=this,i={dataSourceSettings:this.dataSourceSettings,defaultFieldListOrder:this.defaultFieldListOrder};this.trigger(fl,i,function(r){t.dataSourceSettings=r.dataSourceSettings;t.defaultFieldListOrder=i.defaultFieldListOrder;n.addClass([t.element],co);t.enableRtl?n.addClass([t.element],fi):n.removeClass([t.element],fi);t.isAdaptive?n.addClass([t.element],ar):n.removeClass([t.element],ar);t.cssClass&&n.addClass([t.element],t.cssClass.split(" "));t.notify(wi,{})})},i.prototype.wireEvent=function(){this.on(wi,this.generateData,this);this.on(ti,this.fieldListRender,this)},i.prototype.unWireEvent=function(){this.pivotGridModule&&this.pivotGridModule.isDestroyed||(this.off(wi,this.generateData),this.off(ti,this.fieldListRender))},i.prototype.getPersistData=function(){return this.addOnPersist(["dataSourceSettings"])},i.prototype.getModuleName=function(){return"pivotfieldlist"},i.prototype.onPropertyChanged=function(i,u){for(var o,s,f,v=!1,e=0,y=Object.keys(i);e<y.length;e++){o=y[e];switch(o){case"locale":this.isPopupView||t.prototype.refresh.call(this);break;case"dataSourceSettings":if((i.dataSourceSettings&&(!n.isNullOrUndefined(i.dataSourceSettings.dataSource)&&this.clonedDataSet!==i.dataSourceSettings.dataSource&&i.dataSourceSettings.groupSettings||1===Object.keys(i.dataSourceSettings).length&&"dataSource"===Object.keys(i.dataSourceSettings)[0]&&this.dataSourceSettings.groupSettings.length>0)&&(this.clonedDataSet=i.dataSourceSettings.dataSource,this.engineModule.groupingFields={}),i.dataSourceSettings&&1===Object.keys(i.dataSourceSettings).length&&i.dataSourceSettings.groupSettings&&"pivot"===this.dataType)&&(s=this.isPopupView?this.pivotGridModule:this.staticPivotGridModule,s&&s.updateGroupingReport(i.dataSourceSettings.groupSettings,"Date")),n.isNullOrUndefined(i.dataSourceSettings.dataSource)&&("olap"!==this.dataType||n.isNullOrUndefined(i.dataSourceSettings.url))||("olap"!==this.dataType&&(n.isNullOrUndefined(this.savedDataSourceSettings)||(r.updateDataSourceSettings(this.staticPivotGridModule,this.savedDataSourceSettings),this.savedDataSourceSettings=void 0),i.dataSourceSettings.dataSource&&0===i.dataSourceSettings.dataSource.length&&!n.isNullOrUndefined(this.staticPivotGridModule)&&(this.savedDataSourceSettings=r.getClonedDataSourceSettings(this.staticPivotGridModule.dataSourceSettings),this.staticPivotGridModule.setProperties({dataSourceSettings:{rows:[],columns:[],values:[],filters:[]}},!0))),"pivot"===this.dataType?(this.engineModule.fieldList=null,this.engineModule.isEmptyData=!0,this.engineModule.data=[],this.engineModule.pivotValues=[],this.engineModule.groupingFieldsInfo={}):"olap"===this.dataType&&(this.olapEngineModule.fieldList={},this.olapEngineModule.fieldListData=void 0,this.olapEngineModule.isEmptyData=!0),n.isNullOrUndefined(this.staticPivotGridModule)||(this.staticPivotGridModule.pivotValues=[]),this.initialLoad()),r.isButtonIconRefesh(o,u,i)){if(this.isPopupView&&this.pivotGridModule&&this.pivotGridModule.showGroupingBar&&this.pivotGridModule.groupingBarModule){var h=r.cloneFieldSettings(this.dataSourceSettings.filters),c=r.cloneFieldSettings(this.dataSourceSettings.values),l=r.cloneFieldSettings(this.dataSourceSettings.rows),a=r.cloneFieldSettings(this.dataSourceSettings.columns);this.pivotGridModule.setProperties({dataSourceSettings:{rows:l,columns:a,values:c,filters:h}},!0);this.pivotGridModule.axisFieldModule.render()}else this.isPopupView||!this.staticPivotGridModule||this.staticPivotGridModule.isDestroyed||(f=this.staticPivotGridModule,f.showGroupingBar&&f.groupingBarModule&&f.axisFieldModule.render(),f.showFieldList&&f.pivotFieldListModule&&(l=r.cloneFieldSettings(f.dataSourceSettings.rows),a=r.cloneFieldSettings(f.dataSourceSettings.columns),c=r.cloneFieldSettings(f.dataSourceSettings.values),h=r.cloneFieldSettings(f.dataSourceSettings.filters),f.pivotFieldListModule.setProperties({dataSourceSettings:{rows:l,columns:a,values:c,filters:h}},!0),f.pivotFieldListModule.axisFieldModule.render(),f.pivotFieldListModule.treeViewModule.fieldTable&&!f.isAdaptive&&f.pivotFieldListModule.notify(kr,{})));this.axisFieldModule.render();this.treeViewModule.fieldTable&&!this.isAdaptive&&this.notify(kr,{})}else this.remoteData=[],"pivot"===this.dataType&&this.dataSourceSettings.url&&""!==this.dataSourceSettings.url&&("type"in i.dataSourceSettings||"url"in i.dataSourceSettings)&&(this.engineModule.fieldList=null,this.render());break;case"aggregateTypes":this.axisFieldModule&&this.axisFieldModule.render();this.pivotGridModule&&this.pivotGridModule.axisFieldModule&&(this.pivotGridModule.setProperties({aggregateTypes:i.aggregateTypes},!0),this.pivotGridModule.axisFieldModule.render());break;case"showValuesButton":this.axisFieldModule&&this.axisFieldModule.render();this.pivotGridModule&&this.pivotGridModule.showGroupingBar&&this.pivotGridModule.groupingBarModule&&this.pivotGridModule.axisFieldModule&&(this.pivotGridModule.setProperties({showValuesButton:i.showValuesButton},!0),this.pivotGridModule.axisFieldModule.render());break;case"enableRtl":this.enableRtl?n.addClass([this.element],fi):n.removeClass([this.element],fi);v=!0;break;case"enableFieldSearching":case"allowCalculatedField":this.fieldListRender();break;case"allowDeferLayoutUpdate":this.isDeferLayoutUpdate=this.allowDeferLayoutUpdate;this.fieldListRender();this.pivotGridModule&&this.pivotGridModule.showGroupingBar&&this.pivotGridModule.groupingBarModule&&this.pivotGridModule.showFieldList&&this.pivotGridModule.groupingBarModule.alignIcon()}v&&this.fieldListRender()}},i.prototype.initEngine=function(){var t=this,u,f,e,i;if("pivot"===this.dataType&&(u=n.isNullOrUndefined(this.dataSourceSettings.dataSource)?n.isNullOrUndefined(this.engineModule.data)?void 0:this.engineModule.data[0]:this.dataSourceSettings.dataSource[0],u&&this.pivotCommon)){if(f="[object Array]"===Object.prototype.toString.call(u),f&&"JSON"===this.dataSourceSettings.type)return void this.pivotCommon.errorDialog.createErrorDialog(this.localeObj.getConstant("error"),this.localeObj.getConstant("invalidJSON"));if(!f&&"CSV"===this.dataSourceSettings.type)return void this.pivotCommon.errorDialog.createErrorDialog(this.localeObj.getConstant("error"),this.localeObj.getConstant("invalidCSV"))}e={dataSourceSettings:r.getClonedDataSourceSettings(this.dataSourceSettings)};i=this.isPopupView?this.pivotGridModule:this;i.trigger(yi,e,function(n){var o,s,h,e,u,f;(r.updateDataSourceSettings(t,n.dataSourceSettings),"pivot"===t.dataType)?(t.dataSourceSettings.groupSettings&&t.dataSourceSettings.groupSettings.length>0&&(o=t.engineModule.data,t.clonedDataSet=t.clonedDataSet?t.clonedDataSet:"CSV"===t.dataSourceSettings.type?r.getClonedCSVData(o):r.getClonedData(o),s=JSON.parse(t.getPersistData()).dataSourceSettings,s.dataSource=[],t.clonedReport=t.clonedReport?t.clonedReport:s),h=t.frameCustomProperties(),h.enableValueSorting=t.staticPivotGridModule?t.staticPivotGridModule.enableValueSorting:t.enableValueSorting,"Server"!==t.dataSourceSettings.mode&&t.engineModule.renderEngine(t.dataSourceSettings,h,t.aggregateCellInfo?t.getValueCellInfo.bind(t):void 0,t.onHeadersSort?t.getHeaderSortInfo.bind(t):void 0),t.pivotFieldList=t.engineModule.fieldList,e={pivotFieldList:t.pivotFieldList,pivotValues:t.engineModule.pivotValues},u=t,i.trigger(pi,e,function(n){u.pivotFieldList=n.pivotFieldList;u.engineModule.pivotValues=n.pivotValues;u.notify(ti,{});u.trigger(ye)})):"olap"===t.dataType&&(r.renderOlapEngine(t),t.pivotFieldList=t.olapEngineModule.fieldList,e={pivotFieldList:t.pivotFieldList,pivotValues:t.olapEngineModule.pivotValues},f=t,i.trigger(pi,e,function(n){f.pivotFieldList=n.pivotFieldList;f.olapEngineModule.pivotValues=n.pivotValues;f.notify(ti,{});f.trigger(ye)}))});"None"!==this.defaultFieldListOrder&&this.treeViewModule.fieldTable&&!this.isAdaptive&&this.notify(kr,{})},i.prototype.generateData=function(){this.pivotFieldList={};this.dataSourceSettings&&(this.dataSourceSettings.dataSource||this.dataSourceSettings.url)?""!==this.dataSourceSettings.url&&"olap"===this.dataType||!n.isNullOrUndefined(this.dataSourceSettings.dataSource)&&this.dataSourceSettings.dataSource.length>0?("pivot"===this.dataType&&(this.engineModule.data=this.dataSourceSettings.dataSource),this.initEngine()):this.dataSourceSettings.dataSource instanceof nt.DataManager?"pivot"===this.dataType&&this.remoteData.length>0?(this.engineModule.data=this.remoteData,this.initEngine()):setTimeout(this.getData.bind(this),100):"Server"===this.dataSourceSettings.mode?this.getEngine("onRefresh"):this.notify(ti,{}):(this.notify(ti,{}),this.trigger(ye))},i.prototype.getValueCellInfo=function(n){var t=n;return this.trigger(ol,t),t},i.prototype.getHeaderSortInfo=function(n){var t=n;return this.trigger(df,t),t},i.prototype.getBeforeServiceInvoke=function(n){return this.trigger(we,n),n},i.prototype.getAfterServiceInvoke=function(n){return this.trigger(be,n),n},i.prototype.getData=function(){this.dataSourceSettings.dataSource.defaultQuery?this.dataSourceSettings.dataSource.executeQuery(this.dataSourceSettings.dataSource.defaultQuery).then(this.executeQuery.bind(this)):this.dataSourceSettings.dataSource.executeQuery(new nt.Query).then(this.executeQuery.bind(this))},i.prototype.executeQuery=function(n){this.engineModule.data=n.result;this.initEngine()},i.prototype.fieldListRender=function(){var i,u,t;this.element.innerHTML="";"Popup"===this.renderMode&&this.dialogRenderer&&this.dialogRenderer.fieldListDialog&&!this.dialogRenderer.fieldListDialog.isDestroyed&&(i=this.dialogRenderer.fieldListDialog.visible,this.dialogRenderer.fieldListDialog.destroy(),n.remove(document.getElementById(this.element.id+"_Container")));this.renderModule.render();"Popup"===this.renderMode&&this.dialogRenderer?(this.fieldListSpinnerElement=this.dialogRenderer.fieldListDialog.element,i&&this.dialogRenderer.fieldListDialog.show()):this.fieldListSpinnerElement=this.element.querySelector(".e-pivotfieldlist-container");this.spinnerTemplate?o.createSpinner({target:this.fieldListSpinnerElement,template:this.spinnerTemplate,cssClass:this.cssClass?this.cssClass:void 0},this.createElement):o.createSpinner({target:this.fieldListSpinnerElement,cssClass:this.cssClass?this.cssClass:void 0},this.createElement);u={pivotEngine:"olap"===this.dataType?this.olapEngineModule:this.engineModule,dataSourceSettings:this.dataSourceSettings,id:this.element.id,element:"Popup"===this.renderMode&&this.dialogRenderer?this.dialogRenderer.fieldListDialog.element:n.select("#"+this.element.id+"_Container",this.element),moduleName:this.getModuleName(),enableRtl:this.enableRtl,enableHtmlSanitizer:this.enableHtmlSanitizer,isAdaptive:this.isAdaptive,renderMode:this.renderMode,localeObj:this.localeObj,dataType:this.dataType,cssClass:this.cssClass};this.pivotCommon=new sa(u);this.pivotCommon.control=this;this.allowDeferLayoutUpdate&&(this.clonedDataSource=r.getClonedDataSourceSettings(this.dataSourceSettings),"olap"===this.dataType&&(this.clonedFieldListData=r.cloneOlapFieldSettings(this.olapEngineModule.fieldListData)),this.clonedFieldList=r.getClonedFieldList(this.pivotFieldList));t=this.isPopupView?this.pivotGridModule:this.staticPivotGridModule;t&&t.toolbarModule&&r.toggleFieldListIconVisibility(t)},i.prototype.getFieldCaption=function(n){var i=this.getFields(n),r="olap"===this.dataType?this.olapEngineModule:this.engineModule,u,f,e,t;if(i.length>0&&r&&r.fieldList)for(u=i.length;u--;)if(i[u])for(f=0,e=i[u];f<e.length;f++)t=e[f],t&&r.fieldList[t.name]&&(r.fieldList[t.name].caption=t.caption?t.caption:t.name)},i.prototype.getFields=function(n){return[n.rows,n.columns,n.values,n.filters]},i.prototype.updateDataSource=function(t,i){var l=this;this.pivotGridModule&&this.pivotGridModule.showWaitingPopup();o.showSpinner(this.fieldListSpinnerElement);var u=this,f=u.isPopupView?u.pivotGridModule:u,a=!1,v=u.pivotGridModule&&(u.pivotGridModule.enableVirtualization||u.pivotGridModule.enablePaging)?u.pivotGridModule.pageSettings:void 0,s=Object.keys(u.lastCalcFieldInfo).length>0,e=Object.keys(u.lastSortInfo).length>0,c=Object.keys(u.lastAggregationInfo).length>0,h=Object.keys(u.lastFilterInfo).length>0,y={dataSourceSettings:r.getClonedDataSourceSettings(u.dataSourceSettings)};f.trigger(yi,y,function(y){var w,p;(v&&(e||h||c||s)||(r.updateDataSourceSettings(u,y.dataSourceSettings),r.updateDataSourceSettings(u.pivotGridModule,y.dataSourceSettings)),n.isNullOrUndefined(i))?(w=!e&&(u.pivotGridModule?u.pivotGridModule.enableValueSorting:u.staticPivotGridModule?u.staticPivotGridModule.enableValueSorting:u.enableValueSorting),(!e||""===u.dataSourceSettings.valueSortSettings.headerText&&""===u.dataSourceSettings.valueSortSettings.rowHeaderText&&""===u.dataSourceSettings.valueSortSettings.columnHeaderText||(u.pivotGridModule&&u.pivotGridModule.setProperties({dataSourceSettings:{valueSortSettings:{headerText:"",rowHeaderText:"",columnHeaderText:""}}},!0),u.setProperties({dataSourceSettings:{valueSortSettings:{headerText:"",rowHeaderText:"",columnHeaderText:""}}},!0)),"pivot"===u.dataType)?(p=u.frameCustomProperties(),p.enableValueSorting=w,p.savedFieldList=u.pivotFieldList,v&&(e||h||c||s)&&!u.allowDeferLayoutUpdate?(e&&("Server"===f.dataSourceSettings.mode?f.getEngine("onSort",null,u.lastSortInfo,null,null,null,null):u.engineModule.onSort(u.lastSortInfo),u.lastSortInfo={}),h&&("Server"===f.dataSourceSettings.mode?f.getEngine("onFilter",null,null,null,null,u.lastFilterInfo,null):u.engineModule.onFilter(u.lastFilterInfo,u.dataSourceSettings),u.lastFilterInfo={}),c&&("Server"===f.dataSourceSettings.mode?f.getEngine("onAggregation",null,null,u.lastAggregationInfo,null,null,null):u.engineModule.onAggregation(u.lastAggregationInfo),u.lastAggregationInfo={}),s&&("Server"===f.dataSourceSettings.mode?f.getEngine("onCalcOperation",null,null,null,u.lastCalcFieldInfo,null,null):u.engineModule.onCalcOperation(u.lastCalcFieldInfo,u.dataSourceSettings),u.lastCalcFieldInfo={})):("Server"===u.dataSourceSettings.mode?e?u.getEngine("onSort",null,u.lastSortInfo,null,null,null,null):c?u.getEngine("onAggregation",null,null,u.lastAggregationInfo,null,null,null):s?u.getEngine("onCalcOperation",null,null,null,u.lastCalcFieldInfo,null,null):h?u.getEngine("onFilter",null,null,null,null,u.lastFilterInfo,null):u.getEngine("onDrop",null,null,null,null,null,null):u.engineModule.renderEngine(u.dataSourceSettings,p,u.aggregateCellInfo?u.getValueCellInfo.bind(u):void 0,u.onHeadersSort?u.getHeaderSortInfo.bind(u):void 0),u.lastSortInfo={},u.lastAggregationInfo={},u.lastCalcFieldInfo={},u.lastFilterInfo={})):a=u.updateOlapDataSource(u,e,s,a,w,h),u.getFieldCaption(u.dataSourceSettings)):(u.axisFieldModule.render(),u.pivotGridModule&&u.pivotGridModule.notify(ni,u),u.isRequiredUpdate=!1);"Server"===u.dataSourceSettings.mode&&t?(u.allowDeferLayoutUpdate&&!u.isRequiredUpdate||u.isRequiredUpdate)&&(o.hideSpinner(l.fieldListSpinnerElement),l.pivotGridModule&&l.pivotGridModule.hideWaitingPopup()):u.enginePopulatedEventMethod(u,t,a)})},i.prototype.enginePopulatedEventMethod=function(t,i,u){var f=this,s=t.isPopupView?t.pivotGridModule:t,h={dataSourceSettings:t.dataSourceSettings,pivotFieldList:"pivot"===t.dataType?t.engineModule.fieldList:t.olapEngineModule.fieldList,pivotValues:"pivot"===t.dataType?t.engineModule.pivotValues:t.olapEngineModule.pivotValues},e;s.trigger(pi,h,function(e){t.dataSourceSettings=e.dataSourceSettings;t.pivotCommon.dataSourceSettings=t.dataSourceSettings;t.pivotFieldList=e.pivotFieldList;"olap"===t.dataType?(t.olapEngineModule.pivotValues=e.pivotValues,t.pivotCommon.engineModule=t.olapEngineModule):(t.engineModule.pivotValues=e.pivotValues,t.pivotCommon.engineModule=t.engineModule);i||!t.treeViewModule.fieldTable||t.isAdaptive||t.notify(kr,{});t.isRequiredUpdate?(t.allowDeferLayoutUpdate&&(t.clonedDataSource=r.getClonedDataSourceSettings(t.dataSourceSettings),"olap"===f.dataType&&(f.clonedFieldListData=r.cloneOlapFieldSettings(f.olapEngineModule.fieldListData)),t.clonedFieldList=r.getClonedFieldList(t.pivotFieldList)),t.updateView(t.pivotGridModule)):f.isPopupView&&(f.isDeferLayoutUpdate||t.pivotGridModule&&t.pivotGridModule.pivotDeferLayoutUpdate)&&(t.pivotGridModule.engineModule=t.engineModule,t.pivotGridModule.setProperties({dataSourceSettings:t.dataSourceSettings.properties},!0),t.pivotGridModule.notify(ni,t),o.hideSpinner(t.fieldListSpinnerElement));(f.isPopupView&&t.pivotGridModule&&t.pivotGridModule.allowDeferLayoutUpdate&&!t.isRequiredUpdate||!n.isNullOrUndefined(t.pivotGridModule))&&(o.hideSpinner(t.fieldListSpinnerElement),t.pivotGridModule.hideWaitingPopup());t.isRequiredUpdate=!0;!t.pivotGridModule||u?o.hideSpinner(t.fieldListSpinnerElement):t.pivotGridModule.fieldListSpinnerElement=t.fieldListSpinnerElement});e=this.getActionCompleteName();this.actionObj.actionName=e;this.actionObj.actionName&&this.actionCompleteMethod()},i.prototype.updateOlapDataSource=function(n,t,i,u,f,e){var o=n.frameCustomProperties(n.olapEngineModule.fieldListData,n.olapEngineModule.fieldList);return o.enableValueSorting=f,o.savedFieldList=n.pivotFieldList,!i&&!t||e?r.renderOlapEngine(n,o):(n.olapEngineModule.savedFieldList=n.pivotFieldList,n.olapEngineModule.savedFieldListData=n.olapEngineModule.fieldListData,i?(n.olapEngineModule.updateCalcFields(n.dataSourceSettings,n.lastCalcFieldInfo),n.lastCalcFieldInfo={},u=!n.olapEngineModule.dataFields[n.lastCalcFieldInfo.name],n.pivotGridModule&&n.pivotGridModule.hideWaitingPopup()):n.olapEngineModule.onSort(n.dataSourceSettings)),n.lastSortInfo={},n.lastAggregationInfo={},n.lastCalcFieldInfo={},n.lastFilterInfo={},u},i.prototype.update=function(n){n&&(this.clonedDataSet=n.clonedDataSet,this.clonedReport=n.clonedReport,this.setProperties({dataSourceSettings:n.dataSourceSettings,showValuesButton:n.showValuesButton},!0),this.engineModule=n.engineModule,this.olapEngineModule=n.olapEngineModule,this.dataType=n.dataType,this.pivotFieldList="olap"===this.dataType?n.olapEngineModule.fieldList:n.engineModule.fieldList,this.isPopupView?this.pivotGridModule=n:this.staticPivotGridModule=n,this.getFieldCaption(n.dataSourceSettings),this.pivotCommon.engineModule="olap"===this.dataType?this.olapEngineModule:this.engineModule,this.pivotCommon.dataSourceSettings=this.dataSourceSettings,this.pivotCommon.control=this,this.treeViewModule.fieldTable&&!this.isAdaptive&&this.notify(kr,{}),this.axisFieldModule.render(),!this.isPopupView&&this.allowDeferLayoutUpdate&&(this.clonedDataSource=r.getClonedDataSourceSettings(this.dataSourceSettings),"olap"===this.dataType&&(this.clonedFieldListData=r.cloneOlapFieldSettings(this.olapEngineModule.fieldListData)),this.clonedFieldList=r.getClonedFieldList(this.pivotFieldList)))},i.prototype.updateView=function(n){var t,i;n&&(t="Calculated field applied"===this.actionObj.actionName&&"olap"===n.dataType,n.element.querySelector(".e-spin-hide")&&!t&&(!this.allowDeferLayoutUpdate||this.isDeferUpdateApplied||n.isInitial&&"Chart"!==n.currentView)&&n.showWaitingPopup(),n.clonedDataSet=this.clonedDataSet,n.clonedReport=this.clonedReport,n.setProperties({dataSourceSettings:this.dataSourceSettings,showValuesButton:this.showValuesButton},!0),n.engineModule=this.engineModule,n.olapEngineModule=this.olapEngineModule,n.dataType=this.dataType,this.pivotChange||(n.pivotValues="olap"===this.dataType?this.olapEngineModule.pivotValues:this.engineModule.pivotValues),i={dataSourceSettings:r.getClonedDataSourceSettings(n.dataSourceSettings),pivotValues:n.pivotValues},n.trigger("fieldListRefreshed",i),this.isPopupView||!("olap"===this.dataType?this.olapEngineModule.isEngineUpdated:this.engineModule.isEngineUpdated)&&!this.isInitial||(this.staticPivotGridModule=n,n.isStaticRefresh=!0,n.isStaticFieldList=!0),this.isDeferUpdateApplied=!1,this.staticPivotGridModule&&(this.staticPivotGridModule.isServerWaitingPopup=!0),n.dataBind())},i.prototype.triggerPopulateEvent=function(){var n=this,t=this.isPopupView?this.pivotGridModule:this,i={dataSourceSettings:this.dataSourceSettings,pivotFieldList:"olap"===this.dataType?this.olapEngineModule.fieldList:this.engineModule.fieldList,pivotValues:"olap"===this.dataType?this.olapEngineModule.pivotValues:this.engineModule.pivotValues};t.trigger(pi,i,function(t){n.dataSourceSettings=t.dataSourceSettings;n.pivotFieldList=t.pivotFieldList;"olap"===n.dataType?n.olapEngineModule.pivotValues=t.pivotValues:n.engineModule.pivotValues=t.pivotValues})},i.prototype.actionBeginMethod=function(){var n={dataSourceSettings:r.getClonedDataSourceSettings(this.dataSourceSettings),actionName:this.actionObj.actionName,fieldInfo:this.actionObj.fieldInfo,cancel:!1};return(this.isPopupView?this.pivotGridModule:this).trigger(cl,n),n.cancel},i.prototype.actionCompleteMethod=function(){var n={dataSourceSettings:r.getClonedDataSourceSettings(this.dataSourceSettings),actionName:this.actionObj.actionName,fieldInfo:this.actionObj.fieldInfo,actionInfo:this.actionObj.actionInfo};(this.isPopupView?this.pivotGridModule:this).trigger(rh,n);this.actionObj.actionName="";this.actionObj.actionInfo=void 0;this.actionObj.fieldInfo=void 0},i.prototype.actionFailureMethod=function(n){var t={actionName:this.actionObj.actionName,errorInfo:n};(this.isPopupView?this.pivotGridModule:this).trigger(ll,t)},i.prototype.getActionCompleteName=function(){return this.actionObj.actionName===oh?sh:this.actionObj.actionName===ge?hh:this.actionObj.actionName===fh?ra:this.actionObj.actionName===eh?ch:this.actionObj.actionName===no?ua:this.actionObj.actionName===to?fa:this.actionObj.actionName===dl?"Field tree sorted":this.actionObj.actionName},i.prototype.destroy=function(){this.unWireEvent();this.fieldListSpinnerElement&&(o.hideSpinner(this.fieldListSpinnerElement),this.fieldListSpinnerElement=null);this.request&&(this.request.abort(),this.request=null);this.contextMenuModule&&(this.contextMenuModule.destroy(),this.contextMenuModule=null);this.calculatedFieldModule&&(this.calculatedFieldModule.destroy(),this.calculatedFieldModule=null);this.pivotButtonModule&&(this.pivotButtonModule.destroy(),this.pivotButtonModule=null);this.axisFieldModule&&(this.axisFieldModule.destroy(),this.axisFieldModule=null);this.axisTableModule&&(this.axisTableModule.destroy(),this.axisTableModule=null);this.treeViewModule&&(this.treeViewModule.destroy(),this.treeViewModule=null);this.dialogRenderer&&(this.dialogRenderer.destroy(),this.dialogRenderer=null);this.renderModule&&(this.renderModule=null);this.pivotCommon&&(this.pivotCommon.destroy(),this.pivotCommon=null);this.engineModule&&!this.destroyEngine&&(this.engineModule.fieldList={},this.engineModule.rMembers=null,this.engineModule.cMembers=null,this.engineModule.valueMatrix=[],this.engineModule.pivotValues=[],this.engineModule.data=[],this.engineModule=null);this.olapEngineModule&&!this.destroyEngine&&(this.olapEngineModule.fieldList={},this.olapEngineModule.fieldListData=null,this.olapEngineModule.pivotValues=[],this.olapEngineModule=null);this.pivotFieldList&&(this.pivotFieldList=null);this.clonedDataSet=[];this.clonedDataSource={};this.clonedFieldList={};this.clonedFieldListData=[];this.clonedReport={};this.lastSortInfo={};this.lastFilterInfo={};this.lastAggregationInfo={};this.lastCalcFieldInfo={};this.remoteData=[];this.actionObj={};this.savedDataSourceSettings=null;this.localeObj=null;this.defaultLocale=null;this.globalize=null;this.pivotGridModule=null;this.staticPivotGridModule=null;this.filterTargetID=null;this.element&&(this.element.innerHTML="",n.removeClass([this.element],co),n.removeClass([this.element],fi),n.removeClass([this.element],ar))},k([n.Complex({},ca)],i.prototype,"dataSourceSettings",void 0),k([n.Property("Popup")],i.prototype,"renderMode",void 0),k([n.Property()],i.prototype,"target",void 0),k([n.Property("")],i.prototype,"cssClass",void 0),k([n.Property(!1)],i.prototype,"enableHtmlSanitizer",void 0),k([n.Property(!1)],i.prototype,"allowCalculatedField",void 0),k([n.Property(!1)],i.prototype,"enableFieldSearching",void 0),k([n.Property(!1)],i.prototype,"showValuesButton",void 0),k([n.Property(!1)],i.prototype,"allowDeferLayoutUpdate",void 0),k([n.Property(1e3)],i.prototype,"maxNodeLimitInMemberEditor",void 0),k([n.Property(!0)],i.prototype,"loadOnDemandInMemberEditor",void 0),k([n.Property()],i.prototype,"spinnerTemplate",void 0),k([n.Property(["Sum","Count","DistinctCount","Product","Min","Max","Avg","Median","Index","PopulationVar","SampleVar","PopulationStDev","SampleStDev","RunningTotals","PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"])],i.prototype,"aggregateTypes",void 0),k([n.Property("USD")],i.prototype,"currencyCode",void 0),k([n.Event()],i.prototype,"load",void 0),k([n.Event()],i.prototype,"enginePopulating",void 0),k([n.Event()],i.prototype,"memberFiltering",void 0),k([n.Event()],i.prototype,"enginePopulated",void 0),k([n.Event()],i.prototype,"onFieldDropped",void 0),k([n.Event()],i.prototype,"fieldDrop",void 0),k([n.Event()],i.prototype,"fieldDragStart",void 0),k([n.Event()],i.prototype,"aggregateCellInfo",void 0),k([n.Event()],i.prototype,"memberEditorOpen",void 0),k([n.Event()],i.prototype,"calculatedFieldCreate",void 0),k([n.Event()],i.prototype,"aggregateMenuOpen",void 0),k([n.Event()],i.prototype,"fieldRemove",void 0),k([n.Event()],i.prototype,"dataBound",void 0),k([n.Event()],i.prototype,"created",void 0),k([n.Event()],i.prototype,"destroyed",void 0),k([n.Event()],i.prototype,"beforeServiceInvoke",void 0),k([n.Event()],i.prototype,"afterServiceInvoke",void 0),k([n.Event()],i.prototype,"actionBegin",void 0),k([n.Event()],i.prototype,"actionComplete",void 0),k([n.Event()],i.prototype,"actionFailure",void 0),k([n.Event()],i.prototype,"onHeadersSort",void 0),k([n.NotifyPropertyChanges],i)}(n.Component),tf="Count",tv="Median",eo="Sum",oo="DistinctCount",iv="Product",rv="SampleStDev",uv="PopulationStDev",fv="SampleVar",ev="PopulationVar",pt="CalculatedField",vw=function(){function t(n){this.isFormula=!1;this.isRequireUpdate=!1;this.formatTypes=["Standard","Currency","Percent","Custom","None"];this.parent=n;this.existingReport=null;this.parent.calculatedFieldModule=this;this.removeEventListener();this.addEventListener();this.parentID=this.parent.element.id;this.treeObj=null;this.droppable=null;this.newFields=null;this.isFieldExist=!0;this.formulaText=null;this.fieldText=null;this.formatText=null;this.formatType=null;this.fieldType=null;this.parentHierarchy=null;this.isEdit=!1;this.currentFieldName=null}return t.prototype.getModuleName=function(){return"calculatedField"},t.prototype.keyActionHandler=function(t){var i=t.currentTarget.querySelector(".e-node-focus");if(i)switch(t.action){case"moveRight":case"shiftE":"pivot"===this.parent.dataType&&this.displayMenu(i);break;case"delete":"LI"===i.tagName&&!i.querySelector(".e-list-icon.e-format")&&!i.querySelector(".e-list-icon").classList.contains(".e-icons")&&i.querySelector("."+bt)&&i.querySelector("."+bt).classList.contains("e-list-icon")&&this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeCalculatedField"),{},!0,i);break;case"enter":var u=i.getAttribute("data-field"),e=n.getInstance(n.select("#"+this.parentID+"calculateddialog",document),o.Dialog),f=i.getAttribute("data-type"),r=n.select("#"+this.parentID+"droppable",e.element);"pivot"===this.parent.dataType?""===r.value?r.value=f===pt?i.getAttribute("data-uid"):'"'+f+"("+u+')"':""!==r.value&&(r.value=f===pt?r.value+i.getAttribute("data-uid"):r.value+'"'+f+"("+u+')"'):(this.parent.olapEngineModule&&this.parent.olapEngineModule.fieldList[u]&&this.parent.olapEngineModule.fieldList[u].isCalculatedField&&(u=this.parent.olapEngineModule.fieldList[u].tag),""===r.value?r.value=u:""!==r.value&&(r.value=r.value+u))}},t.prototype.fieldClickHandler=function(t){var i=n.closest(t.event.target,"li");(t.event.target.classList.contains(or)||t.event.target.classList.contains(g)||t.event.target.classList.contains(ft)||t.event.target.classList.contains(bt))&&(this.parent.isAdaptive?"olap"===this.parent.dataType&&this.parent.isAdaptive&&("LI"===i.tagName&&i.querySelector(".e-list-edit-icon").classList.contains(g)&&t.event.target.classList.contains(g)?(this.isEdit=!0,this.currentFieldName=i.getAttribute("data-field"),this.fieldText=i.getAttribute("data-caption"),this.formulaText=i.getAttribute("data-formula"),this.formatType=i.getAttribute("data-formatString"),this.formatText="Custom"===this.formatType?i.getAttribute("data-customformatstring"):null,this.fieldType=i.getAttribute("data-membertype"),this.parentHierarchy="Dimension"===this.fieldType?i.getAttribute("data-hierarchy"):null,n.addClass([i.querySelector(".e-list-edit-icon")],ft),n.removeClass([i.querySelector(".e-list-edit-icon")],g),this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement)):"LI"===i.tagName&&i.querySelector(".e-list-edit-icon").classList.contains(ft)&&t.event.target.classList.contains(ft)?(this.isEdit=!1,this.fieldText=this.formatText=this.formulaText=this.currentFieldName=null,this.parentHierarchy=this.fieldType=this.formatType=null,n.addClass([i.querySelector(".e-list-edit-icon")],g),n.removeClass([i.querySelector(".e-list-edit-icon")],ft)):"LI"===i.tagName&&i.querySelector("."+bt).classList.contains("e-icons")&&t.event.target.classList.contains(bt)&&this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeCalculatedField"),{},!0,t.node)):this.displayMenu(i,t.node,t.event.target))},t.prototype.accordionClickHandler=function(t){var o,s;if(t.item&&-1!==t.item.iconCss.indexOf("e-list-icon")&&n.closest(t.originalEvent.target,".e-acrdn-header-icon")){var e=n.closest(t.originalEvent.target,".e-acrdn-header").querySelector("."+fs),f=e.getAttribute("data-field"),h=e.getAttribute("data-caption"),u=r.getFieldByName(f,this.parent.dataSourceSettings.formatSettings),i=n.closest(t.originalEvent.target,".e-acrdn-header-icon");u&&(o=this.getFormat(u.format),s=o?this.formatTypes.indexOf(o)>-1?u.format:"Custom":"None",this.formatType=s);i.querySelector("."+g)&&t.originalEvent.target.classList.contains(g)?(this.isEdit=!0,this.currentFieldName=f,this.fieldText=h||f,this.formulaText=this.parent.engineModule.fieldList[f].formula,this.formatText=u?u.format:"",n.addClass([i.querySelector(".e-list-icon")],ft),n.removeClass([i.querySelector(".e-list-icon")],g),this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement)):i.querySelector("."+ft)&&t.originalEvent.target.classList.contains(ft)?(this.isEdit=!1,this.fieldText=this.formatText=this.formulaText=this.currentFieldName=null,n.addClass([i.querySelector(".e-list-icon")],g),n.removeClass([i.querySelector(".e-list-icon")],ft)):i.querySelector("."+bt)&&t.originalEvent.target.classList.contains(bt)&&this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeCalculatedField"),{},!0,e)}},t.prototype.accordionCreated=function(){for(var r,i=n.getInstance(n.select("#"+this.parentID+"accordDiv",document),et.Accordion).element.querySelectorAll(".e-acrdn-item"),t=0;t<i.length;t++)(i[t].querySelector("."+g)||i[t].querySelector("."+ft))&&(r=n.createElement("span",{className:"e-list-icon "+bt+" e-icons"}),n.append([r],i[t].querySelector(".e-acrdn-header-icon")),n.addClass([i[t]],"e-select"))},t.prototype.clearFormula=function(){this.treeObj&&this.treeObj.element.querySelector("li")&&(n.removeClass(this.treeObj.element.querySelectorAll("li"),"e-active"),this.displayMenu(this.treeObj.element.querySelector("li")))},t.prototype.displayMenu=function(t,i,r){var p=!r||r.classList.contains(g),w=!r||r.classList.contains(ft),b=n.getInstance(n.select("#"+this.parentID+"calculateddialog",document),o.Dialog),e=n.getInstance(n.select("#"+this.parentID+"ddlelement",document),y.MaskedTextBox),k,d,rt,ut,v;try{if("pivot"!==this.parent.dataType||!t.querySelector(".e-list-icon.e-format")||!t.querySelector(".e-list-icon.e-format").classList.contains(s)||t.querySelector(".e-list-icon").classList.contains(ft)||t.querySelector(".e-list-icon").classList.contains(bt)||t.querySelector(".e-list-icon").classList.contains(g)||"LI"!==t.tagName){if("LI"===t.tagName&&(t.querySelector("."+g)&&t.querySelector("."+g).classList.contains("e-list-icon")&&p||"olap"===this.parent.dataType&&t.getAttribute("data-type")===pt&&t.classList.contains("e-active")&&(r&&!r.classList.contains(bt)||!r))){this.isEdit=!0;k=t.getAttribute("data-field");d=t.getAttribute("data-caption");this.currentFieldName=k;e.value=d;e.dataBind();var nt=t.getAttribute("data-formatString"),u=b.element,h=n.getInstance(n.select("#"+this.parentID+"Format_Div",u),a.DropDownList),c=n.getInstance(n.select("#"+this.parentID+"Custom_Format_Element",u),y.MaskedTextBox),ot=t.getAttribute("data-customformatstring");if("olap"===this.parent.dataType){var tt=t.getAttribute("data-membertype"),st=t.getAttribute("data-hierarchy"),ht=t.getAttribute("data-formula"),it=n.select("#"+this.parentID+"_FieldNameTitle",u),f=n.getInstance(n.select("#"+this.parentID+"Member_Type_Div",u),a.DropDownList),l=n.getInstance(n.select("#"+this.parentID+"Hierarchy_List_Div",u),a.DropDownList);it.innerText=this.parent.localeObj.getConstant("caption");n.select("#"+this.parentID+"droppable",document).value=ht;f.readonly=!0;f.value=tt;f.dataBind();"Dimension"===tt&&(l.value=st)}else n.addClass(this.treeObj.element.querySelectorAll("."+ft),g),n.removeClass(this.treeObj.element.querySelectorAll("."+ft),ft),n.addClass([t.querySelector(".e-list-icon")],ft),n.removeClass([t.querySelector(".e-list-icon")],g),t.querySelector("."+ft).setAttribute("title",this.parent.localeObj.getConstant("clearCalculatedField")),n.select("#"+this.parentID+"droppable",document).value=t.getAttribute("data-uid");""!==nt&&(h.value=nt,h.dataBind());c.value=ot;c.dataBind()}else if("LI"===t.tagName&&(t.querySelector("."+ft)&&t.querySelector("."+ft).classList.contains("e-list-icon")&&w||"olap"===this.parent.dataType&&!t.classList.contains("e-active")))this.isEdit=!1,e.value="",e.dataBind(),u=b.element,(c=n.getInstance(n.select("#"+this.parentID+"Custom_Format_Element",u),y.MaskedTextBox)).value="",c.dataBind(),"olap"===this.parent.dataType?(l=n.getInstance(n.select("#"+this.parentID+"Hierarchy_List_Div",u),a.DropDownList),h=n.getInstance(n.select("#"+this.parentID+"Format_Div",u),a.DropDownList),f=n.getInstance(n.select("#"+this.parentID+"Member_Type_Div",u),a.DropDownList),(it=n.select("#"+this.parentID+"_FieldNameTitle",u)).innerText=this.parent.localeObj.getConstant("fieldTitle"),l.index=0,l.dataBind(),h.index=0,h.dataBind(),f.index=0,f.readonly=!1,f.dataBind()):(n.addClass(this.treeObj.element.querySelectorAll("."+ft),g),n.removeClass(this.treeObj.element.querySelectorAll("."+ft),ft),t.querySelector("."+g).setAttribute("title",this.parent.localeObj.getConstant("edit"))),n.select("#"+this.parentID+"droppable",document).value="";else if("LI"===t.tagName&&t.querySelector("."+bt)&&t.querySelector("."+bt).classList.contains("e-list-icon")&&!p&&!w){if(this.parent.actionObj.actionName=no,this.parent.actionBeginMethod())return;rt=n.select("#"+this.parentID+"droppable",document);ut={name:this.isEdit?this.currentFieldName:e.value,caption:e.value,formula:rt.value};this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeCalculatedField"),ut,!0,i)}}else v=n.select("#"+this.parentID+"CalcContextmenu",document)?n.getInstance(n.select("#"+this.parentID+"CalcContextmenu",document),et.ContextMenu):null,v&&!v.isDestroyed&&v.destroy(),this.curMenu=t.querySelector("."+ri),this.openContextMenu(t)}catch(t){this.parent.actionFailureMethod(t)}},t.prototype.removeCalcField=function(t){var r,f=this.parent.dataSourceSettings,u=t.getAttribute("data-field"),e=f.calculatedFieldSettings,i,c,v,w,o,s,b,h,k,d;for("pivot"===this.parent.dataType&&(this.parent.isAdaptive?"number"==typeof(c=parseInt(t.getAttribute("id").split(this.parentID+"_")[1],10))&&n.getInstance(n.select("#"+this.parentID+"accordDiv",document),et.Accordion).hideItem(c):this.treeObj.removeNodes([t])),i=0;i<e.length;i++)if(e[i]&&e[i].name===u){e.splice(i,1);break}if("olap"===this.parent.dataType){for(var l=(r=this.parent.olapEngineModule).fieldListData?r.fieldListData:[],a=0,p=Object.keys(l);a<p.length;a++)if(v=p[a],l[parseInt(v,10)].name===u&&"number"==typeof(c=parseInt(v,10))){l.splice(c,1);break}w=this.treeObj.getNode(t).parentID;this.treeObj.removeNodes([t]);e.length<=0&&this.treeObj.removeNodes([w])}else r=this.parent.engineModule;if(r.fields)for(i=0;i<r.fields.length;i++)if(r.fields[i]===u){r.fields.splice(i,1);break}for(r.savedFieldList&&r.savedFieldList[u]&&delete r.savedFieldList[u],r.fieldList&&r.fieldList[u]&&delete r.fieldList[u],o=f.formatSettings,i=0;i<o.length;i++)if(o[i]&&o[i].name===u){o.splice(i,1);break}for(s=[f.values,f.rows,f.columns,f.filters],b=(i=0,s.length);i<b;i++)for(h=0,k=s[i].length;h<k;h++)if(s[i][h].name===u){s[i].splice(h,1);break}this.isEdit&&this.currentFieldName===u&&(d=n.getInstance(n.select("#"+this.parentID+"ddlelement",document),y.MaskedTextBox),this.isEdit=!1,d.value="",this.currentFieldName=this.formatText=this.fieldText=this.formatType=null,this.formulaText=this.fieldType=this.parentHierarchy=null);(n.isNullOrUndefined(this.parent.isDeferLayoutUpdate)||this.parent.isDeferLayoutUpdate)&&(!this.parent.pivotGridModule||this.parent.pivotGridModule.pivotDeferLayoutUpdate)&&"pivotfieldlist"===this.parent.getModuleName()||this.parent.updateDataSource();this.closeErrorDialog()},t.prototype.openContextMenu=function(t){var i=this,r=t.getAttribute("data-field"),u="number"!==this.parent.engineModule.fieldList[r].type?"string":"number",f="string"===u?this.getValidSummaryType().slice(0,2):this.getValidSummaryType(),e={cancel:!1,fieldName:r,aggregateTypes:this.getMenuItems(u).slice()};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(ih,e,function(r){var u;if(!r.cancel){for(var s=[],h=[],o=0,c=r.aggregateTypes;o<c.length;o++)u=c[o],f.indexOf(u)>-1&&-1===s.indexOf(u)&&(s.push(u),h.push({id:i.parent.element.id+"Calc_"+u,text:i.parent.localeObj.getConstant(u)}));i.createMenu(h,t);var e=t.getBoundingClientRect(),l=window.scrollY||document.documentElement.scrollTop,a=n.getInstance(n.select("#"+i.parentID+"CalcContextmenu",document),et.ContextMenu);i.parent.enableRtl?a.open(e.top+l,e.left-100):a.open(e.top+l,e.left+150)}})},t.prototype.selectContextMenu=function(t){if(null!==t.element.textContent){var i=n.closest(this.curMenu,".e-list-item").getAttribute("data-caption");n.closest(this.curMenu,".e-list-item").setAttribute("data-type",t.element.id.split("_").pop());this.curMenu.textContent=i+" ("+t.element.textContent+")";n.addClass([this.curMenu.parentElement.parentElement],["e-node-focus","e-hover"]);this.curMenu.parentElement.parentElement.setAttribute("tabindex","0");this.curMenu.parentElement.parentElement.focus()}},t.prototype.createMenu=function(t,i){var r,f=this,e={cssClass:this.parentID+"calculatedmenu"+(this.parent.cssClass?" "+this.parent.cssClass:""),items:t,enableRtl:this.parent.enableRtl,locale:this.parent.locale,select:this.selectContextMenu.bind(this),onClose:function(){f.treeObj.element.focus();n.addClass([i],["e-hover","e-node-focus"])}},u;r=n.select("#"+this.parentID+"CalcContextmenu",document)?n.select("#"+this.parentID+"CalcContextmenu",document):n.createElement("ul",{id:this.parentID+"CalcContextmenu"});n.getInstance(n.select("#"+this.parentID+"calculateddialog",document),o.Dialog).element.appendChild(r);u=new et.ContextMenu(e);u.isStringTemplate=!0;u.appendTo(r)},t.prototype.applyFormula=function(){var t=this,i=this,u=!1,f,e;n.removeClass([document.getElementById(this.parentID+"ddlelement")],as);f=n.getInstance(n.select("#"+this.parentID+"ddlelement",document),y.MaskedTextBox);this.newFields=n.extend([],this.parent.dataSourceSettings.calculatedFieldSettings,null,!0);e={fieldName:this.isEdit?this.currentFieldName:f.value,calculatedField:this.getCalculatedFieldInfo(),calculatedFieldSettings:r.cloneCalculatedFieldSettings(this.parent.dataSourceSettings.calculatedFieldSettings),cancel:!1};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger("calculatedFieldCreate",e,function(r){var o,f,l,p,w,e,a,k,v,s,c,h;if(r.cancel)t.endDialog(),t.parent.lastCalcFieldInfo={},t.isFormula=!1;else{if(o=r.calculatedField,!t.isEdit)if("olap"===i.parent.dataType)f=o.name,i.parent.olapEngineModule.fieldList[f]&&"CalculatedField"!==i.parent.olapEngineModule.fieldList[f].type&&(u=!0);else for(l=0,p=Object.keys(i.parent.engineModule.fieldList);l<p.length;l++)w=p[l],o.name&&o.name===w&&"CalculatedField"!==i.parent.engineModule.fieldList[w].aggregateType&&(u=!0);if(u)return void i.parent.pivotCommon.errorDialog.createErrorDialog(i.parent.localeObj.getConstant("error"),i.parent.localeObj.getConstant("fieldExist"));if(t.existingReport=n.extend({},t.parent.dataSourceSettings,null,!0),e=t.parent.dataSourceSettings,n.isNullOrUndefined(o.name)||""===o.name||n.isNullOrUndefined(o.caption)||""===o.caption||!o.formula||""===o.formula)n.isNullOrUndefined(o.name)||""===o.name||n.isNullOrUndefined(o.caption)||""===o.caption?(n.getInstance(n.select("#"+t.parentID+"ddlelement",document),y.MaskedTextBox).value="",n.addClass([document.getElementById(t.parentID+"ddlelement")],as),document.getElementById(t.parentID+"ddlelement").focus()):t.triggerActionCompleteEvent();else{if(f=void 0,"olap"===t.parent.dataType){if(f={name:o.name,formula:o.formula,formatString:o.formatString},n.isNullOrUndefined(o.hierarchyUniqueName)||(f.hierarchyUniqueName=o.hierarchyUniqueName),t.isFieldExist=!1,t.isEdit){for(s=0;s<e.calculatedFieldSettings.length;s++)if(e.calculatedFieldSettings[s].name===f.name&&t.isEdit){e.calculatedFieldSettings[s].hierarchyUniqueName=o.hierarchyUniqueName;t.parent.olapEngineModule.fieldList[f.name].caption=o.caption;e.calculatedFieldSettings[s].formatString=f.formatString;e.calculatedFieldSettings[s].formula=f.formula;f=e.calculatedFieldSettings[s];t.updateFormatSettings(e,f.name,o.formatString);t.parent.olapEngineModule.getFormattedFields(e.formatSettings);t.parent.olapEngineModule.formatFields[f.name]&&(t.parent.olapEngineModule.formatFields[f.name].format?t.parent.olapEngineModule.formatFields[f.name].format=t.getFormat(f.formatString):delete t.parent.olapEngineModule.formatFields[f.name]);t.isFieldExist=!0;break}for(var d=!1,b=0,g=[e.rows,e.columns,e.values,e.filters];b<g.length;b++){for(a=0,k=g[b];a<k.length;a++)if(v=k[a],v.isCalculatedField&&null!==f.name&&v.name===f.name&&t.isEdit){v.caption=o.caption;t.isFieldExist=!0;d=!0;break}if(d)break}}else for(s=0;s<e.calculatedFieldSettings.length;s++)if(e.calculatedFieldSettings[s].name===f.name)return void t.createConfirmDialog(i.parent.localeObj.getConstant("alert"),i.parent.localeObj.getConstant("confirmText"),o);t.isFieldExist||(e.calculatedFieldSettings.push(f),t.updateFormatSettings(e,f.name,o.formatString),t.parent.olapEngineModule.getFormattedFields(e.formatSettings),t.parent.olapEngineModule.formatFields[f.name]&&(t.parent.olapEngineModule.formatFields[f.name].format?t.parent.olapEngineModule.formatFields[f.name].format=t.getFormat(f.formatString):delete t.parent.olapEngineModule.formatFields[f.name]));t.parent.lastCalcFieldInfo=f}else{if(f={name:o.name,caption:o.caption,type:"CalculatedField"},c={name:o.name,formula:o.formula},n.isNullOrUndefined(o.formatString)||(c.formatString=o.formatString),t.isFieldExist=!0,t.isEdit){for(s=0;s<e.values.length;s++)if(e.values[s].type===pt&&null!==f.name&&e.values[s].name===f.name&&t.isEdit)for(h=0;h<e.calculatedFieldSettings.length;h++)e.calculatedFieldSettings[h].name===f.name&&(e.values.splice(s,1),e.values.splice(s,0,f),t.currentFormula=e.calculatedFieldSettings[h].formula,e.calculatedFieldSettings.splice(h,1),e.calculatedFieldSettings.splice(h,0,c),t.updateFormatSettings(e,f.name,o.formatString),t.isFieldExist=!1)}else for(s=0;s<e.values.length;s++)if(e.values[s].type===pt&&e.values[s].name===f.name){for(h=0;h<e.calculatedFieldSettings.length;h++)if(e.calculatedFieldSettings[h].name===f.name)return void t.createConfirmDialog(i.parent.localeObj.getConstant("alert"),i.parent.localeObj.getConstant("confirmText"),o);t.isFieldExist=!1}t.isFieldExist&&(e.values.push(f),e.calculatedFieldSettings.push(c),t.updateFormatSettings(e,f.name,o.formatString));t.parent.lastCalcFieldInfo=c}t.addFormula(e,f.name)}}})},t.prototype.getCalculatedFieldInfo=function(){var u=n.select("#"+this.parentID+"calculateddialog",document),h=u?n.getInstance(u,o.Dialog):void 0,f=n.getInstance(n.select("#"+this.parentID+"ddlelement",document),y.MaskedTextBox),c=n.select("#"+this.parentID+"droppable",document),t=this.parent.isAdaptive?this.parent.dialogRenderer.adaptiveElement.element:h.element,l=n.getInstance(n.select("#"+this.parentID+"Custom_Format_Element",t),y.MaskedTextBox),i={name:this.isEdit?this.currentFieldName:f.value,caption:f.value,formula:c.value},r=n.getInstance(n.select("#"+this.parentID+"Format_Div",t),a.DropDownList),e,s;return(i.formatString="Custom"===r.value?l.value:"None"===r.value?null:r.value,"olap"===this.parent.dataType)&&(e=n.getInstance(n.select("#"+this.parentID+"Member_Type_Div",t),a.DropDownList),s=n.getInstance(n.select("#"+this.parentID+"Hierarchy_List_Div",t),a.DropDownList),"Dimension"===e.value&&(i.hierarchyUniqueName=s.value)),i},t.prototype.updateFormatSettings=function(t,i,r){for(var e,o={name:i,format:r,useGrouping:!0},f=!1,u=0;u<t.formatSettings.length;u++)if(t.formatSettings[u].name===i){if("undefined"===r||void 0===r||""===r){t.formatSettings.splice(u,1);f=!0;break}e=t.formatSettings[u].properties?t.formatSettings[u].properties:t.formatSettings[u];e.format=r;t.formatSettings.splice(u,1,e);f=!0;break}f||""===r||n.isNullOrUndefined(r)||t.formatSettings.push(o)},t.prototype.addFormula=function(n,t){var r,u,i;this.isFormula=!0;this.field=t;this.parent.setProperties({dataSourceSettings:n},!0);"pivotfieldlist"===this.parent.getModuleName()&&(this.parent.isDeferLayoutUpdate||this.parent.pivotGridModule&&this.parent.pivotGridModule.pivotDeferLayoutUpdate)&&(this.parent.isRequiredUpdate=!1);try{r={calculatedFieldInfo:this.parent.lastCalcFieldInfo};this.parent.actionObj.actionInfo=r;u=this.parent.actionObj.actionName===ge?hh:sh;this.parent.actionObj.actionName=u;this.parent.updateDataSource(!1);i="pivotfieldlist"===this.parent.getModuleName()&&this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent;i&&"Server"!==i.dataSourceSettings.mode?this.endDialog():this.isRequireUpdate=!0;"pivotfieldlist"===this.parent.getModuleName()&&"Fixed"===this.parent.renderMode&&this.parent.isDeferLayoutUpdate&&(this.parent.pivotChange=!0)}catch(n){this.showError()}},t.prototype.endDialog=function(){var f,i,t,r,u,e,s;this.isEdit=!1;f=n.select("#"+this.parentID+"calculateddialog",document);i=f?n.getInstance(f,o.Dialog):void 0;i?i.close():(n.getInstance(n.select("#"+this.parentID+"ddlelement",document),y.MaskedTextBox).value="",this.currentFieldName=this.formatText=this.fieldText=this.formatType=null,this.formulaText=this.fieldType=this.parentHierarchy=null,t=this.parent.isAdaptive?this.parent.dialogRenderer.parentElement:i.element,(this.parent.dialogRenderer.parentElement.querySelector("."+he).value="",n.select("#"+this.parentID+"droppable",this.parent.dialogRenderer.parentElement).value="",n.select("#"+this.parentID+"Custom_Format_Element",this.parent.dialogRenderer.parentElement).value="","olap"===this.parent.dataType)&&(r=n.getInstance(n.select("#"+this.parentID+"Member_Type_Div",t),a.DropDownList),u=n.getInstance(n.select("#"+this.parentID+"Hierarchy_List_Div",t),a.DropDownList),r.index=0,r.readonly=!1,r.dataBind(),u.index=0,u.enabled=!1,u.dataBind()),e=n.getInstance(n.select("#"+this.parentID+"Custom_Format_Element",t),y.MaskedTextBox),s=n.getInstance(n.select("#"+this.parentID+"Format_Div",t),a.DropDownList),s.index="olap"===this.parent.dataType?0:4,s.dataBind(),e.enabled=!1,e.dataBind())},t.prototype.showError=function(){if(this.parent.engineModule.fieldList[this.field]&&delete this.parent.engineModule.fieldList[this.field],this.parent.setProperties({dataSourceSettings:this.existingReport},!0),this.isEdit){for(var t=this.parent.dataSourceSettings.calculatedFieldSettings,n=0;t&&n<t.length;n++)if(t[n].name===this.field){t[n].formula=this.currentFormula;break}}else if(this.parent.engineModule.fields)for(n=0;n<this.parent.engineModule.fields.length;n++)if(this.parent.engineModule.fields[n]===this.field){this.parent.engineModule.fields.splice(n,1);break}this.parent.lastCalcFieldInfo={};this.triggerActionCompleteEvent();this.parent.updateDataSource(!1);this.isFormula=!1},t.prototype.getFieldListData=function(t){var h=[],e,c,u,o,l,v,a,f,i;if("olap"===this.parent.dataType)for(e=0,c=h=r.getClonedData(t.olapEngineModule.fieldListData?t.olapEngineModule.fieldListData:[]);e<c.length;e++)u=c[e],u.spriteCssClass&&(u.spriteCssClass.indexOf("e-attributeCDB-icon")>-1||u.spriteCssClass.indexOf("e-level-members")>-1)?u.hasChildren=!0:u.spriteCssClass&&u.spriteCssClass.indexOf("e-namedSetCDB-icon")>-1?u.hasChildren=!1:u.spriteCssClass&&u.spriteCssClass.indexOf("e-calcMemberGroupCDB")>-1&&(u.expanded=this.isEdit);else for(o=0,l=t.engineModule.fieldList?Object.keys(t.engineModule.fieldList):[];o<l.length;o++)f=l[o],i=t.engineModule.fieldList[f],a="number"===i.type&&"include"!==t.engineModule.fieldList[f].type&&"exclude"!==t.engineModule.fieldList[f].type||"DistinctCount"===i.aggregateType?void 0!==i.aggregateType?i.aggregateType:eo:tf,v=this.parent.localeObj.getConstant(a),h.push({index:i.index,name:(this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(i.caption):i.caption)+" ("+v+")",type:a,icon:or+" "+s,formula:this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(i.formula):i.formula,field:this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(f):f,caption:this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(i.caption?i.caption:f):i.caption?i.caption:f});return h},t.prototype.fieldDropped=function(t){var l,i,r,s,f;if(t.cancel=!0,l=n.getInstance(n.select("#"+this.parentID+"calculateddialog",document),o.Dialog),i=n.select("#"+this.parentID+"droppable",l.element),n.removeClass([i],"e-copy-drop"),n.removeClass([t.draggedNode.querySelector("."+ri)],vu),r=t.draggedNode.getAttribute("data-field"),"olap"===this.parent.dataType)if(this.parent.olapEngineModule.fieldList[r]&&this.parent.olapEngineModule.fieldList[r].isCalculatedField&&(r=this.parent.olapEngineModule.fieldList[r].tag),t.target.id===this.parentID+"droppable"&&""===i.value)i.value=r,i.focus();else if(t.target.id===this.parentID+"droppable"&&""!==i.value){var e=i.value,h=i.selectionStart,c=e.substring(h,e.length),u=(f=e.substring(0,h))+r;i.value=f+r+c;i.focus();i.setSelectionRange(u.length,u.length)}else t.cancel=!0;else s=t.draggedNode.getAttribute("data-type"),t.target.id===this.parentID+"droppable"&&""===i.value?(i.value=s===pt?t.draggedNodeData.id.toString():'"'+s+"("+r+')"',i.focus()):t.target.id===this.parentID+"droppable"&&""!==i.value?(u=void 0,h=i.selectionStart,f=(e=i.value).substring(0,h),c=e.substring(h,e.length),s===pt?(u=f+t.draggedNodeData.id.toString(),i.value=f+t.draggedNodeData.id.toString()+c):(u=f+'"'+s+"("+r+')"',i.value=f+'"'+s+"("+r+')"'+c),i.focus(),i.setSelectionRange(u.length,u.length)):t.cancel=!0},t.prototype.createDialog=function(){var u=this,i,r,f,t;if(null!==n.select("#"+this.parentID+"calculateddialog",document))for(n.remove(n.select("#"+this.parentID+"calculateddialog",document));!n.isNullOrUndefined(document.querySelector("."+this.parentID+"calculatedmenu"));)n.remove(document.querySelector("."+this.parentID+"calculatedmenu"));i=n.createElement("div",{id:this.parentID+"calculateddialog",className:"e-pivot-calc-dialog-div "+("olap"===this.parent.dataType?"e-olap-calc-dialog-div":"")});this.parent.element.appendChild(i);r=[{click:this.applyFormula.bind(this),isFlat:!1,buttonModel:{content:this.parent.localeObj.getConstant("ok"),isPrimary:!0,cssClass:this.parent.cssClass}},{click:this.cancelClick.bind(this),isFlat:!1,buttonModel:{content:this.parent.localeObj.getConstant("cancel"),cssClass:this.parent.cssClass}}];"olap"===this.parent.dataType&&(f={click:this.clearFormula.bind(this),isFlat:!1,buttonModel:{cssClass:"e-calc-clear-btn"+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("clear")}},r.splice(0,0,f));t=new o.Dialog({allowDragging:!0,position:{X:"center",Y:"center"},buttons:r,close:this.closeDialog.bind(this),beforeOpen:this.beforeOpen.bind(this),open:function(){n.select("#"+u.parentID+"ddlelement",t.element)&&n.select("#"+u.parentID+"ddlelement",t.element).focus()},animationSettings:{effect:"Zoom"},width:"25%",isModal:!0,closeOnEscape:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,showCloseIcon:!0,header:this.parent.localeObj.getConstant("createCalculatedField"),target:document.body,cssClass:this.parent.cssClass});t.isStringTemplate=!0;t.appendTo(i)},t.prototype.cancelClick=function(){n.getInstance(n.select("#"+this.parentID+"calculateddialog",document),o.Dialog).close();this.isEdit=!1},t.prototype.beforeOpen=function(){n.getInstance(n.select("#"+this.parentID+"calculateddialog",document),o.Dialog).element.querySelector(".e-dlg-header").setAttribute("title",this.parent.localeObj.getConstant("createCalculatedField"))},t.prototype.closeDialog=function(){"pivotfieldlist"===this.parent.getModuleName()&&("Abort"!==this.parent.actionObj.actionName&&this.parent.axisFieldModule.render(),"Fixed"!==this.parent.renderMode&&(n.addClass([this.parent.element.querySelector("."+st)],gr),this.parent.dialogRenderer.fieldListDialog.show()));this.destroy();n.isNullOrUndefined(document.getElementById(this.parentID+"calculateddialog"))||n.remove(document.getElementById(this.parentID+"calculateddialog"));n.isNullOrUndefined(document.querySelector("."+this.parentID+"calculatedmenu"))||n.remove(document.querySelector("."+this.parentID+"calculatedmenu"));var t="pivotview"===this.parent.getModuleName()||"pivotfieldlist"===this.parent.getModuleName()&&"Fixed"===this.parent.renderMode?0:500;this.buttonCall&&(this.buttonCall=!1,setTimeout(this.setFocus.bind(this),t))},t.prototype.setFocus=function(){var n,t,i,r;if("pivotview"===this.parent.getModuleName()&&this.parent.element?n=this.parent.element:this.parent.element&&document.getElementById(this.parent.element.id+"_Container")&&(n=document.getElementById(this.parent.element.id+"_Container")),n)for(t=0,i=[].slice.call(n.querySelectorAll(".e-pivot-button"));t<i.length;t++)if(r=i[t],r.getAttribute("data-uid")===this.currentFieldName){r.focus();break}},t.prototype.renderDialogElements=function(){var t=n.createElement("div",{id:this.parentID+"outerDiv",className:("olap"===this.parent.dataType?"e-olap-calc-outer-div ":"")+"e-pivot-calc-outer-div"}),it=n.createElement("div",{id:this.parentID+"Olap_Tree_Div",className:"e-olap-field-tree-div"}),i=n.createElement("div",{id:this.parentID+"Pivot_Calc_Div",className:"e-pivot-calculated-div"}),rt,r,v,y,c,ut,u,l,f,ft,p,e,et,w,b,k,d,g,nt,tt,h,ot,a;return"pivotfieldlist"===this.parent.getModuleName()&&null!==this.parent.dialogRenderer.parentElement.querySelector("."+bu)&&this.parent.isAdaptive?(rt=n.createElement("div",{id:this.parentID+"accordDiv",className:"e-pivot-accord"}),t.appendChild(rt),r=n.createElement("div",{id:this.parentID+"buttonDiv",className:yc}),v=n.createElement("button",{id:this.parentID+"addBtn",className:"e-pivot-add-button",attrs:{type:"button"}}),v.innerText=this.parent.localeObj.getConstant("add"),y=n.createElement("button",{id:this.parentID+"cancelBtn",className:"e-pivot-cancel-button",attrs:{type:"button"}}),y.innerText=this.parent.localeObj.getConstant("cancel"),r.appendChild(y),r.appendChild(v),t.appendChild(r)):(this.parent.isAdaptive||"olap"!==this.parent.dataType||((e=n.createElement("div",{className:"e-pivot-field-name-title",id:this.parentID+"_FieldNameTitle"})).innerText=this.parent.localeObj.getConstant("fieldTitle"),i.appendChild(e)),c=n.createElement("div",{id:this.parentID+"innerDiv",className:"e-pivot-calc-input-div"}),ut=n.createElement("input",{id:this.parentID+"ddlelement",attrs:{type:"text"},className:he}),c.appendChild(ut),"olap"!==this.parent.dataType||this.parent.isAdaptive?t.appendChild(c):i.appendChild(c),u=n.createElement("div",{id:this.parentID+"control_container",className:lc}),this.parent.isAdaptive||(l=n.createElement("div",{className:pc}),(l.innerText="olap"===this.parent.dataType?this.parent.localeObj.getConstant("allFields"):this.parent.localeObj.getConstant("formulaField"),"olap"===this.parent.dataType)?(f=n.createElement("div",{className:pc+"-container"}),f.appendChild(l),ft=n.createElement("span",{attrs:{tabindex:"0","aria-disabled":"false","aria-label":this.parent.localeObj.getConstant("fieldTooltip"),role:"button"},className:s+" "+wc}),f.appendChild(ft),new o.Tooltip({content:this.parent.localeObj.getConstant("fieldTooltip"),position:this.parent.enableRtl?"RightCenter":"LeftCenter",target:"."+wc,offsetY:(this.parent.enableRtl,-10),locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:220,cssClass:this.parent.cssClass}).appendTo(f),u.appendChild(f)):t.appendChild(l)),p=n.createElement("div",{className:cc+"-outer-div"}),u.appendChild(p),et=n.createElement("div",{id:this.parentID+"tree",className:cc}),p.appendChild(et),"olap"!==this.parent.dataType||this.parent.isAdaptive?t.appendChild(u):it.appendChild(u),this.parent.isAdaptive||((e=n.createElement("div",{className:"e-pivot-formula-title"})).innerText="olap"===this.parent.dataType?this.parent.localeObj.getConstant("expressionField"):this.parent.localeObj.getConstant("formula"),"olap"===this.parent.dataType?i.appendChild(e):t.appendChild(e)),w=n.createElement("textarea",{id:this.parentID+"droppable",className:bu+" e-control e-textbox e-input",attrs:{placeholder:this.parent.isAdaptive?this.parent.localeObj.getConstant("dropTextMobile"):"olap"===this.parent.dataType?this.parent.localeObj.getConstant("olapDropText"):this.parent.localeObj.getConstant("dropText")}}),("olap"!==this.parent.dataType||this.parent.isAdaptive?t.appendChild(w):i.appendChild(w),this.parent.isAdaptive&&(r=n.createElement("div",{id:this.parentID+"buttonDiv",className:yc}),(a=n.createElement("button",{id:this.parentID+"okBtn",className:vc,attrs:{type:"button"}})).innerText=this.parent.localeObj.getConstant("apply"),r.appendChild(a),t.appendChild(r)),"olap"===this.parent.dataType)&&(this.parent.isAdaptive||(b=n.createElement("div",{className:"e-olap-member-title"}),b.innerText=this.parent.localeObj.getConstant("memberType"),i.appendChild(b)),k=n.createElement("div",{id:this.parentID+"Member_Type_Div",className:hs}),this.parent.isAdaptive?t.appendChild(k):(i.appendChild(k),d=n.createElement("div",{className:"e-olap-hierarchy-title"}),d.innerText=this.parent.localeObj.getConstant("selectedHierarchy"),i.appendChild(d)),g=n.createElement("div",{id:this.parentID+"Hierarchy_List_Div",className:os}),this.parent.isAdaptive?t.appendChild(g):i.appendChild(g)),this.parent.isAdaptive||(nt=n.createElement("div",{className:"e-pivot-format-title"}),nt.innerText=this.parent.localeObj.getConstant("formatString"),i.appendChild(nt)),tt=n.createElement("div",{id:this.parentID+"Format_Div",className:ss}),this.parent.isAdaptive?t.appendChild(tt):i.appendChild(tt),h=n.createElement("div",{id:this.parentID+"custom_Format_Div",className:"e-pivot-calc-custom-format-div"}),ot=n.createElement("input",{id:this.parentID+"Custom_Format_Element",attrs:{type:"text"},className:es}),(h.appendChild(ot),i.appendChild(h),this.parent.isAdaptive?t.appendChild(h):i.appendChild(h),"pivotfieldlist"===this.parent.getModuleName()&&null===this.parent.dialogRenderer.parentElement.querySelector("."+bu)&&this.parent.isAdaptive)?(a=t.querySelector("."+vc),t.appendChild(a)):("olap"===this.parent.dataType&&t.appendChild(it),t.appendChild(i))),t},t.prototype.renderAdaptiveLayout=function(t){var i=this.parent.dialogRenderer.adaptiveElement,r,u,f,e,o;t?(n.select("#"+this.parentID+"droppable",i.element)&&(r=n.getInstance(n.select("#"+this.parentID+"ddlelement",document),y.MaskedTextBox),this.formulaText=n.select("#"+this.parentID+"droppable",document).value,this.fieldText=r.value),i.element.querySelector("."+hs)&&(u=n.getInstance(n.select("#"+this.parentID+"Member_Type_Div",i.element),a.DropDownList),this.fieldType=u.value),i.element.querySelector("."+os)&&(f=n.getInstance(n.select("#"+this.parentID+"Hierarchy_List_Div",i.element),a.DropDownList),this.parentHierarchy="Dimension"===this.fieldType?f.value:null),i.element.querySelector("."+ss)&&(e=n.getInstance(n.select("#"+this.parentID+"Format_Div",i.element),a.DropDownList),this.formatType=e.value),i.element.querySelector("."+es)&&(o=n.getInstance(n.select("#"+this.parentID+"Custom_Format_Element",i.element),y.MaskedTextBox),this.formatText="Custom"===("olap"===this.parent.dataType?this.formatType:this.getFormat(this.formatType))?o.value:null)):(this.currentFieldName=this.formulaText=this.fieldText=this.formatText=null,this.fieldType=this.formatType=this.parentHierarchy=null);this.renderMobileLayout(i)},t.prototype.updateAdaptiveCalculatedField=function(t,i){var f=this.parent.dialogRenderer.adaptiveElement.element,u,h,e,o,l,s,c;this.isEdit=t;u=t?"pivot"===this.parent.dataType?this.parent.engineModule.fieldList[i]:this.parent.olapEngineModule.fieldList[i]:{id:null,caption:null,formula:null,fieldType:"Measure",formatString:"pivot"===this.parent.dataType?null:"Standard",parentHierarchy:null};this.currentFieldName=u.id;h=n.getInstance(n.select("#"+this.parentID+"ddlelement",document),y.MaskedTextBox);(n.select("#"+this.parentID+"droppable",document)&&(this.formulaText=n.select("#"+this.parentID+"droppable",document).value=u.formula,this.fieldText=h.value=u.caption,h.dataBind()),f.querySelector("."+hs))&&(e=n.getInstance(n.select("#"+this.parentID+"Member_Type_Div",f),a.DropDownList),this.fieldType=e.value=u.fieldType,e.readonly=!!t,e.dataBind());f.querySelector("."+os)&&(o=n.getInstance(n.select("#"+this.parentID+"Hierarchy_List_Div",f),a.DropDownList),"Dimension"===this.fieldType?this.parentHierarchy=o.value=u.parentHierarchy:(this.parentHierarchy=null,o.index=0),o.dataBind());f.querySelector("."+ss)&&(l=n.getInstance(n.select("#"+this.parentID+"Format_Div",f),a.DropDownList),this.formatType=l.value=this.formatTypes.indexOf(u.formatString)>-1?u.formatString:"Custom");f.querySelector("."+es)&&(s=n.getInstance(n.select("#"+this.parentID+"Custom_Format_Element",f),y.MaskedTextBox),c=r.getFieldByName(i,this.parent.dataSourceSettings.formatSettings),this.formatText="pivot"===this.parent.dataType?s.value=c?c.format:null:s.value="Custom"===this.formatType?u.formatString:null,s.dataBind())},t.prototype.createDropElements=function(){for(var v,d,p,g,i,u,f,e,s,t=this,it=n.select("#"+this.parentID+"calculateddialog",document)?n.getInstance(n.select("#"+this.parentID+"calculateddialog",document),o.Dialog):null,h=this.parent.isAdaptive?this.parent.dialogRenderer.parentElement:it.element,c=[],l=[],w=0,nt=this.formatTypes;w<nt.length;w++)v=nt[w],c.push({value:"pivot"===this.parent.dataType?this.getFormat(v):v,text:this.parent.localeObj.getConstant(v)});if("olap"===this.parent.dataType){for(var b=[],k=0,tt=["Measure","Dimension"];k<tt.length;k++)d=tt[k],b.push({value:d,text:this.parent.localeObj.getConstant(d)});for(p=0,g=r.getClonedData(this.parent.olapEngineModule.fieldListData);p<g.length;p++)i=g[p],i.spriteCssClass&&(i.spriteCssClass.indexOf("e-attributeCDB-icon")>-1||i.spriteCssClass.indexOf("e-hierarchyCDB-icon")>-1)&&l.push({value:i.id,text:i.caption});u=new a.DropDownList({dataSource:b,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:null!==this.fieldType?this.fieldType:b[0].value,readonly:this.isEdit,cssClass:cs+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(i){f.enabled="Dimension"===i.value;t.fieldType=i.value;t.formulaText=n.select("#"+t.parentID+"droppable",document).value;f.dataBind()}});u.isStringTemplate=!0;u.appendTo(n.select("#"+this.parentID+"Member_Type_Div",h));f=new a.DropDownList({dataSource:l,enableRtl:this.parent.enableRtl,locale:this.parent.locale,allowFiltering:!0,enabled:"Dimension"===u.value,filterBarPlaceholder:this.parent.localeObj.getConstant("example")+" "+l[0].text.toString(),fields:{value:"value",text:"text"},value:null!==this.parentHierarchy&&"Dimension"===u.value?this.parentHierarchy:l[0].value,cssClass:cs+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(i){t.parentHierarchy=i.value;t.formulaText=n.select("#"+t.parentID+"droppable",document).value}});f.isStringTemplate=!0;f.appendTo(n.select("#"+this.parentID+"Hierarchy_List_Div",h))}e=new a.DropDownList({dataSource:c,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:this.parent.isAdaptive&&null!==this.formatType?this.formatType:"olap"===this.parent.dataType?c[0].value:c[4].value,cssClass:cs+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(i){s.enabled="Custom"===i.value;t.formatType=i.value;t.formulaText=n.select("#"+t.parentID+"droppable",document).value;s.dataBind()}});e.isStringTemplate=!0;e.appendTo(n.select("#"+this.parentID+"Format_Div",h));s=new y.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("customFormat"),locale:this.parent.locale,enableRtl:this.parent.enableRtl,value:null!==this.formatText&&"Custom"===e.value?this.formatText:null,enabled:"Custom"===e.value,change:function(i){t.formatText=i.value;t.formulaText=n.select("#"+t.parentID+"droppable",document).value},cssClass:this.parent.cssClass});s.isStringTemplate=!0;s.appendTo(n.select("#"+this.parentID+"Custom_Format_Element",h))},t.prototype.getFormat=function(n){var t=n;if("olap"!==this.parent.dataType)switch(t){case"Standard":t="N";break;case"Currency":t="C";break;case"Percent":t="P";break;case"N":t="Standard";break;case"C":t="Currency";break;case"P":t="Percent"}else switch(t){case"Standard":t="N";break;case"Currency":t="C";break;case"Percent":t="P"}return t},t.prototype.createTreeView=function(){var t=this,i=n.select("#"+this.parentID+"calculateddialog",document)?n.getInstance(n.select("#"+this.parentID+"calculateddialog",document),o.Dialog):null,r=this.parent.isAdaptive?this.parent.dialogRenderer.parentElement:i.element;this.treeObj="olap"===this.parent.dataType?new et.TreeView({fields:{dataSource:this.getFieldListData(this.parent),id:"id",text:"caption",parentID:"pid",iconCss:"spriteCssClass"},allowDragAndDrop:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,nodeDragStart:this.dragStart.bind(this),nodeDragging:function(t){t.event.target&&t.event.target.classList.contains(bu)?(n.removeClass([t.clonedNode],au),n.addClass([t.event.target],"e-copy-drop")):(n.addClass([t.clonedNode],au),n.removeClass([t.event.target],"e-copy-drop"),t.dropIndicator="e-no-drop",n.addClass([t.clonedNode.querySelector("."+s)],"e-icon-expandable"),n.removeClass([t.clonedNode.querySelector("."+s)],"e-list-icon"))},nodeClicked:this.fieldClickHandler.bind(this),nodeSelected:function(i){i.node.getAttribute("data-type")===pt?t.displayMenu(i.node):(n.removeClass([i.node],"e-active"),i.cancel=!0)},nodeDragStop:this.fieldDropped.bind(this),drawNode:this.drawTreeNode.bind(this),nodeExpanding:this.updateNodeIcon.bind(this),nodeCollapsed:this.updateNodeIcon.bind(this),sortOrder:"None",cssClass:this.parent.cssClass}):new et.TreeView({fields:{dataSource:this.getFieldListData(this.parent),id:"formula",text:"name",iconCss:"icon"},allowDragAndDrop:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,cssClass:this.parent.cssClass,nodeCollapsing:this.nodeCollapsing.bind(this),nodeDragStart:this.dragStart.bind(this),nodeClicked:this.fieldClickHandler.bind(this),nodeDragStop:this.fieldDropped.bind(this),drawNode:this.drawTreeNode.bind(this),keyPress:function(n){39===n.event.keyCode&&(n.cancel=!0)},sortOrder:"Ascending"});this.treeObj.isStringTemplate=!0;this.treeObj.appendTo(n.select("#"+this.parentID+"tree",r))},t.prototype.updateNodeIcon=function(t){var i,e,u,o;if(t.node&&t.node.querySelector(".e-list-icon")&&t.node.querySelector(".e-icon-expandable.e-process")&&t.node.querySelector(".e-list-icon").className.indexOf("e-folderCDB-icon")>-1)i=t.node.querySelector(".e-list-icon"),n.removeClass([i],"e-folderCDB-icon"),n.addClass([i],"e-folderCDB-open-icon");else if(t.node&&t.node.querySelector(".e-list-icon")&&t.node.querySelector(".e-icon-expandable")&&t.node.querySelector(".e-list-icon").className.indexOf("e-folderCDB-open-icon")>-1)i=t.node.querySelector(".e-list-icon"),n.removeClass([i],"e-folderCDB-open-icon"),n.addClass([i],"e-folderCDB-icon");else{for(var s=this.treeObj.fields.dataSource,r=[],f=0,h=s;f<h.length;f++)e=h[f],e.pid===t.nodeData.id.toString()&&r.push(e);if(0!==r.length)return;for(this.parent.olapEngineModule.calcChildMembers=[],this.parent.olapEngineModule.getCalcChildMembers(this.parent.dataSourceSettings,t.nodeData.id.toString()),r=this.parent.olapEngineModule.calcChildMembers,this.parent.olapEngineModule.calcChildMembers=[],u=0,o=r;u<o.length;u++)(i=o[u]).pid=t.nodeData.id.toString(),i.hasChildren=!1,i.spriteCssClass="e-level-members",i.caption=""===i.caption?this.parent.localeObj.getConstant("blank"):i.caption,s.push(i);this.treeObj.addNodes(r,t.node)}},t.prototype.nodeCollapsing=function(n){n.cancel=!0},t.prototype.dragStart=function(t){var r=!1,i=t.clonedNode,u;(i&&("olap"===this.parent.dataType&&(i.querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||i.querySelector(".e-attributeCDB-icon,.e-hierarchyCDB-icon")||i.querySelector(".e-level-members,.e-namedSetCDB-icon"))||"pivot"===this.parent.dataType&&t.event.target.classList.contains(ff))&&(r=!0),r)?(n.addClass([t.draggedNode.querySelector("."+ri)],vu),n.addClass([i],"e-pivot-calc"),u=n.getInstance(n.select("#"+this.parentID+"calculateddialog",document),o.Dialog),i.style.zIndex=(u.zIndex+1).toString(),i.style.display="inline"):t.cancel=!0},t.prototype.drawTreeNode=function(t){var i,e,f,c,a,o,l,v,u,h,y,p;"olap"===this.parent.dataType?(t.node.querySelector(".e-measure-icon")&&(t.node.querySelector(".e-list-icon").style.display="none"),i=t.nodeData,t.node.setAttribute("data-field",i.id),t.node.setAttribute("data-caption",i.caption),e=t.node.querySelector("."+ru),t.nodeData&&t.nodeData.type===pt&&e&&t.node.querySelector(".e-list-icon.e-calc-member")&&(t.node.setAttribute("data-type",i.type),t.node.setAttribute("data-membertype",i.fieldType),t.node.setAttribute("data-hierarchy",i.parentHierarchy?i.parentHierarchy:""),t.node.setAttribute("data-formula",i.formula),f=i.formatString?this.formatTypes.indexOf(i.formatString)>-1?i.formatString:"Custom":"None",t.node.setAttribute("data-formatString",f),t.node.setAttribute("data-customformatstring","Custom"===f?i.formatString:""),c=n.createElement("span",{className:bt+" e-icons e-list-icon"}),(e.classList.add("e-calcfieldmember"),this.parent.isAdaptive)?(a=n.createElement("span",{className:"e-list-edit-icon"+(this.isEdit&&this.currentFieldName===i.id?" e-edited ":" e-edit ")+s}),o=n.createElement("div",{className:"e-list-header-icon"}),o.appendChild(a),o.appendChild(c),e.appendChild(o)):e.appendChild(c)),this.parent.isAdaptive&&(l=t.node.querySelector("."+ru),t.node&&t.node.querySelector(".e-list-icon")&&l&&(v=t.node.querySelector(".e-list-icon"),l.insertBefore(v,t.node.querySelector(".e-list-text"))),t.node&&t.node.querySelector(".e-calcMemberGroupCDB,.e-measureGroupCDB-icon,.e-folderCDB-icon")&&(t.node.querySelector("."+sr).style.display="none"),t.node&&t.node.querySelector(".e-level-members")&&(t.node.querySelector(".e-list-icon").style.display="none")),(t.node.querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||t.node.querySelector(".e-attributeCDB-icon,.e-hierarchyCDB-icon")||t.node.querySelector(".e-level-members,.e-namedSetCDB-icon"))&&n.addClass([t.node],lh)):(i=t.nodeData.field,t.node.setAttribute("data-field",i),t.node.setAttribute("data-caption",t.nodeData.caption),t.node.setAttribute("data-type",t.nodeData.type),u=r.getFieldByName(i,this.parent.dataSourceSettings.formatSettings),(t.node.setAttribute("data-formatString",u?u.format:""),u)&&(h=this.getFormat(u.format),f=h?this.formatTypes.indexOf(h)>-1?u.format:"Custom":"None",t.node.setAttribute("data-customformatstring","Custom"===f?h:""),t.node.setAttribute("data-formatString",u?f:"")),y=n.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("dragField")},className:s+" e-drag"}),p=n.createElement("div",{className:" e-iconspace"}),n.prepend([y],t.node.querySelector("."+ru)),n.append([p,t.node.querySelector("."+or)],t.node.querySelector("."+ru)),this.getMenuItems(this.parent.engineModule.fieldList[i].type).length<=0?n.removeClass([t.node.querySelector("."+or)],s):t.node.querySelector("."+or).setAttribute("title",this.parent.localeObj.getConstant("format")),this.parent.engineModule.fieldList[i].aggregateType===pt&&(t.node.querySelector("."+or).setAttribute("title",this.parent.localeObj.getConstant("remove")),n.addClass([t.node.querySelector("."+or)],bt),n.addClass([t.node.querySelector(".e-iconspace")],[g,s,"e-list-icon"]),t.node.querySelector("."+g).setAttribute("title",this.parent.localeObj.getConstant("edit")),t.node.querySelector("."+g).setAttribute("aria-disabled","false"),t.node.querySelector("."+g).setAttribute("tabindex","-1"),n.removeClass([t.node.querySelector("."+or)],or),n.removeClass([t.node.querySelector(".e-iconspace")],"e-iconspace")))},t.prototype.createTypeContainer=function(t){for(var f,u=n.createElement("div",{id:this.parentID+"control_container",className:lc}),r=this.getMenuItems(this.parent.engineModule.fieldList[t].type),i=0;i<r.length;i++)f=n.createElement("input",{id:this.parentID+"radio"+t+r[i],attrs:{type:"radio","data-ftxt":t,"data-value":r[i]},className:"e-pivot-calc-radio"}),u.appendChild(f);return u},t.prototype.getMenuItems=function(t,i){for(var u=n.isNullOrUndefined(i)?this.parent.aggregateTypes:i,f=[],e=this.getValidSummaryType(),r=0;r<u.length;r++)e.indexOf(u[r])>-1&&f.indexOf(u[r])<0&&((u[r]!==tf&&u[r]!==oo||"number"===t)&&"number"!==t||f.push(u[r]));return f},t.prototype.getValidSummaryType=function(){return[tf,oo,eo,"Avg",tv,"Min","Max",iv,rv,uv,fv,ev]},t.prototype.getAccordionData=function(n){for(var t,r=[],u=Object.keys(n.engineModule.fieldList),i=0,f=u.length;i<f;i++)t=u[i],r.push({header:"<input id="+this.parentID+"_"+i+" class="+fs+' type="checkbox" data-field='+t+' data-caption="'+this.parent.engineModule.fieldList[t].caption+'" data-type='+this.parent.engineModule.fieldList[t].type+"/>",content:this.parent.engineModule.fieldList[t].aggregateType===pt||this.getMenuItems(this.parent.engineModule.fieldList[t].type).length<1?"":this.createTypeContainer(t).outerHTML,iconCss:this.parent.engineModule.fieldList[t].aggregateType===pt?"e-list-icon "+(this.isEdit&&this.currentFieldName===t?"e-edited":"e-edit"):""});return r},t.prototype.renderMobileLayout=function(t){var s=this,c,i,r,u,e,f,h;t.items[4].content=this.renderDialogElements().outerHTML;t.dataBind();c=n.select("#"+this.parentID+"calculateddialog",document)?n.getInstance(n.select("#"+this.parentID+"calculateddialog",document),o.Dialog):null;i=this.parent.isAdaptive?this.parent.dialogRenderer.parentElement:c.element;this.parent.isAdaptive&&null!==this.parent.dialogRenderer.parentElement.querySelector("."+bu)&&this.createDropElements();r=new ut.Button({cssClass:this.parent.cssClass,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});(r.isStringTemplate=!0,r.appendTo(n.select("#"+this.parentID+"cancelBtn",i)),r.element&&(r.element.onclick=this.cancelBtnClick.bind(this)),null!==this.parent.dialogRenderer.parentElement.querySelector("."+bu)&&this.parent.isAdaptive)?(u=new ut.Button({cssClass:this.parent.cssClass,isPrimary:!0,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),u.isStringTemplate=!0,u.appendTo(n.select("#"+this.parentID+"okBtn",i)),e=new y.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("fieldName"),locale:this.parent.locale,enableRtl:this.parent.enableRtl,change:function(t){s.fieldText=t.value;s.formulaText=n.select("#"+s.parentID+"droppable",document).value},cssClass:this.parent.cssClass}),e.isStringTemplate=!0,e.appendTo(n.select("#"+this.parentID+"ddlelement",i)),null!==this.formulaText&&null!==n.select("#"+this.parentID+"droppable",this.parent.dialogRenderer.parentElement)&&(n.select("#"+this.parentID+"droppable",this.parent.dialogRenderer.parentElement).value=this.formulaText),null!==this.fieldText&&null!==this.parent.dialogRenderer.parentElement.querySelector("."+he)&&(this.parent.dialogRenderer.parentElement.querySelector("."+he).value=this.fieldText,e.value=this.fieldText),u.element&&(u.element.onclick=this.applyFormula.bind(this))):this.parent.isAdaptive&&(f=new ut.Button({cssClass:this.parent.cssClass,isPrimary:!0,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),(f.isStringTemplate=!0,f.appendTo(n.select("#"+this.parentID+"addBtn",i)),"olap"===this.parent.dataType)?(this.treeObj=new et.TreeView({fields:{dataSource:this.getFieldListData(this.parent),id:"id",text:"caption",parentID:"pid",iconCss:"spriteCssClass"},showCheckBox:!0,autoCheck:!1,sortOrder:"None",enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,nodeClicked:this.fieldClickHandler.bind(this),drawNode:this.drawTreeNode.bind(this),nodeExpanding:this.updateNodeIcon.bind(this),nodeCollapsed:this.updateNodeIcon.bind(this),nodeSelected:function(t){n.removeClass([t.node],"e-active");t.cancel=!0},cssClass:this.parent.cssClass}),this.treeObj.isStringTemplate=!0,this.treeObj.appendTo(n.select("#"+this.parentID+"accordDiv",i))):(h=new et.Accordion({items:this.getAccordionData(this.parent),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,expanding:this.accordionExpand.bind(this),clicked:this.accordionClickHandler.bind(this),created:this.accordionCreated.bind(this)}),h.isStringTemplate=!0,h.appendTo(n.select("#"+this.parentID+"accordDiv",i)),this.updateType()),f.element&&(f.element.onclick=this.addBtnClick.bind(this)))},t.prototype.accordionExpand=function(t){var i;if(0===t.element.querySelectorAll(".e-radio-wrapper").length)for(var e=Object.keys(this.parent.engineModule.fieldList),f=0,s=e.length;f<s;f++){var r=e[f],u="number"!==this.parent.engineModule.fieldList[r].type?[tf,oo]:[eo,tf,"Avg",tv,"Min","Max",oo,iv,rv,uv,fv,ev],o=void 0;if(r===t.element.querySelector("[data-field").getAttribute("data-field"))for(i=0;i<u.length;i++)(o=new ut.RadioButton({label:this.parent.localeObj.getConstant(u[i]),name:"AggregateType"+r,checked:t.element.querySelector("[data-type").getAttribute("data-type")===u[i],change:this.onChange.bind(this),locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass})).isStringTemplate=!0,o.appendTo(n.select("#"+this.parentID+"radio"+r+u[i],t.element))}},t.prototype.onChange=function(n){var t=n.event.target.parentElement.querySelector(".e-label").innerText,i=n.event.target.closest(".e-acrdn-item").querySelector("[data-field").getAttribute("data-caption");n.event.target.closest(".e-acrdn-item").querySelector(".e-label").innerText=i+" ("+t+")";n.event.target.closest(".e-acrdn-item").querySelector("[data-type").setAttribute("data-type",n.event.target.getAttribute("data-value"))},t.prototype.updateType=function(){for(var u,t,f,e=Object.keys(this.parent.engineModule.fieldList),s=n.select("#"+this.parentID+"calculateddialog",document)?n.getInstance(n.select("#"+this.parentID+"calculateddialog",document),o.Dialog):null,r=this.parent.isAdaptive?this.parent.dialogRenderer.parentElement:s.element,i=0,h=e.length;i<h;i++)t=e[i],u="number"===this.parent.engineModule.fieldList[t].type&&"include"!==this.parent.engineModule.fieldList[t].type&&"exclude"!==this.parent.engineModule.fieldList[t].type||"DistinctCount"===this.parent.engineModule.fieldList[t].aggregateType?void 0!==this.parent.engineModule.fieldList[t].aggregateType?this.parent.engineModule.fieldList[t].aggregateType:eo:tf,f=new ut.CheckBox({label:this.parent.engineModule.fieldList[t].caption+" ("+this.parent.localeObj.getConstant(u)+")",locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass}),f.isStringTemplate=!0,f.appendTo(n.select("#"+this.parentID+"_"+i,r)),n.select("#"+this.parentID+"_"+i,r).setAttribute("data-field",t),n.select("#"+this.parentID+"_"+i,r).setAttribute("data-type",u)},t.prototype.cancelBtnClick=function(){this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement)},t.prototype.addBtnClick=function(){var n="",f=null,s=null,u,t,i,r;if("pivot"===this.parent.dataType){for(u=document.querySelectorAll(".e-accordion .e-check"),t=0;t<u.length;t++)if(f=u[t].parentElement.querySelector("[data-field]").getAttribute("data-field"),-1===(s=u[t].parentElement.querySelector("[data-field]").getAttribute("data-type")).indexOf(pt))n=n+'"'+s+"("+f+')"';else for(i=0;i<this.parent.dataSourceSettings.calculatedFieldSettings.length;i++)if(this.parent.dataSourceSettings.calculatedFieldSettings[i].name===f){n+=this.parent.dataSourceSettings.calculatedFieldSettings[i].formula;break}}else for(var c=this.treeObj.getAllCheckedNodes(),e=this.parent.olapEngineModule,o=0,h=c;o<h.length;o++)r=h[o],n+=e.fieldList[r]&&e.fieldList[r].type===pt?e.fieldList[r].tag:r;this.formulaText=null!==this.formulaText?this.formulaText+n:n;this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement)},t.prototype.createCalculatedFieldDialog=function(t){var i,u,r;this.parent.isAdaptive&&"pivotfieldlist"===this.parent.getModuleName()?(this.renderAdaptiveLayout(!t||void 0===t.edit||t.edit),this.isEdit=t&&void 0!==t.edit?t.edit:this.isEdit):this.parent.isAdaptive||((this.isEdit=!(!t||void 0===t.edit)&&t.edit,this.renderDialogLayout(),t&&t.edit)&&(i=this.treeObj.element.querySelector('li[data-field="'+t.fieldName+'"]'),i&&((n.addClass([i],["e-active","e-node-focus"]),i.setAttribute("aria-selected","true"),i.id=this.treeObj.element.id+"_active","pivot"===this.parent.dataType)?(u={event:{target:i.querySelector(".e-list-icon.e-edit.e-icons")}},this.fieldClickHandler(u)):this.displayMenu(i))),r=n.getInstance(n.select("#"+this.parentID+"calculateddialog",document),o.Dialog),r.element.style.top=parseInt(r.element.style.top,10)<0?"0px":r.element.style.top)},t.prototype.renderDialogLayout=function(){var t,i;this.newFields=n.extend([],this.parent.dataSourceSettings.calculatedFieldSettings,null,!0);this.createDialog();t=n.getInstance(n.select("#"+this.parentID+"calculateddialog",document),o.Dialog);t.content=this.renderDialogElements();t.refresh();i=new y.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("fieldName"),locale:this.parent.locale,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass});i.isStringTemplate=!0;i.appendTo(n.select("#"+this.parentID+"ddlelement",t.element));this.createDropElements();this.createTreeView();this.droppable=new n.Droppable(n.select("#"+this.parentID+"droppable",t.element));this.keyboardEvents=new n.KeyboardEvents(t.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{moveRight:"rightarrow",enter:"enter",shiftE:"shift+E","delete":"delete"},eventName:"keydown"})},t.prototype.createConfirmDialog=function(t,i,r,u,f){var s=n.createElement("div",{id:this.parentID+"_CalculatedFieldErrorDialog",className:kh}),e;this.parent.element.appendChild(s);e=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!1,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"auto",height:"auto",position:{X:"center",Y:"center"},buttons:[{click:u?this.removeCalcField.bind(this,f):this.replaceFormula.bind(this,r),isFlat:!1,buttonModel:{cssClass:wt+(this.parent.cssClass?" "+this.parent.cssClass:""),content:u?this.parent.localeObj.getConstant("yes"):this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:this.closeErrorDialog.bind(this),isFlat:!1,buttonModel:{cssClass:cu+(this.parent.cssClass?" "+this.parent.cssClass:""),content:u?this.parent.localeObj.getConstant("no"):this.parent.localeObj.getConstant("cancel")}}],header:t,content:i,isModal:!0,visible:!0,closeOnEscape:!0,target:document.body,cssClass:this.parent.cssClass,close:this.removeErrorDialog.bind(this,f)});e.isStringTemplate=!0;e.appendTo(s)},t.prototype.replaceFormula=function(t){var i=this.parent.dataSourceSettings,r,u;if("olap"===this.parent.dataType){for(r=0;r<i.calculatedFieldSettings.length;r++)if(i.calculatedFieldSettings[r].name===t.name){n.isNullOrUndefined(t.hierarchyUniqueName)||(i.calculatedFieldSettings[r].hierarchyUniqueName=t.hierarchyUniqueName);i.calculatedFieldSettings[r].formatString=t.formatString;i.calculatedFieldSettings[r].formula=t.formula;this.parent.lastCalcFieldInfo=i.calculatedFieldSettings[r];break}}else for(u=0;u<i.values.length;u++)if(i.values[u].type===pt&&i.values[u].name===t.name)for(r=0;r<i.calculatedFieldSettings.length;r++)i.calculatedFieldSettings[r].name===t.name&&(i.calculatedFieldSettings[r].formula=t.formula,this.parent.lastCalcFieldInfo=i.calculatedFieldSettings[r].properties?i.calculatedFieldSettings[r].properties:i.calculatedFieldSettings[r],this.updateFormatSettings(i,t.name,t.formatString));this.addFormula(i,t.name);this.removeErrorDialog()},t.prototype.removeErrorDialog=function(t){var r=n.select("#"+this.parentID+"_CalculatedFieldErrorDialog",document),i=r?n.getInstance(r,o.Dialog):null;i&&!i.isDestroyed&&i.destroy();null!==n.select("#"+this.parentID+"_CalculatedFieldErrorDialog",document)&&n.remove(n.select("#"+this.parentID+"_CalculatedFieldErrorDialog",document));t&&(t.setAttribute("tabindex","0"),t.focus())},t.prototype.closeErrorDialog=function(){n.getInstance(n.select("#"+this.parentID+"_CalculatedFieldErrorDialog",document),o.Dialog).close()},t.prototype.triggerActionCompleteEvent=function(){var t={dataSourceSettings:r.getClonedDataSourceSettings(this.parent.dataSourceSettings),actionName:"Invalid formula",fieldInfo:this.parent.actionObj.fieldInfo,actionInfo:this.parent.actionObj.actionInfo},n=this.parent.isPopupView?this.parent.pivotGridModule:this.parent;n.trigger(rh,t);"Abort"!==t.actionName&&this.parent.pivotCommon&&this.parent.pivotCommon.errorDialog?this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),this.parent.localeObj.getConstant("invalidFormula")):(this.parent&&this.parent.actionObj&&(this.parent.actionObj.actionName=t.actionName),this.closeDialog());this.parent&&this.parent.actionObj&&(this.parent.actionObj.actionName="");n&&n.actionObj&&(n.actionObj.actionName="")},t.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on(dr,this.createCalculatedFieldDialog,this)},t.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(dr,this.createCalculatedFieldDialog)},t.prototype.destroy=function(){var c=n.select("#"+this.parentID+"_CalculatedFieldErrorDialog",document),t,i,r,l,u,a,f,e,s,v,h;c&&(t=n.getInstance(c,o.Dialog),t&&!t.isDestroyed&&t.destroy(),n.remove(c));i=n.select("#"+this.parentID+"CalcContextmenu",document);i&&(r=n.getInstance(i,et.ContextMenu),r&&!r.isDestroyed&&r.destroy(),n.remove(i));this.treeObj&&!this.treeObj.isDestroyed&&(this.treeObj.destroy(),this.treeObj=null);this.droppable&&(this.droppable=null);this.keyboardEvents&&(this.keyboardEvents.destroy(),this.keyboardEvents=null);l=n.select("#"+this.parentID+"ddlelement",document);l&&(u=n.getInstance(l,y.MaskedTextBox),u&&!u.isDestroyed&&u.destroy());a=n.select("#"+this.parentID+"Custom_Format_Element",document);a&&(f=n.getInstance(a,y.MaskedTextBox),f&&!f.isDestroyed&&f.destroy());this.destroyDropdowns();this.destroyAdaptiveComponents();e=n.select("#"+this.parentID+"calculateddialog",document);e&&(s=n.getInstance(e,o.Dialog),s&&!s.isDestroyed&&s.destroy(),n.remove(e));v=n.select("#"+this.parentID+"accordDiv",document);v&&(h=n.getInstance(v,et.Accordion),h&&!h.isDestroyed&&h.destroy());this.newFields=null;this.curMenu=null;this.existingReport=null;this.formulaText=null;this.fieldText=null;this.formatText=null;this.formatType=null;this.fieldType=null;this.parentHierarchy=null;this.currentFieldName=null},t.prototype.destroyDropdowns=function(){var e=n.select("#"+this.parentID+"Format_Div",document),t,u,i,f,r;e&&(t=n.getInstance(e,a.DropDownList),t&&!t.isDestroyed&&t.destroy());u=n.select("#"+this.parentID+"Member_Type_Div",document);u&&(i=n.getInstance(u,a.DropDownList),i&&!i.isDestroyed&&i.destroy());f=n.select("#"+this.parentID+"Hierarchy_List_Div",document);f&&(r=n.getInstance(f,a.DropDownList),r&&!r.isDestroyed&&r.destroy())},t.prototype.destroyAdaptiveComponents=function(){if(this.parent.isAdaptive){["#"+this.parentID+"addBtn","#"+this.parentID+"cancelBtn","#"+this.parentID+"okBtn"].forEach(function(t){var r=n.select(t,document),i;r&&(i=n.getInstance(r,ut.Button),i&&!i.isDestroyed&&i.destroy())});var t=document.getElementById(this.parent.element.id+"_PivotFieldList_Container");t&&("pivot"===this.parent.dataType&&t.querySelectorAll(".e-radio-wrapper").forEach(function(t){var i=n.getInstance(t,ut.RadioButton);i&&!i.isDestroyed&&i.destroy()}),t.querySelectorAll("."+fs).forEach(function(t){var i=n.getInstance(t,ut.CheckBox);i&&!i.isDestroyed&&i.destroy()}))}},t}();ne.Inject(vw);var yw=function(){function t(n){this.tempElements=[];this.parent=n}return t.prototype.render=function(){var r;(!this.parent.pivotButtonModule||this.parent.pivotButtonModule&&this.parent.pivotButtonModule.isDestroyed)&&new ga(this.parent);this.parent.pivotButtonModule.cleanupButtonElements();this.createPivotButtons();for(var i=[],u=(i=i.concat([].slice.call(this.parent.groupingBarModule.rowPanel.querySelectorAll("."+rr)))).length,t=0;t<u;t++)(!this.parent.isTabular||this.parent.isTabular&&0===this.parent.engineModule.rowMaxLevel)&&(r=n.createElement("span",{className:"e-indent-div",styles:"width:"+24*t+"px"}),this.tempElements.push(r),n.prepend([r],i[t]))},t.prototype.createPivotButtons=function(){var i=[this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.values,this.parent.dataSourceSettings.filters],o=Array.prototype.slice.call(this.parent.element.querySelectorAll("."+go+",."+ki+",."+pr+",."+di+",."+iu)),t,u,s,f,h,e,c,l;for(n.isNullOrUndefined(this.parent.element.querySelector("."+tr))&&o.push(this.parent.groupingBarModule.rowPanel),t=0;t<o.length;t++)u=o[t],this.parent.dataSourceSettings.values.length>0&&u.classList.contains(vf)&&this.parent.dataSourceSettings.columns.length>0&&u.classList.contains(af)||(u.innerHTML="");if("pivot"===this.parent.dataType&&this.parent.dataSourceSettings.dataSource&&(!(this.parent.dataSourceSettings.dataSource instanceof nt.DataManager)&&this.parent.dataSourceSettings.dataSource.length>0||this.parent.dataSourceSettings.dataSource instanceof nt.DataManager&&this.parent.engineModule.data&&this.parent.engineModule.data.length>0)||"olap"===this.parent.dataType&&this.parent.dataSourceSettings.url&&""!==this.parent.dataSourceSettings.url||"Server"===this.parent.dataSourceSettings.mode&&this.parent.dataSourceSettings.url&&""!==this.parent.dataSourceSettings.url){if(s=["rows","columns","values","filters"],"pivot"===this.parent.dataType&&this.parent.groupingBarSettings.showFieldsPanel)for(s.push("all-fields"),i.push([]),f=0,h=this.parent.engineModule&&this.parent.engineModule.fieldList?Object.keys(this.parent.engineModule.fieldList):[];f<h.length;f++)e=h[f],this.parent.engineModule.fieldList[e]&&!this.parent.engineModule.fieldList[e].isSelected&&i[i.length-1].push(r.getFieldInfo(e,this.parent,!0).fieldItem);for(t=0,c=i.length;t<c;t++)i[t]&&(l={field:i[t],axis:s[t].toString()},this.parent.notify(de,l))}},t.prototype.destroy=function(){for(var n,t=0;t<this.tempElements.length;t++)n=this.tempElements[t],n&&n.parentNode&&n.parentNode.removeChild(n);this.tempElements=[]},t}(),pw=function(){function t(t){this.rowAxisWidth=0;this.isDestroyed=!1;this.parent=t;this.parent.groupingBarModule=this;this.resColWidth=this.parent.resizedValue?this.parent.resizedValue:this.parent.isTabular?150:this.parent.isAdaptive?180:249;this.addEventListener();this.parent.axisFieldModule=new yw(this.parent);this.touchObj=new n.Touch(this.parent.element,{tapHold:this.tapHoldHandler.bind(this)})}return t.prototype.getModuleName=function(){return"groupingBar"},t.prototype.renderLayout=function(){var t,i,f,r;this.groupingTable=n.createElement("div",{className:hi});t=n.createElement("div",{className:ou});this.rightAxisPanel=n.createElement("div",{className:yo});var u=n.createElement("div",{className:"e-axis-row "+fu+"container"}),e=n.createElement("div",{className:"e-axis-column "+fu+"container"}),o=n.createElement("div",{className:"e-axis-value "+fu+"container"}),s=n.createElement("div",{className:ls+" "+fu+"container"});this.rowPanel=n.createElement("div",{className:ki+" "+lu+(this.parent.isTabular?" e-tabular-group-rows":"")});var h=n.createElement("div",{className:pr+" "+vr}),c=n.createElement("div",{className:di+" "+si}),l=n.createElement("div",{className:iu+" "+yr});for(u.appendChild(this.rowPanel),e.appendChild(h),o.appendChild(c),s.appendChild(l),this.rowAxisPanel=u,t.appendChild(o),t.appendChild(u),this.rightAxisPanel.appendChild(s),this.rightAxisPanel.appendChild(e),this.groupingTable.appendChild(n.createElement("div",{styles:"display:flex;"})),this.groupingTable.firstElementChild.appendChild(t),this.groupingTable.firstElementChild.appendChild(this.rightAxisPanel),"pivot"===this.parent.dataType&&null!=this.parent.groupingBarSettings&&this.parent.groupingBarSettings.showFieldsPanel&&(this.gridPanel=this.createToolbarUI(this.groupingTable)),this.groupingTable.classList.add(br),this.groupingTable.querySelector("."+ki).classList.add(tr),i=0,f=[this.rowPanel,h,c,l];i<f.length;i++)r=f[i],this.parent.groupingBarSettings.allowDragAndDrop&&new n.Droppable(r,{}),this.unWireEvent(r),this.wireEvent(r);"Table"!==this.parent.displayOption.view&&"Table"!==this.parent.groupingBarSettings.displayMode?(this.groupingChartTable=this.groupingTable.cloneNode(!0),n.select("#"+this.parent.element.id+"_AllFields",this.groupingChartTable)&&(n.select("#"+this.parent.element.id+"_AllFields",this.groupingChartTable).remove(),this.chartPanel=this.createToolbarUI(this.groupingChartTable)),this.groupingChartTable.classList.add(wf),this.groupingChartTable.classList.remove(br),this.groupingChartTable.querySelector("."+ki).classList.add(le),this.groupingChartTable.querySelector("."+ki).classList.remove(tr),this.parent.chartSettings.enableMultipleAxis&&this.parent.chartSettings.chartSeries&&["Pie","Pyramid","Doughnut","Funnel"].indexOf(this.parent.chartSettings.chartSeries.type)<0?this.groupingChartTable.querySelector("."+di).classList.add("e-group-chart-multi-values"):this.groupingChartTable.querySelector("."+di).classList.add(vf),this.parent.chartSettings.chartSeries&&["Pie","Pyramid","Doughnut","Funnel"].indexOf(this.parent.chartSettings.chartSeries.type)>-1?this.groupingChartTable.querySelector("."+pr).classList.add(af):this.groupingChartTable.querySelector("."+pr).classList.add("e-group-chart-accumulation-column"),this.groupingChartTable.querySelector("."+iu).classList.add("e-group-chart-filters")):this.groupingChartTable=void 0;"Chart"!==this.parent.displayOption.view&&"Chart"!==this.parent.groupingBarSettings.displayMode||(this.groupingTable=void 0)},t.prototype.appendToElement=function(){var r,l,i,d,g,nt,f,tt,u,e,a,ft,o,s,y,h,p,ht,ct,w;if(this.resColWidth=this.parent.resizedValue?this.parent.resizedValue:this.resColWidth,r=this.groupingTable?this.groupingTable:this.groupingChartTable,!n.isNullOrUndefined(r)){var b=r.getElementsByClassName(ou)[0],k=r.getElementsByClassName(iu+" "+yr)[0],c=r.getElementsByClassName(pr+" "+vr)[0],t=r.getElementsByClassName(di+" "+si)[0];if((this.parent.element.querySelector("."+yt)||this.parent.element.querySelector("."+lt))&&this.parent.showGroupingBar){if(this.parent.element.querySelector("."+hi))for(l=this.parent.element.querySelectorAll("."+hi),i=0;i<l.length;i++)d=l[i],n.remove(d);if(this.groupingChartTable&&(n.select("#"+this.parent.element.id+"_chart",this.parent.element)?(n.setStyleAttribute(this.groupingChartTable,{width:n.formatUnit(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())}),g=this.groupingChartTable.getElementsByClassName(ou)[0],nt=this.groupingChartTable.getElementsByClassName(di+" "+si)[0],(this.parent.isAdaptive&&(g.style.minWidth="100px",nt.style.minWidth="100px"),this.parent.element.insertBefore(this.groupingChartTable,n.select("#"+this.parent.element.id+"_chart",this.parent.element)),this.groupingChartTable.querySelector("."+tu)&&null!=this.chartPanel&&!this.chartPanel.isDestroyed)&&(f=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2,this.chartPanel.width=this.parent.isAdaptive?f:f<400?this.parent.minWidth||"398px":f,this.chartPanel.refreshOverflow(),this.parent.showFieldList&&this.parent.pivotFieldListModule&&this.parent.pivotFieldListModule.element&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.alignIcon.bind(this))))):this.groupingChartTable=void 0),"Chart"!==this.parent.displayOption.view&&this.groupingTable){this.parent.isAdaptive&&(b.style.minWidth="100px",t.style.minWidth="100px");this.parent.firstColWidth&&(b.style.minWidth="auto",t.style.minWidth="auto");k.removeAttribute("style");c.removeAttribute("style");this.rowPanel.removeAttribute("style");(tt="olap"===this.parent.dataType?this.parent.olapEngineModule.headerContent?Object.keys(this.parent.olapEngineModule.headerContent).length:0:this.parent.engineModule.headerContent?Object.keys(this.parent.engineModule.headerContent).length:0,n.isNullOrUndefined(tt))||(u=this.parent.element.querySelector("."+rt).querySelector(".e-columnheader"),u.removeAttribute("style"),n.addClass([u.querySelector("."+ci)],"e-group-row"),u.querySelector(".e-group-row").querySelector(".e-headercelldiv").style.display="none",u.querySelector(".e-group-row").querySelector(".e-sortfilterdiv").style.display="none");(this.parent.element.insertBefore(this.groupingTable,this.parent.element.querySelector("."+yt)),n.setStyleAttribute(this.groupingTable,{width:n.formatUnit(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())}),this.groupingTable&&this.groupingTable.querySelector("."+tu)&&null!=this.gridPanel&&!this.gridPanel.isDestroyed)&&(e=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2,this.gridPanel.width=this.parent.isAdaptive?e:e<400?this.parent.minWidth||"398px":e,this.gridPanel.refreshOverflow());this.groupingTable.style.minWidth=this.parent.minWidth?this.parent.minWidth+"px":"400px";this.rowPanel.style.width=this.resColWidth+"px";this.rowPanel.style.overflow="hidden";this.rowPanel.style.display="block";t.style.width=this.resColWidth+"px";t.style.overflow="hidden";t.style.display="block";this.parent.axisFieldModule.render();t.querySelectorAll(".e-pvt-btn-div").forEach(function(n){n.style.width=t.offsetWidth<250?"100%":"auto"});this.setGridRowWidth();var it=this.parent.element.querySelector("."+rt).querySelector("colgroup").children,ut=0,at=this.parent.isTabular&&this.parent.engineModule.rowMaxLevel>0?this.parent.engineModule.rowMaxLevel+1:1;for(i=0;i<at;i++)n.isNullOrUndefined(it[i])||(ut+=parseInt(it[i].style.width,10));a=ut;ft=n.formatUnit(this.groupingTable.offsetWidth-a);n.setStyleAttribute(t,{width:a+"px"});n.setStyleAttribute(this.rightAxisPanel,{width:ft});this.groupingTable.style.display="";o=t.offsetHeight/2;"Chart"===this.parent.displayOption.primary&&(this.groupingTable.style.display="none");o>c.offsetHeight&&(n.setStyleAttribute(k,{height:n.formatUnit(o)}),n.setStyleAttribute(c,{height:n.formatUnit(o+2)}));s=this.parent.element.querySelector("."+rt).offsetHeight;n.setStyleAttribute(this.rowPanel,{height:s+"px"});this.parent.element.querySelector("."+rt).querySelector(".e-rhandler")&&(this.parent.element.querySelector("."+rt).querySelector(".e-rhandler").style.height=s+"px");for(var et=[].slice.call(this.parent.element.querySelector("."+rt).querySelector("thead").querySelectorAll("tr")).filter(function(n){return n.childNodes.length>0}),ot=s/et.length,v=0,st=et;v<st.length;v++)for(y=st[v],n.setStyleAttribute(y,{height:ot+"px"}),h=0,p=[].slice.call(y.querySelectorAll(".e-rhandler"));h<p.length;h++)ht=p[h],n.setStyleAttribute(ht,{height:ot+"px"})}else this.parent.axisFieldModule.render(),this.updateChartAxisHeight();this.parent.showToolbar&&"Both"===this.parent.displayOption.view&&(ct="Table"===this.parent.currentView?".e-chart-grouping-bar":".e-pivot-grouping-bar",w=this.parent.element.querySelector(ct),w&&(w.style.display="none"))}}},t.prototype.updateChartAxisHeight=function(){var f,e;if(this.groupingChartTable&&n.select("#"+this.parent.element.id+"_chart",this.parent.element)){var o=this.groupingChartTable.querySelector("."+yo),s=this.groupingChartTable.querySelector("."+ou),i=this.groupingChartTable.querySelector("."+ki),t=this.groupingChartTable.querySelector("."+di),r=this.groupingChartTable.querySelector("."+iu),u=this.groupingChartTable.querySelector("."+pr);i&&u&&(i.style.height="auto",u.style.height="auto",i.offsetHeight>0&&u.offsetHeight>0)&&(f=i.offsetHeight>u.offsetHeight?i.offsetHeight:u.offsetHeight,n.setStyleAttribute(i,{height:n.formatUnit(f)}),n.setStyleAttribute(u,{height:n.formatUnit(f)}));t&&r&&(t.style.height="auto",r.style.height="auto",t.offsetHeight>0&&r.offsetHeight>0)&&(f=t.offsetHeight>r.offsetHeight?t.offsetHeight:r.offsetHeight,n.setStyleAttribute(t,{height:n.formatUnit(f)}),n.setStyleAttribute(r,{height:n.formatUnit(f)}));e=n.formatUnit(this.groupingChartTable.offsetWidth-Math.ceil(s.getBoundingClientRect().width));n.setStyleAttribute(t,{width:Math.ceil(t.getBoundingClientRect().width)+"px"});n.setStyleAttribute(o,{width:e})}},t.prototype.refreshUI=function(){var f,k,e,t,a,nt,v,u,o,p,s,w,b;if(this.groupingChartTable&&((n.setStyleAttribute(this.groupingChartTable,{width:n.formatUnit(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())}),this.groupingChartTable.querySelector("."+tu)&&null!=this.chartPanel&&!this.chartPanel.isDestroyed)&&(f=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2,this.chartPanel.width=this.parent.isAdaptive?f:f<400?this.parent.minWidth||"398px":f,this.chartPanel.refreshOverflow()),this.updateChartAxisHeight(),this.parent.showFieldList&&this.parent.pivotFieldListModule&&this.parent.pivotFieldListModule.element&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.alignIcon.bind(this)))),this.groupingTable){k=this.groupingTable.getElementsByClassName(di+" "+si)[0];(n.setStyleAttribute(this.groupingTable,{width:n.formatUnit(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())}),this.groupingTable&&this.groupingTable.querySelector("."+tu)&&null!=this.gridPanel&&!this.gridPanel.isDestroyed)&&(e=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2,this.gridPanel.width=this.parent.isAdaptive?e:e<400?this.parent.minWidth||"398px":e,this.gridPanel.refreshOverflow());this.groupingTable.style.minWidth=this.parent.minWidth?this.parent.minWidth+"px":"400px";var h=this.parent.element.querySelector("."+rt).querySelector("colgroup").children,d=0,ft=this.parent.isTabular&&this.parent.engineModule.rowMaxLevel>0?this.parent.engineModule.rowMaxLevel+1:1,g=n.isNullOrUndefined(this.parent.element.querySelectorAll(".e-group-rows")[0])?null:this.parent.element.querySelectorAll(".e-group-rows")[0].querySelectorAll(".e-pvt-btn-div"),c=0;for(n.isNullOrUndefined(g)||g.forEach(function(n){c+=n.offsetHeight+5.5}),t=0;t<ft;t++)if(n.isNullOrUndefined(h[t])||(d+=parseInt(h[t].style.width,10)),!n.isNullOrUndefined(this.parent.element.querySelectorAll(".e-group-pivot-rows")[t])){for(var l=0,r="pivot"===this.parent.dataType?this.parent.engineModule:this.parent.olapEngineModule,i=0;i<r.pivotValues.length&&(!r.pivotValues[i]||!r.pivotValues[i][0]||"row"!==r.pivotValues[i][0].axis);i++)r.pivotValues[i]&&l++;this.parent.element.querySelectorAll(".e-group-pivot-rows")[t].style.height=c<l*this.parent.gridSettings.rowHeight?l*this.parent.gridSettings.rowHeight+"px":c+"px"}if(a=d,nt=n.formatUnit(this.groupingTable.offsetWidth-a),(n.setStyleAttribute(k,{width:a+"px"}),this.parent.isTabular)?this.setTabularWidth():(v=parseInt(h[0].style.width,10),n.setStyleAttribute(this.rowPanel,{width:v>100?v+"px":"100px"})),n.setStyleAttribute(this.rightAxisPanel,{width:nt}),this.parent.showFieldList&&this.parent.pivotFieldListModule&&this.parent.pivotFieldListModule.element&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.alignIcon.bind(this))),!this.parent.grid.element.querySelector(".e-group-row")){u=this.parent.element.querySelector("."+rt).querySelector(".e-columnheader");n.addClass([u.querySelector("."+ci)],"e-group-row");n.setStyleAttribute(this.rowPanel,{height:this.parent.element.querySelector("."+rt).offsetHeight+"px"});u.querySelector(".e-group-row").appendChild(this.rowAxisPanel);n.setStyleAttribute(u.querySelector(".e-group-row").querySelector(".e-headercelldiv"),{display:"none"});n.setStyleAttribute(u.querySelector(".e-group-row").querySelector(".e-sortfilterdiv"),{display:"none"});o=this.parent.element.querySelector("."+rt).offsetHeight;n.setStyleAttribute(this.rowPanel,{height:o+"px"});this.parent.element.querySelector("."+rt).querySelector(".e-rhandler")&&(this.parent.element.querySelector("."+rt).querySelector(".e-rhandler").style.height=o+"px");for(var tt=[].slice.call(this.parent.element.querySelector("."+rt).querySelector("thead").querySelectorAll("tr")).filter(function(n){return n.childNodes.length>0}),it=o/tt.length,y=0,ut=tt;y<ut.length;y++)for(p=ut[y],n.setStyleAttribute(p,{height:it+"px"}),s=0,w=[].slice.call(p.querySelectorAll(".e-rhandler"));s<w.length;s++)b=w[s],b.parentElement.parentElement.querySelector("."+vi)||n.setStyleAttribute(b,{height:it+"px"})}}},t.prototype.alignIcon=function(){var i,t,r,u;this.parent.pivotFieldListModule&&(i=this.parent.pivotFieldListModule.element,t=void 0,(t="Table"===this.parent.currentView?this.parent.grid?this.parent.grid.element.offsetWidth:t:this.parent.chart?this.parent.pivotChartModule.getCalulatedWidth():t)&&(r=this.parent.minWidth?this.parent.minWidth:this.parent.isAdaptive?300:400,u=t<r?r:t,n.setStyleAttribute(i.querySelector("."+st),{left:n.formatUnit(this.parent.enableRtl?-Math.abs(u-i.querySelector("."+st).offsetWidth):u-i.querySelector("."+st).offsetWidth)})))},t.prototype.setGridRowWidth=function(){var o=this.parent.element.querySelector("."+rt).querySelector(".e-columnheader"),p=(this.groupingTable?this.groupingTable:this.groupingChartTable).getElementsByClassName(ou)[0],l,r,a,e,b,s,i,tt,y,h,f,c;if(this.parent.isTabular&&this.parent.engineModule.rowMaxLevel>=1)for(n.isNullOrUndefined(p.querySelector(".e-axis-row"))||p.querySelector(".e-axis-row").remove(),l=o.querySelectorAll("."+ci),r=0;r<this.parent.engineModule.rowMaxLevel+1;r++)n.isNullOrUndefined(l[r])||(n.addClass([l[r]],"e-group-row"),a=o.querySelectorAll(".e-group-row"),a[r].querySelector(".e-row-axis-panel")||(e=this.rowAxisPanel.cloneNode(!0),e.classList.add("e-row-axis-panel"),e.querySelectorAll(".e-pvt-btn-div")&&e.querySelectorAll(".e-pvt-btn-div").forEach(function(n){return n.remove()}),a[r].appendChild(e))),this.parent.axisFieldModule.render();else n.addClass([o.querySelector("."+ci)],"e-group-row"),o.querySelector(".e-group-row").appendChild(this.rowAxisPanel);if(b=this.parent.element.querySelector("."+rt).querySelector("colgroup").children[0],this.parent.isTabular&&this.setTabularWidth(),this.rowPanel.querySelector("."+w))if(this.parent.isAdaptive){if(!this.parent.firstColWidth){if((t=this.parent.grid.columns)&&t.length>0)if(this.parent.isTabular)for(this.rowAxisWidth=this.parent.dataSourceSettings.rows.length*this.parent.gridSettings.columnWidth,r=0;r<this.parent.engineModule.rowMaxLevel;r++)n.isNullOrUndefined(t[r])||(t[r].width=this.parent.gridSettings.columnWidth);else t[0].width=this.resColWidth;this.parent.posCount=0}}else{var v=[].slice.call(this.rowPanel.querySelectorAll("."+rr)),k=v[v.length-1],it=this.parent.isTabular?0:k.querySelector(".e-indent-div").offsetWidth+20,d=k.querySelector("."+w).offsetWidth+it,u=n.formatUnit(d<this.resColWidth?this.resColWidth:d),g=this.parent.element.querySelector("."+rt).querySelector("."+ci),ut=this.parent.element.querySelector("."+ct).querySelector("colgroup").children[0],nt=parseInt(u,10),ft=this.parent.pivotColumns.length>0,t=this.parent.grid.columns;for(this.resColWidth=this.parent.resizeInfo&&this.parent.resizeInfo["0.formattedText"]>100?this.parent.resizeInfo["0.formattedText"]:this.resColWidth,t&&t.length>0&&(t[0].width=t[0].autoFit?t[0].width:nt>this.resColWidth?nt:this.resColWidth),s="olap"===this.parent.dataType?this.parent.renderModule.calculateColWidth(this.parent.olapEngineModule.pivotValues.length>0?this.parent.olapEngineModule.pivotValues[0].length:2):this.parent.renderModule.calculateColWidth(this.parent.dataSourceSettings.values.length>0&&this.parent.engineModule.pivotValues.length>0?this.parent.engineModule.pivotValues[0].length:2),i=0;i<t.length;i++)0!==i&&(t[i].columns?this.parent.setCommonColumnsWidth(this.parent.renderModule.pivotColumns[i].columns,s):"auto"!==t[i].width?(tt=t[i].customAttributes?t[i].customAttributes.cell.valueSort.levelName:"",y=this.parent.renderModule.setSavedWidth(tt,s),t[i].width=t[i].autoFit||ft&&this.parent.pivotColumns[i].autoFit?t[i].width:this.parent.renderModule.lastColumn&&this.parent.renderModule.lastColumn.field===t[i].field?y-3:y):t[i].minWidth=s);this.parent.isTabular&&(h=this.parent.pivotValues[0],f=0,(h&&n.isNullOrUndefined(h[0])&&(f=h.lastIndexOf("Server"===this.parent.dataSourceSettings.mode?null:void 0)+1),this.rowAxisWidth>(this.parent.resizedValue?this.parent.resizedValue:150)&&f>1)&&(c=v[0].getBoundingClientRect().width+6,u=this.rowAxisWidth<f*c||f>1?c+"px":this.rowAxisWidth-(f-1)*c+"px"));this.parent.posCount=0;this.parent.setGridColumns(this.parent.grid.columns);this.parent.firstColWidth||(u=this.parent.isTabular?this.resColWidth.toString():t[0].autoFit?t[0].width.toString():u,b.style.width=u,ut.style.width=u,g.style.width=u,n.setStyleAttribute(g,{width:u}))}else this.parent.grid.columns&&this.parent.grid.columns.length>0&&(this.parent.grid.columns[0].width=this.parent.grid.columns[0].width>this.resColWidth?this.parent.grid.columns[0].width:this.resColWidth),this.parent.grid.headerModule.refreshUI();(this.groupingTable||this.groupingChartTable)&&this.refreshUI()},t.prototype.wireEvent=function(t){n.EventHandler.add(t,"mouseover",this.dropIndicatorUpdate,this);n.EventHandler.add(t,"mouseleave",this.dropIndicatorUpdate,this)},t.prototype.unWireEvent=function(t){t&&(n.EventHandler.remove(t,"mouseover",this.dropIndicatorUpdate),n.EventHandler.remove(t,"mouseleave",this.dropIndicatorUpdate))},t.prototype.dropIndicatorUpdate=function(t){(this.parent.isDragging&&t.target.classList.contains(oi)&&"mouseover"===t.type||!this.parent.isDragging||!t.target.classList.contains(oi)&&"mouseleave"===t.type)&&(n.removeClass([].slice.call(this.parent.element.querySelectorAll("."+vt)),kt),n.removeClass([].slice.call(this.parent.element.querySelectorAll("."+vt+"-last")),kt))},t.prototype.tapHoldHandler=function(t){var i=n.closest(t.originalEvent.target,"."+w),r;if(!n.isNullOrUndefined(i)&&this.parent.isAdaptive)return r=i.getBoundingClientRect(),this.parent.contextMenuModule.fieldElement=i,void this.parent.contextMenuModule.menuObj.open(r.top,r.left)},t.prototype.RefreshFieldsPanel=function(){if("pivot"===this.parent.dataType&&null!=this.parent.groupingBarSettings){if(n.selectAll("#"+this.parent.element.id+"_AllFields",this.parent.element).length>0)for(var t=0,i=n.selectAll("#"+this.parent.element.id+"_AllFields",this.parent.element);t<i.length;t++)i[t].remove();this.parent.groupingBarSettings.showFieldsPanel&&(this.groupingChartTable&&"Table"!==this.parent.displayOption.view&&"Table"!==this.parent.groupingBarSettings.displayMode&&(this.chartPanel=this.createToolbarUI(this.groupingChartTable)),this.groupingTable&&(this.gridPanel=this.createToolbarUI(this.groupingTable)),this.parent.axisFieldModule.render(),this.refreshUI())}},t.prototype.createToolbarUI=function(t){n.select("#"+this.parent.element.id+"_AllFields",t)&&n.select("#"+this.parent.element.id+"_AllFields",t).remove();t.prepend(n.createElement("div",{id:this.parent.element.id+"_AllFields"}));var i=new et.Toolbar({cssClass:tu+(this.parent.cssClass?" "+this.parent.cssClass:""),enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,items:[{template:"<div class="+go+"><\/div>"}],allowKeyboard:!1,width:this.parent.gridSettings.allowAutoResizing?"auto":this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2});return i.appendTo(n.select("#"+this.parent.element.id+"_AllFields",t)),i},t.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ke,this.renderLayout,this),this.parent.on(ni,this.appendToElement,this))},t.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ni,this.appendToElement),this.parent.off(ke,this.renderLayout))},t.prototype.destroy=function(){var r=this,t,i;if(!this.isDestroyed){if(this.timeOutObj&&(clearTimeout(this.timeOutObj),this.timeOutObj=null),this.removeEventListener(),[this.rowPanel,this.groupingTable?this.groupingTable.querySelector("."+pr):null,this.groupingTable?this.groupingTable.querySelector("."+di):null,this.groupingTable?this.groupingTable.querySelector("."+iu):null].forEach(function(n){n&&r.unWireEvent(n)}),this.parent.pivotButtonModule&&(this.parent.pivotButtonModule.destroy(),this.parent.pivotButtonModule=null),this.parent.axisFieldModule&&(this.parent.axisFieldModule.destroy(),this.parent.axisFieldModule=null),this.gridPanel&&!this.gridPanel.isDestroyed&&(this.gridPanel.destroy(),this.gridPanel=null),this.chartPanel&&!this.chartPanel.isDestroyed&&(this.chartPanel.destroy(),this.chartPanel=null),this.touchObj&&!this.touchObj.isDestroyed&&(this.touchObj.destroy(),this.touchObj=null),t=this.parent.element.querySelectorAll("."+hi),t.length>0)for(i=0;i<t.length;i++)n.remove(t[i]);t=null;this.groupingChartTable&&(this.removeAllEventListeners(this.groupingChartTable),this.groupingChartTable=null);this.groupingTable&&(this.removeAllEventListeners(this.groupingTable),this.groupingTable=null);this.rowPanel=null;this.rowAxisPanel=null;this.rightAxisPanel=null;this.rowAxisWidth=0;this.resColWidth=0;this.isDestroyed=!0}},t.prototype.removeAllEventListeners=function(t){var u,i,r;if(t){for(u=t.querySelectorAll("."+oi),i=0;i<u.length;i++)this.unWireEvent(u[i]);for(r=t.querySelectorAll("."+w),i=0;i<r.length;i++)n.EventHandler.remove(r[i],"mouseover",this.dropIndicatorUpdate),n.EventHandler.remove(r[i],"mouseleave",this.dropIndicatorUpdate)}},t.prototype.setTabularWidth=function(){for(var r=this.parent.element.querySelector("."+rt).querySelector("colgroup").children,u=this.parent.isTabular&&this.parent.engineModule.rowMaxLevel>0?this.parent.engineModule.rowMaxLevel+1:1,i=this.parent.element.querySelector("."+rt).querySelector(".e-columnheader").querySelectorAll(".e-group-rows"),t=0;t<u;t++)n.isNullOrUndefined(i[t])||(i[t].style.width=parseInt(r[t].style.width,10)-6+"px")},t}(),ww=function(){function t(n){this.parent=n;this.parent.conditionalFormattingModule=this;this.parentID=this.parent.element.id;this.fontColor=[];this.backgroundColor=[];this.newFormat=[]}return t.prototype.getModuleName=function(){return"conditionalFormatting"},t.prototype.createDialog=function(){var t,r,i;null!==n.select("#"+this.parentID+"conditionalformatting",document)&&n.remove(n.select("#"+this.parentID+"conditionalformatting",document));t=n.createElement("div",{id:this.parentID+"conditionalformatting",className:"e-pivot-formatting-dialog"});this.parent.element.appendChild(t);i=[{click:this.addButtonClick.bind(this),isFlat:!1,buttonModel:{cssClass:(this.parent.isAdaptive?"e-small e-round "+bc:bc)+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:s+" "+sf,content:this.parent.isAdaptive?"":this.parent.localeObj.getConstant("condition")}},{click:this.applyButtonClick.bind(this),isFlat:!1,buttonModel:{isPrimary:!0,cssClass:"e-format-apply-button"+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("apply")}},{click:this.cancelButtonClick.bind(this),isFlat:!1,buttonModel:{cssClass:"e-format-cancel-button"+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}];(r=this.parent.isAdaptive?new o.Dialog({animationSettings:{effect:"Zoom"},isModal:!0,width:"100%",height:"100%",showCloseIcon:!1,closeOnEscape:!1,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,position:{X:"center",Y:"center"},allowDragging:!0,buttons:i,beforeOpen:this.beforeOpen.bind(this),close:this.removeDialog.bind(this),cssClass:this.parent.cssClass,header:this.parent.localeObj.getConstant("conditionalFormatting"),target:document.body}):new o.Dialog({allowDragging:!0,position:{X:"center",Y:this.parent.element.offsetTop},buttons:i,beforeOpen:this.beforeOpen.bind(this),close:this.removeDialog.bind(this),cssClass:this.parent.cssClass,isModal:!0,closeOnEscape:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,showCloseIcon:!0,header:this.parent.localeObj.getConstant("conditionalFormatting"),target:this.parent.element})).isStringTemplate=!0;r.appendTo(t)},t.prototype.beforeOpen=function(){n.select("#"+this.parentID+"conditionalformatting",document).querySelector(".e-dlg-header").setAttribute("title",this.parent.localeObj.getConstant("conditionalFormatting"))},t.prototype.addButtonClick=function(){var t=this,n=this;this.parent.trigger("conditionalFormatting",{conditions:"LessThan",value1:0,applyGrandTotals:!0,style:{backgroundColor:"white",color:"black",fontFamily:"Arial",fontSize:"12px"}},function(i){n.refreshConditionValues();t.destroyColorPickers();n.newFormat.push(i);n.addFormat()})},t.prototype.applyButtonClick=function(){if(this.refreshConditionValues()){this.parent.setProperties({dataSourceSettings:{conditionalFormatSettings:this.newFormat}},!0);var t={conditionalFormattingInfo:this.parent.dataSourceSettings.conditionalFormatSettings};this.parent.actionObj.actionInfo=t;this.parent.dataSourceSettings.values.length>0&&this.parent.renderPivotGrid();n.getInstance(n.select("#"+this.parentID+"conditionalformatting",document),o.Dialog).close()}},t.prototype.cancelButtonClick=function(){n.getInstance(n.select("#"+this.parentID+"conditionalformatting",document),o.Dialog).close();this.newFormat=[]},t.prototype.refreshConditionValues=function(){for(var t=0;t<this.newFormat.length;t++){if(""===n.select("#"+this.parentID+"conditionvalue1"+t,document).value||""===n.select("#"+this.parentID+"conditionvalue2"+t,document).value)return""===n.select("#"+this.parentID+"conditionvalue1"+t,document).value?n.select("#"+this.parentID+"conditionvalue1"+t,document).focus():n.select("#"+this.parentID+"conditionvalue2"+t,document).focus(),!1;this.newFormat[t].value1=Number(n.select("#"+this.parentID+"conditionvalue1"+t,document).value);this.newFormat[t].value2=Number(n.select("#"+this.parentID+"conditionvalue2"+t,document).value)}return!0},t.prototype.addFormat=function(){for(var r,u,i=n.createElement("div",{id:this.parentID+"formatDiv",className:"e-new-format"}),t=0;t<this.newFormat.length;t++)i.appendChild(this.createDialogElements(t));for(0===this.newFormat.length&&(r=this.createDialogElements(),u=n.createElement("p",{id:this.parentID+"emptyFormat",className:"e-pivot-conditional-empty-format"}),u.innerText=this.parent.localeObj.getConstant("emptyFormat"),r.appendChild(u),i.appendChild(r)),n.getInstance(n.select("#"+this.parentID+"conditionalformatting",document),o.Dialog).setProperties({content:i},!1),t=0;t<this.newFormat.length;t++)this.renderDropDowns(t),this.renderColorPicker(t)},t.prototype.createDialogElements=function(t){var c=n.createElement("div",{id:this.parentID+"outerDiv"+t,className:"e-format-outer-div"}),f,d,a,nt,v,tt,rt,y,ut,et,b,st,k,ht,ct,lt,at;if(void 0!==t){f=this.newFormat[t];d=n.createElement("button",{id:this.parentID+"removeButton"+t,className:"e-format-delete-button",attrs:{type:"button",title:this.parent.localeObj.getConstant("delete")}});c.appendChild(d);var s=n.createElement("div",{id:this.parentID+"innerDiv"+t,className:"e-format-inner-div"}),l=n.createElement("table",{id:this.parentID+"_valueTable"+t,className:vs,attrs:{role:"table"}}),e=n.createElement("tr"),u=n.createElement("td"),g=n.createElement("span",{id:this.parentID+"valuelabel"+t,className:"e-format-value-label"});g.innerText=this.parent.localeObj.getConstant("value");u.appendChild(g);e.appendChild(u);l.appendChild(e);e=n.createElement("tr");u=n.createElement("td");a=n.createElement("div",{id:this.parentID+"measure"+t});nt=n.createElement("input",{id:this.parentID+"measureinput"+t,attrs:{type:"text",tabindex:"0"}});a.appendChild(nt);u.appendChild(a);e.appendChild(u);u=n.createElement("td");v=n.createElement("div",{id:this.parentID+"condition"+t});tt=n.createElement("input",{id:this.parentID+"conditioninput"+t,attrs:{type:"text",tabindex:"0"}});v.appendChild(tt);u.appendChild(v);e.appendChild(u);u=n.createElement("td",{attrs:{style:"display:table"},className:"e-format-input-value"});var vt="Between"!==f.conditions&&"NotBetween"!==f.conditions?du:"",h=n.createElement("div",{attrs:{style:"display: table-row;"}}),it=n.createElement("div",{id:this.parentID+"ConditionValue1"+t,attrs:{style:"display: table-cell;"}}),yt=n.createElement("input",{id:this.parentID+"conditionvalue1"+t,attrs:{type:"text",tabindex:"0",value:n.isNullOrUndefined(f.value1)?"0":f.value1.toString(),placeholder:this.parent.localeObj.getConstant("emptyInput")}});it.appendChild(yt);h.appendChild(it);rt=n.createElement("span",{id:this.parentID+"valuespan"+t,className:"e-format-value-span "+vt,innerHTML:"&"});h.appendChild(rt);y=n.createElement("div",{id:this.parentID+"ConditionValue2"+t,attrs:{style:"display: table-cell;"}});ut=n.createElement("input",{id:this.parentID+"conditionvalue2"+t,attrs:{type:"text",tabindex:"0",value:n.isNullOrUndefined(f.value2)?"0":f.value2.toString(),placeholder:this.parent.localeObj.getConstant("emptyInput")}});y.appendChild(ut);h.appendChild(y);u.appendChild(h);e.appendChild(u);l.appendChild(e);s.appendChild(l);var p=n.createElement("table",{id:this.parentID+"_grandTotalTable"+t,className:vs+" e-grandtotal-checkbox-table",attrs:{role:"table"}}),w=n.createElement("tr"),ft=n.createElement("td");p.appendChild(w);et=n.createElement("input",{id:this.parentID+"grandtotalcheckbox"+t,attrs:{type:"checkbox",tabindex:"0"}});ft.appendChild(et);w.appendChild(ft);p.appendChild(w);s.appendChild(p);var o=n.createElement("table",{id:this.parentID+"_formatTable"+t,className:vs,attrs:{role:"table"}}),r=n.createElement("tr"),i=n.createElement("td"),ot=n.createElement("span",{id:this.parentID+"formatlabel"+t,className:"e-format-label"});ot.innerText=this.parent.localeObj.getConstant("formatLabel");i.appendChild(ot);r.appendChild(i);o.appendChild(r);r=n.createElement("tr");i=n.createElement("td");b=n.createElement("div",{id:this.parentID+"fontname"+t});st=n.createElement("input",{id:this.parentID+"fontnameinput"+t,attrs:{type:"text",tabindex:"0"}});b.appendChild(st);i.appendChild(b);r.appendChild(i);i=n.createElement("td");k=n.createElement("div",{id:this.parentID+"fontsize"+t});ht=n.createElement("input",{id:this.parentID+"fontsizeinput"+t,attrs:{type:"text",tabindex:"0"}});k.appendChild(ht);i.appendChild(k);r.appendChild(i);this.parent.isAdaptive&&(o.appendChild(r),r=n.createElement("tr"),o.appendChild(r),r=n.createElement("tr"));i=n.createElement("td");ct=n.createElement("input",{id:this.parentID+"fontcolor"+t,attrs:{type:"color",tabindex:"0"},className:"e-format-font-color"});i.appendChild(ct);lt=n.createElement("input",{id:this.parentID+"backgroundcolor"+t,attrs:{type:"color",tabindex:"0"},className:"e-format-back-color"});i.appendChild(lt);r.appendChild(i);i=n.createElement("td");at=n.createElement("input",{id:this.parentID+"valuepreview"+t,className:"e-input e-format-value-preview",attrs:{tabindex:"-1",readonly:"true",value:"123.45"}});i.appendChild(at);r.appendChild(i);o.appendChild(r);s.appendChild(o);c.appendChild(s)}return c},t.prototype.renderDropDowns=function(t){var u=n.getInstance(n.select("#"+this.parentID+"conditionalformatting",document),o.Dialog).element,i=this.newFormat[t],v=[],f,e,r,s,k,h,d,p,w,b,c,l;for(v.push({index:0,name:this.parent.localeObj.getConstant("AllValues"),field:this.parent.localeObj.getConstant("AllValues")}),f=0;f<this.parent.dataSourceSettings.values.length;f++)e=this.parent.dataSourceSettings.values[f].caption||this.parent.dataSourceSettings.values[f].name,e=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(e):e,v.push({index:f+1,name:e,field:this.parent.dataSourceSettings.values[f].name});r=n.isNullOrUndefined(i.measure)?this.parent.localeObj.getConstant("AllValues"):i.measure;s=[];s[t]=new a.DropDownList({dataSource:v,fields:{text:"name",value:"field"},value:r,width:"100%",cssClass:this.parent.cssClass,popupHeight:"200px",popupWidth:"auto",locale:this.parent.locale,enableRtl:this.parent.enableRtl,change:this.measureChange.bind(this,t)});s[t].isStringTemplate=!0;s[t].appendTo(n.select("#"+this.parentID+"measureinput"+t,u));k=[{value:"LessThan",name:this.parent.localeObj.getConstant("LessThan")},{value:"LessThanOrEqualTo",name:this.parent.localeObj.getConstant("LessThanOrEqualTo")},{value:"GreaterThan",name:this.parent.localeObj.getConstant("GreaterThan")},{value:"GreaterThanOrEqualTo",name:this.parent.localeObj.getConstant("GreaterThanOrEqualTo")},{value:"Equals",name:this.parent.localeObj.getConstant("Equals")},{value:"NotEquals",name:this.parent.localeObj.getConstant("NotEquals")},{value:"Between",name:this.parent.localeObj.getConstant("Between")},{value:"NotBetween",name:this.parent.localeObj.getConstant("NotBetween")}];r=n.isNullOrUndefined(i.conditions)?"LessThan":i.conditions;h=[];h[t]=new a.DropDownList({dataSource:k,fields:{value:"value",text:"name"},value:r,width:"100%",cssClass:this.parent.cssClass,popupHeight:"200px",popupWidth:"auto",locale:this.parent.locale,enableRtl:this.parent.enableRtl,change:this.conditionChange.bind(this,t)});h[t].isStringTemplate=!0;h[t].appendTo(n.select("#"+this.parentID+"conditioninput"+t,u));d="Between"!==this.newFormat[t].conditions&&"NotBetween"!==this.newFormat[t].conditions?du:"";p=new y.TextBox({enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:"e-format-value1 "+this.parent.cssClass,width:"auto"});p.isStringTemplate=!0;p.appendTo(n.select("#"+this.parentID+"conditionvalue1"+t,u));w=new y.TextBox({enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:"e-format-value2 "+d+" "+this.parent.cssClass,width:"auto"});w.isStringTemplate=!0;w.appendTo(n.select("#"+this.parentID+"conditionvalue2"+t,u));b=new ut.CheckBox({label:this.parent.localeObj.getConstant("applyToGrandTotal"),checked:this.newFormat[t].applyGrandTotals,enableRtl:this.parent.enableRtl,locale:this.parent.locale,change:this.onCheckChange.bind(this,t),cssClass:this.parent.cssClass});b.isStringTemplate=!0;b.appendTo(n.select("#"+this.parentID+"grandtotalcheckbox"+t,u));r=n.isNullOrUndefined(i.style.fontFamily)?"Arial":i.style.fontFamily;c=[];c[t]=new a.DropDownList({dataSource:[{index:0,name:"Arial"},{index:1,name:"San Serif"},{index:2,name:"Impact"},{index:3,name:"Trebuchet MS"},{index:4,name:"Serif"},{index:5,name:"Verdana"},{index:6,name:"Courier New"},{index:7,name:"Times New Roman"},{index:8,name:"Tahoma"},{index:9,name:"Gerogia"}],fields:{text:"name"},value:r,width:"100%",cssClass:this.parent.cssClass,popupHeight:"200px",popupWidth:"auto",locale:this.parent.locale,enableRtl:this.parent.enableRtl,change:this.fontNameChange.bind(this,t)});c[t].isStringTemplate=!0;c[t].appendTo(n.select("#"+this.parentID+"fontnameinput"+t,u));r=n.isNullOrUndefined(i.style.fontSize)?"12px":i.style.fontSize;l=[];l[t]=new a.DropDownList({dataSource:[{index:0,name:"9px"},{index:1,name:"10px"},{index:2,name:"11px"},{index:3,name:"12px"},{index:4,name:"13px"},{index:5,name:"14px"},{index:6,name:"15px"},{index:6,name:"16px"}],fields:{text:"name"},popupHeight:"200px",popupWidth:"auto",value:r,width:"100%",change:this.fontSizeChange.bind(this,t),locale:this.parent.locale,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass});l[t].isStringTemplate=!0;l[t].appendTo(n.select("#"+this.parentID+"fontsizeinput"+t,u))},t.prototype.conditionChange=function(t,i){this.newFormat[t].conditions=i.value;var r=n.select("#"+this.parentID+"valuespan"+t,document),u=n.select("#"+this.parentID+"conditionvalue2"+t,document);"Between"===i.value||"NotBetween"===i.value?(r.classList.remove(du),u.parentElement.classList.remove(du)):(r.classList.add(du),u.parentElement.classList.add(du))},t.prototype.onCheckChange=function(n,t){this.newFormat[n].applyGrandTotals=t.checked},t.prototype.fontNameChange=function(t,i){this.newFormat[t].style.fontFamily=i.value.toString();n.select("#"+this.parentID+"valuepreview"+t,document).style.fontFamily=i.value},t.prototype.fontSizeChange=function(t,i){this.newFormat[t].style.fontSize=i.value.toString();n.select("#"+this.parentID+"valuepreview"+t,document).style.fontSize=i.value},t.prototype.measureChange=function(n,t){this.newFormat[n].measure=t.value.toString()===this.parent.localeObj.getConstant("AllValues")?void 0:t.value.toString()},t.prototype.renderColorPicker=function(t){var e=n.getInstance(n.select("#"+this.parentID+"conditionalformatting",document),o.Dialog).element,r=this.newFormat[t],i=n.isNullOrUndefined(r.style.color)?"black":r.style.color,u="#"===i.charAt(0)&&this.isHex(i.substr(1))?i:this.colourNameToHex(i),f;n.select("#"+this.parentID+"valuepreview"+t,document).style.color=u;this.fontColor[t]=new y.ColorPicker({cssClass:kc+" e-format-font-color-picker"+(this.parent.cssClass?" "+this.parent.cssClass:""),value:u,mode:"Palette",change:this.fontColorChange.bind(this,t),locale:this.parent.locale,enableRtl:this.parent.enableRtl});this.fontColor[t].isStringTemplate=!0;this.fontColor[t].appendTo(n.select("#"+this.parentID+"fontcolor"+t,e));n.addClass([this.fontColor[t].element.nextElementSibling.querySelector(".e-selected-color")],s);u="#"===(i=n.isNullOrUndefined(r.style.backgroundColor)?"white":r.style.backgroundColor).charAt(0)&&this.isHex(i.substr(1))?i:this.colourNameToHex(i);n.select("#"+this.parentID+"valuepreview"+t,document).style.backgroundColor=u;n.select("#"+this.parentID+"valuepreview"+t,document).style.fontFamily=r.style.fontFamily;n.select("#"+this.parentID+"valuepreview"+t,document).style.fontSize=r.style.fontSize;this.backgroundColor[t]=new y.ColorPicker({cssClass:kc+(this.parent.cssClass?" "+this.parent.cssClass:""),value:u,mode:"Palette",change:this.backColorChange.bind(this,t),locale:this.parent.locale,enableRtl:this.parent.enableRtl});this.backgroundColor[t].isStringTemplate=!0;this.backgroundColor[t].appendTo(n.select("#"+this.parentID+"backgroundcolor"+t,e));n.addClass([this.backgroundColor[t].element.nextElementSibling.querySelector(".e-selected-color")],s);f=new ut.Button({iconCss:s+" e-format-delete-icon",cssClass:"e-flat"+(this.parent.cssClass?" "+this.parent.cssClass:""),locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});f.isStringTemplate=!0;f.appendTo(n.select("#"+this.parentID+"removeButton"+t,e));f.element.onclick=this.toggleButtonClick.bind(this,t)},t.prototype.backColorChange=function(t,i){this.newFormat[t].style.backgroundColor=i.currentValue.hex;n.select("#"+this.parentID+"valuepreview"+t,document).style.backgroundColor=i.currentValue.hex},t.prototype.fontColorChange=function(t,i){this.newFormat[t].style.color=i.currentValue.hex;n.select("#"+this.parentID+"valuepreview"+t,document).style.color=i.currentValue.hex},t.prototype.toggleButtonClick=function(n){this.destroyColorPickers();this.newFormat.splice(n,1);this.addFormat()},t.prototype.isHex=function(n){for(var t=parseInt(n,16);"0"===n.charAt(0);)n=n.substr(1);return t.toString(16)===n.toLowerCase()||0===t&&""===n},t.prototype.hexToRgb=function(n){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},t.prototype.colourNameToHex=function(n){var u={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};if(void 0!==u[n.toLowerCase()])return u[n.toLowerCase()];if(0===n.search("rgba")){for(var i=n.substr(5).split(")")[0].split(","),r="",t=0;t<i.length-1;t++)i[t]=(+i[t]).toString(16),1===i[t].length&&(i[t]="0"+i[t]),r+=i[t];return"#"+r+Math.round(255*+i[3]).toString(16)}if(0===n.search("rgb")){for(i=n.substr(4).split(")")[0].split(","),r="",t=0;t<i.length;t++)i[t]=(+i[t]).toString(16),1===i[t].length&&(i[t]="0"+i[t]),r+=i[t];return"#"+r}return"#d5d5d5"},t.prototype.removeDialog=function(){var t=n.select("#"+this.parentID+"conditionalformatting",document),i=t?n.getInstance(t,o.Dialog):null;i&&!i.isDestroyed&&(this.destroyColorPickers(),this.removeEventListeners(),i.destroy());t&&n.remove(t);this.fontColor=[];this.backgroundColor=[];this.newFormat=[]},t.prototype.removeEventListeners=function(){for(var i,t=0;t<(this.newFormat?this.newFormat.length:0);t++)i=n.select("#"+this.parentID+"removeButton"+t,document),i&&(i.onclick=null)},t.prototype.destroyColorPickers=function(){for(var n=0;n<(this.newFormat?this.newFormat.length:0);n++)this.fontColor&&this.fontColor[n]&&!this.fontColor[n].isDestroyed&&this.fontColor[n].destroy(),this.backgroundColor&&this.backgroundColor[n]&&!this.backgroundColor[n].isDestroyed&&this.backgroundColor[n].destroy(),this.destroyDropDowns(n),this.destroyOtherComponents(n)},t.prototype.destroyDropDowns=function(t){var i=n.select("#"+this.parentID+"conditionalformatting",document),o,r,s,u,h,f,c,e;i&&(o=n.select("#"+this.parentID+"measureinput"+t,i),o&&(r=n.getInstance(o,a.DropDownList),r&&!r.isDestroyed&&r.destroy()),s=n.select("#"+this.parentID+"conditioninput"+t,i),s&&(u=n.getInstance(s,a.DropDownList),u&&!u.isDestroyed&&u.destroy()),h=n.select("#"+this.parentID+"fontnameinput"+t,i),h&&(f=n.getInstance(h,a.DropDownList),f&&!f.isDestroyed&&f.destroy()),c=n.select("#"+this.parentID+"fontsizeinput"+t,i),c&&(e=n.getInstance(c,a.DropDownList),e&&!e.isDestroyed&&e.destroy()))},t.prototype.destroyOtherComponents=function(t){var i=n.select("#"+this.parentID+"conditionalformatting",document),o,r,s,u,h,f,c,e;i&&(o=n.select("#"+this.parentID+"conditionvalue1"+t,i),o&&(r=n.getInstance(o,y.TextBox),r&&!r.isDestroyed&&r.destroy()),s=n.select("#"+this.parentID+"conditionvalue2"+t,i),s&&(u=n.getInstance(s,y.TextBox),u&&!u.isDestroyed&&u.destroy()),h=n.select("#"+this.parentID+"grandtotalcheckbox"+t,i),h&&(f=n.getInstance(h,ut.CheckBox),f&&!f.isDestroyed&&f.destroy()),c=n.select("#"+this.parentID+"removeButton"+t,i),c&&(e=n.getInstance(c,ut.Button),e&&!e.isDestroyed&&e.destroy()))},t.prototype.showConditionalFormattingDialog=function(){this.newFormat=[];for(var t=0;t<this.parent.dataSourceSettings.conditionalFormatSettings.length;t++)this.newFormat.push(n.extend({},this.parent.dataSourceSettings.conditionalFormatSettings[t].properties,null,!0));this.createDialog();n.getInstance(n.select("#"+this.parentID+"conditionalformatting",document),o.Dialog).refresh();this.addFormat()},t.prototype.destroy=function(){var i=n.select("#"+this.parentID+"conditionalformatting",document),t=i?n.getInstance(i,o.Dialog):null;t&&!t.isDestroyed&&t.close()},t}();da.Inject(pw,ww,la);so={};so.PivotView=da;ov={pivotview:so=ho.C(window.ejdashboard?window.ejdashboard.pivotview:{},so)};window.ejdashboard=ho.C(window.ejdashboard||{},ov)})()})();
