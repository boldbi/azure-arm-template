var itemUrl,browser=ej.browserInfo(),isFirstRequest=!1,isAjaxRequested=!0,isItemDeleteDialogBinded=!1,isCopyItemDialogBinded=!1;function onSuccessDeleteItem(){var e=$("#items").data("ejGrid"),t=(e.model.sortSettings.sortedColumns=[],e.model.filterSettings.filteredColumns=[],$("#search-items").find("input[type=text]").val(""),e.model.pageSettings.currentPage),a=(e.model.pageSettings.pageSize,e.model.pageSettings.totalRecordsCount,e.model.pageSettings.totalRecordsCount%e.model.pageSettings.pageSize);0!=a&&a<=1&&(e.model.pageSettings.currentPage=t-1),"dashboards"===$("#item-grid-container").attr("data-grid-name").toLowerCase()&&(a=parent.angular.element(parent.document.getElementById("server-items-container")).scope(),e.model.query._params.push({key:"displayCategory",value:a.itemRequestType})),e.refreshContent(),$("#dashboard_render_iframe").attr("src",""),$("#initial-item-message").css("display","block"),$("#dashboard_render_iframe").css("display","none")}function onNewFileDialogOpen(){$("#file-popup-iframe").attr("src",addFileIframeUrl)}function onSchedulerDialogClose(){$("#popup-container").find("iframe").contents().find("html").html("")}function onSchedulerDialogOpen(){$("#scheduler-popup-iframe").attr("src",schedulerIframeUrl+"?itemName="+ItemName+"&&itemId="+ItemId+"&&categoryName="+CategoryName+"&&categoryId="+CategoryId+"&&scheduleId="+ScheduleId+"&&multiDashboardName="+MultiDashboardName+"&&actionType=Create"),$("#popup-container_wrapper").ejWaitingPopup("show")}function onNewFileDialogClose(){$("#file-popup").find("iframe").contents().find("html").html(""),$("#file-popup").ejDialog("close")}function openNewDataSourcePopup(){$("#datasource-popup-iframe").addClass("add-datasource-frame"),$("#datasource-popup").ejDialog("open"),$("#datasource-popup_wrapper").ejWaitingPopup("show")}function openNewFilePopup(){$("#file-popup").ejDialog("open"),$("#file-popup_wrapper").ejWaitingPopup("show")}function onDataSourceDialogOpen(){$("#datasource-popup-iframe").attr("src",addDatasourceIframeUrl).addClass("add-datasource-frame")}function onDataSourceDialogClose(){$("#datasource-popup").find("iframe").contents().find("html").html(""),$("#datasource-popup").ejDialog("close")}function onWidgetDialogOpen(){$("#widget_popup_iframe").attr("src",addWidgetUrl)}function onWidgetDialogClose(){$("#widget_popup").find("iframe").contents().find("html").html(""),$("#widget_popup").ejDialog("close")}function onReportDialogOpen(){}function openNewWidgetPopup(){$("#widget_popup").ejDialog("open"),$("#widget_popup_wrapper").ejWaitingPopup("show")}function openNewCreateDataSourcePopup(){$("#create-datasource-popup").ejDialog("open"),$("#create-datasource-popup_wrapper").ejWaitingPopup("show")}function onCreateDataSourceDialogOpen(){$("#create-datasource-iframe").attr("src",createDatasourceUrl)}function onCreateDataSourceDialogClose(){$("#create-datasource-popup").ejDialog("close")}function fnActionBegin(e){var t,a,i=createLoader("items"),i=(this.element.ejWaitingPopup({template:$("#"+i)}),"refresh"!=e.requestType||this.initialRender||$("#items").find(".e-gridcontent").css("visibility","hidden"),$("#item-grid-container").data("gridName")),o=("dashboards"!==i.toLowerCase()&&"widgets"!==i.toLowerCase()||"none"==$("#server-items-container .category-collapse").css("display")&&$("#item-grid-container").ejWaitingPopup("show"),""),n=("Search"!==(o=($("#search-home-page").is(":visible")?$("#search-home-page"):$("#search-items")).val())&&this.model.query._params.push({key:"searchKey",value:o}),[]);if(0<e.model.filterSettings.filteredColumns.length){for(t=0;t<e.model.filterSettings.filteredColumns.length;t++){var r=e.model.filterSettings.filteredColumns[t];n.push({PropertyName:r.field,FilterType:r.operator,FilterKey:r.value})}this.model.query._params.push({key:"filterCollection",value:n})}"dashboards"!==i&&"widgets"!==i||(a=angular.element(document.getElementById("server-items-container")).scope(),e.model.query._params.push({key:"displayCategory",value:a.itemRequestType})),"schedules"===i&&(a=createLoader("scheduleGrid"),this.element.ejWaitingPopup({template:$("#"+a)}),o=$("#search-schedules").val(),e.model.query._params.push({key:"searchKey",value:o}),"sorting"==e.requestType)&&e.model.query._sortedColumns.push({Name:e.columnName,Direction:e.columnSortDirection})}function fnActionFailure(e){setTimeout(function(){$("#item-grid-container").ejWaitingPopup("show"),$("#item-list-panel > .item-navigation, #item-list-panel > #category-listing").css("visibility","visible")},500)}function fnActionComplete(e){$("#item-list-panel > .item-navigation, #item-list-panel > #category-listing").css("visibility","visible"),$('[data-toggle="tooltip"]').tooltip({container:$("body")});var t=$("#items").data("ejGrid");if(n="datasources"==$("#item-grid-container").attr("data-grid-name")){for(var a=e.model.currentViewData,i=0,o=0;o<a.length;o++)!0===a[o].IsDraft&&i++;e.model.currentViewData.length!==i&&$(".view-linked-dashboards").show()}0==t._gridRecordsCount?((n="datasources"==$("#item-grid-container").attr("data-grid-name"))?(r="",r=window.Server.App.Localization.NoDataSources,$(".view-linked-dashboards").hide()):(n="files"==$("#item-grid-container").attr("data-grid-name"))?(r="",r=window.Server.App.Localization.NoFilesToDisplay):(r="","favorite dashboards"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?r=window.Server.App.Localization.NoFavoriteDashboards:"recent dashboards"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?r=window.Server.App.Localization.NoRecentDashboards:"public dashboards"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?r=window.Server.App.Localization.NoPublicDashboards:"all dashboards"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?r=window.Server.App.Localization.NoDashboards:"all widgets"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?r=window.Server.App.Localization.NoWidgets:"public widgets"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?r=window.Server.App.Localization.NoPublicWidgets:"all categories"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?r=window.Server.App.Localization.NoDashboards:"draft dashboards"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()&&(r=window.Server.App.Localization.NoDrafts)),this.getContentTable().find("tbody .emptyrecord").html(r)):(n="datasources"==$("#item-grid-container").attr("data-grid-name"))&&($("#data-source-text").show(),$("#data-source-count").html(t._gridRecordsCount));var n=$("#item-grid-container").attr("data-grid-name"),r=$("ul.item-navigation li.public-widgets").hasClass("active"),s=$("ul.item-navigation li.public-items").hasClass("active"),d=$("#isMarkItemspublic").val();"dashboards"!=n.toLowerCase()&&"widgets"!=n.toLowerCase()||(navigator.userAgent.match(/Windows Phone/i)||$("[data-toggle='tooltip']").tooltip(),$(".e-content").height()!=$(".e-scrollbar").height()&&$(".e-scrollbar .e-vscroll").css("height",$(".e-content").height()),$("#items .e-gridcontent").data("ejScroller")&&$("#items .e-gridcontent").ejScroller("refresh"),0<$("ul.item-navigation li.active").length&&"draft dashboards"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?$(".item-link").each(function(){$(this).attr("href",rootUrlAction+"/dashboard-designer/"+$(this).attr("data-itemid")+"/draft/"+$(this).attr("data-name"))}):"dashboards"==n.toLowerCase()&&1041<=window.innerWidth&&$(".item-link").each(function(){$(this).attr("href",rootUrlAction+"/dashboards/"+$(this).attr("data-itemid")+"/"+$(this).attr("data-category-name")+"/"+$(this).attr("data-name"))}),n=$(window).height()-($(".item-navigation").outerHeight()+$("#header-area").outerHeight()+$("#category-listing").outerHeight()),t.option({scrollSettings:{height:n}}),1==r&&0<t._gridRecordsCount&&"False"==d||1==s&&0<t._gridRecordsCount&&"False"==d?$(".tool-tip").show():$(".tool-tip").hide(),setTimeout(function(){$("#item-grid-container").ejWaitingPopup("hide")},500),$(".tooltip").hide()),"refresh"!=e.requestType||this.initialRender||$("#items").find(".e-gridcontent").css("visibility","visible"),showOrHideGridPager("#items")}function rowBound(){isFirstRequest&&(isFirstRequest=!1,"/"!==location.pathname.toLowerCase()&&"dashboards"!=location.pathname.split("/")[location.pathname.split("/").length-1].toLowerCase()||refreshScroller())}function ResetGrid(){var e=$("#items").data("ejGrid");e.model.sortSettings.sortedColumns=[],e.model.filterSettings.filteredColumns=[],$("#search-items").find("input[type=text]").val(""),e.refreshContent(),$(".e-filtericon").removeClass("e-filteredicon e-filternone")}function onMakePublicDialogClose(){$("#make_item_public").ejDialog("close")}function onMakePublicDialogOpen(){load(),$("#make_item_public").ejDialog("open"),$("#make_item_public").focus()}function onRemovePublicDialogClose(){$("#remove_item_public").ejDialog("close")}function onRemovePublicDialogOpen(){load(),$("#remove_item_public").ejDialog("open"),$("#remove_item_public").focus()}function onGetLinkDialogClose(){$("#get_item_link").ejDialog("close")}function onGetLinkDialogOpen(){$("#get_item_link").ejDialog("open"),$("#get_item_link").show(),$("#get_item_link").focus(),$("#item-link").select(),$(".get_link").show(),"msie"==browser.name.toLowerCase()?$("#item-link").val(window.location.href.replace(window.location.pathname+window.location.search,"")+itemUrl.trim()):$("#item-link").val(window.location.origin+itemUrl.trim()),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").hide(),$("#item-link-copy").attr("data-original-title",""))}function fnAdjustRowHeight(e){"dashboards"==$("#item-grid-container").attr("data-grid-name")&&0==e.model.currentViewData.length&&rowBound()}function DashboardRender(e,t,a,i,o,n){e=decodeURI(e),a=decodeURI(a),i=decodeURI(i),n=decodeURI(n);for(var r=window.location.search.substring(1).split("&"),s="?",d=0;d<r.length;d++){var l=r[d].split("=");"category"!==l[0]&&"dashboard"!==l[0]&&"view"!==l[0]&&(d!==r.length-1?s+=l[0]+"="+l[1]+"&":s+=l[0]+"="+l[1])}var c=document.getElementById("dashboard_render_iframe"),n=(n=""!=n&&null!=n&&"null"!=n?"?tab="+n:"",$("#current-url").attr("data-url",e+"/"+t+"/"+a+"/"+i+"?view="+o),0==$(".item-navigation li[data-value='"+o+"']").hasClass("active")&&($(".item-navigation li").removeClass("active"),$(".item-navigation li[data-value='"+o+"']").addClass("active"),parent.angular.element(parent.document.getElementById("server-items-container")).scope().onClickDisplayCategory("",o)),$(".item-navigation li[data-value='"+o+"']").hasClass("all-items")?$("#category-listing").addClass("category-section"):$("#category-listing").removeClass("category-section"),"categories"==o?(parent.angular.element(parent.document.getElementById("server-items-container")).scope().getItemsInCategory("",a),$("#search-home-page").focus(),setTimeout(function(){$(".search-home-section:visible").addClass("show")},300),c.contentWindow.location.replace(e+"/"+t+"/"+a+"/"+i+s),$("#item-viewer").ejWaitingPopup("show"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".item-list-panel").width()}),$("#initial-item-message").css("display","none"),$("#dashboard_render_iframe").css("display","block")):""!=i&&($("#search-home-page").focus(),setTimeout(function(){$(".search-home-section:visible").addClass("show")},300),c.contentWindow.location.replace(e+"/"+t+"/"+a+"/"+i+s),$("#item-viewer").ejWaitingPopup("show"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".item-list-panel").width()}),$("#initial-item-message").css("display","none"),$("#dashboard_render_iframe").css("display","block")),$(".item-navigation li").hasClass("all-items")?$("#category-listing").addClass("category-section"):$("#category-listing").removeClass("category-section"),$(".item-link[data-name='"+i+"']"));return 0==n.parents("td").hasClass("active")?($(".item-link").parents("td").removeClass("active"),n.parents("td").addClass("active")):window.innerWidth<1041&&($(".item-link").parents("td").removeClass("active"),$(".tooltip").hide()),"block"==$("#server-items-container .category-collapse").css("display")&&($("#item-viewer").css("width","100%"),$("#item-viewer").addClass("expanded"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".su-sidebar-expand.category-collapse").width(),top:$("#header-area").height()}),o=$("#dashboard_render_iframe").width(),$("#dashboard_render_iframe").contents().find("#dashboard").css("width",o-30)),!1}$(function(){addPlacehoder("#input-div"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".item-list-panel").width()}),$("#item-viewer #initial-item-message").css("display","block"),$("#dashboard_render_iframe").css("display","none"),$("#create-new-category").css("width",$(".item-list-panel").outerWidth()),$("#input-div").find(".placeholder").hide();var e=createLoader("item-grid-container"),e=($("#item-grid-container").ejWaitingPopup({template:$("#"+e)}),createLoader("item-list-panel")),e=($("#item-list-panel").ejWaitingPopup({template:$("#"+e)}),createLoader("item-viewer")),e=($("#item-viewer").ejWaitingPopup({template:$("#"+e)}),$(".search-area").removeClass("focusdiv"),$(".item-list-panel").css("height",window.innerHeight-$("#header-area").outerHeight()),$("#datasource-popup").ejDialog({width:"650px",showOnInit:!1,allowDraggable:!1,enableResize:!1,enableModal:!0,showHeader:!1,close:"onDataSourceDialogClose",open:"onDataSourceDialogOpen"}),$("#widget_popup").ejDialog({width:"651px",showOnInit:!1,allowDraggable:!1,enableResize:!1,enableModal:!0,showHeader:!1,close:"onWidgetDialogClose",open:"onWidgetDialogOpen"}),$("#popup-container").ejDialog({allowDraggable:!1,enableResize:!1,enableModal:!0,showHeader:!1,showOnInit:!1,close:"onSchedulerDialogClose",open:"onSchedulerDialogOpen",width:"1000px"}),createLoader("popup-container_wrapper")),e=($("#popup-container_wrapper").ejWaitingPopup({template:$("#"+e)}),$("#select_datasource_popup").ejDialog({width:"800px",showOnInit:!1,allowDraggable:!0,enableResize:!1,height:"530px",showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"closeNewDataSourcePopup"}),$("#file-popup").ejDialog({width:"650px",showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"382px",title:window.Server.App.Localization.AddFile,enableModal:!0,showHeader:!1,open:"onNewFileDialogOpen",close:"onNewFileDialogClose"}),$("#permission-popup").ejDialog({showOnInit:!1,allowDraggable:!0,enableResize:!1,width:"900px",title:"",showHeader:!1,enableModal:!0,close:"DialogBoxClose",closeOnEscape:!0}),$("#make_item_public").ejDialog({width:460<window.innerWidth?"450px":window.innerWidth-10,showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"auto",title:window.Server.App.Localization.MakePublic,showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"onMakePublicDialogClose",open:"onMakePublicDialogOpen"}),$("#remove_item_public").ejDialog({width:460<window.innerWidth?"450px":window.innerWidth-10,showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"auto",title:window.Server.App.Localization.RemovePublic,showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"onRemovePublicDialogClose",open:"onRemovePublicDialogOpen"}),$("#create-datasource-popup").ejDialog({width:"650px",height:"auto",showOnInit:!1,allowDraggable:!1,enableResize:!1,enableModal:!0,showHeader:!1,close:"onCreateDataSourceDialogClose",open:"onCreateDataSourceDialogOpen"}),createLoader("create-datasource-popup_wrapper")),e=($("#create-datasource-popup_wrapper").ejWaitingPopup({template:$("#"+e)}),createLoader("widget_popup_wrapper")),e=($("#widget_popup_wrapper").ejWaitingPopup({template:$("#"+e)}),createLoader("select_datasource_popup_wrapper")),e=($("#select_datasource_popup_wrapper").ejWaitingPopup({template:$("#"+e)}),createLoader("file-popup_wrapper")),e=($("#file-popup_wrapper").ejWaitingPopup({template:$("#"+e)}),createLoader("datasource-popup_wrapper")),e=($("#datasource-popup_wrapper").ejWaitingPopup({template:$("#"+e)}),createLoader("permission-popup_wrapper")),e=($("#permission-popup_wrapper").ejWaitingPopup({template:$("#"+e)}),createLoader("make_item_public_wrapper")),e=($("#make_item_public_wrapper").ejWaitingPopup({template:$("#"+e)}),createLoader("remove_item_public_wrapper"));$("#remove_item_public_wrapper").ejWaitingPopup({template:$("#"+e)}),$(document).on("click","#context-menu",function(e){refreshScrollerForCategory()}),$(document).on("click",".options-area",function(e){setTimeout(function(){$(".tooltip").hide()},50)}),$("#search-home-page").on("focusin",function(){$(".search-area").addClass("focusdiv")}),$("#search-home-page").on("focusout",function(){$(".search-area").removeClass("focusdiv")}),$(document).on("click",".item-delete",function(e){$("#delete-item-name").html($(this).attr("data-name")),$("#delete-item").attr("data-item-id",$(this).attr("data-item-id"));var t,a,i=$(this).attr("data-item-id"),o=$(this).attr("data-name"),n=$(this).attr("data-itemtype"),r=$(this).attr("linked-dashboard-count"),s="",d=("4"==n&&(s=$(this).attr("data-datasource-type")),document.getElementById("item-delete-confirmation").style.display="block",'<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.DeleteDataSource+'</span><span class="item-name">'+o+"</span></span>");isItemDeleteDialogBinded?((a=document.getElementById("delete-item-dialog").ej2_instances)[0].header=d,a[0].show()):((t=document.createElement("div")).setAttribute("id","delete-item-dialog"),document.getElementById("item-grid-container").appendChild(t),(a=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"450px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:d,showCloseIcon:!0,content:document.getElementById("item-delete-confirmation"),buttons:[{click:function(e){ejs.popups.showSpinner(document.getElementById("delete-item-dialog"));var t=$("#delete-item").attr("data-item-id"),a=$("#delete-item").attr("data-itemtype"),i="";"Datasource"==a&&(i=$("#delete-item").attr("data-datasource-type")),$.ajax({type:"POST",url:deleteItemUrl,data:{itemId:t,datasourceType:i},success:function(e){var t;ejs.popups.hideSpinner(document.getElementById("delete-item-dialog")),e.Success?($("#data-source-text").show(),t=$("#data-source-count").html(),0<(t=parseInt(t)-1)?$("#data-source-count").html(t):$("#data-source-count").html("0"),"Category"==a?window.Server.App.Localization.CategoryDeleted:"Dashboard"==a?window.Server.App.Localization.DashboardDeleted:"Datasource"==a?window.Server.App.Localization.DatasourceDeleted:window.Server.App.Localization.Deleted,successToast(window.Server.App.Localization.DeleteSuccess.format($("#delete-item-name").html()),7e3),"Category"==a||$(".all-items").hasClass("active")?$(".all-items").hasClass("active")?$(".all-items").trigger("click"):parent.angular.element(parent.document.getElementById("server-items-container")).scope().refreshCategorySection():"Dashboard"==a?(onSuccessDeleteItem(),$("#favoriteitemCount").text(e.Value)):"Datasource"!=a||0<e.DatasourceCount&&null!=e.DatasourceCount?onSuccessDeleteItem():($("#body").ejWaitingPopup("show"),location.reload())):0==e.HasPermission?warningToast(window.Server.App.Localization.DeleteItemPermissionMessage+" "+window.Server.App.Localization.ReloadPage):warningToast(window.Server.App.Localization.DeleteFailMessage.format($("#delete-item-name").html())),document.getElementById("delete-item-dialog").ej2_instances[0].hide()}})},buttonModel:{cssClass:"app-btn-danger",content:window.Server.App.Localization.YesButton}},{click:function(){a.hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.NoButton}}]})).appendTo(t),isItemDeleteDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("delete-item-dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("delete-item-dialog")),d=s,$.ajax({type:"POST",url:deleteConfirmationUrl,data:{itemId:i,itemTypeId:n,itemName:o,datasourceType:d,linkedDashboardsCount:r},success:function(e){$("#item-delete-confirmation").html(e),ejs.popups.hideSpinner(document.getElementById("delete-item-dialog")),$("#item-delete-confirmation").focus()}})}),addPlacehoder("#search-area"),$(document).on("click",".version-button",function(){var e=$(this).attr("data-item-id"),t=$(this).attr("data-itemname"),a=$("#grid").data("ejGrid"),i=$("#loggrid").data("ejGrid"),t=(null!=$("#version-window-container").data("ejDialog")?$("#version-window-container").ejDialog("open"):$("#version-window-container").ejDialog({showOnInit:!0,allowDraggable:!0,enableResize:!1,width:"864px",title:"",showHeader:!1,enableModal:!0,close:"DialogBoxClose",closeOnEscape:!0}),$(".modal-header .modal-title").html(t),$("#version-tab").parent("li").addClass("active"),$("#item-log-tab").parent("li").removeClass("active"),$("#item-version-container").removeClass("hidden").addClass("show"),$("#item-log-container").removeClass("show").addClass("hidden"),ej.DataManager({url:itemVersionUrl+"?ItemId="+e,adaptor:new ej.UrlAdaptor})),t=(a.dataSource(t),a.model.pageSettings.currentPage=1,ej.DataManager({url:itemLogsUrl+"?ItemId="+e,adaptor:new ej.UrlAdaptor}));i.dataSource(t),i.model.pageSettings.currentPage=1}),$(document).on("click",".layout",function(){$("#container iframe").attr("src",window.location.href+"?itemId="+$(this).attr("data-item-id")+"&itemAction="+$(this).attr("data-action"))}),$(document).on("click",".moveItem",function(){var e=$(this).attr("data-itemId"),t=$(this).attr("data-action");$("#ItemAction").ejDialog("open"),$("#ItemAction_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:moveIframeUrl,data:{itemId:e,itemAction:t},success:function(e){$("#ItemAction").html(e),$("#ItemAction_wrapper .e-dialog-scroller").attr("style","overflow:inherit; border:none"),$("#ItemAction_wrapper").ejWaitingPopup("hide")}})}),$(document).on("click",".item-info",function(){var e,t=$("#items").data("ejGrid");null!=t&&(t=t.getSelectedRecords()[0],e=angular.element($("[ng-controller=ItemInfoCtrl]")).scope(),t.Description=t.Description.replace(new RegExp("&#xA;","g"),"\n"),e.openInfoDialog(t,!1,!1))}),$(document).on("click",".copyItem",function(){var e,t,a,i,o=$(this).attr("data-itemId"),n=$(this).attr("data-action"),r=$(this).attr("data-itemname"),s=($("#copy_item_name").closest("div").removeClass("has-error"),$("#copy_item_name").parent().find(".validation-error").html(""),'<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.CopyDatasource+'</span><span class="item-name">'+r+"</span></span>");isCopyItemDialogBinded?((t=document.getElementById("copy_item_dialog").ej2_instances)[0].header=s,t[0].show()):((e=document.createElement("div")).setAttribute("id","copy_item_dialog"),document.getElementById("server-app-container").appendChild(e),(t=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"436px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:s,showCloseIcon:!0,content:document.getElementById("Copy_Item"),buttons:[{click:function(e){CopyItem(n)},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.Copy}},{click:function(){t.hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}]})).appendTo(e),isCopyItemDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("copy_item_dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("copy_item_dialog")),$("#copy_item_name").val(r),document.getElementById("Copy_Item").style.display="block",$("#CopyItemType").val("Datasource"),$("#CopyItemIdHidden").val(o),s=o,a=n,i=document.getElementById("copy_item_dialog").ej2_instances,$.ajax({type:"POST",url:copyIframeUrl,data:{itemId:s,itemAction:a},success:function(e){e.status?($("#item_action_form").show(),$("#copy-item-denied").hide(),i[0].buttons=[{click:function(e){CopyItem(a)},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.Copy}},{click:function(){i[0].hide(),$("#copy_item_name").closest("div").removeClass("has-error"),$("#copy_item_name").parent().find(".validation-error").html("")},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}]):($("#item_action_form").hide(),null!=e.accessDenied?$("#copy-item-denied").text(e.accessDenied).show():null!=e.exception&&$("#copy-item-denied").text(e.exception).show(),i[0].buttons=[{click:function(){i[0].hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.OKButton}}]),ejs.popups.hideSpinner(document.getElementById("copy_item_dialog"))}})}),$(document).on("click",".favorite-item",function(e){$("#items").ejWaitingPopup("show");var a=$("#items").data("ejGrid"),i=$(this).attr("data-itemid"),o=$(this).attr("data-value");$.ajax({type:"POST",url:favoriteItemUrl,data:{itemId:i,favoriteValue:o},success:function(e){var t;e.Success?(e=$(".favorite-item").filter("[data-itemid='"+i+"']"),"True"==o?($(e[0]).addClass("favorite"),$(e[0]).attr("data-value","False"),$(e[0]).attr("data-original-title",window.Server.App.Localization.RemoveFavorite)):($(e[0]).removeClass("favorite"),$(e[0]).attr("data-value","True"),$(e[0]).attr("data-original-title",window.Server.App.Localization.MarkFavorite)),"dashboards"===$("#item-grid-container").data("gridName")&&(t=angular.element(document.getElementById("server-items-container")).scope(),a.model.query._params.push({key:"displayCategory",value:t.itemRequestType})),"100"==t.itemRequestType&&(a.model.filterSettings.filteredColumns=[{field:"CategoryName",operator:"equal",value:t.category}]),a.refreshContent()):messageBox("",window.Server.App.Localization.MarkFavoriteError,window.Server.App.Localization.InternalServerError,"success",function(){onCloseMessageBox()})}})}),$(window).resize(function(){var e,t=$("#version-window-container").data("ejDialog"),t=(null!=t&&t.isOpened()&&t._dialogPosition(),$("#items").data("ejGrid"));if(null!=t)return window.innerWidth<1041?(t.hideColumns("Description"),t.hideColumns("Last Modified")):(t.showColumns("Description"),t.showColumns("Last Modified")),"block"!=$("#clear-search").css("display")&&"inline-block"!=$("#clear-search").css("display")||$("#search-items").css("display","block"),$(".item-list-panel").css("height",window.innerHeight-$("#header-area").outerHeight()),$("#create-new-category").css("width",$(".item-list-panel").outerWidth()),e=$(window).height()-($(".item-navigation").outerHeight()+$("#header-area").outerHeight()+$("#category-listing").outerHeight()),t.option({scrollSettings:{height:e}}),$(".su-sidebar-collapse").is(":visible")?$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".item-list-panel").width()}):$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".su-sidebar-expand.category-collapse").width(),top:$("#header-area").height()}),!1}),$(window).on("load",function(){refreshScrollerForCategory()}),$(document).on("click",".make-public",function(e){$("#item_name").html($(this).attr("data-name")),itemUrl=$(this).attr("data-url");var t=$(this).attr("data-item-id"),a=$(this).attr("data-name"),i=$(this).attr("data-itemtype");load(),$("#make_item_public").ejDialog("open"),$("#make_item_public_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:makePublicUrl,data:{itemId:t,itemTypeId:i,itemName:a},success:function(e){$("#make_item_public").html(e),$("#make_item_public_wrapper").ejWaitingPopup("hide"),$("#make-public").attr("data-itemtype",i),$("#make-public").attr("data-url",itemUrl)}})}),$(document).on("click","#make-public",function(e){$("#item_name").html($(this).attr("data-name")),itemUrl=$(this).attr("data-url");var t=$(this).attr("data-item-id"),a=$(this).attr("data-name"),i=$(this).attr("data-itemtype"),o=$(this).attr("data-item-type").trim();$("#make_item_public_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:makeItemPublicUrl,data:{itemId:t,itemTypeId:i,itemName:a},success:function(e){(e.validation&&e.result?(onMakePublicDialogClose(),onGetLinkDialogOpen(),$(".report-name").html(a),$(".report-name").attr("title",a),$("."+o.toLowerCase()+"-link").show(),$(".private-note").hide(),$(".public-note")):($("#makepublicitem").hide(),$("#select-area").hide(),$("#close").show(),$(".error-msg"))).show(),ResetGrid(),$("#make_item_public_wrapper").ejWaitingPopup("hide")}})}),$(document).on("click",".remove-public",function(e){$("#item_name").html($(this).attr("data-name")),itemUrl=$(this).attr("data-url");var t=$(this).attr("data-item-id"),a=$(this).attr("data-name"),i=$(this).attr("data-itemtype");load(),$("#remove_item_public").ejDialog("open"),$("#remove_item_public_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:removePublicUrl,data:{itemId:t,itemTypeId:i,itemName:a},success:function(e){$("#remove_item_public").html(e),$("#remove_item_public_wrapper").ejWaitingPopup("hide"),$("#remove-public").attr("data-itemtype",i),$("#remove-public").attr("data-url",itemUrl)}})}),$(document).on("click","#remove-public",function(e){$("#item_name").html($(this).attr("data-name")),itemUrl=$(this).attr("data-url");var t=$(this).attr("data-item-id"),a=$(this).attr("data-name"),i=$(this).attr("data-itemtype");$("#remove_item_public_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:removeItemPublicUrl,data:{itemId:t,itemTypeId:i,itemName:a},success:function(e){(e.validation&&e.result?($("#removepublicitem").hide(),$("#remove-select-area").hide(),$("#remove-close").show(),$("#success-msg")):($("#removepublicitem").hide(),$("#remove-select-area").hide(),$("#success-msg").hide(),$("#remove-close").show(),$("#error-msg"))).show(),ResetGrid(),$("#remove_item_public_wrapper").ejWaitingPopup("hide")}})}),$(document).on("click",".get-link",function(e){itemUrl=$(this).attr("data-url").trim();var t,a,i,o=$(this).attr("data-itemtype").trim(),o=("2"==o.toLowerCase()?$(".dashboard-link").show():"6"==o.toLowerCase()?($(".file-link").show(),$("#compressed-link").prop("checked",!0)):("8"==o.toLowerCase()?$(".widget-link"):$(".link")).show(),""),n=$(this).attr("data-name"),r=$(this).attr("ispublic"),s=$(this).attr("data-item-id"),d=document.getElementById("dashboard_render_iframe"),o=null==d||(d=d.contentDocument||d.contentWindow.document,t=$(d).find("#favorite_Item").attr("data-item-id"),(i="")!==(a=$(d).find("#favorite_Item").attr("data-parent-id"))&&void 0!==a&&(i="tab="+document.getElementById("dashboard_render_iframe").contentWindow.$("#dashboard").data("ejDashboardViewer").getCurrentTab().tabName.trim()),0<$(d).find("#favorite_Item").length&&null!==document.getElementById("dashboard_render_iframe").contentWindow.getcurrentfilters()&&(i+=(""===i?"":"&")+document.getElementById("dashboard_render_iframe").contentWindow.getcurrentfilters().encryptedData),t!==s&&a!==s)||""===i?"msie"===browser.name.toLowerCase()?window.location.href.replace(window.location.pathname+window.location.search,"")+itemUrl.trim():window.location.origin+itemUrl:"msie"===browser.name.toLowerCase()?window.location.href.replace(window.location.pathname+window.location.search,"")+itemUrl.trim()+"?"+i:window.location.origin+itemUrl+"?"+i;$("#get_item_link").ejDialog("open"),$("#get_item_link").show(),$("#get_item_link_wrapper").ejWaitingPopup("show"),$(".get_link").show(),"true"==r?($(".private-note").hide(),$(".public-note").show()):($(".private-note").show(),$(".public-note").hide()),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").hide(),$("#item-link").css({width:"100%",borderRadius:"4px"}),$("#item-link-copy").attr("data-original-title","")):$("#item-link-copy").tooltip({animation:!1}),$(".report-name").html(n),$(".report-name").attr("title",n),$("#item-link").val(o),$("#item-link").select(),$(".modal-footer .validation-area").css("display","block"),$("#get_item_link_wrapper").ejWaitingPopup("hide")}),$(document).on("click","#compressed-link",function(){var e=$("#item-link").val().split("?")[0];1==$(this).prop("checked")&&(e+="?compress=true"),$("#item-link").val(e),$(".update-link").css("visibility","visible"),0!=timer&&clearTimeout(timer),timer=setTimeout(function(){$(".update-link").css("visibility","hidden"),timer=0},7e3)})}),$(document).on("click",".category-link",function(e){$(".e-filtericon").removeClass("e-filteredicon e-filternone"),e.preventDefault()}),$(document).on("click",".item-navigation li:not(:last)",function(e){e.preventDefault();$("#items").data("ejGrid");0==$(this).hasClass("active")&&($(".item-navigation li").removeClass("active"),$(this).addClass("active")),$(this).hasClass("all-items")?$("#category-listing").addClass("category-section"):$("#category-listing").removeClass("category-section");e=$(window).height()-($(".item-navigation").outerHeight()+$("#header-area").outerHeight()+$("#category-listing").outerHeight()),$("#items").data("ejGrid").option({scrollSettings:{height:e}}),e=$(this).attr("href");window.location.pathname+window.location.search!=e&&1041<=window.innerWidth&&null!=history.pushState&&"dashboards"===$("#item-grid-container").data("gridName")&&history.pushState({},"",e)}),$(document).on("click","#open-dashboard, #open-widget",function(e){"open-dashboard"==$(this).attr("id")?-1==$(this).attr("data-href").indexOf("?")?window.open($(this).attr("data-href")+"?showmydashboards=1","_blank"):window.open($(this).attr("data-href")+"&showmydashboards=1","_blank"):window.open($(this).attr("data-href"),"_blank")}),$(document).on("click",".search-item",function(e){return e.stopPropagation(),$(".search-area").hasClass("add-background")?(""!==$(".search-home-section").val()&&($(".search-home-section").val(""),!$("#category-list").is(":visible")||$("#category-list").length<=0?((gridObj=$("#items").data("ejGrid")).model.pageSettings.currentPage=1,gridObj.refreshContent()):$(".category").trigger("click")),$(".search-area").removeClass("add-background"),$(".placeholder, .close-icon").hide(),$(".all-items").hasClass("active")&&!$("#category-list").is(":visible")?setTimeout(function(){$(".search-area").prevAll().show().parent().removeClass("pull-right"),$("#category-section-name").show();var e=$("#isMarkItemspublic").val();($("ul.item-navigation li.public-items").hasClass("active")||$("ul.item-navigation li.public-widgets").hasClass("active"))&&0<$("#items").data("ejGrid")._gridRecordsCount&&"False"==e?$(".tool-tip").show():$(".tool-tip").hide()},300):setTimeout(function(){$(".search-area").prevAll(":not(#back-icon)").show().parent().removeClass("pull-right"),$("#category-section-name").show();var e=$("#isMarkItemspublic").val();($("ul.item-navigation li.public-items").hasClass("active")||$("ul.item-navigation li.public-widgets").hasClass("active"))&&0<$("#items").data("ejGrid")._gridRecordsCount&&"False"==e?$(".tool-tip").show():$(".tool-tip").hide()},300),setTimeout(function(){$(".search-home-section:visible").removeClass("show")},300)):($(".search-area").addClass("add-background"),$(".placeholder").show(),setTimeout(function(){$(".close-icon").show()},300),e=(($(".all-items").hasClass("active")&&!$("#category-list").is(":visible")?$(".search-area").prevAll():$(".search-area").prevAll(":not(#back-icon)")).hide().parent().addClass("pull-right"),$("#category-section-name").hide(),$("#isMarkItemspublic").val()),($("ul.item-navigation li.public-items").hasClass("active")||$("ul.item-navigation li.public-widgets").hasClass("active"))&&0<$("#items").data("ejGrid")._gridRecordsCount&&"False"==e?$(".tool-tip").show():$(".tool-tip").hide(),$("#search-home-page").focus(),setTimeout(function(){$(".search-home-section:visible").addClass("show")},300)),setTimeout(function(){$(".clear-search").hide()},300),!1}),$(document).on("click",".schedule-dashboards",function(){ItemId=$(this).attr("data-item-id"),ItemName=$(this).attr("data-itemname"),CategoryName=$(this).attr("data-category-name"),CategoryId=$(this).attr("data-category-id"),ScheduleId="",MultiDashboardName=$(this).attr("data-multidashboard-name"),$("#popup-container").ejDialog("open")}),$(document).on("click","#create_schedule, .create-schedule",function(){ItemId="",ItemName="",CategoryName="",ScheduleId="",CategoryId="",MultiDashboardName=$(this).attr("data-multidashboard-name"),$("#popup-container").ejDialog("open")}),$(document).on("click","#item-link-copy",function(e){$("#item-link").select(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").attr("data-original-title","")):(document.execCommand("copy"),$("#item-link-copy").attr("data-original-title",window.Server.App.Localization.Copysuccess),$("#item-link-copy").tooltip("hide").attr("data-original-title",window.Server.App.Localization.Copysuccess).tooltip("fixTitle").tooltip("show"),setTimeout(function(){$("#item-link-copy").attr("data-original-title",window.Server.App.Localization.LinkCopy),$("#item-link-copy").tooltip()},3e3))}),$(document).on("click",".item-link",function(e){var t;e.preventDefault(),"true"==$(this).attr("data-isdraft").toLowerCase()?window.open($(this).attr("href"),"_self"):(t=document.getElementById("dashboard_render_iframe"),window.innerWidth<1041||"open-dashboard"==e.target.id||"open-widget"==e.target.id||"context-menu"==e.target.id||$(e.target).hasClass("favorite-item")?e.stopPropagation():(t.contentWindow.location.replace(decodeURI($(this).find("span").attr("data-href"))),$("#item-viewer").ejWaitingPopup("show"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".item-list-panel").width()}),$("#initial-item-message").css("display","none"),$("#dashboard_render_iframe").css("display","block"),e=$(this).attr("href"),window.location.pathname+window.location.search!=e&&(t=-1<window.location.search.indexOf("?category=")?"?view=categories":"?view="+$(".item-navigation li.active").attr("data-value"),e=e+(-1<e.indexOf("?")?t.replace("?","&"):t),$("#current-url").attr("data-url",e),null!=history.pushState)&&"dashboards"===$("#item-grid-container").data("gridName")&&history.pushState({},"",e)),0==$(this).parents("td").hasClass("active")?($(".item-link").parents("td").removeClass("active"),$(this).parents("td").addClass("active")):window.innerWidth<1041&&($(".item-link").parents("td").removeClass("active"),$(".tooltip").hide()))}),$(document).on("click",".category-collapse",function(e){var t;return t=($(".su-sidebar-collapse").is(":visible")?($("#item-viewer").css("width","100%"),$(".item-list-panel, .su-sidebar-collapse").css({display:"none"}),$(".su-sidebar-expand").css({display:"block"}),$("#item-viewer").addClass("expanded"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".su-sidebar-expand.category-collapse").width(),top:$("#header-area").height()})):($("#dashboard_render_iframe").contents().find("#dashboard-view-toogle").hasClass("dashboard-view-toogle")&&CloseDashboardView(),$("#dashboard_render_iframe").contents().find("#filter-view").hide(),$("#dashboard_render_iframe").contents().find("#commentModuleContainer").addClass("displayNone"),$("#dashboard_render_iframe").contents().find("ul.options").css("right","0px"),$("#item-viewer").css({left:"initial"}),$("#dashboard_render_iframe").contents().find("ul.options li").removeClass("active"),$("#item-viewer").css({width:"70%"}),$(".item-list-panel, .su-sidebar-collapse").css({display:"block"}),$(".su-sidebar-expand").css({display:"none"}),$("#item-viewer").removeClass("expanded"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".item-list-panel").width()})),$("#dashboard_render_iframe").width()),$("#dashboard_render_iframe").contents().find("#dashboard").css("width",t-30),$("#item-viewer").ejWaitingPopup("refresh").css("width",t),!1}),$(document).on("show.bs.dropdown","#listing, #items .e-row",function(){var e,t;0<$(this).find("#context-menu").length&&(e=$(this).offset().top+$(this).outerHeight(!0)/2-$("#header-area").outerHeight(!0)-$(".item-navigation").outerHeight(!0)-$("#category-listing").outerHeight(!0),$(window).height()-$(this).offset().top-$(this).outerHeight(!0)/2<=(t=$(this).find(".dashboard-options").outerHeight(!0)))&&t<=e&&$(this).find("#context-menu").removeClass("dropdown").addClass("dropup"),($(this).hasClass("e-row")?$(".item-link"):$(".category-section")).each(function(){$(this).removeClass("active-category-setting"),0<$(this).find(".open").length&&$(this).addClass("active-category-setting")}),refreshScrollerForCategory()}),$(document).on("hide.bs.dropdown","#listing, #items .e-row",function(){0<$(this).find("#context-menu").length&&$(this).find("#context-menu").removeClass("dropup").addClass("dropdown"),($(this).hasClass("e-row")?$(".item-link"):$(".category-section")).removeClass("active-category-setting"),refreshScrollerForCategory()}),$(document).on("shown.bs.dropdown","#scroll-content li, #items .e-row",function(){var e=$("#item-grid-container").attr("data-grid-name");if($("#category-list").is(":visible"))return refreshScrollerForCategory(),!1;"dashboards"!=e.toLowerCase()&&"widgets"!=e.toLowerCase()||($(".e-gridcontent").ejScroller(),$(".e-gridcontent").ejScroller("refresh"))}),$(document).on("hidden.bs.dropdown","#scroll-content li, #items .e-row",function(){var e=$("#item-grid-container").attr("data-grid-name");if($("#category-list").is(":visible"))return refreshScrollerForCategory(),!1;"dashboards"!=e.toLowerCase()&&"widgets"!=e.toLowerCase()||($(".e-gridcontent").ejScroller(),$(".e-gridcontent").ejScroller("refresh"))}),$(document).on("mouseenter",".category-section, #items .e-row",function(){($(this).hasClass("e-row")?$(".item-link"):$(".category-section")).each(function(){$(this).removeClass("active-category-setting"),0<$(this).find(".open").length&&$(this).addClass("active-category-setting")})}),$(document).on("mouseleave",".category-section, #items .e-row",function(){($(this).hasClass("e-row")?$(".item-link"):$(".category-section")).each(function(){$(this).removeClass("active-category-setting"),0<$(this).find(".open").length&&$(this).addClass("active-category-setting")})}),$(document).on("mouseenter","#open-dashboard, #open-widget",function(){$(this).parents("a").tooltip("hide")}),$(document).on("mouseleave","#open-dashboard, #open-widget",function(){$(this).parents("a").tooltip("show")}),$(document).on("mouseenter",".dashboard-views",function(e){var t,a,o,n,r,s,d,l;"view-name"!=e.target.className&&(t=$(this).find(".views").attr("data-item-id"),a=$(this).find("ul"),o="",n=$(this).find(".views").attr("data-is-childdashboard"),r=$(this).find(".views").attr("data-parent-category-name"),s=$(this).find(".views").attr("data-parent-itemname"),d=$(this).find(".views").attr("data-parent-item-id"),l=null!=n&&"true"==n.toLowerCase()?$(this).find(".views").attr("data-child-dashboard-name"):"",1==isAjaxRequested)&&($(".dashboard-views").addClass("views-loader"),isAjaxRequested=!1,$.ajax({type:"POST",url:getViewsByItemIdUrl,data:{itemId:t},success:function(e){if(null!=e&&null!=e.result&&0<e.result.length)if(null!=n&&"true"==n.toLowerCase())for(i=0;i<e.result.length;i++)o+="<li><a class='view-name' href='"+dashboards+"/"+d+"/"+r+"/"+s+"?tab="+l+"&viewid="+e.result[i].ViewId+"' target='_blank' data-toggle='tooltip' data-placement='top' data-original-title='"+e.result[i].ViewName+"' data-itemid='"+e.result[i].ItemId+"'>"+e.result[i].ViewName+"</a></li>";else for(i=0;i<e.result.length;i++)o+="<li><a class='view-name' href='"+dashboards+"/"+t+"/"+e.result[i].CategoryName+"/"+e.result[i].ItemName+"?viewid="+e.result[i].ViewId+"' target='_blank' data-toggle='tooltip' data-placement='top' data-original-title='"+e.result[i].ViewName+"' data-itemid='"+e.result[i].ItemId+"'>"+e.result[i].ViewName+"</a></li>";else o="<li><span class='view-name' href='javascript:void(0);'><span>"+window.Server.App.Localization.NoViews+"</span></span></li>";a.html(o),$(".dashboard-views").removeClass("views-loader"),$(".dashboard-views").addClass("no-loader"),$('[data-toggle="tooltip"]').tooltip()}}).always(function(){isAjaxRequested=!0}))}),$(document).on("click",".dashboard-options li > span",function(e){return e.stopPropagation(),!1}),$(document).on("click",".download-item",function(e){window.location=$(this).attr("href")}),$(document).on("click",".open-item",function(e){var t=$(this).attr("href")+"?showmydashboards=1";window.open(t,"_blank")}),$(document).on("click",".option-click",function(){$(this).closest(".dropdown-menu").prev().dropdown("toggle")}),$(document).on("click",".dropdown-backdrop",function(e){return e.stopPropagation(),!1}),$(document).on("show.bs.tooltip",function(){$(".tooltip").not(this).hide()}),$(document).on("click",".web-designer",function(e){window.location.href=$(this).attr("href")}),$(document).on("click",".view-schedule",function(e){var t=$(this).attr("href");window.open(t,"_blank")}),$(document).on("mousedown","#items .e-gridcontent .e-vscrollbar",function(){$("#item-viewer iframe").addClass("pointer-event"),-1!=navigator.userAgent.indexOf("Edge")&&$("#item-viewer iframe").addClass("display")}),$(document).on("mouseup",function(){$("#item-viewer iframe").hasClass("pointer-event")&&($("#item-viewer iframe").removeClass("pointer-event"),-1!=navigator.userAgent.indexOf("Edge"))&&$("#item-viewer iframe").removeClass("display")}),$(document).on("click",".blank-dashboard-link-box, #start-from-templates",function(){$("#CreateDashboard").trigger("click")});var isAddCategoryDialogBinded=!1,isAddSampleDialogBinded=!1;function getSubCategoryInfo(){var a=$("#create-subcategory-section");$.ajax({type:"POST",url:getCategories,data:"",success:function(e){e.length<1?$('.select-create-type input[name=categoryType][value="1"]').prop("disabled",!0):$('.select-create-type input[name=categoryType][value="1"]').prop("disabled",!1);var t=document.querySelector("#SubCategoryList");null!=t&&null!=t.ej2_instances&&t.ej2_instances[0].destroy(),new ejs.dropdowns.DropDownTree({fields:{dataSource:e,value:"Id",text:"Name",child:"SubCategory"},select:function(){categoryValueChange(a)},value:[e[0].Id.toString()],destroyPopupOnHide:!1,showClearButton:!1}).appendTo("#SubCategoryList")}})}function dialogClose(){$(".clear-search").css("display","none"),$(".search-item").css("display","block"),0==dashboardItemCount&&location.reload(),angular.element("[ng-controller=SampleListCtrl]").scope().query="",dialog.hide()}function openSampleDashboardDialog(e){var t,a,i='<span class="dialog-header-with-icon"><span class ="dialog-header-title">'+window.Server.App.Localization.SampleDashboards+"</span></span>";isAddSampleDialogBinded?((a=document.getElementById("sample_item_dialog").ej2_instances)[0].header=i,a[0].show()):((t=document.createElement("div")).setAttribute("id","sample_item_dialog"),e.appendChild(t),(a=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"900px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:i,showCloseIcon:!0,close:dialogClose,content:document.getElementById("sample-item-container"),buttons:[{click:function(){0==dashboardItemCount&&location.reload(),angular.element("[ng-controller=SampleListCtrl]").scope().query="",a.hide(),$(".clear-search").css("display","none"),$(".search-item").css("display","block")},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CloseButton}}]})).appendTo(t),isAddSampleDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("sample_item_dialog")}),ejs.popups.setSpinner({type:"Material"}),beforeOpenSampleDialog()}function beforeOpenSampleDialog(){$("#sample-item-container .search-div #search-area #search-items").val(""),$(".list-group-item").removeClass("highlight-list-item"),$(".list-group").find(".list-group-item:first").addClass("highlight-list-item"),$("#sample-item-container").show(),ejs.popups.showSpinner(document.getElementById("sample_item_dialog")),$.ajax({type:"POST",url:addSampleItemsUrl,data:{},success:function(e){var t=angular.element("[ng-controller=SampleListCtrl]").scope();t.samples=e.categories,t.orderList="Name",t.selectedCategory=void 0,"$apply"!=t.$root.$$phase&&"$digest"!=t.$root.$$phase&&t.$apply(),$(".list-group").scrollTop(0),ejs.popups.hideSpinner(document.getElementById("sample_item_dialog"))}})}function openNewDashboardPopup(){$("#report_popup").ejDialog("open"),$("#report_popup_wrapper").ejWaitingPopup("show")}function onDashboardDialogOpen(){$("#report_iframe").attr("src",addDashboardIframeUrl)}function onDashboardDialogClose(){$("#report_popup").find("iframe").contents().find("html").html(""),window.IsAddDashboard=!1,window.CategoryName=""}function beforeCloseAddItemPopup(){$("#add_category_name, #create_subcategory_name, #add-category_description, #create_subcategory_description").val(""),$('.select-create-type input[name=categoryType][value="0"]').prop("checked",!0).trigger("change"),$("#CreateCategoryPopup #validate-name").parent("span").parent("td").removeClass("has-error"),$("#CreateCategoryPopup #validate-name").parent("span").removeClass("has-error"),$("#CreateCategoryPopup #validate-name").text(""),$("#CreateCategoryPopup #categorylist_validation, #CreateCategoryPopup #plugin_validation").html("")}$(function(){$("#report_popup").ejDialog({width:"760px",showOnInit:!1,allowDraggable:!1,enableResize:!1,title:window.Server.App.Localization.AddDashboard,enableModal:!0,showHeader:!1,open:"onDashboardDialogOpen"});var e=createLoader("report_popup_wrapper");$("#report_popup_wrapper").ejWaitingPopup({template:$("#"+e)})}),$("input[type=radio][name=categoryType]").change(function(){"0"===$(this).val()?($("#create_subcategory_content").css("display","none"),$("#create_newcategory_content").css("display","block")):($("#create_subcategory_content").css("display","block"),$("#create_newcategory_content").css("display","none")),$("#add_category_name, #create_subcategory_name").val(""),$("#add-category_description, #create_subcategory_description").val(""),$("#create-category-dialog .validation-message").html(""),$("#CreateCategoryPopup #validate-name").parent("span").parent("td").removeClass("has-error"),$("#CreateCategoryPopup #validate-name").parent("span").removeClass("has-error")}),$(document).on("click","#create_Category",function(){document.getElementById("CreateCategoryPopup").style.display="block";var e,t,a='<span class="dialog-header-with-icon"><span class ="dialog-header-title"><i class="su su-folder dialog-header-icon"></i>&nbsp;&nbsp;'+window.Server.App.Localization.CreateCategory+"</span></span>";isAddCategoryDialogBinded?((t=document.getElementById("create-category-dialog").ej2_instances)[0].header=a,t[0].show()):((e=document.createElement("div")).setAttribute("id","create-category-dialog"),document.getElementById("server-app-container").appendChild(e),(t=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"430px":window.innerWidth-10,showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:a,showCloseIcon:!0,content:document.getElementById("CreateCategoryPopup"),beforeClose:beforeCloseAddItemPopup,buttons:[{click:function(e){var t=1==$("input[name=categoryType]:checked").val();addItemValidate(t)},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.AddButton}},{click:function(){closeAddItemPopup()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}]})).appendTo(e),isAddCategoryDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("create-category-dialog")}),ejs.popups.setSpinner({type:"Material"}),getSubCategoryInfo()}),$(document).on("click",".add-sample-button",function(){openSampleDashboardDialog(0!=dashboardItemCount?document.getElementById("dashboard-page-container"):document.getElementById("defafult-pages-container"))}),$(document).on("click",".explore",function(){openSampleDashboardDialog(document.getElementById("server-app-container"))}),$(document).on("click",".dashboard-notification .su-close",function(){$(".dashboard-notification").remove()});var isItemUpdateDialogBinded=!1,isSubCategoryDialogBinded=!1,isSubCategoryAddDialogBinded=!1;function deleteCategory(e){$(this).parents(".dropdown").removeClass("open"),$(this).parents(".dropdown").find(".dropdown-backdrop").remove(),$("#delete-item-name").html(e.Name),$("#delete-item").attr("data-item-id",e.Id),document.getElementById("item-delete-confirmation").style.display="block";var t,a,i='<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.DeleteCategory+'</span><span class="item-name">'+e.Name+"</span></span>";isItemDeleteDialogBinded?((a=document.getElementById("delete-item-dialog").ej2_instances)[0].header=i,a[0].show()):((t=document.createElement("div")).setAttribute("id","delete-item-dialog"),document.getElementById("dashboard-page-container").appendChild(t),(a=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"450px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:i,showCloseIcon:!0,content:document.getElementById("item-delete-confirmation")})).appendTo(t),isItemDeleteDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("delete-item-dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("delete-item-dialog")),getDeleteItemDetails(e)}function EditCategory(e,t,a,i){a=a.replace(new RegExp("&#xA;","g"),"\n"),a=$("<div/>").html(a).text(),$("#EditCategoryPopup #category_name").val(t),$("#EditCategoryPopup #category_description").val(a),$("#EditCategoryPopup #validate-name").parent("span").removeClass("has-error"),$("#EditCategoryPopup #plugin_validation").html(""),document.getElementById("EditCategoryPopup").style.display="block";var o,n,r='<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.UpdateCategory+'</span><span class="item-name">'+t+"</span></span>";isItemUpdateDialogBinded?((n=document.getElementById("edit-category-dialog").ej2_instances)[0].header=r,n[0].show()):((o=document.createElement("div")).setAttribute("id","edit-category-dialog"),document.getElementById("dashboard-page-container").appendChild(o),(n=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"600px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:r,showCloseIcon:!0,content:document.getElementById("EditCategoryPopup"),buttons:[{click:function(e){updateCategory()},buttonModel:{isPrimary:!0,disabled:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.UpdateButton}},{click:function(){closeEditCategoryPopup()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}]})).appendTo(o),isItemUpdateDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("edit-category-dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("edit-category-dialog")),window.isEdited=!1,window.editData={ItemId:e,Name:t,Description:a,ParentId:i},ejs.popups.hideSpinner(document.getElementById("edit-category-dialog"))}function AddSubCategory(e,t,a){document.getElementById("AddSubCategoryPopup").style.display="block";var i,o,n='<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.AddSubCategory+'</span><span class="item-name">'+t+"</span></span>";isSubCategoryAddDialogBinded?((o=document.getElementById("add-sub-category-dialog").ej2_instances)[0].header=n,o[0].show()):((i=document.createElement("div")).setAttribute("id","add-sub-category-dialog"),document.getElementById("dashboard-page-container").appendChild(i),(o=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"430px":window.innerWidth-10,showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:n,showCloseIcon:!0,beforeClose:beforeCloseaddSubCategoryPopup,content:document.getElementById("AddSubCategoryPopup"),buttons:[{click:function(e){addSubCategory()},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.AddButton}},{click:function(){closeaddSubCategoryPopup()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}]})).appendTo(i),isSubCategoryAddDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("add-sub-category-dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("add-sub-category-dialog")),window.editData={ItemId:e,Name:t,Description:a},ejs.popups.hideSpinner(document.getElementById("add-sub-category-dialog"))}function addSubCategory(){if(!$("#addSubCategoryForm").valid())return!1;document.getElementById("add-sub-category-dialog").ej2_instances;ejs.popups.showSpinner(document.getElementById("add-sub-category-dialog"));var a=$("#add-sub-category-dialog #sub-category_name").val().trim(),e=$("#add-sub-category-dialog #category_description").val().trim();$.ajax({type:"POST",url:addSubCategoryUrl,data:{CategoryName:a,Description:e,ParentId:window.editData.ItemId},async:!1,success:function(e){var t;e.IsSuccess?(t=createLoader("item-list-panel"),$("#item-list-panel").ejWaitingPopup({template:$("#"+t)}),void 0!==window.IsAddDashboard&&!0===window.IsAddDashboard||void 0!==window.IsCopyOrMoveDashboard&&!0===window.IsCopyOrMoveDashboard?(window.IsCategoryAdded=!0,isMultiTab?updateMultiTabCategory(window.CategoryName,e.ItemId):updateContents(window.CategoryName,e.ItemId,window.IsCopyOrMoveDashboard)):null!=window.UploadDashboard&&window.UploadDashboard?(ejs.popups.hideSpinner(document.getElementById("add-sub-category-dialog")),closeaddSubCategoryPopup(),onUploadDialogOpen()):(successToast(window.Server.App.Localization.AddSuccessMessage.format(a),5e3),"function"==typeof ResetItemList&&0<dashboardItemCount&&ResetItemList(1),setTimeout(function(){$("li[data-dashboard-id='"+e.ItemId+"']").parents("li.category-list-item").each(function(){$(this).find(".arrow-icon").hasClass("su-angle-right")&&($(this).children(".nested-li").removeClass("show-sub-category"),$(this).find(".arrow-icon").eq(0).removeClass("su-angle-right").addClass("su-vertical-expand"))})},1e3)),closeaddSubCategoryPopup()):e.IsCategoryExist?($("#AddSubCategoryPopup #validate-name").parent("span").addClass("has-error"),$("#AddSubCategoryPopup #validate-name").html(window.Server.App.Localization.IsCategoryExist)):e.HasPermission||(ejs.popups.hideSpinner(document.getElementById("add-sub-category-dialog")),closeaddSubCategoryPopup(),warningToast(window.Server.App.Localization.AddCategoryPermissionWarningAlert,null,(new Date).getTime(),window.Server.App.Localization.AddCategory))},complete:function(){ejs.popups.hideSpinner(document.getElementById("add-sub-category-dialog"))}})}function closeaddSubCategoryPopup(){$("#AddSubCategoryPopup #validate-name").parent("span").parent("td").removeClass("has-error"),$("#AddSubCategoryPopup #validate-name").parent("span").removeClass("has-error"),$("#AddSubCategoryPopup #validate-name").text(""),$("#AddSubCategoryPopup #plugin_validation").html(""),document.getElementById("add-sub-category-dialog").ej2_instances[0].hide(),$("#add-sub-category-dialog #sub-category_name, #add-sub-category-dialog #category_description").val("")}function beforeCloseaddSubCategoryPopup(){$("#AddSubCategoryPopup #validate-name").parent("span").parent("td").removeClass("has-error"),$("#AddSubCategoryPopup #validate-name").parent("span").removeClass("has-error"),$("#AddSubCategoryPopup #validate-name, #AddSubCategoryPopup #plugin_validation").text(""),$("#add-sub-category-dialog #sub-category_name, #add-sub-category-dialog #category_description").val("")}$(function(){var a=null!=$("#sub-category_name").attr("data-maxlength")?$("#sub-category_name").attr("data-maxlength"):255;$.validator.addMethod("isLengthExceeded",function(e,t){return e.length<=a},window.Server.App.Localization.CharacterExceedMessage.format(a)),$("#addSubCategoryForm").validate({errorElement:"div",onkeyup:function(e,t){9!=t.keyCode&&$(e).valid(),$("#sub-category_name").next("#validate-name").parent("span").removeClass("has-error"),$("#sub-category_name").next("#validate-name").html("")},onfocusout:function(e){$(e).valid()},rules:{categoryName:{isRequired:!0,isValidName:!0,isLengthExceeded:!0}},messages:{categoryName:{isRequired:window.Server.App.Localization.CategoryNameValidator}},highlight:function(e){$(e).closest("td").addClass("has-error")},unhighlight:function(e){"sub-category_name"==$(e).attr("id")&&($(e).closest("td").removeClass("has-error"),$(e).closest("td").find("div").html(""))},errorPlacement:function(e,t){$(t).closest("td").find("div").html(e.html())}}),$(document).keyup(function(e){27==e.keyCode&&window.parent.$("#createButton").focus()}),$("#sub-category_name").bind("keypress",function(e){if(13==e.keyCode)return e.preventDefault(),addItemValidate(),!1})});