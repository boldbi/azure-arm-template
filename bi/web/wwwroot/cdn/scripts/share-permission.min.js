/*!
*  filename: share-permission.min.js
*  version : unknown version
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function intializeGetLinkDialog(){$.ajax({type:"Get",url:getLinkDialogViewUrl,success:function(n){$("body").append(n);$("#get_item_link").ejDialog({width:window.innerWidth>460?"450px":window.innerWidth-10,showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"auto",title:window.Server.App.LocalizationContent.GetLink,showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"onGetLinkDialogClose"});var t=createLoader("get_item_link_wrapper");$("#get_item_link_wrapper").ejWaitingPopup({template:$("#"+t)})}})}function GetLink(n){var t=n.ItemType,i,r;t==2?$(".dashboard-link").show():t==6?($(".file-link").show(),$("#compressed-link").prop("checked",!0)):t==8?$(".widget-link").show():$(".link").show();i=n.Name;r=n.Id;$("#get_item_link").ejDialog("open");$("#get_item_link").show();$("#get_item_link_wrapper").ejWaitingPopup("show");$(".get_link").show();n.IsPublic?($(".private-note").hide(),$(".public-note").show()):($(".private-note").show(),$(".public-note").hide());/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").hide(),$("#item-link").css({width:"100%",borderRadius:"4px"}),$("#item-link-copy").attr("data-original-title","")):$("#item-link-copy").tooltip({animation:!1});$(".report-name").html(i);$(".report-name").attr("title",i);$("#item-link").val(getDashboardShareLink(n.Id,n.CategoryName,n.Name));$("#item-link").select();$(".modal-footer .validation-area").css("display","block");$("#get_item_link_wrapper").ejWaitingPopup("hide")}function onGetLinkDialogClose(){$("#get_item_link").ejDialog("close")}function onGetLinkDialogOpen(){$("#get_item_link").ejDialog("open");$("#get_item_link").show();$("#get_item_link").focus();$("#item-link").select();$(".get_link").show();$("#item-link").val(itemUrl);/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").hide(),$("#item-link-copy").attr("data-original-title",""))}function getDashboardShareLink(n,t,i){var r=baseUrl.split("/");return encodeURI(r[0]+"//"+r[2]+viewDashboardUrlAction+"/"+n+"/"+t+"/"+i)}function manageAccessCancelBtn(){$('[data-toggle="popover"]').popover("hide");resetToActualScope();enableAutomCompleteControl();enableAutocompleteAccessModeSelection()}function shareDashboardPermission(n,t){var i,u,r;currentItemDetail=n;currentDashboardDetail=t;i=angular.element("#share-permission-content-section").scope();i.currentItemType=n.ItemType;i.isAdmin=isAdmin;t!=null&&(i.isDashboardPublic=t.IsPublic);n.ItemType==ItemType.Category||n.ItemType==ItemType.Datasource?sharePermissionDlgObj.ejDialog({height:241}):n.ItemType==ItemType.Slideshow?sharePermissionDlgObj.ejDialog({height:356}):n.ItemType==ItemType.ItemView?sharePermissionDlgObj.ejDialog({height:418}):isMarkItemsPublic?n.IsMultiDashboard?n.IsPublic?sharePermissionDlgObj.ejDialog({height:407}):sharePermissionDlgObj.ejDialog({height:391}):n.IsPublic?sharePermissionDlgObj.ejDialog({height:434}):sharePermissionDlgObj.ejDialog({height:418}):n.IsMultiDashboard?sharePermissionDlgObj.ejDialog({height:335}):sharePermissionDlgObj.ejDialog({height:362});sharePermissionDlgHeaderItemName.text(n.Name);sharePermissionDlgObj.show();$("#share-permission-popup_wrapper, #user-group-search-input_suggestion").addClass("custom-bootstrap-styles");sharePermissionDlgObj.ejDialog("open");n.ItemType==ItemType.Dashboard||n.ItemType==ItemType.ItemView?n.CreatedById==currentUserId||isAdmin?(isMarkItemsPublic||n.ItemType==ItemType.ItemView?n.IsPublic?showPublicContent():showPrivateContent():showDashboardSettingContent(),addAttributeValueToBtnEle(n)):(hidePublicPrivateContent(),n.IsMultiDashboard?sharePermissionDlgObj.ejDialog({height:312}):sharePermissionDlgObj.ejDialog({height:339})):hidePublicPrivateContent();n.CreatedById==currentUserId||isAdmin?(showShareUserGroupPermissionSection(),getShareItemPermission(n.Id),addAttributeValueToBtnEle(n),addAttributeValueToAutoCompleteEle(n)):hideShareUserGroupPermissionSection();/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-url-copy").hide(),$("#item-url").css({width:"100%",borderRadius:"4px"}),$("#item-url-copy").attr("data-original-title","")):$("#item-url-copy").tooltip({animation:!1});switch(n.ItemType){case ItemType.Dashboard:$("#item-url").val(getDashboardShareLink(n.Id,n.CategoryName,n.Name));break;case ItemType.ItemView:u=getDashboardShareLink(t.Id,t.CategoryName,t.Name);$("#item-url").val(u+"?viewid="+n.Id);break;case ItemType.Slideshow:r=baseUrl.split("/");$("#item-url").val(r[0]+"//"+r[2]+slideShowUrl+"/"+n.Id+"/"+n.Name);break;default:$("#item-url").val("")}}function onSharePermissionPopupOpen(){$('[data-toggle="popover"]').popover("hide");sharePermissionDlgWrapperObj.ejWaitingPopup("refresh");showSharePermissionContainer()}function onSharePermissionPopupClose(){currentItemDetail=[];$(".embed-configuration [type='checkbox']").removeAttr("checked");$('[data-toggle="popover"]').popover("hide");showSharePermissionContainer();sharePermissionDlgWrapperObj.ejWaitingPopup("refresh");sharePermissionDlgWrapperObj.ejWaitingPopup("hide");refreshDialogBoxPosition()}function showAccessModeContainer(){sharePermisisonDlgHeader.text(window.Server.App.LocalizationContent.SharePermissionAccessMode);accessModeContainer.show();accessModeChngBtnObj.show();accessModeCancelBtnObj.show();sharePermissionConatiner.hide();manageAccessButton.hide();shareBtnObj.hide();shareDoneBtnObj.hide();refreshDialogBoxPosition()}function showManageAccessContainer(){hidePublicPrivateContent();showSharedUserGroupContainer.hide();shareBtnObj.text(window.Server.App.LocalizationContent.AddPeopleBtn);sharePermisisonDlgHeader.text(window.Server.App.LocalizationContent.ManageAccess);dummyContainer.hide();autoCompleteInstance.getValue()==""&&shareBtnObj.hide();manageAccessBackButton.show();manageUserGroupContainer.show();manageAccessButton.hide();refreshUserGroupScroll();refreshDialogBoxPosition();generateProfileAvatar()}function hideManageAccessContainer(){manageUserGroupContainer.hide();manageAccessSaveBtnObj.hide();manageAccessCancelBtnObj.hide();embedCodeDoneBtnObj.hide();embedCodeBackButton.hide();embedCodeContainer.hide();changeIndicatorBannerObj.css("visibility","hidden");resetPreRequestValues()}function showSharePermissionContainer(){sharePermisisonDlgHeader.text(window.Server.App.LocalizationContent.SharePermissionDefault);dummyContainer.show();shareBtnObj.text(window.Server.App.LocalizationContent.SharePeopleBtn);enableAutocompleteAccessModeSelectionWithoutReset();refreshAutoComplete();sharePermissionConatiner.show();manageAccessButton.show();shareDoneBtnObj.show();manageAccessBackButton.hide();hideManageAccessContainer();accessModeContainer.hide();accessModeChngBtnObj.hide();accessModeCancelBtnObj.hide();displaySharedUserGroupInfo();currentItemDetail.ItemType==ItemType.Dashboard?typeof currentItemDetail.Extension=="undefined"||currentItemDetail.IsMultiDashboard||currentItemDetail.Extension.toLowerCase()!=".sydj"?getEmbedLinkSection.hide():getEmbedLinkSection.show():currentItemDetail.ItemType==ItemType.ItemView&&getEmbedLinkSection.show();embedCodeDoneBtnObj.hide();embedCodeBackButton.hide();sharePermissionDlgHeaderItemName.show();sharePermisisonDlgHeader.css("line-height","");refreshDialogBoxPosition()}function showSharePermissionContainerWithRefresh(){$('[data-toggle="popover"]').popover("hide");resetToActualScope();hideManageAccessContainer();enableAutocompleteAccessModeSelectionWithoutReset();sharePermisisonDlgHeader.text(window.Server.App.LocalizationContent.SharePermissionDefault);displaySharedUserGroupInfo();dummyContainer.show();shareBtnObj.text(window.Server.App.LocalizationContent.SharePeopleBtn);showPublicPrivateContent();sharePermissionConatiner.show();manageAccessButton.show();autoCompleteInstance.getValue()!=""?(shareBtnObj.show(),manageAccessCancelBtnObj.show(),shareDoneBtnObj.hide()):shareDoneBtnObj.show();manageAccessBackButton.hide();accessModeContainer.hide();accessModeChngBtnObj.hide();accessModeCancelBtnObj.hide();refreshDialogBoxPosition()}function showDashboardSettingContent(){sharePermissionPublicSectionObj.hide();sharePermissionPrivateSectionObj.hide();sharePermissionDashboardSettingSectionObj.show()}function showPublicContent(){sharePermissionPublicSectionObj.show();sharePermissionPrivateSectionObj.hide();isItemPublic=!0}function showPrivateContent(){sharePermissionPublicSectionObj.hide();sharePermissionPrivateSectionObj.show();isItemPublic=!1}function showPublicOrPrivateContent(){isItemPublic?showPublicContent():showPrivateContent()}function showShareUserGroupPermissionSection(){sharePermissionUserGroupSectionObj.show()}function hideShareUserGroupPermissionSection(){sharePermissionUserGroupSectionObj.hide()}function hidePublicPrivateContent(){sharePermissionPublicSectionObj.hide();sharePermissionPrivateSectionObj.hide();sharePermissionDashboardSettingSectionObj.hide()}function showPublicPrivateContent(){currentItemDetail.ItemType==ItemType.Dashboard||currentItemDetail.ItemType==ItemType.ItemView?currentItemDetail.CreatedById==currentUserId?isMarkItemsPublic||currentItemDetail.ItemType==ItemType.ItemView?isItemPublic?sharePermissionPublicSectionObj.show():sharePermissionPrivateSectionObj.show():sharePermissionDashboardSettingSectionObj.show():hidePublicPrivateContent():hidePublicPrivateContent()}function changeAccessMode(){manageAccessCancelBtn();sharePermissionDlgWrapperObj.ejWaitingPopup("show");showAccessModeContainer();isItemPublic?publicRadioBtnObj.prop("checked",!0):privateRadioBtnObj.prop("checked",!0);accessModeChngBtnObj.attr("disabled",!0);sharePermissionDlgWrapperObj.ejWaitingPopup("hide")}function getEmbedCode(){$("#embed-code").val(generateEmbedCode(currentItemDetail));embedCodeContainer.show();sharePermisisonDlgHeader.text(window.Server.App.LocalizationContent.EmbedCode);/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&getEmbedCodeCopyBtnobj.hide();currentItemDetail.IsPublic?($(".private-embed-code-note").hide(),$(".public-embed-code-note").show()):($(".private-embed-code-note").show(),$(".public-embed-code-note").hide());embedCodeDoneBtnObj.show();embedCodeBackButton.show();manageAccessBackButton.hide();manageAccessSaveBtnObj.hide();manageAccessCancelBtnObj.hide();sharePermissionDlgHeaderItemName.hide();sharePermisisonDlgHeader.css("line-height","32px");sharePermissionConatiner.hide();manageAccessButton.hide();shareBtnObj.hide();shareDoneBtnObj.hide();refreshDialogBoxPosition()}function addAttributeValueToBtnEle(n){accessModeChngBtnObj.attr("data-item-id",n.Id);accessModeChngBtnObj.attr("data-name",n.Name);accessModeChngBtnObj.attr("data-itemtype",n.ItemType);shareBtnObj.attr("data-item-id",n.Id);shareBtnObj.attr("data-name",n.Name);shareBtnObj.attr("data-itemtype",n.ItemType)}function addAttributeValueToAutoCompleteEle(n){autoCompleteHiddenEle.attr("data-item-id",n.Id);autoCompleteHiddenEle.attr("data-itemtype",n.ItemType)}function getShareItemPermission(n){sharePermissionDlgWrapperObj.ejWaitingPopup("show");$.ajax({type:"get",url:getShareItemPermissionUrl,data:{itemId:n},contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){if(n.status){var t=angular.element(manageUserGroupBodySection).scope();t.$apply(function(){angular.copy(n.SharedUserGroupList,sharedUserGroupsPreservedList);t.sharedUserGroups=n.SharedUserGroupList});t.$apply(function(){angular.copy(n.AccessModeOptionList,sharedAccessModePreservedList);t.accessModes=n.AccessModeOptionList});currentItemDetail.ItemType==ItemType.ItemView?$("#user-group-search-input_suggestion").removeClass("item-user-input_suggestion"):$("#user-group-search-input_suggestion").addClass("item-user-input_suggestion");$(".change-access-mode-selection").selectpicker("refresh");$(".change-access-mode-selection .selectpicker").removeAttr("title");accessModeSelectionInput.html("");accessModeSelectionInput.append(n.AccessModeList);accessModeSelectionInput.selectpicker("refresh");refreshUserGroupScroll();sharePermissionDlgWrapperObj.ejWaitingPopup("hide");displaySharedUserGroupInfo();isEntireDOMRendered=!0;$('[data-toggle="tooltip"]').tooltip();$('[data-toggle="popover"]').popover()}},error:function(){WarningAlert("",window.Server.App.LocalizationContent.InternalServerError,7e3);sharePermissionDlgWrapperObj.ejWaitingPopup("hide")}})}function displaySharedUserGroupInfo(){var r=angular.element(manageUserGroupBodySection).scope(),n=r.sharedUserGroups,t,i;n!=null&&(n.length>0?(t="",$.each(n,function(i,r){var u="<div class='shared-user-group-name'><span class='shared-user-group-name-label'>";i<3&&(u+=r.TargetUserId>0?r.DisplayName+"<\/span>":r.TargetGroupName+"<\/span>",u+=i!=n.length-1?"<span class='shared-user-group-name-comma'>,<\/span> <\/div>":"<\/div>",t+=u)}),showSharedUserGroupNameSection.html(t),manageUserGroupContainer.is(":visible")||showSharedUserGroupContainer.show()):showSharedUserGroupContainer.hide(),n.length>3?(i=n.length-3,showSharedUserGroupCount.text(i),showSharedUserGroupCountSection.show()):showSharedUserGroupCountSection.hide(),generateProfileAvatar())}function saveItemPermission(){sharePermissionDlgWrapperObj.ejWaitingPopup("show");splitUserGroupList();var t=userEmailList,i=groupIdList,r=accessModeSelectionInput.val(),n=shareBtnObj.attr("data-item-id"),u=shareBtnObj.attr("data-itemtype");$.ajax({type:"POST",url:sharepermissionUrl,data:{permissionList:JSON.stringify({mode:r,itemType:u,UserList:t,GroupList:i}),itemId:n},success:function(t){t.toString().toLowerCase()=="true"?(getShareItemPermission(n),refreshAutoComplete(),refreshAutocompleteAccessModeSelection()):WarningAlert("",window.Server.App.LocalizationContent.InternalServerError,7e3)},error:function(){WarningAlert("",window.Server.App.LocalizationContent.InternalServerError,7e3)}})}function updateBulkItemPermission(){var n=shareBtnObj.attr("data-item-id");$.ajax({type:"POST",url:updateBulkItemPermissionUrl,data:{permissionList:addNewItemPermission,userMarkedForDeletionList:userMarkedForDeletionList,groupMarkedForDeletionList:groupMarkedForDeletionList,itemId:n},success:function(t){t.toString().toLowerCase()=="true"?(getShareItemPermission(n),changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareDoneBtnObj.show(),enableAutomCompleteControl(),enableAutocompleteAccessModeSelection()):WarningAlert("",window.Server.App.LocalizationContent.InternalServerError,7e3)},error:function(){WarningAlert("",window.Server.App.LocalizationContent.InternalServerError,7e3)}})}function refreshDialogBoxPosition(){sharePermissionDlgObj.ejDialog({height:"auto"});isEntireDOMRendered&&(sharePermissionDlgObj.ejDialog({width:529}),sharePermissionDlgObj.ejDialog({width:530}));sharePermissionDlgWrapperObj.ejWaitingPopup("refresh");sharePermissionDlgObj.ejDialog("refresh");isWidget&&(sharePermissionDlgWrapperObj.ejWaitingPopup("hide"),sharePermisisonDlgHeader.text(window.Server.App.LocalizationContent.EmbedCode),sharePermisisonDlgHeader.css("line-height","32px"),sharePermissionDlgHeaderItemName.hide(),sharePermissionConatiner.hide(),embedCodeContainer.show(),embedConfiguration.hide(),manageAccessButton.hide())}function prepareRequestForAddItemPermission(){if(modifiedItemIndex.length>0){var t=angular.element(manageUserGroupBodySection).scope(),i=t.accessModes,n=t.sharedUserGroups,r=shareBtnObj.attr("data-itemtype");$.each(i,function(i,u){var o=u.Key,f=[],e=[];$.each(modifiedItemIndex,function(i,r){n[r].PermissionAccess!=sharedUserGroupsPreservedList[r].PermissionAccess&&n[r].PermissionAccess==u.Key&&(t.IsUserItem(r)?jQuery.inArray(n[r].Email,f)==-1&&f.push(n[r].Email):t.IsGroupItem(r)&&jQuery.inArray(n[r].TargetGroupId,e)==-1&&e.push(n[r].TargetGroupId))});(f.length>0||e.length>0)&&addNewItemPermission.push(JSON.stringify({mode:o,itemType:r,UserList:f,GroupList:e}))});$.each(modifiedItemIndex,function(i,r){n[r].PermissionAccess!=sharedUserGroupsPreservedList[r].PermissionAccess&&(t.IsUserItem(r)?jQuery.inArray(sharedUserGroupsPreservedList[r].PermissionId,userMarkedForDeletionList)==-1&&userMarkedForDeletionList.push(sharedUserGroupsPreservedList[r].PermissionId):t.IsGroupItem(r)&&jQuery.inArray(sharedUserGroupsPreservedList[r].PermissionId,groupMarkedForDeletionList)==-1&&groupMarkedForDeletionList.push(sharedUserGroupsPreservedList[r].PermissionId))})}}function resetPreRequestValues(){modifiedItemIndex=[];addNewItemPermission=[];userMarkedForDeletionList=[];groupMarkedForDeletionList=[]}function resetToActualScope(){var n=angular.element(manageUserGroupBodySection).scope();n.$apply(function(){angular.copy(sharedUserGroupsPreservedList,n.sharedUserGroups)});n.$apply(function(){angular.copy(sharedAccessModePreservedList,n.accessModes)});$(".change-access-mode-selection").selectpicker("refresh");$(".change-access-mode-selection .selectpicker").removeAttr("title");changeIndicatorBannerObj.css("visibility","hidden");resetPreRequestValues();$('[data-toggle="tooltip"]').tooltip();manageAccessSaveBtnObj.hide();manageAccessCancelBtnObj.hide();shareBtnObj.hide();shareDoneBtnObj.show()}function enableAutocompleteAccessModeSelectionWithoutReset(){autoCompleteControlEle.ejAutocomplete("enable");autoCompleteControlWrapperEle.find(".e-in-wrap.e-box.e-corner").removeClass("disable-autocomplete");accessModeSelectionInput.prop("disabled",!1);$(".selectpicker[data-id='access-mode-selection']").removeClass("disabled");$(".selectpicker[data-id='access-mode-selection']").removeClass("disable-autocomplete-access-mode-selection");accessModeSelectionInput.selectpicker("refresh")}function refreshAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("selectedIndex",0);accessModeSelectionInput.selectpicker("refresh")}function enableAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("disabled",!1);$(".selectpicker[data-id='access-mode-selection']").removeClass("disabled");$(".selectpicker[data-id='access-mode-selection']").removeClass("disable-autocomplete-access-mode-selection");refreshAutocompleteAccessModeSelection()}function disableAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("disabled",!0);$(".selectpicker[data-id='access-mode-selection']").addClass("disabled");$(".selectpicker[data-id='access-mode-selection']").addClass("disable-autocomplete-access-mode-selection");refreshAutocompleteAccessModeSelection()}function onSuggestionListOpen(){manageUserGroupContainer.addClass("disable-element-opacity")}function onSuggestionListClose(){autoCompleteInstance.getValue()==""&&manageUserGroupContainer.removeClass("disable-element-opacity")}function refreshUserGroupScroll(){var n,t;manageUserGroupBodySection.is(":visible")&&($(".tooltip").tooltip("hide"),n=225,manageUserGroupBodySection.ejScroller({height:n,width:"100%",scrollerSize:7,buttonSize:0,enableTouchScroll:!0,scrollOneStepBy:20,scroll:function(){$(".tooltip").tooltip("hide");$('[data-toggle="popover"]').popover("hide")}}),t=manageUserGroupBodySection.ejScroller("instance"),t.model.height=n,t.refresh(),$(".manage-user-group-body-section .e-scrollbar").show())}function generateEmbedCode(n){var t="",i;return currentItemDetail.ItemType==ItemType.ItemView?t=getDashboardShareLink(currentDashboardDetail.Id,currentDashboardDetail.CategoryName,currentDashboardDetail.Name)+"?viewid="+currentItemDetail.Id+"&isembed=true":n.ItemType==ItemType.Widget?(isWidget=!0,i=angular.element("#share-permission-content-section").scope(),i.$apply(function(){i.isDashboardPublic=n.IsPublic;i.currentItemType=n.ItemType}),sharePermissionDlgObj.show(),sharePermissionDlgObj.ejDialog("open"),sharePermissionDlgWrapperObj.ejWaitingPopup("show"),t=getDashboardShareLink(n.Id,n.CategoryName,n.Name)+"?isembed=true&isWidgetMode=true&WidgetId="+n.widgetId):t=getDashboardShareLink(n.Id,n.CategoryName,n.Name)+"?isembed=true",t+=$("#embed-dashboard-comments").is(":checked")?"&dashboard_comments=true":"",t+=$("#embed-widget-comments").is(":checked")?"&widget_comments=true":"",t+=$("#embed-views").is(":checked")?"&views=true":"",t+=$("#embed-export").is(":checked")?"&export=true":"","<iframe src='"+t+"' id='dashboard-frame' width='100%' height='600px' allowfullscreen frameborder='0'><\/iframe>"}var browser;!function(n){"use strict";function u(n,t){return n.toUpperCase().indexOf(t.toUpperCase())>-1}function i(t){return n.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],function(){t=t.replace(this.re,this.ch)}),t}function r(n){var i={"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(i).join("|")+")",u=new RegExp(r),f=new RegExp(r,"g"),t=null==n?"":""+n;return u.test(t)?t.replace(f,function(n){return i[n]}):t}function f(i,r){var u=arguments,o=i,i=u[0],r=u[1],f,e;return[].shift.apply(u),"undefined"==typeof i&&(i=o),e=this.each(function(){var s=n(this),e,o,h,c;if(s.is("select")){if(e=s.data("selectpicker"),o="object"==typeof i&&i,e){if(o)for(h in o)o.hasOwnProperty(h)&&(e.options[h]=o[h])}else c=n.extend({},t.DEFAULTS,n.fn.selectpicker.defaults||{},s.data(),o),s.data("selectpicker",e=new t(this,c,r));"string"==typeof i&&(f=e[i]instanceof Function?e[i].apply(e,u):e.options[i])}}),"undefined"!=typeof f?f:e}var t,e;Object.keys||(Object.keys=function(n,t,i){i=[];for(t in n)i.hasOwnProperty.call(n,t)&&i.push(t);return i});n.expr[":"].icontains=function(t,i,r){return u(n(t).text(),r[3])};n.expr[":"].aicontains=function(t,i,r){return u(n(t).data("normalizedText")||n(t).text(),r[3])};t=function(i,r,u){u&&(u.stopPropagation(),u.preventDefault());this.$element=n(i);this.$newElement=null;this.$button=null;this.$menu=null;this.$lis=null;this.options=r;null===this.options.title&&(this.options.title=this.$element.attr("title"));this.val=t.prototype.val;this.render=t.prototype.render;this.refresh=t.prototype.refresh;this.setStyle=t.prototype.setStyle;this.selectAll=t.prototype.selectAll;this.deselectAll=t.prototype.deselectAll;this.destroy=t.prototype.remove;this.remove=t.prototype.remove;this.show=t.prototype.show;this.hide=t.prototype.hide;this.init()};t.VERSION="1.6.3";t.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:function(n){return 1==n?"{0} item selected":"{0} items selected"},maxOptionsText:function(n,t){var i=[];return i[0]=1==n?"Limit reached ({n} item max)":"Limit reached ({n} items max)",i[1]=1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)",i},selectAllText:"Select All",deselectAllText:"Deselect All",multipleSeparator:", ",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,searchAccentInsensitive:!1};t.prototype={constructor:t,init:function(){var i=this,t=this.$element.attr("id");this.$element.hide();this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");this.$newElement=this.createView();this.$element.after(this.$newElement);this.$menu=this.$newElement.find("> .dropdown-menu");this.$button=this.$newElement.find("> button");this.$searchbox=this.$newElement.find("input");this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right");"undefined"!=typeof t&&(this.$button.attr("data-id",t),n('label[for="'+t+'"]').click(function(n){n.preventDefault();i.$button.focus()}));this.checkDisabled();this.clickListener();this.options.liveSearch&&this.liveSearchListener();this.render();this.liHeight();this.setStyle();this.setWidth();this.options.container&&this.selectPosition();this.$menu.data("this",this);this.$newElement.data("this",this);this.options.mobile&&this.mobile()},createDropdown:function(){var t=this.multiple?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",r=this.autofocus?" autofocus":"",u=this.$element.parents().hasClass("form-group-lg")?" btn-lg":this.$element.parents().hasClass("form-group-sm")?" btn-sm":"",f=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;<\/button>'+this.options.header+"<\/div>":"",e=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="input-block-level form-control" autocomplete="off" /><\/div>':"",o=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">'+this.options.selectAllText+'<\/button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">'+this.options.deselectAllText+"<\/button><\/div><\/div>":"",s='<div class="btn-group bootstrap-select'+t+i+'"><button type="button" class="btn dropdown-toggle selectpicker'+u+'" data-toggle="dropdown"'+r+'><span class="filter-option pull-left"><\/span>&nbsp;<span class="caret"><\/span><\/button><div class="dropdown-menu open">'+f+e+o+'<ul class="dropdown-menu inner selectpicker" role="menu"><\/ul><\/div><\/div>';return n(s)},createView:function(){var n=this.createDropdown(),t=this.createLi();return n.find("ul").append(t),n},reloadLi:function(){this.destroyLi();var n=this.createLi();this.$menu.find("ul").append(n)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var f=this,t=[],o=0,u=function(n,t,i){return"<li"+("undefined"!=typeof i?' class="'+i+'"':"")+("undefined"!=typeof t|null===t?' data-original-index="'+t+'"':"")+">"+n+"<\/li>"},e=function(n,t,u,e){var o=i(r(n));return'<a tabindex="0"'+("undefined"!=typeof t?' class="'+t+'"':"")+("undefined"!=typeof u?' style="'+u+'"':"")+("undefined"!=typeof e?'data-optgroup="'+e+'"':"")+' data-normalized-text="'+o+'">'+n+'<span class="'+f.options.iconBase+" "+f.options.tickIcon+' check-mark"><\/span><\/a>'};return this.$element.find("option").each(function(){var i=n(this),c=i.attr("class")||"",l=i.attr("style"),r=i.data("content")?i.data("content"):i.html(),y="undefined"!=typeof i.data("subtext")?'<small class="muted text-muted">'+i.data("subtext")+"<\/small>":"",h="undefined"!=typeof i.data("icon")?'<span class="'+f.options.iconBase+" "+i.data("icon")+'"><\/span> ':"",v=i.is(":disabled")||i.parent().is(":disabled"),s=i[0].index;if(""!==h&&v&&(h="<span>"+h+"<\/span>"),i.data("content")||(r=h+'<span class="text">'+r+y+"<\/span>"),!f.options.hideDisabled||!v)if(i.parent().is("optgroup")&&i.data("divider")!==!0){if(0===i.index()){o+=1;var a=i.parent().attr("label"),p="undefined"!=typeof i.parent().data("subtext")?'<small class="muted text-muted">'+i.parent().data("subtext")+"<\/small>":"",w=i.parent().data("icon")?'<span class="'+f.options.iconBase+" "+i.parent().data("icon")+'"><\/span> ':"";a=w+'<span class="text">'+a+p+"<\/span>";0!==s&&t.length>0&&t.push(u("",null,"divider"));t.push(u(a,null,"dropdown-header"))}t.push(u(e(r,"opt "+c,l,o),s))}else t.push(i.data("divider")===!0?u("",s,"divider"):i.data("hidden")===!0?u(e(r,c,l),s,"hide is-hidden"):u(e(r,c,l),s))}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),n(t.join(""))},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(t){var i=this,e,s,h;t!==!1&&this.$element.find("option").each(function(t){i.setDisabled(t,n(this).is(":disabled")||n(this).parent().is(":disabled"));i.setSelected(t,n(this).is(":selected"))});this.tabIndex();var o=this.options.hideDisabled?":not([disabled])":"",u=this.$element.find("option:selected"+o).map(function(){var r,t=n(this),u=t.data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+t.data("icon")+'"><\/i> ':"";return r=i.options.showSubtext&&t.attr("data-subtext")&&!i.multiple?' <small class="muted text-muted">'+t.data("subtext")+"<\/small>":"",t.data("content")&&i.options.showContent?t.data("content"):"undefined"!=typeof t.attr("title")?t.attr("title"):u+t.html()+r}).toArray(),f=this.multiple?u.join(this.options.multipleSeparator):u[0];this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1&&(e=this.options.selectedTextFormat.split(">"),(e.length>1&&u.length>e[1]||1==e.length&&u.length>=2)&&(o=this.options.hideDisabled?", [disabled]":"",s=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+o).length,h="function"==typeof this.options.countSelectedText?this.options.countSelectedText(u.length,s):this.options.countSelectedText,f=h.replace("{0}",u.length.toString()).replace("{1}",s.toString())));this.options.title=this.$element.attr("title");"static"==this.options.selectedTextFormat&&(f=this.options.title);f||(f="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText);this.$button.attr("title",r(f));this.$newElement.find(".filter-option").html(f)},setStyle:function(n,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var i=n?n:this.options.style;"add"==t?this.$button.addClass(i):"remove"==t?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(){if(this.options.size!==!1){var t=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),n=t.addClass("open").find("> .dropdown-menu"),i=n.find("li").not(".divider").not(".dropdown-header").filter(":visible").children("a").outerHeight(),r=this.options.header?n.find(".popover-title").outerHeight():0,u=this.options.liveSearch?n.find(".bs-searchbox").outerHeight():0,f=this.options.actionsBox?n.find(".bs-actionsbox").outerHeight():0;t.remove();this.$newElement.data("liHeight",i).data("headerHeight",r).data("searchHeight",u).data("actionsHeight",f)}},setSize:function(){var e,b,k;this.findLis();var i,u,o,r=this,t=this.$menu,a=t.find(".inner"),d=this.$newElement.outerHeight(),v=this.$newElement.data("liHeight"),h=this.$newElement.data("headerHeight"),c=this.$newElement.data("searchHeight"),l=this.$newElement.data("actionsHeight"),g=this.$lis.filter(".divider").outerHeight(!0),f=parseInt(t.css("padding-top"))+parseInt(t.css("padding-bottom"))+parseInt(t.css("border-top-width"))+parseInt(t.css("border-bottom-width")),y=this.options.hideDisabled?", .disabled":"",p=n(window),s=f+parseInt(t.css("margin-top"))+parseInt(t.css("margin-bottom"))+2,w=function(){u=r.$newElement.offset().top-p.scrollTop();o=p.height()-u-d};(w(),this.options.header&&t.css("padding-top",0),"auto"==this.options.size)?(e=function(){var n,e=r.$lis.not(".hide");w();i=o-s;r.options.dropupAuto&&r.$newElement.toggleClass("dropup",u>o&&i-s<t.height());r.$newElement.hasClass("dropup")&&(i=u-s);n=e.length+e.filter(".dropdown-header").length>3?3*v+s-2:0;t.css({"max-height":i+"px",overflow:"hidden","min-height":n+h+c+l+"px"});a.css({"max-height":i-h-c-l-f+"px","overflow-y":"auto","min-height":Math.max(n-f,0)+"px"})},e(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",e),n(window).off("resize.getSize").on("resize.getSize",e),n(window).off("scroll.getSize").on("scroll.getSize",e)):this.options.size&&"auto"!=this.options.size&&t.find("li"+y).length>this.options.size&&(b=this.$lis.not(".divider"+y).find(" > *").slice(0,this.options.size).last().parent().index(),k=this.$lis.slice(0,b+1).filter(".divider").length,i=v*this.options.size+k*g+f,r.options.dropupAuto&&this.$newElement.toggleClass("dropup",u>o&&i<t.height()),t.css({"max-height":i+h+c+l+"px",overflow:"hidden"}),a.css({"max-height":i-f+"px","overflow-y":"auto"}))},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var n=this.$newElement.clone().appendTo("body"),t=n.find("> .dropdown-menu").css("width"),i=n.css("width","auto").find("> button").css("width");n.remove();this.$newElement.css("width",Math.max(parseInt(t),parseInt(i))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var r,f,t=this,i=n("<div />"),u=function(n){i.addClass(n.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",n.hasClass("dropup"));r=n.offset();f=n.hasClass("dropup")?0:n[0].offsetHeight;i.css({top:r.top+f,left:r.left,width:n[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){t.isDisabled()||(u(n(this)),i.appendTo(t.options.container),i.toggleClass("open",!n(this).hasClass("open")),i.append(t.$menu))});n(window).resize(function(){u(t.$newElement)});n(window).on("scroll",function(){u(t.$newElement)});n("html").on("click",function(r){n(r.target).closest(t.$newElement).length<1&&i.removeClass("open")})},setSelected:function(n,t){this.findLis();this.$lis.filter('[data-original-index="'+n+'"]').toggleClass("selected",t)},setDisabled:function(n,t){this.findLis();t?this.$lis.filter('[data-original-index="'+n+'"]').addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):this.$lis.filter('[data-original-index="'+n+'"]').removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var n=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1==this.$button.attr("tabindex")&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex")));this.$button.click(function(){return!n.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var t=this;this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(n){n.stopPropagation()});this.$newElement.on("click",function(){t.setSize();t.options.liveSearch||t.multiple||setTimeout(function(){t.$menu.find(".selected a").focus()},10)});this.$menu.on("click","li a",function(i){var s=n(this),e=s.parent().data("originalIndex"),k=t.$element.val(),d=t.$element.prop("selectedIndex"),a,v,b;if(i.preventDefault(),!t.isDisabled()&&!s.parent().hasClass("disabled")){var h=t.$element.find("option"),f=h.eq(e),w=f.prop("selected"),l=f.parent("optgroup"),r=t.options.maxOptions,u=l.data("maxOptions")||!1;if(t.multiple){if((f.prop("selected",!w),t.setSelected(e,!w),s.blur(),r!==!1||u!==!1)&&(a=r<h.filter(":selected").length,v=u<l.find("option:selected").length,r&&a||u&&v))if(r&&1==r)h.prop("selected",!1),f.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(e,!0);else if(u&&1==u)l.find("option:selected").prop("selected",!1),f.prop("selected",!0),b=s.data("optgroup"),t.$menu.find(".selected").has('a[data-optgroup="'+b+'"]').removeClass("selected"),t.setSelected(e,!0);else{var o="function"==typeof t.options.maxOptionsText?t.options.maxOptionsText(r,u):t.options.maxOptionsText,y=o[0].replace("{n}",r),p=o[1].replace("{n}",u),c=n('<div class="notify"><\/div>');o[2]&&(y=y.replace("{var}",o[2][r>1?0:1]),p=p.replace("{var}",o[2][u>1?0:1]));f.prop("selected",!1);t.$menu.append(c);r&&a&&(c.append(n("<div>"+y+"<\/div>")),t.$element.trigger("maxReached.bs.select"));u&&v&&(c.append(n("<div>"+p+"<\/div>")),t.$element.trigger("maxReachedGrp.bs.select"));setTimeout(function(){t.setSelected(e,!1)},10);c.delay(750).fadeOut(300,function(){n(this).remove()})}}else h.prop("selected",!1),f.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(e,!0);t.multiple?t.options.liveSearch&&t.$searchbox.focus():t.$button.focus();(k!=t.$element.val()&&t.multiple||d!=t.$element.prop("selectedIndex")&&!t.multiple)&&t.$element.change()}});this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(n){n.target==this&&(n.preventDefault(),n.stopPropagation(),t.options.liveSearch?t.$searchbox.focus():t.$button.focus())});this.$menu.on("click","li.divider, li.dropdown-header",function(n){n.preventDefault();n.stopPropagation();t.options.liveSearch?t.$searchbox.focus():t.$button.focus()});this.$menu.on("click",".popover-title .close",function(){t.$button.focus()});this.$searchbox.on("click",function(n){n.stopPropagation()});this.$menu.on("click",".actions-btn",function(i){t.options.liveSearch?t.$searchbox.focus():t.$button.focus();i.preventDefault();i.stopPropagation();n(this).is(".bs-select-all")?t.selectAll():t.deselectAll();t.$element.change()});this.$element.change(function(){t.render(!1)})},liveSearchListener:function(){var t=this,u=n('<li class="no-results"><\/li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){t.$menu.find(".active").removeClass("active");t.$searchbox.val()&&(t.$searchbox.val(""),t.$lis.not(".is-hidden").removeClass("hide"),u.parent().length&&u.remove());t.multiple||t.$menu.find(".selected").addClass("active");setTimeout(function(){t.$searchbox.focus()},10)});this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(n){n.stopPropagation()});this.$searchbox.on("input propertychange change keyup copy paste cut click mouseup",function(){var f=t.$searchbox.val();f?(t.options.searchAccentInsensitive?t.$lis.not(".is-hidden").removeClass("hide").find("a").not(":aicontains("+i(t.$searchbox.val())+")").parent().addClass("hide"):t.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+t.$searchbox.val()+")").parent().addClass("hide"),t.$menu.find("li").filter(":visible:not(.no-results)").length?u.parent().length&&u.remove():(u.parent().length&&u.remove(),u.html(t.options.noneResultsText+' "'+r(t.$searchbox.val())+'"').show(),t.$menu.find("li").last().after(u))):(t.$lis.not(".is-hidden").removeClass("hide"),u.parent().length&&u.remove());t.$menu.find("li.active").removeClass("active");t.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus();n(this).focus();""!==f&&setTimeout(function(){var n=t.$searchbox.val();""===n&&t.$searchbox.trigger("propertychange")},0)})},val:function(n){return"undefined"!=typeof n?(this.$element.val(n),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis();this.$lis.not(".divider").not(".disabled").not(".selected").filter(":visible").find("a").click()},deselectAll:function(){this.findLis();this.$lis.not(".divider").not(".disabled").filter(".selected").filter(":visible").find("a").click()},keydown:function(t){var f,r,h,c,l,y,p,b,s,e=n(this),a=e.is("input")?e.parent().parent():e.parent(),u=a.data("this"),w={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},o,k,v;(u.options.liveSearch&&(a=e.parent().parent()),u.options.container&&(a=u.$menu),f=n("[role=menu] li a",a),s=u.$menu.parent().hasClass("open"),!s&&/([0-9]|[A-z])/.test(String.fromCharCode(t.keyCode))&&(u.options.container?u.$newElement.trigger("click"):(u.setSize(),u.$menu.parent().addClass("open"),s=!0),u.$searchbox.focus()),u.options.liveSearch&&(/(^9$|27)/.test(t.keyCode.toString(10))&&s&&0===u.$menu.find(".active").length&&(t.preventDefault(),u.$menu.parent().removeClass("open"),u.$button.focus()),f=n("[role=menu] li:not(.divider):not(.dropdown-header):visible",a),e.val()||/(38|40)/.test(t.keyCode.toString(10))||0===f.filter(".active").length&&(f=u.$newElement.find("li").filter(u.options.searchAccentInsensitive?":aicontains("+i(w[t.keyCode])+")":":icontains("+w[t.keyCode]+")"))),f.length)&&(/(38|40)/.test(t.keyCode.toString(10))?(r=f.index(f.filter(":focus")),c=f.parent(":not(.disabled):visible").first().index(),l=f.parent(":not(.disabled):visible").last().index(),h=f.eq(r).parent().nextAll(":not(.disabled):visible").eq(0).index(),y=f.eq(r).parent().prevAll(":not(.disabled):visible").eq(0).index(),p=f.eq(h).parent().prevAll(":not(.disabled):visible").eq(0).index(),u.options.liveSearch&&(f.each(function(t){n(this).is(":not(.disabled)")&&n(this).data("index",t)}),r=f.index(f.filter(".active")),c=f.filter(":not(.disabled):visible").first().data("index"),l=f.filter(":not(.disabled):visible").last().data("index"),h=f.eq(r).nextAll(":not(.disabled):visible").eq(0).data("index"),y=f.eq(r).prevAll(":not(.disabled):visible").eq(0).data("index"),p=f.eq(h).prevAll(":not(.disabled):visible").eq(0).data("index")),b=e.data("prevIndex"),38==t.keyCode&&(u.options.liveSearch&&(r-=1),r!=p&&r>y&&(r=y),c>r&&(r=c),r==b&&(r=l)),40==t.keyCode&&(u.options.liveSearch&&(r+=1),-1==r&&(r=0),r!=p&&h>r&&(r=h),r>l&&(r=l),r==b&&(r=c)),e.data("prevIndex",r),u.options.liveSearch?(t.preventDefault(),e.is(".dropdown-toggle")||(f.removeClass("active"),f.eq(r).addClass("active").find("a").focus(),e.focus())):f.eq(r).focus()):e.is("input")||(v=[],f.each(function(){n(this).parent().is(":not(.disabled)")&&n.trim(n(this).text().toLowerCase()).substring(0,1)==w[t.keyCode]&&v.push(n(this).parent().index())}),o=n(document).data("keycount"),o++,n(document).data("keycount",o),k=n.trim(n(":focus").text().toLowerCase()).substring(0,1),k!=w[t.keyCode]?(o=1,n(document).data("keycount",o)):o>=v.length&&(n(document).data("keycount",0),o>v.length&&(o=1)),f.eq(v[o-1]).focus()),(/(13|32)/.test(t.keyCode.toString(10))||/(^9$)/.test(t.keyCode.toString(10))&&u.options.selectOnTab)&&s&&(/(32)/.test(t.keyCode.toString(10))||t.preventDefault(),u.options.liveSearch?/(32)/.test(t.keyCode.toString(10))||(u.$menu.find(".active a").click(),e.focus()):n(":focus").click(),n(document).data("keycount",0)),(/(^9$|27)/.test(t.keyCode.toString(10))&&s&&(u.multiple||u.options.liveSearch)||/(27)/.test(t.keyCode.toString(10))&&!s)&&(u.$menu.parent().removeClass("open"),u.$button.focus()))},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement);this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null;this.reloadLi();this.render();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},update:function(){this.reloadLi();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove();this.$element.remove()}};e=n.fn.selectpicker;n.fn.selectpicker=f;n.fn.selectpicker.Constructor=t;n.fn.selectpicker.noConflict=function(){return n.fn.selectpicker=e,this};n(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",t.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",function(n){n.stopPropagation()});n(window).on("load.bs.select.data-api",function(){n(".selectpicker").each(function(){var t=n(this);f.call(t,t.data())})})}(jQuery);browser=ej.browserInfo();$(document).on("click","#item-link-copy",function(){$("#item-link").select();/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").attr("data-original-title","")):(document.execCommand("copy"),$("#item-link-copy").attr("data-original-title",window.Server.App.LocalizationContent.Copysuccess),$("#item-link-copy").tooltip("hide").attr("data-original-title",window.Server.App.LocalizationContent.Copysuccess).tooltip("fixTitle").tooltip("show"),setTimeout(function(){$("#item-link-copy").attr("data-original-title",window.Server.App.LocalizationContent.LinkCopy);$("#item-link-copy").tooltip()},3e3))});var isWidget=!1,sharePermissionDlgObj="",sharePermissionDlgWrapperObj="",sharePermisisonDlgHeader="",sharePermissionDlgHeaderItemName="",sharePermissionConatiner="",accessModeContainer="",dummyContainer="",embedCodeContainer="",sharePermissionDashboardSettingSectionObj="",sharePermissionPublicSectionObj="",sharePermissionPrivateSectionObj="",sharePermissionUserGroupSectionObj="",manageUserGroupContainer="",manageUserGroupBodySection="",getEmbedLinkSection="",embedConfiguration="",changeIndicatorBannerObj="",shareWithLabelObj="",getLinkInputObj="",getLinkCopyLinkobj="",getEmbedCodeInputObj="",getEmbedCodeCopyBtnobj="",accessModeChangeLink="",manageAccessButton="",manageAccessBackButton="",manageAccessSaveBtnObj="",manageAccessCancelBtnObj="",shareDoneBtnObj="",shareBtnObj="",accessModeChngBtnObj="",accessModeCancelBtnObj="",embedCodeDoneBtnObj="",embedCodeBackButton="",publicRadioBtnObj="",privateRadioBtnObj="",isItemPublic=!1,isEntireDOMRendered=!1,accessModeSelectionInput="",sharedUserGroupsPreservedList=[],sharedAccessModePreservedList=[],markForDeleteBtnObj="",removeMarkForDeleteBtnObj="",toggleMarkForDeletionObj="",modifiedItemIndex=[],addNewItemPermission=[],userMarkedForDeletionList=[],groupMarkedForDeletionList=[],showSharedUserGroupContainer="",showSharedUserGroupNameSection="",showSharedUserGroupName="",showSharedUserGroupCountSection="",showSharedUserGroupCount="",currentItemDetail=[],currentDashboardDetail=[],shareItem=angular.module("serverApp");shareItem.controller("shareItemController",["$scope",function(n){n.currentUserId=window.currentUserId;n.sharedUserGroups=window.sharedUserGroupList;n.accessModes=window.accessModeList;n.showPopover=!1;n.currentItemType=ItemType.Dashboard;n.isAdmin=!1;n.isDashboardPublic=!1;n.formatAccessModeString=function(n){return n.toString()};n.ImageLink=function(n){return idpUrl+"/User/Avatar?id="+n+"&ImageSize=64"};var t=["#4FDFDB","#BDDF4F","#F3DF4C","#FC9C61","#CBA6FF","#77BDFF"];n.GetGroupColor=function(n,i){var r=t[(i+1)%t.length-1];return n!=""?{"background-color":"#dfdfdf"}:{"background-color":"#dfdfdf"}};n.typeOptions=[{Key:2,Value:"Read"}];n.parseInt=function(n){return parseInt(n,10)};n.updateValue=function(t,i){n.CheckForModification(t,i)};n.MarkForDeletion=function(t,i,r){n.AddItemInUserGroupDeletionList(r);n.RemoveFromModified(r);var u=angular.element(t.currentTarget).parents(".shared-user-group-list-section").children();u.find(".action-for-delete-container").hide();u.find(".marked-for-delete-container").show();u.find(".change-indicator").show();n.ShowChangeIndicatorBanner()};n.RemoveMarkForDeletion=function(t,i,r){n.RemoveItemInUserGroupDeletionList(r);var u=angular.element(t.currentTarget).parents(".shared-user-group-list-section").children();u.find(".marked-for-delete-container").hide();u.find(".action-for-delete-container").show();u.find(".change-indicator").hide();n.CheckForModification(i,r)};n.CheckForModification=function(t,i){currentItemDetail.ItemType!=ItemType.ItemView&&(sharedUserGroupsPreservedList[i].PermissionAccess!=t?(n.AddToModified(i),$("#select_"+i).parents(".shared-user-group-list-section").children().find(".change-indicator").show()):sharedUserGroupsPreservedList[i].PermissionAccess==t&&(n.RemoveFromModified(i),$("#select_"+i).parents(".shared-user-group-list-section").children().find(".change-indicator").hide()),n.ShowChangeIndicatorBanner())};n.ShowChangeIndicatorBanner=function(){$(".change-indicator").is(":visible")?(changeIndicatorBannerObj.css("visibility","visible"),manageAccessSaveBtnObj.show(),manageAccessCancelBtnObj.show(),shareDoneBtnObj.hide(),disableAutomCompleteControl(),disableAutocompleteAccessModeSelection()):(changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareDoneBtnObj.show(),enableAutomCompleteControl(),enableAutocompleteAccessModeSelection())};n.AddItemInUserGroupDeletionList=function(t){n.IsUserItem(t)?jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,userMarkedForDeletionList)==-1&&userMarkedForDeletionList.push(sharedUserGroupsPreservedList[t].PermissionId):n.IsGroupItem(t)&&jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,groupMarkedForDeletionList)==-1&&groupMarkedForDeletionList.push(sharedUserGroupsPreservedList[t].PermissionId)};n.RemoveItemInUserGroupDeletionList=function(t){n.IsUserItem(t)?jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,userMarkedForDeletionList)!=-1&&(userMarkedForDeletionList=jQuery.grep(userMarkedForDeletionList,function(n){return n!=sharedUserGroupsPreservedList[t].PermissionId})):n.IsGroupItem(t)&&jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,groupMarkedForDeletionList)!=-1&&(groupMarkedForDeletionList=jQuery.grep(groupMarkedForDeletionList,function(n){return n!=sharedUserGroupsPreservedList[t].PermissionId}))};n.AddToModified=function(n){jQuery.inArray(n,modifiedItemIndex)==-1&&modifiedItemIndex.push(n)};n.RemoveFromModified=function(n){modifiedItemIndex=jQuery.grep(modifiedItemIndex,function(t){return t!=n})};n.IsUserItem=function(n){return sharedUserGroupsPreservedList[n].Email!=null&&sharedUserGroupsPreservedList[n].IsUserPermission&&sharedUserGroupsPreservedList[n].TargetUserId>0};n.IsGroupItem=function(n){return sharedUserGroupsPreservedList[n].Email==null&&!sharedUserGroupsPreservedList[n].IsUserPermission&&sharedUserGroupsPreservedList[n].TargetGroupId>0};n.GetManagePermisisionContent=function(t){var i=window.Server.App.LocalizationContent.AccessPermission,r,u;return n.IsUserItem(t)?(i=i+window.Server.App.LocalizationContent.UserPermission+"<strong>"+sharedUserGroupsPreservedList[t].PermissionEntityDescription+"<\/strong>.<\/br><\/br>",isAdmin?(r=editUserPermissionUrl+"?userId="+sharedUserGroupsPreservedList[t].TargetUserId,i+window.Server.App.LocalizationContent.ManageUserPermission+"<a target='_blank' href='"+r+"'>"+window.Server.App.LocalizationContent.Here+"<\/a >."):i+window.Server.App.LocalizationContent.AccessUserpermission):(i=i+window.Server.App.LocalizationContent.GroupPermission+"<strong>"+sharedUserGroupsPreservedList[t].PermissionEntityDescription+"<\/strong>.<\/br><\/br>",isAdmin?(u=editGroupPermissionUrl+"?groupId="+sharedUserGroupsPreservedList[t].TargetGroupId,i+window.Server.App.LocalizationContent.ManageGroupPermission+"<a target='_blank' href='"+u+"'>"+window.Server.App.LocalizationContent.Here+"<\/a>."):i+window.Server.App.LocalizationContent.AccessGroupPermission)}}]);$(function(){var n,t;sharePermissionDlgObj=$("#share-permission-popup");sharePermisisonDlgHeader=$("#share-permission-dialog-header");sharePermissionDlgHeaderItemName=$(".item-name-container #item-name-header");sharePermissionConatiner=$("#share-permission-container");accessModeContainer=$("#access-mode-container");dummyContainer=$("#dummy-container");embedCodeContainer=$("#get-embed-code-container");sharePermissionDashboardSettingSectionObj=$(".share-permission-dashboard-setting-section");sharePermissionPublicSectionObj=$(".share-permission-public-section");sharePermissionPrivateSectionObj=$(".share-permission-private-section");sharePermissionUserGroupSectionObj=$("#assign-user-group-container");manageUserGroupContainer=$("#manage-user-group-container");manageUserGroupBodySection=$(".manage-user-group-body-section");getEmbedLinkSection=$(".get-item-embed-link-section");embedConfiguration=$(".embed-configuration");changeIndicatorBannerObj=$(".changes-indicator-banner");shareWithLabelObj=$(".share-with-label");getLinkInputObj=$("#item-url");getLinkCopyLinkobj=$("#item-url-copy");getEmbedCodeInputObj=$("#embed-code");getEmbedCodeCopyBtnobj=$("#copy-embed-code");accessModeChangeLink=$("#access-mode-change-link");manageAccessButton=$("#manage-access-button");manageAccessBackButton=$("#manage-access-back-button");manageAccessSaveBtnObj=$("#manage-access-save-button");manageAccessCancelBtnObj=$("#manage-access-cancel-button");shareDoneBtnObj=$("#share-done-popup-button");shareBtnObj=$("#share-permission-button");accessModeChngBtnObj=$("#access-mode-change-button");accessModeCancelBtnObj=$("#access-mode-cancel-button");embedCodeDoneBtnObj=$("#copy-embed-code-done-button");embedCodeBackButton=$("#copy-embed-code-back-button");publicRadioBtnObj=$("#public-access-mode");privateRadioBtnObj=$("#private-access-mode");accessModeSelectionInput=$("#access-mode-selection");markForDeleteBtnObj=$(".mark-for-deletion-icon");removeMarkForDeleteBtnObj=$(".remove-mark-for-deletion-icon");showSharedUserGroupContainer=$("#show-shared-user-group-container");showSharedUserGroupNameSection=$(".shared-user-group-name-section");showSharedUserGroupName=$(".shared-user-group-name");showSharedUserGroupCountSection=$(".shared-user-group-count-section");showSharedUserGroupCount=$(".shared-user-group-count");toggleMarkForDeletionObj=$(".action-for-delete-container, .marked-for-delete-container");$("#permission-popup").ejDialog({showOnInit:!1,allowDraggable:!0,enableResize:!1,width:"900px",title:"",showHeader:!1,enableModal:!0,close:"DialogBoxClose",closeOnEscape:!0});n=createLoader("permission-popup_wrapper");$("#permission-popup_wrapper").ejWaitingPopup({template:$("#"+n)});sharePermissionDlgObj.ejDialog({width:"529px",showOnInit:!1,allowDraggable:!1,enableResize:!1,showHeader:!1,enableModal:!0,closeOnEscape:!1,close:"onSharePermissionPopupClose",open:"onSharePermissionPopupOpen",closeOnEscape:!0});sharePermissionDlgWrapperObj=$("#share-permission-popup_wrapper");t=createLoader("share-permission-popup_wrapper");sharePermissionDlgWrapperObj.ejWaitingPopup({template:$("#"+t)});$("#share-close-popup, #share-done-popup-button").on("click",function(){sharePermissionDlgObj.ejDialog("close");isWidget&&(sharePermissionConatiner.show(),embedCodeContainer.hide(),embedConfiguration.show(),manageAccessButton.hide(),isWidget=!1)});accessModeCancelBtnObj.on("click",function(){showSharePermissionContainer()});manageAccessButton.on("click",function(){showManageAccessContainer()});manageAccessBackButton.on("click",function(){showSharePermissionContainerWithRefresh()});manageAccessSaveBtnObj.on("click",function(){$('[data-toggle="popover"]').popover("hide");sharePermissionDlgWrapperObj.ejWaitingPopup("show");prepareRequestForAddItemPermission();updateBulkItemPermission()});manageAccessCancelBtnObj.on("click",function(){manageAccessCancelBtn()});getLinkCopyLinkobj.on("click",function(){getLinkInputObj.select();/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?getLinkCopyLinkobj.attr("data-original-title",""):(document.execCommand("copy"),getLinkCopyLinkobj.attr("data-original-title",window.Server.App.LocalizationContent.Copysuccess),getLinkCopyLinkobj.tooltip("hide").attr("data-original-title",window.Server.App.LocalizationContent.Copysuccess).tooltip("fixTitle").tooltip("show"),setTimeout(function(){getLinkCopyLinkobj.attr("data-original-title",window.Server.App.LocalizationContent.LinkCopy);getLinkCopyLinkobj.tooltip()},3e3))});getLinkCopyLinkobj.removeClass("focusdiv");getLinkInputObj.on("focusin",function(){getLinkCopyLinkobj.addClass("focusdiv")});getLinkInputObj.on("focusout",function(){getLinkCopyLinkobj.removeClass("focusdiv")});$("input[type=radio][name=access-mode]").on("change",function(){isItemPublic&&privateRadioBtnObj.prop("checked")||!isItemPublic&&publicRadioBtnObj.prop("checked")?accessModeChngBtnObj.removeAttr("disabled"):accessModeChngBtnObj.attr("disabled",!0)});$(document).on("click","#access-mode-change-button",function(){var t=$(this).attr("data-item-id"),i=$(this).attr("data-name"),r=$(this).attr("data-itemtype"),n="";isItemPublic&&privateRadioBtnObj.prop("checked")?n=removeItemPublicUrl:!isItemPublic&&publicRadioBtnObj.prop("checked")&&(n=makeItemPublicUrl);$.ajax({type:"POST",url:n,data:{itemId:t,itemTypeId:r,itemName:i},success:function(n){n.validation&&n.result?(typeof ResetItemList=="function"&&ResetItemList(ItemType.Dashboard),typeof currentItemDetail!="undefined"&&typeof currentItemDetail.IsPublic!="undefined"&&(currentItemDetail.IsPublic=!currentItemDetail.IsPublic)):WarningAlert("",window.Server.App.LocalizationContent.InternalServerError,7e3)},error:function(){WarningAlert("",window.Server.App.LocalizationContent.InternalServerError,7e3)}});isItemPublic&&privateRadioBtnObj.prop("checked")?(showSharePermissionContainer(),showPrivateContent(),isItemPublic=!1):!isItemPublic&&publicRadioBtnObj.prop("checked")&&(showSharePermissionContainer(),showPublicContent(),isItemPublic=!0)});$(document).on("shown.bs.dropdown",".user-group-scroll-content .change-access-mode-select",function(){if($(".tooltip").hide(),$(this).find(".change-access-mode-selection").length>0){var n=manageUserGroupBodySection,i=$(this).offset().top+$(this).outerHeight(!0)/2-n.offset().top,r=n.height()-($(this).offset().top-n.offset().top+$(this).outerHeight(!0)/2),t=$(this).find(".change-access-mode-selection .dropdown-menu").outerHeight(!0);r<=t&&i>=t?$(this).find(".change-access-mode-selection").removeClass("dropdown").addClass("dropup"):refreshUserGroupScroll()}});$.views.helpers({getUserGroupLogo:function(n){return n=="user"?"<img src='' alt='Profile Picture' id='' onerror='' >":"<div class='group-logo' style=''> <i class='su su-group-1'><\/i><\/div >"}});$("body").on("click",function(n){$(n.target).data("toggle")!=="popover"&&$(n.target).parents('[data-toggle="popover"]').length===0&&$(n.target).parents(".popover.in").length===0?$('[data-toggle="popover"]').popover("hide"):$(n.target).data("toggle")=="popover"&&$(".access-info-icon").not(n.target).popover("hide")});getEmbedCodeInputObj.on("click",function(){getEmbedCodeInputObj.select()});getEmbedCodeCopyBtnobj.on("click",function(){getEmbedCodeInputObj.select();document.execCommand("copy");var n=$(".embed-copy-success");n.show();setTimeout(function(){n.fadeOut(3e3)},3e3)});embedCodeDoneBtnObj.on("click",function(){sharePermissionDlgObj.ejDialog("close")});embedCodeBackButton.on("click",function(){showSharePermissionContainerWithRefresh()});$(".embed-configuration [type='checkbox']").on("change",function(){$("#embed-code").val(generateEmbedCode(currentItemDetail))})})