!function(e,t){void 0===e&&void 0!==window&&(e=window),"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){!function(y){"use strict";var M=["sanitize","whiteList","sanitizeFn"],U=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],z=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,G=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,N=["title","placeholder"];function O(e,t,i){if(i&&"function"==typeof i)return i(e);for(var s=Object.keys(t),o=0,n=e.length;o<n;o++)for(var r=e[o].querySelectorAll("*"),a=0,d=r.length;a<d;a++){var c=r[a],l=c.nodeName.toLowerCase();if(-1!==s.indexOf(l))for(var p=[].slice.call(c.attributes),h=[].concat(t["*"]||[],t[l]||[]),u=0,m=p.length;u<m;u++){var g=p[u];!function(e,t){var i=e.nodeName.toLowerCase();if(-1!==y.inArray(i,t))return-1===y.inArray(i,U)||Boolean(e.nodeValue.match(z)||e.nodeValue.match(G));for(var s=y(t).filter(function(e,t){return t instanceof RegExp}),o=0,n=s.length;o<n;o++)if(i.match(s[o]))return 1}(g,h)&&c.removeAttribute(g.nodeName)}else c.parentNode.removeChild(c)}}function l(t){var i,s={};return N.forEach(function(e){(i=t.attr(e))&&(s[e]=i)}),!s.placeholder&&s.title&&(s.placeholder=s.title),s}if(!("classList"in document.createElement("_"))){var e=window;if("Element"in e){var t="classList",i="prototype",s=e.Element[i],o=Object,n=function(){var i=y(this);return{add:function(e){return e=Array.prototype.slice.call(arguments).join(" "),i.addClass(e)},remove:function(e){return e=Array.prototype.slice.call(arguments).join(" "),i.removeClass(e)},toggle:function(e,t){return i.toggleClass(e,t)},contains:function(e){return i.hasClass(e)}}};if(o.defineProperty){var r={get:n,enumerable:!0,configurable:!0};try{o.defineProperty(s,t,r)}catch(e){void 0!==e.number&&-2146823252!==e.number||(r.enumerable=!1,o.defineProperty(s,t,r))}}else o[i].__defineGetter__&&s.__defineGetter__(t,n)}}var a,d,c,p,r=document.createElement("_");function h(e){if(null==this)throw new TypeError;var t=String(this);if(e&&"[object RegExp]"==a.call(e))throw new TypeError;var i=t.length,s=String(e),o=s.length,e=1<arguments.length?arguments[1]:void 0,e=e?Number(e):0,n=(e!=e&&(e=0),Math.min(Math.max(e,0),i));if(i<o+n)return!1;for(var r=-1;++r<o;)if(t.charCodeAt(n+r)!=s.charCodeAt(r))return!1;return!0}function k(){var e=this.selectpicker.main.data.filter(function(e){return!(!e.selected||this.options.hideDisabled&&e.disabled)},this);if(this.options.source.data&&!this.multiple&&1<e.length){for(var t=0;t<e.length-1;t++)e[t].selected=!1;e=[e[e.length-1]]}return e}function D(e){for(var t,i=[],s=e||k.call(this),o=0,n=s.length;o<n;o++)(t=s[o]).disabled||i.push(void 0===t.value?t.text:t.value);return this.multiple?i:i.length?i[0]:null}r.classList.add("c1","c2"),r.classList.contains("c2")||(d=DOMTokenList.prototype.add,c=DOMTokenList.prototype.remove,DOMTokenList.prototype.add=function(){Array.prototype.forEach.call(arguments,d.bind(this))},DOMTokenList.prototype.remove=function(){Array.prototype.forEach.call(arguments,c.bind(this))}),r.classList.toggle("c3",!1),r.classList.contains("c3")&&(p=DOMTokenList.prototype.toggle,DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:p.call(this,e)}),r=null,String.prototype.startsWith||(a={}.toString,Object.defineProperty?Object.defineProperty(String.prototype,"startsWith",{value:h,configurable:!0,writable:!0}):String.prototype.startsWith=h);var u={useDefault:!1,_set:y.valHooks.select.set},$=(y.valHooks.select.set=function(e,t){return t&&!u.useDefault&&y(e).data("selected",!0),u._set.apply(this,arguments)},null),W=function(){try{return new Event("change"),!0}catch(e){return!1}}();function v(e,t,i,s){for(var o=["display","subtext","tokens"],n=!1,r=0;r<o.length;r++){var a=o[r],d=e[a];if(d&&(d=d.toString(),"display"===a&&(d=d.replace(/<[^>]+>/g,"")),d=(d=s?m(d):d).toUpperCase(),n="function"==typeof i?i(d,t):"contains"===i?0<=d.indexOf(t):d.startsWith(t)))break}return n}function b(e){return parseInt(e,10)||0}y.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent&&(W?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),i.dispatchEvent(t))};var H={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},R=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]","g");function V(e){return H[e]}function m(e){return(e=e.toString())&&e.replace(R,V).replace(_,"")}function w(e){return f.test(e=null==e?"":""+e)?e.replace(I,F):e}var g,f,I;g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},o="(?:"+Object.keys(g).join("|")+")",f=RegExp(o),I=RegExp(o,"g");function F(e){return g[e]}var q={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},C=window.Dropdown||bootstrap.Dropdown;function S(){var t;try{t=y.fn.dropdown.Constructor.VERSION}catch(e){t=C.VERSION}return t}var P={success:!1,major:"3"};try{P.full=(S()||"").split(" ")[0].split("."),P.major=P.full[0],P.success=!0}catch(e){}var A=0,x=".bs.select",B={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title",ICONBASE:"glyphicon",TICKICON:"glyphicon-ok"},j={MENU:"."+B.MENU,DATA_TOGGLE:'data-toggle="dropdown"'},L={div:document.createElement("div"),span:document.createElement("span"),i:document.createElement("i"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode(" "),fragment:document.createDocumentFragment(),option:document.createElement("option")},Q=(L.selectedOption=L.option.cloneNode(!1),L.selectedOption.setAttribute("selected",!0),L.noResults=L.li.cloneNode(!1),L.noResults.className="no-results",L.a.setAttribute("role","option"),L.a.className="dropdown-item",L.subtext.className="text-muted",L.text=L.span.cloneNode(!1),L.text.className="text",L.checkMark=L.span.cloneNode(!1),new RegExp("38|40")),K=new RegExp("^9$|27"),T={li:function(e,t,i){var s=L.li.cloneNode(!1);return e&&(1===e.nodeType||11===e.nodeType?s.appendChild(e):s.innerHTML=e),void 0!==t&&""!==t&&(s.className=t),null!=i&&s.classList.add("optgroup-"+i),s},a:function(e,t,i){var s=L.a.cloneNode(!0);return e&&(11===e.nodeType?s.appendChild(e):s.insertAdjacentHTML("beforeend",e)),void 0!==t&&""!==t&&s.classList.add.apply(s.classList,t.split(/\s+/)),i&&s.setAttribute("style",i),s},text:function(e,t){var i,s,o=L.text.cloneNode(!1);if(e.content?o.innerHTML=e.content:(o.textContent=e.text,e.icon&&(s=L.whitespace.cloneNode(!1),(i=(!0===t?L.i:L.span).cloneNode(!1)).className=this.options.iconBase+" "+e.icon,L.fragment.appendChild(i),L.fragment.appendChild(s)),e.subtext&&((i=L.subtext.cloneNode(!1)).textContent=e.subtext,o.appendChild(i))),!0===t)for(;0<o.childNodes.length;)L.fragment.appendChild(o.childNodes[0]);else L.fragment.appendChild(o);return L.fragment},label:function(e){var t,i,s=L.text.cloneNode(!1);return s.innerHTML=e.display,e.icon&&(i=L.whitespace.cloneNode(!1),(t=L.span.cloneNode(!1)).className=this.options.iconBase+" "+e.icon,L.fragment.appendChild(t),L.fragment.appendChild(i)),e.subtext&&((t=L.subtext.cloneNode(!1)).textContent=e.subtext,s.appendChild(t)),L.fragment.appendChild(s),L.fragment}},J={fromOption:function(e,t){var i;switch(t){case"divider":i="true"===e.getAttribute("data-divider");break;case"text":i=e.textContent;break;case"label":i=e.label;break;case"style":i=e.style.cssText;break;case"content":case"tokens":case"subtext":case"icon":i=e.getAttribute("data-"+t)}return i},fromDataSource:function(e,t){var i;switch(t){case"text":case"label":i=e.text||e.value||"";break;case"divider":case"style":case"content":case"tokens":case"subtext":case"icon":i=e[t]}return i}};function Y(e,t){e.length||(L.noResults.innerHTML=this.options.noneResultsText.replace("{0}",'"'+w(t)+'"'),this.$menuInner[0].firstChild.appendChild(L.noResults))}function Z(e){return!(e.hidden||this.options.hideDisabled&&e.disabled)}function E(e,t){var i=this;u.useDefault||(y.valHooks.select.set=u._set,u.useDefault=!0),this.$element=y(e),this.$newElement=null,this.$button=null,this.$menu=null,this.options=t,this.selectpicker={main:{optionQueue:L.fragment.cloneNode(!1)},search:{},current:{},view:{},isSearching:!1,keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout(function(){i.selectpicker.keydown.keyHistory=""},800)}}}},this.sizeInfo={},"number"==typeof(e=this.options.windowPadding)&&(this.options.windowPadding=[e,e,e,e]),this.val=E.prototype.val,this.render=E.prototype.render,this.refresh=E.prototype.refresh,this.setStyle=E.prototype.setStyle,this.selectAll=E.prototype.selectAll,this.deselectAll=E.prototype.deselectAll,this.destroy=E.prototype.destroy,this.remove=E.prototype.remove,this.show=E.prototype.show,this.hide=E.prototype.hide,this.init()}function X(e){var a,d=arguments,c=e;if([].shift.apply(d),!P.success){try{P.full=(S()||"").split(" ")[0].split(".")}catch(e){E.BootstrapVersion?P.full=E.BootstrapVersion.split(" ")[0].split("."):(P.full=[P.major,"0","0"],console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",e))}P.major=P.full[0],P.success=!0}if("4"<=P.major){var t=[];E.DEFAULTS.style===B.BUTTONCLASS&&t.push({name:"style",className:"BUTTONCLASS"}),E.DEFAULTS.iconBase===B.ICONBASE&&t.push({name:"iconBase",className:"ICONBASE"}),E.DEFAULTS.tickIcon===B.TICKICON&&t.push({name:"tickIcon",className:"TICKICON"}),B.DIVIDER="dropdown-divider",B.SHOW="show",B.BUTTONCLASS="btn-light",B.POPOVERHEADER="popover-header",B.ICONBASE="",B.TICKICON="bs-ok-default";for(var i=0;i<t.length;i++)E.DEFAULTS[(e=t[i]).name]=B[e.className]}"4"<P.major&&(j.DATA_TOGGLE='data-bs-toggle="dropdown"');var s=this.each(function(){var e=y(this);if(e.is("select")){var t=e.data("selectpicker"),i="object"==typeof c&&c;if(i.title&&(i.placeholder=i.title),t){if(i)for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t.options[s]=i[s])}else{var o,n=e.data();for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&-1!==y.inArray(o,M)&&delete n[o];var r=y.extend({},E.DEFAULTS,y.fn.selectpicker.defaults||{},l(e),n,i);r.template=y.extend({},E.DEFAULTS.template,y.fn.selectpicker.defaults?y.fn.selectpicker.defaults.template:{},n.template,i.template),e.data("selectpicker",t=new E(this,r))}"string"==typeof c&&(a=t[c]instanceof Function?t[c].apply(t,d):t.options[c])}});return void 0!==a?a:s}E.VERSION="1.14.0-beta2",E.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",source:{},chunkSize:40,doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:B.BUTTONCLASS,size:"auto",title:null,placeholder:null,allowClear:!1,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:B.ICONBASE,tickIcon:B.TICKICON,showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1,sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role","tabindex","style",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},E.prototype={constructor:E,init:function(){var i=this,e=this.$element.attr("id"),t=this.$element[0],s=t.form;A++,this.selectId="bs-select-"+A,t.classList.add("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),t.classList.contains("show-tick")&&(this.options.showTick=!0),this.$newElement=this.createDropdown(),this.$element.after(this.$newElement).prependTo(this.$newElement),s&&null===t.form&&(s.id||(s.id="form-"+this.selectId),t.setAttribute("form",s.id)),this.$button=this.$newElement.children("button"),this.options.allowClear&&(this.$clearButton=this.$button.children(".bs-select-clear-selected")),this.$menu=this.$newElement.children(j.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),t.classList.remove("bs-select-hidden"),this.fetchData(function(){i.render(!0),i.buildList(),requestAnimationFrame(function(){i.$element.trigger("loaded"+x)})}),this.fetchData(function(){i.render(!0),i.buildList(),requestAnimationFrame(function(){i.$element.trigger("loaded"+x)})}),!0===this.options.dropdownAlignRight&&this.$menu[0].classList.add(B.MENURIGHT),void 0!==e&&this.$button.attr("data-id",e),this.checkDisabled(),this.clickListener(),4<P.major&&(this.dropdown=new C(this.$button[0])),this.options.liveSearch?(this.liveSearchListener(),this.focusedParent=this.$searchbox[0]):this.focusedParent=this.$menuInner[0],this.setStyle(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide"+x,function(){var e,t;i.isVirtual()&&(t=(e=i.$menuInner[0]).firstChild.cloneNode(!1),e.replaceChild(t,e.firstChild),e.scrollTop=0)}),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){i.$element.trigger("hide"+x,e)},"hidden.bs.dropdown":function(e){i.$element.trigger("hidden"+x,e)},"show.bs.dropdown":function(e){i.$element.trigger("show"+x,e)},"shown.bs.dropdown":function(e){i.$element.trigger("shown"+x,e)}}),t.hasAttribute("required")&&this.$element.on("invalid"+x,function(){i.$button[0].classList.add("bs-invalid"),i.$element.on("shown"+x+".invalid",function(){i.$element.val(i.$element.val()).off("shown"+x+".invalid")}).on("rendered"+x,function(){this.validity.valid&&i.$button[0].classList.remove("bs-invalid"),i.$element.off("rendered"+x)}),i.$button.on("blur"+x,function(){i.$element.trigger("focus").trigger("blur"),i.$button.off("blur"+x)})}),s&&y(s).on("reset"+x,function(){requestAnimationFrame(function(){i.render()})})},createDropdown:function(){var e=this.multiple||this.options.showTick?" show-tick":"",t=this.multiple?' aria-multiselectable="true"':"",i="",s=this.autofocus?" autofocus":"";P.major<4&&this.$element.parent().hasClass("input-group")&&(i=" input-group-btn");var o="",n="",r="",a="",d="";return this.options.header&&(o='<div class="'+B.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),this.options.liveSearch&&(n='<div class="bs-searchbox"><input type="search" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+w(this.options.liveSearchPlaceholder)+'"')+' role="combobox" aria-label="Search" aria-controls="'+this.selectId+'" aria-autocomplete="list"></div>'),this.multiple&&this.options.actionsBox&&(r='<div class="bs-actionsbox"><div class="btn-group btn-group-sm"><button type="button" class="actions-btn bs-select-all btn '+B.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+B.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(a='<div class="bs-donebutton"><div class="btn-group"><button type="button" class="btn btn-sm '+B.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),this.options.allowClear&&(d='<span class="close bs-select-clear-selected" title="'+this.options.deselectAllText+'"><span>&times;</span>'),e='<div class="dropdown bootstrap-select'+e+i+'"><button type="button" tabindex="-1" class="'+this.options.styleBase+' dropdown-toggle" '+("static"===this.options.display?'data-display="static"':"")+j.DATA_TOGGLE+s+' role="combobox" aria-owns="'+this.selectId+'" aria-haspopup="listbox" aria-expanded="false"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner">&nbsp;</div></div> </div>'+d+"</span>"+("4"<=P.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+B.MENU+" "+("4"<=P.major?"":B.SHOW)+'">'+o+n+r+'<div class="inner '+B.SHOW+'" role="listbox" id="'+this.selectId+'" tabindex="-1" '+t+'><ul class="'+B.MENU+" inner "+("4"<=P.major?B.SHOW:"")+'" role="presentation"></ul></div>'+a+"</div></div>",y(e)},setPositionData:function(){this.selectpicker.view.canHighlight=[],this.selectpicker.view.size=0,this.selectpicker.view.firstHighlightIndex=!1;for(var e=0;e<this.selectpicker.current.data.length;e++){var t=this.selectpicker.current.data[e],i=!0;"divider"===t.type?(i=!1,t.height=this.sizeInfo.dividerHeight):"optgroup-label"===t.type?(i=!1,t.height=this.sizeInfo.dropdownHeaderHeight):t.height=this.sizeInfo.liHeight,t.disabled&&(i=!1),this.selectpicker.view.canHighlight.push(i),i&&(this.selectpicker.view.size++,t.posinset=this.selectpicker.view.size,!1===this.selectpicker.view.firstHighlightIndex)&&(this.selectpicker.view.firstHighlightIndex=e),t.position=(0===e?0:this.selectpicker.current.data[e-1].position)+t.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.data.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(k,e,t){var D,$,C=this,i=0,S=[];function P(e,t){var i,s=C.selectpicker.current.data.length,o=[],n=!0,r=C.isVirtual();C.selectpicker.view.scrollTop=e;for(var a,d=C.options.chunkSize,c=Math.ceil(s/d)||1,l=0;l<c;l++){var p=l===c-1?s:(l+1)*d;if(o[l]=[l*d+(l?1:0),p],!s)break;void 0===i&&e-1<=C.selectpicker.current.data[p-1].position-C.sizeInfo.menuInnerHeight&&(i=l)}if(void 0===i&&(i=0),f=[C.selectpicker.view.position0,C.selectpicker.view.position1],h=Math.max(0,i-1),m=Math.min(c-1,i+1),C.selectpicker.view.position0=!1!==r&&Math.max(0,o[h][0])||0,C.selectpicker.view.position1=!1===r?s:Math.min(s,o[m][1])||0,h=f[0]!==C.selectpicker.view.position0||f[1]!==C.selectpicker.view.position1,void 0!==C.activeIndex&&($=(C.selectpicker.main.data[C.prevActiveIndex]||{}).element,S=(C.selectpicker.main.data[C.activeIndex]||{}).element,D=(C.selectpicker.main.data[C.selectedIndex]||{}).element,t&&(C.activeIndex!==C.selectedIndex&&C.defocusItem(S),C.activeIndex=void 0),C.activeIndex)&&C.activeIndex!==C.selectedIndex&&C.defocusItem(D),void 0!==C.prevActiveIndex&&C.prevActiveIndex!==C.activeIndex&&C.prevActiveIndex!==C.selectedIndex&&C.defocusItem($),t||h){if(m=C.selectpicker.view.visibleElements?C.selectpicker.view.visibleElements.slice():[],C.selectpicker.view.visibleElements=!1===r?C.selectpicker.current.elements:C.selectpicker.current.elements.slice(C.selectpicker.view.position0,C.selectpicker.view.position1),C.setOptionStatus(),(k||!1===r&&t)&&(f=m,a=C.selectpicker.view.visibleElements,n=!(f.length===a.length&&f.every(function(e,t){return e===a[t]}))),(t||!0===r)&&n){var h=C.$menuInner[0],u=document.createDocumentFragment(),m=h.firstChild.cloneNode(!1),g=C.selectpicker.view.visibleElements,b=[];h.replaceChild(m,h.firstChild);for(var f,l=0,v=g.length;l<v;l++){var I,w,y=g[l];C.options.sanitize&&(I=y.lastChild)&&(w=C.selectpicker.current.data[l+C.selectpicker.view.position0])&&w.content&&!w.sanitized&&(b.push(I),w.sanitized=!0),u.appendChild(y)}C.options.sanitize&&b.length&&O(b,C.options.whiteList,C.options.sanitizeFn),!0===r?(f=0===C.selectpicker.view.position0?0:C.selectpicker.current.data[C.selectpicker.view.position0-1].position,n=C.selectpicker.view.position1>s-1?0:C.selectpicker.current.data[s-1].position-C.selectpicker.current.data[C.selectpicker.view.position1-1].position,h.firstChild.style.marginTop=f+"px",h.firstChild.style.marginBottom=n+"px"):(h.firstChild.style.marginTop=0,h.firstChild.style.marginBottom=0),h.firstChild.appendChild(u),!0===r&&C.sizeInfo.hasScrollBar&&(m=h.firstChild.offsetWidth,t&&m<C.sizeInfo.menuInnerInnerWidth&&C.sizeInfo.totalMenuWidth>C.sizeInfo.selectWidth?h.firstChild.style.minWidth=C.sizeInfo.menuInnerInnerWidth+"px":m>C.sizeInfo.menuInnerInnerWidth&&(C.$menu[0].style.minWidth=0,(f=h.firstChild.offsetWidth)>C.sizeInfo.menuInnerInnerWidth&&(C.sizeInfo.menuInnerInnerWidth=f,h.firstChild.style.minWidth=C.sizeInfo.menuInnerInnerWidth+"px"),C.$menu[0].style.minWidth=""))}(!k&&C.options.source.load||k&&C.options.source.search)&&i===c-1&&C.fetchData(function(){C.render(),C.buildList(s,k),C.setPositionData(),P(e)},k?"search":"load",i+1,k?C.selectpicker.search.previousValue:void 0)}C.prevActiveIndex=C.activeIndex,C.options.liveSearch?k&&t&&(C.selectpicker.view.canHighlight[n=0]||(n=1+C.selectpicker.view.canHighlight.slice(1).indexOf(!0)),r=C.selectpicker.view.visibleElements[n],C.defocusItem(C.selectpicker.view.currentActive),C.activeIndex=(C.selectpicker.current.data[n]||{}).index,C.focusItem(r)):C.$menuInner.trigger("focus")}this.selectpicker.isSearching=k,this.selectpicker.current=k?this.selectpicker.search:this.selectpicker.main,this.setPositionData(),e&&(t?i=this.$menuInner[0].scrollTop:C.multiple||"number"==typeof(t=((e=C.$element[0]).options[e.selectedIndex]||{}).liIndex)&&!1!==C.options.size&&(t=(e=C.selectpicker.main.data[t])&&e.position)&&(i=t-(C.sizeInfo.menuInnerHeight+C.sizeInfo.liHeight)/2)),P(i,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",function(e,t){C.noScroll||P(this.scrollTop,t),C.noScroll=!1}),y(window).off("resize"+x+"."+this.selectId+".createView").on("resize"+x+"."+this.selectId+".createView",function(){C.$newElement.hasClass(B.SHOW)&&P(C.$menuInner[0].scrollTop)})},focusItem:function(e,t,i){var s;e&&(t=t||this.selectpicker.main.data[this.activeIndex],s=e.firstChild)&&(s.setAttribute("aria-setsize",this.selectpicker.view.size),s.setAttribute("aria-posinset",t.posinset),!0!==i)&&(this.focusedParent.setAttribute("aria-activedescendant",s.id),e.classList.add("active"),s.classList.add("active"))},defocusItem:function(e){e&&(e.classList.remove("active"),e.firstChild)&&e.firstChild.classList.remove("active")},setPlaceholder:function(){var e,t,i,s,o,n,r,a=this,d=!1;return!this.options.placeholder&&!this.options.allowClear||this.multiple||(this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option")),e=this.$element[0],t=!(d=!0),i=!this.selectpicker.view.titleOption.parentNode,s=e.selectedIndex,o=e.options[s],n=(n=e.querySelector("select > *:not(:disabled)"))?n.index:0,r=(r=window.performance&&window.performance.getEntriesByType("navigation"))&&r.length?"back_forward"!==r[0].type:2!==window.performance.navigation.type,i&&(this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",t=!o||s===n&&!1===o.defaultSelected&&void 0===this.$element.data("selected")),!i&&0===this.selectpicker.view.titleOption.index||e.insertBefore(this.selectpicker.view.titleOption,e.firstChild),t&&r?e.selectedIndex=0:"complete"!==document.readyState&&window.addEventListener("pageshow",function(){a.selectpicker.view.displayedValue!==e.value&&a.render()})),d},fetchData:function(t,i,e,s){i=i||"data";var o,n=this,r=this.options.source[i];r?(this.options.virtualScroll=!0,"function"==typeof r?r.call(this,function(e){o=n.buildData(e,i),t.call(n,o)},e,s):Array.isArray(r)&&(o=n.buildData(r,i),t.call(n,o))):(o=this.buildData(!1,i),t.call(n,o))},buildData:function(p,e){var h=!1===p?J.fromOption:J.fromDataSource,u=':not([hidden]):not([data-hidden="true"])',m=[],n=0,g=0,b=this.setPlaceholder()&&!p?1:0,t=("load"===e?n=this.selectpicker.main.data.length:"search"===e&&(n=this.selectpicker.search.data.length),this.options.hideDisabled&&(u+=":not(:disabled)"),p?p.filter(Z,this):this.$element[0].querySelectorAll("select > *"+u));function f(e){var t=m[m.length-1];t&&"divider"===t.type&&(t.optID||e.optID)||((e=e||{}).type="divider",m.push(e))}function v(e,t){var i,s,o;(t=t||{}).divider=h(e,"divider"),!0===t.divider?f({optID:t.optID}):(i=m.length+n,s=(s=h(e,"style"))?w(s):"",o=(e.className||"")+(t.optgroupClass||""),t.optID&&(o="opt "+o),t.optionClass=o.trim(),t.inlineStyle=s,t.text=h(e,"text"),t.content=h(e,"content"),t.tokens=h(e,"tokens"),t.subtext=h(e,"subtext"),t.icon=h(e,"icon"),t.display=t.content||t.text,t.value=void 0===e.value?e.text:e.value,t.type="option",t.index=i,t.option=e.option||e,t.option.liIndex=i,t.selected=!!e.selected,t.disabled=t.disabled||!!e.disabled,m.push(t))}function i(e,t){var i=t[e],s=!(e-1<b)&&t[e-1],t=t[e+1],o=p?i.children.filter(Z,this):i.querySelectorAll("option"+u);if(o.length){var n,r,a={display:w(h(I,"label")),subtext:h(i,"subtext"),icon:h(i,"icon"),type:"optgroup-label",optgroupClass:" "+(i.className||"")};g++,s&&f({optID:g}),a.optID=g,m.push(a);for(var d=0,c=o.length;d<c;d++){var l=o[d];0===d&&(r=(n=m.length-1)+c),v(l,{headerIndex:n,lastIndex:r,optID:a.optID,optgroupClass:a.optgroupClass,disabled:i.disabled})}t&&f({optID:g})}}for(var s=t.length,o=b;o<s;o++){var I=t[o],r=I.children;r&&r.length?i.call(this,b,t):v.call(this,I,{})}switch(e){case"data":this.selectpicker.main.data=this.selectpicker.current.data=m;break;case"load":Array.prototype.push.apply(this.selectpicker.main.data,m),this.selectpicker.current.data=this.selectpicker.main.data;break;case"search":Array.prototype.push.apply(this.selectpicker.search.data,m)}return m},buildList:function(e,t){var i=this,s=(t?this.selectpicker.search:this.selectpicker.main).data,o=[],n=0;!i.options.showTick&&!i.multiple||L.checkMark.parentNode||(L.checkMark.className=this.options.iconBase+" "+i.options.tickIcon+" check-mark",L.a.appendChild(L.checkMark));for(var r=s.length,a=e||0;a<r;a++){p=d=l=c=void 0;var d,c=o,l=s[a],p=0;switch(l.type){case"divider":d=T.li(!1,B.DIVIDER,l.optID?l.optID+"div":void 0);break;case"option":(d=T.li(T.a(T.text.call(i,l),l.optionClass,l.inlineStyle),"",l.optID)).firstChild&&(d.firstChild.id=i.selectId+"-"+l.index);break;case"optgroup-label":d=T.li(T.label.call(i,l),"dropdown-header"+l.optgroupClass,l.optID)}l.element=d,c.push(d),l.display&&(p+=l.display.length),l.subtext&&(p+=l.subtext.length),l.icon&&(p+=1),n<p&&(n=p,i.selectpicker.view.widestOption=c[c.length-1])}e?t?Array.prototype.push.apply(this.selectpicker.search.elements,o):(Array.prototype.push.apply(this.selectpicker.main.elements,o),this.selectpicker.current.elements=this.selectpicker.main.elements):t?this.selectpicker.search.elements=o:this.selectpicker.main.elements=this.selectpicker.current.elements=o},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(e){var i=this,t=this.$element[0],s=this.setPlaceholder()&&0===t.selectedIndex,o=k.call(this),n=o.length,r=D.call(this,o),a=this.$button[0],d=a.querySelector(".filter-option-inner-inner"),c=document.createTextNode(this.options.multipleSeparator),l=L.fragment.cloneNode(!1),p=!1;if(this.options.source.data&&e&&(o.map(function e(t){t.selected?i.createOption(t,!0):t.children&&t.children.length&&t.children.map(e)}),t.appendChild(this.selectpicker.main.optionQueue),s=s&&0===t.selectedIndex),a.classList.toggle("bs-placeholder",i.multiple?!n:!r&&0!==r),i.multiple||1!==o.length||(i.selectpicker.view.displayedValue=r),"static"===this.options.selectedTextFormat)l=T.text.call(this,{text:this.options.placeholder},!0);else if(!1===(this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")&&1<n&&(1<(e=this.options.selectedTextFormat.split(">")).length&&n>e[1]||1===e.length&&2<=n))){if(!s){for(var h=0;h<n&&h<50;h++){var u=o[h],m={};u&&(this.multiple&&0<h&&l.appendChild(c.cloneNode(!1)),u.title?m.text=u.title:u.content&&i.options.showContent?(m.content=u.content.toString(),p=!0):(i.options.showIcon&&(m.icon=u.icon),i.options.showSubtext&&!i.multiple&&u.subtext&&(m.subtext=" "+u.subtext),m.text=u.text.trim()),l.appendChild(T.text.call(this,m,!0)))}49<n&&l.appendChild(document.createTextNode("..."))}}else var t=':not([hidden]):not([data-hidden="true"]):not([data-divider="true"])',r=(this.options.hideDisabled&&(t+=":not(:disabled)"),this.$element[0].querySelectorAll("select > option"+t+", optgroup"+t+" option"+t).length),e="function"==typeof this.options.countSelectedText?this.options.countSelectedText(n,r):this.options.countSelectedText,l=T.text.call(this,{text:e.replace("{0}",n.toString()).replace("{1}",r.toString())},!0);l.childNodes.length||(l=T.text.call(this,{text:this.options.placeholder||this.options.noneSelectedText},!0)),a.title=l.textContent.replace(/<[^>]*>?/g,"").trim(),this.options.sanitize&&p&&O([l],i.options.whiteList,i.options.sanitizeFn),d.innerHTML="",d.appendChild(l),P.major<4&&this.$newElement[0].classList.contains("bs3-has-addon")&&(s=a.querySelector(".filter-expand"),(t=d.cloneNode(!0)).className="filter-expand",s?a.replaceChild(t,s):a.appendChild(t)),this.$element.trigger("rendered"+x)},setStyle:function(e,t){var i=this.$button[0],s=this.$newElement[0],o=this.options.style.trim();this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,"")),P.major<4&&(s.classList.add("bs3"),s.parentNode.classList)&&s.parentNode.classList.contains("input-group")&&(s.previousElementSibling||s.nextElementSibling)&&(s.previousElementSibling||s.nextElementSibling).classList.contains("input-group-addon")&&s.classList.add("bs3-has-addon"),s=e?e.trim():o,"add"==t?s&&i.classList.add.apply(i.classList,s.split(" ")):"remove"==t?s&&i.classList.remove.apply(i.classList,s.split(" ")):(o&&i.classList.remove.apply(i.classList,o.split(" ")),s&&i.classList.add.apply(i.classList,s.split(" ")))},liHeight:function(e){if(e||!1!==this.options.size&&!Object.keys(this.sizeInfo).length){var t,e=L.div.cloneNode(!1),i=L.div.cloneNode(!1),s=L.div.cloneNode(!1),o=document.createElement("ul"),n=L.li.cloneNode(!1),r=L.li.cloneNode(!1),a=L.a.cloneNode(!1),d=L.span.cloneNode(!1),c=this.options.header&&0<this.$menu.find("."+B.POPOVERHEADER).length?this.$menu.find("."+B.POPOVERHEADER)[0].cloneNode(!0):null,l=this.options.liveSearch?L.div.cloneNode(!1):null,p=this.options.actionsBox&&this.multiple&&0<this.$menu.find(".bs-actionsbox").length?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,h=this.options.doneButton&&this.multiple&&0<this.$menu.find(".bs-donebutton").length?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,u=this.$element[0].options[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,d.className="text",a.className="dropdown-item "+(u?u.className:""),e.className=this.$menu[0].parentNode.className+" "+B.SHOW,e.style.width=0,"auto"===this.options.width&&(i.style.minWidth=0),i.className=B.MENU+" "+B.SHOW,s.className="inner "+B.SHOW,o.className=B.MENU+" inner "+("4"<=P.major?B.SHOW:""),n.className=B.DIVIDER,r.className="dropdown-header",d.appendChild(document.createTextNode("​")),this.selectpicker.current.data.length)for(var m=0;m<this.selectpicker.current.data.length;m++){var g=this.selectpicker.current.data[m];if("option"===g.type){t=g.element;break}}else t=L.li.cloneNode(!1),a.appendChild(d),t.appendChild(a);r.appendChild(d.cloneNode(!0)),this.selectpicker.view.widestOption&&o.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),o.appendChild(t),o.appendChild(n),o.appendChild(r),c&&i.appendChild(c),l&&(u=document.createElement("input"),l.className="bs-searchbox",u.className="form-control",l.appendChild(u),i.appendChild(l)),p&&i.appendChild(p),s.appendChild(o),i.appendChild(s),h&&i.appendChild(h),e.appendChild(i),document.body.appendChild(e);a=t.offsetHeight,d=r?r.offsetHeight:0,u=c?c.offsetHeight:0,o=l?l.offsetHeight:0,r=p?p.offsetHeight:0,c=h?h.offsetHeight:0,l=y(n).outerHeight(!0),p=window.getComputedStyle(i),h=i.offsetWidth,n={vert:b(p.paddingTop)+b(p.paddingBottom)+b(p.borderTopWidth)+b(p.borderBottomWidth),horiz:b(p.paddingLeft)+b(p.paddingRight)+b(p.borderLeftWidth)+b(p.borderRightWidth)},p={vert:n.vert+b(p.marginTop)+b(p.marginBottom)+2,horiz:n.horiz+b(p.marginLeft)+b(p.marginRight)+2};s.style.overflowY="scroll",s=i.offsetWidth-h,document.body.removeChild(e),this.sizeInfo.liHeight=a,this.sizeInfo.dropdownHeaderHeight=d,this.sizeInfo.headerHeight=u,this.sizeInfo.searchHeight=o,this.sizeInfo.actionsHeight=r,this.sizeInfo.doneButtonHeight=c,this.sizeInfo.dividerHeight=l,this.sizeInfo.menuPadding=n,this.sizeInfo.menuExtras=p,this.sizeInfo.menuWidth=h,this.sizeInfo.menuInnerInnerWidth=h-n.horiz,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=s,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var e,t=y(window),i=this.$newElement.offset(),s=y(this.options.container),s=(this.options.container&&s.length&&!s.is("body")?((e=s.offset()).top+=parseInt(s.css("borderTopWidth")),e.left+=parseInt(s.css("borderLeftWidth"))):e={top:0,left:0},this.options.windowPadding);this.sizeInfo.selectOffsetTop=i.top-e.top-t.scrollTop(),this.sizeInfo.selectOffsetBot=t.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-e.top-s[2],this.sizeInfo.selectOffsetLeft=i.left-e.left-t.scrollLeft(),this.sizeInfo.selectOffsetRight=t.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-e.left-s[1],this.sizeInfo.selectOffsetTop-=s[0],this.sizeInfo.selectOffsetLeft-=s[3]},setMenuSize:function(e){this.getSelectPosition();var t,i,s,o,n,r,a=this.sizeInfo.selectWidth,d=this.sizeInfo.liHeight,c=this.sizeInfo.headerHeight,l=this.sizeInfo.searchHeight,p=this.sizeInfo.actionsHeight,h=this.sizeInfo.doneButtonHeight,u=this.sizeInfo.dividerHeight,m=this.sizeInfo.menuPadding,g=0;if(this.options.dropupAuto&&(r=d*this.selectpicker.current.data.length+m.vert,r=this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&r+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot,!0===this.selectpicker.isSearching&&(r=this.selectpicker.dropup),this.$newElement.toggleClass(B.DROPUP,r),this.selectpicker.dropup=r),"auto"===this.options.size)r=3<this.selectpicker.current.data.length?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0,i=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,s=r+c+l+p+h,n=Math.max(r-m.vert,0),t=(o=i=this.$newElement.hasClass(B.DROPUP)?this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert:i)-c-l-p-h-m.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var b=0;b<this.options.size;b++)"divider"===this.selectpicker.current.data[b].type&&g++;t=(i=d*this.options.size+g*u+m.vert)-m.vert,o=i+c+l+p+h,s=n=""}this.$menu.css({"max-height":o+"px",overflow:"hidden","min-height":s+"px"}),this.$menuInner.css({"max-height":t+"px","overflow-y":"auto","min-height":n+"px"}),this.sizeInfo.menuInnerHeight=Math.max(t,1),this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth),"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(B.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-a),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(e){var t,i;this.liHeight(e),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size&&(t=this,i=y(window),this.setMenuSize(),this.options.liveSearch&&this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",function(){return t.setMenuSize()}),"auto"===this.options.size?i.off("resize"+x+"."+this.selectId+".setMenuSize scroll"+x+"."+this.selectId+".setMenuSize").on("resize"+x+"."+this.selectId+".setMenuSize scroll"+x+"."+this.selectId+".setMenuSize",function(){return t.setMenuSize()}):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&i.off("resize"+x+"."+this.selectId+".setMenuSize scroll"+x+"."+this.selectId+".setMenuSize")),this.createView(!1,!0,e)},setWidth:function(){var i=this;"auto"===this.options.width?requestAnimationFrame(function(){i.$menu.css("min-width","0"),i.$element.on("loaded"+x,function(){i.liHeight(),i.setMenuSize();var e=i.$newElement.clone().appendTo("body"),t=e.css("width","auto").children("button").outerWidth();e.remove(),i.sizeInfo.selectWidth=Math.max(i.sizeInfo.totalMenuWidth,t),i.$newElement.css("width",i.sizeInfo.selectWidth+"px")})}):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement[0].classList.remove("fit-width")},selectPosition:function(){function e(e){var t={},i=r.options.display||!!y.fn.dropdown.Constructor.Default&&y.fn.dropdown.Constructor.Default.display;r.$bsContainer.addClass(e.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(B.DROPUP,e.hasClass(B.DROPUP)),s=e.offset(),a.is("body")?o={top:0,left:0}:((o=a.offset()).top+=parseInt(a.css("borderTopWidth"))-a.scrollTop(),o.left+=parseInt(a.css("borderLeftWidth"))-a.scrollLeft()),n=e.hasClass(B.DROPUP)?0:e[0].offsetHeight,(P.major<4||"static"===i)&&(t.top=s.top-o.top+n,t.left=s.left-o.left),t.width=e[0].offsetWidth,r.$bsContainer.css(t)}this.$bsContainer=y('<div class="bs-container" />');var s,o,n,r=this,a=y(this.options.container);this.$button.on("click.bs.dropdown.data-api",function(){r.isDisabled()||(e(r.$newElement),r.$bsContainer.appendTo(r.options.container).toggleClass(B.SHOW,!r.$button.hasClass(B.SHOW)).append(r.$menu))}),y(window).off("resize"+x+"."+this.selectId+" scroll"+x+"."+this.selectId).on("resize"+x+"."+this.selectId+" scroll"+x+"."+this.selectId,function(){r.$newElement.hasClass(B.SHOW)&&e(r.$newElement)}),this.$element.on("hide"+x,function(){r.$menu.data("height",r.$menu.height()),r.$bsContainer.detach()})},createOption:function(e,t){var i,s=e.option||e;s&&1!==s.nodeType&&(i=(t?L.selectedOption:L.option).cloneNode(!0),void 0!==s.value&&(i.value=s.value),i.textContent=s.text,i.selected=!0,void 0!==s.liIndex?i.liIndex=s.liIndex:t||(i.liIndex=e.index),e.option=i,this.selectpicker.main.optionQueue.appendChild(i))},setOptionStatus:function(e){var t=this;if(t.noScroll=!1,t.selectpicker.view.visibleElements&&t.selectpicker.view.visibleElements.length){for(var i=0;i<t.selectpicker.view.visibleElements.length;i++){var s=t.selectpicker.current.data[i+t.selectpicker.view.position0];s.option&&(!0!==e&&t.setDisabled(s),t.setSelected(s))}this.options.source.data&&this.$element[0].appendChild(this.selectpicker.main.optionQueue)}},setSelected:function(e,t){t=void 0===t?e.selected:t;var i,s=e.index,o=e.element,n=void 0!==this.activeIndex,r=this.activeIndex===s||t&&!this.multiple&&!n;o&&(void 0!==t&&(e.selected=t,e.option)&&(e.option.selected=t),t&&this.options.source.data&&this.createOption(e,!1),i=o.firstChild,t&&(this.selectedIndex=s),o.classList.toggle("selected",t),r?(this.focusItem(o,e),this.selectpicker.view.currentActive=o,this.activeIndex=s):this.defocusItem(o),i&&(i.classList.toggle("selected",t),t?i.setAttribute("aria-selected",!0):this.multiple?i.setAttribute("aria-selected",!1):i.removeAttribute("aria-selected")),r||n||!t||void 0===this.prevActiveIndex||(e=this.selectpicker.main.elements[this.prevActiveIndex],this.defocusItem(e)))},setDisabled:function(e){var t,i=e.disabled,e=e.element;e&&(t=e.firstChild,e.classList.toggle(B.DISABLED,i),t)&&("4"<=P.major&&t.classList.toggle(B.DISABLED,i),i?(t.setAttribute("aria-disabled",i),t.setAttribute("tabindex",-1)):(t.removeAttribute("aria-disabled"),t.setAttribute("tabindex",0)))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){this.isDisabled()?(this.$newElement[0].classList.add(B.DISABLED),this.$button.addClass(B.DISABLED).attr("aria-disabled",!0)):this.$button[0].classList.contains(B.DISABLED)&&(this.$newElement[0].classList.remove(B.DISABLED),this.$button.removeClass(B.DISABLED).attr("aria-disabled",!1))},clickListener:function(){var w=this,t=y(document);function e(){(w.options.liveSearch?w.$searchbox:w.$menuInner).trigger("focus")}function i(){w.dropdown&&w.dropdown._popper&&w.dropdown._popper.state?e():requestAnimationFrame(i)}t.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&t.data("spaceSelect")&&(e.preventDefault(),t.data("spaceSelect",!1))}),this.$newElement.on("show.bs.dropdown",function(){w.dropdown||"4"!==P.major||(w.dropdown=w.$button.data("bs.dropdown"),w.dropdown._menu=w.$menu[0])}),this.$button.on("click.bs.dropdown.data-api",function(e){var t,i,s;w.options.allowClear&&(t=e.target,i=w.$clearButton[0],(t=/MSIE|Trident/.test(window.navigator.userAgent)?document.elementFromPoint(e.clientX,e.clientY):t)!==i&&t.parentElement!==i||(e.stopImmediatePropagation(),w.multiple?w.deselectAll():(i=(t=w.$element[0]).value,e=t.selectedIndex,(s=!!(s=t.options[e])&&w.selectpicker.main.data[s.liIndex])&&w.setSelected(s,!1),t.selectedIndex=0,$=[e,!1,i],w.$element.triggerNative("change")),w.$newElement.hasClass(B.SHOW)&&(w.options.liveSearch&&w.$searchbox.trigger("focus"),w.createView(!1)))),w.$newElement.hasClass(B.SHOW)||w.setSize()}),this.$element.on("shown"+x,function(){w.$menuInner[0].scrollTop!==w.selectpicker.view.scrollTop&&(w.$menuInner[0].scrollTop=w.selectpicker.view.scrollTop),3<P.major?requestAnimationFrame(i):e()}),this.$menuInner.on("mouseenter","li a",function(e){var t=this.parentElement,i=w.isVirtual()?w.selectpicker.view.position0:0,s=Array.prototype.indexOf.call(t.parentElement.children,t),s=w.selectpicker.current.data[s+i];w.focusItem(t,s,!0)}),this.$menuInner.on("click","li a",function(e,t){var i=y(this),s=w.$element[0],o=w.isVirtual()?w.selectpicker.view.position0:0,o=w.selectpicker.current.data[i.parent().index()+o],n=o.index,r=D.call(w),a=s.selectedIndex,d=s.options[a],d=!!d&&w.selectpicker.main.data[d.liIndex],c=!0;if(w.multiple&&1!==w.options.maxOptions&&e.stopPropagation(),e.preventDefault(),!w.isDisabled()&&!i.parent().hasClass(B.DISABLED)){var e=o.option,i=y(e),l=e.selected,p=i.parent("optgroup"),h=p.find("option"),u=w.options.maxOptions,m=p.data("maxOptions")||!1;if((t=n===w.activeIndex?!0:t)||(w.prevActiveIndex=w.activeIndex,w.activeIndex=void 0),w.multiple){if(w.setSelected(o,!l),w.focusedParent.focus(),!1!==u||!1!==m){t=u<k.call(w).length,l=m<p.find("option:selected").length;if(u&&t||m&&l)if(u&&1==u)s.selectedIndex=-1,e.selected=!0,w.setOptionStatus(!0);else if(m&&1==m){for(var g=0;g<h.length;g++){var b=h[g];b.selected=!1,w.setSelected(b.liIndex,!1)}e.selected=!0,w.setSelected(n,!0)}else{var p="string"==typeof w.options.maxOptionsText?[w.options.maxOptionsText,w.options.maxOptionsText]:w.options.maxOptionsText,p="function"==typeof p?p(u,m):p,f=p[0].replace("{n}",u),v=p[1].replace("{n}",m),I=y('<div class="notify"></div>');p[2]&&(f=f.replace("{var}",p[2][1<u?0:1]),v=v.replace("{var}",p[2][1<m?0:1])),e.selected=!1,w.$menu.append(I),u&&t&&(I.append(y("<div>"+f+"</div>")),c=!1,w.$element.trigger("maxReached"+x)),m&&l&&(I.append(y("<div>"+v+"</div>")),c=!1,w.$element.trigger("maxReachedGrp"+x)),setTimeout(function(){w.setSelected(n,!1)},10),I[0].classList.add("fadeOut"),setTimeout(function(){I.remove()},1050)}}}else d&&w.setSelected(d,!1),w.setSelected(o,!0);w.options.source.data&&w.$element[0].appendChild(w.selectpicker.main.optionQueue),!w.multiple||w.multiple&&1===w.options.maxOptions?w.$button.trigger("focus"):w.options.liveSearch&&w.$searchbox.trigger("focus"),!c||!w.multiple&&a===s.selectedIndex||($=[e.index,i.prop("selected"),r],w.$element.triggerNative("change"))}}),this.$menu.on("click","li."+B.DISABLED+" a, ."+B.POPOVERHEADER+", ."+B.POPOVERHEADER+" :not(.close)",function(e){e.currentTarget==this&&(e.preventDefault(),e.stopPropagation(),(w.options.liveSearch&&!y(e.target).hasClass("close")?w.$searchbox:w.$button).trigger("focus"))}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),(w.options.liveSearch?w.$searchbox:w.$button).trigger("focus")}),this.$menu.on("click","."+B.POPOVERHEADER+" .close",function(){w.$button.trigger("click")}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(e){(w.options.liveSearch?w.$searchbox:w.$button).trigger("focus"),e.preventDefault(),e.stopPropagation(),y(this).hasClass("bs-select-all")?w.selectAll():w.deselectAll()}),this.$button.on("focus"+x,function(e){var t=w.$element[0].getAttribute("tabindex");void 0!==t&&e.originalEvent&&e.originalEvent.isTrusted&&(this.setAttribute("tabindex",t),w.$element[0].setAttribute("tabindex",-1),w.selectpicker.view.tabindex=t)}).on("blur"+x,function(e){void 0!==w.selectpicker.view.tabindex&&e.originalEvent&&e.originalEvent.isTrusted&&(w.$element[0].setAttribute("tabindex",w.selectpicker.view.tabindex),this.setAttribute("tabindex",-1),w.selectpicker.view.tabindex=void 0)}),this.$element.on("change"+x,function(){w.render(),w.$element.trigger("changed"+x,$),$=null}).on("focus"+x,function(){w.options.mobile||w.$button[0].focus()})},liveSearchListener:function(){var h=this;this.$button.on("click.bs.dropdown.data-api",function(){h.$searchbox.val()&&(h.$searchbox.val(""),h.selectpicker.search.previousValue=void 0)}),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var t=h.$searchbox[0].value;if(h.selectpicker.search.elements=[],h.selectpicker.search.data=[],t)if(h.options.source.search)h.fetchData(function(e){h.render(),h.buildList(void 0,!0),h.createView(!0),Y.call(h,e,t)},"search",0,t);else{var e=[],i=t.toUpperCase(),s={},o=[],n=h._searchStyle(),r=h.options.liveSearchNormalize;r&&(i=m(i));for(var a=0;a<h.selectpicker.main.data.length;a++){var d=h.selectpicker.main.data[a];s[a]||(s[a]=v(d,i,n,r)),s[a]&&void 0!==d.headerIndex&&-1===o.indexOf(d.headerIndex)&&(0<d.headerIndex&&(s[d.headerIndex-1]=!0,o.push(d.headerIndex-1)),s[d.headerIndex]=!0,o.push(d.headerIndex),s[d.lastIndex+1]=!0),s[a]&&"optgroup-label"!==d.type&&o.push(a)}for(var a=0,c=o.length;a<c;a++){var l=o[a],p=(d=h.selectpicker.main.data[l],h.selectpicker.main.data[o[a-1]]);("divider"!==d.type||"divider"===d.type&&p&&"divider"!==p.type&&c-1!==a)&&(h.selectpicker.search.data.push(d),e.push(h.selectpicker.main.elements[l]))}h.activeIndex=void 0,h.noScroll=!0,h.$menuInner.scrollTop(0),h.selectpicker.search.elements=e,h.createView(!0),Y.call(h,e,t)}else h.selectpicker.search.previousValue&&(h.$menuInner.scrollTop(0),h.createView(!1));h.selectpicker.search.previousValue=t})},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(t){var e=this.$element[0];if(void 0===t)return this.$element.val();var i=k.call(this),s=D.call(this,i);$=[null,null,s],(t=Array.isArray(t)?t:[t]).map(String);for(var o=0;o<i.length;o++){var n=i[o];n&&-1===t.indexOf(String(n.value))&&this.setSelected(n,!1)}return this.selectpicker.main.data.filter(function(e){return-1!==t.indexOf(String(e.value))&&(this.setSelected(e,!0),!0)},this),this.options.source.data&&e.appendChild(this.selectpicker.main.optionQueue),this.$element.trigger("changed"+x,$),this.$newElement.hasClass(B.SHOW)&&(this.multiple?this.setOptionStatus(!0):"number"==typeof(s=(e.options[e.selectedIndex]||{}).liIndex)&&(this.setSelected(this.selectedIndex,!1),this.setSelected(s,!0))),this.render(),$=null,this.$element},changeAll:function(e){if(this.multiple){void 0===e&&(e=!0);var t=this.$element[0],i=0,s=0,o=D.call(this);t.classList.add("bs-select-hidden");for(var n=0,r=this.selectpicker.current.data,a=r.length;n<a;n++){var d=r[n],c=d.option;c&&!d.disabled&&"divider"!==d.type&&(d.selected&&i++,c.selected=e,!0===(d.selected=e))&&s++}t.classList.remove("bs-select-hidden"),i!==s&&(this.setOptionStatus(),$=[null,null,o],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e,t){var i=void 0===t;(e=e||window.event)&&e.stopPropagation(),!1===i&&(e=this.$newElement[0].classList.contains(B.SHOW),i=!0===t&&!1===e||!1===t&&!0===e),i&&this.$button.trigger("click.bs.dropdown.data-api")},open:function(e){this.toggle(e,!0)},close:function(e){this.toggle(e,!1)},keydown:function(e){var t,i,s,o,n=y(this),r=n.hasClass("dropdown-toggle"),a=(r?n.closest(".dropdown"):n.closest(j.MENU)).data("this"),d=a.findLis(),c=!1,r=9===e.which&&!r&&!a.options.selectOnTab,l=Q.test(e.which)||r,p=a.$menuInner[0].scrollTop,h=!0===a.isVirtual()?a.selectpicker.view.position0:0;if(!(112<=e.which&&e.which<=123))if(!(t=a.$menu.hasClass(B.SHOW))&&(l||48<=e.which&&e.which<=57||96<=e.which&&e.which<=105||65<=e.which&&e.which<=90)&&(a.$button.trigger("click.bs.dropdown.data-api"),a.options.liveSearch))a.$searchbox.trigger("focus");else{if(27===e.which&&t&&(e.preventDefault(),a.$button.trigger("click.bs.dropdown.data-api").trigger("focus")),l){if(!d.length)return;-1!==(l=(i=a.selectpicker.main.elements[a.activeIndex])?Array.prototype.indexOf.call(i.parentElement.children,i):-1)&&a.defocusItem(i),38===e.which?(-1!==l&&l--,l+h<0&&(l+=d.length),a.selectpicker.view.canHighlight[l+h]||-1==(l=a.selectpicker.view.canHighlight.slice(0,l+h).lastIndexOf(!0)-h)&&(l=d.length-1)):40!==e.which&&!r||(++l+h>=a.selectpicker.view.canHighlight.length&&(l=a.selectpicker.view.firstHighlightIndex),a.selectpicker.view.canHighlight[l+h])||(l=l+1+a.selectpicker.view.canHighlight.slice(l+h+1).indexOf(!0)),e.preventDefault();var u=h+l;38===e.which?0===h&&l===d.length-1?(a.$menuInner[0].scrollTop=a.$menuInner[0].scrollHeight,u=a.selectpicker.current.elements.length-1):c=(o=(s=a.selectpicker.current.data[u]).position-s.height)<p:40!==e.which&&!r||(l===a.selectpicker.view.firstHighlightIndex?(a.$menuInner[0].scrollTop=0,u=a.selectpicker.view.firstHighlightIndex):c=p<(o=(s=a.selectpicker.current.data[u]).position-a.sizeInfo.menuInnerHeight)),i=a.selectpicker.current.elements[u],a.activeIndex=a.selectpicker.current.data[u].index,a.focusItem(i),a.selectpicker.view.currentActive=i,c&&(a.$menuInner[0].scrollTop=o),(a.options.liveSearch?a.$searchbox:n).trigger("focus")}else if(!n.is("input")&&!K.test(e.which)||32===e.which&&a.selectpicker.keydown.keyHistory){var m,g=[];e.preventDefault(),a.selectpicker.keydown.keyHistory+=q[e.which],a.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(a.selectpicker.keydown.resetKeyHistory.cancel),a.selectpicker.keydown.resetKeyHistory.cancel=a.selectpicker.keydown.resetKeyHistory.start(),m=a.selectpicker.keydown.keyHistory,/^(.)\1+$/.test(m)&&(m=m.charAt(0));for(var b=0;b<a.selectpicker.current.data.length;b++){var f=a.selectpicker.current.data[b];v(f,m,"startsWith",!0)&&a.selectpicker.view.canHighlight[b]&&g.push(f.index)}g.length&&(h=0,d.removeClass("active").find("a").removeClass("active"),1===m.length&&(-1===(h=g.indexOf(a.activeIndex))||h===g.length-1?h=0:h++),c=0<p-(s=a.selectpicker.main.data[r=g[h]]).position?(o=s.position-s.height,!0):(o=s.position-a.sizeInfo.menuInnerHeight,s.position>p+a.sizeInfo.menuInnerHeight),i=a.selectpicker.main.elements[r],a.activeIndex=g[h],a.focusItem(i),i&&i.firstChild.focus(),c&&(a.$menuInner[0].scrollTop=o),n.trigger("focus"))}t&&(32===e.which&&!a.selectpicker.keydown.keyHistory||13===e.which||9===e.which&&a.options.selectOnTab)&&(32!==e.which&&e.preventDefault(),a.options.liveSearch&&32===e.which||(a.$menuInner.find(".active a").trigger("click",!0),n.trigger("focus"),a.options.liveSearch)||(e.preventDefault(),y(document).data("spaceSelect",!0)))}},mobile:function(){this.options.mobile=!0,this.$element[0].classList.add("mobile-device")},refresh:function(){var e=this,t=y.extend({},this.options,l(this.$element),this.$element.data());this.options=t,this.options.source.data?(this.render(),this.buildList()):this.fetchData(function(){e.render(),e.buildList()}),this.checkDisabled(),this.setStyle(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed"+x)},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),(this.$bsContainer||this.$menu).remove(),this.selectpicker.view.titleOption&&this.selectpicker.view.titleOption.parentNode&&this.selectpicker.view.titleOption.parentNode.removeChild(this.selectpicker.view.titleOption),this.$element.off(x).removeData("selectpicker").removeClass("bs-select-hidden selectpicker"),y(window).off(x+"."+this.selectId)}};var ee=y.fn.selectpicker;function te(){return P.major<5?y.fn.dropdown?(y.fn.dropdown.Constructor._dataApiKeydownHandler||y.fn.dropdown.Constructor.prototype.keydown).apply(this,arguments):void 0:C.dataApiKeydownHandler}y.fn.selectpicker=X,y.fn.selectpicker.Constructor=E,y.fn.selectpicker.noConflict=function(){return y.fn.selectpicker=ee,this},y(document).off("keydown.bs.dropdown.data-api").on("keydown.bs.dropdown.data-api",":not(.bootstrap-select) > ["+j.DATA_TOGGLE+"]",te).on("keydown.bs.dropdown.data-api",":not(.bootstrap-select) > .dropdown-menu",te).on("keydown"+x,".bootstrap-select ["+j.DATA_TOGGLE+'], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',E.prototype.keydown).on("focusin.modal",".bootstrap-select ["+j.DATA_TOGGLE+'], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',function(e){e.stopPropagation()}),document.addEventListener("DOMContentLoaded",function(){y(".selectpicker").each(function(){var e=y(this);X.call(e,e.data())})})}(e)});var browser=("undefined"!=typeof ej?ej:BoldBIDashboard).browserInfo(),isGetLinkDialogBinded=!1;function intializeGetLinkDialog(){$.ajax({type:"Get",url:getLinkDialogViewUrl+"?nonce="+nonce,success:function(e){$("body").append(e)}}),document.querySelectorAll('[data-bs-toggle="get-link-tooltip"]').forEach(e=>{new bootstrap.Tooltip(e,{animation:!0,html:!0,placement:"top"})})}function GetLink(e){var t,i,s=e.ItemType,s=(2==s?$(".dashboard-link").show():6==s?($(".file-link").show(),$("#compressed-link").prop("checked",!0)):(8==s?$(".widget-link"):$(".link")).show(),e.Name),o=(e.Id,document.getElementById("get_item_link").style.display="block",'<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.GetLink+'</span><span class="item-name">'+e.Name+"</span></span>");isGetLinkDialogBinded?((i=document.getElementById("get_item_link_dialog").ej2_instances)[0].header=o,i[0].show()):((t=document.createElement("div")).setAttribute("id","get_item_link_dialog"),document.getElementById("dashboard-page-container").appendChild(t),(i=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"450px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:o,showCloseIcon:!0,open:onGetLinkDialogOpen,content:document.getElementById("get_item_link"),buttons:[{click:function(e){i.hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.OKButton}}]})).appendTo(t),isGetLinkDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("get_item_link_dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("get_item_link_dialog")),intializeGetLinkDialog(),ejs.popups.hideSpinner(document.getElementById("get_item_link_dialog")),$(".get_link").show(),e.IsPublic?($(".private-note").hide(),$(".public-note").show()):($(".private-note").show(),$(".public-note").hide()),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link").css({width:"100%",borderRadius:"4px"}),$("#item-link-copy").attr("data-bs-original-title","")):$("#item-link-copy").tooltip({animation:!1}),$(".report-name").html(s),$(".report-name").attr("title",s),$("#item-link").val(getDashboardShareLink(e.Id,e.CategoryName,e.Name)),$("#item-link").select(),$(".modal-footer .validation-area").css("display","block")}function onGetLinkDialogOpen(){$("#item-link").select(),$(".get_link").show(),$("#item-link").val(itemUrl.trim()),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").attr("data-bs-original-title",""))}function getDashboardShareLink(e,t,i,s){var o=baseUrl.split("/");return encodeURI(o[0]+"//"+o[2]+(s||viewDashboardUrlAction)+"/"+e+"/"+t+"/"+i)}$(document).on("click","#item-link-copy",function(e){var t,i;$("#item-link").select(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").attr("data-bs-original-title","")):(document.execCommand("copy"),t=document.querySelector("#item-link-copy"),(i=bootstrap.Tooltip.getInstance(t))&&i.dispose(),(i=new bootstrap.Tooltip(t,{title:window.Server.App.Localization.Copysuccess,trigger:"hover"})).show(),setTimeout(()=>{i.dispose(),i=new bootstrap.Tooltip(t,{title:window.Server.App.Localization.LinkCopy,trigger:"hover"})},1e3))});var isWidget=!1,sharePermissionDlgObj="",sharePermissionDlgWrapperObj="",sharePermisisonDlgHeader="",sharePermissionDlgHeaderItemName="",selectedMode="",sharePermissionConatiner="",accessModeContainer="",dummyContainer="",embedCodeContainer="",sharePermissionDashboardSettingSectionObj="",sharePermissionPublicSectionObj="",sharePermissionPrivateSectionObj="",sharePermissionUserGroupSectionObj="",manageUserGroupContainer="",manageUserGroupBodySection="",getEmbedLinkSection="",embedConfiguration="",changeIndicatorBannerObj="",shareWithLabelObj="",getLinkInputObj="",getLinkCopyLinkobj="",getEmbedCodeInputObj="",getEmbedCodeCopyBtnobj="",getDashboardLinkCopyBtnobj="",accessModeChangeLink="",manageAccessButton="",manageAccessBackButton="",manageAccessSaveBtnObj="",manageAccessCancelBtnObj="",shareDoneBtnObj="",shareBtnObj="",accessModeChngBtnObj="",accessModeCancelBtnObj="",embedCodeDoneBtnObj="",embedCodeBackButton="",addOwnerBtnObj="",publicRadioBtnObj="",privateRadioBtnObj="",isItemPublic=!1,isEntireDOMRendered=!1,isItemUnlisted=!1,isGetEmbedCodeTriggered=!1,isMarkItemsPublicForShareDialog=!1,isAccessModeChanges=!1,accessModeSelectionInput="",sharedUserGroupsPreservedList=[],sharedAccessModePreservedList=[],markForDeleteBtnObj="",removeMarkForDeleteBtnObj="",toggleMarkForDeletionObj="",modifiedItemIndex=[],addNewItemPermission=[],userMarkedForDeletionList=[],groupMarkedForDeletionList=[],showSharedUserGroupContainer="",showSharedUserGroupNameSection="",showSharedUserGroupName="",showSharedUserGroupCountSection="",showSharedUserGroupCount="",currentItemDetail=[],currentDashboardDetail=[],shareItem=angular.module("serverApp");function validateInput(e){e=e.val().trim();return/^\d+(\.\d+)?(px|%|em|rem|vh|vw)$/i.test(e.trim())}function manageAccessCancelBtn(){$('[data-bs-toggle="popover"]').popover("hide"),resetToActualScope(),enableAutomCompleteControl(),enableAutocompleteAccessModeSelection()}function shareDashboardPermission(e,t){$("#user-group-search-input_suggestion").removeClass("hide-suggesstion"),currentItemDetail=e,currentDashboardDetail=t;var i=null!=window.granularPermissions&&(window.granularPermissions.All||window.granularPermissions.DashboardSettings),s=null!=window.granularPermissions&&window.granularPermissions.Dashboard,o=null!=window.granularPermissions&&window.granularPermissions.Slideshow,n=null!=window.granularPermissions&&window.granularPermissions.Datasource,r=null!=window.granularPermissions&&window.granularPermissions.Category,a=angular.element("#share-permission-content-section").scope(),i=(a.currentItemType=e.ItemType,a.isAdmin=isAdmin,a.hasDashboardSettingsPermission=isAdmin||i,isItemUnlisted=e.IsUnlisted,null!=t&&(a.isDashboardPublic=t.IsPublic),0),i=e.ItemType==ItemType.Category||e.ItemType==ItemType.Datasource?241:e.ItemType==ItemType.Slideshow?356:e.ItemType==ItemType.ItemView?418:isMarkItemsPublicForShareDialog?e.IsMultiDashboard?e.IsPublic?407:391:e.IsPublic?434:418:e.IsMultiDashboard?335:362;switch("undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog({height:i}):sharePermissionDlgObj.ejDialog({height:i}),sharePermissionDlgHeaderItemName.text(e.Name),sharePermissionDlgObj.show(),$("#share-permission-popup_wrapper, #user-group-search-input_suggestion").addClass("custom-bootstrap-styles"),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog("open"):sharePermissionDlgObj.ejDialog("open"),e.ItemType==ItemType.Dashboard||e.ItemType==ItemType.ItemView?e.CreatedById==currentUserId||isAdmin||s?((isMarkItemsPublicForShareDialog||e.ItemType==ItemType.ItemView||!isMarkItemsPublicForShareDialog&&e.ItemType==ItemType.Dashboard?e.IsPublic?showPublicContent:showPrivateContent:showDashboardSettingContent)(),addAttributeValueToBtnEle(e)):(hidePublicPrivateContent(),a=e.IsMultiDashboard?312:339,"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog({height:a}):sharePermissionDlgObj.ejDialog({height:a})):hidePublicPrivateContent(),e.ItemType==ItemType.Dashboard?e.CreatedById==currentUserId||isAdmin||s?showShareDialogContent(e):hideShareUserGroupPermissionSection():e.ItemType==ItemType.Slideshow?e.CreatedById==currentUserId||isAdmin||o?showShareDialogContent(e):hideShareUserGroupPermissionSection():e.ItemType==ItemType.Datasource?e.CreatedById==currentUserId||isAdmin||n?showShareDialogContent(e):hideShareUserGroupPermissionSection():e.ItemType==ItemType.Category?e.CreatedById==currentUserId||isAdmin||r?showShareDialogContent(e):hideShareUserGroupPermissionSection():e.CreatedById==currentUserId||isAdmin?showShareDialogContent(e):hideShareUserGroupPermissionSection(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-url-copy").hide(),$("#item-url").css({width:"100%",borderRadius:"4px"}),$("#item-url-copy").attr("data-original-title","")):$("#item-url-copy").tooltip({animation:!1}),e.ItemType){case ItemType.Dashboard:$("#item-url").val(getDashboardShareLink(e.Id,e.CategoryName,e.Name));break;case ItemType.ItemView:var d=getDashboardShareLink(t.Id,t.CategoryName,t.Name);$("#item-url").val(d+"?viewid="+e.Id);break;case ItemType.Slideshow:d=baseUrl.split("/");$("#item-url").val(d[0]+"//"+d[2]+slideShowUrl+"/"+e.Id+"/"+e.Name);break;default:$("#item-url").val("")}}function addGroupOwnerDialogOpen(){var e=$("#add-owner-button").attr("data-groupname"),t=$("#add-owner-button").attr("data-groupid"),i=angular.element("#share-permission-content-section").scope();currentItemDetail.ItemType=ItemType.UserManagement,i.currentItemType=ItemType.UserManagement,i.isAdmin=isAdmin,"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog({height:241}):sharePermissionDlgObj.ejDialog({height:241}),sharePermisisonDlgHeader.text(window.Server.App.Localization.AddGroupOwnerBtn),sharePermissionDlgHeaderItemName.text(e),sharePermissionDlgObj.show(),$("#share-permission-popup_wrapper, #user-group-search-input_suggestion").addClass("custom-bootstrap-styles"),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog("open"):sharePermissionDlgObj.ejDialog("open"),hidePublicPrivateContent(),getGroupUserPermission(t),addOwnerBtnObj.attr("data-item-id",t),addOwnerBtnObj.attr("data-name",e),addOwnerBtnObj.attr("data-itemtype",ItemType.UserManagement),autoCompleteHiddenEle.attr("data-item-id",t),autoCompleteHiddenEle.attr("data-itemtype",ItemType.UserManagement)}function showShareDialogContent(e){showShareUserGroupPermissionSection(),getShareItemPermission(e.Id),addAttributeValueToBtnEle(e),addAttributeValueToAutoCompleteEle(e)}function onSharePermissionPopupOpen(e){$('[data-bs-toggle="popover"]').popover("hide"),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("refresh"):sharePermissionDlgWrapperObj.ejWaitingPopup("refresh"),0==isGetEmbedCodeTriggered&&showSharePermissionContainer(),refreshDialogBoxPosition()}function onSharePermissionPopupClose(e){currentItemDetail=[],$(".embed-configuration [type='checkbox']").each(function(){$(this).prop("checked",this.defaultChecked)}),$("#embed-height-input").val("100%"),$("#embed-width-input").val("100%"),$("#width-height-error").hide(),closeEmbedAccordion(),$("#mode-selection").val("view"),$("#expirationtime-signature").val("604800"),$("#sso-providers").val("OpenID"),selectedMode="",$(".expiration-time-row").addClass("hide"),$(".auth-provider-row").addClass("hide"),$('[data-bs-toggle="popover"]').popover("hide"),showSharePermissionContainer(),"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("refresh"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide")):(sharePermissionDlgWrapperObj.ejWaitingPopup("refresh"),sharePermissionDlgWrapperObj.ejWaitingPopup("hide")),isGetEmbedCodeTriggered=!1,refreshDialogBoxPosition()}function showAccessModeContainer(){sharePermisisonDlgHeader.text(window.Server.App.Localization.SharePermissionAccessMode),accessModeContainer.show(),accessModeChngBtnObj.show(),accessModeCancelBtnObj.show(),sharePermissionConatiner.hide(),manageAccessButton.hide(),shareBtnObj.hide(),shareDoneBtnObj.hide(),refreshDialogBoxPosition(),currentItemDetail.ItemType!=ItemType.Dashboard||isMarkItemsPublicForShareDialog||sharePermissionDashboardSettingSectionObj.show()}function showManageAccessContainer(){sharePermissionDashboardSettingSectionObj.hide(),showSharedUserGroupContainer.hide(),shareBtnObj.text(window.Server.App.Localization.AddPeopleBtn),addOwnerBtnObj.text(window.Server.App.Localization.AddPeopleBtn),sharePermisisonDlgHeader.text(window.Server.App.Localization.ManageAccess),dummyContainer.hide(),""==autoCompleteInstance.getValue()&&(shareBtnObj.hide(),addOwnerBtnObj.hide()),currentItemDetail.ItemType==ItemType.UserManagement&&($(".change-access-mode-selection span").removeClass("caret"),$(".change-access-mode-selection button").attr("disabled",!0)),manageAccessBackButton.show(),manageUserGroupContainer.show(),manageAccessButton.hide(),refreshUserGroupScroll(),refreshDialogBoxPosition(),generateProfileAvatar()}function hideManageAccessContainer(){manageUserGroupContainer.hide(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),embedCodeDoneBtnObj.hide(),embedCodeBackButton.hide(),embedCodeContainer.hide(),changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues()}function showSharePermissionContainer(){currentItemDetail.ItemType==ItemType.UserManagement?(sharePermisisonDlgHeader.text(window.Server.App.Localization.AddGroupOwnerBtn),$(".show-shared-user-group-label").text("Group Owners :")):sharePermisisonDlgHeader.text(window.Server.App.Localization.SharePermissionDefault),dummyContainer.show(),shareBtnObj.text(window.Server.App.Localization.SharePeopleBtn),enableAutocompleteAccessModeSelectionWithoutReset(),refreshAutoComplete(),sharePermissionConatiner.show(),manageAccessButton.show(),shareDoneBtnObj.show(),manageAccessBackButton.hide(),hideManageAccessContainer(),accessModeContainer.hide(),accessModeChngBtnObj.hide(),accessModeCancelBtnObj.hide(),displaySharedUserGroupInfo(),currentItemDetail.ItemType==ItemType.Dashboard?"undefined"!=typeof BoldBIDashboard&&".sydj"==currentItemDetail.Extension.toLowerCase()||currentItemDetail.IsMultiDashboard||!ej.isNullOrUndefined(currentItemDetail.Extension)&&".sydj"==currentItemDetail.Extension.toLowerCase()||currentItemDetail.IsMultiDashboard?getEmbedLinkSection.show():getEmbedLinkSection.hide():currentItemDetail.ItemType==ItemType.ItemView&&getEmbedLinkSection.show(),embedCodeDoneBtnObj.hide(),embedCodeBackButton.hide(),sharePermissionDlgHeaderItemName.show(),sharePermisisonDlgHeader.css("line-height",""),refreshDialogBoxPosition()}function showSharePermissionContainerWithRefresh(){$('[data-bs-toggle="popover"]').popover("hide"),resetToActualScope(),hideManageAccessContainer(),enableAutocompleteAccessModeSelectionWithoutReset(),autoCompleteHiddenEle.attr("data-itemtype")!=ItemType.UserManagement?sharePermisisonDlgHeader.text(window.Server.App.Localization.SharePermissionDefault):sharePermisisonDlgHeader.text(window.Server.App.Localization.AddGroupOwnerBtn),displaySharedUserGroupInfo(),dummyContainer.show(),shareBtnObj.text(window.Server.App.Localization.SharePeopleBtn),addOwnerBtnObj.text(window.Server.App.Localization.AddGroupOwnerBtn),showPublicPrivateContent(),sharePermissionConatiner.show(),manageAccessButton.show(),""!=autoCompleteInstance.getValue()?((autoCompleteHiddenEle.attr("data-itemtype")!=ItemType.UserManagement?shareBtnObj:addOwnerBtnObj).show(),manageAccessCancelBtnObj.show(),shareDoneBtnObj.hide()):shareDoneBtnObj.show(),manageAccessBackButton.hide(),accessModeContainer.hide(),accessModeChngBtnObj.hide(),accessModeCancelBtnObj.hide(),refreshDialogBoxPosition()}function showDashboardSettingContent(){sharePermissionPublicSectionObj.hide(),sharePermissionPrivateSectionObj.hide(),sharePermissionDashboardSettingSectionObj.show()}function showPublicContent(){sharePermissionPublicSectionObj.show(),sharePermissionPrivateSectionObj.hide(),isItemPublic=!0}function showPrivateContent(){sharePermissionPublicSectionObj.hide(),sharePermissionPrivateSectionObj.show(),isItemPublic=!1}function showPublicOrPrivateContent(){(isItemPublic?showPublicContent:showPrivateContent)()}function showShareUserGroupPermissionSection(){sharePermissionUserGroupSectionObj.show()}function hideShareUserGroupPermissionSection(){sharePermissionUserGroupSectionObj.hide()}function hidePublicPrivateContent(){sharePermissionPublicSectionObj.hide(),sharePermissionPrivateSectionObj.hide(),sharePermissionDashboardSettingSectionObj.hide()}function showPublicPrivateContent(){var e=null!=window.granularPermissions&&window.granularPermissions.Dashboard;(currentItemDetail.ItemType==ItemType.Dashboard||currentItemDetail.ItemType==ItemType.ItemView)&&(currentItemDetail.CreatedById==currentUserId||isAdmin||e)?(isMarkItemsPublicForShareDialog||currentItemDetail.ItemType==ItemType.ItemView?isItemPublic?sharePermissionPublicSectionObj:sharePermissionPrivateSectionObj:sharePermissionDashboardSettingSectionObj).show():hidePublicPrivateContent()}function changeAccessMode(){manageAccessCancelBtn(),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),showAccessModeContainer(),(isItemPublic?publicRadioBtnObj:privateRadioBtnObj).prop("checked",!0),$("#make-unlisted").prop("checked",isItemUnlisted),accessModeChngBtnObj.attr("disabled",!0),"undefined"!=typeof BoldBIDashboard?($("#share-permission-popup_wrapper").find(".private-icon-section, .public-icon-section").addClass("dashboard-change-access-section"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide")):($("#share-permission-popup_wrapper").find(".private-icon-section, .public-icon-section").removeClass("dashboard-change-access-section"),sharePermissionDlgWrapperObj.ejWaitingPopup("hide"))}function getEmbedCode(){embedCodeDialog(),embedCodeBackButton.show()}function embedCodeDialog(){resetToActualScope(),$("#embed-code").val(generateEmbedCode(currentItemDetail)),embedCodeContainer.show(),$("#mode-selection").selectpicker("refresh"),$("#expirationtime-signature").selectpicker("refresh"),$("#sso-providers").selectpicker("refresh"),sharePermisisonDlgHeader.text(window.Server.App.Localization.EmbedCode),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&getEmbedCodeCopyBtnobj.hide(),currentItemDetail.IsPublic?($(".private-embed-code-note").hide(),$(".public-embed-code-note").show()):($(".private-embed-code-note").show(),$(".public-embed-code-note").hide()),embedCodeDoneBtnObj.show(),manageAccessBackButton.hide(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),sharePermissionDlgHeaderItemName.hide(),sharePermisisonDlgHeader.css("line-height","32px"),sharePermissionConatiner.hide(),manageAccessButton.hide(),shareBtnObj.hide(),shareDoneBtnObj.hide(),isEntireDOMRendered=!0,refreshDialogBoxPosition()}function getEmbedCodeFromContext(){embedCodeDialog()}function addAttributeValueToBtnEle(e){accessModeChngBtnObj.attr("data-item-id",e.Id),accessModeChngBtnObj.attr("data-name",e.Name),accessModeChngBtnObj.attr("data-itemtype",e.ItemType),accessModeChngBtnObj.attr("data-category-name",e.CategoryName),shareBtnObj.attr("data-item-id",e.Id),shareBtnObj.attr("data-name",e.Name),shareBtnObj.attr("data-itemtype",e.ItemType)}function addAttributeValueToAutoCompleteEle(e){autoCompleteHiddenEle.attr("data-item-id",e.Id),autoCompleteHiddenEle.attr("data-itemtype",e.ItemType)}function getShareItemPermission(e){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),$.ajax({type:"get",url:getShareItemPermissionUrl,data:{itemId:e},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var t;e.status&&((t=angular.element("#share-permission-content-section").scope()).$apply(function(){angular.copy(e.SharedUserGroupList,sharedUserGroupsPreservedList),t.sharedUserGroups=e.SharedUserGroupList}),t.$apply(function(){angular.copy(e.AccessModeOptionList,sharedAccessModePreservedList),t.accessModes=e.AccessModeOptionList}),t.$apply(function(){t.isMarkItemsPublic=e.isItemPublic}),isMarkItemsPublicForShareDialog=e.isItemPublic,currentItemDetail.ItemType==ItemType.ItemView?$("#user-group-search-input_suggestion").removeClass("item-user-input_suggestion"):$("#user-group-search-input_suggestion").addClass("item-user-input_suggestion"),$(".change-access-mode-selection").selectpicker("refresh"),$(".change-access-mode-selection .selectpicker").removeAttr("title"),accessModeSelectionInput.html(""),accessModeSelectionInput.append(e.AccessModeList),accessModeSelectionInput.selectpicker("refresh"),refreshUserGroupScroll(),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide"),displaySharedUserGroupInfo(),isEntireDOMRendered=!0,$('[data-bs-toggle="tooltip"]').tooltip(),$('[data-bs-toggle="popover"]').popover())},error:function(){warningToast(window.Server.App.Localization.InternalServerError),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide")}})}function getGroupUserPermission(e){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),$.ajax({type:"get",url:getGroupOwnersUrl,data:{groupId:e},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var t;e.status?((t=angular.element(manageUserGroupBodySection).scope()).$apply(function(){angular.copy(e.SharedUserGroupList,sharedUserGroupsPreservedList),t.sharedUserGroups=e.SharedUserGroupList}),t.$apply(function(){angular.copy(e.AccessModeOptionList,sharedAccessModePreservedList),t.accessModes=e.AccessModeOptionList}),currentItemDetail.ItemType==ItemType.UserManagement?$("#user-group-search-input_suggestion").removeClass("item-user-input_suggestion"):$("#user-group-search-input_suggestion").addClass("item-user-input_suggestion"),$(".change-access-mode-selection").selectpicker("refresh"),$(".change-access-mode-selection .selectpicker").removeAttr("title"),$(".change-access-mode-selection span").removeClass("caret"),$(".change-access-mode-selection button").attr("disabled",!0),accessModeSelectionInput.html(""),accessModeSelectionInput.append(e.AccessModeList),accessModeSelectionInput.selectpicker("refresh"),refreshUserGroupScroll(),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide"),displaySharedUserGroupInfo(),isEntireDOMRendered=!0,$('[data-bs-toggle="tooltip"]').tooltip(),$('[data-bs-toggle="popover"]').popover()):null!=e.permissionDenied&&e.permissionDenied&&(warningToast(window.Server.App.Localization.UserManagementWarningAlert),"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog("close"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide")):(sharePermissionDlgObj.ejDialog("close"),sharePermissionDlgWrapperObj.ejWaitingPopup("hide")))},error:function(){warningToast(window.Server.App.Localization.InternalServerError),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide")}})}function displaySharedUserGroupInfo(){var s,e,o=angular.element(manageUserGroupBodySection).scope().sharedUserGroups;null!=o&&(0<o.length?(s="",$.each(o,function(e,t){var i="<div class='shared-user-group-name'><span class='shared-user-group-name-label'>";e<3&&(0<t.TargetUserId?i+=t.DisplayName+"</span>":i+=t.TargetGroupName+"</span>",e!=o.length-1?i+="<span class='shared-user-group-name-comma'>,</span> </div>":i+="</div>",s+=i)}),showSharedUserGroupNameSection.html(s),manageUserGroupContainer.is(":visible")||showSharedUserGroupContainer.show()):showSharedUserGroupContainer.hide(),3<o.length?(e=o.length-3,showSharedUserGroupCount.text(e),showSharedUserGroupCountSection.show()):showSharedUserGroupCountSection.hide(),generateProfileAvatar())}function saveItemPermission(){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),splitUserGroupList();var e=userEmailList,t=groupIdList,i=accessModeSelectionInput.val(),s=shareBtnObj.attr("data-item-id"),o=shareBtnObj.attr("data-itemtype");$.ajax({type:"POST",url:sharepermissionUrl,data:{permissionList:JSON.stringify({mode:i,itemType:o,UserList:e,GroupList:t}),itemId:s},success:function(e,t){"true"==e.toString().toLowerCase()?(getShareItemPermission(s),refreshAutoComplete(),refreshAutocompleteAccessModeSelection()):(sharePermissionDlgObj.ejDialog("close"),warningToast(window.Server.App.Localization.ShareItemPermissionMessage+" "+window.Server.App.Localization.ReloadPage))}})}function addGroupOwnerPermission(){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),splitUserGroupList();var e=userEmailList,t=groupIdList,i=accessModeSelectionInput.val(),s=addOwnerBtnObj.attr("data-item-id"),o=addOwnerBtnObj.attr("data-itemtype");$.ajax({type:"POST",url:addGroupOwnerPermissionUrl,data:{permissionList:JSON.stringify({mode:i,itemType:o,UserList:e,GroupList:t}),groupId:s},success:function(e,t){e.status?(getGroupUserPermission(s),refreshAutoComplete(),refreshAutocompleteAccessModeSelection()):null!=e.permissionDenied&&e.permissionDenied&&(warningToast(window.Server.App.Localization.UserManagementWarningAlert),"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog("close"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide")):(sharePermissionDlgObj.ejDialog("close"),sharePermissionDlgWrapperObj.ejWaitingPopup("hide")))},error:function(){warningToast(window.Server.App.Localization.InternalServerError)}})}function updateBulkItemPermission(){var i=shareBtnObj.attr("data-item-id"),s=addOwnerBtnObj.attr("data-item-id");$.ajax({type:"POST",url:updateBulkItemPermissionUrl,data:{permissionList:addNewItemPermission,userMarkedForDeletionList:userMarkedForDeletionList,groupMarkedForDeletionList:groupMarkedForDeletionList,itemId:i,groupId:s},success:function(e,t){"true"==e.toString().toLowerCase()?(null!=i?getShareItemPermission(i):getGroupUserPermission(s),changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareDoneBtnObj.show(),enableAutomCompleteControl(),enableAutocompleteAccessModeSelection()):warningToast(window.Server.App.Localization.InternalServerError)},error:function(){warningToast(window.Server.App.Localization.InternalServerError)}})}function refreshDialogBoxPosition(){"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog({height:"auto"}),isEntireDOMRendered&&(sharePermissionDlgObj.BoldBIDashboardDialog({width:529}),sharePermissionDlgObj.BoldBIDashboardDialog({width:530})),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("refresh"),sharePermissionDlgObj.BoldBIDashboardDialog("refresh")):(sharePermissionDlgObj.ejDialog({height:"auto"}),isEntireDOMRendered&&(sharePermissionDlgObj.ejDialog({width:529}),sharePermissionDlgObj.ejDialog({width:530})),sharePermissionDlgWrapperObj.ejWaitingPopup("refresh"),sharePermissionDlgObj.ejDialog("refresh")),isWidget&&("undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide"),sharePermisisonDlgHeader.text(window.Server.App.Localization.EmbedCode),sharePermisisonDlgHeader.css("line-height","32px"),sharePermissionDlgHeaderItemName.hide(),sharePermissionConatiner.hide(),embedCodeContainer.show(),embedConfiguration.hide(),manageAccessButton.hide())}function prepareRequestForAddItemPermission(){var n,e,r,a;0<modifiedItemIndex.length&&(e=(n=angular.element(manageUserGroupBodySection).scope()).accessModes,r=n.sharedUserGroups,a=shareBtnObj.attr("data-itemtype"),$.each(e,function(e,i){var t=i.Key,s=[],o=[];$.each(modifiedItemIndex,function(e,t){r[t].PermissionAccess!=sharedUserGroupsPreservedList[t].PermissionAccess&&r[t].PermissionAccess==i.Key&&(n.IsUserItem(t)?-1==jQuery.inArray(r[t].Email,s)&&s.push(r[t].Email):n.IsGroupItem(t)&&-1==jQuery.inArray(r[t].TargetGroupId,o)&&o.push(r[t].TargetGroupId))}),(0<s.length||0<o.length)&&addNewItemPermission.push(JSON.stringify({mode:t,itemType:a,UserList:s,GroupList:o}))}),$.each(modifiedItemIndex,function(e,t){r[t].PermissionAccess!=sharedUserGroupsPreservedList[t].PermissionAccess&&(n.IsUserItem(t)?-1==jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,userMarkedForDeletionList)&&userMarkedForDeletionList.push(sharedUserGroupsPreservedList[t].PermissionId):n.IsGroupItem(t)&&-1==jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,groupMarkedForDeletionList)&&groupMarkedForDeletionList.push(sharedUserGroupsPreservedList[t].PermissionId))}))}function resetPreRequestValues(){modifiedItemIndex=[],addNewItemPermission=[],userMarkedForDeletionList=[],groupMarkedForDeletionList=[]}function resetToActualScope(){var e=angular.element(manageUserGroupBodySection).scope();"$apply"!=e.$root.$$phase&&"$digest"!=e.$root.$$phase&&(e.$apply(function(){angular.copy(sharedUserGroupsPreservedList,e.sharedUserGroups)}),e.$apply(function(){angular.copy(sharedAccessModePreservedList,e.accessModes)})),$(".change-access-mode-selection").selectpicker("refresh"),$(".change-access-mode-selection .selectpicker").removeAttr("title"),changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues(),$('[data-bs-toggle="tooltip"]').tooltip(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareBtnObj.hide(),shareDoneBtnObj.show()}function enableAutocompleteAccessModeSelectionWithoutReset(){"undefined"!=typeof BoldBIDashboard?autoCompleteControlEle.BoldBIDashboardAutocomplete("enable"):autoCompleteControlEle.ejAutocomplete("enable"),autoCompleteControlWrapperEle.find(".e-in-wrap.e-box.e-corner").removeClass("disable-autocomplete"),accessModeSelectionInput.prop("disabled",!1),$(".selectpicker[data-id='access-mode-selection']").removeClass("disabled"),$(".selectpicker[data-id='access-mode-selection']").removeClass("disable-autocomplete-access-mode-selection"),accessModeSelectionInput.selectpicker("refresh")}function refreshAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("selectedIndex",0),accessModeSelectionInput.selectpicker("refresh")}function enableAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("disabled",!1),$(".selectpicker[data-id='access-mode-selection']").removeClass("disabled"),$(".selectpicker[data-id='access-mode-selection']").removeClass("disable-autocomplete-access-mode-selection"),refreshAutocompleteAccessModeSelection()}function disableAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("disabled",!0),$(".selectpicker[data-id='access-mode-selection']").addClass("disabled"),$(".selectpicker[data-id='access-mode-selection']").addClass("disable-autocomplete-access-mode-selection"),refreshAutocompleteAccessModeSelection()}function onSuggestionListOpen(){manageUserGroupContainer.addClass("disable-element-opacity")}function onSuggestionListClose(){""==autoCompleteInstance.getValue()&&manageUserGroupContainer.removeClass("disable-element-opacity")}function refreshUserGroupScroll(){var e,t;manageUserGroupBodySection.is(":visible")&&($(".tooltip").tooltip("hide"),e={height:225,width:"100%",scrollerSize:7,buttonSize:0,enableTouchScroll:!(t=""),scrollOneStepBy:20,scroll:function(){$(".tooltip").tooltip("hide"),$('[data-bs-toggle="popover"]').popover("hide")}},(t="undefined"!=typeof BoldBIDashboard?(manageUserGroupBodySection.BoldBIDashboardScroller(e),manageUserGroupBodySection.BoldBIDashboardScroller("instance")):(manageUserGroupBodySection.ejScroller(e),manageUserGroupBodySection.ejScroller("instance"))).model.height=225,t.refresh(),$(".manage-user-group-body-section .e-scrollbar").show())}function updateAccordionState(e,t){var i=e.querySelector(".accordion-button"),s=e.querySelector(".accordion-collapse");e.classList.toggle("active",t),s&&(s.style.maxHeight=t?s.scrollHeight+"px":null,s.classList.toggle("show",t)),i&&i.setAttribute("aria-expanded",t?"true":"false")}function closeAllAccordions(t=[]){document.querySelectorAll("#embedAIAccordion .accordion-item, #embedwidgetAccordion .accordion-item, #embedAccordion .accordion-item").forEach(e=>{t.includes(e)||updateAccordionState(e,!1)})}function toggleAccordion(e){var e=e.parentElement,t=!e.classList.contains("active");closeAllAccordions([e]),updateAccordionState(e,t),refreshDialogBoxPosition()}function closeEmbedAccordion(){closeAllAccordions()}function getUnselectedToolCodes(t){return Object.keys(t).filter(e=>!$("#"+e).is(":checked")).map(e=>t[e])}function getCheckedValue(e){return $("#"+e).is(":checked")}function toggleElementsState(e,t){$(e).prop("disabled",!t)}function buildQueryString(e){e=Object.entries(e).filter(([,e])=>""!==e).map(([e,t])=>e+"="+t).join("&");return e?"&"+e:""}function generateGUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function generateEmbedCode(e){var t,s="",s=currentItemDetail.ItemType==ItemType.ItemView?getDashboardShareLink(currentDashboardDetail.Id,currentDashboardDetail.CategoryName,currentDashboardDetail.Name)+"?viewid="+currentItemDetail.Id+"&isembed=true":e.ItemType==ItemType.Widget?(isWidget=!0,(t=angular.element("#share-permission-content-section").scope()).$apply(function(){t.isDashboardPublic=e.IsPublic,t.currentItemType=e.ItemType}),sharePermissionDlgObj.show(),"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog("open"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show")):(sharePermissionDlgObj.ejDialog("open"),sharePermissionDlgWrapperObj.ejWaitingPopup("show")),getDashboardShareLink(e.Id,e.CategoryName,e.Name)+"?isembed=true&isWidgetMode=true&WidgetId="+e.widgetId):e.ItemType==ItemType.Datasource?($(".datasource-hide").hide(),getDatasourceShareLink(e.Id,e.Name)+"?isembed=true"):e.ItemType==ItemType.Dashboard?"edit"==selectedMode?($(".mode-change").attr("disabled",!0),$("#embedwidgetAccordion").addClass("embed-disabled-accordion"),$("#collapseDashboard .form-check-input").each(function(){toggleElementsState("#"+$(this).attr("id"),!1)}),toggleElementsState("#preview-as",!0),closeAllAccordions([document.querySelector("#embedAIAccordion .accordion-item"),document.querySelector("#embedAccordion .accordion-item")]),getDashboardShareLink(e.Id,e.CategoryName,e.Name,editDashboardEmbedUrl)+"?isembed=true"):($(".mode-change").attr("disabled",!1),$("#embedwidgetAccordion").removeClass("embed-disabled-accordion"),$("#collapseDashboard .form-check-input").each(function(){toggleElementsState("#"+$(this).attr("id"),!0)}),toggleElementsState("#preview-as",!1),getDashboardShareLink(e.Id,e.CategoryName,e.Name)+"?isembed=true"):getDashboardShareLink(e.Id,e.CategoryName,e.Name)+"?isembed=true";"edit"==selectedMode||$("#embed-signature").is(":checked")||(s+=$("#embed-export").is(":checked")?"&export=true":""),s+=$("#embed-sso").is(":checked")?"&hassso=true&externallogin="+$("#sso-providers").val().toLowerCase():"";const o=validateInput($("#embed-height-input"))?$("#embed-height-input").val():"100%",n=validateInput($("#embed-width-input"))?$("#embed-width-input").val():"100%";var i=getUnselectedToolCodes({filteroverview:"fo",fullscreen:"fs","dashboard-parameter":"dp",refresh:"rf","more-option":"om",schedule:"sh"}).join(","),r=getUnselectedToolCodes({"widget-filter":"fr","widget-fullscreen":"fs","widget-more-option":"om"}).join(","),a="edit"!==selectedMode&&e.ItemType===ItemType.Dashboard,d=a,c="&hide_preview_as="+!getCheckedValue("preview-as"),c=e.ItemType==ItemType.Dashboard&&"edit"==selectedMode?c:"",l=a?buildQueryString({views:getCheckedValue("views"),embed_dashboard_views_edit:getCheckedValue("saveviewoption"),hide_header:!getCheckedValue("header"),hide_metrics:!getCheckedValue("metrics"),hide_dashboard_edit:!getCheckedValue("edit"),hide_language_dropdown:!getCheckedValue("language-dropdown"),hide_tool:i,dashboard_comments:getCheckedValue("dashboard-comments")}):"";const p=d?buildQueryString({hide_widget_tool:r,widget_comments:getCheckedValue("widget-comments")}):"",h=e.ItemType===ItemType.Dashboard?"&enable_ai_assistant="+getCheckedValue("embed-ai-assistant"):"";getCheckedValue("embed-ai-assistant")&&e.ItemType===ItemType.Dashboard?(toggleElementsState("#aidata-usage, #widget-summarize, #dashboard-summarize, #aichat-help",!0),a=[],getCheckedValue("widget-summarize")&&a.push("ws"),getCheckedValue("dashboard-summarize")&&a.push("ds"),a.length&&(l+="&enable_ai_summary="+a.join(",")),i=[],getCheckedValue("aidata-usage")||i.push("du"),getCheckedValue("aichat-help")||i.push("ch"),i.length&&(l+="&hide_ai_icons="+i.join(","))):toggleElementsState("#aidata-usage, #widget-summarize, #dashboard-summarize, #aichat-help",!1);var d=generateEmbedSignatureUrl+"/generate-signature",u=generateGUID(),r=Math.round(Date.now()/1e3),a=window.currentUserId,u="embed_nonce="+u,m="edit"!=selectedMode&&$("#embed-export").is(":checked")?"&export=true":"",g=`&embed_timestamp=${r}&embed_expirationtime=`+($("#expirationtime-signature").val()||"604800"),i=u+"&embed_user_id="+a+l+m+p+h+c+g;return $("#embed-signature").is(":checked")?($.ajax({type:"POST",url:d,data:{json:i},async:!0,success:function(e){var t,i;!1===e.success?($("#embed-error-message").removeClass("text-success").addClass("text-danger").text(e.message).show(),$("#embed-code").val(""),$("#copy-embed-code").hide(),$("#copy-dashboard-link").hide()):(t="&embed_signature="+e.embedSignature,i=(s=s.replace(/([?&])isembed=true(&)?/,(e,t,i)=>"?"===t&&i?"?":"&"===t&&i?"&":"")).includes("?")?"&":"?",i=`<iframe src='${s}${i}${u}&embed_user_email=${e.email}${l}${m}${p}${h}${c}${g}${t}' id='dashboard-frame' width='${n}' height='${o}' allowfullscreen frameborder='0'></iframe>`,$("#embed-code").val(i),$("#embed-error-message").hide(),$("#copy-embed-code").show(),$("#copy-dashboard-link").show())},error:function(e,t,i){$("#embed-error-message").removeClass("text-success").addClass("text-danger").text("An error occurred. Please try again.").show(),$("#embed-code").val(""),$("#copy-embed-code").hide(),$("#copy-dashboard-link").hide()}}),"Generating Embed signature. Please wait..."):($("#embed-error-message").hide(),$("#copy-embed-code").show(),$("#copy-dashboard-link").show(),`<iframe src='${s}${l}${p}${h}${c}' id='dashboard-frame'  width='${n}' height='${o}' allowfullscreen frameborder='0'></iframe>`)}$(document).ready(function(){$(document).on("click","#add-owner-button",addGroupOwnerDialogOpen),$(document).on("click","#access-mode-change-link",changeAccessMode),$(document).on("click",".get-embed-link",getEmbedCode),$(document).on("click","#show-shared-user-group-link",showManageAccessContainer),$(document).on("click","#share-permission-button",saveItemPermission),$(document).on("click","#add-owner-permission-button",addGroupOwnerPermission)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll('[data-bs-toggle="popover"]');0<e.length&&e.forEach(function(e){new bootstrap.Popover(e,{container:"body"})})}),shareItem.controller("shareItemController",["$scope",function(s){s.currentUserId=window.currentUserId,s.downloadPermissionAccess=window.downloadPermissionAccess,s.downloadPermissionAccessId=window.downloadPermissionAccessId,s.sharedUserGroups=window.sharedUserGroupList,s.accessModes=window.accessModeList,s.showPopover=!1,s.currentItemType=ItemType.Dashboard,s.isAdmin=!1,s.isDashboardPublic=!1,s.hasDashboardSettingsPermission=!1,s.isUnlisted=!1,s.isMarkItemsPublic=!1,s.formatAccessModeString=function(e){return e.toString()},s.ImageLink=function(e){return idpUrl+"/User/Avatar?id="+e+"&ImageSize=64"};s.GetGroupColor=function(e,t){return{"background-color":"#dfdfdf"}},s.typeOptions=[{Key:2,Value:"Read"}],s.parseInt=function(e){return parseInt(e,10)},s.updateValue=function(e,t){s.CheckForModification(e,t)},s.MarkForDeletion=function(e,t,i){s.AddItemInUserGroupDeletionList(i),s.RemoveFromModified(i);i=angular.element(e.currentTarget).parents(".shared-user-group-list-section").children();i.find(".action-for-delete-container").hide(),i.find(".marked-for-delete-container").show(),i.find(".change-indicator").show(),s.ShowChangeIndicatorBanner()},s.RemoveMarkForDeletion=function(e,t,i){s.RemoveItemInUserGroupDeletionList(i);e=angular.element(e.currentTarget).parents(".shared-user-group-list-section").children();e.find(".marked-for-delete-container").hide(),e.find(".action-for-delete-container").show(),e.find(".change-indicator").hide(),s.CheckForModification(t,i)},s.CheckForModification=function(e,t){currentItemDetail.ItemType!=ItemType.ItemView&&(sharedUserGroupsPreservedList[t].PermissionAccess!=e?(s.AddToModified(t),$("#select_"+t).parents(".shared-user-group-list-section").children().find(".change-indicator").show()):sharedUserGroupsPreservedList[t].PermissionAccess==e&&(s.RemoveFromModified(t),$("#select_"+t).parents(".shared-user-group-list-section").children().find(".change-indicator").hide())),s.ShowChangeIndicatorBanner()},s.ShowChangeIndicatorBanner=function(){($(".change-indicator").is(":visible")?(changeIndicatorBannerObj.css("visibility","visible"),manageAccessSaveBtnObj.show(),manageAccessCancelBtnObj.show(),shareDoneBtnObj.hide(),disableAutomCompleteControl(),disableAutocompleteAccessModeSelection):(changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareDoneBtnObj.show(),enableAutomCompleteControl(),enableAutocompleteAccessModeSelection))()},s.AddItemInUserGroupDeletionList=function(e){s.IsUserItem(e)?-1==jQuery.inArray(sharedUserGroupsPreservedList[e].PermissionId,userMarkedForDeletionList)&&userMarkedForDeletionList.push(sharedUserGroupsPreservedList[e].PermissionId):s.IsGroupItem(e)&&-1==jQuery.inArray(sharedUserGroupsPreservedList[e].PermissionId,groupMarkedForDeletionList)&&groupMarkedForDeletionList.push(sharedUserGroupsPreservedList[e].PermissionId)},s.RemoveItemInUserGroupDeletionList=function(t){s.IsUserItem(t)?-1!=jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,userMarkedForDeletionList)&&(userMarkedForDeletionList=jQuery.grep(userMarkedForDeletionList,function(e){return e!=sharedUserGroupsPreservedList[t].PermissionId})):s.IsGroupItem(t)&&-1!=jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,groupMarkedForDeletionList)&&(groupMarkedForDeletionList=jQuery.grep(groupMarkedForDeletionList,function(e){return e!=sharedUserGroupsPreservedList[t].PermissionId}))},s.AddToModified=function(e){-1==jQuery.inArray(e,modifiedItemIndex)&&modifiedItemIndex.push(e)},s.RemoveFromModified=function(t){modifiedItemIndex=jQuery.grep(modifiedItemIndex,function(e){return e!=t})},s.IsUserItem=function(e){return null!=sharedUserGroupsPreservedList[e].Email&&sharedUserGroupsPreservedList[e].IsUserPermission&&0<sharedUserGroupsPreservedList[e].TargetUserId},s.IsGroupItem=function(e){return null==sharedUserGroupsPreservedList[e].Email&&!sharedUserGroupsPreservedList[e].IsUserPermission&&0<sharedUserGroupsPreservedList[e].TargetGroupId},s.getDashboardEmbedCode=getDashboardEmbedCode,s.GetManagePermisisionContent=function(e){var t=null!=window.granularPermissions&&window.granularPermissions.Dashboard,i=sharedUserGroupsPreservedList[e].PermissionEntityDescription;return s.IsUserItem(e)?isAdmin||t?(t=editUserPermissionUrl+"?userId="+sharedUserGroupsPreservedList[e].TargetUserId,window.Server.App.Localization.UserPermissionWithAdmin.format("<strong>"+i+"</strong>","</br></br>","<a target='_blank' href='"+t+"'>","</a>")):window.Server.App.Localization.UserPermissionNonAdmin.format("<strong>"+i+"</strong>","</br></br>"):isAdmin?(t=editGroupPermissionUrl+"?groupId="+sharedUserGroupsPreservedList[e].TargetGroupId,window.Server.App.Localization.GroupPermissionWithAdmin.format("<strong>"+i+"</strong>","</br></br>","<a target='_blank' href='"+t+"'>","</a>")):window.Server.App.Localization.GroupPermissionNonAdmin.format("<strong>"+i+"</strong>","</br></br>")}}]),$(function(){sharePermissionDlgObj=$("#share-permission-popup"),sharePermisisonDlgHeader=$("#share-permission-dialog-header"),sharePermissionDlgHeaderItemName=$(".item-name-container #item-name-header"),sharePermissionConatiner=$("#share-permission-container"),accessModeContainer=$("#access-mode-container"),dummyContainer=$("#dummy-container"),embedCodeContainer=$("#get-embed-code-container"),sharePermissionDashboardSettingSectionObj=$(".share-permission-dashboard-setting-section"),sharePermissionPublicSectionObj=$(".share-permission-public-section"),sharePermissionPrivateSectionObj=$(".share-permission-private-section"),sharePermissionUserGroupSectionObj=$("#assign-user-group-container"),manageUserGroupContainer=$("#manage-user-group-container"),manageUserGroupBodySection=$(".manage-user-group-body-section"),getEmbedLinkSection=$(".get-item-embed-link-section"),embedConfiguration=$(".embed-configuration"),changeIndicatorBannerObj=$(".changes-indicator-banner"),shareWithLabelObj=$(".share-with-label"),getLinkInputObj=$("#item-url"),getLinkCopyLinkobj=$("#item-url-copy"),getEmbedCodeInputObj=$("#embed-code"),getEmbedCodeCopyBtnobj=$("#copy-embed-code"),getDashboardLinkCopyBtnobj=$("#copy-dashboard-link"),accessModeChangeLink=$("#access-mode-change-link"),manageAccessButton=$("#manage-access-button"),manageAccessBackButton=$("#manage-access-back-button"),manageAccessSaveBtnObj=$("#manage-access-save-button"),manageAccessCancelBtnObj=$("#manage-access-cancel-button"),shareDoneBtnObj=$("#share-done-popup-button"),shareBtnObj=$("#share-permission-button"),accessModeChngBtnObj=$("#access-mode-change-button"),accessModeCancelBtnObj=$("#access-mode-cancel-button"),embedCodeDoneBtnObj=$("#copy-embed-code-done-button"),embedCodeBackButton=$("#copy-embed-code-back-button"),addOwnerBtnObj=$("#add-owner-permission-button"),publicRadioBtnObj=$("#public-access-mode"),privateRadioBtnObj=$("#private-access-mode"),accessModeSelectionInput=$("#access-mode-selection"),markForDeleteBtnObj=$(".mark-for-deletion-icon"),removeMarkForDeleteBtnObj=$(".remove-mark-for-deletion-icon"),showSharedUserGroupContainer=$("#show-shared-user-group-container"),showSharedUserGroupNameSection=$(".shared-user-group-name-section"),showSharedUserGroupName=$(".shared-user-group-name"),showSharedUserGroupCountSection=$(".shared-user-group-count-section"),showSharedUserGroupCount=$(".shared-user-group-count"),toggleMarkForDeletionObj=$(".action-for-delete-container, .marked-for-delete-container");createLoader("permission-popup_wrapper");sharePermissionDlgWrapperObj=$("#share-permission-popup_wrapper");var e=createLoader("share-permission-popup_wrapper"),t={width:"529px",showOnInit:!1,allowDraggable:!1,enableResize:!1,showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"onSharePermissionPopupClose",open:"onSharePermissionPopupOpen",cssClass:"server-dialog"};"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog(t),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup({template:$("#"+e)}),$("#share-close-popup, #share-done-popup-button").on("click",function(){isAccessModeChanges=!1,sharePermissionDlgObj.BoldBIDashboardDialog("close"),isWidget&&(sharePermissionConatiner.show(),embedCodeContainer.hide(),embedConfiguration.show(),manageAccessButton.hide(),isWidget=!1)})):(sharePermissionDlgObj.ejDialog(t),sharePermissionDlgWrapperObj.ejWaitingPopup({template:$("#"+e)}),$("#share-close-popup, #share-done-popup-button").on("click",function(){isAccessModeChanges=!1,sharePermissionDlgObj.ejDialog("close"),isWidget&&(sharePermissionConatiner.show(),embedCodeContainer.hide(),embedConfiguration.show(),manageAccessButton.hide(),isWidget=!1)})),accessModeCancelBtnObj.on("click",function(){isAccessModeChanges=!1,showSharePermissionContainer()}),manageAccessButton.on("click",function(){showManageAccessContainer()}),manageAccessBackButton.on("click",function(){showSharePermissionContainerWithRefresh()}),manageAccessSaveBtnObj.on("click",function(){$('[data-bs-toggle="popover"]').popover("hide"),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),prepareRequestForAddItemPermission(),updateBulkItemPermission()}),manageAccessCancelBtnObj.on("click",function(){manageAccessCancelBtn(),generateProfileAvatar()}),getLinkCopyLinkobj.on("click",function(e){getLinkInputObj.select(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?getLinkCopyLinkobj.attr("data-original-title",""):(document.execCommand("copy"),getLinkCopyLinkobj.attr("data-original-title",window.Server.App.Localization.Copysuccess),getLinkCopyLinkobj.tooltip("hide").attr("data-original-title",window.Server.App.Localization.Copysuccess).tooltip("fixTitle").tooltip("show"),setTimeout(function(){getLinkCopyLinkobj.attr("data-original-title",window.Server.App.Localization.LinkCopy),getLinkCopyLinkobj.tooltip()},3e3))}),getLinkCopyLinkobj.removeClass("focusdiv"),getLinkInputObj.on("focusin",function(){getLinkCopyLinkobj.addClass("focusdiv")}),getLinkInputObj.on("focusout",function(){getLinkCopyLinkobj.removeClass("focusdiv")}),$("input[type=radio][name=access-mode]").on("change",function(){isItemPublic&&privateRadioBtnObj.prop("checked")||!isItemPublic&&publicRadioBtnObj.prop("checked")?(accessModeChngBtnObj.removeAttr("disabled"),$("#make-unlisted").prop("checked",!1),isAccessModeChanges=!0):(accessModeChngBtnObj.attr("disabled",!0),$("#make-unlisted").prop("checked",isItemUnlisted))}),$(document).on("click","#make-unlisted",function(){isItemUnlisted&&!$("#make-unlisted").prop("checked")||!isItemUnlisted&&$("#make-unlisted").prop("checked")?accessModeChngBtnObj.prop("disabled")&&accessModeChngBtnObj.removeAttr("disabled"):!isAccessModeChanges&&(!isItemUnlisted&&!$("#make-unlisted").prop("checked")||isItemUnlisted&&$("#make-unlisted").prop("checked"))&&accessModeChngBtnObj.attr("disabled",!0)}),$(document).on("click","#access-mode-change-button",function(e){isAccessModeChanges=!1;var t=$(this).attr("data-item-id"),i=$(this).attr("data-name"),s=$(this).attr("data-itemtype"),o=($(this).attr("data-category-name"),"");isItemPublic&&privateRadioBtnObj.prop("checked")?o=removeItemPublicUrl:!isItemPublic&&publicRadioBtnObj.prop("checked")&&(o=makeItemPublicUrl),$("#progress-alert-container").css("z-index",$("#share-permission-popup_wrapper").css("z-index")+1),""!=o&&$.ajax({type:"POST",url:o,data:{itemId:t,itemTypeId:s,itemName:i},async:!1,success:function(e){e.validation&&e.result?void 0!==currentItemDetail&&void 0!==currentItemDetail.IsPublic&&(currentItemDetail.IsPublic=!currentItemDetail.IsPublic):warningToast(window.Server.App.Localization.InternalServerError)}}),isItemUnlisted=$("#make-unlisted").prop("checked"),$.ajax({type:"POST",url:makeItemUnlistedUrl,data:{itemId:t,isUnlisted:isItemUnlisted},async:!1,success:function(e){e.validation&&e.result?void 0!==currentItemDetail&&void 0!==currentItemDetail.IsUnlisted&&(currentItemDetail.IsUnlisted=isItemUnlisted):warningToast(window.Server.App.Localization.InternalServerError)},error:function(){warningToast(window.Server.App.Localization.InternalServerError)}}),"function"==typeof ResetItemList&&ResetItemList(ItemType.Dashboard),showSharePermissionContainer(),isItemPublic&&privateRadioBtnObj.prop("checked")?(showPrivateContent(),isItemPublic=!1):!isItemPublic&&publicRadioBtnObj.prop("checked")&&(showPublicContent(),isItemPublic=!0)}),$(document).on("shown.bs.dropdown",".user-group-scroll-content .change-access-mode-select",function(){var e,t;$(".tooltip").hide(),0<$(this).find(".change-access-mode-selection").length&&(t=manageUserGroupBodySection,e=$(this).offset().top+$(this).outerHeight(!0)/2-t.offset().top,t.height()-($(this).offset().top-t.offset().top+$(this).outerHeight(!0)/2)<=(t=$(this).find(".change-access-mode-selection .dropdown-menu").outerHeight(!0))&&t<=e?$(this).find(".change-access-mode-selection").removeClass("dropdown").addClass("dropup"):refreshUserGroupScroll())}),$.views.helpers({getUserGroupLogo:function(e){return"user"==e?"<img src='' alt='Profile Picture' id='' >":"<div class='group-logo' style=''> <i class='su su-group-1'></i></div >"}}),$("body").on("click",function(e){"popover"!==$(e.target).data("toggle")&&0===$(e.target).parents('[data-bs-toggle="popover"]').length&&0===$(e.target).parents(".popover.in").length?$('[data-bs-toggle="popover"]').popover("hide"):"popover"==$(e.target).data("toggle")&&$(".access-info-icon").not(e.target).popover("hide")}),getEmbedCodeInputObj.on("click",function(e){getEmbedCodeInputObj.select()}),getEmbedCodeCopyBtnobj.on("click",function(e){getEmbedCodeInputObj.select(),document.execCommand("copy");var t=$(".embed-copy-success");t.show(),setTimeout(function(){t.fadeOut(3e3)},3e3)}),getDashboardLinkCopyBtnobj.on("click",function(e){var t,i,s=$("#embed-code").val(),s=$(s).filter("iframe").attr("src");s&&(t=$("<textarea>"),$("body").append(t),t.val(s).select(),document.execCommand("copy"),t.remove(),(i=$(".embed-url-copy-success")).show(),setTimeout(function(){i.fadeOut(3e3)},3e3))}),embedCodeDoneBtnObj.on("click",function(){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog("close"):sharePermissionDlgObj.ejDialog("close")}),embedCodeBackButton.on("click",function(){showSharePermissionContainer()}),$(".embed-configuration [type='checkbox']").on("change",function(e){var t=$("#embed-sso").is(":checked"),i=$("#embed-signature").is(":checked");t&&i&&("embed-sso"===this.id?$("#embed-signature").prop("checked",!1):"embed-signature"===this.id&&$("#embed-sso").prop("checked",!1)),$("#embed-code").val(generateEmbedCode(currentItemDetail)),$("#embed-signature").is(":checked")?$(".expiration-time-row").removeClass("hide"):$(".expiration-time-row").addClass("hide"),$("#embed-sso").is(":checked")?$(".auth-provider-row").removeClass("hide"):$(".auth-provider-row").addClass("hide"),refreshDialogBoxPosition()}),$(document).on("change",".expirationtime-signature, .sso-providers, .mode-selection",function(){$(this).hasClass("mode-selection")&&(selectedMode=$("#mode-selection").val().toLowerCase()),$("#embed-code").val(generateEmbedCode(currentItemDetail))}),$("#embed-width-input, #embed-height-input, #language-code").on("input",function(){var e=validateInput($("#embed-width-input")),t=validateInput($("#embed-height-input"));e&&t?$("#width-height-error").hide():$("#width-height-error").show(),$("#embed-code").val(generateEmbedCode(currentItemDetail))}),document.querySelectorAll("#embedAIAccordion .accordion-header, #embedwidgetAccordion .accordion-header, #embedAccordion .accordion-header").forEach(e=>{e.addEventListener("click",function(){toggleAccordion(this)})})}),$(document).on("click","#show-shared-user-group-link",function(e){showManageAccessContainer()});