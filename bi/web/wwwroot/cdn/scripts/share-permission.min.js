/*!
*  filename: share-permission.min.js
*  version : unknown version
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function intializeGetLinkDialog(){$.ajax({type:"Get",url:getLinkDialogViewUrl,success:function(n){$("body").append(n)}})}function GetLink(n){var r=n.ItemType,u,o,f,i,e,t;r==2?$(".dashboard-link").show():r==6?($(".file-link").show(),$("#compressed-link").prop("checked",!0)):r==8?$(".widget-link").show():$(".link").show();u=n.Name;o=n.Id;document.getElementById("get_item_link").style.display="block";f='<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.GetLink+'<\/span><span class="item-name">'+n.Name+"<\/span><\/span>";isGetLinkDialogBinded?(t=document.getElementById("get_item_link_dialog").ej2_instances,t[0].header=f,t[0].show()):(i=document.createElement("div"),i.setAttribute("id","get_item_link_dialog"),e=document.getElementById("dashboard-page-container"),e.appendChild(i),t=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:window.innerWidth>460?"450px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:f,showCloseIcon:!0,open:onGetLinkDialogOpen,content:document.getElementById("get_item_link"),buttons:[{click:function(){t.hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.OKButton}},]}),t.appendTo(i),isGetLinkDialogBinded=!0);ejs.popups.createSpinner({target:document.getElementById("get_item_link_dialog")});ejs.popups.setSpinner({type:"Material"});ejs.popups.showSpinner(document.getElementById("get_item_link_dialog"));intializeGetLinkDialog();ejs.popups.hideSpinner(document.getElementById("get_item_link_dialog"));$(".get_link").show();n.IsPublic?($(".private-note").hide(),$(".public-note").show()):($(".private-note").show(),$(".public-note").hide());/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").hide(),$("#item-link").css({width:"100%",borderRadius:"4px"}),$("#item-link-copy").attr("data-original-title","")):$("#item-link-copy").tooltip({animation:!1});$(".report-name").html(u);$(".report-name").attr("title",u);$("#item-link").val(getDashboardShareLink(n.Id,n.CategoryName,n.Name));$("#item-link").select();$(".modal-footer .validation-area").css("display","block")}function onGetLinkDialogOpen(){$("#item-link").select();$(".get_link").show();$("#item-link").val(itemUrl.trim());/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").hide(),$("#item-link-copy").attr("data-original-title",""))}function getDashboardShareLink(n,t,i,r){var u=baseUrl.split("/");return encodeURI(u[0]+"//"+u[2]+(r?r:viewDashboardUrlAction)+"/"+n+"/"+t+"/"+i)}function manageAccessCancelBtn(){$('[data-toggle="popover"]').popover("hide");resetToActualScope();enableAutomCompleteControl();enableAutocompleteAccessModeSelection()}function shareDashboardPermission(n,t){var r,u,o,f;currentItemDetail=n;currentDashboardDetail=t;var s=window.granularPermissions!=null?window.granularPermissions.All||window.granularPermissions.DashboardSettings:!1,e=window.granularPermissions!=null?window.granularPermissions.Dashboard:!1,h=window.granularPermissions!=null?window.granularPermissions.Slideshow:!1,c=window.granularPermissions!=null?window.granularPermissions.Datasource:!1,l=window.granularPermissions!=null?window.granularPermissions.Category:!1,i=angular.element("#share-permission-content-section").scope();i.currentItemType=n.ItemType;i.isAdmin=isAdmin;i.hasDashboardSettingsPermission=isAdmin||s;isItemUnlisted=n.IsUnlisted;t!=null&&(i.isDashboardPublic=t.IsPublic);r=0;r=n.ItemType==ItemType.Category||n.ItemType==ItemType.Datasource?241:n.ItemType==ItemType.Slideshow?356:n.ItemType==ItemType.ItemView?418:isMarkItemsPublicForShareDialog?n.IsMultiDashboard?n.IsPublic?407:391:n.IsPublic?434:418:n.IsMultiDashboard?335:362;typeof BoldBIDashboard!="undefined"?sharePermissionDlgObj.BoldBIDashboardDialog({height:r}):sharePermissionDlgObj.ejDialog({height:r});sharePermissionDlgHeaderItemName.text(n.Name);sharePermissionDlgObj.show();$("#share-permission-popup_wrapper, #user-group-search-input_suggestion").addClass("custom-bootstrap-styles");typeof BoldBIDashboard!="undefined"?sharePermissionDlgObj.BoldBIDashboardDialog("open"):sharePermissionDlgObj.ejDialog("open");n.ItemType==ItemType.Dashboard||n.ItemType==ItemType.ItemView?n.CreatedById==currentUserId||isAdmin||e?(isMarkItemsPublicForShareDialog||n.ItemType==ItemType.ItemView||!isMarkItemsPublicForShareDialog&&n.ItemType==ItemType.Dashboard?n.IsPublic?showPublicContent():showPrivateContent():showDashboardSettingContent(),addAttributeValueToBtnEle(n)):(hidePublicPrivateContent(),u=n.IsMultiDashboard?312:339,typeof BoldBIDashboard!="undefined"?sharePermissionDlgObj.BoldBIDashboardDialog({height:u}):sharePermissionDlgObj.ejDialog({height:u})):hidePublicPrivateContent();n.ItemType==ItemType.Dashboard?n.CreatedById==currentUserId||isAdmin||e?showShareDialogContent(n):hideShareUserGroupPermissionSection():n.ItemType==ItemType.Slideshow?n.CreatedById==currentUserId||isAdmin||h?showShareDialogContent(n):hideShareUserGroupPermissionSection():n.ItemType==ItemType.Datasource?n.CreatedById==currentUserId||isAdmin||c?showShareDialogContent(n):hideShareUserGroupPermissionSection():n.ItemType==ItemType.Category?n.CreatedById==currentUserId||isAdmin||l?showShareDialogContent(n):hideShareUserGroupPermissionSection():n.CreatedById==currentUserId||isAdmin?showShareDialogContent(n):hideShareUserGroupPermissionSection();/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-url-copy").hide(),$("#item-url").css({width:"100%",borderRadius:"4px"}),$("#item-url-copy").attr("data-original-title","")):$("#item-url-copy").tooltip({animation:!1});switch(n.ItemType){case ItemType.Dashboard:$("#item-url").val(getDashboardShareLink(n.Id,n.CategoryName,n.Name));break;case ItemType.ItemView:o=getDashboardShareLink(t.Id,t.CategoryName,t.Name);$("#item-url").val(o+"?viewid="+n.Id);break;case ItemType.Slideshow:f=baseUrl.split("/");$("#item-url").val(f[0]+"//"+f[2]+slideShowUrl+"/"+n.Id+"/"+n.Name);break;default:$("#item-url").val("")}}function addGroupOwnerDialogOpen(){var t=$("#add-owner-button").attr("data-groupname"),n=$("#add-owner-button").attr("data-groupid"),i=angular.element("#share-permission-content-section").scope();currentItemDetail.ItemType=ItemType.UserManagement;i.currentItemType=ItemType.UserManagement;i.isAdmin=isAdmin;typeof BoldBIDashboard!="undefined"?sharePermissionDlgObj.BoldBIDashboardDialog({height:241}):sharePermissionDlgObj.ejDialog({height:241});sharePermisisonDlgHeader.text(window.Server.App.Localization.AddGroupOwnerBtn);sharePermissionDlgHeaderItemName.text(t);sharePermissionDlgObj.show();$("#share-permission-popup_wrapper, #user-group-search-input_suggestion").addClass("custom-bootstrap-styles");typeof BoldBIDashboard!="undefined"?sharePermissionDlgObj.BoldBIDashboardDialog("open"):sharePermissionDlgObj.ejDialog("open");hidePublicPrivateContent();getGroupUserPermission(n);addOwnerBtnObj.attr("data-item-id",n);addOwnerBtnObj.attr("data-name",t);addOwnerBtnObj.attr("data-itemtype",ItemType.UserManagement);autoCompleteHiddenEle.attr("data-item-id",n);autoCompleteHiddenEle.attr("data-itemtype",ItemType.UserManagement)}function showShareDialogContent(n){showShareUserGroupPermissionSection();getShareItemPermission(n.Id);addAttributeValueToBtnEle(n);addAttributeValueToAutoCompleteEle(n)}function onSharePermissionPopupOpen(){$('[data-toggle="popover"]').popover("hide");typeof BoldBIDashboard!="undefined"?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("refresh"):sharePermissionDlgWrapperObj.ejWaitingPopup("refresh");isGetEmbedCodeTriggered==!1&&showSharePermissionContainer();refreshDialogBoxPosition()}function onSharePermissionPopupClose(){currentItemDetail=[];$(".embed-configuration [type='checkbox']").prop("checked",!1);$("#mode-selection").val("view");$("#sso-providers").val("OpenID");selectedMode="";$(".auth-provider-row").addClass("hide");$('[data-toggle="popover"]').popover("hide");showSharePermissionContainer();typeof BoldBIDashboard!="undefined"?(sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("refresh"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide")):(sharePermissionDlgWrapperObj.ejWaitingPopup("refresh"),sharePermissionDlgWrapperObj.ejWaitingPopup("hide"));isGetEmbedCodeTriggered=!1;refreshDialogBoxPosition()}function showAccessModeContainer(){sharePermisisonDlgHeader.text(window.Server.App.Localization.SharePermissionAccessMode);accessModeContainer.show();accessModeChngBtnObj.show();accessModeCancelBtnObj.show();sharePermissionConatiner.hide();manageAccessButton.hide();shareBtnObj.hide();shareDoneBtnObj.hide();refreshDialogBoxPosition();currentItemDetail.ItemType!=ItemType.Dashboard||isMarkItemsPublicForShareDialog||sharePermissionDashboardSettingSectionObj.show()}function showManageAccessContainer(){sharePermissionDashboardSettingSectionObj.hide();showSharedUserGroupContainer.hide();shareBtnObj.text(window.Server.App.Localization.AddPeopleBtn);addOwnerBtnObj.text(window.Server.App.Localization.AddPeopleBtn);sharePermisisonDlgHeader.text(window.Server.App.Localization.ManageAccess);dummyContainer.hide();autoCompleteInstance.getValue()==""&&(shareBtnObj.hide(),addOwnerBtnObj.hide());currentItemDetail.ItemType==ItemType.UserManagement&&($(".change-access-mode-selection span").removeClass("caret"),$(".change-access-mode-selection button").attr("disabled",!0));manageAccessBackButton.show();manageUserGroupContainer.show();manageAccessButton.hide();refreshUserGroupScroll();refreshDialogBoxPosition();generateProfileAvatar()}function hideManageAccessContainer(){manageUserGroupContainer.hide();manageAccessSaveBtnObj.hide();manageAccessCancelBtnObj.hide();embedCodeDoneBtnObj.hide();embedCodeBackButton.hide();embedCodeContainer.hide();changeIndicatorBannerObj.css("visibility","hidden");resetPreRequestValues()}function showSharePermissionContainer(){currentItemDetail.ItemType==ItemType.UserManagement?(sharePermisisonDlgHeader.text(window.Server.App.Localization.AddGroupOwnerBtn),$(".show-shared-user-group-label").text("Group Owners :")):sharePermisisonDlgHeader.text(window.Server.App.Localization.SharePermissionDefault);dummyContainer.show();shareBtnObj.text(window.Server.App.Localization.SharePeopleBtn);enableAutocompleteAccessModeSelectionWithoutReset();refreshAutoComplete();sharePermissionConatiner.show();manageAccessButton.show();shareDoneBtnObj.show();manageAccessBackButton.hide();hideManageAccessContainer();accessModeContainer.hide();accessModeChngBtnObj.hide();accessModeCancelBtnObj.hide();displaySharedUserGroupInfo();currentItemDetail.ItemType==ItemType.Dashboard?typeof BoldBIDashboard!="undefined"&&currentItemDetail.Extension.toLowerCase()==".sydj"||currentItemDetail.IsMultiDashboard?getEmbedLinkSection.show():!ej.isNullOrUndefined(currentItemDetail.Extension)&&currentItemDetail.Extension.toLowerCase()==".sydj"||currentItemDetail.IsMultiDashboard?getEmbedLinkSection.show():getEmbedLinkSection.hide():currentItemDetail.ItemType==ItemType.ItemView&&getEmbedLinkSection.show();embedCodeDoneBtnObj.hide();embedCodeBackButton.hide();sharePermissionDlgHeaderItemName.show();sharePermisisonDlgHeader.css("line-height","");refreshDialogBoxPosition()}function showSharePermissionContainerWithRefresh(){$('[data-toggle="popover"]').popover("hide");resetToActualScope();hideManageAccessContainer();enableAutocompleteAccessModeSelectionWithoutReset();autoCompleteHiddenEle.attr("data-itemtype")!=ItemType.UserManagement?sharePermisisonDlgHeader.text(window.Server.App.Localization.SharePermissionDefault):sharePermisisonDlgHeader.text(window.Server.App.Localization.AddGroupOwnerBtn);displaySharedUserGroupInfo();dummyContainer.show();shareBtnObj.text(window.Server.App.Localization.SharePeopleBtn);addOwnerBtnObj.text(window.Server.App.Localization.AddGroupOwnerBtn);showPublicPrivateContent();sharePermissionConatiner.show();manageAccessButton.show();autoCompleteInstance.getValue()!=""?(autoCompleteHiddenEle.attr("data-itemtype")!=ItemType.UserManagement?shareBtnObj.show():addOwnerBtnObj.show(),manageAccessCancelBtnObj.show(),shareDoneBtnObj.hide()):shareDoneBtnObj.show();manageAccessBackButton.hide();accessModeContainer.hide();accessModeChngBtnObj.hide();accessModeCancelBtnObj.hide();refreshDialogBoxPosition()}function showDashboardSettingContent(){sharePermissionPublicSectionObj.hide();sharePermissionPrivateSectionObj.hide();sharePermissionDashboardSettingSectionObj.show()}function showPublicContent(){sharePermissionPublicSectionObj.show();sharePermissionPrivateSectionObj.hide();isItemPublic=!0}function showPrivateContent(){sharePermissionPublicSectionObj.hide();sharePermissionPrivateSectionObj.show();isItemPublic=!1}function showPublicOrPrivateContent(){isItemPublic?showPublicContent():showPrivateContent()}function showShareUserGroupPermissionSection(){sharePermissionUserGroupSectionObj.show()}function hideShareUserGroupPermissionSection(){sharePermissionUserGroupSectionObj.hide()}function hidePublicPrivateContent(){sharePermissionPublicSectionObj.hide();sharePermissionPrivateSectionObj.hide();sharePermissionDashboardSettingSectionObj.hide()}function showPublicPrivateContent(){var n=window.granularPermissions!=null?window.granularPermissions.Dashboard:!1;currentItemDetail.ItemType==ItemType.Dashboard||currentItemDetail.ItemType==ItemType.ItemView?currentItemDetail.CreatedById==currentUserId||isAdmin||n?isMarkItemsPublicForShareDialog||currentItemDetail.ItemType==ItemType.ItemView?isItemPublic?sharePermissionPublicSectionObj.show():sharePermissionPrivateSectionObj.show():sharePermissionDashboardSettingSectionObj.show():hidePublicPrivateContent():hidePublicPrivateContent()}function changeAccessMode(){manageAccessCancelBtn();typeof BoldBIDashboard!="undefined"?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show");showAccessModeContainer();isItemPublic?publicRadioBtnObj.prop("checked",!0):privateRadioBtnObj.prop("checked",!0);$("#make-unlisted").prop("checked",isItemUnlisted);accessModeChngBtnObj.attr("disabled",!0);typeof BoldBIDashboard!="undefined"?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide")}function getEmbedCode(){embedCodeDialog();embedCodeBackButton.show()}function embedCodeDialog(){$("#embed-code").val(generateEmbedCode(currentItemDetail));embedCodeContainer.show();$("#mode-selection").selectpicker("refresh");$("#sso-providers").selectpicker("refresh");sharePermisisonDlgHeader.text(window.Server.App.Localization.EmbedCode);/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&getEmbedCodeCopyBtnobj.hide();currentItemDetail.IsPublic?($(".private-embed-code-note").hide(),$(".public-embed-code-note").show()):($(".private-embed-code-note").show(),$(".public-embed-code-note").hide());embedCodeDoneBtnObj.show();manageAccessBackButton.hide();manageAccessSaveBtnObj.hide();manageAccessCancelBtnObj.hide();sharePermissionDlgHeaderItemName.hide();sharePermisisonDlgHeader.css("line-height","32px");sharePermissionConatiner.hide();manageAccessButton.hide();shareBtnObj.hide();shareDoneBtnObj.hide();isEntireDOMRendered=!0;refreshDialogBoxPosition()}function getEmbedCodeFromContext(){embedCodeDialog()}function addAttributeValueToBtnEle(n){accessModeChngBtnObj.attr("data-item-id",n.Id);accessModeChngBtnObj.attr("data-name",n.Name);accessModeChngBtnObj.attr("data-itemtype",n.ItemType);accessModeChngBtnObj.attr("data-category-name",n.CategoryName);shareBtnObj.attr("data-item-id",n.Id);shareBtnObj.attr("data-name",n.Name);shareBtnObj.attr("data-itemtype",n.ItemType)}function addAttributeValueToAutoCompleteEle(n){autoCompleteHiddenEle.attr("data-item-id",n.Id);autoCompleteHiddenEle.attr("data-itemtype",n.ItemType)}function getShareItemPermission(n){typeof BoldBIDashboard!="undefined"?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show");$.ajax({type:"get",url:getShareItemPermissionUrl,data:{itemId:n},contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){if(n.status){var t=angular.element("#share-permission-content-section").scope();t.$apply(function(){angular.copy(n.SharedUserGroupList,sharedUserGroupsPreservedList);t.sharedUserGroups=n.SharedUserGroupList});t.$apply(function(){angular.copy(n.AccessModeOptionList,sharedAccessModePreservedList);t.accessModes=n.AccessModeOptionList});t.$apply(function(){t.isMarkItemsPublic=n.isItemPublic});isMarkItemsPublicForShareDialog=n.isItemPublic;currentItemDetail.ItemType==ItemType.ItemView?$("#user-group-search-input_suggestion").removeClass("item-user-input_suggestion"):$("#user-group-search-input_suggestion").addClass("item-user-input_suggestion");$(".change-access-mode-selection").selectpicker("refresh");$(".change-access-mode-selection .selectpicker").removeAttr("title");accessModeSelectionInput.html("");accessModeSelectionInput.append(n.AccessModeList);accessModeSelectionInput.selectpicker("refresh");refreshUserGroupScroll();typeof BoldBIDashboard!="undefined"?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide");displaySharedUserGroupInfo();isEntireDOMRendered=!0;$('[data-toggle="tooltip"]').tooltip();$('[data-toggle="popover"]').popover()}},error:function(){warningToast(window.Server.App.Localization.InternalServerError);typeof BoldBIDashboard!="undefined"?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide")}})}function getGroupUserPermission(n){typeof BoldBIDashboard!="undefined"?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show");$.ajax({type:"get",url:getGroupOwnersUrl,data:{groupId:n},contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){if(n.status){var t=angular.element(manageUserGroupBodySection).scope();t.$apply(function(){angular.copy(n.SharedUserGroupList,sharedUserGroupsPreservedList);t.sharedUserGroups=n.SharedUserGroupList});t.$apply(function(){angular.copy(n.AccessModeOptionList,sharedAccessModePreservedList);t.accessModes=n.AccessModeOptionList});currentItemDetail.ItemType==ItemType.UserManagement?$("#user-group-search-input_suggestion").removeClass("item-user-input_suggestion"):$("#user-group-search-input_suggestion").addClass("item-user-input_suggestion");$(".change-access-mode-selection").selectpicker("refresh");$(".change-access-mode-selection .selectpicker").removeAttr("title");$(".change-access-mode-selection span").removeClass("caret");$(".change-access-mode-selection button").attr("disabled",!0);accessModeSelectionInput.html("");accessModeSelectionInput.append(n.AccessModeList);accessModeSelectionInput.selectpicker("refresh");refreshUserGroupScroll();typeof BoldBIDashboard!="undefined"?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide");displaySharedUserGroupInfo();isEntireDOMRendered=!0;$('[data-toggle="tooltip"]').tooltip();$('[data-toggle="popover"]').popover()}else n.permissionDenied!=undefined&&n.permissionDenied&&(warningToast(window.Server.App.Localization.UserManagementWarningAlert),typeof BoldBIDashboard!="undefined"?(sharePermissionDlgObj.BoldBIDashboardDialog("close"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide")):(sharePermissionDlgObj.ejDialog("close"),sharePermissionDlgWrapperObj.ejWaitingPopup("hide")))},error:function(){warningToast(window.Server.App.Localization.InternalServerError);typeof BoldBIDashboard!="undefined"?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide")}})}function displaySharedUserGroupInfo(){var r=angular.element(manageUserGroupBodySection).scope(),n=r.sharedUserGroups,t,i;n!=null&&(n.length>0?(t="",$.each(n,function(i,r){var u="<div class='shared-user-group-name'><span class='shared-user-group-name-label'>";i<3&&(u+=r.TargetUserId>0?r.DisplayName+"<\/span>":r.TargetGroupName+"<\/span>",u+=i!=n.length-1?"<span class='shared-user-group-name-comma'>,<\/span> <\/div>":"<\/div>",t+=u)}),showSharedUserGroupNameSection.html(t),manageUserGroupContainer.is(":visible")||showSharedUserGroupContainer.show()):showSharedUserGroupContainer.hide(),n.length>3?(i=n.length-3,showSharedUserGroupCount.text(i),showSharedUserGroupCountSection.show()):showSharedUserGroupCountSection.hide(),generateProfileAvatar())}function saveItemPermission(){typeof BoldBIDashboard!="undefined"?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show");splitUserGroupList();var t=userEmailList,i=groupIdList,r=accessModeSelectionInput.val(),n=shareBtnObj.attr("data-item-id"),u=shareBtnObj.attr("data-itemtype");$.ajax({type:"POST",url:sharepermissionUrl,data:{permissionList:JSON.stringify({mode:r,itemType:u,UserList:t,GroupList:i}),itemId:n},success:function(t){t.toString().toLowerCase()=="true"?(getShareItemPermission(n),refreshAutoComplete(),refreshAutocompleteAccessModeSelection()):(sharePermissionDlgObj.ejDialog("close"),warningToast(window.Server.App.Localization.ShareItemPermissionMessage+" "+window.Server.App.Localization.ReloadPage))}})}function addGroupOwnerPermission(){typeof BoldBIDashboard!="undefined"?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show");splitUserGroupList();var t=userEmailList,i=groupIdList,r=accessModeSelectionInput.val(),n=addOwnerBtnObj.attr("data-item-id"),u=addOwnerBtnObj.attr("data-itemtype");$.ajax({type:"POST",url:addGroupOwnerPermissionUrl,data:{permissionList:JSON.stringify({mode:r,itemType:u,UserList:t,GroupList:i}),groupId:n},success:function(t){t.status?(getGroupUserPermission(n),refreshAutoComplete(),refreshAutocompleteAccessModeSelection()):t.permissionDenied!=undefined&&t.permissionDenied&&(warningToast(window.Server.App.Localization.UserManagementWarningAlert),typeof BoldBIDashboard!="undefined"?(sharePermissionDlgObj.BoldBIDashboardDialog("close"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide")):(sharePermissionDlgObj.ejDialog("close"),sharePermissionDlgWrapperObj.ejWaitingPopup("hide")))},error:function(){warningToast(window.Server.App.Localization.InternalServerError)}})}function updateBulkItemPermission(){var n=shareBtnObj.attr("data-item-id"),t=addOwnerBtnObj.attr("data-item-id");$.ajax({type:"POST",url:updateBulkItemPermissionUrl,data:{permissionList:addNewItemPermission,userMarkedForDeletionList:userMarkedForDeletionList,groupMarkedForDeletionList:groupMarkedForDeletionList,itemId:n,groupId:t},success:function(i){i.toString().toLowerCase()=="true"?(n!=undefined?getShareItemPermission(n):getGroupUserPermission(t),changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareDoneBtnObj.show(),enableAutomCompleteControl(),enableAutocompleteAccessModeSelection()):warningToast(window.Server.App.Localization.InternalServerError)},error:function(){warningToast(window.Server.App.Localization.InternalServerError)}})}function refreshDialogBoxPosition(){typeof BoldBIDashboard!="undefined"?(sharePermissionDlgObj.BoldBIDashboardDialog({height:"auto"}),isEntireDOMRendered&&(sharePermissionDlgObj.BoldBIDashboardDialog({width:529}),sharePermissionDlgObj.BoldBIDashboardDialog({width:530})),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("refresh"),sharePermissionDlgObj.BoldBIDashboardDialog("refresh")):(sharePermissionDlgObj.ejDialog({height:"auto"}),isEntireDOMRendered&&(sharePermissionDlgObj.ejDialog({width:529}),sharePermissionDlgObj.ejDialog({width:530})),sharePermissionDlgWrapperObj.ejWaitingPopup("refresh"),sharePermissionDlgObj.ejDialog("refresh"));isWidget&&(typeof BoldBIDashboard!="undefined"?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide"),sharePermisisonDlgHeader.text(window.Server.App.Localization.EmbedCode),sharePermisisonDlgHeader.css("line-height","32px"),sharePermissionDlgHeaderItemName.hide(),sharePermissionConatiner.hide(),embedCodeContainer.show(),embedConfiguration.hide(),manageAccessButton.hide())}function prepareRequestForAddItemPermission(){if(modifiedItemIndex.length>0){var t=angular.element(manageUserGroupBodySection).scope(),i=t.accessModes,n=t.sharedUserGroups,r=shareBtnObj.attr("data-itemtype");$.each(i,function(i,u){var o=u.Key,f=[],e=[];$.each(modifiedItemIndex,function(i,r){n[r].PermissionAccess!=sharedUserGroupsPreservedList[r].PermissionAccess&&n[r].PermissionAccess==u.Key&&(t.IsUserItem(r)?jQuery.inArray(n[r].Email,f)==-1&&f.push(n[r].Email):t.IsGroupItem(r)&&jQuery.inArray(n[r].TargetGroupId,e)==-1&&e.push(n[r].TargetGroupId))});(f.length>0||e.length>0)&&addNewItemPermission.push(JSON.stringify({mode:o,itemType:r,UserList:f,GroupList:e}))});$.each(modifiedItemIndex,function(i,r){n[r].PermissionAccess!=sharedUserGroupsPreservedList[r].PermissionAccess&&(t.IsUserItem(r)?jQuery.inArray(sharedUserGroupsPreservedList[r].PermissionId,userMarkedForDeletionList)==-1&&userMarkedForDeletionList.push(sharedUserGroupsPreservedList[r].PermissionId):t.IsGroupItem(r)&&jQuery.inArray(sharedUserGroupsPreservedList[r].PermissionId,groupMarkedForDeletionList)==-1&&groupMarkedForDeletionList.push(sharedUserGroupsPreservedList[r].PermissionId))})}}function resetPreRequestValues(){modifiedItemIndex=[];addNewItemPermission=[];userMarkedForDeletionList=[];groupMarkedForDeletionList=[]}function resetToActualScope(){var n=angular.element(manageUserGroupBodySection).scope();n.$apply(function(){angular.copy(sharedUserGroupsPreservedList,n.sharedUserGroups)});n.$apply(function(){angular.copy(sharedAccessModePreservedList,n.accessModes)});$(".change-access-mode-selection").selectpicker("refresh");$(".change-access-mode-selection .selectpicker").removeAttr("title");changeIndicatorBannerObj.css("visibility","hidden");resetPreRequestValues();$('[data-toggle="tooltip"]').tooltip();manageAccessSaveBtnObj.hide();manageAccessCancelBtnObj.hide();shareBtnObj.hide();shareDoneBtnObj.show()}function enableAutocompleteAccessModeSelectionWithoutReset(){typeof BoldBIDashboard!="undefined"?autoCompleteControlEle.BoldBIDashboardAutocomplete("enable"):autoCompleteControlEle.ejAutocomplete("enable");autoCompleteControlWrapperEle.find(".e-in-wrap.e-box.e-corner").removeClass("disable-autocomplete");accessModeSelectionInput.prop("disabled",!1);$(".selectpicker[data-id='access-mode-selection']").removeClass("disabled");$(".selectpicker[data-id='access-mode-selection']").removeClass("disable-autocomplete-access-mode-selection");accessModeSelectionInput.selectpicker("refresh")}function refreshAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("selectedIndex",0);accessModeSelectionInput.selectpicker("refresh")}function enableAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("disabled",!1);$(".selectpicker[data-id='access-mode-selection']").removeClass("disabled");$(".selectpicker[data-id='access-mode-selection']").removeClass("disable-autocomplete-access-mode-selection");refreshAutocompleteAccessModeSelection()}function disableAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("disabled",!0);$(".selectpicker[data-id='access-mode-selection']").addClass("disabled");$(".selectpicker[data-id='access-mode-selection']").addClass("disable-autocomplete-access-mode-selection");refreshAutocompleteAccessModeSelection()}function onSuggestionListOpen(){manageUserGroupContainer.addClass("disable-element-opacity")}function onSuggestionListClose(){autoCompleteInstance.getValue()==""&&manageUserGroupContainer.removeClass("disable-element-opacity")}function refreshUserGroupScroll(){if(manageUserGroupBodySection.is(":visible")){$(".tooltip").tooltip("hide");var t=225,n="",i={height:t,width:"100%",scrollerSize:7,buttonSize:0,enableTouchScroll:!0,scrollOneStepBy:20,scroll:function(){$(".tooltip").tooltip("hide");$('[data-toggle="popover"]').popover("hide")}};typeof BoldBIDashboard!="undefined"?(manageUserGroupBodySection.BoldBIDashboardScroller(i),n=manageUserGroupBodySection.BoldBIDashboardScroller("instance")):(manageUserGroupBodySection.ejScroller(i),n=manageUserGroupBodySection.ejScroller("instance"));n.model.height=t;n.refresh();$(".manage-user-group-body-section .e-scrollbar").show()}}function generateEmbedCode(n){var t="",i;return currentItemDetail.ItemType==ItemType.ItemView?t=getDashboardShareLink(currentDashboardDetail.Id,currentDashboardDetail.CategoryName,currentDashboardDetail.Name)+"?viewid="+currentItemDetail.Id+"&isembed=true":n.ItemType==ItemType.Widget?(isWidget=!0,i=angular.element("#share-permission-content-section").scope(),i.$apply(function(){i.isDashboardPublic=n.IsPublic;i.currentItemType=n.ItemType}),sharePermissionDlgObj.show(),typeof BoldBIDashboard!="undefined"?(sharePermissionDlgObj.BoldBIDashboardDialog("open"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show")):(sharePermissionDlgObj.ejDialog("open"),sharePermissionDlgWrapperObj.ejWaitingPopup("show")),t=getDashboardShareLink(n.Id,n.CategoryName,n.Name)+"?isembed=true&isWidgetMode=true&WidgetId="+n.widgetId):n.ItemType==ItemType.Datasource?($(".datasource-hide").hide(),t=getDatasourceShareLink(n.Id,n.Name)+"?isembed=true"):n.ItemType==ItemType.Dashboard?selectedMode=="edit"?($(".mode-change").attr("disabled",!0),t=getDashboardShareLink(n.Id,n.CategoryName,n.Name,editDashboardUrl)+"?isembed=true"):($(".mode-change").attr("disabled",!1),t=getDashboardShareLink(n.Id,n.CategoryName,n.Name)+"?isembed=true"):t=getDashboardShareLink(n.Id,n.CategoryName,n.Name)+"?isembed=true",selectedMode!="edit"&&(t+=$("#embed-dashboard-comments").is(":checked")?"&dashboard_comments=true":"",t+=$("#embed-widget-comments").is(":checked")?"&widget_comments=true":"",t+=$("#embed-views").is(":checked")?"&views=true":"",t+=$("#embed-export").is(":checked")?"&export=true":""),t+=$("#embed-sso").is(":checked")?"&hassso=true&externallogin="+$("#sso-providers").val().toLowerCase():"","<iframe src='"+t+"' id='dashboard-frame' width='100%' height='600px' allowfullscreen frameborder='0'><\/iframe>"}var browser,isGetLinkDialogBinded;!function(n,t){"function"==typeof define&&define.amd?define(["jquery"],function(n){return t(n)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(this,function(){!function(n){"use strict";function i(t){return n.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],function(){t=t.replace(this.re,this.ch)}),t}function r(n){var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(i).join("|")+")",u=new RegExp(r),f=new RegExp(r,"g"),t=null==n?"":""+n;return u.test(t)?t.replace(f,function(n){return i[n]}):t}function u(i,r){var e=arguments,u=i,s=r,f,o;return[].shift.apply(e),o=this.each(function(){var o=n(this),i,r,h,c;if(o.is("select")){if(i=o.data("selectpicker"),r="object"==typeof u&&u,i){if(r)for(h in r)r.hasOwnProperty(h)&&(i.options[h]=r[h])}else c=n.extend({},t.DEFAULTS,n.fn.selectpicker.defaults||{},o.data(),r),o.data("selectpicker",i=new t(this,c,s));"string"==typeof u&&(f=i[u]instanceof Function?i[u].apply(i,e):i.options[u])}}),"undefined"!=typeof f?f:o}var t,f;String.prototype.includes||!function(){var i={}.toString,n=function(){try{var n={},t=Object.defineProperty,i=t(n,n,n)&&t}catch(r){}return i}(),r="".indexOf,t=function(n){var u,s;if(null==this)throw TypeError();if(u=String(this),n&&"[object RegExp]"==i.call(n))throw TypeError();var f=u.length,e=String(n),h=e.length,o=arguments.length>1?arguments[1]:void 0,t=o?Number(o):0;return t!=t&&(t=0),s=Math.min(Math.max(t,0),f),h+s>f?!1:-1!=r.call(u,e,t)};n?n(String.prototype,"includes",{value:t,configurable:!0,writable:!0}):String.prototype.includes=t}();String.prototype.startsWith||!function(){var n=function(){try{var n={},t=Object.defineProperty,i=t(n,n,n)&&t}catch(r){}return i}(),i={}.toString,t=function(n){var u,f,r;if(null==this)throw TypeError();if(u=String(this),n&&"[object RegExp]"==i.call(n))throw TypeError();var e=u.length,o=String(n),s=o.length,h=arguments.length>1?arguments[1]:void 0,t=h?Number(h):0;if(t!=t&&(t=0),f=Math.min(Math.max(t,0),e),s+f>e)return!1;for(r=-1;++r<s;)if(u.charCodeAt(f+r)!=o.charCodeAt(r))return!1;return!0};n?n(String.prototype,"startsWith",{value:t,configurable:!0,writable:!0}):String.prototype.startsWith=t}();Object.keys||(Object.keys=function(n,t,i){i=[];for(t in n)i.hasOwnProperty.call(n,t)&&i.push(t);return i});n.fn.triggerNative=function(n){var t,i=this[0];i.dispatchEvent?("function"==typeof Event?t=new Event(n,{bubbles:!0}):(t=document.createEvent("Event"),t.initEvent(n,!0,!1)),i.dispatchEvent(t)):(i.fireEvent&&(t=document.createEventObject(),t.eventType=n,i.fireEvent("on"+n,t)),this.trigger(n))};n.expr[":"].icontains=function(t,i,r){var u=n(t),f=(u.data("tokens")||u.text()).toUpperCase();return f.includes(r[3].toUpperCase())};n.expr[":"].ibegins=function(t,i,r){var u=n(t),f=(u.data("tokens")||u.text()).toUpperCase();return f.startsWith(r[3].toUpperCase())};n.expr[":"].aicontains=function(t,i,r){var u=n(t),f=(u.data("tokens")||u.data("normalizedText")||u.text()).toUpperCase();return f.includes(r[3].toUpperCase())};n.expr[":"].aibegins=function(t,i,r){var u=n(t),f=(u.data("tokens")||u.data("normalizedText")||u.text()).toUpperCase();return f.startsWith(r[3].toUpperCase())};t=function(i,r,u){u&&(u.stopPropagation(),u.preventDefault());this.$element=n(i);this.$newElement=null;this.$button=null;this.$menu=null;this.$lis=null;this.options=r;null===this.options.title&&(this.options.title=this.$element.attr("title"));this.val=t.prototype.val;this.render=t.prototype.render;this.refresh=t.prototype.refresh;this.setStyle=t.prototype.setStyle;this.selectAll=t.prototype.selectAll;this.deselectAll=t.prototype.deselectAll;this.destroy=t.prototype.remove;this.remove=t.prototype.remove;this.show=t.prototype.show;this.hide=t.prototype.hide;this.init()};t.VERSION="1.7.2";t.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(n){return 1==n?"{0} item selected":"{0} items selected"},maxOptionsText:function(n,t){return[1==n?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1};t.prototype={constructor:t,init:function(){var t=this,i=this.$element.attr("id");this.$element.addClass("bs-select-hidden");this.liObj={};this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");this.$newElement=this.createView();this.$element.after(this.$newElement);this.$button=this.$newElement.children("button");this.$menu=this.$newElement.children(".dropdown-menu");this.$menuInner=this.$menu.children(".inner");this.$searchbox=this.$menu.find("input");this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right");"undefined"!=typeof i&&(this.$button.attr("data-id",i),n('label[for="'+i+'"]').click(function(n){n.preventDefault();t.$button.focus()}));this.checkDisabled();this.clickListener();this.options.liveSearch&&this.liveSearchListener();this.render();this.setStyle();this.setWidth();this.options.container&&this.selectPosition();this.$menu.data("this",this);this.$newElement.data("this",this);this.options.mobile&&this.mobile();this.$newElement.on("hide.bs.dropdown",function(n){t.$element.trigger("hide.bs.select",n)});this.$newElement.on("hidden.bs.dropdown",function(n){t.$element.trigger("hidden.bs.select",n)});this.$newElement.on("show.bs.dropdown",function(n){t.$element.trigger("show.bs.select",n)});this.$newElement.on("shown.bs.dropdown",function(n){t.$element.trigger("shown.bs.select",n)});setTimeout(function(){t.$element.trigger("loaded.bs.select")})},createDropdown:function(){var t=this.multiple?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",u=this.autofocus?" autofocus":"",f=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;<\/button>'+this.options.header+"<\/div>":"",e=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+r(this.options.liveSearchPlaceholder)+'"')+"><\/div>":"",o=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'<\/button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"<\/button><\/div><\/div>":"",s=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"<\/button><\/div><\/div>":"",h='<div class="btn-group bootstrap-select'+t+i+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+u+'><span class="filter-option pull-left"><\/span>&nbsp;<span class="caret"><\/span><\/button><div class="dropdown-menu open">'+f+e+o+'<ul class="dropdown-menu inner" role="menu"><\/ul>'+s+"<\/div><\/div>";return n(h)},createView:function(){var n=this.createDropdown(),t=this.createLi();return n.find("ul")[0].innerHTML=t,n},reloadLi:function(){this.destroyLi();var n=this.createLi();this.$menuInner[0].innerHTML=n},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var u=this,t=[],o=0,s=document.createElement("option"),f=-1,e=function(n,t,i,r){return"<li"+("undefined"!=typeof i&""!==i?' class="'+i+'"':"")+("undefined"!=typeof t&null!==t?' data-original-index="'+t+'"':"")+("undefined"!=typeof r&null!==r?'data-optgroup="'+r+'"':"")+">"+n+"<\/li>"},c=function(n,t,f,e){return'<a tabindex="0"'+("undefined"!=typeof t?' class="'+t+'"':"")+("undefined"!=typeof f?' style="'+f+'"':"")+(u.options.liveSearchNormalize?' data-normalized-text="'+i(r(n))+'"':"")+("undefined"!=typeof e||null!==e?' data-tokens="'+e+'"':"")+">"+n+'<span class="'+u.options.iconBase+" "+u.options.tickIcon+' check-mark"><\/span><\/a>'},h;return!this.options.title||this.multiple||(f--,this.$element.find(".bs-title-option").length)||(h=this.$element[0],s.className="bs-title-option",s.appendChild(document.createTextNode(this.options.title)),s.value="",h.insertBefore(s,h.firstChild),void 0===n(h.options[h.selectedIndex]).attr("selected")&&(s.selected=!0)),this.$element.find("option").each(function(i){var r=n(this),y;if(f++,!r.hasClass("bs-title-option")){var l=this.className||"",a=this.style.cssText,s=r.data("content")?r.data("content"):r.html(),v=r.data("tokens")?r.data("tokens"):null,b="undefined"!=typeof r.data("subtext")?'<small class="text-muted">'+r.data("subtext")+"<\/small>":"",h="undefined"!=typeof r.data("icon")?'<span class="'+u.options.iconBase+" "+r.data("icon")+'"><\/span> ':"",w=this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled;if(""!==h&&w&&(h="<span>"+h+"<\/span>"),u.options.hideDisabled&&w)return void f--;if(r.data("content")||(s=h+'<span class="text">'+s+b+"<\/span>"),"OPTGROUP"===this.parentElement.tagName&&r.data("divider")!==!0){if(y=" "+this.parentElement.className||"",0===r.index()){o+=1;var p=this.parentElement.label,k="undefined"!=typeof r.parent().data("subtext")?'<small class="text-muted">'+r.parent().data("subtext")+"<\/small>":"",d=r.parent().data("icon")?'<span class="'+u.options.iconBase+" "+r.parent().data("icon")+'"><\/span> ':"";p=d+'<span class="text">'+p+k+"<\/span>";0!==i&&t.length>0&&(f++,t.push(e("",null,"divider",o+"div")));f++;t.push(e(p,null,"dropdown-header"+y,o))}t.push(e(c(s,"opt "+l+y,a,v),i,"",o))}else r.data("divider")===!0?t.push(e("",i,"divider")):r.data("hidden")===!0?t.push(e(c(s,l,a,v),i,"hidden is-hidden")):(this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName&&(f++,t.push(e("",null,"divider",o+"div"))),t.push(e(c(s,l,a,v),i)));u.liObj[i]=f}}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),t.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(t){var o,i=this,r,u,f,e,s;t!==!1&&this.$element.find("option").each(function(n){var t=i.findLis().eq(i.liObj[n]);i.setDisabled(n,this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled,t);i.setSelected(n,this.selected,t)});this.tabIndex();r=this.$element.find("option").map(function(){if(this.selected){if(i.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled))return!1;var r,t=n(this),u=t.data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+t.data("icon")+'"><\/i> ':"";return r=i.options.showSubtext&&t.data("subtext")&&!i.multiple?' <small class="text-muted">'+t.data("subtext")+"<\/small>":"","undefined"!=typeof t.attr("title")?t.attr("title"):t.data("content")&&i.options.showContent?t.data("content"):u+t.html()+r}}).toArray();u=this.multiple?r.join(this.options.multipleSeparator):r[0];this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1&&(f=this.options.selectedTextFormat.split(">"),(f.length>1&&r.length>f[1]||1==f.length&&r.length>=2)&&(o=this.options.hideDisabled?", [disabled]":"",e=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+o).length,s="function"==typeof this.options.countSelectedText?this.options.countSelectedText(r.length,e):this.options.countSelectedText,u=s.replace("{0}",r.length.toString()).replace("{1}",e.toString())));void 0==this.options.title&&(this.options.title=this.$element.attr("title"));"static"==this.options.selectedTextFormat&&(u=this.options.title);u||(u="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText);this.$button.attr("title",n.trim(u.replace(/<[^>]*>?/g,"")));this.$button.children(".filter-option").html(u);this.$element.trigger("rendered.bs.select")},setStyle:function(n,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var i=n?n:this.options.style;"add"==t?this.$button.addClass(i):"remove"==t?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(t){var y;if(t||this.options.size!==!1&&!this.sizeInfo){var e=document.createElement("div"),r=document.createElement("div"),o=document.createElement("ul"),l=document.createElement("li"),p=document.createElement("li"),a=document.createElement("a"),v=document.createElement("span"),s=this.options.header?this.$menu.find(".popover-title")[0].cloneNode(!0):null,u=this.options.liveSearch?document.createElement("div"):null,h=this.options.actionsBox&&this.multiple?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,c=this.options.doneButton&&this.multiple?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;(v.className="text",e.className=this.$menu[0].parentNode.className+" open",r.className="dropdown-menu open",o.className="dropdown-menu inner",l.className="divider",v.appendChild(document.createTextNode("Inner text")),a.appendChild(v),p.appendChild(a),o.appendChild(p),o.appendChild(l),s&&r.appendChild(s),u)&&(y=document.createElement("span"),u.className="bs-searchbox",y.className="form-control",u.appendChild(y),r.appendChild(u));h&&r.appendChild(h);r.appendChild(o);c&&r.appendChild(c);e.appendChild(r);document.body.appendChild(e);var b=a.offsetHeight,k=s?s.offsetHeight:0,d=u?u.offsetHeight:0,g=h?h.offsetHeight:0,nt=c?c.offsetHeight:0,tt=n(l).outerHeight(!0),i="function"==typeof getComputedStyle?getComputedStyle(r):!1,f=i?null:n(r),w=parseInt(i?i.paddingTop:f.css("paddingTop"))+parseInt(i?i.paddingBottom:f.css("paddingBottom"))+parseInt(i?i.borderTopWidth:f.css("borderTopWidth"))+parseInt(i?i.borderBottomWidth:f.css("borderBottomWidth")),it=w+parseInt(i?i.marginTop:f.css("marginTop"))+parseInt(i?i.marginBottom:f.css("marginBottom"))+2;document.body.removeChild(e);this.sizeInfo={liHeight:b,headerHeight:k,searchHeight:d,actionsHeight:g,doneButtonHeight:nt,dividerHeight:tt,menuPadding:w,menuExtras:it}}},setSize:function(){var h,d,g;if(this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),this.options.size!==!1){var i,u,f,o,r=this,t=this.$menu,p=this.$menuInner,c=n(window),nt=this.$newElement[0].offsetHeight,w=this.sizeInfo.liHeight,l=this.sizeInfo.headerHeight,a=this.sizeInfo.searchHeight,v=this.sizeInfo.actionsHeight,y=this.sizeInfo.doneButtonHeight,tt=this.sizeInfo.dividerHeight,s=this.sizeInfo.menuPadding,e=this.sizeInfo.menuExtras,b=this.options.hideDisabled?".disabled":"",k=function(){f=r.$newElement.offset().top-c.scrollTop();o=c.height()-f-nt};(k(),"auto"===this.options.size)?(h=function(){var h,b=function(t,i){return function(r){return i?r.classList?r.classList.contains(t):n(r).hasClass(t):!(r.classList?r.classList.contains(t):n(r).hasClass(t))}},d=r.$menuInner[0].getElementsByTagName("li"),c=Array.prototype.filter?Array.prototype.filter.call(d,b("hidden",!1)):r.$lis.not(".hidden"),g=Array.prototype.filter?Array.prototype.filter.call(c,b("dropdown-header",!0)):c.filter(".dropdown-header");k();i=o-e;r.options.container?(t.data("height")||t.data("height",t.height()),u=t.data("height")):u=t.height();r.options.dropupAuto&&r.$newElement.toggleClass("dropup",f>o&&u>i-e);r.$newElement.hasClass("dropup")&&(i=f-e);h=c.length+g.length>3?3*w+e-2:0;t.css({"max-height":i+"px",overflow:"hidden","min-height":h+l+a+v+y+"px"});p.css({"max-height":i-l-a-v-y-s+"px","overflow-y":"auto","min-height":Math.max(h-s,0)+"px"})},h(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",h),c.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",h)):this.options.size&&"auto"!=this.options.size&&this.$lis.not(b).length>this.options.size&&(d=this.$lis.not(".divider").not(b).children().slice(0,this.options.size).last().parent().index(),g=this.$lis.slice(0,d+1).filter(".divider").length,i=w*this.options.size+g*tt+s,r.options.container?(t.data("height")||t.data("height",t.height()),u=t.data("height")):u=t.height(),r.options.dropupAuto&&this.$newElement.toggleClass("dropup",f>o&&u>i-e),t.css({"max-height":i+l+a+v+y+"px",overflow:"hidden","min-height":""}),p.css({"max-height":i-s+"px","overflow-y":"auto","min-height":""}))}},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var n=this.$menu.parent().clone().appendTo("body"),t=this.options.container?this.$newElement.clone().appendTo("body"):n,i=n.children(".dropdown-menu").outerWidth(),r=t.css("width","auto").children("button").outerWidth();n.remove();t.remove();this.$newElement.css("width",Math.max(i,r)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var r,u,t=this,i=n("<div />"),f=function(n){i.addClass(n.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",n.hasClass("dropup"));r=n.offset();u=n.hasClass("dropup")?0:n[0].offsetHeight;i.css({top:r.top+u,left:r.left,width:n[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){t.isDisabled()||(f(n(this)),i.appendTo(t.options.container),i.toggleClass("open",!n(this).hasClass("open")),i.append(t.$menu))});n(window).on("resize scroll",function(){f(t.$newElement)});this.$element.on("hide.bs.select",function(){t.$menu.data("height",t.$menu.height());i.detach()})},setSelected:function(n,t,i){if(!i)var i=this.findLis().eq(this.liObj[n]);i.toggleClass("selected",t)},setDisabled:function(n,t,i){if(!i)var i=this.findLis().eq(this.liObj[n]);t?i.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):i.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var n=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled")),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex"));this.$button.click(function(){return!n.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var t=this,i=n(document);this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(n){n.stopPropagation()});i.data("spaceSelect",!1);this.$button.on("keyup",function(n){/(32)/.test(n.keyCode.toString(10))&&i.data("spaceSelect")&&(n.preventDefault(),i.data("spaceSelect",!1))});this.$newElement.on("click",function(){t.setSize();t.$element.on("shown.bs.select",function(){var i,n;if(t.options.liveSearch||t.multiple){if(!t.multiple){if(i=t.liObj[t.$element[0].selectedIndex],"number"!=typeof i||t.options.size===!1)return;n=t.$lis.eq(i)[0].offsetTop-t.$menuInner[0].offsetTop;n=n-t.$menuInner[0].offsetHeight/2+t.sizeInfo.liHeight/2;t.$menuInner[0].scrollTop=n}}else t.$menu.find(".selected a").focus()})});this.$menu.on("click","li a",function(i){var s=n(this),e=s.parent().data("originalIndex"),k=t.$element.val(),d=t.$element.prop("selectedIndex"),v,y,b;if(t.multiple&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!s.parent().hasClass("disabled")){var h=t.$element.find("option"),f=h.eq(e),l=f.prop("selected"),a=f.parent("optgroup"),r=t.options.maxOptions,u=a.data("maxOptions")||!1;if(t.multiple){if((f.prop("selected",!l),t.setSelected(e,!l),s.blur(),r!==!1||u!==!1)&&(v=r<h.filter(":selected").length,y=u<a.find("option:selected").length,r&&v||u&&y))if(r&&1==r)h.prop("selected",!1),f.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(e,!0);else if(u&&1==u)a.find("option:selected").prop("selected",!1),f.prop("selected",!0),b=s.parent().data("optgroup"),t.$menu.find('[data-optgroup="'+b+'"]').removeClass("selected"),t.setSelected(e,!0);else{var o="function"==typeof t.options.maxOptionsText?t.options.maxOptionsText(r,u):t.options.maxOptionsText,p=o[0].replace("{n}",r),w=o[1].replace("{n}",u),c=n('<div class="notify"><\/div>');o[2]&&(p=p.replace("{var}",o[2][r>1?0:1]),w=w.replace("{var}",o[2][u>1?0:1]));f.prop("selected",!1);t.$menu.append(c);r&&v&&(c.append(n("<div>"+p+"<\/div>")),t.$element.trigger("maxReached.bs.select"));u&&y&&(c.append(n("<div>"+w+"<\/div>")),t.$element.trigger("maxReachedGrp.bs.select"));setTimeout(function(){t.setSelected(e,!1)},10);c.delay(750).fadeOut(300,function(){n(this).remove()})}}else h.prop("selected",!1),f.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(e,!0);t.multiple?t.options.liveSearch&&t.$searchbox.focus():t.$button.focus();(k!=t.$element.val()&&t.multiple||d!=t.$element.prop("selectedIndex")&&!t.multiple)&&(t.$element.triggerNative("change"),t.$element.trigger("changed.bs.select",[e,f.prop("selected"),l]))}});this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),t.options.liveSearch&&!n(i.target).hasClass("close")?t.$searchbox.focus():t.$button.focus())});this.$menu.on("click","li.divider, li.dropdown-header",function(n){n.preventDefault();n.stopPropagation();t.options.liveSearch?t.$searchbox.focus():t.$button.focus()});this.$menu.on("click",".popover-title .close",function(){t.$button.click()});this.$searchbox.on("click",function(n){n.stopPropagation()});this.$menu.on("click",".actions-btn",function(i){t.options.liveSearch?t.$searchbox.focus():t.$button.focus();i.preventDefault();i.stopPropagation();n(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll();t.$element.triggerNative("change")});this.$element.change(function(){t.render(!1)})},liveSearchListener:function(){var t=this,u=n('<li class="no-results"><\/li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){t.$menuInner.find(".active").removeClass("active");t.$searchbox.val()&&(t.$searchbox.val(""),t.$lis.not(".is-hidden").removeClass("hidden"),u.parent().length&&u.remove());t.multiple||t.$menuInner.find(".selected").addClass("active");setTimeout(function(){t.$searchbox.focus()},10)});this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(n){n.stopPropagation()});this.$searchbox.on("input propertychange",function(){var f,e;t.$searchbox.val()?(f=t.$lis.not(".is-hidden").removeClass("hidden").children("a"),f=t.options.liveSearchNormalize?f.not(":a"+t._searchStyle()+'("'+i(t.$searchbox.val())+'")'):f.not(":"+t._searchStyle()+'("'+t.$searchbox.val()+'")'),f.parent().addClass("hidden"),t.$lis.filter(".dropdown-header").each(function(){var i=n(this),r=i.data("optgroup");0===t.$lis.filter("[data-optgroup="+r+"]").not(i).not(".hidden").length&&(i.addClass("hidden"),t.$lis.filter("[data-optgroup="+r+"div]").addClass("hidden"))}),e=t.$lis.not(".hidden"),e.each(function(t){var i=n(this);i.hasClass("divider")&&(i.index()===e.eq(0).index()||i.index()===e.last().index()||e.eq(t+1).hasClass("divider"))&&i.addClass("hidden")}),t.$lis.not(".hidden, .no-results").length?u.parent().length&&u.remove():(u.parent().length&&u.remove(),u.html(t.options.noneResultsText.replace("{0}",'"'+r(t.$searchbox.val())+'"')).show(),t.$menuInner.append(u))):(t.$lis.not(".is-hidden").removeClass("hidden"),u.parent().length&&u.remove());t.$lis.filter(".active").removeClass("active");t.$searchbox.val()&&t.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus();n(this).focus()})},_searchStyle:function(){var n="icontains";switch(this.options.liveSearchStyle){case"begins":case"startsWith":n="ibegins"}return n},val:function(n){return"undefined"!=typeof n?(this.$element.val(n),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis();this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!0);this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").addClass("selected");this.render(!1)},deselectAll:function(){this.findLis();this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!1);this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").removeClass("selected");this.render(!1)},keydown:function(t){var u,f,h,c,l,p,w,k,s,e=n(this),a=e.is("input")?e.parent().parent():e.parent(),r=a.data("this"),v=":not(.disabled, .hidden, .dropdown-header, .divider)",b={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},o,g,y,d;(r.options.liveSearch&&(a=e.parent().parent()),r.options.container&&(a=r.$menu),u=n("[role=menu] li a",a),s=r.$menu.parent().hasClass("open"),!s&&(t.keyCode>=48&&t.keyCode<=57||t.keyCode>=65&&t.keyCode<=90)&&(r.options.container?r.$newElement.trigger("click"):(r.setSize(),r.$menu.parent().addClass("open"),s=!0),r.$searchbox.focus()),r.options.liveSearch&&(/(^9$|27)/.test(t.keyCode.toString(10))&&s&&0===r.$menu.find(".active").length&&(t.preventDefault(),r.$menu.parent().removeClass("open"),r.options.container&&r.$newElement.removeClass("open"),r.$button.focus()),u=n("[role=menu] li:not(.disabled, .hidden, .dropdown-header, .divider)",a),e.val()||/(38|40)/.test(t.keyCode.toString(10))||0===u.filter(".active").length&&(u=r.$newElement.find("li"),u=r.options.liveSearchNormalize?u.filter(":a"+r._searchStyle()+"("+i(b[t.keyCode])+")"):u.filter(":"+r._searchStyle()+"("+b[t.keyCode]+")"))),u.length)&&(/(38|40)/.test(t.keyCode.toString(10))?(f=u.index(u.filter(":focus")),c=u.parent(v).first().data("originalIndex"),l=u.parent(v).last().data("originalIndex"),h=u.eq(f).parent().nextAll(v).eq(0).data("originalIndex"),p=u.eq(f).parent().prevAll(v).eq(0).data("originalIndex"),w=u.eq(h).parent().prevAll(v).eq(0).data("originalIndex"),r.options.liveSearch&&(u.each(function(t){n(this).hasClass("disabled")||n(this).data("index",t)}),f=u.index(u.filter(".active")),c=u.first().data("index"),l=u.last().data("index"),h=u.eq(f).nextAll().eq(0).data("index"),p=u.eq(f).prevAll().eq(0).data("index"),w=u.eq(h).prevAll().eq(0).data("index")),k=e.data("prevIndex"),38==t.keyCode?(r.options.liveSearch&&(f-=1),f!=w&&f>p&&(f=p),c>f&&(f=c),f==k&&(f=l)):40==t.keyCode&&(r.options.liveSearch&&(f+=1),-1==f&&(f=0),f!=w&&h>f&&(f=h),f>l&&(f=l),f==k&&(f=c)),e.data("prevIndex",f),r.options.liveSearch?(t.preventDefault(),e.hasClass("dropdown-toggle")||(u.removeClass("active").eq(f).addClass("active").children("a").focus(),e.focus())):u.eq(f).focus()):e.is("input")||(y=[],u.each(function(){n(this).parent().hasClass("disabled")||n.trim(n(this).text().toLowerCase()).substring(0,1)==b[t.keyCode]&&y.push(n(this).parent().index())}),o=n(document).data("keycount"),o++,n(document).data("keycount",o),g=n.trim(n(":focus").text().toLowerCase()).substring(0,1),g!=b[t.keyCode]?(o=1,n(document).data("keycount",o)):o>=y.length&&(n(document).data("keycount",0),o>y.length&&(o=1)),u.eq(y[o-1]).focus()),(/(13|32)/.test(t.keyCode.toString(10))||/(^9$)/.test(t.keyCode.toString(10))&&r.options.selectOnTab)&&s&&((/(32)/.test(t.keyCode.toString(10))||t.preventDefault(),r.options.liveSearch)?/(32)/.test(t.keyCode.toString(10))||(r.$menu.find(".active a").click(),e.focus()):(d=n(":focus"),d.click(),d.focus(),t.preventDefault(),n(document).data("spaceSelect",!0)),n(document).data("keycount",0)),(/(^9$|27)/.test(t.keyCode.toString(10))&&s&&(r.multiple||r.options.liveSearch)||/(27)/.test(t.keyCode.toString(10))&&!s)&&(r.$menu.parent().removeClass("open"),r.options.container&&r.$newElement.removeClass("open"),r.$button.focus()))},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement);this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null;this.liObj={};this.reloadLi();this.render();this.checkDisabled();this.liHeight(!0);this.setStyle();this.setWidth();this.$lis&&this.$searchbox.trigger("propertychange");this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove();this.$element.remove()}};f=n.fn.selectpicker;n.fn.selectpicker=u;n.fn.selectpicker.Constructor=t;n.fn.selectpicker.noConflict=function(){return n.fn.selectpicker=f,this};n(document).data("keycount",0).on("keydown",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',t.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',function(n){n.stopPropagation()});n(window).on("load.bs.select.data-api",function(){n(".selectpicker").each(function(){var t=n(this);u.call(t,t.data())})})}(jQuery)});browser=typeof ej!="undefined"?ej.browserInfo():BoldBIDashboard.browserInfo();isGetLinkDialogBinded=!1;$(document).on("click","#item-link-copy",function(){$("#item-link").select();/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").attr("data-original-title","")):(document.execCommand("copy"),$("#item-link-copy").attr("data-original-title",window.Server.App.Localization.Copysuccess),$("#item-link-copy").tooltip("hide").attr("data-original-title",window.Server.App.Localization.Copysuccess).tooltip("fixTitle").tooltip("show"),setTimeout(function(){$("#item-link-copy").attr("data-original-title",window.Server.App.Localization.LinkCopy);$("#item-link-copy").tooltip()},3e3))});var isWidget=!1,sharePermissionDlgObj="",sharePermissionDlgWrapperObj="",sharePermisisonDlgHeader="",sharePermissionDlgHeaderItemName="",selectedMode="",sharePermissionConatiner="",accessModeContainer="",dummyContainer="",embedCodeContainer="",sharePermissionDashboardSettingSectionObj="",sharePermissionPublicSectionObj="",sharePermissionPrivateSectionObj="",sharePermissionUserGroupSectionObj="",manageUserGroupContainer="",manageUserGroupBodySection="",getEmbedLinkSection="",embedConfiguration="",changeIndicatorBannerObj="",shareWithLabelObj="",getLinkInputObj="",getLinkCopyLinkobj="",getEmbedCodeInputObj="",getEmbedCodeCopyBtnobj="",accessModeChangeLink="",manageAccessButton="",manageAccessBackButton="",manageAccessSaveBtnObj="",manageAccessCancelBtnObj="",shareDoneBtnObj="",shareBtnObj="",accessModeChngBtnObj="",accessModeCancelBtnObj="",embedCodeDoneBtnObj="",embedCodeBackButton="",addOwnerBtnObj="",publicRadioBtnObj="",privateRadioBtnObj="",isItemPublic=!1,isEntireDOMRendered=!1,isItemUnlisted=!1,isGetEmbedCodeTriggered=!1,isMarkItemsPublicForShareDialog=!1,accessModeSelectionInput="",sharedUserGroupsPreservedList=[],sharedAccessModePreservedList=[],markForDeleteBtnObj="",removeMarkForDeleteBtnObj="",toggleMarkForDeletionObj="",modifiedItemIndex=[],addNewItemPermission=[],userMarkedForDeletionList=[],groupMarkedForDeletionList=[],showSharedUserGroupContainer="",showSharedUserGroupNameSection="",showSharedUserGroupName="",showSharedUserGroupCountSection="",showSharedUserGroupCount="",currentItemDetail=[],currentDashboardDetail=[],shareItem=angular.module("serverApp");shareItem.controller("shareItemController",["$scope",function(n){n.currentUserId=window.currentUserId;n.sharedUserGroups=window.sharedUserGroupList;n.accessModes=window.accessModeList;n.showPopover=!1;n.currentItemType=ItemType.Dashboard;n.isAdmin=!1;n.isDashboardPublic=!1;n.hasDashboardSettingsPermission=!1;n.isUnlisted=!1;n.isMarkItemsPublic=!1;n.formatAccessModeString=function(n){return n.toString()};n.ImageLink=function(n){return idpUrl+"/User/Avatar?id="+n+"&ImageSize=64"};var t=["#4FDFDB","#BDDF4F","#F3DF4C","#FC9C61","#CBA6FF","#77BDFF"];n.GetGroupColor=function(n,i){var r=t[(i+1)%t.length-1];return n!=""?{"background-color":"#dfdfdf"}:{"background-color":"#dfdfdf"}};n.typeOptions=[{Key:2,Value:"Read"}];n.parseInt=function(n){return parseInt(n,10)};n.updateValue=function(t,i){n.CheckForModification(t,i)};n.MarkForDeletion=function(t,i,r){n.AddItemInUserGroupDeletionList(r);n.RemoveFromModified(r);var u=angular.element(t.currentTarget).parents(".shared-user-group-list-section").children();u.find(".action-for-delete-container").hide();u.find(".marked-for-delete-container").show();u.find(".change-indicator").show();n.ShowChangeIndicatorBanner()};n.RemoveMarkForDeletion=function(t,i,r){n.RemoveItemInUserGroupDeletionList(r);var u=angular.element(t.currentTarget).parents(".shared-user-group-list-section").children();u.find(".marked-for-delete-container").hide();u.find(".action-for-delete-container").show();u.find(".change-indicator").hide();n.CheckForModification(i,r)};n.CheckForModification=function(t,i){currentItemDetail.ItemType!=ItemType.ItemView&&(sharedUserGroupsPreservedList[i].PermissionAccess!=t?(n.AddToModified(i),$("#select_"+i).parents(".shared-user-group-list-section").children().find(".change-indicator").show()):sharedUserGroupsPreservedList[i].PermissionAccess==t&&(n.RemoveFromModified(i),$("#select_"+i).parents(".shared-user-group-list-section").children().find(".change-indicator").hide()));n.ShowChangeIndicatorBanner()};n.ShowChangeIndicatorBanner=function(){$(".change-indicator").is(":visible")?(changeIndicatorBannerObj.css("visibility","visible"),manageAccessSaveBtnObj.show(),manageAccessCancelBtnObj.show(),shareDoneBtnObj.hide(),disableAutomCompleteControl(),disableAutocompleteAccessModeSelection()):(changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareDoneBtnObj.show(),enableAutomCompleteControl(),enableAutocompleteAccessModeSelection())};n.AddItemInUserGroupDeletionList=function(t){n.IsUserItem(t)?jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,userMarkedForDeletionList)==-1&&userMarkedForDeletionList.push(sharedUserGroupsPreservedList[t].PermissionId):n.IsGroupItem(t)&&jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,groupMarkedForDeletionList)==-1&&groupMarkedForDeletionList.push(sharedUserGroupsPreservedList[t].PermissionId)};n.RemoveItemInUserGroupDeletionList=function(t){n.IsUserItem(t)?jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,userMarkedForDeletionList)!=-1&&(userMarkedForDeletionList=jQuery.grep(userMarkedForDeletionList,function(n){return n!=sharedUserGroupsPreservedList[t].PermissionId})):n.IsGroupItem(t)&&jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,groupMarkedForDeletionList)!=-1&&(groupMarkedForDeletionList=jQuery.grep(groupMarkedForDeletionList,function(n){return n!=sharedUserGroupsPreservedList[t].PermissionId}))};n.AddToModified=function(n){jQuery.inArray(n,modifiedItemIndex)==-1&&modifiedItemIndex.push(n)};n.RemoveFromModified=function(n){modifiedItemIndex=jQuery.grep(modifiedItemIndex,function(t){return t!=n})};n.IsUserItem=function(n){return sharedUserGroupsPreservedList[n].Email!=null&&sharedUserGroupsPreservedList[n].IsUserPermission&&sharedUserGroupsPreservedList[n].TargetUserId>0};n.IsGroupItem=function(n){return sharedUserGroupsPreservedList[n].Email==null&&!sharedUserGroupsPreservedList[n].IsUserPermission&&sharedUserGroupsPreservedList[n].TargetGroupId>0};n.getDashboardEmbedCode=getDashboardEmbedCode;n.GetManagePermisisionContent=function(t){var f=window.granularPermissions!=null?window.granularPermissions.Dashboard:!1,i=sharedUserGroupsPreservedList[t].PermissionEntityDescription,r,u;return n.IsUserItem(t)?isAdmin||f?(r=editUserPermissionUrl+"?userId="+sharedUserGroupsPreservedList[t].TargetUserId,window.Server.App.Localization.UserPermissionWithAdmin.format("<strong>"+i+"<\/strong>","<\/br><\/br>","<a target='_blank' href='"+r+"'>","<\/a>")):window.Server.App.Localization.UserPermissionNonAdmin.format("<strong>"+i+"<\/strong>","<\/br><\/br>"):isAdmin?(u=editGroupPermissionUrl+"?groupId="+sharedUserGroupsPreservedList[t].TargetGroupId,window.Server.App.Localization.GroupPermissionWithAdmin.format("<strong>"+i+"<\/strong>","<\/br><\/br>","<a target='_blank' href='"+u+"'>","<\/a>")):window.Server.App.Localization.GroupPermissionNonAdmin.format("<strong>"+i+"<\/strong>","<\/br><\/br>")}}]);$(function(){var i,n,t;if(sharePermissionDlgObj=$("#share-permission-popup"),sharePermisisonDlgHeader=$("#share-permission-dialog-header"),sharePermissionDlgHeaderItemName=$(".item-name-container #item-name-header"),sharePermissionConatiner=$("#share-permission-container"),accessModeContainer=$("#access-mode-container"),dummyContainer=$("#dummy-container"),embedCodeContainer=$("#get-embed-code-container"),sharePermissionDashboardSettingSectionObj=$(".share-permission-dashboard-setting-section"),sharePermissionPublicSectionObj=$(".share-permission-public-section"),sharePermissionPrivateSectionObj=$(".share-permission-private-section"),sharePermissionUserGroupSectionObj=$("#assign-user-group-container"),manageUserGroupContainer=$("#manage-user-group-container"),manageUserGroupBodySection=$(".manage-user-group-body-section"),getEmbedLinkSection=$(".get-item-embed-link-section"),embedConfiguration=$(".embed-configuration"),changeIndicatorBannerObj=$(".changes-indicator-banner"),shareWithLabelObj=$(".share-with-label"),getLinkInputObj=$("#item-url"),getLinkCopyLinkobj=$("#item-url-copy"),getEmbedCodeInputObj=$("#embed-code"),getEmbedCodeCopyBtnobj=$("#copy-embed-code"),accessModeChangeLink=$("#access-mode-change-link"),manageAccessButton=$("#manage-access-button"),manageAccessBackButton=$("#manage-access-back-button"),manageAccessSaveBtnObj=$("#manage-access-save-button"),manageAccessCancelBtnObj=$("#manage-access-cancel-button"),shareDoneBtnObj=$("#share-done-popup-button"),shareBtnObj=$("#share-permission-button"),accessModeChngBtnObj=$("#access-mode-change-button"),accessModeCancelBtnObj=$("#access-mode-cancel-button"),embedCodeDoneBtnObj=$("#copy-embed-code-done-button"),embedCodeBackButton=$("#copy-embed-code-back-button"),addOwnerBtnObj=$("#add-owner-permission-button"),publicRadioBtnObj=$("#public-access-mode"),privateRadioBtnObj=$("#private-access-mode"),accessModeSelectionInput=$("#access-mode-selection"),markForDeleteBtnObj=$(".mark-for-deletion-icon"),removeMarkForDeleteBtnObj=$(".remove-mark-for-deletion-icon"),showSharedUserGroupContainer=$("#show-shared-user-group-container"),showSharedUserGroupNameSection=$(".shared-user-group-name-section"),showSharedUserGroupName=$(".shared-user-group-name"),showSharedUserGroupCountSection=$(".shared-user-group-count-section"),showSharedUserGroupCount=$(".shared-user-group-count"),toggleMarkForDeletionObj=$(".action-for-delete-container, .marked-for-delete-container"),i=createLoader("permission-popup_wrapper"),sharePermissionDlgWrapperObj=$("#share-permission-popup_wrapper"),n=createLoader("share-permission-popup_wrapper"),t={width:"529px",showOnInit:!1,allowDraggable:!1,enableResize:!1,showHeader:!1,enableModal:!0,closeOnEscape:!1,close:"onSharePermissionPopupClose",open:"onSharePermissionPopupOpen",closeOnEscape:!0},typeof BoldBIDashboard!="undefined"){sharePermissionDlgObj.BoldBIDashboardDialog(t);sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup({template:$("#"+n)});$("#share-close-popup, #share-done-popup-button").on("click",function(){sharePermissionDlgObj.BoldBIDashboardDialog("close");isWidget&&(sharePermissionConatiner.show(),embedCodeContainer.hide(),embedConfiguration.show(),manageAccessButton.hide(),isWidget=!1)})}else{sharePermissionDlgObj.ejDialog(t);sharePermissionDlgWrapperObj.ejWaitingPopup({template:$("#"+n)});$("#share-close-popup, #share-done-popup-button").on("click",function(){sharePermissionDlgObj.ejDialog("close");isWidget&&(sharePermissionConatiner.show(),embedCodeContainer.hide(),embedConfiguration.show(),manageAccessButton.hide(),isWidget=!1)})}accessModeCancelBtnObj.on("click",function(){showSharePermissionContainer()});manageAccessButton.on("click",function(){showManageAccessContainer()});manageAccessBackButton.on("click",function(){showSharePermissionContainerWithRefresh()});manageAccessSaveBtnObj.on("click",function(){$('[data-toggle="popover"]').popover("hide");typeof BoldBIDashboard!="undefined"?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show");prepareRequestForAddItemPermission();updateBulkItemPermission()});manageAccessCancelBtnObj.on("click",function(){manageAccessCancelBtn();generateProfileAvatar()});getLinkCopyLinkobj.on("click",function(){getLinkInputObj.select();/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?getLinkCopyLinkobj.attr("data-original-title",""):(document.execCommand("copy"),getLinkCopyLinkobj.attr("data-original-title",window.Server.App.Localization.Copysuccess),getLinkCopyLinkobj.tooltip("hide").attr("data-original-title",window.Server.App.Localization.Copysuccess).tooltip("fixTitle").tooltip("show"),setTimeout(function(){getLinkCopyLinkobj.attr("data-original-title",window.Server.App.Localization.LinkCopy);getLinkCopyLinkobj.tooltip()},3e3))});getLinkCopyLinkobj.removeClass("focusdiv");getLinkInputObj.on("focusin",function(){getLinkCopyLinkobj.addClass("focusdiv")});getLinkInputObj.on("focusout",function(){getLinkCopyLinkobj.removeClass("focusdiv")});$("input[type=radio][name=access-mode]").on("change",function(){isItemPublic&&privateRadioBtnObj.prop("checked")||!isItemPublic&&publicRadioBtnObj.prop("checked")?(accessModeChngBtnObj.removeAttr("disabled"),$("#make-unlisted").prop("checked",!1)):(accessModeChngBtnObj.attr("disabled",!0),$("#make-unlisted").prop("checked",isItemUnlisted))});$(document).on("click","#make-unlisted",function(){isItemUnlisted&&!$("#make-unlisted").prop("checked")?accessModeChngBtnObj.prop("disabled")&&accessModeChngBtnObj.removeAttr("disabled"):!isItemUnlisted&&$("#make-unlisted").prop("checked")&&accessModeChngBtnObj.prop("disabled")&&accessModeChngBtnObj.removeAttr("disabled")});$(document).on("click","#access-mode-change-button",function(){var t=$(this).attr("data-item-id"),i=$(this).attr("data-name"),r=$(this).attr("data-itemtype"),u=$(this).attr("data-category-name"),n="";isItemPublic&&privateRadioBtnObj.prop("checked")?n=removeItemPublicUrl:!isItemPublic&&publicRadioBtnObj.prop("checked")&&(n=makeItemPublicUrl);$("#progress-alert-container").css("z-index",$("#share-permission-popup_wrapper").css("z-index")+1);n!=""&&$.ajax({type:"POST",url:n,data:{itemId:t,itemTypeId:r,itemName:i},async:!1,success:function(n){n.validation&&n.result?typeof currentItemDetail!="undefined"&&typeof currentItemDetail.IsPublic!="undefined"&&(currentItemDetail.IsPublic=!currentItemDetail.IsPublic):warningToast(window.Server.App.Localization.InternalServerError)}});isItemUnlisted=$("#make-unlisted").prop("checked");$.ajax({type:"POST",url:makeItemUnlistedUrl,data:{itemId:t,isUnlisted:isItemUnlisted},async:!1,success:function(n){n.validation&&n.result?typeof currentItemDetail!="undefined"&&typeof currentItemDetail.IsUnlisted!="undefined"&&(currentItemDetail.IsUnlisted=isItemUnlisted):warningToast(window.Server.App.Localization.InternalServerError)},error:function(){warningToast(window.Server.App.Localization.InternalServerError)}});typeof ResetItemList=="function"&&ResetItemList(ItemType.Dashboard);showSharePermissionContainer();isItemPublic&&privateRadioBtnObj.prop("checked")?(showPrivateContent(),isItemPublic=!1):!isItemPublic&&publicRadioBtnObj.prop("checked")&&(showPublicContent(),isItemPublic=!0)});$(document).on("shown.bs.dropdown",".user-group-scroll-content .change-access-mode-select",function(){if($(".tooltip").hide(),$(this).find(".change-access-mode-selection").length>0){var n=manageUserGroupBodySection,i=$(this).offset().top+$(this).outerHeight(!0)/2-n.offset().top,r=n.height()-($(this).offset().top-n.offset().top+$(this).outerHeight(!0)/2),t=$(this).find(".change-access-mode-selection .dropdown-menu").outerHeight(!0);r<=t&&i>=t?$(this).find(".change-access-mode-selection").removeClass("dropdown").addClass("dropup"):refreshUserGroupScroll()}});$.views.helpers({getUserGroupLogo:function(n){return n=="user"?"<img src='' alt='Profile Picture' id='' onerror='' >":"<div class='group-logo' style=''> <i class='su su-group-1'><\/i><\/div >"}});$("body").on("click",function(n){$(n.target).data("toggle")!=="popover"&&$(n.target).parents('[data-toggle="popover"]').length===0&&$(n.target).parents(".popover.in").length===0?$('[data-toggle="popover"]').popover("hide"):$(n.target).data("toggle")=="popover"&&$(".access-info-icon").not(n.target).popover("hide")});getEmbedCodeInputObj.on("click",function(){getEmbedCodeInputObj.select()});getEmbedCodeCopyBtnobj.on("click",function(){getEmbedCodeInputObj.select();document.execCommand("copy");var n=$(".embed-copy-success");n.show();setTimeout(function(){n.fadeOut(3e3)},3e3)});embedCodeDoneBtnObj.on("click",function(){typeof BoldBIDashboard!="undefined"?sharePermissionDlgObj.BoldBIDashboardDialog("close"):sharePermissionDlgObj.ejDialog("close")});embedCodeBackButton.on("click",function(){showSharePermissionContainer()});$(".embed-configuration [type='checkbox']").on("change",function(){$("#embed-code").val(generateEmbedCode(currentItemDetail));$("#embed-sso").is(":checked")?$(".auth-provider-row").removeClass("hide"):$(".auth-provider-row").addClass("hide");refreshDialogBoxPosition()});$(document).on("change",".sso-providers",function(){$("#embed-code").val(generateEmbedCode(currentItemDetail))});$(document).on("change",".mode-selection",function(){selectedMode=$("#mode-selection").val().toLowerCase();$("#embed-code").val(generateEmbedCode(currentItemDetail))})});$(document).on("click","#show-shared-user-group-link",function(){showManageAccessContainer()})