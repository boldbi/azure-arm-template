!function(t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t()}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(){!function(w){"use strict";function g(e){return w.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],function(){e=e.replace(this.re,this.ch)}),e}function a(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i="(?:"+Object.keys(t).join("|")+")",o=new RegExp(i),i=new RegExp(i,"g"),e=null==e?"":""+e;return o.test(e)?e.replace(i,function(e){return t[e]}):e}function t(e,t){var n=arguments,r=e,a=t;[].shift.apply(n);var d,e=this.each(function(){var e=w(this);if(e.is("select")){var t=e.data("selectpicker"),i="object"==typeof r&&r;if(t){if(i)for(var o in i)i.hasOwnProperty(o)&&(t.options[o]=i[o])}else{var s=w.extend({},l.DEFAULTS,w.fn.selectpicker.defaults||{},e.data(),i);e.data("selectpicker",t=new l(this,s,a))}"string"==typeof r&&(d=t[r]instanceof Function?t[r].apply(t,n):t.options[r])}});return void 0!==d?d:e}function e(e){if(null==this)throw TypeError();var t=String(this);if(e&&"[object RegExp]"==d.call(e))throw TypeError();var i=t.length,o=String(e),s=o.length,e=1<arguments.length?arguments[1]:void 0,e=e?Number(e):0,n=(e!=e&&(e=0),Math.min(Math.max(e,0),i));if(i<s+n)return!1;for(var r=-1;++r<s;)if(t.charCodeAt(n+r)!=o.charCodeAt(r))return!1;return!0}var d,n,i,r;function o(e){if(null==this)throw TypeError();var t=String(this);if(e&&"[object RegExp]"==n.call(e))throw TypeError();var i=t.length,e=String(e),o=e.length,s=1<arguments.length?arguments[1]:void 0;return(s=s?Number(s):0)!=s&&(s=0),!(i<o+Math.min(Math.max(s,0),i))&&-1!=r.call(t,e,s)}String.prototype.includes||(n={}.toString,i=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),r="".indexOf,i?i(String.prototype,"includes",{value:o,configurable:!0,writable:!0}):String.prototype.includes=o),String.prototype.startsWith||(i=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),d={}.toString,i?i(String.prototype,"startsWith",{value:e,configurable:!0,writable:!0}):String.prototype.startsWith=e),Object.keys||(Object.keys=function(e,t,i){for(t in i=[],e)i.hasOwnProperty.call(e,t)&&i.push(t);return i}),w.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent?("function"==typeof Event?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),i.dispatchEvent(t)):(i.fireEvent&&((t=document.createEventObject()).eventType=e,i.fireEvent("on"+e,t)),this.trigger(e))},w.expr[":"].icontains=function(e,t,i){e=w(e);return(e.data("tokens")||e.text()).toUpperCase().includes(i[3].toUpperCase())},w.expr[":"].ibegins=function(e,t,i){e=w(e);return(e.data("tokens")||e.text()).toUpperCase().startsWith(i[3].toUpperCase())},w.expr[":"].aicontains=function(e,t,i){e=w(e);return(e.data("tokens")||e.data("normalizedText")||e.text()).toUpperCase().includes(i[3].toUpperCase())},w.expr[":"].aibegins=function(e,t,i){e=w(e);return(e.data("tokens")||e.data("normalizedText")||e.text()).toUpperCase().startsWith(i[3].toUpperCase())};function l(e,t,i){i&&(i.stopPropagation(),i.preventDefault()),this.$element=w(e),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=t,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=l.prototype.val,this.render=l.prototype.render,this.refresh=l.prototype.refresh,this.setStyle=l.prototype.setStyle,this.selectAll=l.prototype.selectAll,this.deselectAll=l.prototype.deselectAll,this.destroy=l.prototype.remove,this.remove=l.prototype.remove,this.show=l.prototype.show,this.hide=l.prototype.hide,this.init()}l.VERSION="1.7.2",l.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1},l.prototype={constructor:l,init:function(){var t=this,e=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.liObj={},this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),void 0!==e&&(this.$button.attr("data-id",e),w('label[for="'+e+'"]').click(function(e){e.preventDefault(),t.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on("hide.bs.dropdown",function(e){t.$element.trigger("hide.bs.select",e)}),this.$newElement.on("hidden.bs.dropdown",function(e){t.$element.trigger("hidden.bs.select",e)}),this.$newElement.on("show.bs.dropdown",function(e){t.$element.trigger("show.bs.select",e)}),this.$newElement.on("shown.bs.dropdown",function(e){t.$element.trigger("shown.bs.select",e)}),setTimeout(function(){t.$element.trigger("loaded.bs.select")})},createDropdown:function(){var e=this.multiple?" show-tick":"",t=this.$element.parent().hasClass("input-group")?" input-group-btn":"",i=this.autofocus?" autofocus":"",o=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",s=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+a(this.options.liveSearchPlaceholder)+'"')+"></div>":"",n=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",r=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",e='<div class="btn-group bootstrap-select'+e+t+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+i+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+o+s+n+'<ul class="dropdown-menu inner" role="menu"></ul>'+r+"</div></div>";return w(e)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul")[0].innerHTML=t,e},reloadLi:function(){this.destroyLi();var e=this.createLi();this.$menuInner[0].innerHTML=e},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){function l(e,t,i,o){return"<li"+(void 0!==i&""!==i?' class="'+i+'"':"")+(void 0!==t&null!==t?' data-original-index="'+t+'"':"")+(void 0!==o&null!==o?'data-optgroup="'+o+'"':"")+">"+e+"</li>"}function c(e,t,i,o){return'<a tabindex="0"'+(void 0!==t?' class="'+t+'"':"")+(void 0!==i?' style="'+i+'"':"")+(p.options.liveSearchNormalize?' data-normalized-text="'+g(a(e))+'"':"")+(void 0!==o||null!==o?' data-tokens="'+o+'"':"")+">"+e+'<span class="'+p.options.iconBase+" "+p.options.tickIcon+' check-mark"></span></a>'}var e,p=this,h=[],u=0,t=document.createElement("option"),m=-1;return!this.options.title||this.multiple||(m--,this.$element.find(".bs-title-option").length)||(e=this.$element[0],t.className="bs-title-option",t.appendChild(document.createTextNode(this.options.title)),t.value="",e.insertBefore(t,e.firstChild),void 0===w(e.options[e.selectedIndex]).attr("selected")&&(t.selected=!0)),this.$element.find("option").each(function(e){var t,i,o,s,n,r,a,d=w(this);m++,d.hasClass("bs-title-option")||(t=this.className||"",i=this.style.cssText,o=d.data("content")?d.data("content"):d.html(),s=d.data("tokens")?d.data("tokens"):null,r=void 0!==d.data("subtext")?'<small class="text-muted">'+d.data("subtext")+"</small>":"",a=void 0!==d.data("icon")?'<span class="'+p.options.iconBase+" "+d.data("icon")+'"></span> ':"",n=this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled,""!==a&&n&&(a="<span>"+a+"</span>"),p.options.hideDisabled&&n?m--:(d.data("content")||(o=a+'<span class="text">'+o+r+"</span>"),"OPTGROUP"===this.parentElement.tagName&&!0!==d.data("divider")?(n=" "+this.parentElement.className||"",0===d.index()&&(u+=1,a=this.parentElement.label,r=void 0!==d.parent().data("subtext")?'<small class="text-muted">'+d.parent().data("subtext")+"</small>":"",a=(d.parent().data("icon")?'<span class="'+p.options.iconBase+" "+d.parent().data("icon")+'"></span> ':"")+'<span class="text">'+a+r+"</span>",0!==e&&0<h.length&&(m++,h.push(l("",null,"divider",u+"div"))),m++,h.push(l(a,null,"dropdown-header"+n,u))),h.push(l(c(o,"opt "+t+n,i,s),e,"",u))):!0===d.data("divider")?h.push(l("",e,"divider")):!0===d.data("hidden")?h.push(l(c(o,t,i,s),e,"hidden is-hidden")):(this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName&&(m++,h.push(l("",null,"divider",u+"div"))),h.push(l(c(o,t,i,s),e))),p.liObj[e]=m))}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),h.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(e){var t,o=this,e=(!1!==e&&this.$element.find("option").each(function(e){var t=o.findLis().eq(o.liObj[e]);o.setDisabled(e,this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled,t),o.setSelected(e,this.selected,t)}),this.tabIndex(),this.$element.find("option").map(function(){var e,t,i;if(this.selected)return(!o.options.hideDisabled||!(this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled))&&(t=(e=w(this)).data("icon")&&o.options.showIcon?'<i class="'+o.options.iconBase+" "+e.data("icon")+'"></i> ':"",i=o.options.showSubtext&&e.data("subtext")&&!o.multiple?' <small class="text-muted">'+e.data("subtext")+"</small>":"",void 0!==e.attr("title")?e.attr("title"):e.data("content")&&o.options.showContent?e.data("content"):t+e.html()+i)}).toArray()),i=this.multiple?e.join(this.options.multipleSeparator):e[0];this.multiple&&-1<this.options.selectedTextFormat.indexOf("count")&&(1<(t=this.options.selectedTextFormat.split(">")).length&&e.length>t[1]||1==t.length&&2<=e.length)&&(t=this.options.hideDisabled?", [disabled]":"",t=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+t).length,i=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(e.length,t):this.options.countSelectedText).replace("{0}",e.length.toString()).replace("{1}",t.toString())),null==this.options.title&&(this.options.title=this.$element.attr("title")),i=(i="static"==this.options.selectedTextFormat?this.options.title:i)||(void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",w.trim(i.replace(/<[^>]*>?/g,""))),this.$button.children(".filter-option").html(i),this.$element.trigger("rendered.bs.select")},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));e=e||this.options.style;"add"==t?this.$button.addClass(e):"remove"==t?this.$button.removeClass(e):(this.$button.removeClass(this.options.style),this.$button.addClass(e))},liHeight:function(e){var t,i,o,s,n,r,a,d,l,c;(e||!1!==this.options.size&&!this.sizeInfo)&&(e=document.createElement("div"),c=document.createElement("div"),o=document.createElement("ul"),l=document.createElement("li"),t=document.createElement("li"),s=document.createElement("a"),i=document.createElement("span"),n=this.options.header?this.$menu.find(".popover-title")[0].cloneNode(!0):null,r=this.options.liveSearch?document.createElement("div"):null,a=this.options.actionsBox&&this.multiple?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,d=this.options.doneButton&&this.multiple?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,i.className="text",e.className=this.$menu[0].parentNode.className+" open",c.className="dropdown-menu open",o.className="dropdown-menu inner",l.className="divider",i.appendChild(document.createTextNode("Inner text")),s.appendChild(i),t.appendChild(s),o.appendChild(t),o.appendChild(l),n&&c.appendChild(n),r&&(i=document.createElement("span"),r.className="bs-searchbox",i.className="form-control",r.appendChild(i),c.appendChild(r)),a&&c.appendChild(a),c.appendChild(o),d&&c.appendChild(d),e.appendChild(c),document.body.appendChild(e),t=s.offsetHeight,i=n?n.offsetHeight:0,o=r?r.offsetHeight:0,s=a?a.offsetHeight:0,n=d?d.offsetHeight:0,r=w(l).outerHeight(!0),d=(a="function"==typeof getComputedStyle&&getComputedStyle(c))?null:w(c),c=(l=parseInt(a?a.paddingTop:d.css("paddingTop"))+parseInt(a?a.paddingBottom:d.css("paddingBottom"))+parseInt(a?a.borderTopWidth:d.css("borderTopWidth"))+parseInt(a?a.borderBottomWidth:d.css("borderBottomWidth")))+parseInt(a?a.marginTop:d.css("marginTop"))+parseInt(a?a.marginBottom:d.css("marginBottom"))+2,document.body.removeChild(e),this.sizeInfo={liHeight:t,headerHeight:i,searchHeight:o,actionsHeight:s,doneButtonHeight:n,dividerHeight:r,menuPadding:l,menuExtras:c})},setSize:function(){var o,s,n,r,a,e,t,d,l,c,p,h,i,u,m,g,b,f,v,I;this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size&&(r=(n=this).$menu,a=this.$menuInner,e=w(window),t=this.$newElement[0].offsetHeight,d=this.sizeInfo.liHeight,l=this.sizeInfo.headerHeight,c=this.sizeInfo.searchHeight,p=this.sizeInfo.actionsHeight,h=this.sizeInfo.doneButtonHeight,i=this.sizeInfo.dividerHeight,u=this.sizeInfo.menuPadding,m=this.sizeInfo.menuExtras,f=this.options.hideDisabled?".disabled":"",(g=function(){o=n.$newElement.offset().top-e.scrollTop(),s=e.height()-o-t})(),"auto"===this.options.size?((b=function(){function e(t,i){return function(e){return i?e.classList?e.classList.contains(t):w(e).hasClass(t):!(e.classList?e.classList.contains(t):w(e).hasClass(t))}}var t=n.$menuInner[0].getElementsByTagName("li"),t=Array.prototype.filter?Array.prototype.filter.call(t,e("hidden",!1)):n.$lis.not(".hidden"),i=Array.prototype.filter?Array.prototype.filter.call(t,e("dropdown-header",!0)):t.filter(".dropdown-header");g(),v=s-m,I=n.options.container?(r.data("height")||r.data("height",r.height()),r.data("height")):r.height(),n.options.dropupAuto&&n.$newElement.toggleClass("dropup",s<o&&v-m<I),n.$newElement.hasClass("dropup")&&(v=o-m),t=3<t.length+i.length?3*d+m-2:0,r.css({"max-height":v+"px",overflow:"hidden","min-height":t+l+c+p+h+"px"}),a.css({"max-height":v-l-c-p-h-u+"px","overflow-y":"auto","min-height":Math.max(t-u,0)+"px"})})(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",b),e.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",b)):this.options.size&&"auto"!=this.options.size&&this.$lis.not(f).length>this.options.size&&(b=this.$lis.not(".divider").not(f).children().slice(0,this.options.size).last().parent().index(),f=this.$lis.slice(0,b+1).filter(".divider").length,v=d*this.options.size+f*i+u,I=n.options.container?(r.data("height")||r.data("height",r.height()),r.data("height")):r.height(),n.options.dropupAuto&&this.$newElement.toggleClass("dropup",s<o&&v-m<I),r.css({"max-height":v+l+c+p+h+"px",overflow:"hidden","min-height":""}),a.css({"max-height":v-u+"px","overflow-y":"auto","min-height":""})))},setWidth:function(){var e,t,i,o;"auto"===this.options.width?(this.$menu.css("min-width","0"),e=this.$menu.parent().clone().appendTo("body"),t=this.options.container?this.$newElement.clone().appendTo("body"):e,i=e.children(".dropdown-menu").outerWidth(),o=t.css("width","auto").children("button").outerWidth(),e.remove(),t.remove(),this.$newElement.css("width",Math.max(i,o)+"px")):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){function e(e){s.addClass(e.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),i=e.hasClass("dropup")?0:e[0].offsetHeight,s.css({top:t.top+i,left:t.left,width:e[0].offsetWidth,position:"absolute"})}var t,i,o=this,s=w("<div />");this.$newElement.on("click",function(){o.isDisabled()||(e(w(this)),s.appendTo(o.options.container),s.toggleClass("open",!w(this).hasClass("open")),s.append(o.$menu))}),w(window).on("resize scroll",function(){e(o.$newElement)}),this.$element.on("hide.bs.select",function(){o.$menu.data("height",o.$menu.height()),s.detach()})},setSelected:function(e,t,i){(i=i||this.findLis().eq(this.liObj[e])).toggleClass("selected",t)},setDisabled:function(e,t,i){i=i||this.findLis().eq(this.liObj[e]),t?i.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):i.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled")),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!e.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var m=this,t=w(document);this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()}),t.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&t.data("spaceSelect")&&(e.preventDefault(),t.data("spaceSelect",!1))}),this.$newElement.on("click",function(){m.setSize(),m.$element.on("shown.bs.select",function(){var e;m.options.liveSearch||m.multiple?m.multiple||"number"==typeof(e=m.liObj[m.$element[0].selectedIndex])&&!1!==m.options.size&&(e=(e=m.$lis.eq(e)[0].offsetTop-m.$menuInner[0].offsetTop)-m.$menuInner[0].offsetHeight/2+m.sizeInfo.liHeight/2,m.$menuInner[0].scrollTop=e):m.$menu.find(".selected a").focus()})}),this.$menu.on("click","li a",function(e){var t,i,o,s,n,r,a,d,l,c=w(this),p=c.parent().data("originalIndex"),h=m.$element.val(),u=m.$element.prop("selectedIndex");m.multiple&&e.stopPropagation(),e.preventDefault(),!m.isDisabled()&&!c.parent().hasClass("disabled")&&(i=(t=(e=m.$element.find("option")).eq(p)).prop("selected"),a=t.parent("optgroup"),o=m.options.maxOptions,s=a.data("maxOptions")||!1,m.multiple?(t.prop("selected",!i),m.setSelected(p,!i),c.blur(),(!1!==o||!1!==s)&&(n=o<e.filter(":selected").length,r=s<a.find("option:selected").length,o&&n||s&&r)&&(o&&1==o?(e.prop("selected",!1),t.prop("selected",!0),m.$menu.find(".selected").removeClass("selected"),m.setSelected(p,!0)):s&&1==s?(a.find("option:selected").prop("selected",!1),t.prop("selected",!0),a=c.parent().data("optgroup"),m.$menu.find('[data-optgroup="'+a+'"]').removeClass("selected"),m.setSelected(p,!0)):(a=(c="function"==typeof m.options.maxOptionsText?m.options.maxOptionsText(o,s):m.options.maxOptionsText)[0].replace("{n}",o),d=c[1].replace("{n}",s),l=w('<div class="notify"></div>'),c[2]&&(a=a.replace("{var}",c[2][1<o?0:1]),d=d.replace("{var}",c[2][1<s?0:1])),t.prop("selected",!1),m.$menu.append(l),o&&n&&(l.append(w("<div>"+a+"</div>")),m.$element.trigger("maxReached.bs.select")),s&&r&&(l.append(w("<div>"+d+"</div>")),m.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){m.setSelected(p,!1)},10),l.delay(750).fadeOut(300,function(){w(this).remove()})))):(e.prop("selected",!1),t.prop("selected",!0),m.$menu.find(".selected").removeClass("selected"),m.setSelected(p,!0)),m.multiple?m.options.liveSearch&&m.$searchbox.focus():m.$button.focus(),h!=m.$element.val()&&m.multiple||u!=m.$element.prop("selectedIndex")&&!m.multiple)&&(m.$element.triggerNative("change"),m.$element.trigger("changed.bs.select",[p,t.prop("selected"),i]))}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(e){e.currentTarget==this&&(e.preventDefault(),e.stopPropagation(),(m.options.liveSearch&&!w(e.target).hasClass("close")?m.$searchbox:m.$button).focus())}),this.$menu.on("click","li.divider, li.dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),(m.options.liveSearch?m.$searchbox:m.$button).focus()}),this.$menu.on("click",".popover-title .close",function(){m.$button.click()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(e){(m.options.liveSearch?m.$searchbox:m.$button).focus(),e.preventDefault(),e.stopPropagation(),w(this).hasClass("bs-select-all")?m.selectAll():m.deselectAll(),m.$element.triggerNative("change")}),this.$element.change(function(){m.render(!1)})},liveSearchListener:function(){var o=this,t=w('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){o.$menuInner.find(".active").removeClass("active"),o.$searchbox.val()&&(o.$searchbox.val(""),o.$lis.not(".is-hidden").removeClass("hidden"),t.parent().length)&&t.remove(),o.multiple||o.$menuInner.find(".selected").addClass("active"),setTimeout(function(){o.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var e,i;o.$searchbox.val()?(e=o.$lis.not(".is-hidden").removeClass("hidden").children("a"),(e=o.options.liveSearchNormalize?e.not(":a"+o._searchStyle()+'("'+g(o.$searchbox.val())+'")'):e.not(":"+o._searchStyle()+'("'+o.$searchbox.val()+'")')).parent().addClass("hidden"),o.$lis.filter(".dropdown-header").each(function(){var e=w(this),t=e.data("optgroup");0===o.$lis.filter("[data-optgroup="+t+"]").not(e).not(".hidden").length&&(e.addClass("hidden"),o.$lis.filter("[data-optgroup="+t+"div]").addClass("hidden"))}),(i=o.$lis.not(".hidden")).each(function(e){var t=w(this);t.hasClass("divider")&&(t.index()===i.eq(0).index()||t.index()===i.last().index()||i.eq(e+1).hasClass("divider"))&&t.addClass("hidden")}),o.$lis.not(".hidden, .no-results").length?t.parent().length&&t.remove():(t.parent().length&&t.remove(),t.html(o.options.noneResultsText.replace("{0}",'"'+a(o.$searchbox.val())+'"')).show(),o.$menuInner.append(t))):(o.$lis.not(".is-hidden").removeClass("hidden"),t.parent().length&&t.remove()),o.$lis.filter(".active").removeClass("active"),o.$searchbox.val()&&o.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus(),w(this).focus()})},_searchStyle:function(){var e="icontains";switch(this.options.liveSearchStyle){case"begins":case"startsWith":e="ibegins"}return e},val:function(e){return void 0!==e?(this.$element.val(e),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis(),this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!0),this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").addClass("selected"),this.render(!1)},deselectAll:function(){this.findLis(),this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!1),this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").removeClass("selected"),this.render(!1)},keydown:function(e){var t,i,o,s,n,r,a,d,l=w(this),c=(l.is("input")?l.parent():l).parent(),p=c.data("this"),h=":not(.disabled, .hidden, .dropdown-header, .divider)",u={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};p.options.liveSearch&&(c=l.parent().parent()),p.options.container&&(c=p.$menu),t=w("[role=menu] li a",c),!(r=p.$menu.parent().hasClass("open"))&&(48<=e.keyCode&&e.keyCode<=57||65<=e.keyCode&&e.keyCode<=90)&&(p.options.container?p.$newElement.trigger("click"):(p.setSize(),p.$menu.parent().addClass("open"),r=!0),p.$searchbox.focus()),p.options.liveSearch&&(/(^9$|27)/.test(e.keyCode.toString(10))&&r&&0===p.$menu.find(".active").length&&(e.preventDefault(),p.$menu.parent().removeClass("open"),p.options.container&&p.$newElement.removeClass("open"),p.$button.focus()),t=w("[role=menu] li:not(.disabled, .hidden, .dropdown-header, .divider)",c),l.val()||/(38|40)/.test(e.keyCode.toString(10))||0===t.filter(".active").length&&(t=p.$newElement.find("li"),t=p.options.liveSearchNormalize?t.filter(":a"+p._searchStyle()+"("+g(u[e.keyCode])+")"):t.filter(":"+p._searchStyle()+"("+u[e.keyCode]+")"))),t.length&&(/(38|40)/.test(e.keyCode.toString(10))?(c=t.index(t.filter(":focus")),o=t.parent(h).first().data("originalIndex"),s=t.parent(h).last().data("originalIndex"),i=t.eq(c).parent().nextAll(h).eq(0).data("originalIndex"),a=t.eq(c).parent().prevAll(h).eq(0).data("originalIndex"),h=t.eq(i).parent().prevAll(h).eq(0).data("originalIndex"),p.options.liveSearch&&(t.each(function(e){w(this).hasClass("disabled")||w(this).data("index",e)}),c=t.index(t.filter(".active")),o=t.first().data("index"),s=t.last().data("index"),i=t.eq(c).nextAll().eq(0).data("index"),a=t.eq(c).prevAll().eq(0).data("index"),h=t.eq(i).prevAll().eq(0).data("index")),n=l.data("prevIndex"),38==e.keyCode?(p.options.liveSearch&&--c,(c=(c=c!=h&&a<c?a:c)<o?o:c)==n&&(c=s)):40==e.keyCode&&(p.options.liveSearch&&(c+=1),(c=s<(c=(c=-1==c?0:c)!=h&&c<i?i:c)?s:c)==n)&&(c=o),l.data("prevIndex",c),p.options.liveSearch?(e.preventDefault(),l.hasClass("dropdown-toggle")||(t.removeClass("active").eq(c).addClass("active").children("a").focus(),l.focus())):t.eq(c).focus()):l.is("input")||(d=[],t.each(function(){w(this).parent().hasClass("disabled")||w.trim(w(this).text().toLowerCase()).substring(0,1)==u[e.keyCode]&&d.push(w(this).parent().index())}),a=w(document).data("keycount"),a++,w(document).data("keycount",a),w.trim(w(":focus").text().toLowerCase()).substring(0,1)!=u[e.keyCode]?(a=1,w(document).data("keycount",a)):d.length<=a&&(w(document).data("keycount",0),d.length<a)&&(a=1),t.eq(d[a-1]).focus()),(/(13|32)/.test(e.keyCode.toString(10))||/(^9$)/.test(e.keyCode.toString(10))&&p.options.selectOnTab)&&r&&(/(32)/.test(e.keyCode.toString(10))||e.preventDefault(),p.options.liveSearch?/(32)/.test(e.keyCode.toString(10))||(p.$menu.find(".active a").click(),l.focus()):((h=w(":focus")).click(),h.focus(),e.preventDefault(),w(document).data("spaceSelect",!0)),w(document).data("keycount",0)),/(^9$|27)/.test(e.keyCode.toString(10))&&r&&(p.multiple||p.options.liveSearch)||/(27)/.test(e.keyCode.toString(10))&&!r)&&(p.$menu.parent().removeClass("open"),p.options.container&&p.$newElement.removeClass("open"),p.$button.focus())},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.liObj={},this.reloadLi(),this.render(),this.checkDisabled(),this.liHeight(!0),this.setStyle(),this.setWidth(),this.$lis&&this.$searchbox.trigger("propertychange"),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()}};var s=w.fn.selectpicker;w.fn.selectpicker=t,w.fn.selectpicker.Constructor=l,w.fn.selectpicker.noConflict=function(){return w.fn.selectpicker=s,this},w(document).data("keycount",0).on("keydown",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',l.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',function(e){e.stopPropagation()}),w(window).on("load.bs.select.data-api",function(){w(".selectpicker").each(function(){var e=w(this);t.call(e,e.data())})})}(jQuery)});var browser=("undefined"!=typeof ej?ej:BoldBIDashboard).browserInfo(),isGetLinkDialogBinded=!1;function intializeGetLinkDialog(){$.ajax({type:"Get",url:getLinkDialogViewUrl,success:function(e){$("body").append(e)}})}function GetLink(e){var t,i,o=e.ItemType,o=(2==o?$(".dashboard-link").show():6==o?($(".file-link").show(),$("#compressed-link").prop("checked",!0)):(8==o?$(".widget-link"):$(".link")).show(),e.Name),s=(e.Id,document.getElementById("get_item_link").style.display="block",'<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.GetLink+'</span><span class="item-name">'+e.Name+"</span></span>");isGetLinkDialogBinded?((i=document.getElementById("get_item_link_dialog").ej2_instances)[0].header=s,i[0].show()):((t=document.createElement("div")).setAttribute("id","get_item_link_dialog"),document.getElementById("dashboard-page-container").appendChild(t),(i=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"450px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:s,showCloseIcon:!0,open:onGetLinkDialogOpen,content:document.getElementById("get_item_link"),buttons:[{click:function(e){i.hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.OKButton}}]})).appendTo(t),isGetLinkDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("get_item_link_dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("get_item_link_dialog")),intializeGetLinkDialog(),ejs.popups.hideSpinner(document.getElementById("get_item_link_dialog")),$(".get_link").show(),e.IsPublic?($(".private-note").hide(),$(".public-note").show()):($(".private-note").show(),$(".public-note").hide()),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").hide(),$("#item-link").css({width:"100%",borderRadius:"4px"}),$("#item-link-copy").attr("data-original-title","")):$("#item-link-copy").tooltip({animation:!1}),$(".report-name").html(o),$(".report-name").attr("title",o),$("#item-link").val(getDashboardShareLink(e.Id,e.CategoryName,e.Name)),$("#item-link").select(),$(".modal-footer .validation-area").css("display","block")}function onGetLinkDialogOpen(){$("#item-link").select(),$(".get_link").show(),$("#item-link").val(itemUrl.trim()),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").hide(),$("#item-link-copy").attr("data-original-title",""))}function getDashboardShareLink(e,t,i,o){var s=baseUrl.split("/");return encodeURI(s[0]+"//"+s[2]+(o||viewDashboardUrlAction)+"/"+e+"/"+t+"/"+i)}$(document).on("click","#item-link-copy",function(e){$("#item-link").select(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").attr("data-original-title","")):(document.execCommand("copy"),$("#item-link-copy").attr("data-original-title",window.Server.App.Localization.Copysuccess),$("#item-link-copy").tooltip("hide").attr("data-original-title",window.Server.App.Localization.Copysuccess).tooltip("fixTitle").tooltip("show"),setTimeout(function(){$("#item-link-copy").attr("data-original-title",window.Server.App.Localization.LinkCopy),$("#item-link-copy").tooltip()},3e3))});var isWidget=!1,sharePermissionDlgObj="",sharePermissionDlgWrapperObj="",sharePermisisonDlgHeader="",sharePermissionDlgHeaderItemName="",selectedMode="",sharePermissionConatiner="",accessModeContainer="",dummyContainer="",embedCodeContainer="",sharePermissionDashboardSettingSectionObj="",sharePermissionPublicSectionObj="",sharePermissionPrivateSectionObj="",sharePermissionUserGroupSectionObj="",manageUserGroupContainer="",manageUserGroupBodySection="",getEmbedLinkSection="",embedConfiguration="",changeIndicatorBannerObj="",shareWithLabelObj="",getLinkInputObj="",getLinkCopyLinkobj="",getEmbedCodeInputObj="",getEmbedCodeCopyBtnobj="",accessModeChangeLink="",manageAccessButton="",manageAccessBackButton="",manageAccessSaveBtnObj="",manageAccessCancelBtnObj="",shareDoneBtnObj="",shareBtnObj="",accessModeChngBtnObj="",accessModeCancelBtnObj="",embedCodeDoneBtnObj="",embedCodeBackButton="",addOwnerBtnObj="",publicRadioBtnObj="",privateRadioBtnObj="",isItemPublic=!1,isEntireDOMRendered=!1,isItemUnlisted=!1,isGetEmbedCodeTriggered=!1,isMarkItemsPublicForShareDialog=!1,isAccessModeChanges=!1,accessModeSelectionInput="",sharedUserGroupsPreservedList=[],sharedAccessModePreservedList=[],markForDeleteBtnObj="",removeMarkForDeleteBtnObj="",toggleMarkForDeletionObj="",modifiedItemIndex=[],addNewItemPermission=[],userMarkedForDeletionList=[],groupMarkedForDeletionList=[],showSharedUserGroupContainer="",showSharedUserGroupNameSection="",showSharedUserGroupName="",showSharedUserGroupCountSection="",showSharedUserGroupCount="",currentItemDetail=[],currentDashboardDetail=[],shareItem=angular.module("serverApp");function manageAccessCancelBtn(){$('[data-toggle="popover"]').popover("hide"),resetToActualScope(),enableAutomCompleteControl(),enableAutocompleteAccessModeSelection()}function shareDashboardPermission(e,t){$("#user-group-search-input_suggestion").removeClass("hide-suggesstion"),currentItemDetail=e,currentDashboardDetail=t;var i=null!=window.granularPermissions&&(window.granularPermissions.All||window.granularPermissions.DashboardSettings),o=null!=window.granularPermissions&&window.granularPermissions.Dashboard,s=null!=window.granularPermissions&&window.granularPermissions.Slideshow,n=null!=window.granularPermissions&&window.granularPermissions.Datasource,r=null!=window.granularPermissions&&window.granularPermissions.Category,a=angular.element("#share-permission-content-section").scope(),i=(a.currentItemType=e.ItemType,a.isAdmin=isAdmin,a.hasDashboardSettingsPermission=isAdmin||i,isItemUnlisted=e.IsUnlisted,null!=t&&(a.isDashboardPublic=t.IsPublic),0),i=e.ItemType==ItemType.Category||e.ItemType==ItemType.Datasource?241:e.ItemType==ItemType.Slideshow?356:e.ItemType==ItemType.ItemView?418:isMarkItemsPublicForShareDialog?e.IsMultiDashboard?e.IsPublic?407:391:e.IsPublic?434:418:e.IsMultiDashboard?335:362;switch("undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog({height:i}):sharePermissionDlgObj.ejDialog({height:i}),sharePermissionDlgHeaderItemName.text(e.Name),sharePermissionDlgObj.show(),$("#share-permission-popup_wrapper, #user-group-search-input_suggestion").addClass("custom-bootstrap-styles"),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog("open"):sharePermissionDlgObj.ejDialog("open"),e.ItemType==ItemType.Dashboard||e.ItemType==ItemType.ItemView?e.CreatedById==currentUserId||isAdmin||o?((isMarkItemsPublicForShareDialog||e.ItemType==ItemType.ItemView||!isMarkItemsPublicForShareDialog&&e.ItemType==ItemType.Dashboard?e.IsPublic?showPublicContent:showPrivateContent:showDashboardSettingContent)(),addAttributeValueToBtnEle(e)):(hidePublicPrivateContent(),a=e.IsMultiDashboard?312:339,"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog({height:a}):sharePermissionDlgObj.ejDialog({height:a})):hidePublicPrivateContent(),e.ItemType==ItemType.Dashboard?e.CreatedById==currentUserId||isAdmin||o?showShareDialogContent(e):hideShareUserGroupPermissionSection():e.ItemType==ItemType.Slideshow?e.CreatedById==currentUserId||isAdmin||s?showShareDialogContent(e):hideShareUserGroupPermissionSection():e.ItemType==ItemType.Datasource?e.CreatedById==currentUserId||isAdmin||n?showShareDialogContent(e):hideShareUserGroupPermissionSection():e.ItemType==ItemType.Category?e.CreatedById==currentUserId||isAdmin||r?showShareDialogContent(e):hideShareUserGroupPermissionSection():e.CreatedById==currentUserId||isAdmin?showShareDialogContent(e):hideShareUserGroupPermissionSection(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-url-copy").hide(),$("#item-url").css({width:"100%",borderRadius:"4px"}),$("#item-url-copy").attr("data-original-title","")):$("#item-url-copy").tooltip({animation:!1}),e.ItemType){case ItemType.Dashboard:$("#item-url").val(getDashboardShareLink(e.Id,e.CategoryName,e.Name));break;case ItemType.ItemView:var d=getDashboardShareLink(t.Id,t.CategoryName,t.Name);$("#item-url").val(d+"?viewid="+e.Id);break;case ItemType.Slideshow:d=baseUrl.split("/");$("#item-url").val(d[0]+"//"+d[2]+slideShowUrl+"/"+e.Id+"/"+e.Name);break;default:$("#item-url").val("")}}function addGroupOwnerDialogOpen(){var e=$("#add-owner-button").attr("data-groupname"),t=$("#add-owner-button").attr("data-groupid"),i=angular.element("#share-permission-content-section").scope();currentItemDetail.ItemType=ItemType.UserManagement,i.currentItemType=ItemType.UserManagement,i.isAdmin=isAdmin,"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog({height:241}):sharePermissionDlgObj.ejDialog({height:241}),sharePermisisonDlgHeader.text(window.Server.App.Localization.AddGroupOwnerBtn),sharePermissionDlgHeaderItemName.text(e),sharePermissionDlgObj.show(),$("#share-permission-popup_wrapper, #user-group-search-input_suggestion").addClass("custom-bootstrap-styles"),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog("open"):sharePermissionDlgObj.ejDialog("open"),hidePublicPrivateContent(),getGroupUserPermission(t),addOwnerBtnObj.attr("data-item-id",t),addOwnerBtnObj.attr("data-name",e),addOwnerBtnObj.attr("data-itemtype",ItemType.UserManagement),autoCompleteHiddenEle.attr("data-item-id",t),autoCompleteHiddenEle.attr("data-itemtype",ItemType.UserManagement)}function showShareDialogContent(e){showShareUserGroupPermissionSection(),getShareItemPermission(e.Id),addAttributeValueToBtnEle(e),addAttributeValueToAutoCompleteEle(e)}function onSharePermissionPopupOpen(e){$('[data-toggle="popover"]').popover("hide"),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("refresh"):sharePermissionDlgWrapperObj.ejWaitingPopup("refresh"),0==isGetEmbedCodeTriggered&&showSharePermissionContainer(),refreshDialogBoxPosition()}function onSharePermissionPopupClose(e){currentItemDetail=[],$(".embed-configuration [type='checkbox']").prop("checked",!1),$("#mode-selection").val("view"),$("#sso-providers").val("OpenID"),selectedMode="",$(".auth-provider-row").addClass("hide"),$('[data-toggle="popover"]').popover("hide"),showSharePermissionContainer(),"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("refresh"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide")):(sharePermissionDlgWrapperObj.ejWaitingPopup("refresh"),sharePermissionDlgWrapperObj.ejWaitingPopup("hide")),isGetEmbedCodeTriggered=!1,refreshDialogBoxPosition()}function showAccessModeContainer(){sharePermisisonDlgHeader.text(window.Server.App.Localization.SharePermissionAccessMode),accessModeContainer.show(),accessModeChngBtnObj.show(),accessModeCancelBtnObj.show(),sharePermissionConatiner.hide(),manageAccessButton.hide(),shareBtnObj.hide(),shareDoneBtnObj.hide(),refreshDialogBoxPosition(),currentItemDetail.ItemType!=ItemType.Dashboard||isMarkItemsPublicForShareDialog||sharePermissionDashboardSettingSectionObj.show()}function showManageAccessContainer(){sharePermissionDashboardSettingSectionObj.hide(),showSharedUserGroupContainer.hide(),shareBtnObj.text(window.Server.App.Localization.AddPeopleBtn),addOwnerBtnObj.text(window.Server.App.Localization.AddPeopleBtn),sharePermisisonDlgHeader.text(window.Server.App.Localization.ManageAccess),dummyContainer.hide(),""==autoCompleteInstance.getValue()&&(shareBtnObj.hide(),addOwnerBtnObj.hide()),currentItemDetail.ItemType==ItemType.UserManagement&&($(".change-access-mode-selection span").removeClass("caret"),$(".change-access-mode-selection button").attr("disabled",!0)),manageAccessBackButton.show(),manageUserGroupContainer.show(),manageAccessButton.hide(),refreshUserGroupScroll(),refreshDialogBoxPosition(),generateProfileAvatar()}function hideManageAccessContainer(){manageUserGroupContainer.hide(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),embedCodeDoneBtnObj.hide(),embedCodeBackButton.hide(),embedCodeContainer.hide(),changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues()}function showSharePermissionContainer(){currentItemDetail.ItemType==ItemType.UserManagement?(sharePermisisonDlgHeader.text(window.Server.App.Localization.AddGroupOwnerBtn),$(".show-shared-user-group-label").text("Group Owners :")):sharePermisisonDlgHeader.text(window.Server.App.Localization.SharePermissionDefault),dummyContainer.show(),shareBtnObj.text(window.Server.App.Localization.SharePeopleBtn),enableAutocompleteAccessModeSelectionWithoutReset(),refreshAutoComplete(),sharePermissionConatiner.show(),manageAccessButton.show(),shareDoneBtnObj.show(),manageAccessBackButton.hide(),hideManageAccessContainer(),accessModeContainer.hide(),accessModeChngBtnObj.hide(),accessModeCancelBtnObj.hide(),displaySharedUserGroupInfo(),currentItemDetail.ItemType==ItemType.Dashboard?"undefined"!=typeof BoldBIDashboard&&".sydj"==currentItemDetail.Extension.toLowerCase()||currentItemDetail.IsMultiDashboard||!ej.isNullOrUndefined(currentItemDetail.Extension)&&".sydj"==currentItemDetail.Extension.toLowerCase()||currentItemDetail.IsMultiDashboard?getEmbedLinkSection.show():getEmbedLinkSection.hide():currentItemDetail.ItemType==ItemType.ItemView&&getEmbedLinkSection.show(),embedCodeDoneBtnObj.hide(),embedCodeBackButton.hide(),sharePermissionDlgHeaderItemName.show(),sharePermisisonDlgHeader.css("line-height",""),refreshDialogBoxPosition()}function showSharePermissionContainerWithRefresh(){$('[data-toggle="popover"]').popover("hide"),resetToActualScope(),hideManageAccessContainer(),enableAutocompleteAccessModeSelectionWithoutReset(),autoCompleteHiddenEle.attr("data-itemtype")!=ItemType.UserManagement?sharePermisisonDlgHeader.text(window.Server.App.Localization.SharePermissionDefault):sharePermisisonDlgHeader.text(window.Server.App.Localization.AddGroupOwnerBtn),displaySharedUserGroupInfo(),dummyContainer.show(),shareBtnObj.text(window.Server.App.Localization.SharePeopleBtn),addOwnerBtnObj.text(window.Server.App.Localization.AddGroupOwnerBtn),showPublicPrivateContent(),sharePermissionConatiner.show(),manageAccessButton.show(),""!=autoCompleteInstance.getValue()?((autoCompleteHiddenEle.attr("data-itemtype")!=ItemType.UserManagement?shareBtnObj:addOwnerBtnObj).show(),manageAccessCancelBtnObj.show(),shareDoneBtnObj.hide()):shareDoneBtnObj.show(),manageAccessBackButton.hide(),accessModeContainer.hide(),accessModeChngBtnObj.hide(),accessModeCancelBtnObj.hide(),refreshDialogBoxPosition()}function showDashboardSettingContent(){sharePermissionPublicSectionObj.hide(),sharePermissionPrivateSectionObj.hide(),sharePermissionDashboardSettingSectionObj.show()}function showPublicContent(){sharePermissionPublicSectionObj.show(),sharePermissionPrivateSectionObj.hide(),isItemPublic=!0}function showPrivateContent(){sharePermissionPublicSectionObj.hide(),sharePermissionPrivateSectionObj.show(),isItemPublic=!1}function showPublicOrPrivateContent(){(isItemPublic?showPublicContent:showPrivateContent)()}function showShareUserGroupPermissionSection(){sharePermissionUserGroupSectionObj.show()}function hideShareUserGroupPermissionSection(){sharePermissionUserGroupSectionObj.hide()}function hidePublicPrivateContent(){sharePermissionPublicSectionObj.hide(),sharePermissionPrivateSectionObj.hide(),sharePermissionDashboardSettingSectionObj.hide()}function showPublicPrivateContent(){var e=null!=window.granularPermissions&&window.granularPermissions.Dashboard;(currentItemDetail.ItemType==ItemType.Dashboard||currentItemDetail.ItemType==ItemType.ItemView)&&(currentItemDetail.CreatedById==currentUserId||isAdmin||e)?(isMarkItemsPublicForShareDialog||currentItemDetail.ItemType==ItemType.ItemView?isItemPublic?sharePermissionPublicSectionObj:sharePermissionPrivateSectionObj:sharePermissionDashboardSettingSectionObj).show():hidePublicPrivateContent()}function changeAccessMode(){manageAccessCancelBtn(),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),showAccessModeContainer(),(isItemPublic?publicRadioBtnObj:privateRadioBtnObj).prop("checked",!0),$("#make-unlisted").prop("checked",isItemUnlisted),accessModeChngBtnObj.attr("disabled",!0),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide")}function getEmbedCode(){embedCodeDialog(),embedCodeBackButton.show()}function embedCodeDialog(){resetToActualScope(),$("#embed-code").val(generateEmbedCode(currentItemDetail)),embedCodeContainer.show(),$("#mode-selection").selectpicker("refresh"),$("#sso-providers").selectpicker("refresh"),sharePermisisonDlgHeader.text(window.Server.App.Localization.EmbedCode),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&getEmbedCodeCopyBtnobj.hide(),currentItemDetail.IsPublic?($(".private-embed-code-note").hide(),$(".public-embed-code-note").show()):($(".private-embed-code-note").show(),$(".public-embed-code-note").hide()),embedCodeDoneBtnObj.show(),manageAccessBackButton.hide(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),sharePermissionDlgHeaderItemName.hide(),sharePermisisonDlgHeader.css("line-height","32px"),sharePermissionConatiner.hide(),manageAccessButton.hide(),shareBtnObj.hide(),shareDoneBtnObj.hide(),isEntireDOMRendered=!0,refreshDialogBoxPosition()}function getEmbedCodeFromContext(){embedCodeDialog()}function addAttributeValueToBtnEle(e){accessModeChngBtnObj.attr("data-item-id",e.Id),accessModeChngBtnObj.attr("data-name",e.Name),accessModeChngBtnObj.attr("data-itemtype",e.ItemType),accessModeChngBtnObj.attr("data-category-name",e.CategoryName),shareBtnObj.attr("data-item-id",e.Id),shareBtnObj.attr("data-name",e.Name),shareBtnObj.attr("data-itemtype",e.ItemType)}function addAttributeValueToAutoCompleteEle(e){autoCompleteHiddenEle.attr("data-item-id",e.Id),autoCompleteHiddenEle.attr("data-itemtype",e.ItemType)}function getShareItemPermission(e){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),$.ajax({type:"get",url:getShareItemPermissionUrl,data:{itemId:e},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var t;e.status&&((t=angular.element("#share-permission-content-section").scope()).$apply(function(){angular.copy(e.SharedUserGroupList,sharedUserGroupsPreservedList),t.sharedUserGroups=e.SharedUserGroupList}),t.$apply(function(){angular.copy(e.AccessModeOptionList,sharedAccessModePreservedList),t.accessModes=e.AccessModeOptionList}),t.$apply(function(){t.isMarkItemsPublic=e.isItemPublic}),isMarkItemsPublicForShareDialog=e.isItemPublic,currentItemDetail.ItemType==ItemType.ItemView?$("#user-group-search-input_suggestion").removeClass("item-user-input_suggestion"):$("#user-group-search-input_suggestion").addClass("item-user-input_suggestion"),$(".change-access-mode-selection").selectpicker("refresh"),$(".change-access-mode-selection .selectpicker").removeAttr("title"),accessModeSelectionInput.html(""),accessModeSelectionInput.append(e.AccessModeList),accessModeSelectionInput.selectpicker("refresh"),refreshUserGroupScroll(),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide"),displaySharedUserGroupInfo(),isEntireDOMRendered=!0,$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover())},error:function(){warningToast(window.Server.App.Localization.InternalServerError),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide")}})}function getGroupUserPermission(e){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),$.ajax({type:"get",url:getGroupOwnersUrl,data:{groupId:e},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var t;e.status?((t=angular.element(manageUserGroupBodySection).scope()).$apply(function(){angular.copy(e.SharedUserGroupList,sharedUserGroupsPreservedList),t.sharedUserGroups=e.SharedUserGroupList}),t.$apply(function(){angular.copy(e.AccessModeOptionList,sharedAccessModePreservedList),t.accessModes=e.AccessModeOptionList}),currentItemDetail.ItemType==ItemType.UserManagement?$("#user-group-search-input_suggestion").removeClass("item-user-input_suggestion"):$("#user-group-search-input_suggestion").addClass("item-user-input_suggestion"),$(".change-access-mode-selection").selectpicker("refresh"),$(".change-access-mode-selection .selectpicker").removeAttr("title"),$(".change-access-mode-selection span").removeClass("caret"),$(".change-access-mode-selection button").attr("disabled",!0),accessModeSelectionInput.html(""),accessModeSelectionInput.append(e.AccessModeList),accessModeSelectionInput.selectpicker("refresh"),refreshUserGroupScroll(),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide"),displaySharedUserGroupInfo(),isEntireDOMRendered=!0,$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover()):null!=e.permissionDenied&&e.permissionDenied&&(warningToast(window.Server.App.Localization.UserManagementWarningAlert),"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog("close"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide")):(sharePermissionDlgObj.ejDialog("close"),sharePermissionDlgWrapperObj.ejWaitingPopup("hide")))},error:function(){warningToast(window.Server.App.Localization.InternalServerError),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide")}})}function displaySharedUserGroupInfo(){var o,e,s=angular.element(manageUserGroupBodySection).scope().sharedUserGroups;null!=s&&(0<s.length?(o="",$.each(s,function(e,t){var i="<div class='shared-user-group-name'><span class='shared-user-group-name-label'>";e<3&&(0<t.TargetUserId?i+=t.DisplayName+"</span>":i+=t.TargetGroupName+"</span>",e!=s.length-1?i+="<span class='shared-user-group-name-comma'>,</span> </div>":i+="</div>",o+=i)}),showSharedUserGroupNameSection.html(o),manageUserGroupContainer.is(":visible")||showSharedUserGroupContainer.show()):showSharedUserGroupContainer.hide(),3<s.length?(e=s.length-3,showSharedUserGroupCount.text(e),showSharedUserGroupCountSection.show()):showSharedUserGroupCountSection.hide(),generateProfileAvatar())}function saveItemPermission(){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),splitUserGroupList();var e=userEmailList,t=groupIdList,i=accessModeSelectionInput.val(),o=shareBtnObj.attr("data-item-id"),s=shareBtnObj.attr("data-itemtype");$.ajax({type:"POST",url:sharepermissionUrl,data:{permissionList:JSON.stringify({mode:i,itemType:s,UserList:e,GroupList:t}),itemId:o},success:function(e,t){"true"==e.toString().toLowerCase()?(getShareItemPermission(o),refreshAutoComplete(),refreshAutocompleteAccessModeSelection()):(sharePermissionDlgObj.ejDialog("close"),warningToast(window.Server.App.Localization.ShareItemPermissionMessage+" "+window.Server.App.Localization.ReloadPage))}})}function addGroupOwnerPermission(){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),splitUserGroupList();var e=userEmailList,t=groupIdList,i=accessModeSelectionInput.val(),o=addOwnerBtnObj.attr("data-item-id"),s=addOwnerBtnObj.attr("data-itemtype");$.ajax({type:"POST",url:addGroupOwnerPermissionUrl,data:{permissionList:JSON.stringify({mode:i,itemType:s,UserList:e,GroupList:t}),groupId:o},success:function(e,t){e.status?(getGroupUserPermission(o),refreshAutoComplete(),refreshAutocompleteAccessModeSelection()):null!=e.permissionDenied&&e.permissionDenied&&(warningToast(window.Server.App.Localization.UserManagementWarningAlert),"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog("close"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide")):(sharePermissionDlgObj.ejDialog("close"),sharePermissionDlgWrapperObj.ejWaitingPopup("hide")))},error:function(){warningToast(window.Server.App.Localization.InternalServerError)}})}function updateBulkItemPermission(){var i=shareBtnObj.attr("data-item-id"),o=addOwnerBtnObj.attr("data-item-id");$.ajax({type:"POST",url:updateBulkItemPermissionUrl,data:{permissionList:addNewItemPermission,userMarkedForDeletionList:userMarkedForDeletionList,groupMarkedForDeletionList:groupMarkedForDeletionList,itemId:i,groupId:o},success:function(e,t){"true"==e.toString().toLowerCase()?(null!=i?getShareItemPermission(i):getGroupUserPermission(o),changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareDoneBtnObj.show(),enableAutomCompleteControl(),enableAutocompleteAccessModeSelection()):warningToast(window.Server.App.Localization.InternalServerError)},error:function(){warningToast(window.Server.App.Localization.InternalServerError)}})}function refreshDialogBoxPosition(){"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog({height:"auto"}),isEntireDOMRendered&&(sharePermissionDlgObj.BoldBIDashboardDialog({width:529}),sharePermissionDlgObj.BoldBIDashboardDialog({width:530})),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("refresh"),sharePermissionDlgObj.BoldBIDashboardDialog("refresh")):(sharePermissionDlgObj.ejDialog({height:"auto"}),isEntireDOMRendered&&(sharePermissionDlgObj.ejDialog({width:529}),sharePermissionDlgObj.ejDialog({width:530})),sharePermissionDlgWrapperObj.ejWaitingPopup("refresh"),sharePermissionDlgObj.ejDialog("refresh")),isWidget&&("undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide"),sharePermisisonDlgHeader.text(window.Server.App.Localization.EmbedCode),sharePermisisonDlgHeader.css("line-height","32px"),sharePermissionDlgHeaderItemName.hide(),sharePermissionConatiner.hide(),embedCodeContainer.show(),embedConfiguration.hide(),manageAccessButton.hide())}function prepareRequestForAddItemPermission(){var n,e,r,a;0<modifiedItemIndex.length&&(e=(n=angular.element(manageUserGroupBodySection).scope()).accessModes,r=n.sharedUserGroups,a=shareBtnObj.attr("data-itemtype"),$.each(e,function(e,i){var t=i.Key,o=[],s=[];$.each(modifiedItemIndex,function(e,t){r[t].PermissionAccess!=sharedUserGroupsPreservedList[t].PermissionAccess&&r[t].PermissionAccess==i.Key&&(n.IsUserItem(t)?-1==jQuery.inArray(r[t].Email,o)&&o.push(r[t].Email):n.IsGroupItem(t)&&-1==jQuery.inArray(r[t].TargetGroupId,s)&&s.push(r[t].TargetGroupId))}),(0<o.length||0<s.length)&&addNewItemPermission.push(JSON.stringify({mode:t,itemType:a,UserList:o,GroupList:s}))}),$.each(modifiedItemIndex,function(e,t){r[t].PermissionAccess!=sharedUserGroupsPreservedList[t].PermissionAccess&&(n.IsUserItem(t)?-1==jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,userMarkedForDeletionList)&&userMarkedForDeletionList.push(sharedUserGroupsPreservedList[t].PermissionId):n.IsGroupItem(t)&&-1==jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,groupMarkedForDeletionList)&&groupMarkedForDeletionList.push(sharedUserGroupsPreservedList[t].PermissionId))}))}function resetPreRequestValues(){modifiedItemIndex=[],addNewItemPermission=[],userMarkedForDeletionList=[],groupMarkedForDeletionList=[]}function resetToActualScope(){var e=angular.element(manageUserGroupBodySection).scope();"$apply"!=e.$root.$$phase&&"$digest"!=e.$root.$$phase&&(e.$apply(function(){angular.copy(sharedUserGroupsPreservedList,e.sharedUserGroups)}),e.$apply(function(){angular.copy(sharedAccessModePreservedList,e.accessModes)})),$(".change-access-mode-selection").selectpicker("refresh"),$(".change-access-mode-selection .selectpicker").removeAttr("title"),changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues(),$('[data-toggle="tooltip"]').tooltip(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareBtnObj.hide(),shareDoneBtnObj.show()}function enableAutocompleteAccessModeSelectionWithoutReset(){"undefined"!=typeof BoldBIDashboard?autoCompleteControlEle.BoldBIDashboardAutocomplete("enable"):autoCompleteControlEle.ejAutocomplete("enable"),autoCompleteControlWrapperEle.find(".e-in-wrap.e-box.e-corner").removeClass("disable-autocomplete"),accessModeSelectionInput.prop("disabled",!1),$(".selectpicker[data-id='access-mode-selection']").removeClass("disabled"),$(".selectpicker[data-id='access-mode-selection']").removeClass("disable-autocomplete-access-mode-selection"),accessModeSelectionInput.selectpicker("refresh")}function refreshAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("selectedIndex",0),accessModeSelectionInput.selectpicker("refresh")}function enableAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("disabled",!1),$(".selectpicker[data-id='access-mode-selection']").removeClass("disabled"),$(".selectpicker[data-id='access-mode-selection']").removeClass("disable-autocomplete-access-mode-selection"),refreshAutocompleteAccessModeSelection()}function disableAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("disabled",!0),$(".selectpicker[data-id='access-mode-selection']").addClass("disabled"),$(".selectpicker[data-id='access-mode-selection']").addClass("disable-autocomplete-access-mode-selection"),refreshAutocompleteAccessModeSelection()}function onSuggestionListOpen(){manageUserGroupContainer.addClass("disable-element-opacity")}function onSuggestionListClose(){""==autoCompleteInstance.getValue()&&manageUserGroupContainer.removeClass("disable-element-opacity")}function refreshUserGroupScroll(){var e,t;manageUserGroupBodySection.is(":visible")&&($(".tooltip").tooltip("hide"),e={height:225,width:"100%",scrollerSize:7,buttonSize:0,enableTouchScroll:!(t=""),scrollOneStepBy:20,scroll:function(){$(".tooltip").tooltip("hide"),$('[data-toggle="popover"]').popover("hide")}},(t="undefined"!=typeof BoldBIDashboard?(manageUserGroupBodySection.BoldBIDashboardScroller(e),manageUserGroupBodySection.BoldBIDashboardScroller("instance")):(manageUserGroupBodySection.ejScroller(e),manageUserGroupBodySection.ejScroller("instance"))).model.height=225,t.refresh(),$(".manage-user-group-body-section .e-scrollbar").show())}function generateEmbedCode(e){var t,i="",i=currentItemDetail.ItemType==ItemType.ItemView?getDashboardShareLink(currentDashboardDetail.Id,currentDashboardDetail.CategoryName,currentDashboardDetail.Name)+"?viewid="+currentItemDetail.Id+"&isembed=true":e.ItemType==ItemType.Widget?(isWidget=!0,(t=angular.element("#share-permission-content-section").scope()).$apply(function(){t.isDashboardPublic=e.IsPublic,t.currentItemType=e.ItemType}),sharePermissionDlgObj.show(),"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog("open"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show")):(sharePermissionDlgObj.ejDialog("open"),sharePermissionDlgWrapperObj.ejWaitingPopup("show")),getDashboardShareLink(e.Id,e.CategoryName,e.Name)+"?isembed=true&isWidgetMode=true&WidgetId="+e.widgetId):e.ItemType==ItemType.Datasource?($(".datasource-hide").hide(),getDatasourceShareLink(e.Id,e.Name)+"?isembed=true"):e.ItemType==ItemType.Dashboard?"edit"==selectedMode?($(".mode-change").attr("disabled",!0),getDashboardShareLink(e.Id,e.CategoryName,e.Name,editDashboardEmbedUrl)+"?isembed=true"):($(".mode-change").attr("disabled",!1),getDashboardShareLink(e.Id,e.CategoryName,e.Name)+"?isembed=true"):getDashboardShareLink(e.Id,e.CategoryName,e.Name)+"?isembed=true";return"edit"!=selectedMode&&(i=(i=(i=(i+=$("#embed-dashboard-comments").is(":checked")?"&dashboard_comments=true":"")+($("#embed-widget-comments").is(":checked")?"&widget_comments=true":""))+($("#embed-views").is(":checked")?"&views=true":""))+($("#embed-export").is(":checked")?"&export=true":"")),"<iframe src='"+(i+=$("#embed-sso").is(":checked")?"&hassso=true&externallogin="+$("#sso-providers").val().toLowerCase():"")+"' id='dashboard-frame' width='100%' height='600px' allowfullscreen frameborder='0'></iframe>"}shareItem.controller("shareItemController",["$scope",function(o){o.currentUserId=window.currentUserId,o.downloadPermissionAccess=window.downloadPermissionAccess,o.downloadPermissionAccessId=window.downloadPermissionAccessId,o.sharedUserGroups=window.sharedUserGroupList,o.accessModes=window.accessModeList,o.showPopover=!1,o.currentItemType=ItemType.Dashboard,o.isAdmin=!1,o.isDashboardPublic=!1,o.hasDashboardSettingsPermission=!1,o.isUnlisted=!1,o.isMarkItemsPublic=!1,o.formatAccessModeString=function(e){return e.toString()},o.ImageLink=function(e){return idpUrl+"/User/Avatar?id="+e+"&ImageSize=64"};o.GetGroupColor=function(e,t){return{"background-color":"#dfdfdf"}},o.typeOptions=[{Key:2,Value:"Read"}],o.parseInt=function(e){return parseInt(e,10)},o.updateValue=function(e,t){o.CheckForModification(e,t)},o.MarkForDeletion=function(e,t,i){o.AddItemInUserGroupDeletionList(i),o.RemoveFromModified(i);i=angular.element(e.currentTarget).parents(".shared-user-group-list-section").children();i.find(".action-for-delete-container").hide(),i.find(".marked-for-delete-container").show(),i.find(".change-indicator").show(),o.ShowChangeIndicatorBanner()},o.RemoveMarkForDeletion=function(e,t,i){o.RemoveItemInUserGroupDeletionList(i);e=angular.element(e.currentTarget).parents(".shared-user-group-list-section").children();e.find(".marked-for-delete-container").hide(),e.find(".action-for-delete-container").show(),e.find(".change-indicator").hide(),o.CheckForModification(t,i)},o.CheckForModification=function(e,t){currentItemDetail.ItemType!=ItemType.ItemView&&(sharedUserGroupsPreservedList[t].PermissionAccess!=e?(o.AddToModified(t),$("#select_"+t).parents(".shared-user-group-list-section").children().find(".change-indicator").show()):sharedUserGroupsPreservedList[t].PermissionAccess==e&&(o.RemoveFromModified(t),$("#select_"+t).parents(".shared-user-group-list-section").children().find(".change-indicator").hide())),o.ShowChangeIndicatorBanner()},o.ShowChangeIndicatorBanner=function(){($(".change-indicator").is(":visible")?(changeIndicatorBannerObj.css("visibility","visible"),manageAccessSaveBtnObj.show(),manageAccessCancelBtnObj.show(),shareDoneBtnObj.hide(),disableAutomCompleteControl(),disableAutocompleteAccessModeSelection):(changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareDoneBtnObj.show(),enableAutomCompleteControl(),enableAutocompleteAccessModeSelection))()},o.AddItemInUserGroupDeletionList=function(e){o.IsUserItem(e)?-1==jQuery.inArray(sharedUserGroupsPreservedList[e].PermissionId,userMarkedForDeletionList)&&userMarkedForDeletionList.push(sharedUserGroupsPreservedList[e].PermissionId):o.IsGroupItem(e)&&-1==jQuery.inArray(sharedUserGroupsPreservedList[e].PermissionId,groupMarkedForDeletionList)&&groupMarkedForDeletionList.push(sharedUserGroupsPreservedList[e].PermissionId)},o.RemoveItemInUserGroupDeletionList=function(t){o.IsUserItem(t)?-1!=jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,userMarkedForDeletionList)&&(userMarkedForDeletionList=jQuery.grep(userMarkedForDeletionList,function(e){return e!=sharedUserGroupsPreservedList[t].PermissionId})):o.IsGroupItem(t)&&-1!=jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,groupMarkedForDeletionList)&&(groupMarkedForDeletionList=jQuery.grep(groupMarkedForDeletionList,function(e){return e!=sharedUserGroupsPreservedList[t].PermissionId}))},o.AddToModified=function(e){-1==jQuery.inArray(e,modifiedItemIndex)&&modifiedItemIndex.push(e)},o.RemoveFromModified=function(t){modifiedItemIndex=jQuery.grep(modifiedItemIndex,function(e){return e!=t})},o.IsUserItem=function(e){return null!=sharedUserGroupsPreservedList[e].Email&&sharedUserGroupsPreservedList[e].IsUserPermission&&0<sharedUserGroupsPreservedList[e].TargetUserId},o.IsGroupItem=function(e){return null==sharedUserGroupsPreservedList[e].Email&&!sharedUserGroupsPreservedList[e].IsUserPermission&&0<sharedUserGroupsPreservedList[e].TargetGroupId},o.getDashboardEmbedCode=getDashboardEmbedCode,o.GetManagePermisisionContent=function(e){var t=null!=window.granularPermissions&&window.granularPermissions.Dashboard,i=sharedUserGroupsPreservedList[e].PermissionEntityDescription;return o.IsUserItem(e)?isAdmin||t?(t=editUserPermissionUrl+"?userId="+sharedUserGroupsPreservedList[e].TargetUserId,window.Server.App.Localization.UserPermissionWithAdmin.format("<strong>"+i+"</strong>","</br></br>","<a target='_blank' href='"+t+"'>","</a>")):window.Server.App.Localization.UserPermissionNonAdmin.format("<strong>"+i+"</strong>","</br></br>"):isAdmin?(t=editGroupPermissionUrl+"?groupId="+sharedUserGroupsPreservedList[e].TargetGroupId,window.Server.App.Localization.GroupPermissionWithAdmin.format("<strong>"+i+"</strong>","</br></br>","<a target='_blank' href='"+t+"'>","</a>")):window.Server.App.Localization.GroupPermissionNonAdmin.format("<strong>"+i+"</strong>","</br></br>")}}]),$(function(){sharePermissionDlgObj=$("#share-permission-popup"),sharePermisisonDlgHeader=$("#share-permission-dialog-header"),sharePermissionDlgHeaderItemName=$(".item-name-container #item-name-header"),sharePermissionConatiner=$("#share-permission-container"),accessModeContainer=$("#access-mode-container"),dummyContainer=$("#dummy-container"),embedCodeContainer=$("#get-embed-code-container"),sharePermissionDashboardSettingSectionObj=$(".share-permission-dashboard-setting-section"),sharePermissionPublicSectionObj=$(".share-permission-public-section"),sharePermissionPrivateSectionObj=$(".share-permission-private-section"),sharePermissionUserGroupSectionObj=$("#assign-user-group-container"),manageUserGroupContainer=$("#manage-user-group-container"),manageUserGroupBodySection=$(".manage-user-group-body-section"),getEmbedLinkSection=$(".get-item-embed-link-section"),embedConfiguration=$(".embed-configuration"),changeIndicatorBannerObj=$(".changes-indicator-banner"),shareWithLabelObj=$(".share-with-label"),getLinkInputObj=$("#item-url"),getLinkCopyLinkobj=$("#item-url-copy"),getEmbedCodeInputObj=$("#embed-code"),getEmbedCodeCopyBtnobj=$("#copy-embed-code"),accessModeChangeLink=$("#access-mode-change-link"),manageAccessButton=$("#manage-access-button"),manageAccessBackButton=$("#manage-access-back-button"),manageAccessSaveBtnObj=$("#manage-access-save-button"),manageAccessCancelBtnObj=$("#manage-access-cancel-button"),shareDoneBtnObj=$("#share-done-popup-button"),shareBtnObj=$("#share-permission-button"),accessModeChngBtnObj=$("#access-mode-change-button"),accessModeCancelBtnObj=$("#access-mode-cancel-button"),embedCodeDoneBtnObj=$("#copy-embed-code-done-button"),embedCodeBackButton=$("#copy-embed-code-back-button"),addOwnerBtnObj=$("#add-owner-permission-button"),publicRadioBtnObj=$("#public-access-mode"),privateRadioBtnObj=$("#private-access-mode"),accessModeSelectionInput=$("#access-mode-selection"),markForDeleteBtnObj=$(".mark-for-deletion-icon"),removeMarkForDeleteBtnObj=$(".remove-mark-for-deletion-icon"),showSharedUserGroupContainer=$("#show-shared-user-group-container"),showSharedUserGroupNameSection=$(".shared-user-group-name-section"),showSharedUserGroupName=$(".shared-user-group-name"),showSharedUserGroupCountSection=$(".shared-user-group-count-section"),showSharedUserGroupCount=$(".shared-user-group-count"),toggleMarkForDeletionObj=$(".action-for-delete-container, .marked-for-delete-container");createLoader("permission-popup_wrapper");sharePermissionDlgWrapperObj=$("#share-permission-popup_wrapper");var e=createLoader("share-permission-popup_wrapper"),t={width:"529px",showOnInit:!1,allowDraggable:!1,enableResize:!1,showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"onSharePermissionPopupClose",open:"onSharePermissionPopupOpen",cssClass:"server-dialog"};"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog(t),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup({template:$("#"+e)}),$("#share-close-popup, #share-done-popup-button").on("click",function(){isAccessModeChanges=!1,sharePermissionDlgObj.BoldBIDashboardDialog("close"),isWidget&&(sharePermissionConatiner.show(),embedCodeContainer.hide(),embedConfiguration.show(),manageAccessButton.hide(),isWidget=!1)})):(sharePermissionDlgObj.ejDialog(t),sharePermissionDlgWrapperObj.ejWaitingPopup({template:$("#"+e)}),$("#share-close-popup, #share-done-popup-button").on("click",function(){isAccessModeChanges=!1,sharePermissionDlgObj.ejDialog("close"),isWidget&&(sharePermissionConatiner.show(),embedCodeContainer.hide(),embedConfiguration.show(),manageAccessButton.hide(),isWidget=!1)})),accessModeCancelBtnObj.on("click",function(){isAccessModeChanges=!1,showSharePermissionContainer()}),manageAccessButton.on("click",function(){showManageAccessContainer()}),manageAccessBackButton.on("click",function(){showSharePermissionContainerWithRefresh()}),manageAccessSaveBtnObj.on("click",function(){$('[data-toggle="popover"]').popover("hide"),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),prepareRequestForAddItemPermission(),updateBulkItemPermission()}),manageAccessCancelBtnObj.on("click",function(){manageAccessCancelBtn(),generateProfileAvatar()}),getLinkCopyLinkobj.on("click",function(e){getLinkInputObj.select(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?getLinkCopyLinkobj.attr("data-original-title",""):(document.execCommand("copy"),getLinkCopyLinkobj.attr("data-original-title",window.Server.App.Localization.Copysuccess),getLinkCopyLinkobj.tooltip("hide").attr("data-original-title",window.Server.App.Localization.Copysuccess).tooltip("fixTitle").tooltip("show"),setTimeout(function(){getLinkCopyLinkobj.attr("data-original-title",window.Server.App.Localization.LinkCopy),getLinkCopyLinkobj.tooltip()},3e3))}),getLinkCopyLinkobj.removeClass("focusdiv"),getLinkInputObj.on("focusin",function(){getLinkCopyLinkobj.addClass("focusdiv")}),getLinkInputObj.on("focusout",function(){getLinkCopyLinkobj.removeClass("focusdiv")}),$("input[type=radio][name=access-mode]").on("change",function(){isItemPublic&&privateRadioBtnObj.prop("checked")||!isItemPublic&&publicRadioBtnObj.prop("checked")?(accessModeChngBtnObj.removeAttr("disabled"),$("#make-unlisted").prop("checked",!1),isAccessModeChanges=!0):(accessModeChngBtnObj.attr("disabled",!0),$("#make-unlisted").prop("checked",isItemUnlisted))}),$(document).on("click","#make-unlisted",function(){isItemUnlisted&&!$("#make-unlisted").prop("checked")||!isItemUnlisted&&$("#make-unlisted").prop("checked")?accessModeChngBtnObj.prop("disabled")&&accessModeChngBtnObj.removeAttr("disabled"):!isAccessModeChanges&&(!isItemUnlisted&&!$("#make-unlisted").prop("checked")||isItemUnlisted&&$("#make-unlisted").prop("checked"))&&accessModeChngBtnObj.attr("disabled",!0)}),$(document).on("click","#access-mode-change-button",function(e){isAccessModeChanges=!1;var t=$(this).attr("data-item-id"),i=$(this).attr("data-name"),o=$(this).attr("data-itemtype"),s=($(this).attr("data-category-name"),"");isItemPublic&&privateRadioBtnObj.prop("checked")?s=removeItemPublicUrl:!isItemPublic&&publicRadioBtnObj.prop("checked")&&(s=makeItemPublicUrl),$("#progress-alert-container").css("z-index",$("#share-permission-popup_wrapper").css("z-index")+1),""!=s&&$.ajax({type:"POST",url:s,data:{itemId:t,itemTypeId:o,itemName:i},async:!1,success:function(e){e.validation&&e.result?void 0!==currentItemDetail&&void 0!==currentItemDetail.IsPublic&&(currentItemDetail.IsPublic=!currentItemDetail.IsPublic):warningToast(window.Server.App.Localization.InternalServerError)}}),isItemUnlisted=$("#make-unlisted").prop("checked"),$.ajax({type:"POST",url:makeItemUnlistedUrl,data:{itemId:t,isUnlisted:isItemUnlisted},async:!1,success:function(e){e.validation&&e.result?void 0!==currentItemDetail&&void 0!==currentItemDetail.IsUnlisted&&(currentItemDetail.IsUnlisted=isItemUnlisted):warningToast(window.Server.App.Localization.InternalServerError)},error:function(){warningToast(window.Server.App.Localization.InternalServerError)}}),"function"==typeof ResetItemList&&ResetItemList(ItemType.Dashboard),showSharePermissionContainer(),isItemPublic&&privateRadioBtnObj.prop("checked")?(showPrivateContent(),isItemPublic=!1):!isItemPublic&&publicRadioBtnObj.prop("checked")&&(showPublicContent(),isItemPublic=!0)}),$(document).on("shown.bs.dropdown",".user-group-scroll-content .change-access-mode-select",function(){var e,t;$(".tooltip").hide(),0<$(this).find(".change-access-mode-selection").length&&(t=manageUserGroupBodySection,e=$(this).offset().top+$(this).outerHeight(!0)/2-t.offset().top,t.height()-($(this).offset().top-t.offset().top+$(this).outerHeight(!0)/2)<=(t=$(this).find(".change-access-mode-selection .dropdown-menu").outerHeight(!0))&&t<=e?$(this).find(".change-access-mode-selection").removeClass("dropdown").addClass("dropup"):refreshUserGroupScroll())}),$.views.helpers({getUserGroupLogo:function(e){return"user"==e?"<img src='' alt='Profile Picture' id='' onerror='' >":"<div class='group-logo' style=''> <i class='su su-group-1'></i></div >"}}),$("body").on("click",function(e){"popover"!==$(e.target).data("toggle")&&0===$(e.target).parents('[data-toggle="popover"]').length&&0===$(e.target).parents(".popover.in").length?$('[data-toggle="popover"]').popover("hide"):"popover"==$(e.target).data("toggle")&&$(".access-info-icon").not(e.target).popover("hide")}),getEmbedCodeInputObj.on("click",function(e){getEmbedCodeInputObj.select()}),getEmbedCodeCopyBtnobj.on("click",function(e){getEmbedCodeInputObj.select(),document.execCommand("copy");var t=$(".embed-copy-success");t.show(),setTimeout(function(){t.fadeOut(3e3)},3e3)}),embedCodeDoneBtnObj.on("click",function(){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog("close"):sharePermissionDlgObj.ejDialog("close")}),embedCodeBackButton.on("click",function(){showSharePermissionContainer()}),$(".embed-configuration [type='checkbox']").on("change",function(e){$("#embed-code").val(generateEmbedCode(currentItemDetail)),$("#embed-sso").is(":checked")?$(".auth-provider-row").removeClass("hide"):$(".auth-provider-row").addClass("hide"),refreshDialogBoxPosition()}),$(document).on("change",".sso-providers",function(e){$("#embed-code").val(generateEmbedCode(currentItemDetail))}),$(document).on("change",".mode-selection",function(e){selectedMode=$("#mode-selection").val().toLowerCase(),$("#embed-code").val(generateEmbedCode(currentItemDetail))})}),$(document).on("click","#show-shared-user-group-link",function(e){showManageAccessContainer()});