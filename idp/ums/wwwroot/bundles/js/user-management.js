(e=>{"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?exports=e(require("jquery")):e(jQuery)})(function(t){function n(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}void 0!==t.easing&&(t.easing.jswing=t.easing.swing);var i=Math.pow,s=Math.sqrt,r=Math.sin,a=Math.cos,o=Math.PI,l=1.70158,d=1.525*l,c=2*o/3,u=2*o/4.5;t.extend(t.easing,{def:"easeOutQuad",swing:function(e){return t.easing[t.easing.def](e)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-i(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-i(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-i(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-i(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-i(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-i(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-i(-2*e+2,5)/2},easeInSine:function(e){return 1-a(e*o/2)},easeOutSine:function(e){return r(e*o/2)},easeInOutSine:function(e){return-(a(o*e)-1)/2},easeInExpo:function(e){return 0===e?0:i(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-i(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?i(2,20*e-10)/2:(2-i(2,-20*e+10))/2},easeInCirc:function(e){return 1-s(1-i(e,2))},easeOutCirc:function(e){return s(1-i(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-s(1-i(2*e,2)))/2:(s(1-i(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-i(2,10*e-10)*r((10*e-10.75)*c)},easeOutElastic:function(e){return 0===e?0:1===e?1:i(2,-10*e)*r((10*e-.75)*c)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-(i(2,20*e-10)*r((20*e-11.125)*u))/2:i(2,-20*e+10)*r((20*e-11.125)*u)/2+1},easeInBack:function(e){return(1+l)*e*e*e-l*e*e},easeOutBack:function(e){return 1+(1+l)*i(e-1,3)+l*i(e-1,2)},easeInOutBack:function(e){return e<.5?i(2*e,2)*(7.189819*e-d)/2:(i(2*e-2,2)*((1+d)*(2*e-2)+d)+2)/2},easeInBounce:function(e){return 1-n(1-e)},easeOutBounce:n,easeInOutBounce:function(e){return e<.5?(1-n(1-2*e))/2:(1+n(2*e-1))/2}})}),(e=>{var l,d,c,t,o,a,u,h,p,m,U,I,g,f,A,_,S,i,M,E,j,v,w,L,D,T,z,R,b,y,C,s=function(e){return new s.prototype.init(e)};"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=s:e.Globalize=s,s.cultures={},(s.prototype={constructor:s,init:function(e){return this.cultures=s.cultures,this.cultureSelector=e,this}}).init.prototype=s.prototype,s.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},s.cultures.default.calendar=s.cultures.default.calendars.standard,s.cultures.en=s.cultures.default,s.cultureSelector="en",l=/^0x[a-f0-9]+$/i,d=/^[+\-]?infinity$/i,c=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,t=/^\s+|\s+$/g,o=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},a=function(e,t){return e.substr(e.length-t.length)===t},u=function(){var e,t,n,i,s,r=arguments[0]||{},a=1,o=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[1]||{},a=2),"object"==typeof r||p(r)||(r={});a<o;a++)if(null!=(e=arguments[a]))for(t in e)s=r[t],n=e[t],r!==n&&(l&&n&&(m(n)||(i=h(n)))?(s=i?(i=!1,s&&h(s)?s:[]):s&&m(s)?s:{},r[t]=u(l,s,n)):void 0!==n&&(r[t]=n));return r},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=function(e){return"[object Function]"===Object.prototype.toString.call(e)},m=function(e){return"[object Object]"===Object.prototype.toString.call(e)},U=function(e,t){return 0===e.indexOf(t)},I=function(e){return(e+"").replace(t,"")},g=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},f=function(e,t,n){for(var i=e.length;i<t;i+=1)e=n?"0"+e:e+"0";return e},A=function(e,t){for(var n,i=0,s=!1,r=0,a=e.length;r<a;r++)switch(n=e.charAt(r)){case"'":s?t.push("'"):i++,s=!1;break;case"\\":s&&t.push("\\"),s=!s;break;default:t.push(n),s=!1}return i},_=function(e,t){var e=e.patterns,n=(t=t||"F").length;if(1===n){if(!(e=e[t]))throw"Invalid date format string '"+t+"'.";t=e}else 2===n&&"%"===t.charAt(0)&&(t=t.charAt(1));return t},S=function(e,t,n){function i(e,t){var n,e=e+"";return 1<t&&e.length<t?(n=b[t-2]+e).substr(n.length-t,t):e}function s(e,t){if(v)return v[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}var r,a,o,l,d,c,u,p=n.calendar,h=p.convert;if(!t||!t.length||"i"===t)return w=n&&n.name.length?h?S(e,p.patterns.F,n):(n=new Date(e.getTime()),r=E(e,p.eras),n.setFullYear(j(e,p,r)),n.toLocaleString()):e.toString();a=p.eras,o="s"===t,t=_(p,t);var m,g,f,v,w=[],b=["0","00","000"],y=/([^d]|^)(d|dd)([^d]|$)/g,C=0,$=M();for(!o&&h&&(v=h.fromGregorian(e));;){var x=$.lastIndex,k=$.exec(t),x=t.slice(x,k?k.index:t.length);if(C+=A(x,w),!k)break;if(C%2)w.push(k[0]);else switch(d=(l=k[0]).length,l){case"ddd":case"dddd":c=3===d?p.days.namesAbbr:p.days.names,w.push(c[e.getDay()]);break;case"d":case"dd":g=!0,w.push(i(s(e,2),d));break;case"MMM":case"MMMM":u=s(e,1),w.push((p.monthsGenitive&&(g||f||(g=y.test(t),f=!0),g)?p.monthsGenitive:p.months)[3===d?"namesAbbr":"names"][u]);break;case"M":case"MM":w.push(i(s(e,1)+1,d));break;case"y":case"yy":case"yyyy":u=v?v[0]:j(e,p,E(e,a),o),d<4&&(u%=100),w.push(i(u,d));break;case"h":case"hh":0===(m=e.getHours()%12)&&(m=12),w.push(i(m,d));break;case"H":case"HH":w.push(i(e.getHours(),d));break;case"m":case"mm":w.push(i(e.getMinutes(),d));break;case"s":case"ss":w.push(i(e.getSeconds(),d));break;case"t":case"tt":u=e.getHours()<12?p.AM?p.AM[0]:" ":p.PM?p.PM[0]:" ",w.push(1===d?u.charAt(0):u);break;case"f":case"ff":case"fff":w.push(i(e.getMilliseconds(),3).substr(0,d));break;case"z":case"zz":m=e.getTimezoneOffset()/60,w.push((m<=0?"+":"-")+i(Math.floor(Math.abs(m)),d));break;case"zzz":m=e.getTimezoneOffset()/60,w.push((m<=0?"+":"-")+i(Math.floor(Math.abs(m)),2)+":"+i(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":p.eras&&w.push(p.eras[E(e,a)].name);break;case"/":w.push(p["/"]);break;default:throw"Invalid date format pattern '"+l+"'."}}return w.join("")},C=function(e,t,n){var i=n.groupSizes,s=i[0],r=1,a=Math.pow(10,t),a=Math.round(e*a)/a,o=(e=a=isFinite(a)?a:e)+"",l="",a=o.split(/e/i),e=1<a.length?parseInt(a[1],10):0;o=(a=(o=a[0]).split("."))[0],l=1<a.length?a[1]:"",0<e?(o+=(l=f(l,e,!1)).slice(0,e),l=l.substr(e)):e<0&&(l=(o=f(o,1+(e=-e),!0)).slice(-e,o.length)+l,o=o.slice(0,-e));for(var l=0<t?n["."]+(l.length>t?l.slice(0,t):f(l,t)):"",d=o.length-1,c=n[","],u="";0<=d;){if(0===s||d<s)return o.slice(0,d+1)+(u.length?c+u+l:l);u=o.slice(d-s+1,d+1)+(u.length?c+u:""),d-=s,r<i.length&&(s=i[r],r++)}return o.slice(0,d+1)+c+u+l},i=function(e,t,n){var i,s,r,a,o,l;if(!isFinite(e))return e===1/0?n.numberFormat.positiveInfinity:e===-1/0?n.numberFormat.negativeInfinity:n.numberFormat.NaN;if(!t||"i"===t)return n.name.length?e.toLocaleString():e.toString();t=t||"D";var d,c=n.numberFormat,u=Math.abs(e),p=-1;switch(1<t.length&&(p=parseInt(t.slice(1),10)),i=t.charAt(0).toUpperCase()){case"D":d="n",u=g(u),-1!==p&&(u=f(""+u,p,!0)),e<0&&(u="-"+u);break;case"N":s=c;case"C":s=s||c.currency;case"P":s=s||c.percent,d=e<0?s.pattern[0]:s.pattern[1]||"n",-1===p&&(p=s.decimals),u=C(u*("P"===i?100:1),p,s);break;default:throw"Bad number format specifier: "+i}for(r=/n|\$|-|%/g,a="";o=r.lastIndex,l=r.exec(d),a+=d.slice(o,l?l.index:d.length),l;)switch(l[0]){case"n":a+=u;break;case"$":a+=c.currency.symbol;break;case"-":/[1-9]/.test(u)&&(a+=c["-"]);break;case"%":a+=c.percent.symbol}return a},M=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},E=function(e,t){var n,i,s,r;if(t)for(i=e.getTime(),s=0,r=t.length;s<r;s++)if(null===(n=t[s].start)||n<=i)return s;return 0},j=function(e,t,n,i){e=e.getFullYear();return!i&&t.eras&&(e-=t.eras[n].offset),e},L=function(e,t){var n,i;return t<100&&(n=new Date,i=E(n),n=j(n,e,i),(i="string"==typeof(i=e.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(i,10):i)<(t+=n-n%100))&&(t-=100),t},D=function(e,t,n){var i,s=e.days,r=e._upperDays;return r||(e._upperDays=r=[y(s.names),y(s.namesAbbr),y(s.namesShort)]),t=b(t),n?-1===(i=o(r[1],t))&&(i=o(r[2],t)):i=o(r[0],t),i},T=function(e,t,n){var i=e.months,s=e.monthsGenitive||e.months,r=e._upperMonths,a=e._upperMonthsGen;return r||(e._upperMonths=r=[y(i.names),y(i.namesAbbr)],e._upperMonthsGen=a=[y(s.names),y(s.namesAbbr)]),t=b(t),i=(i=o(n?r[1]:r[0],t))<0?o(n?a[1]:a[0],t):i},z=function(e,t){var n,i,s,r,a,o=e._parseRegExp;if(o){if(a=o[t])return a}else e._parseRegExp=o={};for(var l,d=_(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],u=[],p=0,h=0,m=M();null!==(l=m.exec(d));)if(n=d.slice(p,l.index),p=m.lastIndex,(h+=A(n,c))%2)c.push(l[0]);else{switch(s=(i=l[0]).length,i){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":r="(\\D+)";break;case"tt":case"t":r="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":r="(\\d{"+s+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":r="(\\d\\d?)";break;case"zzz":r="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":r="([+-]?\\d\\d?)";break;case"/":r="(\\/)";break;default:throw"Invalid date format pattern '"+i+"'."}r&&c.push(r),u.push(l[0])}return A(d.slice(p),c),c.push("$"),a=c.join("").replace(/\s+/g,"\\s+"),o[t]={regExp:a,groups:u}},R=function(e,t,n){return e<t||n<e},b=function(e){return e.split(" ").join(" ").toUpperCase()},y=function(e){for(var t=[],n=0,i=e.length;n<i;n++)t[n]=b(e[n]);return t},v=function(e,t,n){e=I(e);var i,s,r,a,o,l,d=n.calendar,n=z(d,t),c=new RegExp(n.regExp).exec(e);if(null===c)return null;for(var u,p=n.groups,h=null,m=null,g=null,f=null,v=null,w=0,b=0,y=0,C=0,$=null,x=!1,k=0,A=p.length;k<A;k++)if(i=c[k+1]){var _=p[k],S=_.length,M=parseInt(i,10);switch(_){case"dd":case"d":if(R(f=M,1,31))return null;break;case"MMM":case"MMMM":if(g=T(d,i,3===S),R(g,0,11))return null;break;case"M":case"MM":if(R(g=M-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(m=S<4?L(d,M):M,R(m,0,9999))return null;break;case"h":case"hh":if(R(w=12===(w=M)?0:w,0,11))return null;break;case"H":case"HH":if(R(w=M,0,23))return null;break;case"m":case"mm":if(R(b=M,0,59))return null;break;case"s":case"ss":if(R(y=M,0,59))return null;break;case"tt":case"t":if((x=d.PM&&(i===d.PM[0]||i===d.PM[1]||i===d.PM[2]))||d.AM&&(i===d.AM[0]||i===d.AM[1]||i===d.AM[2]))break;return null;case"f":case"ff":case"fff":if(C=M*Math.pow(10,3-S),R(C,0,999))return null;break;case"ddd":case"dddd":if(v=D(d,i,3===S),R(v,0,6))return null;break;case"zzz":if(2!==(s=i.split(/:/)).length||(u=parseInt(s[0],10),R(u,-12,13))||(r=parseInt(s[1],10),R(r,0,59)))return null;$=60*u+(U(i,"-")?-r:r);break;case"z":case"zz":if(R(u=M,-12,13))return null;$=60*u;break;case"g":case"gg":if(!(a=i)||!d.eras)return null;for(a=I(a.toLowerCase()),o=0,l=d.eras.length;o<l;o++)if(a===d.eras[o].name.toLowerCase()){h=o;break}if(null===h)return null}}if(t=new Date,n=(e=d.convert)?e.fromGregorian(t)[0]:t.getFullYear(),null===m?m=n:d.eras&&(m+=d.eras[h||0].offset),null===g&&(g=0),null===f&&(f=1),e){if(null===(t=e.toGregorian(m,g,f)))return null}else if(t.setFullYear(m,g,f),t.getDate()!==f||null!==v&&t.getDay()!==v)return null;return x&&w<12&&(w+=12),t.setHours(w,b,y,C),null!==$&&(n=t.getMinutes()-($+t.getTimezoneOffset()),t.setHours(t.getHours()+parseInt(n/60,10),n%60)),t},w=function(e,t,n){var i,s=t["-"],r=t["+"];switch(n){case"n -":s=" "+s,r=" "+r;case"n-":a(e,s)?i=["-",e.substr(0,e.length-s.length)]:a(e,r)&&(i=["+",e.substr(0,e.length-r.length)]);break;case"- n":s+=" ",r+=" ";case"-n":U(e,s)?i=["-",e.substr(s.length)]:U(e,r)&&(i=["+",e.substr(r.length)]);break;case"(n)":U(e,"(")&&a(e,")")&&(i=["-",e.substr(1,e.length-2)])}return i||["",e]},s.prototype.findClosestCulture=function(e){return s.findClosestCulture.call(this,e)},s.prototype.format=function(e,t,n){return s.format.call(this,e,t,n)},s.prototype.localize=function(e,t){return s.localize.call(this,e,t)},s.prototype.parseInt=function(e,t,n){return s.parseInt.call(this,e,t,n)},s.prototype.parseFloat=function(e,t,n){return s.parseFloat.call(this,e,t,n)},s.prototype.culture=function(e){return s.culture.call(this,e)},s.addCultureInfo=function(e,t,n){var i={},s=!1,i="string"!=typeof e?(n=e,e=this.culture().name,this.cultures[e]):"string"!=typeof t?(n=t,s=null==this.cultures[e],this.cultures[e]||this.cultures.default):(s=!0,this.cultures[t]);this.cultures[e]=u(!0,{},i,n),s&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},s.findClosestCulture=function(e){var t,n,i,s,r,a;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures.default;if("string"==typeof e&&(e=e.split(",")),h(e)){for(var o,l=this.cultures,d=e,c=d.length,u=[],p=0;p<c;p++)i=(e=I(d[p])).split(";"),o=I(i[0]),n=1!==i.length&&0===(e=I(i[1])).indexOf("q=")?(e=e.substr(2),n=parseFloat(e),isNaN(n)?0:n):1,u.push({lang:o,pri:n});for(u.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0}),p=0;p<c;p++)if(t=l[o=u[p].lang])return t;for(p=0;p<c;p++)for(o=u[p].lang;;){if(-1===(s=o.lastIndexOf("-")))break;if(t=l[o=o.substr(0,s)])return t}for(p=0;p<c;p++)for(r in o=u[p].lang,l)if(a=l[r],a.language==o)return a}else if("object"==typeof e)return e;return t||null},s.format=function(e,t,n){n=this.findClosestCulture(n);return e instanceof Date?e=S(e,t,n):"number"==typeof e&&(e=i(e,t,n)),e},s.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures.default.messages[e]},s.parseDate=function(e,t,n){var i,s,r,a,o,l;if(n=this.findClosestCulture(n),t){if((t="string"==typeof t?[t]:t).length)for(a=0,o=t.length;a<o&&(!(l=t[a])||!(i=v(e,l,n)));a++);}else for(s in r=n.calendar.patterns)if(i=v(e,r[s],n),i)break;return i||null},s.parseInt=function(e,t,n){return g(s.parseFloat(e,t,n))},s.parseFloat=function(e,t,n){"number"!=typeof t&&(n=t,t=10);var i,s,r,n=this.findClosestCulture(n),a=NaN,o=n.numberFormat;return-1<e.indexOf(n.numberFormat.currency.symbol)&&(e=(e=e.replace(n.numberFormat.currency.symbol,"")).replace(n.numberFormat.currency["."],n.numberFormat["."])),e=I(e),d.test(e)?a=parseFloat(e):!t&&l.test(e)?a=parseInt(e,16):(t=(n=w(e,o,o.pattern[0]))[0],r=n[1],""===t&&"(n)"!==o.pattern[0]&&(t=(n=w(e,o,"(n)"))[0],r=n[1]),""===t&&"-n"!==o.pattern[0]&&(t=(n=w(e,o,"-n"))[0],r=n[1]),t=t||"+",n=(e=(e=r.indexOf("e"))<0?r.indexOf("E"):e)<0?(s=r,null):(s=r.substr(0,e),r.substr(e+1)),r=o["."],s=(e=s.indexOf(r))<0?(i=s,null):(i=s.substr(0,e),s.substr(e+r.length)),e=o[","],i=i.split(e).join(""),r=e.replace(/\u00A0/g," "),t=t+(i=e!==r?i.split(r).join(""):i),null!==s&&(t+="."+s),null!==n&&(t+="e"+((e=w(n,o,"-n"))[0]||"+")+e[1]),c.test(t)&&(a=parseFloat(t))),a},s.culture=function(e){return void 0!==e&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures.default}})(this),(e=>{"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)})(function(c){c.extend(c.fn,{validate:function(e){var i;if(this.length)return(i=c.data(this[0],"validator"))||(this.attr("novalidate","novalidate"),i=new c.validator(e,this[0]),c.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(e){i.submitButton=e.currentTarget,c(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==c(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(n){function e(){var e,t;return i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(e=c("<input type='hidden'/>").attr("name",i.submitButton.name).val(c(i.submitButton).val()).appendTo(i.currentForm)),!(i.settings.submitHandler&&!i.settings.debug)||(t=i.settings.submitHandler.call(i,i.currentForm,n),e&&e.remove(),void 0!==t&&t)}return i.settings.debug&&n.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,e()):i.form()?i.pendingRequest?!(i.formSubmitted=!0):e():(i.focusInvalid(),!1)})),i);e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,t,n;return c(this[0]).is("form")?e=this.validate().form():(n=[],e=!0,t=c(this[0].form).validate(),this.each(function(){(e=t.element(this)&&e)||(n=n.concat(t.errorList))}),t.errorList=n),e},rules:function(e,t){var n,i,s,r,a,o=this[0],l=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=o&&(!o.form&&l&&(o.form=this.closest("form")[0],o.name=this.attr("name")),null!=o.form)){if(e)switch(n=c.data(o.form,"validator").settings,i=n.rules,s=c.validator.staticRules(o),e){case"add":c.extend(s,c.validator.normalizeRule(t)),delete s.messages,i[o.name]=s,t.messages&&(n.messages[o.name]=c.extend(n.messages[o.name],t.messages));break;case"remove":return t?(a={},c.each(t.split(/\s/),function(e,t){a[t]=s[t],delete s[t]}),a):(delete i[o.name],s)}return(l=c.validator.normalizeRules(c.extend({},c.validator.classRules(o),c.validator.attributeRules(o),c.validator.dataRules(o),c.validator.staticRules(o)),o)).required&&(r=l.required,delete l.required,l=c.extend({required:r},l)),l.remote&&(r=l.remote,delete l.remote,l=c.extend(l,{remote:r})),l}}});function t(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var n;c.extend(c.expr.pseudos||c.expr[":"],{blank:function(e){return!t(""+c(e).val())},filled:function(e){e=c(e).val();return null!==e&&!!t(""+e)},unchecked:function(e){return!c(e).prop("checked")}}),c.validator=function(e,t){this.settings=c.extend(!0,{},c.validator.defaults,e),this.currentForm=t,this.init()},c.validator.format=function(n,e){return 1===arguments.length?function(){var e=c.makeArray(arguments);return e.unshift(n),c.validator.format.apply(this,e)}:(void 0===e||((e=2<arguments.length&&e.constructor!==Array?c.makeArray(arguments).slice(1):e).constructor!==Array&&(e=[e]),c.each(e,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})})),n)},c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==c.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):c(e)).addClass(t).removeClass(n)},unhighlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):c(e)).removeClass(t).addClass(n)}},setDefaults:function(e){c.extend(c.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:c.validator.format("Please enter no more than {0} characters."),minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}."),step:c.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var t,n,i=void 0!==c(this).attr("contenteditable")&&"false"!==c(this).attr("contenteditable");!this.form&&i&&(this.form=c(this).closest("form")[0],this.name=c(this).attr("name")),s===this.form&&(i=c.data(this.form,"validator"),t="on"+e.type.replace(/^validate/,""),(n=i.settings)[t])&&!c(this).is(n.ignore)&&n[t].call(i,this,e)}this.labelContainer=c(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm),this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,s=this.currentForm,i=this.groups={};c.each(this.settings.groups,function(n,e){"string"==typeof e&&(e=e.split(/\s/)),c.each(e,function(e,t){i[t]=n})}),n=this.settings.rules,c.each(n,function(e,t){n[e]=c.validator.normalizeRule(t)}),c(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&c(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),c.extend(this.submitted,this.errorMap),this.invalid=c.extend({},this.errorMap),this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t,n,i=this.clean(e),s=this.validationTargetFor(i),r=this,a=!0;return void 0===s?delete this.invalid[i.name]:(this.prepareElement(s),this.currentElements=c(s),(n=this.groups[s.name])&&c.each(this.groups,function(e,t){t===n&&e!==s.name&&(i=r.validationTargetFor(r.clean(r.findByName(e))))&&i.name in r.invalid&&(r.currentElements.push(i),a=r.check(i)&&a)}),t=!1!==this.check(s),a=a&&t,this.invalid[s.name]=!t,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c(e).attr("aria-invalid",!t)),a},showErrors:function(t){var n;t&&(c.extend((n=this).errorMap,t),this.errorList=c.map(this.errorMap,function(e,t){return{message:e,element:n.findByName(t)[0]}}),this.successList=c.grep(this.successList,function(e){return!(e.name in t)})),this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)null!=e[t]&&!1!==e[t]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===c.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var n=this,i={};return c(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var e=this.name||c(this).attr("name"),t=void 0!==c(this).attr("contenteditable")&&"false"!==c(this).attr("contenteditable");return!e&&n.settings.debug&&window.console&&console.error("%o has no name assigned",this),t&&(this.form=c(this).closest("form")[0],this.name=e),!(this.form!==n.currentForm||e in i||!n.objectLength(c(this).rules())||(i[e]=!0,0))})},clean:function(e){return c(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return c(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=c([]),this.toHide=c([])},reset:function(){this.resetInternals(),this.currentElements=c([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=c(e),n=e.type,i=void 0!==t.attr("contenteditable")&&"false"!==t.attr("contenteditable");return"radio"===n||"checkbox"===n?this.findByName(e.name).filter(":checked").val():"number"===n&&void 0!==e.validity?e.validity.badInput?"NaN":t.val():(e=i?t.text():t.val(),"file"===n?"C:\\fakepath\\"===e.substr(0,12)?e.substr(12):0<=(i=e.lastIndexOf("/"))||0<=(i=e.lastIndexOf("\\"))?e.substr(i+1):e:"string"==typeof e?e.replace(/\r/g,""):e)},check:function(t){t=this.validationTargetFor(this.clean(t));var e,n,i,s,r=c(t).rules(),a=c.map(r,function(e,t){return t}).length,o=!1,l=this.elementValue(t);for(n in this.abortRequest(t),"function"==typeof r.normalizer?s=r.normalizer:"function"==typeof this.settings.normalizer&&(s=this.settings.normalizer),s&&(l=s.call(t,l),delete r.normalizer),r){i={method:n,parameters:r[n]};try{if("dependency-mismatch"===(e=c.validator.methods[n].call(this,l,t,i.parameters))&&1===a)o=!0;else{if(o=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,i),!1}}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+i.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+i.method+"' method."),e}}if(!o)return this.objectLength(r)&&this.successList.push(t),!0},customDataMessage:function(e,t){return c(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||c(e).data("msg")},customMessage:function(e,t){e=this.settings.messages[e];return e&&(e.constructor===String?e:e[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){var n=this.findDefined(this.customMessage(e.name,(t="string"==typeof t?{method:t}:t).method),this.customDataMessage(e,t.method),!this.settings.ignoreTitle&&e.title||void 0,c.validator.messages[t.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),i=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,t.parameters,e):i.test(n)&&(n=c.validator.format(n.replace(i,"{$1}"),t.parameters)),n},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t);this.errorList.push({message:n,element:e,method:t.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return e=this.settings.wrapper?e.add(e.parent(this.settings.wrapper)):e},defaultShowErrors:function(){for(var e,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,e=this.validElements();e[n];n++)this.settings.unhighlight.call(this,e[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var n,i,s,r=this.errorsFor(e),a=this.idOrName(e),o=c(e).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),this.settings&&this.settings.escapeHtml?r.text(t||""):r.html(t||"")):(r=c("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass),this.settings&&this.settings.escapeHtml?r.text(t||""):r.html(t||""),i=r,this.settings.wrapper&&(i=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,c(e)):i.insertAfter(e),r.is("label")?r.attr("for",a):0===r.parents("label[for='"+this.escapeCssMeta(a)+"']").length&&(i=r.attr("id"),o?o.match(new RegExp("\\b"+this.escapeCssMeta(i)+"\\b"))||(o+=" "+i):o=i,c(e).attr("aria-describedby",o),n=this.groups[e.name])&&c.each((s=this).groups,function(e,t){t===n&&c("[name='"+s.escapeCssMeta(e)+"']",s.currentForm).attr("aria-describedby",r.attr("id"))})),!t&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,e)),this.toShow=this.toShow.add(r)},errorsFor:function(e){var t=this.escapeCssMeta(this.idOrName(e)),e=c(e).attr("aria-describedby"),t="label[for='"+t+"'], label[for='"+t+"'] *";return e&&(t=t+", #"+this.escapeCssMeta(e).replace(/\s+/g,", #")),this.errors().filter(t)},escapeCssMeta:function(e){return void 0===e?"":e.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||!this.checkable(e)&&e.id||e.name},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),c(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return c(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return c("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!c(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!c.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},elementAjaxPort:function(e){return"validate"+e.name},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,c(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],c(e).removeClass(this.settings.pendingClass),t&&0===this.pendingRequest&&this.formSubmitted&&this.form()&&0===this.pendingRequest?(c(this.currentForm).trigger("submit"),this.submitButton&&c("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},abortRequest:function(e){var t;this.pending[e.name]&&(t=this.elementAjaxPort(e),c.ajaxAbort(t),this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],c(e).removeClass(this.settings.pendingClass))},previousValue:function(e,t){return t="string"==typeof t&&t||"remote",c.data(e,"previousValue")||c.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:t})})},destroy:function(){this.resetForm(),c(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:c.extend(this.classRuleSettings,e)},classRules:function(e){var t={},e=c(e).attr("class");return e&&c.each(e.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(t,c.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,n,i){(i=/min|max|step/.test(n)&&(null===t||/number|range|text/.test(t))&&(i=Number(i),isNaN(i))?void 0:i)||0===i?e[n]=i:t===n&&"range"!==t&&(e["date"===t?"dateISO":n]=!0)},attributeRules:function(e){var t,n,i={},s=c(e),r=e.getAttribute("type");for(t in c.validator.methods)n="required"===t?(n=e.getAttribute(t),""===n&&(n=!0),!!n):s.attr(t),this.normalizeAttributeRule(i,r,t,n);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var t,n,i={},s=c(e),r=e.getAttribute("type");for(t in c.validator.methods)n=s.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),""===n&&(n=!0),this.normalizeAttributeRule(i,r,t,n);return i},staticRules:function(e){var t={},n=c.data(e.form,"validator");return t=n.settings.rules?c.validator.normalizeRule(n.settings.rules[e.name])||{}:t},normalizeRules:function(i,s){return c.each(i,function(e,t){if(!1===t)delete i[e];else if(t.param||t.depends){var n=!0;switch(typeof t.depends){case"string":n=!!c(t.depends,s.form).length;break;case"function":n=t.depends.call(s,s)}n?i[e]=void 0===t.param||t.param:(c.data(s.form,"validator").resetElements(c(s)),delete i[e])}}),c.each(i,function(e,t){i[e]="function"==typeof t&&"normalizer"!==e?t(s):t}),c.each(["minlength","maxlength"],function(){i[this]&&(i[this]=Number(i[this]))}),c.each(["rangelength","range"],function(){var e;i[this]&&(Array.isArray(i[this])?i[this]=[Number(i[this][0]),Number(i[this][1])]:"string"==typeof i[this]&&(e=i[this].replace(/[\[\]]/g,"").split(/[\s,]+/),i[this]=[Number(e[0]),Number(e[1])]))}),c.validator.autoCreateRanges&&(null!=i.min&&null!=i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),null!=i.minlength)&&null!=i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength),i},normalizeRule:function(e){var t;return"string"==typeof e&&(t={},c.each(e.split(/\s/),function(){t[this]=!0}),e=t),e},addMethod:function(e,t,n){c.validator.methods[e]=t,c.validator.messages[e]=void 0!==n?n:c.validator.messages[e],t.length<3&&c.validator.addClassRules(e,c.validator.normalizeRule(e))},methods:{required:function(e,t,n){return this.depend(n,t)?"select"===t.nodeName.toLowerCase()?(n=c(t).val())&&0<n.length:this.checkable(t)?0<this.getLength(e,t):null!=e&&0<e.length:"dependency-mismatch"},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})+(?::(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:(n=!1,function(e,t){return n||(n=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())}),dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||n<=e},maxlength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e<=n},rangelength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e>=n[0]&&e<=n[1]},min:function(e,t,n){return this.optional(t)||n<=e},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},step:function(e,t,n){function i(e){return(e=(""+e).match(/(?:\.(\d+))?$/))&&e[1]?e[1].length:0}function s(e){return Math.round(e*Math.pow(10,r))}var r,a=c(t).attr("type"),o="Step attribute on input type "+a+" is not supported.",l=new RegExp("\\b"+a+"\\b"),d=!0;if(a&&!l.test(["text","number","range"].join()))throw new Error(o);return r=i(n),(i(e)>r||s(e)%s(n)!=0)&&(d=!1),this.optional(t)||d},equalTo:function(e,t,n){n=c(n);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){c(t).valid()}),e===n.val()},remote:function(i,s,e,r){if(this.optional(s))return"dependency-mismatch";r="string"==typeof r&&r||"remote";var a,t,o=this.previousValue(s,r);return this.settings.messages[s.name]||(this.settings.messages[s.name]={}),o.originalMessage=o.originalMessage||this.settings.messages[s.name][r],this.settings.messages[s.name][r]=o.message,t=c.param(c.extend({data:i},(e="string"==typeof e?{url:e}:e).data)),o.old===t?o.valid:(o.old=t,(a=this).startRequest(s),(t={})[s.name]=i,c.ajax(c.extend(!0,{mode:"abort",port:this.elementAjaxPort(s),dataType:"json",data:t,context:a.currentForm,success:function(e){var t,n=!0===e||"true"===e;a.settings.messages[s.name][r]=o.originalMessage,n?(t=a.formSubmitted,a.toHide=a.errorsFor(s),a.formSubmitted=t,a.successList.push(s),a.invalid[s.name]=!1,a.showErrors()):(t={},e=e||a.defaultMessage(s,{method:r,parameters:i}),t[s.name]=o.message=e,a.invalid[s.name]=!0,a.showErrors(t)),o.valid=n,a.stopRequest(s,n)}},e)),"pending")}}});var i,s={};return c.ajaxPrefilter?c.ajaxPrefilter(function(e,t,n){var i=e.port;"abort"===e.mode&&(c.ajaxAbort(i),s[i]=n)}):(i=c.ajax,c.ajax=function(e){var t=("mode"in e?e:c.ajaxSettings).mode,e=("port"in e?e:c.ajaxSettings).port;return"abort"===t?(c.ajaxAbort(e),s[e]=i.apply(this,arguments),s[e]):i.apply(this,arguments)}),c.ajaxAbort=function(e){s[e]&&(s[e].abort(),delete s[e])},c}),((t,n)=>{var e=n.jQuery;"object"==typeof exports?module.exports=e?t(n,e):function(e){if(e&&!e.fn)throw"Provide jQuery or null";return t(n,e)}:"function"==typeof define&&define.amd?define(function(){return t(n)}):t(n,!1)})(function(c,Q){function w(n,i){return function(){var e,t=this.base;return this.base=n,e=i.apply(this,arguments),this.base=t,e}}function l(e,t){return k(t)&&((t=w(e?e._d?e:w(d,e):d,t))._d=(e&&e._d||0)+1),t}function F(e,t){var n,i=t.props;for(n in i)!be.test(n)||e[n]&&e[n].fix||(e[n]="convert"!==n?l(e.constructor.prototype[n],i[n]):i[n])}function e(e){return e}function d(){return""}function t(e){this.name=(Q.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function $(e,t){if(e){for(var n in t)e[n]=t[n];return e}}function b(e,t,n){return e?q(e)?b.apply(v,e):(p=n?n[0]:p,/^(\W|_){5}$/.test(e+t+p)||B("Invalid delimiters"),a=e[0],i=e[1],o=t[0],u=t[1],P.delimiters=[a+i,o+u,p],e="\\"+a+"(\\"+p+")?\\"+i,t="\\"+o+"\\"+u,s="(?:(\\w+(?=[\\/\\s\\"+o+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+o+"]|\\"+o+"(?!\\"+u+"))*?)",Z.rTag="(?:"+s+")",s=new RegExp("(?:"+e+s+"(\\/)?|\\"+a+"(\\"+p+")?\\"+i+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+t,"g"),Z.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+e+".*"+t),r):P.delimiters}function A(){var e=this.get("item");return e?e.index:void 0}function _(){return this.index}function S(e,t,n,i){var s,r,a,o=0;if(1===n&&(i=1,n=void 0),t)for(a=(r=t.split(".")).length;e&&o<a;o++)s=e,e=r[o]?e[r[o]]:e;return n&&(n.lt=n.lt||o<a),void 0===e?i?d:"":i?function(){return e.apply(s,arguments)}:e}function H(e,t,n){var i,s,r,a,o=this,l=!m&&1<arguments.length,d=o.ctx;if(e){if(o._||(r=o.index,o=o.tag),a=o,d&&d.hasOwnProperty(e)||(d=de).hasOwnProperty(e)){if(s=d[e],"tag"===e||"tagCtx"===e||"root"===e||"parentTags"===e)return s}else d=void 0;if((!m&&o.tagCtx||o.linked)&&(s&&s._cxp||(o=!o.tagCtx&&!k(s)&&!(o=o.scope||o).isTop&&o.ctx.tag||o,d=(o=void 0!==s&&o.tagCtx?o.tagCtx.view.scope:o)._ocps,(s=d&&d.hasOwnProperty(e)&&d[e]||s)&&s._cxp)||!n&&!l||((d||(o._ocps=o._ocps||{}))[e]=s=[{_ocp:s,_vw:a,_key:e}],s._cxp={path:ue,ind:0,updateValue:function(e,t){return Q.observable(s[0]).setProperty(ue,e),this}}),n=s&&s._cxp)){if(2<arguments.length)return(d=s[1]?Z._ceo(s[1].deps):[ue]).unshift(s[0]),d._cxp=n,d;if(r=n.tagElse,d=s[1]?n.tag&&n.tag.cvtArgs?n.tag.cvtArgs(r,1)[n.ind]:s[1](s[0].data,s[0],Z):s[0]._ocp,l)return Z._ucp(e,t,o,n),o;s=d}return s&&k(s)&&$(i=function(){return s.apply(this&&this!==c?this:a,arguments)},s),i||s}}function G(e,t){var n,i,s,r,a,o,l,d=this;if(d.tagName){if(!(d=((o=d).tagCtxs||[d])[e||0]))return}else o=d.tag;if(a=o.bindFrom,r=d.args,(l=(l=o.convert)&&""+l===l?"true"===l?void 0:d.view.getRsc("converters",l)||B("Unknown converter: '"+l+"'"):l)&&!t&&(r=r.slice()),a){for(s=[],n=a.length;n--;)i=a[n],s.unshift(K(d,i));t&&(r=s)}if(l){if(void 0===(l=l.apply(o,s||r)))return r;if(n=(a=a||[0]).length,q(l)&&(!1===l.arg0||1!==n&&l.length===n&&!l.arg0)||(l=[l],a=[0],n=1),t)r=l;else for(;n--;)+(i=a[n])===i&&(r[i]=l[n])}return r}function K(e,t){return(e=e[+t===t?"args":"props"])&&e[t]}function X(e){return this.cvtArgs(e,1)}function x(e,t,n,i,s,r,a,o){var l=this,d="array"===t;l.content=o,l.views=d?[]:{},l.data=i,l.tmpl=s,o=l._={key:0,useKey:d?0:1,id:""+Ae++,onRender:a,bnds:{}},l.linked=!!a,l.type=t||"top",t&&(l.cache={_ct:P._cchCt}),n&&"top"!==n.type||((l.ctx=e||{}).root=l.data),(l.parent=n)?(l.root=n.root||l,i=n.views,l.isTop=(s=n._).scp,l.scope=(!e.tag||e.tag===n.ctx.tag)&&!l.isTop&&n.scope||l,s.useKey?((i[o.key="_"+s.useKey++]=l).index=Ie,l.getIndex=A):i.length===(o.key=l.index=r)?i.push(l):i.splice(r,0,l),l.ctx=e||n.ctx):t&&(l.root=l)}function y(e,t,n){Object.defineProperty(e,t,{value:n,configurable:!0})}function ee(e,t){var n,i=Y._wm||{},s={tmpls:[],links:{},bnds:[],_is:"template",render:te};return(s=t?$(s,t):s).markup=e,s.htmlTag||(n=ve.exec(e),s.htmlTag=n?n[1].toLowerCase():""),(n=i[s.htmlTag])&&n!==i.div&&(s.markup=Q.trim(s.markup)),s}function M(l,d){var c=l+"s";v[c]=function e(t,n,i){var s,r,a,o=Z.onStore[l];if(!t||typeof t!==Me||t.nodeType||t.markup||t.getTgt||"viewModel"===l&&t.getters||t.extend)return t&&""+t!==t&&(i=n,n=t,t=void 0),a=i?"viewModel"===l?i:i[c]=i[c]||{}:e,s=d.compile,void 0===n&&(n=s?t:a[t],t=void 0),null===n?t&&delete a[t]:(s&&((n=s.call(a,t,n,i,0)||{})._is=l),t&&(a[t]=n)),o&&o(t,n,i,s),n;for(r in t)e(r,t[r],n);return n||v}}function U(t){r[t]=r[t]||function(e){return arguments.length?(P[t]=e,r):P[t]}}function I(n){function i(e,t){this.tgt=n.getTgt(e,t),t.map=this}return(n=(n=k(n)?{getTgt:n}:n).baseMap?$($({},n.baseMap),n):n).map=function(e,t){return new i(e,t)},n}function te(e,t,n,i,s,r){var a,o,l,d,c,u,p=i,h="";if(!0===t?(n=t,t=void 0):typeof t!==Me&&(t=void 0),(l=this.tag)?(d=(p=p||this.view)._getTmpl(l.template||this.tmpl),arguments.length||(e=l.contentCtx&&k(l.contentCtx)?l.contentCtx(e):p)):d=this,d){if((p=!i&&e&&"view"===e._is?e:p)&&e===p&&(e=p.data),i=!p,m=m||i,i&&((t=t||{}).root=e),!m||Y.useViews||d.useViews||p&&p!==N)h=ne(d,e,t,n,p,s,r,l);else{if(p?(c=p.data,u=p.index,p.index=Ie):(c=(p=N).data,p.data=e,p.ctx=t),q(e)&&!n)for(a=0,o=e.length;a<o;a++)p.index=a,p.data=e[a],h+=d.fn(e[a],p,Z);else p.data=e,h+=d.fn(e,p,Z);p.data=c,p.index=u}i&&(m=void 0)}return h}function ne(e,t,n,i,s,r,a,o){var l,d,c,u,p,h,m,g,f,v,w,b,y,C="";if(o&&(f=o.tagName,b=o.tagCtx,n=n?O(n,o.ctx):o.ctx,e===s.content?m=e!==s.ctx._wrp?s.ctx._wrp:void 0:e!==b.content?e===o.template?(m=b.tmpl,n._wrp=b.content):m=b.content||s.content:m=s.content,!1===b.props.link)&&((n=n||{}).link=!1),s&&(a=a||s._.onRender,(y=n&&!1===n.link)&&s._.nl&&(a=void 0),n=O(n,s.ctx),b=!o&&s.tag?s.tag.tagCtxs[s.tagElse]:b),(v=b&&b.props.itemVar)&&("~"!==v[0]&&J("Use itemVar='~myItem'"),v=v.slice(1)),!0===r&&(h=!0,r=0),!0===(g=a=a&&o&&o._.noVws?void 0:a)&&(g=void 0,a=s._.onRender),w=n=e.helpers?O(e.helpers,n):n,q(t)&&!i)for((c=h?s:void 0!==r&&s||new x(n,"array",s,t,e,r,a,m))._.nl=y,s&&s._.useKey&&(c._.bnd=!o||o._.bnd&&o,c.tag=o),l=0,d=t.length;l<d;l++)u=new x(w,"item",c,t[l],e,(r||0)+l,a,c.content),v&&((u.ctx=$({},w))[v]=Z._cp(t[l],"#data",u)),p=e.fn(t[l],u,Z),C+=c._.onRender?c._.onRender(p,u):p;else c=h?s:new x(w,f||"data",s,t,e,r,a,m),v&&((c.ctx=$({},w))[v]=Z._cp(t,"#data",c)),c.tag=o,c._.nl=y,C+=e.fn(t,c,Z);return o&&(c.tagElse=b.index,b.contentView=c),g?g(C,c):C}function B(e){throw new Z.Err(e)}function J(e){B("Syntax error\n"+e)}function E(x,k,A,_,S){function M(e){(e-=L)&&T.push(x.substr(L,e).replace(pe,"\\n"))}function U(e,t){e&&(e+="}}",J((t?"{{"+t+"}} block has {{/"+e+" without {{"+e:"Unmatched or missing {{/"+e)+", in template:\n"+x))}var e,t,I,E,n,j=P.allowCode||k&&k.allowCode||!0===r.allowCode,i=[],L=0,D=[],T=i,z=[,,i];if(j&&k._is&&(k.allowCode=j),A&&(void 0!==_&&(x=x.slice(0,-_.length-2)+o),x=a+x+u),U(D[0]&&D[0][2].pop()[0]),x.replace(s,function(e,t,n,i,s,r,a,o,l,d,c,u){(a&&t||l&&!n||o&&":"===o.slice(-1)||d)&&J(e),r&&(s=":",i=W);var p,h,m,d=(t||A)&&[[]],g="",f="",v="",w="",b="",y="",C="",$="",r=!(l=l||A&&!S)&&!s;n=n||(o=o||"#data",s),M(u),L=u+e.length,a?j&&T.push(["*","\n"+o.replace(/^:/,"ret+= ").replace(he,"$1")+";\n"]):n?("else"===n&&(fe.test(o)&&J('For "{{else if expr}}" use "{{else expr}}"'),d=z[9]&&[[]],z[10]=x.substring(z[10],u),h=z[11]||z[0]||J("Mismatched: "+e),z=D.pop(),T=z[2],r=!0),o&&re(o.replace(pe," "),d,k,A).replace(ge,function(e,t,n,i,s,r,a,o){return"this:"===i&&(r="undefined"),o&&(m=m||"@"===o[0]),i="'"+s+"':",a?(f+=n+r+",",w+="'"+o+"',"):n?(v+=i+"j._cp("+r+',"'+o+'",view),',y+=i+"'"+o+"',"):t?C+=r:("trigger"===s&&($+=r),"lateRender"===s&&(p="false"!==o),g+=i+r+",",b+=i+"'"+o+"',",E=E||be.test(s)),""}).slice(0,-1),d&&d[0]&&d.pop(),I=[n,i||!!_||E||"",r&&[],se(w||(":"===n?"'#data',":""),b,y),se(f||(":"===n?"data,":""),g,v),C,$,p,m,d||0],T.push(I),r&&(D.push(z),(z=I)[10]=L,z[11]=h)):c&&(U(c!==z[0]&&c!==z[11]&&c,z[0]),z[10]=x.substring(z[10],u),z=D.pop()),U(!z&&c),T=z[2]}),M(x.length),(L=i[i.length-1])&&U(""+L!==L&&+L[10]===L[10]&&L[0]),A){for(t=ae(i,x,A),n=[],e=i.length;e--;)n.unshift(i[e][9]);ie(t,n)}else t=ae(i,k);return t}function ie(e,t){var n,i,s=0,r=t.length;for(e.deps=[],e.paths=[];s<r;s++)for(n in e.paths.push(i=t[s]),i)"_jsvto"!==n&&i.hasOwnProperty(n)&&i[n].length&&!i[n].skp&&(e.deps=e.deps.concat(i[n]))}function se(e,t,n){return[e.slice(0,-1),t.slice(0,-1),n.slice(0,-1)]}function re(S,M,e,U){var I,E,j,L,D=M&&M[0],T={bd:D},z={0:T},R=0,P=0,F=0,B={},O=0,N={},q={},V={},W={0:0},H={0:""},G=0,e=((S="@"===S[0]?S.replace(ke,"."):S)+(e?" ":"")).replace(Z.rPrm,function(e,t,n,i,l,s,r,a,o,d,c,u,p,h,m,g,f,v,w,b,y){s=s||"",p=p||"",n=n||t||p,l=(l=i&&!a?i+l:l)||o,(d=d&&!/\)|]/.test(y[b-1]))&&(l=l.slice(1).split(".").join("^")),c=c||v||"";var C,$,x,k,A,_=b;if(!L&&!j){if(r&&J(S),f&&D){if(o=V[F-1],y.length-1>_-(o||0)){if(o=Q.trim(y.slice(o,_+e.length)),C=E||z[F-1].bd,($=C[C.length-1])&&$.prm){for(;$.sb&&$.sb.prm;)$=$.sb;x=$.sb={path:$.sb,bnd:$.bnd}}else C.push(x={path:C.pop()});$&&$.sb===x&&(H[F]=H[F-1].slice($._cpPthSt)+H[F],H[F-1]=H[F-1].slice(0,$._cpPthSt)),x._cpPthSt=W[F-1],x._cpKey=o,H[F]+=y.slice(G,b),G=b,x._cpfn=Ee[o]=Ee[o]||new Function("data,view,j","//"+o+"\nvar v;\nreturn ((v="+H[F]+("]"===g?")]":g)+")!=null?v:null);"),H[F-1]+=q[P]&&Y.cache?'view.getCache("'+o.replace(me,"\\$&")+'"':H[F],x.prm=T.bd,x.bnd=x.bnd||x.path&&0<=x.path.indexOf("^")}H[F]=""}"["===c&&(c="[j._sq("),"["===n&&(n="[j._sq(")}return r=L?(L=!h)?e:p+'"':j?(j=!m)?e:p+'"':(n?(N[++P]=!0,B[P]=0,D&&(V[F++]=_++,T=z[F]={bd:[]},H[F]="",W[F]=1),n):"")+(w?P?"":(R=y.slice(R,_),(I?(I=E=!1,"\b"):"\b,")+R+(R=_+e.length,D&&M.push(T.bd=[]),"\b")):a?(F&&J(S),D&&M.pop(),I="_"+l,R=_+e.length,D&&((D=T.bd=M[I]=[]).skp=!i),l+":"):l?l.split("^").join(".").replace(Z.rPath,function(e,t,n,i,s,r,a,o){if(k="."===n,n&&(l=l.slice(t.length),/^\.?constructor$/.test(o||l)&&J(e),k||(e=(d?(U?"":"(ltOb.lt=ltOb.lt||")+"(ob=":"")+(i?'view.ctxPrm("'+i+'")':s?"view":"data")+(d?")===undefined"+(U?"":")")+'?"":view._getOb(ob,"':"")+(o?(r?"."+r:i||s?"":"."+n)+(a||""):(o=i?"":s?r||"":n,"")),e=t+("view.data"===(e+=o?"."+o:"").slice(0,9)?e.slice(5):e)+(d?(U?'"':'",ltOb')+(c?",1)":")"):"")),D)){if(C="_linkTo"===I?E=M._jsvto=M._jsvto||[]:T.bd,$=k&&C[C.length-1]){if($._cpfn){for(;$.sb;)$=$.sb;$.prm&&($.bnd&&(l="^"+l.slice(1)),$.sb=l,$.bnd=$.bnd||"^"===l[0])}}else C.push(l);c&&!k&&(V[F]=_,W[F]=H[F].length)}return e})+(c||s):s||(g?"]"===g?")]":")":u?(q[P]||J(S),","):t?"":(L=h,j=m,'"'))),L||j||g&&(q[P]=!1,P--),D&&(L||j||(g&&(N[P+1]&&(T=z[--F],N[P+1]=!1),O=B[P+1]),c&&(B[P+1]=H[F].length+(n?1:0),l||g)&&(T=z[++F]={bd:[]},N[P+1]=!0)),H[F]=(H[F]||"")+y.slice(G,b),G=b+e.length,L||j||((A=n&&N[P+1])&&(H[F-1]+=n,W[F-1]++),"("===c&&k&&!x&&(H[F]=H[F-1].slice(O)+H[F],H[F-1]=H[F-1].slice(0,O))),H[F]+=A?r.slice(1):r),L||j||!c||(P++,l&&"("===c&&(q[P]=!0)),L||j||!v||(D&&(H[F]+=c),r+=c),r});return D&&(e=H[0]),!P&&e||J(S)}function ae(e,t,n){var i,s,r,a,o,l,d,c,u,p,h,m,g,f,v,w,b,y,C,$,x,k,A,_,S,M,U,I,E,j=0,L=Y.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,D="",T={},z=e.length;for(""+t===t?(v=n?'data-link="'+t.replace(pe," ").slice(1,-1)+'"':t,t=0):(v=t.tmplName||"unnamed",t.allowCode&&(T.allowCode=!0),t.debug&&(T.debug=!0),u=t.bnds,f=t.tmpls),i=0;i<z;i++)if(""+(s=e[i])===s)D+='+"'+s+'"';else if("*"===(r=s[0]))D+=";\n"+s[1]+"\nret=ret";else{if(a=s[1],b=!n&&s[2],I=s[3],E=h=s[4],I="\n\tparams:{args:["+I[0]+"],\n\tprops:{"+I[1]+"}"+(I[2]?",\n\tctx:{"+I[2]+"}":"")+"},\n\targs:["+E[0]+"],\n\tprops:{"+E[1]+"}"+(E[2]?",\n\tctx:{"+E[2]+"}":""),E=s[6],S=s[7],U=s[8]?(M="\nvar ob,ltOb={},ctxs=",";\nctxs.lt=ltOb.lt;\nreturn ctxs;"):(M="\nreturn ",""),_=s[10]&&s[10].replace(he,"$1"),($="else"===r)?p&&p.push(s[9]):(A=s[5]||!1!==P.debugMode&&"undefined",u&&(p=s[9])&&(p=[p],j=u.push(1))),L=L||h[1]||h[2]||p||/view.(?!index)/.test(h[0]),(x=":"===r)?a&&(r=a===W?">":a+r):(b&&((_=ee(_,T)).tmplName=v+"/"+r,_.useViews=_.useViews||L,ae(b,_),L=_.useViews,f.push(_)),$||(w=r,L=L||r&&(!R[r]||!R[r].flow),C=D,D=""),y=(y=e[i+1])&&"else"===y[0]),_=A?";\ntry{\nret+=":"\n+",m=$="",x&&(p||E||a&&a!==W||S)){if((k=new Function("data,view,j","// "+v+" "+ ++j+" "+r+M+"{"+I+"};"+U))._er=A,k._tag=r,k._bd=!!p,k._lr=S,n)return k;ie(k,p),c=!0,$=(g='c("'+a+'",view,')+j+",",m=")"}if(D+=x?(n?(A?"try{\n":"")+"return ":_)+(c?(L=d=!(c=void 0),g+(k?(u[j-1]=k,j):"{"+I+"}")+")"):">"===r?(l=!0,"h("+h[0]+")"):"((v="+h[0]+")!=null?v:"+(n?"null)":'"")')):(o=!0,"\n{view:view,content:false,tmpl:"+(b?f.length:"false")+","+I+"},"),w&&!y){if(D="["+D.slice(0,-1)+"]",g='t("'+w+'",view,this,',n||p){if((D=new Function("data,view,j"," // "+v+" "+j+" "+w+M+D+U))._er=A,D._tag=w,p&&ie(u[j-1]=D,p),D._lr=S,n)return D;$=g+j+",undefined,",m=")"}D=C+_+g+(p&&j||D)+")",w=p=0}A&&!y&&(L=!0,D+=";\n}catch(e){ret"+(n?"urn ":"+=")+$+"j._err(e,view,"+A+")"+m+";}"+(n?"":"\nret=ret"))}D="// "+v+(T.debug?"\ndebugger;":"")+"\nvar v"+(o?",t=j._tag":"")+(d?",c=j._cnvt":"")+(l?",h=j._html":"")+(n?(s[8]?", ob":"")+";\n":',ret=""')+D+(n?"\n":";\nreturn ret;");try{D=new Function("data,view,j",D)}catch(e){J("Compiled template code:\n\n"+D+'\n: "'+(e.message||e)+'"')}return t&&(t.fn=D,t.useViews=!!L),D}function O(e,t){return e&&e!==t?t?$($({},t),e):e:t&&$({},t)}function j(t,e){var n,i,s,r=e.tag,a=e.props,o=e.params.props,l=a.filter,d=a.sort,c=!0===d,u=parseInt(a.step),p=a.reverse?-1:1;if(q(t)){if(c||d&&""+d===d?((n=t.map(function(e,t){return{i:t,v:""+(e=c?e:S(e,d))===e?e.toLowerCase():e}})).sort(function(e,t){return e.v>t.v?p:e.v<t.v?-p:0}),t=n.map(function(e){return t[e.i]})):(d||p<0)&&!r.dataMap&&(t=t.slice()),k(d)&&(t=t.sort(function(){return d.apply(e,arguments)})),(t=p<0&&(!d||k(d))?t.reverse():t).filter&&l&&(t=t.filter(l,e),e.tag.onFilter)&&e.tag.onFilter(e),o.sorted&&(n=d||p<0?t:t.slice(),r.sorted?Q.observable(r.sorted).refresh(n):e.map.sorted=n),i=a.start,s=a.end,(o.start&&void 0===i||o.end&&void 0===s)&&(i=s=0),isNaN(i)&&isNaN(s)||(s=void 0===s||s>t.length?t.length:+s,t=t.slice(i=+i||0,s)),1<u){for(i=0,s=t.length,n=[];i<s;i+=u)n.push(t[i]);t=n}o.paged&&r.paged&&$observable(r.paged).refresh(t)}return t}function L(e,t,n){var i=this.jquery&&(this[0]||B("Unknown template")),s=i.getAttribute(Ue);return te.call(s&&Q.data(i)[g]||h(i),e,t,n)}function D(e){return _e[e]||(_e[e]="&#"+e.charCodeAt(0)+";")}function T(e,t){return Se[t]||""}function z(e){return null!=e?we.test(e)&&(""+e).replace(Ce,D)||e:""}var oe=!1===Q;Q=Q&&Q.fn?Q:c.jQuery;var le,s,N,C,k,q,h,V,de,R,Z,P,Y,r,a,i,o,u,p,ce,m,n="v1.0.11",ue="_ocp",pe=/[ \t]*(\r\n|\n|\r)/g,he=/\\(['"\\])/g,me=/['"\\]/g,ge=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,fe=/^if\s/,ve=/<(\w+)[>\s]/,we=/[\x00`><\"'&=]/,be=/^on[A-Z]|^convert(Back)?$/,ye=/^\#\d+_`[\s\S]*\/\d+_`$/,Ce=/[\x00`><"'&=]/g,$e=/[&<>]/g,xe=/&(amp|gt|lt);/g,ke=/\[['"]?|['"]?\]/g,Ae=0,_e={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},Se={amp:"&",gt:">",lt:"<"},W="html",Me="object",Ue="data-jsv-tmpl",g="jsvTmpl",Ie="For #index in nested block use #getIndex().",Ee={},je={},f=c.jsrender,Le=f&&Q&&!Q.render,De={template:{compile:function n(i,e,s,r){function t(e){var t;if(""+e===e||0<e.nodeType&&(a=e)){if(!a)if(/^\.?\/[^\\:*?"<>]*$/.test(e))(t=h[i=i||e])?e=t:a=document.getElementById(e);else if("#"===e.charAt(0))a=document.getElementById(e.slice(1));else if(Q.fn&&!Z.rTmpl.test(e))try{a=Q(e,document)[0]}catch(e){}a&&("SCRIPT"!==a.tagName&&B(e+": Use script block, not "+a.tagName),r?e=a.innerHTML:((t=a.getAttribute(Ue))&&(t!==g?(e=h[t],delete h[t]):Q.fn&&(e=Q.data(a)[g])),(e=t&&e?e:n(i=i||(Q.fn?g:e),a.innerHTML,s,r)).tmplName=i=i||t,i!==g&&(h[i]=e),a.setAttribute(Ue,i),Q.fn&&Q.data(a,g,e))),a=void 0}else e.fn||(e=void 0);return e}var a,o,l,d,c,u=e=e||"";if(Z._html=V.html,0===r&&(r=void 0,u=t(u)),(r=r||(e.markup?e.bnds?$({},e):e:{})).tmplName=r.tmplName||i||"unnamed",s&&(r._parentTmpl=s),void 0!==(u=!u&&e.markup&&(u=t(e.markup))&&u.fn?u.markup:u)){if(u.render||e.render?u.tmpls&&(o=u):(e=ee(u,r),E(u.replace(me,"\\$&"),e)),!o){var p=o=$(function(){return o.render.apply(o,arguments)},e);for(l in De)d=l+"s",p[d]&&(c=p[d],p[d]={},v[d](c,p))}return o}}},tag:{compile:function(e,t,n){function i(){this._={unlinked:!0},this.inline=!0,this.tagName=e}var s,r,a,o=new Z._tg;if(k(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t}),r=t.baseTag)for(a in t.flow=!!t.flow,(r=""+r===r?n&&n.tags[r]||R[r]:r)||B('baseTag: "'+t.baseTag+'" not found'),o=$(o,r),t)o[a]=l(r[a],t[a]);else o=$(o,t);return void 0!==(s=o.template)&&(o.template=""+s===s?h[s]||h(s):s),(i.prototype=o).constructor=o._ctr=i,n&&(o._parentTmpl=n),o}},viewModel:{compile:function(l,e){function t(e){n.apply(this,e)}function g(){return new t(arguments)}function f(e,t){for(var n,i,s,r,a,o,l=0;l<m;l++)n=void 0,(i=p[l])+""!==i&&(i=(n=i).getter,r=n.parentRef),void 0===(s=e[i])&&n&&void 0!==(a=n.defaultVal)&&(o=e,s=k(a=a)?a.call(o):a),t(s,n&&u[n.type],i,r)}function d(e,t,n){e=e+""===e?JSON.parse(e):e;var i,s,r,a,o,l,d,c,u,p,h=0,m=this;if(q(m)){for(d={},u=[],s=e.length,r=m.length;h<s;h++){for(c=e[h],l=!1,i=0;i<r&&!l;i++)d[i]||(o=m[i],v&&(d[i]=l=v+""===v?c[v]&&(b[v]?o[v]():o[v])===c[v]:v(o,c)));l?(o.merge(c),u.push(o)):(u.push(p=g.map(c)),n&&y(p,n,t))}w?w(m).refresh(u,!0):m.splice.apply(m,[0,m.length].concat(u))}else for(a in f(e,function(e,t,n,i){t?m[n]().merge(e,m,i):m[n]()!==e&&m[n](e)}),e)a===C||b[a]||(m[a]=e[a])}function c(){function e(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n].unmap());return t}var t,n,i,s,r=0,a=this;if(q(a))return e(a);for(t={};r<m;r++)i=void 0,s=a[n=(n=p[r])+""!==n?(i=n).getter:n](),t[n]=i&&s&&u[i.type]?q(s)?e(s):s.unmap():s;for(n in a)!a.hasOwnProperty(n)||"_"===n.charAt(0)&&b[n.slice(1)]||n===C||k(a[n])||(t[n]=a[n]);return t}var i,n,s,u=this,p=e.getters,r=e.extend,v=e.id,a=Q.extend({_is:l||"unnamed",unmap:c,merge:d},r),o="",h="",m=p?p.length:0,w=Q.observable,b={};for(t.prototype=a,i=0;i<m;i++)(t=>{t=t.getter||t,b[t]=i+1;var n="_"+t;o+=(o?",":"")+t,h+="this."+n+" = "+t+";\n",a[t]=a[t]||function(e){return arguments.length?void(w?w(this).setProperty(t,e):this[n]=e):this[n]},w&&(a[t].set=a[t].set||function(e){this[n]=e})})(p[i]);return h=new Function(o,h),((n=function(){h.apply(this,arguments),(s=arguments[m+1])&&y(this,arguments[m],s)}).prototype=a).constructor=n,g.map=function(e){var t,n,i,s,r=0,a=e=e+""===e?JSON.parse(e):e,o=[];if(q(e)){for(t=(e=e||[]).length;r<t;r++)o.push(this.map(e[r]));return o._is=l,o.unmap=c,o.merge=d,o}if(e){for(f(e,function(e,t){t&&(e=t.map(e)),o.push(e)}),a=this.apply(this,o),r=m;r--;)if(i=o[r],(s=p[r].parentRef)&&i&&i.unmap)if(q(i))for(t=i.length;t--;)y(i[t],s,a);else y(i,s,a);for(n in e)n===C||b[n]||(a[n]=e[n])}return a},g.getters=p,g.extend=r,g.id=v,g}},helper:{},converter:{}},v={jsviews:n,sub:{rPath:/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,rPrm:/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(?:(\()\s*)?\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,View:x,Err:t,tmplFn:E,parse:re,extend:$,extendCtx:O,syntaxErr:J,onStore:{template:function(e,t){null===t?delete je[e]:e&&(je[e]=t)}},addSetting:U,settings:{allowCode:!1},advSet:d,_thp:F,_gm:l,_tg:function(){},_cnvt:function(e,t,n,i){var s,r,a,o,l,d="number"==typeof n&&t.tmpl.bnds[n-1];if(void 0!==(i=void 0===i&&d&&d._lr?"":i)?n=i={props:{},args:[i]}:d&&(n=d(t.data,t,Z)),d=d._bd&&d,e||d){if(s=(r=t._lc)&&r.tag,n.view=t,!s){if(s=$(new Z._tg,{_:{bnd:d,unlinked:!0,lt:n.lt},inline:!r,tagName:":",convert:e,onArrayChange:!0,flow:!0,tagCtx:n,tagCtxs:[n],_is:"tag"}),1<(o=n.args.length))for(l=s.bindTo=[];o--;)l.unshift(o);r&&((r.tag=s).linkCtx=r),n.ctx=O(n.ctx,(r?r.view:t).ctx),F(s,n)}s._er=i&&a,s.ctx=n.ctx||s.ctx||{},n.ctx=void 0,a=s.cvtArgs()[0],s._er=i&&a}else a=n.args[0];return null!=(a=d&&t._.onRender?t._.onRender(a,t,s):a)?a:""},_tag:function(e,t,n,i,s,r){function z(e){var t=a[e];if(void 0!==t)for(t=q(t)?t:[t],p=t.length;p--;)_=t[p],isNaN(parseInt(_))||(t[p]=parseInt(_));return t||[0]}var a,o,l,d,c,u,p,h,m,g,f,v,w,b,y,C,$,R,x,k,A,_,S,M,U,I,E=0,j="",L=(t=t||N)._lc||!1,D=t.ctx,P=n||t.tmpl,T="number"==typeof i&&t.tmpl.bnds[i-1];for(("tag"===e._is?(e=(a=e).tagName,i=a.tagCtxs,a):o=t.getRsc("tags",e)||B("Unknown tag: {{"+e+"}} ")).template,void 0!==(r=void 0===r&&T&&(T._lr=o.lateRender&&!1!==T._lr||T._lr)?"":r)?(j+=r,i=r=[{props:{},args:[],params:{props:{}}}]):T&&(i=T(t.data,t,Z)),u=i.length;E<u;E++)y=(g=i[E]).tmpl,(!L||!L.tag||E&&!L.tag.inline||a._er||y&&+y===y)&&(y&&P.tmpls&&(g.tmpl=g.content=P.tmpls[y-1]),g.index=E,g.ctxPrm=H,g.render=te,g.cvtArgs=G,g.bndArgs=X,g.view=t,g.ctx=O(O(g.ctx,o&&o.ctx),D)),(n=g.props.tmpl)&&(g.tmpl=t._getTmpl(n),g.content=g.content||g.tmpl),a?L&&L.fn._lr&&(C=!!a.init):(C=!!(a=new o._ctr).init,a.parent=c=D&&D.tag,a.tagCtxs=i,L&&(a.inline=!1,L.tag=a),a.linkCtx=L,(a._.bnd=T||L.fn)?(a._.ths=g.params.props.this,a._.lt=i.lt,a._.arrVws={}):a.dataBoundOnly&&B(e+" must be data-bound:\n{^{"+e+"}}")),k=a.dataMap,g.tag=a,k&&i&&(g.map=i[E].map),a.flow||(y=g.ctx=g.ctx||{},l=a.parents=y.parentTags=D&&O(y.parentTags,D.parentTags)||{},c&&(l[c.tagName]=c),l[a.tagName]=y.tag=a,y.tagCtx=g);if(!(a._er=r)){for(F(a,i[0]),a.rendering={rndr:a.rendering},E=0;E<u;E++){if(x=(g=a.tagCtx=i[E]).props,a.ctx=g.ctx,!E){if(C&&(a.init(g,L,a.ctx),C=void 0),g.args.length||!1===g.argDefault||!1===a.argDefault||(g.args=$=[g.view.data],g.params.args=["#data"]),v=z("bindTo"),void 0!==a.bindTo&&(a.bindTo=v),void 0!==a.bindFrom?a.bindFrom=z("bindFrom"):a.bindTo&&(a.bindFrom=a.bindTo=v),w=a.bindFrom||v,M=v.length,S=w.length,a._.bnd&&(U=a.linkedElement)&&(a.linkedElement=U=q(U)?U:[U],M!==U.length)&&B("linkedElement not same length as bindTo"),(U=a.linkedCtxParam)&&(a.linkedCtxParam=U=q(U)?U:[U],S!==U.length)&&B("linkedCtxParam not same length as bindFrom/bindTo"),w)for(a._.fromIndex={},a._.toIndex={},h=S;h--;)for(_=w[h],p=M;p--;)_===v[p]&&(a._.fromIndex[p]=h,a._.toIndex[h]=p);L&&(L.attr=a.attr=L.attr||a.attr||L._dfAt),d=a.attr,a._.noVws=d&&d!==W}if($=a.cvtArgs(E),a.linkedCtxParam)for(R=a.cvtArgs(E,1),p=S,I=a.constructor.prototype.ctx;p--;)(f=a.linkedCtxParam[p])&&(_=w[p],b=R[p],g.ctx[f]=Z._cp(I&&void 0===b?I[f]:b,void 0!==b&&K(g.params,_),g.view,a._.bnd&&{tag:a,cvt:a.convert,ind:p,tagElse:E}));(A=x.dataMap||k)&&($.length||x.dataMap)&&((x=g.map)&&x.src===$[0]&&!s||(x&&x.src&&x.unmap(),A.map($[0],g,x,!a._.bnd),x=g.map),$=[x.tgt]),m=void 0,a.render&&(m=a.render.apply(a,$),t.linked)&&m&&!ye.test(m)&&((n={links:[]}).render=n.fn=function(){return m},m=ne(n,t.data,void 0,!0,t,void 0,void 0,a)),$.length||($=[t]),void 0===m&&(A=$[0],a.contentCtx&&(A=!0===a.contentCtx?t:a.contentCtx(A)),m=g.render(A,!0)||(s?void 0:"")),j=j?j+(m||""):void 0!==m?""+m:void 0}a.rendering=a.rendering.rndr}return a.tagCtx=i[0],a.ctx=a.tagCtx.ctx,a._.noVws&&a.inline&&(j="text"===d?V.html(j):""),T&&t._.onRender?t._.onRender(j,t,a):j},_er:B,_err:function(e,t,n){var i=void 0!==n?k(n)?n.call(t.data,e,t):n||"":"{Error: "+(e.message||e)+"}";return P.onError&&void 0!==(n=P.onError.call(t.data,e,n&&i,t))&&(i=n),t&&!t._lc?V.html(i):i},_cp:e,_sq:function(e){return"constructor"===e&&J(""),e}},settings:{delimiters:b,advanced:function(e){return e?($(Y,e),Z.advSet(),r):Y}},map:I};if((t.prototype=new Error).constructor=t,A.depends=function(){return[this.get("item"),"index"]},_.depends="index",x.prototype={get:function(e,t){t||!0===e||(t=e,e=void 0);var n,i,s,r,a=this,o="root"===t;if(e){if(!(r=t&&a.type===t&&a))if(n=a.views,a._.useKey){for(i in n)if(r=t?n[i].get(e,t):n[i])break}else for(i=0,s=n.length;!r&&i<s;i++)r=t?n[i].get(e,t):n[i]}else if(o)r=a.root;else if(t)for(;a&&!r;)r=a.type===t?a:void 0,a=a.parent;else r=a.parent;return r||void 0},getIndex:_,ctxPrm:H,getRsc:function(e,t){var n,i,s=this;if(""+t===t){for(;void 0===n&&s;)n=(i=s.tmpl&&s.tmpl[e])&&i[t],s=s.parent;return n||v[e][t]}},_getTmpl:function(e){return e&&(e.fn?e:this.getRsc("templates",e)||h(e))},_getOb:S,getCache:function(e){return P._cchCt>this.cache._ct&&(this.cache={_ct:P._cchCt}),void 0!==this.cache[e]?this.cache[e]:this.cache[e]=Ee[e](this.data,this,Z)},_is:"view"},Z=v.sub,r=v.settings,!(f||Q&&Q.render)){for(le in De)M(le,De[le]);if(V=v.converters,de=v.helpers,R=v.tags,Z._tg.prototype={baseApply:function(e){return this.base.apply(this,e)},cvtArgs:G,bndArgs:X,ctxPrm:H},N=Z.topView=new x,Q){if(Q.fn.render=L,C=Q.expando,Q.observable){if(n!==(n=Q.views.jsviews))throw"jquery.observable.js requires jsrender.js "+n;$(Z,Q.views.sub),v.map=Q.views.map}}else Q={},oe&&(c.jsrender=Q),Q.renderFile=Q.__express=Q.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},Q.isFunction=function(e){return"function"==typeof e},Q.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},Z._jq=function(e){e!==Q&&($(e,Q),(Q=e).fn.render=L,delete Q.jsrender,C=Q.expando)},Q.jsrender=n;for(ce in(P=Z.settings).allowCode=!1,k=Q.isFunction,Q.render=je,Q.views=v,Q.templates=h=v.templates,P)U(ce);(r.debugMode=function(e){return void 0===e?P.debugMode:(P._clFns&&P._clFns(),P.debugMode=e,P.onError=e+""===e?function(){return e}:k(e)?e:void 0,r)})(!1),Y=P.advanced={cache:!0,useViews:!1,_jsv:!1},R({if:{render:function(e){var t=this.tagCtx;return this.rendering.done||!e&&(t.args.length||!t.index)?"":(this.rendering.done=!0,void(this.selected=t.index))},contentCtx:!0,flow:!0},for:{sortDataMap:I(j),init:function(e,t){this.setDataMap(this.tagCtxs)},render:function(e){var t,n,i,s,r=this.tagCtx,a=!1===r.argDefault,o=r.props,l=a||r.args.length,d="",c=0;if(!this.rendering.done){if(t=l?e:r.view.data,a)for(a=o.reverse?"unshift":"push",i=+o.end,s=+o.step||1,t=[],n=+o.start||0;0<(i-n)*s;n+=s)t[a](n);void 0!==t&&(e=q(t),d+=r.render(t,!l||o.noIteration),c+=e?t.length:1),(this.rendering.done=c)&&(this.selected=r.index)}return d},setDataMap:function(e){for(var t,n,i,s=e.length;s--;)n=(t=e[s]).props,i=t.params.props,t.argDefault=void 0===n.end||0<t.args.length,n.dataMap=!1!==t.argDefault&&q(t.args[0])&&(i.sort||i.start||i.end||i.step||i.filter||i.reverse||n.sort||n.start||n.end||n.step||n.filter||n.reverse)&&this.sortDataMap},flow:!0},props:{baseTag:"for",dataMap:I(function(e,t){var n,i,s=t.map,r=s&&s.propsArr;if(!r){if(r=[],typeof e===Me||k(e))for(n in e)i=e[n],n===C||!e.hasOwnProperty(n)||t.props.noFunctions&&Q.isFunction(i)||r.push({key:n,prop:i});s&&(s.propsArr=s.options&&r)}return j(r,t)}),init:d,flow:!0},include:{flow:!0},"*":{render:e,flow:!0},":*":{render:e,flow:!0},dbg:de.dbg=V.dbg=function(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}}),V({html:z,attr:z,encode:function(e){return""+e===e?e.replace($e,D):e},unencode:function(e){return""+e===e?e.replace(xe,T):e},url:function(e){return null!=e?encodeURI(""+e):null===e?e:""}})}return P=Z.settings,q=(Q||f).isArray,r.delimiters("{{","}}","^"),Le&&f.views.sub._jq(Q),Q||f},window);var singleUserSelectedId,isKeyUp=!1,selectedUsers=[],gridUserData=[],users=[],singleUserRemove=!1,selectedTenants=[],previousIndex=[],isSafari=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"),userAccessName="",role="";function EmptyFile(){$("#grid-nodata-validation").css("display","block")}function editUser(e){var t=e,n=($("#user_name").val(t.UserName),$("#user_email").val(t.Email),new Date(parseInt(t.ModifiedDate.substring(6,t.ModifiedDate.length-2)))),i=DateCustomFormat(window.dateFormat+" hh:mm:ss",n);i+=12<=n.getHours()?" PM":" AM",$("#LastModified").html(i),$("#user-profile-picture").attr("src",avatarUrl+"?Username="+t.UserName+"&ImageSize=150"),$("#upload-picture").attr("data-filename",t.Picture.replace("Content//images//profilepictures//"+t.UserName+"//","")),null!=e.FirstName&&""!=e.FirstName?$("#user_firstname").val(e.FirstName):$("#user_firstname").val(t.FullName),null!=e.LastName&&""!=e.LastName&&$("#user_lastname").val(e.LastName),null!=e.Contact&&""!=e.Contact&&$("#contact_no").val(e.Contact)}function fnOnUserGridLoad(e){e.model.dataSource.adaptor=new ej.UrlAdaptor,e.model.enableTouch=!1}function fnbeforeDataBound(e){0!=e.count||e.actual.status||WarningAlert(window.Server.App.LocalizationContent.Users,window.Server.App.LocalizationContent.FailedToGetUsers,e.result,7e3)}function fnOnUserRowSelected(e){var t=document.getElementById("user_grid").ej2_instances[0],n=t.getSelectedRecords();(1==t.getSelectedRecords().length||1<t.getSelectedRecords().length)&&(n.some(e=>"Admin"==e.Role)?$("#assign-user-role-button").attr("disabled",!0):$("#assign-user-role-button").attr("disabled",!1)),1==t.getSelectedRecords().length||1<t.getSelectedRecords().length?$("#grant-user-button").attr("disabled",!1):$("#grant-user-button, #assign-user-role-button").attr("disabled",!0)}function fnUserRowSelected(e){var t=document.getElementById("user_grid").ej2_instances[0],n=t.getSelectedRecords(),i=$(".user-delete-button").attr("data-log-user").toLowerCase();1==t.getSelectedRecords().length?jQuery.each(n,function(e,t){t.Email.toLowerCase()==i?$(".user-delete-button").css("display","none"):($(".user-delete-button").css("display","block"),$("#grant-user-button").css("disabled",!0))}):1<t.getSelectedRecords().length&&($(".user-delete-button").css("display","block"),jQuery.each(n,function(e,t){if(t.Email.toLowerCase()==i)return $(".user-delete-button").css("display","block"),$("#grant-user-button").css("disabled",!1),!1}))}function fnUserRecordClick(e){e=e.row.find(".userList-grid-chkbx");e.prop("checked",!e.prop("checked"))}function fnOnUserGridActionBegin(e){isFirstRequest=!0;var t=$("#search-users").val();0<this.properties.query.params.length&&(this.properties.query.params=[]),this.properties.query.params.push({key:"searchKey",value:t})}function fnOnUserGridActionComplete(e){$('[data-toggle="tooltip"]').tooltip(),0==e.currentViewData.length&&rowBound()}function rowBound(){isFirstRequest=isFirstRequest&&!1}function MakeFlyDeleteUsers(){showWaitingPopup("user-delete-confirmation");var n="",e=document.getElementById("user_grid").ej2_instances[0].getSelectedRecords(),i=(e.length,0);jQuery.each(e,function(e,t){t.Email.toLowerCase()!=$(".user-delete-button").attr("data-log-user").toLowerCase()&&(i+=1,n=""==n?t.UserName:n+","+t.UserName)}),doAjaxPost("POST",deleteFromUserListUrl,"Users="+n,function(t){t.status?(hideWaitingPopup("user-delete-confirmation"),parent.messageBox("su-open",window.Server.App.LocalizationContent.DeleteUsers,window.Server.App.LocalizationContent.UsersDeleted,"success",function(){var e=parent.$("#user-count-text").val(),e=parseInt(e)-i;parent.$("#user-count").html(e),parent.$("#user-count-text").val(e),hideExternalUserIndication(t.ExternalUser),parent.onCloseMessageBox()}),$("#user-delete-confirmation").ejDialog("close"),onConfirmDeleteUser(e.length)):(hideWaitingPopup("user-delete-confirmation"),parent.messageBox("su-open",window.Server.App.LocalizationContent.DeleteUsers,window.Server.App.LocalizationContent.UsersDeleteFailed,"success",function(){$("#user-delete-confirmation").ejDialog("close"),parent.onCloseMessageBox()}))},function(){hideWaitingPopup("user-delete-confirmation"),parent.messageBox("su-open",window.Server.App.LocalizationContent.DeleteUsers,window.Server.App.LocalizationContent.UsersDeleteFailed,"error",function(){$("#user-delete-confirmation").ejDialog("close"),parent.onCloseMessageBox()})})}function onConfirmDeleteUser(e){var t=document.getElementById("user_grid").ej2_instances[0],n=t.pageSettings.currentPage,i=(t.pageSettings.pageSize,t.pageSettings.totalRecordsCount,t.pageSettings.totalRecordsCount%t.pageSettings.pageSize);0!=i&&i<=e&&(t.pageSettings.currentPage=n-1),t.refresh()}function returntoUserPage(){window.location.href=userPageUrl}function CloseGroup(){parent.$("#popup-container,.modal-backdrop").text(""),parent.$(".modal,.modal-backdrop").css("display","none")}function onAddTenantsDialogOpen(){var e;document.getElementById("grant-access-dialog").ej2_instances[0].show(),null==document.getElementById("add_tenants_grid").ej2_instances&&(e=new ejs.data.DataManager({url:getItemsUrl+"?includeActiveSites=true",adaptor:new ejs.data.UrlAdaptor,crossDomain:!0}),new ejs.grids.Grid({dataSource:e,gridLines:"None",allowPaging:!0,allowSorting:!0,allowSelection:!0,selectionSettings:{type:"Multiple"},pageSettings:{pageSize:20},rowSelecting:function(e){this.multiSelectCtrlRequest=!0},load:fnOnApplicationGridLoad,created:fnCreate,actionBegin:fnOnApplicationGridActionBegin,actionComplete:fnOnApplicationGridActionComplete,enableHover:!0,enableAltRow:!1,rowDataBound:function(){null!=$(".e-gridcontent").height()&&rowBound()},dataBound:function(e){$('[data-toggle="tooltip"]').tooltip({container:"#grant-access-dialog"})},columns:[{headerTemplate:"#admin-checkbox-header-template",template:"#admin-checkbox-row-template",width:20,allowFiltering:!1},{allowFiltering:!1,allowSorting:!0,template:"#application-name-template",headerText:"Application Name",width:130,headerTemplate:"#applicationname-header",field:"TenantName",type:"string"},{allowFiltering:!1,template:"#application-url-template",headerText:"Application URL",width:150,headerTemplate:"#application-url-header",field:"DNS",type:"string"},{template:"#application-tenant-template",headerTemplate:"#application-tenant-header",width:110,field:"TenantType",type:"string"}]}).appendTo("#add_tenants_grid")),$(".provide-access-button").attr("disabled","diasabled")}function fnCreate(){$("#admin-checkbox-header").change(headCheckboxOnChange)}function refreshTemplate(){$("#admin-checkbox-header").change(headCheckboxOnChange)}function headCheckboxOnChange(){var e=document.getElementById("add_tenants_grid").ej2_instances[0];if(gridUserData=e.currentViewData,1==$("#admin-checkbox-header").prop("checked")){$(".checkbox-row").prop("checked",!0),e.multiSelectCtrlRequest=!0,e.selectRowsByRange(0,$(".checkbox-row").length);for(var t=0;t<gridUserData.length;t++)-1==(n=jQuery.inArray(JSON.stringify(gridUserData[t].Id),$.map(selectedTenants,JSON.stringify)))&&selectedTenants.push(gridUserData[t].Id);isSafari&&$(".checkbox-header-label").addClass("check")}else{$(".checkbox-row").prop("checked",!1),e.clearSelection();for(var n,t=0;t<gridUserData.length;t++)-1!=(n=jQuery.inArray(JSON.stringify(gridUserData[t].Id),$.map(selectedTenants,JSON.stringify)))&&selectedTenants.splice(n,1);isSafari&&$(".admin-checkbox-header-label").removeClass("check")}enableAccessButton()}function fnOnApplicationGridLoad(e){isFirstRequest=!0;var t=$("#add-tenant-search").val();0<this.properties.query.params.length&&(this.properties.query.params=[]),this.properties.query.params.push({key:"searchKey",value:t})}function fnOnApplicationGridActionBegin(e){isFirstRequest=!0;var t=$("#add-tenant-search").val();0<this.properties.query.params.length&&(this.properties.query.params=[]),this.properties.query.params.push({key:"searchKey",value:t})}function fnOnApplicationGridActionComplete(e){var t=document.getElementById("add_tenants_grid").ej2_instances[0],n=$("#admin-checkbox-header");$(".checkbox-row");if(n.prop("disabled",!0).change(headCheckboxOnChange),t.multiSelectCtrlRequest=!0,t.clearSelection(),"paging"===e.requestType||"sorting"===e.requestType){if(void 0!==t.currentViewData)for(var i=0;i<t.currentViewData.length;i++){var s=t.currentViewData[i],r=s.Id;-1!=jQuery.inArray(JSON.stringify(s.Id),$.map(selectedTenants,JSON.stringify))&&(s=$($("#add_tenants_grid .checkbox-row[data-checked-id='"+r+"']").closest("td").parent()).index(),$("#add_tenants_grid .checkbox-row#admin-row-check"+r).prop("checked",!0),t.selectionModule.selectRow(s))}n.attr("disabled",0==t.currentViewData.length)}"refresh"!=e.requestType&&"filtering"!=e.requestType||(selectedTenants=[],n.attr("disabled",0==t.currentViewData.length)),"paging"!==e.requestType&&"sorting"!==e.requestType&&"refresh"!==e.requestType&&"filtering"!==e.requestType||(t.selectionModule.selectedRecords.length==t.currentViewData.length?n.prop("checked",!0):n.prop("checked",!1)),enableAccessButton(),$('[data-toggle="tooltip"]').tooltip()}function enableAccessButton(){$(".provide-access-button").attr("disabled",0===selectedTenants.length)}function onAddTenantsDialogClose(){var e=document.getElementById("add_tenants_grid").ej2_instances[0];document.getElementById("user_grid").ej2_instances[0].clearSelection(),e.clearSelection(),e.refresh(),document.getElementById("grant-access-dialog").ej2_instances[0].hide(),$("#add-tenant-search").val(""),$("#add-user-search-area").find("span.su.su-inner-close.close-icon").css("display","none"),$("#add-user-search-area").find("span.su.su-search.search-icon").css("display","block")}function provideAccesstoTenants(){var n,t,e;0<selectedTenants.length&&(n="",e=(t=document.getElementById("user_grid").ej2_instances[0]).getSelectedRecords(),jQuery.each(e,function(e,t){""!=t.UserId.toLowerCase()&&(n=""==n?t.UserId:n+","+t.UserId)}),e={User:n,Tenant:selectedTenants.toString()},$("#grant-access-dialog").children(".e-spinner-pane").addClass("e-spin-show").addClass("e-spinner-bg").removeClass("e-spin-hide"),$.ajax({type:"POST",url:grantAccessUrl,data:e,success:function(e){$("#grant-access-dialog").children(".e-spinner-pane").removeClass("e-spin-show").removeClass("e-spinner-bg").addClass("e-spin-hide"),$(".provide-access-button").attr("disabled","disabled"),document.getElementById("add_tenants_grid").ej2_instances[0].refresh(),onAddTenantsDialogClose(),t.clearSelection(),onTenantsReportDialogOpen(),userAccessName=e.fileName,$("#total-count").html(e.TenantsCount*e.UsersCount),$("#success-count").html(e.SuccessCount),$("#skip-count").html(e.SkipCount),$("#fail-count").html(e.FailCount),$("#status").html(e.Status),"Success"==e.Status?$(".status-description").html("was successful. "):"Failed"==e.Status?$(".status-description").html("failed. "):$(".status-description").html("was a partial success. ")}}))}function onTenantsReportDialogOpen(){document.getElementById("add-tenants-report-dialog").ej2_instances[0].show()}function onTenantsReportDialogClose(){document.getElementById("add-tenants-report-dialog").ej2_instances[0].hide()}function onDeleteDialogClose(){$("#user-delete-confirmation").ejDialog("close")}function onDeleteDialogOpen(){$("#user-delete-confirmation").ejDialog("open"),$("#user-delete-confirmation").focus()}function onSingleDeleteDialogOpen(){$("#singleuser-delete-confirmation").find("button.e-primary").addClass("critical-action-button"),document.getElementById("singleuser-delete-confirmation").ej2_instances[0].show()}function onSingleDeleteDialogClose(){document.getElementById("singleuser-delete-confirmation").ej2_instances[0].hide()}function checkUserImported(e){var t=$("#user_import_grid").data("ejGrid");return!(void 0!==t&&0<t.getRows().length&&($("#messageBox_wrapper, .e-dialog-scroller, #messageBox").removeClass("failed-msg-box-height").addClass("msg-box-height"),$(".message-content").removeClass("text-center"),messageBox("su-single-user",window.Server.App.LocalizationContent.ImportFromCSV,window.Server.App.LocalizationContent.UserImportIncomplete,"error",function(){parent.onCloseMessageBox(),window.location.href=$(e).attr("href")},function(){return parent.onCloseMessageBox(),!1}),1))}function SaveUserListFromCSV(){$(".user-import-validation").hide(),$("#grid-validation").css("display","none"),showWaitingPopup("content-area");for(var e=$("#all-user-list").val(),t="",n="",i=0;i<$("td.user-name").length;i++)""==t?(t=$("td.user-name")[i].textContent,isEmailRequired&&(n=$("td.email-id")[i].textContent)):(t=t+","+$("td.user-name")[i].textContent,isEmailRequired&&(n=n+","+$("td.email-id")[i].textContent));var s="",s=isEmailRequired?"&userNames="+t+"&emailIds="+n+"&AllUSerList="+e:"&userNames="+t+"&AllUSerList="+e;$.ajax({type:"POST",url:saveSelectedCSVUserUrl,data:s,success:function(e){if("true"==e.Status.toString().toLowerCase())if("object"==$.type(e)&&0!=e.Data.length){document.getElementById("user_import_grid").ej2_instances[0].showColumns("Error");for(var t=$("td.user-name"),n=0;n<e.Data.length;n++)e.Data[n].IsExist||""==e.Data[n].DisplayMessage||$(t[n]).siblings(":last").html("<ol>"+e.Data[n].DisplayMessage+"</ol>");$('[data-toggle="tooltip"]').tooltip(),hideWaitingPopup("content-area"),$("#messageBox_wrapper, .e-dialog-scroller, #messageBox").removeClass("failed-msg-box-height").addClass("msg-box-height"),$(".message-content").addClass("text-center"),messageBox("su-single-user",window.Server.App.LocalizationContent.ImportFromCSV,window.Server.App.LocalizationContent.DuplicateOrInvalidData,"success",function(){parent.onCloseMessageBox()}),$("#import-button").attr("disabled","disabled")}else{$(".import-file #user-import-validation-msg").css("display","none");document.getElementById("user_import_grid").ej2_instances[0].dataSource=[];var i=0==e.activation?" "+window.Server.App.LocalizationContent.UsersHasAddedActivated:" "+window.Server.App.LocalizationContent.UsersHasAdded;$("#messageBox_wrapper, .e-dialog-scroller, #messageBox").removeClass("failed-msg-box-height").addClass("msg-box-height"),$(".message-content").addClass("text-center"),messageBox("su-single-user",window.Server.App.LocalizationContent.ImportFromCSV,e.Count+i,"success",function(){parent.onCloseMessageBox(),window.location.href=userPageUrl}),$("#import-button").attr("disabled","disabled"),hideWaitingPopup("content-area")}else $("#messageBox_wrapper, .e-dialog-scroller, #messageBox").removeClass("msg-box-height").addClass("failed-msg-box-height"),$(".message-content").addClass("text-center"),messageBox("su-single-user",window.Server.App.LocalizationContent.ImportFromCSV,e.Message,"success",function(){parent.onCloseMessageBox()}),hideWaitingPopup("content-area")}})}function deleteSingleUser(){showWaitingPopup("singleuser-delete-confirmation");var e=$(".is-delete").attr("data-content");doAjaxPost("POST",deleteSingleFromUserListUrl,"UserId="+e,function(e){var t;e.status?(t=parent.$("#user-count-text").val(),t=parseInt(t)-1,parent.$("#user-count").html(t),parent.$("#user-count-text").val(t),hideExternalUserIndication(e.ExternalUser),SuccessAlert(window.Server.App.LocalizationContent.DeleteUser,window.Server.App.LocalizationContent.UserHasDeleted,7e3),onConfirmDeleteUser("1"),hideWaitingPopup("singleuser-delete-confirmation")):WarningAlert(window.Server.App.LocalizationContent.DeleteUser,window.Server.App.LocalizationContent.FailedToDeleteUser,e.Message,7e3),onSingleDeleteDialogClose()})}function hideExternalUserIndication(e){e.HasAdUsers||$("#ad-indication").html(""),e.HasAzureAdUsers||$("#azure-ad-indication").html(""),e.HasDatabaseUsers||$("#database-indication").html(""),e.HasOAuthUsers||$("#oauth-indication").html(""),e.HasOpenIdUsers||$("#openid-indication").html(""),e.HasJwtSsoUsers||$("#jwt-indication").html(""),e.HasAzureAdB2CUsers||$("#azureadb2c-indication").html("")}function onMakeAdminDialogOpen(){document.getElementById("make-admin-confirmation").ej2_instances[0].show()}function onMakeMultipleAdminDialogOpen(){document.getElementById("multiple-admin-confirmation").ej2_instances[0].show()}function onRemoveAdminDialogOpen(){document.getElementById("remove-admin-confirmation").ej2_instances[0].show()}function onMakeAdminDialogClose(){document.getElementById("make-admin-confirmation").ej2_instances[0].hide()}function onRefreshUserGrid(){document.getElementById("user_grid").ej2_instances[0].clearSelection(),$("#grant-user-button, #assign-user-role-button").attr("disabled",!0)}function onRemoveAdminDialogClose(){document.getElementById("remove-admin-confirmation").ej2_instances[0].hide()}function onMultipleAdminDialogClose(){document.getElementById("multiple-admin-confirmation").ej2_instances[0].hide()}function MakeSingleUserAdmin(){var e=$(".make-admin").attr("data-content"),t=document.getElementById("user_grid").ej2_instances[0];showWaitingPopup("make-admin-confirmation"),$.ajax({type:"POST",url:makeAdminUrl,data:"&users="+e,success:function(e){e.Status?SuccessAlert(window.Server.App.LocalizationContent.AssignRole,window.Server.App.LocalizationContent.MakeAdmin,7e3):WarningAlert(window.Server.App.LocalizationContent.AssignRole,window.Server.App.LocalizationContent.MakeAdminError,e.Message,7e3),t.refresh(),$("#grant-user-button, #assign-user-role-button").attr("disabled",!0),hideWaitingPopup("make-admin-confirmation"),onMakeAdminDialogClose()}})}function MakeMultipleUserAdmin(){var t=document.getElementById("user_grid").ej2_instances[0],n="",e=t.getSelectedRecords();1<e.length&&(SingleOrMultiple="s"),jQuery.each(e,function(e,t){""!=t.UserId.toLowerCase()&&(n=""==n?t.UserId:n+","+t.UserId)}),showWaitingPopup("multiple-admin-confirmation"),$.ajax({type:"POST",url:makeAdminUrl,data:"&users="+n,success:function(e){e.Status?SuccessAlert(window.Server.App.LocalizationContent.AssignRole,window.Server.App.LocalizationContent.MakeAdmin,7e3):WarningAlert(window.Server.App.LocalizationContent.AssignRole,window.Server.App.LocalizationContent.MakeAdminError,e.Message,7e3),t.refresh(),t.clearSelection(),$("#grant-user-button, #assign-user-role-button").attr("disabled",!0),hideWaitingPopup("multiple-admin-confirmation"),onMultipleAdminDialogClose()}})}function removeAdmin(){var e=$(".remove-admin").attr("data-content"),t=document.getElementById("user_grid").ej2_instances[0];showWaitingPopup("remove-admin-confirmation"),$.ajax({type:"POST",url:removeAdminUrl,data:{userId:e},success:function(e){e.Status?SuccessAlert(window.Server.App.LocalizationContent.RemoveRole,window.Server.App.LocalizationContent.RemoveAdmin,7e3):WarningAlert(window.Server.App.LocalizationContent.RemoveRole,window.Server.App.LocalizationContent.RemoveAdminError,e.Message,7e3),t.refresh(),hideWaitingPopup("remove-admin-confirmation"),document.getElementById("remove-admin-confirmation").ej2_instances[0].hide()}})}function roleFilter(){$("#admin-checkbox").is(":checked")?role="Admin":$("#nonadmin-checkbox").is(":checked")&&(role="NonAdmin"),showWaitingPopup("user_grid");var e=document.getElementById("user_grid").ej2_instances[0];$(".role-filter").removeClass("show"),$(".role-filter").addClass("hide"),$("#role-filter-option").closest("span").children(".e-filtericon").addClass("e-filteredicon").addClass("e-filternone"),e.refresh(),hideWaitingPopup("user_grid")}function resetFilter(){showWaitingPopup("user_grid"),role="";var e=document.getElementById("user_grid").ej2_instances[0];$("input[name=filter]").attr("checked",!1),$(".role-filter").removeClass("show"),$(".role-filter").addClass("hide"),$("#role-filter-option").closest("span").children(".e-filtericon").removeClass("e-filteredicon").removeClass("e-filternone"),e.refresh(),hideWaitingPopup("user_grid")}function unLockUser(){var e=null==(e=$(".unlock-user-id").attr("data-content"))?document.getElementById("user-id").value:e,t=(showWaitingPopup("unlock-user-confirmation"),null===document.getElementById("user_grid")?null:document.getElementById("user_grid").ej2_instances[0]);unlockUser(e)?null===t?(hideWaitingPopup("unlock-user-confirmation"),onUserUnlockDialogClose(),window.location.reload()):(SuccessAlert(window.Server.App.LocalizationContent.UnlockUser,window.Server.App.LocalizationContent.UserUnlocked,7e3),t.refresh(),onUserUnlockDialogClose(),hideWaitingPopup("unlock-user-confirmation")):null===t?(hideWaitingPopup("unlock-user-confirmation"),onUserUnlockDialogClose(),window.location.reload()):(WarningAlert(window.Server.App.LocalizationContent.UnlockUser,window.Server.App.LocalizationContent.UserUnlockedError,null,7e3),t.refresh(),onUserUnlockDialogClose(),hideWaitingPopup("unlock-user-confirmation"))}function onUserUnlockDialogOpen(){document.getElementById("unlock-user-confirmation").ej2_instances[0].show()}function onUserUnlockDialogClose(){document.getElementById("unlock-user-confirmation").ej2_instances[0].hide()}function unlockUser(e){var t=!1;return $.ajax({type:"POST",url:unlockUserUrl,async:!1,data:{userId:e},success:function(e){t=e.Status}}),t}function CheckMailSettingsAndNotify(t,n,i){$.ajax({type:"POST",url:checkMailSettingUrl,success:function(e){e.result||0==e.activation?void 0!==n&&n.html("<span class='SuccessMessage'>"+i+"</span>"):e.result||1!=e.isAdmin||1!=e.activation||void 0!==n&&n.html("<span class='alert alert-danger'>"+t+"</span>")}})}function ValidateMailSettingsAndShowToast(t,n,i){$.ajax({type:"POST",url:checkMailSettingUrl,success:function(e){e.result||0==e.activation?void 0!==n&&SuccessAlert("Activate User",i,7e3):e.result||1!=e.isAdmin||1!=e.activation||void 0!==n&&n.html("<span class='alert alert-danger'>"+t+"</span>")}})}function onUserAddDialogClose(){document.getElementById("user-add-dialog").ej2_instances[0].hide(),$(".form input[type='text']").val(""),$("#password_policy_rules").remove(),$("#dialog-container").find("div").removeClass("e-error")}function onUserAddDialogOpen(){$("#add-user").removeAttr("disabled"),$(".dropdown").removeClass("open"),document.getElementById("user-add-dialog").ej2_instances[0].show(),$("#new-password").val(""),$(".show-hide-password").removeClass("su-hide").addClass("su-show"),$(".e-dialog-icon").attr("title","Close"),$(".validation").closest("div").removeClass("has-error"),$(".useradd-validation-messages").css("display","none"),$("#dialog-container").find("div").removeClass("e-error"),CheckMailSettingsAndNotify(window.Server.App.LocalizationContent.ToSendAccountActivation,$(".validation-message"),"")}$(document).ready(function(){$("#grant-user-button").on("click",onAddTenantsDialogOpen),$("#assign-user-role-button").on("click",onMakeMultipleAdminDialogOpen);addPlacehoder("#search-area"),createWaitingPopup("user_grid"),createWaitingPopup("user-add-dialog"),createWaitingPopup("movable-dialog"),createWaitingPopup("user-delete-confirmation"),createWaitingPopup("grant-access-dialog"),createWaitingPopup("make-admin-confirmation"),createWaitingPopup("multiple-admin-confirmation"),createWaitingPopup("remove-admin-confirmation"),createWaitingPopup("singleuser-delete-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.DeleteUser,content:document.getElementById("singleuser-delete-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:deleteSingleUser,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onSingleDeleteDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,animationSettings:{effect:"Zoom"},visible:!1}).appendTo("#singleuser-delete-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.AssignRole,content:document.getElementById("make-admin-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:MakeSingleUserAdmin,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onMakeAdminDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"},close:"onRefreshUserGrid"}).appendTo("#make-admin-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.AssignRole,content:document.getElementById("multiple-admin-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:MakeMultipleUserAdmin,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onMultipleAdminDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"},close:"onRefreshUserGrid"}).appendTo("#multiple-admin-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.RemoveRole,content:document.getElementById("remove-admin-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:removeAdmin,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onRemoveAdminDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"},close:"onRefreshUserGrid"}).appendTo("#remove-admin-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.GrantSiteAcessHeaderTitle,content:document.getElementById("add-tenants-dialog-content"),showCloseIcon:!0,close:onAddTenantsDialogClose,buttons:[{click:onAddTenantsDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.CancelButton}},{click:provideAccesstoTenants,buttonModel:{content:window.Server.App.LocalizationContent.GrantSiteAccessButton,isPrimary:!0,cssClass:"provide-access-button"}}],width:"900px",height:"539px",isModal:!0,closeOnEscape:!0,animationSettings:{effect:"Zoom"},visible:!1}).appendTo("#grant-access-dialog"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.ManageUserAccess,content:document.getElementById("add-tenants-report-dialog-content"),showCloseIcon:!0,buttons:[{click:onTenantsReportDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.OKButton}}],width:"900px",height:"300px",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"},closeOnEscape:!0,close:"onRefreshUserGrid"}).appendTo("#add-tenants-report-dialog"),$(document).ready(function(){null!=document.getElementById("existing-user-count")&&"true"==$("#existing-user-count").attr("data-value").toLowerCase()&&"error"!=$("#csv-file-error").attr("data-value").toLowerCase()&&(parent.messageBox("su-single-user",window.Server.App.LocalizationContent.ImportFromCSV,window.Server.App.LocalizationContent.NoDataInUploadedFile,"success",function(){parent.onCloseMessageBox()}),$("#import-button").attr("disabled","disabled"))}),$(".user-delete-button").on("click",function(){$("#user-delete-confirmation").ejDialog("open")}),$(document).on("click","input#add-user",function(){var i,t,e=$("#firstname").val().trim(),n=$("#username").val().trim().toLowerCase(),s=$("#new-password").val(),r=$("#dialog-container").valid(),a=$("#mailid").val().trim();$(".popover").hide(),r?($(".useradd-validation-messages").css("display","none"),i=document.getElementById("user_grid").ej2_instances[0],showWaitingPopup("user-add-dialog"),r=$("#lastname").val().trim(),t={UserName:n,Email:a.toLowerCase(),FirstName:e,LastName:r,Password:s},$.ajax({type:"POST",url:isPresentUserNameAndEmailId,data:{userName:n,emailId:a.toLowerCase()},success:function(e){e.IsUserNameExist||e.IsEmailExist?(e.IsUserNameExist&&($("#username").closest("div").addClass("has-error"),$("#invalid-username").html(window.Server.App.LocalizationContent.UsernameExists).css("display","block"),$(".useradd-validation-messages").css("display","block"),hideWaitingPopup("user-add-dialog")),e.IsEmailExist&&($("#mailid").closest("div").addClass("has-error"),$("#invalid-email").html(window.Server.App.LocalizationContent.EmailAddressExists).css("display","block"),$(".useradd-validation-messages").css("display","block"),hideWaitingPopup("user-add-dialog"))):$.ajax({type:"POST",url:postactionUrl,data:t,success:function(e,t){var n;"object"==$.type(e)&&("success"==e.Data.result?(hideWaitingPopup("user-add-dialog"),$("#add-user").attr("disabled","disabled"),$("#create-user").removeClass("hide").addClass("show"),$(".form input[type='text']").val(""),n=parent.$("#user-count-text").val(),n=parseInt(n)+1,parent.$("#user-count").html(n),parent.$("#user-count-text").val(n),onUserAddDialogClose(),$.ajax({type:"POST",url:checkMailSettingUrl,success:function(e){0==e.activation?SuccessAlert(window.Server.App.LocalizationContent.AddUser,window.Server.App.LocalizationContent.UserAddedActivated,7e3):e.result&&1==e.activation?SuccessAlert(window.Server.App.LocalizationContent.AddUser,window.Server.App.LocalizationContent.UserAdded,7e3):e.result||1!=e.isAdmin||1!=e.activation||WarningAlert(window.Server.App.LocalizationContent.AddUser,window.Server.App.LocalizationContent.UserActivationEmailCannotSent,null,7e3),i.refresh()}})):e.IsUserLimitExceed?(hideWaitingPopup("user-add-dialog"),$("#limit-user").ejDialog("open"),$("#zero-user-acc").show()):(WarningAlert(window.Server.App.LocalizationContent.AddUser,window.Server.App.LocalizationContent.InternalServerErrorTryAgain,e.Message,7e3),i.refresh()),onUserAddDialogClose())}})}})):$(".useradd-validation-messages").css("display","block")}),$(document).on("click","#cancel-addgroup-button,#group-close-button",function(){parent.$(".modal[data-dialog='add-users-in-group'], .modal-backdrop, #user-add-dialog-wrapper").remove()}),$(document).on("keyup",function(e){return 27==e.keyCode&&parent.$(".modal[data-dialog='add-users-in-group'], .modal-backdrop, #user-add-dialog-wrapper").remove(),!(13==e.keyCode&&"none"==$("#new-group").css("display")||13==e.keyCode&&"none"==$("#existing-group").css("display"))&&void 0}),$(document).on("keydown",function(e){return!(13==e.keyCode&&"none"==$("#new-group").css("display")||13==e.keyCode&&"none"==$("#existing-group").css("display"))&&void 0}),$("#user-delete-confirmation-wrapper,#user-delete-confirmation-overLay").keyup(function(e){13==e.keyCode&&MakeFlyDeleteUsers()}),$(document).on("click","#assign-user-role-button",function(){document.getElementById("multiple-admin-confirmation").ej2_instances[0].show()}),$(document).on("click",".css-radio",function(){$(this).siblings("label").removeClass("notransition")}),$(document).on("click","#role-filter-option",function(){$(".role-filter").removeClass("hide"),$(".role-filter").addClass("show")}),$(document).on("click","div.e-filterset",function(){$(".role-filter").removeClass("show"),$(".role-filter").addClass("hide")}),$(document).on("click",".make-admin-button",function(){MakeSingleUserAdmin()}),$(document).on("click",".makemultiple-admin-button",function(){MakeMultipleUserAdmin()}),$(document).on("click",".remove-admin-button",function(){removeAdmin()})}),$(document).on("click",".single-delete",function(){deleteSingleUser()}),$(document).on("click",".multiple-delete",function(){MakeFlyDeleteUsers()}),$(document).on("change",".checkbox-row",function(){var e=$(".checkbox-row").index(this),t=$(this).is(":checked"),n=document.getElementById("add_tenants_grid").ej2_instances[0],s=$("#admin-checkbox-header"),r=$(this).attr("data-id"),a=(t?(selectedTenants.push(r),previousIndex.push(e),n.selectionModule.selectRows(previousIndex,e)):(t=selectedTenants.indexOf(r),r=previousIndex.indexOf(e),selectedTenants.splice(t,1),previousIndex.splice(r,1),n.selectionModule.selectRows(previousIndex)),gridAdminData=n.currentViewData,0);for(i=0;i<=gridAdminData.length-1;i++)1==$($("#add_tenants_grid .checkbox-row")[i]).is(":checked")&&(a+=1);null!=n.getRows()&&s.prop("checked",gridAdminData.length===a),enableAccessButton()}),$(document).on("click",".report-download",function(){var t=userAccessName;$.ajax({type:"GET",url:window.baseRootUrl+"downloads/user_access/"+t,data:t,success:function(e){window.location=window.baseRootUrl+"downloads/user_access/"+t}})}),$(document).on("click",".option-icon",function(){var e=$(".user-delete-button").attr("data-log-user");$(this).attr("data-content")==e?$(".delete-class",".make-admin",".remove-admin").parent().css("display","none"):$(".delete-class",".make-admin",".remove-admin").parent().css("display","block")}),$(document).on("click","#trigger-file,#filename",function(){$("#filename").trigger("focus"),$("#grid-validation-messages span").css("display","none"),$("#csvfile").trigger("click")}),$(document).on("change","#csvfile",function(e){var t=$(this).val();"csv"!=$(this).val().substring($(this).val().lastIndexOf(".")+1)?($("#csv-upload").attr("disabled",!0),$("#filename").val(window.Server.App.LocalizationContent.CsvFileValidator),$("#filename,#trigger-file").addClass("validation-message"),$(".upload-box").addClass("e-error")):($("#csv-upload").attr("disabled",!1),$("#user-import-validation-msg").css("display","none"),$("#filename,#trigger-file").removeClass("validation-message"),$("#filename").val(t),$(".upload-box").removeClass("e-error"),$("#csvfile").attr("title",t))}),$(document).on("click",".search-user",function(){var e=document.getElementById("user_grid").ej2_instances[0];e.pageSettings.currentPage=1,e.refresh()}),$(document).on("click",".delete-class",function(){$(this).parent("li").addClass("is-delete"),onSingleDeleteDialogOpen()}),$(document).on("click",".make-admin-class",function(){$(this).parent("li").addClass("make-admin"),onMakeAdminDialogOpen()}),$(document).on("click",".remove-admin-class",function(){$(this).parent("li").addClass("remove-admin"),onRemoveAdminDialogOpen()}),$(document).on("click","#user-delete-dialog-close,#delete-dialog-close",function(){onDeleteDialogClose()()}),$(document).on("click","#import-button",SaveUserListFromCSV),$(document).ready(function(){new ej.popups.Dialog({header:window.Server.App.LocalizationContent.UnlockUser,content:document.getElementById("unlock-user-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:unLockUser,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onUserUnlockDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,animationSettings:{effect:"Zoom"},visible:!1}).appendTo("#unlock-user-confirmation"),createWaitingPopup("unlock-user-confirmation")}),$(document).on("click",".unlock-user-class",function(){$(this).parent("li").addClass("unlock-user-id"),onUserUnlockDialogOpen()}),$(document).on("click",".unlock-userclass",function(){unlockUser($(".unlock_user").attr("data-content")),window.location.reload()}),$(document).on("click","#unlock-user",function(){onUserUnlockDialogOpen()}),$(document).ready(function(){addPlacehoder("#user-add-dialog"),createWaitingPopup("user-add-dialog"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.AddUser,content:document.getElementById("dialog-container"),showCloseIcon:!0,width:"500px",height:"auto",isModal:!0,visible:!1,closeOnEscape:!0,animationSettings:{effect:"Zoom"},close:"onUserAddDialogClose"}).appendTo("#user-add-dialog"),$.validator.addMethod("isRequired",function(e,t){return!isEmptyOrWhitespace(e)},window.Server.App.LocalizationContent.EnterName),$.validator.addMethod("hasWhiteSpace",function(e,t){return!/\s/g.test(e)},window.Server.App.LocalizationContent.UserNameHasWhiteSpace),$.validator.addMethod("isValidUsername",function(e,t){return IsValidUsername(e)},window.Server.App.LocalizationContent.UserNameSpecialCharacterValicator),$.validator.addMethod("isValidUsernameLength",function(e,t){return IsValidUsernameLength(e)},window.Server.App.LocalizationContent.UsernameExceeds),$.validator.addMethod("isValidEmail",function(e,t){return""==e.trim()||IsEmail(e)},window.Server.App.LocalizationContent.InvalidEmailAddress),$.validator.addMethod("isValidName",function(e,t){return IsValidName("name",e)},window.Server.App.LocalizationContent.AvoidSpecailCharacters),$.validator.addMethod("additionalSpecialCharValidation",function(e,t){if(/^[a-zA-Z_0-9`'~!\$\^()=\-\.\{\}À-ÖØ-öø-ÿŒœŸÿ€ß ]+$/.test(e)||""===e)return!0},window.Server.App.LocalizationContent.AvoidSpecailCharacters),$("#dialog-container").validate({errorElement:"span",onkeyup:function(e,t){9!=t.keyCode&&(isKeyUp=!0,$(e).valid(),isKeyUp=!1)},onfocusout:function(e){$(e).valid()},rules:{"user-name":{isRequired:!0,isValidUsername:!0,isValidUsernameLength:!0},"email-address":{isRequired:{depends:function(){return!0===isEmailRequired}},isValidName:!0,isValidEmail:!0},"first-name":{isRequired:!0,isValidName:!0,additionalSpecialCharValidation:!0},"last-name":{isValidName:!0,additionalSpecialCharValidation:!0},"user-password":{isRequired:!0,isUserPasswordValid:!0}},highlight:function(e){$(e).closest("div").addClass("has-error"),passwordBoxHightlight(e)},unhighlight:function(e){passwordBoxUnhightlight(e),$(e).closest("div").removeClass("has-error"),$(e).closest("div").find("span.useradd-validation-messages").html("")},errorPlacement:function(e,t){$(t).closest("div").find("span.useradd-validation-messages").html(e.html()).css("display","block")},messages:{"email-address":{isRequired:window.Server.App.LocalizationContent.EmailValidator},"user-name":{isRequired:window.Server.App.LocalizationContent.UserNameValidator},"first-name":{isRequired:window.Server.App.LocalizationContent.FirstNameValidator},"user-password":{isRequired:window.Server.App.LocalizationContent.PasswordValidator}}}),$.validator.addMethod("isUserPasswordValid",function(e,t){var n=new Array;if(n.push(validateUserpassword.p_policy_uppercase),n.push(validateUserpassword.p_policy_lowercase),n.push(validateUserpassword.p_policy_number),n.push(validateUserpassword.p_policy_specialcharacter),n.push(validateUserpassword.p_policy_length),passwordPolicyPopover("#new-password",e),$("#password_policy_rules li>span.su-password-tick").length==$("#password_policy_rules li>span:not(.content)").length)return!0},""),$(document).on("keyup","#dialog-container",function(e){13==e.keyCode&&($("#cancel-user").is(":focus")?onUserAddDialogClose():$("#add-user").is(":focus")?e.preventDefault():$("input#add-user").trigger("click"))}),$(document).on("click","#create-user",function(){$("#add-user").removeAttr("disabled"),$(".form input[type='text']").val(""),document.getElementById("user_grid").ej2_instances[0].clearSelection(),$(".validation").closest("div").removeClass("has-error"),$(".useradd-validation-messages").css("display","none")}),$(document).on("keyup","#new-password",function(){passwordPolicyPopover("#new-password",$("#new-password").val()),$("#new-password").valid()})}),$(document).on("click","#create-user,#new-user-dropdown",function(){onUserAddDialogOpen()}),$(document).on("click","#cancel-user",function(){onUserAddDialogClose()});var validateUserpassword={p_policy_uppercase:function(e){this.name="p_policy_uppercase";if(/^(?=.*[A-Z]).+$/.test(e))return"p_policy_uppercase"},p_policy_lowercase:function(e){this.name="p_policy_lowercase";if(/^(?=.*[a-z]).+$/.test(e))return"p_policy_lowercase"},p_policy_number:function(e){this.name="p_policy_number";if(/^(?=.*\d).+$/.test(e))return"p_policy_number"},p_policy_specialcharacter:function(e){this.name="p_policy_specialcharacter";if(/^(?=.*(_|[^\w])).+$/.test(e))return"p_policy_specialcharacter"},p_policy_length:function(e){if(this.name="p_policy_length",e.length>=$('meta[name="password_policy:minlength"]').attr("content"))return"p_policy_length"}};function passwordBoxHightlight(e){var t="",n=($(e).closest("div").addClass("e-error"),"popover"===$("#new-password").data("toggle")),i=n?$("#password_policy_rules").find("li>span:not(.content)"):$("#password_policy_rules").find("li>span"),s=n?"su-password-tick":"su-tick";if("new-password"==$(e).attr("id")){for(var r=0;r<i.length;r++)$(i[r]).attr("class")==s?$(e).closest("div").removeClass("e-error"):t="unsatisfied-rule";""!=t&&null!=t&&$(e).closest("div").addClass("e-error")}}function passwordBoxUnhightlight(e){var t="",n=($(e).closest("div").removeClass("e-error"),"popover"===$("#new-password").data("toggle")),i=n?$("#password_policy_rules").find("li>span:not(.content)"):$("#password_policy_rules").find("li>span"),s=n?"su-password-tick":"su-tick";if("new-password"==$(e).attr("id")){for(var r=0;r<i.length;r++)$(i[r]).attr("class")!=s&&(t="unsatisfied-rule"),$(i[r]).attr("class")==s&&$(e).closest("div").removeClass("e-error");""!=t&&null!=t&&($(e).closest("div").addClass("e-error"),t="")}$(e).closest("div").find(".password-validate-holder").html("")}function passwordPolicyPopover(e,t){var n=$(e),i=(n.popover("show"),new Array);i.push(validateUserpassword.p_policy_uppercase),i.push(validateUserpassword.p_policy_lowercase),i.push(validateUserpassword.p_policy_number),i.push(validateUserpassword.p_policy_specialcharacter),i.push(validateUserpassword.p_policy_length),$.each(i,function(e){e=i[e];null!=(ruleName=e(t))&&""!=ruleName?n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").hasClass("su-password-tick")||n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").addClass("su-password-tick").removeClass("icon"):(ruleName=name,n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").hasClass("su-password-tick")&&n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").removeClass("su-password-tick").addClass("icon")),ruleName=""})}$.validator.addMethod("notSameAsCurrent",function(e,t){var n=$("input[name='current-password']").val();return this.optional(t)||e!==n},window.Server.App.LocalizationContent.PasswordSameAsCurrent),$.validator.addMethod("isValidPassword",function(e,t){var n=new Array;if(n.push(validateUserpassword.p_policy_uppercase),n.push(validateUserpassword.p_policy_lowercase),n.push(validateUserpassword.p_policy_number),n.push(validateUserpassword.p_policy_specialcharacter),n.push(validateUserpassword.p_policy_length),passwordPolicyPopover("#new-password",e),$("#password_policy_rules li>span.su-password-tick").length==$("#password_policy_rules li>span:not(.content)").length)return!0},""),$(function(){$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?($(this).siblings("input").attr("type","text").val(),$(this).removeClass("su-show").addClass("su-hide").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touchstart",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("touchend",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),window.innerWidth<1041&&$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("click",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show").addClass("su-hide").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touch",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show"),$(this).addClass("su-hide")):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide"),$(this).addClass("su-show"))})});