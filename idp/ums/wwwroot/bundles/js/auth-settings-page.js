function dropDownListInitialization(e,t,i){var n=new ejs.dropdowns.DropDownList({index:0,floatLabelType:"Never",placeholder:t,cssClass:"e-outline e-custom e-non-float",enablePersistence:!0,change:onDropDownListChange,query:new ej.data.Query,allowFiltering:i,filterType:"Contains",created:function(){"#response-type-dropdown"===e&&"undefined"!=typeof openIdResponseType?n.value=openIdResponseType:"#token-method-type"===e&&"undefined"!=typeof oauthTokenMethod?n.value=oauthTokenMethod:"#user-info-method-type"===e&&"undefined"!=typeof oauthUserInfoMethod&&(n.value=oauthUserInfoMethod)}});n.appendTo(e)}function onDropDownListChange(e){"enable-ssl"==e.element.id&&onBaseUrlChange(e),"fontfamily"==e.element.id&&onFontChange(),"application-theme"==e.element.id&&onApplicationThemeChange(),"mail-account"==e.element.id&&emailConfiguration(),"ai-providers"==e.element.id&&aiConfiguration()}function groupImportDropDownListInitialization(e,t){var i=new ejs.dropdowns.DropDownList({index:0,floatLabelType:"Never",placeholder:t,change:ongroupImportchange,cssClass:"e-outline e-custom e-non-float",enablePersistence:!0,created:function(){"#group-import-provider-oauth"===e&&"undefined"!=typeof oauthKnownProviderType?i.value=oauthKnownProviderType.toString():"#group-import-provider-openid"===e&&"undefined"!=typeof openIdKnownProviderType&&(i.value=openIdKnownProviderType.toString())}});i.appendTo(e)}function fontDropDownListInitialization(e,t,i,n){new ejs.dropdowns.DropDownList({index:0,floatLabelType:"Never",placeholder:t,change:onFontChange,cssClass:"e-outline e-custom e-non-float",enablePersistence:!0,query:new ej.data.Query,allowFiltering:i,filterType:"Contains"}).appendTo(e)}(e=>{"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)})(function(u){u.extend(u.fn,{validate:function(e){var n;if(this.length)return(n=u.data(this[0],"validator"))||(this.attr("novalidate","novalidate"),n=new u.validator(e,this[0]),u.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(e){n.submitButton=e.currentTarget,u(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==u(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(i){function e(){var e,t;return n.submitButton&&(n.settings.submitHandler||n.formSubmitted)&&(e=u("<input type='hidden'/>").attr("name",n.submitButton.name).val(u(n.submitButton).val()).appendTo(n.currentForm)),!(n.settings.submitHandler&&!n.settings.debug)||(t=n.settings.submitHandler.call(n,n.currentForm,i),e&&e.remove(),void 0!==t&&t)}return n.settings.debug&&i.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,e()):n.form()?n.pendingRequest?!(n.formSubmitted=!0):e():(n.focusInvalid(),!1)})),n);e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,t,i;return u(this[0]).is("form")?e=this.validate().form():(i=[],e=!0,t=u(this[0].form).validate(),this.each(function(){(e=t.element(this)&&e)||(i=i.concat(t.errorList))}),t.errorList=i),e},rules:function(e,t){var i,n,a,o,s,r=this[0],d=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=r&&(!r.form&&d&&(r.form=this.closest("form")[0],r.name=this.attr("name")),null!=r.form)){if(e)switch(i=u.data(r.form,"validator").settings,n=i.rules,a=u.validator.staticRules(r),e){case"add":u.extend(a,u.validator.normalizeRule(t)),delete a.messages,n[r.name]=a,t.messages&&(i.messages[r.name]=u.extend(i.messages[r.name],t.messages));break;case"remove":return t?(s={},u.each(t.split(/\s/),function(e,t){s[t]=a[t],delete a[t]}),s):(delete n[r.name],a)}return(d=u.validator.normalizeRules(u.extend({},u.validator.classRules(r),u.validator.attributeRules(r),u.validator.dataRules(r),u.validator.staticRules(r)),r)).required&&(o=d.required,delete d.required,d=u.extend({required:o},d)),d.remote&&(o=d.remote,delete d.remote,d=u.extend(d,{remote:o})),d}}});function t(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var i;u.extend(u.expr.pseudos||u.expr[":"],{blank:function(e){return!t(""+u(e).val())},filled:function(e){e=u(e).val();return null!==e&&!!t(""+e)},unchecked:function(e){return!u(e).prop("checked")}}),u.validator=function(e,t){this.settings=u.extend(!0,{},u.validator.defaults,e),this.currentForm=t,this.init()},u.validator.format=function(i,e){return 1===arguments.length?function(){var e=u.makeArray(arguments);return e.unshift(i),u.validator.format.apply(this,e)}:(void 0===e||((e=2<arguments.length&&e.constructor!==Array?u.makeArray(arguments).slice(1):e).constructor!==Array&&(e=[e]),u.each(e,function(e,t){i=i.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})})),i)},u.extend(u.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:u([]),errorLabelContainer:u([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==u.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,i){("radio"===e.type?this.findByName(e.name):u(e)).addClass(t).removeClass(i)},unhighlight:function(e,t,i){("radio"===e.type?this.findByName(e.name):u(e)).removeClass(t).addClass(i)}},setDefaults:function(e){u.extend(u.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:u.validator.format("Please enter no more than {0} characters."),minlength:u.validator.format("Please enter at least {0} characters."),rangelength:u.validator.format("Please enter a value between {0} and {1} characters long."),range:u.validator.format("Please enter a value between {0} and {1}."),max:u.validator.format("Please enter a value less than or equal to {0}."),min:u.validator.format("Please enter a value greater than or equal to {0}."),step:u.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var t,i,n=void 0!==u(this).attr("contenteditable")&&"false"!==u(this).attr("contenteditable");!this.form&&n&&(this.form=u(this).closest("form")[0],this.name=u(this).attr("name")),a===this.form&&(n=u.data(this.form,"validator"),t="on"+e.type.replace(/^validate/,""),(i=n.settings)[t])&&!u(this).is(i.ignore)&&i[t].call(n,this,e)}this.labelContainer=u(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||u(this.currentForm),this.containers=u(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,a=this.currentForm,n=this.groups={};u.each(this.settings.groups,function(i,e){"string"==typeof e&&(e=e.split(/\s/)),u.each(e,function(e,t){n[t]=i})}),i=this.settings.rules,u.each(i,function(e,t){i[e]=u.validator.normalizeRule(t)}),u(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&u(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),u.extend(this.submitted,this.errorMap),this.invalid=u.extend({},this.errorMap),this.valid()||u(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t,i,n=this.clean(e),a=this.validationTargetFor(n),o=this,s=!0;return void 0===a?delete this.invalid[n.name]:(this.prepareElement(a),this.currentElements=u(a),(i=this.groups[a.name])&&u.each(this.groups,function(e,t){t===i&&e!==a.name&&(n=o.validationTargetFor(o.clean(o.findByName(e))))&&n.name in o.invalid&&(o.currentElements.push(n),s=o.check(n)&&s)}),t=!1!==this.check(a),s=s&&t,this.invalid[a.name]=!t,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),u(e).attr("aria-invalid",!t)),s},showErrors:function(t){var i;t&&(u.extend((i=this).errorMap,t),this.errorList=u.map(this.errorMap,function(e,t){return{message:e,element:i.findByName(t)[0]}}),this.successList=u.grep(this.successList,function(e){return!(e.name in t)})),this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){u.fn.resetForm&&u(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)null!=e[t]&&!1!==e[t]&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{u(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===u.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var i=this,n={};return u(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var e=this.name||u(this).attr("name"),t=void 0!==u(this).attr("contenteditable")&&"false"!==u(this).attr("contenteditable");return!e&&i.settings.debug&&window.console&&console.error("%o has no name assigned",this),t&&(this.form=u(this).closest("form")[0],this.name=e),!(this.form!==i.currentForm||e in n||!i.objectLength(u(this).rules())||(n[e]=!0,0))})},clean:function(e){return u(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return u(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=u([]),this.toHide=u([])},reset:function(){this.resetInternals(),this.currentElements=u([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=u(e),i=e.type,n=void 0!==t.attr("contenteditable")&&"false"!==t.attr("contenteditable");return"radio"===i||"checkbox"===i?this.findByName(e.name).filter(":checked").val():"number"===i&&void 0!==e.validity?e.validity.badInput?"NaN":t.val():(e=n?t.text():t.val(),"file"===i?"C:\\fakepath\\"===e.substr(0,12)?e.substr(12):0<=(n=e.lastIndexOf("/"))||0<=(n=e.lastIndexOf("\\"))?e.substr(n+1):e:"string"==typeof e?e.replace(/\r/g,""):e)},check:function(t){t=this.validationTargetFor(this.clean(t));var e,i,n,a,o=u(t).rules(),s=u.map(o,function(e,t){return t}).length,r=!1,d=this.elementValue(t);for(i in this.abortRequest(t),"function"==typeof o.normalizer?a=o.normalizer:"function"==typeof this.settings.normalizer&&(a=this.settings.normalizer),a&&(d=a.call(t,d),delete o.normalizer),o){n={method:i,parameters:o[i]};try{if("dependency-mismatch"===(e=u.validator.methods[i].call(this,d,t,n.parameters))&&1===s)r=!0;else{if(r=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,n),!1}}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+n.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+n.method+"' method."),e}}if(!r)return this.objectLength(o)&&this.successList.push(t),!0},customDataMessage:function(e,t){return u(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||u(e).data("msg")},customMessage:function(e,t){e=this.settings.messages[e];return e&&(e.constructor===String?e:e[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){var i=this.findDefined(this.customMessage(e.name,(t="string"==typeof t?{method:t}:t).method),this.customDataMessage(e,t.method),!this.settings.ignoreTitle&&e.title||void 0,u.validator.messages[t.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),n=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,t.parameters,e):n.test(i)&&(i=u.validator.format(i.replace(n,"{$1}"),t.parameters)),i},formatAndAdd:function(e,t){var i=this.defaultMessage(e,t);this.errorList.push({message:i,element:e,method:t.method}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(e){return e=this.settings.wrapper?e.add(e.parent(this.settings.wrapper)):e},defaultShowErrors:function(){for(var e,t,i=0;this.errorList[i];i++)t=this.errorList[i],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(i=0;this.successList[i];i++)this.showLabel(this.successList[i]);if(this.settings.unhighlight)for(i=0,e=this.validElements();e[i];i++)this.settings.unhighlight.call(this,e[i],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return u(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var i,n,a,o=this.errorsFor(e),s=this.idOrName(e),r=u(e).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),this.settings&&this.settings.escapeHtml?o.text(t||""):o.html(t||"")):(o=u("<"+this.settings.errorElement+">").attr("id",s+"-error").addClass(this.settings.errorClass),this.settings&&this.settings.escapeHtml?o.text(t||""):o.html(t||""),n=o,this.settings.wrapper&&(n=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement.call(this,n,u(e)):n.insertAfter(e),o.is("label")?o.attr("for",s):0===o.parents("label[for='"+this.escapeCssMeta(s)+"']").length&&(n=o.attr("id"),r?r.match(new RegExp("\\b"+this.escapeCssMeta(n)+"\\b"))||(r+=" "+n):r=n,u(e).attr("aria-describedby",r),i=this.groups[e.name])&&u.each((a=this).groups,function(e,t){t===i&&u("[name='"+a.escapeCssMeta(e)+"']",a.currentForm).attr("aria-describedby",o.attr("id"))})),!t&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,e)),this.toShow=this.toShow.add(o)},errorsFor:function(e){var t=this.escapeCssMeta(this.idOrName(e)),e=u(e).attr("aria-describedby"),t="label[for='"+t+"'], label[for='"+t+"'] *";return e&&(t=t+", #"+this.escapeCssMeta(e).replace(/\s+/g,", #")),this.errors().filter(t)},escapeCssMeta:function(e){return void 0===e?"":e.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||!this.checkable(e)&&e.id||e.name},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),u(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return u(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return u("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!u(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!u.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},elementAjaxPort:function(e){return"validate"+e.name},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,u(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],u(e).removeClass(this.settings.pendingClass),t&&0===this.pendingRequest&&this.formSubmitted&&this.form()&&0===this.pendingRequest?(u(this.currentForm).trigger("submit"),this.submitButton&&u("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(u(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},abortRequest:function(e){var t;this.pending[e.name]&&(t=this.elementAjaxPort(e),u.ajaxAbort(t),this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],u(e).removeClass(this.settings.pendingClass))},previousValue:function(e,t){return t="string"==typeof t&&t||"remote",u.data(e,"previousValue")||u.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:t})})},destroy:function(){this.resetForm(),u(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:u.extend(this.classRuleSettings,e)},classRules:function(e){var t={},e=u(e).attr("class");return e&&u.each(e.split(" "),function(){this in u.validator.classRuleSettings&&u.extend(t,u.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,i,n){(n=/min|max|step/.test(i)&&(null===t||/number|range|text/.test(t))&&(n=Number(n),isNaN(n))?void 0:n)||0===n?e[i]=n:t===i&&"range"!==t&&(e["date"===t?"dateISO":i]=!0)},attributeRules:function(e){var t,i,n={},a=u(e),o=e.getAttribute("type");for(t in u.validator.methods)i="required"===t?(i=e.getAttribute(t),""===i&&(i=!0),!!i):a.attr(t),this.normalizeAttributeRule(n,o,t,i);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(e){var t,i,n={},a=u(e),o=e.getAttribute("type");for(t in u.validator.methods)i=a.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),""===i&&(i=!0),this.normalizeAttributeRule(n,o,t,i);return n},staticRules:function(e){var t={},i=u.data(e.form,"validator");return t=i.settings.rules?u.validator.normalizeRule(i.settings.rules[e.name])||{}:t},normalizeRules:function(n,a){return u.each(n,function(e,t){if(!1===t)delete n[e];else if(t.param||t.depends){var i=!0;switch(typeof t.depends){case"string":i=!!u(t.depends,a.form).length;break;case"function":i=t.depends.call(a,a)}i?n[e]=void 0===t.param||t.param:(u.data(a.form,"validator").resetElements(u(a)),delete n[e])}}),u.each(n,function(e,t){n[e]="function"==typeof t&&"normalizer"!==e?t(a):t}),u.each(["minlength","maxlength"],function(){n[this]&&(n[this]=Number(n[this]))}),u.each(["rangelength","range"],function(){var e;n[this]&&(Array.isArray(n[this])?n[this]=[Number(n[this][0]),Number(n[this][1])]:"string"==typeof n[this]&&(e=n[this].replace(/[\[\]]/g,"").split(/[\s,]+/),n[this]=[Number(e[0]),Number(e[1])]))}),u.validator.autoCreateRanges&&(null!=n.min&&null!=n.max&&(n.range=[n.min,n.max],delete n.min,delete n.max),null!=n.minlength)&&null!=n.maxlength&&(n.rangelength=[n.minlength,n.maxlength],delete n.minlength,delete n.maxlength),n},normalizeRule:function(e){var t;return"string"==typeof e&&(t={},u.each(e.split(/\s/),function(){t[this]=!0}),e=t),e},addMethod:function(e,t,i){u.validator.methods[e]=t,u.validator.messages[e]=void 0!==i?i:u.validator.messages[e],t.length<3&&u.validator.addClassRules(e,u.validator.normalizeRule(e))},methods:{required:function(e,t,i){return this.depend(i,t)?"select"===t.nodeName.toLowerCase()?(i=u(t).val())&&0<i.length:this.checkable(t)?0<this.getLength(e,t):null!=e&&0<e.length:"dependency-mismatch"},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})+(?::(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:(i=!1,function(e,t){return i||(i=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())}),dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(e,t,i){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||i<=e},maxlength:function(e,t,i){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e<=i},rangelength:function(e,t,i){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e>=i[0]&&e<=i[1]},min:function(e,t,i){return this.optional(t)||i<=e},max:function(e,t,i){return this.optional(t)||e<=i},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},step:function(e,t,i){function n(e){return(e=(""+e).match(/(?:\.(\d+))?$/))&&e[1]?e[1].length:0}function a(e){return Math.round(e*Math.pow(10,o))}var o,s=u(t).attr("type"),r="Step attribute on input type "+s+" is not supported.",d=new RegExp("\\b"+s+"\\b"),l=!0;if(s&&!d.test(["text","number","range"].join()))throw new Error(r);return o=n(i),(n(e)>o||a(e)%a(i)!=0)&&(l=!1),this.optional(t)||l},equalTo:function(e,t,i){i=u(i);return this.settings.onfocusout&&i.not(".validate-equalTo-blur").length&&i.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){u(t).valid()}),e===i.val()},remote:function(n,a,e,o){if(this.optional(a))return"dependency-mismatch";o="string"==typeof o&&o||"remote";var s,t,r=this.previousValue(a,o);return this.settings.messages[a.name]||(this.settings.messages[a.name]={}),r.originalMessage=r.originalMessage||this.settings.messages[a.name][o],this.settings.messages[a.name][o]=r.message,t=u.param(u.extend({data:n},(e="string"==typeof e?{url:e}:e).data)),r.old===t?r.valid:(r.old=t,(s=this).startRequest(a),(t={})[a.name]=n,u.ajax(u.extend(!0,{mode:"abort",port:this.elementAjaxPort(a),dataType:"json",data:t,context:s.currentForm,success:function(e){var t,i=!0===e||"true"===e;s.settings.messages[a.name][o]=r.originalMessage,i?(t=s.formSubmitted,s.toHide=s.errorsFor(a),s.formSubmitted=t,s.successList.push(a),s.invalid[a.name]=!1,s.showErrors()):(t={},e=e||s.defaultMessage(a,{method:o,parameters:n}),t[a.name]=r.message=e,s.invalid[a.name]=!0,s.showErrors(t)),r.valid=i,s.stopRequest(a,i)}},e)),"pending")}}});var n,a={};return u.ajaxPrefilter?u.ajaxPrefilter(function(e,t,i){var n=e.port;"abort"===e.mode&&(u.ajaxAbort(n),a[n]=i)}):(n=u.ajax,u.ajax=function(e){var t=("mode"in e?e:u.ajaxSettings).mode,e=("port"in e?e:u.ajaxSettings).port;return"abort"===t?(u.ajaxAbort(e),a[e]=n.apply(this,arguments),a[e]):n.apply(this,arguments)}),u.ajaxAbort=function(e){a[e]&&(a[e].abort(),delete a[e])},u}),$(function(){$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?($(this).siblings("input").attr("type","text").val(),$(this).removeClass("su-show").addClass("su-hide").attr("data-bs-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-bs-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touchstart",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("touchend",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),window.innerWidth<1041&&$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("click",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show").addClass("su-hide").attr("data-bs-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-bs-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touch",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show"),$(this).addClass("su-hide")):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide"),$(this).addClass("su-show"))})});var dialog,oauthLogoChanged=!1,openidLogoChanged=!1,jwtLogoChanged=!1,azureB2CLogoChanged=!1;function authenticationDialogBoxClose(){document.getElementById("default-authentication-confirmation-diolog").ej2_instances[0].hide()}function getDefaultAuthDisplayName(e){return"customoauth"===e.toLowerCase()?"OAuth 2.0":"customoidc"===e.toLowerCase()?"OpenID Connect":"jwtsso"===e.toLowerCase()?"JWT SSO":"azuread"===e.toLowerCase()?"Azure ADs":"azureadb2c"===e.toLowerCase()?"Azure AD B2C":void 0}function validateTextBoxes(e){var t=!0;return("oauth"==e?$('#oauth-group-import .input-field-margin input[type="text"]'):$('#openid-group-import .input-field-margin input[type="text"]')).each(function(){$(this).closest(".input-field-margin").is(":visible")&&""===$(this).val()?($(this).siblings(".validation-message").removeClass("display-none"),$(this).closest(".input-field-margin").addClass("has-error"),t=!1):($(this).siblings(".validation-message").addClass("display-none"),$(this).closest(".input-field-margin").removeClass("has-error"))}),t}function fnCopySigningKey(e,t){var i;$("#enable-jwt").is(":checked")&&(void 0!==navigator.clipboard?(i=$(e).val(),navigator.clipboard.writeText(i)):((i=$(e)).attr("type","text").select(),document.execCommand("copy"),i.attr("type","password")),setTimeout(function(){$(t).attr("data-bs-original-title",window.Server.App.LocalizationContent.Copied),$(t).tooltip("show")},200),setTimeout(function(){$(t).attr("data-bs-original-title",window.Server.App.LocalizationContent.ClickToCopy),$(t).tooltip()},3e3))}function signingKeyConfirmationDlg(){var e='<button id="sendButton" class="e-control e-btn e-primary secondary-button">'+window.Server.App.LocalizationContent.OKButton+" </button>",t=new ej.buttons.Button;(dialog=new ej.popups.Dialog({header:"Regenerate Signing Key",footerTemplate:e,content:document.getElementById("dlgContent"),showCloseIcon:!0,width:"472px",height:"200px",isModal:!0,visible:!1,beforeOpen:onBeforeopen})).appendTo("#dialog"),t.appendTo("#sendButton")}function onBeforeopen(){document.getElementById("dlgContent").style.visibility="visible"}function fnRegenerateSigningKey(){$.ajax({type:"POST",url:refreshSigningKeyUrl,success:function(e){0!=e?(SuccessAlert(window.Server.App.LocalizationContent.RegenerateKey,window.Server.App.LocalizationContent.RegenerateKeySuccess,7e3),$("#jwt-signing-key").val(e)):WarningAlert(window.Server.App.LocalizationContent.RegenerateKey,window.Server.App.LocalizationContent.RegenerateKeyError,null,7e3)},error:function(){WarningAlert(window.Server.App.LocalizationContent.RegenerateKey,window.Server.App.LocalizationContent.RegenerateKeyError,null,7e3)}})}function fnRegenerateEncryptionKey(){$.ajax({type:"POST",url:refreshEncryptionKeyUrl,success:function(e){0!=e?(SuccessAlert(window.Server.App.LocalizationContent.RegenerateEncryptionKey,window.Server.App.LocalizationContent.RegenerateEncryptionKeySuccess,7e3),$("#jwt-encryption-key").val(e)):WarningAlert(window.Server.App.LocalizationContent.RegenerateEncryptionKey,window.Server.App.LocalizationContent.RegenerateEncryptionKeyError,null,7e3)},error:function(){WarningAlert(window.Server.App.LocalizationContent.RegenerateEncryptionKey,window.Server.App.LocalizationContent.RegenerateEncryptionKeyError,null,7e3)}})}function onRegenerateSigningKeyDialogOpen(){$("#enable-jwt").is(":checked")&&dialog.show()}function jwtSigningKeyShowHide(){$("#enable-jwt").is(":checked")?$("#jwt-signing-key,#show-signing-key,#jwt-encryption-key,#show-encryption-key,#enable-jwt-encryption").prop("disabled",!1):$("#jwt-signing-key,#show-signing-key,#jwt-encryption-key,#show-encryption-key,#enable-jwt-encryption").prop("disabled",!0)}function ongroupImportchange(e){var t;switch((t=("group-import-provider-oauth"===e.element.id?$(".group-import-provider-type-oauth"):$(".group-import-provider-type-openid")).parent(".e-input-group").closest(".group-import")).find(".cognito-fields, .auth0-fields, .okta-fields, .onelogin-fields").addClass("display-none"),this.value){case"CognitoAWS":t.find(".cognito-fields").removeClass("display-none");break;case"Auth0":t.find(".auth0-fields").removeClass("display-none");break;case"Okta":t.find(".okta-fields").removeClass("display-none");break;case"OneLogin":t.find(".onelogin-fields").removeClass("display-none")}}function reloadPage(){setTimeout(function(){window.location.href=window.location.href},1e3)}$(document).ready(function(){jwtSigningKeyShowHide(),e="body",regexIe8.test(userAgent)&&$(e).find("input[type=text][class!='hidden-input'],input[type=password][class!='hidden-input'],textarea[id='txt_welcome_note']").each(function(){""===$(this).val()?$($("<div>",{class:"placeholder",text:$(this).attr("placeholder")})).insertAfter(this).show():$($("<div>",{class:"placeholder",text:$(this).attr("placeholder"),style:"display:block"})).insertAfter(this).hide()}),signingKeyConfirmationDlg();var e,a=angular.element("#auth-settings-container").scope();function t(e){var t="oauthLogoUrl"===e.currentTarget.name||"oauthProviderName"===e.currentTarget.name||"oauthAuthorizationEP"===e.currentTarget.name?a.oauthLogoUrl:"openidLogoUrl"===e.currentTarget.name||"openidProviderName"===e.currentTarget.name||"openidAuthority"===e.currentTarget.name?a.openidLogoUrl:"azureB2CLogoUrl"===e.currentTarget.name||"application-id-b2c"===e.currentTarget.name||"tenant-name-b2c"===e.currentTarget.name?a.azureB2CLogoUrl:a.jwtLogoUrl;null!=t&&""!==t||("oauthLogoUrl"===e.currentTarget.name||"oauthProviderName"===e.currentTarget.name||"oauthAuthorizationEP"===e.currentTarget.name?$("#oauth-image-upload-box"):"openidLogoUrl"===e.currentTarget.name||"openidProviderName"===e.currentTarget.name||"openidAuthority"===e.currentTarget.name?$("#openid-image-upload-box"):"azureB2CLogoUrl"===e.currentTarget.name||"application-id-b2c"===e.currentTarget.name||"tenant-name-b2c"===e.currentTarget.name?$("#azure-b2c-image-upload-box"):$("#jwt-image-upload-box")).siblings(".validation-message").removeClass("ng-hide").html(window.Server.App.LocalizationContent.SelectAuthProviderLogo),a.$apply(function(){"oauthLogoUrl"===e.currentTarget.name||"oauthProviderName"===e.currentTarget.name||"oauthAuthorizationEP"===e.currentTarget.name?a.oauthSettingsForm.isValidOAuthLogoUrl=!1:"openidLogoUrl"===e.currentTarget.name||"openidProviderName"===e.currentTarget.name||"openidAuthority"===e.currentTarget.name?a.openidSettingsForm.isValidOpenIdLogoUrl=!1:"azureB2CLogoUrl"===e.currentTarget.name||"application-id-b2c"===e.currentTarget.name||"tenant-name-b2c"===e.currentTarget.name?a.ssoSettingsb2cForm.isValidAzureB2CLogoUrl=!1:a.jwtSettingsForm.isValidjwtLogoUrl=!1})}function n(){var e={IsEnabled:$("#enable-sso").is(":checked"),IsSloEnabled:$("#enable-slo").is(":checked"),ApplicationId:$("input[name='ApplicationId']").val().trim(),ApplicationIdURI:$("input[name='ApplicationIdURI']").val().trim(),TenantName:$("input[name='TenantName']").val().trim(),MobileApplicationId:$("input[name='MobileApplicationId']").val().trim()};$.ajax({url:updatesamlsettingsUrl,type:"POST",data:{samlSettingsData:e},success:function(e){(a.categories=e).result?(SuccessAlert(window.Server.App.LocalizationContent.SSOSettings,window.Server.App.LocalizationContent.SSOSettingsUpdated,7e3),reloadPage()):WarningAlert(window.Server.App.LocalizationContent.SSOSettings,window.Server.App.LocalizationContent.SSOSettingsUpdateError,e.Message,7e3)},error:function(e){WarningAlert(window.Server.App.LocalizationContent.SSOSettings,window.Server.App.LocalizationContent.SSOSettingsUpdateError,e.Message,7e3)}})}function o(){var e=$("#enable-sso-b2c").is(":checked"),t=$("#enable-slo-b2c").is(":checked"),e={IsEnabled:e,AuthProvider:$("input[name='azureADB2CAuthenticationProvider']").val().trim(),LogoUrl:a.azureB2CLogoUrl,IsLogoChanged:azureB2CLogoChanged,AzureADB2CSettings:{IsSloEnabled:t,Logo:$("input[name='azureB2CLogo']").val().trim(),ApplicationId:$("input[name='ApplicationIdB2C']").val().trim(),TenantName:$("input[name='TenantNameB2C']").val().trim(),SigninPolicy:$("input[name='PolicyB2C']").val().trim(),AzureB2CProviderName:$("input[name='AzureB2CProviderName']").val().trim()}};$.ajax({url:updateauthsettingsUrl,type:"POST",data:{AuthSettingsData:JSON.stringify(e)},success:function(e){(a.categories=e).result?(SuccessAlert(window.Server.App.LocalizationContent.AzureB2CSettings,window.Server.App.LocalizationContent.AzureB2CSettingsUpdated,7e3),reloadPage()):WarningAlert(window.Server.App.LocalizationContent.AzureB2CSettings,window.Server.App.LocalizationContent.AzureB2CSettingsUpdateError,e.Message,7e3)},error:function(e){WarningAlert(window.Server.App.LocalizationContent.AzureB2CSettings,window.Server.App.LocalizationContent.AzureB2CSettingsUpdateError,e.Message,7e3)}})}function s(){var e={IsEnabled:a.windowsAdEnabled,AuthProvider:"WindowsAD",WindowsADSettings:{Domain:$("input[name='windowsadSettingsDomain']").val().trim()}};$.ajax({url:updateauthsettingsUrl,type:"POST",data:{AuthSettingsData:JSON.stringify(e)},beforeSend:showWaitingPopup("server-app-container"),success:function(e){hideWaitingPopup("server-app-container"),e.IsSuccess?(reloadPage(),SuccessAlert(window.Server.App.LocalizationContent.WindowsAdSettings,window.Server.App.LocalizationContent.WindowsAdSettingsUpdated,7e3)):WarningAlert(window.Server.App.LocalizationContent.WindowsAdSettings,window.Server.App.LocalizationContent.WindowsAdSettingsUpdateError,e.Message,7e3)},error:function(){hideWaitingPopup("server-app-container")}})}function r(){var e=$("#enable-jwt").is(":checked"),t={IsEncryptionEnabled:$("#enable-jwt-encryption").is(":checked"),PublicKey:"",PrivateKey:""},e={IsEnabled:e,AuthProvider:$("input[name='jwtAuthenticationProvider']").val().trim(),LogoUrl:a.jwtLogoUrl,IsLogoChanged:jwtLogoChanged,JwtSettings:{Name:$("input[name='jwtName']").val().trim(),LoginUrl:$("input[name='jwtLoginUrl']").val().trim(),LogOutUrl:$("input[name='jwtLogOutUrl']").val().trim(),Logo:$("input[name='jwtLogo']").val().trim(),EncryptionValues:JSON.stringify(t)}};$.ajax({type:"POST",url:updateauthsettingsUrl,data:{AuthSettingsData:JSON.stringify(e)},beforeSend:showWaitingPopup("server-app-container"),success:function(e){hideWaitingPopup("server-app-container"),e.IsSuccess?(SuccessAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdated,7e3),reloadPage()):WarningAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdatedError,e.Message,7e3)},error:function(){hideWaitingPopup("server-app-container")}})}function d(t){var e=(e=>{var t=$("#"+e+"IsEnabled").is(":checked");return t=t?"oauth"===e?{IsEnabled:t,OverwriteSiteSetting:$("input[name='oauthOverwriteSiteSetting']").is(":checked"),AuthProvider:$("input[name='oauthAuthenticationProvider']").val().trim(),LogoUrl:a.oauthLogoUrl,IsLogoChanged:oauthLogoChanged,OAuthAuthSettings:{ProviderName:$("input[name='oauthProviderName']").val().trim(),ClientId:$("input[name='oauthClientId']").val().trim(),ClientSecret:$("input[name='oauthClientSecret']").val().trim(),AuthorizationEndPoint:$("input[name='oauthAuthorizationEP']").val().trim(),TokenEndPoint:$("input[name='oauthTokenEP']").val().trim(),TokenEndPointMethod:document.getElementById("token-method-type").ej2_instances[0].value,UserInfoEndPoint:$("input[name='oauthUserInfoEP']").val().trim(),UserInfoEndPointMethod:document.getElementById("user-info-method-type").ej2_instances[0].value,Scopes:$("input[name='oauthScopes']").val().trim(),UserInfoEmail:$("input[name='userInfoEmail']").val().trim(),UserInfoFirstname:$("input[name='userInfoFirstname']").val().trim(),UserInfoLastname:$("input[name='userInfoLastname']").val().trim(),Logo:$("input[name='oauthLogo']").val().trim(),LogoutEndPoint:$("input[name='oauthLogoutEndpoint']").val().trim(),GroupImportSettings:p("oauth"),CanCreateAccount:$("#enable-oauth-account-creation").is(":checked")}}:"openid"===e?{IsEnabled:t,OverwriteSiteSetting:$("input[name='openidOverwriteSiteSetting']").is(":checked"),AuthProvider:$("input[name='openidAuthenticationProvider']").val().trim(),LogoUrl:a.openidLogoUrl,IsLogoChanged:openidLogoChanged,OIDCAuthSettings:{ProviderName:$("input[name='openidProviderName']").val().trim(),ClientId:$("input[name='openidClientId']").val().trim(),ClientSecret:$("input[name='openidClientSecret']").val().trim(),Identifier:$("input[name='openidIdentifier']").val().trim(),Authority:$("input[name='openidAuthority']").val().trim(),Logo:$("input[name='openidLogo']").val().trim(),LogoutUrl:$("input[name='openidLogoutUrl']").val().trim(),GroupImportSettings:p("openid"),CanCreateAccount:$("#enable-openid-account-creation").is(":checked"),ResponseType:document.getElementById("response-type-dropdown").ej2_instances[0].value}}:{IsEnabled:t,LoginProvider:$("#login-provider-type").val()}:{IsEnabled:t,AuthProvider:$("input[name='"+e+"AuthenticationProvider']").val().trim()}})(t);$.ajax({type:"POST",url:window.updateauthsettingsUrl,data:{AuthSettingsData:JSON.stringify(e)},beforeSend:showWaitingPopup("content-area"),success:function(e){hideWaitingPopup("content-area"),e.IsSuccess?(SuccessAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdated,7e3),"oauth"===t?oauthLogoChanged=!1:openidLogoChanged=!1,reloadPage()):WarningAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdatedError,e.Message,7e3)},error:function(){hideWaitingPopup("content-area")}})}a.$apply(function(){a.oauthSettingsForm.isValidOAuthLogoUrl=""!=a.oauthLogoUrl.$viewValue,a.oauthSettingsForm.isValidOpenIdLogoUrl=""!=a.openidLogoUrl.$viewValue}),new ejs.popups.Dialog({header:window.Server.App.LocalizationContent.DefaultAuthenticationConfirmation,showCloseIcon:!0,width:"472px",close:"authenticationDialogBoxClose",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"},buttons:[{click:function(){authenticationDialogBoxClose()},buttonModel:{content:window.Server.App.LocalizationContent.NoButton}},{click:function(){document.getElementById("default-authentication-confirmation-diolog").ej2_instances[0].hide(),"oauth"===this.id||"openid"===this.id?d(this.id):"jwt"===this.id?r():"sso"===this.id?n():"sso-b2c"===this.id?o():"windows-ad"===this.id&&s()},buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0,cssClass:"update-oauth-or-openid-settings"}}]}).appendTo("#default-authentication-confirmation-diolog"),dropDownListInitialization("#login-provider-type",window.Server.App.LocalizationContent.DefaultAuthenticationSettings),dropDownListInitialization("#token-method-type",""),dropDownListInitialization("#user-info-method-type",""),groupImportDropDownListInitialization("#group-import-provider-oauth",window.Server.App.LocalizationContent.Provider,"Oauth"),groupImportDropDownListInitialization("#group-import-provider-openid",window.Server.App.LocalizationContent.Provider,"OpenId"),dropDownListInitialization("#response-type-dropdown",""),0!=providerNameCount&&(document.getElementById("login-provider-type").ej2_instances[0].value=selectedDefaultAuthValue,document.getElementById("login-provider-type").ej2_instances[0].text=selectedDefaultAuthText),$("#enable-defaultauthentication").is(":checked")||($("#update-defaultauthlogin-settings").prop("disabled",!0),0!=providerNameCount&&(document.getElementById("login-provider-type").ej2_instances[0].enabled=!1)),$(document).on("click","#enable-defaultauthentication",function(){$("#enable-defaultauthentication").is(":checked")?(0!=providerNameCount&&(document.getElementById("login-provider-type").ej2_instances[0].enabled=!0),$('[data-id="login-provider-type"]').removeClass("disabled").next().find("li").removeClass("disabled"),$("#update-defaultauthlogin-settings").attr("disabled",!1)):(0!=providerNameCount&&(document.getElementById("login-provider-type").ej2_instances[0].enabled=!1),$('[data-id="login-provider-type"]').addClass("disabled"),$("#update-defaultauthlogin-settings").prop("disabled",!1))}),$("#auth-settings-container").is(":visible")&&(location.href.match(/openid-settings/)?($("#openid-settings").closest("li").addClass("active"),$("#openid-settings").tab("show"),$("#update-oauth-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide()):location.href.match(/oauth-settings/)?($("#oauth-settings").closest("li").addClass("active"),$("#oauth-settings").tab("show"),$("#update-openid-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide()):location.href.match(/jwt-settings/)?($("#jwt-settings").closest("li").addClass("active"),$("#jwt-settings").tab("show"),$("#update-saml-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-azure-b2c-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide()):location.href.match(/azure-ad-settings/)?($("#azure-ad-settings").closest("li").addClass("active"),$("#azure-ad-settings").tab("show"),$("#update-azure-b2c-settings").hide(),$("#update-jwt-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide()):location.href.match(/azure-ad-b2c-settings/)?($("#azure-ad-b2c-settings").closest("li").addClass("active"),$("#azure-ad-b2c-settings").tab("show"),$("#update-saml-settings").hide(),$("#update-jwt-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide()):location.href.match(/windows-ad-settings/)?($("#windows-ad-settings").closest("li").addClass("active"),$("#windows-ad-settings").tab("show"),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide()):($("#default-authentication-settings").closest("li").addClass("active"),$("#default-authentication-settings").tab("show"),$("#update-oauth-settings").hide(),$("#update-openid-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),"?view=default-authentication"!=window.location.search.toString()&&history.pushState(null,"","?view=default-authentication"))),$("a[data-bs-toggle='tab']").on("click",function(e){$("ul.nav.nav-tabs li").removeClass("active"),"oauth-settings"==$(this).attr("id")?($(this).closest("li").addClass("active"),$("#update-oauth-settings").show(),$("#update-openid-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),"?view=oauth-settings"!=window.location.search.toString()&&history.pushState(null,"","?view=oauth-settings")):"openid-settings"==$(this).attr("id")?($(this).closest("li").addClass("active"),$("#update-openid-settings").show(),$("#update-oauth-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),"?view=openid-settings"!=window.location.search.toString()&&history.pushState(null,"","?view=openid-settings")):"default-authentication-settings"==$(this).attr("id")?($(this).closest("li").addClass("active"),0==providerNameCount?$("#update-defaultauthlogin-settings").hide():$("#update-defaultauthlogin-settings").show(),$("#update-openid-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-oauth-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),"?view=default-authentication"!=window.location.search.toString()&&history.pushState(null,"","?view=default-authentication")):"default-authentication-settings-info"==$(this).attr("id")?($(this).closest("li").addClass("active"),$("#update-defaultauthlogin-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-oauth-settings").hide(),$("#update-openid-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),"?tab=defaultauth-settings"!=window.location.search.toString()&&history.pushState(null,"","?tab=defaultauth-settings"),updateauthsettingsUrl):"jwt-settings"==$(this).attr("id")?($(this).closest("li").addClass("active"),$("#update-jwt-settings").show(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide(),"?view=jwt-settings"!=window.location.search.toString()&&history.pushState(null,"","?view=jwt-settings")):"azure-ad-settings"==$(this).attr("id")?($(this).closest("li").addClass("active"),$("#update-saml-settings").show(),$("#update-azure-b2c-settings").hide(),$("#update-jwt-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide(),"?view=azure-ad-settings"!=window.location.search.toString()&&history.pushState(null,"","?view=azure-ad-settings")):"azure-ad-b2c-settings"==$(this).attr("id")?($(this).closest("li").addClass("active"),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").show(),$("#update-jwt-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide(),"?view=azure-ad-b2c-settings"!=window.location.search.toString()&&history.pushState(null,"","?view=azure-ad-b2c-settings")):"windows-ad-settings"==$(this).attr("id")&&($(this).closest("li").addClass("active"),$("#update-windowsad-settings").show(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),$("#update-jwt-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide(),"?view=windows-ad-settings"!=window.location.search.toString())&&history.pushState(null,"","?view=windows-ad-settings"),$(".success-message, .error-message").hide()}),a.enableDisableEncryption=function(){$("#enable-jwt-encryption").is(":checked")?$("#jwt-encryption-key").prop("disabled",!0):$("#jwt-encryption-key").prop("disabled",!1)},a.hideValidationMessage=function(e,t){var i;"oauth"===t?i=$("#update-oauth-settings"):"openid"===t?i=$("#update-openid-settings"):"jwt"===t?i=$("#update-jwt-settings"):"azuread"===t?i=$("#update-saml-settings"):"azureadb2c"===t?i=$("#update-azure-b2c-settings"):"defaultauthentication"===t?i=$("#update-defaultauthlogin-settings"):"windowsad"===t&&(i=$("#update-windowsad-settings")),e?("oauth"===t&&a.oauthSettingsForm.$invalid||"openid"===t&&a.openidSettingsForm.$invalid||"jwt"===t&&a.jwtSettingsForm.$invalid||"azuread"===t&&a.ssoSettingsForm.$invalid||"azureadb2c"===t&&a.ssoSettingsb2cForm.$invalid||"defaultauthentication"===t||"windowsad"===t&&a.windowsadSettingsForm.$invalid)&&i.prop("disabled",!0):"oauth"===t?(a.oauthSettingsForm.$setUntouched(),a.oauthSettingsForm.$setPristine(),$("#oauth-image-upload-box").siblings(".validation-message").html(""),$("#oauth-group-import .validation-message").addClass("display-none"),$("#oauth-group-import .input-field-margin").removeClass("has-error"),""!=$("#oauth-provider-name").val()&&""!=$("#oauth-authorization-endpoint").val()&&""!=$("#oauth-token-endpoint").val()&&""!=$("#oauth-userinfo-endpoint").val()&&""!=$("#oauth-client-id").val()&&""!=$("#oauth-scopes").val()&&""!=$("#user-info-email").val()&&i.prop("disabled",!1)):"openid"===t?(a.openidSettingsForm.$setUntouched(),a.openidSettingsForm.$setPristine(),$("#openid-image-upload-box").siblings(".validation-message").html(""),$("#openid-group-import .validation-message").addClass("display-none"),$("#openid-group-import .input-field-margin").removeClass("has-error"),""!=$("#openid-provider-name").val()&&""!=$("#openid-authority").val()&&""!=$("#openid-client-id").val()&&""!=$("#openid-identifier").val()&&i.prop("disabled",!1)):"jwt"===t?(a.jwtSettingsForm.$setUntouched(),a.jwtSettingsForm.$setPristine(),$("#jwt-image-upload-box").siblings(".validation-message").html("")):"azuread"===t?(a.ssoSettingsForm.$setUntouched(),a.ssoSettingsForm.$setPristine()):"azureadb2c"===t?(a.ssoSettingsb2cForm.$setUntouched(),a.ssoSettingsb2cForm.$setPristine(),$("#azure-b2c-image-upload-box").siblings(".validation-message").html("")):"windowsad"===t&&(a.windowsadSettingsForm.$setUntouched(),a.windowsadSettingsForm.$setPristine()),"oauth"!==t&&"openid"!==t||(document.getElementById("group-import-provider-"+t).ej2_instances[0].enabled=$("#"+t+"IsEnabled").is(":checked"),document.getElementById("token-method-type").ej2_instances[0].enabled=$("#"+t+"IsEnabled").is(":checked"),document.getElementById("user-info-method-type").ej2_instances[0].enabled=$("#"+t+"IsEnabled").is(":checked")),"openid"===t&&(document.getElementById("response-type-dropdown").ej2_instances[0].enabled=$("#"+t+"IsEnabled").is(":checked"))},$(document).on("focusout","#oauth-provider-name, #oauth-authorization-endpoint",function(e){t(e)}),$(document).on("focusout","#openid-provider-name, #openid-authority",function(e){t(e)}),$(document).on("focusout","#jwt-provider-name",function(e){t(e)}),$(document).on("focusout","#application-id-b2c, #tenant-name-b2c",function(e){t(e)}),$(document).on("click",".image-upload",function(e){t(e)}),$(".update-oauth-or-openid-settings").click(function(){document.getElementById("default-authentication-confirmation-diolog").ej2_instances[0].hide(),"oauth"===this.id||"openid"===this.id?d(this.id):"jwt"===this.id?r():"sso"===this.id?n():"sso-b2c"===this.id?o():"windows-ad"===this.id&&s()}),$(document).on("click",".update-auth-settings",function(){$(".logo-container .validation-message").html(""),"update-oauth-settings"===this.id?(e="oauth",t=$("input[name='oauthAuthenticationProvider']").val().trim()):"update-openid-settings"===this.id?(e="openid",t=$("input[name='openidAuthenticationProvider']").val().trim()):"update-jwt-settings"===this.id?(e="jwt",t=$("input[name='jwtAuthenticationProvider']").val().trim()):"update-saml-settings"===this.id?(e="sso",t=$("input[name='azureADAuthenticationProvider']").val().trim()):"update-azure-b2c-settings"===this.id?(e="sso-b2c",t=$("input[name='azureADB2CAuthenticationProvider']").val().trim()):"update-windowsad-settings"===this.id&&(e="windows-ad",t=$("input[name='windowsAuthenticationProvider']").val().trim());var e,t,i=!1;(i=defaultAuthentication==t?"update-oauth-settings"===this.id||"update-openid-settings"===this.id?!$("#"+e+"IsEnabled").is(":checked"):!$("#enable-"+e).is(":checked"):i)?(document.getElementById("default-authentication-confirmation-diolog").ej2_instances[0].show(),$(".update-oauth-or-openid-settings").attr("id",e)):"update-oauth-settings"===this.id||"update-openid-settings"===this.id?$("#"+e+"IsEnabled").is(":checked")&&!validateTextBoxes(e)||d(e):"update-jwt-settings"===this.id?r():"update-saml-settings"===this.id?n():"update-azure-b2c-settings"===this.id?o():"update-windowsad-settings"===this.id&&s()}),a.tenantRegex="^(?!(ftp|https?)://)([a-zA-Z0-9-_]+.)*[a-zA-Z0-9][a-zA-Z0-9-]+(.[a-z]{2,6})?(:d{1,5})?(/[a-zA-Z0-9]+[a-zA-Z0-9]*(.[a-z]{2,8})?)*?$",a.saveSsoSettings=function(){n()},a.saveJwtSettings=function(){r()},a.saveSsoB2CSettings=function(){o()},$(document).on("click",".update-defaultauth-settings",function(){var e=$("#enable-defaultauthentication").is(":checked")?document.getElementById("login-provider-type").ej2_instances[0].value:"0";$.ajax({type:"POST",url:defaultauthsettingsUrl,data:{AuthProvider:e},beforeSend:showWaitingPopup("server-app-container"),success:function(e){e.Status?(hideWaitingPopup("server-app-container"),defaultAuthentication=e.AuthProvider,$(".modal-body").find("p:first").find("span").html(getDefaultAuthDisplayName(defaultAuthentication)),SuccessAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdated,7e3)):(hideWaitingPopup("server-app-container"),WarningAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdatedError,e.Message,7e3))},error:function(e){hideWaitingPopup("server-app-container"),WarningAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdatedError,e.Message,7e3)}})});var l=$("#oauth-image-upload-box"),u=$("#openid-image-upload-box"),h=$("#jwt-image-upload-box"),c=$("#azure-b2c-image-upload-box");function i(t){var e=t.currentTarget.files[0],i=t.srcElement.name,t=$('input[name="'+i+'"]').parents(".auth-image-upload-box").siblings(".validation-message");try{var n=e.size/1024;if($.inArray(e.type,["image/jpg","image/jpeg","image/png","image/svg+xml"])<0)throw window.Server.App.LocalizationContent.AuthImageAllowedFormat;if(500<n)throw window.Server.App.LocalizationContent.AuthImageAllowedSize;if(!e)throw window.Server.App.LocalizationContent.InvalidFile;((e,t)=>{"oauthLogoUrl"===t?i=l.find(".js-image-preview"):"openidLogoUrl"===t?i=u.find(".js-image-preview"):"jwtLogoUrl"===t?i=h.find(".js-image-preview"):"azureB2CLogoUrl"===t&&(i=c.find(".js-image-preview"));var i,n=new FileReader;n.onload=function(){a.$apply(function(){var e="url("+n.result+")";i.css("backgroundImage",e),"openidLogoUrl"===t?(a.openidLogoUrl=e,openidLogoChanged=!0):"oauthLogoUrl"===t?(a.oauthLogoUrl=e,oauthLogoChanged=!0):"jwtLogoUrl"===t?(a.jwtLogoUrl=e,jwtLogoChanged=!0):"azureB2CLogoUrl"===t&&(a.azureB2CLogoUrl=e,azureB2CLogoChanged=!0),("openidLogoUrl"===t?$("#openid-image-upload-box"):$("#oauth-image-upload-box")).siblings(".validation-message").html("")})},n.readAsDataURL(e)})(e,i),t.html(""),a.$apply(function(){"openidLogoUrl"===i?a.oauthSettingsForm.isValidOpenIdLogoUrl=!0:"oauthLogoUrl"===i?a.oauthSettingsForm.isValidOAuthLogoUrl=!0:"jwtLogoUrl"===i?a.jwtSettingsForm.isValidjwtLogoUrl=!0:"azureB2CLogoUrl"===i&&(a.ssoSettingsb2cForm.isValidAzureB2CLogoUrl=!0)})}catch(e){t.html(e),a.$apply(function(){"openidLogoUrl"===i?a.oauthSettingsForm.isValidOpenIdLogoUrl=!0:"oauthLogoUrl"===i?a.oauthSettingsForm.isValidOAuthLogoUrl=!0:"jwtLogoUrl"===i?a.jwtSettingsForm.isValidjwtLogoUrl=!0:"azureB2CLogoUrl"===i&&(a.ssoSettingsb2cForm.isValidAzureB2CLogoUrl=!0)})}}function p(e){var t="oauth"===e?$("#oauth-group-import"):$("#openid-group-import"),i=("oauth"===e?document.getElementById("group-import-provider-oauth"):document.getElementById("group-import-provider-openid")).ej2_instances[0].value,n=null;switch(i){case"CognitoAWS":n={KnownProviderType:i,Cognito:{UserPoolId:t.find("input[name='userPoolId']").val().trim(),AwsAccesskeyId:t.find("input[name='awsAccesskeyId']").val().trim(),AwsAccesskeySecret:t.find("input[name='awsAccesskeySecret']").val().trim(),Region:t.find("input[name='cognitoRegion']").val().trim()}};break;case"Auth0":n={KnownProviderType:i,Auth0:{Audience:t.find("input[name='audience']").val().trim(),ExtensionURL:t.find("input[name='extensionUrl']").val().trim()}};break;case"Okta":n={KnownProviderType:i,Okta:{ApiToken:t.find("input[name='apiToken']").val().trim()}};break;case"OneLogin":n={KnownProviderType:i,OneLogin:{ApiClientId:t.find("input[name='apiClientId']").val().trim(),ApiClientSecret:t.find("input[name='apiClientSecret']").val().trim(),Region:t.find("input[name='oneloginRegion']").val().trim()}};break;default:n={KnownProviderType:i}}return n}l.find(".image-upload")[0].addEventListener("change",i),u.find(".image-upload")[0].addEventListener("change",i),h.find(".image-upload")[0].addEventListener("change",i),c.find(".image-upload")[0].addEventListener("change",i)}),$('#oauth-group-import input[type="text"], #openid-group-import input[type="text"]').on("keyup keydown",function(){var e=$(this).siblings(".validation-message"),t=$(this).closest(".input-field-margin");""===$(this).val().trim()?(e.removeClass("display-none"),t.addClass("has-error")):(e.addClass("display-none"),t.removeClass("has-error"))}),$("#enable-jwt").change(function(){jwtSigningKeyShowHide()}),$(document).on("click","#sendButton",function(){dialog.hide(),fnRegenerateSigningKey()}),$(document).on("keypress","#dialog",function(e){13==e.keyCode&&(dialog.hide(),fnRegenerateSigningKey())}),$(document).on("click","#generate-encryption-key",function(){fnRegenerateEncryptionKey()}),$(document).on("click","#generate-signing-key",function(){onRegenerateSigningKeyDialogOpen()}),$(document).on("click","#copy-signing-key",function(){fnCopySigningKey("#jwt-signing-key","#copy-signing-key")}),$(document).on("click","#copy-encryption-key",function(){fnCopySigningKey("#jwt-encryption-key","#copy-encryption-key")}),$(document).on("click","#openid-mobile-callback-link-copy",function(){copyToClipboard("#openid-mobile-callback-link","#openid-mobile-callback-link-copy")}),$(document).on("click","#openid-callback-link-copy",function(){copyToClipboard("#openid-callback-link","#openid-callback-link-copy")}),$(document).on("click","#oauth-mobile-callback-link-copy",function(){copyToClipboard("#oauth-mobile-callback-link","#oauth-mobile-callback-link-copy")}),$(document).on("click","#oauth-callback-link-copy",function(){copyToClipboard("#oauth-callback-link","#oauth-callback-link-copy")}),$(document).ready(function(){$(document).on("click","#cancel-settings",function(){window.location.href=window.location.href})});