function dropDownListInitialization(t,e,i){new ejs.dropdowns.DropDownList({index:0,floatLabelType:"Never",placeholder:e,cssClass:"e-outline e-custom e-non-float",enablePersistence:!0,change:onDropDownListChange,query:new ej.data.Query,allowFiltering:i,filterType:"Contains"}).appendTo(t)}function onDropDownListChange(t){"enable-ssl"==t.element.id&&onBaseUrlChange(t),"fontfamily"==t.element.id&&onFontChange(),"application-theme"==t.element.id&&onApplicationThemeChange(),"mail-account"==t.element.id&&emailConfiguration()}function groupImportDropDownListInitialization(t,e){new ejs.dropdowns.DropDownList({index:0,floatLabelType:"Never",placeholder:e,change:ongroupImportchange,cssClass:"e-outline e-custom e-non-float",enablePersistence:!0}).appendTo(t)}function fontDropDownListInitialization(t,e,i,n){new ejs.dropdowns.DropDownList({index:0,floatLabelType:"Never",placeholder:e,change:onFontChange,cssClass:"e-outline e-custom e-non-float",enablePersistence:!0,query:new ej.data.Query,allowFiltering:i,filterType:"Contains"}).appendTo(t)}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(u){u.extend(u.fn,{validate:function(t){var n;if(this.length)return(n=u.data(this[0],"validator"))||(this.attr("novalidate","novalidate"),n=new u.validator(t,this[0]),u.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(t){n.submitButton=t.currentTarget,u(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==u(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(i){function t(){var t,e;return n.submitButton&&(n.settings.submitHandler||n.formSubmitted)&&(t=u("<input type='hidden'/>").attr("name",n.submitButton.name).val(u(n.submitButton).val()).appendTo(n.currentForm)),!(n.settings.submitHandler&&!n.settings.debug)||(e=n.settings.submitHandler.call(n,n.currentForm,i),t&&t.remove(),void 0!==e&&e)}return n.settings.debug&&i.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,t()):n.form()?n.pendingRequest?!(n.formSubmitted=!0):t():(n.focusInvalid(),!1)})),n);t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,e,i;return u(this[0]).is("form")?t=this.validate().form():(i=[],t=!0,e=u(this[0].form).validate(),this.each(function(){(t=e.element(this)&&t)||(i=i.concat(e.errorList))}),e.errorList=i),t},rules:function(t,e){var i,n,a,o,s,r=this[0],d=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=r&&(!r.form&&d&&(r.form=this.closest("form")[0],r.name=this.attr("name")),null!=r.form)){if(t)switch(i=u.data(r.form,"validator").settings,n=i.rules,a=u.validator.staticRules(r),t){case"add":u.extend(a,u.validator.normalizeRule(e)),delete a.messages,n[r.name]=a,e.messages&&(i.messages[r.name]=u.extend(i.messages[r.name],e.messages));break;case"remove":return e?(s={},u.each(e.split(/\s/),function(t,e){s[e]=a[e],delete a[e]}),s):(delete n[r.name],a)}return(d=u.validator.normalizeRules(u.extend({},u.validator.classRules(r),u.validator.attributeRules(r),u.validator.dataRules(r),u.validator.staticRules(r)),r)).required&&(o=d.required,delete d.required,d=u.extend({required:o},d)),d.remote&&(o=d.remote,delete d.remote,d=u.extend(d,{remote:o})),d}}});function e(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var i;u.extend(u.expr.pseudos||u.expr[":"],{blank:function(t){return!e(""+u(t).val())},filled:function(t){t=u(t).val();return null!==t&&!!e(""+t)},unchecked:function(t){return!u(t).prop("checked")}}),u.validator=function(t,e){this.settings=u.extend(!0,{},u.validator.defaults,t),this.currentForm=e,this.init()},u.validator.format=function(i,t){return 1===arguments.length?function(){var t=u.makeArray(arguments);return t.unshift(i),u.validator.format.apply(this,t)}:(void 0===t||((t=2<arguments.length&&t.constructor!==Array?u.makeArray(arguments).slice(1):t).constructor!==Array&&(t=[t]),u.each(t,function(t,e){i=i.replace(new RegExp("\\{"+t+"\\}","g"),function(){return e})})),i)},u.extend(u.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:u([]),errorLabelContainer:u([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){9===e.which&&""===this.elementValue(t)||-1!==u.inArray(e.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(t,e,i){("radio"===t.type?this.findByName(t.name):u(t)).addClass(e).removeClass(i)},unhighlight:function(t,e,i){("radio"===t.type?this.findByName(t.name):u(t)).removeClass(e).addClass(i)}},setDefaults:function(t){u.extend(u.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:u.validator.format("Please enter no more than {0} characters."),minlength:u.validator.format("Please enter at least {0} characters."),rangelength:u.validator.format("Please enter a value between {0} and {1} characters long."),range:u.validator.format("Please enter a value between {0} and {1}."),max:u.validator.format("Please enter a value less than or equal to {0}."),min:u.validator.format("Please enter a value greater than or equal to {0}."),step:u.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var e,i,n=void 0!==u(this).attr("contenteditable")&&"false"!==u(this).attr("contenteditable");!this.form&&n&&(this.form=u(this).closest("form")[0],this.name=u(this).attr("name")),a===this.form&&(n=u.data(this.form,"validator"),e="on"+t.type.replace(/^validate/,""),(i=n.settings)[e])&&!u(this).is(i.ignore)&&i[e].call(n,this,t)}this.labelContainer=u(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||u(this.currentForm),this.containers=u(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,a=this.currentForm,n=this.groups={};u.each(this.settings.groups,function(i,t){"string"==typeof t&&(t=t.split(/\s/)),u.each(t,function(t,e){n[e]=i})}),i=this.settings.rules,u.each(i,function(t,e){i[t]=u.validator.normalizeRule(e)}),u(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&u(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),u.extend(this.submitted,this.errorMap),this.invalid=u.extend({},this.errorMap),this.valid()||u(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(t){var e,i,n=this.clean(t),a=this.validationTargetFor(n),o=this,s=!0;return void 0===a?delete this.invalid[n.name]:(this.prepareElement(a),this.currentElements=u(a),(i=this.groups[a.name])&&u.each(this.groups,function(t,e){e===i&&t!==a.name&&(n=o.validationTargetFor(o.clean(o.findByName(t))))&&n.name in o.invalid&&(o.currentElements.push(n),s=o.check(n)&&s)}),e=!1!==this.check(a),s=s&&e,this.invalid[a.name]=!e,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),u(t).attr("aria-invalid",!e)),s},showErrors:function(e){var i;e&&(u.extend((i=this).errorMap,e),this.errorList=u.map(this.errorMap,function(t,e){return{message:t,element:i.findByName(e)[0]}}),this.successList=u.grep(this.successList,function(t){return!(t.name in e)})),this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){u.fn.resetForm&&u(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)void 0!==t[e]&&null!==t[e]&&!1!==t[e]&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{u(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===u.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var i=this,n={};return u(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var t=this.name||u(this).attr("name"),e=void 0!==u(this).attr("contenteditable")&&"false"!==u(this).attr("contenteditable");return!t&&i.settings.debug&&window.console&&console.error("%o has no name assigned",this),e&&(this.form=u(this).closest("form")[0],this.name=t),!(this.form!==i.currentForm||t in n||!i.objectLength(u(this).rules())||(n[t]=!0,0))})},clean:function(t){return u(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return u(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=u([]),this.toHide=u([])},reset:function(){this.resetInternals(),this.currentElements=u([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(t){var e=u(t),i=t.type,n=void 0!==e.attr("contenteditable")&&"false"!==e.attr("contenteditable");return"radio"===i||"checkbox"===i?this.findByName(t.name).filter(":checked").val():"number"===i&&void 0!==t.validity?t.validity.badInput?"NaN":e.val():(t=n?e.text():e.val(),"file"===i?"C:\\fakepath\\"===t.substr(0,12)?t.substr(12):0<=(n=t.lastIndexOf("/"))||0<=(n=t.lastIndexOf("\\"))?t.substr(n+1):t:"string"==typeof t?t.replace(/\r/g,""):t)},check:function(e){e=this.validationTargetFor(this.clean(e));var t,i,n,a,o=u(e).rules(),s=u.map(o,function(t,e){return e}).length,r=!1,d=this.elementValue(e);for(i in"function"==typeof o.normalizer?a=o.normalizer:"function"==typeof this.settings.normalizer&&(a=this.settings.normalizer),a&&(d=a.call(e,d),delete o.normalizer),o){n={method:i,parameters:o[i]};try{if("dependency-mismatch"===(t=u.validator.methods[i].call(this,d,e,n.parameters))&&1===s)r=!0;else{if(r=!1,"pending"===t)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!t)return this.formatAndAdd(e,n),!1}}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+n.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+n.method+"' method."),t}}if(!r)return this.objectLength(o)&&this.successList.push(e),!0},customDataMessage:function(t,e){return u(t).data("msg"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())||u(t).data("msg")},customMessage:function(t,e){t=this.settings.messages[t];return t&&(t.constructor===String?t:t[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(t,e){var i=this.findDefined(this.customMessage(t.name,(e="string"==typeof e?{method:e}:e).method),this.customDataMessage(t,e.method),!this.settings.ignoreTitle&&t.title||void 0,u.validator.messages[e.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),n=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,e.parameters,t):n.test(i)&&(i=u.validator.format(i.replace(n,"{$1}"),e.parameters)),i},formatAndAdd:function(t,e){var i=this.defaultMessage(t,e);this.errorList.push({message:i,element:t,method:e.method}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(t){return t=this.settings.wrapper?t.add(t.parent(this.settings.wrapper)):t},defaultShowErrors:function(){for(var t,e,i=0;this.errorList[i];i++)e=this.errorList[i],this.settings.highlight&&this.settings.highlight.call(this,e.element,this.settings.errorClass,this.settings.validClass),this.showLabel(e.element,e.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(i=0;this.successList[i];i++)this.showLabel(this.successList[i]);if(this.settings.unhighlight)for(i=0,t=this.validElements();t[i];i++)this.settings.unhighlight.call(this,t[i],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return u(this.errorList).map(function(){return this.element})},showLabel:function(t,e){var i,n,a,o=this.errorsFor(t),s=this.idOrName(t),r=u(t).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(e)):(n=o=u("<"+this.settings.errorElement+">").attr("id",s+"-error").addClass(this.settings.errorClass).html(e||""),this.settings.wrapper&&(n=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement.call(this,n,u(t)):n.insertAfter(t),o.is("label")?o.attr("for",s):0===o.parents("label[for='"+this.escapeCssMeta(s)+"']").length&&(n=o.attr("id"),r?r.match(new RegExp("\\b"+this.escapeCssMeta(n)+"\\b"))||(r+=" "+n):r=n,u(t).attr("aria-describedby",r),i=this.groups[t.name])&&u.each((a=this).groups,function(t,e){e===i&&u("[name='"+a.escapeCssMeta(t)+"']",a.currentForm).attr("aria-describedby",o.attr("id"))})),!e&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,t)),this.toShow=this.toShow.add(o)},errorsFor:function(t){var e=this.escapeCssMeta(this.idOrName(t)),t=u(t).attr("aria-describedby"),e="label[for='"+e+"'], label[for='"+e+"'] *";return t&&(e=e+", #"+this.escapeCssMeta(t).replace(/\s+/g,", #")),this.errors().filter(e)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||!this.checkable(t)&&t.id||t.name},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),u(t).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(t){return u(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,e){switch(e.nodeName.toLowerCase()){case"select":return u("option:selected",e).length;case"input":if(this.checkable(e))return this.findByName(e.name).filter(":checked").length}return t.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(t,e){return!!u(t,e.form).length},function:function(t,e){return t(e)}},optional:function(t){var e=this.elementValue(t);return!u.validator.methods.required.call(this,e,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,u(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,e){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],u(t).removeClass(this.settings.pendingClass),e&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(u(this.currentForm).submit(),this.submitButton&&u("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!e&&0===this.pendingRequest&&this.formSubmitted&&(u(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,e){return e="string"==typeof e&&e||"remote",u.data(t,"previousValue")||u.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:e})})},destroy:function(){this.resetForm(),u(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,e){t.constructor===String?this.classRuleSettings[t]=e:u.extend(this.classRuleSettings,t)},classRules:function(t){var e={},t=u(t).attr("class");return t&&u.each(t.split(" "),function(){this in u.validator.classRuleSettings&&u.extend(e,u.validator.classRuleSettings[this])}),e},normalizeAttributeRule:function(t,e,i,n){(n=/min|max|step/.test(i)&&(null===e||/number|range|text/.test(e))&&(n=Number(n),isNaN(n))?void 0:n)||0===n?t[i]=n:e===i&&"range"!==e&&(t[i]=!0)},attributeRules:function(t){var e,i,n={},a=u(t),o=t.getAttribute("type");for(e in u.validator.methods)i="required"===e?(i=t.getAttribute(e),""===i&&(i=!0),!!i):a.attr(e),this.normalizeAttributeRule(n,o,e,i);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(t){var e,i,n={},a=u(t),o=t.getAttribute("type");for(e in u.validator.methods)i=a.data("rule"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()),""===i&&(i=!0),this.normalizeAttributeRule(n,o,e,i);return n},staticRules:function(t){var e={},i=u.data(t.form,"validator");return e=i.settings.rules?u.validator.normalizeRule(i.settings.rules[t.name])||{}:e},normalizeRules:function(n,a){return u.each(n,function(t,e){if(!1===e)delete n[t];else if(e.param||e.depends){var i=!0;switch(typeof e.depends){case"string":i=!!u(e.depends,a.form).length;break;case"function":i=e.depends.call(a,a)}i?n[t]=void 0===e.param||e.param:(u.data(a.form,"validator").resetElements(u(a)),delete n[t])}}),u.each(n,function(t,e){n[t]="function"==typeof e&&"normalizer"!==t?e(a):e}),u.each(["minlength","maxlength"],function(){n[this]&&(n[this]=Number(n[this]))}),u.each(["rangelength","range"],function(){var t;n[this]&&(Array.isArray(n[this])?n[this]=[Number(n[this][0]),Number(n[this][1])]:"string"==typeof n[this]&&(t=n[this].replace(/[\[\]]/g,"").split(/[\s,]+/),n[this]=[Number(t[0]),Number(t[1])]))}),u.validator.autoCreateRanges&&(null!=n.min&&null!=n.max&&(n.range=[n.min,n.max],delete n.min,delete n.max),null!=n.minlength)&&null!=n.maxlength&&(n.rangelength=[n.minlength,n.maxlength],delete n.minlength,delete n.maxlength),n},normalizeRule:function(t){var e;return"string"==typeof t&&(e={},u.each(t.split(/\s/),function(){e[this]=!0}),t=e),t},addMethod:function(t,e,i){u.validator.methods[t]=e,u.validator.messages[t]=void 0!==i?i:u.validator.messages[t],e.length<3&&u.validator.addClassRules(t,u.validator.normalizeRule(t))},methods:{required:function(t,e,i){return this.depend(i,e)?"select"===e.nodeName.toLowerCase()?(i=u(e).val())&&0<i.length:this.checkable(e)?0<this.getLength(t,e):null!=t&&0<t.length:"dependency-mismatch"},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(t)},date:(i=!1,function(t,e){return i||(i=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())}),dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(t,e,i){t=Array.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||i<=t},maxlength:function(t,e,i){t=Array.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||t<=i},rangelength:function(t,e,i){t=Array.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||t>=i[0]&&t<=i[1]},min:function(t,e,i){return this.optional(e)||i<=t},max:function(t,e,i){return this.optional(e)||t<=i},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},step:function(t,e,i){function n(t){return(t=(""+t).match(/(?:\.(\d+))?$/))&&t[1]?t[1].length:0}function a(t){return Math.round(t*Math.pow(10,o))}var o,s=u(e).attr("type"),r="Step attribute on input type "+s+" is not supported.",d=new RegExp("\\b"+s+"\\b"),l=!0;if(s&&!d.test(["text","number","range"].join()))throw new Error(r);return o=n(i),(n(t)>o||a(t)%a(i)!=0)&&(l=!1),this.optional(e)||l},equalTo:function(t,e,i){i=u(i);return this.settings.onfocusout&&i.not(".validate-equalTo-blur").length&&i.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){u(e).valid()}),t===i.val()},remote:function(n,a,t,o){if(this.optional(a))return"dependency-mismatch";o="string"==typeof o&&o||"remote";var s,e,r=this.previousValue(a,o);return this.settings.messages[a.name]||(this.settings.messages[a.name]={}),r.originalMessage=r.originalMessage||this.settings.messages[a.name][o],this.settings.messages[a.name][o]=r.message,e=u.param(u.extend({data:n},(t="string"==typeof t?{url:t}:t).data)),r.old===e?r.valid:(r.old=e,(s=this).startRequest(a),(e={})[a.name]=n,u.ajax(u.extend(!0,{mode:"abort",port:"validate"+a.name,dataType:"json",data:e,context:s.currentForm,success:function(t){var e,i=!0===t||"true"===t;s.settings.messages[a.name][o]=r.originalMessage,i?(e=s.formSubmitted,s.resetInternals(),s.toHide=s.errorsFor(a),s.formSubmitted=e,s.successList.push(a),s.invalid[a.name]=!1,s.showErrors()):(e={},t=t||s.defaultMessage(a,{method:o,parameters:n}),e[a.name]=r.message=t,s.invalid[a.name]=!0,s.showErrors(e)),r.valid=i,s.stopRequest(a,i)}},t)),"pending")}}});var n,a={};return u.ajaxPrefilter?u.ajaxPrefilter(function(t,e,i){var n=t.port;"abort"===t.mode&&(a[n]&&a[n].abort(),a[n]=i)}):(n=u.ajax,u.ajax=function(t){var e=("mode"in t?t:u.ajaxSettings).mode,i=("port"in t?t:u.ajaxSettings).port;return"abort"===e?(a[i]&&a[i].abort(),a[i]=n.apply(this,arguments),a[i]):n.apply(this,arguments)}),u}),$(function(){$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?($(this).siblings("input").attr("type","text").val(),$(this).removeClass("su-show").addClass("su-hide").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touchstart",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("touchend",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),window.innerWidth<1041&&$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("click",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show").addClass("su-hide").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touch",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show"),$(this).addClass("su-hide")):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide"),$(this).addClass("su-show"))})});var dialog,oauthLogoChanged=!1,openidLogoChanged=!1,jwtLogoChanged=!1,azureB2CLogoChanged=!1;function authenticationDialogBoxClose(){document.getElementById("default-authentication-confirmation-diolog").ej2_instances[0].hide()}function getDefaultAuthDisplayName(t){return"customoauth"===t.toLowerCase()?"OAuth 2.0":"customoidc"===t.toLowerCase()?"OpenID Connect":"jwtsso"===t.toLowerCase()?"JWT SSO":"azuread"===t.toLowerCase()?"Azure ADs":"azureadb2c"===t.toLowerCase()?"Azure AD B2C":void 0}function fnCopySigningKey(t,e){var i;$("#enable-jwt").is(":checked")&&(void 0!==navigator.clipboard?(i=$(t).val(),navigator.clipboard.writeText(i)):((i=$(t)).attr("type","text").select(),document.execCommand("copy"),i.attr("type","password")),setTimeout(function(){$(e).attr("data-original-title",window.Server.App.LocalizationContent.Copied),$(e).tooltip("show")},200),setTimeout(function(){$(e).attr("data-original-title",window.Server.App.LocalizationContent.ClickToCopy),$(e).tooltip()},3e3))}function signingKeyConfirmationDlg(){var t='<button id="sendButton" class="e-control e-btn e-primary secondary-button">'+window.Server.App.LocalizationContent.OKButton+" </button>",e=new ej.buttons.Button;(dialog=new ej.popups.Dialog({header:"Regenerate Signing Key",footerTemplate:t,content:document.getElementById("dlgContent"),showCloseIcon:!0,width:"472px",height:"200px",isModal:!0,visible:!1,beforeOpen:onBeforeopen})).appendTo("#dialog"),e.appendTo("#sendButton")}function onBeforeopen(){document.getElementById("dlgContent").style.visibility="visible"}function fnRegenerateSigningKey(){$.ajax({type:"POST",url:refreshSigningKeyUrl,success:function(t){0!=t?(SuccessAlert(window.Server.App.LocalizationContent.RegenerateKey,window.Server.App.LocalizationContent.RegenerateKeySuccess,7e3),$("#jwt-signing-key").val(t)):WarningAlert(window.Server.App.LocalizationContent.RegenerateKey,window.Server.App.LocalizationContent.RegenerateKeyError,null,7e3)},error:function(){WarningAlert(window.Server.App.LocalizationContent.RegenerateKey,window.Server.App.LocalizationContent.RegenerateKeyError,null,7e3)}})}function onRegenerateSigningKeyDialogOpen(){$("#enable-jwt").is(":checked")&&dialog.show()}function jwtSigningKeyShowHide(){$("#enable-jwt").is(":checked")?$("#jwt-signing-key,#show-signing-key").prop("disabled",!1):$("#jwt-signing-key,#show-signing-key").prop("disabled",!0)}function ongroupImportchange(t){var e;switch((e=("group-import-provider-oauth"===t.element.id?$(".group-import-provider-type-oauth"):$(".group-import-provider-type-openid")).parent(".e-input-group").closest(".group-import")).find(".cognito-fields, .auth0-fields, .okta-fields, .onelogin-fields").addClass("display-none"),this.value){case"CognitoAWS":e.find(".cognito-fields").removeClass("display-none");break;case"Auth0":e.find(".auth0-fields").removeClass("display-none");break;case"Okta":e.find(".okta-fields").removeClass("display-none");break;case"OneLogin":e.find(".onelogin-fields").removeClass("display-none")}}$(document).ready(function(){jwtSigningKeyShowHide(),t="body",regexIe8.test(userAgent)&&$(t).find("input[type=text][class!='hidden-input'],input[type=password][class!='hidden-input'],textarea[id='txt_welcome_note']").each(function(){""===$(this).val()?$($("<div>",{class:"placeholder",text:$(this).attr("placeholder")})).insertAfter(this).show():$($("<div>",{class:"placeholder",text:$(this).attr("placeholder"),style:"display:block"})).insertAfter(this).hide()}),signingKeyConfirmationDlg();var t,a=angular.element("#auth-settings-container").scope();function e(t){var e="oauthLogoUrl"===t.currentTarget.name||"oauthProviderName"===t.currentTarget.name||"oauthAuthorizationEP"===t.currentTarget.name?a.oauthLogoUrl:"openidLogoUrl"===t.currentTarget.name||"openidProviderName"===t.currentTarget.name||"openidAuthority"===t.currentTarget.name?a.openidLogoUrl:"azureB2CLogoUrl"===t.currentTarget.name||"application-id-b2c"===t.currentTarget.name||"tenant-name-b2c"===t.currentTarget.name?a.azureB2CLogoUrl:a.jwtLogoUrl;null!=e&&""!==e||("oauthLogoUrl"===t.currentTarget.name||"oauthProviderName"===t.currentTarget.name||"oauthAuthorizationEP"===t.currentTarget.name?$("#oauth-image-upload-box"):"openidLogoUrl"===t.currentTarget.name||"openidProviderName"===t.currentTarget.name||"openidAuthority"===t.currentTarget.name?$("#openid-image-upload-box"):"azureB2CLogoUrl"===t.currentTarget.name||"application-id-b2c"===t.currentTarget.name||"tenant-name-b2c"===t.currentTarget.name?$("#azure-b2c-image-upload-box"):$("#jwt-image-upload-box")).siblings(".validation-message").removeClass("ng-hide").html(window.Server.App.LocalizationContent.SelectAuthProviderLogo),a.$apply(function(){"oauthLogoUrl"===t.currentTarget.name||"oauthProviderName"===t.currentTarget.name||"oauthAuthorizationEP"===t.currentTarget.name?a.oauthSettingsForm.isValidOAuthLogoUrl=!1:"openidLogoUrl"===t.currentTarget.name||"openidProviderName"===t.currentTarget.name||"openidAuthority"===t.currentTarget.name?a.openidSettingsForm.isValidOpenIdLogoUrl=!1:"azureB2CLogoUrl"===t.currentTarget.name||"application-id-b2c"===t.currentTarget.name||"tenant-name-b2c"===t.currentTarget.name?a.ssoSettingsb2cForm.isValidAzureB2CLogoUrl=!1:a.jwtSettingsForm.isValidjwtLogoUrl=!1})}function n(){var t={IsEnabled:$("#enable-sso").is(":checked"),IsSloEnabled:$("#enable-slo").is(":checked"),ApplicationId:$("input[name='ApplicationId']").val().trim(),ApplicationIdURI:$("input[name='ApplicationIdURI']").val().trim(),TenantName:$("input[name='TenantName']").val().trim(),MobileApplicationId:$("input[name='MobileApplicationId']").val().trim()};$.ajax({url:updatesamlsettingsUrl,type:"POST",data:{samlSettingsData:t},success:function(t){(a.categories=t).result?(SuccessAlert(window.Server.App.LocalizationContent.SSOSettings,window.Server.App.LocalizationContent.SSOSettingsUpdated,7e3),window.location.href=window.location.href):WarningAlert(window.Server.App.LocalizationContent.SSOSettings,window.Server.App.LocalizationContent.SSOSettingsUpdateError,t.Message,7e3)},error:function(t){WarningAlert(window.Server.App.LocalizationContent.SSOSettings,window.Server.App.LocalizationContent.SSOSettingsUpdateError,t.Message,7e3)}})}function o(){var t=$("#enable-sso-b2c").is(":checked"),e=$("#enable-slo-b2c").is(":checked"),t={IsEnabled:t,AuthProvider:$("input[name='azureADB2CAuthenticationProvider']").val().trim(),LogoUrl:a.azureB2CLogoUrl,IsLogoChanged:azureB2CLogoChanged,AzureADB2CSettings:{IsSloEnabled:e,Logo:$("input[name='azureB2CLogo']").val().trim(),ApplicationId:$("input[name='ApplicationIdB2C']").val().trim(),TenantName:$("input[name='TenantNameB2C']").val().trim(),SigninPolicy:$("input[name='PolicyB2C']").val().trim(),AzureB2CProviderName:$("input[name='AzureB2CProviderName']").val().trim()}};$.ajax({url:updateauthsettingsUrl,type:"POST",data:{AuthSettingsData:JSON.stringify(t)},success:function(t){(a.categories=t).result?(SuccessAlert(window.Server.App.LocalizationContent.AzureB2CSettings,window.Server.App.LocalizationContent.AzureB2CSettingsUpdated,7e3),window.location.href=window.location.href):WarningAlert(window.Server.App.LocalizationContent.AzureB2CSettings,window.Server.App.LocalizationContent.AzureB2CSettingsUpdateError,t.Message,7e3)},error:function(t){WarningAlert(window.Server.App.LocalizationContent.AzureB2CSettings,window.Server.App.LocalizationContent.AzureB2CSettingsUpdateError,t.Message,7e3)}})}function s(){var t={IsEnabled:a.windowsAdEnabled,AuthProvider:"WindowsAD",WindowsADSettings:{Domain:$("input[name='windowsadSettingsDomain']").val().trim()}};$.ajax({url:updateauthsettingsUrl,type:"POST",data:{AuthSettingsData:JSON.stringify(t)},beforeSend:showWaitingPopup("server-app-container"),success:function(t){hideWaitingPopup("server-app-container"),t.IsSuccess?(window.location.href=window.location.href,SuccessAlert(window.Server.App.LocalizationContent.WindowsAdSettings,window.Server.App.LocalizationContent.WindowsAdSettingsUpdated,7e3)):WarningAlert(window.Server.App.LocalizationContent.WindowsAdSettings,window.Server.App.LocalizationContent.WindowsAdSettingsUpdateError,t.Message,7e3)},error:function(){hideWaitingPopup("server-app-container")}})}function r(){var t={IsEnabled:$("#enable-jwt").is(":checked"),AuthProvider:$("input[name='jwtAuthenticationProvider']").val().trim(),LogoUrl:a.jwtLogoUrl,IsLogoChanged:jwtLogoChanged,JwtSettings:{Name:$("input[name='jwtName']").val().trim(),LoginUrl:$("input[name='jwtLoginUrl']").val().trim(),LogOutUrl:$("input[name='jwtLogOutUrl']").val().trim(),Logo:$("input[name='jwtLogo']").val().trim()}};$.ajax({type:"POST",url:updateauthsettingsUrl,data:{AuthSettingsData:JSON.stringify(t)},beforeSend:showWaitingPopup("server-app-container"),success:function(t){hideWaitingPopup("server-app-container"),t.IsSuccess?(window.location.href=window.location.href,SuccessAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdated,7e3)):WarningAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdatedError,t.Message,7e3)},error:function(){hideWaitingPopup("server-app-container")}})}function d(e){var t=function(t){var e=$("#"+t+"IsEnabled").is(":checked");e=e?"oauth"===t?{IsEnabled:e,OverwriteSiteSetting:$("input[name='oauthOverwriteSiteSetting']").is(":checked"),AuthProvider:$("input[name='oauthAuthenticationProvider']").val().trim(),LogoUrl:a.oauthLogoUrl,IsLogoChanged:oauthLogoChanged,OAuthAuthSettings:{ProviderName:$("input[name='oauthProviderName']").val().trim(),ClientId:$("input[name='oauthClientId']").val().trim(),ClientSecret:$("input[name='oauthClientSecret']").val().trim(),AuthorizationEndPoint:$("input[name='oauthAuthorizationEP']").val().trim(),TokenEndPoint:$("input[name='oauthTokenEP']").val().trim(),TokenEndPointMethod:document.getElementById("token-method-type").ej2_instances[0].value,UserInfoEndPoint:$("input[name='oauthUserInfoEP']").val().trim(),UserInfoEndPointMethod:document.getElementById("user-info-method-type").ej2_instances[0].value,Scopes:$("input[name='oauthScopes']").val().trim(),UserInfoEmail:$("input[name='userInfoEmail']").val().trim(),UserInfoFirstname:$("input[name='userInfoFirstname']").val().trim(),UserInfoLastname:$("input[name='userInfoLastname']").val().trim(),Logo:$("input[name='oauthLogo']").val().trim(),LogoutEndPoint:$("input[name='oauthLogoutEndpoint']").val().trim(),GroupImportSettings:p("oauth"),CanCreateAccount:$("#enable-oauth-account-creation").is(":checked")}}:"openid"===t?{IsEnabled:e,OverwriteSiteSetting:$("input[name='openidOverwriteSiteSetting']").is(":checked"),AuthProvider:$("input[name='openidAuthenticationProvider']").val().trim(),LogoUrl:a.openidLogoUrl,IsLogoChanged:openidLogoChanged,OIDCAuthSettings:{ProviderName:$("input[name='openidProviderName']").val().trim(),ClientId:$("input[name='openidClientId']").val().trim(),ClientSecret:$("input[name='openidClientSecret']").val().trim(),Identifier:$("input[name='openidIdentifier']").val().trim(),Authority:$("input[name='openidAuthority']").val().trim(),Logo:$("input[name='openidLogo']").val().trim(),LogoutUrl:$("input[name='openidLogoutUrl']").val().trim(),GroupImportSettings:p("openid"),CanCreateAccount:$("#enable-openid-account-creation").is(":checked")}}:{IsEnabled:e,LoginProvider:$("#login-provider-type").val()}:{IsEnabled:e,AuthProvider:$("input[name='"+t+"AuthenticationProvider']").val().trim()};return e}(e);$.ajax({type:"POST",url:window.updateauthsettingsUrl,data:{AuthSettingsData:JSON.stringify(t)},beforeSend:showWaitingPopup("content-area"),success:function(t){hideWaitingPopup("content-area"),t.IsSuccess?(SuccessAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdated,7e3),"oauth"===e?oauthLogoChanged=!1:openidLogoChanged=!1,window.location.href=window.location.href):WarningAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdatedError,t.Message,7e3)},error:function(){hideWaitingPopup("content-area")}})}a.$apply(function(){a.oauthSettingsForm.isValidOAuthLogoUrl=""!=a.oauthLogoUrl.$viewValue,a.oauthSettingsForm.isValidOpenIdLogoUrl=""!=a.openidLogoUrl.$viewValue}),new ejs.popups.Dialog({header:window.Server.App.LocalizationContent.DefaultAuthenticationConfirmation,showCloseIcon:!0,width:"472px",close:"authenticationDialogBoxClose",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"},buttons:[{click:function(){authenticationDialogBoxClose()},buttonModel:{content:window.Server.App.LocalizationContent.NoButton}},{click:function(){document.getElementById("default-authentication-confirmation-diolog").ej2_instances[0].hide(),"oauth"===this.id||"openid"===this.id?d(this.id):"jwt"===this.id?r():"sso"===this.id?n():"sso-b2c"===this.id?o():"windows-ad"===this.id&&s()},buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0,cssClass:"update-oauth-or-openid-settings"}}]}).appendTo("#default-authentication-confirmation-diolog"),dropDownListInitialization("#login-provider-type",window.Server.App.LocalizationContent.DefaultAuthenticationSettings),dropDownListInitialization("#token-method-type",""),dropDownListInitialization("#user-info-method-type",""),groupImportDropDownListInitialization("#group-import-provider-oauth",window.Server.App.LocalizationContent.Provider,"Oauth"),groupImportDropDownListInitialization("#group-import-provider-openid",window.Server.App.LocalizationContent.Provider,"OpenId"),0!=providerNameCount&&(document.getElementById("login-provider-type").ej2_instances[0].value=selectedDefaultAuthValue,document.getElementById("login-provider-type").ej2_instances[0].text=selectedDefaultAuthText),$("#enable-defaultauthentication").is(":checked")||($("#update-defaultauthlogin-settings").prop("disabled",!0),0!=providerNameCount&&(document.getElementById("login-provider-type").ej2_instances[0].enabled=!1)),$(document).on("click","#enable-defaultauthentication",function(){$("#enable-defaultauthentication").is(":checked")?(0!=providerNameCount&&(document.getElementById("login-provider-type").ej2_instances[0].enabled=!0),$('[data-id="login-provider-type"]').removeClass("disabled").next().find("li").removeClass("disabled"),$("#update-defaultauthlogin-settings").attr("disabled",!1)):(0!=providerNameCount&&(document.getElementById("login-provider-type").ej2_instances[0].enabled=!1),$('[data-id="login-provider-type"]').addClass("disabled"),$("#update-defaultauthlogin-settings").prop("disabled",!1))}),$("#auth-settings-container").is(":visible")&&(location.href.match(/openid-settings/)?($("#openid-settings").tab("show"),$("#update-oauth-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide()):location.href.match(/oauth-settings/)?($("#oauth-settings").tab("show"),$("#update-openid-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide()):location.href.match(/jwt-settings/)?($("#jwt-settings").tab("show"),$("#update-saml-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-azure-b2c-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide()):location.href.match(/azure-ad-settings/)?($("#azure-ad-settings").tab("show"),$("#update-azure-b2c-settings").hide(),$("#update-jwt-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide()):location.href.match(/azure-ad-b2c-settings/)?($("#azure-ad-b2c-settings").tab("show"),$("#update-saml-settings").hide(),$("#update-jwt-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide()):location.href.match(/windows-ad-settings/)?($("#windows-ad-settings").tab("show"),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide()):($("#default-authentication-settings").tab("show"),$("#update-oauth-settings").hide(),$("#update-openid-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),"?view=default-authentication"!=window.location.search.toString()&&history.pushState(null,"","?view=default-authentication"))),$("a[data-toggle='tab']").on("click",function(t){"oauth-settings"==$(this).attr("id")?($("#update-oauth-settings").show(),$("#update-openid-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),"?view=oauth-settings"!=window.location.search.toString()&&history.pushState(null,"","?view=oauth-settings")):"openid-settings"==$(this).attr("id")?($("#update-openid-settings").show(),$("#update-oauth-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),"?view=openid-settings"!=window.location.search.toString()&&history.pushState(null,"","?view=openid-settings")):"default-authentication-settings"==$(this).attr("id")?(0==providerNameCount?$("#update-defaultauthlogin-settings").hide():$("#update-defaultauthlogin-settings").show(),$("#update-openid-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-oauth-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),"?view=default-authentication"!=window.location.search.toString()&&history.pushState(null,"","?view=default-authentication")):"default-authentication-settings-info"==$(this).attr("id")?($("#update-defaultauthlogin-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-oauth-settings").hide(),$("#update-openid-settings").hide(),$("#update-jwt-settings").hide(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),"?tab=defaultauth-settings"!=window.location.search.toString()&&history.pushState(null,"","?tab=defaultauth-settings"),updateauthsettingsUrl):"jwt-settings"==$(this).attr("id")?($("#update-jwt-settings").show(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide(),"?view=jwt-settings"!=window.location.search.toString()&&history.pushState(null,"","?view=jwt-settings")):"azure-ad-settings"==$(this).attr("id")?($("#update-saml-settings").show(),$("#update-azure-b2c-settings").hide(),$("#update-jwt-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide(),"?view=azure-ad-settings"!=window.location.search.toString()&&history.pushState(null,"","?view=azure-ad-settings")):"azure-ad-b2c-settings"==$(this).attr("id")?($("#update-saml-settings").hide(),$("#update-azure-b2c-settings").show(),$("#update-jwt-settings").hide(),$("#update-windowsad-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide(),"?view=azure-ad-b2c-settings"!=window.location.search.toString()&&history.pushState(null,"","?view=azure-ad-b2c-settings")):"windows-ad-settings"==$(this).attr("id")&&($("#update-windowsad-settings").show(),$("#update-saml-settings").hide(),$("#update-azure-b2c-settings").hide(),$("#update-jwt-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide(),"?view=windows-ad-settings"!=window.location.search.toString())&&history.pushState(null,"","?view=windows-ad-settings"),$(".success-message, .error-message").hide()}),a.hideValidationMessage=function(t,e){var i;"oauth"===e?i=$("#update-oauth-settings"):"openid"===e?i=$("#update-openid-settings"):"jwt"===e?i=$("#update-jwt-settings"):"azuread"===e?i=$("#update-saml-settings"):"azureadb2c"===e?i=$("#update-azure-b2c-settings"):"defaultauthentication"===e&&(i=$("#update-defaultauthlogin-settings")),t?("oauth"===e&&a.oauthSettingsForm.$invalid||"openid"===e&&a.openidSettingsForm.$invalid||"jwt"===e&&a.jwtSettingsForm.$invalid||"azuread"===e&&a.ssoSettingsForm.$invalid||"azureadb2c"===e&&a.ssoSettingsb2cForm.$invalid||"defaultauthentication"===e)&&i.prop("disabled",!0):"oauth"===e?(a.oauthSettingsForm.$setUntouched(),a.oauthSettingsForm.$setPristine(),$("#oauth-image-upload-box").siblings(".validation-message").html(""),""!=$("#oauth-provider-name").val()&&""!=$("#oauth-authorization-endpoint").val()&&""!=$("#oauth-token-endpoint").val()&&""!=$("#oauth-userinfo-endpoint").val()&&""!=$("#oauth-client-id").val()&&""!=$("#oauth-scopes").val()&&""!=$("#user-info-email").val()&&i.prop("disabled",!1)):"openid"===e?(a.openidSettingsForm.$setUntouched(),a.openidSettingsForm.$setPristine(),$("#openid-image-upload-box").siblings(".validation-message").html(""),""!=$("#openid-provider-name").val()&&""!=$("#openid-authority").val()&&""!=$("#openid-client-id").val()&&""!=$("#openid-identifier").val()&&i.prop("disabled",!1)):"jwt"===e?(a.jwtSettingsForm.$setUntouched(),a.jwtSettingsForm.$setPristine(),$("#jwt-image-upload-box").siblings(".validation-message").html("")):"azuread"===e?(a.ssoSettingsForm.$setUntouched(),a.ssoSettingsForm.$setPristine()):"azureadb2c"===e&&(a.ssoSettingsb2cForm.$setUntouched(),a.ssoSettingsb2cForm.$setPristine(),$("#azure-b2c-image-upload-box").siblings(".validation-message").html("")),"oauth"!==e&&"openid"!==e||(document.getElementById("group-import-provider-"+e).ej2_instances[0].enabled=$("#"+e+"IsEnabled").is(":checked"),document.getElementById("token-method-type").ej2_instances[0].enabled=$("#"+e+"IsEnabled").is(":checked"),document.getElementById("user-info-method-type").ej2_instances[0].enabled=$("#"+e+"IsEnabled").is(":checked")),$("span.validation-message").addClass("ng-hide")},$(document).on("focusout","#oauth-provider-name, #oauth-authorization-endpoint",function(t){e(t)}),$(document).on("focusout","#openid-provider-name, #openid-authority",function(t){e(t)}),$(document).on("focusout","#jwt-provider-name",function(t){e(t)}),$(document).on("focusout","#application-id-b2c, #tenant-name-b2c",function(t){e(t)}),$(document).on("click",".image-upload",function(t){e(t)}),$(".update-oauth-or-openid-settings").click(function(){document.getElementById("default-authentication-confirmation-diolog").ej2_instances[0].hide(),"oauth"===this.id||"openid"===this.id?d(this.id):"jwt"===this.id?r():"sso"===this.id?n():"sso-b2c"===this.id?o():"windows-ad"===this.id&&s()}),$(document).on("click",".update-auth-settings",function(){$(".logo-container .validation-message").html(""),"update-oauth-settings"===this.id?(t="oauth",e=$("input[name='oauthAuthenticationProvider']").val().trim()):"update-openid-settings"===this.id?(t="openid",e=$("input[name='openidAuthenticationProvider']").val().trim()):"update-jwt-settings"===this.id?(t="jwt",e=$("input[name='jwtAuthenticationProvider']").val().trim()):"update-saml-settings"===this.id?(t="sso",e=$("input[name='azureADAuthenticationProvider']").val().trim()):"update-azure-b2c-settings"===this.id?(t="sso-b2c",e=$("input[name='azureADB2CAuthenticationProvider']").val().trim()):"update-windowsad-settings"===this.id&&(t="windows-ad",e=$("input[name='windowsAuthenticationProvider']").val().trim());var t,e,i=!1;(i=defaultAuthentication==e?"update-oauth-settings"===this.id||"update-openid-settings"===this.id?!$("#"+t+"IsEnabled").is(":checked"):!$("#enable-"+t).is(":checked"):i)?(document.getElementById("default-authentication-confirmation-diolog").ej2_instances[0].show(),$(".update-oauth-or-openid-settings").attr("id",t)):"update-oauth-settings"===this.id||"update-openid-settings"===this.id?d(t):"update-jwt-settings"===this.id?r():"update-saml-settings"===this.id?n():"update-azure-b2c-settings"===this.id?o():"update-windowsad-settings"===this.id&&s()}),a.tenantRegex="^(?!(ftp|https?)://)([a-zA-Z0-9-_]+.)*[a-zA-Z0-9][a-zA-Z0-9-]+(.[a-z]{2,6})?(:d{1,5})?(/[a-zA-Z0-9]+[a-zA-Z0-9]*(.[a-z]{2,8})?)*?$",a.saveSsoSettings=function(){n()},a.saveJwtSettings=function(){r()},a.saveSsoB2CSettings=function(){o()},$(document).on("click",".update-defaultauth-settings",function(){var t=$("#enable-defaultauthentication").is(":checked")?document.getElementById("login-provider-type").ej2_instances[0].value:"0";$.ajax({type:"POST",url:defaultauthsettingsUrl,data:{AuthProvider:t},beforeSend:showWaitingPopup("server-app-container"),success:function(t){t.Status?(hideWaitingPopup("server-app-container"),defaultAuthentication=t.AuthProvider,$(".modal-body").find("p:first").find("span").html(getDefaultAuthDisplayName(defaultAuthentication)),SuccessAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdated,7e3)):(hideWaitingPopup("server-app-container"),WarningAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdatedError,t.Message,7e3))},error:function(t){hideWaitingPopup("server-app-container"),WarningAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdatedError,t.Message,7e3)}})});var l=$("#oauth-image-upload-box"),u=$("#openid-image-upload-box"),h=$("#jwt-image-upload-box"),c=$("#azure-b2c-image-upload-box");function i(e){var t=e.currentTarget.files[0],i=e.srcElement.name,e=$('input[name="'+i+'"]').parents(".auth-image-upload-box").siblings(".validation-message");try{var n=t.size/1024;if($.inArray(t.type,["image/jpg","image/jpeg","image/png","image/svg+xml"])<0)throw window.Server.App.LocalizationContent.AuthImageAllowedFormat;if(500<n)throw window.Server.App.LocalizationContent.AuthImageAllowedSize;if(!t)throw window.Server.App.LocalizationContent.InvalidFile;!function(t,e){var i;"oauthLogoUrl"===e?i=l.find(".js-image-preview"):"openidLogoUrl"===e?i=u.find(".js-image-preview"):"jwtLogoUrl"===e?i=h.find(".js-image-preview"):"azureB2CLogoUrl"===e&&(i=c.find(".js-image-preview"));var n=new FileReader;n.onload=function(){a.$apply(function(){var t="url("+n.result+")";i.css("backgroundImage",t),"openidLogoUrl"===e?(a.openidLogoUrl=t,openidLogoChanged=!0):"oauthLogoUrl"===e?(a.oauthLogoUrl=t,oauthLogoChanged=!0):"jwtLogoUrl"===e?(a.jwtLogoUrl=t,jwtLogoChanged=!0):"azureB2CLogoUrl"===e&&(a.azureB2CLogoUrl=t,azureB2CLogoChanged=!0),("openidLogoUrl"===e?$("#openid-image-upload-box"):$("#oauth-image-upload-box")).siblings(".validation-message").html("")})},n.readAsDataURL(t)}(t,i),e.html(""),a.$apply(function(){"openidLogoUrl"===i?a.oauthSettingsForm.isValidOpenIdLogoUrl=!0:"oauthLogoUrl"===i?a.oauthSettingsForm.isValidOAuthLogoUrl=!0:"jwtLogoUrl"===i?a.jwtSettingsForm.isValidjwtLogoUrl=!0:"azureB2CLogoUrl"===i&&(a.ssoSettingsb2cForm.isValidAzureB2CLogoUrl=!0)})}catch(t){e.html(t),a.$apply(function(){"openidLogoUrl"===i?a.oauthSettingsForm.isValidOpenIdLogoUrl=!0:"oauthLogoUrl"===i?a.oauthSettingsForm.isValidOAuthLogoUrl=!0:"jwtLogoUrl"===i?a.jwtSettingsForm.isValidjwtLogoUrl=!0:"azureB2CLogoUrl"===i&&(a.ssoSettingsb2cForm.isValidAzureB2CLogoUrl=!0)})}}function p(t){var e="oauth"===t?$("#oauth-group-import"):$("#openid-group-import"),i=("oauth"===t?document.getElementById("group-import-provider-oauth"):document.getElementById("group-import-provider-openid")).ej2_instances[0].value,n=null;switch(i){case"CognitoAWS":n={KnownProviderType:i,Cognito:{UserPoolId:e.find("input[name='userPoolId']").val().trim(),AwsAccesskeyId:e.find("input[name='awsAccesskeyId']").val().trim(),AwsAccesskeySecret:e.find("input[name='awsAccesskeySecret']").val().trim(),Region:e.find("input[name='cognitoRegion']").val().trim()}};break;case"Auth0":n={KnownProviderType:i,Auth0:{Audience:e.find("input[name='audience']").val().trim(),ExtensionURL:e.find("input[name='extensionUrl']").val().trim()}};break;case"Okta":n={KnownProviderType:i,Okta:{ApiToken:e.find("input[name='apiToken']").val().trim()}};break;case"OneLogin":n={KnownProviderType:i,OneLogin:{ApiClientId:e.find("input[name='apiClientId']").val().trim(),ApiClientSecret:e.find("input[name='apiClientSecret']").val().trim(),Region:e.find("input[name='oneloginRegion']").val().trim()}};break;default:n={KnownProviderType:i}}return n}l.find(".image-upload")[0].addEventListener("change",i),u.find(".image-upload")[0].addEventListener("change",i),h.find(".image-upload")[0].addEventListener("change",i),c.find(".image-upload")[0].addEventListener("change",i)}),$("#enable-jwt").change(function(){jwtSigningKeyShowHide()}),$(document).on("click","#sendButton",function(){dialog.hide(),fnRegenerateSigningKey()}),$(document).on("keypress","#dialog",function(t){13==t.keyCode&&(dialog.hide(),fnRegenerateSigningKey())}),$(document).ready(function(){$(document).on("click","#cancel-settings",function(){window.location.href=window.location.href})});