(e=>{"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?exports=e(require("jquery")):e(jQuery)})(function(t){function n(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}void 0!==t.easing&&(t.easing.jswing=t.easing.swing);var i=Math.pow,r=Math.sqrt,a=Math.sin,s=Math.cos,o=Math.PI,l=1.70158,u=1.525*l,c=2*o/3,d=2*o/4.5;t.extend(t.easing,{def:"easeOutQuad",swing:function(e){return t.easing[t.easing.def](e)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-i(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-i(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-i(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-i(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-i(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-i(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-i(-2*e+2,5)/2},easeInSine:function(e){return 1-s(e*o/2)},easeOutSine:function(e){return a(e*o/2)},easeInOutSine:function(e){return-(s(o*e)-1)/2},easeInExpo:function(e){return 0===e?0:i(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-i(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?i(2,20*e-10)/2:(2-i(2,-20*e+10))/2},easeInCirc:function(e){return 1-r(1-i(e,2))},easeOutCirc:function(e){return r(1-i(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-r(1-i(2*e,2)))/2:(r(1-i(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-i(2,10*e-10)*a((10*e-10.75)*c)},easeOutElastic:function(e){return 0===e?0:1===e?1:i(2,-10*e)*a((10*e-.75)*c)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-(i(2,20*e-10)*a((20*e-11.125)*d))/2:i(2,-20*e+10)*a((20*e-11.125)*d)/2+1},easeInBack:function(e){return(1+l)*e*e*e-l*e*e},easeOutBack:function(e){return 1+(1+l)*i(e-1,3)+l*i(e-1,2)},easeInOutBack:function(e){return e<.5?i(2*e,2)*(7.189819*e-u)/2:(i(2*e-2,2)*((1+u)*(2*e-2)+u)+2)/2},easeInBounce:function(e){return 1-n(1-e)},easeOutBounce:n,easeInOutBounce:function(e){return e<.5?(1-n(1-2*e))/2:(1+n(2*e-1))/2}})}),(e=>{var l,u,c,t,o,s,d,h,p,m,I,D,f,g,$,k,_,i,M,E,j,v,w,z,L,P,T,U,b,y,C,r=function(e){return new r.prototype.init(e)};"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=r:e.Globalize=r,r.cultures={},(r.prototype={constructor:r,init:function(e){return this.cultures=r.cultures,this.cultureSelector=e,this}}).init.prototype=r.prototype,r.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},r.cultures.default.calendar=r.cultures.default.calendars.standard,r.cultures.en=r.cultures.default,r.cultureSelector="en",l=/^0x[a-f0-9]+$/i,u=/^[+\-]?infinity$/i,c=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,t=/^\s+|\s+$/g,o=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},s=function(e,t){return e.substr(e.length-t.length)===t},d=function(){var e,t,n,i,r,a=arguments[0]||{},s=1,o=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[1]||{},s=2),"object"==typeof a||p(a)||(a={});s<o;s++)if(null!=(e=arguments[s]))for(t in e)r=a[t],n=e[t],a!==n&&(l&&n&&(m(n)||(i=h(n)))?(r=i?(i=!1,r&&h(r)?r:[]):r&&m(r)?r:{},a[t]=d(l,r,n)):void 0!==n&&(a[t]=n));return a},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=function(e){return"[object Function]"===Object.prototype.toString.call(e)},m=function(e){return"[object Object]"===Object.prototype.toString.call(e)},I=function(e,t){return 0===e.indexOf(t)},D=function(e){return(e+"").replace(t,"")},f=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},g=function(e,t,n){for(var i=e.length;i<t;i+=1)e=n?"0"+e:e+"0";return e},$=function(e,t){for(var n,i=0,r=!1,a=0,s=e.length;a<s;a++)switch(n=e.charAt(a)){case"'":r?t.push("'"):i++,r=!1;break;case"\\":r&&t.push("\\"),r=!r;break;default:t.push(n),r=!1}return i},k=function(e,t){var e=e.patterns,n=(t=t||"F").length;if(1===n){if(!(e=e[t]))throw"Invalid date format string '"+t+"'.";t=e}else 2===n&&"%"===t.charAt(0)&&(t=t.charAt(1));return t},_=function(e,t,n){function i(e,t){var n,e=e+"";return 1<t&&e.length<t?(n=b[t-2]+e).substr(n.length-t,t):e}function r(e,t){if(v)return v[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}var a,s,o,l,u,c,d,p=n.calendar,h=p.convert;if(!t||!t.length||"i"===t)return w=n&&n.name.length?h?_(e,p.patterns.F,n):(n=new Date(e.getTime()),a=E(e,p.eras),n.setFullYear(j(e,p,a)),n.toLocaleString()):e.toString();s=p.eras,o="s"===t,t=k(p,t);var m,f,g,v,w=[],b=["0","00","000"],y=/([^d]|^)(d|dd)([^d]|$)/g,C=0,x=M();for(!o&&h&&(v=h.fromGregorian(e));;){var A=x.lastIndex,S=x.exec(t),A=t.slice(A,S?S.index:t.length);if(C+=$(A,w),!S)break;if(C%2)w.push(S[0]);else switch(u=(l=S[0]).length,l){case"ddd":case"dddd":c=3===u?p.days.namesAbbr:p.days.names,w.push(c[e.getDay()]);break;case"d":case"dd":f=!0,w.push(i(r(e,2),u));break;case"MMM":case"MMMM":d=r(e,1),w.push((p.monthsGenitive&&(f||g||(f=y.test(t),g=!0),f)?p.monthsGenitive:p.months)[3===u?"namesAbbr":"names"][d]);break;case"M":case"MM":w.push(i(r(e,1)+1,u));break;case"y":case"yy":case"yyyy":d=v?v[0]:j(e,p,E(e,s),o),u<4&&(d%=100),w.push(i(d,u));break;case"h":case"hh":0===(m=e.getHours()%12)&&(m=12),w.push(i(m,u));break;case"H":case"HH":w.push(i(e.getHours(),u));break;case"m":case"mm":w.push(i(e.getMinutes(),u));break;case"s":case"ss":w.push(i(e.getSeconds(),u));break;case"t":case"tt":d=e.getHours()<12?p.AM?p.AM[0]:" ":p.PM?p.PM[0]:" ",w.push(1===u?d.charAt(0):d);break;case"f":case"ff":case"fff":w.push(i(e.getMilliseconds(),3).substr(0,u));break;case"z":case"zz":m=e.getTimezoneOffset()/60,w.push((m<=0?"+":"-")+i(Math.floor(Math.abs(m)),u));break;case"zzz":m=e.getTimezoneOffset()/60,w.push((m<=0?"+":"-")+i(Math.floor(Math.abs(m)),2)+":"+i(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":p.eras&&w.push(p.eras[E(e,s)].name);break;case"/":w.push(p["/"]);break;default:throw"Invalid date format pattern '"+l+"'."}}return w.join("")},C=function(e,t,n){var i=n.groupSizes,r=i[0],a=1,s=Math.pow(10,t),s=Math.round(e*s)/s,o=(e=s=isFinite(s)?s:e)+"",l="",s=o.split(/e/i),e=1<s.length?parseInt(s[1],10):0;o=(s=(o=s[0]).split("."))[0],l=1<s.length?s[1]:"",0<e?(o+=(l=g(l,e,!1)).slice(0,e),l=l.substr(e)):e<0&&(l=(o=g(o,1+(e=-e),!0)).slice(-e,o.length)+l,o=o.slice(0,-e));for(var l=0<t?n["."]+(l.length>t?l.slice(0,t):g(l,t)):"",u=o.length-1,c=n[","],d="";0<=u;){if(0===r||u<r)return o.slice(0,u+1)+(d.length?c+d+l:l);d=o.slice(u-r+1,u+1)+(d.length?c+d:""),u-=r,a<i.length&&(r=i[a],a++)}return o.slice(0,u+1)+c+d+l},i=function(e,t,n){var i,r,a,s,o,l;if(!isFinite(e))return e===1/0?n.numberFormat.positiveInfinity:e===-1/0?n.numberFormat.negativeInfinity:n.numberFormat.NaN;if(!t||"i"===t)return n.name.length?e.toLocaleString():e.toString();t=t||"D";var u,c=n.numberFormat,d=Math.abs(e),p=-1;switch(1<t.length&&(p=parseInt(t.slice(1),10)),i=t.charAt(0).toUpperCase()){case"D":u="n",d=f(d),-1!==p&&(d=g(""+d,p,!0)),e<0&&(d="-"+d);break;case"N":r=c;case"C":r=r||c.currency;case"P":r=r||c.percent,u=e<0?r.pattern[0]:r.pattern[1]||"n",-1===p&&(p=r.decimals),d=C(d*("P"===i?100:1),p,r);break;default:throw"Bad number format specifier: "+i}for(a=/n|\$|-|%/g,s="";o=a.lastIndex,l=a.exec(u),s+=u.slice(o,l?l.index:u.length),l;)switch(l[0]){case"n":s+=d;break;case"$":s+=c.currency.symbol;break;case"-":/[1-9]/.test(d)&&(s+=c["-"]);break;case"%":s+=c.percent.symbol}return s},M=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},E=function(e,t){var n,i,r,a;if(t)for(i=e.getTime(),r=0,a=t.length;r<a;r++)if(null===(n=t[r].start)||n<=i)return r;return 0},j=function(e,t,n,i){e=e.getFullYear();return!i&&t.eras&&(e-=t.eras[n].offset),e},z=function(e,t){var n,i;return t<100&&(n=new Date,i=E(n),n=j(n,e,i),(i="string"==typeof(i=e.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(i,10):i)<(t+=n-n%100))&&(t-=100),t},L=function(e,t,n){var i,r=e.days,a=e._upperDays;return a||(e._upperDays=a=[y(r.names),y(r.namesAbbr),y(r.namesShort)]),t=b(t),n?-1===(i=o(a[1],t))&&(i=o(a[2],t)):i=o(a[0],t),i},P=function(e,t,n){var i=e.months,r=e.monthsGenitive||e.months,a=e._upperMonths,s=e._upperMonthsGen;return a||(e._upperMonths=a=[y(i.names),y(i.namesAbbr)],e._upperMonthsGen=s=[y(r.names),y(r.namesAbbr)]),t=b(t),i=(i=o(n?a[1]:a[0],t))<0?o(n?s[1]:s[0],t):i},T=function(e,t){var n,i,r,a,s,o=e._parseRegExp;if(o){if(s=o[t])return s}else e._parseRegExp=o={};for(var l,u=k(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],d=[],p=0,h=0,m=M();null!==(l=m.exec(u));)if(n=u.slice(p,l.index),p=m.lastIndex,(h+=$(n,c))%2)c.push(l[0]);else{switch(r=(i=l[0]).length,i){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":a="(\\D+)";break;case"tt":case"t":a="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":a="(\\d{"+r+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":a="(\\d\\d?)";break;case"zzz":a="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":a="([+-]?\\d\\d?)";break;case"/":a="(\\/)";break;default:throw"Invalid date format pattern '"+i+"'."}a&&c.push(a),d.push(l[0])}return $(u.slice(p),c),c.push("$"),s=c.join("").replace(/\s+/g,"\\s+"),o[t]={regExp:s,groups:d}},U=function(e,t,n){return e<t||n<e},b=function(e){return e.split("Â ").join(" ").toUpperCase()},y=function(e){for(var t=[],n=0,i=e.length;n<i;n++)t[n]=b(e[n]);return t},v=function(e,t,n){e=D(e);var i,r,a,s,o,l,u=n.calendar,n=T(u,t),c=new RegExp(n.regExp).exec(e);if(null===c)return null;for(var d,p=n.groups,h=null,m=null,f=null,g=null,v=null,w=0,b=0,y=0,C=0,x=null,A=!1,S=0,$=p.length;S<$;S++)if(i=c[S+1]){var k=p[S],_=k.length,M=parseInt(i,10);switch(k){case"dd":case"d":if(U(g=M,1,31))return null;break;case"MMM":case"MMMM":if(f=P(u,i,3===_),U(f,0,11))return null;break;case"M":case"MM":if(U(f=M-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(m=_<4?z(u,M):M,U(m,0,9999))return null;break;case"h":case"hh":if(U(w=12===(w=M)?0:w,0,11))return null;break;case"H":case"HH":if(U(w=M,0,23))return null;break;case"m":case"mm":if(U(b=M,0,59))return null;break;case"s":case"ss":if(U(y=M,0,59))return null;break;case"tt":case"t":if((A=u.PM&&(i===u.PM[0]||i===u.PM[1]||i===u.PM[2]))||u.AM&&(i===u.AM[0]||i===u.AM[1]||i===u.AM[2]))break;return null;case"f":case"ff":case"fff":if(C=M*Math.pow(10,3-_),U(C,0,999))return null;break;case"ddd":case"dddd":if(v=L(u,i,3===_),U(v,0,6))return null;break;case"zzz":if(2!==(r=i.split(/:/)).length||(d=parseInt(r[0],10),U(d,-12,13))||(a=parseInt(r[1],10),U(a,0,59)))return null;x=60*d+(I(i,"-")?-a:a);break;case"z":case"zz":if(U(d=M,-12,13))return null;x=60*d;break;case"g":case"gg":if(!(s=i)||!u.eras)return null;for(s=D(s.toLowerCase()),o=0,l=u.eras.length;o<l;o++)if(s===u.eras[o].name.toLowerCase()){h=o;break}if(null===h)return null}}if(t=new Date,n=(e=u.convert)?e.fromGregorian(t)[0]:t.getFullYear(),null===m?m=n:u.eras&&(m+=u.eras[h||0].offset),null===f&&(f=0),null===g&&(g=1),e){if(null===(t=e.toGregorian(m,f,g)))return null}else if(t.setFullYear(m,f,g),t.getDate()!==g||null!==v&&t.getDay()!==v)return null;return A&&w<12&&(w+=12),t.setHours(w,b,y,C),null!==x&&(n=t.getMinutes()-(x+t.getTimezoneOffset()),t.setHours(t.getHours()+parseInt(n/60,10),n%60)),t},w=function(e,t,n){var i,r=t["-"],a=t["+"];switch(n){case"n -":r=" "+r,a=" "+a;case"n-":s(e,r)?i=["-",e.substr(0,e.length-r.length)]:s(e,a)&&(i=["+",e.substr(0,e.length-a.length)]);break;case"- n":r+=" ",a+=" ";case"-n":I(e,r)?i=["-",e.substr(r.length)]:I(e,a)&&(i=["+",e.substr(a.length)]);break;case"(n)":I(e,"(")&&s(e,")")&&(i=["-",e.substr(1,e.length-2)])}return i||["",e]},r.prototype.findClosestCulture=function(e){return r.findClosestCulture.call(this,e)},r.prototype.format=function(e,t,n){return r.format.call(this,e,t,n)},r.prototype.localize=function(e,t){return r.localize.call(this,e,t)},r.prototype.parseInt=function(e,t,n){return r.parseInt.call(this,e,t,n)},r.prototype.parseFloat=function(e,t,n){return r.parseFloat.call(this,e,t,n)},r.prototype.culture=function(e){return r.culture.call(this,e)},r.addCultureInfo=function(e,t,n){var i={},r=!1,i="string"!=typeof e?(n=e,e=this.culture().name,this.cultures[e]):"string"!=typeof t?(n=t,r=null==this.cultures[e],this.cultures[e]||this.cultures.default):(r=!0,this.cultures[t]);this.cultures[e]=d(!0,{},i,n),r&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},r.findClosestCulture=function(e){var t,n,i,r,a,s;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures.default;if("string"==typeof e&&(e=e.split(",")),h(e)){for(var o,l=this.cultures,u=e,c=u.length,d=[],p=0;p<c;p++)i=(e=D(u[p])).split(";"),o=D(i[0]),n=1!==i.length&&0===(e=D(i[1])).indexOf("q=")?(e=e.substr(2),n=parseFloat(e),isNaN(n)?0:n):1,d.push({lang:o,pri:n});for(d.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0}),p=0;p<c;p++)if(t=l[o=d[p].lang])return t;for(p=0;p<c;p++)for(o=d[p].lang;;){if(-1===(r=o.lastIndexOf("-")))break;if(t=l[o=o.substr(0,r)])return t}for(p=0;p<c;p++)for(a in o=d[p].lang,l)if(s=l[a],s.language==o)return s}else if("object"==typeof e)return e;return t||null},r.format=function(e,t,n){n=this.findClosestCulture(n);return e instanceof Date?e=_(e,t,n):"number"==typeof e&&(e=i(e,t,n)),e},r.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures.default.messages[e]},r.parseDate=function(e,t,n){var i,r,a,s,o,l;if(n=this.findClosestCulture(n),t){if((t="string"==typeof t?[t]:t).length)for(s=0,o=t.length;s<o&&(!(l=t[s])||!(i=v(e,l,n)));s++);}else for(r in a=n.calendar.patterns)if(i=v(e,a[r],n),i)break;return i||null},r.parseInt=function(e,t,n){return f(r.parseFloat(e,t,n))},r.parseFloat=function(e,t,n){"number"!=typeof t&&(n=t,t=10);var i,r,a,n=this.findClosestCulture(n),s=NaN,o=n.numberFormat;return-1<e.indexOf(n.numberFormat.currency.symbol)&&(e=(e=e.replace(n.numberFormat.currency.symbol,"")).replace(n.numberFormat.currency["."],n.numberFormat["."])),e=D(e),u.test(e)?s=parseFloat(e):!t&&l.test(e)?s=parseInt(e,16):(t=(n=w(e,o,o.pattern[0]))[0],a=n[1],""===t&&"(n)"!==o.pattern[0]&&(t=(n=w(e,o,"(n)"))[0],a=n[1]),""===t&&"-n"!==o.pattern[0]&&(t=(n=w(e,o,"-n"))[0],a=n[1]),t=t||"+",n=(e=(e=a.indexOf("e"))<0?a.indexOf("E"):e)<0?(r=a,null):(r=a.substr(0,e),a.substr(e+1)),a=o["."],r=(e=r.indexOf(a))<0?(i=r,null):(i=r.substr(0,e),r.substr(e+a.length)),e=o[","],i=i.split(e).join(""),a=e.replace(/\u00A0/g," "),t=t+(i=e!==a?i.split(a).join(""):i),null!==r&&(t+="."+r),null!==n&&(t+="e"+((e=w(n,o,"-n"))[0]||"+")+e[1]),c.test(t)&&(s=parseFloat(t))),s},r.culture=function(e){return void 0!==e&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures.default}})(this),((t,n)=>{var e=n.jQuery;"object"==typeof exports?module.exports=e?t(n,e):function(e){if(e&&!e.fn)throw"Provide jQuery or null";return t(n,e)}:"function"==typeof define&&define.amd?define(function(){return t(n)}):t(n,!1)})(function(c,J){function w(n,i){return function(){var e,t=this.base;return this.base=n,e=i.apply(this,arguments),this.base=t,e}}function l(e,t){return S(t)&&((t=w(e?e._d?e:w(u,e):u,t))._d=(e&&e._d||0)+1),t}function F(e,t){var n,i=t.props;for(n in i)!be.test(n)||e[n]&&e[n].fix||(e[n]="convert"!==n?l(e.constructor.prototype[n],i[n]):i[n])}function e(e){return e}function u(){return""}function t(e){this.name=(J.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function x(e,t){if(e){for(var n in t)e[n]=t[n];return e}}function b(e,t,n){return e?W(e)?b.apply(v,e):(p=n?n[0]:p,/^(\W|_){5}$/.test(e+t+p)||R("Invalid delimiters"),s=e[0],i=e[1],o=t[0],d=t[1],N.delimiters=[s+i,o+d,p],e="\\"+s+"(\\"+p+")?\\"+i,t="\\"+o+"\\"+d,r="(?:(\\w+(?=[\\/\\s\\"+o+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+o+"]|\\"+o+"(?!\\"+d+"))*?)",Y.rTag="(?:"+r+")",r=new RegExp("(?:"+e+r+"(\\/)?|\\"+s+"(\\"+p+")?\\"+i+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+t,"g"),Y.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+e+".*"+t),a):N.delimiters}function $(){var e=this.get("item");return e?e.index:void 0}function k(){return this.index}function _(e,t,n,i){var r,a,s,o=0;if(1===n&&(i=1,n=void 0),t)for(s=(a=t.split(".")).length;e&&o<s;o++)r=e,e=a[o]?e[a[o]]:e;return n&&(n.lt=n.lt||o<s),void 0===e?i?u:"":i?function(){return e.apply(r,arguments)}:e}function H(e,t,n){var i,r,a,s,o=this,l=!m&&1<arguments.length,u=o.ctx;if(e){if(o._||(a=o.index,o=o.tag),s=o,u&&u.hasOwnProperty(e)||(u=ue).hasOwnProperty(e)){if(r=u[e],"tag"===e||"tagCtx"===e||"root"===e||"parentTags"===e)return r}else u=void 0;if((!m&&o.tagCtx||o.linked)&&(r&&r._cxp||(o=!o.tagCtx&&!S(r)&&!(o=o.scope||o).isTop&&o.ctx.tag||o,u=(o=void 0!==r&&o.tagCtx?o.tagCtx.view.scope:o)._ocps,(r=u&&u.hasOwnProperty(e)&&u[e]||r)&&r._cxp)||!n&&!l||((u||(o._ocps=o._ocps||{}))[e]=r=[{_ocp:r,_vw:s,_key:e}],r._cxp={path:de,ind:0,updateValue:function(e,t){return J.observable(r[0]).setProperty(de,e),this}}),n=r&&r._cxp)){if(2<arguments.length)return(u=r[1]?Y._ceo(r[1].deps):[de]).unshift(r[0]),u._cxp=n,u;if(a=n.tagElse,u=r[1]?n.tag&&n.tag.cvtArgs?n.tag.cvtArgs(a,1)[n.ind]:r[1](r[0].data,r[0],Y):r[0]._ocp,l)return Y._ucp(e,t,o,n),o;r=u}return r&&S(r)&&x(i=function(){return r.apply(this&&this!==c?this:s,arguments)},r),i||r}}function G(e,t){var n,i,r,a,s,o,l,u=this;if(u.tagName){if(!(u=((o=u).tagCtxs||[u])[e||0]))return}else o=u.tag;if(s=o.bindFrom,a=u.args,(l=(l=o.convert)&&""+l===l?"true"===l?void 0:u.view.getRsc("converters",l)||R("Unknown converter: '"+l+"'"):l)&&!t&&(a=a.slice()),s){for(r=[],n=s.length;n--;)i=s[n],r.unshift(K(u,i));t&&(a=r)}if(l){if(void 0===(l=l.apply(o,r||a)))return a;if(n=(s=s||[0]).length,W(l)&&(!1===l.arg0||1!==n&&l.length===n&&!l.arg0)||(l=[l],s=[0],n=1),t)a=l;else for(;n--;)+(i=s[n])===i&&(a[i]=l[n])}return a}function K(e,t){return(e=e[+t===t?"args":"props"])&&e[t]}function X(e){return this.cvtArgs(e,1)}function A(e,t,n,i,r,a,s,o){var l=this,u="array"===t;l.content=o,l.views=u?[]:{},l.data=i,l.tmpl=r,o=l._={key:0,useKey:u?0:1,id:""+$e++,onRender:s,bnds:{}},l.linked=!!s,l.type=t||"top",t&&(l.cache={_ct:N._cchCt}),n&&"top"!==n.type||((l.ctx=e||{}).root=l.data),(l.parent=n)?(l.root=n.root||l,i=n.views,l.isTop=(r=n._).scp,l.scope=(!e.tag||e.tag===n.ctx.tag)&&!l.isTop&&n.scope||l,r.useKey?((i[o.key="_"+r.useKey++]=l).index=De,l.getIndex=$):i.length===(o.key=l.index=a)?i.push(l):i.splice(a,0,l),l.ctx=e||n.ctx):t&&(l.root=l)}function y(e,t,n){Object.defineProperty(e,t,{value:n,configurable:!0})}function ee(e,t){var n,i=Z._wm||{},r={tmpls:[],links:{},bnds:[],_is:"template",render:te};return(r=t?x(r,t):r).markup=e,r.htmlTag||(n=ve.exec(e),r.htmlTag=n?n[1].toLowerCase():""),(n=i[r.htmlTag])&&n!==i.div&&(r.markup=J.trim(r.markup)),r}function M(l,u){var c=l+"s";v[c]=function e(t,n,i){var r,a,s,o=Y.onStore[l];if(!t||typeof t!==Me||t.nodeType||t.markup||t.getTgt||"viewModel"===l&&t.getters||t.extend)return t&&""+t!==t&&(i=n,n=t,t=void 0),s=i?"viewModel"===l?i:i[c]=i[c]||{}:e,r=u.compile,void 0===n&&(n=r?t:s[t],t=void 0),null===n?t&&delete s[t]:(r&&((n=r.call(s,t,n,i,0)||{})._is=l),t&&(s[t]=n)),o&&o(t,n,i,r),n;for(a in t)e(a,t[a],n);return n||v}}function I(t){a[t]=a[t]||function(e){return arguments.length?(N[t]=e,a):N[t]}}function D(n){function i(e,t){this.tgt=n.getTgt(e,t),t.map=this}return(n=(n=S(n)?{getTgt:n}:n).baseMap?x(x({},n.baseMap),n):n).map=function(e,t){return new i(e,t)},n}function te(e,t,n,i,r,a){var s,o,l,u,c,d,p=i,h="";if(!0===t?(n=t,t=void 0):typeof t!==Me&&(t=void 0),(l=this.tag)?(u=(p=p||this.view)._getTmpl(l.template||this.tmpl),arguments.length||(e=l.contentCtx&&S(l.contentCtx)?l.contentCtx(e):p)):u=this,u){if((p=!i&&e&&"view"===e._is?e:p)&&e===p&&(e=p.data),i=!p,m=m||i,i&&((t=t||{}).root=e),!m||Z.useViews||u.useViews||p&&p!==O)h=ne(u,e,t,n,p,r,a,l);else{if(p?(c=p.data,d=p.index,p.index=De):(c=(p=O).data,p.data=e,p.ctx=t),W(e)&&!n)for(s=0,o=e.length;s<o;s++)p.index=s,p.data=e[s],h+=u.fn(e[s],p,Y);else p.data=e,h+=u.fn(e,p,Y);p.data=c,p.index=d}i&&(m=void 0)}return h}function ne(e,t,n,i,r,a,s,o){var l,u,c,d,p,h,m,f,g,v,w,b,y,C="";if(o&&(g=o.tagName,b=o.tagCtx,n=n?B(n,o.ctx):o.ctx,e===r.content?m=e!==r.ctx._wrp?r.ctx._wrp:void 0:e!==b.content?e===o.template?(m=b.tmpl,n._wrp=b.content):m=b.content||r.content:m=r.content,!1===b.props.link)&&((n=n||{}).link=!1),r&&(s=s||r._.onRender,(y=n&&!1===n.link)&&r._.nl&&(s=void 0),n=B(n,r.ctx),b=!o&&r.tag?r.tag.tagCtxs[r.tagElse]:b),(v=b&&b.props.itemVar)&&("~"!==v[0]&&Q("Use itemVar='~myItem'"),v=v.slice(1)),!0===a&&(h=!0,a=0),!0===(f=s=s&&o&&o._.noVws?void 0:s)&&(f=void 0,s=r._.onRender),w=n=e.helpers?B(e.helpers,n):n,W(t)&&!i)for((c=h?r:void 0!==a&&r||new A(n,"array",r,t,e,a,s,m))._.nl=y,r&&r._.useKey&&(c._.bnd=!o||o._.bnd&&o,c.tag=o),l=0,u=t.length;l<u;l++)d=new A(w,"item",c,t[l],e,(a||0)+l,s,c.content),v&&((d.ctx=x({},w))[v]=Y._cp(t[l],"#data",d)),p=e.fn(t[l],d,Y),C+=c._.onRender?c._.onRender(p,d):p;else c=h?r:new A(w,g||"data",r,t,e,a,s,m),v&&((c.ctx=x({},w))[v]=Y._cp(t,"#data",c)),c.tag=o,c._.nl=y,C+=e.fn(t,c,Y);return o&&(c.tagElse=b.index,b.contentView=c),f?f(C,c):C}function R(e){throw new Y.Err(e)}function Q(e){R("Syntax error\n"+e)}function E(A,S,$,k,_){function M(e){(e-=z)&&P.push(A.substr(z,e).replace(pe,"\\n"))}function I(e,t){e&&(e+="}}",Q((t?"{{"+t+"}} block has {{/"+e+" without {{"+e:"Unmatched or missing {{/"+e)+", in template:\n"+A))}var e,t,D,E,n,j=N.allowCode||S&&S.allowCode||!0===a.allowCode,i=[],z=0,L=[],P=i,T=[,,i];if(j&&S._is&&(S.allowCode=j),$&&(void 0!==k&&(A=A.slice(0,-k.length-2)+o),A=s+A+d),I(L[0]&&L[0][2].pop()[0]),A.replace(r,function(e,t,n,i,r,a,s,o,l,u,c,d){(s&&t||l&&!n||o&&":"===o.slice(-1)||u)&&Q(e),a&&(r=":",i=V);var p,h,m,u=(t||$)&&[[]],f="",g="",v="",w="",b="",y="",C="",x="",a=!(l=l||$&&!_)&&!r;n=n||(o=o||"#data",r),M(d),z=d+e.length,s?j&&P.push(["*","\n"+o.replace(/^:/,"ret+= ").replace(he,"$1")+";\n"]):n?("else"===n&&(ge.test(o)&&Q('For "{{else if expr}}" use "{{else expr}}"'),u=T[9]&&[[]],T[10]=A.substring(T[10],d),h=T[11]||T[0]||Q("Mismatched: "+e),T=L.pop(),P=T[2],a=!0),o&&ae(o.replace(pe," "),u,S,$).replace(fe,function(e,t,n,i,r,a,s,o){return"this:"===i&&(a="undefined"),o&&(m=m||"@"===o[0]),i="'"+r+"':",s?(g+=n+a+",",w+="'"+o+"',"):n?(v+=i+"j._cp("+a+',"'+o+'",view),',y+=i+"'"+o+"',"):t?C+=a:("trigger"===r&&(x+=a),"lateRender"===r&&(p="false"!==o),f+=i+a+",",b+=i+"'"+o+"',",E=E||be.test(r)),""}).slice(0,-1),u&&u[0]&&u.pop(),D=[n,i||!!k||E||"",a&&[],re(w||(":"===n?"'#data',":""),b,y),re(g||(":"===n?"data,":""),f,v),C,x,p,m,u||0],P.push(D),a&&(L.push(T),(T=D)[10]=z,T[11]=h)):c&&(I(c!==T[0]&&c!==T[11]&&c,T[0]),T[10]=A.substring(T[10],d),T=L.pop()),I(!T&&c),P=T[2]}),M(A.length),(z=i[i.length-1])&&I(""+z!==z&&+z[10]===z[10]&&z[0]),$){for(t=se(i,A,$),n=[],e=i.length;e--;)n.unshift(i[e][9]);ie(t,n)}else t=se(i,S);return t}function ie(e,t){var n,i,r=0,a=t.length;for(e.deps=[],e.paths=[];r<a;r++)for(n in e.paths.push(i=t[r]),i)"_jsvto"!==n&&i.hasOwnProperty(n)&&i[n].length&&!i[n].skp&&(e.deps=e.deps.concat(i[n]))}function re(e,t,n){return[e.slice(0,-1),t.slice(0,-1),n.slice(0,-1)]}function ae(_,M,e,I){var D,E,j,z,L=M&&M[0],P={bd:L},T={0:P},U=0,N=0,F=0,R={},B=0,O={},W={},q={},V={0:0},H={0:""},G=0,e=((_="@"===_[0]?_.replace(Se,"."):_)+(e?" ":"")).replace(Y.rPrm,function(e,t,n,i,l,r,a,s,o,u,c,d,p,h,m,f,g,v,w,b,y){r=r||"",p=p||"",n=n||t||p,l=(l=i&&!s?i+l:l)||o,(u=u&&!/\)|]/.test(y[b-1]))&&(l=l.slice(1).split(".").join("^")),c=c||v||"";var C,x,A,S,$,k=b;if(!z&&!j){if(a&&Q(_),g&&L){if(o=q[F-1],y.length-1>k-(o||0)){if(o=J.trim(y.slice(o,k+e.length)),C=E||T[F-1].bd,(x=C[C.length-1])&&x.prm){for(;x.sb&&x.sb.prm;)x=x.sb;A=x.sb={path:x.sb,bnd:x.bnd}}else C.push(A={path:C.pop()});x&&x.sb===A&&(H[F]=H[F-1].slice(x._cpPthSt)+H[F],H[F-1]=H[F-1].slice(0,x._cpPthSt)),A._cpPthSt=V[F-1],A._cpKey=o,H[F]+=y.slice(G,b),G=b,A._cpfn=Ee[o]=Ee[o]||new Function("data,view,j","//"+o+"\nvar v;\nreturn ((v="+H[F]+("]"===f?")]":f)+")!=null?v:null);"),H[F-1]+=W[N]&&Z.cache?'view.getCache("'+o.replace(me,"\\$&")+'"':H[F],A.prm=P.bd,A.bnd=A.bnd||A.path&&0<=A.path.indexOf("^")}H[F]=""}"["===c&&(c="[j._sq("),"["===n&&(n="[j._sq(")}return a=z?(z=!h)?e:p+'"':j?(j=!m)?e:p+'"':(n?(O[++N]=!0,R[N]=0,L&&(q[F++]=k++,P=T[F]={bd:[]},H[F]="",V[F]=1),n):"")+(w?N?"":(U=y.slice(U,k),(D?(D=E=!1,"\b"):"\b,")+U+(U=k+e.length,L&&M.push(P.bd=[]),"\b")):s?(F&&Q(_),L&&M.pop(),D="_"+l,U=k+e.length,L&&((L=P.bd=M[D]=[]).skp=!i),l+":"):l?l.split("^").join(".").replace(Y.rPath,function(e,t,n,i,r,a,s,o){if(S="."===n,n&&(l=l.slice(t.length),/^\.?constructor$/.test(o||l)&&Q(e),S||(e=(u?(I?"":"(ltOb.lt=ltOb.lt||")+"(ob=":"")+(i?'view.ctxPrm("'+i+'")':r?"view":"data")+(u?")===undefined"+(I?"":")")+'?"":view._getOb(ob,"':"")+(o?(a?"."+a:i||r?"":"."+n)+(s||""):(o=i?"":r?a||"":n,"")),e=t+("view.data"===(e+=o?"."+o:"").slice(0,9)?e.slice(5):e)+(u?(I?'"':'",ltOb')+(c?",1)":")"):"")),L)){if(C="_linkTo"===D?E=M._jsvto=M._jsvto||[]:P.bd,x=S&&C[C.length-1]){if(x._cpfn){for(;x.sb;)x=x.sb;x.prm&&(x.bnd&&(l="^"+l.slice(1)),x.sb=l,x.bnd=x.bnd||"^"===l[0])}}else C.push(l);c&&!S&&(q[F]=k,V[F]=H[F].length)}return e})+(c||r):r||(f?"]"===f?")]":")":d?(W[N]||Q(_),","):t?"":(z=h,j=m,'"'))),z||j||f&&(W[N]=!1,N--),L&&(z||j||(f&&(O[N+1]&&(P=T[--F],O[N+1]=!1),B=R[N+1]),c&&(R[N+1]=H[F].length+(n?1:0),l||f)&&(P=T[++F]={bd:[]},O[N+1]=!0)),H[F]=(H[F]||"")+y.slice(G,b),G=b+e.length,z||j||(($=n&&O[N+1])&&(H[F-1]+=n,V[F-1]++),"("===c&&S&&!A&&(H[F]=H[F-1].slice(B)+H[F],H[F-1]=H[F-1].slice(0,B))),H[F]+=$?a.slice(1):a),z||j||!c||(N++,l&&"("===c&&(W[N]=!0)),z||j||!v||(L&&(H[F]+=c),a+=c),a});return L&&(e=H[0]),!N&&e||Q(_)}function se(e,t,n){var i,r,a,s,o,l,u,c,d,p,h,m,f,g,v,w,b,y,C,x,A,S,$,k,_,M,I,D,E,j=0,z=Z.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,L="",P={},T=e.length;for(""+t===t?(v=n?'data-link="'+t.replace(pe," ").slice(1,-1)+'"':t,t=0):(v=t.tmplName||"unnamed",t.allowCode&&(P.allowCode=!0),t.debug&&(P.debug=!0),d=t.bnds,g=t.tmpls),i=0;i<T;i++)if(""+(r=e[i])===r)L+='+"'+r+'"';else if("*"===(a=r[0]))L+=";\n"+r[1]+"\nret=ret";else{if(s=r[1],b=!n&&r[2],D=r[3],E=h=r[4],D="\n\tparams:{args:["+D[0]+"],\n\tprops:{"+D[1]+"}"+(D[2]?",\n\tctx:{"+D[2]+"}":"")+"},\n\targs:["+E[0]+"],\n\tprops:{"+E[1]+"}"+(E[2]?",\n\tctx:{"+E[2]+"}":""),E=r[6],_=r[7],I=r[8]?(M="\nvar ob,ltOb={},ctxs=",";\nctxs.lt=ltOb.lt;\nreturn ctxs;"):(M="\nreturn ",""),k=r[10]&&r[10].replace(he,"$1"),(x="else"===a)?p&&p.push(r[9]):($=r[5]||!1!==N.debugMode&&"undefined",d&&(p=r[9])&&(p=[p],j=d.push(1))),z=z||h[1]||h[2]||p||/view.(?!index)/.test(h[0]),(A=":"===a)?s&&(a=s===V?">":s+a):(b&&((k=ee(k,P)).tmplName=v+"/"+a,k.useViews=k.useViews||z,se(b,k),z=k.useViews,g.push(k)),x||(w=a,z=z||a&&(!U[a]||!U[a].flow),C=L,L=""),y=(y=e[i+1])&&"else"===y[0]),k=$?";\ntry{\nret+=":"\n+",m=x="",A&&(p||E||s&&s!==V||_)){if((S=new Function("data,view,j","// "+v+" "+ ++j+" "+a+M+"{"+D+"};"+I))._er=$,S._tag=a,S._bd=!!p,S._lr=_,n)return S;ie(S,p),c=!0,x=(f='c("'+s+'",view,')+j+",",m=")"}if(L+=A?(n?($?"try{\n":"")+"return ":k)+(c?(z=u=!(c=void 0),f+(S?(d[j-1]=S,j):"{"+D+"}")+")"):">"===a?(l=!0,"h("+h[0]+")"):"((v="+h[0]+")!=null?v:"+(n?"null)":'"")')):(o=!0,"\n{view:view,content:false,tmpl:"+(b?g.length:"false")+","+D+"},"),w&&!y){if(L="["+L.slice(0,-1)+"]",f='t("'+w+'",view,this,',n||p){if((L=new Function("data,view,j"," // "+v+" "+j+" "+w+M+L+I))._er=$,L._tag=w,p&&ie(d[j-1]=L,p),L._lr=_,n)return L;x=f+j+",undefined,",m=")"}L=C+k+f+(p&&j||L)+")",w=p=0}$&&!y&&(z=!0,L+=";\n}catch(e){ret"+(n?"urn ":"+=")+x+"j._err(e,view,"+$+")"+m+";}"+(n?"":"\nret=ret"))}L="// "+v+(P.debug?"\ndebugger;":"")+"\nvar v"+(o?",t=j._tag":"")+(u?",c=j._cnvt":"")+(l?",h=j._html":"")+(n?(r[8]?", ob":"")+";\n":',ret=""')+L+(n?"\n":";\nreturn ret;");try{L=new Function("data,view,j",L)}catch(e){Q("Compiled template code:\n\n"+L+'\n: "'+(e.message||e)+'"')}return t&&(t.fn=L,t.useViews=!!z),L}function B(e,t){return e&&e!==t?t?x(x({},t),e):e:t&&x({},t)}function j(t,e){var n,i,r,a=e.tag,s=e.props,o=e.params.props,l=s.filter,u=s.sort,c=!0===u,d=parseInt(s.step),p=s.reverse?-1:1;if(W(t)){if(c||u&&""+u===u?((n=t.map(function(e,t){return{i:t,v:""+(e=c?e:_(e,u))===e?e.toLowerCase():e}})).sort(function(e,t){return e.v>t.v?p:e.v<t.v?-p:0}),t=n.map(function(e){return t[e.i]})):(u||p<0)&&!a.dataMap&&(t=t.slice()),S(u)&&(t=t.sort(function(){return u.apply(e,arguments)})),(t=p<0&&(!u||S(u))?t.reverse():t).filter&&l&&(t=t.filter(l,e),e.tag.onFilter)&&e.tag.onFilter(e),o.sorted&&(n=u||p<0?t:t.slice(),a.sorted?J.observable(a.sorted).refresh(n):e.map.sorted=n),i=s.start,r=s.end,(o.start&&void 0===i||o.end&&void 0===r)&&(i=r=0),isNaN(i)&&isNaN(r)||(r=void 0===r||r>t.length?t.length:+r,t=t.slice(i=+i||0,r)),1<d){for(i=0,r=t.length,n=[];i<r;i+=d)n.push(t[i]);t=n}o.paged&&a.paged&&$observable(a.paged).refresh(t)}return t}function z(e,t,n){var i=this.jquery&&(this[0]||R("Unknown template")),r=i.getAttribute(Ie);return te.call(r&&J.data(i)[f]||h(i),e,t,n)}function L(e){return ke[e]||(ke[e]="&#"+e.charCodeAt(0)+";")}function P(e,t){return _e[t]||""}function T(e){return null!=e?we.test(e)&&(""+e).replace(Ce,L)||e:""}var oe=!1===J;J=J&&J.fn?J:c.jQuery;var le,r,O,C,S,W,h,q,ue,U,Y,N,Z,a,s,i,o,d,p,ce,m,n="v1.0.11",de="_ocp",pe=/[ \t]*(\r\n|\n|\r)/g,he=/\\(['"\\])/g,me=/['"\\]/g,fe=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,ge=/^if\s/,ve=/<(\w+)[>\s]/,we=/[\x00`><\"'&=]/,be=/^on[A-Z]|^convert(Back)?$/,ye=/^\#\d+_`[\s\S]*\/\d+_`$/,Ce=/[\x00`><"'&=]/g,xe=/[&<>]/g,Ae=/&(amp|gt|lt);/g,Se=/\[['"]?|['"]?\]/g,$e=0,ke={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},_e={amp:"&",gt:">",lt:"<"},V="html",Me="object",Ie="data-jsv-tmpl",f="jsvTmpl",De="For #index in nested block use #getIndex().",Ee={},je={},g=c.jsrender,ze=g&&J&&!J.render,Le={template:{compile:function n(i,e,r,a){function t(e){var t;if(""+e===e||0<e.nodeType&&(s=e)){if(!s)if(/^\.?\/[^\\:*?"<>]*$/.test(e))(t=h[i=i||e])?e=t:s=document.getElementById(e);else if("#"===e.charAt(0))s=document.getElementById(e.slice(1));else if(J.fn&&!Y.rTmpl.test(e))try{s=J(e,document)[0]}catch(e){}s&&("SCRIPT"!==s.tagName&&R(e+": Use script block, not "+s.tagName),a?e=s.innerHTML:((t=s.getAttribute(Ie))&&(t!==f?(e=h[t],delete h[t]):J.fn&&(e=J.data(s)[f])),(e=t&&e?e:n(i=i||(J.fn?f:e),s.innerHTML,r,a)).tmplName=i=i||t,i!==f&&(h[i]=e),s.setAttribute(Ie,i),J.fn&&J.data(s,f,e))),s=void 0}else e.fn||(e=void 0);return e}var s,o,l,u,c,d=e=e||"";if(Y._html=q.html,0===a&&(a=void 0,d=t(d)),(a=a||(e.markup?e.bnds?x({},e):e:{})).tmplName=a.tmplName||i||"unnamed",r&&(a._parentTmpl=r),void 0!==(d=!d&&e.markup&&(d=t(e.markup))&&d.fn?d.markup:d)){if(d.render||e.render?d.tmpls&&(o=d):(e=ee(d,a),E(d.replace(me,"\\$&"),e)),!o){var p=o=x(function(){return o.render.apply(o,arguments)},e);for(l in Le)u=l+"s",p[u]&&(c=p[u],p[u]={},v[u](c,p))}return o}}},tag:{compile:function(e,t,n){function i(){this._={unlinked:!0},this.inline=!0,this.tagName=e}var r,a,s,o=new Y._tg;if(S(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t}),a=t.baseTag)for(s in t.flow=!!t.flow,(a=""+a===a?n&&n.tags[a]||U[a]:a)||R('baseTag: "'+t.baseTag+'" not found'),o=x(o,a),t)o[s]=l(a[s],t[s]);else o=x(o,t);return void 0!==(r=o.template)&&(o.template=""+r===r?h[r]||h(r):r),(i.prototype=o).constructor=o._ctr=i,n&&(o._parentTmpl=n),o}},viewModel:{compile:function(l,e){function t(e){n.apply(this,e)}function f(){return new t(arguments)}function g(e,t){for(var n,i,r,a,s,o,l=0;l<m;l++)n=void 0,(i=p[l])+""!==i&&(i=(n=i).getter,a=n.parentRef),void 0===(r=e[i])&&n&&void 0!==(s=n.defaultVal)&&(o=e,r=S(s=s)?s.call(o):s),t(r,n&&d[n.type],i,a)}function u(e,t,n){e=e+""===e?JSON.parse(e):e;var i,r,a,s,o,l,u,c,d,p,h=0,m=this;if(W(m)){for(u={},d=[],r=e.length,a=m.length;h<r;h++){for(c=e[h],l=!1,i=0;i<a&&!l;i++)u[i]||(o=m[i],v&&(u[i]=l=v+""===v?c[v]&&(b[v]?o[v]():o[v])===c[v]:v(o,c)));l?(o.merge(c),d.push(o)):(d.push(p=f.map(c)),n&&y(p,n,t))}w?w(m).refresh(d,!0):m.splice.apply(m,[0,m.length].concat(d))}else for(s in g(e,function(e,t,n,i){t?m[n]().merge(e,m,i):m[n]()!==e&&m[n](e)}),e)s===C||b[s]||(m[s]=e[s])}function c(){function e(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n].unmap());return t}var t,n,i,r,a=0,s=this;if(W(s))return e(s);for(t={};a<m;a++)i=void 0,r=s[n=(n=p[a])+""!==n?(i=n).getter:n](),t[n]=i&&r&&d[i.type]?W(r)?e(r):r.unmap():r;for(n in s)!s.hasOwnProperty(n)||"_"===n.charAt(0)&&b[n.slice(1)]||n===C||S(s[n])||(t[n]=s[n]);return t}var i,n,r,d=this,p=e.getters,a=e.extend,v=e.id,s=J.extend({_is:l||"unnamed",unmap:c,merge:u},a),o="",h="",m=p?p.length:0,w=J.observable,b={};for(t.prototype=s,i=0;i<m;i++)(t=>{t=t.getter||t,b[t]=i+1;var n="_"+t;o+=(o?",":"")+t,h+="this."+n+" = "+t+";\n",s[t]=s[t]||function(e){return arguments.length?void(w?w(this).setProperty(t,e):this[n]=e):this[n]},w&&(s[t].set=s[t].set||function(e){this[n]=e})})(p[i]);return h=new Function(o,h),((n=function(){h.apply(this,arguments),(r=arguments[m+1])&&y(this,arguments[m],r)}).prototype=s).constructor=n,f.map=function(e){var t,n,i,r,a=0,s=e=e+""===e?JSON.parse(e):e,o=[];if(W(e)){for(t=(e=e||[]).length;a<t;a++)o.push(this.map(e[a]));return o._is=l,o.unmap=c,o.merge=u,o}if(e){for(g(e,function(e,t){t&&(e=t.map(e)),o.push(e)}),s=this.apply(this,o),a=m;a--;)if(i=o[a],(r=p[a].parentRef)&&i&&i.unmap)if(W(i))for(t=i.length;t--;)y(i[t],r,s);else y(i,r,s);for(n in e)n===C||b[n]||(s[n]=e[n])}return s},f.getters=p,f.extend=a,f.id=v,f}},helper:{},converter:{}},v={jsviews:n,sub:{rPath:/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,rPrm:/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(?:(\()\s*)?\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,View:A,Err:t,tmplFn:E,parse:ae,extend:x,extendCtx:B,syntaxErr:Q,onStore:{template:function(e,t){null===t?delete je[e]:e&&(je[e]=t)}},addSetting:I,settings:{allowCode:!1},advSet:u,_thp:F,_gm:l,_tg:function(){},_cnvt:function(e,t,n,i){var r,a,s,o,l,u="number"==typeof n&&t.tmpl.bnds[n-1];if(void 0!==(i=void 0===i&&u&&u._lr?"":i)?n=i={props:{},args:[i]}:u&&(n=u(t.data,t,Y)),u=u._bd&&u,e||u){if(r=(a=t._lc)&&a.tag,n.view=t,!r){if(r=x(new Y._tg,{_:{bnd:u,unlinked:!0,lt:n.lt},inline:!a,tagName:":",convert:e,onArrayChange:!0,flow:!0,tagCtx:n,tagCtxs:[n],_is:"tag"}),1<(o=n.args.length))for(l=r.bindTo=[];o--;)l.unshift(o);a&&((a.tag=r).linkCtx=a),n.ctx=B(n.ctx,(a?a.view:t).ctx),F(r,n)}r._er=i&&s,r.ctx=n.ctx||r.ctx||{},n.ctx=void 0,s=r.cvtArgs()[0],r._er=i&&s}else s=n.args[0];return null!=(s=u&&t._.onRender?t._.onRender(s,t,r):s)?s:""},_tag:function(e,t,n,i,r,a){function T(e){var t=s[e];if(void 0!==t)for(t=W(t)?t:[t],p=t.length;p--;)k=t[p],isNaN(parseInt(k))||(t[p]=parseInt(k));return t||[0]}var s,o,l,u,c,d,p,h,m,f,g,v,w,b,y,C,x,U,A,S,$,k,_,M,I,D,E=0,j="",z=(t=t||O)._lc||!1,L=t.ctx,N=n||t.tmpl,P="number"==typeof i&&t.tmpl.bnds[i-1];for(("tag"===e._is?(e=(s=e).tagName,i=s.tagCtxs,s):o=t.getRsc("tags",e)||R("Unknown tag: {{"+e+"}} ")).template,void 0!==(a=void 0===a&&P&&(P._lr=o.lateRender&&!1!==P._lr||P._lr)?"":a)?(j+=a,i=a=[{props:{},args:[],params:{props:{}}}]):P&&(i=P(t.data,t,Y)),d=i.length;E<d;E++)y=(f=i[E]).tmpl,(!z||!z.tag||E&&!z.tag.inline||s._er||y&&+y===y)&&(y&&N.tmpls&&(f.tmpl=f.content=N.tmpls[y-1]),f.index=E,f.ctxPrm=H,f.render=te,f.cvtArgs=G,f.bndArgs=X,f.view=t,f.ctx=B(B(f.ctx,o&&o.ctx),L)),(n=f.props.tmpl)&&(f.tmpl=t._getTmpl(n),f.content=f.content||f.tmpl),s?z&&z.fn._lr&&(C=!!s.init):(C=!!(s=new o._ctr).init,s.parent=c=L&&L.tag,s.tagCtxs=i,z&&(s.inline=!1,z.tag=s),s.linkCtx=z,(s._.bnd=P||z.fn)?(s._.ths=f.params.props.this,s._.lt=i.lt,s._.arrVws={}):s.dataBoundOnly&&R(e+" must be data-bound:\n{^{"+e+"}}")),S=s.dataMap,f.tag=s,S&&i&&(f.map=i[E].map),s.flow||(y=f.ctx=f.ctx||{},l=s.parents=y.parentTags=L&&B(y.parentTags,L.parentTags)||{},c&&(l[c.tagName]=c),l[s.tagName]=y.tag=s,y.tagCtx=f);if(!(s._er=a)){for(F(s,i[0]),s.rendering={rndr:s.rendering},E=0;E<d;E++){if(A=(f=s.tagCtx=i[E]).props,s.ctx=f.ctx,!E){if(C&&(s.init(f,z,s.ctx),C=void 0),f.args.length||!1===f.argDefault||!1===s.argDefault||(f.args=x=[f.view.data],f.params.args=["#data"]),v=T("bindTo"),void 0!==s.bindTo&&(s.bindTo=v),void 0!==s.bindFrom?s.bindFrom=T("bindFrom"):s.bindTo&&(s.bindFrom=s.bindTo=v),w=s.bindFrom||v,M=v.length,_=w.length,s._.bnd&&(I=s.linkedElement)&&(s.linkedElement=I=W(I)?I:[I],M!==I.length)&&R("linkedElement not same length as bindTo"),(I=s.linkedCtxParam)&&(s.linkedCtxParam=I=W(I)?I:[I],_!==I.length)&&R("linkedCtxParam not same length as bindFrom/bindTo"),w)for(s._.fromIndex={},s._.toIndex={},h=_;h--;)for(k=w[h],p=M;p--;)k===v[p]&&(s._.fromIndex[p]=h,s._.toIndex[h]=p);z&&(z.attr=s.attr=z.attr||s.attr||z._dfAt),u=s.attr,s._.noVws=u&&u!==V}if(x=s.cvtArgs(E),s.linkedCtxParam)for(U=s.cvtArgs(E,1),p=_,D=s.constructor.prototype.ctx;p--;)(g=s.linkedCtxParam[p])&&(k=w[p],b=U[p],f.ctx[g]=Y._cp(D&&void 0===b?D[g]:b,void 0!==b&&K(f.params,k),f.view,s._.bnd&&{tag:s,cvt:s.convert,ind:p,tagElse:E}));($=A.dataMap||S)&&(x.length||A.dataMap)&&((A=f.map)&&A.src===x[0]&&!r||(A&&A.src&&A.unmap(),$.map(x[0],f,A,!s._.bnd),A=f.map),x=[A.tgt]),m=void 0,s.render&&(m=s.render.apply(s,x),t.linked)&&m&&!ye.test(m)&&((n={links:[]}).render=n.fn=function(){return m},m=ne(n,t.data,void 0,!0,t,void 0,void 0,s)),x.length||(x=[t]),void 0===m&&($=x[0],s.contentCtx&&($=!0===s.contentCtx?t:s.contentCtx($)),m=f.render($,!0)||(r?void 0:"")),j=j?j+(m||""):void 0!==m?""+m:void 0}s.rendering=s.rendering.rndr}return s.tagCtx=i[0],s.ctx=s.tagCtx.ctx,s._.noVws&&s.inline&&(j="text"===u?q.html(j):""),P&&t._.onRender?t._.onRender(j,t,s):j},_er:R,_err:function(e,t,n){var i=void 0!==n?S(n)?n.call(t.data,e,t):n||"":"{Error: "+(e.message||e)+"}";return N.onError&&void 0!==(n=N.onError.call(t.data,e,n&&i,t))&&(i=n),t&&!t._lc?q.html(i):i},_cp:e,_sq:function(e){return"constructor"===e&&Q(""),e}},settings:{delimiters:b,advanced:function(e){return e?(x(Z,e),Y.advSet(),a):Z}},map:D};if((t.prototype=new Error).constructor=t,$.depends=function(){return[this.get("item"),"index"]},k.depends="index",A.prototype={get:function(e,t){t||!0===e||(t=e,e=void 0);var n,i,r,a,s=this,o="root"===t;if(e){if(!(a=t&&s.type===t&&s))if(n=s.views,s._.useKey){for(i in n)if(a=t?n[i].get(e,t):n[i])break}else for(i=0,r=n.length;!a&&i<r;i++)a=t?n[i].get(e,t):n[i]}else if(o)a=s.root;else if(t)for(;s&&!a;)a=s.type===t?s:void 0,s=s.parent;else a=s.parent;return a||void 0},getIndex:k,ctxPrm:H,getRsc:function(e,t){var n,i,r=this;if(""+t===t){for(;void 0===n&&r;)n=(i=r.tmpl&&r.tmpl[e])&&i[t],r=r.parent;return n||v[e][t]}},_getTmpl:function(e){return e&&(e.fn?e:this.getRsc("templates",e)||h(e))},_getOb:_,getCache:function(e){return N._cchCt>this.cache._ct&&(this.cache={_ct:N._cchCt}),void 0!==this.cache[e]?this.cache[e]:this.cache[e]=Ee[e](this.data,this,Y)},_is:"view"},Y=v.sub,a=v.settings,!(g||J&&J.render)){for(le in Le)M(le,Le[le]);if(q=v.converters,ue=v.helpers,U=v.tags,Y._tg.prototype={baseApply:function(e){return this.base.apply(this,e)},cvtArgs:G,bndArgs:X,ctxPrm:H},O=Y.topView=new A,J){if(J.fn.render=z,C=J.expando,J.observable){if(n!==(n=J.views.jsviews))throw"jquery.observable.js requires jsrender.js "+n;x(Y,J.views.sub),v.map=J.views.map}}else J={},oe&&(c.jsrender=J),J.renderFile=J.__express=J.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},J.isFunction=function(e){return"function"==typeof e},J.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},Y._jq=function(e){e!==J&&(x(e,J),(J=e).fn.render=z,delete J.jsrender,C=J.expando)},J.jsrender=n;for(ce in(N=Y.settings).allowCode=!1,S=J.isFunction,J.render=je,J.views=v,J.templates=h=v.templates,N)I(ce);(a.debugMode=function(e){return void 0===e?N.debugMode:(N._clFns&&N._clFns(),N.debugMode=e,N.onError=e+""===e?function(){return e}:S(e)?e:void 0,a)})(!1),Z=N.advanced={cache:!0,useViews:!1,_jsv:!1},U({if:{render:function(e){var t=this.tagCtx;return this.rendering.done||!e&&(t.args.length||!t.index)?"":(this.rendering.done=!0,void(this.selected=t.index))},contentCtx:!0,flow:!0},for:{sortDataMap:D(j),init:function(e,t){this.setDataMap(this.tagCtxs)},render:function(e){var t,n,i,r,a=this.tagCtx,s=!1===a.argDefault,o=a.props,l=s||a.args.length,u="",c=0;if(!this.rendering.done){if(t=l?e:a.view.data,s)for(s=o.reverse?"unshift":"push",i=+o.end,r=+o.step||1,t=[],n=+o.start||0;0<(i-n)*r;n+=r)t[s](n);void 0!==t&&(e=W(t),u+=a.render(t,!l||o.noIteration),c+=e?t.length:1),(this.rendering.done=c)&&(this.selected=a.index)}return u},setDataMap:function(e){for(var t,n,i,r=e.length;r--;)n=(t=e[r]).props,i=t.params.props,t.argDefault=void 0===n.end||0<t.args.length,n.dataMap=!1!==t.argDefault&&W(t.args[0])&&(i.sort||i.start||i.end||i.step||i.filter||i.reverse||n.sort||n.start||n.end||n.step||n.filter||n.reverse)&&this.sortDataMap},flow:!0},props:{baseTag:"for",dataMap:D(function(e,t){var n,i,r=t.map,a=r&&r.propsArr;if(!a){if(a=[],typeof e===Me||S(e))for(n in e)i=e[n],n===C||!e.hasOwnProperty(n)||t.props.noFunctions&&J.isFunction(i)||a.push({key:n,prop:i});r&&(r.propsArr=r.options&&a)}return j(a,t)}),init:u,flow:!0},include:{flow:!0},"*":{render:e,flow:!0},":*":{render:e,flow:!0},dbg:ue.dbg=q.dbg=function(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}}),q({html:T,attr:T,encode:function(e){return""+e===e?e.replace(xe,L):e},unencode:function(e){return""+e===e?e.replace(Ae,P):e},url:function(e){return null!=e?encodeURI(""+e):null===e?e:""}})}return N=Y.settings,W=(J||g).isArray,a.delimiters("{{","}}","^"),ze&&g.views.sub._jq(J),J||g},window),(l=>{function e(){this.minw=40,this.minh=40,this.maxw=0,this.maxh=0,this.core=null}function t(){this.core=null}function i(){this.core=null}function r(){this.stepx=1,this.stepy=1,this.core=null}function a(){this.ratio=0,this.core=null}function s(){this.core=null}function o(e,t){this.color=t||"black",this.opacity=e||.5,this.core=null,this.shades={}}function u(e){this.selection=e,this.core=e.core}function c(e,t,n){var i=this,t=(i.x=e.pageX,i.y=e.pageY,i.selection=t,i.eventTarget=t.core.opt.dragEventTarget,i.orig=t.get(),t.callFilterFunction("refresh"),t.core.container.position());i.elx=t.left,i.ely=t.top,i.offsetx=0,i.offsety=0,i.ord=n,i.opposite=i.getOppositeCornerOffset(),i.initEvents(e)}function d(e){this.core=e}function p(e,t,n){this.src=e,t=t||new Image,this.element=t,this.callback=n,this.load()}function h(e){this.core=e,this.init()}function m(e){this.core=e,this.init()}function f(){}function g(e,t){l.extend(this,g.defaults,t||{}),this.manager=e,this.core=e.core}function v(e){this.core=e,this.ui=e.ui,this.init()}l.extend(e.prototype,{tag:"backoff",priority:22,filter:function(e){var t=this.bound;return e.x<t.minx&&(e.x=t.minx,e.x2=e.w+e.x),e.y<t.miny&&(e.y=t.miny,e.y2=e.h+e.y),t.maxx<e.x2&&(e.x2=t.maxx,e.x=e.x2-e.w),t.maxy<e.y2&&(e.y2=t.maxy,e.y=e.y2-e.h),e},refresh:function(e){this.elw=e.core.container.width(),this.elh=e.core.container.height(),this.bound={minx:0+e.edge.w,miny:0+e.edge.n,maxx:this.elw+e.edge.e,maxy:this.elh+e.edge.s}}}),l.extend(t.prototype,{tag:"constrain",priority:5,filter:function(e,t){return"move"==t?(e.x<this.minx&&(e.x=this.minx,e.x2=e.w+e.x),e.y<this.miny&&(e.y=this.miny,e.y2=e.h+e.y),e.x2>this.maxx&&(e.x2=this.maxx,e.x=e.x2-e.w),e.y2>this.maxy&&(e.y2=this.maxy,e.y=e.y2-e.h)):(e.x<this.minx&&(e.x=this.minx),e.y<this.miny&&(e.y=this.miny),e.x2>this.maxx&&(e.x2=this.maxx),e.y2>this.maxy&&(e.y2=this.maxy)),e.w=e.x2-e.x,e.h=e.y2-e.y,e},refresh:function(e){this.elw=e.core.container.width(),this.elh=e.core.container.height(),this.minx=0+e.edge.w,this.miny=0+e.edge.n,this.maxx=this.elw+e.edge.e,this.maxy=this.elh+e.edge.s}}),l.extend(i.prototype,{tag:"extent",priority:12,offsetFromCorner:function(e,t,n){var i=t[0],r=t[1];switch(e){case"bl":return[n.x2-i,n.y,i,r];case"tl":return[n.x2-i,n.y2-r,i,r];case"br":return[n.x,n.y,i,r];case"tr":return[n.x,n.y2-r,i,r]}},getQuadrant:function(e){var t=e.opposite[0]-e.offsetx,e=e.opposite[1]-e.offsety;return t<0&&e<0?"br":0<=t&&0<=e?"tl":t<0&&0<=e?"tr":"bl"},filter:function(e,t,n){var i,r;return"move"==t||(t=e.w,i=e.h,n=n.state,r=this.limits,n=n?this.getQuadrant(n):"br",r.minw&&t<r.minw&&(t=r.minw),r.minh&&i<r.minh&&(i=r.minh),r.maxw&&t>r.maxw&&(t=r.maxw),r.maxh&&i>r.maxh&&(i=r.maxh),t==e.w&&i==e.h)?e:w.wrapFromXywh(this.offsetFromCorner(n,[t,i],e))},refresh:function(e){this.elw=e.core.container.width(),this.elh=e.core.container.height(),this.limits={minw:e.minSize[0],minh:e.minSize[1],maxw:e.maxSize[0],maxh:e.maxSize[1]}}}),l.extend(r.prototype,{tag:"grid",priority:19,filter:function(e){e={x:Math.round(e.x/this.stepx)*this.stepx,y:Math.round(e.y/this.stepy)*this.stepy,x2:Math.round(e.x2/this.stepx)*this.stepx,y2:Math.round(e.y2/this.stepy)*this.stepy};return e.w=e.x2-e.x,e.h=e.y2-e.y,e}}),l.extend(a.prototype,{tag:"ratio",priority:15,offsetFromCorner:function(e,t,n){var i=t[0],r=t[1];switch(e){case"bl":return[n.x2-i,n.y,i,r];case"tl":return[n.x2-i,n.y2-r,i,r];case"br":return[n.x,n.y,i,r];case"tr":return[n.x,n.y2-r,i,r]}},getBoundRatio:function(e,t){var n=w.getLargestBox(this.ratio,e.w,e.h);return w.wrapFromXywh(this.offsetFromCorner(t,n,e))},getQuadrant:function(e){var t=e.opposite[0]-e.offsetx,e=e.opposite[1]-e.offsety;return t<0&&e<0?"br":0<=t&&0<=e?"tl":t<0&&0<=e?"tr":"bl"},filter:function(e,t,n){if(!this.ratio)return e;e.w;var n=n.state,i=n?this.getQuadrant(n):"br";if("move"==(t=t||"se"))return e;switch(t){case"n":e.x2=this.elw,e.w=e.x2-e.x,i="tr";break;case"s":e.x2=this.elw,e.w=e.x2-e.x,i="br";break;case"e":e.y2=this.elh,e.h=e.y2-e.y,i="br";break;case"w":e.y2=this.elh,e.h=e.y2-e.y,i="bl"}return this.getBoundRatio(e,i)},refresh:function(e){this.ratio=e.aspectRatio,this.elw=e.core.container.width(),this.elh=e.core.container.height()}}),l.extend(s.prototype,{tag:"round",priority:90,filter:function(e){e={x:Math.round(e.x),y:Math.round(e.y),x2:Math.round(e.x2),y2:Math.round(e.y2)};return e.w=e.x2-e.x,e.h=e.y2-e.y,e}}),l.extend(o.prototype,{tag:"shader",fade:!0,fadeEasing:"swing",fadeSpeed:320,priority:95,init:function(){var e=this;e.attached||(e.visible=!1,e.container=l("<div />").addClass(e.core.opt.css_shades).prependTo(this.core.container).hide(),e.elh=this.core.container.height(),e.elw=this.core.container.width(),e.shades={top:e.createShade(),right:e.createShade(),left:e.createShade(),bottom:e.createShade()},e.attached=!0)},destroy:function(){this.container.remove()},setColor:function(n,i){var r,a=this;return n!=a.color&&(this.color=n,r=w.supportsColorFade(),l.each(a.shades,function(e,t){a.fade&&!i&&r?t.animate({backgroundColor:n},{queue:!1,duration:a.fadeSpeed,easing:a.fadeEasing}):t.css("backgroundColor",n)})),a},setOpacity:function(n,i){var r=this;return n==r.opacity||(r.opacity=n,l.each(r.shades,function(e,t){!r.fade||i?t.css({opacity:n}):t.animate({opacity:n},{queue:!1,duration:r.fadeSpeed,easing:r.fadeEasing})})),r},createShade:function(){return l("<div />").css({position:"absolute",backgroundColor:this.color,opacity:this.opacity}).appendTo(this.container)},refresh:function(e){var t=this.core,n=this.shades;this.setColor(e.bgColor||this.core.opt.bgColor),this.setOpacity(e.bgOpacity||this.core.opt.bgOpacity),this.elh=t.container.height(),this.elw=t.container.width(),n.right.css("height",this.elh+"px"),n.left.css("height",this.elh+"px")},filter:function(e,t,n){var i;return n.active&&((i=(n=this).shades).top.css({left:Math.round(e.x)+"px",width:Math.round(e.w)+"px",height:Math.round(e.y)+"px"}),i.bottom.css({top:Math.round(e.y2)+"px",left:Math.round(e.x)+"px",width:Math.round(e.w)+"px",height:n.elh-Math.round(e.y2)+"px"}),i.right.css({left:Math.round(e.x2)+"px",width:n.elw-Math.round(e.x2)+"px"}),i.left.css({width:Math.round(e.x)+"px"}),n.visible||(n.container.show(),n.visible=!0)),e}}),l.extend(u.prototype,{getElement:function(){var e=this.selection.get();return l("<div />").css({position:"absolute",top:e.y+"px",left:e.x+"px",width:e.w+"px",height:e.h+"px"})},animate:function(e,t,n,i,r){var a=this;a.selection.allowResize(!1),a.getElement().animate({top:t+"px",left:e+"px",width:n+"px",height:i+"px"},{easing:a.core.opt.animEasing,duration:a.core.opt.animDuration,complete:function(){a.selection.allowResize(!0),r&&r.call(this)},progress:function(e){for(var t={},n=e.tweens,i=0;i<n.length;i++)t[n[i].prop]=n[i].now;e={x:parseInt(t.left),y:parseInt(t.top),w:parseInt(t.width),h:parseInt(t.height)};e.x2=e.x+e.w,e.y2=e.y+e.h,a.selection.updateRaw(e,"se")}})}}),l.extend(c.prototype,{getOppositeCornerOffset:function(){var e=this.orig,t=this.x-this.elx-e.x,n=this.y-this.ely-e.y;switch(this.ord){case"nw":case"w":return[e.w-t,e.h-n];case"sw":return[e.w-t,-n];case"se":case"s":case"e":return[-t,-n];case"ne":case"n":return[-t,e.h-n]}return[null,null]},initEvents:function(){l(this.eventTarget).on("mousemove.jcrop",this.createDragHandler()).on("mouseup.jcrop",this.createStopHandler())},dragEvent:function(e){this.offsetx=e.pageX-this.x,this.offsety=e.pageY-this.y,this.selection.updateRaw(this.getBox(),this.ord)},endDragEvent:function(){var e=this.selection;e.element.trigger("cropend",[e,e.core.unscale(e.get())])},createStopHandler:function(){var t=this;return function(e){return l(t.eventTarget).off(".jcrop"),t.endDragEvent(e),!1}},createDragHandler:function(){var t=this;return function(e){return t.dragEvent(e),!1}},update:function(e,t){this.offsetx=e-this.x,this.offsety=t-this.y},resultWrap:function(e){e={x:Math.min(e[0],e[2]),y:Math.min(e[1],e[3]),x2:Math.max(e[0],e[2]),y2:Math.max(e[1],e[3])};return e.w=e.x2-e.x,e.h=e.y2-e.y,e},getBox:function(){var e=this,t=e.orig,n={x2:t.x+t.w,y2:t.y+t.h};switch(e.ord){case"n":return e.resultWrap([t.x,e.offsety+t.y,n.x2,n.y2]);case"s":return e.resultWrap([t.x,t.y,n.x2,e.offsety+n.y2]);case"e":return e.resultWrap([t.x,t.y,e.offsetx+n.x2,n.y2]);case"w":return e.resultWrap([t.x+e.offsetx,t.y,n.x2,n.y2]);case"sw":return e.resultWrap([e.offsetx+t.x,t.y,n.x2,e.offsety+n.y2]);case"se":return e.resultWrap([t.x,t.y,e.offsetx+n.x2,e.offsety+n.y2]);case"ne":return e.resultWrap([t.x,e.offsety+t.y,e.offsetx+n.x2,n.y2]);case"nw":return e.resultWrap([e.offsetx+t.x,e.offsety+t.y,n.x2,n.y2]);case"move":return n.nx=t.x+e.offsetx,n.ny=t.y+e.offsety,e.resultWrap([n.nx,n.ny,n.nx+t.w,n.ny+t.h])}}}),l.extend(d,{prototype:{on:function(e,t){l(this).on(e,t)},off:function(e){l(this).off(e)},trigger:function(e){l(this).trigger(e)}}}),l.extend(p,{attach:function(e,t){return new p(e.src,e,t)},prototype:{getDimensions:function(){var e=this.element;return e.naturalWidth?[e.naturalWidth,e.naturalHeight]:e.width?[e.width,e.height]:null},fireCallback:function(){this.element.onload=null,"function"==typeof this.callback&&this.callback.apply(this,this.getDimensions())},isLoaded:function(){return this.element.complete},load:function(){var e=this;e.element.src=e.src,e.isLoaded()?e.fireCallback():e.element.onload=function(){e.fireCallback()}}}}),l.extend(h,{support:function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||void 0},prototype:{init:function(){var e=l.Jcrop.component.DragState.prototype;e.touch||(this.initEvents(),this.shimDragState(),this.shimStageDrag(),e.touch=!0)},shimDragState:function(){var t=this;l.Jcrop.component.DragState.prototype.initEvents=function(e){"touch"==e.type.substr(0,5)?l(this.eventTarget).on("touchmove.jcrop.jcrop-touch",t.dragWrap(this.createDragHandler())).on("touchend.jcrop.jcrop-touch",this.createStopHandler()):l(this.eventTarget).on("mousemove.jcrop",this.createDragHandler()).on("mouseup.jcrop",this.createStopHandler())}},shimStageDrag:function(){this.core.container.addClass("jcrop-touch").on("touchstart.jcrop.jcrop-stage",this.dragWrap(this.core.ui.stage.startDragHandler()))},dragWrap:function(t){return function(e){return e.preventDefault(),e.stopPropagation(),"touch"==e.type.substr(0,5)&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,t(e))}},initEvents:function(){var e=this.core;e.container.on("touchstart.jcrop.jcrop-touch","."+e.opt.css_drag,this.dragWrap(e.startDrag()))}}}),l.extend(m,{defaults:{eventName:"keydown.jcrop",passthru:[9],debug:!1},prototype:{init:function(){l.extend(this,m.defaults),this.enable()},disable:function(){this.core.container.off(this.eventName)},enable:function(){var n=this,i=n.core;i.container.on(n.eventName,function(e){var t=e.shiftKey?16:2;if(0<=l.inArray(e.keyCode,n.passthru))return!0;switch(e.keyCode){case 37:i.nudge(-t,0);break;case 38:i.nudge(0,-t);break;case 39:i.nudge(t,0);break;case 40:i.nudge(0,t);break;case 46:case 8:return i.requestDelete(),!1;default:n.debug&&console.log("keycode: "+e.keyCode)}e.metaKey||e.ctrlKey||e.preventDefault()})}}}),l.extend(f,{defaults:{minSize:[8,8],maxSize:[0,0],aspectRatio:0,edge:{n:0,s:0,e:0,w:0},bgColor:null,bgOpacity:null,last:null,state:null,active:!0,linked:!0,canDelete:!0,canDrag:!0,canResize:!0,canSelect:!0},prototype:{init:function(e){this.core=e,this.startup(),this.linked=this.core.opt.linked,this.attach(),this.setOptions(this.core.opt),e.container.trigger("cropcreate",[this])},attach:function(){},startup:function(){var e=this,t=e.core.opt;l.extend(e,f.defaults),e.filter=e.core.getDefaultFilters(),e.element=l("<div />").addClass(t.css_selection).data({selection:e}),e.frame=l("<button />").addClass(t.css_button).data("ord","move"),e.element.append(e.frame).appendTo(e.core.container),e.core.opt.is_msie&&e.frame.css({opacity:0,backgroundColor:"white"}),e.insertElements(),e.frame.on("focus.jcrop",function(){e.element.trigger("cropfocus",e),e.core.setSelection(e),e.element.addClass("jcrop-focus")}).on("blur.jcrop",function(){e.element.removeClass("jcrop-focus"),e.element.trigger("cropblur",e)})},propagate:["canDelete","canDrag","canResize","canSelect","minSize","maxSize","aspectRatio","edge"],setOptions:function(e){return w.propagate(this.propagate,e,this),this.refresh(),this},refresh:function(){this.allowResize(),this.allowDrag(),this.allowSelect(),this.callFilterFunction("refresh"),this.updateRaw(this.get(),"se")},callFilterFunction:function(e){for(var t=0;t<this.filter.length;t++)this.filter[t][e]&&this.filter[t][e](this);return this},addFilter:function(e){e.core=this.core,this.hasFilter(e)||(this.filter.push(e),this.sortFilters(),e.init&&e.init(),this.refresh())},hasFilter:function(e){for(var t=this.filter,n=0;n<t.length;n++)if(t[n]===e)return!0},sortFilters:function(){this.filter.sort(function(e,t){return e.priority-t.priority})},clearFilters:function(){for(var e=this.filter,t=0;t<e.length;t++)e[t].destroy&&e[t].destroy();this.filter=[]},removeFilter:function(e){for(var t=this.filter,n=[],i=0;i<t.length;i++)t[i].tag&&t[i].tag==e||e===t[i]?t[i].destroy&&t[i].destroy():n.push(t[i]);this.filter=n},runFilters:function(e,t){for(var n=0;n<this.filter.length;n++)e=this.filter[n].filter(e,t,this);return e},endDrag:function(){this.state&&(l(document.body).off(".jcrop"),this.focus(),this.state=null)},startDrag:function(e,t){return this.core,t=t||l(e.target).data("ord"),this.focus(),"move"==t&&this.element.hasClass(this.core.opt.css_nodrag)||(this.state=new w.component.DragState(e,this,t)),!1},allowSelect:function(e){return(e=void 0===e?this.canSelect:e)&&this.canSelect?this.frame.attr("disabled",!1):this.frame.attr("disabled","disabled"),this},allowDrag:function(e){var t=this,n=t.core.opt;return(e=null==e?t.canDrag:e)&&t.canDrag?t.element.removeClass(n.css_nodrag):t.element.addClass(n.css_nodrag),this},allowResize:function(e){var t=this,n=t.core.opt;return(e=null==e?t.canResize:e)&&t.canResize?t.element.removeClass(n.css_noresize):t.element.addClass(n.css_noresize),this},remove:function(){this.element.trigger("cropremove",this),this.element.remove()},toBack:function(){this.active=!1,this.element.removeClass("jcrop-current").removeClass("jcrop-focus").css({zIndex:20})},toFront:function(){this.active=!0,this.element.addClass("jcrop-current").css({zIndex:30}),this.callFilterFunction("refresh"),this.refresh()},redraw:function(e){return this.moveTo(e.x,e.y),this.resize(e.w,e.h),this.last=e,this},update:function(e,t){return this.updateRaw(this.core.scale(e),t)},updateRaw:function(e,t){return e=this.runFilters(e,t),this.redraw(e),this.element.trigger("cropmove",[this,this.core.unscale(e)]),this},animateTo:function(e,t){var n=new w.component.Animator(this),e=this.core.scale(w.wrapFromXywh(e));n.animate(e.x,e.y,e.w,e.h,t)},center:function(e){var t=this.get(),n=this.core,i=n.container.width(),n=n.container.height(),i=[(i-t.w)/2,(n-t.h)/2,t.w,t.h];return this[e?"setSelect":"animateTo"](i)},createElement:function(e,t){return l("<div />").addClass(e+" ord-"+t).data("ord",t)},moveTo:function(e,t){this.element.css({top:t+"px",left:e+"px"})},blur:function(){return this.element.blur(),this},focus:function(){return this.core.setSelection(this),this.frame.focus(),this},resize:function(e,t){this.element.css({width:e+"px",height:t+"px"})},get:function(){var e=this.element,t=e.position(),n=e.width(),e=e.height(),t={x:t.left,y:t.top};return t.x2=t.x+n,t.y2=t.y+e,t.w=n,t.h=e,t},insertElements:function(){for(var e=this,t=(e.core,e.element),n=e.core.opt,i=n.borders,r=n.handles,a=n.dragbars,s=0;s<i.length;s++)t.append(e.createElement(n.css_borders,i[s]));for(s=0;s<a.length;s++)t.append(e.createElement(n.css_dragbars,a[s]));for(s=0;s<r.length;s++)t.append(e.createElement(n.css_handles,r[s]))}}}),g.defaults={offset:[-8,-8],active:!0,minsize:[20,20]},l.extend(g.prototype,{start:function(e){var t=this.core;if(!t.opt.allowSelect)return!1;if(t.opt.multi&&t.opt.multiMax&&t.ui.multi.length>=t.opt.multiMax)return!1;var n=l(e.currentTarget).offset(),i=e.pageX-n.left+this.offset[0],n=e.pageY-n.top+this.offset[1],r=t.ui.multi;if(!t.opt.multi)if(t.opt.multiCleanup){for(var a=0;a<r.length;a++)r[a].remove();t.ui.multi=[]}else t.removeSelection(t.ui.selection);t=t.newSelection().updateRaw(w.wrapFromXywh([i,n,1,1]));return t.element.trigger("cropstart",[t,this.core.unscale(t.get())]),t.startDrag(e,"se")},end:function(e,t){this.drag(e,t);e=this.sel.get();e.w<this.minsize[0]||e.h<this.minsize[1]?this.core.requestDelete():this.sel.focus()}}),l.extend(v.prototype,{init:function(){this.setupEvents(),this.dragger=new g(this)},tellConfigUpdate:function(e){for(var t=0,n=this.ui.multi,i=n.length;t<i;t++)n[t].setOptions&&(n[t].linked||this.core.opt.linkCurrent&&n[t]==this.ui.selection)&&n[t].setOptions(e)},startDragHandler:function(){var t=this;return function(e){return!e.button||t.core.opt.is_ie_lt9?t.dragger.start(e):void 0}},removeEvents:function(){this.core.event.off(".jcrop-stage"),this.core.container.off(".jcrop-stage")},shimLegacyHandlers:function(n){var i,r=this.core;l.each(r.opt.legacyHandlers,function(e,t){e in n&&(i=n[e],r.container.off(".jcrop-"+e).on(t+".jcrop.jcrop-"+e,function(e,t,n){i.call(r,n)}),delete n[e])})},setupEvents:function(){var e=this,t=e.core;t.event.on("configupdate.jcrop-stage",function(){e.shimLegacyHandlers(t.opt),e.tellConfigUpdate(t.opt),t.container.trigger("cropconfig",[t,t.opt])}),this.core.container.on("mousedown.jcrop.jcrop-stage",this.startDragHandler())}});var w=function(e,t){var n=navigator.userAgent.toLowerCase();this.opt=l.extend({},w.defaults,t||{}),this.container=l(e),this.opt.is_msie=/msie/.test(n),this.opt.is_ie_lt9=/msie [1-8]\./.test(n),this.container.addClass(this.opt.css_container),this.ui={},this.state=null,this.ui.multi=[],this.ui.selection=null,this.filter={},this.init(),this.setOptions(t),this.applySizeConstraints(),this.container.trigger("cropinit",this),this.opt.is_ie_lt9&&(this.opt.dragEventTarget=document.body)};w.component={Animator:u,DragState:c,EventManager:d,ImageLoader:p,StageManager:v,Selection:f,Keyboard:m,Touch:h},l.extend(w,{defaults:{edge:{n:0,s:0,e:0,w:0},setSelect:null,linked:!0,linkCurrent:!0,canDelete:!0,canSelect:!0,canDrag:!0,canResize:!0,eventManagerComponent:w.component.EventManager,keyboardComponent:w.component.Keyboard,dragstateComponent:w.component.DragState,stagemanagerComponent:w.component.StageManager,animatorComponent:w.component.Animator,selectionComponent:w.component.Selection,allowSelect:!0,multi:!1,multiMax:!1,multiCleanup:!0,animation:!0,animEasing:"swing",animDuration:400,fading:!0,fadeDuration:300,fadeEasing:"swing",bgColor:"black",bgOpacity:.5,applyFilters:["constrain","extent","backoff","ratio","shader","round"],borders:["n","s","e","w"],handles:["n","s","e","w","sw","ne","nw","se"],dragbars:["n","e","w","s"],dragEventTarget:window,xscale:1,yscale:1,boxWidth:null,boxHeight:null,css_nodrag:"jcrop-nodrag",css_drag:"jcrop-drag",css_container:"jcrop-active",css_shades:"jcrop-shades",css_selection:"jcrop-selection",css_borders:"jcrop-border",css_handles:"jcrop-handle jcrop-drag",css_button:"jcrop-box jcrop-drag",css_noresize:"jcrop-noresize",css_dragbars:"jcrop-dragbar jcrop-drag",legacyHandlers:{onChange:"cropmove",onSelect:"cropend"}},filter:{constrain:t,extent:i,grid:r,backoff:e,shader:o,ratio:a,round:s},attach:function(e,t){return new l.Jcrop(e,t)},supportsCanvas:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},imgCopy:function(e){var t=new Image;return t.src=e.src,t},imageClone:function(e){return w.supportsCanvas()?w.canvasClone(e):w.imgCopy(e)},canvasClone:function(e){var t=document.createElement("canvas"),n=l(t).width(e.width).height(e.height),i=t.getContext("2d");return t.width=e.naturalWidth,t.height=e.naturalHeight,i.drawImage(e,0,0,e.naturalWidth,e.naturalHeight),n},propagate:function(e,t,n){for(var i=0,r=e.length;i<r;i++)t.hasOwnProperty(e[i])&&(n[e[i]]=t[e[i]])},getLargestBox:function(e,t,n){return e<t/n?[n*e,n]:[t,t/e]},supportsColorFade:function(){return l.fx.step.hasOwnProperty("backgroundColor")},wrapFromXywh:function(e){e={x:e[0],y:e[1],w:e[2],h:e[3]};return e.x2=e.x+e.w,e.y2=e.y+e.h,e}}),l.extend(w.prototype,{init:function(){this.event=new this.opt.eventManagerComponent(this),this.ui.keyboard=new this.opt.keyboardComponent(this),this.ui.stage=new this.opt.stagemanagerComponent(this),this.applyFilters(),l.Jcrop.component.Touch.support()&&new l.Jcrop.component.Touch(this),this.initEvents()},applySizeConstraints:function(){var e,t,n,i=this.opt,r=this.opt.imgTarget;r&&(e=r.naturalWidth||r.width,t=r.naturalHeight||r.height,n=i.boxWidth||e,i=i.boxHeight||t,r)&&(n<e||i<t)&&(n=w.getLargestBox(e/t,n,i),l(r).width(n[0]).height(n[1]),this.resizeContainer(n[0],n[1]),this.opt.xscale=e/n[0],this.opt.yscale=t/n[1])},setOptions:function(e){return l.isPlainObject(e)||(e={}),l.extend(this.opt,e),this.opt.setSelect&&(this.ui.multi.length||this.newSelection(),this.ui.multi[0].update(w.wrapFromXywh(this.opt.setSelect)),this.opt.setSelect=null),this.event.trigger("configupdate"),this},destroy:function(){this.opt.imgTarget?(this.container.before(this.opt.imgTarget),this.container.remove(),l(this.opt.imgTarget).removeData("Jcrop")):this.container.remove()},applyFilters:function(){for(var e,t=0,n=this.opt.applyFilters,i=n.length;t<i;t++)(e=l.Jcrop.filter[n[t]]?new l.Jcrop.filter[n[t]]:e).core=this,e.init&&e.init(),this.filter[n[t]]=e},getDefaultFilters:function(){for(var e=[],t=0,n=this.opt.applyFilters,i=n.length;t<i;t++)this.filter.hasOwnProperty(n[t])&&e.push(this.filter[n[t]]);return e.sort(function(e,t){return e.priority-t.priority}),e},setSelection:function(e){for(var t=this.ui.multi,n=[],i=0;i<t.length;i++)t[i]!==e&&n.push(t[i]),t[i].toBack();return n.unshift(e),this.ui.multi=n,(this.ui.selection=e).toFront(),e},getSelection:function(){return this.ui.selection.get()},newSelection:function(e){return(e=e||new this.opt.selectionComponent).init(this),this.setSelection(e),e},hasSelection:function(e){for(var t=0;t<this.ui.multi;t++)if(e===this.ui.multi[t])return!0},removeSelection:function(e){for(var t=[],n=this.ui.multi,i=0;i<n.length;i++)e!==n[i]?t.push(n[i]):n[i].remove();return this.ui.multi=t},addFilter:function(e){for(var t=0,n=this.ui.multi,i=n.length;t<i;t++)n[t].addFilter(e);return this},removeFilter:function(e){for(var t=0,n=this.ui.multi,i=n.length;t<i;t++)n[t].removeFilter(e);return this},blur:function(){return this.ui.selection.blur(),this},focus:function(){return this.ui.selection.focus(),this},initEvents:function(){this.container.on("selectstart",function(){return!1}).on("mousedown","."+this.opt.css_drag,this.startDrag())},maxSelect:function(){this.setSelect([0,0,this.elw,this.elh])},nudge:function(e,t){var n=this.ui.selection,i=n.get();i.x+=e,i.x2+=e,i.y+=t,i.y2+=t,i.x<0?(i.x2=i.w,i.x=0):i.x2>this.elw&&(i.x2=this.elw,i.x=i.x2-i.w),i.y<0?(i.y2=i.h,i.y=0):i.y2>this.elh&&(i.y2=this.elh,i.y=i.y2-i.h),n.element.trigger("cropstart",[n,this.unscale(i)]),n.updateRaw(i,"move"),n.element.trigger("cropend",[n,this.unscale(i)])},refresh:function(){for(var e=0,t=this.ui.multi,n=t.length;e<n;e++)t[e].refresh()},blurAll:function(){for(var e=this.ui.multi,t=0;t<e.length;t++)e[t]!==sel&&n.push(e[t]),e[t].toBack()},scale:function(e){var t=this.opt.xscale,n=this.opt.yscale;return{x:e.x/t,y:e.y/n,x2:e.x2/t,y2:e.y2/n,w:e.w/t,h:e.h/n}},unscale:function(e){var t=this.opt.xscale,n=this.opt.yscale;return{x:e.x*t,y:e.y*n,x2:e.x2*t,y2:e.y2*n,w:e.w*t,h:e.h*n}},requestDelete:function(){return 1<this.ui.multi.length&&this.ui.selection.canDelete?this.deleteSelection():void 0},deleteSelection:function(){this.ui.selection&&(this.removeSelection(this.ui.selection),this.ui.multi[0].focus(),this.ui.selection.refresh())},animateTo:function(e){return this.ui.selection&&this.ui.selection.animateTo(e),this},setSelect:function(e){return this.ui.selection&&this.ui.selection.update(w.wrapFromXywh(e)),this},startDrag:function(){var i=this;return function(e){var t=l(e.target),n=t.closest("."+i.opt.css_selection).data("selection"),t=t.data("ord");return i.container.trigger("cropstart",[n,i.unscale(n.get())]),n.startDrag(e,t),!1}},resizeContainer:function(e,t){this.container.width(e).height(t),this.refresh()},setImage:function(n,i){var r=this,a=r.opt.imgTarget;return!!a&&void new l.Jcrop.component.ImageLoader(n,null,function(e,t){r.resizeContainer(e,t),a.src=n,l(a).width(e).height(t),r.applySizeConstraints(),r.refresh(),r.container.trigger("cropimage",[r,a]),"function"==typeof i&&i.call(r,e,t)})},update:function(e){this.ui.selection&&this.ui.selection.update(e)}}),l.fn.Jcrop=function(s,o){var e=this.eq(0).data("Jcrop"),t=Array.prototype.slice.call(arguments);return"api"==s?e:e&&"string"==typeof s?!!e[s]&&(t.shift(),e[s].apply(e,t),e):void this.each(function(){var i,r=this,a=l(this),e=a.data("Jcrop");return e?e.setOptions(s):"IMG"==this.tagName?l.Jcrop.component.ImageLoader.attach(this,function(e,t){var n=a.wrap("<div />").parent();n.width(e).height(t),i=l.Jcrop.attach(n,l.extend({},s,{imgTarget:r})),a.data("Jcrop",i),"function"==typeof o&&o.call(i)}):(i=l.Jcrop.attach(this,s),a.data("Jcrop",i),"function"==typeof o&&o.call(i)),this})},l.Jcrop=w})(jQuery),(e=>{"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)})(function(c){c.extend(c.fn,{validate:function(e){var i;if(this.length)return(i=c.data(this[0],"validator"))||(this.attr("novalidate","novalidate"),i=new c.validator(e,this[0]),c.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(e){i.submitButton=e.currentTarget,c(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==c(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(n){function e(){var e,t;return i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(e=c("<input type='hidden'/>").attr("name",i.submitButton.name).val(c(i.submitButton).val()).appendTo(i.currentForm)),!(i.settings.submitHandler&&!i.settings.debug)||(t=i.settings.submitHandler.call(i,i.currentForm,n),e&&e.remove(),void 0!==t&&t)}return i.settings.debug&&n.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,e()):i.form()?i.pendingRequest?!(i.formSubmitted=!0):e():(i.focusInvalid(),!1)})),i);e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,t,n;return c(this[0]).is("form")?e=this.validate().form():(n=[],e=!0,t=c(this[0].form).validate(),this.each(function(){(e=t.element(this)&&e)||(n=n.concat(t.errorList))}),t.errorList=n),e},rules:function(e,t){var n,i,r,a,s,o=this[0],l=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=o&&(!o.form&&l&&(o.form=this.closest("form")[0],o.name=this.attr("name")),null!=o.form)){if(e)switch(n=c.data(o.form,"validator").settings,i=n.rules,r=c.validator.staticRules(o),e){case"add":c.extend(r,c.validator.normalizeRule(t)),delete r.messages,i[o.name]=r,t.messages&&(n.messages[o.name]=c.extend(n.messages[o.name],t.messages));break;case"remove":return t?(s={},c.each(t.split(/\s/),function(e,t){s[t]=r[t],delete r[t]}),s):(delete i[o.name],r)}return(l=c.validator.normalizeRules(c.extend({},c.validator.classRules(o),c.validator.attributeRules(o),c.validator.dataRules(o),c.validator.staticRules(o)),o)).required&&(a=l.required,delete l.required,l=c.extend({required:a},l)),l.remote&&(a=l.remote,delete l.remote,l=c.extend(l,{remote:a})),l}}});function t(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var n;c.extend(c.expr.pseudos||c.expr[":"],{blank:function(e){return!t(""+c(e).val())},filled:function(e){e=c(e).val();return null!==e&&!!t(""+e)},unchecked:function(e){return!c(e).prop("checked")}}),c.validator=function(e,t){this.settings=c.extend(!0,{},c.validator.defaults,e),this.currentForm=t,this.init()},c.validator.format=function(n,e){return 1===arguments.length?function(){var e=c.makeArray(arguments);return e.unshift(n),c.validator.format.apply(this,e)}:(void 0===e||((e=2<arguments.length&&e.constructor!==Array?c.makeArray(arguments).slice(1):e).constructor!==Array&&(e=[e]),c.each(e,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})})),n)},c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==c.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):c(e)).addClass(t).removeClass(n)},unhighlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):c(e)).removeClass(t).addClass(n)}},setDefaults:function(e){c.extend(c.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:c.validator.format("Please enter no more than {0} characters."),minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}."),step:c.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var t,n,i=void 0!==c(this).attr("contenteditable")&&"false"!==c(this).attr("contenteditable");!this.form&&i&&(this.form=c(this).closest("form")[0],this.name=c(this).attr("name")),r===this.form&&(i=c.data(this.form,"validator"),t="on"+e.type.replace(/^validate/,""),(n=i.settings)[t])&&!c(this).is(n.ignore)&&n[t].call(i,this,e)}this.labelContainer=c(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm),this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,r=this.currentForm,i=this.groups={};c.each(this.settings.groups,function(n,e){"string"==typeof e&&(e=e.split(/\s/)),c.each(e,function(e,t){i[t]=n})}),n=this.settings.rules,c.each(n,function(e,t){n[e]=c.validator.normalizeRule(t)}),c(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&c(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),c.extend(this.submitted,this.errorMap),this.invalid=c.extend({},this.errorMap),this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t,n,i=this.clean(e),r=this.validationTargetFor(i),a=this,s=!0;return void 0===r?delete this.invalid[i.name]:(this.prepareElement(r),this.currentElements=c(r),(n=this.groups[r.name])&&c.each(this.groups,function(e,t){t===n&&e!==r.name&&(i=a.validationTargetFor(a.clean(a.findByName(e))))&&i.name in a.invalid&&(a.currentElements.push(i),s=a.check(i)&&s)}),t=!1!==this.check(r),s=s&&t,this.invalid[r.name]=!t,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c(e).attr("aria-invalid",!t)),s},showErrors:function(t){var n;t&&(c.extend((n=this).errorMap,t),this.errorList=c.map(this.errorMap,function(e,t){return{message:e,element:n.findByName(t)[0]}}),this.successList=c.grep(this.successList,function(e){return!(e.name in t)})),this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)null!=e[t]&&!1!==e[t]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===c.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var n=this,i={};return c(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var e=this.name||c(this).attr("name"),t=void 0!==c(this).attr("contenteditable")&&"false"!==c(this).attr("contenteditable");return!e&&n.settings.debug&&window.console&&console.error("%o has no name assigned",this),t&&(this.form=c(this).closest("form")[0],this.name=e),!(this.form!==n.currentForm||e in i||!n.objectLength(c(this).rules())||(i[e]=!0,0))})},clean:function(e){return c(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return c(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=c([]),this.toHide=c([])},reset:function(){this.resetInternals(),this.currentElements=c([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=c(e),n=e.type,i=void 0!==t.attr("contenteditable")&&"false"!==t.attr("contenteditable");return"radio"===n||"checkbox"===n?this.findByName(e.name).filter(":checked").val():"number"===n&&void 0!==e.validity?e.validity.badInput?"NaN":t.val():(e=i?t.text():t.val(),"file"===n?"C:\\fakepath\\"===e.substr(0,12)?e.substr(12):0<=(i=e.lastIndexOf("/"))||0<=(i=e.lastIndexOf("\\"))?e.substr(i+1):e:"string"==typeof e?e.replace(/\r/g,""):e)},check:function(t){t=this.validationTargetFor(this.clean(t));var e,n,i,r,a=c(t).rules(),s=c.map(a,function(e,t){return t}).length,o=!1,l=this.elementValue(t);for(n in this.abortRequest(t),"function"==typeof a.normalizer?r=a.normalizer:"function"==typeof this.settings.normalizer&&(r=this.settings.normalizer),r&&(l=r.call(t,l),delete a.normalizer),a){i={method:n,parameters:a[n]};try{if("dependency-mismatch"===(e=c.validator.methods[n].call(this,l,t,i.parameters))&&1===s)o=!0;else{if(o=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,i),!1}}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+i.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+i.method+"' method."),e}}if(!o)return this.objectLength(a)&&this.successList.push(t),!0},customDataMessage:function(e,t){return c(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||c(e).data("msg")},customMessage:function(e,t){e=this.settings.messages[e];return e&&(e.constructor===String?e:e[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){var n=this.findDefined(this.customMessage(e.name,(t="string"==typeof t?{method:t}:t).method),this.customDataMessage(e,t.method),!this.settings.ignoreTitle&&e.title||void 0,c.validator.messages[t.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),i=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,t.parameters,e):i.test(n)&&(n=c.validator.format(n.replace(i,"{$1}"),t.parameters)),n},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t);this.errorList.push({message:n,element:e,method:t.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return e=this.settings.wrapper?e.add(e.parent(this.settings.wrapper)):e},defaultShowErrors:function(){for(var e,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,e=this.validElements();e[n];n++)this.settings.unhighlight.call(this,e[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var n,i,r,a=this.errorsFor(e),s=this.idOrName(e),o=c(e).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),this.settings&&this.settings.escapeHtml?a.text(t||""):a.html(t||"")):(a=c("<"+this.settings.errorElement+">").attr("id",s+"-error").addClass(this.settings.errorClass),this.settings&&this.settings.escapeHtml?a.text(t||""):a.html(t||""),i=a,this.settings.wrapper&&(i=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,c(e)):i.insertAfter(e),a.is("label")?a.attr("for",s):0===a.parents("label[for='"+this.escapeCssMeta(s)+"']").length&&(i=a.attr("id"),o?o.match(new RegExp("\\b"+this.escapeCssMeta(i)+"\\b"))||(o+=" "+i):o=i,c(e).attr("aria-describedby",o),n=this.groups[e.name])&&c.each((r=this).groups,function(e,t){t===n&&c("[name='"+r.escapeCssMeta(e)+"']",r.currentForm).attr("aria-describedby",a.attr("id"))})),!t&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,e)),this.toShow=this.toShow.add(a)},errorsFor:function(e){var t=this.escapeCssMeta(this.idOrName(e)),e=c(e).attr("aria-describedby"),t="label[for='"+t+"'], label[for='"+t+"'] *";return e&&(t=t+", #"+this.escapeCssMeta(e).replace(/\s+/g,", #")),this.errors().filter(t)},escapeCssMeta:function(e){return void 0===e?"":e.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||!this.checkable(e)&&e.id||e.name},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),c(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return c(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return c("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!c(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!c.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},elementAjaxPort:function(e){return"validate"+e.name},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,c(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],c(e).removeClass(this.settings.pendingClass),t&&0===this.pendingRequest&&this.formSubmitted&&this.form()&&0===this.pendingRequest?(c(this.currentForm).trigger("submit"),this.submitButton&&c("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},abortRequest:function(e){var t;this.pending[e.name]&&(t=this.elementAjaxPort(e),c.ajaxAbort(t),this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],c(e).removeClass(this.settings.pendingClass))},previousValue:function(e,t){return t="string"==typeof t&&t||"remote",c.data(e,"previousValue")||c.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:t})})},destroy:function(){this.resetForm(),c(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:c.extend(this.classRuleSettings,e)},classRules:function(e){var t={},e=c(e).attr("class");return e&&c.each(e.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(t,c.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,n,i){(i=/min|max|step/.test(n)&&(null===t||/number|range|text/.test(t))&&(i=Number(i),isNaN(i))?void 0:i)||0===i?e[n]=i:t===n&&"range"!==t&&(e["date"===t?"dateISO":n]=!0)},attributeRules:function(e){var t,n,i={},r=c(e),a=e.getAttribute("type");for(t in c.validator.methods)n="required"===t?(n=e.getAttribute(t),""===n&&(n=!0),!!n):r.attr(t),this.normalizeAttributeRule(i,a,t,n);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var t,n,i={},r=c(e),a=e.getAttribute("type");for(t in c.validator.methods)n=r.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),""===n&&(n=!0),this.normalizeAttributeRule(i,a,t,n);return i},staticRules:function(e){var t={},n=c.data(e.form,"validator");return t=n.settings.rules?c.validator.normalizeRule(n.settings.rules[e.name])||{}:t},normalizeRules:function(i,r){return c.each(i,function(e,t){if(!1===t)delete i[e];else if(t.param||t.depends){var n=!0;switch(typeof t.depends){case"string":n=!!c(t.depends,r.form).length;break;case"function":n=t.depends.call(r,r)}n?i[e]=void 0===t.param||t.param:(c.data(r.form,"validator").resetElements(c(r)),delete i[e])}}),c.each(i,function(e,t){i[e]="function"==typeof t&&"normalizer"!==e?t(r):t}),c.each(["minlength","maxlength"],function(){i[this]&&(i[this]=Number(i[this]))}),c.each(["rangelength","range"],function(){var e;i[this]&&(Array.isArray(i[this])?i[this]=[Number(i[this][0]),Number(i[this][1])]:"string"==typeof i[this]&&(e=i[this].replace(/[\[\]]/g,"").split(/[\s,]+/),i[this]=[Number(e[0]),Number(e[1])]))}),c.validator.autoCreateRanges&&(null!=i.min&&null!=i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),null!=i.minlength)&&null!=i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength),i},normalizeRule:function(e){var t;return"string"==typeof e&&(t={},c.each(e.split(/\s/),function(){t[this]=!0}),e=t),e},addMethod:function(e,t,n){c.validator.methods[e]=t,c.validator.messages[e]=void 0!==n?n:c.validator.messages[e],t.length<3&&c.validator.addClassRules(e,c.validator.normalizeRule(e))},methods:{required:function(e,t,n){return this.depend(n,t)?"select"===t.nodeName.toLowerCase()?(n=c(t).val())&&0<n.length:this.checkable(t)?0<this.getLength(e,t):null!=e&&0<e.length:"dependency-mismatch"},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})+(?::(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:(n=!1,function(e,t){return n||(n=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())}),dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||n<=e},maxlength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e<=n},rangelength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e>=n[0]&&e<=n[1]},min:function(e,t,n){return this.optional(t)||n<=e},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},step:function(e,t,n){function i(e){return(e=(""+e).match(/(?:\.(\d+))?$/))&&e[1]?e[1].length:0}function r(e){return Math.round(e*Math.pow(10,a))}var a,s=c(t).attr("type"),o="Step attribute on input type "+s+" is not supported.",l=new RegExp("\\b"+s+"\\b"),u=!0;if(s&&!l.test(["text","number","range"].join()))throw new Error(o);return a=i(n),(i(e)>a||r(e)%r(n)!=0)&&(u=!1),this.optional(t)||u},equalTo:function(e,t,n){n=c(n);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){c(t).valid()}),e===n.val()},remote:function(i,r,e,a){if(this.optional(r))return"dependency-mismatch";a="string"==typeof a&&a||"remote";var s,t,o=this.previousValue(r,a);return this.settings.messages[r.name]||(this.settings.messages[r.name]={}),o.originalMessage=o.originalMessage||this.settings.messages[r.name][a],this.settings.messages[r.name][a]=o.message,t=c.param(c.extend({data:i},(e="string"==typeof e?{url:e}:e).data)),o.old===t?o.valid:(o.old=t,(s=this).startRequest(r),(t={})[r.name]=i,c.ajax(c.extend(!0,{mode:"abort",port:this.elementAjaxPort(r),dataType:"json",data:t,context:s.currentForm,success:function(e){var t,n=!0===e||"true"===e;s.settings.messages[r.name][a]=o.originalMessage,n?(t=s.formSubmitted,s.toHide=s.errorsFor(r),s.formSubmitted=t,s.successList.push(r),s.invalid[r.name]=!1,s.showErrors()):(t={},e=e||s.defaultMessage(r,{method:a,parameters:i}),t[r.name]=o.message=e,s.invalid[r.name]=!0,s.showErrors(t)),o.valid=n,s.stopRequest(r,n)}},e)),"pending")}}});var i,r={};return c.ajaxPrefilter?c.ajaxPrefilter(function(e,t,n){var i=e.port;"abort"===e.mode&&(c.ajaxAbort(i),r[i]=n)}):(i=c.ajax,c.ajax=function(e){var t=("mode"in e?e:c.ajaxSettings).mode,e=("port"in e?e:c.ajaxSettings).port;return"abort"===t?(c.ajaxAbort(e),r[e]=i.apply(this,arguments),r[e]):i.apply(this,arguments)}),c.ajaxAbort=function(e){r[e]&&(r[e].abort(),delete r[e])},c});var validateUserpassword={p_policy_uppercase:function(e){this.name="p_policy_uppercase";if(/^(?=.*[A-Z]).+$/.test(e))return"p_policy_uppercase"},p_policy_lowercase:function(e){this.name="p_policy_lowercase";if(/^(?=.*[a-z]).+$/.test(e))return"p_policy_lowercase"},p_policy_number:function(e){this.name="p_policy_number";if(/^(?=.*\d).+$/.test(e))return"p_policy_number"},p_policy_specialcharacter:function(e){this.name="p_policy_specialcharacter";if(/^(?=.*(_|[^\w])).+$/.test(e))return"p_policy_specialcharacter"},p_policy_length:function(e){if(this.name="p_policy_length",e.length>=$('meta[name="password_policy:minlength"]').attr("content"))return"p_policy_length"}};function passwordBoxHightlight(e){var t="",n=($(e).closest("div").addClass("e-error"),"popover"===$("#new-password").data("toggle")),i=n?$("#password_policy_rules").find("li>span:not(.content)"):$("#password_policy_rules").find("li>span"),r=n?"su-password-tick":"su-tick";if("new-password"==$(e).attr("id")){for(var a=0;a<i.length;a++)$(i[a]).attr("class")==r?$(e).closest("div").removeClass("e-error"):t="unsatisfied-rule";""!=t&&null!=t&&$(e).closest("div").addClass("e-error")}}function passwordBoxUnhightlight(e){var t="",n=($(e).closest("div").removeClass("e-error"),"popover"===$("#new-password").data("toggle")),i=n?$("#password_policy_rules").find("li>span:not(.content)"):$("#password_policy_rules").find("li>span"),r=n?"su-password-tick":"su-tick";if("new-password"==$(e).attr("id")){for(var a=0;a<i.length;a++)$(i[a]).attr("class")!=r&&(t="unsatisfied-rule"),$(i[a]).attr("class")==r&&$(e).closest("div").removeClass("e-error");""!=t&&null!=t&&($(e).closest("div").addClass("e-error"),t="")}$(e).closest("div").find(".password-validate-holder").html("")}function passwordPolicyPopover(e,t){var n=$(e),i=(n.popover("show"),new Array);i.push(validateUserpassword.p_policy_uppercase),i.push(validateUserpassword.p_policy_lowercase),i.push(validateUserpassword.p_policy_number),i.push(validateUserpassword.p_policy_specialcharacter),i.push(validateUserpassword.p_policy_length),$.each(i,function(e){e=i[e];null!=(ruleName=e(t))&&""!=ruleName?n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").hasClass("su-password-tick")||n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").addClass("su-password-tick").removeClass("icon"):(ruleName=name,n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").hasClass("su-password-tick")&&n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").removeClass("su-password-tick").addClass("icon")),ruleName=""})}$.validator.addMethod("notSameAsCurrent",function(e,t){var n=$("input[name='current-password']").val();return this.optional(t)||e!==n},window.Server.App.LocalizationContent.PasswordSameAsCurrent),$.validator.addMethod("isValidPassword",function(e,t){var n=new Array;if(n.push(validateUserpassword.p_policy_uppercase),n.push(validateUserpassword.p_policy_lowercase),n.push(validateUserpassword.p_policy_number),n.push(validateUserpassword.p_policy_specialcharacter),n.push(validateUserpassword.p_policy_length),passwordPolicyPopover("#new-password",e),$("#password_policy_rules li>span.su-password-tick").length==$("#password_policy_rules li>span:not(.content)").length)return!0},"");var userDetails,isKeyUp=!1;function successMessage(){"block"==$("#invalid-firstname, #invalid-lastname, #invalid-email").css("display")&&$("#updation-validation-message").css("display","none")}function onUserChangePasswordClick(){$("#user-id").val();$(".validation-message").html(""),$("#new-password-validate, #confirm-password-validate").closest("div").prev("div").removeClass("has-error");var e=!0;(e=$(".change-password-form").valid())&&$("#new-password").val()!=$("#confirm-password").val()&&($("#confirm-password-validate").html(window.Server.App.LocalizationContent.PasswordsMismatch),$("#confirm-password-validate").closest("div").prev("div").addClass("has-error"),e=!1),0!=e&&(showWaitingPopup("content-area"),doAjaxPost("POST",UpdatePasswordUrl,{oldpassword:$("#current-password").val(),newpassword:$("#new-password").val(),confirmpassword:$("#confirm-password").val(),userId:$("#user-id").val()},function(e){$("#current-password").val(""),$("#current-password").closest("div").removeClass("e-valid-input").addClass("e-input-focus"),$("input[type='password']").val(""),hideWaitingPopup("content-area"),$("#password_policy_rules").remove(),$("#confirm-password-section").removeAttr("style"),e.Data.status||"password"!=e.Data.key?e.Data.status?SuccessAlert(window.Server.App.LocalizationContent.UpdatePassword,window.Server.App.LocalizationContent.PasswordSuccess,7e3):WarningAlert(window.Server.App.LocalizationContent.UpdatePassword,window.Server.App.LocalizationContent.PasswordFailure,e.Data.Message,7e3):(hideWaitingPopup("content-area"),$("#old-password-validate").html(e.Data.value).css("display","block"),$("#current-password").addClass("e-error"))}),$(".popover").hide())}function editUser(e){var t=e;userDetails=e,$("#user-name").val(t.UserName),$("#user-email").val(t.Email.toString().includes(autoGeneratedEmail)?"":t.Email),$("#user-head").html(t.FirstName+" "+t.LastName),$("#status-user").val(t.StatusDescription),$("#activation-div").val(),null!=e.FirstName&&""!=e.FirstName?$("#user-firstname").val(e.FirstName):$("#user-firstname").val(t.FullName),null!=e.LastName&&""!=e.LastName&&$("#user-lastname").val(e.LastName),null!=e.Contact&&""!=e.Contact&&$("#user-phonenumber").val(e.Contact)}function SaveUserdetails(){$("#updation-validaton-message").html(""),$("#email-duplicate-validation").closest("div").prev("div").removeClass("has-error");var e,t=$("#user-firstname").val().trim(),n=$("#user-email").val().trim(),i=!0;$(".edit-user-profile-form").valid()&&($(".userprofile-validation-messages").css("display","none"),e=$("#user-status").val(),i=!!$("#show-active").hasClass("show")||!!$("#container-select").hasClass("show")&&e,showWaitingPopup("content-area"),doAjaxPost("POST",updateUserProfileUrl,{username:$("#user-name").val(),email:n,picturename:$("#upload-picture").attr("data-filename"),firstname:t,lastname:$("#user-lastname").val(),mobile:$("#user-phonenumber").val().trim(),status:i},function(e){var t,n,i,r,a;hideWaitingPopup("content-area"),e.Data.status?(t=null!=(a=e.Data.profileinfo).firstName?$("#user-firstname").val(a.firstName):$("#user-firstname").val(a.previousFirstName),n=null!=a.lastName?$("#user-lastname").val(a.lastName):$("#user-lastname").val(a.previousLastName),i=null!=a.email?$("#user-email").val(a.email):$("#user-email").val(a.previousMail),r=null!=a.mobile?$("#user-phonenumber").val(a.mobile):$("#user-phonenumber").val(a.previousMobile),a="false"==a.status.toLowerCase()?$("#status-user").val("Inactive"):$("#status-user").val("Active"),userDetails={FirstName:t.val(),LastName:n.val(),ContactNumber:r.val(),Email:i.val(),Status:a.val()},SuccessAlert("Update Profile",e.Data.value,7e3),$("#password-updation-validation").css("display","none"),$(".userpassword-validation-messages").css("display","none"),$("#new-password-validate").closest("div").prev("div").removeClass("has-error"),$("#confirm-password-validate").closest("div").prev("div").removeClass("has-error"),e.Data.isCurrentUser&&$("#display-name").html(t.val()+" "+n.val().trim()),$("#display-name").html(t.val()+" "+n.val().trim())):(e.Data.status,"email"!=e.Data.key?(SuccessAlert("Update Profile",e.Data.value,7e3),$("#password-updation-validation").css("display","none"),$(".userpassword-validation-messages").css("display","none")):($("#email-duplicate-validation").html(e.Data.value).css("display","block"),$("#email-duplicate-validation").closest("div").prev("div").addClass("has-error")))}),$(".edit-user-profile-field").attr("disabled",!0).removeClass("enable"),$("#save-button,#cancel-button,#status-dom").hide(),$("#edit,#group-div,#status-show").show(),$("#status-div").removeClass("top-margin"))}function onPictureCropEnd(e){$("input[name=LeftOfCropArea]").val(e.x),$("input[name=TopOfCropArea]").val(e.y),$("input[name=LeftToCropArea]").val(e.x2),$("input[name=TopToCropArea]").val(e.y2),$("input[name=height]").val(e.h),$("input[name=width]").val(e.w)}function onSingleDeleteDialogOpen(){$("#singleuser-delete-confirmation").find("button.e-primary").addClass("critical-action-button"),null!=document.getElementById("singleuser-delete-confirmation")&&document.getElementById("singleuser-delete-confirmation").ej2_instances[0].show()}function onMakeAdminDialogOpen(){document.getElementById("make-admin-confirmation").ej2_instances[0].show()}function onRemoveAdminDialogOpen(){document.getElementById("remove-admin-confirmation").ej2_instances[0].show()}function MakeSingleUserAdmin(){var e=$(".make-admin").attr("data-content");showWaitingPopup("make-admin-confirmation"),$.ajax({type:"POST",url:makeAdminUrl,data:"&users="+e,success:function(e){hideWaitingPopup("make-admin-confirmation"),onMakeAdminDialogClose(),setTimeout(function(){window.location.reload()},3e3),e.Status?SuccessAlert(window.Server.App.LocalizationContent.AssignRole,window.Server.App.LocalizationContent.MakeAdmin,3e3):WarningAlert(window.Server.App.LocalizationContent.AssignRole,window.Server.App.LocalizationContent.MakeAdminError,e.Message,3e3)}})}function onMakeAdminDialogClose(){document.getElementById("make-admin-confirmation").ej2_instances[0].hide()}function removeAdmin(){var e=$(".remove-admin").attr("data-content");showWaitingPopup("remove-admin-confirmation"),$.ajax({type:"POST",url:removeAdminUrl,data:{userId:e},success:function(e){hideWaitingPopup("remove-admin-confirmation"),onRemoveAdminDialogClose(),setTimeout(function(){window.location.reload()},3e3),e.Status?SuccessAlert(window.Server.App.LocalizationContent.RemoveRole,window.Server.App.LocalizationContent.RemoveAdmin,3e3):WarningAlert(window.Server.App.LocalizationContent.RemoveRole,window.Server.App.LocalizationContent.RemoveAdminError,e.Message,3e3)}})}function onRemoveAdminDialogClose(){document.getElementById("remove-admin-confirmation").ej2_instances[0].hide()}function deleteSingleUser(){showWaitingPopup("singleuser-delete-confirmation");var e=$(".is-delete").attr("data-content");doAjaxPost("POST",deleteSingleFromUserListUrl,"UserId="+e,function(e){e.status?(window.location.href=userPageUrl,SuccessAlert(window.Server.App.LocalizationContent.DeleteUser,window.Server.App.LocalizationContent.UserHasDeleted,3e3)):(WarningAlert(window.Server.App.LocalizationContent.DeleteUser,window.Server.App.LocalizationContent.FailedToDeleteUser,e.Message,3e3),hideWaitingPopup("singleuser-delete-confirmation"),onSingleDeleteDialogClose(),setTimeout(function(){window.location.reload()},3e3))})}function onSingleDeleteDialogClose(){document.getElementById("singleuser-delete-confirmation").ej2_instances[0].hide()}function onDisableMfaDialogOpen(){$("#disable-mfa-confirmation").find("button.e-primary").addClass("critical-action-button"),document.getElementById("disable-mfa-confirmation").ej2_instances[0].show()}function onDisableMfaDialogClose(){document.getElementById("disable-mfa-confirmation").ej2_instances[0].hide(),window.location.reload()}function onRecoveryCodeDialogOpen(){document.getElementById("recovery-code-regeneration-confirmation").ej2_instances[0].show()}function onRecoveryCodeDialogClose(){document.getElementById("recovery-code-regeneration-confirmation").ej2_instances[0].hide()}function disableMfa(){showWaitingPopup("content-area");var e=document.getElementById("user-id").value;$.ajax({type:"POST",url:disableMfaUrl,data:{userId:e},async:!1,success:function(e){hideWaitingPopup("content-area"),window.location.reload()}})}function onShowRecoveryCodeDialogOpen(){document.getElementById("recovery-code-box").ej2_instances[0].show()}function onShowRecoveryCodeDialogClose(){document.getElementById("recovery-code-box").ej2_instances[0].hide(),window.location.reload()}function regenerateRecoveryCode(){showWaitingPopup("content-area");var e=document.getElementById("user-id").value;$.ajax({type:"POST",url:regenerateRecoveryCodeUrl,data:{userId:e},success:function(e){if(e.Data.status&&""!=e.Data.recovery){onShowRecoveryCodeDialogOpen(),$(".mfa-success-message").css("display","none");var n=document.getElementById("table-recovery"),i=e.Data.recovery.split(";");document.getElementById("copy-recovery").value=i;for(let t=0;t<i.length;t+=2){var r=n.insertRow();for(let e=0;e<2;e++){var a=i[t+e];r.insertCell().appendChild(document.createTextNode(""+a))}}}hideWaitingPopup("content-area")}})}function unLockUser(){var e=null==(e=$(".unlock-user-id").attr("data-content"))?document.getElementById("user-id").value:e,t=(showWaitingPopup("unlock-user-confirmation"),null===document.getElementById("user_grid")?null:document.getElementById("user_grid").ej2_instances[0]);unlockUser(e)?null===t?(hideWaitingPopup("unlock-user-confirmation"),onUserUnlockDialogClose(),window.location.reload()):(SuccessAlert(window.Server.App.LocalizationContent.UnlockUser,window.Server.App.LocalizationContent.UserUnlocked,7e3),t.refresh(),onUserUnlockDialogClose(),hideWaitingPopup("unlock-user-confirmation")):null===t?(hideWaitingPopup("unlock-user-confirmation"),onUserUnlockDialogClose(),window.location.reload()):(WarningAlert(window.Server.App.LocalizationContent.UnlockUser,window.Server.App.LocalizationContent.UserUnlockedError,null,7e3),t.refresh(),onUserUnlockDialogClose(),hideWaitingPopup("unlock-user-confirmation"))}function onUserUnlockDialogOpen(){document.getElementById("unlock-user-confirmation").ej2_instances[0].show()}function onUserUnlockDialogClose(){document.getElementById("unlock-user-confirmation").ej2_instances[0].hide()}function unlockUser(e){var t=!1;return $.ajax({type:"POST",url:unlockUserUrl,async:!1,data:{userId:e},success:function(e){t=e.Status}}),t}function CheckMailSettingsAndNotify(t,n,i){$.ajax({type:"POST",url:checkMailSettingUrl,success:function(e){e.result||0==e.activation?void 0!==n&&n.html("<span class='SuccessMessage'>"+i+"</span>"):e.result||1!=e.isAdmin||1!=e.activation||void 0!==n&&n.html("<span class='alert alert-danger'>"+t+"</span>")}})}function ValidateMailSettingsAndShowToast(t,n,i){$.ajax({type:"POST",url:checkMailSettingUrl,success:function(e){e.result||0==e.activation?void 0!==n&&SuccessAlert("Activate User",i,7e3):e.result||1!=e.isAdmin||1!=e.activation||void 0!==n&&n.html("<span class='alert alert-danger'>"+t+"</span>")}})}$(document).ready(function(){var e,t=0<$("#current-password").length,n=($.now(),addPlacehoder("body"),$("#save-changed-password"));n.length&&n.on("click",onUserChangePasswordClick),$(".security-setting-container").is(":visible")&&(location.href.match(/2fa/)||isShow2fa?($("#2fa").tab("show"),$("#user-management-options").hide(),(e=window.location.search.toString()).includes("&view=2fa")||history.pushState(null,"",e+"&view=2fa")):($("#change-password").tab("show"),$("#user-management-options").show(),(e=window.location.search.toString()).includes("&view=change-password")||history.pushState(null,"",e+"&view=change-password"))),$("a[data-toggle='tab']").on("click",function(e){var t;"change-password"==$(this).attr("id")?($("#user-management-options").show(),(t=window.location.search.toString()).includes("&view=2fa")?(t=t.replace("&view=2fa","&view=change-password"),history.pushState(null,"",t)):t.includes("&view=change-password")||history.pushState(null,"",t+"&view=change-password")):"2fa"==$(this).attr("id")&&($("#user-management-options").hide(),(t=window.location.search.toString()).includes("&view=change-password")?(t=t.replace("&view=change-password","&view=2fa"),history.pushState(null,"",t)):t.includes("&view=2fa")||history.pushState(null,"",t+"&view=2fa")),$(".success-message, .error-message").hide()}),$.validator.addMethod("isValidEmail",function(e,t){return""==e.trim()||IsEmail(e)},window.Server.App.LocalizationContent.InvalidEmailAddress),$.validator.addMethod("isRequired",function(e,t){return!isEmptyOrWhitespace(e)},window.Server.App.LocalizationContent.EnterName),$.validator.addMethod("isValidName",function(e,t){return IsValidName("name",e)},window.Server.App.LocalizationContent.AvoidSpecailCharacters),$.validator.addMethod("isValidUsername",function(e,t){return IsValidUsername(e)},window.Server.App.LocalizationContent.InvalidUsername),$.validator.addMethod("isValidUsernameLength",function(e,t){return IsValidUsernameLength(e)},window.Server.App.LocalizationContent.UsernameExceeds),$.validator.addMethod("isValidPhoneNumber",function(e,t){return IsValidContactNumber(e)},window.Server.App.LocalizationContent.PhoneNumberValidator),addPlacehoder("#user-phonenumber"),$(".edit-user-profile-form").validate({errorElement:"span",onkeyup:function(e,t){$("#updation-validation-message").html(""),9!=t.keyCode&&(isKeyUp=!0,$(e).valid(),isKeyUp=!1)},onfocusout:function(e){$(e).valid(),$("#updation-validation-message").html("")},rules:{"user-username":{isRequired:!0,isValidUsernameLength:!0,isValidUsername:!0},"user-email":{isValidName:!0,isValidEmail:!0},"user-firstname":{isRequired:!0,isValidName:!0},"user-lastname":{isValidName:!0},"user-phonenumber":{isValidPhoneNumber:!0}},highlight:function(e){$("#"+e.id).not(":disabled")&&$(e).closest("div").addClass("has-error")},unhighlight:function(e){$(e).closest("div").removeClass("has-error"),$(e).closest("div").find("span").html("")},errorPlacement:function(e,t){$("#"+t.context.id).not(":disabled")&&$(t).closest("div").find("span").html(e.html())},messages:{"user-firstname":{isRequired:window.Server.App.LocalizationContent.FirstNameValidator}}}),$(document).on("keyup","#new-password",function(){$("#new-password").val()==$("#confirm-password").val()?($("#confirm-password").closest("div").removeClass("has-error"),$("#confirm-password").closest("tr").next("tr").find("span").html("")):""!=$("#confirm-password").val()&&($("#confirm-password").closest("div").addClass("has-error"),$("#confirm-password").closest("div").next("div").find("span").html(window.Server.App.LocalizationContent.PasswordMismatch).css("display","block")),passwordPolicyPopover("#new-password",$("#new-password").val())}),$(".change-password-form").validate({errorElement:"span",onkeyup:function(e,t){$("#success-message").html(""),9!=t.keyCode&&(isKeyUp=!0,$(e).valid(),isKeyUp=!1)},onfocusout:function(e){$(e).valid(),$("#success-message").html("")},rules:{"current-password":{required:t},"new-password":{required:!0,notSameAsCurrent:t,isValidPassword:!0},"confirm-password":{required:!0,equalTo:"#new-password"}},highlight:function(e){$(e).closest("div").addClass("has-error"),passwordBoxHightlight(e)},unhighlight:function(e){$(e).closest("div").removeClass("has-error"),passwordBoxUnhightlight(e),$(e).closest("div").find(".validation-message").html("")},errorPlacement:function(e,t){$(t).closest("div").find(".validation-message").html(e.html())},messages:{"current-password":{required:window.Server.App.LocalizationContent.OldPasswordValidator},"new-password":{required:window.Server.App.LocalizationContent.NewPasswordValidator,isValidPassword:window.Server.App.LocalizationContent.InvalidPasswordValidator,notSameAsCurrent:window.Server.App.LocalizationContent.PasswordSameAsCurrent},"confirm-password":{required:window.Server.App.LocalizationContent.ConfirmPasswordValidator,equalTo:window.Server.App.LocalizationContent.PasswordMismatch}}}),$("#new-password").on("change",function(){passwordPolicyPopover("#new-password",$("#new-password").val()),$("#new-password").valid()}),$(".edit-user-profile-field").on("keypress",function(e){if(13==e.keyCode)return e.preventDefault(),SaveUserdetails(),!1}),$(document).on("click","#activate-button-click",function(){$(".success-message").hide(),$("#activate-button-click").attr("disabled",!0).css("cursor","default");var t=$(this).attr("id");$.ajax({type:"POST",url:activateUserUrl,data:{username:$("#user-name").val(),email:$("#user-email").val(),firstname:$("#user-firstname").val()},success:function(e){$("#activate-button-click").attr("disabled",!1),"object"==$.type(e)&&("success"==e.Data.result&&1==e.Data.type?($("#"+t).hide(),$("<input>",{class:"primary-button password-save-button",type:"button",id:"resend-button-click",value:"Resend Activation Code",title:""}).insertAfter("#"+t),CheckMailSettingsAndNotify(window.Server.App.LocalizationContent.ActivationCodeGenerated+" <a href='"+emailSettingsUrl+"'>"+window.Server.App.LocalizationContent.ConfigureEmailSettings+"</a>",$("#alert-message"),window.Server.App.LocalizationContent.ActivationCodeSent)):"success"==e.Data.result&&($("#inactive-user").hide(),$('<span id="active-user">Active</span>').insertAfter("#inactive-user").addClass("content-size status"),$("#user-status").val("true"),$("#status-user").val("Active"),$("#"+t).attr("disabled",!0),ValidateMailSettingsAndShowToast("",$("#alert-message"),window.Server.App.LocalizationContent.UserAccountHasActivated)))}})}),$(document).on("click","#resend-button-click",function(){$(".success-message").hide(),$("#resend-button-click").attr("disabled",!0).css("cursor","default");$(this).attr("id");$.ajax({type:"POST",url:resendactivationcodeUrl,data:{username:$("#user-name").val(),email:$("#user-email").val(),firstname:$("#user-firstname").val()},success:function(e){$("#resend-button-click").attr("disabled",!1),"object"==$.type(e)&&"success"==e.Data.result&&(CheckMailSettingsAndNotify(window.Server.App.LocalizationContent.ActivationCodeGenerated+" <a href='"+emailSettingsUrl+"'>"+window.Server.App.LocalizationContent.ConfigureEmailSettings+"</a>",$("#alert-message"),window.Server.App.LocalizationContent.ActivationCodeResent),$("#edit").addClass("adjustment"))}})}),$(document).on("click","#avatar-delete-click",function(){messageBox("su-delete",window.Server.App.LocalizationContent.DeleteProfilePicture,window.Server.App.LocalizationContent.DeleteProfilePictureConfirm+"?","error",function(){deleteUserAvatar()})}),$("#avatar-button-click").click(function(){$("#image-path").val(window.Server.App.LocalizationContent.BrowseImagePath).removeClass("ValidationErrorImage"),$("#image-path").closest("div").removeClass("has-error"),$("#avatar-upload-box").ejDialog("open"),$("#cancel-avatar-popup").click(function(){$("#profile-picture").attr("src",tanantManagementServerResourceUrl+"/images/common/preview.jpg"),$("#upload-image").attr("disabled","disabled"),$(".img-container").children().hasClass("jcrop-active")&&$("#profile-picture").data("Jcrop").destroy(),$("#avatar-upload-box").ejDialog("close")}),$(".e-uploadinput").attr({title:window.Server.App.LocalizationContent.NoFileSelected,accept:".png, .jpg ,.jpeg"}),"msie"==browser.name.toLowerCase()||"webkit"==browser.name.toLowerCase()?$(".e-selectpart").addClass("upload-box"):$(".e-selectpart").removeClass("upload-box");var e=getMaxZIndex()+2;$("#avatar-upload-box a.popup-close").trigger("mouseover").mouseover(function(){$(".tooltip").css("z-index",e)})}),createWaitingPopup("make-admin-confirmation"),createWaitingPopup("remove-admin-confirmation"),createWaitingPopup("singleuser-delete-confirmation"),createWaitingPopup("content-area"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.AssignRole,content:document.getElementById("make-admin-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:MakeSingleUserAdmin,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onMakeAdminDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"}}).appendTo("#make-admin-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.RemoveRole,content:document.getElementById("remove-admin-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:removeAdmin,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onRemoveAdminDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"}}).appendTo("#remove-admin-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.DeleteUser,content:document.getElementById("singleuser-delete-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:deleteSingleUser,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onSingleDeleteDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,animationSettings:{effect:"Zoom"},visible:!1}).appendTo("#singleuser-delete-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.RegenerateRecoveryCode,content:document.getElementById("recovery-code-regeneration-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:regenerateRecoveryCode,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onRecoveryCodeDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,animationSettings:{effect:"Zoom"},visible:!1}).appendTo("#recovery-code-regeneration-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.DisableMfa,content:document.getElementById("disable-mfa-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:disableMfa,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onDisableMfaDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"},close:onDisableMfaDialogClose}).appendTo("#disable-mfa-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.RecoveryCode,content:document.getElementById("recovery-code-box-content"),showCloseIcon:!0,buttons:[{click:onShowRecoveryCodeDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.CloseButton}}],width:"424px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"},close:onShowRecoveryCodeDialogClose}).appendTo("#recovery-code-box")}),$(document).on("click","#edit",function(e){$("#save-button,#status-dom").show(),$("#cancel-button").css("display","inline"),$("#group-div,#status-show,#edit,#activation-div").hide(),$("#resend-button-click").removeClass("show"),$("#status-div").addClass("top-margin"),$("#show-active,#show-inactive,#show-active-user").find("span").addClass("margin-top"),$(".edit-user-profile-field").attr("disabled",!1).addClass("enable")}),$(document).on("click","#cancel-button",function(e){$("#user-firstname").val(userDetails.FirstName),$("#user-email").val(userDetails.Email),$("#user-lastname").val(userDetails.LastName),$("#user-phonenumber").val(userDetails.ContactNumber),$("#status-div").removeClass("top-margin"),$("#show-active,#show-inactive,#show-active-user").find("span").removeClass("margin-top"),0==userDetails.Status?$("#status-user").html("Active"):$("#status-user").html("InActive"),$(".alert-messages").closest("div").removeClass("has-error form-control"),$(".alert-messages").html(""),$(".edit-user-profile-field").attr("disabled",!0).removeClass("enable"),$("#save-button,#status-dom,#cancel-button").hide(),$("#edit, #status-show, #group-div,#activation-div").show(),"Active"==$("#status-user").val&&$("#activate-button-click").hide()}),"InActive"==$("#status-user").val&&$("#activate-button-click").removeClass("hide"),$(document).on("click",".delete-class",function(){$(this).parent("li").addClass("is-delete"),onSingleDeleteDialogOpen()}),$(document).on("click",".make-admin-class",function(){$(this).parent("li").addClass("make-admin"),onMakeAdminDialogOpen()}),$(document).on("click",".remove-admin-class",function(){$(this).parent("li").addClass("remove-admin"),onRemoveAdminDialogOpen()}),$(document).on("click","#mfa-disable-button",function(){onDisableMfaDialogOpen()}),$(document).on("click","#generate-recovery-code",function(){onRecoveryCodeDialogOpen()}),$(document).ready(function(){new ej.popups.Dialog({header:window.Server.App.LocalizationContent.UnlockUser,content:document.getElementById("unlock-user-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:unLockUser,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onUserUnlockDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,animationSettings:{effect:"Zoom"},visible:!1}).appendTo("#unlock-user-confirmation"),createWaitingPopup("unlock-user-confirmation")}),$(document).on("click",".unlock-user-class",function(){$(this).parent("li").addClass("unlock-user-id"),onUserUnlockDialogOpen()}),$(document).on("click",".unlock-userclass",function(){unlockUser($(".unlock_user").attr("data-content")),window.location.reload()}),$(document).on("click","#unlock-user",function(){onUserUnlockDialogOpen()}),$(function(){$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?($(this).siblings("input").attr("type","text").val(),$(this).removeClass("su-show").addClass("su-hide").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touchstart",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("touchend",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),window.innerWidth<1041&&$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("click",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show").addClass("su-hide").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touch",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show"),$(this).addClass("su-hide")):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide"),$(this).addClass("su-show"))})});var editCustomAttributeId,currentIndex,isCustomAttributeBinded=!1,isAttributeEdit=!1,customAttributeInfo="",addSiteAttribute=[],siteCreation=!1,customAttributeId=0;function isAttributeExist(){return!$("#custom-attribute-name").hasClass("e-error")}function openCustomAttributeDialog(e,t){var n,i,r;isCustomAttributeBinded?((r=document.getElementById("custom-attribute-dialog").ej2_instances)[0].buttons=[{click:onCloseCustomAttribute,buttonModel:{content:window.Server.App.LocalizationContent.CancelButton}},{click:saveAttribute,buttonModel:{isPrimary:!0,content:window.Server.App.LocalizationContent.SaveButton}}],r[0].show()):((n=document.createElement("div")).setAttribute("id","custom-attribute-dialog"),"addtenant"==t?(i=document.getElementById("popup-container"),siteCreation=!0):i=document.getElementById("content-area"),i.appendChild(n),$("#custom-attribute-dialog").css("height",$("#popup-container").height()),(r=new ejs.popups.Dialog({header:'<div class="dlg-title">'+window.Server.App.LocalizationContent.AddCustomAttribute+"</div>",content:document.getElementById("custom-attribute-content"),buttons:[{click:onCloseCustomAttribute,buttonModel:{content:window.Server.App.LocalizationContent.CancelButton}},{click:saveAttribute,buttonModel:{isPrimary:!0,content:window.Server.App.LocalizationContent.SaveButton}}],animationSettings:{effect:"Zoom"},beforeOpen:showCustomAttribute,beforeClose:beforeCloseAttributeDialog,close:onCloseCustomAttribute,width:"514px",height:"474px",showCloseIcon:!0,isModal:!0})).appendTo(n),isCustomAttributeBinded=!0),isAttributeEdit&&setTimeout(function(){showSavedAttributes()},200),createWaitingPopup("custom-attribute-dialog")}function saveAttribute(){var e="undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl;if($("#custom-attribute-form").valid()&&!$("#custom-attribute-name").hasClass("e-error"))if(isAttributeEdit){if(0!=addSiteAttribute.length)for(var t=document.getElementById("AddSiteAttributesGrid").ej2_instances[0],n=$("#custom-attribute-name").val().trim(),i=0;i<t.dataSource.length;i++)t.dataSource[i].Name.toLowerCase()==n.toLowerCase()&&t.dataSource[i].CustomAttributeId!=editCustomAttributeId&&($("#custom-attribute-name").closest("div").addClass("e-error"),$("#custom-attribute-name").closest(".e-outline").addClass("e-error"),$("#custom-attribute-name").closest(".e-outline").siblings(".custom-attr-validation-errors").html(window.Server.App.LocalizationContent.IsAttributeNameExist)),t.dataSource[i].CustomAttributeId==editCustomAttributeId&&(currentIndex=i);$("#custom-attribute-name").closest("div").hasClass("e-error")||updateCustomAttribute(customAttributeInfo.Id)}else saveCustomAttribute();(e?document.getElementById("UsersAttributesGrid"):siteCreation?document.getElementById("AddSiteAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0].clearSelection()}function onCloseCustomAttribute(){$("#custom-attribute-form").find("div.validation-errors").html(""),$("#custom-attribute-form").find("div").removeClass("e-error"),document.getElementById("custom-attribute-dialog").ej2_instances[0].hide();var e=("undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?document.getElementById("UsersAttributesGrid"):siteCreation?document.getElementById("AddSiteAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0];e.clearSelection()}function showSavedAttributes(){var e=("undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?document.getElementById("UsersAttributesGrid"):siteCreation?document.getElementById("AddSiteAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0];customAttributeInfo=e.getCurrentViewRecords()[e.getSelectedRowIndexes()],document.getElementById("custom-attribute-name").ej2_instances[0].value=customAttributeInfo.Name,document.getElementById("custom-attribute-descrition").ej2_instances[0].value=customAttributeInfo.Description,customAttributeInfo.CanEncrypt||(document.getElementById("custom-attribute-value").ej2_instances[0].value=customAttributeInfo.Value),$("#encrypt-custom-attribute").prop("checked",customAttributeInfo.CanEncrypt),editCustomAttributeId=customAttributeInfo.CustomAttributeId}function showCustomAttribute(){document.getElementById("custom-attribute-dialog").ej2_instances[0].header=isAttributeEdit?window.Server.App.LocalizationContent.EditCustomAttribute:window.Server.App.LocalizationContent.AddCustomAttribute,updateValidationMessages(),$("#custom-attribute-content").show(),$("#custom-attribute-name").focus()}function saveCustomAttribute(){var e,t,n={Name:$("#custom-attribute-name").val().trim(),Value:document.getElementById("custom-attribute-value").ej2_instances[0].value,Description:document.getElementById("custom-attribute-descrition").ej2_instances[0].value,CanEncrypt:$("#encrypt-custom-attribute").is(":checked"),CreatedDate:new Date,ModifiedDate:new Date,CustomAttributeId:customAttributeId},i="undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl;i&&(n={Name:$("#custom-attribute-name").val().trim(),Value:document.getElementById("custom-attribute-value").ej2_instances[0].value,Description:document.getElementById("custom-attribute-descrition").ej2_instances[0].value,CanEncrypt:$("#encrypt-custom-attribute").is(":checked"),CreatedDate:new Date,ModifiedDate:new Date,CustomAttributeId:customAttributeId,UserId:userId}),customAttributeId++,showWaitingPopup("custom-attribute-dialog"),!i&&siteCreation?addSiteLevelAttribute(n):(e={customAttribute:JSON.stringify(n)},i?(e={customAttribute:JSON.stringify(n)},saveCustomAttributeUrl=addUserCustomAttributeUrl):e={customAttribute:JSON.stringify(n),tenantInfoId:tenantInfoId},showWaitingPopup("custom-attribute-dialog"),t=document.getElementById("custom-attribute-dialog").ej2_instances,$.ajax({type:"POST",url:saveCustomAttributeUrl,data:e,success:function(e){e.Status?(getSiteOrUseAttributes(),SuccessAlert(window.Server.App.LocalizationContent.AddCustomAttribute,window.Server.App.LocalizationContent.CustomAttributeSuccess,7e3),hideWaitingPopup("custom-attribute-dialog"),t[0].hide()):(hideWaitingPopup("custom-attribute-dialog"),isEmptyOrWhitespace(e.Message)?(WarningAlert(window.Server.App.LocalizationContent.AddCustomAttribute,window.Server.App.LocalizationContent.CustomAttributeFailure,e.ErrorMessage,7e3),t[0].hide()):($("#custom-attribute-name").addClass("e-error"),$("#custom-attribute-form").valid()))}}))}function beforeCloseAttributeDialog(){updateValidationMessages(),isAttributeEdit=!1,customAttributeInfo="",$("#custom-attribute-form").find(".e-input-group").removeClass("e-error")}function saveDefaultAttributes(e,t){addSiteAttribute=[],"mysql"!==e.toLowerCase()&&(e={Name:window.Server.App.LocalizationContent.DefaultSchemaName,Value:$("#schema-name").val().trim()||("postgresql"===e.toLowerCase()?window.Server.App.LocalizationContent.DefaultSchemaForPostgres:window.Server.App.LocalizationContent.DefaultSchemaForMSSQL),CreatedDate:new Date,ModifiedDate:new Date,CustomAttributeId:customAttributeId},addSiteAttribute.push(e));e={Name:"boldreportsonpremise"===t.toLowerCase()?window.Server.App.LocalizationContent.DefaultReportsPrefixName:window.Server.App.LocalizationContent.DefaultBIPrefixName,Value:$("#txt-server-prefix").val().trim()||("boldreportsonpremise"===t.toLowerCase()?window.Server.App.LocalizationContent.DefaultPrefixForReports:window.Server.App.LocalizationContent.DefaultPrefixForBI),CreatedDate:new Date,ModifiedDate:new Date,CustomAttributeId:customAttributeId},t={Name:window.Server.App.LocalizationContent.DefaultUMSPrefixName,Value:$("#txt-ums-prefix").val().trim()||window.Server.App.LocalizationContent.DefaultPrefixForUMS,CreatedDate:new Date,ModifiedDate:new Date,CustomAttributeId:customAttributeId};addSiteAttribute.push(e),addSiteAttribute.push(t)}function attributeNameCheck(){var e=$("#custom-attribute-name").val().trim(),t={attributeName:e};"undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?(t={attributeName:e,userId:userId},isAttributeNameExistsUrl=isUserCustomAttributeNameExistUrl):t={attributeName:e,tenantInfoId:tenantInfoId},$.ajax({type:"POST",url:isAttributeNameExistsUrl,data:t,success:function(e){e.Status?$("#custom-attribute-name").addClass("e-error"):$("#custom-attribute-name").removeClass("e-error"),$("[name='custom-attribute-name']").valid()}})}function updateCustomAttribute(e){var t,n="undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl,i={Id:e,Name:$("#custom-attribute-name").val().trim(),Value:document.getElementById("custom-attribute-value").ej2_instances[0].value,Description:document.getElementById("custom-attribute-descrition").ej2_instances[0].value,CanEncrypt:$("#encrypt-custom-attribute").is(":checked"),CreatedDate:new Date,ModifiedDate:new Date,CustomAttributeId:editCustomAttributeId};n&&(i={Id:e,Name:$("#custom-attribute-name").val().trim(),Value:document.getElementById("custom-attribute-value").ej2_instances[0].value,Description:document.getElementById("custom-attribute-descrition").ej2_instances[0].value,CanEncrypt:$("#encrypt-custom-attribute").is(":checked"),CreatedDate:new Date,ModifiedDate:new Date,UserId:userId},updateCustomAttributeUrl=editUserCustomAttributeUrl),showWaitingPopup("custom-attribute-dialog"),siteCreation?updateSiteLevelAttribute(i):(e={customAttribute:JSON.stringify(i)},e=n?{customAttribute:JSON.stringify(i)}:{customAttribute:JSON.stringify(i),tenantInfoId:tenantInfoId},t=document.getElementById("custom-attribute-dialog").ej2_instances,$.ajax({type:"POST",url:updateCustomAttributeUrl,data:e,success:function(e){e.Status?(getSiteOrUseAttributes(),SuccessAlert(window.Server.App.LocalizationContent.EditCustomAttribute,window.Server.App.LocalizationContent.UpdateCustomAttributeSuccess,7e3),hideWaitingPopup("custom-attribute-dialog"),t[0].hide()):(hideWaitingPopup("custom-attribute-dialog"),isEmptyOrWhitespace(e.Message)?(WarningAlert(window.Server.App.LocalizationContent.EditCustomAttribute,window.Server.App.LocalizationContent.UpdateCustomAttributeFailure,e.ErrorMessage,7e3),t[0].hide()):($("#custom-attribute-name").addClass("e-error"),$("#custom-attribute-form").valid()))}}))}function removeCustomAttribute(e){var t="undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl,e={Id:$(e).attr("data-id"),CreatedDate:new Date,ModifiedDate:new Date},n={customAttribute:JSON.stringify(e)},n=t?(deleteCustomAttributeUrl=deleteUserCustomAttributeUrl,{customAttribute:JSON.stringify(e)}):{customAttribute:JSON.stringify(e),tenantInfoId:tenantInfoId};showWaitingPopup("messageBox"),$.ajax({type:"POST",url:deleteCustomAttributeUrl,data:n,success:function(e){e.Status?(getSiteOrUseAttributes(),hideWaitingPopup("messageBox"),SuccessAlert(window.Server.App.LocalizationContent.DeleteCustomAttribute,window.Server.App.LocalizationContent.DeleteCustomAttributeSuccess,7e3)):(hideWaitingPopup("messageBox"),WarningAlert(window.Server.App.LocalizationContent.DeleteCustomAttribute,window.Server.App.LocalizationContent.DeleteCustomAttributeFailure,e.Message,7e3)),hideWaitingPopup("messageBox"),onCloseMessageBox()}})}function editCustomAttribute(e){var t=$(e).attr("data-id"),e=$(e).attr("name");isAttributeEdit=!0,openCustomAttributeDialog(t,e)}function getSiteOrUseAttributes(){"undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?(showWaitingPopup("UsersAttributesGrid"),$.ajax({type:"GET",url:userAttributesUrl,data:{userId:userId},success:function(e){e.Status&&(document.getElementById("UsersAttributesGrid").ej2_instances[0].dataSource=e.Attributes),hideWaitingPopup("UsersAttributesGrid")}})):(showWaitingPopup("SiteAttributesGrid"),$.ajax({type:"GET",url:siteAttributesUrl,data:{tenantInfoId:tenantInfoId},success:function(e){e.Status&&(document.getElementById("SiteAttributesGrid").ej2_instances[0].dataSource=e.Attributes),hideWaitingPopup("SiteAttributesGrid")}}))}function updateValidationMessages(){document.getElementById("custom-attribute-name").ej2_instances[0].value=null,document.getElementById("custom-attribute-value").ej2_instances[0].value=null,document.getElementById("custom-attribute-descrition").ej2_instances[0].value=null,$("#encrypt-custom-attribute").prop("checked",!1),$("#custom-attribute-name, #custom-attribute-value").removeClass("e-error"),$("#custom-attribute-name, #custom-attribute-value").closest(".e-outline").siblings(".custom-attr-validation-errors").html(""),$("#custom-attribute-name, #custom-attribute-value").parent("div").removeClass("e-error")}function deleteConfirmation(t){setTimeout(function(){var e=("undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?document.getElementById("UsersAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0],e=e.getCurrentViewRecords()[e.getSelectedRowIndexes()];messageBox("su-delete",window.Server.App.LocalizationContent.DeleteCustomAttribute,window.Server.App.LocalizationContent.DeleteAttributeConfirm.format(" - <div class='highlight-container'><span class ='highlight-name'>",e.Name,"</span></div>"),"error",function(){removeCustomAttribute(t)},function(){clearAttributeSelection()})},100)}function clearAttributeSelection(){var e=("undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?document.getElementById("UsersAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0];e.clearSelection(),onCloseMessageBox()}function initialSiteGridCreate(){window.location.search.includes("tab=attributes")&&showWaitingPopup("SiteAttributesGrid")}function addSiteLevelAttribute(e){var t=document.getElementById("custom-attribute-dialog").ej2_instances,e=(addSiteAttribute.push(e),document.getElementById("AddSiteAttributesGrid").ej2_instances[0]);e.dataSource=addSiteAttribute,e.refresh(),hideWaitingPopup("custom-attribute-dialog"),t[0].hide()}function nameCheckAtAddTenant(){var n=$("#custom-attribute-name").val().trim();$.each(addSiteAttribute,function(e,t){t.Name.toLowerCase()==n.toLowerCase()&&$("#custom-attribute-name").addClass("e-error"),$("[name='custom-attribute-name']").valid()})}function updateSiteLevelAttribute(e){var t=document.getElementById("custom-attribute-dialog").ej2_instances,n=document.getElementById("AddSiteAttributesGrid").ej2_instances[0];addSiteAttribute.splice(currentIndex,1),addSiteAttribute.push(e),n.refresh(),hideWaitingPopup("custom-attribute-dialog"),t[0].hide()}function removeSiteAttribute(){var e=document.getElementById("AddSiteAttributesGrid").ej2_instances[0];addSiteAttribute.splice(e.getSelectedRowIndexes(),1),e.refresh()}function multiLineInputBoxInitialization(e){new ejs.inputs.TextBox({cssClass:"e-outline e-custom e-non-float",floatLabelType:"Never",multiline:!0}).appendTo(e)}$(document).ready(function(){var e=$("#add-custom-attribute"),e=(e.length&&e.on("click",function(){openCustomAttributeDialog()}),$("#add-tenant-site")),e=(e.length&&e.on("click",function(){openCustomAttributeDialog(null,"addtenant")}),$("#recovery-code-copy")),e=(e.length&&e.on("click",function(){copyToClipboard("#copy-recovery","#recovery-code-copy")}),$("#remove-user-attribute")),e=(e.length&&e.on("click",function(){deleteConfirmation(this)}),new ejs.inputs.TextBox({cssClass:"e-outline e-custom e-non-float",floatLabelType:"Never"}));String.prototype.format=function(){for(k in a=this,arguments)a=a.replace("{"+k+"}",arguments[k]);return a},e.appendTo("#custom-attribute-name"),multiLineInputBoxInitialization("#custom-attribute-value"),multiLineInputBoxInitialization("#custom-attribute-descrition"),$("#custom-attribute-form").validate({errorElement:"span",onkeyup:function(e,t){9!==t.keyCode&&$(e).valid()},onfocusout:function(e){$(e).valid()},rules:{"custom-attribute-name":{isRequired:!0,isValidName:!0,isAttributeExist:!0,maxlength:255},"custom-attribute-value":{isRequired:!0,maxlength:4e3},"custom-attribute-description":{maxlength:1024}},highlight:function(e){$(e).closest("div").addClass("e-error"),$(e).closest(".e-outline").addClass("e-error")},unhighlight:function(e){$(e).closest("div").removeClass("e-error"),$(e).closest(".e-outline").removeClass("e-error"),$(e).closest(".e-outline").siblings(".custom-attr-validation-errors").html("")},errorPlacement:function(e,t){$(t).closest(".e-outline").siblings(".custom-attr-validation-errors").html(e)},messages:{"custom-attribute-name":{isRequired:window.Server.App.LocalizationContent.AttributeNameValidator,maxlength:window.Server.App.LocalizationContent.AttributeLengthValidator.format("name","255")},"custom-attribute-value":{isRequired:window.Server.App.LocalizationContent.AttributeValueValidator,maxlength:window.Server.App.LocalizationContent.AttributeLengthValidator.format("value","4000")},"custom-attribute-description":{maxlength:window.Server.App.LocalizationContent.AttributeLengthValidator.format("description","1024")}}}),$.validator.addMethod("isRequired",function(e,t){return!isEmptyOrWhitespace(e)},window.Server.App.LocalizationContent.EnterName),$.validator.addMethod("isValidName",function(e,t){return IsValidName("name",e)},window.Server.App.LocalizationContent.AvoidSpecailCharacters),$.validator.addMethod("isAttributeExist",function(e,t){return isAttributeExist(e)},window.Server.App.LocalizationContent.IsAttributeNameExist),$.validator.addMethod("ismaxlength",function(e,t,n){return e.length<=n},window.Server.App.LocalizationContent.AttributeLengthValidator)}),$(document).on("keyup focusout","#custom-attribute-name",function(e){var t=$("#custom-attribute-name").val().toLowerCase().trim();"focusout"===e.type?isEmptyOrWhitespace(t)||!isEmptyOrWhitespace(customAttributeInfo)&&(isEmptyOrWhitespace(customAttributeInfo)||customAttributeInfo.Name.toLowerCase()==t)||(siteCreation?nameCheckAtAddTenant:attributeNameCheck)():($("#custom-attribute-name").removeClass("e-error"),$("[name='custom-attribute-name']").valid())}),$(document).ready(function(){var t=new ej.popups.Tooltip({target:".grid-content",position:"TopCenter",beforeRender:function(e){t.content=e.target.closest("td").innerText}},"#grid-tooltip");new ejs.grids.Grid({dataSource:null,gridLines:"None",allowSorting:!0,allowSearching:!1,allowPaging:!0,allowSelection:!0,allowFiltering:!1,pageSettings:{pageSize:10},enableHover:!0,enableAltRow:!1,dataBound:function(e){},columns:[{field:"Name",template:"#attribute-name-template",headerText:window.Server.App.LocalizationContent.Name,width:40,allowSorting:!0,allowFiltering:!0},{field:"Value",template:"#attribute-value-template",headerText:window.Server.App.LocalizationContent.Value,width:60,allowSorting:!0,allowFiltering:!0},{field:"Description",template:"#attribute-description-template",headerText:window.Server.App.LocalizationContent.Description,width:50,allowSorting:!0,allowFiltering:!0},{field:"ModifiedDateString",headerText:window.Server.App.LocalizationContent.LastModified,width:40,allowSorting:!0,allowFiltering:!1},{field:"Options",headerText:"",template:"#options",width:20,allowSorting:!1,allowFiltering:!1}]}).appendTo("#UsersAttributesGrid"),"undefined"!=typeof userAttributesUrl&&$.ajax({type:"GET",url:userAttributesUrl,data:{userId:userId},success:function(e){e.Status&&(document.getElementById("UsersAttributesGrid").ej2_instances[0].dataSource=e.Attributes),hideWaitingPopup("UsersAttributesGrid")}})});