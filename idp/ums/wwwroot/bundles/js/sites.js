(e=>{"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?exports=e(require("jquery")):e(jQuery)})(function(t){function n(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}void 0!==t.easing&&(t.easing.jswing=t.easing.swing);var i=Math.pow,a=Math.sqrt,s=Math.sin,r=Math.cos,o=Math.PI,l=1.70158,d=1.525*l,c=2*o/3,u=2*o/4.5;t.extend(t.easing,{def:"easeOutQuad",swing:function(e){return t.easing[t.easing.def](e)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-i(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-i(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-i(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-i(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-i(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-i(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-i(-2*e+2,5)/2},easeInSine:function(e){return 1-r(e*o/2)},easeOutSine:function(e){return s(e*o/2)},easeInOutSine:function(e){return-(r(o*e)-1)/2},easeInExpo:function(e){return 0===e?0:i(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-i(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?i(2,20*e-10)/2:(2-i(2,-20*e+10))/2},easeInCirc:function(e){return 1-a(1-i(e,2))},easeOutCirc:function(e){return a(1-i(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-a(1-i(2*e,2)))/2:(a(1-i(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-i(2,10*e-10)*s((10*e-10.75)*c)},easeOutElastic:function(e){return 0===e?0:1===e?1:i(2,-10*e)*s((10*e-.75)*c)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-(i(2,20*e-10)*s((20*e-11.125)*u))/2:i(2,-20*e+10)*s((20*e-11.125)*u)/2+1},easeInBack:function(e){return(1+l)*e*e*e-l*e*e},easeOutBack:function(e){return 1+(1+l)*i(e-1,3)+l*i(e-1,2)},easeInOutBack:function(e){return e<.5?i(2*e,2)*(7.189819*e-d)/2:(i(2*e-2,2)*((1+d)*(2*e-2)+d)+2)/2},easeInBounce:function(e){return 1-n(1-e)},easeOutBounce:n,easeInOutBounce:function(e){return e<.5?(1-n(1-2*e))/2:(1+n(2*e-1))/2}})}),(e=>{var l,d,c,t,o,r,u,h,p,m,M,E,g,f,x,I,_,i,k,L,U,v,b,z,j,T,B,P,w,y,C,a=function(e){return new a.prototype.init(e)};"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=a:e.Globalize=a,a.cultures={},(a.prototype={constructor:a,init:function(e){return this.cultures=a.cultures,this.cultureSelector=e,this}}).init.prototype=a.prototype,a.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},a.cultures.default.calendar=a.cultures.default.calendars.standard,a.cultures.en=a.cultures.default,a.cultureSelector="en",l=/^0x[a-f0-9]+$/i,d=/^[+\-]?infinity$/i,c=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,t=/^\s+|\s+$/g,o=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},r=function(e,t){return e.substr(e.length-t.length)===t},u=function(){var e,t,n,i,a,s=arguments[0]||{},r=1,o=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},r=2),"object"==typeof s||p(s)||(s={});r<o;r++)if(null!=(e=arguments[r]))for(t in e)a=s[t],n=e[t],s!==n&&(l&&n&&(m(n)||(i=h(n)))?(a=i?(i=!1,a&&h(a)?a:[]):a&&m(a)?a:{},s[t]=u(l,a,n)):void 0!==n&&(s[t]=n));return s},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=function(e){return"[object Function]"===Object.prototype.toString.call(e)},m=function(e){return"[object Object]"===Object.prototype.toString.call(e)},M=function(e,t){return 0===e.indexOf(t)},E=function(e){return(e+"").replace(t,"")},g=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},f=function(e,t,n){for(var i=e.length;i<t;i+=1)e=n?"0"+e:e+"0";return e},x=function(e,t){for(var n,i=0,a=!1,s=0,r=e.length;s<r;s++)switch(n=e.charAt(s)){case"'":a?t.push("'"):i++,a=!1;break;case"\\":a&&t.push("\\"),a=!a;break;default:t.push(n),a=!1}return i},I=function(e,t){var e=e.patterns,n=(t=t||"F").length;if(1===n){if(!(e=e[t]))throw"Invalid date format string '"+t+"'.";t=e}else 2===n&&"%"===t.charAt(0)&&(t=t.charAt(1));return t},_=function(e,t,n){function i(e,t){var n,e=e+"";return 1<t&&e.length<t?(n=w[t-2]+e).substr(n.length-t,t):e}function a(e,t){if(v)return v[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}var s,r,o,l,d,c,u,p=n.calendar,h=p.convert;if(!t||!t.length||"i"===t)return b=n&&n.name.length?h?_(e,p.patterns.F,n):(n=new Date(e.getTime()),s=L(e,p.eras),n.setFullYear(U(e,p,s)),n.toLocaleString()):e.toString();r=p.eras,o="s"===t,t=I(p,t);var m,g,f,v,b=[],w=["0","00","000"],y=/([^d]|^)(d|dd)([^d]|$)/g,C=0,A=k();for(!o&&h&&(v=h.fromGregorian(e));;){var S=A.lastIndex,$=A.exec(t),S=t.slice(S,$?$.index:t.length);if(C+=x(S,b),!$)break;if(C%2)b.push($[0]);else switch(d=(l=$[0]).length,l){case"ddd":case"dddd":c=3===d?p.days.namesAbbr:p.days.names,b.push(c[e.getDay()]);break;case"d":case"dd":g=!0,b.push(i(a(e,2),d));break;case"MMM":case"MMMM":u=a(e,1),b.push((p.monthsGenitive&&(g||f||(g=y.test(t),f=!0),g)?p.monthsGenitive:p.months)[3===d?"namesAbbr":"names"][u]);break;case"M":case"MM":b.push(i(a(e,1)+1,d));break;case"y":case"yy":case"yyyy":u=v?v[0]:U(e,p,L(e,r),o),d<4&&(u%=100),b.push(i(u,d));break;case"h":case"hh":0===(m=e.getHours()%12)&&(m=12),b.push(i(m,d));break;case"H":case"HH":b.push(i(e.getHours(),d));break;case"m":case"mm":b.push(i(e.getMinutes(),d));break;case"s":case"ss":b.push(i(e.getSeconds(),d));break;case"t":case"tt":u=e.getHours()<12?p.AM?p.AM[0]:" ":p.PM?p.PM[0]:" ",b.push(1===d?u.charAt(0):u);break;case"f":case"ff":case"fff":b.push(i(e.getMilliseconds(),3).substr(0,d));break;case"z":case"zz":m=e.getTimezoneOffset()/60,b.push((m<=0?"+":"-")+i(Math.floor(Math.abs(m)),d));break;case"zzz":m=e.getTimezoneOffset()/60,b.push((m<=0?"+":"-")+i(Math.floor(Math.abs(m)),2)+":"+i(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":p.eras&&b.push(p.eras[L(e,r)].name);break;case"/":b.push(p["/"]);break;default:throw"Invalid date format pattern '"+l+"'."}}return b.join("")},C=function(e,t,n){var i=n.groupSizes,a=i[0],s=1,r=Math.pow(10,t),r=Math.round(e*r)/r,o=(e=r=isFinite(r)?r:e)+"",l="",r=o.split(/e/i),e=1<r.length?parseInt(r[1],10):0;o=(r=(o=r[0]).split("."))[0],l=1<r.length?r[1]:"",0<e?(o+=(l=f(l,e,!1)).slice(0,e),l=l.substr(e)):e<0&&(l=(o=f(o,1+(e=-e),!0)).slice(-e,o.length)+l,o=o.slice(0,-e));for(var l=0<t?n["."]+(l.length>t?l.slice(0,t):f(l,t)):"",d=o.length-1,c=n[","],u="";0<=d;){if(0===a||d<a)return o.slice(0,d+1)+(u.length?c+u+l:l);u=o.slice(d-a+1,d+1)+(u.length?c+u:""),d-=a,s<i.length&&(a=i[s],s++)}return o.slice(0,d+1)+c+u+l},i=function(e,t,n){var i,a,s,r,o,l;if(!isFinite(e))return e===1/0?n.numberFormat.positiveInfinity:e===-1/0?n.numberFormat.negativeInfinity:n.numberFormat.NaN;if(!t||"i"===t)return n.name.length?e.toLocaleString():e.toString();t=t||"D";var d,c=n.numberFormat,u=Math.abs(e),p=-1;switch(1<t.length&&(p=parseInt(t.slice(1),10)),i=t.charAt(0).toUpperCase()){case"D":d="n",u=g(u),-1!==p&&(u=f(""+u,p,!0)),e<0&&(u="-"+u);break;case"N":a=c;case"C":a=a||c.currency;case"P":a=a||c.percent,d=e<0?a.pattern[0]:a.pattern[1]||"n",-1===p&&(p=a.decimals),u=C(u*("P"===i?100:1),p,a);break;default:throw"Bad number format specifier: "+i}for(s=/n|\$|-|%/g,r="";o=s.lastIndex,l=s.exec(d),r+=d.slice(o,l?l.index:d.length),l;)switch(l[0]){case"n":r+=u;break;case"$":r+=c.currency.symbol;break;case"-":/[1-9]/.test(u)&&(r+=c["-"]);break;case"%":r+=c.percent.symbol}return r},k=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},L=function(e,t){var n,i,a,s;if(t)for(i=e.getTime(),a=0,s=t.length;a<s;a++)if(null===(n=t[a].start)||n<=i)return a;return 0},U=function(e,t,n,i){e=e.getFullYear();return!i&&t.eras&&(e-=t.eras[n].offset),e},z=function(e,t){var n,i;return t<100&&(n=new Date,i=L(n),n=U(n,e,i),(i="string"==typeof(i=e.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(i,10):i)<(t+=n-n%100))&&(t-=100),t},j=function(e,t,n){var i,a=e.days,s=e._upperDays;return s||(e._upperDays=s=[y(a.names),y(a.namesAbbr),y(a.namesShort)]),t=w(t),n?-1===(i=o(s[1],t))&&(i=o(s[2],t)):i=o(s[0],t),i},T=function(e,t,n){var i=e.months,a=e.monthsGenitive||e.months,s=e._upperMonths,r=e._upperMonthsGen;return s||(e._upperMonths=s=[y(i.names),y(i.namesAbbr)],e._upperMonthsGen=r=[y(a.names),y(a.namesAbbr)]),t=w(t),i=(i=o(n?s[1]:s[0],t))<0?o(n?r[1]:r[0],t):i},B=function(e,t){var n,i,a,s,r,o=e._parseRegExp;if(o){if(r=o[t])return r}else e._parseRegExp=o={};for(var l,d=I(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],u=[],p=0,h=0,m=k();null!==(l=m.exec(d));)if(n=d.slice(p,l.index),p=m.lastIndex,(h+=x(n,c))%2)c.push(l[0]);else{switch(a=(i=l[0]).length,i){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":s="(\\D+)";break;case"tt":case"t":s="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":s="(\\d{"+a+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":s="(\\d\\d?)";break;case"zzz":s="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":s="([+-]?\\d\\d?)";break;case"/":s="(\\/)";break;default:throw"Invalid date format pattern '"+i+"'."}s&&c.push(s),u.push(l[0])}return x(d.slice(p),c),c.push("$"),r=c.join("").replace(/\s+/g,"\\s+"),o[t]={regExp:r,groups:u}},P=function(e,t,n){return e<t||n<e},w=function(e){return e.split(" ").join(" ").toUpperCase()},y=function(e){for(var t=[],n=0,i=e.length;n<i;n++)t[n]=w(e[n]);return t},v=function(e,t,n){e=E(e);var i,a,s,r,o,l,d=n.calendar,n=B(d,t),c=new RegExp(n.regExp).exec(e);if(null===c)return null;for(var u,p=n.groups,h=null,m=null,g=null,f=null,v=null,b=0,w=0,y=0,C=0,A=null,S=!1,$=0,x=p.length;$<x;$++)if(i=c[$+1]){var I=p[$],_=I.length,k=parseInt(i,10);switch(I){case"dd":case"d":if(P(f=k,1,31))return null;break;case"MMM":case"MMMM":if(g=T(d,i,3===_),P(g,0,11))return null;break;case"M":case"MM":if(P(g=k-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(m=_<4?z(d,k):k,P(m,0,9999))return null;break;case"h":case"hh":if(P(b=12===(b=k)?0:b,0,11))return null;break;case"H":case"HH":if(P(b=k,0,23))return null;break;case"m":case"mm":if(P(w=k,0,59))return null;break;case"s":case"ss":if(P(y=k,0,59))return null;break;case"tt":case"t":if((S=d.PM&&(i===d.PM[0]||i===d.PM[1]||i===d.PM[2]))||d.AM&&(i===d.AM[0]||i===d.AM[1]||i===d.AM[2]))break;return null;case"f":case"ff":case"fff":if(C=k*Math.pow(10,3-_),P(C,0,999))return null;break;case"ddd":case"dddd":if(v=j(d,i,3===_),P(v,0,6))return null;break;case"zzz":if(2!==(a=i.split(/:/)).length||(u=parseInt(a[0],10),P(u,-12,13))||(s=parseInt(a[1],10),P(s,0,59)))return null;A=60*u+(M(i,"-")?-s:s);break;case"z":case"zz":if(P(u=k,-12,13))return null;A=60*u;break;case"g":case"gg":if(!(r=i)||!d.eras)return null;for(r=E(r.toLowerCase()),o=0,l=d.eras.length;o<l;o++)if(r===d.eras[o].name.toLowerCase()){h=o;break}if(null===h)return null}}if(t=new Date,n=(e=d.convert)?e.fromGregorian(t)[0]:t.getFullYear(),null===m?m=n:d.eras&&(m+=d.eras[h||0].offset),null===g&&(g=0),null===f&&(f=1),e){if(null===(t=e.toGregorian(m,g,f)))return null}else if(t.setFullYear(m,g,f),t.getDate()!==f||null!==v&&t.getDay()!==v)return null;return S&&b<12&&(b+=12),t.setHours(b,w,y,C),null!==A&&(n=t.getMinutes()-(A+t.getTimezoneOffset()),t.setHours(t.getHours()+parseInt(n/60,10),n%60)),t},b=function(e,t,n){var i,a=t["-"],s=t["+"];switch(n){case"n -":a=" "+a,s=" "+s;case"n-":r(e,a)?i=["-",e.substr(0,e.length-a.length)]:r(e,s)&&(i=["+",e.substr(0,e.length-s.length)]);break;case"- n":a+=" ",s+=" ";case"-n":M(e,a)?i=["-",e.substr(a.length)]:M(e,s)&&(i=["+",e.substr(s.length)]);break;case"(n)":M(e,"(")&&r(e,")")&&(i=["-",e.substr(1,e.length-2)])}return i||["",e]},a.prototype.findClosestCulture=function(e){return a.findClosestCulture.call(this,e)},a.prototype.format=function(e,t,n){return a.format.call(this,e,t,n)},a.prototype.localize=function(e,t){return a.localize.call(this,e,t)},a.prototype.parseInt=function(e,t,n){return a.parseInt.call(this,e,t,n)},a.prototype.parseFloat=function(e,t,n){return a.parseFloat.call(this,e,t,n)},a.prototype.culture=function(e){return a.culture.call(this,e)},a.addCultureInfo=function(e,t,n){var i={},a=!1,i="string"!=typeof e?(n=e,e=this.culture().name,this.cultures[e]):"string"!=typeof t?(n=t,a=null==this.cultures[e],this.cultures[e]||this.cultures.default):(a=!0,this.cultures[t]);this.cultures[e]=u(!0,{},i,n),a&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},a.findClosestCulture=function(e){var t,n,i,a,s,r;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures.default;if("string"==typeof e&&(e=e.split(",")),h(e)){for(var o,l=this.cultures,d=e,c=d.length,u=[],p=0;p<c;p++)i=(e=E(d[p])).split(";"),o=E(i[0]),n=1!==i.length&&0===(e=E(i[1])).indexOf("q=")?(e=e.substr(2),n=parseFloat(e),isNaN(n)?0:n):1,u.push({lang:o,pri:n});for(u.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0}),p=0;p<c;p++)if(t=l[o=u[p].lang])return t;for(p=0;p<c;p++)for(o=u[p].lang;;){if(-1===(a=o.lastIndexOf("-")))break;if(t=l[o=o.substr(0,a)])return t}for(p=0;p<c;p++)for(s in o=u[p].lang,l)if(r=l[s],r.language==o)return r}else if("object"==typeof e)return e;return t||null},a.format=function(e,t,n){n=this.findClosestCulture(n);return e instanceof Date?e=_(e,t,n):"number"==typeof e&&(e=i(e,t,n)),e},a.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures.default.messages[e]},a.parseDate=function(e,t,n){var i,a,s,r,o,l;if(n=this.findClosestCulture(n),t){if((t="string"==typeof t?[t]:t).length)for(r=0,o=t.length;r<o&&(!(l=t[r])||!(i=v(e,l,n)));r++);}else for(a in s=n.calendar.patterns)if(i=v(e,s[a],n),i)break;return i||null},a.parseInt=function(e,t,n){return g(a.parseFloat(e,t,n))},a.parseFloat=function(e,t,n){"number"!=typeof t&&(n=t,t=10);var i,a,s,n=this.findClosestCulture(n),r=NaN,o=n.numberFormat;return-1<e.indexOf(n.numberFormat.currency.symbol)&&(e=(e=e.replace(n.numberFormat.currency.symbol,"")).replace(n.numberFormat.currency["."],n.numberFormat["."])),e=E(e),d.test(e)?r=parseFloat(e):!t&&l.test(e)?r=parseInt(e,16):(t=(n=b(e,o,o.pattern[0]))[0],s=n[1],""===t&&"(n)"!==o.pattern[0]&&(t=(n=b(e,o,"(n)"))[0],s=n[1]),""===t&&"-n"!==o.pattern[0]&&(t=(n=b(e,o,"-n"))[0],s=n[1]),t=t||"+",n=(e=(e=s.indexOf("e"))<0?s.indexOf("E"):e)<0?(a=s,null):(a=s.substr(0,e),s.substr(e+1)),s=o["."],a=(e=a.indexOf(s))<0?(i=a,null):(i=a.substr(0,e),a.substr(e+s.length)),e=o[","],i=i.split(e).join(""),s=e.replace(/\u00A0/g," "),t=t+(i=e!==s?i.split(s).join(""):i),null!==a&&(t+="."+a),null!==n&&(t+="e"+((e=b(n,o,"-n"))[0]||"+")+e[1]),c.test(t)&&(r=parseFloat(t))),r},a.culture=function(e){return void 0!==e&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures.default}})(this),(e=>{"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)})(function(c){c.extend(c.fn,{validate:function(e){var i;if(this.length)return(i=c.data(this[0],"validator"))||(this.attr("novalidate","novalidate"),i=new c.validator(e,this[0]),c.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(e){i.submitButton=e.currentTarget,c(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==c(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(n){function e(){var e,t;return i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(e=c("<input type='hidden'/>").attr("name",i.submitButton.name).val(c(i.submitButton).val()).appendTo(i.currentForm)),!(i.settings.submitHandler&&!i.settings.debug)||(t=i.settings.submitHandler.call(i,i.currentForm,n),e&&e.remove(),void 0!==t&&t)}return i.settings.debug&&n.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,e()):i.form()?i.pendingRequest?!(i.formSubmitted=!0):e():(i.focusInvalid(),!1)})),i);e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,t,n;return c(this[0]).is("form")?e=this.validate().form():(n=[],e=!0,t=c(this[0].form).validate(),this.each(function(){(e=t.element(this)&&e)||(n=n.concat(t.errorList))}),t.errorList=n),e},rules:function(e,t){var n,i,a,s,r,o=this[0],l=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=o&&(!o.form&&l&&(o.form=this.closest("form")[0],o.name=this.attr("name")),null!=o.form)){if(e)switch(n=c.data(o.form,"validator").settings,i=n.rules,a=c.validator.staticRules(o),e){case"add":c.extend(a,c.validator.normalizeRule(t)),delete a.messages,i[o.name]=a,t.messages&&(n.messages[o.name]=c.extend(n.messages[o.name],t.messages));break;case"remove":return t?(r={},c.each(t.split(/\s/),function(e,t){r[t]=a[t],delete a[t]}),r):(delete i[o.name],a)}return(l=c.validator.normalizeRules(c.extend({},c.validator.classRules(o),c.validator.attributeRules(o),c.validator.dataRules(o),c.validator.staticRules(o)),o)).required&&(s=l.required,delete l.required,l=c.extend({required:s},l)),l.remote&&(s=l.remote,delete l.remote,l=c.extend(l,{remote:s})),l}}});function t(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var n;c.extend(c.expr.pseudos||c.expr[":"],{blank:function(e){return!t(""+c(e).val())},filled:function(e){e=c(e).val();return null!==e&&!!t(""+e)},unchecked:function(e){return!c(e).prop("checked")}}),c.validator=function(e,t){this.settings=c.extend(!0,{},c.validator.defaults,e),this.currentForm=t,this.init()},c.validator.format=function(n,e){return 1===arguments.length?function(){var e=c.makeArray(arguments);return e.unshift(n),c.validator.format.apply(this,e)}:(void 0===e||((e=2<arguments.length&&e.constructor!==Array?c.makeArray(arguments).slice(1):e).constructor!==Array&&(e=[e]),c.each(e,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})})),n)},c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==c.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):c(e)).addClass(t).removeClass(n)},unhighlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):c(e)).removeClass(t).addClass(n)}},setDefaults:function(e){c.extend(c.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:c.validator.format("Please enter no more than {0} characters."),minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}."),step:c.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var t,n,i=void 0!==c(this).attr("contenteditable")&&"false"!==c(this).attr("contenteditable");!this.form&&i&&(this.form=c(this).closest("form")[0],this.name=c(this).attr("name")),a===this.form&&(i=c.data(this.form,"validator"),t="on"+e.type.replace(/^validate/,""),(n=i.settings)[t])&&!c(this).is(n.ignore)&&n[t].call(i,this,e)}this.labelContainer=c(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm),this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,a=this.currentForm,i=this.groups={};c.each(this.settings.groups,function(n,e){"string"==typeof e&&(e=e.split(/\s/)),c.each(e,function(e,t){i[t]=n})}),n=this.settings.rules,c.each(n,function(e,t){n[e]=c.validator.normalizeRule(t)}),c(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&c(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),c.extend(this.submitted,this.errorMap),this.invalid=c.extend({},this.errorMap),this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t,n,i=this.clean(e),a=this.validationTargetFor(i),s=this,r=!0;return void 0===a?delete this.invalid[i.name]:(this.prepareElement(a),this.currentElements=c(a),(n=this.groups[a.name])&&c.each(this.groups,function(e,t){t===n&&e!==a.name&&(i=s.validationTargetFor(s.clean(s.findByName(e))))&&i.name in s.invalid&&(s.currentElements.push(i),r=s.check(i)&&r)}),t=!1!==this.check(a),r=r&&t,this.invalid[a.name]=!t,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c(e).attr("aria-invalid",!t)),r},showErrors:function(t){var n;t&&(c.extend((n=this).errorMap,t),this.errorList=c.map(this.errorMap,function(e,t){return{message:e,element:n.findByName(t)[0]}}),this.successList=c.grep(this.successList,function(e){return!(e.name in t)})),this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)null!=e[t]&&!1!==e[t]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===c.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var n=this,i={};return c(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var e=this.name||c(this).attr("name"),t=void 0!==c(this).attr("contenteditable")&&"false"!==c(this).attr("contenteditable");return!e&&n.settings.debug&&window.console&&console.error("%o has no name assigned",this),t&&(this.form=c(this).closest("form")[0],this.name=e),!(this.form!==n.currentForm||e in i||!n.objectLength(c(this).rules())||(i[e]=!0,0))})},clean:function(e){return c(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return c(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=c([]),this.toHide=c([])},reset:function(){this.resetInternals(),this.currentElements=c([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=c(e),n=e.type,i=void 0!==t.attr("contenteditable")&&"false"!==t.attr("contenteditable");return"radio"===n||"checkbox"===n?this.findByName(e.name).filter(":checked").val():"number"===n&&void 0!==e.validity?e.validity.badInput?"NaN":t.val():(e=i?t.text():t.val(),"file"===n?"C:\\fakepath\\"===e.substr(0,12)?e.substr(12):0<=(i=e.lastIndexOf("/"))||0<=(i=e.lastIndexOf("\\"))?e.substr(i+1):e:"string"==typeof e?e.replace(/\r/g,""):e)},check:function(t){t=this.validationTargetFor(this.clean(t));var e,n,i,a,s=c(t).rules(),r=c.map(s,function(e,t){return t}).length,o=!1,l=this.elementValue(t);for(n in this.abortRequest(t),"function"==typeof s.normalizer?a=s.normalizer:"function"==typeof this.settings.normalizer&&(a=this.settings.normalizer),a&&(l=a.call(t,l),delete s.normalizer),s){i={method:n,parameters:s[n]};try{if("dependency-mismatch"===(e=c.validator.methods[n].call(this,l,t,i.parameters))&&1===r)o=!0;else{if(o=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,i),!1}}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+i.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+i.method+"' method."),e}}if(!o)return this.objectLength(s)&&this.successList.push(t),!0},customDataMessage:function(e,t){return c(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||c(e).data("msg")},customMessage:function(e,t){e=this.settings.messages[e];return e&&(e.constructor===String?e:e[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){var n=this.findDefined(this.customMessage(e.name,(t="string"==typeof t?{method:t}:t).method),this.customDataMessage(e,t.method),!this.settings.ignoreTitle&&e.title||void 0,c.validator.messages[t.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),i=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,t.parameters,e):i.test(n)&&(n=c.validator.format(n.replace(i,"{$1}"),t.parameters)),n},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t);this.errorList.push({message:n,element:e,method:t.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return e=this.settings.wrapper?e.add(e.parent(this.settings.wrapper)):e},defaultShowErrors:function(){for(var e,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,e=this.validElements();e[n];n++)this.settings.unhighlight.call(this,e[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var n,i,a,s=this.errorsFor(e),r=this.idOrName(e),o=c(e).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),this.settings&&this.settings.escapeHtml?s.text(t||""):s.html(t||"")):(s=c("<"+this.settings.errorElement+">").attr("id",r+"-error").addClass(this.settings.errorClass),this.settings&&this.settings.escapeHtml?s.text(t||""):s.html(t||""),i=s,this.settings.wrapper&&(i=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,c(e)):i.insertAfter(e),s.is("label")?s.attr("for",r):0===s.parents("label[for='"+this.escapeCssMeta(r)+"']").length&&(i=s.attr("id"),o?o.match(new RegExp("\\b"+this.escapeCssMeta(i)+"\\b"))||(o+=" "+i):o=i,c(e).attr("aria-describedby",o),n=this.groups[e.name])&&c.each((a=this).groups,function(e,t){t===n&&c("[name='"+a.escapeCssMeta(e)+"']",a.currentForm).attr("aria-describedby",s.attr("id"))})),!t&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var t=this.escapeCssMeta(this.idOrName(e)),e=c(e).attr("aria-describedby"),t="label[for='"+t+"'], label[for='"+t+"'] *";return e&&(t=t+", #"+this.escapeCssMeta(e).replace(/\s+/g,", #")),this.errors().filter(t)},escapeCssMeta:function(e){return void 0===e?"":e.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||!this.checkable(e)&&e.id||e.name},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),c(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return c(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return c("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!c(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!c.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},elementAjaxPort:function(e){return"validate"+e.name},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,c(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],c(e).removeClass(this.settings.pendingClass),t&&0===this.pendingRequest&&this.formSubmitted&&this.form()&&0===this.pendingRequest?(c(this.currentForm).trigger("submit"),this.submitButton&&c("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},abortRequest:function(e){var t;this.pending[e.name]&&(t=this.elementAjaxPort(e),c.ajaxAbort(t),this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],c(e).removeClass(this.settings.pendingClass))},previousValue:function(e,t){return t="string"==typeof t&&t||"remote",c.data(e,"previousValue")||c.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:t})})},destroy:function(){this.resetForm(),c(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:c.extend(this.classRuleSettings,e)},classRules:function(e){var t={},e=c(e).attr("class");return e&&c.each(e.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(t,c.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,n,i){(i=/min|max|step/.test(n)&&(null===t||/number|range|text/.test(t))&&(i=Number(i),isNaN(i))?void 0:i)||0===i?e[n]=i:t===n&&"range"!==t&&(e["date"===t?"dateISO":n]=!0)},attributeRules:function(e){var t,n,i={},a=c(e),s=e.getAttribute("type");for(t in c.validator.methods)n="required"===t?(n=e.getAttribute(t),""===n&&(n=!0),!!n):a.attr(t),this.normalizeAttributeRule(i,s,t,n);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var t,n,i={},a=c(e),s=e.getAttribute("type");for(t in c.validator.methods)n=a.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),""===n&&(n=!0),this.normalizeAttributeRule(i,s,t,n);return i},staticRules:function(e){var t={},n=c.data(e.form,"validator");return t=n.settings.rules?c.validator.normalizeRule(n.settings.rules[e.name])||{}:t},normalizeRules:function(i,a){return c.each(i,function(e,t){if(!1===t)delete i[e];else if(t.param||t.depends){var n=!0;switch(typeof t.depends){case"string":n=!!c(t.depends,a.form).length;break;case"function":n=t.depends.call(a,a)}n?i[e]=void 0===t.param||t.param:(c.data(a.form,"validator").resetElements(c(a)),delete i[e])}}),c.each(i,function(e,t){i[e]="function"==typeof t&&"normalizer"!==e?t(a):t}),c.each(["minlength","maxlength"],function(){i[this]&&(i[this]=Number(i[this]))}),c.each(["rangelength","range"],function(){var e;i[this]&&(Array.isArray(i[this])?i[this]=[Number(i[this][0]),Number(i[this][1])]:"string"==typeof i[this]&&(e=i[this].replace(/[\[\]]/g,"").split(/[\s,]+/),i[this]=[Number(e[0]),Number(e[1])]))}),c.validator.autoCreateRanges&&(null!=i.min&&null!=i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),null!=i.minlength)&&null!=i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength),i},normalizeRule:function(e){var t;return"string"==typeof e&&(t={},c.each(e.split(/\s/),function(){t[this]=!0}),e=t),e},addMethod:function(e,t,n){c.validator.methods[e]=t,c.validator.messages[e]=void 0!==n?n:c.validator.messages[e],t.length<3&&c.validator.addClassRules(e,c.validator.normalizeRule(e))},methods:{required:function(e,t,n){return this.depend(n,t)?"select"===t.nodeName.toLowerCase()?(n=c(t).val())&&0<n.length:this.checkable(t)?0<this.getLength(e,t):null!=e&&0<e.length:"dependency-mismatch"},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})+(?::(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:(n=!1,function(e,t){return n||(n=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())}),dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||n<=e},maxlength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e<=n},rangelength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e>=n[0]&&e<=n[1]},min:function(e,t,n){return this.optional(t)||n<=e},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},step:function(e,t,n){function i(e){return(e=(""+e).match(/(?:\.(\d+))?$/))&&e[1]?e[1].length:0}function a(e){return Math.round(e*Math.pow(10,s))}var s,r=c(t).attr("type"),o="Step attribute on input type "+r+" is not supported.",l=new RegExp("\\b"+r+"\\b"),d=!0;if(r&&!l.test(["text","number","range"].join()))throw new Error(o);return s=i(n),(i(e)>s||a(e)%a(n)!=0)&&(d=!1),this.optional(t)||d},equalTo:function(e,t,n){n=c(n);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){c(t).valid()}),e===n.val()},remote:function(i,a,e,s){if(this.optional(a))return"dependency-mismatch";s="string"==typeof s&&s||"remote";var r,t,o=this.previousValue(a,s);return this.settings.messages[a.name]||(this.settings.messages[a.name]={}),o.originalMessage=o.originalMessage||this.settings.messages[a.name][s],this.settings.messages[a.name][s]=o.message,t=c.param(c.extend({data:i},(e="string"==typeof e?{url:e}:e).data)),o.old===t?o.valid:(o.old=t,(r=this).startRequest(a),(t={})[a.name]=i,c.ajax(c.extend(!0,{mode:"abort",port:this.elementAjaxPort(a),dataType:"json",data:t,context:r.currentForm,success:function(e){var t,n=!0===e||"true"===e;r.settings.messages[a.name][s]=o.originalMessage,n?(t=r.formSubmitted,r.toHide=r.errorsFor(a),r.formSubmitted=t,r.successList.push(a),r.invalid[a.name]=!1,r.showErrors()):(t={},e=e||r.defaultMessage(a,{method:s,parameters:i}),t[a.name]=o.message=e,r.invalid[a.name]=!0,r.showErrors(t)),o.valid=n,r.stopRequest(a,n)}},e)),"pending")}}});var i,a={};return c.ajaxPrefilter?c.ajaxPrefilter(function(e,t,n){var i=e.port;"abort"===e.mode&&(c.ajaxAbort(i),a[i]=n)}):(i=c.ajax,c.ajax=function(e){var t=("mode"in e?e:c.ajaxSettings).mode,e=("port"in e?e:c.ajaxSettings).port;return"abort"===t?(c.ajaxAbort(e),a[e]=i.apply(this,arguments),a[e]):i.apply(this,arguments)}),c.ajaxAbort=function(e){a[e]&&(a[e].abort(),delete a[e])},c}),((t,n)=>{var e=n.jQuery;"object"==typeof exports?module.exports=e?t(n,e):function(e){if(e&&!e.fn)throw"Provide jQuery or null";return t(n,e)}:"function"==typeof define&&define.amd?define(function(){return t(n)}):t(n,!1)})(function(c,J){function b(n,i){return function(){var e,t=this.base;return this.base=n,e=i.apply(this,arguments),this.base=t,e}}function l(e,t){return $(t)&&((t=b(e?e._d?e:b(d,e):d,t))._d=(e&&e._d||0)+1),t}function R(e,t){var n,i=t.props;for(n in i)!we.test(n)||e[n]&&e[n].fix||(e[n]="convert"!==n?l(e.constructor.prototype[n],i[n]):i[n])}function e(e){return e}function d(){return""}function t(e){this.name=(J.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function A(e,t){if(e){for(var n in t)e[n]=t[n];return e}}function w(e,t,n){return e?q(e)?w.apply(v,e):(p=n?n[0]:p,/^(\W|_){5}$/.test(e+t+p)||O("Invalid delimiters"),r=e[0],i=e[1],o=t[0],u=t[1],D.delimiters=[r+i,o+u,p],e="\\"+r+"(\\"+p+")?\\"+i,t="\\"+o+"\\"+u,a="(?:(\\w+(?=[\\/\\s\\"+o+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+o+"]|\\"+o+"(?!\\"+u+"))*?)",K.rTag="(?:"+a+")",a=new RegExp("(?:"+e+a+"(\\/)?|\\"+r+"(\\"+p+")?\\"+i+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+t,"g"),K.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+e+".*"+t),s):D.delimiters}function x(){var e=this.get("item");return e?e.index:void 0}function I(){return this.index}function _(e,t,n,i){var a,s,r,o=0;if(1===n&&(i=1,n=void 0),t)for(r=(s=t.split(".")).length;e&&o<r;o++)a=e,e=s[o]?e[s[o]]:e;return n&&(n.lt=n.lt||o<r),void 0===e?i?d:"":i?function(){return e.apply(a,arguments)}:e}function G(e,t,n){var i,a,s,r,o=this,l=!m&&1<arguments.length,d=o.ctx;if(e){if(o._||(s=o.index,o=o.tag),r=o,d&&d.hasOwnProperty(e)||(d=de).hasOwnProperty(e)){if(a=d[e],"tag"===e||"tagCtx"===e||"root"===e||"parentTags"===e)return a}else d=void 0;if((!m&&o.tagCtx||o.linked)&&(a&&a._cxp||(o=!o.tagCtx&&!$(a)&&!(o=o.scope||o).isTop&&o.ctx.tag||o,d=(o=void 0!==a&&o.tagCtx?o.tagCtx.view.scope:o)._ocps,(a=d&&d.hasOwnProperty(e)&&d[e]||a)&&a._cxp)||!n&&!l||((d||(o._ocps=o._ocps||{}))[e]=a=[{_ocp:a,_vw:r,_key:e}],a._cxp={path:ue,ind:0,updateValue:function(e,t){return J.observable(a[0]).setProperty(ue,e),this}}),n=a&&a._cxp)){if(2<arguments.length)return(d=a[1]?K._ceo(a[1].deps):[ue]).unshift(a[0]),d._cxp=n,d;if(s=n.tagElse,d=a[1]?n.tag&&n.tag.cvtArgs?n.tag.cvtArgs(s,1)[n.ind]:a[1](a[0].data,a[0],K):a[0]._ocp,l)return K._ucp(e,t,o,n),o;a=d}return a&&$(a)&&A(i=function(){return a.apply(this&&this!==c?this:r,arguments)},a),i||a}}function H(e,t){var n,i,a,s,r,o,l,d=this;if(d.tagName){if(!(d=((o=d).tagCtxs||[d])[e||0]))return}else o=d.tag;if(r=o.bindFrom,s=d.args,(l=(l=o.convert)&&""+l===l?"true"===l?void 0:d.view.getRsc("converters",l)||O("Unknown converter: '"+l+"'"):l)&&!t&&(s=s.slice()),r){for(a=[],n=r.length;n--;)i=r[n],a.unshift(Y(d,i));t&&(s=a)}if(l){if(void 0===(l=l.apply(o,a||s)))return s;if(n=(r=r||[0]).length,q(l)&&(!1===l.arg0||1!==n&&l.length===n&&!l.arg0)||(l=[l],r=[0],n=1),t)s=l;else for(;n--;)+(i=r[n])===i&&(s[i]=l[n])}return s}function Y(e,t){return(e=e[+t===t?"args":"props"])&&e[t]}function X(e){return this.cvtArgs(e,1)}function S(e,t,n,i,a,s,r,o){var l=this,d="array"===t;l.content=o,l.views=d?[]:{},l.data=i,l.tmpl=a,o=l._={key:0,useKey:d?0:1,id:""+xe++,onRender:r,bnds:{}},l.linked=!!r,l.type=t||"top",t&&(l.cache={_ct:D._cchCt}),n&&"top"!==n.type||((l.ctx=e||{}).root=l.data),(l.parent=n)?(l.root=n.root||l,i=n.views,l.isTop=(a=n._).scp,l.scope=(!e.tag||e.tag===n.ctx.tag)&&!l.isTop&&n.scope||l,a.useKey?((i[o.key="_"+a.useKey++]=l).index=Ee,l.getIndex=x):i.length===(o.key=l.index=s)?i.push(l):i.splice(s,0,l),l.ctx=e||n.ctx):t&&(l.root=l)}function y(e,t,n){Object.defineProperty(e,t,{value:n,configurable:!0})}function ee(e,t){var n,i=Z._wm||{},a={tmpls:[],links:{},bnds:[],_is:"template",render:te};return(a=t?A(a,t):a).markup=e,a.htmlTag||(n=ve.exec(e),a.htmlTag=n?n[1].toLowerCase():""),(n=i[a.htmlTag])&&n!==i.div&&(a.markup=J.trim(a.markup)),a}function k(l,d){var c=l+"s";v[c]=function e(t,n,i){var a,s,r,o=K.onStore[l];if(!t||typeof t!==ke||t.nodeType||t.markup||t.getTgt||"viewModel"===l&&t.getters||t.extend)return t&&""+t!==t&&(i=n,n=t,t=void 0),r=i?"viewModel"===l?i:i[c]=i[c]||{}:e,a=d.compile,void 0===n&&(n=a?t:r[t],t=void 0),null===n?t&&delete r[t]:(a&&((n=a.call(r,t,n,i,0)||{})._is=l),t&&(r[t]=n)),o&&o(t,n,i,a),n;for(s in t)e(s,t[s],n);return n||v}}function M(t){s[t]=s[t]||function(e){return arguments.length?(D[t]=e,s):D[t]}}function E(n){function i(e,t){this.tgt=n.getTgt(e,t),t.map=this}return(n=(n=$(n)?{getTgt:n}:n).baseMap?A(A({},n.baseMap),n):n).map=function(e,t){return new i(e,t)},n}function te(e,t,n,i,a,s){var r,o,l,d,c,u,p=i,h="";if(!0===t?(n=t,t=void 0):typeof t!==ke&&(t=void 0),(l=this.tag)?(d=(p=p||this.view)._getTmpl(l.template||this.tmpl),arguments.length||(e=l.contentCtx&&$(l.contentCtx)?l.contentCtx(e):p)):d=this,d){if((p=!i&&e&&"view"===e._is?e:p)&&e===p&&(e=p.data),i=!p,m=m||i,i&&((t=t||{}).root=e),!m||Z.useViews||d.useViews||p&&p!==F)h=ne(d,e,t,n,p,a,s,l);else{if(p?(c=p.data,u=p.index,p.index=Ee):(c=(p=F).data,p.data=e,p.ctx=t),q(e)&&!n)for(r=0,o=e.length;r<o;r++)p.index=r,p.data=e[r],h+=d.fn(e[r],p,K);else p.data=e,h+=d.fn(e,p,K);p.data=c,p.index=u}i&&(m=void 0)}return h}function ne(e,t,n,i,a,s,r,o){var l,d,c,u,p,h,m,g,f,v,b,w,y,C="";if(o&&(f=o.tagName,w=o.tagCtx,n=n?N(n,o.ctx):o.ctx,e===a.content?m=e!==a.ctx._wrp?a.ctx._wrp:void 0:e!==w.content?e===o.template?(m=w.tmpl,n._wrp=w.content):m=w.content||a.content:m=a.content,!1===w.props.link)&&((n=n||{}).link=!1),a&&(r=r||a._.onRender,(y=n&&!1===n.link)&&a._.nl&&(r=void 0),n=N(n,a.ctx),w=!o&&a.tag?a.tag.tagCtxs[a.tagElse]:w),(v=w&&w.props.itemVar)&&("~"!==v[0]&&Q("Use itemVar='~myItem'"),v=v.slice(1)),!0===s&&(h=!0,s=0),!0===(g=r=r&&o&&o._.noVws?void 0:r)&&(g=void 0,r=a._.onRender),b=n=e.helpers?N(e.helpers,n):n,q(t)&&!i)for((c=h?a:void 0!==s&&a||new S(n,"array",a,t,e,s,r,m))._.nl=y,a&&a._.useKey&&(c._.bnd=!o||o._.bnd&&o,c.tag=o),l=0,d=t.length;l<d;l++)u=new S(b,"item",c,t[l],e,(s||0)+l,r,c.content),v&&((u.ctx=A({},b))[v]=K._cp(t[l],"#data",u)),p=e.fn(t[l],u,K),C+=c._.onRender?c._.onRender(p,u):p;else c=h?a:new S(b,f||"data",a,t,e,s,r,m),v&&((c.ctx=A({},b))[v]=K._cp(t,"#data",c)),c.tag=o,c._.nl=y,C+=e.fn(t,c,K);return o&&(c.tagElse=w.index,w.contentView=c),g?g(C,c):C}function O(e){throw new K.Err(e)}function Q(e){O("Syntax error\n"+e)}function L(S,$,x,I,_){function k(e){(e-=z)&&T.push(S.substr(z,e).replace(pe,"\\n"))}function M(e,t){e&&(e+="}}",Q((t?"{{"+t+"}} block has {{/"+e+" without {{"+e:"Unmatched or missing {{/"+e)+", in template:\n"+S))}var e,t,E,L,n,U=D.allowCode||$&&$.allowCode||!0===s.allowCode,i=[],z=0,j=[],T=i,B=[,,i];if(U&&$._is&&($.allowCode=U),x&&(void 0!==I&&(S=S.slice(0,-I.length-2)+o),S=r+S+u),M(j[0]&&j[0][2].pop()[0]),S.replace(a,function(e,t,n,i,a,s,r,o,l,d,c,u){(r&&t||l&&!n||o&&":"===o.slice(-1)||d)&&Q(e),s&&(a=":",i=W);var p,h,m,d=(t||x)&&[[]],g="",f="",v="",b="",w="",y="",C="",A="",s=!(l=l||x&&!_)&&!a;n=n||(o=o||"#data",a),k(u),z=u+e.length,r?U&&T.push(["*","\n"+o.replace(/^:/,"ret+= ").replace(he,"$1")+";\n"]):n?("else"===n&&(fe.test(o)&&Q('For "{{else if expr}}" use "{{else expr}}"'),d=B[9]&&[[]],B[10]=S.substring(B[10],u),h=B[11]||B[0]||Q("Mismatched: "+e),B=j.pop(),T=B[2],s=!0),o&&se(o.replace(pe," "),d,$,x).replace(ge,function(e,t,n,i,a,s,r,o){return"this:"===i&&(s="undefined"),o&&(m=m||"@"===o[0]),i="'"+a+"':",r?(f+=n+s+",",b+="'"+o+"',"):n?(v+=i+"j._cp("+s+',"'+o+'",view),',y+=i+"'"+o+"',"):t?C+=s:("trigger"===a&&(A+=s),"lateRender"===a&&(p="false"!==o),g+=i+s+",",w+=i+"'"+o+"',",L=L||we.test(a)),""}).slice(0,-1),d&&d[0]&&d.pop(),E=[n,i||!!I||L||"",s&&[],ae(b||(":"===n?"'#data',":""),w,y),ae(f||(":"===n?"data,":""),g,v),C,A,p,m,d||0],T.push(E),s&&(j.push(B),(B=E)[10]=z,B[11]=h)):c&&(M(c!==B[0]&&c!==B[11]&&c,B[0]),B[10]=S.substring(B[10],u),B=j.pop()),M(!B&&c),T=B[2]}),k(S.length),(z=i[i.length-1])&&M(""+z!==z&&+z[10]===z[10]&&z[0]),x){for(t=re(i,S,x),n=[],e=i.length;e--;)n.unshift(i[e][9]);ie(t,n)}else t=re(i,$);return t}function ie(e,t){var n,i,a=0,s=t.length;for(e.deps=[],e.paths=[];a<s;a++)for(n in e.paths.push(i=t[a]),i)"_jsvto"!==n&&i.hasOwnProperty(n)&&i[n].length&&!i[n].skp&&(e.deps=e.deps.concat(i[n]))}function ae(e,t,n){return[e.slice(0,-1),t.slice(0,-1),n.slice(0,-1)]}function se(_,k,e,M){var E,L,U,z,j=k&&k[0],T={bd:j},B={0:T},P=0,D=0,R=0,O={},N=0,F={},q={},V={},W={0:0},G={0:""},H=0,e=((_="@"===_[0]?_.replace($e,"."):_)+(e?" ":"")).replace(K.rPrm,function(e,t,n,i,l,a,s,r,o,d,c,u,p,h,m,g,f,v,b,w,y){a=a||"",p=p||"",n=n||t||p,l=(l=i&&!r?i+l:l)||o,(d=d&&!/\)|]/.test(y[w-1]))&&(l=l.slice(1).split(".").join("^")),c=c||v||"";var C,A,S,$,x,I=w;if(!z&&!U){if(s&&Q(_),f&&j){if(o=V[R-1],y.length-1>I-(o||0)){if(o=J.trim(y.slice(o,I+e.length)),C=L||B[R-1].bd,(A=C[C.length-1])&&A.prm){for(;A.sb&&A.sb.prm;)A=A.sb;S=A.sb={path:A.sb,bnd:A.bnd}}else C.push(S={path:C.pop()});A&&A.sb===S&&(G[R]=G[R-1].slice(A._cpPthSt)+G[R],G[R-1]=G[R-1].slice(0,A._cpPthSt)),S._cpPthSt=W[R-1],S._cpKey=o,G[R]+=y.slice(H,w),H=w,S._cpfn=Le[o]=Le[o]||new Function("data,view,j","//"+o+"\nvar v;\nreturn ((v="+G[R]+("]"===g?")]":g)+")!=null?v:null);"),G[R-1]+=q[D]&&Z.cache?'view.getCache("'+o.replace(me,"\\$&")+'"':G[R],S.prm=T.bd,S.bnd=S.bnd||S.path&&0<=S.path.indexOf("^")}G[R]=""}"["===c&&(c="[j._sq("),"["===n&&(n="[j._sq(")}return s=z?(z=!h)?e:p+'"':U?(U=!m)?e:p+'"':(n?(F[++D]=!0,O[D]=0,j&&(V[R++]=I++,T=B[R]={bd:[]},G[R]="",W[R]=1),n):"")+(b?D?"":(P=y.slice(P,I),(E?(E=L=!1,"\b"):"\b,")+P+(P=I+e.length,j&&k.push(T.bd=[]),"\b")):r?(R&&Q(_),j&&k.pop(),E="_"+l,P=I+e.length,j&&((j=T.bd=k[E]=[]).skp=!i),l+":"):l?l.split("^").join(".").replace(K.rPath,function(e,t,n,i,a,s,r,o){if($="."===n,n&&(l=l.slice(t.length),/^\.?constructor$/.test(o||l)&&Q(e),$||(e=(d?(M?"":"(ltOb.lt=ltOb.lt||")+"(ob=":"")+(i?'view.ctxPrm("'+i+'")':a?"view":"data")+(d?")===undefined"+(M?"":")")+'?"":view._getOb(ob,"':"")+(o?(s?"."+s:i||a?"":"."+n)+(r||""):(o=i?"":a?s||"":n,"")),e=t+("view.data"===(e+=o?"."+o:"").slice(0,9)?e.slice(5):e)+(d?(M?'"':'",ltOb')+(c?",1)":")"):"")),j)){if(C="_linkTo"===E?L=k._jsvto=k._jsvto||[]:T.bd,A=$&&C[C.length-1]){if(A._cpfn){for(;A.sb;)A=A.sb;A.prm&&(A.bnd&&(l="^"+l.slice(1)),A.sb=l,A.bnd=A.bnd||"^"===l[0])}}else C.push(l);c&&!$&&(V[R]=I,W[R]=G[R].length)}return e})+(c||a):a||(g?"]"===g?")]":")":u?(q[D]||Q(_),","):t?"":(z=h,U=m,'"'))),z||U||g&&(q[D]=!1,D--),j&&(z||U||(g&&(F[D+1]&&(T=B[--R],F[D+1]=!1),N=O[D+1]),c&&(O[D+1]=G[R].length+(n?1:0),l||g)&&(T=B[++R]={bd:[]},F[D+1]=!0)),G[R]=(G[R]||"")+y.slice(H,w),H=w+e.length,z||U||((x=n&&F[D+1])&&(G[R-1]+=n,W[R-1]++),"("===c&&$&&!S&&(G[R]=G[R-1].slice(N)+G[R],G[R-1]=G[R-1].slice(0,N))),G[R]+=x?s.slice(1):s),z||U||!c||(D++,l&&"("===c&&(q[D]=!0)),z||U||!v||(j&&(G[R]+=c),s+=c),s});return j&&(e=G[0]),!D&&e||Q(_)}function re(e,t,n){var i,a,s,r,o,l,d,c,u,p,h,m,g,f,v,b,w,y,C,A,S,$,x,I,_,k,M,E,L,U=0,z=Z.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,j="",T={},B=e.length;for(""+t===t?(v=n?'data-link="'+t.replace(pe," ").slice(1,-1)+'"':t,t=0):(v=t.tmplName||"unnamed",t.allowCode&&(T.allowCode=!0),t.debug&&(T.debug=!0),u=t.bnds,f=t.tmpls),i=0;i<B;i++)if(""+(a=e[i])===a)j+='+"'+a+'"';else if("*"===(s=a[0]))j+=";\n"+a[1]+"\nret=ret";else{if(r=a[1],w=!n&&a[2],E=a[3],L=h=a[4],E="\n\tparams:{args:["+E[0]+"],\n\tprops:{"+E[1]+"}"+(E[2]?",\n\tctx:{"+E[2]+"}":"")+"},\n\targs:["+L[0]+"],\n\tprops:{"+L[1]+"}"+(L[2]?",\n\tctx:{"+L[2]+"}":""),L=a[6],_=a[7],M=a[8]?(k="\nvar ob,ltOb={},ctxs=",";\nctxs.lt=ltOb.lt;\nreturn ctxs;"):(k="\nreturn ",""),I=a[10]&&a[10].replace(he,"$1"),(A="else"===s)?p&&p.push(a[9]):(x=a[5]||!1!==D.debugMode&&"undefined",u&&(p=a[9])&&(p=[p],U=u.push(1))),z=z||h[1]||h[2]||p||/view.(?!index)/.test(h[0]),(S=":"===s)?r&&(s=r===W?">":r+s):(w&&((I=ee(I,T)).tmplName=v+"/"+s,I.useViews=I.useViews||z,re(w,I),z=I.useViews,f.push(I)),A||(b=s,z=z||s&&(!P[s]||!P[s].flow),C=j,j=""),y=(y=e[i+1])&&"else"===y[0]),I=x?";\ntry{\nret+=":"\n+",m=A="",S&&(p||L||r&&r!==W||_)){if(($=new Function("data,view,j","// "+v+" "+ ++U+" "+s+k+"{"+E+"};"+M))._er=x,$._tag=s,$._bd=!!p,$._lr=_,n)return $;ie($,p),c=!0,A=(g='c("'+r+'",view,')+U+",",m=")"}if(j+=S?(n?(x?"try{\n":"")+"return ":I)+(c?(z=d=!(c=void 0),g+($?(u[U-1]=$,U):"{"+E+"}")+")"):">"===s?(l=!0,"h("+h[0]+")"):"((v="+h[0]+")!=null?v:"+(n?"null)":'"")')):(o=!0,"\n{view:view,content:false,tmpl:"+(w?f.length:"false")+","+E+"},"),b&&!y){if(j="["+j.slice(0,-1)+"]",g='t("'+b+'",view,this,',n||p){if((j=new Function("data,view,j"," // "+v+" "+U+" "+b+k+j+M))._er=x,j._tag=b,p&&ie(u[U-1]=j,p),j._lr=_,n)return j;A=g+U+",undefined,",m=")"}j=C+I+g+(p&&U||j)+")",b=p=0}x&&!y&&(z=!0,j+=";\n}catch(e){ret"+(n?"urn ":"+=")+A+"j._err(e,view,"+x+")"+m+";}"+(n?"":"\nret=ret"))}j="// "+v+(T.debug?"\ndebugger;":"")+"\nvar v"+(o?",t=j._tag":"")+(d?",c=j._cnvt":"")+(l?",h=j._html":"")+(n?(a[8]?", ob":"")+";\n":',ret=""')+j+(n?"\n":";\nreturn ret;");try{j=new Function("data,view,j",j)}catch(e){Q("Compiled template code:\n\n"+j+'\n: "'+(e.message||e)+'"')}return t&&(t.fn=j,t.useViews=!!z),j}function N(e,t){return e&&e!==t?t?A(A({},t),e):e:t&&A({},t)}function U(t,e){var n,i,a,s=e.tag,r=e.props,o=e.params.props,l=r.filter,d=r.sort,c=!0===d,u=parseInt(r.step),p=r.reverse?-1:1;if(q(t)){if(c||d&&""+d===d?((n=t.map(function(e,t){return{i:t,v:""+(e=c?e:_(e,d))===e?e.toLowerCase():e}})).sort(function(e,t){return e.v>t.v?p:e.v<t.v?-p:0}),t=n.map(function(e){return t[e.i]})):(d||p<0)&&!s.dataMap&&(t=t.slice()),$(d)&&(t=t.sort(function(){return d.apply(e,arguments)})),(t=p<0&&(!d||$(d))?t.reverse():t).filter&&l&&(t=t.filter(l,e),e.tag.onFilter)&&e.tag.onFilter(e),o.sorted&&(n=d||p<0?t:t.slice(),s.sorted?J.observable(s.sorted).refresh(n):e.map.sorted=n),i=r.start,a=r.end,(o.start&&void 0===i||o.end&&void 0===a)&&(i=a=0),isNaN(i)&&isNaN(a)||(a=void 0===a||a>t.length?t.length:+a,t=t.slice(i=+i||0,a)),1<u){for(i=0,a=t.length,n=[];i<a;i+=u)n.push(t[i]);t=n}o.paged&&s.paged&&$observable(s.paged).refresh(t)}return t}function z(e,t,n){var i=this.jquery&&(this[0]||O("Unknown template")),a=i.getAttribute(Me);return te.call(a&&J.data(i)[g]||h(i),e,t,n)}function j(e){return Ie[e]||(Ie[e]="&#"+e.charCodeAt(0)+";")}function T(e,t){return _e[t]||""}function B(e){return null!=e?be.test(e)&&(""+e).replace(Ce,j)||e:""}var oe=!1===J;J=J&&J.fn?J:c.jQuery;var le,a,F,C,$,q,h,V,de,P,K,D,Z,s,r,i,o,u,p,ce,m,n="v1.0.11",ue="_ocp",pe=/[ \t]*(\r\n|\n|\r)/g,he=/\\(['"\\])/g,me=/['"\\]/g,ge=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,fe=/^if\s/,ve=/<(\w+)[>\s]/,be=/[\x00`><\"'&=]/,we=/^on[A-Z]|^convert(Back)?$/,ye=/^\#\d+_`[\s\S]*\/\d+_`$/,Ce=/[\x00`><"'&=]/g,Ae=/[&<>]/g,Se=/&(amp|gt|lt);/g,$e=/\[['"]?|['"]?\]/g,xe=0,Ie={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},_e={amp:"&",gt:">",lt:"<"},W="html",ke="object",Me="data-jsv-tmpl",g="jsvTmpl",Ee="For #index in nested block use #getIndex().",Le={},Ue={},f=c.jsrender,ze=f&&J&&!J.render,je={template:{compile:function n(i,e,a,s){function t(e){var t;if(""+e===e||0<e.nodeType&&(r=e)){if(!r)if(/^\.?\/[^\\:*?"<>]*$/.test(e))(t=h[i=i||e])?e=t:r=document.getElementById(e);else if("#"===e.charAt(0))r=document.getElementById(e.slice(1));else if(J.fn&&!K.rTmpl.test(e))try{r=J(e,document)[0]}catch(e){}r&&("SCRIPT"!==r.tagName&&O(e+": Use script block, not "+r.tagName),s?e=r.innerHTML:((t=r.getAttribute(Me))&&(t!==g?(e=h[t],delete h[t]):J.fn&&(e=J.data(r)[g])),(e=t&&e?e:n(i=i||(J.fn?g:e),r.innerHTML,a,s)).tmplName=i=i||t,i!==g&&(h[i]=e),r.setAttribute(Me,i),J.fn&&J.data(r,g,e))),r=void 0}else e.fn||(e=void 0);return e}var r,o,l,d,c,u=e=e||"";if(K._html=V.html,0===s&&(s=void 0,u=t(u)),(s=s||(e.markup?e.bnds?A({},e):e:{})).tmplName=s.tmplName||i||"unnamed",a&&(s._parentTmpl=a),void 0!==(u=!u&&e.markup&&(u=t(e.markup))&&u.fn?u.markup:u)){if(u.render||e.render?u.tmpls&&(o=u):(e=ee(u,s),L(u.replace(me,"\\$&"),e)),!o){var p=o=A(function(){return o.render.apply(o,arguments)},e);for(l in je)d=l+"s",p[d]&&(c=p[d],p[d]={},v[d](c,p))}return o}}},tag:{compile:function(e,t,n){function i(){this._={unlinked:!0},this.inline=!0,this.tagName=e}var a,s,r,o=new K._tg;if($(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t}),s=t.baseTag)for(r in t.flow=!!t.flow,(s=""+s===s?n&&n.tags[s]||P[s]:s)||O('baseTag: "'+t.baseTag+'" not found'),o=A(o,s),t)o[r]=l(s[r],t[r]);else o=A(o,t);return void 0!==(a=o.template)&&(o.template=""+a===a?h[a]||h(a):a),(i.prototype=o).constructor=o._ctr=i,n&&(o._parentTmpl=n),o}},viewModel:{compile:function(l,e){function t(e){n.apply(this,e)}function g(){return new t(arguments)}function f(e,t){for(var n,i,a,s,r,o,l=0;l<m;l++)n=void 0,(i=p[l])+""!==i&&(i=(n=i).getter,s=n.parentRef),void 0===(a=e[i])&&n&&void 0!==(r=n.defaultVal)&&(o=e,a=$(r=r)?r.call(o):r),t(a,n&&u[n.type],i,s)}function d(e,t,n){e=e+""===e?JSON.parse(e):e;var i,a,s,r,o,l,d,c,u,p,h=0,m=this;if(q(m)){for(d={},u=[],a=e.length,s=m.length;h<a;h++){for(c=e[h],l=!1,i=0;i<s&&!l;i++)d[i]||(o=m[i],v&&(d[i]=l=v+""===v?c[v]&&(w[v]?o[v]():o[v])===c[v]:v(o,c)));l?(o.merge(c),u.push(o)):(u.push(p=g.map(c)),n&&y(p,n,t))}b?b(m).refresh(u,!0):m.splice.apply(m,[0,m.length].concat(u))}else for(r in f(e,function(e,t,n,i){t?m[n]().merge(e,m,i):m[n]()!==e&&m[n](e)}),e)r===C||w[r]||(m[r]=e[r])}function c(){function e(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n].unmap());return t}var t,n,i,a,s=0,r=this;if(q(r))return e(r);for(t={};s<m;s++)i=void 0,a=r[n=(n=p[s])+""!==n?(i=n).getter:n](),t[n]=i&&a&&u[i.type]?q(a)?e(a):a.unmap():a;for(n in r)!r.hasOwnProperty(n)||"_"===n.charAt(0)&&w[n.slice(1)]||n===C||$(r[n])||(t[n]=r[n]);return t}var i,n,a,u=this,p=e.getters,s=e.extend,v=e.id,r=J.extend({_is:l||"unnamed",unmap:c,merge:d},s),o="",h="",m=p?p.length:0,b=J.observable,w={};for(t.prototype=r,i=0;i<m;i++)(t=>{t=t.getter||t,w[t]=i+1;var n="_"+t;o+=(o?",":"")+t,h+="this."+n+" = "+t+";\n",r[t]=r[t]||function(e){return arguments.length?void(b?b(this).setProperty(t,e):this[n]=e):this[n]},b&&(r[t].set=r[t].set||function(e){this[n]=e})})(p[i]);return h=new Function(o,h),((n=function(){h.apply(this,arguments),(a=arguments[m+1])&&y(this,arguments[m],a)}).prototype=r).constructor=n,g.map=function(e){var t,n,i,a,s=0,r=e=e+""===e?JSON.parse(e):e,o=[];if(q(e)){for(t=(e=e||[]).length;s<t;s++)o.push(this.map(e[s]));return o._is=l,o.unmap=c,o.merge=d,o}if(e){for(f(e,function(e,t){t&&(e=t.map(e)),o.push(e)}),r=this.apply(this,o),s=m;s--;)if(i=o[s],(a=p[s].parentRef)&&i&&i.unmap)if(q(i))for(t=i.length;t--;)y(i[t],a,r);else y(i,a,r);for(n in e)n===C||w[n]||(r[n]=e[n])}return r},g.getters=p,g.extend=s,g.id=v,g}},helper:{},converter:{}},v={jsviews:n,sub:{rPath:/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,rPrm:/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(?:(\()\s*)?\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,View:S,Err:t,tmplFn:L,parse:se,extend:A,extendCtx:N,syntaxErr:Q,onStore:{template:function(e,t){null===t?delete Ue[e]:e&&(Ue[e]=t)}},addSetting:M,settings:{allowCode:!1},advSet:d,_thp:R,_gm:l,_tg:function(){},_cnvt:function(e,t,n,i){var a,s,r,o,l,d="number"==typeof n&&t.tmpl.bnds[n-1];if(void 0!==(i=void 0===i&&d&&d._lr?"":i)?n=i={props:{},args:[i]}:d&&(n=d(t.data,t,K)),d=d._bd&&d,e||d){if(a=(s=t._lc)&&s.tag,n.view=t,!a){if(a=A(new K._tg,{_:{bnd:d,unlinked:!0,lt:n.lt},inline:!s,tagName:":",convert:e,onArrayChange:!0,flow:!0,tagCtx:n,tagCtxs:[n],_is:"tag"}),1<(o=n.args.length))for(l=a.bindTo=[];o--;)l.unshift(o);s&&((s.tag=a).linkCtx=s),n.ctx=N(n.ctx,(s?s.view:t).ctx),R(a,n)}a._er=i&&r,a.ctx=n.ctx||a.ctx||{},n.ctx=void 0,r=a.cvtArgs()[0],a._er=i&&r}else r=n.args[0];return null!=(r=d&&t._.onRender?t._.onRender(r,t,a):r)?r:""},_tag:function(e,t,n,i,a,s){function B(e){var t=r[e];if(void 0!==t)for(t=q(t)?t:[t],p=t.length;p--;)I=t[p],isNaN(parseInt(I))||(t[p]=parseInt(I));return t||[0]}var r,o,l,d,c,u,p,h,m,g,f,v,b,w,y,C,A,P,S,$,x,I,_,k,M,E,L=0,U="",z=(t=t||F)._lc||!1,j=t.ctx,D=n||t.tmpl,T="number"==typeof i&&t.tmpl.bnds[i-1];for(("tag"===e._is?(e=(r=e).tagName,i=r.tagCtxs,r):o=t.getRsc("tags",e)||O("Unknown tag: {{"+e+"}} ")).template,void 0!==(s=void 0===s&&T&&(T._lr=o.lateRender&&!1!==T._lr||T._lr)?"":s)?(U+=s,i=s=[{props:{},args:[],params:{props:{}}}]):T&&(i=T(t.data,t,K)),u=i.length;L<u;L++)y=(g=i[L]).tmpl,(!z||!z.tag||L&&!z.tag.inline||r._er||y&&+y===y)&&(y&&D.tmpls&&(g.tmpl=g.content=D.tmpls[y-1]),g.index=L,g.ctxPrm=G,g.render=te,g.cvtArgs=H,g.bndArgs=X,g.view=t,g.ctx=N(N(g.ctx,o&&o.ctx),j)),(n=g.props.tmpl)&&(g.tmpl=t._getTmpl(n),g.content=g.content||g.tmpl),r?z&&z.fn._lr&&(C=!!r.init):(C=!!(r=new o._ctr).init,r.parent=c=j&&j.tag,r.tagCtxs=i,z&&(r.inline=!1,z.tag=r),r.linkCtx=z,(r._.bnd=T||z.fn)?(r._.ths=g.params.props.this,r._.lt=i.lt,r._.arrVws={}):r.dataBoundOnly&&O(e+" must be data-bound:\n{^{"+e+"}}")),$=r.dataMap,g.tag=r,$&&i&&(g.map=i[L].map),r.flow||(y=g.ctx=g.ctx||{},l=r.parents=y.parentTags=j&&N(y.parentTags,j.parentTags)||{},c&&(l[c.tagName]=c),l[r.tagName]=y.tag=r,y.tagCtx=g);if(!(r._er=s)){for(R(r,i[0]),r.rendering={rndr:r.rendering},L=0;L<u;L++){if(S=(g=r.tagCtx=i[L]).props,r.ctx=g.ctx,!L){if(C&&(r.init(g,z,r.ctx),C=void 0),g.args.length||!1===g.argDefault||!1===r.argDefault||(g.args=A=[g.view.data],g.params.args=["#data"]),v=B("bindTo"),void 0!==r.bindTo&&(r.bindTo=v),void 0!==r.bindFrom?r.bindFrom=B("bindFrom"):r.bindTo&&(r.bindFrom=r.bindTo=v),b=r.bindFrom||v,k=v.length,_=b.length,r._.bnd&&(M=r.linkedElement)&&(r.linkedElement=M=q(M)?M:[M],k!==M.length)&&O("linkedElement not same length as bindTo"),(M=r.linkedCtxParam)&&(r.linkedCtxParam=M=q(M)?M:[M],_!==M.length)&&O("linkedCtxParam not same length as bindFrom/bindTo"),b)for(r._.fromIndex={},r._.toIndex={},h=_;h--;)for(I=b[h],p=k;p--;)I===v[p]&&(r._.fromIndex[p]=h,r._.toIndex[h]=p);z&&(z.attr=r.attr=z.attr||r.attr||z._dfAt),d=r.attr,r._.noVws=d&&d!==W}if(A=r.cvtArgs(L),r.linkedCtxParam)for(P=r.cvtArgs(L,1),p=_,E=r.constructor.prototype.ctx;p--;)(f=r.linkedCtxParam[p])&&(I=b[p],w=P[p],g.ctx[f]=K._cp(E&&void 0===w?E[f]:w,void 0!==w&&Y(g.params,I),g.view,r._.bnd&&{tag:r,cvt:r.convert,ind:p,tagElse:L}));(x=S.dataMap||$)&&(A.length||S.dataMap)&&((S=g.map)&&S.src===A[0]&&!a||(S&&S.src&&S.unmap(),x.map(A[0],g,S,!r._.bnd),S=g.map),A=[S.tgt]),m=void 0,r.render&&(m=r.render.apply(r,A),t.linked)&&m&&!ye.test(m)&&((n={links:[]}).render=n.fn=function(){return m},m=ne(n,t.data,void 0,!0,t,void 0,void 0,r)),A.length||(A=[t]),void 0===m&&(x=A[0],r.contentCtx&&(x=!0===r.contentCtx?t:r.contentCtx(x)),m=g.render(x,!0)||(a?void 0:"")),U=U?U+(m||""):void 0!==m?""+m:void 0}r.rendering=r.rendering.rndr}return r.tagCtx=i[0],r.ctx=r.tagCtx.ctx,r._.noVws&&r.inline&&(U="text"===d?V.html(U):""),T&&t._.onRender?t._.onRender(U,t,r):U},_er:O,_err:function(e,t,n){var i=void 0!==n?$(n)?n.call(t.data,e,t):n||"":"{Error: "+(e.message||e)+"}";return D.onError&&void 0!==(n=D.onError.call(t.data,e,n&&i,t))&&(i=n),t&&!t._lc?V.html(i):i},_cp:e,_sq:function(e){return"constructor"===e&&Q(""),e}},settings:{delimiters:w,advanced:function(e){return e?(A(Z,e),K.advSet(),s):Z}},map:E};if((t.prototype=new Error).constructor=t,x.depends=function(){return[this.get("item"),"index"]},I.depends="index",S.prototype={get:function(e,t){t||!0===e||(t=e,e=void 0);var n,i,a,s,r=this,o="root"===t;if(e){if(!(s=t&&r.type===t&&r))if(n=r.views,r._.useKey){for(i in n)if(s=t?n[i].get(e,t):n[i])break}else for(i=0,a=n.length;!s&&i<a;i++)s=t?n[i].get(e,t):n[i]}else if(o)s=r.root;else if(t)for(;r&&!s;)s=r.type===t?r:void 0,r=r.parent;else s=r.parent;return s||void 0},getIndex:I,ctxPrm:G,getRsc:function(e,t){var n,i,a=this;if(""+t===t){for(;void 0===n&&a;)n=(i=a.tmpl&&a.tmpl[e])&&i[t],a=a.parent;return n||v[e][t]}},_getTmpl:function(e){return e&&(e.fn?e:this.getRsc("templates",e)||h(e))},_getOb:_,getCache:function(e){return D._cchCt>this.cache._ct&&(this.cache={_ct:D._cchCt}),void 0!==this.cache[e]?this.cache[e]:this.cache[e]=Le[e](this.data,this,K)},_is:"view"},K=v.sub,s=v.settings,!(f||J&&J.render)){for(le in je)k(le,je[le]);if(V=v.converters,de=v.helpers,P=v.tags,K._tg.prototype={baseApply:function(e){return this.base.apply(this,e)},cvtArgs:H,bndArgs:X,ctxPrm:G},F=K.topView=new S,J){if(J.fn.render=z,C=J.expando,J.observable){if(n!==(n=J.views.jsviews))throw"jquery.observable.js requires jsrender.js "+n;A(K,J.views.sub),v.map=J.views.map}}else J={},oe&&(c.jsrender=J),J.renderFile=J.__express=J.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},J.isFunction=function(e){return"function"==typeof e},J.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},K._jq=function(e){e!==J&&(A(e,J),(J=e).fn.render=z,delete J.jsrender,C=J.expando)},J.jsrender=n;for(ce in(D=K.settings).allowCode=!1,$=J.isFunction,J.render=Ue,J.views=v,J.templates=h=v.templates,D)M(ce);(s.debugMode=function(e){return void 0===e?D.debugMode:(D._clFns&&D._clFns(),D.debugMode=e,D.onError=e+""===e?function(){return e}:$(e)?e:void 0,s)})(!1),Z=D.advanced={cache:!0,useViews:!1,_jsv:!1},P({if:{render:function(e){var t=this.tagCtx;return this.rendering.done||!e&&(t.args.length||!t.index)?"":(this.rendering.done=!0,void(this.selected=t.index))},contentCtx:!0,flow:!0},for:{sortDataMap:E(U),init:function(e,t){this.setDataMap(this.tagCtxs)},render:function(e){var t,n,i,a,s=this.tagCtx,r=!1===s.argDefault,o=s.props,l=r||s.args.length,d="",c=0;if(!this.rendering.done){if(t=l?e:s.view.data,r)for(r=o.reverse?"unshift":"push",i=+o.end,a=+o.step||1,t=[],n=+o.start||0;0<(i-n)*a;n+=a)t[r](n);void 0!==t&&(e=q(t),d+=s.render(t,!l||o.noIteration),c+=e?t.length:1),(this.rendering.done=c)&&(this.selected=s.index)}return d},setDataMap:function(e){for(var t,n,i,a=e.length;a--;)n=(t=e[a]).props,i=t.params.props,t.argDefault=void 0===n.end||0<t.args.length,n.dataMap=!1!==t.argDefault&&q(t.args[0])&&(i.sort||i.start||i.end||i.step||i.filter||i.reverse||n.sort||n.start||n.end||n.step||n.filter||n.reverse)&&this.sortDataMap},flow:!0},props:{baseTag:"for",dataMap:E(function(e,t){var n,i,a=t.map,s=a&&a.propsArr;if(!s){if(s=[],typeof e===ke||$(e))for(n in e)i=e[n],n===C||!e.hasOwnProperty(n)||t.props.noFunctions&&J.isFunction(i)||s.push({key:n,prop:i});a&&(a.propsArr=a.options&&s)}return U(s,t)}),init:d,flow:!0},include:{flow:!0},"*":{render:e,flow:!0},":*":{render:e,flow:!0},dbg:de.dbg=V.dbg=function(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}}),V({html:B,attr:B,encode:function(e){return""+e===e?e.replace(Ae,j):e},unencode:function(e){return""+e===e?e.replace(Se,T):e},url:function(e){return null!=e?encodeURI(""+e):null===e?e:""}})}return D=K.settings,q=(J||f).isArray,s.delimiters("{{","}}","^"),ze&&f.views.sub._jq(J),J||f},window);var singleUserSelectedId,validateTimer,tenantId,UpdateTenantId,isUserTabLoaded=!1,isAttributeTabLoaded=!1,isFirstRequest=!1,selectedUsers=[],selectedRecords=[],selectedUsersArrayPushPopAllowed=!0,gridUserData=[],users=[],singleUserRemove=!1,SelectedUserIdList=[],isSafari=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"),needPush=!0,isFreshLoad=!0,isIsolationCodeUpdated=!1,validateInterval=1e3,previousIndex=[],previousIndexUserId=[];function fnCreate(){$("#checkbox-header").change(headCheckboxOnChange)}function pushUrl(e){needPush&&(isFreshLoad?(history.replaceState(e,null,window.location.pathname+"?tab="+e),isFreshLoad=!1):history.pushState(e,null,window.location.pathname+"?tab="+e))}function fnOnApplicationGridLoad(){isFirstRequest=!0;var e=$("#search-tenants").val().trim();0<this.properties.query.params.length&&(this.properties.query.params=[]),this.properties.query.params.push({key:"searchKey",value:e})}function fnApplicationRowSelected(){document.getElementById("tenants_grid").ej2_instances[0].getSelectedRecords()}function fnApplicationRecordClick(e){e=e.row.find(".application-grid-chkbx");e.prop("checked",!e.prop("checked"))}function fnOnApplicationGridActionBegin(e){isFirstRequest=!0;var t=$("#search-tenants").val().trim();0<this.properties.query.params.length&&(this.properties.query.params=[]),this.properties.query.params.push({key:"searchKey",value:t})}function fnOnUserGridActionBegin(e){isFirstRequest=!0;var t=$("#search-app-users").val();0<this.properties.query.params.length&&(this.properties.query.params=[]),this.properties.query.params.push({key:"searchKey",value:t})}function fnOnAddUserGridActionBegin(e){isFirstRequest=!0;var t=$("#add-user-search").val();0<this.properties.query.params.length&&(this.properties.query.params=[]),this.properties.query.params.push({key:"searchKey",value:t})}function fnOnApplicationGridActionComplete(e){$('[data-toggle="tooltip"]').tooltip({container:"body"}),null!=this.properties.pageSettings.totalRecordsCount?$("#application-count").text(this.properties.pageSettings.totalRecordsCount):$("#application-count").text(0),$("#application-list-container").is(":visible")&&"?action=create-new-site"===(query=window.location.search.toString())&&$("#add-tenant").trigger("click")}function fnOnUserGridActionComplete(e){$('[data-toggle="tooltip"]').tooltip();var t=document.getElementById("users_grid").ej2_instances[0];if(("paging"==e.requestType||"sorting"==e.requestType)&&void 0!==t.currentViewData)for(var n=0;n<t.currentViewData.length;n++){var i=t.currentViewData[n];-1!=jQuery.inArray(JSON.stringify(i.UserId),$.map(selectedUsers,JSON.stringify))&&(selectedUsersArrayPushPopAllowed=!1,t.selectRows(n))}"refresh"!=e.requestType&&"filtering"!=e.requestType||(selectedUsers=[]),0!=t.getSelectedRecords().length?$("#remove-users-button").removeClass("hide").addClass("show"):$("#remove-users-button").removeClass("show").addClass("hide")}function rowBound(){isFirstRequest=isFirstRequest&&!1}function getAppUsers(){var e=$("meta[name='ump-app-users-link']").attr("content")+$("#application-id").val(),e=new ejs.data.DataManager({url:e,adaptor:new ejs.data.UrlAdaptor});new ejs.grids.Grid({dataSource:e,gridLines:"None",allowPaging:!0,allowSorting:!0,allowSelection:!0,selectionSettings:{type:"Multiple",mode:"Row"},pageSettings:{pageSize:20},rowSelecting:function(e){this.multiSelectCtrlRequest=!0},enableHover:!0,enableAltRow:!1,rowDataBound:function(e){null!=$(".e-gridcontent").height()&&rowBound(),e.row.querySelector(".revoke-access").firstChild.style.visibility="hidden",e.row.addEventListener("mouseenter",function(e){e.target.querySelector(".revoke-access").firstChild.style.visibility="visible"}),e.row.addEventListener("mouseleave",function(e){e.target.querySelector(".revoke-access").firstChild.style.visibility="hidden"})},dataBound:function(e){$('[data-toggle="tooltip"]').tooltip({container:"body"})},load:fnOnUserGridActionBegin,actionBegin:fnOnUserGridActionBegin,actionComplete:fnOnUserGridActionComplete,rowSelected:onUserRecordSelect,rowDeselected:onUserRecordSelect,columns:[{allowFiltering:!1,template:"#user-profile-template",width:115,headerTemplate:"#username-header",field:"DisplayName",type:"string"},{field:"Username",allowFiltering:!1,template:"#user-username-template",headerTemplate:"#user-username-header",type:"string",width:120},{field:"Email",allowFiltering:!1,template:"#user-email-template",headerTemplate:"#email-header",type:"string",width:135},{field:"Activation Method",allowFiltering:!1,template:"#activation-method-template",headerTemplate:"#activation-method-header",type:"string",width:135},{field:"UserStatus",allowFiltering:!1,allowSorting:!1,template:"#user-status-template",headerTemplate:"#status-header",type:"string",width:50},{template:!0,template:"#commandstemplate",allowSorting:!1,allowFiltering:!1,headerTemplate:"#actionsheader",width:80,customAttributes:{class:"revoke-access"}}]}).appendTo("#users_grid")}function getAttributes(){var t=new ej.popups.Tooltip({target:".grid-content",position:"TopCenter",beforeRender:function(e){t.content=e.target.closest("td").innerText}},"#grid-tooltip");new ejs.grids.Grid({dataSource:window.siteAttributes,gridLines:"None",allowSorting:!0,allowSearching:!1,allowPaging:!0,allowSelection:!0,allowFiltering:!1,pageSettings:{pageSize:10},enableHover:!0,enableAltRow:!1,created:initialSiteGridCreate,dataBound:function(e){},columns:[{field:"Name",template:"#attribute-name-template",headerText:window.Server.App.LocalizationContent.Name,width:40,allowSorting:!0,allowFiltering:!0},{field:"Value",template:"#attribute-value-template",headerText:window.Server.App.LocalizationContent.Value,width:60,allowSorting:!0,allowFiltering:!0},{field:"Description",template:"#attribute-description-template",headerText:window.Server.App.LocalizationContent.Description,width:50,allowSorting:!0,allowFiltering:!0},{field:"ModifiedDateString",headerText:window.Server.App.LocalizationContent.LastModified,width:40,allowSorting:!0,allowFiltering:!1},{field:"Options",headerText:"",template:"#options",width:20,allowSorting:!1,allowFiltering:!1}]}).appendTo("#SiteAttributesGrid"),$.ajax({type:"GET",url:siteAttributesUrl,data:{tenantInfoId:tenantInfoId},success:function(e){e.Status&&(document.getElementById("SiteAttributesGrid").ej2_instances[0].dataSource=e.Attributes),hideWaitingPopup("SiteAttributesGrid")}})}function getUsersWithoutAccess(){var e=$("meta[name='add-ump-app-users-link']").attr("content")+$("#application-id").val(),e=new ejs.data.DataManager({url:e,adaptor:new ejs.data.UrlAdaptor});null==document.getElementById("add_users_grid").ej2_instances?new ejs.grids.Grid({dataSource:e,gridLines:"None",allowPaging:!0,allowSorting:!0,enableAltRow:!1,allowSearching:!0,allowSelection:!0,allowFiltering:!1,pageSettings:{pageSize:20},selectionSettings:{type:"Multiple"},enableHover:!0,created:fnCreate,load:fnOnAddUserGridActionBegin,actionBegin:fnOnAddUserGridActionBegin,actionComplete:fnOnAddUserGridActionComplete,rowDataBound:function(){null!=$(".e-gridcontent").height()&&rowBound()},dataBound:function(e){$('[data-toggle="tooltip"]').tooltip({container:"body"})},columns:[{headerTemplate:"#checkbox-header-template",template:"#checkbox-row-template",width:15,allowFiltering:!1},{allowFiltering:!1,template:"#user-name-template",width:115,headerTemplate:"#user-name-header",field:"DisplayName",type:"string"},{allowFiltering:!1,field:"Email",template:"#email-template",headerTemplate:"#user-email-header",type:"string",width:155}]}).appendTo("#add_users_grid"):document.getElementById("add_users_grid").ej2_instances[0].dataSource=e}function enableAccessButton(){$(".provide-access-button").attr("disabled",0==selectedUsers.length)}function fnOnAddUserGridActionComplete(e){var t=document.getElementById("add_users_grid").ej2_instances[0],n=$("#checkbox-header");if(n.prop("disabled",!0).change(headCheckboxOnChange),t.multiSelectCtrlRequest=!0,t.clearSelection(),"paging"===e.requestType||"sorting"===e.requestType){if(void 0!==t.currentViewData)for(var i=0;i<t.currentViewData.length;i++){var a=t.currentViewData[i],s=a.UserId;-1!=jQuery.inArray(JSON.stringify(a.UserId),$.map(selectedUsers,JSON.stringify))&&(a=$($("#add_users_grid .checkbox-row[data-checked-id='"+s+"']").closest("td").parent()).index(),$("#add_users_grid .checkbox-row#row-check"+s).prop("checked",!0),t.selectionModule.selectRow(a))}n.attr("disabled",0==t.currentViewData.length)}"refresh"!=e.requestType&&"filtering"!=e.requestType||(selectedUsers=[],n.attr("disabled",0==t.currentViewData.length)),"paging"!==e.requestType&&"sorting"!==e.requestType&&"refresh"!==e.requestType&&"filtering"!==e.requestType||(t.selectionModule.selectedRecords.length==t.currentViewData.length?n.prop("checked",!0):n.prop("checked",!1)),enableAccessButton(),$('[data-toggle="tooltip"]').tooltip()}function onAddUsersDialogOpen(){$(".provide-access-button").attr("disabled","diasabled"),selectedUsers=[],getUsersWithoutAccess()}function onAddUsersDialogClose(){var e=document.getElementById("add_users_grid").ej2_instances[0];e.clearSelection(),selectedUsers=[],$("#add-user-search").val(""),$("#add-user-clear-search").css("display","none"),$(".search-icon").css("display","block"),$(".checkbox-header").prop("checked",!1),$(".checkbox-row").prop("checked",!1),e.pageSettings.currentPage=1,e.refresh(),document.getElementById("grant-users-access-dialog").ej2_instances[0].hide()}function refreshTemplate(){$("#checkbox-header").change(headCheckboxOnChange)}function headCheckboxOnChange(){var e=document.getElementById("add_users_grid").ej2_instances[0];if(gridUserData=e.currentViewData,1==$("#checkbox-header").prop("checked")){$(".checkbox-row").prop("checked",!0),e.multiSelectCtrlRequest=!0,e.selectRowsByRange(0,$(".checkbox-row").length);for(var t=0;t<gridUserData.length;t++)-1==(n=jQuery.inArray(JSON.stringify(gridUserData[t].UserId),$.map(selectedUsers,JSON.stringify)))&&selectedUsers.push(gridUserData[t].UserId);isSafari&&$(".checkbox-header-label").addClass("check")}else{$(".checkbox-row").prop("checked",!1),e.clearSelection();for(var n,t=0;t<gridUserData.length;t++)-1!=(n=jQuery.inArray(JSON.stringify(gridUserData[t].UserId),$.map(selectedUsers,JSON.stringify)))&&selectedUsers.splice(n,1);isSafari&&$(".checkbox-header-label").removeClass("check")}enableAccessButton()}function provideAccesstoUsers(){var e=$("meta[name='provide-app-access-link']").attr("content")+$("#application-id").val();0<selectedUsers.length&&($("#grant-users-access-dialog").children(".e-spinner-pane").addClass("e-spin-show").addClass("e-spinner-bg").removeClass("e-spin-hide"),$.ajax({type:"POST",data:{selectedUsers:selectedUsers},url:e,success:function(e){var t;$("#grant-users-access-dialog").children(".e-spinner-pane").removeClass("e-spin-show").removeClass("e-spinner-bg").addClass("e-spin-hide"),$(".provide-access-button").attr("disabled","disabled"),document.getElementById("users_grid").ej2_instances[0].refresh(),onAddUsersDialogClose(),e.status?(t=window.Server.App.LocalizationContent.GrantedAccessTo.format(e.count),SuccessAlert(window.Server.App.LocalizationContent.GrantSiteAccess,t,7e3)):WarningAlert(window.Server.App.LocalizationContent.GrantSiteAccess,window.Server.App.LocalizationContent.GrantSiteAccessError,e.Message,7e3)}}))}function onUserRemoveDialogClose(){document.getElementById("user-remove-confirmation-dialog").ej2_instances[0].hide()}function removeConfirm(){var e;removeUserAccess(users=singleUserRemove?singleUserSelectedId:(e=document.getElementById("users_grid").ej2_instances[0],selectedRecords=e.getSelectedRecords(),jQuery.each(selectedRecords,function(e,t){selectedUsers.push(t.UserId)}),selectedUsers))}function removeUserAccess(n){var e=$("meta[name='remove-app-access-link']").attr("content")+$("#application-id").val();0<n.length&&(showWaitingPopup("user-remove-confirmation-dialog"),$.ajax({type:"POST",data:{selectedUsers:n},url:e,success:function(e){hideWaitingPopup("user-remove-confirmation-dialog");var t=document.getElementById("users_grid").ej2_instances[0];t.clearSelection(),t.pageSettings.currentPage=getCurrentPageNumber(t.pageSettings.pageSize,selectedUsers.length,t.pageSettings.totalRecordsCount,t.pageSettings.currentPage),selectedUsers=[],t.refresh(),$("#remove-users-button").removeClass("show").addClass("hide"),document.getElementById("user-remove-confirmation-dialog").ej2_instances[0].hide(),e.status?(t=window.Server.App.LocalizationContent.RevokedAccessFor.format(e.count),SuccessAlert(window.Server.App.LocalizationContent.RevokeSiteAccess,t,7e3)):(e.status,""===e.errormessage?WarningAlert(window.Server.App.LocalizationContent.RevokeSiteAccess,window.Server.App.LocalizationContent.RevokeSiteAccessError,e.Message,7e3):WarningAlert(window.Server.App.LocalizationContent.RevokeSiteAccess,window.Server.App.LocalizationContent.RevokeSiteAccessForAdminError,null,7e3)),singleUserRemove=!1,n=[]}}))}function onUserRecordSelect(e){var t=document.getElementById("users_grid").ej2_instances[0];selectedRecords=t.getSelectedRecords(),selectedUsersArrayPushPopAllowed=!0,1<=selectedRecords.length?$("#remove-users-button").removeClass("hide").addClass("show"):$("#remove-users-button").addClass("hide").removeClass("show")}function updateTenantStatus(e,t,n){showWaitingPopup("messageBox");var i="suspend"===n?window.Server.App.LocalizationContent.Suspend:"delete"===n?window.Server.App.LocalizationContent.Delete:window.Server.App.LocalizationContent.Activate,a=$("#delete-database-checkbox").is(":checked"),s={},s="delete"===n?{tenantId:t,isDeleteDatabase:a}:{tenantId:t};$.ajax({type:"POST",url:e,data:s,success:function(e){e.Success?"suspend"===n?SuccessAlert(i+" "+window.Server.App.LocalizationContent.SiteLetter,window.Server.App.LocalizationContent.SiteSuspendSuccess,7e3):"delete"===n?e.Value?SuccessAlert(i+" "+window.Server.App.LocalizationContent.SiteLetter,window.Server.App.LocalizationContent.SiteDeleteSuccess,7e3):SuccessAlert(i+" "+window.Server.App.LocalizationContent.SiteLetter,window.Server.App.LocalizationContent.SiteDeleteSuccesswithoutdatabase,7e3):"activate"===n&&SuccessAlert(i+" "+window.Server.App.LocalizationContent.SiteLetter,window.Server.App.LocalizationContent.SiteActivatedSuccess,7e3):WarningAlert(i+" "+window.Server.App.LocalizationContent.SiteLetter,window.Server.App.LocalizationContent.SuspendOrDeleteSiteFailed.format(n),e.Message,7e3),document.getElementById("tenants_grid").ej2_instances[0].refresh()},complete:function(){hideWaitingPopup("messageBox"),onCloseMessageBox()}})}function enableIsolationCode(){isolationCode=isIsolationCodeUpdated?$("#isolation-code").val().trim():isolationCode;var e=$("#isolation-enable-switch").is(":checked");e?($("#isolation-code").removeAttr("disabled"),$("#isolation-code").focus()):($("#isolation-code").attr("disabled","disabled"),$("#isolation-code").val(isolationCode),$("#isolation-code-validation").html(""),$("#isolation-code").removeClass("has-error"),isIsolationCodeUpdated=!1),""==$("#isolation-code").val()&&e?($("#update-isolation-code").attr("disabled",!0),$("#isolation-code-validation").html(window.Server.App.LocalizationContent.IsolationCodeValidator)):e&&ValidateIsolationCode($("#isolation-code").val(),"#isolation-code")&&($("#isolation-code-validation").html(""),$("#update-isolation-code").attr("disabled",!1))}$(document).ready(function(){addPlacehoder("#grant-users-access-dialog"),addPlacehoder("#search-area"),addPlacehoder("#search-app-admins"),addPlacehoder("#add-admin-search"),addPlacehoder("#add-user-search-area"),$("[data-toggle='tooltip']").tooltip(),createWaitingPopup("user-remove-confirmation-dialog"),createWaitingPopup("add-tenant-popup"),createWaitingPopup("grant-users-access-dialog"),toggleInputFields(),updateInfoMessage();var e=$("#isolation-switch-container");e.length&&e.on("click",function(){enableIsolationCode()}),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.GrantAccessToUsers+" - "+tenantName,content:document.getElementById("grant-users-access-dialog-content"),showCloseIcon:!0,buttons:[{click:onAddUsersDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.CancelButton,cssClass:"cancel-button"}},{click:provideAccesstoUsers,buttonModel:{content:window.Server.App.LocalizationContent.GrantSiteAccessButton,isPrimary:!0,cssClass:"provide-access-button"}}],width:"900px",height:"539px",isModal:!0,visible:!1,closeOnEscape:!0,animationSettings:{effect:"Zoom"},close:onAddUsersDialogClose}).appendTo("#grant-users-access-dialog"),$("#add-users-button").on("click",function(){document.getElementById("users_grid").ej2_instances[0].clearSelection(),$("#remove-users-button").addClass("hide").removeClass("show"),document.getElementById("grant-users-access-dialog").ej2_instances[0].show(),onAddUsersDialogOpen()}),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.RevokeAccess,content:document.getElementById("user-remove-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:removeConfirm,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onUserRemoveDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.CancelButton,cssClass:"cancel-button"}}],width:"472px",height:"auto",isModal:!0,visible:!1,closeOnEscape:!0,animationSettings:{effect:"Zoom"},close:"onUserRemoveDialogClose"}).appendTo("#user-remove-confirmation-dialog");new ej.popups.Dialog({width:$(window).width(),height:$(window).height(),isModal:!1,enableResize:!1,visible:!1,closeOnEscape:!0}).appendTo("#add-tenant-popup"),initializeEj2CheckBox("all-settings"),initializeEj2CheckBox("date-and-time"),initializeEj2CheckBox("look-and-feel"),initializeEj2CheckBox("branding"),initializeEj2CheckBox("email"),initializeEj2CheckBox("account"),initializeEj2CheckBox("language");e=window.location.search;e.includes("?tab=general")?$('a[href="#application-tab"]').tab("show"):e.includes("?tab=users")&&isActiveSite?(isUserTabLoaded||(getAppUsers(),isUserTabLoaded=!0),$('a[href="#users-tab"]').tab("show")):e.includes("?tab=isolation-code")&&isActiveSite?($('a[href="#data-security-tab"]').tab("show"),enableIsolationCode()):(e.includes("?tab=attributes")&&isActiveSite?(isAttributeTabLoaded||(getAttributes(),isAttributeTabLoaded=!0),$('a[href="#custom-attribute-tab"]')):e.includes("?tab=site-settings")&&isActiveSite?$('a[href="#site-settings-tab"]'):e.includes("?tab=ai-service")&&isActiveSite?$('a[href="#ai-serviceKey-tab"]'):e.includes("?tab=resource-limitation")&&isActiveSite?$('a[href="#resource-limitation-tab"]'):(isFreshLoad=!1,$('a[href="#application-tab"]'))).tab("show"),window.addEventListener("popstate",function(e){needPush=!1;e=e.state;("general"===e?($("#application a").attr("href","#application-tab"),$('a[href="#application-tab"]')):"users"===e&&isActiveSite?($("#users a").attr("href","#users-tab"),$('a[href="#users-tab"]')):"isolation-code"===e&&isActiveSite?($("#data-security a").attr("href","#data-security-tab"),$('a[href="#data-security-tab"]')):"ai-service"===e&&isActiveSite?($("#data-security a").attr("href","#ai-serviceKey-tab"),$('a[href="#ai-serviceKey-tab"]')):"resource-limitation"===e&&isActiveSite?($("#data-security a").attr("href","#resource-limitation-tab"),$('a[href="#resource-limitation-tab"]')):"attributes"===e&&isActiveSite?($("#custom-attribute a").attr("href","#custom-attribute-tab"),$('a[href="#custom-attribute-tab"]')):"site-settings"===e&&isActiveSite?($("#site-settings a").attr("href","#site-settings-tab"),$('a[href="#site-settings-tab"]')):($("#application a").attr("href","#application-tab"),$('a[href="#application-tab"]'))).tab("show")}),$(document).on("click","input#add-user",function(){var t,n,e=$("#firstname").val().trim(),i=$("#username").val().trim().toLowerCase(),a=$("#new-password").val(),s=$("#mailid").val().trim(),r=$("#myId").val(),o=$("#dialog-container").valid();$(".popover").hide(),o?($(".useradd-validation-messages").css("display","none"),t=document.getElementById("users_grid").ej2_instances[0],showWaitingPopup("user-add-dialog"),n={UserName:i,Email:s,FirstName:e,LastName:$("#lastname").val().trim(),Password:a},$.ajax({type:"POST",url:isPresentUserNameAndEmailId,data:{userName:i,emailId:s.toLowerCase()},success:function(e){e.IsUserNameExist||e.IsEmailExist?(e.IsUserNameExist&&($("#username").closest("div").addClass("has-error"),$("#invalid-username").html(window.Server.App.LocalizationContent.UsernameExists).css("display","block"),$(".useradd-validation-messages").css("display","block"),hideWaitingPopup("user-add-dialog")),e.IsEmailExist&&($("#mailid").closest("div").addClass("has-error"),$("#invalid-email").html(window.Server.App.LocalizationContent.EmailAddressExists).css("display","block"),$(".useradd-validation-messages").css("display","block"),hideWaitingPopup("user-add-dialog"))):$.ajax({type:"POST",url:addUserUrl,data:{userDetail:n,tenantInfoId:r},success:function(e){e.Data?(hideWaitingPopup("user-add-dialog"),$("#add-user").attr("disabled","disabled"),$("#create-new-user").removeClass("hide").addClass("show"),$(".form input[type='text']").val(""),onUserAddDialogClose(),$.ajax({type:"POST",url:checkMailSettingUrl,success:function(e){0==e.activation?SuccessAlert(window.Server.App.LocalizationContent.AddUser,window.Server.App.LocalizationContent.UserAddedActivated,7e3):e.result&&1==e.activation?SuccessAlert(window.Server.App.LocalizationContent.AddUser,window.Server.App.LocalizationContent.UserAdded,7e3):e.result||1!=e.isAdmin||1!=e.activation||WarningAlert(window.Server.App.LocalizationContent.AddUser,window.Server.App.LocalizationContent.UserActivationEmailCannotSent,null,7e3),t.refresh()}})):(onUserAddDialogClose(),WarningAlert(window.Server.App.LocalizationContent.AddUser,window.Server.App.LocalizationContent.InternalServerErrorTryAgain,e.Message,7e3),t.refresh())}})}})):$(".useradd-validation-messages").css("display","block")})}),$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(e){var t,e=$(e.target).attr("href");-1!==e.indexOf("#application-tab")?t="general":-1!==e.indexOf("#users-tab")?(t="users",isUserTabLoaded||(getAppUsers(),isUserTabLoaded=!0)):-1!==e.indexOf("#data-security-tab")?t="isolation-code":-1!==e.indexOf("#ai-serviceKey-tab")?t="ai-service":-1!==e.indexOf("#resource-limitation-tab")?t="resource-limitation":-1!==e.indexOf("#custom-attribute-tab")?(t="attributes",isAttributeTabLoaded||(getAttributes(),isAttributeTabLoaded=!0)):-1!==e.indexOf("#site-settings-tab")&&(t="site-settings"),pushUrl(t),needPush=!0}),$(document).on("click",".search-application",function(){var e=document.getElementById("tenants_grid").ej2_instances[0];e.pageSettings.currentPage=1,e.refresh()}),$(document).on("change",".checkbox-row",function(e){var t=document.getElementById("add_users_grid").ej2_instances[0],n=$(".checkbox-row").index(this),a=$("#checkbox-header"),s=$(this).is(":checked"),r=$(this).attr("data-checked-id"),o=(s?(t.multiSelectCtrlRequest=!0,selectedUsers.push(r),previousIndex.push(n),t.selectionModule.selectRows(previousIndex,n)):(s=selectedUsers.indexOf(r),r=previousIndex.indexOf(n),selectedUsers.splice(s,1),previousIndex.splice(r,1),t.selectionModule.selectRows(previousIndex)),gridAdminData=t.currentViewData,0);for(i=0;i<=gridAdminData.length-1;i++)1==$($("#add_users_grid .checkbox-row")[i]).is(":checked")&&(o+=1);null!=t.getRows()&&a.prop("checked",gridAdminData.length===o),enableAccessButton()}),$(document).on("click",".delete-permission",function(e){e.preventDefault(),singleUserSelectedId=$(this).attr("data-user-id"),document.getElementById("user-remove-confirmation-dialog").ej2_instances[0].show(),singleUserRemove=!0}),$(document).on("click","#remove-users-button",function(){document.getElementById("user-remove-confirmation-dialog").ej2_instances[0].show()}),$(document).on("click","#application-clientid",function(){$("#application-clientid").select()}),$(document).on("click","#application-accesstoken",function(){$("#application-accesstoken").select()}),$(document).on("click","#add-tenant",function(){$("#add-tenant-iframe").attr("src",addTenantUrl+"?actionType=create&tenantId="),document.getElementById("add-tenant-popup").ej2_instances[0].show(),showWaitingPopup("add-tenant-popup")}),$(document).on("click",".tenant-action",function(e){var t=$(this).attr("data-action").trim(),n=$(this).attr("data-tenant-id").trim(),i=$(this).attr("data-tenant-name").trim(),a=$(this).attr("data-tenant-type").trim(),s="Are you sure you want "+t+" site - <span class='tenant-name'>"+i+"</span> ?";"activate"===t?(headerIcon="tick",headerText=window.Server.App.LocalizationContent.Activate,actionUrl=activateTenantUrl):"suspend"===t?(headerIcon="suspend",headerText=window.Server.App.LocalizationContent.Suspend,actionUrl=suspendTenantUrl):"edit"===t?($("#add-tenant-iframe").attr("src",addTenantUrl+"?actionType="+t+"&tenantId="+n),document.getElementById("add-tenant-popup").ej2_instances[0].show(),showWaitingPopup("add-tenant-popup")):"delete"===t?(headerIcon="delete",headerText=window.Server.App.LocalizationContent.Delete,actionUrl=deleteTenantUrl,s+="<br/><br/><div><span><input type='checkbox' class='material-checkbox' id='delete-database-checkbox' /><input id='delete-database-checkbox' type='hidden'/><label for='delete-database-checkbox' class='label-database'>"+window.Server.App.LocalizationContent.DeleteDatabase+"</label></span ></div><div class='tenant-delete-warning'> <span>"+window.Server.App.LocalizationContent.Warning+":</span><div class = 'warning-content'> "+window.Server.App.LocalizationContent.DeleteAllResourceWithoutDataBase+"</div></div>"):"make-master"===t&&(UpdateTenantId=n,onMasterDialogOpen(i,a)),"edit"!==t&&"make-master"!==t&&messageBox("su-"+headerIcon,headerText+" "+window.Server.App.LocalizationContent.SiteLetter,s,"error",function(){updateTenantStatus(actionUrl,n,t)})}),$(document).on("change","#delete-database-checkbox",function(){$(this).is(":checked")?$(".warning-content").html(window.Server.App.LocalizationContent.DeleteAllResource):$(".warning-content").html(window.Server.App.LocalizationContent.DeleteAllResourceWithoutDataBase)});var inputFields=["#dashboards-limitation-textbox","#schedule-limitation-textbox","#data-source-limitation-textbox","#slideshow-limitation-textbox"];function validateIntegerInput(e,t){var n=$(e).val().trim();return""===n||null===n||/^\d+$/.test(n)?($(t).html("").hide(),$(e).removeClass("has-error"),$("#update-resource-limitation").prop("disabled",!1),!0):($(t).html(window.Server.App.LocalizationContent.ResourceLimitationValidator).show(),$("#update-resource-limitation").prop("disabled",!0),$(e).addClass("has-error"),!1)}function toggleInputFields(){var n=$("#resource-limitation-enable-switch").is(":checked");inputFields.forEach(function(e){var t=$(e).val(),t=t?t.trim():"";n?$(e).removeAttr("disabled"):($(e).attr("disabled","disabled").val(""),$(e).removeClass("has-error"),$(e).siblings(".validation-message").html("").hide(),$(e).val(t))})}function updateInfoMessage(){var e=$("#resource-limitation-enable-switch").is(":checked"),t=document.getElementById("tenant-info-message");null!=t&&(t.textContent=e?window.Server.App.LocalizationContent.ResourceEnabledInfoMessage:window.Server.App.LocalizationContent.ResourceDisabledInfoMessage)}function validateCode(){ValidateIsolationCode($("#isolation-code").val(),"#isolation-code")}function initializeEj2CheckBox(e){new ejs.buttons.CheckBox({created:onCreateGlobalSettings,cssClass:"e-check-box",change:onChangeGlobalSettings}).appendTo("#"+e)}function onCreateGlobalSettings(){"all-settings"==this.element.id&&"indeterminate"==$("."+this.cssClass).find("#"+this.element.id).attr("indeterminate")?this.indeterminate=!0:(this.checked="checked"==$("."+this.cssClass).find("#"+this.element.id).attr("checked"),this.value=$("."+this.cssClass).find("#"+this.element.id).attr("value"))}function changeIndeterminateState(){var e=0,t=0;$(".enable-disable").each(function(){"all-settings"!=this.id&&(document.getElementById(this.id).ej2_instances[0].checked?e++:t++)}),0<e&&0<t?document.getElementById("all-settings").ej2_instances[0].indeterminate=!0:0<e&&0==t?(document.getElementById("all-settings").ej2_instances[0].indeterminate=!1,document.getElementById("all-settings").ej2_instances[0].checked=!0):(document.getElementById("all-settings").ej2_instances[0].indeterminate=!1,document.getElementById("all-settings").ej2_instances[0].checked=!1)}function onChangeGlobalSettings(e){document.getElementById("all-settings").ej2_instances[0].indeterminate=!1,"all-settings"==this.element.id&&e.checked?$(".enable-disable").each(function(){document.getElementById(this.id).ej2_instances[0].checked=!0}):"all-settings"!=this.element.id||e.checked?changeIndeterminateState():(document.getElementById("all-settings").ej2_instances[0].indeterminate=!1,$(".enable-disable").each(function(){document.getElementById(this.id).ej2_instances[0].checked=!1}))}$("input[type='text']").on("input",function(){validateIntegerInput(this,$(this).siblings(".validation-message"))}),$("#resource-limitation-enable-switch").change(function(){toggleInputFields(),updateInfoMessage()}),$("#update-resource-limitation").on("click",function(){var n=!0,e=$("#resource-limitation-enable-switch").is(":checked"),t=$("#resource-limitation-enable-switch").attr("data-tenant-id");e&&(n=!1,inputFields.forEach(function(e){var t=$(e).siblings(".validation-message");n=validateIntegerInput(e,t)})),n&&(e={isEnabled:e,dashboardsLimitation:$("#dashboards-limitation-textbox").val()?$("#dashboards-limitation-textbox").val().trim():"",scheduleLimitation:$("#schedule-limitation-textbox").val()?$("#schedule-limitation-textbox").val().trim():"",dataSourcesLimitation:$("#data-source-limitation-textbox").val()?$("#data-source-limitation-textbox").val().trim():"",slideShowLimitation:$("#slideshow-limitation-textbox").val()?$("#slideshow-limitation-textbox").val().trim():""},showWaitingPopup("content-area"),$.ajax({type:"POST",data:{tenantInfoId:t,resourceLimitationSettings:JSON.stringify(e)},url:updateResourceLimitationUrl,success:function(e){e.Status?SuccessAlert(window.Server.App.LocalizationContent.SiteSettings,window.Server.App.LocalizationContent.ResourceLimitationSuccess,7e3):WarningAlert(window.Server.App.LocalizationContent.SiteSettings,window.Server.App.LocalizationContent.ResourceLimitationFailed,7e3),hideWaitingPopup("content-area")}}))}),$(document).on("click","#update-enable-aiservice",function(){var t=$("#aiservice-enable-switch").is(":checked"),e=$("#aiservice-enable-switch").attr("data-tenant-id");showWaitingPopup("content-area"),$.ajax({type:"POST",data:{tenantInfoId:e,isAIServiceEnabled:t},url:addIsAIServiceKeyEnableUrl,success:function(e){e.Status?t?SuccessAlert(window.Server.App.LocalizationContent.SiteSettings,window.Server.App.LocalizationContent.AiServiceEnabledSuccess,7e3):SuccessAlert(window.Server.App.LocalizationContent.SiteSettings,window.Server.App.LocalizationContent.AiServiceDisabledSuccess,7e3):t?WarningAlert(window.Server.App.LocalizationContent.SiteSettings,window.Server.App.LocalizationContent.AiServiceKeyError,7e3):WarningAlert(window.Server.App.LocalizationContent.SiteSettings,window.Server.App.LocalizationContent.AiServiceDisableError,7e3),hideWaitingPopup("content-area")}})}),$(document).on("click","#update-tenant-settings",function(){var e=[];$(".enable-disable").each(function(){"all-settings"!=this.id&&document.getElementById(this.id).ej2_instances[0].checked&&e.push(document.getElementById(this.id).ej2_instances[0].value)}),showWaitingPopup("content-area"),$.ajax({type:"POST",data:{tenantInfoId:tenantInfoId,globalSettingsOptions:e},url:updateTenantSettingsUrl,success:function(e){e.Status?SuccessAlert(window.Server.App.LocalizationContent.SiteSettings,window.Server.App.LocalizationContent.SiteSettingsSucess,7e3):WarningAlert(window.Server.App.LocalizationContent.SiteSettings,window.Server.App.LocalizationContent.SiteSettingsError,7e3),hideWaitingPopup("content-area")}})}),$(document).on("click","#update-isolation-code",function(e){var t=$("#isolation-code").val().trim(),n=$(".isolation-code-value").attr("data-tenant-id"),i=$("#isolation-enable-switch").is(":checked");showWaitingPopup("content-area"),$.ajax({type:"POST",data:{tenantInfoId:n,isolationCode:t,isIsolationCodeEnabled:i},url:updateIsolationCodeUrl,success:function(e){e.Status?(isIsolationCodeUpdated=!0,SuccessAlert(window.Server.App.LocalizationContent.IsolationCode,window.Server.App.LocalizationContent.IsolationCodeSucess,7e3)):WarningAlert(window.Server.App.LocalizationContent.IsolationCode,window.Server.App.LocalizationContent.IsolationCodeError,e.Message,7e3),hideWaitingPopup("content-area")}})}),$(document).on("keyup","#isolation-code",function(e){clearTimeout(validateTimer),validateTimer=setTimeout(validateCode,validateInterval)}),$(document).on("keydown","#isolation-code",function(e){clearTimeout(validateTimer)}),$(document).on("click","#data-security",function(e){enableIsolationCode()}),$(document).on("click","#new-user-button",function(){document.getElementById("users_grid").ej2_instances[0].clearSelection()}),$(document).on("click","#edit-site-attribute",function(){event.preventDefault(),editCustomAttribute(this)}),$(document).on("click","#remove-site-attribute",function(){event.preventDefault(),deleteConfirmation(this)}),$(document).on("click","#add-custom-attribute",function(){openCustomAttributeDialog()});var editCustomAttributeId,currentIndex,isCustomAttributeBinded=!1,isAttributeEdit=!1,customAttributeInfo="",addSiteAttribute=[],siteCreation=!1,customAttributeId=0;function isAttributeExist(){return!$("#custom-attribute-name").hasClass("e-error")}function openCustomAttributeDialog(e,t){var n,i,a;isCustomAttributeBinded?((a=document.getElementById("custom-attribute-dialog").ej2_instances)[0].buttons=[{click:onCloseCustomAttribute,buttonModel:{content:window.Server.App.LocalizationContent.CancelButton}},{click:saveAttribute,buttonModel:{isPrimary:!0,content:window.Server.App.LocalizationContent.SaveButton}}],a[0].show()):((n=document.createElement("div")).setAttribute("id","custom-attribute-dialog"),"addtenant"==t?(i=document.getElementById("popup-container"),siteCreation=!0):i=document.getElementById("content-area"),i.appendChild(n),$("#custom-attribute-dialog").css("height",$("#popup-container").height()),(a=new ejs.popups.Dialog({header:'<div class="dlg-title">'+window.Server.App.LocalizationContent.AddCustomAttribute+"</div>",content:document.getElementById("custom-attribute-content"),buttons:[{click:onCloseCustomAttribute,buttonModel:{content:window.Server.App.LocalizationContent.CancelButton}},{click:saveAttribute,buttonModel:{isPrimary:!0,content:window.Server.App.LocalizationContent.SaveButton}}],animationSettings:{effect:"Zoom"},beforeOpen:showCustomAttribute,beforeClose:beforeCloseAttributeDialog,close:onCloseCustomAttribute,width:"514px",height:"474px",showCloseIcon:!0,isModal:!0})).appendTo(n),isCustomAttributeBinded=!0),isAttributeEdit&&setTimeout(function(){showSavedAttributes()},200),createWaitingPopup("custom-attribute-dialog")}function saveAttribute(){var e="undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl;if($("#custom-attribute-form").valid()&&!$("#custom-attribute-name").hasClass("e-error"))if(isAttributeEdit){if(0!=addSiteAttribute.length)for(var t=document.getElementById("AddSiteAttributesGrid").ej2_instances[0],n=$("#custom-attribute-name").val().trim(),i=0;i<t.dataSource.length;i++)t.dataSource[i].Name.toLowerCase()==n.toLowerCase()&&t.dataSource[i].CustomAttributeId!=editCustomAttributeId&&($("#custom-attribute-name").closest("div").addClass("e-error"),$("#custom-attribute-name").closest(".e-outline").addClass("e-error"),$("#custom-attribute-name").closest(".e-outline").siblings(".custom-attr-validation-errors").html(window.Server.App.LocalizationContent.IsAttributeNameExist)),t.dataSource[i].CustomAttributeId==editCustomAttributeId&&(currentIndex=i);$("#custom-attribute-name").closest("div").hasClass("e-error")||updateCustomAttribute(customAttributeInfo.Id)}else saveCustomAttribute();(e?document.getElementById("UsersAttributesGrid"):siteCreation?document.getElementById("AddSiteAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0].clearSelection()}function onCloseCustomAttribute(){$("#custom-attribute-form").find("div.validation-errors").html(""),$("#custom-attribute-form").find("div").removeClass("e-error"),document.getElementById("custom-attribute-dialog").ej2_instances[0].hide();var e=("undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?document.getElementById("UsersAttributesGrid"):siteCreation?document.getElementById("AddSiteAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0];e.clearSelection()}function showSavedAttributes(){var e=("undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?document.getElementById("UsersAttributesGrid"):siteCreation?document.getElementById("AddSiteAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0];customAttributeInfo=e.getCurrentViewRecords()[e.getSelectedRowIndexes()],document.getElementById("custom-attribute-name").ej2_instances[0].value=customAttributeInfo.Name,document.getElementById("custom-attribute-descrition").ej2_instances[0].value=customAttributeInfo.Description,customAttributeInfo.CanEncrypt||(document.getElementById("custom-attribute-value").ej2_instances[0].value=customAttributeInfo.Value),$("#encrypt-custom-attribute").prop("checked",customAttributeInfo.CanEncrypt),editCustomAttributeId=customAttributeInfo.CustomAttributeId}function showCustomAttribute(){document.getElementById("custom-attribute-dialog").ej2_instances[0].header=isAttributeEdit?window.Server.App.LocalizationContent.EditCustomAttribute:window.Server.App.LocalizationContent.AddCustomAttribute,updateValidationMessages(),$("#custom-attribute-content").show(),$("#custom-attribute-name").focus()}function saveCustomAttribute(){var e,t,n={Name:$("#custom-attribute-name").val().trim(),Value:document.getElementById("custom-attribute-value").ej2_instances[0].value,Description:document.getElementById("custom-attribute-descrition").ej2_instances[0].value,CanEncrypt:$("#encrypt-custom-attribute").is(":checked"),CreatedDate:new Date,ModifiedDate:new Date,CustomAttributeId:customAttributeId},i="undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl;i&&(n={Name:$("#custom-attribute-name").val().trim(),Value:document.getElementById("custom-attribute-value").ej2_instances[0].value,Description:document.getElementById("custom-attribute-descrition").ej2_instances[0].value,CanEncrypt:$("#encrypt-custom-attribute").is(":checked"),CreatedDate:new Date,ModifiedDate:new Date,CustomAttributeId:customAttributeId,UserId:UserId=userId}),customAttributeId++,showWaitingPopup("custom-attribute-dialog"),!i&&siteCreation?addSiteLevelAttribute(n):(e={customAttribute:JSON.stringify(n)},i?(e={customAttribute:JSON.stringify(n)},saveCustomAttributeUrl=addUserCustomAttributeUrl):e={customAttribute:JSON.stringify(n),tenantInfoId:tenantInfoId},showWaitingPopup("custom-attribute-dialog"),t=document.getElementById("custom-attribute-dialog").ej2_instances,$.ajax({type:"POST",url:saveCustomAttributeUrl,data:e,success:function(e){e.Status?(getSiteOrUseAttributes(),SuccessAlert(window.Server.App.LocalizationContent.AddCustomAttribute,window.Server.App.LocalizationContent.CustomAttributeSuccess,7e3),hideWaitingPopup("custom-attribute-dialog"),t[0].hide()):(hideWaitingPopup("custom-attribute-dialog"),isEmptyOrWhitespace(e.Message)?(WarningAlert(window.Server.App.LocalizationContent.AddCustomAttribute,window.Server.App.LocalizationContent.CustomAttributeFailure,e.ErrorMessage,7e3),t[0].hide()):($("#custom-attribute-name").addClass("e-error"),$("#custom-attribute-form").valid()))}}))}function beforeCloseAttributeDialog(){updateValidationMessages(),isAttributeEdit=!1,customAttributeInfo="",$("#custom-attribute-form").find(".e-input-group").removeClass("e-error")}function attributeNameCheck(){var e=$("#custom-attribute-name").val().trim(),t={attributeName:e};"undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?(t={attributeName:e,userId:userId},isAttributeNameExistsUrl=isUserCustomAttributeNameExistUrl):t={attributeName:e,tenantInfoId:tenantInfoId},$.ajax({type:"POST",url:isAttributeNameExistsUrl,data:t,success:function(e){e.Status?$("#custom-attribute-name").addClass("e-error"):$("#custom-attribute-name").removeClass("e-error"),$("[name='custom-attribute-name']").valid()}})}function updateCustomAttribute(e){var t,n="undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl,i={Id:e,Name:$("#custom-attribute-name").val().trim(),Value:document.getElementById("custom-attribute-value").ej2_instances[0].value,Description:document.getElementById("custom-attribute-descrition").ej2_instances[0].value,CanEncrypt:$("#encrypt-custom-attribute").is(":checked"),CreatedDate:new Date,ModifiedDate:new Date,CustomAttributeId:editCustomAttributeId};n&&(i={Id:e,Name:$("#custom-attribute-name").val().trim(),Value:document.getElementById("custom-attribute-value").ej2_instances[0].value,Description:document.getElementById("custom-attribute-descrition").ej2_instances[0].value,CanEncrypt:$("#encrypt-custom-attribute").is(":checked"),CreatedDate:new Date,ModifiedDate:new Date,UserId:UserId=userId},updateCustomAttributeUrl=editUserCustomAttributeUrl),showWaitingPopup("custom-attribute-dialog"),siteCreation?updateSiteLevelAttribute(i):(e={customAttribute:JSON.stringify(i)},e=n?{customAttribute:JSON.stringify(i)}:{customAttribute:JSON.stringify(i),tenantInfoId:tenantInfoId},t=document.getElementById("custom-attribute-dialog").ej2_instances,$.ajax({type:"POST",url:updateCustomAttributeUrl,data:e,success:function(e){e.Status?(getSiteOrUseAttributes(),SuccessAlert(window.Server.App.LocalizationContent.EditCustomAttribute,window.Server.App.LocalizationContent.UpdateCustomAttributeSuccess,7e3),hideWaitingPopup("custom-attribute-dialog"),t[0].hide()):(hideWaitingPopup("custom-attribute-dialog"),isEmptyOrWhitespace(e.Message)?(WarningAlert(window.Server.App.LocalizationContent.EditCustomAttribute,window.Server.App.LocalizationContent.UpdateCustomAttributeFailure,e.ErrorMessage,7e3),t[0].hide()):($("#custom-attribute-name").addClass("e-error"),$("#custom-attribute-form").valid()))}}))}function removeCustomAttribute(e){var t="undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl,e={Id:$(e).attr("data-id"),CreatedDate:new Date,ModifiedDate:new Date},n={customAttribute:JSON.stringify(e)},n=t?(deleteCustomAttributeUrl=deleteUserCustomAttributeUrl,{customAttribute:JSON.stringify(e)}):{customAttribute:JSON.stringify(e),tenantInfoId:tenantInfoId};showWaitingPopup("messageBox"),$.ajax({type:"POST",url:deleteCustomAttributeUrl,data:n,success:function(e){e.Status?(getSiteOrUseAttributes(),hideWaitingPopup("messageBox"),SuccessAlert(window.Server.App.LocalizationContent.DeleteCustomAttribute,window.Server.App.LocalizationContent.DeleteCustomAttributeSuccess,7e3)):(hideWaitingPopup("messageBox"),WarningAlert(window.Server.App.LocalizationContent.DeleteCustomAttribute,window.Server.App.LocalizationContent.DeleteCustomAttributeFailure,e.Message,7e3)),hideWaitingPopup("messageBox"),onCloseMessageBox()}})}function editCustomAttribute(e){var t=$(e).attr("data-id"),e=$(e).attr("name");isAttributeEdit=!0,openCustomAttributeDialog(t,e)}function getSiteOrUseAttributes(){"undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?(showWaitingPopup("UsersAttributesGrid"),$.ajax({type:"GET",url:userAttributesUrl,data:{userId:userId},success:function(e){e.Status&&(document.getElementById("UsersAttributesGrid").ej2_instances[0].dataSource=e.Attributes),hideWaitingPopup("UsersAttributesGrid")}})):(showWaitingPopup("SiteAttributesGrid"),$.ajax({type:"GET",url:siteAttributesUrl,data:{tenantInfoId:tenantInfoId},success:function(e){e.Status&&(document.getElementById("SiteAttributesGrid").ej2_instances[0].dataSource=e.Attributes),hideWaitingPopup("SiteAttributesGrid")}}))}function updateValidationMessages(){document.getElementById("custom-attribute-name").ej2_instances[0].value=null,document.getElementById("custom-attribute-value").ej2_instances[0].value=null,document.getElementById("custom-attribute-descrition").ej2_instances[0].value=null,$("#encrypt-custom-attribute").prop("checked",!1),$("#custom-attribute-name, #custom-attribute-value").removeClass("e-error"),$("#custom-attribute-name, #custom-attribute-value").closest(".e-outline").siblings(".custom-attr-validation-errors").html(""),$("#custom-attribute-name, #custom-attribute-value").parent("div").removeClass("e-error")}function deleteConfirmation(t){setTimeout(function(){var e=("undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?document.getElementById("UsersAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0],e=e.getCurrentViewRecords()[e.getSelectedRowIndexes()];messageBox("su-delete",window.Server.App.LocalizationContent.DeleteCustomAttribute,window.Server.App.LocalizationContent.DeleteAttributeConfirm.format(" - <div class='highlight-container'><span class ='highlight-name'>",e.Name,"</span></div>"),"error",function(){removeCustomAttribute(t)},function(){clearAttributeSelection()})},100)}function clearAttributeSelection(){var e=("undefined"!=typeof userAttributesPageUrl&&window.location.pathname+window.location.search==userAttributesPageUrl?document.getElementById("UsersAttributesGrid"):document.getElementById("SiteAttributesGrid")).ej2_instances[0];e.clearSelection(),onCloseMessageBox()}function initialSiteGridCreate(){window.location.search.includes("tab=attributes")&&showWaitingPopup("SiteAttributesGrid")}function addSiteLevelAttribute(e){var t=document.getElementById("custom-attribute-dialog").ej2_instances,e=(addSiteAttribute.push(e),document.getElementById("AddSiteAttributesGrid").ej2_instances[0]);e.dataSource=addSiteAttribute,e.refresh(),hideWaitingPopup("custom-attribute-dialog"),t[0].hide()}function nameCheckAtAddTenant(){var n=$("#custom-attribute-name").val().trim();$.each(addSiteAttribute,function(e,t){t.Name.toLowerCase()==n.toLowerCase()&&$("#custom-attribute-name").addClass("e-error"),$("[name='custom-attribute-name']").valid()})}function updateSiteLevelAttribute(e){var t=document.getElementById("custom-attribute-dialog").ej2_instances,n=document.getElementById("AddSiteAttributesGrid").ej2_instances[0];addSiteAttribute.splice(currentIndex,1),addSiteAttribute.push(e),n.refresh(),hideWaitingPopup("custom-attribute-dialog"),t[0].hide()}function removeSiteAttribute(){var e=document.getElementById("AddSiteAttributesGrid").ej2_instances[0];addSiteAttribute.splice(e.getSelectedRowIndexes(),1),e.refresh()}function multiLineInputBoxInitialization(e){new ejs.inputs.TextBox({cssClass:"e-outline e-custom e-non-float",floatLabelType:"Never",multiline:!0}).appendTo(e)}function CheckMailSettingsAndNotify(t,n,i){$.ajax({type:"POST",url:checkMailSettingUrl,success:function(e){e.result||0==e.activation?void 0!==n&&n.html("<span class='SuccessMessage'>"+i+"</span>"):e.result||1!=e.isAdmin||1!=e.activation||void 0!==n&&n.html("<span class='alert alert-danger'>"+t+"</span>")}})}function ValidateMailSettingsAndShowToast(t,n,i){$.ajax({type:"POST",url:checkMailSettingUrl,success:function(e){e.result||0==e.activation?void 0!==n&&SuccessAlert("Activate User",i,7e3):e.result||1!=e.isAdmin||1!=e.activation||void 0!==n&&n.html("<span class='alert alert-danger'>"+t+"</span>")}})}function onUserAddDialogClose(){document.getElementById("user-add-dialog").ej2_instances[0].hide(),$(".form input[type='text']").val(""),$("#password_policy_rules").remove(),$("#dialog-container").find("div").removeClass("e-error")}function onUserAddDialogOpen(){$("#add-user").removeAttr("disabled"),$(".dropdown").removeClass("open"),document.getElementById("user-add-dialog").ej2_instances[0].show(),$("#new-password").val(""),$(".show-hide-password").removeClass("su-hide").addClass("su-show"),$(".e-dialog-icon").attr("title","Close"),$(".validation").closest("div").removeClass("has-error"),$(".useradd-validation-messages").css("display","none"),$("#dialog-container").find("div").removeClass("e-error"),CheckMailSettingsAndNotify(window.Server.App.LocalizationContent.ToSendAccountActivation,$(".validation-message"),"")}$(document).ready(function(){var e=$("#add-custom-attribute"),e=(e.length&&e.on("click",function(){openCustomAttributeDialog()}),$("#add-tenant-site")),e=(e.length&&e.on("click",function(){openCustomAttributeDialog(null,"addtenant")}),$("#recovery-code-copy")),e=(e.length&&e.on("click",function(){copyToClipboard("#copy-recovery","#recovery-code-copy")}),$("#remove-user-attribute")),e=(e.length&&e.on("click",function(){deleteConfirmation(this)}),new ejs.inputs.TextBox({cssClass:"e-outline e-custom e-non-float",floatLabelType:"Never"}));String.prototype.format=function(){for(k in a=this,arguments)a=a.replace("{"+k+"}",arguments[k]);return a},e.appendTo("#custom-attribute-name"),multiLineInputBoxInitialization("#custom-attribute-value"),multiLineInputBoxInitialization("#custom-attribute-descrition"),$("#custom-attribute-form").validate({errorElement:"span",onkeyup:function(e,t){9!==t.keyCode&&$(e).valid()},onfocusout:function(e){$(e).valid()},rules:{"custom-attribute-name":{isRequired:!0,isValidName:!0,isAttributeExist:!0,maxlength:255},"custom-attribute-value":{isRequired:!0,maxlength:4e3},"custom-attribute-description":{maxlength:1024}},highlight:function(e){$(e).closest("div").addClass("e-error"),$(e).closest(".e-outline").addClass("e-error")},unhighlight:function(e){$(e).closest("div").removeClass("e-error"),$(e).closest(".e-outline").removeClass("e-error"),$(e).closest(".e-outline").siblings(".custom-attr-validation-errors").html("")},errorPlacement:function(e,t){$(t).closest(".e-outline").siblings(".custom-attr-validation-errors").html(e)},messages:{"custom-attribute-name":{isRequired:window.Server.App.LocalizationContent.AttributeNameValidator,maxlength:window.Server.App.LocalizationContent.AttributeLengthValidator.format("name","255")},"custom-attribute-value":{isRequired:window.Server.App.LocalizationContent.AttributeValueValidator,maxlength:window.Server.App.LocalizationContent.AttributeLengthValidator.format("value","4000")},"custom-attribute-description":{maxlength:window.Server.App.LocalizationContent.AttributeLengthValidator.format("description","1024")}}}),$.validator.addMethod("isRequired",function(e,t){return!isEmptyOrWhitespace(e)},window.Server.App.LocalizationContent.EnterName),$.validator.addMethod("isValidName",function(e,t){return IsValidName("name",e)},window.Server.App.LocalizationContent.AvoidSpecailCharacters),$.validator.addMethod("isAttributeExist",function(e,t){return isAttributeExist(e)},window.Server.App.LocalizationContent.IsAttributeNameExist),$.validator.addMethod("ismaxlength",function(e,t,n){return e.length<=n},window.Server.App.LocalizationContent.AttributeLengthValidator)}),$(document).on("keyup focusout","#custom-attribute-name",function(e){var t=$("#custom-attribute-name").val().toLowerCase().trim();"focusout"===e.type?isEmptyOrWhitespace(t)||!isEmptyOrWhitespace(customAttributeInfo)&&(isEmptyOrWhitespace(customAttributeInfo)||customAttributeInfo.Name.toLowerCase()==t)||(siteCreation?nameCheckAtAddTenant:attributeNameCheck)():($("#custom-attribute-name").removeClass("e-error"),$("[name='custom-attribute-name']").valid())}),$(document).ready(function(){addPlacehoder("#user-add-dialog"),createWaitingPopup("user-add-dialog"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.AddUser,content:document.getElementById("dialog-container"),showCloseIcon:!0,width:"500px",height:"auto",isModal:!0,visible:!1,closeOnEscape:!0,animationSettings:{effect:"Zoom"},close:"onUserAddDialogClose"}).appendTo("#user-add-dialog"),$.validator.addMethod("isRequired",function(e,t){return!isEmptyOrWhitespace(e)},window.Server.App.LocalizationContent.EnterName),$.validator.addMethod("hasWhiteSpace",function(e,t){return!/\s/g.test(e)},window.Server.App.LocalizationContent.UserNameHasWhiteSpace),$.validator.addMethod("isValidUsername",function(e,t){return IsValidUsername(e)},window.Server.App.LocalizationContent.UserNameSpecialCharacterValicator),$.validator.addMethod("isValidUsernameLength",function(e,t){return IsValidUsernameLength(e)},window.Server.App.LocalizationContent.UsernameExceeds),$.validator.addMethod("isValidEmail",function(e,t){return""==e.trim()||IsEmail(e)},window.Server.App.LocalizationContent.InvalidEmailAddress),$.validator.addMethod("isValidName",function(e,t){return IsValidName("name",e)},window.Server.App.LocalizationContent.AvoidSpecailCharacters),$.validator.addMethod("additionalSpecialCharValidation",function(e,t){if(/^[a-zA-Z_0-9`'~!\$\^()=\-\.\{\}À-ÖØ-öø-ÿŒœŸÿ€ß ]+$/.test(e)||""===e)return!0},window.Server.App.LocalizationContent.AvoidSpecailCharacters),$("#dialog-container").validate({errorElement:"span",onkeyup:function(e,t){9!=t.keyCode&&(isKeyUp=!0,$(e).valid(),isKeyUp=!1)},onfocusout:function(e){$(e).valid()},rules:{"user-name":{isRequired:!0,isValidUsername:!0,isValidUsernameLength:!0},"email-address":{isRequired:{depends:function(){return!0===isEmailRequired}},isValidName:!0,isValidEmail:!0},"first-name":{isRequired:!0,isValidName:!0,additionalSpecialCharValidation:!0},"last-name":{isValidName:!0,additionalSpecialCharValidation:!0},"user-password":{isRequired:!0,isUserPasswordValid:!0}},highlight:function(e){$(e).closest("div").addClass("has-error"),passwordBoxHightlight(e)},unhighlight:function(e){passwordBoxUnhightlight(e),$(e).closest("div").removeClass("has-error"),$(e).closest("div").find("span.useradd-validation-messages").html("")},errorPlacement:function(e,t){$(t).closest("div").find("span.useradd-validation-messages").html(e.html()).css("display","block")},messages:{"email-address":{isRequired:window.Server.App.LocalizationContent.EmailValidator},"user-name":{isRequired:window.Server.App.LocalizationContent.UserNameValidator},"first-name":{isRequired:window.Server.App.LocalizationContent.FirstNameValidator},"user-password":{isRequired:window.Server.App.LocalizationContent.PasswordValidator}}}),$.validator.addMethod("isUserPasswordValid",function(e,t){var n=new Array;if(n.push(validateUserpassword.p_policy_uppercase),n.push(validateUserpassword.p_policy_lowercase),n.push(validateUserpassword.p_policy_number),n.push(validateUserpassword.p_policy_specialcharacter),n.push(validateUserpassword.p_policy_length),passwordPolicyPopover("#new-password",e),$("#password_policy_rules li>span.su-password-tick").length==$("#password_policy_rules li>span:not(.content)").length)return!0},""),$(document).on("keyup","#dialog-container",function(e){13==e.keyCode&&($("#cancel-user").is(":focus")?onUserAddDialogClose():$("#add-user").is(":focus")?e.preventDefault():$("input#add-user").trigger("click"))}),$(document).on("click","#create-user",function(){$("#add-user").removeAttr("disabled"),$(".form input[type='text']").val(""),document.getElementById("user_grid").ej2_instances[0].clearSelection(),$(".validation").closest("div").removeClass("has-error"),$(".useradd-validation-messages").css("display","none")}),$(document).on("keyup","#new-password",function(){passwordPolicyPopover("#new-password",$("#new-password").val()),$("#new-password").valid()})}),$(document).on("click","#create-user,#new-user-dropdown",function(){onUserAddDialogOpen()}),$(document).on("click","#cancel-user",function(){onUserAddDialogClose()});var validateUserpassword={p_policy_uppercase:function(e){this.name="p_policy_uppercase";if(/^(?=.*[A-Z]).+$/.test(e))return"p_policy_uppercase"},p_policy_lowercase:function(e){this.name="p_policy_lowercase";if(/^(?=.*[a-z]).+$/.test(e))return"p_policy_lowercase"},p_policy_number:function(e){this.name="p_policy_number";if(/^(?=.*\d).+$/.test(e))return"p_policy_number"},p_policy_specialcharacter:function(e){this.name="p_policy_specialcharacter";if(/^(?=.*(_|[^\w])).+$/.test(e))return"p_policy_specialcharacter"},p_policy_length:function(e){if(this.name="p_policy_length",e.length>=$('meta[name="password_policy:minlength"]').attr("content"))return"p_policy_length"}};function passwordBoxHightlight(e){var t="",n=($(e).closest("div").addClass("e-error"),"popover"===$("#new-password").data("toggle")),i=n?$("#password_policy_rules").find("li>span:not(.content)"):$("#password_policy_rules").find("li>span"),a=n?"su-password-tick":"su-tick";if("new-password"==$(e).attr("id")){for(var s=0;s<i.length;s++)$(i[s]).attr("class")==a?$(e).closest("div").removeClass("e-error"):t="unsatisfied-rule";""!=t&&null!=t&&$(e).closest("div").addClass("e-error")}}function passwordBoxUnhightlight(e){var t="",n=($(e).closest("div").removeClass("e-error"),"popover"===$("#new-password").data("toggle")),i=n?$("#password_policy_rules").find("li>span:not(.content)"):$("#password_policy_rules").find("li>span"),a=n?"su-password-tick":"su-tick";if("new-password"==$(e).attr("id")){for(var s=0;s<i.length;s++)$(i[s]).attr("class")!=a&&(t="unsatisfied-rule"),$(i[s]).attr("class")==a&&$(e).closest("div").removeClass("e-error");""!=t&&null!=t&&($(e).closest("div").addClass("e-error"),t="")}$(e).closest("div").find(".password-validate-holder").html("")}function passwordPolicyPopover(e,t){var n=$(e),i=(n.popover("show"),new Array);i.push(validateUserpassword.p_policy_uppercase),i.push(validateUserpassword.p_policy_lowercase),i.push(validateUserpassword.p_policy_number),i.push(validateUserpassword.p_policy_specialcharacter),i.push(validateUserpassword.p_policy_length),$.each(i,function(e){e=i[e];null!=(ruleName=e(t))&&""!=ruleName?n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").hasClass("su-password-tick")||n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").addClass("su-password-tick").removeClass("icon"):(ruleName=name,n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").hasClass("su-password-tick")&&n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").removeClass("su-password-tick").addClass("icon")),ruleName=""})}function fnCopyClientCredentials(e,t){var n;void 0!==navigator.clipboard?(n=$(e).val(),navigator.clipboard.writeText(n)):((n=$(e)).attr("type","text").select(),document.execCommand("copy"),"#api-copy-client-secret"!=t&&"#copy-client-secret"!=t||n.attr("type","password")),setTimeout(function(){$(t).attr("data-original-title",window.Server.App.LocalizationContent.Copied),$(t).tooltip("show")},200),setTimeout(function(){$(t).attr("data-original-title",window.Server.App.LocalizationContent.ClickToCopy),$(t).tooltip()},3e3)}function onMasterDialogOpen(n,e){$.ajax({async:!1,type:"GET",url:masterSite,data:{tenantType:e},success:function(e){var t;e.Success?($(".site-master").hide(),(t=document.getElementById("master-site-change").ej2_instances)[0].showCloseIcon=!0,t[0].close=onCloseMasterDialog,t[0].content=window.Server.App.LocalizationContent.OnStartupMessage.format("<span class='tenant-name'>",e.data,"</span> <span class='conform-message'>",", <span class='tenant-name'>",n,"</span> ,","</span>"),document.getElementById("master-site-change").ej2_instances[0].show()):(onCloseMasterDialog(),WarningAlert(window.Server.App.LocalizationContent.Master,window.Server.App.LocalizationContent.ErrorMessageDescription,e.Message,7e3))}})}function updateMasterTenant(){onCloseMasterDialog(),$.ajax({type:"POST",url:updateMasterTenantUrl,data:{TenantInfoId:UpdateTenantId},success:function(e){e.Success?SuccessAlert(window.Server.App.LocalizationContent.Master,e.Message,7e3):WarningAlert(window.Server.App.LocalizationContent.Master,window.Server.App.LocalizationContent.ErrorMessageDescription,e.Message,7e3),siteGridRefresh()}})}function getMasterSite(e){$.ajax({type:"GET",data:{tenantType:e},url:getMasterSiteUrl,success:function(e){e.Success?($(".update-master").hide(),document.getElementById("master-site-change").ej2_instances[0].content=window.Server.App.LocalizationContent.OnStartupMessage.format("<span class='tenant-name'>",e.data,"</span> <span class='conform-message'>","","","","</span>"),document.getElementById("master-site-change").ej2_instances[0].show()):(onMasterDialogClose(),WarningAlert(window.Server.App.LocalizationContent.Master,window.Server.App.LocalizationContent.ErrorMessageDescription,e.Message,7e3))}})}function siteGridRefresh(){document.getElementById("tenants_grid").ej2_instances[0].refresh()}function onCloseMasterDialog(){document.getElementById("master-site-change").ej2_instances[0].hide()}function onMasterDialog(){$(".make-master-checkbox").prop("checked",!0),onCloseMasterDialog()}function onMasterDialogClose(){$(".make-master-checkbox").prop("checked",!1),onCloseMasterDialog()}$.validator.addMethod("notSameAsCurrent",function(e,t){var n=$("input[name='current-password']").val();return this.optional(t)||e!==n},window.Server.App.LocalizationContent.PasswordSameAsCurrent),$.validator.addMethod("isValidPassword",function(e,t){var n=new Array;if(n.push(validateUserpassword.p_policy_uppercase),n.push(validateUserpassword.p_policy_lowercase),n.push(validateUserpassword.p_policy_number),n.push(validateUserpassword.p_policy_specialcharacter),n.push(validateUserpassword.p_policy_length),passwordPolicyPopover("#new-password",e),$("#password_policy_rules li>span.su-password-tick").length==$("#password_policy_rules li>span:not(.content)").length)return!0},""),$(function(){$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?($(this).siblings("input").attr("type","text").val(),$(this).removeClass("su-show").addClass("su-hide").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touchstart",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("touchend",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),window.innerWidth<1041&&$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("click",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show").addClass("su-hide").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touch",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show"),$(this).addClass("su-hide")):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide"),$(this).addClass("su-show"))})}),$(function(){$(document).on("click",".show-client-secret",function(){$(".my-secret").is(":password")?($(".my-secret").attr("type","text").val(),$(this).removeClass("su-show").addClass("su-hide").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(".my-secret").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touch",".show-client-secret",function(){$(".my-secret").is(":password")?($(".my-secret").attr("type","text"),$(this).removeClass("su-show").addClass("su-hide")):($(".my-secret").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show"))})}),$(document).on("click","#api-copy-client-id",function(){copyToClipboard("#myApiId","#api-copy-client-id")}),$(document).on("click","#api-copy-client-secret",function(){copyToClipboard("#my-api-secret","#api-copy-client-secret")}),$(document).ready(function(){createWaitingPopup("master-site-change"),String.prototype.format=function(){for(k in a=this,arguments)a=a.replace("{"+k+"}",arguments[k]);return a},new ej.popups.Dialog({header:window.Server.App.LocalizationContent.Master,buttons:buttons=[{click:updateMasterTenant,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0,cssClass:"provide-access-button update-master"}},{click:onCloseMasterDialog,buttonModel:{content:window.Server.App.LocalizationContent.NoButton,cssClass:"secondary-button update-master"}},{click:onMasterDialog,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0,cssClass:"provide-access-button site-master"}},{click:onMasterDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton,cssClass:"secondary-button site-master"}}],width:"472px",height:"auto",visible:!1,isModal:!0}).appendTo("#master-site-change"),$("#change-master").change(function(){$("#change-master").is(":checked")?getMasterSite(tenantType="BoldBIOnPremise"==(tenantType=document.getElementById("tenant-type").ej2_instances[0].value)?3:4):onMasterDialog()})});