@{
    var favicon = (ViewBag.Favicon != null) ? ViewBag.Favicon : Url.Content($"{CloudAppConfig.TenantManagementUrl(Context).TrimEnd('/')}/logos?type=favicon"); ;
}

<link id="favicon" rel="icon" href="@favicon" />

<script nonce="@Context.Items["ScriptNonce"]" type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
        var errorLink = '@Url.Content("~/images/" + GlobalAppSettings.Branding + "/application/" + CloudAppConfig.Branding.BrandingImages.FavIcon)';
        var faviconLink = document.getElementById("favicon");

        if (faviconLink) {
            faviconLink.addEventListener("error", function () {               
                this.href = errorLink;
            });
        }
    });
</script>
